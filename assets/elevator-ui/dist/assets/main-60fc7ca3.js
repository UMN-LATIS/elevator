var HL=Object.defineProperty;var GL=(e,t,i)=>t in e?HL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var Tg=(e,t,i)=>(GL(e,typeof t!="symbol"?t+"":t,i),i);function s_(e,t){const i=Object.create(null),r=e.split(",");for(let s=0;s<r.length;s++)i[r[s]]=!0;return t?s=>!!i[s.toLowerCase()]:s=>!!i[s]}const Li={},Vd=[],Xa=()=>{},WL=()=>!1,qL=/^on[^a-z]/,qp=e=>qL.test(e),Px=e=>e.startsWith("onUpdate:"),ji=Object.assign,Dx=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},ZL=Object.prototype.hasOwnProperty,bi=(e,t)=>ZL.call(e,t),xn=Array.isArray,Hd=e=>vh(e)==="[object Map]",xu=e=>vh(e)==="[object Set]",zS=e=>vh(e)==="[object Date]",KL=e=>vh(e)==="[object RegExp]",Un=e=>typeof e=="function",Qi=e=>typeof e=="string",Tp=e=>typeof e=="symbol",Ri=e=>e!==null&&typeof e=="object",Lx=e=>Ri(e)&&Un(e.then)&&Un(e.catch),yI=Object.prototype.toString,vh=e=>yI.call(e),XL=e=>vh(e).slice(8,-1),bI=e=>vh(e)==="[object Object]",Ox=e=>Qi(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,rp=s_(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),a_=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},YL=/-(\w)/g,$s=a_(e=>e.replace(YL,(t,i)=>i?i.toUpperCase():"")),JL=/\B([A-Z])/g,ba=a_(e=>e.replace(JL,"-$1").toLowerCase()),Zp=a_(e=>e.charAt(0).toUpperCase()+e.slice(1)),sp=a_(e=>e?`on${Zp(e)}`:""),Jd=(e,t)=>!Object.is(e,t),Gd=(e,t)=>{for(let i=0;i<e.length;i++)e[i](t)},Sv=(e,t,i)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:i})},Tv=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Ev=e=>{const t=Qi(e)?Number(e):NaN;return isNaN(t)?e:t};let BS;const vb=()=>BS||(BS=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),QL="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console",eO=s_(QL);function wu(e){if(xn(e)){const t={};for(let i=0;i<e.length;i++){const r=e[i],s=Qi(r)?rO(r):wu(r);if(s)for(const u in s)t[u]=s[u]}return t}else{if(Qi(e))return e;if(Ri(e))return e}}const tO=/;(?![^(]*\))/g,nO=/:([^]+)/,iO=/\/\*[^]*?\*\//g;function rO(e){const t={};return e.replace(iO,"").split(tO).forEach(i=>{if(i){const r=i.split(nO);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function kn(e){let t="";if(Qi(e))t=e;else if(xn(e))for(let i=0;i<e.length;i++){const r=kn(e[i]);r&&(t+=r+" ")}else if(Ri(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}function sO(e){if(!e)return null;let{class:t,style:i}=e;return t&&!Qi(t)&&(e.class=kn(t)),i&&(e.style=wu(i)),e}const aO="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",oO=s_(aO);function xI(e){return!!e||e===""}function lO(e,t){if(e.length!==t.length)return!1;let i=!0;for(let r=0;i&&r<e.length;r++)i=uc(e[r],t[r]);return i}function uc(e,t){if(e===t)return!0;let i=zS(e),r=zS(t);if(i||r)return i&&r?e.getTime()===t.getTime():!1;if(i=Tp(e),r=Tp(t),i||r)return e===t;if(i=xn(e),r=xn(t),i||r)return i&&r?lO(e,t):!1;if(i=Ri(e),r=Ri(t),i||r){if(!i||!r)return!1;const s=Object.keys(e).length,u=Object.keys(t).length;if(s!==u)return!1;for(const d in e){const l=e.hasOwnProperty(d),m=t.hasOwnProperty(d);if(l&&!m||!l&&m||!uc(e[d],t[d]))return!1}}return String(e)===String(t)}function o_(e,t){return e.findIndex(i=>uc(i,t))}const xt=e=>Qi(e)?e:e==null?"":xn(e)||Ri(e)&&(e.toString===yI||!Un(e.toString))?JSON.stringify(e,wI,2):String(e),wI=(e,t)=>t&&t.__v_isRef?wI(e,t.value):Hd(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[r,s])=>(i[`${r} =>`]=s,i),{})}:xu(t)?{[`Set(${t.size})`]:[...t.values()]}:Ri(t)&&!xn(t)&&!bI(t)?String(t):t;let Ks;class Rx{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Ks,!t&&Ks&&(this.index=(Ks.scopes||(Ks.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const i=Ks;try{return Ks=this,t()}finally{Ks=i}}}on(){Ks=this}off(){Ks=this.parent}stop(t){if(this._active){let i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].stop();for(i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.scopes)for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Fx(e){return new Rx(e)}function SI(e,t=Ks){t&&t.active&&t.effects.push(e)}function Kp(){return Ks}function Xp(e){Ks&&Ks.cleanups.push(e)}const $x=e=>{const t=new Set(e);return t.w=0,t.n=0,t},TI=e=>(e.w&dc)>0,EI=e=>(e.n&dc)>0,cO=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=dc},uO=e=>{const{deps:t}=e;if(t.length){let i=0;for(let r=0;r<t.length;r++){const s=t[r];TI(s)&&!EI(s)?s.delete(e):t[i++]=s,s.w&=~dc,s.n&=~dc}t.length=i}},Iv=new WeakMap;let qf=0,dc=1;const _b=30;let Wa;const cu=Symbol(""),yb=Symbol("");class Yp{constructor(t,i=null,r){this.fn=t,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,SI(this,r)}run(){if(!this.active)return this.fn();let t=Wa,i=nc;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Wa,Wa=this,nc=!0,dc=1<<++qf,qf<=_b?cO(this):NS(this),this.fn()}finally{qf<=_b&&uO(this),dc=1<<--qf,Wa=this.parent,nc=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Wa===this?this.deferStop=!0:this.active&&(NS(this),this.onStop&&this.onStop(),this.active=!1)}}function NS(e){const{deps:t}=e;if(t.length){for(let i=0;i<t.length;i++)t[i].delete(e);t.length=0}}function dO(e,t){e.effect&&(e=e.effect.fn);const i=new Yp(e);t&&(ji(i,t),t.scope&&SI(i,t.scope)),(!t||!t.lazy)&&i.run();const r=i.run.bind(i);return r.effect=i,r}function hO(e){e.effect.stop()}let nc=!0;const II=[];function _h(){II.push(nc),nc=!1}function yh(){const e=II.pop();nc=e===void 0?!0:e}function zs(e,t,i){if(nc&&Wa){let r=Iv.get(e);r||Iv.set(e,r=new Map);let s=r.get(i);s||r.set(i,s=$x()),CI(s)}}function CI(e,t){let i=!1;qf<=_b?EI(e)||(e.n|=dc,i=!TI(e)):i=!e.has(Wa),i&&(e.add(Wa),Wa.deps.push(e))}function dl(e,t,i,r,s,u){const d=Iv.get(e);if(!d)return;let l=[];if(t==="clear")l=[...d.values()];else if(i==="length"&&xn(e)){const m=Number(r);d.forEach((g,x)=>{(x==="length"||x>=m)&&l.push(g)})}else switch(i!==void 0&&l.push(d.get(i)),t){case"add":xn(e)?Ox(i)&&l.push(d.get("length")):(l.push(d.get(cu)),Hd(e)&&l.push(d.get(yb)));break;case"delete":xn(e)||(l.push(d.get(cu)),Hd(e)&&l.push(d.get(yb)));break;case"set":Hd(e)&&l.push(d.get(cu));break}if(l.length===1)l[0]&&bb(l[0]);else{const m=[];for(const g of l)g&&m.push(...g);bb($x(m))}}function bb(e,t){const i=xn(e)?e:[...e];for(const r of i)r.computed&&jS(r);for(const r of i)r.computed||jS(r)}function jS(e,t){(e!==Wa||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}function fO(e,t){var i;return(i=Iv.get(e))==null?void 0:i.get(t)}const pO=s_("__proto__,__v_isRef,__isVue"),AI=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Tp)),mO=l_(),gO=l_(!1,!0),vO=l_(!0),_O=l_(!0,!0),US=yO();function yO(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...i){const r=ci(this);for(let u=0,d=this.length;u<d;u++)zs(r,"get",u+"");const s=r[t](...i);return s===-1||s===!1?r[t](...i.map(ci)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...i){_h();const r=ci(this)[t].apply(this,i);return yh(),r}}),e}function bO(e){const t=ci(this);return zs(t,"has",e),t.hasOwnProperty(e)}function l_(e=!1,t=!1){return function(r,s,u){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_isShallow")return t;if(s==="__v_raw"&&u===(e?t?RI:OI:t?LI:DI).get(r))return r;const d=xn(r);if(!e){if(d&&bi(US,s))return Reflect.get(US,s,u);if(s==="hasOwnProperty")return bO}const l=Reflect.get(r,s,u);return(Tp(s)?AI.has(s):pO(s))||(e||zs(r,"get",s),t)?l:Gi(l)?d&&Ox(s)?l:l.value:Ri(l)?e?Su(l):Nr(l):l}}const xO=MI(),wO=MI(!0);function MI(e=!1){return function(i,r,s,u){let d=i[r];if(fu(d)&&Gi(d)&&!Gi(s))return!1;if(!e&&(!Ep(s)&&!fu(s)&&(d=ci(d),s=ci(s)),!xn(i)&&Gi(d)&&!Gi(s)))return d.value=s,!0;const l=xn(i)&&Ox(r)?Number(r)<i.length:bi(i,r),m=Reflect.set(i,r,s,u);return i===ci(u)&&(l?Jd(s,d)&&dl(i,"set",r,s):dl(i,"add",r,s)),m}}function SO(e,t){const i=bi(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&i&&dl(e,"delete",t,void 0),r}function TO(e,t){const i=Reflect.has(e,t);return(!Tp(t)||!AI.has(t))&&zs(e,"has",t),i}function EO(e){return zs(e,"iterate",xn(e)?"length":cu),Reflect.ownKeys(e)}const kI={get:mO,set:xO,deleteProperty:SO,has:TO,ownKeys:EO},PI={get:vO,set(e,t){return!0},deleteProperty(e,t){return!0}},IO=ji({},kI,{get:gO,set:wO}),CO=ji({},PI,{get:_O}),zx=e=>e,c_=e=>Reflect.getPrototypeOf(e);function Eg(e,t,i=!1,r=!1){e=e.__v_raw;const s=ci(e),u=ci(t);i||(t!==u&&zs(s,"get",t),zs(s,"get",u));const{has:d}=c_(s),l=r?zx:i?Nx:Ip;if(d.call(s,t))return l(e.get(t));if(d.call(s,u))return l(e.get(u));e!==s&&e.get(t)}function Ig(e,t=!1){const i=this.__v_raw,r=ci(i),s=ci(e);return t||(e!==s&&zs(r,"has",e),zs(r,"has",s)),e===s?i.has(e):i.has(e)||i.has(s)}function Cg(e,t=!1){return e=e.__v_raw,!t&&zs(ci(e),"iterate",cu),Reflect.get(e,"size",e)}function VS(e){e=ci(e);const t=ci(this);return c_(t).has.call(t,e)||(t.add(e),dl(t,"add",e,e)),this}function HS(e,t){t=ci(t);const i=ci(this),{has:r,get:s}=c_(i);let u=r.call(i,e);u||(e=ci(e),u=r.call(i,e));const d=s.call(i,e);return i.set(e,t),u?Jd(t,d)&&dl(i,"set",e,t):dl(i,"add",e,t),this}function GS(e){const t=ci(this),{has:i,get:r}=c_(t);let s=i.call(t,e);s||(e=ci(e),s=i.call(t,e)),r&&r.call(t,e);const u=t.delete(e);return s&&dl(t,"delete",e,void 0),u}function WS(){const e=ci(this),t=e.size!==0,i=e.clear();return t&&dl(e,"clear",void 0,void 0),i}function Ag(e,t){return function(r,s){const u=this,d=u.__v_raw,l=ci(d),m=t?zx:e?Nx:Ip;return!e&&zs(l,"iterate",cu),d.forEach((g,x)=>r.call(s,m(g),m(x),u))}}function Mg(e,t,i){return function(...r){const s=this.__v_raw,u=ci(s),d=Hd(u),l=e==="entries"||e===Symbol.iterator&&d,m=e==="keys"&&d,g=s[e](...r),x=i?zx:t?Nx:Ip;return!t&&zs(u,"iterate",m?yb:cu),{next(){const{value:w,done:I}=g.next();return I?{value:w,done:I}:{value:l?[x(w[0]),x(w[1])]:x(w),done:I}},[Symbol.iterator](){return this}}}}function Fl(e){return function(...t){return e==="delete"?!1:this}}function AO(){const e={get(u){return Eg(this,u)},get size(){return Cg(this)},has:Ig,add:VS,set:HS,delete:GS,clear:WS,forEach:Ag(!1,!1)},t={get(u){return Eg(this,u,!1,!0)},get size(){return Cg(this)},has:Ig,add:VS,set:HS,delete:GS,clear:WS,forEach:Ag(!1,!0)},i={get(u){return Eg(this,u,!0)},get size(){return Cg(this,!0)},has(u){return Ig.call(this,u,!0)},add:Fl("add"),set:Fl("set"),delete:Fl("delete"),clear:Fl("clear"),forEach:Ag(!0,!1)},r={get(u){return Eg(this,u,!0,!0)},get size(){return Cg(this,!0)},has(u){return Ig.call(this,u,!0)},add:Fl("add"),set:Fl("set"),delete:Fl("delete"),clear:Fl("clear"),forEach:Ag(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(u=>{e[u]=Mg(u,!1,!1),i[u]=Mg(u,!0,!1),t[u]=Mg(u,!1,!0),r[u]=Mg(u,!0,!0)}),[e,i,t,r]}const[MO,kO,PO,DO]=AO();function u_(e,t){const i=t?e?DO:PO:e?kO:MO;return(r,s,u)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(bi(i,s)&&s in r?i:r,s,u)}const LO={get:u_(!1,!1)},OO={get:u_(!1,!0)},RO={get:u_(!0,!1)},FO={get:u_(!0,!0)},DI=new WeakMap,LI=new WeakMap,OI=new WeakMap,RI=new WeakMap;function $O(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function zO(e){return e.__v_skip||!Object.isExtensible(e)?0:$O(XL(e))}function Nr(e){return fu(e)?e:d_(e,!1,kI,LO,DI)}function FI(e){return d_(e,!1,IO,OO,LI)}function Su(e){return d_(e,!0,PI,RO,OI)}function tu(e){return d_(e,!0,CO,FO,RI)}function d_(e,t,i,r,s){if(!Ri(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const u=s.get(e);if(u)return u;const d=zO(e);if(d===0)return e;const l=new Proxy(e,d===2?r:i);return s.set(e,l),l}function Co(e){return fu(e)?Co(e.__v_raw):!!(e&&e.__v_isReactive)}function fu(e){return!!(e&&e.__v_isReadonly)}function Ep(e){return!!(e&&e.__v_isShallow)}function Bx(e){return Co(e)||fu(e)}function ci(e){const t=e&&e.__v_raw;return t?ci(t):e}function Jp(e){return Sv(e,"__v_skip",!0),e}const Ip=e=>Ri(e)?Nr(e):e,Nx=e=>Ri(e)?Su(e):e;function jx(e){nc&&Wa&&(e=ci(e),CI(e.dep||(e.dep=$x())))}function h_(e,t){e=ci(e);const i=e.dep;i&&bb(i)}function Gi(e){return!!(e&&e.__v_isRef===!0)}function Re(e){return $I(e,!1)}function bh(e){return $I(e,!0)}function $I(e,t){return Gi(e)?e:new BO(e,t)}class BO{constructor(t,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?t:ci(t),this._value=i?t:Ip(t)}get value(){return jx(this),this._value}set value(t){const i=this.__v_isShallow||Ep(t)||fu(t);t=i?t:ci(t),Jd(t,this._rawValue)&&(this._rawValue=t,this._value=i?t:Ip(t),h_(this))}}function NO(e){h_(e)}function ce(e){return Gi(e)?e.value:e}function jO(e){return Un(e)?e():ce(e)}const UO={get:(e,t,i)=>ce(Reflect.get(e,t,i)),set:(e,t,i,r)=>{const s=e[t];return Gi(s)&&!Gi(i)?(s.value=i,!0):Reflect.set(e,t,i,r)}};function Ux(e){return Co(e)?e:new Proxy(e,UO)}class VO{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:i,set:r}=t(()=>jx(this),()=>h_(this));this._get=i,this._set=r}get value(){return this._get()}set value(t){this._set(t)}}function zI(e){return new VO(e)}function f_(e){const t=xn(e)?new Array(e.length):{};for(const i in e)t[i]=BI(e,i);return t}class HO{constructor(t,i,r){this._object=t,this._key=i,this._defaultValue=r,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return fO(ci(this._object),this._key)}}class GO{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Qd(e,t,i){return Gi(e)?e:Un(e)?new GO(e):Ri(e)&&arguments.length>1?BI(e,t,i):Re(e)}function BI(e,t,i){const r=e[t];return Gi(r)?r:new HO(e,t,i)}class WO{constructor(t,i,r,s){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Yp(t,()=>{this._dirty||(this._dirty=!0,h_(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const t=ci(this);return jx(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function qO(e,t,i=!1){let r,s;const u=Un(e);return u?(r=e,s=Xa):(r=e.get,s=e.set),new WO(r,s,u||!s,i)}function ZO(e,...t){}function KO(e,t){}function ol(e,t,i,r){let s;try{s=r?e(...r):e()}catch(u){Tu(u,t,i)}return s}function ta(e,t,i,r){if(Un(e)){const u=ol(e,t,i,r);return u&&Lx(u)&&u.catch(d=>{Tu(d,t,i)}),u}const s=[];for(let u=0;u<e.length;u++)s.push(ta(e[u],t,i,r));return s}function Tu(e,t,i,r=!0){const s=t?t.vnode:null;if(t){let u=t.parent;const d=t.proxy,l=i;for(;u;){const g=u.ec;if(g){for(let x=0;x<g.length;x++)if(g[x](e,d,l)===!1)return}u=u.parent}const m=t.appContext.config.errorHandler;if(m){ol(m,null,10,[e,d,l]);return}}XO(e,i,s,r)}function XO(e,t,i,r=!0){console.error(e)}let Cp=!1,xb=!1;const ns=[];let wo=0;const Wd=[];let rl=null,iu=0;const NI=Promise.resolve();let Vx=null;function Ar(e){const t=Vx||NI;return e?t.then(this?e.bind(this):e):t}function YO(e){let t=wo+1,i=ns.length;for(;t<i;){const r=t+i>>>1;Ap(ns[r])<e?t=r+1:i=r}return t}function p_(e){(!ns.length||!ns.includes(e,Cp&&e.allowRecurse?wo+1:wo))&&(e.id==null?ns.push(e):ns.splice(YO(e.id),0,e),jI())}function jI(){!Cp&&!xb&&(xb=!0,Vx=NI.then(UI))}function JO(e){const t=ns.indexOf(e);t>wo&&ns.splice(t,1)}function Hx(e){xn(e)?Wd.push(...e):(!rl||!rl.includes(e,e.allowRecurse?iu+1:iu))&&Wd.push(e),jI()}function qS(e,t=Cp?wo+1:0){for(;t<ns.length;t++){const i=ns[t];i&&i.pre&&(ns.splice(t,1),t--,i())}}function Cv(e){if(Wd.length){const t=[...new Set(Wd)];if(Wd.length=0,rl){rl.push(...t);return}for(rl=t,rl.sort((i,r)=>Ap(i)-Ap(r)),iu=0;iu<rl.length;iu++)rl[iu]();rl=null,iu=0}}const Ap=e=>e.id==null?1/0:e.id,QO=(e,t)=>{const i=Ap(e)-Ap(t);if(i===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return i};function UI(e){xb=!1,Cp=!0,ns.sort(QO);const t=Xa;try{for(wo=0;wo<ns.length;wo++){const i=ns[wo];i&&i.active!==!1&&ol(i,null,14)}}finally{wo=0,ns.length=0,Cv(),Cp=!1,Vx=null,(ns.length||Wd.length)&&UI()}}let Rd,kg=[];function VI(e,t){var i,r;Rd=e,Rd?(Rd.enabled=!0,kg.forEach(({event:s,args:u})=>Rd.emit(s,...u)),kg=[]):typeof window<"u"&&window.HTMLElement&&!((r=(i=window.navigator)==null?void 0:i.userAgent)!=null&&r.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(u=>{VI(u,t)}),setTimeout(()=>{Rd||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,kg=[])},3e3)):kg=[]}function eR(e,t,...i){if(e.isUnmounted)return;const r=e.vnode.props||Li;let s=i;const u=t.startsWith("update:"),d=u&&t.slice(7);if(d&&d in r){const x=`${d==="modelValue"?"model":d}Modifiers`,{number:w,trim:I}=r[x]||Li;I&&(s=i.map(C=>Qi(C)?C.trim():C)),w&&(s=i.map(Tv))}let l,m=r[l=sp(t)]||r[l=sp($s(t))];!m&&u&&(m=r[l=sp(ba(t))]),m&&ta(m,e,6,s);const g=r[l+"Once"];if(g){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,ta(g,e,6,s)}}function HI(e,t,i=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const u=e.emits;let d={},l=!1;if(!Un(e)){const m=g=>{const x=HI(g,t,!0);x&&(l=!0,ji(d,x))};!i&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}return!u&&!l?(Ri(e)&&r.set(e,null),null):(xn(u)?u.forEach(m=>d[m]=null):ji(d,u),Ri(e)&&r.set(e,d),d)}function m_(e,t){return!e||!qp(t)?!1:(t=t.slice(2).replace(/Once$/,""),bi(e,t[0].toLowerCase()+t.slice(1))||bi(e,ba(t))||bi(e,t))}let zr=null,g_=null;function Mp(e){const t=zr;return zr=e,g_=e&&e.type.__scopeId||null,t}function ao(e){g_=e}function oo(){g_=null}const tR=e=>Ce;function Ce(e,t=zr,i){if(!t||e._n)return e;const r=(...s)=>{r._d&&Ab(-1);const u=Mp(t);let d;try{d=e(...s)}finally{Mp(u),r._d&&Ab(1)}return d};return r._n=!0,r._c=!0,r._d=!0,r}function iv(e){const{type:t,vnode:i,proxy:r,withProxy:s,props:u,propsOptions:[d],slots:l,attrs:m,emit:g,render:x,renderCache:w,data:I,setupState:C,ctx:A,inheritAttrs:L}=e;let $,F;const z=Mp(e);try{if(i.shapeFlag&4){const H=s||r;$=Ys(x.call(H,H,w,u,C,I,A)),F=m}else{const H=t;$=Ys(H.length>1?H(u,{attrs:m,slots:l,emit:g}):H(u,null)),F=t.props?m:iR(m)}}catch(H){lp.length=0,Tu(H,e,1),$=ye(ss)}let ee=$;if(F&&L!==!1){const H=Object.keys(F),{shapeFlag:Q}=ee;H.length&&Q&7&&(d&&H.some(Px)&&(F=rR(F,d)),ee=ra(ee,F))}return i.dirs&&(ee=ra(ee),ee.dirs=ee.dirs?ee.dirs.concat(i.dirs):i.dirs),i.transition&&(ee.transition=i.transition),$=ee,Mp(z),$}function nR(e){let t;for(let i=0;i<e.length;i++){const r=e[i];if(hc(r)){if(r.type!==ss||r.children==="v-if"){if(t)return;t=r}}else return}return t}const iR=e=>{let t;for(const i in e)(i==="class"||i==="style"||qp(i))&&((t||(t={}))[i]=e[i]);return t},rR=(e,t)=>{const i={};for(const r in e)(!Px(r)||!(r.slice(9)in t))&&(i[r]=e[r]);return i};function sR(e,t,i){const{props:r,children:s,component:u}=e,{props:d,children:l,patchFlag:m}=t,g=u.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&m>=0){if(m&1024)return!0;if(m&16)return r?ZS(r,d,g):!!d;if(m&8){const x=t.dynamicProps;for(let w=0;w<x.length;w++){const I=x[w];if(d[I]!==r[I]&&!m_(g,I))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===d?!1:r?d?ZS(r,d,g):!0:!!d;return!1}function ZS(e,t,i){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const u=r[s];if(t[u]!==e[u]&&!m_(i,u))return!0}return!1}function Gx({vnode:e,parent:t},i){for(;t&&t.subTree===e;)(e=t.vnode).el=i,t=t.parent}const GI=e=>e.__isSuspense,aR={name:"Suspense",__isSuspense:!0,process(e,t,i,r,s,u,d,l,m,g){e==null?lR(t,i,r,s,u,d,l,m,g):cR(e,t,i,r,s,d,l,m,g)},hydrate:uR,create:Wx,normalize:dR},oR=aR;function kp(e,t){const i=e.props&&e.props[t];Un(i)&&i()}function lR(e,t,i,r,s,u,d,l,m){const{p:g,o:{createElement:x}}=m,w=x("div"),I=e.suspense=Wx(e,s,r,t,w,i,u,d,l,m);g(null,I.pendingBranch=e.ssContent,w,null,r,I,u,d),I.deps>0?(kp(e,"onPending"),kp(e,"onFallback"),g(null,e.ssFallback,t,i,r,null,u,d),qd(I,e.ssFallback)):I.resolve(!1,!0)}function cR(e,t,i,r,s,u,d,l,{p:m,um:g,o:{createElement:x}}){const w=t.suspense=e.suspense;w.vnode=t,t.el=e.el;const I=t.ssContent,C=t.ssFallback,{activeBranch:A,pendingBranch:L,isInFallback:$,isHydrating:F}=w;if(L)w.pendingBranch=I,qa(I,L)?(m(L,I,w.hiddenContainer,null,s,w,u,d,l),w.deps<=0?w.resolve():$&&(m(A,C,i,r,s,null,u,d,l),qd(w,C))):(w.pendingId++,F?(w.isHydrating=!1,w.activeBranch=L):g(L,s,w),w.deps=0,w.effects.length=0,w.hiddenContainer=x("div"),$?(m(null,I,w.hiddenContainer,null,s,w,u,d,l),w.deps<=0?w.resolve():(m(A,C,i,r,s,null,u,d,l),qd(w,C))):A&&qa(I,A)?(m(A,I,i,r,s,w,u,d,l),w.resolve(!0)):(m(null,I,w.hiddenContainer,null,s,w,u,d,l),w.deps<=0&&w.resolve()));else if(A&&qa(I,A))m(A,I,i,r,s,w,u,d,l),qd(w,I);else if(kp(t,"onPending"),w.pendingBranch=I,w.pendingId++,m(null,I,w.hiddenContainer,null,s,w,u,d,l),w.deps<=0)w.resolve();else{const{timeout:z,pendingId:ee}=w;z>0?setTimeout(()=>{w.pendingId===ee&&w.fallback(C)},z):z===0&&w.fallback(C)}}function Wx(e,t,i,r,s,u,d,l,m,g,x=!1){const{p:w,m:I,um:C,n:A,o:{parentNode:L,remove:$}}=g;let F;const z=hR(e);z&&t!=null&&t.pendingBranch&&(F=t.pendingId,t.deps++);const ee=e.props?Ev(e.props.timeout):void 0,H={vnode:e,parent:t,parentComponent:i,isSVG:d,container:r,hiddenContainer:s,anchor:u,deps:0,pendingId:0,timeout:typeof ee=="number"?ee:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:x,isUnmounted:!1,effects:[],resolve(Q=!1,ae=!1){const{vnode:be,activeBranch:te,pendingBranch:G,pendingId:U,effects:B,parentComponent:ie,container:X}=H;if(H.isHydrating)H.isHydrating=!1;else if(!Q){const Ie=te&&G.transition&&G.transition.mode==="out-in";Ie&&(te.transition.afterLeave=()=>{U===H.pendingId&&I(G,X,Xe,0)});let{anchor:Xe}=H;te&&(Xe=A(te),C(te,ie,H,!0)),Ie||I(G,X,Xe,0)}qd(H,G),H.pendingBranch=null,H.isInFallback=!1;let ne=H.parent,Ee=!1;for(;ne;){if(ne.pendingBranch){ne.effects.push(...B),Ee=!0;break}ne=ne.parent}Ee||Hx(B),H.effects=[],z&&t&&t.pendingBranch&&F===t.pendingId&&(t.deps--,t.deps===0&&!ae&&t.resolve()),kp(be,"onResolve")},fallback(Q){if(!H.pendingBranch)return;const{vnode:ae,activeBranch:be,parentComponent:te,container:G,isSVG:U}=H;kp(ae,"onFallback");const B=A(be),ie=()=>{H.isInFallback&&(w(null,Q,G,B,te,null,U,l,m),qd(H,Q))},X=Q.transition&&Q.transition.mode==="out-in";X&&(be.transition.afterLeave=ie),H.isInFallback=!0,C(be,te,null,!0),X||ie()},move(Q,ae,be){H.activeBranch&&I(H.activeBranch,Q,ae,be),H.container=Q},next(){return H.activeBranch&&A(H.activeBranch)},registerDep(Q,ae){const be=!!H.pendingBranch;be&&H.deps++;const te=Q.vnode.el;Q.asyncDep.catch(G=>{Tu(G,Q,0)}).then(G=>{if(Q.isUnmounted||H.isUnmounted||H.pendingId!==Q.suspenseId)return;Q.asyncResolved=!0;const{vnode:U}=Q;Mb(Q,G,!1),te&&(U.el=te);const B=!te&&Q.subTree.el;ae(Q,U,L(te||Q.subTree.el),te?null:A(Q.subTree),H,d,m),B&&$(B),Gx(Q,U.el),be&&--H.deps===0&&H.resolve()})},unmount(Q,ae){H.isUnmounted=!0,H.activeBranch&&C(H.activeBranch,i,Q,ae),H.pendingBranch&&C(H.pendingBranch,i,Q,ae)}};return H}function uR(e,t,i,r,s,u,d,l,m){const g=t.suspense=Wx(t,r,i,e.parentNode,document.createElement("div"),null,s,u,d,l,!0),x=m(e,g.pendingBranch=t.ssContent,i,g,u,d);return g.deps===0&&g.resolve(!1,!0),x}function dR(e){const{shapeFlag:t,children:i}=e,r=t&32;e.ssContent=KS(r?i.default:i),e.ssFallback=r?KS(i.fallback):ye(ss)}function KS(e){let t;if(Un(e)){const i=gu&&e._c;i&&(e._d=!1,V()),e=e(),i&&(e._d=!0,t=Rs,yC())}return xn(e)&&(e=nR(e)),e=Ys(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(i=>i!==e)),e}function WI(e,t){t&&t.pendingBranch?xn(e)?t.effects.push(...e):t.effects.push(e):Hx(e)}function qd(e,t){e.activeBranch=t;const{vnode:i,parentComponent:r}=e,s=i.el=t.el;r&&r.subTree===i&&(r.vnode.el=s,Gx(r,s))}function hR(e){var t;return((t=e.props)==null?void 0:t.suspensible)!=null&&e.props.suspensible!==!1}function Mr(e,t){return Qp(e,null,t)}function qI(e,t){return Qp(e,null,{flush:"post"})}function fR(e,t){return Qp(e,null,{flush:"sync"})}const Pg={};function fn(e,t,i){return Qp(e,t,i)}function Qp(e,t,{immediate:i,deep:r,flush:s,onTrack:u,onTrigger:d}=Li){var l;const m=Kp()===((l=Er)==null?void 0:l.scope)?Er:null;let g,x=!1,w=!1;if(Gi(e)?(g=()=>e.value,x=Ep(e)):Co(e)?(g=()=>e,r=!0):xn(e)?(w=!0,x=e.some(H=>Co(H)||Ep(H)),g=()=>e.map(H=>{if(Gi(H))return H.value;if(Co(H))return ou(H);if(Un(H))return ol(H,m,2)})):Un(e)?t?g=()=>ol(e,m,2):g=()=>{if(!(m&&m.isUnmounted))return I&&I(),ta(e,m,3,[C])}:g=Xa,t&&r){const H=g;g=()=>ou(H())}let I,C=H=>{I=z.onStop=()=>{ol(H,m,4)}},A;if(th)if(C=Xa,t?i&&ta(t,m,3,[g(),w?[]:void 0,C]):g(),s==="sync"){const H=PC();A=H.__watcherHandles||(H.__watcherHandles=[])}else return Xa;let L=w?new Array(e.length).fill(Pg):Pg;const $=()=>{if(z.active)if(t){const H=z.run();(r||x||(w?H.some((Q,ae)=>Jd(Q,L[ae])):Jd(H,L)))&&(I&&I(),ta(t,m,3,[H,L===Pg?void 0:w&&L[0]===Pg?[]:L,C]),L=H)}else z.run()};$.allowRecurse=!!t;let F;s==="sync"?F=$:s==="post"?F=()=>qr($,m&&m.suspense):($.pre=!0,m&&($.id=m.uid),F=()=>p_($));const z=new Yp(g,F);t?i?$():L=z.run():s==="post"?qr(z.run.bind(z),m&&m.suspense):z.run();const ee=()=>{z.stop(),m&&m.scope&&Dx(m.scope.effects,z)};return A&&A.push(ee),ee}function pR(e,t,i){const r=this.proxy,s=Qi(e)?e.includes(".")?ZI(r,e):()=>r[e]:e.bind(r,r);let u;Un(t)?u=t:(u=t.handler,i=t);const d=Er;fc(this);const l=Qp(s,u.bind(r),i);return d?fc(d):rc(),l}function ZI(e,t){const i=t.split(".");return()=>{let r=e;for(let s=0;s<i.length&&r;s++)r=r[i[s]];return r}}function ou(e,t){if(!Ri(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Gi(e))ou(e.value,t);else if(xn(e))for(let i=0;i<e.length;i++)ou(e[i],t);else if(xu(e)||Hd(e))e.forEach(i=>{ou(i,t)});else if(bI(e))for(const i in e)ou(e[i],t);return e}function as(e,t){const i=zr;if(i===null)return e;const r=x_(i)||i.proxy,s=e.dirs||(e.dirs=[]);for(let u=0;u<t.length;u++){let[d,l,m,g=Li]=t[u];d&&(Un(d)&&(d={mounted:d,updated:d}),d.deep&&ou(l),s.push({dir:d,instance:r,value:l,oldValue:void 0,arg:m,modifiers:g}))}return e}function bo(e,t,i,r){const s=e.dirs,u=t&&t.dirs;for(let d=0;d<s.length;d++){const l=s[d];u&&(l.oldValue=u[d].value);let m=l.dir[r];m&&(_h(),ta(m,i,8,[e.el,l,e,t]),yh())}}function qx(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Fn(()=>{e.isMounted=!0}),oa(()=>{e.isUnmounting=!0}),e}const _a=[Function,Array],Zx={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:_a,onEnter:_a,onAfterEnter:_a,onEnterCancelled:_a,onBeforeLeave:_a,onLeave:_a,onAfterLeave:_a,onLeaveCancelled:_a,onBeforeAppear:_a,onAppear:_a,onAfterAppear:_a,onAppearCancelled:_a},mR={name:"BaseTransition",props:Zx,setup(e,{slots:t}){const i=zo(),r=qx();let s;return()=>{const u=t.default&&v_(t.default(),!0);if(!u||!u.length)return;let d=u[0];if(u.length>1){for(const L of u)if(L.type!==ss){d=L;break}}const l=ci(e),{mode:m}=l;if(r.isLeaving)return u0(d);const g=XS(d);if(!g)return u0(d);const x=eh(g,l,r,i);pu(g,x);const w=i.subTree,I=w&&XS(w);let C=!1;const{getTransitionKey:A}=g.type;if(A){const L=A();s===void 0?s=L:L!==s&&(s=L,C=!0)}if(I&&I.type!==ss&&(!qa(g,I)||C)){const L=eh(I,l,r,i);if(pu(I,L),m==="out-in")return r.isLeaving=!0,L.afterLeave=()=>{r.isLeaving=!1,i.update.active!==!1&&i.update()},u0(d);m==="in-out"&&g.type!==ss&&(L.delayLeave=($,F,z)=>{const ee=XI(r,I);ee[String(I.key)]=I,$._leaveCb=()=>{F(),$._leaveCb=void 0,delete x.delayedLeave},x.delayedLeave=z})}return d}}},KI=mR;function XI(e,t){const{leavingVNodes:i}=e;let r=i.get(t.type);return r||(r=Object.create(null),i.set(t.type,r)),r}function eh(e,t,i,r){const{appear:s,mode:u,persisted:d=!1,onBeforeEnter:l,onEnter:m,onAfterEnter:g,onEnterCancelled:x,onBeforeLeave:w,onLeave:I,onAfterLeave:C,onLeaveCancelled:A,onBeforeAppear:L,onAppear:$,onAfterAppear:F,onAppearCancelled:z}=t,ee=String(e.key),H=XI(i,e),Q=(te,G)=>{te&&ta(te,r,9,G)},ae=(te,G)=>{const U=G[1];Q(te,G),xn(te)?te.every(B=>B.length<=1)&&U():te.length<=1&&U()},be={mode:u,persisted:d,beforeEnter(te){let G=l;if(!i.isMounted)if(s)G=L||l;else return;te._leaveCb&&te._leaveCb(!0);const U=H[ee];U&&qa(e,U)&&U.el._leaveCb&&U.el._leaveCb(),Q(G,[te])},enter(te){let G=m,U=g,B=x;if(!i.isMounted)if(s)G=$||m,U=F||g,B=z||x;else return;let ie=!1;const X=te._enterCb=ne=>{ie||(ie=!0,ne?Q(B,[te]):Q(U,[te]),be.delayedLeave&&be.delayedLeave(),te._enterCb=void 0)};G?ae(G,[te,X]):X()},leave(te,G){const U=String(e.key);if(te._enterCb&&te._enterCb(!0),i.isUnmounting)return G();Q(w,[te]);let B=!1;const ie=te._leaveCb=X=>{B||(B=!0,G(),X?Q(A,[te]):Q(C,[te]),te._leaveCb=void 0,H[U]===e&&delete H[U])};H[U]=e,I?ae(I,[te,ie]):ie()},clone(te){return eh(te,t,i,r)}};return be}function u0(e){if(em(e))return e=ra(e),e.children=null,e}function XS(e){return em(e)?e.children?e.children[0]:void 0:e}function pu(e,t){e.shapeFlag&6&&e.component?pu(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function v_(e,t=!1,i){let r=[],s=0;for(let u=0;u<e.length;u++){let d=e[u];const l=i==null?d.key:String(i)+String(d.key!=null?d.key:u);d.type===Nt?(d.patchFlag&128&&s++,r=r.concat(v_(d.children,t,l))):(t||d.type!==ss)&&r.push(l!=null?ra(d,{key:l}):d)}if(s>1)for(let u=0;u<r.length;u++)r[u].patchFlag=-2;return r}function rt(e,t){return Un(e)?(()=>ji({name:e.name},t,{setup:e}))():e}const uu=e=>!!e.type.__asyncLoader;function ic(e){Un(e)&&(e={loader:e});const{loader:t,loadingComponent:i,errorComponent:r,delay:s=200,timeout:u,suspensible:d=!0,onError:l}=e;let m=null,g,x=0;const w=()=>(x++,m=null,I()),I=()=>{let C;return m||(C=m=t().catch(A=>{if(A=A instanceof Error?A:new Error(String(A)),l)return new Promise((L,$)=>{l(A,()=>L(w()),()=>$(A),x+1)});throw A}).then(A=>C!==m&&m?m:(A&&(A.__esModule||A[Symbol.toStringTag]==="Module")&&(A=A.default),g=A,A)))};return rt({name:"AsyncComponentWrapper",__asyncLoader:I,get __asyncResolved(){return g},setup(){const C=Er;if(g)return()=>d0(g,C);const A=z=>{m=null,Tu(z,C,13,!r)};if(d&&C.suspense||th)return I().then(z=>()=>d0(z,C)).catch(z=>(A(z),()=>r?ye(r,{error:z}):null));const L=Re(!1),$=Re(),F=Re(!!s);return s&&setTimeout(()=>{F.value=!1},s),u!=null&&setTimeout(()=>{if(!L.value&&!$.value){const z=new Error(`Async component timed out after ${u}ms.`);A(z),$.value=z}},u),I().then(()=>{L.value=!0,C.parent&&em(C.parent.vnode)&&p_(C.parent.update)}).catch(z=>{A(z),$.value=z}),()=>{if(L.value&&g)return d0(g,C);if($.value&&r)return ye(r,{error:$.value});if(i&&!F.value)return ye(i)}}})}function d0(e,t){const{ref:i,props:r,children:s,ce:u}=t.vnode,d=ye(e,r,s);return d.ref=i,d.ce=u,delete t.vnode.ce,d}const em=e=>e.type.__isKeepAlive,gR={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const i=zo(),r=i.ctx;if(!r.renderer)return()=>{const z=t.default&&t.default();return z&&z.length===1?z[0]:z};const s=new Map,u=new Set;let d=null;const l=i.suspense,{renderer:{p:m,m:g,um:x,o:{createElement:w}}}=r,I=w("div");r.activate=(z,ee,H,Q,ae)=>{const be=z.component;g(z,ee,H,0,l),m(be.vnode,z,ee,H,be,l,Q,z.slotScopeIds,ae),qr(()=>{be.isDeactivated=!1,be.a&&Gd(be.a);const te=z.props&&z.props.onVnodeMounted;te&&Os(te,be.parent,z)},l)},r.deactivate=z=>{const ee=z.component;g(z,I,null,1,l),qr(()=>{ee.da&&Gd(ee.da);const H=z.props&&z.props.onVnodeUnmounted;H&&Os(H,ee.parent,z),ee.isDeactivated=!0},l)};function C(z){h0(z),x(z,i,l,!0)}function A(z){s.forEach((ee,H)=>{const Q=Pb(ee.type);Q&&(!z||!z(Q))&&L(H)})}function L(z){const ee=s.get(z);!d||!qa(ee,d)?C(ee):d&&h0(d),s.delete(z),u.delete(z)}fn(()=>[e.include,e.exclude],([z,ee])=>{z&&A(H=>Zf(z,H)),ee&&A(H=>!Zf(ee,H))},{flush:"post",deep:!0});let $=null;const F=()=>{$!=null&&s.set($,f0(i.subTree))};return Fn(F),xh(F),oa(()=>{s.forEach(z=>{const{subTree:ee,suspense:H}=i,Q=f0(ee);if(z.type===Q.type&&z.key===Q.key){h0(Q);const ae=Q.component.da;ae&&qr(ae,H);return}C(z)})}),()=>{if($=null,!t.default)return null;const z=t.default(),ee=z[0];if(z.length>1)return d=null,z;if(!hc(ee)||!(ee.shapeFlag&4)&&!(ee.shapeFlag&128))return d=null,ee;let H=f0(ee);const Q=H.type,ae=Pb(uu(H)?H.type.__asyncResolved||{}:Q),{include:be,exclude:te,max:G}=e;if(be&&(!ae||!Zf(be,ae))||te&&ae&&Zf(te,ae))return d=H,ee;const U=H.key==null?Q:H.key,B=s.get(U);return H.el&&(H=ra(H),ee.shapeFlag&128&&(ee.ssContent=H)),$=U,B?(H.el=B.el,H.component=B.component,H.transition&&pu(H,H.transition),H.shapeFlag|=512,u.delete(U),u.add(U)):(u.add(U),G&&u.size>parseInt(G,10)&&L(u.values().next().value)),H.shapeFlag|=256,d=H,GI(ee.type)?ee:H}}},vR=gR;function Zf(e,t){return xn(e)?e.some(i=>Zf(i,t)):Qi(e)?e.split(",").includes(t):KL(e)?e.test(t):!1}function Kx(e,t){YI(e,"a",t)}function Xx(e,t){YI(e,"da",t)}function YI(e,t,i=Er){const r=e.__wdc||(e.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(__(t,r,i),i){let s=i.parent;for(;s&&s.parent;)em(s.parent.vnode)&&_R(r,t,i,s),s=s.parent}}function _R(e,t,i,r){const s=__(t,e,r,!0);Wi(()=>{Dx(r[t],s)},i)}function h0(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function f0(e){return e.shapeFlag&128?e.ssContent:e}function __(e,t,i=Er,r=!1){if(i){const s=i[e]||(i[e]=[]),u=t.__weh||(t.__weh=(...d)=>{if(i.isUnmounted)return;_h(),fc(i);const l=ta(t,i,e,d);return rc(),yh(),l});return r?s.unshift(u):s.push(u),u}}const ml=e=>(t,i=Er)=>(!th||e==="sp")&&__(e,(...r)=>t(...r),i),JI=ml("bm"),Fn=ml("m"),Yx=ml("bu"),xh=ml("u"),oa=ml("bum"),Wi=ml("um"),QI=ml("sp"),eC=ml("rtg"),tC=ml("rtc");function nC(e,t=Er){__("ec",e,t)}const Jx="components",yR="directives";function y_(e,t){return Qx(Jx,e,!0,t)||e}const iC=Symbol.for("v-ndc");function _c(e){return Qi(e)?Qx(Jx,e,!1)||e:e||iC}function bR(e){return Qx(yR,e)}function Qx(e,t,i=!0,r=!1){const s=zr||Er;if(s){const u=s.type;if(e===Jx){const l=Pb(u,!1);if(l&&(l===t||l===$s(t)||l===Zp($s(t))))return u}const d=YS(s[e]||u[e],t)||YS(s.appContext[e],t);return!d&&r?u:d}}function YS(e,t){return e&&(e[t]||e[$s(t)]||e[Zp($s(t))])}function $n(e,t,i,r){let s;const u=i&&i[r];if(xn(e)||Qi(e)){s=new Array(e.length);for(let d=0,l=e.length;d<l;d++)s[d]=t(e[d],d,void 0,u&&u[d])}else if(typeof e=="number"){s=new Array(e);for(let d=0;d<e;d++)s[d]=t(d+1,d,void 0,u&&u[d])}else if(Ri(e))if(e[Symbol.iterator])s=Array.from(e,(d,l)=>t(d,l,void 0,u&&u[l]));else{const d=Object.keys(e);s=new Array(d.length);for(let l=0,m=d.length;l<m;l++){const g=d[l];s[l]=t(e[g],g,l,u&&u[l])}}else s=[];return i&&(i[r]=s),s}function rC(e,t){for(let i=0;i<t.length;i++){const r=t[i];if(xn(r))for(let s=0;s<r.length;s++)e[r[s].name]=r[s].fn;else r&&(e[r.name]=r.key?(...s)=>{const u=r.fn(...s);return u&&(u.key=r.key),u}:r.fn)}return e}function En(e,t,i={},r,s){if(zr.isCE||zr.parent&&uu(zr.parent)&&zr.parent.isCE)return t!=="default"&&(i.name=t),ye("slot",i,r&&r());let u=e[t];u&&u._c&&(u._d=!1),V();const d=u&&sC(u(i)),l=je(Nt,{key:i.key||d&&d.key||`_${t}`},d||(r?r():[]),d&&e._===1?64:-2);return!s&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),u&&u._c&&(u._d=!0),l}function sC(e){return e.some(t=>hc(t)?!(t.type===ss||t.type===Nt&&!sC(t.children)):!0)?e:null}function xR(e,t){const i={};for(const r in e)i[t&&/[A-Z]/.test(r)?`on:${r}`:sp(r)]=e[r];return i}const wb=e=>e?IC(e)?x_(e)||e.proxy:wb(e.parent):null,ap=ji(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>wb(e.parent),$root:e=>wb(e.root),$emit:e=>e.emit,$options:e=>e1(e),$forceUpdate:e=>e.f||(e.f=()=>p_(e.update)),$nextTick:e=>e.n||(e.n=Ar.bind(e.proxy)),$watch:e=>pR.bind(e)}),p0=(e,t)=>e!==Li&&!e.__isScriptSetup&&bi(e,t),Sb={get({_:e},t){const{ctx:i,setupState:r,data:s,props:u,accessCache:d,type:l,appContext:m}=e;let g;if(t[0]!=="$"){const C=d[t];if(C!==void 0)switch(C){case 1:return r[t];case 2:return s[t];case 4:return i[t];case 3:return u[t]}else{if(p0(r,t))return d[t]=1,r[t];if(s!==Li&&bi(s,t))return d[t]=2,s[t];if((g=e.propsOptions[0])&&bi(g,t))return d[t]=3,u[t];if(i!==Li&&bi(i,t))return d[t]=4,i[t];Tb&&(d[t]=0)}}const x=ap[t];let w,I;if(x)return t==="$attrs"&&zs(e,"get",t),x(e);if((w=l.__cssModules)&&(w=w[t]))return w;if(i!==Li&&bi(i,t))return d[t]=4,i[t];if(I=m.config.globalProperties,bi(I,t))return I[t]},set({_:e},t,i){const{data:r,setupState:s,ctx:u}=e;return p0(s,t)?(s[t]=i,!0):r!==Li&&bi(r,t)?(r[t]=i,!0):bi(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(u[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:r,appContext:s,propsOptions:u}},d){let l;return!!i[d]||e!==Li&&bi(e,d)||p0(t,d)||(l=u[0])&&bi(l,d)||bi(r,d)||bi(ap,d)||bi(s.config.globalProperties,d)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:bi(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}},wR=ji({},Sb,{get(e,t){if(t!==Symbol.unscopables)return Sb.get(e,t,e)},has(e,t){return t[0]!=="_"&&!eO(t)}});function SR(){return null}function TR(){return null}function ER(e){}function IR(e){}function CR(){return null}function AR(){}function MR(e,t){return null}function aC(){return oC().slots}function kR(){return oC().attrs}function PR(e,t,i){const r=zo();if(i&&i.local){const s=Re(e[t]);return fn(()=>e[t],u=>s.value=u),fn(s,u=>{u!==e[t]&&r.emit(`update:${t}`,u)}),s}else return{__v_isRef:!0,get value(){return e[t]},set value(s){r.emit(`update:${t}`,s)}}}function oC(){const e=zo();return e.setupContext||(e.setupContext=MC(e))}function Pp(e){return xn(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}function DR(e,t){const i=Pp(e);for(const r in t){if(r.startsWith("__skip"))continue;let s=i[r];s?xn(s)||Un(s)?s=i[r]={type:s,default:t[r]}:s.default=t[r]:s===null&&(s=i[r]={default:t[r]}),s&&t[`__skip_${r}`]&&(s.skipFactory=!0)}return i}function LR(e,t){return!e||!t?e||t:xn(e)&&xn(t)?e.concat(t):ji({},Pp(e),Pp(t))}function OR(e,t){const i={};for(const r in e)t.includes(r)||Object.defineProperty(i,r,{enumerable:!0,get:()=>e[r]});return i}function RR(e){const t=zo();let i=e();return rc(),Lx(i)&&(i=i.catch(r=>{throw fc(t),r})),[i,()=>fc(t)]}let Tb=!0;function FR(e){const t=e1(e),i=e.proxy,r=e.ctx;Tb=!1,t.beforeCreate&&JS(t.beforeCreate,e,"bc");const{data:s,computed:u,methods:d,watch:l,provide:m,inject:g,created:x,beforeMount:w,mounted:I,beforeUpdate:C,updated:A,activated:L,deactivated:$,beforeDestroy:F,beforeUnmount:z,destroyed:ee,unmounted:H,render:Q,renderTracked:ae,renderTriggered:be,errorCaptured:te,serverPrefetch:G,expose:U,inheritAttrs:B,components:ie,directives:X,filters:ne}=t;if(g&&$R(g,r,null),d)for(const Xe in d){const lt=d[Xe];Un(lt)&&(r[Xe]=lt.bind(i))}if(s){const Xe=s.call(i,i);Ri(Xe)&&(e.data=Nr(Xe))}if(Tb=!0,u)for(const Xe in u){const lt=u[Xe],st=Un(lt)?lt.bind(i,i):Un(lt.get)?lt.get.bind(i,i):Xa,$t=!Un(lt)&&Un(lt.set)?lt.set.bind(i):Xa,It=Le({get:st,set:$t});Object.defineProperty(r,Xe,{enumerable:!0,configurable:!0,get:()=>It.value,set:nt=>It.value=nt})}if(l)for(const Xe in l)lC(l[Xe],r,i,Xe);if(m){const Xe=Un(m)?m.call(i):m;Reflect.ownKeys(Xe).forEach(lt=>{Oi(lt,Xe[lt])})}x&&JS(x,e,"c");function Ie(Xe,lt){xn(lt)?lt.forEach(st=>Xe(st.bind(i))):lt&&Xe(lt.bind(i))}if(Ie(JI,w),Ie(Fn,I),Ie(Yx,C),Ie(xh,A),Ie(Kx,L),Ie(Xx,$),Ie(nC,te),Ie(tC,ae),Ie(eC,be),Ie(oa,z),Ie(Wi,H),Ie(QI,G),xn(U))if(U.length){const Xe=e.exposed||(e.exposed={});U.forEach(lt=>{Object.defineProperty(Xe,lt,{get:()=>i[lt],set:st=>i[lt]=st})})}else e.exposed||(e.exposed={});Q&&e.render===Xa&&(e.render=Q),B!=null&&(e.inheritAttrs=B),ie&&(e.components=ie),X&&(e.directives=X)}function $R(e,t,i=Xa){xn(e)&&(e=Eb(e));for(const r in e){const s=e[r];let u;Ri(s)?"default"in s?u=wi(s.from||r,s.default,!0):u=wi(s.from||r):u=wi(s),Gi(u)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>u.value,set:d=>u.value=d}):t[r]=u}}function JS(e,t,i){ta(xn(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,i)}function lC(e,t,i,r){const s=r.includes(".")?ZI(i,r):()=>i[r];if(Qi(e)){const u=t[e];Un(u)&&fn(s,u)}else if(Un(e))fn(s,e.bind(i));else if(Ri(e))if(xn(e))e.forEach(u=>lC(u,t,i,r));else{const u=Un(e.handler)?e.handler.bind(i):t[e.handler];Un(u)&&fn(s,u,e)}}function e1(e){const t=e.type,{mixins:i,extends:r}=t,{mixins:s,optionsCache:u,config:{optionMergeStrategies:d}}=e.appContext,l=u.get(t);let m;return l?m=l:!s.length&&!i&&!r?m=t:(m={},s.length&&s.forEach(g=>Av(m,g,d,!0)),Av(m,t,d)),Ri(t)&&u.set(t,m),m}function Av(e,t,i,r=!1){const{mixins:s,extends:u}=t;u&&Av(e,u,i,!0),s&&s.forEach(d=>Av(e,d,i,!0));for(const d in t)if(!(r&&d==="expose")){const l=zR[d]||i&&i[d];e[d]=l?l(e[d],t[d]):t[d]}return e}const zR={data:QS,props:eT,emits:eT,methods:Kf,computed:Kf,beforeCreate:vs,created:vs,beforeMount:vs,mounted:vs,beforeUpdate:vs,updated:vs,beforeDestroy:vs,beforeUnmount:vs,destroyed:vs,unmounted:vs,activated:vs,deactivated:vs,errorCaptured:vs,serverPrefetch:vs,components:Kf,directives:Kf,watch:NR,provide:QS,inject:BR};function QS(e,t){return t?e?function(){return ji(Un(e)?e.call(this,this):e,Un(t)?t.call(this,this):t)}:t:e}function BR(e,t){return Kf(Eb(e),Eb(t))}function Eb(e){if(xn(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function vs(e,t){return e?[...new Set([].concat(e,t))]:t}function Kf(e,t){return e?ji(Object.create(null),e,t):t}function eT(e,t){return e?xn(e)&&xn(t)?[...new Set([...e,...t])]:ji(Object.create(null),Pp(e),Pp(t??{})):t}function NR(e,t){if(!e)return t;if(!t)return e;const i=ji(Object.create(null),e);for(const r in t)i[r]=vs(e[r],t[r]);return i}function cC(){return{app:null,config:{isNativeTag:WL,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let jR=0;function UR(e,t){return function(r,s=null){Un(r)||(r=ji({},r)),s!=null&&!Ri(s)&&(s=null);const u=cC(),d=new Set;let l=!1;const m=u.app={_uid:jR++,_component:r,_props:s,_container:null,_context:u,_instance:null,version:LC,get config(){return u.config},set config(g){},use(g,...x){return d.has(g)||(g&&Un(g.install)?(d.add(g),g.install(m,...x)):Un(g)&&(d.add(g),g(m,...x))),m},mixin(g){return u.mixins.includes(g)||u.mixins.push(g),m},component(g,x){return x?(u.components[g]=x,m):u.components[g]},directive(g,x){return x?(u.directives[g]=x,m):u.directives[g]},mount(g,x,w){if(!l){const I=ye(r,s);return I.appContext=u,x&&t?t(I,g):e(I,g,w),l=!0,m._container=g,g.__vue_app__=m,x_(I.component)||I.component.proxy}},unmount(){l&&(e(null,m._container),delete m._container.__vue_app__)},provide(g,x){return u.provides[g]=x,m},runWithContext(g){Dp=m;try{return g()}finally{Dp=null}}};return m}}let Dp=null;function Oi(e,t){if(Er){let i=Er.provides;const r=Er.parent&&Er.parent.provides;r===i&&(i=Er.provides=Object.create(r)),i[e]=t}}function wi(e,t,i=!1){const r=Er||zr;if(r||Dp){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Dp._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return i&&Un(t)?t.call(r&&r.proxy):t}}function t1(){return!!(Er||zr||Dp)}function VR(e,t,i,r=!1){const s={},u={};Sv(u,b_,1),e.propsDefaults=Object.create(null),uC(e,t,s,u);for(const d in e.propsOptions[0])d in s||(s[d]=void 0);i?e.props=r?s:FI(s):e.type.props?e.props=s:e.props=u,e.attrs=u}function HR(e,t,i,r){const{props:s,attrs:u,vnode:{patchFlag:d}}=e,l=ci(s),[m]=e.propsOptions;let g=!1;if((r||d>0)&&!(d&16)){if(d&8){const x=e.vnode.dynamicProps;for(let w=0;w<x.length;w++){let I=x[w];if(m_(e.emitsOptions,I))continue;const C=t[I];if(m)if(bi(u,I))C!==u[I]&&(u[I]=C,g=!0);else{const A=$s(I);s[A]=Ib(m,l,A,C,e,!1)}else C!==u[I]&&(u[I]=C,g=!0)}}}else{uC(e,t,s,u)&&(g=!0);let x;for(const w in l)(!t||!bi(t,w)&&((x=ba(w))===w||!bi(t,x)))&&(m?i&&(i[w]!==void 0||i[x]!==void 0)&&(s[w]=Ib(m,l,w,void 0,e,!0)):delete s[w]);if(u!==l)for(const w in u)(!t||!bi(t,w))&&(delete u[w],g=!0)}g&&dl(e,"set","$attrs")}function uC(e,t,i,r){const[s,u]=e.propsOptions;let d=!1,l;if(t)for(let m in t){if(rp(m))continue;const g=t[m];let x;s&&bi(s,x=$s(m))?!u||!u.includes(x)?i[x]=g:(l||(l={}))[x]=g:m_(e.emitsOptions,m)||(!(m in r)||g!==r[m])&&(r[m]=g,d=!0)}if(u){const m=ci(i),g=l||Li;for(let x=0;x<u.length;x++){const w=u[x];i[w]=Ib(s,m,w,g[w],e,!bi(g,w))}}return d}function Ib(e,t,i,r,s,u){const d=e[i];if(d!=null){const l=bi(d,"default");if(l&&r===void 0){const m=d.default;if(d.type!==Function&&!d.skipFactory&&Un(m)){const{propsDefaults:g}=s;i in g?r=g[i]:(fc(s),r=g[i]=m.call(null,t),rc())}else r=m}d[0]&&(u&&!l?r=!1:d[1]&&(r===""||r===ba(i))&&(r=!0))}return r}function dC(e,t,i=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const u=e.props,d={},l=[];let m=!1;if(!Un(e)){const x=w=>{m=!0;const[I,C]=dC(w,t,!0);ji(d,I),C&&l.push(...C)};!i&&t.mixins.length&&t.mixins.forEach(x),e.extends&&x(e.extends),e.mixins&&e.mixins.forEach(x)}if(!u&&!m)return Ri(e)&&r.set(e,Vd),Vd;if(xn(u))for(let x=0;x<u.length;x++){const w=$s(u[x]);tT(w)&&(d[w]=Li)}else if(u)for(const x in u){const w=$s(x);if(tT(w)){const I=u[x],C=d[w]=xn(I)||Un(I)?{type:I}:ji({},I);if(C){const A=rT(Boolean,C.type),L=rT(String,C.type);C[0]=A>-1,C[1]=L<0||A<L,(A>-1||bi(C,"default"))&&l.push(w)}}}const g=[d,l];return Ri(e)&&r.set(e,g),g}function tT(e){return e[0]!=="$"}function nT(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function iT(e,t){return nT(e)===nT(t)}function rT(e,t){return xn(t)?t.findIndex(i=>iT(i,e)):Un(t)&&iT(t,e)?0:-1}const hC=e=>e[0]==="_"||e==="$stable",n1=e=>xn(e)?e.map(Ys):[Ys(e)],GR=(e,t,i)=>{if(t._n)return t;const r=Ce((...s)=>n1(t(...s)),i);return r._c=!1,r},fC=(e,t,i)=>{const r=e._ctx;for(const s in e){if(hC(s))continue;const u=e[s];if(Un(u))t[s]=GR(s,u,r);else if(u!=null){const d=n1(u);t[s]=()=>d}}},pC=(e,t)=>{const i=n1(t);e.slots.default=()=>i},WR=(e,t)=>{if(e.vnode.shapeFlag&32){const i=t._;i?(e.slots=ci(t),Sv(t,"_",i)):fC(t,e.slots={})}else e.slots={},t&&pC(e,t);Sv(e.slots,b_,1)},qR=(e,t,i)=>{const{vnode:r,slots:s}=e;let u=!0,d=Li;if(r.shapeFlag&32){const l=t._;l?i&&l===1?u=!1:(ji(s,t),!i&&l===1&&delete s._):(u=!t.$stable,fC(t,s)),d=t}else t&&(pC(e,t),d={default:1});if(u)for(const l in s)!hC(l)&&!(l in d)&&delete s[l]};function Mv(e,t,i,r,s=!1){if(xn(e)){e.forEach((I,C)=>Mv(I,t&&(xn(t)?t[C]:t),i,r,s));return}if(uu(r)&&!s)return;const u=r.shapeFlag&4?x_(r.component)||r.component.proxy:r.el,d=s?null:u,{i:l,r:m}=e,g=t&&t.r,x=l.refs===Li?l.refs={}:l.refs,w=l.setupState;if(g!=null&&g!==m&&(Qi(g)?(x[g]=null,bi(w,g)&&(w[g]=null)):Gi(g)&&(g.value=null)),Un(m))ol(m,l,12,[d,x]);else{const I=Qi(m),C=Gi(m);if(I||C){const A=()=>{if(e.f){const L=I?bi(w,m)?w[m]:x[m]:m.value;s?xn(L)&&Dx(L,u):xn(L)?L.includes(u)||L.push(u):I?(x[m]=[u],bi(w,m)&&(w[m]=x[m])):(m.value=[u],e.k&&(x[e.k]=m.value))}else I?(x[m]=d,bi(w,m)&&(w[m]=d)):C&&(m.value=d,e.k&&(x[e.k]=d))};d?(A.id=-1,qr(A,i)):A()}}}let $l=!1;const Dg=e=>/svg/.test(e.namespaceURI)&&e.tagName!=="foreignObject",Lg=e=>e.nodeType===8;function ZR(e){const{mt:t,p:i,o:{patchProp:r,createText:s,nextSibling:u,parentNode:d,remove:l,insert:m,createComment:g}}=e,x=(F,z)=>{if(!z.hasChildNodes()){i(null,F,z),Cv(),z._vnode=F;return}$l=!1,w(z.firstChild,F,null,null,null),Cv(),z._vnode=F,$l&&console.error("Hydration completed but contains mismatches.")},w=(F,z,ee,H,Q,ae=!1)=>{const be=Lg(F)&&F.data==="[",te=()=>L(F,z,ee,H,Q,be),{type:G,ref:U,shapeFlag:B,patchFlag:ie}=z;let X=F.nodeType;z.el=F,ie===-2&&(ae=!1,z.dynamicChildren=null);let ne=null;switch(G){case mu:X!==3?z.children===""?(m(z.el=s(""),d(F),F),ne=F):ne=te():(F.data!==z.children&&($l=!0,F.data=z.children),ne=u(F));break;case ss:X!==8||be?ne=te():ne=u(F);break;case du:if(be&&(F=u(F),X=F.nodeType),X===1||X===3){ne=F;const Ee=!z.children.length;for(let Ie=0;Ie<z.staticCount;Ie++)Ee&&(z.children+=ne.nodeType===1?ne.outerHTML:ne.data),Ie===z.staticCount-1&&(z.anchor=ne),ne=u(ne);return be?u(ne):ne}else te();break;case Nt:be?ne=A(F,z,ee,H,Q,ae):ne=te();break;default:if(B&1)X!==1||z.type.toLowerCase()!==F.tagName.toLowerCase()?ne=te():ne=I(F,z,ee,H,Q,ae);else if(B&6){z.slotScopeIds=Q;const Ee=d(F);if(t(z,Ee,null,ee,H,Dg(Ee),ae),ne=be?$(F):u(F),ne&&Lg(ne)&&ne.data==="teleport end"&&(ne=u(ne)),uu(z)){let Ie;be?(Ie=ye(Nt),Ie.anchor=ne?ne.previousSibling:Ee.lastChild):Ie=F.nodeType===3?Mt(""):ye("div"),Ie.el=F,z.component.subTree=Ie}}else B&64?X!==8?ne=te():ne=z.type.hydrate(F,z,ee,H,Q,ae,e,C):B&128&&(ne=z.type.hydrate(F,z,ee,H,Dg(d(F)),Q,ae,e,w))}return U!=null&&Mv(U,null,H,z),ne},I=(F,z,ee,H,Q,ae)=>{ae=ae||!!z.dynamicChildren;const{type:be,props:te,patchFlag:G,shapeFlag:U,dirs:B}=z,ie=be==="input"&&B||be==="option";if(ie||G!==-1){if(B&&bo(z,null,ee,"created"),te)if(ie||!ae||G&48)for(const ne in te)(ie&&ne.endsWith("value")||qp(ne)&&!rp(ne))&&r(F,ne,null,te[ne],!1,void 0,ee);else te.onClick&&r(F,"onClick",null,te.onClick,!1,void 0,ee);let X;if((X=te&&te.onVnodeBeforeMount)&&Os(X,ee,z),B&&bo(z,null,ee,"beforeMount"),((X=te&&te.onVnodeMounted)||B)&&WI(()=>{X&&Os(X,ee,z),B&&bo(z,null,ee,"mounted")},H),U&16&&!(te&&(te.innerHTML||te.textContent))){let ne=C(F.firstChild,z,F,ee,H,Q,ae);for(;ne;){$l=!0;const Ee=ne;ne=ne.nextSibling,l(Ee)}}else U&8&&F.textContent!==z.children&&($l=!0,F.textContent=z.children)}return F.nextSibling},C=(F,z,ee,H,Q,ae,be)=>{be=be||!!z.dynamicChildren;const te=z.children,G=te.length;for(let U=0;U<G;U++){const B=be?te[U]:te[U]=Ys(te[U]);if(F)F=w(F,B,H,Q,ae,be);else{if(B.type===mu&&!B.children)continue;$l=!0,i(null,B,ee,null,H,Q,Dg(ee),ae)}}return F},A=(F,z,ee,H,Q,ae)=>{const{slotScopeIds:be}=z;be&&(Q=Q?Q.concat(be):be);const te=d(F),G=C(u(F),z,te,ee,H,Q,ae);return G&&Lg(G)&&G.data==="]"?u(z.anchor=G):($l=!0,m(z.anchor=g("]"),te,G),G)},L=(F,z,ee,H,Q,ae)=>{if($l=!0,z.el=null,ae){const G=$(F);for(;;){const U=u(F);if(U&&U!==G)l(U);else break}}const be=u(F),te=d(F);return l(F),i(null,z,te,be,ee,H,Dg(te),Q),be},$=F=>{let z=0;for(;F;)if(F=u(F),F&&Lg(F)&&(F.data==="["&&z++,F.data==="]")){if(z===0)return u(F);z--}return F};return[x,w]}const qr=WI;function mC(e){return vC(e)}function gC(e){return vC(e,ZR)}function vC(e,t){const i=vb();i.__VUE__=!0;const{insert:r,remove:s,patchProp:u,createElement:d,createText:l,createComment:m,setText:g,setElementText:x,parentNode:w,nextSibling:I,setScopeId:C=Xa,insertStaticContent:A}=e,L=(_e,ke,ge,ft=null,q=null,fe=null,Pe=!1,We=null,pt=!!ke.dynamicChildren)=>{if(_e===ke)return;_e&&!qa(_e,ke)&&(ft=ut(_e),nt(_e,q,fe,!0),_e=null),ke.patchFlag===-2&&(pt=!1,ke.dynamicChildren=null);const{type:ht,ref:zt,shapeFlag:Dt}=ke;switch(ht){case mu:$(_e,ke,ge,ft);break;case ss:F(_e,ke,ge,ft);break;case du:_e==null&&z(ke,ge,ft,Pe);break;case Nt:ie(_e,ke,ge,ft,q,fe,Pe,We,pt);break;default:Dt&1?Q(_e,ke,ge,ft,q,fe,Pe,We,pt):Dt&6?X(_e,ke,ge,ft,q,fe,Pe,We,pt):(Dt&64||Dt&128)&&ht.process(_e,ke,ge,ft,q,fe,Pe,We,pt,Vt)}zt!=null&&q&&Mv(zt,_e&&_e.ref,fe,ke||_e,!ke)},$=(_e,ke,ge,ft)=>{if(_e==null)r(ke.el=l(ke.children),ge,ft);else{const q=ke.el=_e.el;ke.children!==_e.children&&g(q,ke.children)}},F=(_e,ke,ge,ft)=>{_e==null?r(ke.el=m(ke.children||""),ge,ft):ke.el=_e.el},z=(_e,ke,ge,ft)=>{[_e.el,_e.anchor]=A(_e.children,ke,ge,ft,_e.el,_e.anchor)},ee=({el:_e,anchor:ke},ge,ft)=>{let q;for(;_e&&_e!==ke;)q=I(_e),r(_e,ge,ft),_e=q;r(ke,ge,ft)},H=({el:_e,anchor:ke})=>{let ge;for(;_e&&_e!==ke;)ge=I(_e),s(_e),_e=ge;s(ke)},Q=(_e,ke,ge,ft,q,fe,Pe,We,pt)=>{Pe=Pe||ke.type==="svg",_e==null?ae(ke,ge,ft,q,fe,Pe,We,pt):G(_e,ke,q,fe,Pe,We,pt)},ae=(_e,ke,ge,ft,q,fe,Pe,We)=>{let pt,ht;const{type:zt,props:Dt,shapeFlag:Gt,transition:ln,dirs:vt}=_e;if(pt=_e.el=d(_e.type,fe,Dt&&Dt.is,Dt),Gt&8?x(pt,_e.children):Gt&16&&te(_e.children,pt,null,ft,q,fe&&zt!=="foreignObject",Pe,We),vt&&bo(_e,null,ft,"created"),be(pt,_e,_e.scopeId,Pe,ft),Dt){for(const Ln in Dt)Ln!=="value"&&!rp(Ln)&&u(pt,Ln,null,Dt[Ln],fe,_e.children,ft,q,Ke);"value"in Dt&&u(pt,"value",null,Dt.value),(ht=Dt.onVnodeBeforeMount)&&Os(ht,ft,_e)}vt&&bo(_e,null,ft,"beforeMount");const Rn=(!q||q&&!q.pendingBranch)&&ln&&!ln.persisted;Rn&&ln.beforeEnter(pt),r(pt,ke,ge),((ht=Dt&&Dt.onVnodeMounted)||Rn||vt)&&qr(()=>{ht&&Os(ht,ft,_e),Rn&&ln.enter(pt),vt&&bo(_e,null,ft,"mounted")},q)},be=(_e,ke,ge,ft,q)=>{if(ge&&C(_e,ge),ft)for(let fe=0;fe<ft.length;fe++)C(_e,ft[fe]);if(q){let fe=q.subTree;if(ke===fe){const Pe=q.vnode;be(_e,Pe,Pe.scopeId,Pe.slotScopeIds,q.parent)}}},te=(_e,ke,ge,ft,q,fe,Pe,We,pt=0)=>{for(let ht=pt;ht<_e.length;ht++){const zt=_e[ht]=We?Hl(_e[ht]):Ys(_e[ht]);L(null,zt,ke,ge,ft,q,fe,Pe,We)}},G=(_e,ke,ge,ft,q,fe,Pe)=>{const We=ke.el=_e.el;let{patchFlag:pt,dynamicChildren:ht,dirs:zt}=ke;pt|=_e.patchFlag&16;const Dt=_e.props||Li,Gt=ke.props||Li;let ln;ge&&Zc(ge,!1),(ln=Gt.onVnodeBeforeUpdate)&&Os(ln,ge,ke,_e),zt&&bo(ke,_e,ge,"beforeUpdate"),ge&&Zc(ge,!0);const vt=q&&ke.type!=="foreignObject";if(ht?U(_e.dynamicChildren,ht,We,ge,ft,vt,fe):Pe||lt(_e,ke,We,null,ge,ft,vt,fe,!1),pt>0){if(pt&16)B(We,ke,Dt,Gt,ge,ft,q);else if(pt&2&&Dt.class!==Gt.class&&u(We,"class",null,Gt.class,q),pt&4&&u(We,"style",Dt.style,Gt.style,q),pt&8){const Rn=ke.dynamicProps;for(let Ln=0;Ln<Rn.length;Ln++){const Ye=Rn[Ln],Qe=Dt[Ye],Fe=Gt[Ye];(Fe!==Qe||Ye==="value")&&u(We,Ye,Qe,Fe,q,_e.children,ge,ft,Ke)}}pt&1&&_e.children!==ke.children&&x(We,ke.children)}else!Pe&&ht==null&&B(We,ke,Dt,Gt,ge,ft,q);((ln=Gt.onVnodeUpdated)||zt)&&qr(()=>{ln&&Os(ln,ge,ke,_e),zt&&bo(ke,_e,ge,"updated")},ft)},U=(_e,ke,ge,ft,q,fe,Pe)=>{for(let We=0;We<ke.length;We++){const pt=_e[We],ht=ke[We],zt=pt.el&&(pt.type===Nt||!qa(pt,ht)||pt.shapeFlag&70)?w(pt.el):ge;L(pt,ht,zt,null,ft,q,fe,Pe,!0)}},B=(_e,ke,ge,ft,q,fe,Pe)=>{if(ge!==ft){if(ge!==Li)for(const We in ge)!rp(We)&&!(We in ft)&&u(_e,We,ge[We],null,Pe,ke.children,q,fe,Ke);for(const We in ft){if(rp(We))continue;const pt=ft[We],ht=ge[We];pt!==ht&&We!=="value"&&u(_e,We,ht,pt,Pe,ke.children,q,fe,Ke)}"value"in ft&&u(_e,"value",ge.value,ft.value)}},ie=(_e,ke,ge,ft,q,fe,Pe,We,pt)=>{const ht=ke.el=_e?_e.el:l(""),zt=ke.anchor=_e?_e.anchor:l("");let{patchFlag:Dt,dynamicChildren:Gt,slotScopeIds:ln}=ke;ln&&(We=We?We.concat(ln):ln),_e==null?(r(ht,ge,ft),r(zt,ge,ft),te(ke.children,ge,zt,q,fe,Pe,We,pt)):Dt>0&&Dt&64&&Gt&&_e.dynamicChildren?(U(_e.dynamicChildren,Gt,ge,q,fe,Pe,We),(ke.key!=null||q&&ke===q.subTree)&&i1(_e,ke,!0)):lt(_e,ke,ge,zt,q,fe,Pe,We,pt)},X=(_e,ke,ge,ft,q,fe,Pe,We,pt)=>{ke.slotScopeIds=We,_e==null?ke.shapeFlag&512?q.ctx.activate(ke,ge,ft,Pe,pt):ne(ke,ge,ft,q,fe,Pe,pt):Ee(_e,ke,pt)},ne=(_e,ke,ge,ft,q,fe,Pe)=>{const We=_e.component=EC(_e,ft,q);if(em(_e)&&(We.ctx.renderer=Vt),CC(We),We.asyncDep){if(q&&q.registerDep(We,Ie),!_e.el){const pt=We.subTree=ye(ss);F(null,pt,ke,ge)}return}Ie(We,_e,ke,ge,q,fe,Pe)},Ee=(_e,ke,ge)=>{const ft=ke.component=_e.component;if(sR(_e,ke,ge))if(ft.asyncDep&&!ft.asyncResolved){Xe(ft,ke,ge);return}else ft.next=ke,JO(ft.update),ft.update();else ke.el=_e.el,ft.vnode=ke},Ie=(_e,ke,ge,ft,q,fe,Pe)=>{const We=()=>{if(_e.isMounted){let{next:zt,bu:Dt,u:Gt,parent:ln,vnode:vt}=_e,Rn=zt,Ln;Zc(_e,!1),zt?(zt.el=vt.el,Xe(_e,zt,Pe)):zt=vt,Dt&&Gd(Dt),(Ln=zt.props&&zt.props.onVnodeBeforeUpdate)&&Os(Ln,ln,zt,vt),Zc(_e,!0);const Ye=iv(_e),Qe=_e.subTree;_e.subTree=Ye,L(Qe,Ye,w(Qe.el),ut(Qe),_e,q,fe),zt.el=Ye.el,Rn===null&&Gx(_e,Ye.el),Gt&&qr(Gt,q),(Ln=zt.props&&zt.props.onVnodeUpdated)&&qr(()=>Os(Ln,ln,zt,vt),q)}else{let zt;const{el:Dt,props:Gt}=ke,{bm:ln,m:vt,parent:Rn}=_e,Ln=uu(ke);if(Zc(_e,!1),ln&&Gd(ln),!Ln&&(zt=Gt&&Gt.onVnodeBeforeMount)&&Os(zt,Rn,ke),Zc(_e,!0),Dt&&qt){const Ye=()=>{_e.subTree=iv(_e),qt(Dt,_e.subTree,_e,q,null)};Ln?ke.type.__asyncLoader().then(()=>!_e.isUnmounted&&Ye()):Ye()}else{const Ye=_e.subTree=iv(_e);L(null,Ye,ge,ft,_e,q,fe),ke.el=Ye.el}if(vt&&qr(vt,q),!Ln&&(zt=Gt&&Gt.onVnodeMounted)){const Ye=ke;qr(()=>Os(zt,Rn,Ye),q)}(ke.shapeFlag&256||Rn&&uu(Rn.vnode)&&Rn.vnode.shapeFlag&256)&&_e.a&&qr(_e.a,q),_e.isMounted=!0,ke=ge=ft=null}},pt=_e.effect=new Yp(We,()=>p_(ht),_e.scope),ht=_e.update=()=>pt.run();ht.id=_e.uid,Zc(_e,!0),ht()},Xe=(_e,ke,ge)=>{ke.component=_e;const ft=_e.vnode.props;_e.vnode=ke,_e.next=null,HR(_e,ke.props,ft,ge),qR(_e,ke.children,ge),_h(),qS(),yh()},lt=(_e,ke,ge,ft,q,fe,Pe,We,pt=!1)=>{const ht=_e&&_e.children,zt=_e?_e.shapeFlag:0,Dt=ke.children,{patchFlag:Gt,shapeFlag:ln}=ke;if(Gt>0){if(Gt&128){$t(ht,Dt,ge,ft,q,fe,Pe,We,pt);return}else if(Gt&256){st(ht,Dt,ge,ft,q,fe,Pe,We,pt);return}}ln&8?(zt&16&&Ke(ht,q,fe),Dt!==ht&&x(ge,Dt)):zt&16?ln&16?$t(ht,Dt,ge,ft,q,fe,Pe,We,pt):Ke(ht,q,fe,!0):(zt&8&&x(ge,""),ln&16&&te(Dt,ge,ft,q,fe,Pe,We,pt))},st=(_e,ke,ge,ft,q,fe,Pe,We,pt)=>{_e=_e||Vd,ke=ke||Vd;const ht=_e.length,zt=ke.length,Dt=Math.min(ht,zt);let Gt;for(Gt=0;Gt<Dt;Gt++){const ln=ke[Gt]=pt?Hl(ke[Gt]):Ys(ke[Gt]);L(_e[Gt],ln,ge,null,q,fe,Pe,We,pt)}ht>zt?Ke(_e,q,fe,!0,!1,Dt):te(ke,ge,ft,q,fe,Pe,We,pt,Dt)},$t=(_e,ke,ge,ft,q,fe,Pe,We,pt)=>{let ht=0;const zt=ke.length;let Dt=_e.length-1,Gt=zt-1;for(;ht<=Dt&&ht<=Gt;){const ln=_e[ht],vt=ke[ht]=pt?Hl(ke[ht]):Ys(ke[ht]);if(qa(ln,vt))L(ln,vt,ge,null,q,fe,Pe,We,pt);else break;ht++}for(;ht<=Dt&&ht<=Gt;){const ln=_e[Dt],vt=ke[Gt]=pt?Hl(ke[Gt]):Ys(ke[Gt]);if(qa(ln,vt))L(ln,vt,ge,null,q,fe,Pe,We,pt);else break;Dt--,Gt--}if(ht>Dt){if(ht<=Gt){const ln=Gt+1,vt=ln<zt?ke[ln].el:ft;for(;ht<=Gt;)L(null,ke[ht]=pt?Hl(ke[ht]):Ys(ke[ht]),ge,vt,q,fe,Pe,We,pt),ht++}}else if(ht>Gt)for(;ht<=Dt;)nt(_e[ht],q,fe,!0),ht++;else{const ln=ht,vt=ht,Rn=new Map;for(ht=vt;ht<=Gt;ht++){const an=ke[ht]=pt?Hl(ke[ht]):Ys(ke[ht]);an.key!=null&&Rn.set(an.key,ht)}let Ln,Ye=0;const Qe=Gt-vt+1;let Fe=!1,mt=0;const St=new Array(Qe);for(ht=0;ht<Qe;ht++)St[ht]=0;for(ht=ln;ht<=Dt;ht++){const an=_e[ht];if(Ye>=Qe){nt(an,q,fe,!0);continue}let Pt;if(an.key!=null)Pt=Rn.get(an.key);else for(Ln=vt;Ln<=Gt;Ln++)if(St[Ln-vt]===0&&qa(an,ke[Ln])){Pt=Ln;break}Pt===void 0?nt(an,q,fe,!0):(St[Pt-vt]=ht+1,Pt>=mt?mt=Pt:Fe=!0,L(an,ke[Pt],ge,null,q,fe,Pe,We,pt),Ye++)}const Yt=Fe?KR(St):Vd;for(Ln=Yt.length-1,ht=Qe-1;ht>=0;ht--){const an=vt+ht,Pt=ke[an],qn=an+1<zt?ke[an+1].el:ft;St[ht]===0?L(null,Pt,ge,qn,q,fe,Pe,We,pt):Fe&&(Ln<0||ht!==Yt[Ln]?It(Pt,ge,qn,2):Ln--)}}},It=(_e,ke,ge,ft,q=null)=>{const{el:fe,type:Pe,transition:We,children:pt,shapeFlag:ht}=_e;if(ht&6){It(_e.component.subTree,ke,ge,ft);return}if(ht&128){_e.suspense.move(ke,ge,ft);return}if(ht&64){Pe.move(_e,ke,ge,Vt);return}if(Pe===Nt){r(fe,ke,ge);for(let Dt=0;Dt<pt.length;Dt++)It(pt[Dt],ke,ge,ft);r(_e.anchor,ke,ge);return}if(Pe===du){ee(_e,ke,ge);return}if(ft!==2&&ht&1&&We)if(ft===0)We.beforeEnter(fe),r(fe,ke,ge),qr(()=>We.enter(fe),q);else{const{leave:Dt,delayLeave:Gt,afterLeave:ln}=We,vt=()=>r(fe,ke,ge),Rn=()=>{Dt(fe,()=>{vt(),ln&&ln()})};Gt?Gt(fe,vt,Rn):Rn()}else r(fe,ke,ge)},nt=(_e,ke,ge,ft=!1,q=!1)=>{const{type:fe,props:Pe,ref:We,children:pt,dynamicChildren:ht,shapeFlag:zt,patchFlag:Dt,dirs:Gt}=_e;if(We!=null&&Mv(We,null,ge,_e,!0),zt&256){ke.ctx.deactivate(_e);return}const ln=zt&1&&Gt,vt=!uu(_e);let Rn;if(vt&&(Rn=Pe&&Pe.onVnodeBeforeUnmount)&&Os(Rn,ke,_e),zt&6)Be(_e.component,ge,ft);else{if(zt&128){_e.suspense.unmount(ge,ft);return}ln&&bo(_e,null,ke,"beforeUnmount"),zt&64?_e.type.remove(_e,ke,ge,q,Vt,ft):ht&&(fe!==Nt||Dt>0&&Dt&64)?Ke(ht,ke,ge,!1,!0):(fe===Nt&&Dt&384||!q&&zt&16)&&Ke(pt,ke,ge),ft&&et(_e)}(vt&&(Rn=Pe&&Pe.onVnodeUnmounted)||ln)&&qr(()=>{Rn&&Os(Rn,ke,_e),ln&&bo(_e,null,ke,"unmounted")},ge)},et=_e=>{const{type:ke,el:ge,anchor:ft,transition:q}=_e;if(ke===Nt){dt(ge,ft);return}if(ke===du){H(_e);return}const fe=()=>{s(ge),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(_e.shapeFlag&1&&q&&!q.persisted){const{leave:Pe,delayLeave:We}=q,pt=()=>Pe(ge,fe);We?We(_e.el,fe,pt):pt()}else fe()},dt=(_e,ke)=>{let ge;for(;_e!==ke;)ge=I(_e),s(_e),_e=ge;s(ke)},Be=(_e,ke,ge)=>{const{bum:ft,scope:q,update:fe,subTree:Pe,um:We}=_e;ft&&Gd(ft),q.stop(),fe&&(fe.active=!1,nt(Pe,_e,ke,ge)),We&&qr(We,ke),qr(()=>{_e.isUnmounted=!0},ke),ke&&ke.pendingBranch&&!ke.isUnmounted&&_e.asyncDep&&!_e.asyncResolved&&_e.suspenseId===ke.pendingId&&(ke.deps--,ke.deps===0&&ke.resolve())},Ke=(_e,ke,ge,ft=!1,q=!1,fe=0)=>{for(let Pe=fe;Pe<_e.length;Pe++)nt(_e[Pe],ke,ge,ft,q)},ut=_e=>_e.shapeFlag&6?ut(_e.component.subTree):_e.shapeFlag&128?_e.suspense.next():I(_e.anchor||_e.el),Ot=(_e,ke,ge)=>{_e==null?ke._vnode&&nt(ke._vnode,null,null,!0):L(ke._vnode||null,_e,ke,null,null,null,ge),qS(),Cv(),ke._vnode=_e},Vt={p:L,um:nt,m:It,r:et,mt:ne,mc:te,pc:lt,pbc:U,n:ut,o:e};let _n,qt;return t&&([_n,qt]=t(Vt)),{render:Ot,hydrate:_n,createApp:UR(Ot,_n)}}function Zc({effect:e,update:t},i){e.allowRecurse=t.allowRecurse=i}function i1(e,t,i=!1){const r=e.children,s=t.children;if(xn(r)&&xn(s))for(let u=0;u<r.length;u++){const d=r[u];let l=s[u];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[u]=Hl(s[u]),l.el=d.el),i||i1(d,l)),l.type===mu&&(l.el=d.el)}}function KR(e){const t=e.slice(),i=[0];let r,s,u,d,l;const m=e.length;for(r=0;r<m;r++){const g=e[r];if(g!==0){if(s=i[i.length-1],e[s]<g){t[r]=s,i.push(r);continue}for(u=0,d=i.length-1;u<d;)l=u+d>>1,e[i[l]]<g?u=l+1:d=l;g<e[i[u]]&&(u>0&&(t[r]=i[u-1]),i[u]=r)}}for(u=i.length,d=i[u-1];u-- >0;)i[u]=d,d=t[d];return i}const XR=e=>e.__isTeleport,op=e=>e&&(e.disabled||e.disabled===""),sT=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Cb=(e,t)=>{const i=e&&e.to;return Qi(i)?t?t(i):null:i},YR={__isTeleport:!0,process(e,t,i,r,s,u,d,l,m,g){const{mc:x,pc:w,pbc:I,o:{insert:C,querySelector:A,createText:L,createComment:$}}=g,F=op(t.props);let{shapeFlag:z,children:ee,dynamicChildren:H}=t;if(e==null){const Q=t.el=L(""),ae=t.anchor=L("");C(Q,i,r),C(ae,i,r);const be=t.target=Cb(t.props,A),te=t.targetAnchor=L("");be&&(C(te,be),d=d||sT(be));const G=(U,B)=>{z&16&&x(ee,U,B,s,u,d,l,m)};F?G(i,ae):be&&G(be,te)}else{t.el=e.el;const Q=t.anchor=e.anchor,ae=t.target=e.target,be=t.targetAnchor=e.targetAnchor,te=op(e.props),G=te?i:ae,U=te?Q:be;if(d=d||sT(ae),H?(I(e.dynamicChildren,H,G,s,u,d,l),i1(e,t,!0)):m||w(e,t,G,U,s,u,d,l,!1),F)te||Og(t,i,Q,g,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const B=t.target=Cb(t.props,A);B&&Og(t,B,null,g,0)}else te&&Og(t,ae,be,g,1)}_C(t)},remove(e,t,i,r,{um:s,o:{remove:u}},d){const{shapeFlag:l,children:m,anchor:g,targetAnchor:x,target:w,props:I}=e;if(w&&u(x),(d||!op(I))&&(u(g),l&16))for(let C=0;C<m.length;C++){const A=m[C];s(A,t,i,!0,!!A.dynamicChildren)}},move:Og,hydrate:JR};function Og(e,t,i,{o:{insert:r},m:s},u=2){u===0&&r(e.targetAnchor,t,i);const{el:d,anchor:l,shapeFlag:m,children:g,props:x}=e,w=u===2;if(w&&r(d,t,i),(!w||op(x))&&m&16)for(let I=0;I<g.length;I++)s(g[I],t,i,2);w&&r(l,t,i)}function JR(e,t,i,r,s,u,{o:{nextSibling:d,parentNode:l,querySelector:m}},g){const x=t.target=Cb(t.props,m);if(x){const w=x._lpa||x.firstChild;if(t.shapeFlag&16)if(op(t.props))t.anchor=g(d(e),t,l(e),i,r,s,u),t.targetAnchor=w;else{t.anchor=d(e);let I=w;for(;I;)if(I=d(I),I&&I.nodeType===8&&I.data==="teleport anchor"){t.targetAnchor=I,x._lpa=t.targetAnchor&&d(t.targetAnchor);break}g(w,t,x,i,r,s,u)}_C(t)}return t.anchor&&d(t.anchor)}const tm=YR;function _C(e){const t=e.ctx;if(t&&t.ut){let i=e.children[0].el;for(;i!==e.targetAnchor;)i.nodeType===1&&i.setAttribute("data-v-owner",t.uid),i=i.nextSibling;t.ut()}}const Nt=Symbol.for("v-fgt"),mu=Symbol.for("v-txt"),ss=Symbol.for("v-cmt"),du=Symbol.for("v-stc"),lp=[];let Rs=null;function V(e=!1){lp.push(Rs=e?null:[])}function yC(){lp.pop(),Rs=lp[lp.length-1]||null}let gu=1;function Ab(e){gu+=e}function bC(e){return e.dynamicChildren=gu>0?Rs||Vd:null,yC(),gu>0&&Rs&&Rs.push(e),e}function pe(e,t,i,r,s,u){return bC(de(e,t,i,r,s,u,!0))}function je(e,t,i,r,s){return bC(ye(e,t,i,r,s,!0))}function hc(e){return e?e.__v_isVNode===!0:!1}function qa(e,t){return e.type===t.type&&e.key===t.key}function QR(e){}const b_="__vInternal",xC=({key:e})=>e??null,rv=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?Qi(e)||Gi(e)||Un(e)?{i:zr,r:e,k:t,f:!!i}:e:null);function de(e,t=null,i=null,r=0,s=null,u=e===Nt?0:1,d=!1,l=!1){const m={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&xC(t),ref:t&&rv(t),scopeId:g_,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:u,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:zr};return l?(r1(m,i),u&128&&e.normalize(m)):i&&(m.shapeFlag|=Qi(i)?8:16),gu>0&&!d&&Rs&&(m.patchFlag>0||u&6)&&m.patchFlag!==32&&Rs.push(m),m}const ye=e3;function e3(e,t=null,i=null,r=0,s=null,u=!1){if((!e||e===iC)&&(e=ss),hc(e)){const l=ra(e,t,!0);return i&&r1(l,i),gu>0&&!u&&Rs&&(l.shapeFlag&6?Rs[Rs.indexOf(e)]=l:Rs.push(l)),l.patchFlag|=-2,l}if(o3(e)&&(e=e.__vccOpts),t){t=wC(t);let{class:l,style:m}=t;l&&!Qi(l)&&(t.class=kn(l)),Ri(m)&&(Bx(m)&&!xn(m)&&(m=ji({},m)),t.style=wu(m))}const d=Qi(e)?1:GI(e)?128:XR(e)?64:Ri(e)?4:Un(e)?2:0;return de(e,t,i,r,s,d,u,!0)}function wC(e){return e?Bx(e)||b_ in e?ji({},e):e:null}function ra(e,t,i=!1){const{props:r,ref:s,patchFlag:u,children:d}=e,l=t?Br(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&xC(l),ref:t&&t.ref?i&&s?xn(s)?s.concat(rv(t)):[s,rv(t)]:rv(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:d,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Nt?u===-1?16:u|16:u,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ra(e.ssContent),ssFallback:e.ssFallback&&ra(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Mt(e=" ",t=0){return ye(mu,null,e,t)}function TC(e,t){const i=ye(du,null,e);return i.staticCount=t,i}function tt(e="",t=!1){return t?(V(),je(ss,null,e)):ye(ss,null,e)}function Ys(e){return e==null||typeof e=="boolean"?ye(ss):xn(e)?ye(Nt,null,e.slice()):typeof e=="object"?Hl(e):ye(mu,null,String(e))}function Hl(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ra(e)}function r1(e,t){let i=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(xn(t))i=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),r1(e,s()),s._c&&(s._d=!0));return}else{i=32;const s=t._;!s&&!(b_ in t)?t._ctx=zr:s===3&&zr&&(zr.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Un(t)?(t={default:t,_ctx:zr},i=32):(t=String(t),r&64?(i=16,t=[Mt(t)]):i=8);e.children=t,e.shapeFlag|=i}function Br(...e){const t={};for(let i=0;i<e.length;i++){const r=e[i];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=kn([t.class,r.class]));else if(s==="style")t.style=wu([t.style,r.style]);else if(qp(s)){const u=t[s],d=r[s];d&&u!==d&&!(xn(u)&&u.includes(d))&&(t[s]=u?[].concat(u,d):d)}else s!==""&&(t[s]=r[s])}return t}function Os(e,t,i,r=null){ta(e,t,7,[i,r])}const t3=cC();let n3=0;function EC(e,t,i){const r=e.type,s=(t?t.appContext:e.appContext)||t3,u={uid:n3++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Rx(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:dC(r,s),emitsOptions:HI(r,s),emit:null,emitted:null,propsDefaults:Li,inheritAttrs:r.inheritAttrs,ctx:Li,data:Li,props:Li,attrs:Li,slots:Li,refs:Li,setupState:Li,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return u.ctx={_:u},u.root=t?t.root:u,u.emit=eR.bind(null,u),e.ce&&e.ce(u),u}let Er=null;const zo=()=>Er||zr;let s1,Td,aT="__VUE_INSTANCE_SETTERS__";(Td=vb()[aT])||(Td=vb()[aT]=[]),Td.push(e=>Er=e),s1=e=>{Td.length>1?Td.forEach(t=>t(e)):Td[0](e)};const fc=e=>{s1(e),e.scope.on()},rc=()=>{Er&&Er.scope.off(),s1(null)};function IC(e){return e.vnode.shapeFlag&4}let th=!1;function CC(e,t=!1){th=t;const{props:i,children:r}=e.vnode,s=IC(e);VR(e,i,s,t),WR(e,r);const u=s?i3(e,t):void 0;return th=!1,u}function i3(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=Jp(new Proxy(e.ctx,Sb));const{setup:r}=i;if(r){const s=e.setupContext=r.length>1?MC(e):null;fc(e),_h();const u=ol(r,e,0,[e.props,s]);if(yh(),rc(),Lx(u)){if(u.then(rc,rc),t)return u.then(d=>{Mb(e,d,t)}).catch(d=>{Tu(d,e,0)});e.asyncDep=u}else Mb(e,u,t)}else AC(e,t)}function Mb(e,t,i){Un(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ri(t)&&(e.setupState=Ux(t)),AC(e,i)}let kv,kb;function r3(e){kv=e,kb=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,wR))}}const s3=()=>!kv;function AC(e,t,i){const r=e.type;if(!e.render){if(!t&&kv&&!r.render){const s=r.template||e1(e).template;if(s){const{isCustomElement:u,compilerOptions:d}=e.appContext.config,{delimiters:l,compilerOptions:m}=r,g=ji(ji({isCustomElement:u,delimiters:l},d),m);r.render=kv(s,g)}}e.render=r.render||Xa,kb&&kb(e)}fc(e),_h(),FR(e),yh(),rc()}function a3(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,i){return zs(e,"get","$attrs"),t[i]}}))}function MC(e){const t=i=>{e.exposed=i||{}};return{get attrs(){return a3(e)},slots:e.slots,emit:e.emit,expose:t}}function x_(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Ux(Jp(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in ap)return ap[i](e)},has(t,i){return i in t||i in ap}}))}function Pb(e,t=!0){return Un(e)?e.displayName||e.name:e.name||t&&e.__name}function o3(e){return Un(e)&&"__vccOpts"in e}const Le=(e,t)=>qO(e,t,th);function ni(e,t,i){const r=arguments.length;return r===2?Ri(t)&&!xn(t)?hc(t)?ye(e,null,[t]):ye(e,t):ye(e,null,t):(r>3?i=Array.prototype.slice.call(arguments,2):r===3&&hc(i)&&(i=[i]),ye(e,t,i))}const kC=Symbol.for("v-scx"),PC=()=>wi(kC);function l3(){}function c3(e,t,i,r){const s=i[r];if(s&&DC(s,e))return s;const u=t();return u.memo=e.slice(),i[r]=u}function DC(e,t){const i=e.memo;if(i.length!=t.length)return!1;for(let r=0;r<i.length;r++)if(Jd(i[r],t[r]))return!1;return gu>0&&Rs&&Rs.push(e),!0}const LC="3.3.4",u3={createComponentInstance:EC,setupComponent:CC,renderComponentRoot:iv,setCurrentRenderingInstance:Mp,isVNode:hc,normalizeVNode:Ys},d3=u3,h3=null,f3=null,p3="http://www.w3.org/2000/svg",ru=typeof document<"u"?document:null,oT=ru&&ru.createElement("template"),m3={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,r)=>{const s=t?ru.createElementNS(p3,e):ru.createElement(e,i?{is:i}:void 0);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>ru.createTextNode(e),createComment:e=>ru.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ru.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,r,s,u){const d=i?i.previousSibling:t.lastChild;if(s&&(s===u||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),i),!(s===u||!(s=s.nextSibling)););else{oT.innerHTML=r?`<svg>${e}</svg>`:e;const l=oT.content;if(r){const m=l.firstChild;for(;m.firstChild;)l.appendChild(m.firstChild);l.removeChild(m)}t.insertBefore(l,i)}return[d?d.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}};function g3(e,t,i){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}function v3(e,t,i){const r=e.style,s=Qi(i);if(i&&!s){if(t&&!Qi(t))for(const u in t)i[u]==null&&Db(r,u,"");for(const u in i)Db(r,u,i[u])}else{const u=r.display;s?t!==i&&(r.cssText=i):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=u)}}const lT=/\s*!important$/;function Db(e,t,i){if(xn(i))i.forEach(r=>Db(e,t,r));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const r=_3(e,t);lT.test(i)?e.setProperty(ba(r),i.replace(lT,""),"important"):e[r]=i}}const cT=["Webkit","Moz","ms"],m0={};function _3(e,t){const i=m0[t];if(i)return i;let r=$s(t);if(r!=="filter"&&r in e)return m0[t]=r;r=Zp(r);for(let s=0;s<cT.length;s++){const u=cT[s]+r;if(u in e)return m0[t]=u}return t}const uT="http://www.w3.org/1999/xlink";function y3(e,t,i,r,s){if(r&&t.startsWith("xlink:"))i==null?e.removeAttributeNS(uT,t.slice(6,t.length)):e.setAttributeNS(uT,t,i);else{const u=oO(t);i==null||u&&!xI(i)?e.removeAttribute(t):e.setAttribute(t,u?"":i)}}function b3(e,t,i,r,s,u,d){if(t==="innerHTML"||t==="textContent"){r&&d(r,s,u),e[t]=i??"";return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){e._value=i;const g=l==="OPTION"?e.getAttribute("value"):e.value,x=i??"";g!==x&&(e.value=x),i==null&&e.removeAttribute(t);return}let m=!1;if(i===""||i==null){const g=typeof e[t];g==="boolean"?i=xI(i):i==null&&g==="string"?(i="",m=!0):g==="number"&&(i=0,m=!0)}try{e[t]=i}catch{}m&&e.removeAttribute(t)}function al(e,t,i,r){e.addEventListener(t,i,r)}function x3(e,t,i,r){e.removeEventListener(t,i,r)}function w3(e,t,i,r,s=null){const u=e._vei||(e._vei={}),d=u[t];if(r&&d)d.value=r;else{const[l,m]=S3(t);if(r){const g=u[t]=I3(r,s);al(e,l,g,m)}else d&&(x3(e,l,d,m),u[t]=void 0)}}const dT=/(?:Once|Passive|Capture)$/;function S3(e){let t;if(dT.test(e)){t={};let r;for(;r=e.match(dT);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ba(e.slice(2)),t]}let g0=0;const T3=Promise.resolve(),E3=()=>g0||(T3.then(()=>g0=0),g0=Date.now());function I3(e,t){const i=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=i.attached)return;ta(C3(r,i.value),t,5,[r])};return i.value=e,i.attached=E3(),i}function C3(e,t){if(xn(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const hT=/^on[a-z]/,A3=(e,t,i,r,s=!1,u,d,l,m)=>{t==="class"?g3(e,r,s):t==="style"?v3(e,i,r):qp(t)?Px(t)||w3(e,t,i,r,d):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):M3(e,t,r,s))?b3(e,t,r,u,d,l,m):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),y3(e,t,r,s))};function M3(e,t,i,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&hT.test(t)&&Un(i)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||hT.test(t)&&Qi(i)?!1:t in e}function OC(e,t){const i=rt(e);class r extends w_{constructor(u){super(i,u,t)}}return r.def=i,r}const k3=e=>OC(e,KC),P3=typeof HTMLElement<"u"?HTMLElement:class{};class w_ extends P3{constructor(t,i={},r){super(),this._def=t,this._props=i,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&r?r(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,Ar(()=>{this._connected||(Rb(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);new MutationObserver(r=>{for(const s of r)this._setAttr(s.attributeName)}).observe(this,{attributes:!0});const t=(r,s=!1)=>{const{props:u,styles:d}=r;let l;if(u&&!xn(u))for(const m in u){const g=u[m];(g===Number||g&&g.type===Number)&&(m in this._props&&(this._props[m]=Ev(this._props[m])),(l||(l=Object.create(null)))[$s(m)]=!0)}this._numberProps=l,s&&this._resolveProps(r),this._applyStyles(d),this._update()},i=this._def.__asyncLoader;i?i().then(r=>t(r,!0)):t(this._def)}_resolveProps(t){const{props:i}=t,r=xn(i)?i:Object.keys(i||{});for(const s of Object.keys(this))s[0]!=="_"&&r.includes(s)&&this._setProp(s,this[s],!0,!1);for(const s of r.map($s))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(u){this._setProp(s,u)}})}_setAttr(t){let i=this.getAttribute(t);const r=$s(t);this._numberProps&&this._numberProps[r]&&(i=Ev(i)),this._setProp(r,i,!1)}_getProp(t){return this._props[t]}_setProp(t,i,r=!0,s=!0){i!==this._props[t]&&(this._props[t]=i,s&&this._instance&&this._update(),r&&(i===!0?this.setAttribute(ba(t),""):typeof i=="string"||typeof i=="number"?this.setAttribute(ba(t),i+""):i||this.removeAttribute(ba(t))))}_update(){Rb(this._createVNode(),this.shadowRoot)}_createVNode(){const t=ye(this._def,ji({},this._props));return this._instance||(t.ce=i=>{this._instance=i,i.isCE=!0;const r=(u,d)=>{this.dispatchEvent(new CustomEvent(u,{detail:d}))};i.emit=(u,...d)=>{r(u,d),ba(u)!==u&&r(ba(u),d)};let s=this;for(;s=s&&(s.parentNode||s.host);)if(s instanceof w_){i.parent=s._instance,i.provides=s._instance.provides;break}}),t}_applyStyles(t){t&&t.forEach(i=>{const r=document.createElement("style");r.textContent=i,this.shadowRoot.appendChild(r)})}}function D3(e="$style"){{const t=zo();if(!t)return Li;const i=t.type.__cssModules;if(!i)return Li;const r=i[e];return r||Li}}function nm(e){const t=zo();if(!t)return;const i=t.ut=(s=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(u=>Ob(u,s))},r=()=>{const s=e(t.proxy);Lb(t.subTree,s),i(s)};qI(r),Fn(()=>{const s=new MutationObserver(r);s.observe(t.subTree.el.parentNode,{childList:!0}),Wi(()=>s.disconnect())})}function Lb(e,t){if(e.shapeFlag&128){const i=e.suspense;e=i.activeBranch,i.pendingBranch&&!i.isHydrating&&i.effects.push(()=>{Lb(i.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)Ob(e.el,t);else if(e.type===Nt)e.children.forEach(i=>Lb(i,t));else if(e.type===du){let{el:i,anchor:r}=e;for(;i&&(Ob(i,t),i!==r);)i=i.nextSibling}}function Ob(e,t){if(e.nodeType===1){const i=e.style;for(const r in t)i.setProperty(`--${r}`,t[r])}}const zl="transition",Pf="animation",_r=(e,{slots:t})=>ni(KI,FC(e),t);_r.displayName="Transition";const RC={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},L3=_r.props=ji({},Zx,RC),Kc=(e,t=[])=>{xn(e)?e.forEach(i=>i(...t)):e&&e(...t)},fT=e=>e?xn(e)?e.some(t=>t.length>1):e.length>1:!1;function FC(e){const t={};for(const ie in e)ie in RC||(t[ie]=e[ie]);if(e.css===!1)return t;const{name:i="v",type:r,duration:s,enterFromClass:u=`${i}-enter-from`,enterActiveClass:d=`${i}-enter-active`,enterToClass:l=`${i}-enter-to`,appearFromClass:m=u,appearActiveClass:g=d,appearToClass:x=l,leaveFromClass:w=`${i}-leave-from`,leaveActiveClass:I=`${i}-leave-active`,leaveToClass:C=`${i}-leave-to`}=e,A=O3(s),L=A&&A[0],$=A&&A[1],{onBeforeEnter:F,onEnter:z,onEnterCancelled:ee,onLeave:H,onLeaveCancelled:Q,onBeforeAppear:ae=F,onAppear:be=z,onAppearCancelled:te=ee}=t,G=(ie,X,ne)=>{Ul(ie,X?x:l),Ul(ie,X?g:d),ne&&ne()},U=(ie,X)=>{ie._isLeaving=!1,Ul(ie,w),Ul(ie,C),Ul(ie,I),X&&X()},B=ie=>(X,ne)=>{const Ee=ie?be:z,Ie=()=>G(X,ie,ne);Kc(Ee,[X,Ie]),pT(()=>{Ul(X,ie?m:u),nl(X,ie?x:l),fT(Ee)||mT(X,r,L,Ie)})};return ji(t,{onBeforeEnter(ie){Kc(F,[ie]),nl(ie,u),nl(ie,d)},onBeforeAppear(ie){Kc(ae,[ie]),nl(ie,m),nl(ie,g)},onEnter:B(!1),onAppear:B(!0),onLeave(ie,X){ie._isLeaving=!0;const ne=()=>U(ie,X);nl(ie,w),zC(),nl(ie,I),pT(()=>{ie._isLeaving&&(Ul(ie,w),nl(ie,C),fT(H)||mT(ie,r,$,ne))}),Kc(H,[ie,ne])},onEnterCancelled(ie){G(ie,!1),Kc(ee,[ie])},onAppearCancelled(ie){G(ie,!0),Kc(te,[ie])},onLeaveCancelled(ie){U(ie),Kc(Q,[ie])}})}function O3(e){if(e==null)return null;if(Ri(e))return[v0(e.enter),v0(e.leave)];{const t=v0(e);return[t,t]}}function v0(e){return Ev(e)}function nl(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.add(i)),(e._vtc||(e._vtc=new Set)).add(t)}function Ul(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const{_vtc:i}=e;i&&(i.delete(t),i.size||(e._vtc=void 0))}function pT(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let R3=0;function mT(e,t,i,r){const s=e._endId=++R3,u=()=>{s===e._endId&&r()};if(i)return setTimeout(u,i);const{type:d,timeout:l,propCount:m}=$C(e,t);if(!d)return r();const g=d+"end";let x=0;const w=()=>{e.removeEventListener(g,I),u()},I=C=>{C.target===e&&++x>=m&&w()};setTimeout(()=>{x<m&&w()},l+1),e.addEventListener(g,I)}function $C(e,t){const i=window.getComputedStyle(e),r=A=>(i[A]||"").split(", "),s=r(`${zl}Delay`),u=r(`${zl}Duration`),d=gT(s,u),l=r(`${Pf}Delay`),m=r(`${Pf}Duration`),g=gT(l,m);let x=null,w=0,I=0;t===zl?d>0&&(x=zl,w=d,I=u.length):t===Pf?g>0&&(x=Pf,w=g,I=m.length):(w=Math.max(d,g),x=w>0?d>g?zl:Pf:null,I=x?x===zl?u.length:m.length:0);const C=x===zl&&/\b(transform|all)(,|$)/.test(r(`${zl}Property`).toString());return{type:x,timeout:w,propCount:I,hasTransform:C}}function gT(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((i,r)=>vT(i)+vT(e[r])))}function vT(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function zC(){return document.body.offsetHeight}const BC=new WeakMap,NC=new WeakMap,jC={name:"TransitionGroup",props:ji({},L3,{tag:String,moveClass:String}),setup(e,{slots:t}){const i=zo(),r=qx();let s,u;return xh(()=>{if(!s.length)return;const d=e.moveClass||`${e.name||"v"}-move`;if(!N3(s[0].el,i.vnode.el,d))return;s.forEach($3),s.forEach(z3);const l=s.filter(B3);zC(),l.forEach(m=>{const g=m.el,x=g.style;nl(g,d),x.transform=x.webkitTransform=x.transitionDuration="";const w=g._moveCb=I=>{I&&I.target!==g||(!I||/transform$/.test(I.propertyName))&&(g.removeEventListener("transitionend",w),g._moveCb=null,Ul(g,d))};g.addEventListener("transitionend",w)})}),()=>{const d=ci(e),l=FC(d);let m=d.tag||Nt;s=u,u=t.default?v_(t.default()):[];for(let g=0;g<u.length;g++){const x=u[g];x.key!=null&&pu(x,eh(x,l,r,i))}if(s)for(let g=0;g<s.length;g++){const x=s[g];pu(x,eh(x,l,r,i)),BC.set(x,x.el.getBoundingClientRect())}return ye(m,null,u)}}},F3=e=>delete e.mode;jC.props;const a1=jC;function $3(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function z3(e){NC.set(e,e.el.getBoundingClientRect())}function B3(e){const t=BC.get(e),i=NC.get(e),r=t.left-i.left,s=t.top-i.top;if(r||s){const u=e.el.style;return u.transform=u.webkitTransform=`translate(${r}px,${s}px)`,u.transitionDuration="0s",e}}function N3(e,t,i){const r=e.cloneNode();e._vtc&&e._vtc.forEach(d=>{d.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),i.split(/\s+/).forEach(d=>d&&r.classList.add(d)),r.style.display="none";const s=t.nodeType===1?t:t.parentNode;s.appendChild(r);const{hasTransform:u}=$C(r);return s.removeChild(r),u}const pc=e=>{const t=e.props["onUpdate:modelValue"]||!1;return xn(t)?i=>Gd(t,i):t};function j3(e){e.target.composing=!0}function _T(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Pv={created(e,{modifiers:{lazy:t,trim:i,number:r}},s){e._assign=pc(s);const u=r||s.props&&s.props.type==="number";al(e,t?"change":"input",d=>{if(d.target.composing)return;let l=e.value;i&&(l=l.trim()),u&&(l=Tv(l)),e._assign(l)}),i&&al(e,"change",()=>{e.value=e.value.trim()}),t||(al(e,"compositionstart",j3),al(e,"compositionend",_T),al(e,"change",_T))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:i,trim:r,number:s}},u){if(e._assign=pc(u),e.composing||document.activeElement===e&&e.type!=="range"&&(i||r&&e.value.trim()===t||(s||e.type==="number")&&Tv(e.value)===t))return;const d=t??"";e.value!==d&&(e.value=d)}},o1={deep:!0,created(e,t,i){e._assign=pc(i),al(e,"change",()=>{const r=e._modelValue,s=nh(e),u=e.checked,d=e._assign;if(xn(r)){const l=o_(r,s),m=l!==-1;if(u&&!m)d(r.concat(s));else if(!u&&m){const g=[...r];g.splice(l,1),d(g)}}else if(xu(r)){const l=new Set(r);u?l.add(s):l.delete(s),d(l)}else d(UC(e,u))})},mounted:yT,beforeUpdate(e,t,i){e._assign=pc(i),yT(e,t,i)}};function yT(e,{value:t,oldValue:i},r){e._modelValue=t,xn(t)?e.checked=o_(t,r.props.value)>-1:xu(t)?e.checked=t.has(r.props.value):t!==i&&(e.checked=uc(t,UC(e,!0)))}const l1={created(e,{value:t},i){e.checked=uc(t,i.props.value),e._assign=pc(i),al(e,"change",()=>{e._assign(nh(e))})},beforeUpdate(e,{value:t,oldValue:i},r){e._assign=pc(r),t!==i&&(e.checked=uc(t,r.props.value))}},wh={deep:!0,created(e,{value:t,modifiers:{number:i}},r){const s=xu(t);al(e,"change",()=>{const u=Array.prototype.filter.call(e.options,d=>d.selected).map(d=>i?Tv(nh(d)):nh(d));e._assign(e.multiple?s?new Set(u):u:u[0])}),e._assign=pc(r)},mounted(e,{value:t}){bT(e,t)},beforeUpdate(e,t,i){e._assign=pc(i)},updated(e,{value:t}){bT(e,t)}};function bT(e,t){const i=e.multiple;if(!(i&&!xn(t)&&!xu(t))){for(let r=0,s=e.options.length;r<s;r++){const u=e.options[r],d=nh(u);if(i)xn(t)?u.selected=o_(t,d)>-1:u.selected=t.has(d);else if(uc(nh(u),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!i&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function nh(e){return"_value"in e?e._value:e.value}function UC(e,t){const i=t?"_trueValue":"_falseValue";return i in e?e[i]:t}const VC={created(e,t,i){Rg(e,t,i,null,"created")},mounted(e,t,i){Rg(e,t,i,null,"mounted")},beforeUpdate(e,t,i,r){Rg(e,t,i,r,"beforeUpdate")},updated(e,t,i,r){Rg(e,t,i,r,"updated")}};function HC(e,t){switch(e){case"SELECT":return wh;case"TEXTAREA":return Pv;default:switch(t){case"checkbox":return o1;case"radio":return l1;default:return Pv}}}function Rg(e,t,i,r,s){const d=HC(e.tagName,i.props&&i.props.type)[s];d&&d(e,t,i,r)}function U3(){Pv.getSSRProps=({value:e})=>({value:e}),l1.getSSRProps=({value:e},t)=>{if(t.props&&uc(t.props.value,e))return{checked:!0}},o1.getSSRProps=({value:e},t)=>{if(xn(e)){if(t.props&&o_(e,t.props.value)>-1)return{checked:!0}}else if(xu(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},VC.getSSRProps=(e,t)=>{if(typeof t.type!="string")return;const i=HC(t.type.toUpperCase(),t.props&&t.props.type);if(i.getSSRProps)return i.getSSRProps(e,t)}}const V3=["ctrl","shift","alt","meta"],H3={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>V3.some(i=>e[`${i}Key`]&&!t.includes(i))},Do=(e,t)=>(i,...r)=>{for(let s=0;s<t.length;s++){const u=H3[t[s]];if(u&&u(i,t))return}return e(i,...r)},G3={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},GC=(e,t)=>i=>{if(!("key"in i))return;const r=ba(i.key);if(t.some(s=>s===r||G3[s]===r))return e(i)},sa={beforeMount(e,{value:t},{transition:i}){e._vod=e.style.display==="none"?"":e.style.display,i&&t?i.beforeEnter(e):Df(e,t)},mounted(e,{value:t},{transition:i}){i&&t&&i.enter(e)},updated(e,{value:t,oldValue:i},{transition:r}){!t!=!i&&(r?t?(r.beforeEnter(e),Df(e,!0),r.enter(e)):r.leave(e,()=>{Df(e,!1)}):Df(e,t))},beforeUnmount(e,{value:t}){Df(e,t)}};function Df(e,t){e.style.display=t?e._vod:"none"}function W3(){sa.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const WC=ji({patchProp:A3},m3);let cp,xT=!1;function qC(){return cp||(cp=mC(WC))}function ZC(){return cp=xT?cp:gC(WC),xT=!0,cp}const Rb=(...e)=>{qC().render(...e)},KC=(...e)=>{ZC().hydrate(...e)},XC=(...e)=>{const t=qC().createApp(...e),{mount:i}=t;return t.mount=r=>{const s=YC(r);if(!s)return;const u=t._component;!Un(u)&&!u.render&&!u.template&&(u.template=s.innerHTML),s.innerHTML="";const d=i(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),d},t},q3=(...e)=>{const t=ZC().createApp(...e),{mount:i}=t;return t.mount=r=>{const s=YC(r);if(s)return i(s,!0,s instanceof SVGElement)},t};function YC(e){return Qi(e)?document.querySelector(e):e}let wT=!1;const Z3=()=>{wT||(wT=!0,U3(),W3())},K3=()=>{},X3=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:KI,BaseTransitionPropsValidators:Zx,Comment:ss,EffectScope:Rx,Fragment:Nt,KeepAlive:vR,ReactiveEffect:Yp,Static:du,Suspense:oR,Teleport:tm,Text:mu,Transition:_r,TransitionGroup:a1,VueElement:w_,assertNumber:KO,callWithAsyncErrorHandling:ta,callWithErrorHandling:ol,camelize:$s,capitalize:Zp,cloneVNode:ra,compatUtils:f3,compile:K3,computed:Le,createApp:XC,createBlock:je,createCommentVNode:tt,createElementBlock:pe,createElementVNode:de,createHydrationRenderer:gC,createPropsRestProxy:OR,createRenderer:mC,createSSRApp:q3,createSlots:rC,createStaticVNode:TC,createTextVNode:Mt,createVNode:ye,customRef:zI,defineAsyncComponent:ic,defineComponent:rt,defineCustomElement:OC,defineEmits:TR,defineExpose:ER,defineModel:AR,defineOptions:IR,defineProps:SR,defineSSRCustomElement:k3,defineSlots:CR,get devtools(){return Rd},effect:dO,effectScope:Fx,getCurrentInstance:zo,getCurrentScope:Kp,getTransitionRawChildren:v_,guardReactiveProps:wC,h:ni,handleError:Tu,hasInjectionContext:t1,hydrate:KC,initCustomFormatter:l3,initDirectivesForSSR:Z3,inject:wi,isMemoSame:DC,isProxy:Bx,isReactive:Co,isReadonly:fu,isRef:Gi,isRuntimeOnly:s3,isShallow:Ep,isVNode:hc,markRaw:Jp,mergeDefaults:DR,mergeModels:LR,mergeProps:Br,nextTick:Ar,normalizeClass:kn,normalizeProps:sO,normalizeStyle:wu,onActivated:Kx,onBeforeMount:JI,onBeforeUnmount:oa,onBeforeUpdate:Yx,onDeactivated:Xx,onErrorCaptured:nC,onMounted:Fn,onRenderTracked:tC,onRenderTriggered:eC,onScopeDispose:Xp,onServerPrefetch:QI,onUnmounted:Wi,onUpdated:xh,openBlock:V,popScopeId:oo,provide:Oi,proxyRefs:Ux,pushScopeId:ao,queuePostFlushCb:Hx,reactive:Nr,readonly:Su,ref:Re,registerRuntimeCompiler:r3,render:Rb,renderList:$n,renderSlot:En,resolveComponent:y_,resolveDirective:bR,resolveDynamicComponent:_c,resolveFilter:h3,resolveTransitionHooks:eh,setBlockTracking:Ab,setDevtoolsHook:VI,setTransitionHooks:pu,shallowReactive:FI,shallowReadonly:tu,shallowRef:bh,ssrContextKey:kC,ssrUtils:d3,stop:hO,toDisplayString:xt,toHandlerKey:sp,toHandlers:xR,toRaw:ci,toRef:Qd,toRefs:f_,toValue:jO,transformVNodeArgs:QR,triggerRef:NO,unref:ce,useAttrs:kR,useCssModule:D3,useCssVars:nm,useModel:PR,useSSRContext:PC,useSlots:aC,useTransitionState:qx,vModelCheckbox:o1,vModelDynamic:VC,vModelRadio:l1,vModelSelect:wh,vModelText:Pv,vShow:sa,version:LC,warn:ZO,watch:fn,watchEffect:Mr,watchPostEffect:qI,watchSyncEffect:fR,withAsyncContext:RR,withCtx:Ce,withDefaults:MR,withDirectives:as,withKeys:GC,withMemo:c3,withModifiers:Do,withScopeId:tR},Symbol.toStringTag,{value:"Module"}));var Y3=!1;/*!
  * pinia v2.1.3
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let c1;const S_=e=>c1=e,J3=()=>t1()&&wi(u1)||c1,u1=Symbol();function Fb(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var up;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(up||(up={}));function Q3(){const e=Fx(!0),t=e.run(()=>Re({}));let i=[],r=[];const s=Jp({install(u){S_(s),s._a=u,u.provide(u1,s),u.config.globalProperties.$pinia=s,r.forEach(d=>i.push(d)),r=[]},use(u){return!this._a&&!Y3?r.push(u):i.push(u),this},_p:i,_a:null,_e:e,_s:new Map,state:t});return s}const JC=()=>{};function ST(e,t,i,r=JC){e.push(t);const s=()=>{const u=e.indexOf(t);u>-1&&(e.splice(u,1),r())};return!i&&Kp()&&Xp(s),s}function Ed(e,...t){e.slice().forEach(i=>{i(...t)})}const e5=e=>e();function $b(e,t){e instanceof Map&&t instanceof Map&&t.forEach((i,r)=>e.set(r,i)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const i in t){if(!t.hasOwnProperty(i))continue;const r=t[i],s=e[i];Fb(s)&&Fb(r)&&e.hasOwnProperty(i)&&!Gi(r)&&!Co(r)?e[i]=$b(s,r):e[i]=r}return e}const t5=Symbol();function n5(e){return!Fb(e)||!e.hasOwnProperty(t5)}const{assign:Vl}=Object;function i5(e){return!!(Gi(e)&&e.effect)}function r5(e,t,i,r){const{state:s,actions:u,getters:d}=t,l=i.state.value[e];let m;function g(){l||(i.state.value[e]=s?s():{});const x=f_(i.state.value[e]);return Vl(x,u,Object.keys(d||{}).reduce((w,I)=>(w[I]=Jp(Le(()=>{S_(i);const C=i._s.get(e);return d[I].call(C,C)})),w),{}))}return m=QC(e,g,t,i,r,!0),m}function QC(e,t,i={},r,s,u){let d;const l=Vl({actions:{}},i),m={deep:!0};let g,x,w=[],I=[],C;const A=r.state.value[e];!u&&!A&&(r.state.value[e]={}),Re({});let L;function $(te){let G;g=x=!1,typeof te=="function"?(te(r.state.value[e]),G={type:up.patchFunction,storeId:e,events:C}):($b(r.state.value[e],te),G={type:up.patchObject,payload:te,storeId:e,events:C});const U=L=Symbol();Ar().then(()=>{L===U&&(g=!0)}),x=!0,Ed(w,G,r.state.value[e])}const F=u?function(){const{state:G}=i,U=G?G():{};this.$patch(B=>{Vl(B,U)})}:JC;function z(){d.stop(),w=[],I=[],r._s.delete(e)}function ee(te,G){return function(){S_(r);const U=Array.from(arguments),B=[],ie=[];function X(Ie){B.push(Ie)}function ne(Ie){ie.push(Ie)}Ed(I,{args:U,name:te,store:Q,after:X,onError:ne});let Ee;try{Ee=G.apply(this&&this.$id===e?this:Q,U)}catch(Ie){throw Ed(ie,Ie),Ie}return Ee instanceof Promise?Ee.then(Ie=>(Ed(B,Ie),Ie)).catch(Ie=>(Ed(ie,Ie),Promise.reject(Ie))):(Ed(B,Ee),Ee)}}const H={_p:r,$id:e,$onAction:ST.bind(null,I),$patch:$,$reset:F,$subscribe(te,G={}){const U=ST(w,te,G.detached,()=>B()),B=d.run(()=>fn(()=>r.state.value[e],ie=>{(G.flush==="sync"?x:g)&&te({storeId:e,type:up.direct,events:C},ie)},Vl({},m,G)));return U},$dispose:z},Q=Nr(H);r._s.set(e,Q);const ae=r._a&&r._a.runWithContext||e5,be=r._e.run(()=>(d=Fx(),ae(()=>d.run(t))));for(const te in be){const G=be[te];if(Gi(G)&&!i5(G)||Co(G))u||(A&&n5(G)&&(Gi(G)?G.value=A[te]:$b(G,A[te])),r.state.value[e][te]=G);else if(typeof G=="function"){const U=ee(te,G);be[te]=U,l.actions[te]=G}}return Vl(Q,be),Vl(ci(Q),be),Object.defineProperty(Q,"$state",{get:()=>r.state.value[e],set:te=>{$(G=>{Vl(G,te)})}}),r._p.forEach(te=>{Vl(Q,d.run(()=>te({store:Q,app:r._a,pinia:r,options:l})))}),A&&u&&i.hydrate&&i.hydrate(Q.$state,A),g=!0,x=!0,Q}function Sh(e,t,i){let r,s;const u=typeof t=="function";typeof e=="string"?(r=e,s=u?i:t):(s=e,r=e.id);function d(l,m){const g=t1();return l=l||(g?wi(u1,null):null),l&&S_(l),l=c1,l._s.has(r)||(u?QC(r,t,s,l):r5(r,s,l)),l._s.get(r)}return d.$id=r,d}function TT(e){{e=ci(e);const t={};for(const i in e){const r=e[i];(Gi(r)||Co(r))&&(t[i]=Qd(e,i))}return t}}function eA(e,t){return function(){return e.apply(t,arguments)}}const{toString:s5}=Object.prototype,{getPrototypeOf:d1}=Object,T_=(e=>t=>{const i=s5.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Bo=e=>(e=e.toLowerCase(),t=>T_(t)===e),E_=e=>t=>typeof t===e,{isArray:Th}=Array,Lp=E_("undefined");function a5(e){return e!==null&&!Lp(e)&&e.constructor!==null&&!Lp(e.constructor)&&xa(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const tA=Bo("ArrayBuffer");function o5(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&tA(e.buffer),t}const l5=E_("string"),xa=E_("function"),nA=E_("number"),I_=e=>e!==null&&typeof e=="object",c5=e=>e===!0||e===!1,sv=e=>{if(T_(e)!=="object")return!1;const t=d1(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},u5=Bo("Date"),d5=Bo("File"),h5=Bo("Blob"),f5=Bo("FileList"),p5=e=>I_(e)&&xa(e.pipe),m5=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||xa(e.append)&&((t=T_(e))==="formdata"||t==="object"&&xa(e.toString)&&e.toString()==="[object FormData]"))},g5=Bo("URLSearchParams"),v5=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function im(e,t,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),Th(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{const u=i?Object.getOwnPropertyNames(e):Object.keys(e),d=u.length;let l;for(r=0;r<d;r++)l=u[r],t.call(null,e[l],l,e)}}function iA(e,t){t=t.toLowerCase();const i=Object.keys(e);let r=i.length,s;for(;r-- >0;)if(s=i[r],t===s.toLowerCase())return s;return null}const rA=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),sA=e=>!Lp(e)&&e!==rA;function zb(){const{caseless:e}=sA(this)&&this||{},t={},i=(r,s)=>{const u=e&&iA(t,s)||s;sv(t[u])&&sv(r)?t[u]=zb(t[u],r):sv(r)?t[u]=zb({},r):Th(r)?t[u]=r.slice():t[u]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&im(arguments[r],i);return t}const _5=(e,t,i,{allOwnKeys:r}={})=>(im(t,(s,u)=>{i&&xa(s)?e[u]=eA(s,i):e[u]=s},{allOwnKeys:r}),e),y5=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),b5=(e,t,i,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},x5=(e,t,i,r)=>{let s,u,d;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),u=s.length;u-- >0;)d=s[u],(!r||r(d,e,t))&&!l[d]&&(t[d]=e[d],l[d]=!0);e=i!==!1&&d1(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},w5=(e,t,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=t.length;const r=e.indexOf(t,i);return r!==-1&&r===i},S5=e=>{if(!e)return null;if(Th(e))return e;let t=e.length;if(!nA(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},T5=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&d1(Uint8Array)),E5=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=r.next())&&!s.done;){const u=s.value;t.call(e,u[0],u[1])}},I5=(e,t)=>{let i;const r=[];for(;(i=e.exec(t))!==null;)r.push(i);return r},C5=Bo("HTMLFormElement"),A5=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,r,s){return r.toUpperCase()+s}),ET=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),M5=Bo("RegExp"),aA=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),r={};im(i,(s,u)=>{t(s,u,e)!==!1&&(r[u]=s)}),Object.defineProperties(e,r)},k5=e=>{aA(e,(t,i)=>{if(xa(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const r=e[i];if(xa(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},P5=(e,t)=>{const i={},r=s=>{s.forEach(u=>{i[u]=!0})};return Th(e)?r(e):r(String(e).split(t)),i},D5=()=>{},L5=(e,t)=>(e=+e,Number.isFinite(e)?e:t),_0="abcdefghijklmnopqrstuvwxyz",IT="0123456789",oA={DIGIT:IT,ALPHA:_0,ALPHA_DIGIT:_0+_0.toUpperCase()+IT},O5=(e=16,t=oA.ALPHA_DIGIT)=>{let i="";const{length:r}=t;for(;e--;)i+=t[Math.random()*r|0];return i};function R5(e){return!!(e&&xa(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const F5=e=>{const t=new Array(10),i=(r,s)=>{if(I_(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[s]=r;const u=Th(r)?[]:{};return im(r,(d,l)=>{const m=i(d,s+1);!Lp(m)&&(u[l]=m)}),t[s]=void 0,u}}return r};return i(e,0)},$5=Bo("AsyncFunction"),z5=e=>e&&(I_(e)||xa(e))&&xa(e.then)&&xa(e.catch),kt={isArray:Th,isArrayBuffer:tA,isBuffer:a5,isFormData:m5,isArrayBufferView:o5,isString:l5,isNumber:nA,isBoolean:c5,isObject:I_,isPlainObject:sv,isUndefined:Lp,isDate:u5,isFile:d5,isBlob:h5,isRegExp:M5,isFunction:xa,isStream:p5,isURLSearchParams:g5,isTypedArray:T5,isFileList:f5,forEach:im,merge:zb,extend:_5,trim:v5,stripBOM:y5,inherits:b5,toFlatObject:x5,kindOf:T_,kindOfTest:Bo,endsWith:w5,toArray:S5,forEachEntry:E5,matchAll:I5,isHTMLForm:C5,hasOwnProperty:ET,hasOwnProp:ET,reduceDescriptors:aA,freezeMethods:k5,toObjectSet:P5,toCamelCase:A5,noop:D5,toFiniteNumber:L5,findKey:iA,global:rA,isContextDefined:sA,ALPHABET:oA,generateString:O5,isSpecCompliantForm:R5,toJSONObject:F5,isAsyncFn:$5,isThenable:z5};function xi(e,t,i,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),r&&(this.request=r),s&&(this.response=s)}kt.inherits(xi,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:kt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const lA=xi.prototype,cA={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{cA[e]={value:e}});Object.defineProperties(xi,cA);Object.defineProperty(lA,"isAxiosError",{value:!0});xi.from=(e,t,i,r,s,u)=>{const d=Object.create(lA);return kt.toFlatObject(e,d,function(m){return m!==Error.prototype},l=>l!=="isAxiosError"),xi.call(d,e.message,t,i,r,s),d.cause=e,d.name=e.name,u&&Object.assign(d,u),d};const B5=null;function Bb(e){return kt.isPlainObject(e)||kt.isArray(e)}function uA(e){return kt.endsWith(e,"[]")?e.slice(0,-2):e}function CT(e,t,i){return e?e.concat(t).map(function(s,u){return s=uA(s),!i&&u?"["+s+"]":s}).join(i?".":""):t}function N5(e){return kt.isArray(e)&&!e.some(Bb)}const j5=kt.toFlatObject(kt,{},null,function(t){return/^is[A-Z]/.test(t)});function C_(e,t,i){if(!kt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,i=kt.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(L,$){return!kt.isUndefined($[L])});const r=i.metaTokens,s=i.visitor||x,u=i.dots,d=i.indexes,m=(i.Blob||typeof Blob<"u"&&Blob)&&kt.isSpecCompliantForm(t);if(!kt.isFunction(s))throw new TypeError("visitor must be a function");function g(A){if(A===null)return"";if(kt.isDate(A))return A.toISOString();if(!m&&kt.isBlob(A))throw new xi("Blob is not supported. Use a Buffer instead.");return kt.isArrayBuffer(A)||kt.isTypedArray(A)?m&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function x(A,L,$){let F=A;if(A&&!$&&typeof A=="object"){if(kt.endsWith(L,"{}"))L=r?L:L.slice(0,-2),A=JSON.stringify(A);else if(kt.isArray(A)&&N5(A)||(kt.isFileList(A)||kt.endsWith(L,"[]"))&&(F=kt.toArray(A)))return L=uA(L),F.forEach(function(ee,H){!(kt.isUndefined(ee)||ee===null)&&t.append(d===!0?CT([L],H,u):d===null?L:L+"[]",g(ee))}),!1}return Bb(A)?!0:(t.append(CT($,L,u),g(A)),!1)}const w=[],I=Object.assign(j5,{defaultVisitor:x,convertValue:g,isVisitable:Bb});function C(A,L){if(!kt.isUndefined(A)){if(w.indexOf(A)!==-1)throw Error("Circular reference detected in "+L.join("."));w.push(A),kt.forEach(A,function(F,z){(!(kt.isUndefined(F)||F===null)&&s.call(t,F,kt.isString(z)?z.trim():z,L,I))===!0&&C(F,L?L.concat(z):[z])}),w.pop()}}if(!kt.isObject(e))throw new TypeError("data must be an object");return C(e),t}function AT(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function h1(e,t){this._pairs=[],e&&C_(e,this,t)}const dA=h1.prototype;dA.append=function(t,i){this._pairs.push([t,i])};dA.toString=function(t){const i=t?function(r){return t.call(this,r,AT)}:AT;return this._pairs.map(function(s){return i(s[0])+"="+i(s[1])},"").join("&")};function U5(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function hA(e,t,i){if(!t)return e;const r=i&&i.encode||U5,s=i&&i.serialize;let u;if(s?u=s(t,i):u=kt.isURLSearchParams(t)?t.toString():new h1(t,i).toString(r),u){const d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+u}return e}class V5{constructor(){this.handlers=[]}use(t,i,r){return this.handlers.push({fulfilled:t,rejected:i,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){kt.forEach(this.handlers,function(r){r!==null&&t(r)})}}const MT=V5,fA={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},H5=typeof URLSearchParams<"u"?URLSearchParams:h1,G5=typeof FormData<"u"?FormData:null,W5=typeof Blob<"u"?Blob:null,q5=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Z5=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Io={isBrowser:!0,classes:{URLSearchParams:H5,FormData:G5,Blob:W5},isStandardBrowserEnv:q5,isStandardBrowserWebWorkerEnv:Z5,protocols:["http","https","file","blob","url","data"]};function K5(e,t){return C_(e,new Io.classes.URLSearchParams,Object.assign({visitor:function(i,r,s,u){return Io.isNode&&kt.isBuffer(i)?(this.append(r,i.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)}},t))}function X5(e){return kt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Y5(e){const t={},i=Object.keys(e);let r;const s=i.length;let u;for(r=0;r<s;r++)u=i[r],t[u]=e[u];return t}function pA(e){function t(i,r,s,u){let d=i[u++];const l=Number.isFinite(+d),m=u>=i.length;return d=!d&&kt.isArray(s)?s.length:d,m?(kt.hasOwnProp(s,d)?s[d]=[s[d],r]:s[d]=r,!l):((!s[d]||!kt.isObject(s[d]))&&(s[d]=[]),t(i,r,s[d],u)&&kt.isArray(s[d])&&(s[d]=Y5(s[d])),!l)}if(kt.isFormData(e)&&kt.isFunction(e.entries)){const i={};return kt.forEachEntry(e,(r,s)=>{t(X5(r),s,i,0)}),i}return null}const J5={"Content-Type":void 0};function Q5(e,t,i){if(kt.isString(e))try{return(t||JSON.parse)(e),kt.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(i||JSON.stringify)(e)}const A_={transitional:fA,adapter:["xhr","http"],transformRequest:[function(t,i){const r=i.getContentType()||"",s=r.indexOf("application/json")>-1,u=kt.isObject(t);if(u&&kt.isHTMLForm(t)&&(t=new FormData(t)),kt.isFormData(t))return s&&s?JSON.stringify(pA(t)):t;if(kt.isArrayBuffer(t)||kt.isBuffer(t)||kt.isStream(t)||kt.isFile(t)||kt.isBlob(t))return t;if(kt.isArrayBufferView(t))return t.buffer;if(kt.isURLSearchParams(t))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(u){if(r.indexOf("application/x-www-form-urlencoded")>-1)return K5(t,this.formSerializer).toString();if((l=kt.isFileList(t))||r.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return C_(l?{"files[]":t}:t,m&&new m,this.formSerializer)}}return u||s?(i.setContentType("application/json",!1),Q5(t)):t}],transformResponse:[function(t){const i=this.transitional||A_.transitional,r=i&&i.forcedJSONParsing,s=this.responseType==="json";if(t&&kt.isString(t)&&(r&&!this.responseType||s)){const d=!(i&&i.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(l){if(d)throw l.name==="SyntaxError"?xi.from(l,xi.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Io.classes.FormData,Blob:Io.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};kt.forEach(["delete","get","head"],function(t){A_.headers[t]={}});kt.forEach(["post","put","patch"],function(t){A_.headers[t]=kt.merge(J5)});const f1=A_,e4=kt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),t4=e=>{const t={};let i,r,s;return e&&e.split(`
`).forEach(function(d){s=d.indexOf(":"),i=d.substring(0,s).trim().toLowerCase(),r=d.substring(s+1).trim(),!(!i||t[i]&&e4[i])&&(i==="set-cookie"?t[i]?t[i].push(r):t[i]=[r]:t[i]=t[i]?t[i]+", "+r:r)}),t},kT=Symbol("internals");function Lf(e){return e&&String(e).trim().toLowerCase()}function av(e){return e===!1||e==null?e:kt.isArray(e)?e.map(av):String(e)}function n4(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=i.exec(e);)t[r[1]]=r[2];return t}const i4=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function y0(e,t,i,r,s){if(kt.isFunction(r))return r.call(this,t,i);if(s&&(t=i),!!kt.isString(t)){if(kt.isString(r))return t.indexOf(r)!==-1;if(kt.isRegExp(r))return r.test(t)}}function r4(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,i,r)=>i.toUpperCase()+r)}function s4(e,t){const i=kt.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+i,{value:function(s,u,d){return this[r].call(this,t,s,u,d)},configurable:!0})})}class M_{constructor(t){t&&this.set(t)}set(t,i,r){const s=this;function u(l,m,g){const x=Lf(m);if(!x)throw new Error("header name must be a non-empty string");const w=kt.findKey(s,x);(!w||s[w]===void 0||g===!0||g===void 0&&s[w]!==!1)&&(s[w||m]=av(l))}const d=(l,m)=>kt.forEach(l,(g,x)=>u(g,x,m));return kt.isPlainObject(t)||t instanceof this.constructor?d(t,i):kt.isString(t)&&(t=t.trim())&&!i4(t)?d(t4(t),i):t!=null&&u(i,t,r),this}get(t,i){if(t=Lf(t),t){const r=kt.findKey(this,t);if(r){const s=this[r];if(!i)return s;if(i===!0)return n4(s);if(kt.isFunction(i))return i.call(this,s,r);if(kt.isRegExp(i))return i.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,i){if(t=Lf(t),t){const r=kt.findKey(this,t);return!!(r&&this[r]!==void 0&&(!i||y0(this,this[r],r,i)))}return!1}delete(t,i){const r=this;let s=!1;function u(d){if(d=Lf(d),d){const l=kt.findKey(r,d);l&&(!i||y0(r,r[l],l,i))&&(delete r[l],s=!0)}}return kt.isArray(t)?t.forEach(u):u(t),s}clear(t){const i=Object.keys(this);let r=i.length,s=!1;for(;r--;){const u=i[r];(!t||y0(this,this[u],u,t,!0))&&(delete this[u],s=!0)}return s}normalize(t){const i=this,r={};return kt.forEach(this,(s,u)=>{const d=kt.findKey(r,u);if(d){i[d]=av(s),delete i[u];return}const l=t?r4(u):String(u).trim();l!==u&&delete i[u],i[l]=av(s),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const i=Object.create(null);return kt.forEach(this,(r,s)=>{r!=null&&r!==!1&&(i[s]=t&&kt.isArray(r)?r.join(", "):r)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,i])=>t+": "+i).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...i){const r=new this(t);return i.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[kT]=this[kT]={accessors:{}}).accessors,s=this.prototype;function u(d){const l=Lf(d);r[l]||(s4(s,d),r[l]=!0)}return kt.isArray(t)?t.forEach(u):u(t),this}}M_.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);kt.freezeMethods(M_.prototype);kt.freezeMethods(M_);const ll=M_;function b0(e,t){const i=this||f1,r=t||i,s=ll.from(r.headers);let u=r.data;return kt.forEach(e,function(l){u=l.call(i,u,s.normalize(),t?t.status:void 0)}),s.normalize(),u}function mA(e){return!!(e&&e.__CANCEL__)}function rm(e,t,i){xi.call(this,e??"canceled",xi.ERR_CANCELED,t,i),this.name="CanceledError"}kt.inherits(rm,xi,{__CANCEL__:!0});function a4(e,t,i){const r=i.config.validateStatus;!i.status||!r||r(i.status)?e(i):t(new xi("Request failed with status code "+i.status,[xi.ERR_BAD_REQUEST,xi.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}const o4=Io.isStandardBrowserEnv?function(){return{write:function(i,r,s,u,d,l){const m=[];m.push(i+"="+encodeURIComponent(r)),kt.isNumber(s)&&m.push("expires="+new Date(s).toGMTString()),kt.isString(u)&&m.push("path="+u),kt.isString(d)&&m.push("domain="+d),l===!0&&m.push("secure"),document.cookie=m.join("; ")},read:function(i){const r=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function l4(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function c4(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function gA(e,t){return e&&!l4(t)?c4(e,t):t}const u4=Io.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");let r;function s(u){let d=u;return t&&(i.setAttribute("href",d),d=i.href),i.setAttribute("href",d),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return r=s(window.location.href),function(d){const l=kt.isString(d)?s(d):d;return l.protocol===r.protocol&&l.host===r.host}}():function(){return function(){return!0}}();function d4(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function h4(e,t){e=e||10;const i=new Array(e),r=new Array(e);let s=0,u=0,d;return t=t!==void 0?t:1e3,function(m){const g=Date.now(),x=r[u];d||(d=g),i[s]=m,r[s]=g;let w=u,I=0;for(;w!==s;)I+=i[w++],w=w%e;if(s=(s+1)%e,s===u&&(u=(u+1)%e),g-d<t)return;const C=x&&g-x;return C?Math.round(I*1e3/C):void 0}}function PT(e,t){let i=0;const r=h4(50,250);return s=>{const u=s.loaded,d=s.lengthComputable?s.total:void 0,l=u-i,m=r(l),g=u<=d;i=u;const x={loaded:u,total:d,progress:d?u/d:void 0,bytes:l,rate:m||void 0,estimated:m&&d&&g?(d-u)/m:void 0,event:s};x[t?"download":"upload"]=!0,e(x)}}const f4=typeof XMLHttpRequest<"u",p4=f4&&function(e){return new Promise(function(i,r){let s=e.data;const u=ll.from(e.headers).normalize(),d=e.responseType;let l;function m(){e.cancelToken&&e.cancelToken.unsubscribe(l),e.signal&&e.signal.removeEventListener("abort",l)}kt.isFormData(s)&&(Io.isStandardBrowserEnv||Io.isStandardBrowserWebWorkerEnv?u.setContentType(!1):u.setContentType("multipart/form-data;",!1));let g=new XMLHttpRequest;if(e.auth){const C=e.auth.username||"",A=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";u.set("Authorization","Basic "+btoa(C+":"+A))}const x=gA(e.baseURL,e.url);g.open(e.method.toUpperCase(),hA(x,e.params,e.paramsSerializer),!0),g.timeout=e.timeout;function w(){if(!g)return;const C=ll.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),L={data:!d||d==="text"||d==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:C,config:e,request:g};a4(function(F){i(F),m()},function(F){r(F),m()},L),g=null}if("onloadend"in g?g.onloadend=w:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(w)},g.onabort=function(){g&&(r(new xi("Request aborted",xi.ECONNABORTED,e,g)),g=null)},g.onerror=function(){r(new xi("Network Error",xi.ERR_NETWORK,e,g)),g=null},g.ontimeout=function(){let A=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const L=e.transitional||fA;e.timeoutErrorMessage&&(A=e.timeoutErrorMessage),r(new xi(A,L.clarifyTimeoutError?xi.ETIMEDOUT:xi.ECONNABORTED,e,g)),g=null},Io.isStandardBrowserEnv){const C=(e.withCredentials||u4(x))&&e.xsrfCookieName&&o4.read(e.xsrfCookieName);C&&u.set(e.xsrfHeaderName,C)}s===void 0&&u.setContentType(null),"setRequestHeader"in g&&kt.forEach(u.toJSON(),function(A,L){g.setRequestHeader(L,A)}),kt.isUndefined(e.withCredentials)||(g.withCredentials=!!e.withCredentials),d&&d!=="json"&&(g.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&g.addEventListener("progress",PT(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&g.upload&&g.upload.addEventListener("progress",PT(e.onUploadProgress)),(e.cancelToken||e.signal)&&(l=C=>{g&&(r(!C||C.type?new rm(null,e,g):C),g.abort(),g=null)},e.cancelToken&&e.cancelToken.subscribe(l),e.signal&&(e.signal.aborted?l():e.signal.addEventListener("abort",l)));const I=d4(x);if(I&&Io.protocols.indexOf(I)===-1){r(new xi("Unsupported protocol "+I+":",xi.ERR_BAD_REQUEST,e));return}g.send(s||null)})},ov={http:B5,xhr:p4};kt.forEach(ov,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const m4={getAdapter:e=>{e=kt.isArray(e)?e:[e];const{length:t}=e;let i,r;for(let s=0;s<t&&(i=e[s],!(r=kt.isString(i)?ov[i.toLowerCase()]:i));s++);if(!r)throw r===!1?new xi(`Adapter ${i} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(kt.hasOwnProp(ov,i)?`Adapter '${i}' is not available in the build`:`Unknown adapter '${i}'`);if(!kt.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:ov};function x0(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new rm(null,e)}function DT(e){return x0(e),e.headers=ll.from(e.headers),e.data=b0.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),m4.getAdapter(e.adapter||f1.adapter)(e).then(function(r){return x0(e),r.data=b0.call(e,e.transformResponse,r),r.headers=ll.from(r.headers),r},function(r){return mA(r)||(x0(e),r&&r.response&&(r.response.data=b0.call(e,e.transformResponse,r.response),r.response.headers=ll.from(r.response.headers))),Promise.reject(r)})}const LT=e=>e instanceof ll?e.toJSON():e;function ih(e,t){t=t||{};const i={};function r(g,x,w){return kt.isPlainObject(g)&&kt.isPlainObject(x)?kt.merge.call({caseless:w},g,x):kt.isPlainObject(x)?kt.merge({},x):kt.isArray(x)?x.slice():x}function s(g,x,w){if(kt.isUndefined(x)){if(!kt.isUndefined(g))return r(void 0,g,w)}else return r(g,x,w)}function u(g,x){if(!kt.isUndefined(x))return r(void 0,x)}function d(g,x){if(kt.isUndefined(x)){if(!kt.isUndefined(g))return r(void 0,g)}else return r(void 0,x)}function l(g,x,w){if(w in t)return r(g,x);if(w in e)return r(void 0,g)}const m={url:u,method:u,data:u,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:l,headers:(g,x)=>s(LT(g),LT(x),!0)};return kt.forEach(Object.keys(Object.assign({},e,t)),function(x){const w=m[x]||s,I=w(e[x],t[x],x);kt.isUndefined(I)&&w!==l||(i[x]=I)}),i}const vA="1.4.0",p1={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{p1[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const OT={};p1.transitional=function(t,i,r){function s(u,d){return"[Axios v"+vA+"] Transitional option '"+u+"'"+d+(r?". "+r:"")}return(u,d,l)=>{if(t===!1)throw new xi(s(d," has been removed"+(i?" in "+i:"")),xi.ERR_DEPRECATED);return i&&!OT[d]&&(OT[d]=!0,console.warn(s(d," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(u,d,l):!0}};function g4(e,t,i){if(typeof e!="object")throw new xi("options must be an object",xi.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const u=r[s],d=t[u];if(d){const l=e[u],m=l===void 0||d(l,u,e);if(m!==!0)throw new xi("option "+u+" must be "+m,xi.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new xi("Unknown option "+u,xi.ERR_BAD_OPTION)}}const Nb={assertOptions:g4,validators:p1},Bl=Nb.validators;class Dv{constructor(t){this.defaults=t,this.interceptors={request:new MT,response:new MT}}request(t,i){typeof t=="string"?(i=i||{},i.url=t):i=t||{},i=ih(this.defaults,i);const{transitional:r,paramsSerializer:s,headers:u}=i;r!==void 0&&Nb.assertOptions(r,{silentJSONParsing:Bl.transitional(Bl.boolean),forcedJSONParsing:Bl.transitional(Bl.boolean),clarifyTimeoutError:Bl.transitional(Bl.boolean)},!1),s!=null&&(kt.isFunction(s)?i.paramsSerializer={serialize:s}:Nb.assertOptions(s,{encode:Bl.function,serialize:Bl.function},!0)),i.method=(i.method||this.defaults.method||"get").toLowerCase();let d;d=u&&kt.merge(u.common,u[i.method]),d&&kt.forEach(["delete","get","head","post","put","patch","common"],A=>{delete u[A]}),i.headers=ll.concat(d,u);const l=[];let m=!0;this.interceptors.request.forEach(function(L){typeof L.runWhen=="function"&&L.runWhen(i)===!1||(m=m&&L.synchronous,l.unshift(L.fulfilled,L.rejected))});const g=[];this.interceptors.response.forEach(function(L){g.push(L.fulfilled,L.rejected)});let x,w=0,I;if(!m){const A=[DT.bind(this),void 0];for(A.unshift.apply(A,l),A.push.apply(A,g),I=A.length,x=Promise.resolve(i);w<I;)x=x.then(A[w++],A[w++]);return x}I=l.length;let C=i;for(w=0;w<I;){const A=l[w++],L=l[w++];try{C=A(C)}catch($){L.call(this,$);break}}try{x=DT.call(this,C)}catch(A){return Promise.reject(A)}for(w=0,I=g.length;w<I;)x=x.then(g[w++],g[w++]);return x}getUri(t){t=ih(this.defaults,t);const i=gA(t.baseURL,t.url);return hA(i,t.params,t.paramsSerializer)}}kt.forEach(["delete","get","head","options"],function(t){Dv.prototype[t]=function(i,r){return this.request(ih(r||{},{method:t,url:i,data:(r||{}).data}))}});kt.forEach(["post","put","patch"],function(t){function i(r){return function(u,d,l){return this.request(ih(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:u,data:d}))}}Dv.prototype[t]=i(),Dv.prototype[t+"Form"]=i(!0)});const lv=Dv;class m1{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(u){i=u});const r=this;this.promise.then(s=>{if(!r._listeners)return;let u=r._listeners.length;for(;u-- >0;)r._listeners[u](s);r._listeners=null}),this.promise.then=s=>{let u;const d=new Promise(l=>{r.subscribe(l),u=l}).then(s);return d.cancel=function(){r.unsubscribe(u)},d},t(function(u,d,l){r.reason||(r.reason=new rm(u,d,l),i(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const i=this._listeners.indexOf(t);i!==-1&&this._listeners.splice(i,1)}static source(){let t;return{token:new m1(function(s){t=s}),cancel:t}}}const v4=m1;function _4(e){return function(i){return e.apply(null,i)}}function y4(e){return kt.isObject(e)&&e.isAxiosError===!0}const jb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(jb).forEach(([e,t])=>{jb[t]=e});const b4=jb;function _A(e){const t=new lv(e),i=eA(lv.prototype.request,t);return kt.extend(i,lv.prototype,t,{allOwnKeys:!0}),kt.extend(i,t,null,{allOwnKeys:!0}),i.create=function(s){return _A(ih(e,s))},i}const kr=_A(f1);kr.Axios=lv;kr.CanceledError=rm;kr.CancelToken=v4;kr.isCancel=mA;kr.VERSION=vA;kr.toFormData=C_;kr.AxiosError=xi;kr.Cancel=kr.CanceledError;kr.all=function(t){return Promise.all(t)};kr.spread=_4;kr.isAxiosError=y4;kr.mergeConfig=ih;kr.AxiosHeaders=ll;kr.formToJSON=e=>pA(kt.isHTMLForm(e)?new FormData(e):e);kr.HttpStatusCode=b4;kr.default=kr;const Si=kr;function Vi(e){return e!=null&&typeof e=="object"&&e["@@functional/placeholder"]===!0}function rs(e){return function t(i){return arguments.length===0||Vi(i)?t:e.apply(this,arguments)}}function hr(e){return function t(i,r){switch(arguments.length){case 0:return t;case 1:return Vi(i)?t:rs(function(s){return e(i,s)});default:return Vi(i)&&Vi(r)?t:Vi(i)?rs(function(s){return e(s,r)}):Vi(r)?rs(function(s){return e(i,s)}):e(i,r)}}}function g1(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(i){return t.apply(this,arguments)};case 2:return function(i,r){return t.apply(this,arguments)};case 3:return function(i,r,s){return t.apply(this,arguments)};case 4:return function(i,r,s,u){return t.apply(this,arguments)};case 5:return function(i,r,s,u,d){return t.apply(this,arguments)};case 6:return function(i,r,s,u,d,l){return t.apply(this,arguments)};case 7:return function(i,r,s,u,d,l,m){return t.apply(this,arguments)};case 8:return function(i,r,s,u,d,l,m,g){return t.apply(this,arguments)};case 9:return function(i,r,s,u,d,l,m,g,x){return t.apply(this,arguments)};case 10:return function(i,r,s,u,d,l,m,g,x,w){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function yA(e,t,i){return function(){for(var r=[],s=0,u=e,d=0;d<t.length||s<arguments.length;){var l;d<t.length&&(!Vi(t[d])||s>=arguments.length)?l=t[d]:(l=arguments[s],s+=1),r[d]=l,Vi(l)||(u-=1),d+=1}return u<=0?i.apply(this,r):g1(u,yA(e,r,i))}}var bA=hr(function(t,i){return t===1?rs(i):g1(t,yA(t,[],i))});function x4(e){return function t(i,r,s){switch(arguments.length){case 0:return t;case 1:return Vi(i)?t:hr(function(u,d){return e(i,u,d)});case 2:return Vi(i)&&Vi(r)?t:Vi(i)?hr(function(u,d){return e(u,r,d)}):Vi(r)?hr(function(u,d){return e(i,u,d)}):rs(function(u){return e(i,r,u)});default:return Vi(i)&&Vi(r)&&Vi(s)?t:Vi(i)&&Vi(r)?hr(function(u,d){return e(u,d,s)}):Vi(i)&&Vi(s)?hr(function(u,d){return e(u,r,d)}):Vi(r)&&Vi(s)?hr(function(u,d){return e(i,u,d)}):Vi(i)?rs(function(u){return e(u,r,s)}):Vi(r)?rs(function(u){return e(i,u,s)}):Vi(s)?rs(function(u){return e(i,r,u)}):e(i,r,s)}}}const xA=Array.isArray||function(t){return t!=null&&t.length>=0&&Object.prototype.toString.call(t)==="[object Array]"};function w4(e){return e!=null&&typeof e["@@transducer/step"]=="function"}function v1(e,t,i){return function(){if(arguments.length===0)return i();var r=arguments[arguments.length-1];if(!xA(r)){for(var s=0;s<e.length;){if(typeof r[e[s]]=="function")return r[e[s]].apply(r,Array.prototype.slice.call(arguments,0,-1));s+=1}if(w4(r)){var u=t.apply(null,Array.prototype.slice.call(arguments,0,-1));return u(r)}}return i.apply(this,arguments)}}const rh={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}};function RT(e){for(var t=[],i;!(i=e.next()).done;)t.push(i.value);return t}function FT(e,t,i){for(var r=0,s=i.length;r<s;){if(e(t,i[r]))return!0;r+=1}return!1}function S4(e){var t=String(e).match(/^function (\w*)/);return t==null?"":t[1]}function Lv(e,t){return Object.prototype.hasOwnProperty.call(t,e)}function T4(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}const w0=typeof Object.is=="function"?Object.is:T4;var $T=Object.prototype.toString,E4=function(){return $T.call(arguments)==="[object Arguments]"?function(t){return $T.call(t)==="[object Arguments]"}:function(t){return Lv("callee",t)}}(),I4=!{toString:null}.propertyIsEnumerable("toString"),zT=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],BT=function(){return arguments.propertyIsEnumerable("length")}(),C4=function(t,i){for(var r=0;r<t.length;){if(t[r]===i)return!0;r+=1}return!1},sh=rs(typeof Object.keys=="function"&&!BT?function(t){return Object(t)!==t?[]:Object.keys(t)}:function(t){if(Object(t)!==t)return[];var i,r,s=[],u=BT&&E4(t);for(i in t)Lv(i,t)&&(!u||i!=="length")&&(s[s.length]=i);if(I4)for(r=zT.length-1;r>=0;)i=zT[r],Lv(i,t)&&!C4(s,i)&&(s[s.length]=i),r-=1;return s}),Ub=rs(function(t){return t===null?"Null":t===void 0?"Undefined":Object.prototype.toString.call(t).slice(8,-1)});function NT(e,t,i,r){var s=RT(e),u=RT(t);function d(l,m){return _1(l,m,i.slice(),r.slice())}return!FT(function(l,m){return!FT(d,m,l)},u,s)}function _1(e,t,i,r){if(w0(e,t))return!0;var s=Ub(e);if(s!==Ub(t))return!1;if(typeof e["fantasy-land/equals"]=="function"||typeof t["fantasy-land/equals"]=="function")return typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t)&&typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e);if(typeof e.equals=="function"||typeof t.equals=="function")return typeof e.equals=="function"&&e.equals(t)&&typeof t.equals=="function"&&t.equals(e);switch(s){case"Arguments":case"Array":case"Object":if(typeof e.constructor=="function"&&S4(e.constructor)==="Promise")return e===t;break;case"Boolean":case"Number":case"String":if(!(typeof e==typeof t&&w0(e.valueOf(),t.valueOf())))return!1;break;case"Date":if(!w0(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(!(e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.sticky===t.sticky&&e.unicode===t.unicode))return!1;break}for(var u=i.length-1;u>=0;){if(i[u]===e)return r[u]===t;u-=1}switch(s){case"Map":return e.size!==t.size?!1:NT(e.entries(),t.entries(),i.concat([e]),r.concat([t]));case"Set":return e.size!==t.size?!1:NT(e.values(),t.values(),i.concat([e]),r.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var d=sh(e);if(d.length!==sh(t).length)return!1;var l=i.concat([e]),m=r.concat([t]);for(u=d.length-1;u>=0;){var g=d[u];if(!(Lv(g,t)&&_1(t[g],e[g],l,m)))return!1;u-=1}return!0}var A4=hr(function(t,i){return _1(t,i,[],[])});function M4(e,t,i){var r,s;if(typeof e.indexOf=="function")switch(typeof t){case"number":if(t===0){for(r=1/t;i<e.length;){if(s=e[i],s===0&&1/s===r)return i;i+=1}return-1}else if(t!==t){for(;i<e.length;){if(s=e[i],typeof s=="number"&&s!==s)return i;i+=1}return-1}return e.indexOf(t,i);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,i);case"object":if(t===null)return e.indexOf(t,i)}for(;i<e.length;){if(A4(e[i],t))return i;i+=1}return-1}function Vb(e,t){return M4(t,e,0)>=0}function dp(e,t){for(var i=0,r=t.length,s=Array(r);i<r;)s[i]=e(t[i]),i+=1;return s}function S0(e){var t=e.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+t.replace(/"/g,'\\"')+'"'}var Of=function(t){return(t<10?"0":"")+t},k4=typeof Date.prototype.toISOString=="function"?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+Of(t.getUTCMonth()+1)+"-"+Of(t.getUTCDate())+"T"+Of(t.getUTCHours())+":"+Of(t.getUTCMinutes())+":"+Of(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function P4(e){return function(){return!e.apply(this,arguments)}}function wA(e,t,i){for(var r=0,s=i.length;r<s;)t=e(t,i[r]),r+=1;return t}function D4(e,t){for(var i=0,r=t.length,s=[];i<r;)e(t[i])&&(s[s.length]=t[i]),i+=1;return s}function L4(e){return Object.prototype.toString.call(e)==="[object Object]"}var O4=function(){function e(t,i){this.xf=i,this.f=t}return e.prototype["@@transducer/init"]=rh.init,e.prototype["@@transducer/result"]=rh.result,e.prototype["@@transducer/step"]=function(t,i){return this.f(i)?this.xf["@@transducer/step"](t,i):t},e}();function R4(e){return function(t){return new O4(e,t)}}var SA=hr(v1(["fantasy-land/filter","filter"],R4,function(e,t){return L4(t)?wA(function(i,r){return e(t[r])&&(i[r]=t[r]),i},{},sh(t)):D4(e,t)})),TA=hr(function(t,i){return SA(P4(t),i)});function EA(e,t){var i=function(d){var l=t.concat([e]);return Vb(d,l)?"<Circular>":EA(d,l)},r=function(u,d){return dp(function(l){return S0(l)+": "+i(u[l])},d.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+dp(i,e).join(", ")+"))";case"[object Array]":return"["+dp(i,e).concat(r(e,TA(function(u){return/^\d+$/.test(u)},sh(e)))).join(", ")+"]";case"[object Boolean]":return typeof e=="object"?"new Boolean("+i(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?i(NaN):S0(k4(e)))+")";case"[object Map]":return"new Map("+i(Array.from(e))+")";case"[object Null]":return"null";case"[object Number]":return typeof e=="object"?"new Number("+i(e.valueOf())+")":1/e===-1/0?"-0":e.toString(10);case"[object Set]":return"new Set("+i(Array.from(e).sort())+")";case"[object String]":return typeof e=="object"?"new String("+i(e.valueOf())+")":S0(e);case"[object Undefined]":return"undefined";default:if(typeof e.toString=="function"){var s=e.toString();if(s!=="[object Object]")return s}return"{"+r(e,sh(e)).join(", ")+"}"}}var jT=rs(function(t){return EA(t,[])}),F4=hr(function(t,i){if(t===i)return i;function r(m,g){if(m>g!=g>m)return g>m?g:m}var s=r(t,i);if(s!==void 0)return s;var u=r(typeof t,typeof i);if(u!==void 0)return u===typeof t?t:i;var d=jT(t),l=r(d,jT(i));return l!==void 0&&l===d?t:i}),$4=function(){function e(t,i){this.xf=i,this.f=t}return e.prototype["@@transducer/init"]=rh.init,e.prototype["@@transducer/result"]=rh.result,e.prototype["@@transducer/step"]=function(t,i){return this.xf["@@transducer/step"](t,this.f(i))},e}(),z4=function(t){return function(i){return new $4(t,i)}},B4=hr(v1(["fantasy-land/map","map"],z4,function(t,i){switch(Object.prototype.toString.call(i)){case"[object Function]":return bA(i.length,function(){return t.call(this,i.apply(this,arguments))});case"[object Object]":return wA(function(r,s){return r[s]=t(i[s]),r},{},sh(i));default:return dp(t,i)}}));const IA=Number.isInteger||function(t){return t<<0===t};function CA(e){return Object.prototype.toString.call(e)==="[object String]"}var AA=hr(function(t,i){var r=t<0?i.length+t:t;return CA(i)?i.charAt(r):i[r]}),N4=hr(function(t,i){if(i!=null)return IA(t)?AA(t,i):i[t]});const cv=N4;var j4=hr(function(t,i){return B4(cv(t),i)}),U4=rs(function(t){return xA(t)?!0:!t||typeof t!="object"||CA(t)?!1:t.length===0?!0:t.length>0?t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1):!1}),UT=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function V4(e,t,i){return function(s,u,d){if(U4(d))return e(s,u,d);if(d==null)return u;if(typeof d["fantasy-land/reduce"]=="function")return t(s,u,d,"fantasy-land/reduce");if(d[UT]!=null)return i(s,u,d[UT]());if(typeof d.next=="function")return i(s,u,d);if(typeof d.reduce=="function")return t(s,u,d,"reduce");throw new TypeError("reduce: list must be array or iterable")}}function H4(e,t,i){for(var r=0,s=i.length;r<s;){if(t=e["@@transducer/step"](t,i[r]),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r+=1}return e["@@transducer/result"](t)}var G4=hr(function(t,i){return g1(t.length,function(){return t.apply(i,arguments)})});function W4(e,t,i){for(var r=i.next();!r.done;){if(t=e["@@transducer/step"](t,r.value),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r=i.next()}return e["@@transducer/result"](t)}function q4(e,t,i,r){return e["@@transducer/result"](i[r](G4(e["@@transducer/step"],e),t))}var Z4=V4(H4,q4,W4),K4=function(){function e(t){this.f=t}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(t){return t},e.prototype["@@transducer/step"]=function(t,i){return this.f(t,i)},e}();function X4(e){return new K4(e)}var Y4=x4(function(e,t,i){return Z4(typeof e=="function"?X4(e):e,t,i)});function J4(e){return new RegExp(e.source,e.flags?e.flags:(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":"")+(e.dotAll?"s":""))}function MA(e,t,i){if(i||(i=new eF),Q4(e))return e;var r=function(u){var d=i.get(e);if(d)return d;i.set(e,u);for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&(u[l]=t?MA(e[l],!0,i):e[l]);return u};switch(Ub(e)){case"Object":return r(Object.create(Object.getPrototypeOf(e)));case"Array":return r([]);case"Date":return new Date(e.valueOf());case"RegExp":return J4(e);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return e.slice();default:return e}}function Q4(e){var t=typeof e;return e==null||t!="object"&&t!="function"}var eF=function(){function e(){this.map={},this.length=0}return e.prototype.set=function(t,i){const r=this.hash(t);let s=this.map[r];s||(this.map[r]=s=[]),s.push([t,i]),this.length+=1},e.prototype.hash=function(t){let i=[];for(var r in t)i.push(Object.prototype.toString.call(t[r]));return i.join()},e.prototype.get=function(t){if(this.length<=180){for(const s in this.map){const u=this.map[s];for(let d=0;d<u.length;d+=1){const l=u[d];if(l[0]===t)return l[1]}}return}const i=this.hash(t),r=this.map[i];if(r)for(let s=0;s<r.length;s+=1){const u=r[s];if(u[0]===t)return u[1]}},e}(),tF=rs(function(t){return t!=null&&typeof t.clone=="function"?t.clone():MA(t,!0)});const VT=tF;function nF(e){return e}var iF=rs(nF),rF=hr(function(t,i){return bA(Y4(F4,0,j4("length",i)),function(){var r=arguments,s=this;return t.apply(s,dp(function(u){return u.apply(s,r)},i))})}),y1=function(){function e(){this._nativeSet=typeof Set=="function"?new Set:null,this._items={}}return e.prototype.add=function(t){return!HT(t,!0,this)},e.prototype.has=function(t){return HT(t,!1,this)},e}();function HT(e,t,i){var r=typeof e,s,u;switch(r){case"string":case"number":return e===0&&1/e===-1/0?i._items["-0"]?!0:(t&&(i._items["-0"]=!0),!1):i._nativeSet!==null?t?(s=i._nativeSet.size,i._nativeSet.add(e),u=i._nativeSet.size,u===s):i._nativeSet.has(e):r in i._items?e in i._items[r]?!0:(t&&(i._items[r][e]=!0),!1):(t&&(i._items[r]={},i._items[r][e]=!0),!1);case"boolean":if(r in i._items){var d=e?1:0;return i._items[r][d]?!0:(t&&(i._items[r][d]=!0),!1)}else return t&&(i._items[r]=e?[!1,!0]:[!0,!1]),!1;case"function":return i._nativeSet!==null?t?(s=i._nativeSet.size,i._nativeSet.add(e),u=i._nativeSet.size,u===s):i._nativeSet.has(e):r in i._items?Vb(e,i._items[r])?!0:(t&&i._items[r].push(e),!1):(t&&(i._items[r]=[e]),!1);case"undefined":return i._items[r]?!0:(t&&(i._items[r]=!0),!1);case"object":if(e===null)return i._items.null?!0:(t&&(i._items.null=!0),!1);default:return r=Object.prototype.toString.call(e),r in i._items?Vb(e,i._items[r])?!0:(t&&i._items[r].push(e),!1):(t&&(i._items[r]=[e]),!1)}}var sF=hr(function(t,i){for(var r=[],s=0,u=t.length,d=i.length,l=new y1,m=0;m<d;m+=1)l.add(i[m]);for(;s<u;)l.add(t[s])&&(r[r.length]=t[s]),s+=1;return r});const aF=sF;var oF=function(){function e(t,i){this.xf=i,this.f=t,this.set=new y1}return e.prototype["@@transducer/init"]=rh.init,e.prototype["@@transducer/result"]=rh.result,e.prototype["@@transducer/step"]=function(t,i){return this.set.add(this.f(i))?this.xf["@@transducer/step"](t,i):t},e}();function lF(e){return function(t){return new oF(e,t)}}var cF=hr(v1([],lF,function(e,t){for(var i=new y1,r=[],s=0,u,d;s<t.length;)d=t[s],u=e(d),i.add(u)&&r.push(d),s+=1;return r}));const uF=cF;var dF=uF(iF);const hF=dF;var fF=rs(function(t){return rF(function(){return Array.prototype.slice.call(arguments,0)},t)});const pF=fF;var mF=hr(function(t,i){return t.map(function(r){for(var s=i,u=0,d;u<r.length;){if(s==null)return;d=r[u],s=IA(d)?AA(d,s):s[d],u+=1}return s})}),gF=hr(function(t,i){return mF([t],i)[0]});const vF=gF;var _F=hr(function(t,i){for(var r={},s={},u=0,d=t.length;u<d;)s[t[u]]=1,u+=1;for(var l in i)s.hasOwnProperty(l)||(r[l]=i[l]);return r});const kA=_F;var yF=pF([SA,TA]);const bF=yF;var PA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function DA(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function LA(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function r(){if(this instanceof r){var s=[null];s.push.apply(s,arguments);var u=Function.bind.apply(t,s);return new u}return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(i,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),i}var xF=function(t){return wF(t)&&!SF(t)};function wF(e){return!!e&&typeof e=="object"}function SF(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||IF(e)}var TF=typeof Symbol=="function"&&Symbol.for,EF=TF?Symbol.for("react.element"):60103;function IF(e){return e.$$typeof===EF}function CF(e){return Array.isArray(e)?[]:{}}function Op(e,t){return t.clone!==!1&&t.isMergeableObject(e)?ah(CF(e),e,t):e}function AF(e,t,i){return e.concat(t).map(function(r){return Op(r,i)})}function MF(e,t){if(!t.customMerge)return ah;var i=t.customMerge(e);return typeof i=="function"?i:ah}function kF(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function GT(e){return Object.keys(e).concat(kF(e))}function OA(e,t){try{return t in e}catch{return!1}}function PF(e,t){return OA(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function DF(e,t,i){var r={};return i.isMergeableObject(e)&&GT(e).forEach(function(s){r[s]=Op(e[s],i)}),GT(t).forEach(function(s){PF(e,s)||(OA(e,s)&&i.isMergeableObject(t[s])?r[s]=MF(s,i)(e[s],t[s],i):r[s]=Op(t[s],i))}),r}function ah(e,t,i){i=i||{},i.arrayMerge=i.arrayMerge||AF,i.isMergeableObject=i.isMergeableObject||xF,i.cloneUnlessOtherwiseSpecified=Op;var r=Array.isArray(t),s=Array.isArray(e),u=r===s;return u?r?i.arrayMerge(e,t,i):DF(e,t,i):Op(t,i)}ah.all=function(t,i){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(r,s){return ah(r,s,i)},{})};var LF=ah,OF=LF;const RF=DA(OF);var gI,vI;const FF={instance:{base:{origin:{}.VITE_BASE_ORIGIN??"https://localhost",path:{}.VITE_BASE_PATH??"/",url:{}.VITE_BASE_URL??"https://localhost/"},theming:{availableThemes:((gI={}.VITE_AVAILABLE_THEMES)==null?void 0:gI.split(","))??["light"],enabled:((vI={}.VITE_THEME_ENABLED)==null?void 0:vI.toLowerCase())==="true",defaultTheme:{}.VITE_DEFAULT_THEME??"light"},moreLikeThis:{maxInlineResults:3},textAreaItem:{defaultTextTruncationHeight:72}},arcgis:{apiKey:{}.VITE_ARCGIS_API_KEY??"PLEASE_SET_MAPBOX_ACCESS_TOKEN"},routes:{test:{}.VITE_TEST_ROUTE??null},mode:"production"},$F=(e,t)=>t;var _I;const si=RF(FF,((_I=window==null?void 0:window.Elevator)==null?void 0:_I.config)??{},{arrayMerge:$F});si.instance.theming.availableThemes=hF(si.instance.theming.availableThemes);const zF=e=>{const t=e.split(".");return t[t.length-1]};class Zd extends Error{constructor(i,r,s){super(i);Tg(this,"name","ApiError");Tg(this,"statusCode");Tg(this,"data");this.statusCode=r,this.data=s,this.stack=new Error(i).stack}}const sm=Sh("errorStore",{state:()=>({error:null}),actions:{setError(e){this.error=e},clearError(){this.error=null}}});function BF(e,t){return e.widgetArray.find(i=>i.fieldTitle===t)??null}const RA=e=>`${si.instance.base.url}/fileManager/tinyImageByFileId/${e}/true`,yc=e=>`${si.instance.base.url}/fileManager/previewImageByFileId/${e}/true`,hl=e=>`/asset/viewAsset/${e}`;function b1({asset:e,widget:t}){const i=e[t.fieldTitle];if(!i)return null;const[r,s]=bF(u=>!!u.isPrimary,i);return[...r,...s]}function NF({widget:e,template:t,asset:i}){if(!i||!t||!i.titleObject)return!1;const r=BF(t,i.titleObject),s=b1({asset:i,widget:e});return!!r&&e.type==="text"&&e.fieldTitle===r.fieldTitle&&(s==null?void 0:s.length)===1}function jF({asset:e,widget:t}){const i=b1({asset:e,widget:t});return i!=null}function UF({asset:e,template:t}){if(!(t&&e))return[];const i=t.widgetArray.filter(r=>r.display).filter(r=>jF({asset:e,widget:r}));return i.length<2?i:i.filter(r=>!NF({widget:r,template:t,asset:e})).sort((r,s)=>r.viewOrder-s.viewOrder)}function Eu(e){var i;const t=((i=e==null?void 0:e.title)==null?void 0:i[0])??"(No Title)";return Qa(t)}function Qa(e){return new DOMParser().parseFromString(e,"text/html").body.textContent||""}function FA(e,t){const i=e.trim().replace("?","").replace("...","");return t.clickToSearchType===0?si.instance.base.url+"/search/querySearch/"+encodeURIComponent(Qa(i)):si.instance.base.url+"/search/scopedQuerySearch/"+t.fieldTitle+"/"+encodeURIComponent(i)}const Ti=si.instance.base.url;Si.defaults.withCredentials=!0;Si.interceptors.response.use(void 0,async e=>{const t=e.config,i=sm();let r;if(e.response){const s=e.response.data??{},u=(s==null?void 0:s.message)??e.message,d=e.response.status;r=new Zd(u,d,s)}else r=new Zd(e.message,0);return t.skipErrorNotifications||i.setError(r),Promise.reject(r)});async function $A(e){return(await Si.get(`${Ti}/asset/viewAsset/${e}/true`)).data??null}async function VF(e){return(await Si.get(`${Ti}/assetManager/getTemplate/${e}`)).data??null}async function HF(e){const t=new FormData;return t.append("suppressRecent","true"),t.append("searchRelated","true"),t.append("searchQuery",JSON.stringify({searchText:e})),(await Si.post(`${Ti}/search/searchResults`,t)).data.matches.filter(r=>r.objectId!==e)}async function GF(e){return(await Si.get(`${Ti}/collections/collectionHeader/${e}/true`)).data.collectionDescription??null}async function WF(e){const t=await Si.get(`${Ti}/fileManager/getMetadataForObject/${e}`);return kA(["bulkMetadata"],t.data)}async function qF(e,t){const i=await Si.get(`${Ti}/asset/getEmbedAsJson/${e}/${t??""}`);return Object.entries(i.data).map(([r,s])=>({filetype:r,isReady:s.ready,url:r==="original"?`${Ti}/fileManager/getOriginal/${e}`:`${Ti}/fileManager/getDerivativeById/${e}/${r}`,originalFilename:s.originalFilename,extension:zF(s.originalFilename)}))}async function ZF(){return Si.get(`${Ti}/home/interstitial`)}async function KF(e){const t=new URLSearchParams;return t.append("searchText",""),t.append("collectionId",String(e)),t.append("storeOnly","true"),(await Si.post(`${Ti}/search/searchResults`,t)).data.searchId}async function XF(e,t){const i=FA(e,t);return(await Si.get(`${i}/true`)).data.searchId}async function YF(e){return(await Si.get(`${Ti}/page/view/${e}/true`)).data}async function JF(){return(await Si.get(`${Ti}/home/getInstanceNav`)).data}async function QF({fileObjectId:e,excerptId:t}){const i=new FormData;return i.append("object",e),i.append("excerptId",t),(await Si.post(`${Ti}/api/v1/lti/ltiPayload`,i)).data}async function e$(e,t={}){const{collection:i,...r}=t,s={searchText:e,...r};i&&(s.collection=i.map(String)),t.sort&&(s.sort=t.sort);const u=new URLSearchParams;return u.append("searchQuery",JSON.stringify(s)),u.append("storeOnly","true"),(await Si.post(`${Ti}/search/searchResults`,u)).data.searchId}async function t$(e,t={}){const r={...{page:0,loadAll:!1},...t};return(await Si.get(`${Ti}/search/searchResults/${e}/${r.page}/${r.loadAll}`)).data}async function n$(e){return(await Si.get(`${Ti}/assetManager/deleteAsset/${e}`)).data}async function i$({username:e,password:t}){const i=new FormData;i.append("username",e),i.append("password",t);try{return(await Si.post(`${Ti}/loginManager/localLoginAsync`,i,{skipErrorNotifications:!0})).data}catch(r){if(r instanceof Zd&&r.statusCode===401)return{status:"error",message:r.message};throw r}}async function r$(e){const t=new FormData;return t.append("fieldTitle",e.id),t.append("template",String(e.template)),(await Si.post(`${Ti}/search/getFieldInfo`,t)).data}async function s$(){return(await Si.get(`${Ti}/drawers/listDrawers/true`)).data}async function a$(e){return(await Si.get(`${Ti}/drawers/getDrawer/${e}`)).data}async function o$(e,t={}){const i=new FormData;return i.append("drawerTitle",e),(await Si.post(`${Ti}/drawers/addDrawer`,i,t)).data}async function l$(e,t={}){return(await Si.post(`${Ti}/drawers/delete/${e}/true`,void 0,t)).data}async function c$(e,t,i){const r=new FormData;return r.append("objectId",e),r.append("drawerList",String(t)),i&&(r.append("label",i.name),r.append("startTime",String(i.startTime)),r.append("endTime",String(i.endTime)),r.append("fileHandlerId",i.fileHandlerId)),(await Si.post(`${Ti}/drawers/addToDrawer/true`,r)).data}async function u$(e,t){const i=new FormData;return i.append("objectArray",JSON.stringify(e)),i.append("drawerList",String(t)),(await Si.post(`${Ti}/drawers/addToDrawer/true`,i)).data}async function zA({drawerId:e,excerptId:t}){return(await Si.post(`${Ti}/drawers/removeExcerpt/${e}/${t}/true`)).data}async function d$({assetId:e,drawerId:t,excerptId:i}){return i?zA({drawerId:t,excerptId:i}):(await Si.post(`${Ti}/drawers/removeFromDrawer/${t}/${e}/true`)).data}async function h$(e,t){return(await Si.post(`${Ti}/drawers/setSortOrder/${e}/${t}`)).data}async function f$(e,t){const i=new FormData;return i.append("orderArray",JSON.stringify(t)),(await Si.post(`${Ti}/drawers/setCustomOrder/${e}`,i)).data}async function p$(e){return(await Si.post(`${Ti}/drawers/downloadDrawer/${e}/true`)).data}async function m$(){return(await Si.post(`${Ti}/loginManager/logout`)).data}async function g$(e){return(await Si.get(`${Ti}/asset/viewExcerpt/${e}/true/true`)).data}async function v$(e){const t=new FormData;return t.append("searchTerm",e),(await Si.post(`${Ti}/search/getSuggestion`,t)).data}function BA(){return{assets:new Map,templates:new Map,excerpts:new Map,moreLikeThisMatches:new Map,fileMetaData:new Map,fileDownloadResponses:new Map,paginatedSearchResults:new Map,collectionDescriptions:new Map,collectionSearchIds:new Map,staticPages:new Map,searchableFieldDetails:new Map,drawerDetails:new Map,listOfDrawers:null}}let ii=BA();function _$(){ii=BA()}async function y$(e){if(!e)return null;const t=ii.assets.get(e)||await $A(e);return ii.assets.set(e,t),t}async function b$(e){if(!e)return{asset:null,template:null};const t=ii.assets.get(e)||await $A(e);if(ii.assets.set(e,t),!t)return{asset:null,template:null};const i=String(t.templateId),r=ii.templates.get(i)||await VF(i);return ii.templates.set(i,r),{asset:t,template:r}}async function x$(e){const t=ii.collectionDescriptions.get(e)||await GF(e);return ii.collectionDescriptions.set(e,t),t}async function w$(e){if(!e)return[];const t=ii.moreLikeThisMatches.get(e)||await HF(e);return ii.moreLikeThisMatches.set(e,t),t}async function S$(e){if(!e)return null;const t=ii.fileMetaData.get(e)||await WF(e);return ii.fileMetaData.set(e,t),t}async function T$(e,t){if(!e)return null;const i=`${e}.${t}`,r=ii.fileDownloadResponses.get(i)||await qF(e,t);return ii.fileDownloadResponses.set(i,r),r}async function E$(){return(await ZF()).data}async function I$(e){const t=ii.collectionSearchIds.get(e)||await KF(e);return ii.collectionSearchIds.set(e,t),t}async function C$(e,t={}){const r={...{page:0,loadAll:!1},...t},s=ii.paginatedSearchResults.get(e);if(s&&s[r.page])return s[r.page];const u=await t$(e,r);return ii.paginatedSearchResults.set(e,{...s||{},[r.page]:u}),u}async function A$(e){const t=ii.staticPages.get(e)||await YF(e);return ii.staticPages.set(e,t),t}async function x1(e){const t=`${e.id}-${e.template}`;if(ii.searchableFieldDetails.has(t))return ii.searchableFieldDetails.get(t)??null;const i=await r$(e);return ii.searchableFieldDetails.set(t,i),i}async function M$(e){const t=await x1(e);return(t==null?void 0:t.values)??[]}async function k$(e){const t=await x1(e);return(t==null?void 0:t.values)??{boolean_true:"checked",boolean_false:"unchecked"}}async function P$(e){const t=await x1(e);return(t==null?void 0:t.rawContent)??{}}async function D$({refresh:e=!1}={}){if(ii.listOfDrawers&&!e)return ii.listOfDrawers;const t=await s$();return ii.listOfDrawers=Object.entries(t).map(([i,r])=>({id:Number.parseInt(i),...r})).sort((i,r)=>i.title.localeCompare(r.title)),ii.listOfDrawers}async function L$(e){const t=ii.drawerDetails.get(e)??await a$(e);ii.drawerDetails.set(e,t);const{drawerId:i,drawerTitle:r,...s}=t;return{id:i,title:r,contents:s}}async function O$(e,t,i){const r=await c$(e,t,i);return ii.drawerDetails.delete(t),r}async function R$(e,t){const i=await u$(e,t);return ii.drawerDetails.delete(t),i}async function F$({excerptId:e,drawerId:t}){const i=await zA({drawerId:t,excerptId:e});return ii.drawerDetails.delete(t),i}async function $$({assetId:e,drawerId:t}){const i=await d$({drawerId:t,assetId:e});return ii.drawerDetails.delete(t),i}async function z$(e,t={}){const i=await o$(e,t);return ii.listOfDrawers=null,i}async function B$(e,t={}){const i=await l$(e,t);return ii.listOfDrawers=null,i}async function N$(e,t){const i=await h$(e,t);return ii.drawerDetails.delete(e),i}async function j$(e,t){const i=await f$(e,t);return ii.drawerDetails.delete(e),i}async function U$(e){const t=ii.excerpts.get(e)??await g$(e);return ii.excerpts.set(e,t),t}const Hn={getAsset:y$,getAssetWithTemplate:b$,getCollectionDescription:x$,getMoreLikeThis:w$,getFileMetaData:S$,getFileDownloadInfo:T$,getEmbedPluginInterstitial:E$,getExcerpt:U$,postLtiPayload:QF,fetchInstanceNav:JF,getSearchId:e$,getSearchIdForCollection:I$,getSearchIdForClickToSearch:XF,getSearchResultsById:C$,getStaticPage:A$,deleteAsset:n$,loginAsGuest:i$,logout:m$,getSearchableSelectFieldValues:M$,getSearchableCheckboxFieldValues:k$,getSearchableMultiSelectFieldValues:P$,getDrawers:D$,getDrawer:L$,createDrawer:z$,deleteDrawer:B$,addAssetToDrawer:O$,addAssetListToDrawer:R$,removeAssetFromDrawer:$$,removeExcerptFromDrawer:F$,setDrawerSortBy:N$,setCustomDrawerOrder:j$,startDrawerDownload:p$,clearCache:_$,getDidYouMeanSuggestions:v$};function V$(e){if(!e)return null;const{userId:t,userDisplayName:i,userCanCreateDrawers:r,userCanManageAssets:s,userIsAdmin:u,userIsSuperAdmin:d}=e;return t?{id:t,displayName:i??"Elevator User",isAdmin:u,isSuperAdmin:d,canManageAssets:s,canManageDrawers:r}:null}function H$(e){const{instanceName:t,instanceId:i,instanceHasLogo:r,contact:s,useCentralAuth:u,centralAuthLabel:d,featuredAssetId:l,featuredAssetText:m,userCanSearchAndBrowse:g,templates:x}=e,w=r?{src:`${si.instance.base.origin}/assets/instanceAssets/${i}.png`,alt:`${t} logo`}:null,I=Object.entries(x).map(([C,A])=>({id:Number.parseInt(C),name:A})).filter(({name:C})=>typeof C=="string").sort((C,A)=>C.name.localeCompare(A.name));return{id:i,name:t??"Elevator",logoImg:w,useCentralAuth:u,centralAuthLabel:d,contact:s,featuredAssetId:l,featuredAssetText:m,userCanSearchAndBrowse:g,templates:I}}function NA(e,t=null){return{...e,parentId:t,previewImageId:e.previewImageId||null,children:e.children?e.children.map(i=>NA(i,e.id)):[]}}function G$(e,t=null){return e.map(i=>NA(i,t))}function jA(e){return e?e.reduce((t,i)=>({...t,[i.id]:i,...jA(i.children)}),{}):{}}function UA(e){return[...e.map(i=>kA(["children"],i)),...e.flatMap(i=>{const s=(i.children??[]).map(u=>({...u,title:`${i.title} › ${u.title}`}));return UA(s)})]}const W$=()=>({fetchStatus:Re("idle"),currentUser:Re(null),pages:Re([]),collections:Re([]),searchableFields:Re([]),instance:Re({id:null,name:"Elevator",logoImg:null,contact:null,useCentralAuth:!1,centralAuthLabel:"Central Auth",featuredAssetId:null,featuredAssetText:null,userCanSearchAndBrowse:!1,templates:[]}),customHeader:Re(null),customFooter:Re(null)}),VA=e=>({isLoggedIn:Le(()=>!!e.currentUser.value),isReady:Le(()=>e.fetchStatus.value==="success"),collectionIndex:Le(()=>jA(e.collections.value)),flatCollections:Le(()=>UA(e.collections.value)),async getCollectionById(t){const r=VA(e).collectionIndex.value[t];if(!r)return null;try{const s=await Hn.getCollectionDescription(t);return{...r,description:s}}catch(s){return console.error(s),null}},getSearchableField(t){return e.searchableFields.value.find(i=>i.id===t)??null}}),HA=e=>({async refresh(){if(e.fetchStatus.value!=="fetching"){e.fetchStatus.value="fetching";try{const t=await Hn.fetchInstanceNav();e.currentUser.value=V$(t),e.pages.value=t.pages,e.instance.value=H$(t),e.collections.value=G$(t.collections),e.customHeader.value=t.customHeader,e.customFooter.value=t.customFooter,e.searchableFields.value=Object.entries(t.sortableFields).map(([i,r])=>({...r,id:i})),e.fetchStatus.value="success"}catch(t){console.error(t),e.fetchStatus.value="error"}}},async init(){if(!["fetching","success","error"].includes(e.fetchStatus.value))return HA(e).refresh()}}),Ei=Sh("instance",()=>{const e=W$(),t=VA(e),i=HA(e);return{...e,...t,...i}}),Nd=Sh("toastStore",{state:()=>({toasts:[]}),actions:{addToast(e){const t=crypto.randomUUID();this.toasts.push({...e,id:t,duration:e.duration??3e3})},dismissToast(e){const t=this.toasts.findIndex(i=>i.id===e);t!==-1&&this.toasts.splice(t,1)}}}),Lo=Sh("asset2",{state:()=>({activeAssetId:null,activeObjectId:null,activeFileObjectId:null}),actions:{async setActiveAsset(e,t){const{asset:i}=await Hn.getAssetWithTemplate(e);return i?(this.activeAssetId=e,t?this.setActiveObject(t):(this.activeObjectId=(i==null?void 0:i.firstObjectId)??null,this.activeFileObjectId=(i==null?void 0:i.firstFileHandlerId)??null,i)):(this.activeAssetId=null,this.activeObjectId=null,this.activeFileObjectId=null,null)},async setActiveObject(e){const{asset:t}=await Hn.getAssetWithTemplate(e);return this.activeObjectId=t?e:null,this.activeFileObjectId=(t==null?void 0:t.firstFileHandlerId)??null,t},async getAsset(e){const{asset:t}=await Hn.getAssetWithTemplate(e);return t},async getAssetTitle(e){const t=await this.getAsset(e);return t?Eu(t):null}}}),q$=(e,t)=>e.length===t.length&&e.every((i,r)=>i===t[r]),Da=Sh("drawer",{state:()=>({drawerRecords:{},isReady:!1}),getters:{drawers(e){return Object.values(e.drawerRecords)},getDrawerById(e){return t=>e.drawerRecords[t]}},actions:{async refresh(){const e=await Hn.getDrawers({refresh:!0});this.drawerRecords=e.reduce((t,i)=>(t[i.id]=i,t),{})},async init(){await this.refresh(),this.isReady=!0},async createDrawer(e){const t=await Hn.createDrawer(e),i={id:t.drawerId,title:t.drawerTitle};return this.drawerRecords[t.drawerId]=i,i},async deleteDrawer(e){try{delete this.drawerRecords[e],await Hn.deleteDrawer(e,{skipErrorNotifications:!0})}catch{console.log(`Failed to delete drawer: ${e}. Refreshing the drawer list.`),await this.refresh()}},async addAssetToDrawer(e,t,i){await Hn.addAssetToDrawer(e,t,i);const r=Lo(),s=Nd(),u=this.drawerRecords[t].title,d=(i==null?void 0:i.name)??await r.getAssetTitle(e);s.addToast({message:`'${d??"Asset"}' added to drawer '${u}'.`,url:`/drawers/viewDrawer/${t}`,urlText:"View drawer"}),this.drawerRecords[t].contents=void 0},async addAssetListToDrawer(e,t){await Hn.addAssetListToDrawer(e,t);const i=Nd(),r=this.drawerRecords[t].title;i.addToast({message:`${e.length} assets added to drawer '${r}'.`,url:`/drawers/viewDrawer/${t}`,urlText:"View drawer"}),this.drawerRecords[t].contents=void 0},async refreshDrawer(e){const t=await Hn.getDrawer(e);return this.drawerRecords[e]=t,t},async setDrawerSortBy(e,t){return this.drawerRecords[e].contents=void 0,await Hn.setDrawerSortBy(e,t),this.refreshDrawer(e)},async downloadDrawer(e){return Hn.startDrawerDownload(e)},async setDrawerItems(e,t){const i=this.drawerRecords[e];if(!i.contents)throw new Error("Cannot set drawer items: drawer contents not found");const r=i.contents.matches.map(u=>u.objectId),s=t.map(u=>u.objectId);q$(r,s)||(i.contents.matches=t,Hn.setCustomDrawerOrder(e,s))},async removeExcerptFromDrawer({drawerId:e,excerptId:t}){const i=this.drawerRecords[e];if(!i.contents)throw new Error("Cannot remove excerpt from drawer: drawer contents not found");const r=i.contents.matches.findIndex(d=>d.excerptId===t),s=i.contents.matches[r];i.contents.matches.splice(r,1),await Hn.removeExcerptFromDrawer({drawerId:e,excerptId:t}),Nd().addToast({message:`Excerpt '${s.excerptLabel}' removed from drawer '${i.title}'.`,url:`/drawers/viewDrawer/${e}`,urlText:"View drawer"})},async removeAssetFromDrawer({assetId:e,drawerId:t}){const i=Lo(),r=Nd(),s=this.drawerRecords[t].title,u=await i.getAssetTitle(e);if(!e)throw new Error("Cannot remove asset from drawer: no assetId provided");if(!t)throw new Error("Cannot remove asset from drawer: no drawerId provided");const d=this.drawerRecords[t];if(!d.contents)throw new Error("Cannot remove asset from drawer: drawer contents not found");d.contents.matches=d.contents.matches.filter(l=>l.objectId!==e),await Hn.removeAssetFromDrawer({assetId:e,drawerId:t}),r.addToast({message:`Removed '${u}' from drawer '${s}'.`})}}}),Z$="modulepreload",K$=function(e){return"/assets/elevator-ui/dist/"+e},WT={},Za=function(t,i,r){if(!i||i.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(i.map(u=>{if(u=K$(u),u in WT)return;WT[u]=!0;const d=u.endsWith(".css"),l=d?'[rel="stylesheet"]':"";if(!!r)for(let x=s.length-1;x>=0;x--){const w=s[x];if(w.href===u&&(!d||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${l}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":Z$,d||(g.as="script",g.crossOrigin=""),g.href=u,document.head.appendChild(g),d)return new Promise((x,w)=>{g.addEventListener("load",x),g.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})})).then(()=>t())},X$=(e,t)=>{const i=e[t];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((r,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+t)))})};function bc(e){return Kp()?(Xp(e),!0):!1}function bs(e){return typeof e=="function"?e():ce(e)}const am=typeof window<"u",Y$=e=>e!=null,wa=()=>{},J$=Q$();function Q$(){var e;return am&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent)}function w1(e,t){function i(...r){return new Promise((s,u)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(s).catch(u)})}return i}const GA=e=>e();function ez(e,t={}){let i,r,s=wa;const u=l=>{clearTimeout(l),s(),s=wa};return l=>{const m=bs(e),g=bs(t.maxWait);return i&&u(i),m<=0||g!==void 0&&g<=0?(r&&(u(r),r=null),Promise.resolve(l())):new Promise((x,w)=>{s=t.rejectOnCancel?w:x,g&&!r&&(r=setTimeout(()=>{i&&u(i),r=null,x(l())},g)),i=setTimeout(()=>{r&&u(r),r=null,x(l())},m)})}}function tz(e,t=!0,i=!0,r=!1){let s=0,u,d=!0,l=wa,m;const g=()=>{u&&(clearTimeout(u),u=void 0,l(),l=wa)};return w=>{const I=bs(e),C=Date.now()-s,A=()=>m=w();return g(),I<=0?(s=Date.now(),A()):(C>I&&(i||!d)?(s=Date.now(),A()):t&&(m=new Promise((L,$)=>{l=r?$:L,u=setTimeout(()=>{s=Date.now(),d=!0,L(A()),g()},Math.max(0,I-C))})),!i&&!u&&(u=setTimeout(()=>d=!0,I)),d=!1,m)}}function nz(e=GA){const t=Re(!0);function i(){t.value=!1}function r(){t.value=!0}const s=(...u)=>{t.value&&e(...u)};return{isActive:Su(t),pause:i,resume:r,eventFilter:s}}function iz(e){return Object.entries(e)}function WA(...e){if(e.length!==1)return Qd(...e);const t=e[0];return typeof t=="function"?Su(zI(()=>({get:t,set:wa}))):Re(t)}function qA(e,t=200,i={}){return w1(ez(t,i),e)}function rz(e,t=200,i=!1,r=!0,s=!1){return w1(tz(t,i,r,s),e)}function sz(e,t,i={}){const{immediate:r=!0}=i,s=Re(!1);let u=null;function d(){u&&(clearTimeout(u),u=null)}function l(){s.value=!1,d()}function m(...g){d(),s.value=!0,u=setTimeout(()=>{s.value=!1,u=null,e(...g)},bs(t))}return r&&(s.value=!0,am&&m()),bc(l),{isPending:Su(s),start:m,stop:l}}var qT=Object.getOwnPropertySymbols,az=Object.prototype.hasOwnProperty,oz=Object.prototype.propertyIsEnumerable,lz=(e,t)=>{var i={};for(var r in e)az.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&qT)for(var r of qT(e))t.indexOf(r)<0&&oz.call(e,r)&&(i[r]=e[r]);return i};function cz(e,t,i={}){const r=i,{eventFilter:s=GA}=r,u=lz(r,["eventFilter"]);return fn(e,w1(s,t),u)}var uz=Object.defineProperty,dz=Object.defineProperties,hz=Object.getOwnPropertyDescriptors,Ov=Object.getOwnPropertySymbols,ZA=Object.prototype.hasOwnProperty,KA=Object.prototype.propertyIsEnumerable,ZT=(e,t,i)=>t in e?uz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,fz=(e,t)=>{for(var i in t||(t={}))ZA.call(t,i)&&ZT(e,i,t[i]);if(Ov)for(var i of Ov(t))KA.call(t,i)&&ZT(e,i,t[i]);return e},pz=(e,t)=>dz(e,hz(t)),mz=(e,t)=>{var i={};for(var r in e)ZA.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&Ov)for(var r of Ov(e))t.indexOf(r)<0&&KA.call(e,r)&&(i[r]=e[r]);return i};function gz(e,t,i={}){const r=i,{eventFilter:s}=r,u=mz(r,["eventFilter"]),{eventFilter:d,pause:l,resume:m,isActive:g}=nz(s);return{stop:cz(e,t,pz(fz({},u),{eventFilter:d})),pause:l,resume:m,isActive:g}}function Fs(e){var t;const i=bs(e);return(t=i==null?void 0:i.$el)!=null?t:i}const Aa=am?window:void 0,XA=am?window.document:void 0,vz=am?window.navigator:void 0;function na(...e){let t,i,r,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([i,r,s]=e,t=Aa):[t,i,r,s]=e,!t)return wa;Array.isArray(i)||(i=[i]),Array.isArray(r)||(r=[r]);const u=[],d=()=>{u.forEach(x=>x()),u.length=0},l=(x,w,I,C)=>(x.addEventListener(w,I,C),()=>x.removeEventListener(w,I,C)),m=fn(()=>[Fs(t),bs(s)],([x,w])=>{d(),x&&u.push(...i.flatMap(I=>r.map(C=>l(x,I,C,w))))},{immediate:!0,flush:"post"}),g=()=>{m(),d()};return bc(g),g}let KT=!1;function _z(e,t,i={}){const{window:r=Aa,ignore:s=[],capture:u=!0,detectIframe:d=!1}=i;if(!r)return;J$&&!KT&&(KT=!0,Array.from(r.document.body.children).forEach(I=>I.addEventListener("click",wa)));let l=!0;const m=I=>s.some(C=>{if(typeof C=="string")return Array.from(r.document.querySelectorAll(C)).some(A=>A===I.target||I.composedPath().includes(A));{const A=Fs(C);return A&&(I.target===A||I.composedPath().includes(A))}}),x=[na(r,"click",I=>{const C=Fs(e);if(!(!C||C===I.target||I.composedPath().includes(C))){if(I.detail===0&&(l=!m(I)),!l){l=!0;return}t(I)}},{passive:!0,capture:u}),na(r,"pointerdown",I=>{const C=Fs(e);C&&(l=!I.composedPath().includes(C)&&!m(I))},{passive:!0}),d&&na(r,"blur",I=>{var C;const A=Fs(e);((C=r.document.activeElement)==null?void 0:C.tagName)==="IFRAME"&&!(A!=null&&A.contains(r.document.activeElement))&&t(I)})].filter(Boolean);return()=>x.forEach(I=>I())}function yz(){const e=Re(!1);return zo()&&Fn(()=>{e.value=!0}),e}function Eh(e){const t=yz();return Le(()=>(t.value,!!e()))}function bz(e,t={}){const{immediate:i=!0,window:r=Aa}=t,s=Re(!1);let u=0,d=null;function l(x){if(!s.value||!r)return;const w=x-u;e({delta:w,timestamp:x}),u=x,d=r.requestAnimationFrame(l)}function m(){!s.value&&r&&(s.value=!0,d=r.requestAnimationFrame(l))}function g(){s.value=!1,d!=null&&r&&(r.cancelAnimationFrame(d),d=null)}return i&&m(),bc(g),{isActive:Su(s),pause:g,resume:m}}function xz(e,t={}){const{window:i=Aa}=t,r=Eh(()=>i&&"matchMedia"in i&&typeof i.matchMedia=="function");let s;const u=Re(!1),d=()=>{s&&("removeEventListener"in s?s.removeEventListener("change",l):s.removeListener(l))},l=()=>{r.value&&(d(),s=i.matchMedia(WA(e).value),u.value=!!(s!=null&&s.matches),s&&("addEventListener"in s?s.addEventListener("change",l):s.addListener(l)))};return Mr(l),bc(()=>d()),u}var wz=Object.defineProperty,XT=Object.getOwnPropertySymbols,Sz=Object.prototype.hasOwnProperty,Tz=Object.prototype.propertyIsEnumerable,JT=(e,t,i)=>t in e?wz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Ez=(e,t)=>{for(var i in t||(t={}))Sz.call(t,i)&&JT(e,i,t[i]);if(XT)for(var i of XT(t))Tz.call(t,i)&&JT(e,i,t[i]);return e};const QT=["hash","host","hostname","href","pathname","port","protocol","search"];function YA({window:e=Aa}={}){const t=Object.fromEntries(QT.map(s=>[s,Re()]));for(const[s,u]of iz(t))fn(u,d=>{!(e!=null&&e.location)||e.location[s]===d||(e.location[s]=d)});const i=s=>{var u;const{state:d,length:l}=(e==null?void 0:e.history)||{},{origin:m}=(e==null?void 0:e.location)||{};for(const g of QT)t[g].value=(u=e==null?void 0:e.location)==null?void 0:u[g];return Nr(Ez({trigger:s,state:d,length:l,origin:m},t))},r=Re(i("load"));return e&&(na(e,"popstate",()=>r.value=i("popstate"),{passive:!0}),na(e,"hashchange",()=>r.value=i("hashchange"),{passive:!0})),r}function Iz(e={}){const{navigator:t=vz,read:i=!1,source:r,copiedDuring:s=1500,legacy:u=!1}=e,d=["copy","cut"],l=Eh(()=>t&&"clipboard"in t),m=Le(()=>l.value||u),g=Re(""),x=Re(!1),w=sz(()=>x.value=!1,s);function I(){l.value?t.clipboard.readText().then($=>{g.value=$}):g.value=L()}if(m.value&&i)for(const $ of d)na($,I);async function C($=bs(r)){m.value&&$!=null&&(l.value?await t.clipboard.writeText($):A($),g.value=$,x.value=!0,w.start())}function A($){const F=document.createElement("textarea");F.value=$??"",F.style.position="absolute",F.style.opacity="0",document.body.appendChild(F),F.select(),document.execCommand("copy"),F.remove()}function L(){var $,F,z;return(z=(F=($=document==null?void 0:document.getSelection)==null?void 0:$.call(document))==null?void 0:F.toString())!=null?z:""}return{isSupported:m,text:g,copied:x,copy:C}}const Fg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$g="__vueuse_ssr_handlers__",Cz=Az();function Az(){return $g in Fg||(Fg[$g]=Fg[$g]||{}),Fg[$g]}function Mz(e,t){return Cz[e]||t}function kz(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}var Pz=Object.defineProperty,eE=Object.getOwnPropertySymbols,Dz=Object.prototype.hasOwnProperty,Lz=Object.prototype.propertyIsEnumerable,tE=(e,t,i)=>t in e?Pz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,nE=(e,t)=>{for(var i in t||(t={}))Dz.call(t,i)&&tE(e,i,t[i]);if(eE)for(var i of eE(t))Lz.call(t,i)&&tE(e,i,t[i]);return e};const Oz={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},iE="vueuse-storage";function JA(e,t,i,r={}){var s;const{flush:u="pre",deep:d=!0,listenToStorageChanges:l=!0,writeDefaults:m=!0,mergeDefaults:g=!1,shallow:x,window:w=Aa,eventFilter:I,onError:C=te=>{console.error(te)}}=r,A=(x?bh:Re)(t);if(!i)try{i=Mz("getDefaultStorage",()=>{var te;return(te=Aa)==null?void 0:te.localStorage})()}catch(te){C(te)}if(!i)return A;const L=bs(t),$=kz(L),F=(s=r.serializer)!=null?s:Oz[$],{pause:z,resume:ee}=gz(A,()=>H(A.value),{flush:u,deep:d,eventFilter:I});return w&&l&&(na(w,"storage",be),na(w,iE,ae)),be(),A;function H(te){try{if(te==null)i.removeItem(e);else{const G=F.write(te),U=i.getItem(e);U!==G&&(i.setItem(e,G),w&&w.dispatchEvent(new CustomEvent(iE,{detail:{key:e,oldValue:U,newValue:G,storageArea:i}})))}}catch(G){C(G)}}function Q(te){const G=te?te.newValue:i.getItem(e);if(G==null)return m&&L!==null&&i.setItem(e,F.write(L)),L;if(!te&&g){const U=F.read(G);return typeof g=="function"?g(U,L):$==="object"&&!Array.isArray(U)?nE(nE({},L),U):U}else return typeof G!="string"?G:F.read(G)}function ae(te){be(te.detail)}function be(te){if(!(te&&te.storageArea!==i)){if(te&&te.key==null){A.value=L;return}if(!(te&&te.key!==e)){z();try{A.value=Q(te)}catch(G){C(G)}finally{te?Ar(ee):ee()}}}}}var rE=Object.getOwnPropertySymbols,Rz=Object.prototype.hasOwnProperty,Fz=Object.prototype.propertyIsEnumerable,$z=(e,t)=>{var i={};for(var r in e)Rz.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&rE)for(var r of rE(e))t.indexOf(r)<0&&Fz.call(e,r)&&(i[r]=e[r]);return i};function zz(e,t,i={}){const r=i,{window:s=Aa}=r,u=$z(r,["window"]);let d;const l=Eh(()=>s&&"MutationObserver"in s),m=()=>{d&&(d.disconnect(),d=void 0)},g=fn(()=>Fs(e),w=>{m(),l.value&&s&&w&&(d=new MutationObserver(t),d.observe(w,u))},{immediate:!0}),x=()=>{m(),g()};return bc(x),{isSupported:l,stop:x}}var sE=Object.getOwnPropertySymbols,Bz=Object.prototype.hasOwnProperty,Nz=Object.prototype.propertyIsEnumerable,jz=(e,t)=>{var i={};for(var r in e)Bz.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&sE)for(var r of sE(e))t.indexOf(r)<0&&Nz.call(e,r)&&(i[r]=e[r]);return i};function k_(e,t,i={}){const r=i,{window:s=Aa}=r,u=jz(r,["window"]);let d;const l=Eh(()=>s&&"ResizeObserver"in s),m=()=>{d&&(d.disconnect(),d=void 0)},g=Le(()=>Array.isArray(e)?e.map(I=>Fs(I)):[Fs(e)]),x=fn(g,I=>{if(m(),l.value&&s){d=new ResizeObserver(t);for(const C of I)C&&d.observe(C,u)}},{immediate:!0,flush:"post",deep:!0}),w=()=>{m(),x()};return bc(w),{isSupported:l,stop:w}}function Uz(e,t,i={}){const{root:r,rootMargin:s="0px",threshold:u=.1,window:d=Aa,immediate:l=!0}=i,m=Eh(()=>d&&"IntersectionObserver"in d),g=Le(()=>{const A=bs(e);return(Array.isArray(A)?A:[A]).map(Fs).filter(Y$)});let x=wa;const w=Re(l),I=m.value?fn(()=>[g.value,Fs(r),w.value],([A,L])=>{if(x(),!w.value||!A.length)return;const $=new IntersectionObserver(t,{root:Fs(L),rootMargin:s,threshold:u});A.forEach(F=>F&&$.observe(F)),x=()=>{$.disconnect(),x=wa}},{immediate:l,flush:"post"}):wa,C=()=>{x(),I(),w.value=!1};return bc(C),{isSupported:m,isActive:w,pause(){x(),w.value=!1},resume(){w.value=!0},stop:C}}const aE=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function Vz(e,t={}){const{document:i=XA,autoExit:r=!1}=t,s=Le(()=>{var F;return(F=Fs(e))!=null?F:i==null?void 0:i.querySelector("html")}),u=Re(!1),d=Le(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(F=>i&&F in i||s.value&&F in s.value)),l=Le(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(F=>i&&F in i||s.value&&F in s.value)),m=Le(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(F=>i&&F in i||s.value&&F in s.value)),g=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(F=>i&&F in i),x=Eh(()=>s.value&&i&&d.value!==void 0&&l.value!==void 0&&m.value!==void 0),w=()=>g?(i==null?void 0:i[g])===s.value:!1,I=()=>{if(m.value){if(i&&i[m.value]!=null)return i[m.value];{const F=s.value;if((F==null?void 0:F[m.value])!=null)return!!F[m.value]}}return!1};async function C(){if(x.value){if(l.value)if((i==null?void 0:i[l.value])!=null)await i[l.value]();else{const F=s.value;(F==null?void 0:F[l.value])!=null&&await F[l.value]()}u.value=!1}}async function A(){if(!x.value)return;I()&&await C();const F=s.value;d.value&&(F==null?void 0:F[d.value])!=null&&(await F[d.value](),u.value=!0)}async function L(){await(u.value?C():A())}const $=()=>{const F=I();(!F||F&&w())&&(u.value=F)};return na(i,aE,$,!1),na(()=>Fs(s),aE,$,!1),r&&bc(C),{isSupported:x,isFullscreen:u,enter:A,exit:C,toggle:L}}const oE=1;function P_(e,t={}){const{throttle:i=0,idle:r=200,onStop:s=wa,onScroll:u=wa,offset:d={left:0,right:0,top:0,bottom:0},eventListenerOptions:l={capture:!1,passive:!0},behavior:m="auto"}=t,g=Re(0),x=Re(0),w=Le({get(){return g.value},set(Q){C(Q,void 0)}}),I=Le({get(){return x.value},set(Q){C(void 0,Q)}});function C(Q,ae){var be,te,G;const U=bs(e);U&&((G=U instanceof Document?document.body:U)==null||G.scrollTo({top:(be=bs(ae))!=null?be:I.value,left:(te=bs(Q))!=null?te:w.value,behavior:bs(m)}))}const A=Re(!1),L=Nr({left:!0,right:!1,top:!0,bottom:!1}),$=Nr({left:!1,right:!1,top:!1,bottom:!1}),F=Q=>{A.value&&(A.value=!1,$.left=!1,$.right=!1,$.top=!1,$.bottom=!1,s(Q))},z=qA(F,i+r),ee=Q=>{const ae=Q===document?Q.documentElement:Q,{display:be,flexDirection:te}=getComputedStyle(ae),G=ae.scrollLeft;$.left=G<g.value,$.right=G>g.value;const U=Math.abs(G)<=0+(d.left||0),B=Math.abs(G)+ae.clientWidth>=ae.scrollWidth-(d.right||0)-oE;be==="flex"&&te==="row-reverse"?(L.left=B,L.right=U):(L.left=U,L.right=B),g.value=G;let ie=ae.scrollTop;Q===document&&!ie&&(ie=document.body.scrollTop),$.top=ie<x.value,$.bottom=ie>x.value;const X=Math.abs(ie)<=0+(d.top||0),ne=Math.abs(ie)+ae.clientHeight>=ae.scrollHeight-(d.bottom||0)-oE;be==="flex"&&te==="column-reverse"?(L.top=ne,L.bottom=X):(L.top=X,L.bottom=ne),x.value=ie},H=Q=>{const ae=Q.target===document?Q.target.documentElement:Q.target;ee(ae),A.value=!0,z(Q),u(Q)};return na(e,"scroll",i?rz(H,i,!0,!1):H,l),na(e,"scrollend",F,l),{x:w,y:I,isScrolling:A,arrivedState:L,directions:$,measure(){const Q=bs(e);Q&&ee(Q)}}}function T0(e,t,i={}){const{window:r=Aa}=i;return JA(e,t,r==null?void 0:r.sessionStorage,i)}function Hz(e=null,t={}){var i,r;const{document:s=XA}=t,u=WA((i=e??(s==null?void 0:s.title))!=null?i:null),d=e&&typeof e=="function";function l(m){if(!("titleTemplate"in t))return m;const g=t.titleTemplate||"%s";return typeof g=="function"?g(m):bs(g).replace(/%s/g,m)}return fn(u,(m,g)=>{m!==g&&s&&(s.title=l(typeof m=="string"?m:""))},{immediate:!0}),t.observe&&!t.titleTemplate&&s&&!d&&zz((r=s.head)==null?void 0:r.querySelector("title"),()=>{s&&s.title!==u.value&&(u.value=l(s.title))},{childList:!0}),u}function Gz({window:e=Aa}={}){if(!e)return{x:Re(0),y:Re(0)};const t=Re(e.scrollX),i=Re(e.scrollY);return na(e,"scroll",()=>{t.value=e.scrollX,i.value=e.scrollY},{capture:!1,passive:!0}),{x:t,y:i}}function QA(){const{availableThemes:e,defaultTheme:t}=si.instance.theming,{url:i}=si.instance.base,r=si.instance.theming.enabled,s=JA(`theme-${i}`,t);return fn(s,async()=>{e.includes(s.value)||(s.value=t),document.documentElement.setAttribute("data-theme",s.value),s.value!=="light"&&X$(Object.assign({"../css/themes/dark.css":()=>Za(()=>Promise.resolve({}),["assets/dark-5d0f38c8.css"]),"../css/themes/default.css":()=>Za(()=>Promise.resolve({}),["assets/default-a3e57f3c.css"]),"../css/themes/folwell.css":()=>Za(()=>Promise.resolve({}),["assets/folwell-3ae01df2.css"]),"../css/themes/hotdog.css":()=>Za(()=>Promise.resolve({}),["assets/hotdog-45a905bf.css"])}),`../css/themes/${s.value}.css`).catch(u=>{console.error(`Failed to load theme css for ${s.value}. falling back to light theme.`,u)})},{immediate:!0}),{activeTheme:s,availableThemes:e,isEnabled:r,setTheme(u){s.value=u}}}/*!
  * vue-router v4.1.5
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Fd=typeof window<"u";function Wz(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const ki=Object.assign;function E0(e,t){const i={};for(const r in t){const s=t[r];i[r]=eo(s)?s.map(e):e(s)}return i}const hp=()=>{},eo=Array.isArray,qz=/\/$/,Zz=e=>e.replace(qz,"");function I0(e,t,i="/"){let r,s={},u="",d="";const l=t.indexOf("#");let m=t.indexOf("?");return l<m&&l>=0&&(m=-1),m>-1&&(r=t.slice(0,m),u=t.slice(m+1,l>-1?l:t.length),s=e(u)),l>-1&&(r=r||t.slice(0,l),d=t.slice(l,t.length)),r=Jz(r??t,i),{fullPath:r+(u&&"?")+u+d,path:r,query:s,hash:d}}function Kz(e,t){const i=t.query?e(t.query):"";return t.path+(i&&"?")+i+(t.hash||"")}function lE(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Xz(e,t,i){const r=t.matched.length-1,s=i.matched.length-1;return r>-1&&r===s&&oh(t.matched[r],i.matched[s])&&eM(t.params,i.params)&&e(t.query)===e(i.query)&&t.hash===i.hash}function oh(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function eM(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!Yz(e[i],t[i]))return!1;return!0}function Yz(e,t){return eo(e)?cE(e,t):eo(t)?cE(t,e):e===t}function cE(e,t){return eo(t)?e.length===t.length&&e.every((i,r)=>i===t[r]):e.length===1&&e[0]===t}function Jz(e,t){if(e.startsWith("/"))return e;if(!e)return t;const i=t.split("/"),r=e.split("/");let s=i.length-1,u,d;for(u=0;u<r.length;u++)if(d=r[u],d!==".")if(d==="..")s>1&&s--;else break;return i.slice(0,s).join("/")+"/"+r.slice(u-(u===r.length?1:0)).join("/")}var Rp;(function(e){e.pop="pop",e.push="push"})(Rp||(Rp={}));var fp;(function(e){e.back="back",e.forward="forward",e.unknown=""})(fp||(fp={}));function Qz(e){if(!e)if(Fd){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Zz(e)}const eB=/^[^#]+#/;function tB(e,t){return e.replace(eB,"#")+t}function nB(e,t){const i=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-i.left-(t.left||0),top:r.top-i.top-(t.top||0)}}const D_=()=>({left:window.pageXOffset,top:window.pageYOffset});function iB(e){let t;if("el"in e){const i=e.el,r=typeof i=="string"&&i.startsWith("#"),s=typeof i=="string"?r?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!s)return;t=nB(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function uE(e,t){return(history.state?history.state.position-t:-1)+e}const Hb=new Map;function rB(e,t){Hb.set(e,t)}function sB(e){const t=Hb.get(e);return Hb.delete(e),t}let aB=()=>location.protocol+"//"+location.host;function tM(e,t){const{pathname:i,search:r,hash:s}=t,u=e.indexOf("#");if(u>-1){let l=s.includes(e.slice(u))?e.slice(u).length:1,m=s.slice(l);return m[0]!=="/"&&(m="/"+m),lE(m,"")}return lE(i,e)+r+s}function oB(e,t,i,r){let s=[],u=[],d=null;const l=({state:I})=>{const C=tM(e,location),A=i.value,L=t.value;let $=0;if(I){if(i.value=C,t.value=I,d&&d===A){d=null;return}$=L?I.position-L.position:0}else r(C);s.forEach(F=>{F(i.value,A,{delta:$,type:Rp.pop,direction:$?$>0?fp.forward:fp.back:fp.unknown})})};function m(){d=i.value}function g(I){s.push(I);const C=()=>{const A=s.indexOf(I);A>-1&&s.splice(A,1)};return u.push(C),C}function x(){const{history:I}=window;I.state&&I.replaceState(ki({},I.state,{scroll:D_()}),"")}function w(){for(const I of u)I();u=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",x)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",x),{pauseListeners:m,listen:g,destroy:w}}function dE(e,t,i,r=!1,s=!1){return{back:e,current:t,forward:i,replaced:r,position:window.history.length,scroll:s?D_():null}}function lB(e){const{history:t,location:i}=window,r={value:tM(e,i)},s={value:t.state};s.value||u(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function u(m,g,x){const w=e.indexOf("#"),I=w>-1?(i.host&&document.querySelector("base")?e:e.slice(w))+m:aB()+e+m;try{t[x?"replaceState":"pushState"](g,"",I),s.value=g}catch(C){console.error(C),i[x?"replace":"assign"](I)}}function d(m,g){const x=ki({},t.state,dE(s.value.back,m,s.value.forward,!0),g,{position:s.value.position});u(m,x,!0),r.value=m}function l(m,g){const x=ki({},s.value,t.state,{forward:m,scroll:D_()});u(x.current,x,!0);const w=ki({},dE(r.value,m,null),{position:x.position+1},g);u(m,w,!1),r.value=m}return{location:r,state:s,push:l,replace:d}}function cB(e){e=Qz(e);const t=lB(e),i=oB(e,t.state,t.location,t.replace);function r(u,d=!0){d||i.pauseListeners(),history.go(u)}const s=ki({location:"",base:e,go:r,createHref:tB.bind(null,e)},t,i);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function uB(e){return typeof e=="string"||e&&typeof e=="object"}function nM(e){return typeof e=="string"||typeof e=="symbol"}const Nl={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},iM=Symbol("");var hE;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(hE||(hE={}));function lh(e,t){return ki(new Error,{type:e,[iM]:!0},t)}function el(e,t){return e instanceof Error&&iM in e&&(t==null||!!(e.type&t))}const fE="[^/]+?",dB={sensitive:!1,strict:!1,start:!0,end:!0},hB=/[.+*?^${}()[\]/\\]/g;function fB(e,t){const i=ki({},dB,t),r=[];let s=i.start?"^":"";const u=[];for(const g of e){const x=g.length?[]:[90];i.strict&&!g.length&&(s+="/");for(let w=0;w<g.length;w++){const I=g[w];let C=40+(i.sensitive?.25:0);if(I.type===0)w||(s+="/"),s+=I.value.replace(hB,"\\$&"),C+=40;else if(I.type===1){const{value:A,repeatable:L,optional:$,regexp:F}=I;u.push({name:A,repeatable:L,optional:$});const z=F||fE;if(z!==fE){C+=10;try{new RegExp(`(${z})`)}catch(H){throw new Error(`Invalid custom RegExp for param "${A}" (${z}): `+H.message)}}let ee=L?`((?:${z})(?:/(?:${z}))*)`:`(${z})`;w||(ee=$&&g.length<2?`(?:/${ee})`:"/"+ee),$&&(ee+="?"),s+=ee,C+=20,$&&(C+=-8),L&&(C+=-20),z===".*"&&(C+=-50)}x.push(C)}r.push(x)}if(i.strict&&i.end){const g=r.length-1;r[g][r[g].length-1]+=.7000000000000001}i.strict||(s+="/?"),i.end?s+="$":i.strict&&(s+="(?:/|$)");const d=new RegExp(s,i.sensitive?"":"i");function l(g){const x=g.match(d),w={};if(!x)return null;for(let I=1;I<x.length;I++){const C=x[I]||"",A=u[I-1];w[A.name]=C&&A.repeatable?C.split("/"):C}return w}function m(g){let x="",w=!1;for(const I of e){(!w||!x.endsWith("/"))&&(x+="/"),w=!1;for(const C of I)if(C.type===0)x+=C.value;else if(C.type===1){const{value:A,repeatable:L,optional:$}=C,F=A in g?g[A]:"";if(eo(F)&&!L)throw new Error(`Provided param "${A}" is an array but it is not repeatable (* or + modifiers)`);const z=eo(F)?F.join("/"):F;if(!z)if($)I.length<2&&(x.endsWith("/")?x=x.slice(0,-1):w=!0);else throw new Error(`Missing required param "${A}"`);x+=z}}return x||"/"}return{re:d,score:r,keys:u,parse:l,stringify:m}}function pB(e,t){let i=0;for(;i<e.length&&i<t.length;){const r=t[i]-e[i];if(r)return r;i++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function mB(e,t){let i=0;const r=e.score,s=t.score;for(;i<r.length&&i<s.length;){const u=pB(r[i],s[i]);if(u)return u;i++}if(Math.abs(s.length-r.length)===1){if(pE(r))return 1;if(pE(s))return-1}return s.length-r.length}function pE(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const gB={type:0,value:""},vB=/[a-zA-Z0-9_]/;function _B(e){if(!e)return[[]];if(e==="/")return[[gB]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(C){throw new Error(`ERR (${i})/"${g}": ${C}`)}let i=0,r=i;const s=[];let u;function d(){u&&s.push(u),u=[]}let l=0,m,g="",x="";function w(){g&&(i===0?u.push({type:0,value:g}):i===1||i===2||i===3?(u.length>1&&(m==="*"||m==="+")&&t(`A repeatable param (${g}) must be alone in its segment. eg: '/:ids+.`),u.push({type:1,value:g,regexp:x,repeatable:m==="*"||m==="+",optional:m==="*"||m==="?"})):t("Invalid state to consume buffer"),g="")}function I(){g+=m}for(;l<e.length;){if(m=e[l++],m==="\\"&&i!==2){r=i,i=4;continue}switch(i){case 0:m==="/"?(g&&w(),d()):m===":"?(w(),i=1):I();break;case 4:I(),i=r;break;case 1:m==="("?i=2:vB.test(m)?I():(w(),i=0,m!=="*"&&m!=="?"&&m!=="+"&&l--);break;case 2:m===")"?x[x.length-1]=="\\"?x=x.slice(0,-1)+m:i=3:x+=m;break;case 3:w(),i=0,m!=="*"&&m!=="?"&&m!=="+"&&l--,x="";break;default:t("Unknown state");break}}return i===2&&t(`Unfinished custom RegExp for param "${g}"`),w(),d(),s}function yB(e,t,i){const r=fB(_B(e.path),i),s=ki(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function bB(e,t){const i=[],r=new Map;t=vE({strict:!1,end:!0,sensitive:!1},t);function s(x){return r.get(x)}function u(x,w,I){const C=!I,A=xB(x);A.aliasOf=I&&I.record;const L=vE(t,x),$=[A];if("alias"in x){const ee=typeof x.alias=="string"?[x.alias]:x.alias;for(const H of ee)$.push(ki({},A,{components:I?I.record.components:A.components,path:H,aliasOf:I?I.record:A}))}let F,z;for(const ee of $){const{path:H}=ee;if(w&&H[0]!=="/"){const Q=w.record.path,ae=Q[Q.length-1]==="/"?"":"/";ee.path=w.record.path+(H&&ae+H)}if(F=yB(ee,w,L),I?I.alias.push(F):(z=z||F,z!==F&&z.alias.push(F),C&&x.name&&!gE(F)&&d(x.name)),A.children){const Q=A.children;for(let ae=0;ae<Q.length;ae++)u(Q[ae],F,I&&I.children[ae])}I=I||F,m(F)}return z?()=>{d(z)}:hp}function d(x){if(nM(x)){const w=r.get(x);w&&(r.delete(x),i.splice(i.indexOf(w),1),w.children.forEach(d),w.alias.forEach(d))}else{const w=i.indexOf(x);w>-1&&(i.splice(w,1),x.record.name&&r.delete(x.record.name),x.children.forEach(d),x.alias.forEach(d))}}function l(){return i}function m(x){let w=0;for(;w<i.length&&mB(x,i[w])>=0&&(x.record.path!==i[w].record.path||!rM(x,i[w]));)w++;i.splice(w,0,x),x.record.name&&!gE(x)&&r.set(x.record.name,x)}function g(x,w){let I,C={},A,L;if("name"in x&&x.name){if(I=r.get(x.name),!I)throw lh(1,{location:x});L=I.record.name,C=ki(mE(w.params,I.keys.filter(z=>!z.optional).map(z=>z.name)),x.params&&mE(x.params,I.keys.map(z=>z.name))),A=I.stringify(C)}else if("path"in x)A=x.path,I=i.find(z=>z.re.test(A)),I&&(C=I.parse(A),L=I.record.name);else{if(I=w.name?r.get(w.name):i.find(z=>z.re.test(w.path)),!I)throw lh(1,{location:x,currentLocation:w});L=I.record.name,C=ki({},w.params,x.params),A=I.stringify(C)}const $=[];let F=I;for(;F;)$.unshift(F.record),F=F.parent;return{name:L,path:A,params:C,matched:$,meta:SB($)}}return e.forEach(x=>u(x)),{addRoute:u,resolve:g,removeRoute:d,getRoutes:l,getRecordMatcher:s}}function mE(e,t){const i={};for(const r of t)r in e&&(i[r]=e[r]);return i}function xB(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:wB(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function wB(e){const t={},i=e.props||!1;if("component"in e)t.default=i;else for(const r in e.components)t[r]=typeof i=="boolean"?i:i[r];return t}function gE(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function SB(e){return e.reduce((t,i)=>ki(t,i.meta),{})}function vE(e,t){const i={};for(const r in e)i[r]=r in t?t[r]:e[r];return i}function rM(e,t){return t.children.some(i=>i===e||rM(e,i))}const sM=/#/g,TB=/&/g,EB=/\//g,IB=/=/g,CB=/\?/g,aM=/\+/g,AB=/%5B/g,MB=/%5D/g,oM=/%5E/g,kB=/%60/g,lM=/%7B/g,PB=/%7C/g,cM=/%7D/g,DB=/%20/g;function S1(e){return encodeURI(""+e).replace(PB,"|").replace(AB,"[").replace(MB,"]")}function LB(e){return S1(e).replace(lM,"{").replace(cM,"}").replace(oM,"^")}function Gb(e){return S1(e).replace(aM,"%2B").replace(DB,"+").replace(sM,"%23").replace(TB,"%26").replace(kB,"`").replace(lM,"{").replace(cM,"}").replace(oM,"^")}function OB(e){return Gb(e).replace(IB,"%3D")}function RB(e){return S1(e).replace(sM,"%23").replace(CB,"%3F")}function FB(e){return e==null?"":RB(e).replace(EB,"%2F")}function Rv(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function $B(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const u=r[s].replace(aM," "),d=u.indexOf("="),l=Rv(d<0?u:u.slice(0,d)),m=d<0?null:Rv(u.slice(d+1));if(l in t){let g=t[l];eo(g)||(g=t[l]=[g]),g.push(m)}else t[l]=m}return t}function _E(e){let t="";for(let i in e){const r=e[i];if(i=OB(i),r==null){r!==void 0&&(t+=(t.length?"&":"")+i);continue}(eo(r)?r.map(u=>u&&Gb(u)):[r&&Gb(r)]).forEach(u=>{u!==void 0&&(t+=(t.length?"&":"")+i,u!=null&&(t+="="+u))})}return t}function zB(e){const t={};for(const i in e){const r=e[i];r!==void 0&&(t[i]=eo(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const T1=Symbol(""),yE=Symbol(""),L_=Symbol(""),E1=Symbol(""),Wb=Symbol("");function Rf(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function i(){e=[]}return{add:t,list:()=>e,reset:i}}function uM(e,t,i){const r=()=>{e[t].delete(i)};Wi(r),Xx(r),Kx(()=>{e[t].add(i)}),e[t].add(i)}function BB(e){const t=wi(T1,{}).value;t&&uM(t,"leaveGuards",e)}function NB(e){const t=wi(T1,{}).value;t&&uM(t,"updateGuards",e)}function Gl(e,t,i,r,s){const u=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((d,l)=>{const m=w=>{w===!1?l(lh(4,{from:i,to:t})):w instanceof Error?l(w):uB(w)?l(lh(2,{from:t,to:w})):(u&&r.enterCallbacks[s]===u&&typeof w=="function"&&u.push(w),d())},g=e.call(r&&r.instances[s],t,i,m);let x=Promise.resolve(g);e.length<3&&(x=x.then(m)),x.catch(w=>l(w))})}function C0(e,t,i,r){const s=[];for(const u of e)for(const d in u.components){let l=u.components[d];if(!(t!=="beforeRouteEnter"&&!u.instances[d]))if(jB(l)){const g=(l.__vccOpts||l)[t];g&&s.push(Gl(g,i,r,u,d))}else{let m=l();s.push(()=>m.then(g=>{if(!g)return Promise.reject(new Error(`Couldn't resolve component "${d}" at "${u.path}"`));const x=Wz(g)?g.default:g;u.components[d]=x;const I=(x.__vccOpts||x)[t];return I&&Gl(I,i,r,u,d)()}))}}return s}function jB(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function bE(e){const t=wi(L_),i=wi(E1),r=Le(()=>t.resolve(ce(e.to))),s=Le(()=>{const{matched:m}=r.value,{length:g}=m,x=m[g-1],w=i.matched;if(!x||!w.length)return-1;const I=w.findIndex(oh.bind(null,x));if(I>-1)return I;const C=xE(m[g-2]);return g>1&&xE(x)===C&&w[w.length-1].path!==C?w.findIndex(oh.bind(null,m[g-2])):I}),u=Le(()=>s.value>-1&&HB(i.params,r.value.params)),d=Le(()=>s.value>-1&&s.value===i.matched.length-1&&eM(i.params,r.value.params));function l(m={}){return VB(m)?t[ce(e.replace)?"replace":"push"](ce(e.to)).catch(hp):Promise.resolve()}return{route:r,href:Le(()=>r.value.href),isActive:u,isExactActive:d,navigate:l}}const UB=rt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:bE,setup(e,{slots:t}){const i=Nr(bE(e)),{options:r}=wi(L_),s=Le(()=>({[wE(e.activeClass,r.linkActiveClass,"router-link-active")]:i.isActive,[wE(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const u=t.default&&t.default(i);return e.custom?u:ni("a",{"aria-current":i.isExactActive?e.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:s.value},u)}}}),sc=UB;function VB(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function HB(e,t){for(const i in t){const r=t[i],s=e[i];if(typeof r=="string"){if(r!==s)return!1}else if(!eo(s)||s.length!==r.length||r.some((u,d)=>u!==s[d]))return!1}return!0}function xE(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const wE=(e,t,i)=>e??t??i,GB=rt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:i}){const r=wi(Wb),s=Le(()=>e.route||r.value),u=wi(yE,0),d=Le(()=>{let g=ce(u);const{matched:x}=s.value;let w;for(;(w=x[g])&&!w.components;)g++;return g}),l=Le(()=>s.value.matched[d.value]);Oi(yE,Le(()=>d.value+1)),Oi(T1,l),Oi(Wb,s);const m=Re();return fn(()=>[m.value,l.value,e.name],([g,x,w],[I,C,A])=>{x&&(x.instances[w]=g,C&&C!==x&&g&&g===I&&(x.leaveGuards.size||(x.leaveGuards=C.leaveGuards),x.updateGuards.size||(x.updateGuards=C.updateGuards))),g&&x&&(!C||!oh(x,C)||!I)&&(x.enterCallbacks[w]||[]).forEach(L=>L(g))},{flush:"post"}),()=>{const g=s.value,x=e.name,w=l.value,I=w&&w.components[x];if(!I)return SE(i.default,{Component:I,route:g});const C=w.props[x],A=C?C===!0?g.params:typeof C=="function"?C(g):C:null,$=ni(I,ki({},A,t,{onVnodeUnmounted:F=>{F.component.isUnmounted&&(w.instances[x]=null)},ref:m}));return SE(i.default,{Component:$,route:g})||$}}});function SE(e,t){if(!e)return null;const i=e(t);return i.length===1?i[0]:i}const WB=GB;function qB(e){const t=bB(e.routes,e),i=e.parseQuery||$B,r=e.stringifyQuery||_E,s=e.history,u=Rf(),d=Rf(),l=Rf(),m=bh(Nl);let g=Nl;Fd&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const x=E0.bind(null,Be=>""+Be),w=E0.bind(null,FB),I=E0.bind(null,Rv);function C(Be,Ke){let ut,Ot;return nM(Be)?(ut=t.getRecordMatcher(Be),Ot=Ke):Ot=Be,t.addRoute(Ot,ut)}function A(Be){const Ke=t.getRecordMatcher(Be);Ke&&t.removeRoute(Ke)}function L(){return t.getRoutes().map(Be=>Be.record)}function $(Be){return!!t.getRecordMatcher(Be)}function F(Be,Ke){if(Ke=ki({},Ke||m.value),typeof Be=="string"){const _e=I0(i,Be,Ke.path),ke=t.resolve({path:_e.path},Ke),ge=s.createHref(_e.fullPath);return ki(_e,ke,{params:I(ke.params),hash:Rv(_e.hash),redirectedFrom:void 0,href:ge})}let ut;if("path"in Be)ut=ki({},Be,{path:I0(i,Be.path,Ke.path).path});else{const _e=ki({},Be.params);for(const ke in _e)_e[ke]==null&&delete _e[ke];ut=ki({},Be,{params:w(Be.params)}),Ke.params=w(Ke.params)}const Ot=t.resolve(ut,Ke),Vt=Be.hash||"";Ot.params=x(I(Ot.params));const _n=Kz(r,ki({},Be,{hash:LB(Vt),path:Ot.path})),qt=s.createHref(_n);return ki({fullPath:_n,hash:Vt,query:r===_E?zB(Be.query):Be.query||{}},Ot,{redirectedFrom:void 0,href:qt})}function z(Be){return typeof Be=="string"?I0(i,Be,m.value.path):ki({},Be)}function ee(Be,Ke){if(g!==Be)return lh(8,{from:Ke,to:Be})}function H(Be){return be(Be)}function Q(Be){return H(ki(z(Be),{replace:!0}))}function ae(Be){const Ke=Be.matched[Be.matched.length-1];if(Ke&&Ke.redirect){const{redirect:ut}=Ke;let Ot=typeof ut=="function"?ut(Be):ut;return typeof Ot=="string"&&(Ot=Ot.includes("?")||Ot.includes("#")?Ot=z(Ot):{path:Ot},Ot.params={}),ki({query:Be.query,hash:Be.hash,params:"path"in Ot?{}:Be.params},Ot)}}function be(Be,Ke){const ut=g=F(Be),Ot=m.value,Vt=Be.state,_n=Be.force,qt=Be.replace===!0,_e=ae(ut);if(_e)return be(ki(z(_e),{state:typeof _e=="object"?ki({},Vt,_e.state):Vt,force:_n,replace:qt}),Ke||ut);const ke=ut;ke.redirectedFrom=Ke;let ge;return!_n&&Xz(r,Ot,ut)&&(ge=lh(16,{to:ke,from:Ot}),$t(Ot,Ot,!0,!1)),(ge?Promise.resolve(ge):G(ke,Ot)).catch(ft=>el(ft)?el(ft,2)?ft:st(ft):Xe(ft,ke,Ot)).then(ft=>{if(ft){if(el(ft,2))return be(ki({replace:qt},z(ft.to),{state:typeof ft.to=="object"?ki({},Vt,ft.to.state):Vt,force:_n}),Ke||ke)}else ft=B(ke,Ot,!0,qt,Vt);return U(ke,Ot,ft),ft})}function te(Be,Ke){const ut=ee(Be,Ke);return ut?Promise.reject(ut):Promise.resolve()}function G(Be,Ke){let ut;const[Ot,Vt,_n]=ZB(Be,Ke);ut=C0(Ot.reverse(),"beforeRouteLeave",Be,Ke);for(const _e of Ot)_e.leaveGuards.forEach(ke=>{ut.push(Gl(ke,Be,Ke))});const qt=te.bind(null,Be,Ke);return ut.push(qt),Id(ut).then(()=>{ut=[];for(const _e of u.list())ut.push(Gl(_e,Be,Ke));return ut.push(qt),Id(ut)}).then(()=>{ut=C0(Vt,"beforeRouteUpdate",Be,Ke);for(const _e of Vt)_e.updateGuards.forEach(ke=>{ut.push(Gl(ke,Be,Ke))});return ut.push(qt),Id(ut)}).then(()=>{ut=[];for(const _e of Be.matched)if(_e.beforeEnter&&!Ke.matched.includes(_e))if(eo(_e.beforeEnter))for(const ke of _e.beforeEnter)ut.push(Gl(ke,Be,Ke));else ut.push(Gl(_e.beforeEnter,Be,Ke));return ut.push(qt),Id(ut)}).then(()=>(Be.matched.forEach(_e=>_e.enterCallbacks={}),ut=C0(_n,"beforeRouteEnter",Be,Ke),ut.push(qt),Id(ut))).then(()=>{ut=[];for(const _e of d.list())ut.push(Gl(_e,Be,Ke));return ut.push(qt),Id(ut)}).catch(_e=>el(_e,8)?_e:Promise.reject(_e))}function U(Be,Ke,ut){for(const Ot of l.list())Ot(Be,Ke,ut)}function B(Be,Ke,ut,Ot,Vt){const _n=ee(Be,Ke);if(_n)return _n;const qt=Ke===Nl,_e=Fd?history.state:{};ut&&(Ot||qt?s.replace(Be.fullPath,ki({scroll:qt&&_e&&_e.scroll},Vt)):s.push(Be.fullPath,Vt)),m.value=Be,$t(Be,Ke,ut,qt),st()}let ie;function X(){ie||(ie=s.listen((Be,Ke,ut)=>{if(!dt.listening)return;const Ot=F(Be),Vt=ae(Ot);if(Vt){be(ki(Vt,{replace:!0}),Ot).catch(hp);return}g=Ot;const _n=m.value;Fd&&rB(uE(_n.fullPath,ut.delta),D_()),G(Ot,_n).catch(qt=>el(qt,12)?qt:el(qt,2)?(be(qt.to,Ot).then(_e=>{el(_e,20)&&!ut.delta&&ut.type===Rp.pop&&s.go(-1,!1)}).catch(hp),Promise.reject()):(ut.delta&&s.go(-ut.delta,!1),Xe(qt,Ot,_n))).then(qt=>{qt=qt||B(Ot,_n,!1),qt&&(ut.delta&&!el(qt,8)?s.go(-ut.delta,!1):ut.type===Rp.pop&&el(qt,20)&&s.go(-1,!1)),U(Ot,_n,qt)}).catch(hp)}))}let ne=Rf(),Ee=Rf(),Ie;function Xe(Be,Ke,ut){st(Be);const Ot=Ee.list();return Ot.length?Ot.forEach(Vt=>Vt(Be,Ke,ut)):console.error(Be),Promise.reject(Be)}function lt(){return Ie&&m.value!==Nl?Promise.resolve():new Promise((Be,Ke)=>{ne.add([Be,Ke])})}function st(Be){return Ie||(Ie=!Be,X(),ne.list().forEach(([Ke,ut])=>Be?ut(Be):Ke()),ne.reset()),Be}function $t(Be,Ke,ut,Ot){const{scrollBehavior:Vt}=e;if(!Fd||!Vt)return Promise.resolve();const _n=!ut&&sB(uE(Be.fullPath,0))||(Ot||!ut)&&history.state&&history.state.scroll||null;return Ar().then(()=>Vt(Be,Ke,_n)).then(qt=>qt&&iB(qt)).catch(qt=>Xe(qt,Be,Ke))}const It=Be=>s.go(Be);let nt;const et=new Set,dt={currentRoute:m,listening:!0,addRoute:C,removeRoute:A,hasRoute:$,getRoutes:L,resolve:F,options:e,push:H,replace:Q,go:It,back:()=>It(-1),forward:()=>It(1),beforeEach:u.add,beforeResolve:d.add,afterEach:l.add,onError:Ee.add,isReady:lt,install(Be){const Ke=this;Be.component("RouterLink",sc),Be.component("RouterView",WB),Be.config.globalProperties.$router=Ke,Object.defineProperty(Be.config.globalProperties,"$route",{enumerable:!0,get:()=>ce(m)}),Fd&&!nt&&m.value===Nl&&(nt=!0,H(s.location).catch(Vt=>{}));const ut={};for(const Vt in Nl)ut[Vt]=Le(()=>m.value[Vt]);Be.provide(L_,Ke),Be.provide(E1,Nr(ut)),Be.provide(Wb,m);const Ot=Be.unmount;et.add(Be),Be.unmount=function(){et.delete(Be),et.size<1&&(g=Nl,ie&&ie(),ie=null,m.value=Nl,nt=!1,Ie=!1),Ot()}}};return dt}function Id(e){return e.reduce((t,i)=>t.then(()=>i()),Promise.resolve())}function ZB(e,t){const i=[],r=[],s=[],u=Math.max(t.matched.length,e.matched.length);for(let d=0;d<u;d++){const l=t.matched[d];l&&(e.matched.find(g=>oh(g,l))?r.push(l):i.push(l));const m=e.matched[d];m&&(t.matched.find(g=>oh(g,m))||s.push(m))}return[i,r,s]}function lo(){return wi(L_)}function Iu(){return wi(E1)}const KB=rt({__name:"Button",props:{href:{default:void 0},to:{default:void 0},variant:{default:"secondary"},type:{default:"button"}},setup(e){const t=e,i=lo(),r=Le(()=>{if(t.href)return t.href;if(t.to&&s.value===sc)return i.resolve(t.to).href}),s=Le(()=>t.href?"a":t.to?sc:"button");return(u,d)=>(V(),je(_c(s.value),Br({class:["button inline-flex items-center gap-1 no-underline hover:no-underline rounded justify-center leading-none transition-colors ease-in-out group cursor-pointer",{"button--primary px-4 py-3":u.variant==="primary","button--secondary px-4 py-3":u.variant==="secondary","button--tertiary text-xs uppercase font-medium p-2":u.variant==="tertiary","button--primary px-4 py-3 !bg-red-500 !border-red-500 text-red-100 hover:!bg-red-600 hover:!border-red-600":u.variant==="danger"}]},u.$attrs,{to:s.value===ce(sc)?u.to:void 0,href:r.value,type:s.value==="button"?u.type:void 0}),{default:Ce(()=>[En(u.$slots,"default",{},void 0,!0)]),_:3},16,["class","to","href","type"]))}});const sn=(e,t)=>{const i=e.__vccOpts||e;for(const[r,s]of t)i[r]=s;return i},ai=sn(KB,[["__scopeId","data-v-b3ce31e8"]]),XB={},YB={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},JB=de("rect",{width:"24",height:"24"},null,-1),QB=de("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.6851 2.08796C10.1881 2.15475 9.69495 2.25958 9.21002 2.40246C9.27467 2.86436 9.45238 3.29954 9.72326 3.67131C9.98279 3.10488 10.3065 2.57399 10.6851 2.08796ZM9.02399 7.62422C8.84315 7.4298 8.58509 7.30818 8.29862 7.30818C7.75161 7.30818 7.30818 7.75162 7.30818 8.29862C7.30818 8.84563 7.75161 9.28907 8.29862 9.28907C8.68939 9.28907 9.02729 9.06277 9.18845 8.73408C9.10859 8.3727 9.05316 8.00214 9.02399 7.62422ZM20.122 14.3679C20.7663 14.0946 21.3673 13.7392 21.912 13.3149C21.8453 13.8119 21.7404 14.3051 21.5975 14.79C21.0717 14.79 20.5612 14.6416 20.122 14.3679ZM15.2627 14.8108C15.6235 14.8907 15.9934 14.9463 16.3707 14.9756C16.5654 15.1565 16.6872 15.4147 16.6872 15.7014C16.6872 16.2484 16.2437 16.6918 15.6967 16.6918C15.1497 16.6918 14.7063 16.2484 14.7063 15.7014C14.7063 15.31 14.9332 14.9717 15.2627 14.8108ZM6.92688 6.92688C7.41013 6.44895 7.70231 5.81105 7.74854 5.13295C7.79477 4.45486 7.59189 3.7832 7.17798 3.2441C5.52305 4.15964 4.15964 5.52305 3.2441 7.17798C3.7832 7.59189 4.45485 7.79478 5.13295 7.74854C5.81105 7.70231 6.44895 7.41013 6.92688 6.92688ZM4.82509 12C4.82315 11.3217 4.57738 10.6667 4.13263 10.1545C3.68788 9.64228 3.07381 9.30708 2.40245 9.21002C1.86585 11.0313 1.86585 12.9687 2.40245 14.79C3.07381 14.6929 3.68788 14.3577 4.13263 13.8455C4.57738 13.3333 4.82315 12.6783 4.82509 12ZM7.75457 12C7.75457 12.547 7.31114 12.9904 6.76413 12.9904C6.21712 12.9904 5.77369 12.547 5.77369 12C5.77369 11.453 6.21712 11.0096 6.76413 11.0096C7.31114 11.0096 7.75457 11.453 7.75457 12ZM9.28906 15.7014C9.28906 16.2484 8.84563 16.6918 8.29862 16.6918C7.75161 16.6918 7.30818 16.2484 7.30818 15.7014C7.30818 15.1544 7.75161 14.7109 8.29862 14.7109C8.84563 14.7109 9.28906 15.1544 9.28906 15.7014ZM11.4497 16.4123C11.6126 16.3035 11.8041 16.2454 12 16.2454C12.2627 16.2454 12.5146 16.3498 12.7003 16.5355C12.8861 16.7213 12.9904 16.9732 12.9904 17.2359C12.9904 17.4318 12.9324 17.6233 12.8235 17.7861C12.7147 17.949 12.56 18.076 12.379 18.1509C12.198 18.2259 11.9989 18.2455 11.8068 18.2073C11.6146 18.1691 11.4382 18.0747 11.2997 17.9362C11.1611 17.7977 11.0668 17.6212 11.0286 17.4291C10.9904 17.237 11.01 17.0378 11.0849 16.8568C11.1599 16.6759 11.2869 16.5212 11.4497 16.4123ZM10.1545 19.8674C10.6667 19.4226 11.3217 19.1769 12 19.1749C12.6783 19.1769 13.3333 19.4226 13.8455 19.8674C14.3577 20.3121 14.6929 20.9262 14.79 21.5975C12.9687 22.1342 11.0313 22.1342 9.21002 21.5975C9.30708 20.9262 9.64228 20.3121 10.1545 19.8674ZM6.92688 17.0731C6.44895 16.5899 5.81105 16.2977 5.13295 16.2515C4.45486 16.2052 3.7832 16.4081 3.2441 16.822C4.15964 18.477 5.52305 19.8404 7.17798 20.7559C7.59189 20.2168 7.79477 19.5451 7.74854 18.867C7.70231 18.189 7.41013 17.5511 6.92688 17.0731ZM17.0731 17.0731C16.5899 17.5511 16.2977 18.189 16.2515 18.867C16.2052 19.5451 16.4081 20.2168 16.822 20.7559C18.477 19.8404 19.8404 18.477 20.7559 16.822C20.2168 16.4081 19.5451 16.2052 18.867 16.2515C18.189 16.2977 17.5511 16.5899 17.0731 17.0731Z",fill:"black"},null,-1),e6=de("path",{d:"M17 0.333334C13.318 0.333334 10.3333 3.318 10.3333 7C10.3333 10.682 13.318 13.6667 17 13.6667C20.682 13.6667 23.6667 10.682 23.6667 7C23.6667 3.318 20.682 0.333334 17 0.333334ZM20.3333 7.66667H17.6667V10.3333H16.3333V7.66667H13.6667V6.33333H16.3333V3.66667H17.6667V6.33333H20.3333V7.66667Z",fill:"black"},null,-1),t6=[JB,QB,e6];function n6(e,t){return V(),pe("svg",YB,t6)}const i6=sn(XB,[["render",n6]]),r6={},s6={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a6=TC('<g clip-path="url(#clip0_906_7883)"><rect width="24" height="24"></rect><path fill-rule="evenodd" clip-rule="evenodd" d="M9.58152 4H6.5C5.50544 4 4.55161 4.39509 3.84835 5.09835C3.14509 5.80161 2.75 6.75544 2.75 7.75V17.75C2.75 18.7446 3.14509 19.6984 3.84835 20.4017C4.55161 21.1049 5.50544 21.5 6.5 21.5H16.5C17.4946 21.5 18.4484 21.1049 19.1517 20.4017C19.8549 19.6984 20.25 18.7446 20.25 17.75V14.3123C19.8496 14.4905 19.4319 14.6368 19 14.748V17.75C19 18.413 18.7366 19.0489 18.2678 19.5178C17.7989 19.9866 17.163 20.25 16.5 20.25H6.5C5.83696 20.25 5.20107 19.9866 4.73223 19.5178C4.26339 19.0489 4 18.413 4 17.75V14H7.80125C7.94747 14.8753 8.39938 15.6704 9.07662 16.2439C9.75387 16.8174 10.6126 17.1321 11.5 17.1321C12.3874 17.1321 13.2461 16.8174 13.9234 16.2439C14.4019 15.8387 14.7679 15.3228 14.9931 14.7462C14.5843 14.6406 14.1881 14.5034 13.8073 14.3375C13.6829 14.6357 13.5007 14.9099 13.2678 15.1428C12.7989 15.6116 12.163 15.875 11.5 15.875C10.837 15.875 10.2011 15.6116 9.73223 15.1428C9.26339 14.6739 9 14.038 9 13.375C9 13.2092 8.93415 13.0503 8.81694 12.9331C8.69973 12.8158 8.54076 12.75 8.375 12.75H4V9H9.25204C9.14776 8.59486 9.07442 8.17731 9.03469 7.75H4C4 7.08696 4.26339 6.45107 4.73223 5.98223C5.20107 5.51339 5.83696 5.25 6.5 5.25L9.2067 5.18534C9.30131 4.77738 9.42714 4.38138 9.58152 4Z" fill="currentColor"></path><path d="M17 0.333334C13.318 0.333334 10.3333 3.318 10.3333 7C10.3333 10.682 13.318 13.6667 17 13.6667C20.682 13.6667 23.6667 10.682 23.6667 7C23.6667 3.318 20.682 0.333334 17 0.333334ZM20.3333 7.66667H17.6667V10.3333H16.3333V7.66667H13.6667V6.33333H16.3333V3.66667H17.6667V6.33333H20.3333V7.66667Z" fill="currentColor"></path></g><defs><clipPath id="clip0_906_7883"><rect width="24" height="24" fill="white"></rect></clipPath></defs>',2),o6=[a6];function l6(e,t){return V(),pe("svg",s6,o6)}const dM=sn(r6,[["render",l6]]),c6={},u6={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d6=de("rect",{width:"24",height:"24"},null,-1),h6=de("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.3333 7C10.3333 3.318 13.318 0.333334 17 0.333334C20.682 0.333334 23.6667 3.318 23.6667 7C23.6667 10.682 20.682 13.6667 17 13.6667C13.318 13.6667 10.3333 10.682 10.3333 7ZM17.6667 7.66667H20.3333V6.33333H17.6667V3.66667H16.3333V6.33333H13.6667V7.66667H16.3333V10.3333H17.6667V7.66667ZM2 12C2 6.93506 5.79394 2.732 10.6866 2.08606C10.403 2.44989 10.1502 2.83888 9.93202 3.24912C7.66725 3.78259 5.73276 5.17312 4.48 7.06C4.69 7.07 4.89 7.07 5.06 7.07C6 7.07 7.46 6.96 7.46 6.96C7.95 6.93 8 7.64 7.52 7.7C7.52 7.7 7.03 7.76 6.49 7.78L9.76 17.53L11.3762 12.6897C11.5742 12.8854 11.7823 13.0709 11.9998 13.2452L9.46 20.62C10.27 20.86 11.12 20.99 12 20.99C13.05 20.99 14.05 20.81 14.98 20.47C14.9667 20.45 14.9533 20.4211 14.94 20.3922C14.9333 20.3778 14.9267 20.3633 14.92 20.35L12.4527 13.5828C13.3833 14.2269 14.4571 14.6787 15.6167 14.8808L16.48 17.46L17.2189 14.9971C17.5525 14.9881 17.881 14.9587 18.2032 14.9101L16.52 19.77C18.5451 18.5927 20.0306 16.6712 20.6601 14.4149C20.6921 14.2999 20.7218 14.1846 20.7492 14.0689C21.1601 13.8505 21.5496 13.5974 21.9139 13.3134C21.268 18.2061 17.0649 22 12 22C6.49 22 2 17.51 2 12ZM3.01 12C3.01 10.7 3.29 9.46 3.79 8.34L8.08 20.09C5.08 18.63 3.01 15.56 3.01 12Z",fill:"black"},null,-1),f6=[d6,h6];function p6(e,t){return V(),pe("svg",u6,f6)}const m6=sn(c6,[["render",p6]]),g6={},v6={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},_6=de("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"},null,-1),y6=[_6];function b6(e,t){return V(),pe("svg",v6,y6)}const Cu=sn(g6,[["render",b6]]),x6={},w6={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},S6=de("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"},null,-1),T6=[S6];function E6(e,t){return V(),pe("svg",w6,T6)}const I6=sn(x6,[["render",E6]]),C6={},A6={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},M6=de("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"},null,-1),k6=[M6];function P6(e,t){return V(),pe("svg",A6,k6)}const Ih=sn(C6,[["render",P6]]),D6={},L6={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},O6=de("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"},null,-1),R6=[O6];function F6(e,t){return V(),pe("svg",L6,R6)}const O_=sn(D6,[["render",F6]]),$6={},z6={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},B6=de("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5L8.25 12l7.5-7.5"},null,-1),N6=[B6];function j6(e,t){return V(),pe("svg",z6,N6)}const hM=sn($6,[["render",j6]]),U6={},V6={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},H6=de("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"},null,-1),G6=[H6];function W6(e,t){return V(),pe("svg",V6,G6)}const fM=sn(U6,[["render",W6]]),q6={},Z6={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},K6=de("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),X6=[K6];function Y6(e,t){return V(),pe("svg",Z6,X6)}const pM=sn(q6,[["render",Y6]]),J6={},Q6={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg"},eN=de("circle",{cx:"12",cy:"12",r:"9"},null,-1),tN=[eN];function nN(e,t){return V(),pe("svg",Q6,tN)}const iN=sn(J6,[["render",nN]]),rN={},sN={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},aN=de("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),oN=[aN];function lN(e,t){return V(),pe("svg",sN,oN)}const om=sn(rN,[["render",lN]]),cN={},uN={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},dN=de("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"},null,-1),hN=[dN];function fN(e,t){return V(),pe("svg",uN,hN)}const Fp=sn(cN,[["render",fN]]),pN={},mN={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},gN=de("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"},null,-1),vN=[gN];function _N(e,t){return V(),pe("svg",mN,vN)}const I1=sn(pN,[["render",_N]]),yN={},bN={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},xN=de("path",{fill:"currentColor",d:"M7 19v-2h2v2H7m4 0v-2h2v2h-2m4 0v-2h2v2h-2m-8-4v-2h2v2H7m4 0v-2h2v2h-2m4 0v-2h2v2h-2m-8-4V9h2v2H7m4 0V9h2v2h-2m4 0V9h2v2h-2M7 7V5h2v2H7m4 0V5h2v2h-2m4 0V5h2v2h-2Z"},null,-1),wN=[xN];function SN(e,t){return V(),pe("svg",bN,wN)}const mM=sn(yN,[["render",SN]]),TN={},EN={width:"9",height:"31",viewBox:"0 0 9 31",fill:"none",xmlns:"http://www.w3.org/2000/svg"},IN=de("path",{d:"M8.96268 2.86638L6.49786 0.5L4.03304 2.90298V8.47338L0 12.2597V30.5H8.96275V12.2597L9 8.43678L8.96268 2.86638ZM3.80904 26.4223H1.9418V23.182H3.80904V26.4223ZM3.80904 16.8834H1.9418V13.6431H3.80904V16.8834ZM7.24496 21.5799H5.37772V18.3396H7.24496V21.5799ZM7.24496 16.8834H5.37772V13.6431H7.24496V16.8834ZM5.639 5.85182V3.99509L6.46058 3.19412L7.28217 3.99509V5.88836L5.63893 5.88811L5.639 5.85182Z",fill:"currentColor"},null,-1),CN=[IN];function AN(e,t){return V(),pe("svg",EN,CN)}const MN=sn(TN,[["render",AN]]),kN={},PN={xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 96 960 960",width:"48",class:"w-5 h-5"},DN=de("path",{d:"M333 856V723H200v-60h193v193h-60Zm234 0V663h193v60H627v133h-60ZM200 489v-60h133V296h60v193H200Zm367 0V296h60v133h133v60H567Z"},null,-1),LN=[DN];function ON(e,t){return V(),pe("svg",PN,LN)}const RN=sn(kN,[["render",ON]]),FN={},$N={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},zN=de("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"},null,-1),BN=de("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),NN=[zN,BN];function jN(e,t){return V(),pe("svg",$N,NN)}const UN=sn(FN,[["render",jN]]),VN={},HN={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},GN=de("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"},null,-1),WN=[GN];function qN(e,t){return V(),pe("svg",HN,WN)}const ZN=sn(VN,[["render",qN]]),KN={},XN={xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 96 960 960",width:"48",class:"w-5 h-5"},YN=de("path",{d:"M200 856V663h60v133h133v60H200Zm0-367V296h193v60H260v133h-60Zm367 367v-60h133V663h60v193H567Zm133-367V356H567v-60h193v193h-60Z"},null,-1),JN=[YN];function QN(e,t){return V(),pe("svg",XN,JN)}const e8=sn(KN,[["render",QN]]),t8={},n8={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},i8=de("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"},null,-1),r8=[i8];function s8(e,t){return V(),pe("svg",n8,r8)}const C1=sn(t8,[["render",s8]]),a8={},o8={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},l8=de("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"},null,-1),c8=[l8];function u8(e,t){return V(),pe("svg",o8,c8)}const gM=sn(a8,[["render",u8]]),d8={},h8={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-6 h-6"},f8=de("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"},null,-1),p8=[f8];function m8(e,t){return V(),pe("svg",h8,p8)}const g8=sn(d8,[["render",m8]]),v8={},_8={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},y8=de("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"},null,-1),b8=[y8];function x8(e,t){return V(),pe("svg",_8,b8)}const w8=sn(v8,[["render",x8]]),S8={},T8={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},E8=de("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 103.935 2.186 2.25 2.25 0 00-3.935-2.186zm0-12.814a2.25 2.25 0 103.933-2.185 2.25 2.25 0 00-3.933 2.185z"},null,-1),I8=[E8];function C8(e,t){return V(),pe("svg",T8,I8)}const A8=sn(S8,[["render",C8]]),M8={},k8={class:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},P8=de("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),D8=de("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),L8=[P8,D8];function O8(e,t){return V(),pe("svg",k8,L8)}const No=sn(M8,[["render",O8]]),R8={},F8={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},$8=de("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.098 19.902a3.75 3.75 0 005.304 0l6.401-6.402M6.75 21A3.75 3.75 0 013 17.25V4.125C3 3.504 3.504 3 4.125 3h5.25c.621 0 1.125.504 1.125 1.125v4.072M6.75 21a3.75 3.75 0 003.75-3.75V8.197M6.75 21h13.125c.621 0 1.125-.504 1.125-1.125v-5.25c0-.621-.504-1.125-1.125-1.125h-4.072M10.5 8.197l2.88-2.88c.438-.439 1.15-.439 1.59 0l3.712 3.713c.44.44.44 1.152 0 1.59l-2.879 2.88M6.75 17.25h.008v.008H6.75v-.008z"},null,-1),z8=[$8];function B8(e,t){return V(),pe("svg",F8,z8)}const N8=sn(R8,[["render",B8]]),j8={},U8={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},V8=de("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"},null,-1),H8=[V8];function G8(e,t){return V(),pe("svg",U8,H8)}const W8=sn(j8,[["render",G8]]),q8={},Z8={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},K8=de("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z"},null,-1),X8=[K8];function Y8(e,t){return V(),pe("svg",Z8,X8)}const J8=sn(q8,[["render",Y8]]),Q8={},ej={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},tj=de("path",{"stroke-linecap":"round",d:"M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 002.25 7.5v9a2.25 2.25 0 002.25 2.25z"},null,-1),nj=[tj];function ij(e,t){return V(),pe("svg",ej,nj)}const rj=sn(Q8,[["render",ij]]),sj={},aj={class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},oj=de("path",{"fill-rule":"evenodd",d:"M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"},null,-1),lj=[oj];function cj(e,t){return V(),pe("svg",aj,lj)}const uj=sn(sj,[["render",cj]]),dj={},hj={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},fj=de("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1),pj=[fj];function mj(e,t){return V(),pe("svg",hj,pj)}const lm=sn(dj,[["render",mj]]),gj=e=>(ao("data-v-59dc0ca4"),e=e(),oo(),e),vj={class:"notification rounded-md max-w-lg mx-auto overflow-hidden relative"},_j=gj(()=>de("span",{class:"sr-only"},"Close",-1)),yj={class:"notification__icon rounded-full p-2 -mt-1"},bj={class:"flex-1"},xj={class:"notification__title text-sm font-bold uppercase pr-6"},wj={class:"notification__contents mt-2 text-sm"},Sj=rt({__name:"Notification",props:{title:{default:"Heads Up"},type:{default:"info"},isDismissable:{type:Boolean,default:!1}},emits:["dismiss"],setup(e){return(t,i)=>(V(),pe("div",vj,[t.isDismissable?(V(),pe("button",{key:0,class:"absolute top-0 right-0 p-4",onClick:i[0]||(i[0]=r=>t.$emit("dismiss"))},[_j,ye(lm)])):tt("",!0),de("div",{class:kn(["flex gap-4 p-4 border-l-8 items-start",{"notification--info border-l-blue-600":t.type==="info","notification--warning border-l-yellow-300":t.type==="warning","notification--error border-l-red-400":t.type==="danger","notification--success border-l-green-400":t.type==="success"}])},[de("div",yj,[t.type==="warning"?(V(),je(ce(uj),{key:0})):tt("",!0),t.type==="info"?(V(),je(ce(gM),{key:1})):tt("",!0),t.type==="success"?(V(),je(ce(pM),{key:2})):tt("",!0),t.type==="danger"?(V(),je(ce(om),{key:3})):tt("",!0)]),de("div",bj,[de("h3",xj,xt(t.title),1),de("div",wj,[En(t.$slots,"default",{},void 0,!0)])])],2)]))}});const cm=sn(Sj,[["__scopeId","data-v-59dc0ca4"]]),Tj=de("p",null,"This site requires you to sign in to search or access assets.",-1),Ej={class:"flex gap-2 mt-2"},vM=rt({__name:"SignInRequiredNotice",setup(e){const t=Ei(),i=Le(()=>t.instance),r=YA(),s=Le(()=>{var d;const u=((d=r.value)==null?void 0:d.href)??si.instance.base.url;return encodeURIComponent(u)});return(u,d)=>(V(),je(cm,{type:"warning",title:"Sign In Required",class:"my-4"},{default:Ce(()=>[Tj,de("div",Ej,[ye(ai,{to:`/loginManager/localLogin/?redirect=${u.$route.path}`,variant:"tertiary"},{default:Ce(()=>[Mt(xt(i.value.useCentralAuth?"Guest":"")+" Login ",1)]),_:1},8,["to"]),i.value.useCentralAuth?(V(),je(ai,{key:0,href:`${ce(si).instance.base.url}/loginManager/remoteLogin/?redirect=${s.value}`,variant:"tertiary"},{default:Ce(()=>[Mt(xt(i.value.centralAuthLabel)+" Login ",1)]),_:1},8,["href"])):tt("",!0)])]),_:1}))}}),Ij={key:0,class:"fixed inset-0 z-40 bg-transparent-black-700 flex items-center justify-center"},Cj={class:"mt-1"},Aj=rt({__name:"ErrorModal",setup(e){const t=si.instance.base.url,i=sm(),r=Ei(),s=Le(()=>i.error),u=Le(()=>s.value instanceof Zd?s.value.statusCode===0?"Connection Error":`Error: ${s.value.statusCode}`:"Error"),d=Le(()=>!r.isLoggedIn&&s.value instanceof Zd&&s.value.statusCode===401),l={0:"There was a problem connecting to the server. If the problem persists, please contact support.",401:"You do not have permission to access this.",403:"You do not have permission to access this.",404:"We couldn't find this. Please check your link and try again.",400:"There was a problem with your request. Please check your input and try again.",500:"There was a problem on our end. Please contact support if the problem persists."},m=Le(()=>{var x;if(!(s.value instanceof Zd))return((x=s.value)==null?void 0:x.message)||"An unknown error occurred.";const g=s.value.statusCode;return g in l?l[g]:g>=400&&g<500?l[400]:g>=500&&g<600?l[500]:s.value.message});return(g,x)=>(V(),pe("div",null,[ye(_r,{name:"fade"},{default:Ce(()=>[s.value?(V(),pe("div",Ij,[d.value?(V(),je(vM,{key:0})):(V(),je(cm,{key:1,title:u.value,message:s.value.name,type:"danger",isDismissable:!0,class:"w-full max-w-md border-none max-h-[80vh] !overflow-auto",onDismiss:x[0]||(x[0]=w=>ce(i).clearError())},{default:Ce(()=>[de("p",null,xt(m.value),1),de("div",Cj,[ye(ai,{href:ce(t),variant:"tertiary"},{default:Ce(()=>[Mt(" Go Home ")]),_:1},8,["href"])])]),_:1},8,["title","message"]))])):tt("",!0)]),_:1})]))}}),Mj=["href"],os=rt({__name:"Link",props:{to:{default:void 0},href:{default:"#"}},setup(e){return(t,i)=>t.to?(V(),je(ce(sc),{key:0,to:t.to},{default:Ce(()=>[En(t.$slots,"default")]),_:3},8,["to"])):(V(),pe("a",{key:1,href:t.href},[En(t.$slots,"default")],8,Mj))}}),kj=de("span",{class:"sr-only"},"Close",-1),Pj={key:0,class:"mt-1 flex justify-end"},Dj=rt({__name:"Toast",props:{toast:{}},emits:["dismiss"],setup(e,{emit:t}){const i=e,r=Re(0),s=Re(!1),u=i.toast.duration??3e3,d=Le(()=>r.value/u*100);function l(){s.value=!1;let m=Date.now();bz(()=>{const g=Date.now()-m;s.value||(r.value+=g),r.value>=u&&t("dismiss",i.toast.id),m=Date.now()})}return Fn(()=>{l()}),(m,g)=>(V(),pe("div",{key:m.toast.id,class:"pointer-events-auto shadow-md bg-neutral-900 text-neutral-200 p-4 rounded-md relative overflow-hidden",onMouseenter:g[2]||(g[2]=x=>s.value=!0),onMouseleave:g[3]||(g[3]=x=>s.value=!1)},[de("button",{class:"float-right",onClick:g[0]||(g[0]=x=>m.$emit("dismiss",m.toast.id))},[kj,ye(ce(lm))]),de("div",{class:"timer absolute top-0 left-0 w-full h-1 bg-neutral-600 transform",style:wu({transform:`translateX(-${d.value}%)`})},null,4),de("p",null,xt(m.toast.message),1),m.toast.url?(V(),pe("p",Pj,[ye(os,{to:m.toast.url,class:"uppercase text-xs py-1 px-2 bg-transparent-white-200 text-neutral-400 hover:no-underline hover:text-neutral-900 hover:bg-neutral-200 rounded-md",onClick:g[1]||(g[1]=x=>m.$emit("dismiss",m.toast.id))},{default:Ce(()=>[Mt(xt(m.toast.urlText||"View"),1)]),_:1},8,["to"])])):tt("",!0)],32))}}),Lj={class:"notification-root fixed top-12 right-0 z-50 p-4 w-full max-w-sm pointer-events-none flex flex-col items-end gap-1"},Oj=rt({__name:"ToastRoot",setup(e){const t=Nd();return(i,r)=>(V(),pe("div",Lj,[ye(a1,{name:"fade"},{default:Ce(()=>[(V(!0),pe(Nt,null,$n(ce(t).toasts,s=>(V(),je(Dj,{key:s.id,toast:s,class:"w-full pointer-events-auto shadow-md",onDismiss:u=>ce(t).dismissToast(s.id)},null,8,["toast","onDismiss"]))),128))]),_:1})]))}}),Rj=rt({__name:"App",setup(e){const t=Ei(),i=Da();return Fn(()=>{console.log("app mounted"),t.init(),i.init(),QA()}),(r,s)=>{const u=y_("RouterView");return V(),pe("div",null,[(V(),je(tm,{to:"body"},[ye(Aj),ye(Oj)])),ce(t).isReady&&ce(i).isReady?(V(),je(u,{key:0})):tt("",!0)])}}});function Fj({store:e}){const t=VT(e.$state);e.$reset=()=>e.$patch(VT(t))}const $j=de("span",{class:"sr-only"},"Close",-1),_M=rt({__name:"XButton",emits:["click"],setup(e){return(t,i)=>(V(),pe("button",{class:"x-button inline-flex bg-transparent-black-50 text-neutral-700 w-8 h-8 rounded-full leading-none items-center justify-center transition ease-in-out hover:bg-transparent-black-900 hover:text-white",onClick:i[0]||(i[0]=r=>t.$emit("click"))},[ye(lm),$j]))}}),zj={},Bj={width:"41",height:"25",viewBox:"0 0 41 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"umn-logo text-umn-maroon"},Nj=de("path",{d:"M38.4331 18.4558L31.2458 6.55112H33.229V0.343018H21.2666V6.54412H23.2497L20.5 11.0916L17.7573 6.54412H19.7334V0.343018H7.77101V6.54412H9.74717L2.5669 18.4558H0V24.6569H12.2015V18.4558H10.0074L13.7487 12.2547L15.1974 14.6581H13.805V20.8592H27.181V14.6581H25.7885L27.2443 12.2547L30.9856 18.4558H28.7985V24.6569H41V18.4558H38.4331Z",fill:"currentColor"},null,-1),jj=[Nj];function Uj(e,t){return V(),pe("svg",Bj,jj)}const Vj=sn(zj,[["render",Uj]]);function aa(e,t,...i){if(e in t){let s=t[e];return typeof s=="function"?s(...i):s}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,aa),r}var mc=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(mc||{}),Jl=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Jl||{});function Pr({visible:e=!0,features:t=0,ourProps:i,theirProps:r,...s}){var u;let d=bM(r,i),l=Object.assign(s,{props:d});if(e||t&2&&d.static)return A0(l);if(t&1){let m=(u=d.unmount)==null||u?0:1;return aa(m,{[0](){return null},[1](){return A0({...s,props:{...d,hidden:!0,style:{display:"none"}}})}})}return A0(l)}function A0({props:e,attrs:t,slots:i,slot:r,name:s}){var u,d;let{as:l,...m}=A1(e,["unmount","static"]),g=(u=i.default)==null?void 0:u.call(i,r),x={};if(r){let w=!1,I=[];for(let[C,A]of Object.entries(r))typeof A=="boolean"&&(w=!0),A===!0&&I.push(C);w&&(x["data-headlessui-state"]=I.join(" "))}if(l==="template"){if(g=yM(g??[]),Object.keys(m).length>0||Object.keys(t).length>0){let[w,...I]=g??[];if(!Gj(w)||I.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${s} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(m).concat(Object.keys(t)).map(L=>L.trim()).filter((L,$,F)=>F.indexOf(L)===$).sort((L,$)=>L.localeCompare($)).map(L=>`  - ${L}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(L=>`  - ${L}`).join(`
`)].join(`
`));let C=bM((d=w.props)!=null?d:{},m),A=ra(w,C);for(let L in C)L.startsWith("on")&&(A.props||(A.props={}),A.props[L]=C[L]);return A}return Array.isArray(g)&&g.length===1?g[0]:g}return ni(l,Object.assign({},m,x),{default:()=>g})}function yM(e){return e.flatMap(t=>t.type===Nt?yM(t.children):[t])}function bM(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},i={};for(let r of e)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(i[s]!=null||(i[s]=[]),i[s].push(r[s])):t[s]=r[s];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(i).map(r=>[r,void 0])));for(let r in i)Object.assign(t,{[r](s,...u){let d=i[r];for(let l of d){if(s instanceof Event&&s.defaultPrevented)return;l(s,...u)}}});return t}function Hj(e){let t=Object.assign({},e);for(let i in t)t[i]===void 0&&delete t[i];return t}function A1(e,t=[]){let i=Object.assign({},e);for(let r of t)r in i&&delete i[r];return i}function Gj(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}let Wj=0;function qj(){return++Wj}function jo(){return qj()}var Hi=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Hi||{});function Zj(e){throw new Error("Unexpected object: "+e)}var Qs=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(Qs||{});function Kj(e,t){let i=t.resolveItems();if(i.length<=0)return null;let r=t.resolveActiveIndex(),s=r??-1,u=(()=>{switch(e.focus){case 0:return i.findIndex(d=>!t.resolveDisabled(d));case 1:{let d=i.slice().reverse().findIndex((l,m,g)=>s!==-1&&g.length-m-1>=s?!1:!t.resolveDisabled(l));return d===-1?d:i.length-1-d}case 2:return i.findIndex((d,l)=>l<=s?!1:!t.resolveDisabled(d));case 3:{let d=i.slice().reverse().findIndex(l=>!t.resolveDisabled(l));return d===-1?d:i.length-1-d}case 4:return i.findIndex(d=>t.resolveId(d)===e.id);case 5:return null;default:Zj(e)}})();return u===-1?r:u}function Wn(e){var t;return e==null||e.value==null?null:(t=e.value.$el)!=null?t:e.value}let xM=Symbol("Context");var vr=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(vr||{});function Xj(){return um()!==null}function um(){return wi(xM,null)}function M1(e){Oi(xM,e)}function TE(e,t){if(e)return e;let i=t??"button";if(typeof i=="string"&&i.toLowerCase()==="button")return"button"}function k1(e,t){let i=Re(TE(e.value.type,e.value.as));return Fn(()=>{i.value=TE(e.value.type,e.value.as)}),Mr(()=>{var r;i.value||Wn(t)&&Wn(t)instanceof HTMLButtonElement&&!((r=Wn(t))!=null&&r.hasAttribute("type"))&&(i.value="button")}),i}var Yj=Object.defineProperty,Jj=(e,t,i)=>t in e?Yj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,EE=(e,t,i)=>(Jj(e,typeof t!="symbol"?t+"":t,i),i);let Qj=class{constructor(){EE(this,"current",this.detect()),EE(this,"currentId",0)}set(t){this.current!==t&&(this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},dm=new Qj;function Au(e){if(dm.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(e!=null&&e.hasOwnProperty("value")){let t=Wn(e);if(t)return t.ownerDocument}return document}function eU({container:e,accept:t,walk:i,enabled:r}){Mr(()=>{let s=e.value;if(!s||r!==void 0&&!r.value)return;let u=Au(e);if(!u)return;let d=Object.assign(m=>t(m),{acceptNode:t}),l=u.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,d,!1);for(;l.nextNode();)i(l.currentNode)})}let qb=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var So=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(So||{}),wM=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(wM||{}),tU=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(tU||{});function SM(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(qb)).sort((t,i)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(i.tabIndex||Number.MAX_SAFE_INTEGER)))}var P1=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(P1||{});function D1(e,t=0){var i;return e===((i=Au(e))==null?void 0:i.body)?!1:aa(t,{[0](){return e.matches(qb)},[1](){let r=e;for(;r!==null;){if(r.matches(qb))return!0;r=r.parentElement}return!1}})}function TM(e){let t=Au(e);Ar(()=>{t&&!D1(t.activeElement,0)&&ac(e)})}var nU=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(nU||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function ac(e){e==null||e.focus({preventScroll:!0})}let iU=["textarea","input"].join(",");function rU(e){var t,i;return(i=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,iU))!=null?i:!1}function EM(e,t=i=>i){return e.slice().sort((i,r)=>{let s=t(i),u=t(r);if(s===null||u===null)return 0;let d=s.compareDocumentPosition(u);return d&Node.DOCUMENT_POSITION_FOLLOWING?-1:d&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function sU(e,t){return pp(SM(),t,{relativeTo:e})}function pp(e,t,{sorted:i=!0,relativeTo:r=null,skipElements:s=[]}={}){var u;let d=(u=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e==null?void 0:e.ownerDocument)!=null?u:document,l=Array.isArray(e)?i?EM(e):e:SM(e);s.length>0&&l.length>1&&(l=l.filter(A=>!s.includes(A))),r=r??d.activeElement;let m=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),g=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,l.indexOf(r))-1;if(t&4)return Math.max(0,l.indexOf(r))+1;if(t&8)return l.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),x=t&32?{preventScroll:!0}:{},w=0,I=l.length,C;do{if(w>=I||w+I<=0)return 0;let A=g+w;if(t&16)A=(A+I)%I;else{if(A<0)return 3;if(A>=I)return 1}C=l[A],C==null||C.focus(x),w+=m}while(C!==d.activeElement);return t&6&&rU(C)&&C.select(),2}function M0(e,t,i){dm.isServer||Mr(r=>{document.addEventListener(e,t,i),r(()=>document.removeEventListener(e,t,i))})}function IM(e,t,i=Le(()=>!0)){function r(u,d){if(!i.value||u.defaultPrevented)return;let l=d(u);if(l===null||!l.getRootNode().contains(l))return;let m=function g(x){return typeof x=="function"?g(x()):Array.isArray(x)||x instanceof Set?x:[x]}(e);for(let g of m){if(g===null)continue;let x=g instanceof HTMLElement?g:Wn(g);if(x!=null&&x.contains(l)||u.composed&&u.composedPath().includes(x))return}return!D1(l,P1.Loose)&&l.tabIndex!==-1&&u.preventDefault(),t(u,l)}let s=Re(null);M0("mousedown",u=>{var d,l;i.value&&(s.value=((l=(d=u.composedPath)==null?void 0:d.call(u))==null?void 0:l[0])||u.target)},!0),M0("click",u=>{s.value&&(r(u,()=>s.value),s.value=null)},!0),M0("blur",u=>r(u,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}var $p=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))($p||{});let Fv=rt({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(e,{slots:t,attrs:i}){return()=>{let{features:r,...s}=e,u={"aria-hidden":(r&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Pr({ourProps:u,theirProps:s,slot:{},attrs:i,slots:t,name:"Hidden"})}}});function aU(e){var t;let i=(t=e==null?void 0:e.form)!=null?t:e.closest("form");if(i){for(let r of i.elements)if(r.tagName==="INPUT"&&r.type==="submit"||r.tagName==="BUTTON"&&r.type==="submit"||r.nodeName==="INPUT"&&r.type==="image"){r.click();return}}}function oU(e,t,i){let r=Re(i==null?void 0:i.value),s=Le(()=>e.value!==void 0);return[Le(()=>s.value?e.value:r.value),function(u){return s.value||(r.value=u),t==null?void 0:t(u)}]}function IE(e){return[e.screenX,e.screenY]}function lU(){let e=Re([-1,-1]);return{wasMoved(t){let i=IE(t);return e.value[0]===i[0]&&e.value[1]===i[1]?!1:(e.value=i,!0)},update(t){e.value=IE(t)}}}function cU(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function uU(e,t,i){dm.isServer||Mr(r=>{window.addEventListener(e,t,i),r(()=>window.removeEventListener(e,t,i))})}var Xf=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Xf||{});function dU(){let e=Re(0);return uU("keydown",t=>{t.key==="Tab"&&(e.value=t.shiftKey?1:0)}),e}function CM(e,t,i,r){dm.isServer||Mr(s=>{e=e??window,e.addEventListener(t,i,r),s(()=>e.removeEventListener(t,i,r))})}function AM(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function hU(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}function MM(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let i of e.value){let r=Wn(i);r instanceof HTMLElement&&t.add(r)}return t}var kM=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(kM||{});let Ff=Object.assign(rt({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:Re(new Set)}},inheritAttrs:!1,setup(e,{attrs:t,slots:i,expose:r}){let s=Re(null);r({el:s,$el:s});let u=Le(()=>Au(s)),d=Re(!1);Fn(()=>d.value=!0),Wi(()=>d.value=!1),pU({ownerDocument:u},Le(()=>d.value&&!!(e.features&16)));let l=mU({ownerDocument:u,container:s,initialFocus:Le(()=>e.initialFocus)},Le(()=>d.value&&!!(e.features&2)));gU({ownerDocument:u,container:s,containers:e.containers,previousActiveElement:l},Le(()=>d.value&&!!(e.features&8)));let m=dU();function g(C){let A=Wn(s);A&&(L=>L())(()=>{aa(m.value,{[Xf.Forwards]:()=>{pp(A,So.First,{skipElements:[C.relatedTarget]})},[Xf.Backwards]:()=>{pp(A,So.Last,{skipElements:[C.relatedTarget]})}})})}let x=Re(!1);function w(C){C.key==="Tab"&&(x.value=!0,requestAnimationFrame(()=>{x.value=!1}))}function I(C){if(!d.value)return;let A=MM(e.containers);Wn(s)instanceof HTMLElement&&A.add(Wn(s));let L=C.relatedTarget;L instanceof HTMLElement&&L.dataset.headlessuiFocusGuard!=="true"&&(PM(A,L)||(x.value?pp(Wn(s),aa(m.value,{[Xf.Forwards]:()=>So.Next,[Xf.Backwards]:()=>So.Previous})|So.WrapAround,{relativeTo:C.target}):C.target instanceof HTMLElement&&ac(C.target)))}return()=>{let C={},A={ref:s,onKeydown:w,onFocusout:I},{features:L,initialFocus:$,containers:F,...z}=e;return ni(Nt,[!!(L&4)&&ni(Fv,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:g,features:$p.Focusable}),Pr({ourProps:A,theirProps:{...t,...z},slot:C,attrs:t,slots:i,name:"FocusTrap"}),!!(L&4)&&ni(Fv,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:g,features:$p.Focusable})])}}}),{features:kM}),su=[];hU(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&su[0]!==t.target&&(su.unshift(t.target),su=su.filter(i=>i!=null&&i.isConnected),su.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function fU(e){let t=Re(su.slice());return fn([e],([i],[r])=>{r===!0&&i===!1?AM(()=>{t.value.splice(0)}):r===!1&&i===!0&&(t.value=su.slice())},{flush:"post"}),()=>{var i;return(i=t.value.find(r=>r!=null&&r.isConnected))!=null?i:null}}function pU({ownerDocument:e},t){let i=fU(t);Fn(()=>{Mr(()=>{var r,s;t.value||((r=e.value)==null?void 0:r.activeElement)===((s=e.value)==null?void 0:s.body)&&ac(i())},{flush:"post"})}),Wi(()=>{ac(i())})}function mU({ownerDocument:e,container:t,initialFocus:i},r){let s=Re(null),u=Re(!1);return Fn(()=>u.value=!0),Wi(()=>u.value=!1),Fn(()=>{fn([t,i,r],(d,l)=>{if(d.every((g,x)=>(l==null?void 0:l[x])===g)||!r.value)return;let m=Wn(t);m&&AM(()=>{var g,x;if(!u.value)return;let w=Wn(i),I=(g=e.value)==null?void 0:g.activeElement;if(w){if(w===I){s.value=I;return}}else if(m.contains(I)){s.value=I;return}w?ac(w):pp(m,So.First|So.NoScroll)===wM.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),s.value=(x=e.value)==null?void 0:x.activeElement})},{immediate:!0,flush:"post"})}),s}function gU({ownerDocument:e,container:t,containers:i,previousActiveElement:r},s){var u;CM((u=e.value)==null?void 0:u.defaultView,"focus",d=>{if(!s.value)return;let l=MM(i);Wn(t)instanceof HTMLElement&&l.add(Wn(t));let m=r.value;if(!m)return;let g=d.target;g&&g instanceof HTMLElement?PM(l,g)?(r.value=g,ac(g)):(d.preventDefault(),d.stopPropagation(),ac(m)):ac(r.value)},!0)}function PM(e,t){for(let i of e)if(i.contains(t))return!0;return!1}let k0=new Map,$f=new Map;function CE(e,t=Re(!0)){Mr(i=>{var r;if(!t.value)return;let s=Wn(e);if(!s)return;i(function(){var d;if(!s)return;let l=(d=$f.get(s))!=null?d:1;if(l===1?$f.delete(s):$f.set(s,l-1),l!==1)return;let m=k0.get(s);m&&(m["aria-hidden"]===null?s.removeAttribute("aria-hidden"):s.setAttribute("aria-hidden",m["aria-hidden"]),s.inert=m.inert,k0.delete(s))});let u=(r=$f.get(s))!=null?r:0;$f.set(s,u+1),u===0&&(k0.set(s,{"aria-hidden":s.getAttribute("aria-hidden"),inert:s.inert}),s.setAttribute("aria-hidden","true"),s.inert=!0)})}let DM=Symbol("ForcePortalRootContext");function vU(){return wi(DM,!1)}let AE=rt({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup(e,{slots:t,attrs:i}){return Oi(DM,e.force),()=>{let{force:r,...s}=e;return Pr({theirProps:s,ourProps:{},slot:{},slots:t,attrs:i,name:"ForcePortalRoot"})}}});function _U(e){let t=Au(e);if(!t){if(e===null)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${e}`)}let i=t.getElementById("headlessui-portal-root");if(i)return i;let r=t.createElement("div");return r.setAttribute("id","headlessui-portal-root"),t.body.appendChild(r)}let LM=rt({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:i}){let r=Re(null),s=Le(()=>Au(r)),u=vU(),d=wi(OM,null),l=Re(u===!0||d==null?_U(r.value):d.resolveTarget());return Mr(()=>{u||d!=null&&(l.value=d.resolveTarget())}),Wi(()=>{var m,g;let x=(m=s.value)==null?void 0:m.getElementById("headlessui-portal-root");x&&l.value===x&&l.value.children.length<=0&&((g=l.value.parentElement)==null||g.removeChild(l.value))}),()=>{if(l.value===null)return null;let m={ref:r,"data-headlessui-portal":""};return ni(tm,{to:l.value},Pr({ourProps:m,theirProps:e,slot:{},attrs:i,slots:t,name:"Portal"}))}}}),OM=Symbol("PortalGroupContext"),yU=rt({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(e,{attrs:t,slots:i}){let r=Nr({resolveTarget(){return e.target}});return Oi(OM,r),()=>{let{target:s,...u}=e;return Pr({theirProps:u,ourProps:{},slot:{},attrs:t,slots:i,name:"PortalGroup"})}}}),RM=Symbol("StackContext");var Zb=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Zb||{});function bU(){return wi(RM,()=>{})}function xU({type:e,enabled:t,element:i,onUpdate:r}){let s=bU();function u(...d){r==null||r(...d),s(...d)}Fn(()=>{fn(t,(d,l)=>{d?u(0,e,i):l===!0&&u(1,e,i)},{immediate:!0,flush:"sync"})}),Wi(()=>{t.value&&u(1,e,i)}),Oi(RM,u)}let wU=Symbol("DescriptionContext");function FM({slot:e=Re({}),name:t="Description",props:i={}}={}){let r=Re([]);function s(u){return r.value.push(u),()=>{let d=r.value.indexOf(u);d!==-1&&r.value.splice(d,1)}}return Oi(wU,{register:s,slot:e,name:t,props:i}),Le(()=>r.value.length>0?r.value.join(" "):void 0)}function SU(e){let t=bh(e.getSnapshot());return Wi(e.subscribe(()=>{t.value=e.getSnapshot()})),t}function R_(){let e=[],t={addEventListener(i,r,s,u){return i.addEventListener(r,s,u),t.add(()=>i.removeEventListener(r,s,u))},requestAnimationFrame(...i){let r=requestAnimationFrame(...i);t.add(()=>cancelAnimationFrame(r))},nextFrame(...i){t.requestAnimationFrame(()=>{t.requestAnimationFrame(...i)})},setTimeout(...i){let r=setTimeout(...i);t.add(()=>clearTimeout(r))},style(i,r,s){let u=i.style.getPropertyValue(r);return Object.assign(i.style,{[r]:s}),this.add(()=>{Object.assign(i.style,{[r]:u})})},group(i){let r=R_();return i(r),this.add(()=>r.dispose())},add(i){return e.push(i),()=>{let r=e.indexOf(i);if(r>=0)for(let s of e.splice(r,1))s()}},dispose(){for(let i of e.splice(0))i()}};return t}function TU(e,t){let i=e(),r=new Set;return{getSnapshot(){return i},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...u){let d=t[s].call(i,...u);d&&(i=d,r.forEach(l=>l()))}}}function EU(){let e;return{before({doc:t}){var i;let r=t.documentElement;e=((i=t.defaultView)!=null?i:window).innerWidth-r.clientWidth},after({doc:t,d:i}){let r=t.documentElement,s=r.clientWidth-r.offsetWidth,u=e-s;i.style(r,"paddingRight",`${u}px`)}}}function IU(){if(!cU())return{};let e;return{before(){e=window.pageYOffset},after({doc:t,d:i,meta:r}){function s(d){return r.containers.flatMap(l=>l()).some(l=>l.contains(d))}i.style(t.body,"marginTop",`-${e}px`),window.scrollTo(0,0);let u=null;i.addEventListener(t,"click",d=>{if(d.target instanceof HTMLElement)try{let l=d.target.closest("a");if(!l)return;let{hash:m}=new URL(l.href),g=t.querySelector(m);g&&!s(g)&&(u=g)}catch{}},!0),i.addEventListener(t,"touchmove",d=>{d.target instanceof HTMLElement&&!s(d.target)&&d.preventDefault()},{passive:!1}),i.add(()=>{window.scrollTo(0,window.pageYOffset+e),u&&u.isConnected&&(u.scrollIntoView({block:"nearest"}),u=null)})}}}function CU(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function AU(e){let t={};for(let i of e)Object.assign(t,i(t));return t}let lu=TU(()=>new Map,{PUSH(e,t){var i;let r=(i=this.get(e))!=null?i:{doc:e,count:0,d:R_(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let i=this.get(e);return i&&(i.count--,i.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:i}){let r={doc:e,d:t,meta:AU(i)},s=[IU(),EU(),CU()];s.forEach(({before:u})=>u==null?void 0:u(r)),s.forEach(({after:u})=>u==null?void 0:u(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});lu.subscribe(()=>{let e=lu.getSnapshot(),t=new Map;for(let[i]of e)t.set(i,i.documentElement.style.overflow);for(let i of e.values()){let r=t.get(i.doc)==="hidden",s=i.count!==0;(s&&!r||!s&&r)&&lu.dispatch(i.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",i),i.count===0&&lu.dispatch("TEARDOWN",i)}});function MU(e,t,i){let r=SU(lu),s=Le(()=>{let u=e.value?r.value.get(e.value):void 0;return u?u.count>0:!1});return fn([e,t],([u,d],[l],m)=>{if(!u||!d)return;lu.dispatch("PUSH",u,i);let g=!1;m(()=>{g||(lu.dispatch("POP",l??u,i),g=!0)})},{immediate:!0}),s}var kU=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(kU||{});let Kb=Symbol("DialogContext");function $M(e){let t=wi(Kb,null);if(t===null){let i=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,$M),i}return t}let zg="DC8F892D-2EBD-447C-A4C8-A03058436FF4",PU=rt({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:zg},initialFocus:{type:Object,default:null},id:{type:String,default:()=>`headlessui-dialog-${jo()}`}},emits:{close:e=>!0},setup(e,{emit:t,attrs:i,slots:r,expose:s}){var u;let d=Re(!1);Fn(()=>{d.value=!0});let l=Re(0),m=um(),g=Le(()=>e.open===zg&&m!==null?(m.value&vr.Open)===vr.Open:e.open),x=Re(null),w=Re(null),I=Le(()=>Au(x));if(s({el:x,$el:x}),!(e.open!==zg||m!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof g.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${g.value===zg?void 0:e.open}`);let C=Le(()=>d.value&&g.value?0:1),A=Le(()=>C.value===0),L=Le(()=>l.value>1),$=wi(Kb,null)!==null,F=Le(()=>L.value?"parent":"leaf"),z=Le(()=>m!==null?(m.value&vr.Closing)===vr.Closing:!1),ee=Le(()=>$||z.value?!1:A.value),H=Le(()=>{var ne,Ee,Ie;return(Ie=Array.from((Ee=(ne=I.value)==null?void 0:ne.querySelectorAll("body > *"))!=null?Ee:[]).find(Xe=>Xe.id==="headlessui-portal-root"?!1:Xe.contains(Wn(w))&&Xe instanceof HTMLElement))!=null?Ie:null});CE(H,ee);let Q=Le(()=>L.value?!0:A.value),ae=Le(()=>{var ne,Ee,Ie;return(Ie=Array.from((Ee=(ne=I.value)==null?void 0:ne.querySelectorAll("[data-headlessui-portal]"))!=null?Ee:[]).find(Xe=>Xe.contains(Wn(w))&&Xe instanceof HTMLElement))!=null?Ie:null});CE(ae,Q),xU({type:"Dialog",enabled:Le(()=>C.value===0),element:x,onUpdate:(ne,Ee)=>{if(Ee==="Dialog")return aa(ne,{[Zb.Add]:()=>l.value+=1,[Zb.Remove]:()=>l.value-=1})}});let be=FM({name:"DialogDescription",slot:Le(()=>({open:g.value}))}),te=Re(null),G={titleId:te,panelRef:Re(null),dialogState:C,setTitleId(ne){te.value!==ne&&(te.value=ne)},close(){t("close",!1)}};Oi(Kb,G);function U(){var ne,Ee,Ie;return[...Array.from((Ee=(ne=I.value)==null?void 0:ne.querySelectorAll("html > *, body > *, [data-headlessui-portal]"))!=null?Ee:[]).filter(Xe=>!(Xe===document.body||Xe===document.head||!(Xe instanceof HTMLElement)||Xe.contains(Wn(w))||G.panelRef.value&&Xe.contains(G.panelRef.value))),(Ie=G.panelRef.value)!=null?Ie:x.value]}let B=Le(()=>!(!A.value||L.value));IM(()=>U(),(ne,Ee)=>{G.close(),Ar(()=>Ee==null?void 0:Ee.focus())},B);let ie=Le(()=>!(L.value||C.value!==0));CM((u=I.value)==null?void 0:u.defaultView,"keydown",ne=>{ie.value&&(ne.defaultPrevented||ne.key===Hi.Escape&&(ne.preventDefault(),ne.stopPropagation(),G.close()))});let X=Le(()=>!(z.value||C.value!==0||$));return MU(I,X,ne=>{var Ee;return{containers:[...(Ee=ne.containers)!=null?Ee:[],U]}}),Mr(ne=>{if(C.value!==0)return;let Ee=Wn(x);if(!Ee)return;let Ie=new ResizeObserver(Xe=>{for(let lt of Xe){let st=lt.target.getBoundingClientRect();st.x===0&&st.y===0&&st.width===0&&st.height===0&&G.close()}});Ie.observe(Ee),ne(()=>Ie.disconnect())}),()=>{let{id:ne,open:Ee,initialFocus:Ie,...Xe}=e,lt={...i,ref:x,id:ne,role:"dialog","aria-modal":C.value===0?!0:void 0,"aria-labelledby":te.value,"aria-describedby":be.value},st={open:C.value===0};return ni(AE,{force:!0},()=>[ni(LM,()=>ni(yU,{target:x.value},()=>ni(AE,{force:!1},()=>ni(Ff,{initialFocus:Ie,containers:U,features:A.value?aa(F.value,{parent:Ff.features.RestoreFocus,leaf:Ff.features.All&~Ff.features.FocusLock}):Ff.features.None},()=>Pr({ourProps:lt,theirProps:Xe,slot:st,attrs:i,slots:r,visible:C.value===0,features:mc.RenderStrategy|mc.Static,name:"Dialog"}))))),ni(Fv,{features:$p.Hidden,ref:w})])}}}),DU=rt({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:()=>`headlessui-dialog-panel-${jo()}`}},setup(e,{attrs:t,slots:i,expose:r}){let s=$M("DialogPanel");r({el:s.panelRef,$el:s.panelRef});function u(d){d.stopPropagation()}return()=>{let{id:d,...l}=e,m={id:d,ref:s.panelRef,onClick:u};return Pr({ourProps:m,theirProps:l,slot:{open:s.dialogState.value===0},attrs:t,slots:i,name:"DialogPanel"})}}});var LU=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(LU||{});let zM=Symbol("DisclosureContext");function L1(e){let t=wi(zM,null);if(t===null){let i=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,L1),i}return t}let BM=Symbol("DisclosurePanelContext");function OU(){return wi(BM,null)}let RU=rt({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(e,{slots:t,attrs:i}){let r=Re(e.defaultOpen?0:1),s=Re(null),u=Re(null),d={buttonId:Re(null),panelId:Re(null),disclosureState:r,panel:s,button:u,toggleDisclosure(){r.value=aa(r.value,{[0]:1,[1]:0})},closeDisclosure(){r.value!==1&&(r.value=1)},close(l){d.closeDisclosure();let m=(()=>l?l instanceof HTMLElement?l:l.value instanceof HTMLElement?Wn(l):Wn(d.button):Wn(d.button))();m==null||m.focus()}};return Oi(zM,d),M1(Le(()=>aa(r.value,{[0]:vr.Open,[1]:vr.Closed}))),()=>{let{defaultOpen:l,...m}=e,g={open:r.value===0,close:d.close};return Pr({theirProps:m,ourProps:{},slot:g,slots:t,attrs:i,name:"Disclosure"})}}}),FU=rt({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-disclosure-button-${jo()}`}},setup(e,{attrs:t,slots:i,expose:r}){let s=L1("DisclosureButton");Fn(()=>{s.buttonId.value=e.id}),Wi(()=>{s.buttonId.value=null});let u=OU(),d=Le(()=>u===null?!1:u.value===s.panelId.value),l=Re(null);r({el:l,$el:l}),d.value||Mr(()=>{s.button.value=l.value});let m=k1(Le(()=>({as:e.as,type:t.type})),l);function g(){var I;e.disabled||(d.value?(s.toggleDisclosure(),(I=Wn(s.button))==null||I.focus()):s.toggleDisclosure())}function x(I){var C;if(!e.disabled)if(d.value)switch(I.key){case Hi.Space:case Hi.Enter:I.preventDefault(),I.stopPropagation(),s.toggleDisclosure(),(C=Wn(s.button))==null||C.focus();break}else switch(I.key){case Hi.Space:case Hi.Enter:I.preventDefault(),I.stopPropagation(),s.toggleDisclosure();break}}function w(I){switch(I.key){case Hi.Space:I.preventDefault();break}}return()=>{let I={open:s.disclosureState.value===0},{id:C,...A}=e,L=d.value?{ref:l,type:m.value,onClick:g,onKeydown:x}:{id:C,ref:l,type:m.value,"aria-expanded":e.disabled?void 0:s.disclosureState.value===0,"aria-controls":Wn(s.panel)?s.panelId.value:void 0,disabled:e.disabled?!0:void 0,onClick:g,onKeydown:x,onKeyup:w};return Pr({ourProps:L,theirProps:A,slot:I,attrs:t,slots:i,name:"DisclosureButton"})}}}),$U=rt({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-disclosure-panel-${jo()}`}},setup(e,{attrs:t,slots:i,expose:r}){let s=L1("DisclosurePanel");Fn(()=>{s.panelId.value=e.id}),Wi(()=>{s.panelId.value=null}),r({el:s.panel,$el:s.panel}),Oi(BM,s.panelId);let u=um(),d=Le(()=>u!==null?(u.value&vr.Open)===vr.Open:s.disclosureState.value===0);return()=>{let l={open:s.disclosureState.value===0,close:s.close},{id:m,...g}=e,x={id:m,ref:s.panel};return Pr({ourProps:x,theirProps:g,slot:l,attrs:t,slots:i,features:mc.RenderStrategy|mc.Static,visible:d.value,name:"DisclosurePanel"})}}});var zU=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(zU||{}),BU=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(BU||{});function NU(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let NM=Symbol("MenuContext");function F_(e){let t=wi(NM,null);if(t===null){let i=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,F_),i}return t}let jU=rt({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:i}){let r=Re(1),s=Re(null),u=Re(null),d=Re([]),l=Re(""),m=Re(null),g=Re(1);function x(I=C=>C){let C=m.value!==null?d.value[m.value]:null,A=EM(I(d.value.slice()),$=>Wn($.dataRef.domRef)),L=C?A.indexOf(C):null;return L===-1&&(L=null),{items:A,activeItemIndex:L}}let w={menuState:r,buttonRef:s,itemsRef:u,items:d,searchQuery:l,activeItemIndex:m,activationTrigger:g,closeMenu:()=>{r.value=1,m.value=null},openMenu:()=>r.value=0,goToItem(I,C,A){let L=x(),$=Kj(I===Qs.Specific?{focus:Qs.Specific,id:C}:{focus:I},{resolveItems:()=>L.items,resolveActiveIndex:()=>L.activeItemIndex,resolveId:F=>F.id,resolveDisabled:F=>F.dataRef.disabled});l.value="",m.value=$,g.value=A??1,d.value=L.items},search(I){let C=l.value!==""?0:1;l.value+=I.toLowerCase();let A=(m.value!==null?d.value.slice(m.value+C).concat(d.value.slice(0,m.value+C)):d.value).find($=>$.dataRef.textValue.startsWith(l.value)&&!$.dataRef.disabled),L=A?d.value.indexOf(A):-1;L===-1||L===m.value||(m.value=L,g.value=1)},clearSearch(){l.value=""},registerItem(I,C){let A=x(L=>[...L,{id:I,dataRef:C}]);d.value=A.items,m.value=A.activeItemIndex,g.value=1},unregisterItem(I){let C=x(A=>{let L=A.findIndex($=>$.id===I);return L!==-1&&A.splice(L,1),A});d.value=C.items,m.value=C.activeItemIndex,g.value=1}};return IM([s,u],(I,C)=>{var A;w.closeMenu(),D1(C,P1.Loose)||(I.preventDefault(),(A=Wn(s))==null||A.focus())},Le(()=>r.value===0)),Oi(NM,w),M1(Le(()=>aa(r.value,{[0]:vr.Open,[1]:vr.Closed}))),()=>{let I={open:r.value===0,close:w.closeMenu};return Pr({ourProps:{},theirProps:e,slot:I,slots:t,attrs:i,name:"Menu"})}}}),UU=rt({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-menu-button-${jo()}`}},setup(e,{attrs:t,slots:i,expose:r}){let s=F_("MenuButton");r({el:s.buttonRef,$el:s.buttonRef});function u(g){switch(g.key){case Hi.Space:case Hi.Enter:case Hi.ArrowDown:g.preventDefault(),g.stopPropagation(),s.openMenu(),Ar(()=>{var x;(x=Wn(s.itemsRef))==null||x.focus({preventScroll:!0}),s.goToItem(Qs.First)});break;case Hi.ArrowUp:g.preventDefault(),g.stopPropagation(),s.openMenu(),Ar(()=>{var x;(x=Wn(s.itemsRef))==null||x.focus({preventScroll:!0}),s.goToItem(Qs.Last)});break}}function d(g){switch(g.key){case Hi.Space:g.preventDefault();break}}function l(g){e.disabled||(s.menuState.value===0?(s.closeMenu(),Ar(()=>{var x;return(x=Wn(s.buttonRef))==null?void 0:x.focus({preventScroll:!0})})):(g.preventDefault(),s.openMenu(),NU(()=>{var x;return(x=Wn(s.itemsRef))==null?void 0:x.focus({preventScroll:!0})})))}let m=k1(Le(()=>({as:e.as,type:t.type})),s.buttonRef);return()=>{var g;let x={open:s.menuState.value===0},{id:w,...I}=e,C={ref:s.buttonRef,id:w,type:m.value,"aria-haspopup":"menu","aria-controls":(g=Wn(s.itemsRef))==null?void 0:g.id,"aria-expanded":e.disabled?void 0:s.menuState.value===0,onKeydown:u,onKeyup:d,onClick:l};return Pr({ourProps:C,theirProps:I,slot:x,attrs:t,slots:i,name:"MenuButton"})}}}),VU=rt({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${jo()}`}},setup(e,{attrs:t,slots:i,expose:r}){let s=F_("MenuItems"),u=Re(null);r({el:s.itemsRef,$el:s.itemsRef}),eU({container:Le(()=>Wn(s.itemsRef)),enabled:Le(()=>s.menuState.value===0),accept(x){return x.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:x.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(x){x.setAttribute("role","none")}});function d(x){var w;switch(u.value&&clearTimeout(u.value),x.key){case Hi.Space:if(s.searchQuery.value!=="")return x.preventDefault(),x.stopPropagation(),s.search(x.key);case Hi.Enter:if(x.preventDefault(),x.stopPropagation(),s.activeItemIndex.value!==null){let I=s.items.value[s.activeItemIndex.value];(w=Wn(I.dataRef.domRef))==null||w.click()}s.closeMenu(),TM(Wn(s.buttonRef));break;case Hi.ArrowDown:return x.preventDefault(),x.stopPropagation(),s.goToItem(Qs.Next);case Hi.ArrowUp:return x.preventDefault(),x.stopPropagation(),s.goToItem(Qs.Previous);case Hi.Home:case Hi.PageUp:return x.preventDefault(),x.stopPropagation(),s.goToItem(Qs.First);case Hi.End:case Hi.PageDown:return x.preventDefault(),x.stopPropagation(),s.goToItem(Qs.Last);case Hi.Escape:x.preventDefault(),x.stopPropagation(),s.closeMenu(),Ar(()=>{var I;return(I=Wn(s.buttonRef))==null?void 0:I.focus({preventScroll:!0})});break;case Hi.Tab:x.preventDefault(),x.stopPropagation(),s.closeMenu(),Ar(()=>sU(Wn(s.buttonRef),x.shiftKey?So.Previous:So.Next));break;default:x.key.length===1&&(s.search(x.key),u.value=setTimeout(()=>s.clearSearch(),350));break}}function l(x){switch(x.key){case Hi.Space:x.preventDefault();break}}let m=um(),g=Le(()=>m!==null?(m.value&vr.Open)===vr.Open:s.menuState.value===0);return()=>{var x,w;let I={open:s.menuState.value===0},{id:C,...A}=e,L={"aria-activedescendant":s.activeItemIndex.value===null||(x=s.items.value[s.activeItemIndex.value])==null?void 0:x.id,"aria-labelledby":(w=Wn(s.buttonRef))==null?void 0:w.id,id:C,onKeydown:d,onKeyup:l,role:"menu",tabIndex:0,ref:s.itemsRef};return Pr({ourProps:L,theirProps:A,slot:I,attrs:t,slots:i,features:mc.RenderStrategy|mc.Static,visible:g.value,name:"MenuItems"})}}}),HU=rt({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${jo()}`}},setup(e,{slots:t,attrs:i,expose:r}){let s=F_("MenuItem"),u=Re(null);r({el:u,$el:u});let d=Le(()=>s.activeItemIndex.value!==null?s.items.value[s.activeItemIndex.value].id===e.id:!1),l=Le(()=>({disabled:e.disabled,textValue:"",domRef:u}));Fn(()=>{var A,L;let $=(L=(A=Wn(u))==null?void 0:A.textContent)==null?void 0:L.toLowerCase().trim();$!==void 0&&(l.value.textValue=$)}),Fn(()=>s.registerItem(e.id,l)),Wi(()=>s.unregisterItem(e.id)),Mr(()=>{s.menuState.value===0&&d.value&&s.activationTrigger.value!==0&&Ar(()=>{var A,L;return(L=(A=Wn(u))==null?void 0:A.scrollIntoView)==null?void 0:L.call(A,{block:"nearest"})})});function m(A){if(e.disabled)return A.preventDefault();s.closeMenu(),TM(Wn(s.buttonRef))}function g(){if(e.disabled)return s.goToItem(Qs.Nothing);s.goToItem(Qs.Specific,e.id)}let x=lU();function w(A){x.update(A)}function I(A){x.wasMoved(A)&&(e.disabled||d.value||s.goToItem(Qs.Specific,e.id,0))}function C(A){x.wasMoved(A)&&(e.disabled||d.value&&s.goToItem(Qs.Nothing))}return()=>{let{disabled:A}=e,L={active:d.value,disabled:A,close:s.closeMenu},{id:$,...F}=e;return Pr({ourProps:{id:$,ref:u,role:"menuitem",tabIndex:A===!0?void 0:-1,"aria-disabled":A===!0?!0:void 0,disabled:void 0,onClick:m,onFocus:g,onPointerenter:w,onMouseenter:w,onPointermove:I,onMousemove:I,onPointerleave:C,onMouseleave:C},theirProps:{...i,...F},slot:L,attrs:i,slots:t,name:"MenuItem"})}}}),jM=Symbol("LabelContext");function UM(){let e=wi(jM,null);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,UM),t}return e}function GU({slot:e={},name:t="Label",props:i={}}={}){let r=Re([]);function s(u){return r.value.push(u),()=>{let d=r.value.indexOf(u);d!==-1&&r.value.splice(d,1)}}return Oi(jM,{register:s,slot:e,name:t,props:i}),Le(()=>r.value.length>0?r.value.join(" "):void 0)}let WU=rt({name:"Label",props:{as:{type:[Object,String],default:"label"},passive:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-label-${jo()}`}},setup(e,{slots:t,attrs:i}){let r=UM();return Fn(()=>Wi(r.register(e.id))),()=>{let{name:s="Label",slot:u={},props:d={}}=r,{id:l,passive:m,...g}=e,x={...Object.entries(d).reduce((w,[I,C])=>Object.assign(w,{[I]:ce(C)}),{}),id:l};return m&&(delete x.onClick,delete x.htmlFor,delete g.onClick),Pr({ourProps:x,theirProps:g,slot:u,attrs:i,slots:t,name:s})}}}),VM=Symbol("GroupContext"),qU=rt({name:"SwitchGroup",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:i}){let r=Re(null),s=GU({name:"SwitchLabel",props:{htmlFor:Le(()=>{var d;return(d=r.value)==null?void 0:d.id}),onClick(d){r.value&&(d.currentTarget.tagName==="LABEL"&&d.preventDefault(),r.value.click(),r.value.focus({preventScroll:!0}))}}}),u=FM({name:"SwitchDescription"});return Oi(VM,{switchRef:r,labelledby:s,describedby:u}),()=>Pr({theirProps:e,ourProps:{},slot:{},slots:t,attrs:i,name:"SwitchGroup"})}}),ZU=rt({name:"Switch",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:()=>`headlessui-switch-${jo()}`}},inheritAttrs:!1,setup(e,{emit:t,attrs:i,slots:r,expose:s}){let u=wi(VM,null),[d,l]=oU(Le(()=>e.modelValue),$=>t("update:modelValue",$),Le(()=>e.defaultChecked));function m(){l(!d.value)}let g=Re(null),x=u===null?g:u.switchRef,w=k1(Le(()=>({as:e.as,type:i.type})),x);s({el:x,$el:x});function I($){$.preventDefault(),m()}function C($){$.key===Hi.Space?($.preventDefault(),m()):$.key===Hi.Enter&&aU($.currentTarget)}function A($){$.preventDefault()}let L=Le(()=>{var $,F;return(F=($=Wn(x))==null?void 0:$.closest)==null?void 0:F.call($,"form")});return Fn(()=>{fn([L],()=>{if(!L.value||e.defaultChecked===void 0)return;function $(){l(e.defaultChecked)}return L.value.addEventListener("reset",$),()=>{var F;(F=L.value)==null||F.removeEventListener("reset",$)}},{immediate:!0})}),()=>{let{id:$,name:F,value:z,form:ee,...H}=e,Q={checked:d.value},ae={id:$,ref:x,role:"switch",type:w.value,tabIndex:0,"aria-checked":d.value,"aria-labelledby":u==null?void 0:u.labelledby.value,"aria-describedby":u==null?void 0:u.describedby.value,onClick:I,onKeyup:C,onKeypress:A};return ni(Nt,[F!=null&&d.value!=null?ni(Fv,Hj({features:$p.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:d.value,form:ee,name:F,value:z})):null,Pr({ourProps:ae,theirProps:{...i,...A1(H,["modelValue","defaultChecked"])},slot:Q,attrs:i,slots:r,name:"Switch"})])}}}),ME=WU;function KU(e){let t={called:!1};return(...i)=>{if(!t.called)return t.called=!0,e(...i)}}function P0(e,...t){e&&t.length>0&&e.classList.add(...t)}function Bg(e,...t){e&&t.length>0&&e.classList.remove(...t)}var Xb=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(Xb||{});function XU(e,t){let i=R_();if(!e)return i.dispose;let{transitionDuration:r,transitionDelay:s}=getComputedStyle(e),[u,d]=[r,s].map(l=>{let[m=0]=l.split(",").filter(Boolean).map(g=>g.includes("ms")?parseFloat(g):parseFloat(g)*1e3).sort((g,x)=>x-g);return m});return u!==0?i.setTimeout(()=>t("finished"),u+d):t("finished"),i.add(()=>t("cancelled")),i.dispose}function kE(e,t,i,r,s,u){let d=R_(),l=u!==void 0?KU(u):()=>{};return Bg(e,...s),P0(e,...t,...i),d.nextFrame(()=>{Bg(e,...i),P0(e,...r),d.add(XU(e,m=>(Bg(e,...r,...t),P0(e,...s),l(m))))}),d.add(()=>Bg(e,...t,...i,...r,...s)),d.add(()=>l("cancelled")),d.dispose}function Xc(e=""){return e.split(" ").filter(t=>t.trim().length>1)}let O1=Symbol("TransitionContext");var YU=(e=>(e.Visible="visible",e.Hidden="hidden",e))(YU||{});function JU(){return wi(O1,null)!==null}function QU(){let e=wi(O1,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function e7(){let e=wi(R1,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let R1=Symbol("NestingContext");function $_(e){return"children"in e?$_(e.children):e.value.filter(({state:t})=>t==="visible").length>0}function HM(e){let t=Re([]),i=Re(!1);Fn(()=>i.value=!0),Wi(()=>i.value=!1);function r(u,d=Jl.Hidden){let l=t.value.findIndex(({id:m})=>m===u);l!==-1&&(aa(d,{[Jl.Unmount](){t.value.splice(l,1)},[Jl.Hidden](){t.value[l].state="hidden"}}),!$_(t)&&i.value&&(e==null||e()))}function s(u){let d=t.value.find(({id:l})=>l===u);return d?d.state!=="visible"&&(d.state="visible"):t.value.push({id:u,state:"visible"}),()=>r(u,Jl.Unmount)}return{children:t,register:s,unregister:r}}let GM=mc.RenderStrategy,$v=rt({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:i,slots:r,expose:s}){let u=Re(0);function d(){u.value|=vr.Opening,t("beforeEnter")}function l(){u.value&=~vr.Opening,t("afterEnter")}function m(){u.value|=vr.Closing,t("beforeLeave")}function g(){u.value&=~vr.Closing,t("afterLeave")}if(!JU()&&Xj())return()=>ni(WM,{...e,onBeforeEnter:d,onAfterEnter:l,onBeforeLeave:m,onAfterLeave:g},r);let x=Re(null),w=Le(()=>e.unmount?Jl.Unmount:Jl.Hidden);s({el:x,$el:x});let{show:I,appear:C}=QU(),{register:A,unregister:L}=e7(),$=Re(I.value?"visible":"hidden"),F={value:!0},z=jo(),ee={value:!1},H=HM(()=>{!ee.value&&$.value!=="hidden"&&($.value="hidden",L(z),g())});Fn(()=>{let X=A(z);Wi(X)}),Mr(()=>{if(w.value===Jl.Hidden&&z){if(I.value&&$.value!=="visible"){$.value="visible";return}aa($.value,{hidden:()=>L(z),visible:()=>A(z)})}});let Q=Xc(e.enter),ae=Xc(e.enterFrom),be=Xc(e.enterTo),te=Xc(e.entered),G=Xc(e.leave),U=Xc(e.leaveFrom),B=Xc(e.leaveTo);Fn(()=>{Mr(()=>{if($.value==="visible"){let X=Wn(x);if(X instanceof Comment&&X.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function ie(X){let ne=F.value&&!C.value,Ee=Wn(x);!Ee||!(Ee instanceof HTMLElement)||ne||(ee.value=!0,I.value&&d(),I.value||m(),X(I.value?kE(Ee,Q,ae,be,te,Ie=>{ee.value=!1,Ie===Xb.Finished&&l()}):kE(Ee,G,U,B,te,Ie=>{ee.value=!1,Ie===Xb.Finished&&($_(H)||($.value="hidden",L(z),g()))})))}return Fn(()=>{fn([I],(X,ne,Ee)=>{ie(Ee),F.value=!1},{immediate:!0})}),Oi(R1,H),M1(Le(()=>aa($.value,{visible:vr.Open,hidden:vr.Closed})|u.value)),()=>{let{appear:X,show:ne,enter:Ee,enterFrom:Ie,enterTo:Xe,entered:lt,leave:st,leaveFrom:$t,leaveTo:It,...nt}=e,et={ref:x},dt={...nt,...C.value&&I.value&&dm.isServer?{class:kn([i.class,nt.class,...Q,...ae])}:{}};return Pr({theirProps:dt,ourProps:et,slot:{},slots:r,attrs:i,features:GM,visible:$.value==="visible",name:"TransitionChild"})}}}),t7=$v,WM=rt({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:i,slots:r}){let s=um(),u=Le(()=>e.show===null&&s!==null?(s.value&vr.Open)===vr.Open:e.show);Mr(()=>{if(![!0,!1].includes(u.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let d=Re(u.value?"visible":"hidden"),l=HM(()=>{d.value="hidden"}),m=Re(!0),g={show:u,appear:Le(()=>e.appear||!m.value)};return Fn(()=>{Mr(()=>{m.value=!1,u.value?d.value="visible":$_(l)||(d.value="hidden")})}),Oi(R1,l),Oi(O1,g),()=>{let x=A1(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),w={unmount:e.unmount};return Pr({ourProps:{...w,as:"template"},theirProps:{},slot:{},slots:{...r,default:()=>[ni(t7,{onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave"),...i,...w,...x},r.default)]},attrs:{},features:GM,visible:d.value==="visible",name:"Transition"})}}});function To(e){return e.split("-")[1]}function F1(e){return e==="y"?"height":"width"}function cl(e){return e.split("-")[0]}function hm(e){return["top","bottom"].includes(cl(e))?"x":"y"}function PE(e,t,i){let{reference:r,floating:s}=e;const u=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,l=hm(t),m=F1(l),g=r[m]/2-s[m]/2,x=l==="x";let w;switch(cl(t)){case"top":w={x:u,y:r.y-s.height};break;case"bottom":w={x:u,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y:d};break;case"left":w={x:r.x-s.width,y:d};break;default:w={x:r.x,y:r.y}}switch(To(t)){case"start":w[l]-=g*(i&&x?-1:1);break;case"end":w[l]+=g*(i&&x?-1:1)}return w}const n7=async(e,t,i)=>{const{placement:r="bottom",strategy:s="absolute",middleware:u=[],platform:d}=i,l=u.filter(Boolean),m=await(d.isRTL==null?void 0:d.isRTL(t));let g=await d.getElementRects({reference:e,floating:t,strategy:s}),{x,y:w}=PE(g,r,m),I=r,C={},A=0;for(let L=0;L<l.length;L++){const{name:$,fn:F}=l[L],{x:z,y:ee,data:H,reset:Q}=await F({x,y:w,initialPlacement:r,placement:I,strategy:s,middlewareData:C,rects:g,platform:d,elements:{reference:e,floating:t}});x=z??x,w=ee??w,C={...C,[$]:{...C[$],...H}},Q&&A<=50&&(A++,typeof Q=="object"&&(Q.placement&&(I=Q.placement),Q.rects&&(g=Q.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:s}):Q.rects),{x,y:w}=PE(g,I,m)),L=-1)}return{x,y:w,placement:I,strategy:s,middlewareData:C}};function qM(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function zv(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function zp(e,t){var i;t===void 0&&(t={});const{x:r,y:s,platform:u,rects:d,elements:l,strategy:m}=e,{boundary:g="clippingAncestors",rootBoundary:x="viewport",elementContext:w="floating",altBoundary:I=!1,padding:C=0}=t,A=qM(C),L=l[I?w==="floating"?"reference":"floating":w],$=zv(await u.getClippingRect({element:(i=await(u.isElement==null?void 0:u.isElement(L)))==null||i?L:L.contextElement||await(u.getDocumentElement==null?void 0:u.getDocumentElement(l.floating)),boundary:g,rootBoundary:x,strategy:m})),F=w==="floating"?{...d.floating,x:r,y:s}:d.reference,z=await(u.getOffsetParent==null?void 0:u.getOffsetParent(l.floating)),ee=await(u.isElement==null?void 0:u.isElement(z))&&await(u.getScale==null?void 0:u.getScale(z))||{x:1,y:1},H=zv(u.convertOffsetParentRelativeRectToViewportRelativeRect?await u.convertOffsetParentRelativeRectToViewportRelativeRect({rect:F,offsetParent:z,strategy:m}):F);return{top:($.top-H.top+A.top)/ee.y,bottom:(H.bottom-$.bottom+A.bottom)/ee.y,left:($.left-H.left+A.left)/ee.x,right:(H.right-$.right+A.right)/ee.x}}const i7=Math.min,r7=Math.max;function Yb(e,t,i){return r7(e,i7(t,i))}const s7=e=>({name:"arrow",options:e,async fn(t){const{element:i,padding:r=0}=e||{},{x:s,y:u,placement:d,rects:l,platform:m,elements:g}=t;if(i==null)return{};const x=qM(r),w={x:s,y:u},I=hm(d),C=F1(I),A=await m.getDimensions(i),L=I==="y",$=L?"top":"left",F=L?"bottom":"right",z=L?"clientHeight":"clientWidth",ee=l.reference[C]+l.reference[I]-w[I]-l.floating[C],H=w[I]-l.reference[I],Q=await(m.getOffsetParent==null?void 0:m.getOffsetParent(i));let ae=Q?Q[z]:0;ae&&await(m.isElement==null?void 0:m.isElement(Q))||(ae=g.floating[z]||l.floating[C]);const be=ee/2-H/2,te=x[$],G=ae-A[C]-x[F],U=ae/2-A[C]/2+be,B=Yb(te,U,G),ie=To(d)!=null&&U!=B&&l.reference[C]/2-(U<te?x[$]:x[F])-A[C]/2<0;return{[I]:w[I]-(ie?U<te?te-U:G-U:0),data:{[I]:B,centerOffset:U-B}}}}),ZM=["top","right","bottom","left"],DE=ZM.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]),a7={left:"right",right:"left",bottom:"top",top:"bottom"};function Bv(e){return e.replace(/left|right|bottom|top/g,t=>a7[t])}function KM(e,t,i){i===void 0&&(i=!1);const r=To(e),s=hm(e),u=F1(s);let d=s==="x"?r===(i?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[u]>t.floating[u]&&(d=Bv(d)),{main:d,cross:Bv(d)}}const o7={start:"end",end:"start"};function uv(e){return e.replace(/start|end/g,t=>o7[t])}const l7=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var i,r,s;const{rects:u,middlewareData:d,placement:l,platform:m,elements:g}=t,{crossAxis:x=!1,alignment:w,allowedPlacements:I=DE,autoAlignment:C=!0,...A}=e,L=w!==void 0||I===DE?function(U,B,ie){return(U?[...ie.filter(X=>To(X)===U),...ie.filter(X=>To(X)!==U)]:ie.filter(X=>cl(X)===X)).filter(X=>!U||To(X)===U||!!B&&uv(X)!==X)}(w||null,C,I):I,$=await zp(t,A),F=((i=d.autoPlacement)==null?void 0:i.index)||0,z=L[F];if(z==null)return{};const{main:ee,cross:H}=KM(z,u,await(m.isRTL==null?void 0:m.isRTL(g.floating)));if(l!==z)return{reset:{placement:L[0]}};const Q=[$[cl(z)],$[ee],$[H]],ae=[...((r=d.autoPlacement)==null?void 0:r.overflows)||[],{placement:z,overflows:Q}],be=L[F+1];if(be)return{data:{index:F+1,overflows:ae},reset:{placement:be}};const te=ae.map(U=>{const B=To(U.placement);return[U.placement,B&&x?U.overflows.slice(0,2).reduce((ie,X)=>ie+X,0):U.overflows[0],U.overflows]}).sort((U,B)=>U[1]-B[1]),G=((s=te.filter(U=>U[2].slice(0,To(U[0])?2:3).every(B=>B<=0))[0])==null?void 0:s[0])||te[0][0];return G!==l?{data:{index:F+1,overflows:ae},reset:{placement:G}}:{}}}},c7=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var i;const{placement:r,middlewareData:s,rects:u,initialPlacement:d,platform:l,elements:m}=t,{mainAxis:g=!0,crossAxis:x=!0,fallbackPlacements:w,fallbackStrategy:I="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:A=!0,...L}=e,$=cl(r),F=cl(d)===d,z=await(l.isRTL==null?void 0:l.isRTL(m.floating)),ee=w||(F||!A?[Bv(d)]:function(B){const ie=Bv(B);return[uv(B),ie,uv(ie)]}(d));w||C==="none"||ee.push(...function(B,ie,X,ne){const Ee=To(B);let Ie=function(Xe,lt,st){const $t=["left","right"],It=["right","left"],nt=["top","bottom"],et=["bottom","top"];switch(Xe){case"top":case"bottom":return st?lt?It:$t:lt?$t:It;case"left":case"right":return lt?nt:et;default:return[]}}(cl(B),X==="start",ne);return Ee&&(Ie=Ie.map(Xe=>Xe+"-"+Ee),ie&&(Ie=Ie.concat(Ie.map(uv)))),Ie}(d,A,C,z));const H=[d,...ee],Q=await zp(t,L),ae=[];let be=((i=s.flip)==null?void 0:i.overflows)||[];if(g&&ae.push(Q[$]),x){const{main:B,cross:ie}=KM(r,u,z);ae.push(Q[B],Q[ie])}if(be=[...be,{placement:r,overflows:ae}],!ae.every(B=>B<=0)){var te,G;const B=(((te=s.flip)==null?void 0:te.index)||0)+1,ie=H[B];if(ie)return{data:{index:B,overflows:be},reset:{placement:ie}};let X=(G=be.filter(ne=>ne.overflows[0]<=0).sort((ne,Ee)=>ne.overflows[1]-Ee.overflows[1])[0])==null?void 0:G.placement;if(!X)switch(I){case"bestFit":{var U;const ne=(U=be.map(Ee=>[Ee.placement,Ee.overflows.filter(Ie=>Ie>0).reduce((Ie,Xe)=>Ie+Xe,0)]).sort((Ee,Ie)=>Ee[1]-Ie[1])[0])==null?void 0:U[0];ne&&(X=ne);break}case"initialPlacement":X=d}if(r!==X)return{reset:{placement:X}}}return{}}}};function LE(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function OE(e){return ZM.some(t=>e[t]>=0)}const u7=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{strategy:i="referenceHidden",...r}=e,{rects:s}=t;switch(i){case"referenceHidden":{const u=LE(await zp(t,{...r,elementContext:"reference"}),s.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:OE(u)}}}case"escaped":{const u=LE(await zp(t,{...r,altBoundary:!0}),s.floating);return{data:{escapedOffsets:u,escaped:OE(u)}}}default:return{}}}}},d7=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:i,y:r}=t,s=await async function(u,d){const{placement:l,platform:m,elements:g}=u,x=await(m.isRTL==null?void 0:m.isRTL(g.floating)),w=cl(l),I=To(l),C=hm(l)==="x",A=["left","top"].includes(w)?-1:1,L=x&&C?-1:1,$=typeof d=="function"?d(u):d;let{mainAxis:F,crossAxis:z,alignmentAxis:ee}=typeof $=="number"?{mainAxis:$,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...$};return I&&typeof ee=="number"&&(z=I==="end"?-1*ee:ee),C?{x:z*L,y:F*A}:{x:F*A,y:z*L}}(t,e);return{x:i+s.x,y:r+s.y,data:s}}}};function h7(e){return e==="x"?"y":"x"}const f7=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:i,y:r,placement:s}=t,{mainAxis:u=!0,crossAxis:d=!1,limiter:l={fn:$=>{let{x:F,y:z}=$;return{x:F,y:z}}},...m}=e,g={x:i,y:r},x=await zp(t,m),w=hm(cl(s)),I=h7(w);let C=g[w],A=g[I];if(u){const $=w==="y"?"bottom":"right";C=Yb(C+x[w==="y"?"top":"left"],C,C-x[$])}if(d){const $=I==="y"?"bottom":"right";A=Yb(A+x[I==="y"?"top":"left"],A,A-x[$])}const L=l.fn({...t,[w]:C,[I]:A});return{...L,data:{x:L.x-i,y:L.y-r}}}}};function Sa(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ya(e){return Sa(e).getComputedStyle(e)}function XM(e){return e instanceof Sa(e).Node}function gc(e){return XM(e)?(e.nodeName||"").toLowerCase():""}function to(e){return e instanceof Sa(e).HTMLElement}function ea(e){return e instanceof Sa(e).Element}function RE(e){return typeof ShadowRoot>"u"?!1:e instanceof Sa(e).ShadowRoot||e instanceof ShadowRoot}function Bp(e){const{overflow:t,overflowX:i,overflowY:r,display:s}=Ya(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+i)&&!["inline","contents"].includes(s)}function p7(e){return["table","td","th"].includes(gc(e))}function Jb(e){const t=$1(),i=Ya(e);return i.transform!=="none"||i.perspective!=="none"||!t&&!!i.backdropFilter&&i.backdropFilter!=="none"||!t&&!!i.filter&&i.filter!=="none"||["transform","perspective","filter"].some(r=>(i.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(i.contain||"").includes(r))}function $1(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function z_(e){return["html","body","#document"].includes(gc(e))}const FE=Math.min,mp=Math.max,Nv=Math.round;function YM(e){const t=Ya(e);let i=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=to(e),u=s?e.offsetWidth:i,d=s?e.offsetHeight:r,l=Nv(i)!==u||Nv(r)!==d;return l&&(i=u,r=d),{width:i,height:r,fallback:l}}function JM(e){return ea(e)?e:e.contextElement}const QM={x:1,y:1};function Kd(e){const t=JM(e);if(!to(t))return QM;const i=t.getBoundingClientRect(),{width:r,height:s,fallback:u}=YM(t);let d=(u?Nv(i.width):i.width)/r,l=(u?Nv(i.height):i.height)/s;return d&&Number.isFinite(d)||(d=1),l&&Number.isFinite(l)||(l=1),{x:d,y:l}}const $E={x:0,y:0};function ek(e,t,i){var r,s;if(t===void 0&&(t=!0),!$1())return $E;const u=e?Sa(e):window;return!i||t&&i!==u?$E:{x:((r=u.visualViewport)==null?void 0:r.offsetLeft)||0,y:((s=u.visualViewport)==null?void 0:s.offsetTop)||0}}function vu(e,t,i,r){t===void 0&&(t=!1),i===void 0&&(i=!1);const s=e.getBoundingClientRect(),u=JM(e);let d=QM;t&&(r?ea(r)&&(d=Kd(r)):d=Kd(e));const l=ek(u,i,r);let m=(s.left+l.x)/d.x,g=(s.top+l.y)/d.y,x=s.width/d.x,w=s.height/d.y;if(u){const I=Sa(u),C=r&&ea(r)?Sa(r):r;let A=I.frameElement;for(;A&&r&&C!==I;){const L=Kd(A),$=A.getBoundingClientRect(),F=getComputedStyle(A);$.x+=(A.clientLeft+parseFloat(F.paddingLeft))*L.x,$.y+=(A.clientTop+parseFloat(F.paddingTop))*L.y,m*=L.x,g*=L.y,x*=L.x,w*=L.y,m+=$.x,g+=$.y,A=Sa(A).frameElement}}return zv({width:x,height:w,x:m,y:g})}function oc(e){return((XM(e)?e.ownerDocument:e.document)||window.document).documentElement}function B_(e){return ea(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function tk(e){return vu(oc(e)).left+B_(e).scrollLeft}function ch(e){if(gc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||RE(e)&&e.host||oc(e);return RE(t)?t.host:t}function nk(e){const t=ch(e);return z_(t)?t.ownerDocument.body:to(t)&&Bp(t)?t:nk(t)}function gp(e,t){var i;t===void 0&&(t=[]);const r=nk(e),s=r===((i=e.ownerDocument)==null?void 0:i.body),u=Sa(r);return s?t.concat(u,u.visualViewport||[],Bp(r)?r:[]):t.concat(r,gp(r))}function zE(e,t,i){let r;if(t==="viewport")r=function(s,u){const d=Sa(s),l=oc(s),m=d.visualViewport;let g=l.clientWidth,x=l.clientHeight,w=0,I=0;if(m){g=m.width,x=m.height;const C=$1();(!C||C&&u==="fixed")&&(w=m.offsetLeft,I=m.offsetTop)}return{width:g,height:x,x:w,y:I}}(e,i);else if(t==="document")r=function(s){const u=oc(s),d=B_(s),l=s.ownerDocument.body,m=mp(u.scrollWidth,u.clientWidth,l.scrollWidth,l.clientWidth),g=mp(u.scrollHeight,u.clientHeight,l.scrollHeight,l.clientHeight);let x=-d.scrollLeft+tk(s);const w=-d.scrollTop;return Ya(l).direction==="rtl"&&(x+=mp(u.clientWidth,l.clientWidth)-m),{width:m,height:g,x,y:w}}(oc(e));else if(ea(t))r=function(s,u){const d=vu(s,!0,u==="fixed"),l=d.top+s.clientTop,m=d.left+s.clientLeft,g=to(s)?Kd(s):{x:1,y:1};return{width:s.clientWidth*g.x,height:s.clientHeight*g.y,x:m*g.x,y:l*g.y}}(t,i);else{const s=ek(e);r={...t,x:t.x-s.x,y:t.y-s.y}}return zv(r)}function ik(e,t){const i=ch(e);return!(i===t||!ea(i)||z_(i))&&(Ya(i).position==="fixed"||ik(i,t))}function BE(e,t){return to(e)&&Ya(e).position!=="fixed"?t?t(e):e.offsetParent:null}function NE(e,t){const i=Sa(e);if(!to(e))return i;let r=BE(e,t);for(;r&&p7(r)&&Ya(r).position==="static";)r=BE(r,t);return r&&(gc(r)==="html"||gc(r)==="body"&&Ya(r).position==="static"&&!Jb(r))?i:r||function(s){let u=ch(s);for(;to(u)&&!z_(u);){if(Jb(u))return u;u=ch(u)}return null}(e)||i}function m7(e,t,i){const r=to(t),s=oc(t),u=i==="fixed",d=vu(e,!0,u,t);let l={scrollLeft:0,scrollTop:0};const m={x:0,y:0};if(r||!r&&!u)if((gc(t)!=="body"||Bp(s))&&(l=B_(t)),to(t)){const g=vu(t,!0,u,t);m.x=g.x+t.clientLeft,m.y=g.y+t.clientTop}else s&&(m.x=tk(s));return{x:d.left+l.scrollLeft-m.x,y:d.top+l.scrollTop-m.y,width:d.width,height:d.height}}const g7={getClippingRect:function(e){let{element:t,boundary:i,rootBoundary:r,strategy:s}=e;const u=i==="clippingAncestors"?function(g,x){const w=x.get(g);if(w)return w;let I=gp(g).filter($=>ea($)&&gc($)!=="body"),C=null;const A=Ya(g).position==="fixed";let L=A?ch(g):g;for(;ea(L)&&!z_(L);){const $=Ya(L),F=Jb(L);F||$.position!=="fixed"||(C=null),(A?!F&&!C:!F&&$.position==="static"&&C&&["absolute","fixed"].includes(C.position)||Bp(L)&&!F&&ik(g,L))?I=I.filter(z=>z!==L):C=$,L=ch(L)}return x.set(g,I),I}(t,this._c):[].concat(i),d=[...u,r],l=d[0],m=d.reduce((g,x)=>{const w=zE(t,x,s);return g.top=mp(w.top,g.top),g.right=FE(w.right,g.right),g.bottom=FE(w.bottom,g.bottom),g.left=mp(w.left,g.left),g},zE(t,l,s));return{width:m.right-m.left,height:m.bottom-m.top,x:m.left,y:m.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:i,strategy:r}=e;const s=to(i),u=oc(i);if(i===u)return t;let d={scrollLeft:0,scrollTop:0},l={x:1,y:1};const m={x:0,y:0};if((s||!s&&r!=="fixed")&&((gc(i)!=="body"||Bp(u))&&(d=B_(i)),to(i))){const g=vu(i);l=Kd(i),m.x=g.x+i.clientLeft,m.y=g.y+i.clientTop}return{width:t.width*l.x,height:t.height*l.y,x:t.x*l.x-d.scrollLeft*l.x+m.x,y:t.y*l.y-d.scrollTop*l.y+m.y}},isElement:ea,getDimensions:function(e){return YM(e)},getOffsetParent:NE,getDocumentElement:oc,getScale:Kd,async getElementRects(e){let{reference:t,floating:i,strategy:r}=e;const s=this.getOffsetParent||NE,u=this.getDimensions;return{reference:m7(t,await s(i),r),floating:{x:0,y:0,...await u(i)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>Ya(e).direction==="rtl"};function v7(e,t,i,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:u=!0,elementResize:d=!0,animationFrame:l=!1}=r,m=s||u?[...ea(e)?gp(e):e.contextElement?gp(e.contextElement):[],...gp(t)]:[];m.forEach(I=>{const C=!ea(I)&&I.toString().includes("V");!s||l&&!C||I.addEventListener("scroll",i,{passive:!0}),u&&I.addEventListener("resize",i)});let g,x=null;d&&(x=new ResizeObserver(()=>{i()}),ea(e)&&!l&&x.observe(e),ea(e)||!e.contextElement||l||x.observe(e.contextElement),x.observe(t));let w=l?vu(e):null;return l&&function I(){const C=vu(e);!w||C.x===w.x&&C.y===w.y&&C.width===w.width&&C.height===w.height||i(),w=C,g=requestAnimationFrame(I)}(),i(),()=>{var I;m.forEach(C=>{s&&C.removeEventListener("scroll",i),u&&C.removeEventListener("resize",i)}),(I=x)==null||I.disconnect(),x=null,l&&cancelAnimationFrame(g)}}const _7=(e,t,i)=>{const r=new Map,s={platform:g7,...i},u={...s.platform,_c:r};return n7(e,t,{...s,platform:u})};function Qb(e){var t;return(t=e==null?void 0:e.$el)!=null?t:e}function y7(e){return{name:"arrow",options:e,fn(t){const i=Qb(ce(e.element));return i==null?{}:s7({element:i,padding:e.padding}).fn(t)}}}function b7(e,t,i){i===void 0&&(i={});const r=i.whileElementsMounted,s=Le(()=>{var Q;return(Q=ce(i.open))!=null?Q:!0}),u=Le(()=>ce(i.middleware)),d=Le(()=>{var Q;return(Q=ce(i.placement))!=null?Q:"bottom"}),l=Le(()=>{var Q;return(Q=ce(i.strategy))!=null?Q:"absolute"}),m=Le(()=>Qb(e.value)),g=Le(()=>Qb(t.value)),x=Re(null),w=Re(null),I=Re(l.value),C=Re(d.value),A=bh({}),L=Re(!1);let $;function F(){m.value==null||g.value==null||_7(m.value,g.value,{middleware:u.value,placement:d.value,strategy:l.value}).then(Q=>{x.value=Q.x,w.value=Q.y,I.value=Q.strategy,C.value=Q.placement,A.value=Q.middlewareData,L.value=!0})}function z(){typeof $=="function"&&($(),$=void 0)}function ee(){if(z(),r===void 0){F();return}if(m.value!=null&&g.value!=null){$=r(m.value,g.value,F);return}}function H(){s.value||(L.value=!1)}return fn([u,d,l],F,{flush:"sync"}),fn([m,g],ee,{flush:"sync"}),fn(s,H,{flush:"sync"}),Kp()&&Xp(z),{x:tu(x),y:tu(w),strategy:tu(I),placement:tu(C),middlewareData:tu(A),isPositioned:tu(L),update:F}}var x7=Object.defineProperty,w7=(e,t,i)=>t in e?x7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,S7=(e,t,i)=>(w7(e,typeof t!="symbol"?t+"":t,i),i);function ex(e){if(e==null||e.value==null)return null;const t=e.value.$el??e.value;return t.$el?ex(Re(t)):t}class T7{constructor(){S7(this,"current",this.detect())}set(t){this.current!==t&&(this.current=t)}reset(){this.set(this.detect())}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}}const rk=new T7;function sk(e){return e.reduce((t,i)=>i.type===Nt?t.concat(sk(i.children)):t.concat(i),[])}function jE(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}function UE(e){return e=ce(e),e&&(e==null?void 0:e.nodeType)!==Node.COMMENT_NODE}function E7(e,t,i,r,s){fn([()=>s.offset,()=>s.flip,()=>s.shift,()=>s.autoPlacement,()=>s.arrow,()=>s.hide,()=>s.middleware],()=>{const u=[];(typeof s.offset=="number"||typeof s.offset=="object"||typeof s.offset=="function")&&u.push(d7(s.offset)),(s.flip===!0||typeof s.flip=="number"||typeof s.flip=="object")&&u.push(c7({padding:typeof s.flip=="number"?s.flip:void 0,...typeof s.flip=="object"?s.flip:{}})),(s.shift===!0||typeof s.shift=="number"||typeof s.shift=="object")&&u.push(f7({padding:typeof s.shift=="number"?s.shift:void 0,...typeof s.shift=="object"?s.shift:{}})),(s.autoPlacement===!0||typeof s.autoPlacement=="object")&&u.push(l7(typeof s.autoPlacement=="object"?s.autoPlacement:void 0)),(s.arrow===!0||typeof s.arrow=="number")&&u.push(y7({element:r,padding:s.arrow===!0?0:s.arrow})),u.push(...typeof s.middleware=="function"?s.middleware({referenceEl:t,floatingEl:i}):s.middleware||[]),(s.hide===!0||typeof s.hide=="object")&&u.push(u7(typeof s.hide=="object"?s.hide:void 0)),e.value=u},{immediate:!0})}function I7(e,t,i){let r=()=>{};Fn(()=>{if(e&&rk.isClient&&typeof ResizeObserver<"u"&&t.value&&t.value instanceof Element){const s=new ResizeObserver(([u])=>{i.value=u.borderBoxSize.reduce((d,{inlineSize:l})=>d+l,0)});s.observe(t.value),r=()=>{s.disconnect(),i.value=null}}}),oa(()=>{r()})}const C7=e=>{switch(e){case"top":return"origin-bottom";case"bottom":return"origin-top";case"left":return"origin-right";case"right":return"origin-left";case"top-start":case"right-end":return"origin-bottom-left";case"top-end":case"left-end":return"origin-bottom-right";case"right-start":case"bottom-start":return"origin-top-left";case"left-start":case"bottom-end":return"origin-top-right";default:return""}};function A7(e,t){const i=Le(()=>{if(typeof e.originClass=="function")return e.originClass(t.value);if(typeof e.originClass=="string")return e.originClass;if(e.tailwindcssOriginClass)return C7(t.value)}),r=Le(()=>e.enter||i.value?`${e.enter||""} ${i.value||""}`:void 0),s=Le(()=>e.leave||i.value?`${e.leave||""} ${i.value||""}`:void 0);return{originClassRef:i,enterActiveClassRef:r,leaveActiveClassRef:s}}const M7=Symbol("ReferenceContext"),k7=Symbol("FloatingContext"),P7=Symbol("ArrowContext"),Qt={as:{type:[String,Function],default:"template"},floatingAs:{type:[String,Function],default:"div"},show:{type:Boolean,default:null},placement:{type:String,default:"bottom-start"},strategy:{type:String,default:"absolute"},offset:[Number,Function,Object],shift:{type:[Boolean,Number,Object],default:!1},flip:{type:[Boolean,Number,Object],default:!1},arrow:{type:[Boolean,Number],default:!1},autoPlacement:{type:[Boolean,Object],default:!1},hide:{type:[Boolean,Object],default:!1},autoUpdate:{type:[Boolean,Object],default:!0},zIndex:{type:[Number,String],default:9999},transitionName:String,transitionType:String,enter:String,enterFrom:String,enterTo:String,leave:String,leaveFrom:String,leaveTo:String,originClass:[String,Function],tailwindcssOriginClass:{type:Boolean,default:!1},portal:{type:Boolean,default:!1},transform:{type:Boolean,default:!0},adaptiveWidth:{type:Boolean,default:!1},composable:{type:Boolean,default:!1},dialog:{type:Boolean,default:!1},middleware:{type:[Array,Function],default:()=>[]}};function D7(e,t,i,r){const{referenceRef:s}=r,u=t,d=Br(i,{ref:s}),l=ra(e,u.as==="template"?d:{});return u.as==="template"?l:typeof u.as=="string"?ni(u.as,d,[l]):ni(u.as,d,()=>[l])}function L7(e,t,i,r){const{floatingRef:s,props:u,mounted:d,show:l,x:m,y:g,placement:x,strategy:w,referenceElWidth:I,updateFloating:C}=r,A=Br({...u,as:u.floatingAs},t),{enterActiveClassRef:L,leaveActiveClassRef:$}=A7(A,x),F={enterActiveClass:L.value,enterFromClass:A.enterFrom,enterToClass:A.enterTo,leaveActiveClass:$.value,leaveFromClass:A.leaveFrom,leaveToClass:A.leaveTo},z={name:A.transitionName,type:A.transitionType,appear:!0,...A.transitionName?{}:F,onBeforeEnter(){l.value=!0},onAfterLeave(){l.value=!1}},ee={enter:L.value,enterFrom:A.enterFrom,enterTo:A.enterTo,leave:$.value,leaveFrom:A.leaveFrom,leaveTo:A.leaveTo,onBeforeEnter:z.onBeforeEnter,onAfterLeave:z.onAfterLeave},H={style:{...!A.dialog&&A.transform?{position:w.value,zIndex:A.zIndex,top:"0px",left:"0px",right:"auto",bottom:"auto",transform:`translate(${Math.round(m.value||0)}px,${Math.round(g.value||0)}px)`}:{position:w.value,zIndex:A.zIndex,top:`${g.value||0}px`,left:`${m.value||0}px`},width:A.adaptiveWidth&&typeof I.value=="number"?`${I.value}px`:void 0}};function Q(te){return A.portal?ni(LM,()=>te):te}function ae(te){const G=Br(H,i,A.dialog?{}:{ref:s});return A.as==="template"?te:typeof A.as=="string"?ni(A.as,G,te):ni(A.as,G,()=>te)}function be(){function te(){var G;const U=A.as==="template"?Br(H,i,A.dialog?{}:{ref:s}):null,B=ra(e,U);return((G=B.props)==null?void 0:G.unmount)===!1?(C(),B):typeof A.show!="boolean"||A.show?B:tt()}return rk.isServer?d.value&&A.show?te():tt():A.transitionChild?ni($v,{key:`placement-${x.value}`,...A.dialog?{ref:s}:{},as:"template",...ee},te):ni(_r,{...A.dialog?{ref:s}:{},...z},te)}return Q(ae(be()))}function O7(e,t,i,r,s){const u=Re(!1),d=Qd(r,"placement"),l=Qd(r,"strategy"),m=bh({}),g=Re(null),x=Re(void 0),w=Re(void 0),I=Le(()=>ex(t)),C=Le(()=>ex(i)),A=Le(()=>UE(I)&&UE(C)),{x:L,y:$,placement:F,strategy:z,middlewareData:ee,update:H}=b7(I,C,{placement:d,strategy:l,middleware:m,whileElementsMounted:()=>{}}),Q=Re(null);Fn(()=>{u.value=!0});function ae(){A.value&&(H(),s("update"))}fn([d,l,m],ae,{flush:"sync"}),E7(m,I,C,g,r),fn(ee,()=>{const B=ee.value.arrow;x.value=B==null?void 0:B.x,w.value=B==null?void 0:B.y}),I7(r.adaptiveWidth,I,Q),fn(e,async(B,ie,X)=>{if(await Ar(),e.value&&A.value&&r.autoUpdate){const ne=v7(I.value,C.value,ae,typeof r.autoUpdate=="object"?r.autoUpdate:void 0);s("show"),X(()=>{ne(),e.value||s("hide")})}},{flush:"post",immediate:!0});const be=Re(!0);fn(I,()=>{!(I.value instanceof Element)&&A.value&&be.value&&(be.value=!1,window.requestAnimationFrame(()=>{be.value=!0,ae()}))},{flush:"sync"});const te={referenceRef:t,placement:F},G={floatingRef:i,props:r,mounted:u,show:e,x:L,y:$,placement:F,strategy:z,referenceElWidth:Q,updateFloating:ae},U={ref:g,placement:F,x,y:w};return Oi(P7,U),{referenceApi:te,floatingApi:G,arrowApi:U,x:L,y:$,placement:F,strategy:z,referenceEl:I,floatingEl:C,middlewareData:ee,update:ae}}const R7={name:"Float",inheritAttrs:!1,props:Qt,emits:["show","hide","update"],setup(e,{emit:t,slots:i,attrs:r}){const s=Re(e.show??!1),u=Re(null),d=Re(null),{referenceApi:l,floatingApi:m,placement:g}=O7(s,u,d,e,t);function x(I){return e.as==="template"?I:typeof e.as=="string"?ni(e.as,r,I):ni(e.as,r,()=>I)}const w={placement:g.value};return e.composable||e.dialog?(Oi(M7,l),Oi(k7,m),()=>{if(i.default)return x(i.default(w))}):()=>{if(!i.default)return;const[I,C]=sk(i.default(w)).filter(jE);if(!jE(I))return;const A=D7(I,{as:"template"},{},l),L=L7(C,{as:e.floatingAs},{},m);return x([A,L])}}};Qt.as;Qt.floatingAs,Qt.transitionName,Qt.transitionType,Qt.enter,Qt.enterFrom,Qt.enterTo,Qt.leave,Qt.leaveFrom,Qt.leaveTo,Qt.originClass,Qt.tailwindcssOriginClass;({...Qt.as});Qt.as,Qt.show,Qt.placement,Qt.strategy,Qt.offset,Qt.shift,Qt.flip,Qt.arrow,Qt.autoPlacement,Qt.hide,Qt.autoUpdate,Qt.zIndex,Qt.transitionName,Qt.transitionType,Qt.enter,Qt.enterFrom,Qt.enterTo,Qt.leave,Qt.leaveFrom,Qt.leaveTo,Qt.originClass,Qt.tailwindcssOriginClass,Qt.portal,Qt.transform,Qt.middleware;Qt.as,Qt.placement,Qt.strategy,Qt.offset,Qt.shift,{...Qt.flip},Qt.arrow,Qt.autoPlacement,Qt.hide,Qt.autoUpdate,Qt.zIndex,Qt.transitionName,Qt.transitionType,Qt.enter,Qt.enterFrom,Qt.enterTo,Qt.leave,Qt.leaveFrom,Qt.leaveTo,Qt.originClass,Qt.tailwindcssOriginClass,Qt.transform,Qt.middleware;Qt.as,Qt.placement,Qt.strategy,Qt.offset,Qt.shift,Qt.flip,Qt.arrow,Qt.autoPlacement,Qt.hide,Qt.autoUpdate,Qt.zIndex,Qt.transitionName,Qt.transitionType,Qt.enter,Qt.enterFrom,Qt.enterTo,Qt.leave,Qt.leaveFrom,Qt.leaveTo,Qt.originClass,Qt.tailwindcssOriginClass,Qt.transform,Qt.middleware;const F7={class:"py-1"},z1=rt({__name:"DropDown",props:{label:{},alignment:{default:"right"},showChevron:{type:Boolean,default:!0},labelClass:{default:""},chevronClass:{}},setup(e){return(t,i)=>(V(),je(ce(jU),{as:"div",class:"inline-block text-left"},{default:Ce(()=>[ye(ce(R7),{placement:t.alignment==="left"?"bottom-start":"bottom-end",shift:"",flip:"",zIndex:"99",offset:4,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",tailwindcssOriginClass:""},{default:Ce(()=>[ye(ce(UU),{class:kn(["inline-flex w-full justify-center rounded-md items-center focus:outline-none focus:ring-2 p-2 placeholder:focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-gray-100",t.labelClass])},{default:Ce(()=>[En(t.$slots,"label",{},()=>[Mt(xt(t.label),1)]),t.showChevron?(V(),je(Ih,{key:0,class:kn(["xl:block m-1",t.chevronClass]),"aria-hidden":"true"},null,8,["class"])):tt("",!0)]),_:3},8,["class"]),ye(ce(VU),{class:"w-64 divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none max-h-[50vh] overflow-y-auto"},{default:Ce(()=>[En(t.$slots,"header"),de("div",F7,[En(t.$slots,"default")]),En(t.$slots,"footer")]),_:3})]),_:3},8,["placement"])]),_:3}))}}),$7=rt({__name:"DropDownItem",props:{href:{},to:{},current:{type:Boolean}},setup(e){return(t,i)=>(V(),je(ce(HU),{class:"dropdown-item"},{default:Ce(({active:r})=>[(V(),je(_c(t.$attrs.disabled?"span":os),{class:kn(["block px-4 py-2 text-sm !no-underline",{"bg-blue-50 !text-blue-900":r,"text-gray-700":!r,"font-bold border-l-2 border-neutral-900 bg-transparent-black-100":t.current}]),href:t.href,to:t.to},{default:Ce(()=>[En(t.$slots,"default",{},void 0,!0)]),_:2},1032,["class","href","to"]))]),_:3}))}});const jd=sn($7,[["__scopeId","data-v-f3acbc35"]]),z7=rt({__name:"ThemeSelector",setup(e){const{activeTheme:t,availableThemes:i,setTheme:r,isEnabled:s}=QA();function u(d){return d.charAt(0).toUpperCase()+d.slice(1)}return(d,l)=>as((V(),je(z1,{label:"Select Theme",showChevron:!1},{label:Ce(()=>[ye(N8)]),default:Ce(()=>[(V(!0),pe(Nt,null,$n(ce(i),m=>(V(),je(jd,{key:m,current:ce(t)===m,onClick:g=>ce(r)(m)},{default:Ce(()=>[Mt(xt(u(m)),1)]),_:2},1032,["current","onClick"]))),128))]),_:1},512)),[[sa,ce(s)&&ce(i).length>1]])}}),B7=e=>(ao("data-v-73b8c317"),e=e(),oo(),e),N7={class:"app-menu flex flex-col w-[90vw] sm:w-md sm:px-8 sm:py-4 p-4 h-full relative"},j7={class:"app-menu__header flex mt-4 pt-6 pb-2 justify-between items-center"},U7={class:"md:text-xl text-lg font-bold"},V7={class:"flex items-center"},H7={class:"app-menu__items flex-1 py-4 border-y border-neutral-600 overflow-auto"},G7={class:"app-menu__footer pt-4 flex flex-col items-center text-sm"},W7=B7(()=>de("p",null,[Mt(" Powered by "),de("a",{href:"https://umn-latis.github.io/elevator/"},"Elevator")],-1)),q7={href:"https://umn.edu"},Z7=rt({__name:"AppMenuPure",props:{instance:{},currentUser:{}},emits:["close"],setup(e){return(t,i)=>(V(),pe("nav",N7,[ye(_M,{class:"absolute right-4 top-4",onClick:i[0]||(i[0]=r=>t.$emit("close"))}),de("header",j7,[ye(os,{to:"/"},{default:Ce(()=>[de("h1",U7,xt(t.instance.name),1)]),_:1}),de("div",V7,[ye(z7)])]),de("div",H7,[En(t.$slots,"default",{},void 0,!0)]),de("footer",G7,[W7,de("p",null,[Mt(" Made by "),de("a",q7,[ye(Vj,{class:"inline-block w-6"})])])])]))}});const K7=sn(Z7,[["__scopeId","data-v-73b8c317"]]),X7=rt({__name:"AppMenuItem",props:{href:{default:void 0},to:{default:void 0},isCurrentPage:{type:Boolean,default:!1}},setup(e){return(t,i)=>(V(),je(os,{href:t.href,to:t.to,class:kn(["app-menu-item group w-full flex items-center pl-2 py-2 font-medium my-1 hover:no-underline focus:outline-none focus:ring-2 focus:ring-indigo-500 hover:bg-blue-100 hover:text-neutral-900",{"is-current-page":t.isCurrentPage}])},{default:Ce(()=>[En(t.$slots,"default",{},void 0,!0)]),_:3},8,["href","to","class"]))}});const gr=sn(X7,[["__scopeId","data-v-22b8d060"]]),Y7={class:"expandable-nav-section"},J7={class:"flex-1"},Q7=rt({__name:"AppMenuGroup",props:{label:{}},setup(e){return(t,i)=>(V(),pe("div",Y7,[ye(ce(RU),{as:"div",class:"space-y-1"},{default:Ce(({open:r})=>[ye(ce(FU),{class:"group w-full flex items-center pl-2 pr-1 py-2 text-left font-medium focus:outline-none focus:ring-2 focus:ring-indigo-500 my-1 hover:bg-blue-100 hover:text-neutral-900"},{default:Ce(()=>[de("span",J7,xt(t.label),1),ye(Ih,{class:kn(["w-5 h-5 text-neutral-400 group-hover:text-neutral-500 transform ease-in-out duration-150",{" -rotate-90":!r}])},null,8,["class"])]),_:2},1024),ye(ce($U),{class:"space-y-1 pl-8"},{default:Ce(()=>[En(t.$slots,"default",{},void 0,!0)]),_:3})]),_:3})]))}});const N_=sn(Q7,[["__scopeId","data-v-93c4a54d"]]),eV={key:0},tV=rt({__name:"PagesNavSection",props:{pages:{}},setup(e){const t=e;function i(m){return`${si.instance.base.path}/page/view/${m.id}`===window.location.pathname}function r(m){return{id:m.id,name:m.title,isCurrentPage:i(m),href:`/page/view/${m.id}`}}function s(m){return m.map(g=>{const x=r(g);return!g.children||g.children.length===0?x:{...x,children:[x,...g.children.map(r)]}})}const u=Re([]),d=Iu();function l(m){return m.filter(g=>g.includeInNav)}return fn([()=>t.pages,()=>d.path],()=>{const m=l(t.pages);u.value=s(m)},{immediate:!0}),(m,g)=>(V(!0),pe(Nt,null,$n(u.value,x=>(V(),pe(Nt,{key:x.id},[x.children?(V(),je(N_,{key:1,label:x.name},{default:Ce(()=>[(V(!0),pe(Nt,null,$n(x.children,w=>(V(),je(gr,{key:w.name,to:w.href??"#",isCurrentPage:w.isCurrentPage},{default:Ce(()=>[Mt(xt(w.name),1)]),_:2},1032,["to","isCurrentPage"]))),128))]),_:2},1032,["label"])):(V(),pe("div",eV,[ye(gr,{to:x.href??"#",isCurrentPage:x.isCurrentPage},{default:Ce(()=>[Mt(xt(x.name),1)]),_:2},1032,["to","isCurrentPage"])]))],64))),128))}}),nV={},iV={class:"my-2 border-neutral-500 max-w-xs"};function rV(e,t){return V(),pe("hr",iV)}const ak=sn(nV,[["render",rV]]),sV=rt({__name:"EditNavSection",props:{currentUser:{},instance:{},assetId:{}},setup(e){const t=e,i=si.instance.base.url;async function r(){if(!t.assetId)throw new Error("assetId is null. Cannot delete asset.");if(confirm("Are you sure you want to delete this asset and all derivatives"))try{await Hn.deleteAsset(t.assetId),window.location.href=`${i}/assetManager/userAssets`}catch(s){console.error(s),alert("Error deleting asset.")}}return(s,u)=>{var d;return(d=s.currentUser)!=null&&d.canManageAssets?(V(),je(N_,{key:0,label:"Manage Assets"},{default:Ce(()=>[ye(gr,{href:`${ce(i)}/assetManager/userAssets/`},{default:Ce(()=>[Mt(" All My Assets ")]),_:1},8,["href"]),ye(gr,{to:"/asset/create"},{default:Ce(()=>[Mt("Add Asset")]),_:1}),s.assetId?(V(),pe(Nt,{key:0},[ye(gr,{href:`${ce(i)}/assetManager/editAsset/${s.assetId}`},{default:Ce(()=>[Mt(" Edit Asset ")]),_:1},8,["href"]),ye(gr,{onClick:r},{default:Ce(()=>[Mt(" Delete Asset ")]),_:1}),ye(gr,{href:`${ce(i)}/assetManager/restoreAsset/${s.assetId}`},{default:Ce(()=>[Mt(" Restore Asset ")]),_:1},8,["href"]),ye(ak)],64)):tt("",!0)]),_:1})):tt("",!0)}}});const aV=rt({__name:"AdminNavSection",props:{instance:{},currentUser:{}},setup(e){const t=si.instance.base.url;return(i,r)=>(V(),je(N_,{label:"Admin"},{default:Ce(()=>[ye(gr,{href:`${ce(t)}/instances/edit/${i.instance.id}`},{default:Ce(()=>[Mt(" Instance Settings ")]),_:1},8,["href"]),ye(gr,{href:`${ce(t)}/permissions/edit/instance/${i.instance.id}`},{default:Ce(()=>[Mt(" Instance Permissions ")]),_:1},8,["href"]),ye(gr,{href:`${ce(t)}/instances/customPages`},{default:Ce(()=>[Mt(" Instance Pages ")]),_:1},8,["href"]),ye(gr,{href:`${ce(t)}/reports`},{default:Ce(()=>[Mt(" Reports ")]),_:1},8,["href"]),ye(gr,{href:`${ce(t)}/templates`},{default:Ce(()=>[Mt(" Edit Templates ")]),_:1},8,["href"]),ye(gr,{href:`${ce(t)}/collectionManager`},{default:Ce(()=>[Mt(" Edit Collections ")]),_:1},8,["href"]),ye(gr,{href:`${ce(t)}/assetManager/importFromCSV`},{default:Ce(()=>[Mt(" Import from CSV ")]),_:1},8,["href"]),ye(gr,{href:`${ce(t)}/assetManager/exportCSV`},{default:Ce(()=>[Mt(" Export to CSV ")]),_:1},8,["href"]),i.currentUser.isSuperAdmin?(V(),pe(Nt,{key:0},[ye(ak),ye(gr,{href:`${ce(t)}/admin`},{default:Ce(()=>[Mt(" Super Admin 🦸‍♀️ ")]),_:1},8,["href"]),ye(gr,{href:`${ce(t)}/admin/logs`},{default:Ce(()=>[Mt(" Logs ")]),_:1},8,["href"])],64)):tt("",!0)]),_:1}))}}),oV=rt({__name:"HelpNavSection",props:{instance:{}},setup(e){return(t,i)=>(V(),je(N_,{label:"Help"},{default:Ce(()=>[ye(gr,{href:"http://umn-latis.github.io/elevator/"},{default:Ce(()=>[Mt(" Documentation ")]),_:1}),t.instance.contact?(V(),je(gr,{key:0,href:t.instance.contact},{default:Ce(()=>[Mt(" Contact ")]),_:1},8,["href"])):tt("",!0)]),_:1}))}}),lV={class:"h-full"},cV=rt({__name:"AppMenu",emits:["close"],setup(e,{emit:t}){const i=Ei(),r=Lo(),{currentUser:s,instance:u,pages:d}=TT(i),{activeAssetId:l}=TT(r),m=Iu();return fn(()=>m.path,()=>t("close")),(g,x)=>(V(),pe("div",lV,[ye(K7,{instance:ce(i).instance,currentUser:ce(i).currentUser,onClose:x[0]||(x[0]=w=>g.$emit("close"))},{default:Ce(()=>{var w,I;return[ce(i).instance.userCanSearchAndBrowse?(V(),pe(Nt,{key:0},[ye(tV,{pages:ce(d)},null,8,["pages"]),ce(s)||ce(i).collections.length?(V(),je(gr,{key:0,to:"/search/listCollections"},{default:Ce(()=>[Mt(" Collections ")]),_:1})):tt("",!0),ce(s)?(V(),je(gr,{key:1,to:"/drawers/listDrawers"},{default:Ce(()=>[Mt(" Drawers ")]),_:1})):tt("",!0),(w=ce(s))!=null&&w.canManageAssets?(V(),je(sV,{key:2,currentUser:ce(s),instance:ce(u),assetId:ce(l)},null,8,["currentUser","instance","assetId"])):tt("",!0),(I=ce(s))!=null&&I.isAdmin?(V(),je(aV,{key:3,currentUser:ce(s),instance:ce(u)},null,8,["currentUser","instance"])):tt("",!0)],64)):tt("",!0),ye(oV,{instance:ce(u)},null,8,["instance"])]}),_:1},8,["instance","currentUser"])]))}});const uV=sn(cV,[["__scopeId","data-v-38c4e5a9"]]);/*!
* tabbable 6.1.2
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var ok=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],jv=ok.join(","),lk=typeof Element>"u",_u=lk?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Uv=!lk&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},Vv=function e(t,i){var r;i===void 0&&(i=!0);var s=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),u=s===""||s==="true",d=u||i&&t&&e(t.parentNode);return d},dV=function(t){var i,r=t==null||(i=t.getAttribute)===null||i===void 0?void 0:i.call(t,"contenteditable");return r===""||r==="true"},ck=function(t,i,r){if(Vv(t))return[];var s=Array.prototype.slice.apply(t.querySelectorAll(jv));return i&&_u.call(t,jv)&&s.unshift(t),s=s.filter(r),s},uk=function e(t,i,r){for(var s=[],u=Array.from(t);u.length;){var d=u.shift();if(!Vv(d,!1))if(d.tagName==="SLOT"){var l=d.assignedElements(),m=l.length?l:d.children,g=e(m,!0,r);r.flatten?s.push.apply(s,g):s.push({scopeParent:d,candidates:g})}else{var x=_u.call(d,jv);x&&r.filter(d)&&(i||!t.includes(d))&&s.push(d);var w=d.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(d),I=!Vv(w,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(d));if(w&&I){var C=e(w===!0?d.children:w.children,!0,r);r.flatten?s.push.apply(s,C):s.push({scopeParent:d,candidates:C})}else u.unshift.apply(u,d.children)}}return s},dk=function(t,i){return t.tabIndex<0&&(i||/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||dV(t))&&isNaN(parseInt(t.getAttribute("tabindex"),10))?0:t.tabIndex},hV=function(t,i){return t.tabIndex===i.tabIndex?t.documentOrder-i.documentOrder:t.tabIndex-i.tabIndex},hk=function(t){return t.tagName==="INPUT"},fV=function(t){return hk(t)&&t.type==="hidden"},pV=function(t){var i=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return i},mV=function(t,i){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===i)return t[r]},gV=function(t){if(!t.name)return!0;var i=t.form||Uv(t),r=function(l){return i.querySelectorAll('input[type="radio"][name="'+l+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(t.name));else try{s=r(t.name)}catch(d){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",d.message),!1}var u=mV(s,t.form);return!u||u===t},vV=function(t){return hk(t)&&t.type==="radio"},_V=function(t){return vV(t)&&!gV(t)},yV=function(t){var i,r=t&&Uv(t),s=(i=r)===null||i===void 0?void 0:i.host,u=!1;if(r&&r!==t){var d,l,m;for(u=!!((d=s)!==null&&d!==void 0&&(l=d.ownerDocument)!==null&&l!==void 0&&l.contains(s)||t!=null&&(m=t.ownerDocument)!==null&&m!==void 0&&m.contains(t));!u&&s;){var g,x,w;r=Uv(s),s=(g=r)===null||g===void 0?void 0:g.host,u=!!((x=s)!==null&&x!==void 0&&(w=x.ownerDocument)!==null&&w!==void 0&&w.contains(s))}}return u},VE=function(t){var i=t.getBoundingClientRect(),r=i.width,s=i.height;return r===0&&s===0},bV=function(t,i){var r=i.displayCheck,s=i.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var u=_u.call(t,"details>summary:first-of-type"),d=u?t.parentElement:t;if(_u.call(d,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var l=t;t;){var m=t.parentElement,g=Uv(t);if(m&&!m.shadowRoot&&s(m)===!0)return VE(t);t.assignedSlot?t=t.assignedSlot:!m&&g!==t.ownerDocument?t=g.host:t=m}t=l}if(yV(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return VE(t);return!1},xV=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var i=t.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var s=i.children.item(r);if(s.tagName==="LEGEND")return _u.call(i,"fieldset[disabled] *")?!0:!s.contains(t)}return!0}i=i.parentElement}return!1},Hv=function(t,i){return!(i.disabled||Vv(i)||fV(i)||bV(i,t)||pV(i)||xV(i))},tx=function(t,i){return!(_V(i)||dk(i)<0||!Hv(t,i))},wV=function(t){var i=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},SV=function e(t){var i=[],r=[];return t.forEach(function(s,u){var d=!!s.scopeParent,l=d?s.scopeParent:s,m=dk(l,d),g=d?e(s.candidates):l;m===0?d?i.push.apply(i,g):i.push(l):r.push({documentOrder:u,tabIndex:m,item:s,isScope:d,content:g})}),r.sort(hV).reduce(function(s,u){return u.isScope?s.push.apply(s,u.content):s.push(u.content),s},[]).concat(i)},TV=function(t,i){i=i||{};var r;return i.getShadowRoot?r=uk([t],i.includeContainer,{filter:tx.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:wV}):r=ck(t,i.includeContainer,tx.bind(null,i)),SV(r)},EV=function(t,i){i=i||{};var r;return i.getShadowRoot?r=uk([t],i.includeContainer,{filter:Hv.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=ck(t,i.includeContainer,Hv.bind(null,i)),r},Ng=function(t,i){if(i=i||{},!t)throw new Error("No node provided");return _u.call(t,jv)===!1?!1:tx(i,t)},IV=ok.concat("iframe").join(","),D0=function(t,i){if(i=i||{},!t)throw new Error("No node provided");return _u.call(t,IV)===!1?!1:Hv(i,t)};/*!
* focus-trap 7.4.3
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function HE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),i.push.apply(i,r)}return i}function GE(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?HE(Object(i),!0).forEach(function(r){CV(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):HE(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}function CV(e,t,i){return t=MV(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function AV(e,t){if(typeof e!="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MV(e){var t=AV(e,"string");return typeof t=="symbol"?t:String(t)}var WE={activateTrap:function(t,i){if(t.length>0){var r=t[t.length-1];r!==i&&r.pause()}var s=t.indexOf(i);s===-1||t.splice(s,1),t.push(i)},deactivateTrap:function(t,i){var r=t.indexOf(i);r!==-1&&t.splice(r,1),t.length>0&&t[t.length-1].unpause()}},kV=function(t){return t.tagName&&t.tagName.toLowerCase()==="input"&&typeof t.select=="function"},PV=function(t){return t.key==="Escape"||t.key==="Esc"||t.keyCode===27},vp=function(t){return t.key==="Tab"||t.keyCode===9},LV=function(t){return vp(t)&&!t.shiftKey},OV=function(t){return vp(t)&&t.shiftKey},qE=function(t){return setTimeout(t,0)},ZE=function(t,i){var r=-1;return t.every(function(s,u){return i(s)?(r=u,!1):!0}),r},zf=function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];return typeof t=="function"?t.apply(void 0,r):t},jg=function(t){return t.target.shadowRoot&&typeof t.composedPath=="function"?t.composedPath()[0]:t.target},RV=[],FV=function(t,i){var r=(i==null?void 0:i.document)||document,s=(i==null?void 0:i.trapStack)||RV,u=GE({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:LV,isKeyBackward:OV},i),d={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},l,m=function(U,B,ie){return U&&U[B]!==void 0?U[B]:u[ie||B]},g=function(U,B){var ie=typeof(B==null?void 0:B.composedPath)=="function"?B.composedPath():void 0;return d.containerGroups.findIndex(function(X){var ne=X.container,Ee=X.tabbableNodes;return ne.contains(U)||(ie==null?void 0:ie.includes(ne))||Ee.find(function(Ie){return Ie===U})})},x=function(U){var B=u[U];if(typeof B=="function"){for(var ie=arguments.length,X=new Array(ie>1?ie-1:0),ne=1;ne<ie;ne++)X[ne-1]=arguments[ne];B=B.apply(void 0,X)}if(B===!0&&(B=void 0),!B){if(B===void 0||B===!1)return B;throw new Error("`".concat(U,"` was specified but was not a node, or did not return a node"))}var Ee=B;if(typeof B=="string"&&(Ee=r.querySelector(B),!Ee))throw new Error("`".concat(U,"` as selector refers to no known node"));return Ee},w=function(){var U=x("initialFocus");if(U===!1)return!1;if(U===void 0||!D0(U,u.tabbableOptions))if(g(r.activeElement)>=0)U=r.activeElement;else{var B=d.tabbableGroups[0],ie=B&&B.firstTabbableNode;U=ie||x("fallbackFocus")}if(!U)throw new Error("Your focus-trap needs to have at least one focusable element");return U},I=function(){if(d.containerGroups=d.containers.map(function(U){var B=TV(U,u.tabbableOptions),ie=EV(U,u.tabbableOptions);return{container:U,tabbableNodes:B,focusableNodes:ie,firstTabbableNode:B.length>0?B[0]:null,lastTabbableNode:B.length>0?B[B.length-1]:null,nextTabbableNode:function(ne){var Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Ie=ie.findIndex(function(Xe){return Xe===ne});if(!(Ie<0))return Ee?ie.slice(Ie+1).find(function(Xe){return Ng(Xe,u.tabbableOptions)}):ie.slice(0,Ie).reverse().find(function(Xe){return Ng(Xe,u.tabbableOptions)})}}}),d.tabbableGroups=d.containerGroups.filter(function(U){return U.tabbableNodes.length>0}),d.tabbableGroups.length<=0&&!x("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},C=function G(U){if(U!==!1&&U!==r.activeElement){if(!U||!U.focus){G(w());return}U.focus({preventScroll:!!u.preventScroll}),d.mostRecentlyFocusedNode=U,kV(U)&&U.select()}},A=function(U){var B=x("setReturnFocus",U);return B||(B===!1?!1:U)},L=function(U){var B=jg(U);if(!(g(B,U)>=0)){if(zf(u.clickOutsideDeactivates,U)){l.deactivate({returnFocus:u.returnFocusOnDeactivate});return}zf(u.allowOutsideClick,U)||U.preventDefault()}},$=function(U){var B=jg(U),ie=g(B,U)>=0;ie||B instanceof Document?ie&&(d.mostRecentlyFocusedNode=B):(U.stopImmediatePropagation(),C(d.mostRecentlyFocusedNode||w()))},F=function(U){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ie=jg(U);I();var X=null;if(d.tabbableGroups.length>0){var ne=g(ie,U),Ee=ne>=0?d.containerGroups[ne]:void 0;if(ne<0)B?X=d.tabbableGroups[d.tabbableGroups.length-1].lastTabbableNode:X=d.tabbableGroups[0].firstTabbableNode;else if(B){var Ie=ZE(d.tabbableGroups,function(nt){var et=nt.firstTabbableNode;return ie===et});if(Ie<0&&(Ee.container===ie||D0(ie,u.tabbableOptions)&&!Ng(ie,u.tabbableOptions)&&!Ee.nextTabbableNode(ie,!1))&&(Ie=ne),Ie>=0){var Xe=Ie===0?d.tabbableGroups.length-1:Ie-1,lt=d.tabbableGroups[Xe];X=lt.lastTabbableNode}else vp(U)||(X=Ee.nextTabbableNode(ie,!1))}else{var st=ZE(d.tabbableGroups,function(nt){var et=nt.lastTabbableNode;return ie===et});if(st<0&&(Ee.container===ie||D0(ie,u.tabbableOptions)&&!Ng(ie,u.tabbableOptions)&&!Ee.nextTabbableNode(ie))&&(st=ne),st>=0){var $t=st===d.tabbableGroups.length-1?0:st+1,It=d.tabbableGroups[$t];X=It.firstTabbableNode}else vp(U)||(X=Ee.nextTabbableNode(ie))}}else X=x("fallbackFocus");X&&(vp(U)&&U.preventDefault(),C(X))},z=function(U){if(PV(U)&&zf(u.escapeDeactivates,U)!==!1){U.preventDefault(),l.deactivate();return}(u.isKeyForward(U)||u.isKeyBackward(U))&&F(U,u.isKeyBackward(U))},ee=function(U){var B=jg(U);g(B,U)>=0||zf(u.clickOutsideDeactivates,U)||zf(u.allowOutsideClick,U)||(U.preventDefault(),U.stopImmediatePropagation())},H=function(){if(d.active)return WE.activateTrap(s,l),d.delayInitialFocusTimer=u.delayInitialFocus?qE(function(){C(w())}):C(w()),r.addEventListener("focusin",$,!0),r.addEventListener("mousedown",L,{capture:!0,passive:!1}),r.addEventListener("touchstart",L,{capture:!0,passive:!1}),r.addEventListener("click",ee,{capture:!0,passive:!1}),r.addEventListener("keydown",z,{capture:!0,passive:!1}),l},Q=function(){if(d.active)return r.removeEventListener("focusin",$,!0),r.removeEventListener("mousedown",L,!0),r.removeEventListener("touchstart",L,!0),r.removeEventListener("click",ee,!0),r.removeEventListener("keydown",z,!0),l},ae=function(U){var B=U.some(function(ie){var X=Array.from(ie.removedNodes);return X.some(function(ne){return ne===d.mostRecentlyFocusedNode})});B&&C(w())},be=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(ae):void 0,te=function(){be&&(be.disconnect(),d.active&&!d.paused&&d.containers.map(function(U){be.observe(U,{subtree:!0,childList:!0})}))};return l={get active(){return d.active},get paused(){return d.paused},activate:function(U){if(d.active)return this;var B=m(U,"onActivate"),ie=m(U,"onPostActivate"),X=m(U,"checkCanFocusTrap");X||I(),d.active=!0,d.paused=!1,d.nodeFocusedBeforeActivation=r.activeElement,B==null||B();var ne=function(){X&&I(),H(),te(),ie==null||ie()};return X?(X(d.containers.concat()).then(ne,ne),this):(ne(),this)},deactivate:function(U){if(!d.active)return this;var B=GE({onDeactivate:u.onDeactivate,onPostDeactivate:u.onPostDeactivate,checkCanReturnFocus:u.checkCanReturnFocus},U);clearTimeout(d.delayInitialFocusTimer),d.delayInitialFocusTimer=void 0,Q(),d.active=!1,d.paused=!1,te(),WE.deactivateTrap(s,l);var ie=m(B,"onDeactivate"),X=m(B,"onPostDeactivate"),ne=m(B,"checkCanReturnFocus"),Ee=m(B,"returnFocus","returnFocusOnDeactivate");ie==null||ie();var Ie=function(){qE(function(){Ee&&C(A(d.nodeFocusedBeforeActivation)),X==null||X()})};return Ee&&ne?(ne(A(d.nodeFocusedBeforeActivation)).then(Ie,Ie),this):(Ie(),this)},pause:function(U){if(d.paused||!d.active)return this;var B=m(U,"onPause"),ie=m(U,"onPostPause");return d.paused=!0,B==null||B(),Q(),te(),ie==null||ie(),this},unpause:function(U){if(!d.paused||!d.active)return this;var B=m(U,"onUnpause"),ie=m(U,"onPostUnpause");return d.paused=!1,B==null||B(),I(),H(),te(),ie==null||ie(),this},updateContainerElements:function(U){var B=[].concat(U).filter(Boolean);return d.containers=B.map(function(ie){return typeof ie=="string"?r.querySelector(ie):ie}),d.active&&I(),te(),this}},l.updateContainerElements(t),l};const $V=rt({name:"UseFocusTrap",props:["as","options"],setup(e,{slots:t}){let i;const r=Re(),s=()=>i&&i.activate(),u=()=>i&&i.deactivate();return fn(()=>Fs(r),d=>{d&&(i=FV(d,e.options||{}),s())},{flush:"post"}),Xp(()=>u()),()=>{if(t.default)return ni(e.as||"div",{ref:r},t.default())}}}),zV={class:"overflow-hidden fixed inset-0 pointer-events-none z-30"},BV=["onClick"],NV=rt({__name:"AppMenuButton",setup(e){const t=Re(!1),i=Re(null);function r(){var u;t.value=!1,(u=i.value)==null||u.focus()}function s(u){t.value&&u.key==="Escape"&&r()}return Fn(()=>{document.addEventListener("keydown",s)}),Wi(()=>document.removeEventListener("keydown",s)),(u,d)=>(V(),pe(Nt,null,[de("button",{ref_key:"buttonRef",ref:i,class:"app-menu-button p-2 rounded-full",tabindex:"0",onClick:d[0]||(d[0]=l=>t.value=!t.value)},[ye(g8)],512),(V(),je(tm,{to:"body"},[t.value?(V(),je(ce($V),{key:0},{default:Ce(()=>[de("div",zV,[ye(_r,{name:"fade"},{default:Ce(()=>[as(de("div",{class:"fixed inset-0 transition-opacity z-20 bg-black opacity-50 pointer-events-auto",onClick:Do(r,["self"])},null,8,BV),[[sa,t.value]])]),_:1}),ye(_r,{name:"slide-right"},{default:Ce(()=>[as(ye(uV,{class:"absolute right-0 top-0 bottom-0 z-30 transition-transform transform-gpu pointer-events-auto",onClose:r},null,512),[[sa,t.value]])]),_:1})])]),_:1})):tt("",!0)]))],64))}});const jV=sn(NV,[["__scopeId","data-v-f780fd62"]]),fk=Symbol("Tabs"),pk=Symbol(),nx=["grid","list","timeline","map","gallery"],ys={BEST_MATCH:0,TITLE:"title.raw",LAST_MODIFIED_DESC:"lastModified.desc",LAST_MODIFIED_ASC:"lastModified.asc",CUSTOM:"custom"},sl={DATE_RANGE:"GLOBAL_DATE_RANGE",LOCATION:"GLOBAL_LOCATION",FILE_TYPE:"GLOBAL_FILE_TYPE"};function KE(e){if(!e)return null;const t=Date.parse(e+" UTC");if(!isNaN(t))return(t/1e3).toString();if(e.toLowerCase().indexOf("bc")!=-1){e=e.replace(/,/g,"");const i=/[0-9]+/g,r=e.match(i);if(r&&r.length>0){let s=parseInt(r[0]);return e.toLowerCase().indexOf("century")!=-1&&(s=s*100),(-1*s*31556900-1970*31556900).toString()}}return null}const UV={[ys.BEST_MATCH]:"Best Match",[ys.TITLE]:"Default Title",[ys.LAST_MODIFIED_ASC]:"Modified Date (oldest to newest)",[ys.LAST_MODIFIED_DESC]:"Modified Date (newest to oldest)"},VV=()=>({searchId:Re(void 0),status:Re("idle"),query:Re(""),filterBy:Nr({collectionIds:[],specificFieldsMap:new Map,searchableFieldsOperator:"AND",globalDateRange:null,globalLocation:null,globalFileType:null,includeHiddenAssets:!1}),matches:Re([]),totalResults:Re(void 0),currentPage:Re(0),searchEntry:Re(null),resultsView:Re("grid"),sortOptions:Re(UV),sort:Re(ys.BEST_MATCH),beforeNewSearchHandlers:[],afterNewSearchHandlers:[]}),Kl=e=>({isReady:Le(()=>e.status.value==="success"),isValidSearch:Le(()=>{if(e.filterBy.globalLocation){const t=parseFloat(e.filterBy.globalLocation.radius);if(isNaN(t)||t<=0)return!1}return!0}),hasMoreResults:Le(()=>e.matches.value.length<(e.totalResults.value??0)),hasDateRangeFilter:Le(()=>e.filterBy.globalDateRange!==null),hasLocationFilter:Le(()=>e.filterBy.globalLocation!==null),hasFileTypeFilter:Le(()=>e.filterBy.globalFileType!==null),filteredByCount:Le(()=>e.filterBy.collectionIds.length+e.filterBy.specificFieldsMap.size+(e.filterBy.globalDateRange?1:0)+(e.filterBy.globalLocation?1:0)+(e.filterBy.includeHiddenAssets?1:0)+(e.filterBy.globalFileType?1:0)),specificFieldFilterCount:Le(()=>e.filterBy.specificFieldsMap.size),globalFieldFilterCount:Le(()=>(e.filterBy.globalDateRange?1:0)+(e.filterBy.globalLocation?1:0)+(e.filterBy.globalFileType?1:0)),totalFieldFilterCount:Le(()=>Kl(e).specificFieldFilterCount.value+Kl(e).globalFieldFilterCount.value),hasFieldFiltersApplied:Le(()=>Kl(e).totalFieldFilterCount.value>0),globalDateRangeAsFilter:Le(()=>{var t,i;return e.filterBy.globalDateRange?{id:sl.DATE_RANGE,fieldId:sl.DATE_RANGE,value:JSON.stringify([((t=e.filterBy.globalDateRange)==null?void 0:t.startDate)??null,((i=e.filterBy.globalDateRange)==null?void 0:i.endDate)??null]),isFuzzy:!1,createdAt:e.filterBy.globalDateRange.createdAt}:null}),globalLocationAsFilter:Le(()=>e.filterBy.globalLocation?{id:sl.LOCATION,fieldId:sl.LOCATION,value:JSON.stringify({lng:e.filterBy.globalLocation.lng,lat:e.filterBy.globalLocation.lat}),isFuzzy:!1,createdAt:e.filterBy.globalLocation.createdAt}:null),globalFileTypeAsFilter:Le(()=>e.filterBy.globalFileType?{id:sl.FILE_TYPE,fieldId:sl.FILE_TYPE,value:e.filterBy.globalFileType.fileType,isFuzzy:!1,createdAt:e.filterBy.globalFileType.createdAt}:null),hasFiltersApplied:Le(()=>Kl(e).filteredByCount.value>0),searchRequestOptions:Le(()=>{var u,d,l,m,g,x;const i=Array.from(e.filterBy.specificFieldsMap.values()).map(w=>({field:w.fieldId,text:w.value,fuzzy:w.isFuzzy})),r=((u=e.filterBy.globalDateRange)==null?void 0:u.startDate.toString())??"",s=((d=e.filterBy.globalDateRange)==null?void 0:d.endDate.toString())??"";return{sort:e.sort.value,collection:e.filterBy.collectionIds.length?e.filterBy.collectionIds:void 0,combineSpecificSearches:e.filterBy.searchableFieldsOperator,specificFieldSearch:i,startDateText:r,startDate:KE(r)??"",endDateText:s,endDate:KE(s)??"",longitude:((l=e.filterBy.globalLocation)==null?void 0:l.lng)??"",latitude:((m=e.filterBy.globalLocation)==null?void 0:m.lat)??"",distance:((g=e.filterBy.globalLocation)==null?void 0:g.radius)??"",fileTypesSearch:(x=e.filterBy.globalFileType)==null?void 0:x.fileType,showHidden:e.filterBy.includeHiddenAssets?"on":void 0}}),specificFieldFilters:Le(()=>Array.from(e.filterBy.specificFieldsMap.values())),isBrowsingCollection:Le(()=>{var t,i,r,s;return((t=e.searchEntry.value)==null?void 0:t.searchText)===""&&((r=(i=e.searchEntry.value)==null?void 0:i.collection)==null?void 0:r.length)===1&&(((s=e.searchEntry.value)==null?void 0:s.specificFieldSearch)??[]).length===0}),browsingCollectionId:Le(()=>{var i,r;if(!Kl(e).isBrowsingCollection.value)return null;const t=(r=(i=e.searchEntry.value)==null?void 0:i.collection)==null?void 0:r[0];return t?Number.parseInt(t):null}),supportedSpecificFieldTypes:Le(()=>["text","select","checkbox","date","tag list","text area","multiselect"]),currentSearchTerm:Le(()=>{var t;return((t=e.searchEntry.value)==null?void 0:t.searchText)??""})}),mk=e=>({async setSortOption(t){return e.sort.value=t,e.searchId.value=await this.getSearchId(),this.search(e.searchId.value)},addCollectionIdFilter(t){e.filterBy.collectionIds.push(t)},removeCollectionIdFilter(t){const i=e.filterBy.collectionIds.indexOf(t);if(i<0)throw new Error(`Cannot remove collection id ${t} from searchStore. ID is not in filterBy.collectionIds`);e.filterBy.collectionIds.splice(i,1)},clearCollectionIdFilters(){e.filterBy.collectionIds=[]},addDateRangeFilter(){e.filterBy.globalDateRange={startDate:"",endDate:"",createdAt:new Date().toISOString()}},removeDateRangeFilter(){e.filterBy.globalDateRange=null},addLocationFilter(){e.filterBy.globalLocation={lng:"-93.2277",lat:"44.9740",radius:"500",createdAt:new Date().toISOString()}},removeLocationFilter(){e.filterBy.globalLocation=null},updateLocationFilter(t){const i=e.filterBy.globalLocation;if(!i)throw new Error("Cannot update location filter. No location filter exists.");e.filterBy.globalLocation={...i,...t}},addFileTypeFilter(){e.filterBy.globalFileType={fileType:"",createdAt:new Date().toISOString()}},updateFileTypeFilter(t){const i=e.filterBy.globalFileType;if(!i)throw new Error("Cannot update file type filter. No file type filter exists.");e.filterBy.globalFileType={...i,fileType:t}},removeFileTypeFilter(){e.filterBy.globalFileType=null},getSearchableFieldFilter(t){return e.filterBy.specificFieldsMap.get(t)??null},updateSearchableFieldFilter(t,i){const r=this.getSearchableFieldFilter(t);if(!r)throw new Error(`cannot update filter with id ${t}. No such filter exists.`);if(i.id)throw new Error(`cannot update filter with id ${t}. Cannot update the id of a filter.`);e.filterBy.specificFieldsMap.set(t,{...r,...i})},async addSearchableFieldFilter(t,i){const s=Ei().getSearchableField(t);if(!s)throw new Error(`Cannot add searchable field filter for field ${t}: no such field exists`);const u={fieldId:t,value:"",isFuzzy:!1,id:crypto.randomUUID(),createdAt:new Date().toISOString(),...i};s.type==="checkbox"&&(u.value="boolean_true"),e.filterBy.specificFieldsMap.set(u.id,u)},removeSearchableFieldFilter(t){e.filterBy.specificFieldsMap.delete(t)},updateSearchableFieldFilterValue(t,i){const r=e.filterBy.specificFieldsMap.get(t);if(!r)throw new Error(`Cannot update value of searchable field filter ${t}: no such filter found`);r.value=i},clearSearchableFieldsFilters(){e.filterBy.specificFieldsMap.clear(),e.filterBy.searchableFieldsOperator="AND",e.filterBy.globalDateRange=null,e.filterBy.globalLocation=null,e.filterBy.globalFileType=null},updateFilterFieldId(t,i){const r=Ei(),s=e.filterBy.specificFieldsMap.get(t);if(!s)throw new Error(`Cannot update searchable field filter. No filter exists with id: ${t}`);if(s.fieldId===i)return;const u=r.getSearchableField(i);if(!u)throw new Error(`Cannot update searchable field filter. No field is found with id ${i}.`);const d={...s,fieldId:u.id};e.filterBy.specificFieldsMap.set(t,d)},updateSearchableFieldsOperator(t){const i=["AND","OR"];if(!i.includes(t))throw new Error(`Cannot update searchable fields operator. ${t} is not in ${i.join(", ")}`);e.filterBy.searchableFieldsOperator=t},updateSearchableFieldFilterIsFuzzy(t,i){const r=e.filterBy.specificFieldsMap.get(t);if(!r)throw new Error(`Cannot update isFuzzy of searchable field filter ${t}: no such filter found`);r.isFuzzy=i},clearQuery(){e.query.value=""},clearAllFilters(){this.clearCollectionIdFilters(),this.clearSearchableFieldsFilters(),e.filterBy.searchableFieldsOperator="AND",e.filterBy.includeHiddenAssets=!1},reset(){this.clearAllFilters(),this.clearQuery()},async getSearchId(){return Hn.getSearchId(e.query.value,Kl(e).searchRequestOptions.value).catch(t=>{throw new Error(`Cannot getSearchId for query: ${e.query}: ${t}`)})},_clearSearchResults(){e.matches.value=[],e.totalResults.value=void 0,e.currentPage.value=0,e.searchEntry.value=null},_updateStoreWithSearchResultResponse(t){var r,s,u,d,l,m;const i=Ei();e.searchEntry.value=t.searchEntry,e.totalResults.value=t.totalResults,e.matches.value=t.matches,e.status.value="success",e.sortOptions.value=t.sortableWidgets,e.filterBy.searchableFieldsOperator=t.searchEntry.combineSpecificSearches,e.filterBy.collectionIds=((r=t.searchEntry.collection)==null?void 0:r.map(g=>Number.parseInt(g)))??[],t.searchEntry.specificFieldSearch&&(e.filterBy.specificFieldsMap.clear(),(s=t.searchEntry.specificFieldSearch)==null||s.forEach(g=>{if(!i.getSearchableField(g.field)){console.log("skipping search entry field",g.field);return}console.log("adding search entry field",g.field),mk(e).addSearchableFieldFilter(g.field,{value:g.text,isFuzzy:g.fuzzy})})),t.searchEntry.startDateText||t.searchEntry.endDateText?e.filterBy.globalDateRange={startDate:((u=t.searchEntry)==null?void 0:u.startDateText)??"",endDate:((d=t.searchEntry)==null?void 0:d.endDateText)??"",createdAt:new Date().toISOString()}:e.filterBy.globalDateRange=null,t.searchEntry.longitude&&t.searchEntry.latitude&&t.searchEntry.distance?e.filterBy.globalLocation={lng:t.searchEntry.longitude,lat:t.searchEntry.latitude,radius:t.searchEntry.distance,createdAt:new Date().toISOString()}:e.filterBy.globalLocation=null,(l=t.searchEntry)!=null&&l.fileTypesSearch?e.filterBy.globalFileType={fileType:t.searchEntry.fileTypesSearch,createdAt:new Date().toISOString()}:e.filterBy.globalFileType=null,e.filterBy.includeHiddenAssets=!!t.searchEntry.showHidden,e.query.value=e.query.value||((m=t.searchEntry)==null?void 0:m.searchText)||""},async search(t,i={}){const s={...{loadAll:!1,page:0},...i};e.beforeNewSearchHandlers.forEach(u=>u()),e.status.value="fetching",e.searchId.value=t,this._clearSearchResults();try{const u=await Hn.getSearchResultsById(e.searchId.value,s);this._updateStoreWithSearchResultResponse(u)}catch(u){console.error(u),e.status.value="error"}finally{e.afterNewSearchHandlers.forEach(u=>u(e))}return e.searchId.value},onBeforeNewSearch(t){e.beforeNewSearchHandlers.push(t)},onAfterNewSearch(t){e.afterNewSearchHandlers.push(t)},async loadMore({loadAll:t}={loadAll:!1}){if(!e.searchId.value)throw new Error("No search id found. Cannot load more.");if(!Kl(e).hasMoreResults.value){console.error("cannot load more results, already at the end");return}e.status.value="fetching";const i=e.currentPage.value;try{e.currentPage.value=i+1;const r=await Hn.getSearchResultsById(e.searchId.value,{page:e.currentPage.value,loadAll:t});e.matches.value.push(...r.matches),e.searchEntry.value=r.searchEntry,e.status.value="success"}catch(r){e.status.value="error",e.currentPage.value=i,console.error(r)}},setResultsView(t){e.resultsView.value=t}}),Ir=Sh("search",()=>{const e=VV(),t=Kl(e),i=mk(e);return{...t,...i,...e}}),HV=["for"],GV={key:0,class:"text-red-600"},WV={class:"relative rounded-md"},qV={key:0,class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},ZV=["id","type","name","value","required"],KV={key:1,class:"absolute inset-y-0 right-0 flex items-center pr-1"},Ja=rt({__name:"InputGroup",props:{id:{},label:{},labelHidden:{type:Boolean,default:!1},modelValue:{},type:{default:"text"},inputClass:{default:()=>({})},labelClass:{default:()=>({})},required:{type:Boolean,default:!1}},emits:["focus","blur","update:modelValue"],setup(e){return(t,i)=>(V(),pe("div",null,[de("label",{for:t.id,class:kn(["block text-xs font-medium text-neutral-700 uppercase mb-1",[{"sr-only":t.labelHidden},t.labelClass]])},[Mt(xt(t.label)+" ",1),t.required?(V(),pe("span",GV,"*")):tt("",!0)],10,HV),de("div",WV,[t.$slots.prepend?(V(),pe("div",qV,[En(t.$slots,"prepend")])):tt("",!0),de("input",Br({id:t.id,type:t.type,name:t.id,value:t.modelValue,class:["block w-full rounded-md border border-transparent focus-visible:ring-blue-600 focus-visible:ring-offset-2 focus-visible:ring-2 sm:text-sm py-2 bg-transparent-black-100 placeholder-transparent-black-400 px-4",[{"pl-10":t.$slots.prepend,"pr-10":t.$slots.append},t.inputClass]],required:t.required},t.$attrs,{onFocus:i[0]||(i[0]=r=>t.$emit("focus",r)),onBlur:i[1]||(i[1]=r=>t.$emit("blur",r)),onInput:i[2]||(i[2]=r=>t.$emit("update:modelValue",r.target.value))}),null,16,ZV),t.$slots.append?(V(),pe("div",KV,[En(t.$slots,"append")])):tt("",!0)])]))}});function XV(e,t,i){return i?e===1?t:i:e===1?t:`${t}s`}const YV={class:"flex gap-1 items-center"},JV=de("span",{class:"sr-only"},"Clear Search",-1),QV=de("span",{class:"sr-only"},"Advanced Search",-1),e9={key:2,class:"inline-flex"},t9=de("span",{class:"sr-only"},"Clear All Filters",-1),n9={class:"inline-flex items-center justify-center bg-transparent-black-100 w-8 h-8 text-sm rounded-full text-neutral-900 gap-1 hover:bg-neutral-900 hover:text-neutral-200 transition:ease-in-out duration-150",type:"submit"},i9=de("span",{class:"sr-only"},"Search",-1),gk=rt({__name:"SearchTextInputGroup",emits:["moreOptionClick","clearAllFilters"],setup(e,{emit:t}){const i=Re(null),r=Re(!1),s=Ir();function u(m){var g;i.value&&m.metaKey&&m.key==="k"&&(m.preventDefault(),(g=i.value.$el.querySelector("input"))==null||g.focus())}function d(m){var g;i.value&&m.key==="Escape"&&((g=i.value.$el.querySelector("input"))==null||g.blur())}function l(){s.clearAllFilters(),t("clearAllFilters")}return Fn(()=>{document.addEventListener("keydown",u),document.addEventListener("keydown",d)}),Wi(()=>{document.removeEventListener("keydown",u),document.removeEventListener("keydown",d)}),(m,g)=>(V(),je(Ja,{id:"search",ref_key:"inputGroup",ref:i,modelValue:ce(s).query,"onUpdate:modelValue":g[3]||(g[3]=x=>ce(s).query=x),label:"Search",type:"search",inputmode:"search",labelHidden:!0,placeholder:"Search",inputClass:"!rounded-full",onFocus:g[4]||(g[4]=x=>r.value=!0),onBlur:g[5]||(g[5]=x=>r.value=!1)},{append:Ce(()=>[de("div",YV,[ce(s).query.length?(V(),pe("button",{key:0,type:"button",class:"text-transparent-black-500 hover:text-neutral-900",onClick:g[0]||(g[0]=x=>ce(s).query="")},[JV,ye(ce(om))])):tt("",!0),ce(s).hasFiltersApplied?tt("",!0):(V(),pe("button",{key:1,type:"button",class:"w-8 h-8 inline-flex items-center justify-center rounded-full",onClick:g[1]||(g[1]=x=>m.$emit("moreOptionClick"))},[QV,ye(ce(J8),{class:"h-4 w-4","aria-hidden":"true"})])),ce(s).hasFiltersApplied?(V(),pe("div",e9,[de("button",{type:"button",class:"inline-flex items-center justify-center rounded-l-full bg-neutral-900 text-neutral-300 text-xs py-1 px-2 border-r border-neutral-600",onClick:g[2]||(g[2]=x=>m.$emit("moreOptionClick"))},xt(ce(s).filteredByCount)+" "+xt(ce(XV)(ce(s).filteredByCount,"filter")),1),de("button",{type:"button",class:"inline-flex items-center justify-center rounded-r-full bg-neutral-900 text-neutral-300 text-xs py-1 px-2",onClick:l},[t9,ye(lm,{class:"!h-3 !w-3","aria-hidden":"true"})])])):tt("",!0),de("button",n9,[ce(s).status==="fetching"?(V(),je(ce(No),{key:0,class:"h-4 w-4","aria-hidden":"true"})):(V(),je(ce(w8),{key:1,class:"h-4 w-4","aria-hidden":"true"})),i9])])]),_:1},8,["modelValue"]))}}),vk=rt({__name:"AdvSearchDropDown",props:{label:{}},setup(e){return(t,i)=>(V(),je(z1,{label:t.label,class:"rounded-md text-sm bg-transparent-black-100",labelClass:"justify-between p-2 py-1",chevronClass:"!w-4 !h-4",alignment:"left"},{default:Ce(()=>[En(t.$slots,"default")]),_:3},8,["label"]))}}),Yf=rt({__name:"AdvSearchDropDownItem",setup(e){return(t,i)=>(V(),je(jd,{class:"!whitespace-nowrap overflow-ellipsis overflow-x-hidden"},{default:Ce(()=>[En(t.$slots,"default")]),_:3}))}}),r9={class:"my-4"},s9={class:"flex items-baseline gap-2"},a9=de("h3",{class:"font-bold"},"Collections",-1),o9=de("p",{class:"text-neutral-400 text-xs mb-2 italic"},' To limit your search to specific collections, choose "Add Collection" below. ',-1),l9={key:0,class:"flex flex-wrap gap-2 bg-transparent-black-50 p-4 mb-4 rounded-md"},c9=["onClick"],u9=rt({__name:"FilterByCollectionsSection",setup(e){const t=Ei(),i=Ir(),r=Le(()=>t.flatCollections.filter(d=>i.filterBy.collectionIds.includes(d.id)).sort((d,l)=>d.title.localeCompare(l.title))),s=Le(()=>t.flatCollections.filter(d=>!i.filterBy.collectionIds.includes(d.id)).sort((d,l)=>d.title.localeCompare(l.title)));function u(d){const l=d.split(" › ");if(l.length===1)return d;const m="-".repeat(l.length-1),g=l[l.length-1];return`${m} ${g}`}return(d,l)=>(V(),pe("section",r9,[de("header",s9,[a9,r.value.length?(V(),je(ai,{key:0,variant:"tertiary",onClick:l[0]||(l[0]=m=>ce(i).clearCollectionIdFilters())},{default:Ce(()=>[Mt(" clear ")]),_:1})):tt("",!0)]),o9,r.value.length?(V(),pe("ul",l9,[(V(!0),pe(Nt,null,$n(r.value,m=>(V(),pe("li",{key:m.id,class:"text-xs bg-white rounded-md border border-neutral-800 inline-flex items-center text-neutral-900 px-2 py-1"},[Mt(xt(m.title)+" ",1),de("button",{class:"ml-2 h-full flex items-center justify-center",onClick:g=>ce(i).removeCollectionIdFilter(m.id)},[ye(ce(lm),{class:"!h-3 !w-3"})],8,c9)]))),128))])):tt("",!0),s.value.length?(V(),je(vk,{key:1,label:"Add Collection"},{default:Ce(()=>[(V(!0),pe(Nt,null,$n(s.value,m=>(V(),je(Yf,{key:m.id,class:"!whitespace-nowrap overflow-ellipsis overflow-x-hidden",title:u(m.title),onClick:g=>ce(i).addCollectionIdFilter(m.id)},{default:Ce(()=>[Mt(xt(u(m.title)),1)]),_:2},1032,["title","onClick"]))),128))]),_:1})):tt("",!0)]))}}),d9=["value"],h9=["value"],f9=rt({__name:"SelectFieldOptions",props:{filter:{}},setup(e){const t=e,i=Re(t.filter.value),r=Re([t.filter.value]),s=Ir(),u=Ei(),d=Le(()=>u.getSearchableField(t.filter.fieldId));function l(m){const g=m.target;s.updateSearchableFieldFilterValue(t.filter.id,g.value)}return fn([d],async()=>{if(!d.value)throw new Error(`Could not find searchable field with id ${t.filter.fieldId}`);r.value=await Hn.getSearchableSelectFieldValues(d.value),r.value.includes(t.filter.value)||(s.updateSearchableFieldFilterValue(t.filter.id,r.value[0]),i.value=r.value[0])},{immediate:!0}),(m,g)=>(V(),pe("select",{value:i.value,class:"rounded-md w-full border-neutral-200",onChange:l},[(V(!0),pe(Nt,null,$n(r.value,x=>(V(),pe("option",{key:x,value:x},xt(x===""?"-":x),9,h9))),128))],40,d9))}}),p9=["value"],m9={value:"boolean_true"},g9={value:"boolean_false"},v9=rt({__name:"CheckboxFieldOptions",props:{filter:{}},setup(e){const t=e,i=Re(t.filter.value),r=Re("Checked"),s=Re("Unchecked"),u=Ir(),d=Ei(),l=Le(()=>d.getSearchableField(t.filter.fieldId));function m(g){const x=g.target;u.updateSearchableFieldFilterValue(t.filter.id,x.value)}return fn([l],async()=>{if(!l.value)throw new Error(`Could not find searchable field with id ${t.filter.fieldId}`);const g=await Hn.getSearchableCheckboxFieldValues(l.value);r.value=g.boolean_true,s.value=g.boolean_false,i.value=t.filter.value??"boolean_true",u.updateSearchableFieldFilterValue(t.filter.id,i.value)},{immediate:!0}),(g,x)=>(V(),pe("select",{value:i.value,class:"rounded-md border-neutral-200",onChange:m},[de("option",m9,xt(r.value),1),de("option",g9,xt(s.value),1)],40,p9))}}),_9={class:"flex flex-col gap-4"},y9=["value","onChange"],b9={key:0,value:"",disabled:""},x9=["value"],w9=rt({__name:"CascadeSelect",props:{options:{},selectClass:{},labelClass:{},initialSelectedValues:{}},emits:["change"],setup(e,{emit:t}){const i=e,r=Nr([...s()]);function s(){var x;if(!((x=i.initialSelectedValues)!=null&&x.length))return[{label:u(i.options),options:d(i.options),value:""}];const g=[];return i.initialSelectedValues.forEach(w=>{const I=l(g,w);I&&g.push(I)}),g}function u(g){return Object.keys(g)[0]}function d(g){const x=g[u(g)];return Array.isArray(x)?x:Object.keys(x)}function l(g,x="",w=i.options){const I=[];g.forEach($=>{I.push($.label),I.push($.value)});const C=vF(I,w);if(!C)return null;const A=u(C),L=d(C);return x!==""&&!L.includes(x)&&console.error(`Cannot create next selected: initial value ${x} is not in the options ${L}`),{label:A,options:L,value:x}}function m(g,x){if(r[g].value=x,r.splice(g+1),!x)return;const w=l(r,"");if(!w){t("change",r.map(I=>I.value));return}r.push(w),t("change",r.map(I=>I.value))}return fn(()=>i.options,()=>{r.splice(0,r.length,...s())}),(g,x)=>(V(),pe("div",_9,[(V(!0),pe(Nt,null,$n(r,(w,I)=>(V(),pe("div",{key:I,class:"flex flex-col gap-1"},[de("label",{class:kn(["uppercase text-xs font-medium tracking-wider",g.labelClass])},xt(w.label),3),de("select",{class:kn(["rounded-md",g.selectClass]),style:{width:"100%"},value:w.value,onChange:C=>m(I,C.target.value)},[w.options.includes("")?tt("",!0):(V(),pe("option",b9," Select a "+xt(w.label),1)),(V(!0),pe(Nt,null,$n(w.options.sort(),C=>(V(),pe("option",{key:C,value:C},xt(C===""?"-":C),9,x9))),128))],42,y9)]))),128))]))}}),S9=rt({__name:"MultiSelectFieldOptions",props:{filter:{}},setup(e){const t=e,i=Ir(),r=Ei(),s=Le(()=>r.getSearchableField(t.filter.fieldId)),u=Re(null);function d(l){i.updateSearchableFieldFilterValue(t.filter.id,l.join(","))}return fn([s],async()=>{if(!s.value)throw new Error(`Could not find searchable field with id ${t.filter.fieldId}`);u.value=await Hn.getSearchableMultiSelectFieldValues(s.value)},{immediate:!0}),(l,m)=>(V(),pe("div",null,[u.value?(V(),je(w9,{key:0,options:u.value,initialSelectedValues:t.filter.value.split(","),class:"!gap-1",labelClass:"sr-only",selectClass:"text-sm border-neutral-200",onChange:d},null,8,["options","initialSelectedValues"])):tt("",!0)]))}}),T9={class:"filter-row__name text-sm"},E9={class:"p-2"},I9={class:"filter-row__value text-sm"},C9={class:"filter-row__is-fuzzy"},A9=rt({__name:"BaseFilterRow",props:{label:{},rowIndex:{}},emits:["remove"],setup(e){const t=Ir(),i=Le(()=>t.filterBy.searchableFieldsOperator);function r(){const u=t.filterBy.searchableFieldsOperator==="AND"?"OR":"AND";t.updateSearchableFieldsOperator(u)}return(s,u)=>(V(),pe("div",{class:kn(["filter-row",{"filter-row--is-only-row":ce(t).totalFieldFilterCount===1,"filter-row--is-first-row":s.rowIndex===0}])},[ye(ai,{class:"text-xs filter-row__operator",variant:"tertiary",type:"button",onClick:r},{default:Ce(()=>[Mt(xt(i.value),1)]),_:1}),de("div",T9,[En(s.$slots,"label",{},()=>[de("p",E9,xt(s.label),1)],!0)]),de("div",I9,[En(s.$slots,"default",{},void 0,!0)]),de("div",C9,[En(s.$slots,"fuzzy",{},void 0,!0)]),de("button",{class:"filter-row__remove py-2 self-start w-full flex items-center justify-center",type:"button",onClick:u[0]||(u[0]=d=>s.$emit("remove"))},[ye(ce(om),{class:"!w-5 !h-5"})])],2))}});const j_=sn(A9,[["__scopeId","data-v-b24af0ec"]]),M9=["value"],k9=["value"],P9=["checked"],D9=de("span",{"aria-label":"Fuzzy Search"},"Fuzzy",-1),L9=rt({__name:"FilterBySpecificFieldsRow",props:{filter:{},rowIndex:{}},setup(e){const t=e,i=Ei(),r=Ir(),s=Le(()=>{const x=i.getSearchableField(t.filter.fieldId);if(!x)throw new Error(`Could not find searchable field with id ${t.filter.fieldId}`);return x}),u=Le(()=>i.searchableFields.filter(x=>r.supportedSpecificFieldTypes.includes(x.type)));function d(x){const w=t.filter.fieldId,I=x.target.value;if(I===w)return;r.updateFilterFieldId(t.filter.id,I);const C=i.getSearchableField(w),A=i.getSearchableField(I);(C==null?void 0:C.type)==="text"&&(A==null?void 0:A.type)==="text"||r.updateSearchableFieldFilterValue(t.filter.id,"")}function l(x){r.updateSearchableFieldFilterValue(t.filter.id,x)}function m(x){r.updateSearchableFieldFilterIsFuzzy(t.filter.id,x.target.checked)}function g(){r.removeSearchableFieldFilter(t.filter.id)}return(x,w)=>(V(),je(j_,{rowIndex:x.rowIndex,onRemove:g},{label:Ce(()=>[de("select",{class:"rounded-md text-sm filter-row__name w-full border-neutral-200 bg-transparent",value:s.value.id,onChange:d},[(V(!0),pe(Nt,null,$n(u.value,I=>(V(),pe("option",{key:I.id,value:I.id},xt(I.label),9,k9))),128))],40,M9)]),fuzzy:Ce(()=>[de("label",{class:kn(["text-xs font-bold uppercase text-center cursor-pointer leading-none block",{"text-blue-600":x.filter.isFuzzy,"text-neutral-300":!x.filter.isFuzzy}])},[de("input",{class:"sr-only",type:"checkbox",checked:x.filter.isFuzzy,onChange:m},null,40,P9),D9],2)]),default:Ce(()=>[["text","date","text area"].includes(s.value.type)?(V(),je(Ja,{key:0,id:x.filter.id,class:"text-sm",inputClass:"!bg-white !border !border-neutral-200 placeholder:capitalize",label:s.value.label,modelValue:x.filter.value,labelHidden:!0,placeholder:s.value.label,"onUpdate:modelValue":l},null,8,["id","label","modelValue","placeholder"])):tt("",!0),["select","tag list"].includes(s.value.type)?(V(),je(f9,{key:1,class:"w-full text-sm",filter:x.filter},null,8,["filter"])):tt("",!0),s.value.type==="checkbox"?(V(),je(v9,{key:2,class:"w-full text-sm",filter:x.filter},null,8,["filter"])):tt("",!0),s.value.type==="multiselect"?(V(),je(S9,{key:3,class:"w-full text-sm",filter:x.filter},null,8,["filter"])):tt("",!0)]),_:1},8,["rowIndex"]))}}),O9={class:"flex flex-col lg:flex-row gap-1"},R9=rt({__name:"FilterByGlobalDateRow",props:{rowIndex:{}},setup(e){const t=Ir();return(i,r)=>(V(),je(j_,{label:"Any Date",rowIndex:i.rowIndex,onRemove:ce(t).removeDateRangeFilter},{default:Ce(()=>[de("div",O9,[ce(t).filterBy.globalDateRange?(V(),je(Ja,{key:0,id:"filter-by-date-range-start-date",modelValue:ce(t).filterBy.globalDateRange.startDate,"onUpdate:modelValue":r[0]||(r[0]=s=>ce(t).filterBy.globalDateRange.startDate=s),class:"text-sm",inputClass:"!bg-white !border !border-neutral-200",label:"Start Date",labelHidden:!0,placeholder:"Start Date"},null,8,["modelValue"])):tt("",!0),ce(t).filterBy.globalDateRange?(V(),je(Ja,{key:1,id:"filter-by-date-range-end-date",modelValue:ce(t).filterBy.globalDateRange.endDate,"onUpdate:modelValue":r[1]||(r[1]=s=>ce(t).filterBy.globalDateRange.endDate=s),class:"text-sm",inputClass:"!bg-white !border !border-neutral-200",label:"End Date",labelHidden:!0,placeholder:"End Date"},null,8,["modelValue"])):tt("",!0)])]),_:1},8,["rowIndex","onRemove"]))}});var _k={exports:{}};(function(e,t){(function(i,r){e.exports=r()})(PA,function(){var i,r,s;function u(l,m){if(!i)i=m;else if(!r)r=m;else{var g="var sharedChunk = {}; ("+i+")(sharedChunk); ("+r+")(sharedChunk);",x={};i(x),s=m(x),typeof window<"u"&&(s.workerUrl=window.URL.createObjectURL(new Blob([g],{type:"text/javascript"})))}}u(["exports"],function(l){function m(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var g=x;function x(c,a){this.x=c,this.y=a}x.prototype={clone:function(){return new x(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,a){return this.clone()._rotateAround(c,a)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var a=c.x-this.x,h=c.y-this.y;return a*a+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,a){return Math.atan2(this.x*a-this.y*c,this.x*c+this.y*a)},_matMult:function(c){var a=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=a,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var a=Math.cos(c),h=Math.sin(c),p=h*this.x+a*this.y;return this.x=a*this.x-h*this.y,this.y=p,this},_rotateAround:function(c,a){var h=Math.cos(c),p=Math.sin(c),y=a.y+p*(this.x-a.x)+h*(this.y-a.y);return this.x=a.x+h*(this.x-a.x)-p*(this.y-a.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},x.convert=function(c){return c instanceof x?c:Array.isArray(c)?new x(c[0],c[1]):c};var w=m(g),I=C;function C(c,a,h,p){this.cx=3*c,this.bx=3*(h-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(p-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=a,this.p2x=h,this.p2y=p}C.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,a){if(a===void 0&&(a=1e-6),c<0)return 0;if(c>1)return 1;for(var h=c,p=0;p<8;p++){var y=this.sampleCurveX(h)-c;if(Math.abs(y)<a)return h;var S=this.sampleCurveDerivativeX(h);if(Math.abs(S)<1e-6)break;h-=y/S}var T=0,M=1;for(h=c,p=0;p<20&&(y=this.sampleCurveX(h),!(Math.abs(y-c)<a));p++)c>y?T=h:M=h,h=.5*(M-T)+T;return h},solve:function(c,a){return this.sampleCurveY(this.solveCurveX(c,a))}};var A=m(I);function L(c,a,h,p){const y=new A(c,a,h,p);return function(S){return y.solve(S)}}const $=L(.25,.1,.25,1);function F(c,a,h){return Math.min(h,Math.max(a,c))}function z(c,a,h){const p=h-a,y=((c-a)%p+p)%p+a;return y===a?h:y}function ee(c,...a){for(const h of a)for(const p in h)c[p]=h[p];return c}let H=1;function Q(c,a){c.forEach(h=>{a[h]&&(a[h]=a[h].bind(a))})}function ae(c,a,h){const p={};for(const y in c)p[y]=a.call(h||this,c[y],y,c);return p}function be(c,a,h){const p={};for(const y in c)a.call(h||this,c[y],y,c)&&(p[y]=c[y]);return p}function te(c){return Array.isArray(c)?c.map(te):typeof c=="object"&&c?ae(c,te):c}const G={};function U(c){G[c]||(typeof console<"u"&&console.warn(c),G[c]=!0)}function B(c,a,h){return(h.y-c.y)*(a.x-c.x)>(a.y-c.y)*(h.x-c.x)}function ie(c){let a=0;for(let h,p,y=0,S=c.length,T=S-1;y<S;T=y++)h=c[y],p=c[T],a+=(p.x-h.x)*(h.y+p.y);return a}function X(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let ne=null;function Ee(c){if(ne==null){const a=c.navigator?c.navigator.userAgent:null;ne=!!c.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))}return ne}function Ie(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const Xe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let lt,st;const $t={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(c){const a=requestAnimationFrame(c);return{cancel:()=>cancelAnimationFrame(a)}},getImageData(c,a=0){return this.getImageCanvasContext(c).getImageData(-a,-a,c.width+2*a,c.height+2*a)},getImageCanvasContext(c){const a=window.document.createElement("canvas"),h=a.getContext("2d",{willReadFrequently:!0});if(!h)throw new Error("failed to create canvas 2d context");return a.width=c.width,a.height=c.height,h.drawImage(c,0,0,c.width,c.height),h},resolveURL:c=>(lt||(lt=document.createElement("a")),lt.href=c,lt.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(st==null&&(st=matchMedia("(prefers-reduced-motion: reduce)")),st.matches)}},It={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class nt extends Error{constructor(a,h,p,y){super(`AJAXError: ${h} (${a}): ${p}`),this.status=a,this.statusText=h,this.url=p,this.body=y}}const et=X()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,dt=c=>It.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))];function Be(c,a){const h=new AbortController,p=new Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,referrer:et(),signal:h.signal});let y=!1,S=!1;return c.type==="json"&&p.headers.set("Accept","application/json"),S||fetch(p).then(T=>T.ok?(M=>{(c.type==="arrayBuffer"||c.type==="image"?M.arrayBuffer():c.type==="json"?M.json():M.text()).then(D=>{S||(y=!0,a(null,D,M.headers.get("Cache-Control"),M.headers.get("Expires")))}).catch(D=>{S||a(new Error(D.message))})})(T):T.blob().then(M=>a(new nt(T.status,T.statusText,c.url,M)))).catch(T=>{T.code!==20&&a(new Error(T.message))}),{cancel:()=>{S=!0,y||h.abort()}}}const Ke=function(c,a){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){if(X()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,a);if(!X())return(dt(c.url)||Be)(c,a)}if(!(/^file:/.test(h=c.url)||/^file:/.test(et())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Be(c,a);if(X()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,a,void 0,!0)}var h;return function(p,y){const S=new XMLHttpRequest;S.open(p.method||"GET",p.url,!0),p.type!=="arrayBuffer"&&p.type!=="image"||(S.responseType="arraybuffer");for(const T in p.headers)S.setRequestHeader(T,p.headers[T]);return p.type==="json"&&(S.responseType="text",S.setRequestHeader("Accept","application/json")),S.withCredentials=p.credentials==="include",S.onerror=()=>{y(new Error(S.statusText))},S.onload=()=>{if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let T=S.response;if(p.type==="json")try{T=JSON.parse(S.response)}catch(M){return y(M)}y(null,T,S.getResponseHeader("Cache-Control"),S.getResponseHeader("Expires"))}else{const T=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});y(new nt(S.status,S.statusText,p.url,T))}},S.send(p.body),{cancel:()=>S.abort()}}(c,a)},ut=function(c,a){return Ke(ee(c,{type:"arrayBuffer"}),a)};function Ot(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;const a=new URL(c),h=window.location;return a.protocol===h.protocol&&a.host===h.host}function Vt(c,a,h){h[c]&&h[c].indexOf(a)!==-1||(h[c]=h[c]||[],h[c].push(a))}function _n(c,a,h){if(h&&h[c]){const p=h[c].indexOf(a);p!==-1&&h[c].splice(p,1)}}class qt{constructor(a,h={}){ee(this,h),this.type=a}}class _e extends qt{constructor(a,h={}){super("error",ee({error:a},h))}}class ke{on(a,h){return this._listeners=this._listeners||{},Vt(a,h,this._listeners),this}off(a,h){return _n(a,h,this._listeners),_n(a,h,this._oneTimeListeners),this}once(a,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},Vt(a,h,this._oneTimeListeners),this):new Promise(p=>this.once(a,p))}fire(a,h){typeof a=="string"&&(a=new qt(a,h||{}));const p=a.type;if(this.listens(p)){a.target=this;const y=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const M of y)M.call(this,a);const S=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const M of S)_n(p,M,this._oneTimeListeners),M.call(this,a);const T=this._eventedParent;T&&(ee(a,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),T.fire(a))}else a instanceof _e&&console.error(a.error);return this}listens(a){return this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a)}setEventedParent(a,h){return this._eventedParent=a,this._eventedParentData=h,this}}var ge={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ft=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function q(c,a){const h={};for(const p in c)p!=="ref"&&(h[p]=c[p]);return ft.forEach(p=>{p in a&&(h[p]=a[p])}),h}function fe(c,a){if(Array.isArray(c)){if(!Array.isArray(a)||c.length!==a.length)return!1;for(let h=0;h<c.length;h++)if(!fe(c[h],a[h]))return!1;return!0}if(typeof c=="object"&&c!==null&&a!==null){if(typeof a!="object"||Object.keys(c).length!==Object.keys(a).length)return!1;for(const h in c)if(!fe(c[h],a[h]))return!1;return!0}return c===a}const Pe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function We(c,a,h){h.push({command:Pe.addSource,args:[c,a[c]]})}function pt(c,a,h){a.push({command:Pe.removeSource,args:[c]}),h[c]=!0}function ht(c,a,h,p){pt(c,h,p),We(c,a,h)}function zt(c,a,h){let p;for(p in c[h])if(Object.prototype.hasOwnProperty.call(c[h],p)&&p!=="data"&&!fe(c[h][p],a[h][p]))return!1;for(p in a[h])if(Object.prototype.hasOwnProperty.call(a[h],p)&&p!=="data"&&!fe(c[h][p],a[h][p]))return!1;return!0}function Dt(c,a,h,p,y,S){let T;for(T in a=a||{},c=c||{})Object.prototype.hasOwnProperty.call(c,T)&&(fe(c[T],a[T])||h.push({command:S,args:[p,T,a[T],y]}));for(T in a)Object.prototype.hasOwnProperty.call(a,T)&&!Object.prototype.hasOwnProperty.call(c,T)&&(fe(c[T],a[T])||h.push({command:S,args:[p,T,a[T],y]}))}function Gt(c){return c.id}function ln(c,a){return c[a.id]=a,c}class vt{constructor(a,h,p,y){this.message=(a?`${a}: `:"")+p,y&&(this.identifier=y),h!=null&&h.__line__&&(this.line=h.__line__)}}function Rn(c,...a){for(const h of a)for(const p in h)c[p]=h[p];return c}class Ln extends Error{constructor(a,h){super(h),this.message=h,this.key=a}}class Ye{constructor(a,h=[]){this.parent=a,this.bindings={};for(const[p,y]of h)this.bindings[p]=y}concat(a){return new Ye(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}const Qe={kind:"null"},Fe={kind:"number"},mt={kind:"string"},St={kind:"boolean"},Yt={kind:"color"},an={kind:"object"},Pt={kind:"value"},qn={kind:"collator"},Cn={kind:"formatted"},jt={kind:"padding"},vn={kind:"resolvedImage"};function Pn(c,a){return{kind:"array",itemType:c,N:a}}function he(c){if(c.kind==="array"){const a=he(c.itemType);return typeof c.N=="number"?`array<${a}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${a}>`}return c.kind}const Y=[Qe,Fe,mt,St,Yt,Cn,an,Pn(Pt),jt,vn];function re(c,a){if(a.kind==="error")return null;if(c.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!re(c.itemType,a.itemType))&&(typeof c.N!="number"||c.N===a.N))return null}else{if(c.kind===a.kind)return null;if(c.kind==="value"){for(const h of Y)if(!re(h,a))return null}}return`Expected ${he(c)} but found ${he(a)} instead.`}function me(c,a){return a.some(h=>h.kind===c.kind)}function Ae(c,a){return a.some(h=>h==="null"?c===null:h==="array"?Array.isArray(c):h==="object"?c&&!Array.isArray(c)&&typeof c=="object":h===typeof c)}function $e(c,a){return c.kind==="array"&&a.kind==="array"?c.itemType.kind===a.itemType.kind&&typeof c.N=="number":c.kind===a.kind}const qe=.96422,He=.82521,Oe=4/29,Ze=6/29,wt=3*Ze*Ze,bt=Math.PI/180,Et=180/Math.PI;function pn(c){return(c%=360)<0&&(c+=360),c}function wn([c,a,h,p]){let y,S;const T=mn((.2225045*(c=un(c))+.7168786*(a=un(a))+.0606169*(h=un(h)))/1);c===a&&a===h?y=S=T:(y=mn((.4360747*c+.3850649*a+.1430804*h)/qe),S=mn((.0139322*c+.0971045*a+.7141733*h)/He));const M=116*T-16;return[M<0?0:M,500*(y-T),200*(T-S),p]}function un(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function mn(c){return c>.008856451679035631?Math.pow(c,1/3):c/wt+Oe}function In([c,a,h,p]){let y=(c+16)/116,S=isNaN(a)?y:y+a/500,T=isNaN(h)?y:y-h/200;return y=1*zn(y),S=qe*zn(S),T=He*zn(T),[Vn(3.1338561*S-1.6168667*y-.4906146*T),Vn(-.9787684*S+1.9161415*y+.033454*T),Vn(.0719453*S-.2289914*y+1.4052427*T),p]}function Vn(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function zn(c){return c>Ze?c*c*c:wt*(c-Oe)}function Ut(c){return parseInt(c.padEnd(2,c),16)/255}function Ge(c,a){return Ct(a?c/100:c,0,1)}function Ct(c,a,h){return Math.min(Math.max(a,c),h)}function gt(c){return!c.some(Number.isNaN)}const ze={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class yt{constructor(a,h,p,y=1,S=!0){this.r=a,this.g=h,this.b=p,this.a=y,S||(this.r*=y,this.g*=y,this.b*=y,y||this.overwriteGetter("rgb",[a,h,p,y]))}static parse(a){if(a instanceof yt)return a;if(typeof a!="string")return;const h=function(p){if((p=p.toLowerCase())==="transparent")return[0,0,0,0];const y=ze[p];if(y){const[T,M,D]=y;return[T/255,M/255,D/255,1]}if(p.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(p)){const T=p.length<6?1:2;let M=1;return[Ut(p.slice(M,M+=T)),Ut(p.slice(M,M+=T)),Ut(p.slice(M,M+=T)),Ut(p.slice(M,M+T)||"ff")]}if(p.startsWith("rgb")){const T=p.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(T){const[M,D,j,W,J,se,oe,ue,Te,we,Ve,Je]=T,Ne=[W||" ",oe||" ",we].join("");if(Ne==="  "||Ne==="  /"||Ne===",,"||Ne===",,,"){const at=[j,se,Te].join(""),ct=at==="%%%"?100:at===""?255:0;if(ct){const Tt=[Ct(+D/ct,0,1),Ct(+J/ct,0,1),Ct(+ue/ct,0,1),Ve?Ge(+Ve,Je):1];if(gt(Tt))return Tt}}return}}const S=p.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(S){const[T,M,D,j,W,J,se,oe,ue]=S,Te=[D||" ",W||" ",se].join("");if(Te==="  "||Te==="  /"||Te===",,"||Te===",,,"){const we=[+M,Ct(+j,0,100),Ct(+J,0,100),oe?Ge(+oe,ue):1];if(gt(we))return function([Ve,Je,Ne,at]){function ct(Tt){const cn=(Tt+Ve/30)%12,gn=Je*Math.min(Ne,1-Ne);return Ne-gn*Math.max(-1,Math.min(cn-3,9-cn,1))}return Ve=pn(Ve),Je/=100,Ne/=100,[ct(0),ct(8),ct(4),at]}(we)}}}(a);return h?new yt(...h,!1):void 0}get rgb(){const{r:a,g:h,b:p,a:y}=this,S=y||1/0;return this.overwriteGetter("rgb",[a/S,h/S,p/S,y])}get hcl(){return this.overwriteGetter("hcl",function(a){const[h,p,y,S]=wn(a),T=Math.sqrt(p*p+y*y);return[Math.round(1e4*T)?pn(Math.atan2(y,p)*Et):NaN,T,h,S]}(this.rgb))}get lab(){return this.overwriteGetter("lab",wn(this.rgb))}overwriteGetter(a,h){return Object.defineProperty(this,a,{value:h}),h}toString(){const[a,h,p,y]=this.rgb;return`rgba(${[a,h,p].map(S=>Math.round(255*S)).join(",")},${y})`}}yt.black=new yt(0,0,0,1),yt.white=new yt(1,1,1,1),yt.transparent=new yt(0,0,0,0),yt.red=new yt(1,0,0,1);class Wt{constructor(a,h,p){this.sensitivity=a?h?"variant":"case":h?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,h){return this.collator.compare(a,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class An{constructor(a,h,p,y,S){this.text=a,this.image=h,this.scale=p,this.fontStack=y,this.textColor=S}}class Yn{constructor(a){this.sections=a}static fromString(a){return new Yn([new An(a,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(a=>a.text.length!==0||a.image&&a.image.name.length!==0)}static factory(a){return a instanceof Yn?a:Yn.fromString(a)}toString(){return this.sections.length===0?"":this.sections.map(a=>a.text).join("")}}class li{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof li)return a;if(typeof a=="number")return new li([a,a,a,a]);if(Array.isArray(a)&&!(a.length<1||a.length>4)){for(const h of a)if(typeof h!="number")return;switch(a.length){case 1:a=[a[0],a[0],a[0],a[0]];break;case 2:a=[a[0],a[1],a[0],a[1]];break;case 3:a=[a[0],a[1],a[2],a[1]]}return new li(a)}}toString(){return JSON.stringify(this.values)}}class ri{constructor(a){this.name=a.name,this.available=a.available}toString(){return this.name}static fromString(a){return a?new ri({name:a,available:!1}):null}}function fo(c,a,h,p){return typeof c=="number"&&c>=0&&c<=255&&typeof a=="number"&&a>=0&&a<=255&&typeof h=="number"&&h>=0&&h<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:`Invalid rgba value [${[c,a,h,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof p=="number"?[c,a,h,p]:[c,a,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ui(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof yt||c instanceof Wt||c instanceof Yn||c instanceof li||c instanceof ri)return!0;if(Array.isArray(c)){for(const a of c)if(!Ui(a))return!1;return!0}if(typeof c=="object"){for(const a in c)if(!Ui(c[a]))return!1;return!0}return!1}function Ci(c){if(c===null)return Qe;if(typeof c=="string")return mt;if(typeof c=="boolean")return St;if(typeof c=="number")return Fe;if(c instanceof yt)return Yt;if(c instanceof Wt)return qn;if(c instanceof Yn)return Cn;if(c instanceof li)return jt;if(c instanceof ri)return vn;if(Array.isArray(c)){const a=c.length;let h;for(const p of c){const y=Ci(p);if(h){if(h===y)continue;h=Pt;break}h=y}return Pn(h||Pt,a)}return an}function po(c){const a=typeof c;return c===null?"":a==="string"||a==="number"||a==="boolean"?String(c):c instanceof yt||c instanceof Yn||c instanceof li||c instanceof ri?c.toString():JSON.stringify(c)}class mo{constructor(a,h){this.type=a,this.value=h}static parse(a,h){if(a.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!Ui(a[1]))return h.error("invalid value");const p=a[1];let y=Ci(p);const S=h.expectedType;return y.kind!=="array"||y.N!==0||!S||S.kind!=="array"||typeof S.N=="number"&&S.N!==0||(y=S),new mo(y,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class yr{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}}const Sc={string:mt,number:Fe,boolean:St,object:an};class Zr{constructor(a,h){this.type=a,this.args=h}static parse(a,h){if(a.length<2)return h.error("Expected at least one argument.");let p,y=1;const S=a[0];if(S==="array"){let M,D;if(a.length>2){const j=a[1];if(typeof j!="string"||!(j in Sc)||j==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);M=Sc[j],y++}else M=Pt;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return h.error('The length argument to "array" must be a positive integer literal',2);D=a[2],y++}p=Pn(M,D)}else{if(!Sc[S])throw new Error(`Types doesn't contain name = ${S}`);p=Sc[S]}const T=[];for(;y<a.length;y++){const M=h.parse(a[y],y,Pt);if(!M)return null;T.push(M)}return new Zr(p,T)}evaluate(a){for(let h=0;h<this.args.length;h++){const p=this.args[h].evaluate(a);if(!re(this.type,Ci(p)))return p;if(h===this.args.length-1)throw new yr(`Expected value to be of type ${he(this.type)}, but found ${he(Ci(p))} instead.`)}throw new Error}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}const xm={"to-boolean":St,"to-color":Yt,"to-number":Fe,"to-string":mt};class go{constructor(a,h){this.type=a,this.args=h}static parse(a,h){if(a.length<2)return h.error("Expected at least one argument.");const p=a[0];if(!xm[p])throw new Error(`Can't parse ${p} as it is not part of the known types`);if((p==="to-boolean"||p==="to-string")&&a.length!==2)return h.error("Expected one argument.");const y=xm[p],S=[];for(let T=1;T<a.length;T++){const M=h.parse(a[T],T,Pt);if(!M)return null;S.push(M)}return new go(y,S)}evaluate(a){if(this.type.kind==="boolean")return!!this.args[0].evaluate(a);if(this.type.kind==="color"){let h,p;for(const y of this.args){if(h=y.evaluate(a),p=null,h instanceof yt)return h;if(typeof h=="string"){const S=a.parseColor(h);if(S)return S}else if(Array.isArray(h)&&(p=h.length<3||h.length>4?`Invalid rbga value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:fo(h[0],h[1],h[2],h[3]),!p))return new yt(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new yr(p||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}if(this.type.kind==="padding"){let h;for(const p of this.args){h=p.evaluate(a);const y=li.parse(h);if(y)return y}throw new yr(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}if(this.type.kind==="number"){let h=null;for(const p of this.args){if(h=p.evaluate(a),h===null)return 0;const y=Number(h);if(!isNaN(y))return y}throw new yr(`Could not convert ${JSON.stringify(h)} to number.`)}return this.type.kind==="formatted"?Yn.fromString(po(this.args[0].evaluate(a))):this.type.kind==="resolvedImage"?ri.fromString(po(this.args[0].evaluate(a))):po(this.args[0].evaluate(a))}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}const ny=["Unknown","Point","LineString","Polygon"];class Bs{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ny[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(a){let h=this._parseColorCache[a];return h||(h=this._parseColorCache[a]=yt.parse(a)),h}}class bl{constructor(a,h,p=[],y,S=new Ye,T=[]){this.registry=a,this.path=p,this.key=p.map(M=>`[${M}]`).join(""),this.scope=S,this.errors=T,this.expectedType=y,this._isConstant=h}parse(a,h,p,y,S={}){return h?this.concat(h,p,y)._parse(a,S):this._parse(a,S)}_parse(a,h){function p(y,S,T){return T==="assert"?new Zr(S,[y]):T==="coerce"?new go(S,[y]):y}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const y=a[0];if(typeof y!="string")return this.error(`Expression name must be a string, but found ${typeof y} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const S=this.registry[y];if(S){let T=S.parse(a,this);if(!T)return null;if(this.expectedType){const M=this.expectedType,D=T.type;if(M.kind!=="string"&&M.kind!=="number"&&M.kind!=="boolean"&&M.kind!=="object"&&M.kind!=="array"||D.kind!=="value")if(M.kind!=="color"&&M.kind!=="formatted"&&M.kind!=="resolvedImage"||D.kind!=="value"&&D.kind!=="string")if(M.kind!=="padding"||D.kind!=="value"&&D.kind!=="number"&&D.kind!=="array"){if(this.checkSubtype(M,D))return null}else T=p(T,M,h.typeAnnotation||"coerce");else T=p(T,M,h.typeAnnotation||"coerce");else T=p(T,M,h.typeAnnotation||"assert")}if(!(T instanceof mo)&&T.type.kind!=="resolvedImage"&&this._isConstant(T)){const M=new Bs;try{T=new mo(T.type,T.evaluate(M))}catch(D){return this.error(D.message),null}}return T}return this.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,h,p){const y=typeof a=="number"?this.path.concat(a):this.path,S=p?this.scope.concat(p):this.scope;return new bl(this.registry,this._isConstant,y,h||null,S,this.errors)}error(a,...h){const p=`${this.key}${h.map(y=>`[${y}]`).join("")}`;this.errors.push(new Ln(p,a))}checkSubtype(a,h){const p=re(a,h);return p&&this.error(p),p}}class xl{constructor(a,h,p){this.type=qn,this.locale=p,this.caseSensitive=a,this.diacriticSensitive=h}static parse(a,h){if(a.length!==2)return h.error("Expected one argument.");const p=a[1];if(typeof p!="object"||Array.isArray(p))return h.error("Collator options argument must be an object.");const y=h.parse(p["case-sensitive"]!==void 0&&p["case-sensitive"],1,St);if(!y)return null;const S=h.parse(p["diacritic-sensitive"]!==void 0&&p["diacritic-sensitive"],1,St);if(!S)return null;let T=null;return p.locale&&(T=h.parse(p.locale,1,mt),!T)?null:new xl(y,S,T)}evaluate(a){return new Wt(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}}const Is=8192;function _i(c,a){c[0]=Math.min(c[0],a[0]),c[1]=Math.min(c[1],a[1]),c[2]=Math.max(c[2],a[0]),c[3]=Math.max(c[3],a[1])}function Du(c,a){return!(c[0]<=a[0]||c[2]>=a[2]||c[1]<=a[1]||c[3]>=a[3])}function kh(c,a){const h=(180+c[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,y=Math.pow(2,a.z);return[Math.round(h*y*Is),Math.round(p*y*Is)]}function iy(c,a,h){const p=c[0]-a[0],y=c[1]-a[1],S=c[0]-h[0],T=c[1]-h[1];return p*T-S*y==0&&p*S<=0&&y*T<=0}function Lu(c,a){let h=!1;for(let T=0,M=a.length;T<M;T++){const D=a[T];for(let j=0,W=D.length;j<W-1;j++){if(iy(c,D[j],D[j+1]))return!1;(y=D[j])[1]>(p=c)[1]!=(S=D[j+1])[1]>p[1]&&p[0]<(S[0]-y[0])*(p[1]-y[1])/(S[1]-y[1])+y[0]&&(h=!h)}}var p,y,S;return h}function wm(c,a){for(let h=0;h<a.length;h++)if(Lu(c,a[h]))return!0;return!1}function Sm(c,a,h,p){const y=p[0]-h[0],S=p[1]-h[1],T=(c[0]-h[0])*S-y*(c[1]-h[1]),M=(a[0]-h[0])*S-y*(a[1]-h[1]);return T>0&&M<0||T<0&&M>0}function Tm(c,a,h){for(const j of h)for(let W=0;W<j.length-1;++W)if((M=[(T=j[W+1])[0]-(S=j[W])[0],T[1]-S[1]])[0]*(D=[(y=a)[0]-(p=c)[0],y[1]-p[1]])[1]-M[1]*D[0]!=0&&Sm(p,y,S,T)&&Sm(S,T,p,y))return!0;var p,y,S,T,M,D;return!1}function Ph(c,a){for(let h=0;h<c.length;++h)if(!Lu(c[h],a))return!1;for(let h=0;h<c.length-1;++h)if(Tm(c[h],c[h+1],a))return!1;return!0}function ry(c,a){for(let h=0;h<a.length;h++)if(Ph(c,a[h]))return!0;return!1}function Dh(c,a,h){const p=[];for(let y=0;y<c.length;y++){const S=[];for(let T=0;T<c[y].length;T++){const M=kh(c[y][T],h);_i(a,M),S.push(M)}p.push(S)}return p}function Em(c,a,h){const p=[];for(let y=0;y<c.length;y++){const S=Dh(c[y],a,h);p.push(S)}return p}function Im(c,a,h,p){if(c[0]<h[0]||c[0]>h[2]){const y=.5*p;let S=c[0]-h[0]>y?-p:h[0]-c[0]>y?p:0;S===0&&(S=c[0]-h[2]>y?-p:h[2]-c[0]>y?p:0),c[0]+=S}_i(a,c)}function Lh(c,a,h,p){const y=Math.pow(2,p.z)*Is,S=[p.x*Is,p.y*Is],T=[];for(const M of c)for(const D of M){const j=[D.x+S[0],D.y+S[1]];Im(j,a,h,y),T.push(j)}return T}function Oh(c,a,h,p){const y=Math.pow(2,p.z)*Is,S=[p.x*Is,p.y*Is],T=[];for(const D of c){const j=[];for(const W of D){const J=[W.x+S[0],W.y+S[1]];_i(a,J),j.push(J)}T.push(j)}if(a[2]-a[0]<=y/2){(M=a)[0]=M[1]=1/0,M[2]=M[3]=-1/0;for(const D of T)for(const j of D)Im(j,a,h,y)}var M;return T}class Uo{constructor(a,h){this.type=St,this.geojson=a,this.geometries=h}static parse(a,h){if(a.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(Ui(a[1])){const p=a[1];if(p.type==="FeatureCollection")for(let y=0;y<p.features.length;++y){const S=p.features[y].geometry.type;if(S==="Polygon"||S==="MultiPolygon")return new Uo(p,p.features[y].geometry)}else if(p.type==="Feature"){const y=p.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new Uo(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new Uo(p,p)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return function(h,p){const y=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],T=h.canonicalID();if(p.type==="Polygon"){const M=Dh(p.coordinates,S,T),D=Lh(h.geometry(),y,S,T);if(!Du(y,S))return!1;for(const j of D)if(!Lu(j,M))return!1}if(p.type==="MultiPolygon"){const M=Em(p.coordinates,S,T),D=Lh(h.geometry(),y,S,T);if(!Du(y,S))return!1;for(const j of D)if(!wm(j,M))return!1}return!0}(a,this.geometries);if(a.geometryType()==="LineString")return function(h,p){const y=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],T=h.canonicalID();if(p.type==="Polygon"){const M=Dh(p.coordinates,S,T),D=Oh(h.geometry(),y,S,T);if(!Du(y,S))return!1;for(const j of D)if(!Ph(j,M))return!1}if(p.type==="MultiPolygon"){const M=Em(p.coordinates,S,T),D=Oh(h.geometry(),y,S,T);if(!Du(y,S))return!1;for(const j of D)if(!ry(j,M))return!1}return!0}(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Ou{constructor(a,h){this.type=h.type,this.name=a,this.boundExpression=h}static parse(a,h){if(a.length!==2||typeof a[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const p=a[1];return h.scope.has(p)?new Ou(p,h.scope.get(p)):h.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}}class Kr{constructor(a,h,p,y){this.name=a,this.type=h,this._evaluate=p,this.args=y}evaluate(a){return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}static parse(a,h){const p=a[0],y=Kr.definitions[p];if(!y)return h.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const S=Array.isArray(y)?y[0]:y.type,T=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,M=T.filter(([j])=>!Array.isArray(j)||j.length===a.length-1);let D=null;for(const[j,W]of M){D=new bl(h.registry,Ru,h.path,null,h.scope);const J=[];let se=!1;for(let oe=1;oe<a.length;oe++){const ue=a[oe],Te=Array.isArray(j)?j[oe-1]:j.type,we=D.parse(ue,1+J.length,Te);if(!we){se=!0;break}J.push(we)}if(!se)if(Array.isArray(j)&&j.length!==J.length)D.error(`Expected ${j.length} arguments, but found ${J.length} instead.`);else{for(let oe=0;oe<J.length;oe++){const ue=Array.isArray(j)?j[oe]:j.type,Te=J[oe];D.concat(oe+1).checkSubtype(ue,Te.type)}if(D.errors.length===0)return new Kr(p,S,W,J)}}if(M.length===1)h.errors.push(...D.errors);else{const j=(M.length?M:T).map(([J])=>{return se=J,Array.isArray(se)?`(${se.map(he).join(", ")})`:`(${he(se.type)}...)`;var se}).join(" | "),W=[];for(let J=1;J<a.length;J++){const se=h.parse(a[J],1+W.length);if(!se)return null;W.push(he(se.type))}h.error(`Expected arguments of type ${j}, but found (${W.join(", ")}) instead.`)}return null}static register(a,h){Kr.definitions=h;for(const p in h)a[p]=Kr}}function Ru(c){if(c instanceof Ou)return Ru(c.boundExpression);if(c instanceof Kr&&c.name==="error"||c instanceof xl||c instanceof Uo)return!1;const a=c instanceof go||c instanceof Zr;let h=!0;return c.eachChild(p=>{h=a?h&&Ru(p):h&&p instanceof mo}),!!h&&Fu(c)&&Ec(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Fu(c){if(c instanceof Kr&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof Uo)return!1;let a=!0;return c.eachChild(h=>{a&&!Fu(h)&&(a=!1)}),a}function Tc(c){if(c instanceof Kr&&c.name==="feature-state")return!1;let a=!0;return c.eachChild(h=>{a&&!Tc(h)&&(a=!1)}),a}function Ec(c,a){if(c instanceof Kr&&a.indexOf(c.name)>=0)return!1;let h=!0;return c.eachChild(p=>{h&&!Ec(p,a)&&(h=!1)}),h}function Ic(c,a){const h=c.length-1;let p,y,S=0,T=h,M=0;for(;S<=T;)if(M=Math.floor((S+T)/2),p=c[M],y=c[M+1],p<=a){if(M===h||a<y)return M;S=M+1}else{if(!(p>a))throw new yr("Input is not a number.");T=M-1}return 0}class Cc{constructor(a,h,p){this.type=a,this.input=h,this.labels=[],this.outputs=[];for(const[y,S]of p)this.labels.push(y),this.outputs.push(S)}static parse(a,h){if(a.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return h.error("Expected an even number of arguments.");const p=h.parse(a[1],1,Fe);if(!p)return null;const y=[];let S=null;h.expectedType&&h.expectedType.kind!=="value"&&(S=h.expectedType);for(let T=1;T<a.length;T+=2){const M=T===1?-1/0:a[T],D=a[T+1],j=T,W=T+1;if(typeof M!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(y.length&&y[y.length-1][0]>=M)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',j);const J=h.parse(D,W,S);if(!J)return null;S=S||J.type,y.push([M,J])}return new Cc(S,p,y)}evaluate(a){const h=this.labels,p=this.outputs;if(h.length===1)return p[0].evaluate(a);const y=this.input.evaluate(a);if(y<=h[0])return p[0].evaluate(a);const S=h.length;return y>=h[S-1]?p[S-1].evaluate(a):p[Ic(h,y)].evaluate(a)}eachChild(a){a(this.input);for(const h of this.outputs)a(h)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function Ac(c,a,h){return c+h*(a-c)}function Mc(c,a,h){return c.map((p,y)=>Ac(p,a[y],h))}const Xr={number:Ac,color:function(c,a,h,p="rgb"){switch(p){case"rgb":{const[y,S,T,M]=Mc(c.rgb,a.rgb,h);return new yt(y,S,T,M,!1)}case"hcl":{const[y,S,T,M]=c.hcl,[D,j,W,J]=a.hcl;let se,oe;if(isNaN(y)||isNaN(D))isNaN(y)?isNaN(D)?se=NaN:(se=D,T!==1&&T!==0||(oe=j)):(se=y,W!==1&&W!==0||(oe=S));else{let Je=D-y;D>y&&Je>180?Je-=360:D<y&&y-D>180&&(Je+=360),se=y+h*Je}const[ue,Te,we,Ve]=function([Je,Ne,at,ct]){return Je=isNaN(Je)?0:Je*bt,In([at,Math.cos(Je)*Ne,Math.sin(Je)*Ne,ct])}([se,oe??Ac(S,j,h),Ac(T,W,h),Ac(M,J,h)]);return new yt(ue,Te,we,Ve,!1)}case"lab":{const[y,S,T,M]=In(Mc(c.lab,a.lab,h));return new yt(y,S,T,M,!1)}}},array:Mc,padding:function(c,a,h){return new li(Mc(c.values,a.values,h))}};class ls{constructor(a,h,p,y,S){this.type=a,this.operator=h,this.interpolation=p,this.input=y,this.labels=[],this.outputs=[];for(const[T,M]of S)this.labels.push(T),this.outputs.push(M)}static interpolationFactor(a,h,p,y){let S=0;if(a.name==="exponential")S=Rh(h,a.base,p,y);else if(a.name==="linear")S=Rh(h,1,p,y);else if(a.name==="cubic-bezier"){const T=a.controlPoints;S=new A(T[0],T[1],T[2],T[3]).solve(Rh(h,1,p,y))}return S}static parse(a,h){let[p,y,S,...T]=a;if(!Array.isArray(y)||y.length===0)return h.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){const j=y[1];if(typeof j!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:j}}else{if(y[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(y[0])}`,1,0);{const j=y.slice(1);if(j.length!==4||j.some(W=>typeof W!="number"||W<0||W>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:j}}}if(a.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(S=h.parse(S,2,Fe),!S)return null;const M=[];let D=null;p==="interpolate-hcl"||p==="interpolate-lab"?D=Yt:h.expectedType&&h.expectedType.kind!=="value"&&(D=h.expectedType);for(let j=0;j<T.length;j+=2){const W=T[j],J=T[j+1],se=j+3,oe=j+4;if(typeof W!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',se);if(M.length&&M[M.length-1][0]>=W)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',se);const ue=h.parse(J,oe,D);if(!ue)return null;D=D||ue.type,M.push([W,ue])}return $e(D,Fe)||$e(D,Yt)||$e(D,jt)||$e(D,Pn(Fe))?new ls(D,p,y,S,M):h.error(`Type ${he(D)} is not interpolatable.`)}evaluate(a){const h=this.labels,p=this.outputs;if(h.length===1)return p[0].evaluate(a);const y=this.input.evaluate(a);if(y<=h[0])return p[0].evaluate(a);const S=h.length;if(y>=h[S-1])return p[S-1].evaluate(a);const T=Ic(h,y),M=ls.interpolationFactor(this.interpolation,y,h[T],h[T+1]),D=p[T].evaluate(a),j=p[T+1].evaluate(a);switch(this.operator){case"interpolate":return Xr[this.type.kind](D,j,M);case"interpolate-hcl":return Xr.color(D,j,M,"hcl");case"interpolate-lab":return Xr.color(D,j,M,"lab")}}eachChild(a){a(this.input);for(const h of this.outputs)a(h)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function Rh(c,a,h,p){const y=p-h,S=c-h;return y===0?0:a===1?S/y:(Math.pow(a,S)-1)/(Math.pow(a,y)-1)}class $u{constructor(a,h){this.type=a,this.args=h}static parse(a,h){if(a.length<2)return h.error("Expectected at least one argument.");let p=null;const y=h.expectedType;y&&y.kind!=="value"&&(p=y);const S=[];for(const M of a.slice(1)){const D=h.parse(M,1+S.length,p,void 0,{typeAnnotation:"omit"});if(!D)return null;p=p||D.type,S.push(D)}if(!p)throw new Error("No output type");const T=y&&S.some(M=>re(y,M.type));return new $u(T?Pt:p,S)}evaluate(a){let h,p=null,y=0;for(const S of this.args)if(y++,p=S.evaluate(a),p&&p instanceof ri&&!p.available&&(h||(h=p.name),p=null,y===this.args.length&&(p=h)),p!==null)break;return p}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}class zu{constructor(a,h){this.type=h.type,this.bindings=[].concat(a),this.result=h}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const h of this.bindings)a(h[1]);a(this.result)}static parse(a,h){if(a.length<4)return h.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const p=[];for(let S=1;S<a.length-1;S+=2){const T=a[S];if(typeof T!="string")return h.error(`Expected string, but found ${typeof T} instead.`,S);if(/[^a-zA-Z0-9_]/.test(T))return h.error("Variable names must contain only alphanumeric characters or '_'.",S);const M=h.parse(a[S+1],S+1);if(!M)return null;p.push([T,M])}const y=h.parse(a[a.length-1],a.length-1,h.expectedType,p);return y?new zu(p,y):null}outputDefined(){return this.result.outputDefined()}}class Fh{constructor(a,h,p){this.type=a,this.index=h,this.input=p}static parse(a,h){if(a.length!==3)return h.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const p=h.parse(a[1],1,Fe),y=h.parse(a[2],2,Pn(h.expectedType||Pt));return p&&y?new Fh(y.type.itemType,p,y):null}evaluate(a){const h=this.index.evaluate(a),p=this.input.evaluate(a);if(h<0)throw new yr(`Array index out of bounds: ${h} < 0.`);if(h>=p.length)throw new yr(`Array index out of bounds: ${h} > ${p.length-1}.`);if(h!==Math.floor(h))throw new yr(`Array index must be an integer, but found ${h} instead.`);return p[h]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}}class $h{constructor(a,h){this.type=St,this.needle=a,this.haystack=h}static parse(a,h){if(a.length!==3)return h.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const p=h.parse(a[1],1,Pt),y=h.parse(a[2],2,Pt);return p&&y?me(p.type,[St,mt,Fe,Qe,Pt])?new $h(p,y):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${he(p.type)} instead`):null}evaluate(a){const h=this.needle.evaluate(a),p=this.haystack.evaluate(a);if(!p)return!1;if(!Ae(h,["boolean","string","number","null"]))throw new yr(`Expected first argument to be of type boolean, string, number or null, but found ${he(Ci(h))} instead.`);if(!Ae(p,["string","array"]))throw new yr(`Expected second argument to be of type array or string, but found ${he(Ci(p))} instead.`);return p.indexOf(h)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}}class Bu{constructor(a,h,p){this.type=Fe,this.needle=a,this.haystack=h,this.fromIndex=p}static parse(a,h){if(a.length<=2||a.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const p=h.parse(a[1],1,Pt),y=h.parse(a[2],2,Pt);if(!p||!y)return null;if(!me(p.type,[St,mt,Fe,Qe,Pt]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${he(p.type)} instead`);if(a.length===4){const S=h.parse(a[3],3,Fe);return S?new Bu(p,y,S):null}return new Bu(p,y)}evaluate(a){const h=this.needle.evaluate(a),p=this.haystack.evaluate(a);if(!Ae(h,["boolean","string","number","null"]))throw new yr(`Expected first argument to be of type boolean, string, number or null, but found ${he(Ci(h))} instead.`);if(!Ae(p,["string","array"]))throw new yr(`Expected second argument to be of type array or string, but found ${he(Ci(p))} instead.`);if(this.fromIndex){const y=this.fromIndex.evaluate(a);return p.indexOf(h,y)}return p.indexOf(h)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}}class ui{constructor(a,h,p,y,S,T){this.inputType=a,this.type=h,this.input=p,this.cases=y,this.outputs=S,this.otherwise=T}static parse(a,h){if(a.length<5)return h.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return h.error("Expected an even number of arguments.");let p,y;h.expectedType&&h.expectedType.kind!=="value"&&(y=h.expectedType);const S={},T=[];for(let j=2;j<a.length-1;j+=2){let W=a[j];const J=a[j+1];Array.isArray(W)||(W=[W]);const se=h.concat(j);if(W.length===0)return se.error("Expected at least one branch label.");for(const ue of W){if(typeof ue!="number"&&typeof ue!="string")return se.error("Branch labels must be numbers or strings.");if(typeof ue=="number"&&Math.abs(ue)>Number.MAX_SAFE_INTEGER)return se.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ue=="number"&&Math.floor(ue)!==ue)return se.error("Numeric branch labels must be integer values.");if(p){if(se.checkSubtype(p,Ci(ue)))return null}else p=Ci(ue);if(S[String(ue)]!==void 0)return se.error("Branch labels must be unique.");S[String(ue)]=T.length}const oe=h.parse(J,j,y);if(!oe)return null;y=y||oe.type,T.push(oe)}const M=h.parse(a[1],1,Pt);if(!M)return null;const D=h.parse(a[a.length-1],a.length-1,y);return D?M.type.kind!=="value"&&h.concat(1).checkSubtype(p,M.type)?null:new ui(p,y,M,S,T,D):null}evaluate(a){const h=this.input.evaluate(a);return(Ci(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every(a=>a.outputDefined())&&this.otherwise.outputDefined()}}class zh{constructor(a,h,p){this.type=a,this.branches=h,this.otherwise=p}static parse(a,h){if(a.length<4)return h.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return h.error("Expected an odd number of arguments.");let p;h.expectedType&&h.expectedType.kind!=="value"&&(p=h.expectedType);const y=[];for(let T=1;T<a.length-1;T+=2){const M=h.parse(a[T],T,St);if(!M)return null;const D=h.parse(a[T+1],T+1,p);if(!D)return null;y.push([M,D]),p=p||D.type}const S=h.parse(a[a.length-1],a.length-1,p);if(!S)return null;if(!p)throw new Error("Can't infer output type");return new zh(p,y,S)}evaluate(a){for(const[h,p]of this.branches)if(h.evaluate(a))return p.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[h,p]of this.branches)a(h),a(p);a(this.otherwise)}outputDefined(){return this.branches.every(([a,h])=>h.outputDefined())&&this.otherwise.outputDefined()}}class Nu{constructor(a,h,p,y){this.type=a,this.input=h,this.beginIndex=p,this.endIndex=y}static parse(a,h){if(a.length<=2||a.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const p=h.parse(a[1],1,Pt),y=h.parse(a[2],2,Fe);if(!p||!y)return null;if(!me(p.type,[Pn(Pt),mt,Pt]))return h.error(`Expected first argument to be of type array or string, but found ${he(p.type)} instead`);if(a.length===4){const S=h.parse(a[3],3,Fe);return S?new Nu(p.type,p,y,S):null}return new Nu(p.type,p,y)}evaluate(a){const h=this.input.evaluate(a),p=this.beginIndex.evaluate(a);if(!Ae(h,["string","array"]))throw new yr(`Expected first argument to be of type array or string, but found ${he(Ci(h))} instead.`);if(this.endIndex){const y=this.endIndex.evaluate(a);return h.slice(p,y)}return h.slice(p)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}}function Cm(c,a){return c==="=="||c==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function Am(c,a,h,p){return p.compare(a,h)===0}function wl(c,a,h){const p=c!=="=="&&c!=="!=";return class yk{constructor(S,T,M){this.type=St,this.lhs=S,this.rhs=T,this.collator=M,this.hasUntypedArgument=S.type.kind==="value"||T.type.kind==="value"}static parse(S,T){if(S.length!==3&&S.length!==4)return T.error("Expected two or three arguments.");const M=S[0];let D=T.parse(S[1],1,Pt);if(!D)return null;if(!Cm(M,D.type))return T.concat(1).error(`"${M}" comparisons are not supported for type '${he(D.type)}'.`);let j=T.parse(S[2],2,Pt);if(!j)return null;if(!Cm(M,j.type))return T.concat(2).error(`"${M}" comparisons are not supported for type '${he(j.type)}'.`);if(D.type.kind!==j.type.kind&&D.type.kind!=="value"&&j.type.kind!=="value")return T.error(`Cannot compare types '${he(D.type)}' and '${he(j.type)}'.`);p&&(D.type.kind==="value"&&j.type.kind!=="value"?D=new Zr(j.type,[D]):D.type.kind!=="value"&&j.type.kind==="value"&&(j=new Zr(D.type,[j])));let W=null;if(S.length===4){if(D.type.kind!=="string"&&j.type.kind!=="string"&&D.type.kind!=="value"&&j.type.kind!=="value")return T.error("Cannot use collator to compare non-string types.");if(W=T.parse(S[3],3,qn),!W)return null}return new yk(D,j,W)}evaluate(S){const T=this.lhs.evaluate(S),M=this.rhs.evaluate(S);if(p&&this.hasUntypedArgument){const D=Ci(T),j=Ci(M);if(D.kind!==j.kind||D.kind!=="string"&&D.kind!=="number")throw new yr(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${D.kind}, ${j.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const D=Ci(T),j=Ci(M);if(D.kind!=="string"||j.kind!=="string")return a(S,T,M)}return this.collator?h(S,T,M,this.collator.evaluate(S)):a(S,T,M)}eachChild(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)}outputDefined(){return!0}}}const sy=wl("==",function(c,a,h){return a===h},Am),ay=wl("!=",function(c,a,h){return a!==h},function(c,a,h,p){return!Am(0,a,h,p)}),oy=wl("<",function(c,a,h){return a<h},function(c,a,h,p){return p.compare(a,h)<0}),ly=wl(">",function(c,a,h){return a>h},function(c,a,h,p){return p.compare(a,h)>0}),cy=wl("<=",function(c,a,h){return a<=h},function(c,a,h,p){return p.compare(a,h)<=0}),uy=wl(">=",function(c,a,h){return a>=h},function(c,a,h,p){return p.compare(a,h)>=0});class Bh{constructor(a,h,p,y,S){this.type=mt,this.number=a,this.locale=h,this.currency=p,this.minFractionDigits=y,this.maxFractionDigits=S}static parse(a,h){if(a.length!==3)return h.error("Expected two arguments.");const p=h.parse(a[1],1,Fe);if(!p)return null;const y=a[2];if(typeof y!="object"||Array.isArray(y))return h.error("NumberFormat options argument must be an object.");let S=null;if(y.locale&&(S=h.parse(y.locale,1,mt),!S))return null;let T=null;if(y.currency&&(T=h.parse(y.currency,1,mt),!T))return null;let M=null;if(y["min-fraction-digits"]&&(M=h.parse(y["min-fraction-digits"],1,Fe),!M))return null;let D=null;return y["max-fraction-digits"]&&(D=h.parse(y["max-fraction-digits"],1,Fe),!D)?null:new Bh(p,S,T,M,D)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}}class ju{constructor(a){this.type=Cn,this.sections=a}static parse(a,h){if(a.length<2)return h.error("Expected at least one argument.");const p=a[1];if(!Array.isArray(p)&&typeof p=="object")return h.error("First argument must be an image or text section.");const y=[];let S=!1;for(let T=1;T<=a.length-1;++T){const M=a[T];if(S&&typeof M=="object"&&!Array.isArray(M)){S=!1;let D=null;if(M["font-scale"]&&(D=h.parse(M["font-scale"],1,Fe),!D))return null;let j=null;if(M["text-font"]&&(j=h.parse(M["text-font"],1,Pn(mt)),!j))return null;let W=null;if(M["text-color"]&&(W=h.parse(M["text-color"],1,Yt),!W))return null;const J=y[y.length-1];J.scale=D,J.font=j,J.textColor=W}else{const D=h.parse(a[T],1,Pt);if(!D)return null;const j=D.type.kind;if(j!=="string"&&j!=="value"&&j!=="null"&&j!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,y.push({content:D,scale:null,font:null,textColor:null})}}return new ju(y)}evaluate(a){return new Yn(this.sections.map(h=>{const p=h.content.evaluate(a);return Ci(p)===vn?new An("",p,null,null,null):new An(po(p),null,h.scale?h.scale.evaluate(a):null,h.font?h.font.evaluate(a).join(","):null,h.textColor?h.textColor.evaluate(a):null)}))}eachChild(a){for(const h of this.sections)a(h.content),h.scale&&a(h.scale),h.font&&a(h.font),h.textColor&&a(h.textColor)}outputDefined(){return!1}}class Nh{constructor(a){this.type=vn,this.input=a}static parse(a,h){if(a.length!==2)return h.error("Expected two arguments.");const p=h.parse(a[1],1,mt);return p?new Nh(p):h.error("No image name provided.")}evaluate(a){const h=this.input.evaluate(a),p=ri.fromString(h);return p&&a.availableImages&&(p.available=a.availableImages.indexOf(h)>-1),p}eachChild(a){a(this.input)}outputDefined(){return!1}}class jh{constructor(a){this.type=Fe,this.input=a}static parse(a,h){if(a.length!==2)return h.error(`Expected 1 argument, but found ${a.length-1} instead.`);const p=h.parse(a[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${he(p.type)} instead.`):new jh(p):null}evaluate(a){const h=this.input.evaluate(a);if(typeof h=="string"||Array.isArray(h))return h.length;throw new yr(`Expected value to be of type string or array, but found ${he(Ci(h))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}}const Sl={"==":sy,"!=":ay,">":ly,"<":oy,">=":uy,"<=":cy,array:Zr,at:Fh,boolean:Zr,case:zh,coalesce:$u,collator:xl,format:ju,image:Nh,in:$h,"index-of":Bu,interpolate:ls,"interpolate-hcl":ls,"interpolate-lab":ls,length:jh,let:zu,literal:mo,match:ui,number:Zr,"number-format":Bh,object:Zr,slice:Nu,step:Cc,string:Zr,"to-boolean":go,"to-color":go,"to-number":go,"to-string":go,var:Ou,within:Uo};function Mm(c,[a,h,p,y]){a=a.evaluate(c),h=h.evaluate(c),p=p.evaluate(c);const S=y?y.evaluate(c):1,T=fo(a,h,p,S);if(T)throw new yr(T);return new yt(a/255,h/255,p/255,S,!1)}function km(c,a){return c in a}function Uh(c,a){const h=a[c];return h===void 0?null:h}function Vo(c){return{type:c}}function Pm(c){return{result:"success",value:c}}function Tl(c){return{result:"error",value:c}}function El(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function Dm(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function Vh(c){return!!c.expression&&c.expression.interpolated}function yi(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Uu(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function dy(c){return c}function Lm(c,a){const h=a.type==="color",p=c.stops&&typeof c.stops[0][0]=="object",y=p||!(p||c.property!==void 0),S=c.type||(Vh(a)?"exponential":"interval");if(h||a.type==="padding"){const W=h?yt.parse:li.parse;(c=Rn({},c)).stops&&(c.stops=c.stops.map(J=>[J[0],W(J[1])])),c.default=W(c.default?c.default:a.default)}if(c.colorSpace&&(T=c.colorSpace)!=="rgb"&&T!=="hcl"&&T!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var T;let M,D,j;if(S==="exponential")M=Om;else if(S==="interval")M=Hh;else if(S==="categorical"){M=hy,D=Object.create(null);for(const W of c.stops)D[W[0]]=W[1];j=typeof c.stops[0][0]}else{if(S!=="identity")throw new Error(`Unknown function type "${S}"`);M=fy}if(p){const W={},J=[];for(let ue=0;ue<c.stops.length;ue++){const Te=c.stops[ue],we=Te[0].zoom;W[we]===void 0&&(W[we]={zoom:we,type:c.type,property:c.property,default:c.default,stops:[]},J.push(we)),W[we].stops.push([Te[0].value,Te[1]])}const se=[];for(const ue of J)se.push([W[ue].zoom,Lm(W[ue],a)]);const oe={name:"linear"};return{kind:"composite",interpolationType:oe,interpolationFactor:ls.interpolationFactor.bind(void 0,oe),zoomStops:se.map(ue=>ue[0]),evaluate:({zoom:ue},Te)=>Om({stops:se,base:c.base},a,ue).evaluate(ue,Te)}}if(y){const W=S==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:W,interpolationFactor:ls.interpolationFactor.bind(void 0,W),zoomStops:c.stops.map(J=>J[0]),evaluate:({zoom:J})=>M(c,a,J,D,j)}}return{kind:"source",evaluate(W,J){const se=J&&J.properties?J.properties[c.property]:void 0;return se===void 0?kc(c.default,a.default):M(c,a,se,D,j)}}}function kc(c,a,h){return c!==void 0?c:a!==void 0?a:h!==void 0?h:void 0}function hy(c,a,h,p,y){return kc(typeof h===y?p[h]:void 0,c.default,a.default)}function Hh(c,a,h){if(yi(h)!=="number")return kc(c.default,a.default);const p=c.stops.length;if(p===1||h<=c.stops[0][0])return c.stops[0][1];if(h>=c.stops[p-1][0])return c.stops[p-1][1];const y=Ic(c.stops.map(S=>S[0]),h);return c.stops[y][1]}function Om(c,a,h){const p=c.base!==void 0?c.base:1;if(yi(h)!=="number")return kc(c.default,a.default);const y=c.stops.length;if(y===1||h<=c.stops[0][0])return c.stops[0][1];if(h>=c.stops[y-1][0])return c.stops[y-1][1];const S=Ic(c.stops.map(W=>W[0]),h),T=function(W,J,se,oe){const ue=oe-se,Te=W-se;return ue===0?0:J===1?Te/ue:(Math.pow(J,Te)-1)/(Math.pow(J,ue)-1)}(h,p,c.stops[S][0],c.stops[S+1][0]),M=c.stops[S][1],D=c.stops[S+1][1],j=Xr[a.type]||dy;return typeof M.evaluate=="function"?{evaluate(...W){const J=M.evaluate.apply(void 0,W),se=D.evaluate.apply(void 0,W);if(J!==void 0&&se!==void 0)return j(J,se,T,c.colorSpace)}}:j(M,D,T,c.colorSpace)}function fy(c,a,h){switch(a.type){case"color":h=yt.parse(h);break;case"formatted":h=Yn.fromString(h.toString());break;case"resolvedImage":h=ri.fromString(h.toString());break;case"padding":h=li.parse(h);break;default:yi(h)===a.type||a.type==="enum"&&a.values[h]||(h=void 0)}return kc(h,c.default,a.default)}Kr.register(Sl,{error:[{kind:"error"},[mt],(c,[a])=>{throw new yr(a.evaluate(c))}],typeof:[mt,[Pt],(c,[a])=>he(Ci(a.evaluate(c)))],"to-rgba":[Pn(Fe,4),[Yt],(c,[a])=>{const[h,p,y,S]=a.evaluate(c).rgb;return[255*h,255*p,255*y,S]}],rgb:[Yt,[Fe,Fe,Fe],Mm],rgba:[Yt,[Fe,Fe,Fe,Fe],Mm],has:{type:St,overloads:[[[mt],(c,[a])=>km(a.evaluate(c),c.properties())],[[mt,an],(c,[a,h])=>km(a.evaluate(c),h.evaluate(c))]]},get:{type:Pt,overloads:[[[mt],(c,[a])=>Uh(a.evaluate(c),c.properties())],[[mt,an],(c,[a,h])=>Uh(a.evaluate(c),h.evaluate(c))]]},"feature-state":[Pt,[mt],(c,[a])=>Uh(a.evaluate(c),c.featureState||{})],properties:[an,[],c=>c.properties()],"geometry-type":[mt,[],c=>c.geometryType()],id:[Pt,[],c=>c.id()],zoom:[Fe,[],c=>c.globals.zoom],"heatmap-density":[Fe,[],c=>c.globals.heatmapDensity||0],"line-progress":[Fe,[],c=>c.globals.lineProgress||0],accumulated:[Pt,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[Fe,Vo(Fe),(c,a)=>{let h=0;for(const p of a)h+=p.evaluate(c);return h}],"*":[Fe,Vo(Fe),(c,a)=>{let h=1;for(const p of a)h*=p.evaluate(c);return h}],"-":{type:Fe,overloads:[[[Fe,Fe],(c,[a,h])=>a.evaluate(c)-h.evaluate(c)],[[Fe],(c,[a])=>-a.evaluate(c)]]},"/":[Fe,[Fe,Fe],(c,[a,h])=>a.evaluate(c)/h.evaluate(c)],"%":[Fe,[Fe,Fe],(c,[a,h])=>a.evaluate(c)%h.evaluate(c)],ln2:[Fe,[],()=>Math.LN2],pi:[Fe,[],()=>Math.PI],e:[Fe,[],()=>Math.E],"^":[Fe,[Fe,Fe],(c,[a,h])=>Math.pow(a.evaluate(c),h.evaluate(c))],sqrt:[Fe,[Fe],(c,[a])=>Math.sqrt(a.evaluate(c))],log10:[Fe,[Fe],(c,[a])=>Math.log(a.evaluate(c))/Math.LN10],ln:[Fe,[Fe],(c,[a])=>Math.log(a.evaluate(c))],log2:[Fe,[Fe],(c,[a])=>Math.log(a.evaluate(c))/Math.LN2],sin:[Fe,[Fe],(c,[a])=>Math.sin(a.evaluate(c))],cos:[Fe,[Fe],(c,[a])=>Math.cos(a.evaluate(c))],tan:[Fe,[Fe],(c,[a])=>Math.tan(a.evaluate(c))],asin:[Fe,[Fe],(c,[a])=>Math.asin(a.evaluate(c))],acos:[Fe,[Fe],(c,[a])=>Math.acos(a.evaluate(c))],atan:[Fe,[Fe],(c,[a])=>Math.atan(a.evaluate(c))],min:[Fe,Vo(Fe),(c,a)=>Math.min(...a.map(h=>h.evaluate(c)))],max:[Fe,Vo(Fe),(c,a)=>Math.max(...a.map(h=>h.evaluate(c)))],abs:[Fe,[Fe],(c,[a])=>Math.abs(a.evaluate(c))],round:[Fe,[Fe],(c,[a])=>{const h=a.evaluate(c);return h<0?-Math.round(-h):Math.round(h)}],floor:[Fe,[Fe],(c,[a])=>Math.floor(a.evaluate(c))],ceil:[Fe,[Fe],(c,[a])=>Math.ceil(a.evaluate(c))],"filter-==":[St,[mt,Pt],(c,[a,h])=>c.properties()[a.value]===h.value],"filter-id-==":[St,[Pt],(c,[a])=>c.id()===a.value],"filter-type-==":[St,[mt],(c,[a])=>c.geometryType()===a.value],"filter-<":[St,[mt,Pt],(c,[a,h])=>{const p=c.properties()[a.value],y=h.value;return typeof p==typeof y&&p<y}],"filter-id-<":[St,[Pt],(c,[a])=>{const h=c.id(),p=a.value;return typeof h==typeof p&&h<p}],"filter->":[St,[mt,Pt],(c,[a,h])=>{const p=c.properties()[a.value],y=h.value;return typeof p==typeof y&&p>y}],"filter-id->":[St,[Pt],(c,[a])=>{const h=c.id(),p=a.value;return typeof h==typeof p&&h>p}],"filter-<=":[St,[mt,Pt],(c,[a,h])=>{const p=c.properties()[a.value],y=h.value;return typeof p==typeof y&&p<=y}],"filter-id-<=":[St,[Pt],(c,[a])=>{const h=c.id(),p=a.value;return typeof h==typeof p&&h<=p}],"filter->=":[St,[mt,Pt],(c,[a,h])=>{const p=c.properties()[a.value],y=h.value;return typeof p==typeof y&&p>=y}],"filter-id->=":[St,[Pt],(c,[a])=>{const h=c.id(),p=a.value;return typeof h==typeof p&&h>=p}],"filter-has":[St,[Pt],(c,[a])=>a.value in c.properties()],"filter-has-id":[St,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[St,[Pn(mt)],(c,[a])=>a.value.indexOf(c.geometryType())>=0],"filter-id-in":[St,[Pn(Pt)],(c,[a])=>a.value.indexOf(c.id())>=0],"filter-in-small":[St,[mt,Pn(Pt)],(c,[a,h])=>h.value.indexOf(c.properties()[a.value])>=0],"filter-in-large":[St,[mt,Pn(Pt)],(c,[a,h])=>function(p,y,S,T){for(;S<=T;){const M=S+T>>1;if(y[M]===p)return!0;y[M]>p?T=M-1:S=M+1}return!1}(c.properties()[a.value],h.value,0,h.value.length-1)],all:{type:St,overloads:[[[St,St],(c,[a,h])=>a.evaluate(c)&&h.evaluate(c)],[Vo(St),(c,a)=>{for(const h of a)if(!h.evaluate(c))return!1;return!0}]]},any:{type:St,overloads:[[[St,St],(c,[a,h])=>a.evaluate(c)||h.evaluate(c)],[Vo(St),(c,a)=>{for(const h of a)if(h.evaluate(c))return!0;return!1}]]},"!":[St,[St],(c,[a])=>!a.evaluate(c)],"is-supported-script":[St,[mt],(c,[a])=>{const h=c.globals&&c.globals.isSupportedScript;return!h||h(a.evaluate(c))}],upcase:[mt,[mt],(c,[a])=>a.evaluate(c).toUpperCase()],downcase:[mt,[mt],(c,[a])=>a.evaluate(c).toLowerCase()],concat:[mt,Vo(Pt),(c,a)=>a.map(h=>po(h.evaluate(c))).join("")],"resolved-locale":[mt,[qn],(c,[a])=>a.evaluate(c).resolvedLocale()]});class Gh{constructor(a,h){var p;this.expression=a,this._warningHistory={},this._evaluator=new Bs,this._defaultValue=h?(p=h).type==="color"&&Uu(p.default)?new yt(0,0,0,0):p.type==="color"?yt.parse(p.default)||null:p.type==="padding"?li.parse(p.default)||null:p.default===void 0?null:p.default:null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(a,h,p,y,S,T){return this._evaluator.globals=a,this._evaluator.feature=h,this._evaluator.featureState=p,this._evaluator.canonical=y,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=T,this.expression.evaluate(this._evaluator)}evaluate(a,h,p,y,S,T){this._evaluator.globals=a,this._evaluator.feature=h||null,this._evaluator.featureState=p||null,this._evaluator.canonical=y,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=T||null;try{const M=this.expression.evaluate(this._evaluator);if(M==null||typeof M=="number"&&M!=M)return this._defaultValue;if(this._enumValues&&!(M in this._enumValues))throw new yr(`Expected value to be one of ${Object.keys(this._enumValues).map(D=>JSON.stringify(D)).join(", ")}, but found ${JSON.stringify(M)} instead.`);return M}catch(M){return this._warningHistory[M.message]||(this._warningHistory[M.message]=!0,typeof console<"u"&&console.warn(M.message)),this._defaultValue}}}function Vu(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in Sl}function Bi(c,a){const h=new bl(Sl,Ru,[],a?function(y){const S={color:Yt,string:mt,number:Fe,enum:mt,boolean:St,formatted:Cn,padding:jt,resolvedImage:vn};return y.type==="array"?Pn(S[y.value]||Pt,y.length):S[y.type]}(a):void 0),p=h.parse(c,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?Pm(new Gh(p,a)):Tl(h.errors)}class Wh{constructor(a,h){this.kind=a,this._styleExpression=h,this.isStateDependent=a!=="constant"&&!Tc(h.expression)}evaluateWithoutErrorHandling(a,h,p,y,S,T){return this._styleExpression.evaluateWithoutErrorHandling(a,h,p,y,S,T)}evaluate(a,h,p,y,S,T){return this._styleExpression.evaluate(a,h,p,y,S,T)}}class Jn{constructor(a,h,p,y){this.kind=a,this.zoomStops=p,this._styleExpression=h,this.isStateDependent=a!=="camera"&&!Tc(h.expression),this.interpolationType=y}evaluateWithoutErrorHandling(a,h,p,y,S,T){return this._styleExpression.evaluateWithoutErrorHandling(a,h,p,y,S,T)}evaluate(a,h,p,y,S,T){return this._styleExpression.evaluate(a,h,p,y,S,T)}interpolationFactor(a,h,p){return this.interpolationType?ls.interpolationFactor(this.interpolationType,a,h,p):0}}function Hu(c,a){const h=Bi(c,a);if(h.result==="error")return h;const p=h.value.expression,y=Fu(p);if(!y&&!El(a))return Tl([new Ln("","data expressions not supported")]);const S=Ec(p,["zoom"]);if(!S&&!Dm(a))return Tl([new Ln("","zoom expressions not supported")]);const T=Ai(p);return T||S?T instanceof Ln?Tl([T]):T instanceof ls&&!Vh(a)?Tl([new Ln("",'"interpolate" expressions cannot be used with this property')]):Pm(T?new Jn(y?"camera":"composite",h.value,T.labels,T instanceof ls?T.interpolation:void 0):new Wh(y?"constant":"source",h.value)):Tl([new Ln("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Mi{constructor(a,h){this._parameters=a,this._specification=h,Rn(this,Lm(this._parameters,this._specification))}static deserialize(a){return new Mi(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function Ai(c){let a=null;if(c instanceof zu)a=Ai(c.result);else if(c instanceof $u){for(const h of c.args)if(a=Ai(h),a)break}else(c instanceof Cc||c instanceof ls)&&c.input instanceof Kr&&c.input.name==="zoom"&&(a=c);return a instanceof Ln||c.eachChild(h=>{const p=Ai(h);p instanceof Ln?a=p:!a&&p?a=new Ln("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&p&&a!==p&&(a=new Ln("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),a}function Il(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const a of c.slice(1))if(!Il(a)&&typeof a!="boolean")return!1;return!0;default:return!0}}const Rm={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function qh(c){if(c==null)return{filter:()=>!0,needGeometry:!1};Il(c)||(c=Gu(c));const a=Bi(c,Rm);if(a.result==="error")throw new Error(a.value.map(h=>`${h.key}: ${h.message}`).join(", "));return{filter:(h,p,y)=>a.value.evaluate(h,p,{},y),needGeometry:Fm(c)}}function py(c,a){return c<a?-1:c>a?1:0}function Fm(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(let a=1;a<c.length;a++)if(Fm(c[a]))return!0;return!1}function Gu(c){if(!c)return!0;const a=c[0];return c.length<=1?a!=="any":a==="=="?Wu(c[1],c[2],"=="):a==="!="?Pc(Wu(c[1],c[2],"==")):a==="<"||a===">"||a==="<="||a===">="?Wu(c[1],c[2],a):a==="any"?(h=c.slice(1),["any"].concat(h.map(Gu))):a==="all"?["all"].concat(c.slice(1).map(Gu)):a==="none"?["all"].concat(c.slice(1).map(Gu).map(Pc)):a==="in"?Zh(c[1],c.slice(2)):a==="!in"?Pc(Zh(c[1],c.slice(2))):a==="has"?Kh(c[1]):a==="!has"?Pc(Kh(c[1])):a!=="within"||c;var h}function Wu(c,a,h){switch(c){case"$type":return[`filter-type-${h}`,a];case"$id":return[`filter-id-${h}`,a];default:return[`filter-${h}`,c,a]}}function Zh(c,a){if(a.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some(h=>typeof h!=typeof a[0])?["filter-in-large",c,["literal",a.sort(py)]]:["filter-in-small",c,["literal",a]]}}function Kh(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function Pc(c){return["!",c]}function Dc(c){const a=typeof c;if(a==="number"||a==="boolean"||a==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let y="[";for(const S of c)y+=`${Dc(S)},`;return`${y}]`}const h=Object.keys(c).sort();let p="{";for(let y=0;y<h.length;y++)p+=`${JSON.stringify(h[y])}:${Dc(c[h[y]])},`;return`${p}}`}function my(c){let a="";for(const h of ft)a+=`/${Dc(c[h])}`;return a}function $m(c){const a=c.value;return a?[new vt(c.key,a,"constants have been deprecated as of v8")]:[]}function er(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function Ho(c){if(Array.isArray(c))return c.map(Ho);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const a={};for(const h in c)a[h]=Ho(c[h]);return a}return er(c)}function Cs(c){const a=c.key,h=c.value,p=c.valueSpec||{},y=c.objectElementValidators||{},S=c.style,T=c.styleSpec,M=c.validateSpec;let D=[];const j=yi(h);if(j!=="object")return[new vt(a,h,`object expected, ${j} found`)];for(const W in h){const J=W.split(".")[0],se=p[J]||p["*"];let oe;if(y[J])oe=y[J];else if(p[J])oe=M;else if(y["*"])oe=y["*"];else{if(!p["*"]){D.push(new vt(a,h[W],`unknown property "${W}"`));continue}oe=M}D=D.concat(oe({key:(a&&`${a}.`)+W,value:h[W],valueSpec:se,style:S,styleSpec:T,object:h,objectKey:W,validateSpec:M},h))}for(const W in p)y[W]||p[W].required&&p[W].default===void 0&&h[W]===void 0&&D.push(new vt(a,h,`missing required property "${W}"`));return D}function zm(c){const a=c.value,h=c.valueSpec,p=c.style,y=c.styleSpec,S=c.key,T=c.arrayElementValidator||c.validateSpec;if(yi(a)!=="array")return[new vt(S,a,`array expected, ${yi(a)} found`)];if(h.length&&a.length!==h.length)return[new vt(S,a,`array length ${h.length} expected, length ${a.length} found`)];if(h["min-length"]&&a.length<h["min-length"])return[new vt(S,a,`array length at least ${h["min-length"]} expected, length ${a.length} found`)];let M={type:h.value,values:h.values};y.$version<7&&(M.function=h.function),yi(h.value)==="object"&&(M=h.value);let D=[];for(let j=0;j<a.length;j++)D=D.concat(T({array:a,arrayIndex:j,value:a[j],valueSpec:M,validateSpec:c.validateSpec,style:p,styleSpec:y,key:`${S}[${j}]`}));return D}function Xh(c){const a=c.key,h=c.value,p=c.valueSpec;let y=yi(h);return y==="number"&&h!=h&&(y="NaN"),y!=="number"?[new vt(a,h,`number expected, ${y} found`)]:"minimum"in p&&h<p.minimum?[new vt(a,h,`${h} is less than the minimum value ${p.minimum}`)]:"maximum"in p&&h>p.maximum?[new vt(a,h,`${h} is greater than the maximum value ${p.maximum}`)]:[]}function Bm(c){const a=c.valueSpec,h=er(c.value.type);let p,y,S,T={};const M=h!=="categorical"&&c.value.property===void 0,D=!M,j=yi(c.value.stops)==="array"&&yi(c.value.stops[0])==="array"&&yi(c.value.stops[0][0])==="object",W=Cs({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(oe){if(h==="identity")return[new vt(oe.key,oe.value,'identity function may not have a "stops" property')];let ue=[];const Te=oe.value;return ue=ue.concat(zm({key:oe.key,value:Te,valueSpec:oe.valueSpec,validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec,arrayElementValidator:J})),yi(Te)==="array"&&Te.length===0&&ue.push(new vt(oe.key,Te,"array must have at least one stop")),ue},default:function(oe){return oe.validateSpec({key:oe.key,value:oe.value,valueSpec:a,validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec})}}});return h==="identity"&&M&&W.push(new vt(c.key,c.value,'missing required property "property"')),h==="identity"||c.value.stops||W.push(new vt(c.key,c.value,'missing required property "stops"')),h==="exponential"&&c.valueSpec.expression&&!Vh(c.valueSpec)&&W.push(new vt(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(D&&!El(c.valueSpec)?W.push(new vt(c.key,c.value,"property functions not supported")):M&&!Dm(c.valueSpec)&&W.push(new vt(c.key,c.value,"zoom functions not supported"))),h!=="categorical"&&!j||c.value.property!==void 0||W.push(new vt(c.key,c.value,'"property" property is required')),W;function J(oe){let ue=[];const Te=oe.value,we=oe.key;if(yi(Te)!=="array")return[new vt(we,Te,`array expected, ${yi(Te)} found`)];if(Te.length!==2)return[new vt(we,Te,`array length 2 expected, length ${Te.length} found`)];if(j){if(yi(Te[0])!=="object")return[new vt(we,Te,`object expected, ${yi(Te[0])} found`)];if(Te[0].zoom===void 0)return[new vt(we,Te,"object stop key must have zoom")];if(Te[0].value===void 0)return[new vt(we,Te,"object stop key must have value")];if(S&&S>er(Te[0].zoom))return[new vt(we,Te[0].zoom,"stop zoom values must appear in ascending order")];er(Te[0].zoom)!==S&&(S=er(Te[0].zoom),y=void 0,T={}),ue=ue.concat(Cs({key:`${we}[0]`,value:Te[0],valueSpec:{zoom:{}},validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec,objectElementValidators:{zoom:Xh,value:se}}))}else ue=ue.concat(se({key:`${we}[0]`,value:Te[0],valueSpec:{},validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec},Te));return Vu(Ho(Te[1]))?ue.concat([new vt(`${we}[1]`,Te[1],"expressions are not allowed in function stops.")]):ue.concat(oe.validateSpec({key:`${we}[1]`,value:Te[1],valueSpec:a,validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec}))}function se(oe,ue){const Te=yi(oe.value),we=er(oe.value),Ve=oe.value!==null?oe.value:ue;if(p){if(Te!==p)return[new vt(oe.key,Ve,`${Te} stop domain type must match previous stop domain type ${p}`)]}else p=Te;if(Te!=="number"&&Te!=="string"&&Te!=="boolean")return[new vt(oe.key,Ve,"stop domain value must be a number, string, or boolean")];if(Te!=="number"&&h!=="categorical"){let Je=`number expected, ${Te} found`;return El(a)&&h===void 0&&(Je+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new vt(oe.key,Ve,Je)]}return h!=="categorical"||Te!=="number"||isFinite(we)&&Math.floor(we)===we?h!=="categorical"&&Te==="number"&&y!==void 0&&we<y?[new vt(oe.key,Ve,"stop domain values must appear in ascending order")]:(y=we,h==="categorical"&&we in T?[new vt(oe.key,Ve,"stop domain values must be unique")]:(T[we]=!0,[])):[new vt(oe.key,Ve,`integer expected, found ${we}`)]}}function Go(c){const a=(c.expressionContext==="property"?Hu:Bi)(Ho(c.value),c.valueSpec);if(a.result==="error")return a.value.map(p=>new vt(`${c.key}${p.key}`,c.value,p.message));const h=a.value.expression||a.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!h.outputDefined())return[new vt(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Tc(h))return[new vt(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!Tc(h))return[new vt(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!Ec(h,["zoom","feature-state"]))return[new vt(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!Fu(h))return[new vt(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Lc(c){const a=c.key,h=c.value,p=c.valueSpec,y=[];return Array.isArray(p.values)?p.values.indexOf(er(h))===-1&&y.push(new vt(a,h,`expected one of [${p.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(p.values).indexOf(er(h))===-1&&y.push(new vt(a,h,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(h)} found`)),y}function Cl(c){return Il(Ho(c.value))?Go(Rn({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Nm(c)}function Nm(c){const a=c.value,h=c.key;if(yi(a)!=="array")return[new vt(h,a,`array expected, ${yi(a)} found`)];const p=c.styleSpec;let y,S=[];if(a.length<1)return[new vt(h,a,"filter array must have at least 1 element")];switch(S=S.concat(Lc({key:`${h}[0]`,value:a[0],valueSpec:p.filter_operator,style:c.style,styleSpec:c.styleSpec})),er(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&er(a[1])==="$type"&&S.push(new vt(h,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&S.push(new vt(h,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(y=yi(a[1]),y!=="string"&&S.push(new vt(`${h}[1]`,a[1],`string expected, ${y} found`)));for(let T=2;T<a.length;T++)y=yi(a[T]),er(a[1])==="$type"?S=S.concat(Lc({key:`${h}[${T}]`,value:a[T],valueSpec:p.geometry_type,style:c.style,styleSpec:c.styleSpec})):y!=="string"&&y!=="number"&&y!=="boolean"&&S.push(new vt(`${h}[${T}]`,a[T],`string, number, or boolean expected, ${y} found`));break;case"any":case"all":case"none":for(let T=1;T<a.length;T++)S=S.concat(Nm({key:`${h}[${T}]`,value:a[T],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":y=yi(a[1]),a.length!==2?S.push(new vt(h,a,`filter array for "${a[0]}" operator must have 2 elements`)):y!=="string"&&S.push(new vt(`${h}[1]`,a[1],`string expected, ${y} found`));break;case"within":y=yi(a[1]),a.length!==2?S.push(new vt(h,a,`filter array for "${a[0]}" operator must have 2 elements`)):y!=="object"&&S.push(new vt(`${h}[1]`,a[1],`object expected, ${y} found`))}return S}function Yh(c,a){const h=c.key,p=c.validateSpec,y=c.style,S=c.styleSpec,T=c.value,M=c.objectKey,D=S[`${a}_${c.layerType}`];if(!D)return[];const j=M.match(/^(.*)-transition$/);if(a==="paint"&&j&&D[j[1]]&&D[j[1]].transition)return p({key:h,value:T,valueSpec:S.transition,style:y,styleSpec:S});const W=c.valueSpec||D[M];if(!W)return[new vt(h,T,`unknown property "${M}"`)];let J;if(yi(T)==="string"&&El(W)&&!W.tokens&&(J=/^{([^}]+)}$/.exec(T)))return[new vt(h,T,`"${M}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(J[1])} }\`.`)];const se=[];return c.layerType==="symbol"&&(M==="text-field"&&y&&!y.glyphs&&se.push(new vt(h,T,'use of "text-field" requires a style "glyphs" property')),M==="text-font"&&Uu(Ho(T))&&er(T.type)==="identity"&&se.push(new vt(h,T,'"text-font" does not support identity functions'))),se.concat(p({key:c.key,value:T,valueSpec:W,style:y,styleSpec:S,expressionContext:"property",propertyType:a,propertyKey:M}))}function Jh(c){return Yh(c,"paint")}function jm(c){return Yh(c,"layout")}function qu(c){let a=[];const h=c.value,p=c.key,y=c.style,S=c.styleSpec;h.type||h.ref||a.push(new vt(p,h,'either "type" or "ref" is required'));let T=er(h.type);const M=er(h.ref);if(h.id){const D=er(h.id);for(let j=0;j<c.arrayIndex;j++){const W=y.layers[j];er(W.id)===D&&a.push(new vt(p,h.id,`duplicate layer id "${h.id}", previously used at line ${W.id.__line__}`))}}if("ref"in h){let D;["type","source","source-layer","filter","layout"].forEach(j=>{j in h&&a.push(new vt(p,h[j],`"${j}" is prohibited for ref layers`))}),y.layers.forEach(j=>{er(j.id)===M&&(D=j)}),D?D.ref?a.push(new vt(p,h.ref,"ref cannot reference another ref layer")):T=er(D.type):a.push(new vt(p,h.ref,`ref layer "${M}" not found`))}else if(T!=="background")if(h.source){const D=y.sources&&y.sources[h.source],j=D&&er(D.type);D?j==="vector"&&T==="raster"?a.push(new vt(p,h.source,`layer "${h.id}" requires a raster source`)):j==="raster"&&T!=="raster"?a.push(new vt(p,h.source,`layer "${h.id}" requires a vector source`)):j!=="vector"||h["source-layer"]?j==="raster-dem"&&T!=="hillshade"?a.push(new vt(p,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):T!=="line"||!h.paint||!h.paint["line-gradient"]||j==="geojson"&&D.lineMetrics||a.push(new vt(p,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new vt(p,h,`layer "${h.id}" must specify a "source-layer"`)):a.push(new vt(p,h.source,`source "${h.source}" not found`))}else a.push(new vt(p,h,'missing required property "source"'));return a=a.concat(Cs({key:p,value:h,valueSpec:S.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${p}.type`,value:h.type,valueSpec:S.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:h,objectKey:"type"}),filter:Cl,layout:D=>Cs({layer:h,key:D.key,value:D.value,style:D.style,styleSpec:D.styleSpec,validateSpec:D.validateSpec,objectElementValidators:{"*":j=>jm(Rn({layerType:T},j))}}),paint:D=>Cs({layer:h,key:D.key,value:D.value,style:D.style,styleSpec:D.styleSpec,validateSpec:D.validateSpec,objectElementValidators:{"*":j=>Jh(Rn({layerType:T},j))}})}})),a}function la(c){const a=c.value,h=c.key,p=yi(a);return p!=="string"?[new vt(h,a,`string expected, ${p} found`)]:[]}const Zu={promoteId:function({key:c,value:a}){if(yi(a)==="string")return la({key:c,value:a});{const h=[];for(const p in a)h.push(...la({key:`${c}.${p}`,value:a[p]}));return h}}};function Ku(c){const a=c.value,h=c.key,p=c.styleSpec,y=c.style,S=c.validateSpec;if(!a.type)return[new vt(h,a,'"type" is required')];const T=er(a.type);let M;switch(T){case"vector":case"raster":case"raster-dem":return M=Cs({key:h,value:a,valueSpec:p[`source_${T.replace("-","_")}`],style:c.style,styleSpec:p,objectElementValidators:Zu,validateSpec:S}),M;case"geojson":if(M=Cs({key:h,value:a,valueSpec:p.source_geojson,style:y,styleSpec:p,validateSpec:S,objectElementValidators:Zu}),a.cluster)for(const D in a.clusterProperties){const[j,W]=a.clusterProperties[D],J=typeof j=="string"?[j,["accumulated"],["get",D]]:j;M.push(...Go({key:`${h}.${D}.map`,value:W,validateSpec:S,expressionContext:"cluster-map"})),M.push(...Go({key:`${h}.${D}.reduce`,value:J,validateSpec:S,expressionContext:"cluster-reduce"}))}return M;case"video":return Cs({key:h,value:a,valueSpec:p.source_video,style:y,validateSpec:S,styleSpec:p});case"image":return Cs({key:h,value:a,valueSpec:p.source_image,style:y,validateSpec:S,styleSpec:p});case"canvas":return[new vt(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Lc({key:`${h}.type`,value:a.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:y,validateSpec:S,styleSpec:p})}}function Um(c){const a=c.value,h=c.styleSpec,p=h.light,y=c.style;let S=[];const T=yi(a);if(a===void 0)return S;if(T!=="object")return S=S.concat([new vt("light",a,`object expected, ${T} found`)]),S;for(const M in a){const D=M.match(/^(.*)-transition$/);S=S.concat(D&&p[D[1]]&&p[D[1]].transition?c.validateSpec({key:M,value:a[M],valueSpec:h.transition,validateSpec:c.validateSpec,style:y,styleSpec:h}):p[M]?c.validateSpec({key:M,value:a[M],valueSpec:p[M],validateSpec:c.validateSpec,style:y,styleSpec:h}):[new vt(M,a[M],`unknown property "${M}"`)])}return S}function Oc(c){const a=c.value,h=c.styleSpec,p=h.terrain,y=c.style;let S=[];const T=yi(a);if(a===void 0)return S;if(T!=="object")return S=S.concat([new vt("terrain",a,`object expected, ${T} found`)]),S;for(const M in a)S=S.concat(p[M]?c.validateSpec({key:M,value:a[M],valueSpec:p[M],validateSpec:c.validateSpec,style:y,styleSpec:h}):[new vt(M,a[M],`unknown property "${M}"`)]);return S}function Vm(c){let a=[];const h=c.value,p=c.key;if(Array.isArray(h)){const y=[],S=[];for(const T in h)h[T].id&&y.includes(h[T].id)&&a.push(new vt(p,h,`all the sprites' ids must be unique, but ${h[T].id} is duplicated`)),y.push(h[T].id),h[T].url&&S.includes(h[T].url)&&a.push(new vt(p,h,`all the sprites' URLs must be unique, but ${h[T].url} is duplicated`)),S.push(h[T].url),a=a.concat(Cs({key:`${p}[${T}]`,value:h[T],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return a}return la({key:p,value:h})}const Hm={"*":()=>[],array:zm,boolean:function(c){const a=c.value,h=c.key,p=yi(a);return p!=="boolean"?[new vt(h,a,`boolean expected, ${p} found`)]:[]},number:Xh,color:function(c){const a=c.key,h=c.value,p=yi(h);return p!=="string"?[new vt(a,h,`color expected, ${p} found`)]:yt.parse(String(h))?[]:[new vt(a,h,`color expected, "${h}" found`)]},constants:$m,enum:Lc,filter:Cl,function:Bm,layer:qu,object:Cs,source:Ku,light:Um,terrain:Oc,string:la,formatted:function(c){return la(c).length===0?[]:Go(c)},resolvedImage:function(c){return la(c).length===0?[]:Go(c)},padding:function(c){const a=c.key,h=c.value;if(yi(h)==="array"){if(h.length<1||h.length>4)return[new vt(a,h,`padding requires 1 to 4 values; ${h.length} values found`)];const p={type:"number"};let y=[];for(let S=0;S<h.length;S++)y=y.concat(c.validateSpec({key:`${a}[${S}]`,value:h[S],validateSpec:c.validateSpec,valueSpec:p}));return y}return Xh({key:a,value:h,valueSpec:{}})},sprite:Vm};function Rc(c){const a=c.value,h=c.valueSpec,p=c.styleSpec;return c.validateSpec=Rc,h.expression&&Uu(er(a))?Bm(c):h.expression&&Vu(Ho(a))?Go(c):h.type&&Hm[h.type]?Hm[h.type](c):Cs(Rn({},c,{valueSpec:h.type?p[h.type]:h}))}function Gm(c){const a=c.value,h=c.key,p=la(c);return p.length||(a.indexOf("{fontstack}")===-1&&p.push(new vt(h,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&p.push(new vt(h,a,'"glyphs" url must include a "{range}" token'))),p}function ca(c,a=ge){let h=[];return h=h.concat(Rc({key:"",value:c,valueSpec:a.$root,styleSpec:a,style:c,validateSpec:Rc,objectElementValidators:{glyphs:Gm,"*":()=>[]}})),c.constants&&(h=h.concat($m({key:"constants",value:c.constants,style:c,styleSpec:a,validateSpec:Rc}))),Fc(h)}function As(c){return function(a){return c({...a,validateSpec:Rc})}}function Fc(c){return[].concat(c).sort((a,h)=>a.line-h.line)}function sr(c){return function(...a){return Fc(c.apply(this,a))}}ca.source=sr(As(Ku)),ca.sprite=sr(As(Vm)),ca.glyphs=sr(As(Gm)),ca.light=sr(As(Um)),ca.terrain=sr(As(Oc)),ca.layer=sr(As(qu)),ca.filter=sr(As(Cl)),ca.paintProperty=sr(As(Jh)),ca.layoutProperty=sr(As(jm));const vo=ca,gy=vo.light,vy=vo.paintProperty,_y=vo.layoutProperty;function Al(c,a){let h=!1;if(a&&a.length)for(const p of a)c.fire(new _e(new Error(p.message))),h=!0;return h}class $c{constructor(a,h,p){const y=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;const T=new Int32Array(this.arrayBuffer);a=T[0],this.d=(h=T[1])+2*(p=T[2]);for(let D=0;D<this.d*this.d;D++){const j=T[3+D],W=T[3+D+1];y.push(j===W?null:T.subarray(j,W))}const M=T[3+y.length+1];this.keys=T.subarray(T[3+y.length],M),this.bboxes=T.subarray(M),this.insert=this._insertReadonly}else{this.d=h+2*p;for(let T=0;T<this.d*this.d;T++)y.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=a,this.padding=p,this.scale=h/a,this.uid=0;const S=p/h*a;this.min=-S,this.max=a+S}insert(a,h,p,y,S){this._forEachCell(h,p,y,S,this._insertCell,this.uid++,void 0,void 0),this.keys.push(a),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(y),this.bboxes.push(S)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(a,h,p,y,S,T){this.cells[S].push(T)}query(a,h,p,y,S){const T=this.min,M=this.max;if(a<=T&&h<=T&&M<=p&&M<=y&&!S)return Array.prototype.slice.call(this.keys);{const D=[];return this._forEachCell(a,h,p,y,this._queryCell,D,{},S),D}}_queryCell(a,h,p,y,S,T,M,D){const j=this.cells[S];if(j!==null){const W=this.keys,J=this.bboxes;for(let se=0;se<j.length;se++){const oe=j[se];if(M[oe]===void 0){const ue=4*oe;(D?D(J[ue+0],J[ue+1],J[ue+2],J[ue+3]):a<=J[ue+2]&&h<=J[ue+3]&&p>=J[ue+0]&&y>=J[ue+1])?(M[oe]=!0,T.push(W[oe])):M[oe]=!1}}}}_forEachCell(a,h,p,y,S,T,M,D){const j=this._convertToCellCoord(a),W=this._convertToCellCoord(h),J=this._convertToCellCoord(p),se=this._convertToCellCoord(y);for(let oe=j;oe<=J;oe++)for(let ue=W;ue<=se;ue++){const Te=this.d*ue+oe;if((!D||D(this._convertFromCellCoord(oe),this._convertFromCellCoord(ue),this._convertFromCellCoord(oe+1),this._convertFromCellCoord(ue+1)))&&S.call(this,a,h,p,y,Te,T,M,D))return}}_convertFromCellCoord(a){return(a-this.padding)/this.scale}_convertToCellCoord(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const a=this.cells,h=3+this.cells.length+1+1;let p=0;for(let T=0;T<this.cells.length;T++)p+=this.cells[T].length;const y=new Int32Array(h+p+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;let S=h;for(let T=0;T<a.length;T++){const M=a[T];y[3+T]=S,y.set(M,S),S+=M.length}return y[3+a.length]=S,y.set(this.keys,S),S+=this.keys.length,y[3+a.length+1]=S,y.set(this.bboxes,S),S+=this.bboxes.length,y.buffer}static serialize(a,h){const p=a.toArrayBuffer();return h&&h.push(p),{buffer:p}}static deserialize(a){return new $c(a.buffer)}}const ua={};function dn(c,a,h={}){if(ua[c])throw new Error(`${c} is already registered.`);Object.defineProperty(a,"_classRegistryKey",{value:c,writeable:!1}),ua[c]={klass:a,omit:h.omit||[],shallow:h.shallow||[]}}dn("Object",Object),dn("TransferableGridIndex",$c),dn("Color",yt),dn("Error",Error),dn("AJAXError",nt),dn("ResolvedImage",ri),dn("StylePropertyFunction",Mi),dn("StyleExpression",Gh,{omit:["_evaluator"]}),dn("ZoomDependentExpression",Jn),dn("ZoomConstantExpression",Wh),dn("CompoundExpression",Kr,{omit:["_evaluate"]});for(const c in Sl)Sl[c]._classRegistryKey||dn(`Expression_${c}`,Sl[c]);function Xu(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function zc(c,a){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob)return c;if(Xu(c)||Ie(c))return a&&a.push(c),c;if(ArrayBuffer.isView(c)){const h=c;return a&&a.push(h.buffer),h}if(c instanceof ImageData)return a&&a.push(c.data.buffer),c;if(Array.isArray(c)){const h=[];for(const p of c)h.push(zc(p,a));return h}if(typeof c=="object"){const h=c.constructor,p=h._classRegistryKey;if(!p)throw new Error("can't serialize object of unregistered class");if(!ua[p])throw new Error(`${p} is not registered.`);const y=h.serialize?h.serialize(c,a):{};if(h.serialize){if(a&&y===a[a.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const S in c){if(!c.hasOwnProperty(S)||ua[p].omit.indexOf(S)>=0)continue;const T=c[S];y[S]=ua[p].shallow.indexOf(S)>=0?T:zc(T,a)}c instanceof Error&&(y.message=c.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return p!=="Object"&&(y.$name=p),y}throw new Error("can't serialize object of type "+typeof c)}function La(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||Xu(c)||Ie(c)||ArrayBuffer.isView(c)||c instanceof ImageData)return c;if(Array.isArray(c))return c.map(La);if(typeof c=="object"){const a=c.$name||"Object";if(!ua[a])throw new Error(`can't deserialize unregistered class ${a}`);const{klass:h}=ua[a];if(!h)throw new Error(`can't deserialize unregistered class ${a}`);if(h.deserialize)return h.deserialize(c);const p=Object.create(h.prototype);for(const y of Object.keys(c)){if(y==="$name")continue;const S=c[y];p[y]=ua[a].shallow.indexOf(y)>=0?S:La(S)}return p}throw new Error("can't deserialize object of type "+typeof c)}class Wm{constructor(){this.first=!0}update(a,h){const p=Math.floor(a);return this.first?(this.first=!1,this.lastIntegerZoom=p,this.lastIntegerZoomTime=0,this.lastZoom=a,this.lastFloorZoom=p,!0):(this.lastFloorZoom>p?(this.lastIntegerZoom=p+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<p&&(this.lastIntegerZoom=p,this.lastIntegerZoomTime=h),a!==this.lastZoom&&(this.lastZoom=a,this.lastFloorZoom=p,!0))}}const Jt={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function Yu(c){for(const a of c)if(Ju(a.charCodeAt(0)))return!0;return!1}function Qh(c){for(const a of c)if(!qm(a.charCodeAt(0)))return!1;return!0}function qm(c){return!(Jt.Arabic(c)||Jt["Arabic Supplement"](c)||Jt["Arabic Extended-A"](c)||Jt["Arabic Presentation Forms-A"](c)||Jt["Arabic Presentation Forms-B"](c))}function Ju(c){return!(c!==746&&c!==747&&(c<4352||!(Jt["Bopomofo Extended"](c)||Jt.Bopomofo(c)||Jt["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||Jt["CJK Compatibility Ideographs"](c)||Jt["CJK Compatibility"](c)||Jt["CJK Radicals Supplement"](c)||Jt["CJK Strokes"](c)||!(!Jt["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||Jt["CJK Unified Ideographs Extension A"](c)||Jt["CJK Unified Ideographs"](c)||Jt["Enclosed CJK Letters and Months"](c)||Jt["Hangul Compatibility Jamo"](c)||Jt["Hangul Jamo Extended-A"](c)||Jt["Hangul Jamo Extended-B"](c)||Jt["Hangul Jamo"](c)||Jt["Hangul Syllables"](c)||Jt.Hiragana(c)||Jt["Ideographic Description Characters"](c)||Jt.Kanbun(c)||Jt["Kangxi Radicals"](c)||Jt["Katakana Phonetic Extensions"](c)||Jt.Katakana(c)&&c!==12540||!(!Jt["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!Jt["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||Jt["Unified Canadian Aboriginal Syllabics"](c)||Jt["Unified Canadian Aboriginal Syllabics Extended"](c)||Jt["Vertical Forms"](c)||Jt["Yijing Hexagram Symbols"](c)||Jt["Yi Syllables"](c)||Jt["Yi Radicals"](c))))}function Zm(c){return!(Ju(c)||function(a){return!!(Jt["Latin-1 Supplement"](a)&&(a===167||a===169||a===174||a===177||a===188||a===189||a===190||a===215||a===247)||Jt["General Punctuation"](a)&&(a===8214||a===8224||a===8225||a===8240||a===8241||a===8251||a===8252||a===8258||a===8263||a===8264||a===8265||a===8273)||Jt["Letterlike Symbols"](a)||Jt["Number Forms"](a)||Jt["Miscellaneous Technical"](a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||a===9003||a>=9085&&a<=9114||a>=9150&&a<=9165||a===9167||a>=9169&&a<=9179||a>=9186&&a<=9215)||Jt["Control Pictures"](a)&&a!==9251||Jt["Optical Character Recognition"](a)||Jt["Enclosed Alphanumerics"](a)||Jt["Geometric Shapes"](a)||Jt["Miscellaneous Symbols"](a)&&!(a>=9754&&a<=9759)||Jt["Miscellaneous Symbols and Arrows"](a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||Jt["CJK Symbols and Punctuation"](a)||Jt.Katakana(a)||Jt["Private Use Area"](a)||Jt["CJK Compatibility Forms"](a)||Jt["Small Form Variants"](a)||Jt["Halfwidth and Fullwidth Forms"](a)||a===8734||a===8756||a===8757||a>=9984&&a<=10087||a>=10102&&a<=10131||a===65532||a===65533)}(c))}function Qu(c){return c>=1424&&c<=2303||Jt["Arabic Presentation Forms-A"](c)||Jt["Arabic Presentation Forms-B"](c)}function ed(c,a){return!(!a&&Qu(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||Jt.Khmer(c))}function Km(c){for(const a of c)if(Qu(a.charCodeAt(0)))return!0;return!1}const ef="deferred",td="loading",tf="loaded";let Bc=null,Yr="unavailable",_o=null;const Xm=function(c){c&&typeof c=="string"&&c.indexOf("NetworkError")>-1&&(Yr="error"),Bc&&Bc(c)};function nf(){nd.fire(new qt("pluginStateChange",{pluginStatus:Yr,pluginURL:_o}))}const nd=new ke,rf=function(){return Yr},Ym=function(){if(Yr!==ef||!_o)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Yr=td,nf(),_o&&ut({url:_o},c=>{c?Xm(c):(Yr=tf,nf())})},Ms={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Yr===tf||Ms.applyArabicShaping!=null,isLoading:()=>Yr===td,setState(c){if(!X())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Yr=c.pluginStatus,_o=c.pluginURL},isParsed(){if(!X())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Ms.applyArabicShaping!=null&&Ms.processBidirectionalText!=null&&Ms.processStyledBidirectionalText!=null},getPluginURL(){if(!X())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return _o}};class Fi{constructor(a,h){this.zoom=a,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Wm,this.transition={})}isSupportedScript(a){return function(h,p){for(const y of h)if(!ed(y.charCodeAt(0),p))return!1;return!0}(a,Ms.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const a=this.zoom,h=a-Math.floor(a),p=this.crossFadingFactor();return a>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*p}:{fromScale:.5,toScale:1,t:1-(1-p)*h}}}class id{constructor(a,h){this.property=a,this.value=h,this.expression=function(p,y){if(Uu(p))return new Mi(p,y);if(Vu(p)){const S=Hu(p,y);if(S.result==="error")throw new Error(S.value.map(T=>`${T.key}: ${T.message}`).join(", "));return S.value}{let S=p;return y.type==="color"&&typeof p=="string"?S=yt.parse(p):y.type!=="padding"||typeof p!="number"&&!Array.isArray(p)||(S=li.parse(p)),{kind:"constant",evaluate:()=>S}}}(h===void 0?a.specification.default:h,a.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(a,h,p){return this.property.possiblyEvaluate(this,a,h,p)}}class sf{constructor(a){this.property=a,this.value=new id(a,void 0)}transitioned(a,h){return new Nc(this.property,this.value,h,ee({},a.transition,this.transition),a.now)}untransitioned(){return new Nc(this.property,this.value,null,{},0)}}class Jm{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)}getValue(a){return te(this._values[a].value.value)}setValue(a,h){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new sf(this._values[a].property)),this._values[a].value=new id(this._values[a].property,h===null?void 0:te(h))}getTransition(a){return te(this._values[a].transition)}setTransition(a,h){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new sf(this._values[a].property)),this._values[a].transition=te(h)||void 0}serialize(){const a={};for(const h of Object.keys(this._values)){const p=this.getValue(h);p!==void 0&&(a[h]=p);const y=this.getTransition(h);y!==void 0&&(a[`${h}-transition`]=y)}return a}transitioned(a,h){const p=new Qm(this._properties);for(const y of Object.keys(this._values))p._values[y]=this._values[y].transitioned(a,h._values[y]);return p}untransitioned(){const a=new Qm(this._properties);for(const h of Object.keys(this._values))a._values[h]=this._values[h].untransitioned();return a}}class Nc{constructor(a,h,p,y,S){this.property=a,this.value=h,this.begin=S+y.delay||0,this.end=this.begin+y.duration||0,a.specification.transition&&(y.delay||y.duration)&&(this.prior=p)}possiblyEvaluate(a,h,p){const y=a.now||0,S=this.value.possiblyEvaluate(a,h,p),T=this.prior;if(T){if(y>this.end)return this.prior=null,S;if(this.value.isDataDriven())return this.prior=null,S;if(y<this.begin)return T.possiblyEvaluate(a,h,p);{const M=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(T.possiblyEvaluate(a,h,p),S,function(D){if(D<=0)return 0;if(D>=1)return 1;const j=D*D,W=j*D;return 4*(D<.5?W:3*(D-j)+W-.75)}(M))}}return S}}class Qm{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,h,p){const y=new rd(this._properties);for(const S of Object.keys(this._values))y._values[S]=this._values[S].possiblyEvaluate(a,h,p);return y}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class af{constructor(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)}getValue(a){return te(this._values[a].value)}setValue(a,h){this._values[a]=new id(this._values[a].property,h===null?void 0:te(h))}serialize(){const a={};for(const h of Object.keys(this._values)){const p=this.getValue(h);p!==void 0&&(a[h]=p)}return a}possiblyEvaluate(a,h,p){const y=new rd(this._properties);for(const S of Object.keys(this._values))y._values[S]=this._values[S].possiblyEvaluate(a,h,p);return y}}class da{constructor(a,h,p){this.property=a,this.value=h,this.parameters=p}isConstant(){return this.value.kind==="constant"}constantOr(a){return this.value.kind==="constant"?this.value.value:a}evaluate(a,h,p,y){return this.property.evaluate(this.value,this.parameters,a,h,p,y)}}class rd{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class bn{constructor(a){this.specification=a}possiblyEvaluate(a,h){if(a.isDataDriven())throw new Error("Value should not be data driven");return a.expression.evaluate(h)}interpolate(a,h,p){const y=Xr[this.specification.type];return y?y(a,h,p):a}}class Dn{constructor(a,h){this.specification=a,this.overrides=h}possiblyEvaluate(a,h,p,y){return new da(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(h,null,{},p,y)}:a.expression,h)}interpolate(a,h,p){if(a.value.kind!=="constant"||h.value.kind!=="constant")return a;if(a.value.value===void 0||h.value.value===void 0)return new da(this,{kind:"constant",value:void 0},a.parameters);const y=Xr[this.specification.type];if(y){const S=y(a.value.value,h.value.value,p);return new da(this,{kind:"constant",value:S},a.parameters)}return a}evaluate(a,h,p,y,S,T){return a.kind==="constant"?a.value:a.evaluate(h,p,y,S,T)}}class jc extends Dn{possiblyEvaluate(a,h,p,y){if(a.value===void 0)return new da(this,{kind:"constant",value:void 0},h);if(a.expression.kind==="constant"){const S=a.expression.evaluate(h,null,{},p,y),T=a.property.specification.type==="resolvedImage"&&typeof S!="string"?S.name:S,M=this._calculate(T,T,T,h);return new da(this,{kind:"constant",value:M},h)}if(a.expression.kind==="camera"){const S=this._calculate(a.expression.evaluate({zoom:h.zoom-1}),a.expression.evaluate({zoom:h.zoom}),a.expression.evaluate({zoom:h.zoom+1}),h);return new da(this,{kind:"constant",value:S},h)}return new da(this,a.expression,h)}evaluate(a,h,p,y,S,T){if(a.kind==="source"){const M=a.evaluate(h,p,y,S,T);return this._calculate(M,M,M,h)}return a.kind==="composite"?this._calculate(a.evaluate({zoom:Math.floor(h.zoom)-1},p,y),a.evaluate({zoom:Math.floor(h.zoom)},p,y),a.evaluate({zoom:Math.floor(h.zoom)+1},p,y),h):a.value}_calculate(a,h,p,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:a,to:h}:{from:p,to:h}}interpolate(a){return a}}class of{constructor(a){this.specification=a}possiblyEvaluate(a,h,p,y){if(a.value!==void 0){if(a.expression.kind==="constant"){const S=a.expression.evaluate(h,null,{},p,y);return this._calculate(S,S,S,h)}return this._calculate(a.expression.evaluate(new Fi(Math.floor(h.zoom-1),h)),a.expression.evaluate(new Fi(Math.floor(h.zoom),h)),a.expression.evaluate(new Fi(Math.floor(h.zoom+1),h)),h)}}_calculate(a,h,p,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:a,to:h}:{from:p,to:h}}interpolate(a){return a}}class lf{constructor(a){this.specification=a}possiblyEvaluate(a,h,p,y){return!!a.expression.evaluate(h,null,{},p,y)}interpolate(){return!1}}class Jr{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in a){const p=a[h];p.specification.overridable&&this.overridableProperties.push(h);const y=this.defaultPropertyValues[h]=new id(p,void 0),S=this.defaultTransitionablePropertyValues[h]=new sf(p);this.defaultTransitioningPropertyValues[h]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=y.possiblyEvaluate({})}}}dn("DataDrivenProperty",Dn),dn("DataConstantProperty",bn),dn("CrossFadedDataDrivenProperty",jc),dn("CrossFadedProperty",of),dn("ColorRampProperty",lf);const sd="-transition";class ha extends ke{constructor(a,h){if(super(),this.id=a.id,this.type=a.type,this._featureFilter={filter:()=>!0,needGeometry:!1},a.type!=="custom"&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,a.type!=="background"&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter),h.layout&&(this._unevaluatedLayout=new af(h.layout)),h.paint)){this._transitionablePaint=new Jm(h.paint);for(const p in a.paint)this.setPaintProperty(p,a.paint[p],{validate:!1});for(const p in a.layout)this.setLayoutProperty(p,a.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new rd(h.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(a){return a==="visibility"?this.visibility:this._unevaluatedLayout.getValue(a)}setLayoutProperty(a,h,p={}){h!=null&&this._validate(_y,`layers.${this.id}.layout.${a}`,a,h,p)||(a!=="visibility"?this._unevaluatedLayout.setValue(a,h):this.visibility=h)}getPaintProperty(a){return a.endsWith(sd)?this._transitionablePaint.getTransition(a.slice(0,-sd.length)):this._transitionablePaint.getValue(a)}setPaintProperty(a,h,p={}){if(h!=null&&this._validate(vy,`layers.${this.id}.paint.${a}`,a,h,p))return!1;if(a.endsWith(sd))return this._transitionablePaint.setTransition(a.slice(0,-sd.length),h||void 0),!1;{const y=this._transitionablePaint._values[a],S=y.property.specification["property-type"]==="cross-faded-data-driven",T=y.value.isDataDriven(),M=y.value;this._transitionablePaint.setValue(a,h),this._handleSpecialPaintPropertyUpdate(a);const D=this._transitionablePaint._values[a].value;return D.isDataDriven()||T||S||this._handleOverridablePaintPropertyUpdate(a,M,D)}}_handleSpecialPaintPropertyUpdate(a){}_handleOverridablePaintPropertyUpdate(a,h,p){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||this.visibility==="none"}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,h){a.getCrossfadeParameters&&(this._crossfadeParameters=a.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,h)}serialize(){const a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(a.layout=a.layout||{},a.layout.visibility=this.visibility),be(a,(h,p)=>!(h===void 0||p==="layout"&&!Object.keys(h).length||p==="paint"&&!Object.keys(h).length))}_validate(a,h,p,y,S={}){return(!S||S.validate!==!1)&&Al(this,a.call(vo,{key:h,layerType:this.type,objectKey:p,value:y,styleSpec:ge,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const a in this.paint._values){const h=this.paint.get(a);if(h instanceof da&&El(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}const yy={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Oa{constructor(a,h){this._structArray=a,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Zi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,h){return a._trim(),h&&(a.isTransferred=!0,h.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){const h=Object.create(this.prototype);return h.arrayBuffer=a.arrayBuffer,h.length=a.length,h.capacity=a.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ar(c,a=1){let h=0,p=0;return{members:c.map(y=>{const S=yy[y.type].BYTES_PER_ELEMENT,T=h=eg(h,Math.max(a,S)),M=y.components||1;return p=Math.max(p,S),h+=S*M,{name:y.name,type:y.type,components:M,offset:T}}),size:eg(h,Math.max(p,a)),alignment:a}}function eg(c,a){return Math.ceil(c/a)*a}class Ml extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h){const p=this.length;return this.resize(p+1),this.emplace(p,a,h)}emplace(a,h,p){const y=2*a;return this.int16[y+0]=h,this.int16[y+1]=p,a}}Ml.prototype.bytesPerElement=4,dn("StructArrayLayout2i4",Ml);class ad extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,p){const y=this.length;return this.resize(y+1),this.emplace(y,a,h,p)}emplace(a,h,p,y){const S=3*a;return this.int16[S+0]=h,this.int16[S+1]=p,this.int16[S+2]=y,a}}ad.prototype.bytesPerElement=6,dn("StructArrayLayout3i6",ad);class cf extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,p,y){const S=this.length;return this.resize(S+1),this.emplace(S,a,h,p,y)}emplace(a,h,p,y,S){const T=4*a;return this.int16[T+0]=h,this.int16[T+1]=p,this.int16[T+2]=y,this.int16[T+3]=S,a}}cf.prototype.bytesPerElement=8,dn("StructArrayLayout4i8",cf);class fa extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,p,y,S,T){const M=this.length;return this.resize(M+1),this.emplace(M,a,h,p,y,S,T)}emplace(a,h,p,y,S,T,M){const D=6*a;return this.int16[D+0]=h,this.int16[D+1]=p,this.int16[D+2]=y,this.int16[D+3]=S,this.int16[D+4]=T,this.int16[D+5]=M,a}}fa.prototype.bytesPerElement=12,dn("StructArrayLayout2i4i12",fa);class od extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,p,y,S,T){const M=this.length;return this.resize(M+1),this.emplace(M,a,h,p,y,S,T)}emplace(a,h,p,y,S,T,M){const D=4*a,j=8*a;return this.int16[D+0]=h,this.int16[D+1]=p,this.uint8[j+4]=y,this.uint8[j+5]=S,this.uint8[j+6]=T,this.uint8[j+7]=M,a}}od.prototype.bytesPerElement=8,dn("StructArrayLayout2i4ub8",od);class Wo extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h){const p=this.length;return this.resize(p+1),this.emplace(p,a,h)}emplace(a,h,p){const y=2*a;return this.float32[y+0]=h,this.float32[y+1]=p,a}}Wo.prototype.bytesPerElement=8,dn("StructArrayLayout2f8",Wo);class ld extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h,p,y,S,T,M,D,j,W){const J=this.length;return this.resize(J+1),this.emplace(J,a,h,p,y,S,T,M,D,j,W)}emplace(a,h,p,y,S,T,M,D,j,W,J){const se=10*a;return this.uint16[se+0]=h,this.uint16[se+1]=p,this.uint16[se+2]=y,this.uint16[se+3]=S,this.uint16[se+4]=T,this.uint16[se+5]=M,this.uint16[se+6]=D,this.uint16[se+7]=j,this.uint16[se+8]=W,this.uint16[se+9]=J,a}}ld.prototype.bytesPerElement=20,dn("StructArrayLayout10ui20",ld);class Uc extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h,p,y,S,T,M,D,j,W,J,se){const oe=this.length;return this.resize(oe+1),this.emplace(oe,a,h,p,y,S,T,M,D,j,W,J,se)}emplace(a,h,p,y,S,T,M,D,j,W,J,se,oe){const ue=12*a;return this.int16[ue+0]=h,this.int16[ue+1]=p,this.int16[ue+2]=y,this.int16[ue+3]=S,this.uint16[ue+4]=T,this.uint16[ue+5]=M,this.uint16[ue+6]=D,this.uint16[ue+7]=j,this.int16[ue+8]=W,this.int16[ue+9]=J,this.int16[ue+10]=se,this.int16[ue+11]=oe,a}}Uc.prototype.bytesPerElement=24,dn("StructArrayLayout4i4ui4i24",Uc);class uf extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p){const y=this.length;return this.resize(y+1),this.emplace(y,a,h,p)}emplace(a,h,p,y){const S=3*a;return this.float32[S+0]=h,this.float32[S+1]=p,this.float32[S+2]=y,a}}uf.prototype.bytesPerElement=12,dn("StructArrayLayout3f12",uf);class kl extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){const h=this.length;return this.resize(h+1),this.emplace(h,a)}emplace(a,h){return this.uint32[1*a+0]=h,a}}kl.prototype.bytesPerElement=4,dn("StructArrayLayout1ul4",kl);class qo extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h,p,y,S,T,M,D,j){const W=this.length;return this.resize(W+1),this.emplace(W,a,h,p,y,S,T,M,D,j)}emplace(a,h,p,y,S,T,M,D,j,W){const J=10*a,se=5*a;return this.int16[J+0]=h,this.int16[J+1]=p,this.int16[J+2]=y,this.int16[J+3]=S,this.int16[J+4]=T,this.int16[J+5]=M,this.uint32[se+3]=D,this.uint16[J+8]=j,this.uint16[J+9]=W,a}}qo.prototype.bytesPerElement=20,dn("StructArrayLayout6i1ul2ui20",qo);class df extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,p,y,S,T){const M=this.length;return this.resize(M+1),this.emplace(M,a,h,p,y,S,T)}emplace(a,h,p,y,S,T,M){const D=6*a;return this.int16[D+0]=h,this.int16[D+1]=p,this.int16[D+2]=y,this.int16[D+3]=S,this.int16[D+4]=T,this.int16[D+5]=M,a}}df.prototype.bytesPerElement=12,dn("StructArrayLayout2i2i2i12",df);class cd extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,p,y,S){const T=this.length;return this.resize(T+1),this.emplace(T,a,h,p,y,S)}emplace(a,h,p,y,S,T){const M=4*a,D=8*a;return this.float32[M+0]=h,this.float32[M+1]=p,this.float32[M+2]=y,this.int16[D+6]=S,this.int16[D+7]=T,a}}cd.prototype.bytesPerElement=16,dn("StructArrayLayout2f1f2i16",cd);class Zo extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p,y){const S=this.length;return this.resize(S+1),this.emplace(S,a,h,p,y)}emplace(a,h,p,y,S){const T=12*a,M=3*a;return this.uint8[T+0]=h,this.uint8[T+1]=p,this.float32[M+1]=y,this.float32[M+2]=S,a}}Zo.prototype.bytesPerElement=12,dn("StructArrayLayout2ub2f12",Zo);class ud extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h,p){const y=this.length;return this.resize(y+1),this.emplace(y,a,h,p)}emplace(a,h,p,y){const S=3*a;return this.uint16[S+0]=h,this.uint16[S+1]=p,this.uint16[S+2]=y,a}}ud.prototype.bytesPerElement=6,dn("StructArrayLayout3ui6",ud);class hf extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p,y,S,T,M,D,j,W,J,se,oe,ue,Te,we,Ve){const Je=this.length;return this.resize(Je+1),this.emplace(Je,a,h,p,y,S,T,M,D,j,W,J,se,oe,ue,Te,we,Ve)}emplace(a,h,p,y,S,T,M,D,j,W,J,se,oe,ue,Te,we,Ve,Je){const Ne=24*a,at=12*a,ct=48*a;return this.int16[Ne+0]=h,this.int16[Ne+1]=p,this.uint16[Ne+2]=y,this.uint16[Ne+3]=S,this.uint32[at+2]=T,this.uint32[at+3]=M,this.uint32[at+4]=D,this.uint16[Ne+10]=j,this.uint16[Ne+11]=W,this.uint16[Ne+12]=J,this.float32[at+7]=se,this.float32[at+8]=oe,this.uint8[ct+36]=ue,this.uint8[ct+37]=Te,this.uint8[ct+38]=we,this.uint32[at+10]=Ve,this.int16[Ne+22]=Je,a}}hf.prototype.bytesPerElement=48,dn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",hf);class dd extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p,y,S,T,M,D,j,W,J,se,oe,ue,Te,we,Ve,Je,Ne,at,ct,Tt,cn,gn,en,Kt,Ht,tn){const Xt=this.length;return this.resize(Xt+1),this.emplace(Xt,a,h,p,y,S,T,M,D,j,W,J,se,oe,ue,Te,we,Ve,Je,Ne,at,ct,Tt,cn,gn,en,Kt,Ht,tn)}emplace(a,h,p,y,S,T,M,D,j,W,J,se,oe,ue,Te,we,Ve,Je,Ne,at,ct,Tt,cn,gn,en,Kt,Ht,tn,Xt){const Ft=34*a,Tn=17*a;return this.int16[Ft+0]=h,this.int16[Ft+1]=p,this.int16[Ft+2]=y,this.int16[Ft+3]=S,this.int16[Ft+4]=T,this.int16[Ft+5]=M,this.int16[Ft+6]=D,this.int16[Ft+7]=j,this.uint16[Ft+8]=W,this.uint16[Ft+9]=J,this.uint16[Ft+10]=se,this.uint16[Ft+11]=oe,this.uint16[Ft+12]=ue,this.uint16[Ft+13]=Te,this.uint16[Ft+14]=we,this.uint16[Ft+15]=Ve,this.uint16[Ft+16]=Je,this.uint16[Ft+17]=Ne,this.uint16[Ft+18]=at,this.uint16[Ft+19]=ct,this.uint16[Ft+20]=Tt,this.uint16[Ft+21]=cn,this.uint16[Ft+22]=gn,this.uint32[Tn+12]=en,this.float32[Tn+13]=Kt,this.float32[Tn+14]=Ht,this.float32[Tn+15]=tn,this.float32[Tn+16]=Xt,a}}dd.prototype.bytesPerElement=68,dn("StructArrayLayout8i15ui1ul4f68",dd);class hd extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){const h=this.length;return this.resize(h+1),this.emplace(h,a)}emplace(a,h){return this.float32[1*a+0]=h,a}}hd.prototype.bytesPerElement=4,dn("StructArrayLayout1f4",hd);class fd extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h,p){const y=this.length;return this.resize(y+1),this.emplace(y,a,h,p)}emplace(a,h,p,y){const S=4*a;return this.uint32[2*a+0]=h,this.uint16[S+2]=p,this.uint16[S+3]=y,a}}fd.prototype.bytesPerElement=8,dn("StructArrayLayout1ul2ui8",fd);class _ extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h){const p=this.length;return this.resize(p+1),this.emplace(p,a,h)}emplace(a,h,p){const y=2*a;return this.uint16[y+0]=h,this.uint16[y+1]=p,a}}_.prototype.bytesPerElement=4,dn("StructArrayLayout2ui4",_);class o extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){const h=this.length;return this.resize(h+1),this.emplace(h,a)}emplace(a,h){return this.uint16[1*a+0]=h,a}}o.prototype.bytesPerElement=2,dn("StructArrayLayout1ui2",o);class f extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p,y){const S=this.length;return this.resize(S+1),this.emplace(S,a,h,p,y)}emplace(a,h,p,y,S){const T=4*a;return this.float32[T+0]=h,this.float32[T+1]=p,this.float32[T+2]=y,this.float32[T+3]=S,a}}f.prototype.bytesPerElement=16,dn("StructArrayLayout4f16",f);class v extends Oa{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new w(this.anchorPointX,this.anchorPointY)}}v.prototype.size=20;class b extends qo{get(a){return new v(this,a)}}dn("CollisionBoxArray",b);class E extends Oa{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(a){this._structArray.uint8[this._pos1+37]=a}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(a){this._structArray.uint8[this._pos1+38]=a}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(a){this._structArray.uint32[this._pos4+10]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}E.prototype.size=48;class P extends hf{get(a){return new E(this,a)}}dn("PlacedSymbolArray",P);class R extends Oa{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(a){this._structArray.uint32[this._pos4+12]=a}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}R.prototype.size=68;class O extends dd{get(a){return new R(this,a)}}dn("SymbolInstanceArray",O);class N extends hd{getoffsetX(a){return this.float32[1*a+0]}}dn("GlyphOffsetArray",N);class K extends ad{getx(a){return this.int16[3*a+0]}gety(a){return this.int16[3*a+1]}gettileUnitDistanceFromAnchor(a){return this.int16[3*a+2]}}dn("SymbolLineVertexArray",K);class Z extends Oa{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Z.prototype.size=8;class le extends fd{get(a){return new Z(this,a)}}dn("FeatureIndexArray",le);class Se extends Ml{}class ve extends Ml{}class xe extends Ml{}class De extends fa{}class Ue extends od{}class ot extends Wo{}class Me extends ld{}class it extends Uc{}class _t extends uf{}class At extends kl{}class Rt extends df{}class Bt extends Zo{}class Lt extends ud{}class nn extends _{}const Sn=ar([{name:"a_pos",components:2,type:"Int16"}],4),{members:Bn}=Sn;class Zt{constructor(a=[]){this.segments=a}prepareSegment(a,h,p,y){let S=this.segments[this.segments.length-1];return a>Zt.MAX_VERTEX_ARRAY_LENGTH&&U(`Max vertices per segment is ${Zt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}`),(!S||S.vertexLength+a>Zt.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==y)&&(S={vertexOffset:h.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0},y!==void 0&&(S.sortKey=y),this.segments.push(S)),S}get(){return this.segments}destroy(){for(const a of this.segments)for(const h in a.vaos)a.vaos[h].destroy()}static simpleSegment(a,h,p,y){return new Zt([{vertexOffset:a,primitiveOffset:h,vertexLength:p,primitiveLength:y,vaos:{},sortKey:0}])}}function On(c,a){return 256*(c=F(Math.floor(c),0,255))+F(Math.floor(a),0,255)}Zt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,dn("SegmentVector",Zt);const on=ar([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var di={exports:{}},tr={exports:{}};tr.exports=function(c,a){var h,p,y,S,T,M,D,j;for(p=c.length-(h=3&c.length),y=a,T=3432918353,M=461845907,j=0;j<p;)D=255&c.charCodeAt(j)|(255&c.charCodeAt(++j))<<8|(255&c.charCodeAt(++j))<<16|(255&c.charCodeAt(++j))<<24,++j,y=27492+(65535&(S=5*(65535&(y=(y^=D=(65535&(D=(D=(65535&D)*T+(((D>>>16)*T&65535)<<16)&4294967295)<<15|D>>>17))*M+(((D>>>16)*M&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(S>>>16)&65535)<<16);switch(D=0,h){case 3:D^=(255&c.charCodeAt(j+2))<<16;case 2:D^=(255&c.charCodeAt(j+1))<<8;case 1:y^=D=(65535&(D=(D=(65535&(D^=255&c.charCodeAt(j)))*T+(((D>>>16)*T&65535)<<16)&4294967295)<<15|D>>>17))*M+(((D>>>16)*M&65535)<<16)&4294967295}return y^=c.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0};var hi=tr.exports,Nn={exports:{}};Nn.exports=function(c,a){for(var h,p=c.length,y=a^p,S=0;p>=4;)h=1540483477*(65535&(h=255&c.charCodeAt(S)|(255&c.charCodeAt(++S))<<8|(255&c.charCodeAt(++S))<<16|(255&c.charCodeAt(++S))<<24))+((1540483477*(h>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),p-=4,++S;switch(p){case 3:y^=(255&c.charCodeAt(S+2))<<16;case 2:y^=(255&c.charCodeAt(S+1))<<8;case 1:y=1540483477*(65535&(y^=255&c.charCodeAt(S)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0};var Ki=hi,jr=Nn.exports;di.exports=Ki,di.exports.murmur3=Ki,di.exports.murmur2=jr;var nr=m(di.exports);class br{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(a,h,p,y){this.ids.push(cs(a)),this.positions.push(h,p,y)}getPositions(a){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=cs(a);let p=0,y=this.ids.length-1;for(;p<y;){const T=p+y>>1;this.ids[T]>=h?y=T:p=T+1}const S=[];for(;this.ids[p]===h;)S.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return S}static serialize(a,h){const p=new Float64Array(a.ids),y=new Uint32Array(a.positions);return Ns(p,y,0,p.length-1),h&&h.push(p.buffer,y.buffer),{ids:p,positions:y}}static deserialize(a){const h=new br;return h.ids=a.ids,h.positions=a.positions,h.indexed=!0,h}}function cs(c){const a=+c;return!isNaN(a)&&a<=Number.MAX_SAFE_INTEGER?a:nr(String(c))}function Ns(c,a,h,p){for(;h<p;){const y=c[h+p>>1];let S=h-1,T=p+1;for(;;){do S++;while(c[S]<y);do T--;while(c[T]>y);if(S>=T)break;js(c,S,T),js(a,3*S,3*T),js(a,3*S+1,3*T+1),js(a,3*S+2,3*T+2)}T-h<p-T?(Ns(c,a,h,T),h=T+1):(Ns(c,a,T+1,p),p=T)}}function js(c,a,h){const p=c[a];c[a]=c[h],c[h]=p}dn("FeaturePositionMap",br);class Ur{constructor(a,h){this.gl=a.gl,this.location=h}}class pa extends Ur{constructor(a,h){super(a,h),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1f(this.location,a))}}class Vc extends Ur{constructor(a,h){super(a,h),this.current=[0,0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]&&a[3]===this.current[3]||(this.current=a,this.gl.uniform4f(this.location,a[0],a[1],a[2],a[3]))}}class Dr extends Ur{constructor(a,h){super(a,h),this.current=yt.transparent}set(a){a.r===this.current.r&&a.g===this.current.g&&a.b===this.current.b&&a.a===this.current.a||(this.current=a,this.gl.uniform4f(this.location,a.r,a.g,a.b,a.a))}}const xr=new Float32Array(16);function pi(c){return[On(255*c.r,255*c.g),On(255*c.b,255*c.a)]}class fr{constructor(a,h,p){this.value=a,this.uniformNames=h.map(y=>`u_${y}`),this.type=p}setUniform(a,h,p){a.set(p.constantOr(this.value))}getBinding(a,h,p){return this.type==="color"?new Dr(a,h):new pa(a,h)}}class wr{constructor(a,h){this.uniformNames=h.map(p=>`u_${p}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(a,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=a.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=a.tlbr}setUniform(a,h,p,y){const S=y==="u_pattern_to"?this.patternTo:y==="u_pattern_from"?this.patternFrom:y==="u_pixel_ratio_to"?this.pixelRatioTo:y==="u_pixel_ratio_from"?this.pixelRatioFrom:null;S&&a.set(S)}getBinding(a,h,p){return p.substr(0,9)==="u_pattern"?new Vc(a,h):new pa(a,h)}}class vi{constructor(a,h,p,y){this.expression=a,this.type=p,this.maxValue=0,this.paintVertexAttributes=h.map(S=>({name:`a_${S}`,type:"Float32",components:p==="color"?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(a,h,p,y,S){const T=this.paintVertexArray.length,M=this.expression.evaluate(new Fi(0),h,{},y,[],S);this.paintVertexArray.resize(a),this._setPaintValue(T,a,M)}updatePaintArray(a,h,p,y){const S=this.expression.evaluate({zoom:0},p,y);this._setPaintValue(a,h,S)}_setPaintValue(a,h,p){if(this.type==="color"){const y=pi(p);for(let S=a;S<h;S++)this.paintVertexArray.emplace(S,y[0],y[1])}else{for(let y=a;y<h;y++)this.paintVertexArray.emplace(y,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class pr{constructor(a,h,p,y,S,T){this.expression=a,this.uniformNames=h.map(M=>`u_${M}_t`),this.type=p,this.useIntegerZoom=y,this.zoom=S,this.maxValue=0,this.paintVertexAttributes=h.map(M=>({name:`a_${M}`,type:"Float32",components:p==="color"?4:2,offset:0})),this.paintVertexArray=new T}populatePaintArray(a,h,p,y,S){const T=this.expression.evaluate(new Fi(this.zoom),h,{},y,[],S),M=this.expression.evaluate(new Fi(this.zoom+1),h,{},y,[],S),D=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(D,a,T,M)}updatePaintArray(a,h,p,y){const S=this.expression.evaluate({zoom:this.zoom},p,y),T=this.expression.evaluate({zoom:this.zoom+1},p,y);this._setPaintValue(a,h,S,T)}_setPaintValue(a,h,p,y){if(this.type==="color"){const S=pi(p),T=pi(y);for(let M=a;M<h;M++)this.paintVertexArray.emplace(M,S[0],S[1],T[0],T[1])}else{for(let S=a;S<h;S++)this.paintVertexArray.emplace(S,p,y);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(y))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,h){const p=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,y=F(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);a.set(y)}getBinding(a,h,p){return new pa(a,h)}}class us{constructor(a,h,p,y,S,T){this.expression=a,this.type=h,this.useIntegerZoom=p,this.zoom=y,this.layerId=T,this.zoomInPaintVertexArray=new S,this.zoomOutPaintVertexArray=new S}populatePaintArray(a,h,p){const y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(a),this.zoomOutPaintVertexArray.resize(a),this._setPaintValues(y,a,h.patterns&&h.patterns[this.layerId],p)}updatePaintArray(a,h,p,y,S){this._setPaintValues(a,h,p.patterns&&p.patterns[this.layerId],S)}_setPaintValues(a,h,p,y){if(!y||!p)return;const{min:S,mid:T,max:M}=p,D=y[S],j=y[T],W=y[M];if(D&&j&&W)for(let J=a;J<h;J++)this.zoomInPaintVertexArray.emplace(J,j.tl[0],j.tl[1],j.br[0],j.br[1],D.tl[0],D.tl[1],D.br[0],D.br[1],j.pixelRatio,D.pixelRatio),this.zoomOutPaintVertexArray.emplace(J,j.tl[0],j.tl[1],j.br[0],j.br[1],W.tl[0],W.tl[1],W.br[0],W.br[1],j.pixelRatio,W.pixelRatio)}upload(a){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=a.createVertexBuffer(this.zoomInPaintVertexArray,on.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=a.createVertexBuffer(this.zoomOutPaintVertexArray,on.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class pd{constructor(a,h,p){this.binders={},this._buffers=[];const y=[];for(const S in a.paint._values){if(!p(S))continue;const T=a.paint.get(S);if(!(T instanceof da&&El(T.property.specification)))continue;const M=by(S,a.type),D=T.value,j=T.property.specification.type,W=T.property.useIntegerZoom,J=T.property.specification["property-type"],se=J==="cross-faded"||J==="cross-faded-data-driven";if(D.kind==="constant")this.binders[S]=se?new wr(D.value,M):new fr(D.value,M,j),y.push(`/u_${S}`);else if(D.kind==="source"||se){const oe=tg(S,j,"source");this.binders[S]=se?new us(D,j,W,h,oe,a.id):new vi(D,M,j,oe),y.push(`/a_${S}`)}else{const oe=tg(S,j,"composite");this.binders[S]=new pr(D,M,j,W,h,oe),y.push(`/z_${S}`)}}this.cacheKey=y.sort().join("")}getMaxValue(a){const h=this.binders[a];return h instanceof vi||h instanceof pr?h.maxValue:0}populatePaintArrays(a,h,p,y,S){for(const T in this.binders){const M=this.binders[T];(M instanceof vi||M instanceof pr||M instanceof us)&&M.populatePaintArray(a,h,p,y,S)}}setConstantPatternPositions(a,h){for(const p in this.binders){const y=this.binders[p];y instanceof wr&&y.setConstantPatternPositions(a,h)}}updatePaintArrays(a,h,p,y,S){let T=!1;for(const M in a){const D=h.getPositions(M);for(const j of D){const W=p.feature(j.index);for(const J in this.binders){const se=this.binders[J];if((se instanceof vi||se instanceof pr||se instanceof us)&&se.expression.isStateDependent===!0){const oe=y.paint.get(J);se.expression=oe.value,se.updatePaintArray(j.start,j.end,W,a[M],S),T=!0}}}}return T}defines(){const a=[];for(const h in this.binders){const p=this.binders[h];(p instanceof fr||p instanceof wr)&&a.push(...p.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return a}getBinderAttributes(){const a=[];for(const h in this.binders){const p=this.binders[h];if(p instanceof vi||p instanceof pr)for(let y=0;y<p.paintVertexAttributes.length;y++)a.push(p.paintVertexAttributes[y].name);else if(p instanceof us)for(let y=0;y<on.members.length;y++)a.push(on.members[y].name)}return a}getBinderUniforms(){const a=[];for(const h in this.binders){const p=this.binders[h];if(p instanceof fr||p instanceof wr||p instanceof pr)for(const y of p.uniformNames)a.push(y)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a,h){const p=[];for(const y in this.binders){const S=this.binders[y];if(S instanceof fr||S instanceof wr||S instanceof pr){for(const T of S.uniformNames)if(h[T]){const M=S.getBinding(a,h[T],T);p.push({name:T,property:y,binding:M})}}}return p}setUniforms(a,h,p,y){for(const{name:S,property:T,binding:M}of h)this.binders[T].setUniform(M,y,p.get(T),S)}updatePaintBuffers(a){this._buffers=[];for(const h in this.binders){const p=this.binders[h];if(a&&p instanceof us){const y=a.fromScale===2?p.zoomInPaintVertexBuffer:p.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(p instanceof vi||p instanceof pr)&&p.paintVertexBuffer&&this._buffers.push(p.paintVertexBuffer)}}upload(a){for(const h in this.binders){const p=this.binders[h];(p instanceof vi||p instanceof pr||p instanceof us)&&p.upload(a)}this.updatePaintBuffers()}destroy(){for(const a in this.binders){const h=this.binders[a];(h instanceof vi||h instanceof pr||h instanceof us)&&h.destroy()}}}class Ra{constructor(a,h,p=()=>!0){this.programConfigurations={};for(const y of a)this.programConfigurations[y.id]=new pd(y,h,p);this.needsUpload=!1,this._featureMap=new br,this._bufferOffset=0}populatePaintArrays(a,h,p,y,S,T){for(const M in this.programConfigurations)this.programConfigurations[M].populatePaintArrays(a,h,y,S,T);h.id!==void 0&&this._featureMap.add(h.id,p,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,h,p,y){for(const S of p)this.needsUpload=this.programConfigurations[S.id].updatePaintArrays(a,this._featureMap,h,S,y)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}function by(c,a){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${a}-`,"").replace(/-/g,"_")]}function tg(c,a,h){const p={color:{source:Wo,composite:f},number:{source:hd,composite:Wo}},y=function(S){return{"line-pattern":{source:Me,composite:Me},"fill-pattern":{source:Me,composite:Me},"fill-extrusion-pattern":{source:Me,composite:Me}}[S]}(c);return y&&y[h]||p[a][h]}dn("ConstantBinder",fr),dn("CrossFadedConstantBinder",wr),dn("SourceExpressionBinder",vi),dn("CrossFadedCompositeBinder",us),dn("CompositeExpressionBinder",pr),dn("ProgramConfiguration",pd,{omit:["_buffers"]}),dn("ProgramConfigurationSet",Ra);var $i=8192;const ff=Math.pow(2,14)-1,Hc=-ff-1;function Fa(c){const a=$i/c.extent,h=c.loadGeometry();for(let p=0;p<h.length;p++){const y=h[p];for(let S=0;S<y.length;S++){const T=y[S],M=Math.round(T.x*a),D=Math.round(T.y*a);T.x=F(M,Hc,ff),T.y=F(D,Hc,ff),(M<T.x||M>T.x+1||D<T.y||D>T.y+1)&&U("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function Gc(c,a){return{type:c.type,id:c.id,properties:c.properties,geometry:a?Fa(c):[]}}function ng(c,a,h,p,y){c.emplaceBack(2*a+(p+1)/2,2*h+(y+1)/2)}class xy{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(h=>h.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new ve,this.indexArray=new Lt,this.segments=new Zt,this.programConfigurations=new Ra(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(a,h,p){const y=this.layers[0],S=[];let T=null,M=!1;y.type==="circle"&&(T=y.layout.get("circle-sort-key"),M=!T.isConstant());for(const{feature:D,id:j,index:W,sourceLayerIndex:J}of a){const se=this.layers[0]._featureFilter.needGeometry,oe=Gc(D,se);if(!this.layers[0]._featureFilter.filter(new Fi(this.zoom),oe,p))continue;const ue=M?T.evaluate(oe,{},p):void 0,Te={id:j,properties:D.properties,type:D.type,sourceLayerIndex:J,index:W,geometry:se?oe.geometry:Fa(D),patterns:{},sortKey:ue};S.push(Te)}M&&S.sort((D,j)=>D.sortKey-j.sortKey);for(const D of S){const{geometry:j,index:W,sourceLayerIndex:J}=D,se=a[W].feature;this.addFeature(D,j,W,p),h.featureIndex.insert(se,j,W,J,this.index)}}update(a,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,h,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Bn),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,h,p,y){for(const S of h)for(const T of S){const M=T.x,D=T.y;if(M<0||M>=$i||D<0||D>=$i)continue;const j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),W=j.vertexLength;ng(this.layoutVertexArray,M,D,-1,-1),ng(this.layoutVertexArray,M,D,1,-1),ng(this.layoutVertexArray,M,D,1,1),ng(this.layoutVertexArray,M,D,-1,1),this.indexArray.emplaceBack(W,W+1,W+2),this.indexArray.emplaceBack(W,W+3,W+2),j.vertexLength+=4,j.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,{},y)}}function lw(c,a){for(let h=0;h<c.length;h++)if(md(a,c[h]))return!0;for(let h=0;h<a.length;h++)if(md(c,a[h]))return!0;return!!wy(c,a)}function oD(c,a,h){return!!md(c,a)||!!Sy(a,c,h)}function cw(c,a){if(c.length===1)return dw(a,c[0]);for(let h=0;h<a.length;h++){const p=a[h];for(let y=0;y<p.length;y++)if(md(c,p[y]))return!0}for(let h=0;h<c.length;h++)if(dw(a,c[h]))return!0;for(let h=0;h<a.length;h++)if(wy(c,a[h]))return!0;return!1}function lD(c,a,h){if(c.length>1){if(wy(c,a))return!0;for(let p=0;p<a.length;p++)if(Sy(a[p],c,h))return!0}for(let p=0;p<c.length;p++)if(Sy(c[p],a,h))return!0;return!1}function wy(c,a){if(c.length===0||a.length===0)return!1;for(let h=0;h<c.length-1;h++){const p=c[h],y=c[h+1];for(let S=0;S<a.length-1;S++)if(cD(p,y,a[S],a[S+1]))return!0}return!1}function cD(c,a,h,p){return B(c,h,p)!==B(a,h,p)&&B(c,a,h)!==B(c,a,p)}function Sy(c,a,h){const p=h*h;if(a.length===1)return c.distSqr(a[0])<p;for(let y=1;y<a.length;y++)if(uw(c,a[y-1],a[y])<p)return!0;return!1}function uw(c,a,h){const p=a.distSqr(h);if(p===0)return c.distSqr(a);const y=((c.x-a.x)*(h.x-a.x)+(c.y-a.y)*(h.y-a.y))/p;return c.distSqr(y<0?a:y>1?h:h.sub(a)._mult(y)._add(a))}function dw(c,a){let h,p,y,S=!1;for(let T=0;T<c.length;T++){h=c[T];for(let M=0,D=h.length-1;M<h.length;D=M++)p=h[M],y=h[D],p.y>a.y!=y.y>a.y&&a.x<(y.x-p.x)*(a.y-p.y)/(y.y-p.y)+p.x&&(S=!S)}return S}function md(c,a){let h=!1;for(let p=0,y=c.length-1;p<c.length;y=p++){const S=c[p],T=c[y];S.y>a.y!=T.y>a.y&&a.x<(T.x-S.x)*(a.y-S.y)/(T.y-S.y)+S.x&&(h=!h)}return h}function uD(c,a,h){const p=h[0],y=h[2];if(c.x<p.x&&a.x<p.x||c.x>y.x&&a.x>y.x||c.y<p.y&&a.y<p.y||c.y>y.y&&a.y>y.y)return!1;const S=B(c,a,h[0]);return S!==B(c,a,h[1])||S!==B(c,a,h[2])||S!==B(c,a,h[3])}function pf(c,a,h){const p=a.paint.get(c).value;return p.kind==="constant"?p.value:h.programConfigurations.get(a.id).getMaxValue(c)}function ig(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function rg(c,a,h,p,y){if(!a[0]&&!a[1])return c;const S=w.convert(a)._mult(y);h==="viewport"&&S._rotate(-p);const T=[];for(let M=0;M<c.length;M++)T.push(c[M].sub(S));return T}let hw,fw;dn("CircleBucket",xy,{omit:["layers"]});var dD={get paint(){return fw=fw||new Jr({"circle-radius":new Dn(ge.paint_circle["circle-radius"]),"circle-color":new Dn(ge.paint_circle["circle-color"]),"circle-blur":new Dn(ge.paint_circle["circle-blur"]),"circle-opacity":new Dn(ge.paint_circle["circle-opacity"]),"circle-translate":new bn(ge.paint_circle["circle-translate"]),"circle-translate-anchor":new bn(ge.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new bn(ge.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new bn(ge.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Dn(ge.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Dn(ge.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Dn(ge.paint_circle["circle-stroke-opacity"])})},get layout(){return hw=hw||new Jr({"circle-sort-key":new Dn(ge.layout_circle["circle-sort-key"])})}},Qr=1e-6,gd=typeof Float32Array<"u"?Float32Array:Array;function Ty(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function pw(c,a,h){var p=a[0],y=a[1],S=a[2],T=a[3],M=a[4],D=a[5],j=a[6],W=a[7],J=a[8],se=a[9],oe=a[10],ue=a[11],Te=a[12],we=a[13],Ve=a[14],Je=a[15],Ne=h[0],at=h[1],ct=h[2],Tt=h[3];return c[0]=Ne*p+at*M+ct*J+Tt*Te,c[1]=Ne*y+at*D+ct*se+Tt*we,c[2]=Ne*S+at*j+ct*oe+Tt*Ve,c[3]=Ne*T+at*W+ct*ue+Tt*Je,c[4]=(Ne=h[4])*p+(at=h[5])*M+(ct=h[6])*J+(Tt=h[7])*Te,c[5]=Ne*y+at*D+ct*se+Tt*we,c[6]=Ne*S+at*j+ct*oe+Tt*Ve,c[7]=Ne*T+at*W+ct*ue+Tt*Je,c[8]=(Ne=h[8])*p+(at=h[9])*M+(ct=h[10])*J+(Tt=h[11])*Te,c[9]=Ne*y+at*D+ct*se+Tt*we,c[10]=Ne*S+at*j+ct*oe+Tt*Ve,c[11]=Ne*T+at*W+ct*ue+Tt*Je,c[12]=(Ne=h[12])*p+(at=h[13])*M+(ct=h[14])*J+(Tt=h[15])*Te,c[13]=Ne*y+at*D+ct*se+Tt*we,c[14]=Ne*S+at*j+ct*oe+Tt*Ve,c[15]=Ne*T+at*W+ct*ue+Tt*Je,c}Math.hypot||(Math.hypot=function(){for(var c=0,a=arguments.length;a--;)c+=arguments[a]*arguments[a];return Math.sqrt(c)});var mf,hD=pw;function sg(c,a,h){var p=a[0],y=a[1],S=a[2],T=a[3];return c[0]=h[0]*p+h[4]*y+h[8]*S+h[12]*T,c[1]=h[1]*p+h[5]*y+h[9]*S+h[13]*T,c[2]=h[2]*p+h[6]*y+h[10]*S+h[14]*T,c[3]=h[3]*p+h[7]*y+h[11]*S+h[15]*T,c}function mw(c,a){const h=sg([],[c.x,c.y,0,1],a);return new w(h[0]/h[3],h[1]/h[3])}mf=new gd(4),gd!=Float32Array&&(mf[0]=0,mf[1]=0,mf[2]=0,mf[3]=0);class gw extends xy{}let vw;dn("HeatmapBucket",gw,{omit:["layers"]});var fD={get paint(){return vw=vw||new Jr({"heatmap-radius":new Dn(ge.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Dn(ge.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new bn(ge.paint_heatmap["heatmap-intensity"]),"heatmap-color":new lf(ge.paint_heatmap["heatmap-color"]),"heatmap-opacity":new bn(ge.paint_heatmap["heatmap-opacity"])})}};function Ey(c,{width:a,height:h},p,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==a*h*p)throw new RangeError(`mismatched image size. expected: ${y.length} but got: ${a*h*p}`)}else y=new Uint8Array(a*h*p);return c.width=a,c.height=h,c.data=y,c}function _w(c,{width:a,height:h},p){if(a===c.width&&h===c.height)return;const y=Ey({},{width:a,height:h},p);Iy(c,y,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,a),height:Math.min(c.height,h)},p),c.width=a,c.height=h,c.data=y.data}function Iy(c,a,h,p,y,S){if(y.width===0||y.height===0)return a;if(y.width>c.width||y.height>c.height||h.x>c.width-y.width||h.y>c.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>a.width||y.height>a.height||p.x>a.width-y.width||p.y>a.height-y.height)throw new RangeError("out of range destination coordinates for image copy");const T=c.data,M=a.data;if(T===M)throw new Error("srcData equals dstData, so image is already copied");for(let D=0;D<y.height;D++){const j=((h.y+D)*c.width+h.x)*S,W=((p.y+D)*a.width+p.x)*S;for(let J=0;J<y.width*S;J++)M[W+J]=T[j+J]}return a}class gf{constructor(a,h){Ey(this,a,1,h)}resize(a){_w(this,a,1)}clone(){return new gf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,h,p,y,S){Iy(a,h,p,y,S,1)}}class Us{constructor(a,h){Ey(this,a,4,h)}resize(a){_w(this,a,4)}replace(a,h){h?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new Us({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,h,p,y,S){Iy(a,h,p,y,S,4)}}function yw(c){const a={},h=c.resolution||256,p=c.clips?c.clips.length:1,y=c.image||new Us({width:h,height:p});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const S=(T,M,D)=>{a[c.evaluationKey]=D;const j=c.expression.evaluate(a);y.data[T+M+0]=Math.floor(255*j.r/j.a),y.data[T+M+1]=Math.floor(255*j.g/j.a),y.data[T+M+2]=Math.floor(255*j.b/j.a),y.data[T+M+3]=Math.floor(255*j.a)};if(c.clips)for(let T=0,M=0;T<p;++T,M+=4*h)for(let D=0,j=0;D<h;D++,j+=4){const W=D/(h-1),{start:J,end:se}=c.clips[T];S(M,j,J*(1-W)+se*W)}else for(let T=0,M=0;T<h;T++,M+=4)S(0,M,T/(h-1));return y}let bw;dn("AlphaImage",gf),dn("RGBAImage",Us);var pD={get paint(){return bw=bw||new Jr({"hillshade-illumination-direction":new bn(ge.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new bn(ge.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new bn(ge.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new bn(ge.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new bn(ge.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new bn(ge.paint_hillshade["hillshade-accent-color"])})}};const mD=ar([{name:"a_pos",components:2,type:"Int16"}],4),{members:gD}=mD;var Cy={exports:{}};function ag(c,a,h){h=h||2;var p,y,S,T,M,D,j,W=a&&a.length,J=W?a[0]*h:c.length,se=xw(c,0,J,h,!0),oe=[];if(!se||se.next===se.prev)return oe;if(W&&(se=function(Te,we,Ve,Je){var Ne,at,ct,Tt=[];for(Ne=0,at=we.length;Ne<at;Ne++)(ct=xw(Te,we[Ne]*Je,Ne<at-1?we[Ne+1]*Je:Te.length,Je,!1))===ct.next&&(ct.steiner=!0),Tt.push(TD(ct));for(Tt.sort(xD),Ne=0;Ne<Tt.length;Ne++)Ve=wD(Tt[Ne],Ve);return Ve}(c,a,se,h)),c.length>80*h){p=S=c[0],y=T=c[1];for(var ue=h;ue<J;ue+=h)(M=c[ue])<p&&(p=M),(D=c[ue+1])<y&&(y=D),M>S&&(S=M),D>T&&(T=D);j=(j=Math.max(S-p,T-y))!==0?32767/j:0}return vf(se,oe,h,p,y,j,0),oe}function xw(c,a,h,p,y){var S,T;if(y===ky(c,a,h,p)>0)for(S=a;S<h;S+=p)T=Tw(S,c[S],c[S+1],T);else for(S=h-p;S>=a;S-=p)T=Tw(S,c[S],c[S+1],T);return T&&og(T,T.next)&&(yf(T),T=T.next),T}function Wc(c,a){if(!c)return c;a||(a=c);var h,p=c;do if(h=!1,p.steiner||!og(p,p.next)&&ir(p.prev,p,p.next)!==0)p=p.next;else{if(yf(p),(p=a=p.prev)===p.next)break;h=!0}while(h||p!==a);return a}function vf(c,a,h,p,y,S,T){if(c){!T&&S&&function(W,J,se,oe){var ue=W;do ue.z===0&&(ue.z=Ay(ue.x,ue.y,J,se,oe)),ue.prevZ=ue.prev,ue.nextZ=ue.next,ue=ue.next;while(ue!==W);ue.prevZ.nextZ=null,ue.prevZ=null,function(Te){var we,Ve,Je,Ne,at,ct,Tt,cn,gn=1;do{for(Ve=Te,Te=null,at=null,ct=0;Ve;){for(ct++,Je=Ve,Tt=0,we=0;we<gn&&(Tt++,Je=Je.nextZ);we++);for(cn=gn;Tt>0||cn>0&&Je;)Tt!==0&&(cn===0||!Je||Ve.z<=Je.z)?(Ne=Ve,Ve=Ve.nextZ,Tt--):(Ne=Je,Je=Je.nextZ,cn--),at?at.nextZ=Ne:Te=Ne,Ne.prevZ=at,at=Ne;Ve=Je}at.nextZ=null,gn*=2}while(ct>1)}(ue)}(c,p,y,S);for(var M,D,j=c;c.prev!==c.next;)if(M=c.prev,D=c.next,S?_D(c,p,y,S):vD(c))a.push(M.i/h|0),a.push(c.i/h|0),a.push(D.i/h|0),yf(c),c=D.next,j=D.next;else if((c=D)===j){T?T===1?vf(c=yD(Wc(c),a,h),a,h,p,y,S,2):T===2&&bD(c,a,h,p,y,S):vf(Wc(c),a,h,p,y,S,1);break}}}function vD(c){var a=c.prev,h=c,p=c.next;if(ir(a,h,p)>=0)return!1;for(var y=a.x,S=h.x,T=p.x,M=a.y,D=h.y,j=p.y,W=y<S?y<T?y:T:S<T?S:T,J=M<D?M<j?M:j:D<j?D:j,se=y>S?y>T?y:T:S>T?S:T,oe=M>D?M>j?M:j:D>j?D:j,ue=p.next;ue!==a;){if(ue.x>=W&&ue.x<=se&&ue.y>=J&&ue.y<=oe&&vd(y,M,S,D,T,j,ue.x,ue.y)&&ir(ue.prev,ue,ue.next)>=0)return!1;ue=ue.next}return!0}function _D(c,a,h,p){var y=c.prev,S=c,T=c.next;if(ir(y,S,T)>=0)return!1;for(var M=y.x,D=S.x,j=T.x,W=y.y,J=S.y,se=T.y,oe=M<D?M<j?M:j:D<j?D:j,ue=W<J?W<se?W:se:J<se?J:se,Te=M>D?M>j?M:j:D>j?D:j,we=W>J?W>se?W:se:J>se?J:se,Ve=Ay(oe,ue,a,h,p),Je=Ay(Te,we,a,h,p),Ne=c.prevZ,at=c.nextZ;Ne&&Ne.z>=Ve&&at&&at.z<=Je;){if(Ne.x>=oe&&Ne.x<=Te&&Ne.y>=ue&&Ne.y<=we&&Ne!==y&&Ne!==T&&vd(M,W,D,J,j,se,Ne.x,Ne.y)&&ir(Ne.prev,Ne,Ne.next)>=0||(Ne=Ne.prevZ,at.x>=oe&&at.x<=Te&&at.y>=ue&&at.y<=we&&at!==y&&at!==T&&vd(M,W,D,J,j,se,at.x,at.y)&&ir(at.prev,at,at.next)>=0))return!1;at=at.nextZ}for(;Ne&&Ne.z>=Ve;){if(Ne.x>=oe&&Ne.x<=Te&&Ne.y>=ue&&Ne.y<=we&&Ne!==y&&Ne!==T&&vd(M,W,D,J,j,se,Ne.x,Ne.y)&&ir(Ne.prev,Ne,Ne.next)>=0)return!1;Ne=Ne.prevZ}for(;at&&at.z<=Je;){if(at.x>=oe&&at.x<=Te&&at.y>=ue&&at.y<=we&&at!==y&&at!==T&&vd(M,W,D,J,j,se,at.x,at.y)&&ir(at.prev,at,at.next)>=0)return!1;at=at.nextZ}return!0}function yD(c,a,h){var p=c;do{var y=p.prev,S=p.next.next;!og(y,S)&&ww(y,p,p.next,S)&&_f(y,S)&&_f(S,y)&&(a.push(y.i/h|0),a.push(p.i/h|0),a.push(S.i/h|0),yf(p),yf(p.next),p=c=S),p=p.next}while(p!==c);return Wc(p)}function bD(c,a,h,p,y,S){var T=c;do{for(var M=T.next.next;M!==T.prev;){if(T.i!==M.i&&ED(T,M)){var D=Sw(T,M);return T=Wc(T,T.next),D=Wc(D,D.next),vf(T,a,h,p,y,S,0),void vf(D,a,h,p,y,S,0)}M=M.next}T=T.next}while(T!==c)}function xD(c,a){return c.x-a.x}function wD(c,a){var h=function(y,S){var T,M=S,D=y.x,j=y.y,W=-1/0;do{if(j<=M.y&&j>=M.next.y&&M.next.y!==M.y){var J=M.x+(j-M.y)*(M.next.x-M.x)/(M.next.y-M.y);if(J<=D&&J>W&&(W=J,T=M.x<M.next.x?M:M.next,J===D))return T}M=M.next}while(M!==S);if(!T)return null;var se,oe=T,ue=T.x,Te=T.y,we=1/0;M=T;do D>=M.x&&M.x>=ue&&D!==M.x&&vd(j<Te?D:W,j,ue,Te,j<Te?W:D,j,M.x,M.y)&&(se=Math.abs(j-M.y)/(D-M.x),_f(M,y)&&(se<we||se===we&&(M.x>T.x||M.x===T.x&&SD(T,M)))&&(T=M,we=se)),M=M.next;while(M!==oe);return T}(c,a);if(!h)return a;var p=Sw(h,c);return Wc(p,p.next),Wc(h,h.next)}function SD(c,a){return ir(c.prev,c,a.prev)<0&&ir(a.next,c,c.next)<0}function Ay(c,a,h,p,y){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-h)*y|0)|c<<8))|c<<4))|c<<2))|c<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-p)*y|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function TD(c){var a=c,h=c;do(a.x<h.x||a.x===h.x&&a.y<h.y)&&(h=a),a=a.next;while(a!==c);return h}function vd(c,a,h,p,y,S,T,M){return(y-T)*(a-M)>=(c-T)*(S-M)&&(c-T)*(p-M)>=(h-T)*(a-M)&&(h-T)*(S-M)>=(y-T)*(p-M)}function ED(c,a){return c.next.i!==a.i&&c.prev.i!==a.i&&!function(h,p){var y=h;do{if(y.i!==h.i&&y.next.i!==h.i&&y.i!==p.i&&y.next.i!==p.i&&ww(y,y.next,h,p))return!0;y=y.next}while(y!==h);return!1}(c,a)&&(_f(c,a)&&_f(a,c)&&function(h,p){var y=h,S=!1,T=(h.x+p.x)/2,M=(h.y+p.y)/2;do y.y>M!=y.next.y>M&&y.next.y!==y.y&&T<(y.next.x-y.x)*(M-y.y)/(y.next.y-y.y)+y.x&&(S=!S),y=y.next;while(y!==h);return S}(c,a)&&(ir(c.prev,c,a.prev)||ir(c,a.prev,a))||og(c,a)&&ir(c.prev,c,c.next)>0&&ir(a.prev,a,a.next)>0)}function ir(c,a,h){return(a.y-c.y)*(h.x-a.x)-(a.x-c.x)*(h.y-a.y)}function og(c,a){return c.x===a.x&&c.y===a.y}function ww(c,a,h,p){var y=cg(ir(c,a,h)),S=cg(ir(c,a,p)),T=cg(ir(h,p,c)),M=cg(ir(h,p,a));return y!==S&&T!==M||!(y!==0||!lg(c,h,a))||!(S!==0||!lg(c,p,a))||!(T!==0||!lg(h,c,p))||!(M!==0||!lg(h,a,p))}function lg(c,a,h){return a.x<=Math.max(c.x,h.x)&&a.x>=Math.min(c.x,h.x)&&a.y<=Math.max(c.y,h.y)&&a.y>=Math.min(c.y,h.y)}function cg(c){return c>0?1:c<0?-1:0}function _f(c,a){return ir(c.prev,c,c.next)<0?ir(c,a,c.next)>=0&&ir(c,c.prev,a)>=0:ir(c,a,c.prev)<0||ir(c,c.next,a)<0}function Sw(c,a){var h=new My(c.i,c.x,c.y),p=new My(a.i,a.x,a.y),y=c.next,S=a.prev;return c.next=a,a.prev=c,h.next=y,y.prev=h,p.next=h,h.prev=p,S.next=p,p.prev=S,p}function Tw(c,a,h,p){var y=new My(c,a,h);return p?(y.next=p.next,y.prev=p,p.next.prev=y,p.next=y):(y.prev=y,y.next=y),y}function yf(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function My(c,a,h){this.i=c,this.x=a,this.y=h,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ky(c,a,h,p){for(var y=0,S=a,T=h-p;S<h;S+=p)y+=(c[T]-c[S])*(c[S+1]+c[T+1]),T=S;return y}Cy.exports=ag,Cy.exports.default=ag,ag.deviation=function(c,a,h,p){var y=a&&a.length,S=Math.abs(ky(c,0,y?a[0]*h:c.length,h));if(y)for(var T=0,M=a.length;T<M;T++)S-=Math.abs(ky(c,a[T]*h,T<M-1?a[T+1]*h:c.length,h));var D=0;for(T=0;T<p.length;T+=3){var j=p[T]*h,W=p[T+1]*h,J=p[T+2]*h;D+=Math.abs((c[j]-c[J])*(c[W+1]-c[j+1])-(c[j]-c[W])*(c[J+1]-c[j+1]))}return S===0&&D===0?0:Math.abs((D-S)/S)},ag.flatten=function(c){for(var a=c[0][0].length,h={vertices:[],holes:[],dimensions:a},p=0,y=0;y<c.length;y++){for(var S=0;S<c[y].length;S++)for(var T=0;T<a;T++)h.vertices.push(c[y][S][T]);y>0&&h.holes.push(p+=c[y-1].length)}return h};var Ew=m(Cy.exports);function ID(c,a,h,p,y){Iw(c,a,h||0,p||c.length-1,y||CD)}function Iw(c,a,h,p,y){for(;p>h;){if(p-h>600){var S=p-h+1,T=a-h+1,M=Math.log(S),D=.5*Math.exp(2*M/3),j=.5*Math.sqrt(M*D*(S-D)/S)*(T-S/2<0?-1:1);Iw(c,a,Math.max(h,Math.floor(a-T*D/S+j)),Math.min(p,Math.floor(a+(S-T)*D/S+j)),y)}var W=c[a],J=h,se=p;for(bf(c,h,a),y(c[p],W)>0&&bf(c,h,p);J<se;){for(bf(c,J,se),J++,se--;y(c[J],W)<0;)J++;for(;y(c[se],W)>0;)se--}y(c[h],W)===0?bf(c,h,se):bf(c,++se,p),se<=a&&(h=se+1),a<=se&&(p=se-1)}}function bf(c,a,h){var p=c[a];c[a]=c[h],c[h]=p}function CD(c,a){return c<a?-1:c>a?1:0}function Py(c,a){const h=c.length;if(h<=1)return[c];const p=[];let y,S;for(let T=0;T<h;T++){const M=ie(c[T]);M!==0&&(c[T].area=Math.abs(M),S===void 0&&(S=M<0),S===M<0?(y&&p.push(y),y=[c[T]]):y.push(c[T]))}if(y&&p.push(y),a>1)for(let T=0;T<p.length;T++)p[T].length<=a||(ID(p[T],a,1,p[T].length-1,AD),p[T]=p[T].slice(0,a));return p}function AD(c,a){return a.area-c.area}function Dy(c,a,h){const p=h.patternDependencies;let y=!1;for(const S of a){const T=S.paint.get(`${c}-pattern`);T.isConstant()||(y=!0);const M=T.constantOr(null);M&&(y=!0,p[M.to]=!0,p[M.from]=!0)}return y}function Ly(c,a,h,p,y){const S=y.patternDependencies;for(const T of a){const M=T.paint.get(`${c}-pattern`).value;if(M.kind!=="constant"){let D=M.evaluate({zoom:p-1},h,{},y.availableImages),j=M.evaluate({zoom:p},h,{},y.availableImages),W=M.evaluate({zoom:p+1},h,{},y.availableImages);D=D&&D.name?D.name:D,j=j&&j.name?j.name:j,W=W&&W.name?W.name:W,S[D]=!0,S[j]=!0,S[W]=!0,h.patterns[T.id]={min:D,mid:j,max:W}}}return h}class Oy{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(h=>h.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new xe,this.indexArray=new Lt,this.indexArray2=new nn,this.programConfigurations=new Ra(a.layers,a.zoom),this.segments=new Zt,this.segments2=new Zt,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(a,h,p){this.hasPattern=Dy("fill",this.layers,h);const y=this.layers[0].layout.get("fill-sort-key"),S=!y.isConstant(),T=[];for(const{feature:M,id:D,index:j,sourceLayerIndex:W}of a){const J=this.layers[0]._featureFilter.needGeometry,se=Gc(M,J);if(!this.layers[0]._featureFilter.filter(new Fi(this.zoom),se,p))continue;const oe=S?y.evaluate(se,{},p,h.availableImages):void 0,ue={id:D,properties:M.properties,type:M.type,sourceLayerIndex:W,index:j,geometry:J?se.geometry:Fa(M),patterns:{},sortKey:oe};T.push(ue)}S&&T.sort((M,D)=>M.sortKey-D.sortKey);for(const M of T){const{geometry:D,index:j,sourceLayerIndex:W}=M;if(this.hasPattern){const J=Ly("fill",this.layers,M,this.zoom,h);this.patternFeatures.push(J)}else this.addFeature(M,D,j,p,{});h.featureIndex.insert(a[j].feature,D,j,W,this.index)}}update(a,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,h,this.stateDependentLayers,p)}addFeatures(a,h,p){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,h,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,gD),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,h,p,y,S){for(const T of Py(h,500)){let M=0;for(const oe of T)M+=oe.length;const D=this.segments.prepareSegment(M,this.layoutVertexArray,this.indexArray),j=D.vertexLength,W=[],J=[];for(const oe of T){if(oe.length===0)continue;oe!==T[0]&&J.push(W.length/2);const ue=this.segments2.prepareSegment(oe.length,this.layoutVertexArray,this.indexArray2),Te=ue.vertexLength;this.layoutVertexArray.emplaceBack(oe[0].x,oe[0].y),this.indexArray2.emplaceBack(Te+oe.length-1,Te),W.push(oe[0].x),W.push(oe[0].y);for(let we=1;we<oe.length;we++)this.layoutVertexArray.emplaceBack(oe[we].x,oe[we].y),this.indexArray2.emplaceBack(Te+we-1,Te+we),W.push(oe[we].x),W.push(oe[we].y);ue.vertexLength+=oe.length,ue.primitiveLength+=oe.length}const se=Ew(W,J);for(let oe=0;oe<se.length;oe+=3)this.indexArray.emplaceBack(j+se[oe],j+se[oe+1],j+se[oe+2]);D.vertexLength+=M,D.primitiveLength+=se.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,S,y)}}let Cw,Aw;dn("FillBucket",Oy,{omit:["layers","patternFeatures"]});var MD={get paint(){return Aw=Aw||new Jr({"fill-antialias":new bn(ge.paint_fill["fill-antialias"]),"fill-opacity":new Dn(ge.paint_fill["fill-opacity"]),"fill-color":new Dn(ge.paint_fill["fill-color"]),"fill-outline-color":new Dn(ge.paint_fill["fill-outline-color"]),"fill-translate":new bn(ge.paint_fill["fill-translate"]),"fill-translate-anchor":new bn(ge.paint_fill["fill-translate-anchor"]),"fill-pattern":new jc(ge.paint_fill["fill-pattern"])})},get layout(){return Cw=Cw||new Jr({"fill-sort-key":new Dn(ge.layout_fill["fill-sort-key"])})}};const kD=ar([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),PD=ar([{name:"a_centroid",components:2,type:"Int16"}],4),{members:DD}=kD;var Pl={},LD=g,Mw=_d;function _d(c,a,h,p,y){this.properties={},this.extent=h,this.type=0,this._pbf=c,this._geometry=-1,this._keys=p,this._values=y,c.readFields(OD,this,a)}function OD(c,a,h){c==1?a.id=h.readVarint():c==2?function(p,y){for(var S=p.readVarint()+p.pos;p.pos<S;){var T=y._keys[p.readVarint()],M=y._values[p.readVarint()];y.properties[T]=M}}(h,a):c==3?a.type=h.readVarint():c==4&&(a._geometry=h.pos)}function RD(c){for(var a,h,p=0,y=0,S=c.length,T=S-1;y<S;T=y++)p+=((h=c[T]).x-(a=c[y]).x)*(a.y+h.y);return p}_d.types=["Unknown","Point","LineString","Polygon"],_d.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var a,h=c.readVarint()+c.pos,p=1,y=0,S=0,T=0,M=[];c.pos<h;){if(y<=0){var D=c.readVarint();p=7&D,y=D>>3}if(y--,p===1||p===2)S+=c.readSVarint(),T+=c.readSVarint(),p===1&&(a&&M.push(a),a=[]),a.push(new LD(S,T));else{if(p!==7)throw new Error("unknown command "+p);a&&a.push(a[0].clone())}}return a&&M.push(a),M},_d.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var a=c.readVarint()+c.pos,h=1,p=0,y=0,S=0,T=1/0,M=-1/0,D=1/0,j=-1/0;c.pos<a;){if(p<=0){var W=c.readVarint();h=7&W,p=W>>3}if(p--,h===1||h===2)(y+=c.readSVarint())<T&&(T=y),y>M&&(M=y),(S+=c.readSVarint())<D&&(D=S),S>j&&(j=S);else if(h!==7)throw new Error("unknown command "+h)}return[T,D,M,j]},_d.prototype.toGeoJSON=function(c,a,h){var p,y,S=this.extent*Math.pow(2,h),T=this.extent*c,M=this.extent*a,D=this.loadGeometry(),j=_d.types[this.type];function W(oe){for(var ue=0;ue<oe.length;ue++){var Te=oe[ue];oe[ue]=[360*(Te.x+T)/S-180,360/Math.PI*Math.atan(Math.exp((180-360*(Te.y+M)/S)*Math.PI/180))-90]}}switch(this.type){case 1:var J=[];for(p=0;p<D.length;p++)J[p]=D[p][0];W(D=J);break;case 2:for(p=0;p<D.length;p++)W(D[p]);break;case 3:for(D=function(oe){var ue=oe.length;if(ue<=1)return[oe];for(var Te,we,Ve=[],Je=0;Je<ue;Je++){var Ne=RD(oe[Je]);Ne!==0&&(we===void 0&&(we=Ne<0),we===Ne<0?(Te&&Ve.push(Te),Te=[oe[Je]]):Te.push(oe[Je]))}return Te&&Ve.push(Te),Ve}(D),p=0;p<D.length;p++)for(y=0;y<D[p].length;y++)W(D[p][y])}D.length===1?D=D[0]:j="Multi"+j;var se={type:"Feature",geometry:{type:j,coordinates:D},properties:this.properties};return"id"in this&&(se.id=this.id),se};var FD=Mw,kw=Pw;function Pw(c,a){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields($D,this,a),this.length=this._features.length}function $D(c,a,h){c===15?a.version=h.readVarint():c===1?a.name=h.readString():c===5?a.extent=h.readVarint():c===2?a._features.push(h.pos):c===3?a._keys.push(h.readString()):c===4&&a._values.push(function(p){for(var y=null,S=p.readVarint()+p.pos;p.pos<S;){var T=p.readVarint()>>3;y=T===1?p.readString():T===2?p.readFloat():T===3?p.readDouble():T===4?p.readVarint64():T===5?p.readVarint():T===6?p.readSVarint():T===7?p.readBoolean():null}return y}(h))}Pw.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var a=this._pbf.readVarint()+this._pbf.pos;return new FD(this._pbf,a,this.extent,this._keys,this._values)};var zD=kw;function BD(c,a,h){if(c===3){var p=new zD(h,h.readVarint()+h.pos);p.length&&(a[p.name]=p)}}Pl.VectorTile=function(c,a){this.layers=c.readFields(BD,{},a)},Pl.VectorTileFeature=Mw,Pl.VectorTileLayer=kw;const ND=Pl.VectorTileFeature.types,Ry=Math.pow(2,13);function xf(c,a,h,p,y,S,T,M){c.emplaceBack(a,h,2*Math.floor(p*Ry)+T,y*Ry*2,S*Ry*2,Math.round(M))}class Fy{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(h=>h.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new De,this.centroidVertexArray=new Se,this.indexArray=new Lt,this.programConfigurations=new Ra(a.layers,a.zoom),this.segments=new Zt,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(a,h,p){this.features=[],this.hasPattern=Dy("fill-extrusion",this.layers,h);for(const{feature:y,id:S,index:T,sourceLayerIndex:M}of a){const D=this.layers[0]._featureFilter.needGeometry,j=Gc(y,D);if(!this.layers[0]._featureFilter.filter(new Fi(this.zoom),j,p))continue;const W={id:S,sourceLayerIndex:M,index:T,geometry:D?j.geometry:Fa(y),properties:y.properties,type:y.type,patterns:{}};this.hasPattern?this.features.push(Ly("fill-extrusion",this.layers,W,this.zoom,h)):this.addFeature(W,W.geometry,T,p,{}),h.featureIndex.insert(y,W.geometry,T,M,this.index,!0)}}addFeatures(a,h,p){for(const y of this.features){const{geometry:S}=y;this.addFeature(y,S,y.index,h,p)}}update(a,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,h,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,DD),this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,PD.members,!0),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(a,h,p,y,S){const T={x:0,y:0,vertexCount:0};for(const M of Py(h,500)){let D=0;for(const ue of M)D+=ue.length;let j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ue of M){if(ue.length===0||UD(ue))continue;let Te=0;for(let we=0;we<ue.length;we++){const Ve=ue[we];if(we>=1){const Je=ue[we-1];if(!jD(Ve,Je)){j.vertexLength+4>Zt.MAX_VERTEX_ARRAY_LENGTH&&(j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ne=Ve.sub(Je)._perp()._unit(),at=Je.dist(Ve);Te+at>32768&&(Te=0),xf(this.layoutVertexArray,Ve.x,Ve.y,Ne.x,Ne.y,0,0,Te),xf(this.layoutVertexArray,Ve.x,Ve.y,Ne.x,Ne.y,0,1,Te),T.x+=2*Ve.x,T.y+=2*Ve.y,T.vertexCount+=2,Te+=at,xf(this.layoutVertexArray,Je.x,Je.y,Ne.x,Ne.y,0,0,Te),xf(this.layoutVertexArray,Je.x,Je.y,Ne.x,Ne.y,0,1,Te),T.x+=2*Je.x,T.y+=2*Je.y,T.vertexCount+=2;const ct=j.vertexLength;this.indexArray.emplaceBack(ct,ct+2,ct+1),this.indexArray.emplaceBack(ct+1,ct+2,ct+3),j.vertexLength+=4,j.primitiveLength+=2}}}}if(j.vertexLength+D>Zt.MAX_VERTEX_ARRAY_LENGTH&&(j=this.segments.prepareSegment(D,this.layoutVertexArray,this.indexArray)),ND[a.type]!=="Polygon")continue;const W=[],J=[],se=j.vertexLength;for(const ue of M)if(ue.length!==0){ue!==M[0]&&J.push(W.length/2);for(let Te=0;Te<ue.length;Te++){const we=ue[Te];xf(this.layoutVertexArray,we.x,we.y,0,0,1,1,0),T.x+=we.x,T.y+=we.y,T.vertexCount+=1,W.push(we.x),W.push(we.y)}}const oe=Ew(W,J);for(let ue=0;ue<oe.length;ue+=3)this.indexArray.emplaceBack(se+oe[ue],se+oe[ue+2],se+oe[ue+1]);j.primitiveLength+=oe.length/3,j.vertexLength+=D}for(let M=0;M<T.vertexCount;M++)this.centroidVertexArray.emplaceBack(Math.floor(T.x/T.vertexCount),Math.floor(T.y/T.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,S,y)}}function jD(c,a){return c.x===a.x&&(c.x<0||c.x>$i)||c.y===a.y&&(c.y<0||c.y>$i)}function UD(c){return c.every(a=>a.x<0)||c.every(a=>a.x>$i)||c.every(a=>a.y<0)||c.every(a=>a.y>$i)}let Dw;dn("FillExtrusionBucket",Fy,{omit:["layers","features"]});var VD={get paint(){return Dw=Dw||new Jr({"fill-extrusion-opacity":new bn(ge["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Dn(ge["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new bn(ge["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new bn(ge["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new jc(ge["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Dn(ge["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Dn(ge["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new bn(ge["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};function wf(c,a){return c.x*a.x+c.y*a.y}function Lw(c,a){if(c.length===1){let h=0;const p=a[h++];let y;for(;!y||p.equals(y);)if(y=a[h++],!y)return 1/0;for(;h<a.length;h++){const S=a[h],T=c[0],M=y.sub(p),D=S.sub(p),j=T.sub(p),W=wf(M,M),J=wf(M,D),se=wf(D,D),oe=wf(j,M),ue=wf(j,D),Te=W*se-J*J,we=(se*oe-J*ue)/Te,Ve=(W*ue-J*oe)/Te,Je=p.z*(1-we-Ve)+y.z*we+S.z*Ve;if(isFinite(Je))return Je}return 1/0}{let h=1/0;for(const p of a)h=Math.min(h,p.z);return h}}const HD=ar([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:GD}=HD,WD=ar([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:qD}=WD,ZD=Pl.VectorTileFeature.types,KD=Math.cos(Math.PI/180*37.5),Ow=Math.pow(2,14)/.5;class $y{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(h=>h.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new Ue,this.layoutVertexArray2=new ot,this.indexArray=new Lt,this.programConfigurations=new Ra(a.layers,a.zoom),this.segments=new Zt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(a,h,p){this.hasPattern=Dy("line",this.layers,h);const y=this.layers[0].layout.get("line-sort-key"),S=!y.isConstant(),T=[];for(const{feature:M,id:D,index:j,sourceLayerIndex:W}of a){const J=this.layers[0]._featureFilter.needGeometry,se=Gc(M,J);if(!this.layers[0]._featureFilter.filter(new Fi(this.zoom),se,p))continue;const oe=S?y.evaluate(se,{},p):void 0,ue={id:D,properties:M.properties,type:M.type,sourceLayerIndex:W,index:j,geometry:J?se.geometry:Fa(M),patterns:{},sortKey:oe};T.push(ue)}S&&T.sort((M,D)=>M.sortKey-D.sortKey);for(const M of T){const{geometry:D,index:j,sourceLayerIndex:W}=M;if(this.hasPattern){const J=Ly("line",this.layers,M,this.zoom,h);this.patternFeatures.push(J)}else this.addFeature(M,D,j,p,{});h.featureIndex.insert(a[j].feature,D,j,W,this.index)}}update(a,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,h,this.stateDependentLayers,p)}addFeatures(a,h,p){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,h,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,qD)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,GD),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,h,p,y,S){const T=this.layers[0].layout,M=T.get("line-join").evaluate(a,{}),D=T.get("line-cap"),j=T.get("line-miter-limit"),W=T.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(const J of h)this.addLine(J,a,M,D,j,W);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,S,y)}addLine(a,h,p,y,S,T){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ve=0;Ve<a.length-1;Ve++)this.totalDistance+=a[Ve].dist(a[Ve+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const M=ZD[h.type]==="Polygon";let D=a.length;for(;D>=2&&a[D-1].equals(a[D-2]);)D--;let j=0;for(;j<D-1&&a[j].equals(a[j+1]);)j++;if(D<(M?3:2))return;p==="bevel"&&(S=1.05);const W=this.overscaling<=16?122880/(512*this.overscaling):0,J=this.segments.prepareSegment(10*D,this.layoutVertexArray,this.indexArray);let se,oe,ue,Te,we;this.e1=this.e2=-1,M&&(se=a[D-2],we=a[j].sub(se)._unit()._perp());for(let Ve=j;Ve<D;Ve++){if(ue=Ve===D-1?M?a[j+1]:void 0:a[Ve+1],ue&&a[Ve].equals(ue))continue;we&&(Te=we),se&&(oe=se),se=a[Ve],we=ue?ue.sub(se)._unit()._perp():Te,Te=Te||we;let Je=Te.add(we);Je.x===0&&Je.y===0||Je._unit();const Ne=Te.x*we.x+Te.y*we.y,at=Je.x*we.x+Je.y*we.y,ct=at!==0?1/at:1/0,Tt=2*Math.sqrt(2-2*at),cn=at<KD&&oe&&ue,gn=Te.x*we.y-Te.y*we.x>0;if(cn&&Ve>j){const Ht=se.dist(oe);if(Ht>2*W){const tn=se.sub(se.sub(oe)._mult(W/Ht)._round());this.updateDistance(oe,tn),this.addCurrentVertex(tn,Te,0,0,J),oe=tn}}const en=oe&&ue;let Kt=en?p:M?"butt":y;if(en&&Kt==="round"&&(ct<T?Kt="miter":ct<=2&&(Kt="fakeround")),Kt==="miter"&&ct>S&&(Kt="bevel"),Kt==="bevel"&&(ct>2&&(Kt="flipbevel"),ct<S&&(Kt="miter")),oe&&this.updateDistance(oe,se),Kt==="miter")Je._mult(ct),this.addCurrentVertex(se,Je,0,0,J);else if(Kt==="flipbevel"){if(ct>100)Je=we.mult(-1);else{const Ht=ct*Te.add(we).mag()/Te.sub(we).mag();Je._perp()._mult(Ht*(gn?-1:1))}this.addCurrentVertex(se,Je,0,0,J),this.addCurrentVertex(se,Je.mult(-1),0,0,J)}else if(Kt==="bevel"||Kt==="fakeround"){const Ht=-Math.sqrt(ct*ct-1),tn=gn?Ht:0,Xt=gn?0:Ht;if(oe&&this.addCurrentVertex(se,Te,tn,Xt,J),Kt==="fakeround"){const Ft=Math.round(180*Tt/Math.PI/20);for(let Tn=1;Tn<Ft;Tn++){let yn=Tn/Ft;if(yn!==.5){const Di=yn-.5;yn+=yn*Di*(yn-1)*((1.0904+Ne*(Ne*(3.55645-1.43519*Ne)-3.2452))*Di*Di+(.848013+Ne*(.215638*Ne-1.06021)))}const Zn=we.sub(Te)._mult(yn)._add(Te)._unit()._mult(gn?-1:1);this.addHalfVertex(se,Zn.x,Zn.y,!1,gn,0,J)}}ue&&this.addCurrentVertex(se,we,-tn,-Xt,J)}else if(Kt==="butt")this.addCurrentVertex(se,Je,0,0,J);else if(Kt==="square"){const Ht=oe?1:-1;this.addCurrentVertex(se,Je,Ht,Ht,J)}else Kt==="round"&&(oe&&(this.addCurrentVertex(se,Te,0,0,J),this.addCurrentVertex(se,Te,1,1,J,!0)),ue&&(this.addCurrentVertex(se,we,-1,-1,J,!0),this.addCurrentVertex(se,we,0,0,J)));if(cn&&Ve<D-1){const Ht=se.dist(ue);if(Ht>2*W){const tn=se.add(ue.sub(se)._mult(W/Ht)._round());this.updateDistance(se,tn),this.addCurrentVertex(tn,we,0,0,J),se=tn}}}}addCurrentVertex(a,h,p,y,S,T=!1){const M=h.y*y-h.x,D=-h.y-h.x*y;this.addHalfVertex(a,h.x+h.y*p,h.y-h.x*p,T,!1,p,S),this.addHalfVertex(a,M,D,T,!0,-y,S),this.distance>Ow/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(a,h,p,y,S,T))}addHalfVertex({x:a,y:h},p,y,S,T,M,D){const j=.5*(this.lineClips?this.scaledDistance*(Ow-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((a<<1)+(S?1:0),(h<<1)+(T?1:0),Math.round(63*p)+128,Math.round(63*y)+128,1+(M===0?0:M<0?-1:1)|(63&j)<<2,j>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const W=D.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,W),D.primitiveLength++),T?this.e2=W:this.e1=W}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(a,h){this.distance+=a.dist(h),this.updateScaledDistance()}}let Rw,Fw;dn("LineBucket",$y,{omit:["layers","patternFeatures"]});var $w={get paint(){return Fw=Fw||new Jr({"line-opacity":new Dn(ge.paint_line["line-opacity"]),"line-color":new Dn(ge.paint_line["line-color"]),"line-translate":new bn(ge.paint_line["line-translate"]),"line-translate-anchor":new bn(ge.paint_line["line-translate-anchor"]),"line-width":new Dn(ge.paint_line["line-width"]),"line-gap-width":new Dn(ge.paint_line["line-gap-width"]),"line-offset":new Dn(ge.paint_line["line-offset"]),"line-blur":new Dn(ge.paint_line["line-blur"]),"line-dasharray":new of(ge.paint_line["line-dasharray"]),"line-pattern":new jc(ge.paint_line["line-pattern"]),"line-gradient":new lf(ge.paint_line["line-gradient"])})},get layout(){return Rw=Rw||new Jr({"line-cap":new bn(ge.layout_line["line-cap"]),"line-join":new Dn(ge.layout_line["line-join"]),"line-miter-limit":new bn(ge.layout_line["line-miter-limit"]),"line-round-limit":new bn(ge.layout_line["line-round-limit"]),"line-sort-key":new Dn(ge.layout_line["line-sort-key"])})}};class XD extends Dn{possiblyEvaluate(a,h){return h=new Fi(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(a,h)}evaluate(a,h,p,y){return h=ee({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(a,h,p,y)}}let ug;function zw(c,a){return a>0?a+2*c:c}const YD=ar([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),JD=ar([{name:"a_projected_pos",components:3,type:"Float32"}],4);ar([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const QD=ar([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);ar([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Bw=ar([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),eL=ar([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function tL(c,a,h){return c.sections.forEach(p=>{p.text=function(y,S,T){const M=S.layout.get("text-transform").evaluate(T,{});return M==="uppercase"?y=y.toLocaleUpperCase():M==="lowercase"&&(y=y.toLocaleLowerCase()),Ms.applyArabicShaping&&(y=Ms.applyArabicShaping(y)),y}(p.text,a,h)}),c}ar([{name:"triangle",components:3,type:"Uint16"}]),ar([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ar([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ar([{type:"Float32",name:"offsetX"}]),ar([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Sf={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Cr=24,Nw=Ii,jw=function(c,a,h,p,y){var S,T,M=8*y-p-1,D=(1<<M)-1,j=D>>1,W=-7,J=h?y-1:0,se=h?-1:1,oe=c[a+J];for(J+=se,S=oe&(1<<-W)-1,oe>>=-W,W+=M;W>0;S=256*S+c[a+J],J+=se,W-=8);for(T=S&(1<<-W)-1,S>>=-W,W+=p;W>0;T=256*T+c[a+J],J+=se,W-=8);if(S===0)S=1-j;else{if(S===D)return T?NaN:1/0*(oe?-1:1);T+=Math.pow(2,p),S-=j}return(oe?-1:1)*T*Math.pow(2,S-p)},Uw=function(c,a,h,p,y,S){var T,M,D,j=8*S-y-1,W=(1<<j)-1,J=W>>1,se=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,oe=p?0:S-1,ue=p?1:-1,Te=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(M=isNaN(a)?1:0,T=W):(T=Math.floor(Math.log(a)/Math.LN2),a*(D=Math.pow(2,-T))<1&&(T--,D*=2),(a+=T+J>=1?se/D:se*Math.pow(2,1-J))*D>=2&&(T++,D/=2),T+J>=W?(M=0,T=W):T+J>=1?(M=(a*D-1)*Math.pow(2,y),T+=J):(M=a*Math.pow(2,J-1)*Math.pow(2,y),T=0));y>=8;c[h+oe]=255&M,oe+=ue,M/=256,y-=8);for(T=T<<y|M,j+=y;j>0;c[h+oe]=255&T,oe+=ue,T/=256,j-=8);c[h+oe-ue]|=128*Te};function Ii(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}Ii.Varint=0,Ii.Fixed64=1,Ii.Bytes=2,Ii.Fixed32=5;var zy=4294967296,Vw=1/zy,Hw=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ko(c){return c.type===Ii.Bytes?c.readVarint()+c.pos:c.pos+1}function yd(c,a,h){return h?4294967296*a+(c>>>0):4294967296*(a>>>0)+(c>>>0)}function Gw(c,a,h){var p=a<=16383?1:a<=2097151?2:a<=268435455?3:Math.floor(Math.log(a)/(7*Math.LN2));h.realloc(p);for(var y=h.pos-1;y>=c;y--)h.buf[y+p]=h.buf[y]}function nL(c,a){for(var h=0;h<c.length;h++)a.writeVarint(c[h])}function iL(c,a){for(var h=0;h<c.length;h++)a.writeSVarint(c[h])}function rL(c,a){for(var h=0;h<c.length;h++)a.writeFloat(c[h])}function sL(c,a){for(var h=0;h<c.length;h++)a.writeDouble(c[h])}function aL(c,a){for(var h=0;h<c.length;h++)a.writeBoolean(c[h])}function oL(c,a){for(var h=0;h<c.length;h++)a.writeFixed32(c[h])}function lL(c,a){for(var h=0;h<c.length;h++)a.writeSFixed32(c[h])}function cL(c,a){for(var h=0;h<c.length;h++)a.writeFixed64(c[h])}function uL(c,a){for(var h=0;h<c.length;h++)a.writeSFixed64(c[h])}function dg(c,a){return(c[a]|c[a+1]<<8|c[a+2]<<16)+16777216*c[a+3]}function bd(c,a,h){c[h]=a,c[h+1]=a>>>8,c[h+2]=a>>>16,c[h+3]=a>>>24}function Ww(c,a){return(c[a]|c[a+1]<<8|c[a+2]<<16)+(c[a+3]<<24)}Ii.prototype={destroy:function(){this.buf=null},readFields:function(c,a,h){for(h=h||this.length;this.pos<h;){var p=this.readVarint(),y=p>>3,S=this.pos;this.type=7&p,c(y,a,this),this.pos===S&&this.skip(p)}return a},readMessage:function(c,a){return this.readFields(c,a,this.readVarint()+this.pos)},readFixed32:function(){var c=dg(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=Ww(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=dg(this.buf,this.pos)+dg(this.buf,this.pos+4)*zy;return this.pos+=8,c},readSFixed64:function(){var c=dg(this.buf,this.pos)+Ww(this.buf,this.pos+4)*zy;return this.pos+=8,c},readFloat:function(){var c=jw(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=jw(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var a,h,p=this.buf;return a=127&(h=p[this.pos++]),h<128?a:(a|=(127&(h=p[this.pos++]))<<7,h<128?a:(a|=(127&(h=p[this.pos++]))<<14,h<128?a:(a|=(127&(h=p[this.pos++]))<<21,h<128?a:function(y,S,T){var M,D,j=T.buf;if(M=(112&(D=j[T.pos++]))>>4,D<128||(M|=(127&(D=j[T.pos++]))<<3,D<128)||(M|=(127&(D=j[T.pos++]))<<10,D<128)||(M|=(127&(D=j[T.pos++]))<<17,D<128)||(M|=(127&(D=j[T.pos++]))<<24,D<128)||(M|=(1&(D=j[T.pos++]))<<31,D<128))return yd(y,M,S);throw new Error("Expected varint not more than 10 bytes")}(a|=(15&(h=p[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,a=this.pos;return this.pos=c,c-a>=12&&Hw?function(h,p,y){return Hw.decode(h.subarray(p,y))}(this.buf,a,c):function(h,p,y){for(var S="",T=p;T<y;){var M,D,j,W=h[T],J=null,se=W>239?4:W>223?3:W>191?2:1;if(T+se>y)break;se===1?W<128&&(J=W):se===2?(192&(M=h[T+1]))==128&&(J=(31&W)<<6|63&M)<=127&&(J=null):se===3?(D=h[T+2],(192&(M=h[T+1]))==128&&(192&D)==128&&((J=(15&W)<<12|(63&M)<<6|63&D)<=2047||J>=55296&&J<=57343)&&(J=null)):se===4&&(D=h[T+2],j=h[T+3],(192&(M=h[T+1]))==128&&(192&D)==128&&(192&j)==128&&((J=(15&W)<<18|(63&M)<<12|(63&D)<<6|63&j)<=65535||J>=1114112)&&(J=null)),J===null?(J=65533,se=1):J>65535&&(J-=65536,S+=String.fromCharCode(J>>>10&1023|55296),J=56320|1023&J),S+=String.fromCharCode(J),T+=se}return S}(this.buf,a,c)},readBytes:function(){var c=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,c);return this.pos=c,a},readPackedVarint:function(c,a){if(this.type!==Ii.Bytes)return c.push(this.readVarint(a));var h=Ko(this);for(c=c||[];this.pos<h;)c.push(this.readVarint(a));return c},readPackedSVarint:function(c){if(this.type!==Ii.Bytes)return c.push(this.readSVarint());var a=Ko(this);for(c=c||[];this.pos<a;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==Ii.Bytes)return c.push(this.readBoolean());var a=Ko(this);for(c=c||[];this.pos<a;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==Ii.Bytes)return c.push(this.readFloat());var a=Ko(this);for(c=c||[];this.pos<a;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==Ii.Bytes)return c.push(this.readDouble());var a=Ko(this);for(c=c||[];this.pos<a;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==Ii.Bytes)return c.push(this.readFixed32());var a=Ko(this);for(c=c||[];this.pos<a;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==Ii.Bytes)return c.push(this.readSFixed32());var a=Ko(this);for(c=c||[];this.pos<a;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==Ii.Bytes)return c.push(this.readFixed64());var a=Ko(this);for(c=c||[];this.pos<a;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==Ii.Bytes)return c.push(this.readSFixed64());var a=Ko(this);for(c=c||[];this.pos<a;)c.push(this.readSFixed64());return c},skip:function(c){var a=7&c;if(a===Ii.Varint)for(;this.buf[this.pos++]>127;);else if(a===Ii.Bytes)this.pos=this.readVarint()+this.pos;else if(a===Ii.Fixed32)this.pos+=4;else{if(a!==Ii.Fixed64)throw new Error("Unimplemented type: "+a);this.pos+=8}},writeTag:function(c,a){this.writeVarint(c<<3|a)},realloc:function(c){for(var a=this.length||16;a<this.pos+c;)a*=2;if(a!==this.length){var h=new Uint8Array(a);h.set(this.buf),this.buf=h,this.length=a}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),bd(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),bd(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),bd(this.buf,-1&c,this.pos),bd(this.buf,Math.floor(c*Vw),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),bd(this.buf,-1&c,this.pos),bd(this.buf,Math.floor(c*Vw),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?function(a,h){var p,y;if(a>=0?(p=a%4294967296|0,y=a/4294967296|0):(y=~(-a/4294967296),4294967295^(p=~(-a%4294967296))?p=p+1|0:(p=0,y=y+1|0)),a>=18446744073709552e3||a<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),function(S,T,M){M.buf[M.pos++]=127&S|128,S>>>=7,M.buf[M.pos++]=127&S|128,S>>>=7,M.buf[M.pos++]=127&S|128,S>>>=7,M.buf[M.pos++]=127&S|128,M.buf[M.pos]=127&(S>>>=7)}(p,0,h),function(S,T){var M=(7&S)<<4;T.buf[T.pos++]|=M|((S>>>=3)?128:0),S&&(T.buf[T.pos++]=127&S|((S>>>=7)?128:0),S&&(T.buf[T.pos++]=127&S|((S>>>=7)?128:0),S&&(T.buf[T.pos++]=127&S|((S>>>=7)?128:0),S&&(T.buf[T.pos++]=127&S|((S>>>=7)?128:0),S&&(T.buf[T.pos++]=127&S)))))}(y,h)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var a=this.pos;this.pos=function(p,y,S){for(var T,M,D=0;D<y.length;D++){if((T=y.charCodeAt(D))>55295&&T<57344){if(!M){T>56319||D+1===y.length?(p[S++]=239,p[S++]=191,p[S++]=189):M=T;continue}if(T<56320){p[S++]=239,p[S++]=191,p[S++]=189,M=T;continue}T=M-55296<<10|T-56320|65536,M=null}else M&&(p[S++]=239,p[S++]=191,p[S++]=189,M=null);T<128?p[S++]=T:(T<2048?p[S++]=T>>6|192:(T<65536?p[S++]=T>>12|224:(p[S++]=T>>18|240,p[S++]=T>>12&63|128),p[S++]=T>>6&63|128),p[S++]=63&T|128)}return S}(this.buf,c,this.pos);var h=this.pos-a;h>=128&&Gw(a,h,this),this.pos=a-1,this.writeVarint(h),this.pos+=h},writeFloat:function(c){this.realloc(4),Uw(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),Uw(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var a=c.length;this.writeVarint(a),this.realloc(a);for(var h=0;h<a;h++)this.buf[this.pos++]=c[h]},writeRawMessage:function(c,a){this.pos++;var h=this.pos;c(a,this);var p=this.pos-h;p>=128&&Gw(h,p,this),this.pos=h-1,this.writeVarint(p),this.pos+=p},writeMessage:function(c,a,h){this.writeTag(c,Ii.Bytes),this.writeRawMessage(a,h)},writePackedVarint:function(c,a){a.length&&this.writeMessage(c,nL,a)},writePackedSVarint:function(c,a){a.length&&this.writeMessage(c,iL,a)},writePackedBoolean:function(c,a){a.length&&this.writeMessage(c,aL,a)},writePackedFloat:function(c,a){a.length&&this.writeMessage(c,rL,a)},writePackedDouble:function(c,a){a.length&&this.writeMessage(c,sL,a)},writePackedFixed32:function(c,a){a.length&&this.writeMessage(c,oL,a)},writePackedSFixed32:function(c,a){a.length&&this.writeMessage(c,lL,a)},writePackedFixed64:function(c,a){a.length&&this.writeMessage(c,cL,a)},writePackedSFixed64:function(c,a){a.length&&this.writeMessage(c,uL,a)},writeBytesField:function(c,a){this.writeTag(c,Ii.Bytes),this.writeBytes(a)},writeFixed32Field:function(c,a){this.writeTag(c,Ii.Fixed32),this.writeFixed32(a)},writeSFixed32Field:function(c,a){this.writeTag(c,Ii.Fixed32),this.writeSFixed32(a)},writeFixed64Field:function(c,a){this.writeTag(c,Ii.Fixed64),this.writeFixed64(a)},writeSFixed64Field:function(c,a){this.writeTag(c,Ii.Fixed64),this.writeSFixed64(a)},writeVarintField:function(c,a){this.writeTag(c,Ii.Varint),this.writeVarint(a)},writeSVarintField:function(c,a){this.writeTag(c,Ii.Varint),this.writeSVarint(a)},writeStringField:function(c,a){this.writeTag(c,Ii.Bytes),this.writeString(a)},writeFloatField:function(c,a){this.writeTag(c,Ii.Fixed32),this.writeFloat(a)},writeDoubleField:function(c,a){this.writeTag(c,Ii.Fixed64),this.writeDouble(a)},writeBooleanField:function(c,a){this.writeVarintField(c,!!a)}};var Dl,By=m(Nw);function dL(c,a,h){c===1&&h.readMessage(hL,a)}function hL(c,a,h){if(c===3){const{id:p,bitmap:y,width:S,height:T,left:M,top:D,advance:j}=h.readMessage(fL,{});a.push({id:p,bitmap:new gf({width:S+6,height:T+6},y),metrics:{width:S,height:T,left:M,top:D,advance:j}})}}function fL(c,a,h){c===1?a.id=h.readVarint():c===2?a.bitmap=h.readBytes():c===3?a.width=h.readVarint():c===4?a.height=h.readVarint():c===5?a.left=h.readSVarint():c===6?a.top=h.readSVarint():c===7&&(a.advance=h.readVarint())}function qw(c){let a=0,h=0;for(const T of c)a+=T.w*T.h,h=Math.max(h,T.w);c.sort((T,M)=>M.h-T.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),h),h:1/0}];let y=0,S=0;for(const T of c)for(let M=p.length-1;M>=0;M--){const D=p[M];if(!(T.w>D.w||T.h>D.h)){if(T.x=D.x,T.y=D.y,S=Math.max(S,T.y+T.h),y=Math.max(y,T.x+T.w),T.w===D.w&&T.h===D.h){const j=p.pop();M<p.length&&(p[M]=j)}else T.h===D.h?(D.x+=T.w,D.w-=T.w):T.w===D.w?(D.y+=T.h,D.h-=T.h):(p.push({x:D.x+T.w,y:D.y,w:D.w-T.w,h:T.h}),D.y+=T.h,D.h-=T.h);break}}return{w:y,h:S,fill:a/(y*S)||0}}class Ny{constructor(a,{pixelRatio:h,version:p,stretchX:y,stretchY:S,content:T}){this.paddedRect=a,this.pixelRatio=h,this.stretchX=y,this.stretchY=S,this.content=T,this.version=p}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Zw{constructor(a,h){const p={},y={};this.haveRenderCallbacks=[];const S=[];this.addImages(a,p,S),this.addImages(h,y,S);const{w:T,h:M}=qw(S),D=new Us({width:T||1,height:M||1});for(const j in a){const W=a[j],J=p[j].paddedRect;Us.copy(W.data,D,{x:0,y:0},{x:J.x+1,y:J.y+1},W.data)}for(const j in h){const W=h[j],J=y[j].paddedRect,se=J.x+1,oe=J.y+1,ue=W.data.width,Te=W.data.height;Us.copy(W.data,D,{x:0,y:0},{x:se,y:oe},W.data),Us.copy(W.data,D,{x:0,y:Te-1},{x:se,y:oe-1},{width:ue,height:1}),Us.copy(W.data,D,{x:0,y:0},{x:se,y:oe+Te},{width:ue,height:1}),Us.copy(W.data,D,{x:ue-1,y:0},{x:se-1,y:oe},{width:1,height:Te}),Us.copy(W.data,D,{x:0,y:0},{x:se+ue,y:oe},{width:1,height:Te})}this.image=D,this.iconPositions=p,this.patternPositions=y}addImages(a,h,p){for(const y in a){const S=a[y],T={x:0,y:0,w:S.data.width+2,h:S.data.height+2};p.push(T),h[y]=new Ny(T,S),S.hasRenderCallback&&this.haveRenderCallbacks.push(y)}}patchUpdatedImages(a,h){a.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in a.updatedImages)this.patchUpdatedImage(this.iconPositions[p],a.getImage(p),h),this.patchUpdatedImage(this.patternPositions[p],a.getImage(p),h)}patchUpdatedImage(a,h,p){if(!a||!h||a.version===h.version)return;a.version=h.version;const[y,S]=a.tl;p.update(h.data,void 0,{x:y,y:S})}}dn("ImagePosition",Ny),dn("ImageAtlas",Zw),l.WritingMode=void 0,(Dl=l.WritingMode||(l.WritingMode={}))[Dl.none=0]="none",Dl[Dl.horizontal=1]="horizontal",Dl[Dl.vertical=2]="vertical",Dl[Dl.horizontalOnly=3]="horizontalOnly";const hg=-17;class Tf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(a,h){const p=new Tf;return p.scale=a||1,p.fontStack=h,p}static forImage(a){const h=new Tf;return h.imageName=a,h}}class xd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,h){const p=new xd;for(let y=0;y<a.sections.length;y++){const S=a.sections[y];S.image?p.addImageSection(S):p.addTextSection(S,h)}return p}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSectionIndex(a){return this.sectionIndex[a]}getCharCode(a){return this.text.charCodeAt(a)}verticalizePunctuation(){this.text=function(a){let h="";for(let p=0;p<a.length;p++){const y=a.charCodeAt(p+1)||null,S=a.charCodeAt(p-1)||null;h+=y&&Zm(y)&&!Sf[a[p+1]]||S&&Zm(S)&&!Sf[a[p-1]]||!Sf[a[p]]?a[p]:Sf[a[p]]}return h}(this.text)}trim(){let a=0;for(let p=0;p<this.text.length&&pg[this.text.charCodeAt(p)];p++)a++;let h=this.text.length;for(let p=this.text.length-1;p>=0&&p>=a&&pg[this.text.charCodeAt(p)];p--)h--;this.text=this.text.substring(a,h),this.sectionIndex=this.sectionIndex.slice(a,h)}substring(a,h){const p=new xd;return p.text=this.text.substring(a,h),p.sectionIndex=this.sectionIndex.slice(a,h),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((a,h)=>Math.max(a,this.sections[h].scale),0)}addTextSection(a,h){this.text+=a.text,this.sections.push(Tf.forText(a.scale,a.fontStack||h));const p=this.sections.length-1;for(let y=0;y<a.text.length;++y)this.sectionIndex.push(p)}addImageSection(a){const h=a.image?a.image.name:"";if(h.length===0)return void U("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push(Tf.forImage(h)),this.sectionIndex.push(this.sections.length-1)):U("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function fg(c,a,h,p,y,S,T,M,D,j,W,J,se,oe,ue,Te){const we=xd.fromFeature(c,y);let Ve;J===l.WritingMode.vertical&&we.verticalizePunctuation();const{processBidirectionalText:Je,processStyledBidirectionalText:Ne}=Ms;if(Je&&we.sections.length===1){Ve=[];const Tt=Je(we.toString(),jy(we,j,S,a,p,oe,ue));for(const cn of Tt){const gn=new xd;gn.text=cn,gn.sections=we.sections;for(let en=0;en<cn.length;en++)gn.sectionIndex.push(0);Ve.push(gn)}}else if(Ne){Ve=[];const Tt=Ne(we.text,we.sectionIndex,jy(we,j,S,a,p,oe,ue));for(const cn of Tt){const gn=new xd;gn.text=cn[0],gn.sectionIndex=cn[1],gn.sections=we.sections,Ve.push(gn)}}else Ve=function(Tt,cn){const gn=[],en=Tt.text;let Kt=0;for(const Ht of cn)gn.push(Tt.substring(Kt,Ht)),Kt=Ht;return Kt<en.length&&gn.push(Tt.substring(Kt,en.length)),gn}(we,jy(we,j,S,a,p,oe,ue));const at=[],ct={positionedLines:at,text:we.toString(),top:W[1],bottom:W[1],left:W[0],right:W[0],writingMode:J,iconsInText:!1,verticalizable:!1};return function(Tt,cn,gn,en,Kt,Ht,tn,Xt,Ft,Tn,yn,Zn){let Di=0,zi=hg,mr=0,Hs=0;const Lr=Xt==="right"?1:Xt==="left"?0:.5;let or=0;for(const lr of Kt){lr.trim();const Rr=lr.getMaxScale(),Hr=(Rr-1)*Cr,es={positionedGlyphs:[],lineOffset:0};Tt.positionedLines[or]=es;const hs=es.positionedGlyphs;let fs=0;if(!lr.length()){zi+=Ht,++or;continue}for(let Fr=0;Fr<lr.length();Fr++){const Kn=lr.getSection(Fr),ks=lr.getSectionIndex(Fr),$r=lr.getCharCode(Fr);let Gr=0,ma=null,$a=null,za=null,Yo=Cr;const va=!(Ft===l.WritingMode.horizontal||!yn&&!Ju($r)||yn&&(pg[$r]||(Sr=$r,Jt.Arabic(Sr)||Jt["Arabic Supplement"](Sr)||Jt["Arabic Extended-A"](Sr)||Jt["Arabic Presentation Forms-A"](Sr)||Jt["Arabic Presentation Forms-B"](Sr))));if(Kn.imageName){const Gs=en[Kn.imageName];if(!Gs)continue;za=Kn.imageName,Tt.iconsInText=Tt.iconsInText||!0,$a=Gs.paddedRect;const ps=Gs.displaySize;Kn.scale=Kn.scale*Cr/Zn,ma={width:ps[0],height:ps[1],left:1,top:-3,advance:va?ps[1]:ps[0]},Gr=Hr+(Cr-ps[1]*Kn.scale),Yo=ma.advance;const Jo=va?ps[0]*Kn.scale-Cr*Rr:ps[1]*Kn.scale-Cr*Rr;Jo>0&&Jo>fs&&(fs=Jo)}else{const Gs=gn[Kn.fontStack],ps=Gs&&Gs[$r];if(ps&&ps.rect)$a=ps.rect,ma=ps.metrics;else{const Jo=cn[Kn.fontStack],Af=Jo&&Jo[$r];if(!Af)continue;ma=Af.metrics}Gr=(Rr-Kn.scale)*Cr}va?(Tt.verticalizable=!0,hs.push({glyph:$r,imageName:za,x:Di,y:zi+Gr,vertical:va,scale:Kn.scale,fontStack:Kn.fontStack,sectionIndex:ks,metrics:ma,rect:$a}),Di+=Yo*Kn.scale+Tn):(hs.push({glyph:$r,imageName:za,x:Di,y:zi+Gr,vertical:va,scale:Kn.scale,fontStack:Kn.fontStack,sectionIndex:ks,metrics:ma,rect:$a}),Di+=ma.advance*Kn.scale+Tn)}hs.length!==0&&(mr=Math.max(Di-Tn,mr),gL(hs,0,hs.length-1,Lr,fs)),Di=0;const Xi=Ht*Rr+fs;es.lineOffset=Math.max(fs,Hr),zi+=Xi,Hs=Math.max(Xi,Hs),++or}var Sr;const Or=zi-hg,{horizontalAlign:Vr,verticalAlign:ds}=Uy(tn);(function(lr,Rr,Hr,es,hs,fs,Xi,Fr,Kn){const ks=(Rr-Hr)*hs;let $r=0;$r=fs!==Xi?-Fr*es-hg:(-es*Kn+.5)*Xi;for(const Gr of lr)for(const ma of Gr.positionedGlyphs)ma.x+=ks,ma.y+=$r})(Tt.positionedLines,Lr,Vr,ds,mr,Hs,Ht,Or,Kt.length),Tt.top+=-ds*Or,Tt.bottom=Tt.top+Or,Tt.left+=-Vr*mr,Tt.right=Tt.left+mr}(ct,a,h,p,Ve,T,M,D,J,j,se,Te),!function(Tt){for(const cn of Tt)if(cn.positionedGlyphs.length!==0)return!1;return!0}(at)&&ct}const pg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},pL={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Kw(c,a,h,p,y,S){if(a.imageName){const T=p[a.imageName];return T?T.displaySize[0]*a.scale*Cr/S+y:0}{const T=h[a.fontStack],M=T&&T[c];return M?M.metrics.advance*a.scale+y:0}}function Xw(c,a,h,p){const y=Math.pow(c-a,2);return p?c<a?y/2:2*y:y+Math.abs(h)*h}function mL(c,a,h){let p=0;return c===10&&(p-=1e4),h&&(p+=150),c!==40&&c!==65288||(p+=50),a!==41&&a!==65289||(p+=50),p}function Yw(c,a,h,p,y,S){let T=null,M=Xw(a,h,y,S);for(const D of p){const j=Xw(a-D.x,h,y,S)+D.badness;j<=M&&(T=D,M=j)}return{index:c,x:a,priorBreak:T,badness:M}}function Jw(c){return c?Jw(c.priorBreak).concat(c.index):[]}function jy(c,a,h,p,y,S,T){if(S!=="point")return[];if(!c)return[];const M=[],D=function(se,oe,ue,Te,we,Ve){let Je=0;for(let Ne=0;Ne<se.length();Ne++){const at=se.getSection(Ne);Je+=Kw(se.getCharCode(Ne),at,Te,we,oe,Ve)}return Je/Math.max(1,Math.ceil(Je/ue))}(c,a,h,p,y,T),j=c.text.indexOf("​")>=0;let W=0;for(let se=0;se<c.length();se++){const oe=c.getSection(se),ue=c.getCharCode(se);if(pg[ue]||(W+=Kw(ue,oe,p,y,a,T)),se<c.length()-1){const Te=!((J=ue)<11904||!(Jt["Bopomofo Extended"](J)||Jt.Bopomofo(J)||Jt["CJK Compatibility Forms"](J)||Jt["CJK Compatibility Ideographs"](J)||Jt["CJK Compatibility"](J)||Jt["CJK Radicals Supplement"](J)||Jt["CJK Strokes"](J)||Jt["CJK Symbols and Punctuation"](J)||Jt["CJK Unified Ideographs Extension A"](J)||Jt["CJK Unified Ideographs"](J)||Jt["Enclosed CJK Letters and Months"](J)||Jt["Halfwidth and Fullwidth Forms"](J)||Jt.Hiragana(J)||Jt["Ideographic Description Characters"](J)||Jt["Kangxi Radicals"](J)||Jt["Katakana Phonetic Extensions"](J)||Jt.Katakana(J)||Jt["Vertical Forms"](J)||Jt["Yi Radicals"](J)||Jt["Yi Syllables"](J)));(pL[ue]||Te||oe.imageName)&&M.push(Yw(se+1,W,D,M,mL(ue,c.getCharCode(se+1),Te&&j),!1))}}var J;return Jw(Yw(c.length(),W,D,M,0,!0))}function Uy(c){let a=.5,h=.5;switch(c){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:a,verticalAlign:h}}function gL(c,a,h,p,y){if(!p&&!y)return;const S=c[h],T=(c[h].x+S.metrics.advance*S.scale)*p;for(let M=a;M<=h;M++)c[M].x-=T,c[M].y+=y}function vL(c,a,h){const{horizontalAlign:p,verticalAlign:y}=Uy(h),S=a[0]-c.displaySize[0]*p,T=a[1]-c.displaySize[1]*y;return{image:c,top:T,bottom:T+c.displaySize[1],left:S,right:S+c.displaySize[0]}}function Qw(c,a,h,p,y,S){const T=c.image;let M;if(T.content){const we=T.content,Ve=T.pixelRatio||1;M=[we[0]/Ve,we[1]/Ve,T.displaySize[0]-we[2]/Ve,T.displaySize[1]-we[3]/Ve]}const D=a.left*S,j=a.right*S;let W,J,se,oe;h==="width"||h==="both"?(oe=y[0]+D-p[3],J=y[0]+j+p[1]):(oe=y[0]+(D+j-T.displaySize[0])/2,J=oe+T.displaySize[0]);const ue=a.top*S,Te=a.bottom*S;return h==="height"||h==="both"?(W=y[1]+ue-p[0],se=y[1]+Te+p[2]):(W=y[1]+(ue+Te-T.displaySize[1])/2,se=W+T.displaySize[1]),{image:T,top:W,right:J,bottom:se,left:oe,collisionPadding:M}}const Xo=128,Ll=32640;function eS(c,a){const{expression:h}=a;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new Fi(c+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:p,interpolationType:y}=h;let S=0;for(;S<p.length&&p[S]<=c;)S++;S=Math.max(0,S-1);let T=S;for(;T<p.length&&p[T]<c+1;)T++;T=Math.min(p.length-1,T);const M=p[S],D=p[T];return h.kind==="composite"?{kind:"composite",minZoom:M,maxZoom:D,interpolationType:y}:{kind:"camera",minZoom:M,maxZoom:D,minSize:h.evaluate(new Fi(M)),maxSize:h.evaluate(new Fi(D)),interpolationType:y}}}function Vy(c,a,h){let p="never";const y=c.get(a);return y?p=y:c.get(h)&&(p="always"),p}const _L=Pl.VectorTileFeature.types,yL=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function mg(c,a,h,p,y,S,T,M,D,j,W,J,se){const oe=M?Math.min(Ll,Math.round(M[0])):0,ue=M?Math.min(Ll,Math.round(M[1])):0;c.emplaceBack(a,h,Math.round(32*p),Math.round(32*y),S,T,(oe<<1)+(D?1:0),ue,16*j,16*W,256*J,256*se)}function Hy(c,a,h){c.emplaceBack(a.x,a.y,h),c.emplaceBack(a.x,a.y,h),c.emplaceBack(a.x,a.y,h),c.emplaceBack(a.x,a.y,h)}function bL(c){for(const a of c.sections)if(Km(a.text))return!0;return!1}class Gy{constructor(a){this.layoutVertexArray=new it,this.indexArray=new Lt,this.programConfigurations=a,this.segments=new Zt,this.dynamicLayoutVertexArray=new _t,this.opacityVertexArray=new At,this.hasVisibleVertices=!1,this.placedSymbolArray=new P}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(a,h,p,y){this.isEmpty()||(p&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,YD.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,JD.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,yL,!0),this.opacityVertexBuffer.itemSize=1),(p||y)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}dn("SymbolBuffers",Gy);class Wy{constructor(a,h,p){this.layoutVertexArray=new a,this.layoutAttributes=h,this.indexArray=new p,this.segments=new Zt,this.collisionVertexArray=new Bt}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,QD.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}dn("CollisionBuffers",Wy);class wd{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(T=>T.id),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ty([]),this.placementViewportMatrix=Ty([]);const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=eS(this.zoom,h["text-size"]),this.iconSizeData=eS(this.zoom,h["icon-size"]);const p=this.layers[0].layout,y=p.get("symbol-sort-key"),S=p.get("symbol-z-order");this.canOverlap=Vy(p,"text-overlap","text-allow-overlap")!=="never"||Vy(p,"icon-overlap","icon-allow-overlap")!=="never"||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey=S!=="viewport-y"&&!y.isConstant(),this.sortFeaturesByY=(S==="viewport-y"||S==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,p.get("symbol-placement")==="point"&&(this.writingModes=p.get("text-writing-mode").map(T=>l.WritingMode[T])),this.stateDependentLayerIds=this.layers.filter(T=>T.isStateDependent()).map(T=>T.id),this.sourceID=a.sourceID}createArrays(){this.text=new Gy(new Ra(this.layers,this.zoom,a=>/^text/.test(a))),this.icon=new Gy(new Ra(this.layers,this.zoom,a=>/^icon/.test(a))),this.glyphOffsetArray=new N,this.lineVertexArray=new K,this.symbolInstances=new O}calculateGlyphDependencies(a,h,p,y,S){for(let T=0;T<a.length;T++)if(h[a.charCodeAt(T)]=!0,(p||y)&&S){const M=Sf[a.charAt(T)];M&&(h[M.charCodeAt(0)]=!0)}}populate(a,h,p){const y=this.layers[0],S=y.layout,T=S.get("text-font"),M=S.get("text-field"),D=S.get("icon-image"),j=(M.value.kind!=="constant"||M.value.value instanceof Yn&&!M.value.value.isEmpty()||M.value.value.toString().length>0)&&(T.value.kind!=="constant"||T.value.value.length>0),W=D.value.kind!=="constant"||!!D.value.value||Object.keys(D.parameters).length>0,J=S.get("symbol-sort-key");if(this.features=[],!j&&!W)return;const se=h.iconDependencies,oe=h.glyphDependencies,ue=h.availableImages,Te=new Fi(this.zoom);for(const{feature:we,id:Ve,index:Je,sourceLayerIndex:Ne}of a){const at=y._featureFilter.needGeometry,ct=Gc(we,at);if(!y._featureFilter.filter(Te,ct,p))continue;let Tt,cn;if(at||(ct.geometry=Fa(we)),j){const en=y.getValueAndResolveTokens("text-field",ct,p,ue),Kt=Yn.factory(en);bL(Kt)&&(this.hasRTLText=!0),(!this.hasRTLText||rf()==="unavailable"||this.hasRTLText&&Ms.isParsed())&&(Tt=tL(Kt,y,ct))}if(W){const en=y.getValueAndResolveTokens("icon-image",ct,p,ue);cn=en instanceof ri?en:ri.fromString(en)}if(!Tt&&!cn)continue;const gn=this.sortFeaturesByKey?J.evaluate(ct,{},p):void 0;if(this.features.push({id:Ve,text:Tt,icon:cn,index:Je,sourceLayerIndex:Ne,geometry:ct.geometry,properties:we.properties,type:_L[we.type],sortKey:gn}),cn&&(se[cn.name]=!0),Tt){const en=T.evaluate(ct,{},p).join(","),Kt=S.get("text-rotation-alignment")!=="viewport"&&S.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.WritingMode.vertical)>=0;for(const Ht of Tt.sections)if(Ht.image)se[Ht.image.name]=!0;else{const tn=Yu(Tt.toString()),Xt=Ht.fontStack||en,Ft=oe[Xt]=oe[Xt]||{};this.calculateGlyphDependencies(Ht.text,Ft,Kt,this.allowVerticalPlacement,tn)}}}S.get("symbol-placement")==="line"&&(this.features=function(we){const Ve={},Je={},Ne=[];let at=0;function ct(en){Ne.push(we[en]),at++}function Tt(en,Kt,Ht){const tn=Je[en];return delete Je[en],Je[Kt]=tn,Ne[tn].geometry[0].pop(),Ne[tn].geometry[0]=Ne[tn].geometry[0].concat(Ht[0]),tn}function cn(en,Kt,Ht){const tn=Ve[Kt];return delete Ve[Kt],Ve[en]=tn,Ne[tn].geometry[0].shift(),Ne[tn].geometry[0]=Ht[0].concat(Ne[tn].geometry[0]),tn}function gn(en,Kt,Ht){const tn=Ht?Kt[0][Kt[0].length-1]:Kt[0][0];return`${en}:${tn.x}:${tn.y}`}for(let en=0;en<we.length;en++){const Kt=we[en],Ht=Kt.geometry,tn=Kt.text?Kt.text.toString():null;if(!tn){ct(en);continue}const Xt=gn(tn,Ht),Ft=gn(tn,Ht,!0);if(Xt in Je&&Ft in Ve&&Je[Xt]!==Ve[Ft]){const Tn=cn(Xt,Ft,Ht),yn=Tt(Xt,Ft,Ne[Tn].geometry);delete Ve[Xt],delete Je[Ft],Je[gn(tn,Ne[yn].geometry,!0)]=yn,Ne[Tn].geometry=null}else Xt in Je?Tt(Xt,Ft,Ht):Ft in Ve?cn(Xt,Ft,Ht):(ct(en),Ve[Xt]=at-1,Je[Ft]=at-1)}return Ne.filter(en=>en.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((we,Ve)=>we.sortKey-Ve.sortKey)}update(a,h,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,h,this.layers,p),this.icon.programConfigurations.updatePaintArrays(a,h,this.layers,p))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,h){const p=this.lineVertexArray.length;if(a.segment!==void 0){let y=a.dist(h[a.segment+1]),S=a.dist(h[a.segment]);const T={};for(let M=a.segment+1;M<h.length;M++)T[M]={x:h[M].x,y:h[M].y,tileUnitDistanceFromAnchor:y},M<h.length-1&&(y+=h[M+1].dist(h[M]));for(let M=a.segment||0;M>=0;M--)T[M]={x:h[M].x,y:h[M].y,tileUnitDistanceFromAnchor:S},M>0&&(S+=h[M-1].dist(h[M]));for(let M=0;M<h.length;M++){const D=T[M];this.lineVertexArray.emplaceBack(D.x,D.y,D.tileUnitDistanceFromAnchor)}}return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(a,h,p,y,S,T,M,D,j,W,J,se){const oe=a.indexArray,ue=a.layoutVertexArray,Te=a.segments.prepareSegment(4*h.length,ue,oe,this.canOverlap?T.sortKey:void 0),we=this.glyphOffsetArray.length,Ve=Te.vertexLength,Je=this.allowVerticalPlacement&&M===l.WritingMode.vertical?Math.PI/2:0,Ne=T.text&&T.text.sections;for(let at=0;at<h.length;at++){const{tl:ct,tr:Tt,bl:cn,br:gn,tex:en,pixelOffsetTL:Kt,pixelOffsetBR:Ht,minFontScaleX:tn,minFontScaleY:Xt,glyphOffset:Ft,isSDF:Tn,sectionIndex:yn}=h[at],Zn=Te.vertexLength,Di=Ft[1];mg(ue,D.x,D.y,ct.x,Di+ct.y,en.x,en.y,p,Tn,Kt.x,Kt.y,tn,Xt),mg(ue,D.x,D.y,Tt.x,Di+Tt.y,en.x+en.w,en.y,p,Tn,Ht.x,Kt.y,tn,Xt),mg(ue,D.x,D.y,cn.x,Di+cn.y,en.x,en.y+en.h,p,Tn,Kt.x,Ht.y,tn,Xt),mg(ue,D.x,D.y,gn.x,Di+gn.y,en.x+en.w,en.y+en.h,p,Tn,Ht.x,Ht.y,tn,Xt),Hy(a.dynamicLayoutVertexArray,D,Je),oe.emplaceBack(Zn,Zn+1,Zn+2),oe.emplaceBack(Zn+1,Zn+2,Zn+3),Te.vertexLength+=4,Te.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ft[0]),at!==h.length-1&&yn===h[at+1].sectionIndex||a.programConfigurations.populatePaintArrays(ue.length,T,T.index,{},se,Ne&&Ne[yn])}a.placedSymbolArray.emplaceBack(D.x,D.y,we,this.glyphOffsetArray.length-we,Ve,j,W,D.segment,p?p[0]:0,p?p[1]:0,y[0],y[1],M,0,!1,0,J)}_addCollisionDebugVertex(a,h,p,y,S,T){return h.emplaceBack(0,0),a.emplaceBack(p.x,p.y,y,S,Math.round(T.x),Math.round(T.y))}addCollisionDebugVertices(a,h,p,y,S,T,M){const D=S.segments.prepareSegment(4,S.layoutVertexArray,S.indexArray),j=D.vertexLength,W=S.layoutVertexArray,J=S.collisionVertexArray,se=M.anchorX,oe=M.anchorY;this._addCollisionDebugVertex(W,J,T,se,oe,new w(a,h)),this._addCollisionDebugVertex(W,J,T,se,oe,new w(p,h)),this._addCollisionDebugVertex(W,J,T,se,oe,new w(p,y)),this._addCollisionDebugVertex(W,J,T,se,oe,new w(a,y)),D.vertexLength+=4;const ue=S.indexArray;ue.emplaceBack(j,j+1),ue.emplaceBack(j+1,j+2),ue.emplaceBack(j+2,j+3),ue.emplaceBack(j+3,j),D.primitiveLength+=4}addDebugCollisionBoxes(a,h,p,y){for(let S=a;S<h;S++){const T=this.collisionBoxArray.get(S);this.addCollisionDebugVertices(T.x1,T.y1,T.x2,T.y2,y?this.textCollisionBox:this.iconCollisionBox,T.anchorPoint,p)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Wy(Rt,Bw.members,nn),this.iconCollisionBox=new Wy(Rt,Bw.members,nn);for(let a=0;a<this.symbolInstances.length;a++){const h=this.symbolInstances.get(a);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(a,h,p,y,S,T,M,D,j){const W={};for(let J=h;J<p;J++){const se=a.get(J);W.textBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},W.textFeatureIndex=se.featureIndex;break}for(let J=y;J<S;J++){const se=a.get(J);W.verticalTextBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},W.verticalTextFeatureIndex=se.featureIndex;break}for(let J=T;J<M;J++){const se=a.get(J);W.iconBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},W.iconFeatureIndex=se.featureIndex;break}for(let J=D;J<j;J++){const se=a.get(J);W.verticalIconBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},W.verticalIconFeatureIndex=se.featureIndex;break}return W}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const p=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(a,h){const p=a.placedSymbolArray.get(h),y=p.vertexStartIndex+4*p.numGlyphs;for(let S=p.vertexStartIndex;S<y;S+=4)a.indexArray.emplaceBack(S,S+1,S+2),a.indexArray.emplaceBack(S+1,S+2,S+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(a),p=Math.cos(a),y=[],S=[],T=[];for(let M=0;M<this.symbolInstances.length;++M){T.push(M);const D=this.symbolInstances.get(M);y.push(0|Math.round(h*D.anchorX+p*D.anchorY)),S.push(D.featureIndex)}return T.sort((M,D)=>y[M]-y[D]||S[D]-S[M]),T}addToSortKeyRanges(a,h){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===h?p.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const p=this.symbolInstances.get(h);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach((y,S,T)=>{y>=0&&T.indexOf(y)===S&&this.addIndicesForPlacedSymbol(this.text,y)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let tS,nS;dn("SymbolBucket",wd,{omit:["layers","collisionBoxArray","features","compareText"]}),wd.MAX_GLYPHS=65535,wd.addDynamicAttributes=Hy;var qy={get paint(){return nS=nS||new Jr({"icon-opacity":new Dn(ge.paint_symbol["icon-opacity"]),"icon-color":new Dn(ge.paint_symbol["icon-color"]),"icon-halo-color":new Dn(ge.paint_symbol["icon-halo-color"]),"icon-halo-width":new Dn(ge.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Dn(ge.paint_symbol["icon-halo-blur"]),"icon-translate":new bn(ge.paint_symbol["icon-translate"]),"icon-translate-anchor":new bn(ge.paint_symbol["icon-translate-anchor"]),"text-opacity":new Dn(ge.paint_symbol["text-opacity"]),"text-color":new Dn(ge.paint_symbol["text-color"],{runtimeType:Yt,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new Dn(ge.paint_symbol["text-halo-color"]),"text-halo-width":new Dn(ge.paint_symbol["text-halo-width"]),"text-halo-blur":new Dn(ge.paint_symbol["text-halo-blur"]),"text-translate":new bn(ge.paint_symbol["text-translate"]),"text-translate-anchor":new bn(ge.paint_symbol["text-translate-anchor"])})},get layout(){return tS=tS||new Jr({"symbol-placement":new bn(ge.layout_symbol["symbol-placement"]),"symbol-spacing":new bn(ge.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new bn(ge.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Dn(ge.layout_symbol["symbol-sort-key"]),"symbol-z-order":new bn(ge.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new bn(ge.layout_symbol["icon-allow-overlap"]),"icon-overlap":new bn(ge.layout_symbol["icon-overlap"]),"icon-ignore-placement":new bn(ge.layout_symbol["icon-ignore-placement"]),"icon-optional":new bn(ge.layout_symbol["icon-optional"]),"icon-rotation-alignment":new bn(ge.layout_symbol["icon-rotation-alignment"]),"icon-size":new Dn(ge.layout_symbol["icon-size"]),"icon-text-fit":new bn(ge.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new bn(ge.layout_symbol["icon-text-fit-padding"]),"icon-image":new Dn(ge.layout_symbol["icon-image"]),"icon-rotate":new Dn(ge.layout_symbol["icon-rotate"]),"icon-padding":new Dn(ge.layout_symbol["icon-padding"]),"icon-keep-upright":new bn(ge.layout_symbol["icon-keep-upright"]),"icon-offset":new Dn(ge.layout_symbol["icon-offset"]),"icon-anchor":new Dn(ge.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new bn(ge.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new bn(ge.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new bn(ge.layout_symbol["text-rotation-alignment"]),"text-field":new Dn(ge.layout_symbol["text-field"]),"text-font":new Dn(ge.layout_symbol["text-font"]),"text-size":new Dn(ge.layout_symbol["text-size"]),"text-max-width":new Dn(ge.layout_symbol["text-max-width"]),"text-line-height":new bn(ge.layout_symbol["text-line-height"]),"text-letter-spacing":new Dn(ge.layout_symbol["text-letter-spacing"]),"text-justify":new Dn(ge.layout_symbol["text-justify"]),"text-radial-offset":new Dn(ge.layout_symbol["text-radial-offset"]),"text-variable-anchor":new bn(ge.layout_symbol["text-variable-anchor"]),"text-anchor":new Dn(ge.layout_symbol["text-anchor"]),"text-max-angle":new bn(ge.layout_symbol["text-max-angle"]),"text-writing-mode":new bn(ge.layout_symbol["text-writing-mode"]),"text-rotate":new Dn(ge.layout_symbol["text-rotate"]),"text-padding":new bn(ge.layout_symbol["text-padding"]),"text-keep-upright":new bn(ge.layout_symbol["text-keep-upright"]),"text-transform":new Dn(ge.layout_symbol["text-transform"]),"text-offset":new Dn(ge.layout_symbol["text-offset"]),"text-allow-overlap":new bn(ge.layout_symbol["text-allow-overlap"]),"text-overlap":new bn(ge.layout_symbol["text-overlap"]),"text-ignore-placement":new bn(ge.layout_symbol["text-ignore-placement"]),"text-optional":new bn(ge.layout_symbol["text-optional"])})}};class iS{constructor(a){if(a.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=a.property.overrides?a.property.overrides.runtimeType:Qe,this.defaultValue=a}evaluate(a){if(a.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(a.formattedSection))return h.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}dn("FormatSectionOverride",iS,{omit:["defaultValue"]});class gg extends ha{constructor(a){super(a,qy)}recalculate(a,h){if(super.recalculate(a,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const p=this.layout.get("text-writing-mode");if(p){const y=[];for(const S of p)y.indexOf(S)<0&&y.push(S);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(a,h,p,y){const S=this.layout.get(a).evaluate(h,{},p,y),T=this._unevaluatedLayout._values[a];return T.isDataDriven()||Vu(T.value)||!S?S:function(M,D){return D.replace(/{([^{}]+)}/g,(j,W)=>W in M?String(M[W]):"")}(h.properties,S)}createBucket(a){return new wd(a)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const a of qy.paint.overridableProperties){if(!gg.hasPaintOverride(this.layout,a))continue;const h=this.paint.get(a),p=new iS(h),y=new Gh(p,h.property.specification);let S=null;S=h.value.kind==="constant"||h.value.kind==="source"?new Wh("source",y):new Jn("composite",y,h.value.zoomStops),this.paint._values[a]=new da(h.property,S,h.parameters)}}_handleOverridablePaintPropertyUpdate(a,h,p){return!(!this.layout||h.isDataDriven()||p.isDataDriven())&&gg.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,h){const p=a.get("text-field"),y=qy.paint.properties[h];let S=!1;const T=M=>{for(const D of M)if(y.overrides&&y.overrides.hasOverride(D))return void(S=!0)};if(p.value.kind==="constant"&&p.value.value instanceof Yn)T(p.value.value.sections);else if(p.value.kind==="source"){const M=j=>{S||(j instanceof mo&&Ci(j.value)===Cn?T(j.value.sections):j instanceof ju?T(j.sections):j.eachChild(M))},D=p.value;D._styleExpression&&M(D._styleExpression.expression)}return S}}let rS;var xL={get paint(){return rS=rS||new Jr({"background-color":new bn(ge.paint_background["background-color"]),"background-pattern":new of(ge.paint_background["background-pattern"]),"background-opacity":new bn(ge.paint_background["background-opacity"])})}};let sS;var wL={get paint(){return sS=sS||new Jr({"raster-opacity":new bn(ge.paint_raster["raster-opacity"]),"raster-hue-rotate":new bn(ge.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new bn(ge.paint_raster["raster-brightness-min"]),"raster-brightness-max":new bn(ge.paint_raster["raster-brightness-max"]),"raster-saturation":new bn(ge.paint_raster["raster-saturation"]),"raster-contrast":new bn(ge.paint_raster["raster-contrast"]),"raster-resampling":new bn(ge.paint_raster["raster-resampling"]),"raster-fade-duration":new bn(ge.paint_raster["raster-fade-duration"])})}};class SL extends ha{constructor(a){super(a,{}),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=a}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const TL={circle:class extends ha{constructor(c){super(c,dD)}createBucket(c){return new xy(c)}queryRadius(c){const a=c;return pf("circle-radius",this,a)+pf("circle-stroke-width",this,a)+ig(this.paint.get("circle-translate"))}queryIntersectsFeature(c,a,h,p,y,S,T,M){const D=rg(c,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),S.angle,T),j=this.paint.get("circle-radius").evaluate(a,h)+this.paint.get("circle-stroke-width").evaluate(a,h),W=this.paint.get("circle-pitch-alignment")==="map",J=W?D:function(oe,ue){return oe.map(Te=>mw(Te,ue))}(D,M),se=W?j*T:j;for(const oe of p)for(const ue of oe){const Te=W?ue:mw(ue,M);let we=se;const Ve=sg([],[ue.x,ue.y,0,1],M);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?we*=Ve[3]/S.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(we*=S.cameraToCenterDistance/Ve[3]),oD(J,Te,we))return!0}return!1}},heatmap:class extends ha{createBucket(c){return new gw(c)}constructor(c){super(c,fD),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=yw({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends ha{constructor(c){super(c,pD)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends ha{constructor(c){super(c,MD)}recalculate(c,a){super.recalculate(c,a);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new Oy(c)}queryRadius(){return ig(this.paint.get("fill-translate"))}queryIntersectsFeature(c,a,h,p,y,S,T){return cw(rg(c,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),S.angle,T),p)}isTileClipped(){return!0}},"fill-extrusion":class extends ha{constructor(c){super(c,VD)}createBucket(c){return new Fy(c)}queryRadius(){return ig(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(c,a,h,p,y,S,T,M){const D=rg(c,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),S.angle,T),j=this.paint.get("fill-extrusion-height").evaluate(a,h),W=this.paint.get("fill-extrusion-base").evaluate(a,h),J=function(oe,ue,Te,we){const Ve=[];for(const Je of oe){const Ne=[Je.x,Je.y,0,1];sg(Ne,Ne,ue),Ve.push(new w(Ne[0]/Ne[3],Ne[1]/Ne[3]))}return Ve}(D,M),se=function(oe,ue,Te,we){const Ve=[],Je=[],Ne=we[8]*ue,at=we[9]*ue,ct=we[10]*ue,Tt=we[11]*ue,cn=we[8]*Te,gn=we[9]*Te,en=we[10]*Te,Kt=we[11]*Te;for(const Ht of oe){const tn=[],Xt=[];for(const Ft of Ht){const Tn=Ft.x,yn=Ft.y,Zn=we[0]*Tn+we[4]*yn+we[12],Di=we[1]*Tn+we[5]*yn+we[13],zi=we[2]*Tn+we[6]*yn+we[14],mr=we[3]*Tn+we[7]*yn+we[15],Hs=zi+ct,Lr=mr+Tt,or=Zn+cn,Sr=Di+gn,Or=zi+en,Vr=mr+Kt,ds=new w((Zn+Ne)/Lr,(Di+at)/Lr);ds.z=Hs/Lr,tn.push(ds);const lr=new w(or/Vr,Sr/Vr);lr.z=Or/Vr,Xt.push(lr)}Ve.push(tn),Je.push(Xt)}return[Ve,Je]}(p,W,j,M);return function(oe,ue,Te){let we=1/0;cw(Te,ue)&&(we=Lw(Te,ue[0]));for(let Ve=0;Ve<ue.length;Ve++){const Je=ue[Ve],Ne=oe[Ve];for(let at=0;at<Je.length-1;at++){const ct=Je[at],Tt=[ct,Je[at+1],Ne[at+1],Ne[at],ct];lw(Te,Tt)&&(we=Math.min(we,Lw(Te,Tt)))}}return we!==1/0&&we}(se[0],se[1],J)}},line:class extends ha{constructor(c){super(c,$w),this.gradientVersion=0,ug||(ug=new XD($w.paint.properties["line-width"].specification),ug.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(c){c==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Cc,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(c,a){super.recalculate(c,a),this.paint._values["line-floorwidth"]=ug.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new $y(c)}queryRadius(c){const a=c,h=zw(pf("line-width",this,a),pf("line-gap-width",this,a)),p=pf("line-offset",this,a);return h/2+Math.abs(p)+ig(this.paint.get("line-translate"))}queryIntersectsFeature(c,a,h,p,y,S,T){const M=rg(c,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),S.angle,T),D=T/2*zw(this.paint.get("line-width").evaluate(a,h),this.paint.get("line-gap-width").evaluate(a,h)),j=this.paint.get("line-offset").evaluate(a,h);return j&&(p=function(W,J){const se=[];for(let oe=0;oe<W.length;oe++){const ue=W[oe],Te=[];for(let we=0;we<ue.length;we++){const Ve=ue[we-1],Je=ue[we],Ne=ue[we+1],at=we===0?new w(0,0):Je.sub(Ve)._unit()._perp(),ct=we===ue.length-1?new w(0,0):Ne.sub(Je)._unit()._perp(),Tt=at._add(ct)._unit(),cn=Tt.x*ct.x+Tt.y*ct.y;cn!==0&&Tt._mult(1/cn),Te.push(Tt._mult(J)._add(Je))}se.push(Te)}return se}(p,j*T)),function(W,J,se){for(let oe=0;oe<J.length;oe++){const ue=J[oe];if(W.length>=3){for(let Te=0;Te<ue.length;Te++)if(md(W,ue[Te]))return!0}if(lD(W,ue,se))return!0}return!1}(M,p,D)}isTileClipped(){return!0}},symbol:gg,background:class extends ha{constructor(c){super(c,xL)}},raster:class extends ha{constructor(c){super(c,wL)}}};class EL{constructor(a){this._callback=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Zy=63710088e-1;class Ol{constructor(a,h){if(isNaN(a)||isNaN(h))throw new Error(`Invalid LngLat object: (${a}, ${h})`);if(this.lng=+a,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ol(z(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){const h=Math.PI/180,p=this.lat*h,y=a.lat*h,S=Math.sin(p)*Math.sin(y)+Math.cos(p)*Math.cos(y)*Math.cos((a.lng-this.lng)*h);return Zy*Math.acos(Math.min(S,1))}static convert(a){if(a instanceof Ol)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new Ol(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new Ol(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const aS=2*Math.PI*Zy;function oS(c){return aS*Math.cos(c*Math.PI/180)}function lS(c){return(180+c)/360}function cS(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function uS(c,a){return c/oS(a)}function Ky(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}class vg{constructor(a,h,p=0){this.x=+a,this.y=+h,this.z=+p}static fromLngLat(a,h=0){const p=Ol.convert(a);return new vg(lS(p.lng),cS(p.lat),uS(h,p.lat))}toLngLat(){return new Ol(360*this.x-180,Ky(this.y))}toAltitude(){return this.z*oS(Ky(this.y))}meterInMercatorCoordinateUnits(){return 1/aS*(a=Ky(this.y),1/Math.cos(a*Math.PI/180));var a}}function dS(c,a,h){var p=2*Math.PI*6378137/256/Math.pow(2,h);return[c*p-2*Math.PI*6378137/2,a*p-2*Math.PI*6378137/2]}class Xy{constructor(a,h,p){if(a<0||a>25||p<0||p>=Math.pow(2,a)||h<0||h>=Math.pow(2,a))throw new Error(`x=${h}, y=${p}, z=${a} outside of bounds. 0<=x<${Math.pow(2,a)}, 0<=y<${Math.pow(2,a)} 0<=z<=25 `);this.z=a,this.x=h,this.y=p,this.key=Ef(0,a,a,h,p)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,h,p){const y=(T=this.y,M=this.z,D=dS(256*(S=this.x),256*(T=Math.pow(2,M)-T-1),M),j=dS(256*(S+1),256*(T+1),M),D[0]+","+D[1]+","+j[0]+","+j[1]);var S,T,M,D,j;const W=function(J,se,oe){let ue,Te="";for(let we=J;we>0;we--)ue=1<<we-1,Te+=(se&ue?1:0)+(oe&ue?2:0);return Te}(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(p==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,W).replace(/{bbox-epsg-3857}/g,y)}isChildOf(a){const h=this.z-a.z;return h>0&&a.x===this.x>>h&&a.y===this.y>>h}getTilePoint(a){const h=Math.pow(2,this.z);return new w((a.x*h-this.x)*$i,(a.y*h-this.y)*$i)}toString(){return`${this.z}/${this.x}/${this.y}`}}class hS{constructor(a,h){this.wrap=a,this.canonical=h,this.key=Ef(a,h.z,h.z,h.x,h.y)}}class Vs{constructor(a,h,p,y,S){if(a<p)throw new Error(`overscaledZ should be >= z; overscaledZ = ${a}; z = ${p}`);this.overscaledZ=a,this.wrap=h,this.canonical=new Xy(p,+y,+S),this.key=Ef(h,a,p,y,S)}clone(){return new Vs(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-a;return a>this.canonical.z?new Vs(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Vs(a,this.wrap,a,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(a,h){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const p=this.canonical.z-a;return a>this.canonical.z?Ef(this.wrap*+h,a,this.canonical.z,this.canonical.x,this.canonical.y):Ef(this.wrap*+h,a,a,this.canonical.x>>p,this.canonical.y>>p)}isChildOf(a){if(a.wrap!==this.wrap)return!1;const h=this.canonical.z-a.canonical.z;return a.overscaledZ===0||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>h&&a.canonical.y===this.canonical.y>>h}children(a){if(this.overscaledZ>=a)return[new Vs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,p=2*this.canonical.x,y=2*this.canonical.y;return[new Vs(h,this.wrap,h,p,y),new Vs(h,this.wrap,h,p+1,y),new Vs(h,this.wrap,h,p,y+1),new Vs(h,this.wrap,h,p+1,y+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new Vs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new Vs(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new hS(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(a){return this.canonical.getTilePoint(new vg(a.x-this.wrap,a.y))}}function Ef(c,a,h,p,y){(c*=2)<0&&(c=-1*c-1);const S=1<<h;return(S*S*c+S*y+p).toString(36)+h.toString(36)+a.toString(36)}dn("CanonicalTileID",Xy),dn("OverscaledTileID",Vs,{omit:["posMatrix"]});class fS{constructor(a,h,p){if(this.uid=a,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(p&&p!=="mapbox"&&p!=="terrarium")return void U(`"${p}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=h.height;const y=this.dim=h.height-2;this.data=new Uint32Array(h.data.buffer),this.encoding=p||"mapbox";for(let S=0;S<y;S++)this.data[this._idx(-1,S)]=this.data[this._idx(0,S)],this.data[this._idx(y,S)]=this.data[this._idx(y-1,S)],this.data[this._idx(S,-1)]=this.data[this._idx(S,0)],this.data[this._idx(S,y)]=this.data[this._idx(S,y-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(y,-1)]=this.data[this._idx(y-1,0)],this.data[this._idx(-1,y)]=this.data[this._idx(0,y-1)],this.data[this._idx(y,y)]=this.data[this._idx(y-1,y-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let S=0;S<y;S++)for(let T=0;T<y;T++){const M=this.get(S,T);M>this.max&&(this.max=M),M<this.min&&(this.min=M)}}get(a,h){const p=new Uint8Array(this.data.buffer),y=4*this._idx(a,h);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(p[y],p[y+1],p[y+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(a,h){if(a<-1||a>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(a+1)}_unpackMapbox(a,h,p){return(256*a*256+256*h+p)/10-1e4}_unpackTerrarium(a,h,p){return 256*a+h+p/256-32768}getPixels(){return new Us({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(a,h,p){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let y=h*this.dim,S=h*this.dim+this.dim,T=p*this.dim,M=p*this.dim+this.dim;switch(h){case-1:y=S-1;break;case 1:S=y+1}switch(p){case-1:T=M-1;break;case 1:M=T+1}const D=-h*this.dim,j=-p*this.dim;for(let W=T;W<M;W++)for(let J=y;J<S;J++)this.data[this._idx(J,W)]=a.data[this._idx(J+D,W+j)]}}dn("DEMData",fS);class pS{constructor(a){this._stringToNumber={},this._numberToString=[];for(let h=0;h<a.length;h++){const p=a[h];this._stringToNumber[p]=h,this._numberToString[h]=p}}encode(a){return this._stringToNumber[a]}decode(a){if(a>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${a} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[a]}}class mS{constructor(a,h,p,y,S){this.type="Feature",this._vectorTileFeature=a,a._z=h,a._x=p,a._y=y,this.properties=a.properties,this.id=S}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){const a={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&(a[h]=this[h]);return a}}class gS{constructor(a,h){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new $c($i,16,0),this.grid3D=new $c($i,16,0),this.featureIndexArray=new le,this.promoteId=h}insert(a,h,p,y,S,T){const M=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,y,S);const D=T?this.grid3D:this.grid;for(let j=0;j<h.length;j++){const W=h[j],J=[1/0,1/0,-1/0,-1/0];for(let se=0;se<W.length;se++){const oe=W[se];J[0]=Math.min(J[0],oe.x),J[1]=Math.min(J[1],oe.y),J[2]=Math.max(J[2],oe.x),J[3]=Math.max(J[3],oe.y)}J[0]<$i&&J[1]<$i&&J[2]>=0&&J[3]>=0&&D.insert(M,J[0],J[1],J[2],J[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Pl.VectorTile(new By(this.rawTileData)).layers,this.sourceLayerCoder=new pS(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(a,h,p,y){this.loadVTLayers();const S=a.params||{},T=$i/a.tileSize/a.scale,M=qh(S.filter),D=a.queryGeometry,j=a.queryPadding*T,W=_S(D),J=this.grid.query(W.minX-j,W.minY-j,W.maxX+j,W.maxY+j),se=_S(a.cameraQueryGeometry),oe=this.grid3D.query(se.minX-j,se.minY-j,se.maxX+j,se.maxY+j,(we,Ve,Je,Ne)=>function(at,ct,Tt,cn,gn){for(const Kt of at)if(ct<=Kt.x&&Tt<=Kt.y&&cn>=Kt.x&&gn>=Kt.y)return!0;const en=[new w(ct,Tt),new w(ct,gn),new w(cn,gn),new w(cn,Tt)];if(at.length>2){for(const Kt of en)if(md(at,Kt))return!0}for(let Kt=0;Kt<at.length-1;Kt++)if(uD(at[Kt],at[Kt+1],en))return!0;return!1}(a.cameraQueryGeometry,we-j,Ve-j,Je+j,Ne+j));for(const we of oe)J.push(we);J.sort(IL);const ue={};let Te;for(let we=0;we<J.length;we++){const Ve=J[we];if(Ve===Te)continue;Te=Ve;const Je=this.featureIndexArray.get(Ve);let Ne=null;this.loadMatchingFeature(ue,Je.bucketIndex,Je.sourceLayerIndex,Je.featureIndex,M,S.layers,S.availableImages,h,p,y,(at,ct,Tt)=>(Ne||(Ne=Fa(at)),ct.queryIntersectsFeature(D,at,Tt,Ne,this.z,a.transform,T,a.pixelPosMatrix)))}return ue}loadMatchingFeature(a,h,p,y,S,T,M,D,j,W,J){const se=this.bucketLayerIDs[h];if(T&&!function(we,Ve){for(let Je=0;Je<we.length;Je++)if(Ve.indexOf(we[Je])>=0)return!0;return!1}(T,se))return;const oe=this.sourceLayerCoder.decode(p),ue=this.vtLayers[oe].feature(y);if(S.needGeometry){const we=Gc(ue,!0);if(!S.filter(new Fi(this.tileID.overscaledZ),we,this.tileID.canonical))return}else if(!S.filter(new Fi(this.tileID.overscaledZ),ue))return;const Te=this.getId(ue,oe);for(let we=0;we<se.length;we++){const Ve=se[we];if(T&&T.indexOf(Ve)<0)continue;const Je=D[Ve];if(!Je)continue;let Ne={};Te&&W&&(Ne=W.getState(Je.sourceLayer||"_geojsonTileLayer",Te));const at=ee({},j[Ve]);at.paint=vS(at.paint,Je.paint,ue,Ne,M),at.layout=vS(at.layout,Je.layout,ue,Ne,M);const ct=!J||J(ue,Je,Ne);if(!ct)continue;const Tt=new mS(ue,this.z,this.x,this.y,Te);Tt.layer=at;let cn=a[Ve];cn===void 0&&(cn=a[Ve]=[]),cn.push({featureIndex:y,feature:Tt,intersectionZ:ct})}}lookupSymbolFeatures(a,h,p,y,S,T,M,D){const j={};this.loadVTLayers();const W=qh(S);for(const J of a)this.loadMatchingFeature(j,p,y,J,W,T,M,D,h);return j}hasLayer(a){for(const h of this.bucketLayerIDs)for(const p of h)if(a===p)return!0;return!1}getId(a,h){let p=a.id;return this.promoteId&&(p=a.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof p=="boolean"&&(p=Number(p))),p}}function vS(c,a,h,p,y){return ae(c,(S,T)=>{const M=a instanceof rd?a.get(T):null;return M&&M.evaluate?M.evaluate(h,p,y):M})}function _S(c){let a=1/0,h=1/0,p=-1/0,y=-1/0;for(const S of c)a=Math.min(a,S.x),h=Math.min(h,S.y),p=Math.max(p,S.x),y=Math.max(y,S.y);return{minX:a,minY:h,maxX:p,maxY:y}}function IL(c,a){return a-c}function yS(c,a,h,p,y){const S=[];for(let T=0;T<c.length;T++){const M=c[T];let D;for(let j=0;j<M.length-1;j++){let W=M[j],J=M[j+1];W.x<a&&J.x<a||(W.x<a?W=new w(a,W.y+(a-W.x)/(J.x-W.x)*(J.y-W.y))._round():J.x<a&&(J=new w(a,W.y+(a-W.x)/(J.x-W.x)*(J.y-W.y))._round()),W.y<h&&J.y<h||(W.y<h?W=new w(W.x+(h-W.y)/(J.y-W.y)*(J.x-W.x),h)._round():J.y<h&&(J=new w(W.x+(h-W.y)/(J.y-W.y)*(J.x-W.x),h)._round()),W.x>=p&&J.x>=p||(W.x>=p?W=new w(p,W.y+(p-W.x)/(J.x-W.x)*(J.y-W.y))._round():J.x>=p&&(J=new w(p,W.y+(p-W.x)/(J.x-W.x)*(J.y-W.y))._round()),W.y>=y&&J.y>=y||(W.y>=y?W=new w(W.x+(y-W.y)/(J.y-W.y)*(J.x-W.x),y)._round():J.y>=y&&(J=new w(W.x+(y-W.y)/(J.y-W.y)*(J.x-W.x),y)._round()),D&&W.equals(D[D.length-1])||(D=[W],S.push(D)),D.push(J)))))}}return S}dn("FeatureIndex",gS,{omit:["rawTileData","sourceLayerCoder"]});class Rl extends w{constructor(a,h,p,y){super(a,h),this.angle=p,y!==void 0&&(this.segment=y)}clone(){return new Rl(this.x,this.y,this.angle,this.segment)}}function bS(c,a,h,p,y){if(a.segment===void 0)return!0;let S=a,T=a.segment+1,M=0;for(;M>-h/2;){if(T--,T<0)return!1;M-=c[T].dist(S),S=c[T]}M+=c[T].dist(c[T+1]),T++;const D=[];let j=0;for(;M<h/2;){const W=c[T],J=c[T+1];if(!J)return!1;let se=c[T-1].angleTo(W)-W.angleTo(J);for(se=Math.abs((se+3*Math.PI)%(2*Math.PI)-Math.PI),D.push({distance:M,angleDelta:se}),j+=se;M-D[0].distance>p;)j-=D.shift().angleDelta;if(j>y)return!1;T++,M+=W.dist(J)}return!0}function xS(c){let a=0;for(let h=0;h<c.length-1;h++)a+=c[h].dist(c[h+1]);return a}function wS(c,a,h){return c?.6*a*h:0}function SS(c,a){return Math.max(c?c.right-c.left:0,a?a.right-a.left:0)}function CL(c,a,h,p,y,S){const T=wS(h,y,S),M=SS(h,p)*S;let D=0;const j=xS(c)/2;for(let W=0;W<c.length-1;W++){const J=c[W],se=c[W+1],oe=J.dist(se);if(D+oe>j){const ue=(j-D)/oe,Te=Xr.number(J.x,se.x,ue),we=Xr.number(J.y,se.y,ue),Ve=new Rl(Te,we,se.angleTo(J),W);return Ve._round(),!T||bS(c,Ve,M,T,a)?Ve:void 0}D+=oe}}function AL(c,a,h,p,y,S,T,M,D){const j=wS(p,S,T),W=SS(p,y),J=W*T,se=c[0].x===0||c[0].x===D||c[0].y===0||c[0].y===D;return a-J<a/4&&(a=J+a/4),TS(c,se?a/2*M%a:(W/2+2*S)*T*M%a,a,j,h,J,se,!1,D)}function TS(c,a,h,p,y,S,T,M,D){const j=S/2,W=xS(c);let J=0,se=a-h,oe=[];for(let ue=0;ue<c.length-1;ue++){const Te=c[ue],we=c[ue+1],Ve=Te.dist(we),Je=we.angleTo(Te);for(;se+h<J+Ve;){se+=h;const Ne=(se-J)/Ve,at=Xr.number(Te.x,we.x,Ne),ct=Xr.number(Te.y,we.y,Ne);if(at>=0&&at<D&&ct>=0&&ct<D&&se-j>=0&&se+j<=W){const Tt=new Rl(at,ct,Je,ue);Tt._round(),p&&!bS(c,Tt,S,p,y)||oe.push(Tt)}}J+=Ve}return M||oe.length||T||(oe=TS(c,J/2,h,p,y,S,T,!0,D)),oe}function ES(c,a,h,p){const y=[],S=c.image,T=S.pixelRatio,M=S.paddedRect.w-2,D=S.paddedRect.h-2,j=c.right-c.left,W=c.bottom-c.top,J=S.stretchX||[[0,M]],se=S.stretchY||[[0,D]],oe=(Ht,tn)=>Ht+tn[1]-tn[0],ue=J.reduce(oe,0),Te=se.reduce(oe,0),we=M-ue,Ve=D-Te;let Je=0,Ne=ue,at=0,ct=Te,Tt=0,cn=we,gn=0,en=Ve;if(S.content&&p){const Ht=S.content;Je=_g(J,0,Ht[0]),at=_g(se,0,Ht[1]),Ne=_g(J,Ht[0],Ht[2]),ct=_g(se,Ht[1],Ht[3]),Tt=Ht[0]-Je,gn=Ht[1]-at,cn=Ht[2]-Ht[0]-Ne,en=Ht[3]-Ht[1]-ct}const Kt=(Ht,tn,Xt,Ft)=>{const Tn=yg(Ht.stretch-Je,Ne,j,c.left),yn=bg(Ht.fixed-Tt,cn,Ht.stretch,ue),Zn=yg(tn.stretch-at,ct,W,c.top),Di=bg(tn.fixed-gn,en,tn.stretch,Te),zi=yg(Xt.stretch-Je,Ne,j,c.left),mr=bg(Xt.fixed-Tt,cn,Xt.stretch,ue),Hs=yg(Ft.stretch-at,ct,W,c.top),Lr=bg(Ft.fixed-gn,en,Ft.stretch,Te),or=new w(Tn,Zn),Sr=new w(zi,Zn),Or=new w(zi,Hs),Vr=new w(Tn,Hs),ds=new w(yn/T,Di/T),lr=new w(mr/T,Lr/T),Rr=a*Math.PI/180;if(Rr){const hs=Math.sin(Rr),fs=Math.cos(Rr),Xi=[fs,-hs,hs,fs];or._matMult(Xi),Sr._matMult(Xi),Vr._matMult(Xi),Or._matMult(Xi)}const Hr=Ht.stretch+Ht.fixed,es=tn.stretch+tn.fixed;return{tl:or,tr:Sr,bl:Vr,br:Or,tex:{x:S.paddedRect.x+1+Hr,y:S.paddedRect.y+1+es,w:Xt.stretch+Xt.fixed-Hr,h:Ft.stretch+Ft.fixed-es},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ds,pixelOffsetBR:lr,minFontScaleX:cn/T/j,minFontScaleY:en/T/W,isSDF:h}};if(p&&(S.stretchX||S.stretchY)){const Ht=IS(J,we,ue),tn=IS(se,Ve,Te);for(let Xt=0;Xt<Ht.length-1;Xt++){const Ft=Ht[Xt],Tn=Ht[Xt+1];for(let yn=0;yn<tn.length-1;yn++)y.push(Kt(Ft,tn[yn],Tn,tn[yn+1]))}}else y.push(Kt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:M+1},{fixed:0,stretch:D+1}));return y}function _g(c,a,h){let p=0;for(const y of c)p+=Math.max(a,Math.min(h,y[1]))-Math.max(a,Math.min(h,y[0]));return p}function IS(c,a,h){const p=[{fixed:-1,stretch:0}];for(const[y,S]of c){const T=p[p.length-1];p.push({fixed:y-T.stretch,stretch:T.stretch}),p.push({fixed:y-T.stretch,stretch:T.stretch+(S-y)})}return p.push({fixed:a+1,stretch:h}),p}function yg(c,a,h,p){return c/a*h+p}function bg(c,a,h,p){return c-a*h/p}dn("Anchor",Rl);class xg{constructor(a,h,p,y,S,T,M,D,j,W){if(this.boxStartIndex=a.length,j){let J=T.top,se=T.bottom;const oe=T.collisionPadding;oe&&(J-=oe[1],se+=oe[3]);let ue=se-J;ue>0&&(ue=Math.max(10,ue),this.circleDiameter=ue)}else{let J=T.top*M-D[0],se=T.bottom*M+D[2],oe=T.left*M-D[3],ue=T.right*M+D[1];const Te=T.collisionPadding;if(Te&&(oe-=Te[0]*M,J-=Te[1]*M,ue+=Te[2]*M,se+=Te[3]*M),W){const we=new w(oe,J),Ve=new w(ue,J),Je=new w(oe,se),Ne=new w(ue,se),at=W*Math.PI/180;we._rotate(at),Ve._rotate(at),Je._rotate(at),Ne._rotate(at),oe=Math.min(we.x,Ve.x,Je.x,Ne.x),ue=Math.max(we.x,Ve.x,Je.x,Ne.x),J=Math.min(we.y,Ve.y,Je.y,Ne.y),se=Math.max(we.y,Ve.y,Je.y,Ne.y)}a.emplaceBack(h.x,h.y,oe,J,ue,se,p,y,S)}this.boxEndIndex=a.length}}class ML{constructor(a=[],h=kL){if(this.data=a,this.length=this.data.length,this.compare=h,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(a){this.data.push(a),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const a=this.data[0],h=this.data.pop();return this.length--,this.length>0&&(this.data[0]=h,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:h,compare:p}=this,y=h[a];for(;a>0;){const S=a-1>>1,T=h[S];if(p(y,T)>=0)break;h[a]=T,a=S}h[a]=y}_down(a){const{data:h,compare:p}=this,y=this.length>>1,S=h[a];for(;a<y;){let T=1+(a<<1),M=h[T];const D=T+1;if(D<this.length&&p(h[D],M)<0&&(T=D,M=h[D]),p(M,S)>=0)break;h[a]=M,a=T}h[a]=S}}function kL(c,a){return c<a?-1:c>a?1:0}function PL(c,a=1,h=!1){let p=1/0,y=1/0,S=-1/0,T=-1/0;const M=c[0];for(let oe=0;oe<M.length;oe++){const ue=M[oe];(!oe||ue.x<p)&&(p=ue.x),(!oe||ue.y<y)&&(y=ue.y),(!oe||ue.x>S)&&(S=ue.x),(!oe||ue.y>T)&&(T=ue.y)}const D=Math.min(S-p,T-y);let j=D/2;const W=new ML([],DL);if(D===0)return new w(p,y);for(let oe=p;oe<S;oe+=D)for(let ue=y;ue<T;ue+=D)W.push(new Sd(oe+j,ue+j,j,c));let J=function(oe){let ue=0,Te=0,we=0;const Ve=oe[0];for(let Je=0,Ne=Ve.length,at=Ne-1;Je<Ne;at=Je++){const ct=Ve[Je],Tt=Ve[at],cn=ct.x*Tt.y-Tt.x*ct.y;Te+=(ct.x+Tt.x)*cn,we+=(ct.y+Tt.y)*cn,ue+=3*cn}return new Sd(Te/ue,we/ue,0,oe)}(c),se=W.length;for(;W.length;){const oe=W.pop();(oe.d>J.d||!J.d)&&(J=oe,h&&console.log("found best %d after %d probes",Math.round(1e4*oe.d)/1e4,se)),oe.max-J.d<=a||(j=oe.h/2,W.push(new Sd(oe.p.x-j,oe.p.y-j,j,c)),W.push(new Sd(oe.p.x+j,oe.p.y-j,j,c)),W.push(new Sd(oe.p.x-j,oe.p.y+j,j,c)),W.push(new Sd(oe.p.x+j,oe.p.y+j,j,c)),se+=4)}return h&&(console.log(`num probes: ${se}`),console.log(`best distance: ${J.d}`)),J.p}function DL(c,a){return a.max-c.max}function Sd(c,a,h,p){this.p=new w(c,a),this.h=h,this.d=function(y,S){let T=!1,M=1/0;for(let D=0;D<S.length;D++){const j=S[D];for(let W=0,J=j.length,se=J-1;W<J;se=W++){const oe=j[W],ue=j[se];oe.y>y.y!=ue.y>y.y&&y.x<(ue.x-oe.x)*(y.y-oe.y)/(ue.y-oe.y)+oe.x&&(T=!T),M=Math.min(M,uw(y,oe,ue))}}return(T?1:-1)*Math.sqrt(M)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}const Yy=Number.POSITIVE_INFINITY;function CS(c,a){return a[1]!==Yy?function(h,p,y){let S=0,T=0;switch(p=Math.abs(p),y=Math.abs(y),h){case"top-right":case"top-left":case"top":T=y-7;break;case"bottom-right":case"bottom-left":case"bottom":T=7-y}switch(h){case"top-right":case"bottom-right":case"right":S=-p;break;case"top-left":case"bottom-left":case"left":S=p}return[S,T]}(c,a[0],a[1]):function(h,p){let y=0,S=0;p<0&&(p=0);const T=p/Math.sqrt(2);switch(h){case"top-right":case"top-left":S=T-7;break;case"bottom-right":case"bottom-left":S=7-T;break;case"bottom":S=7-p;break;case"top":S=p-7}switch(h){case"top-right":case"bottom-right":y=-T;break;case"top-left":case"bottom-left":y=T;break;case"left":y=p;break;case"right":y=-p}return[y,S]}(c,a[0])}function Jy(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function LL(c,a,h,p,y,S,T,M,D,j,W){let J=S.textMaxSize.evaluate(a,{});J===void 0&&(J=T);const se=c.layers[0].layout,oe=se.get("icon-offset").evaluate(a,{},W),ue=MS(h.horizontal),Te=T/24,we=c.tilePixelRatio*Te,Ve=c.tilePixelRatio*J/24,Je=c.tilePixelRatio*M,Ne=c.tilePixelRatio*se.get("symbol-spacing"),at=se.get("text-padding")*c.tilePixelRatio,ct=function(Ft,Tn,yn,Zn=1){const Di=Ft.get("icon-padding").evaluate(Tn,{},yn),zi=Di&&Di.values;return[zi[0]*Zn,zi[1]*Zn,zi[2]*Zn,zi[3]*Zn]}(se,a,W,c.tilePixelRatio),Tt=se.get("text-max-angle")/180*Math.PI,cn=se.get("text-rotation-alignment")!=="viewport"&&se.get("symbol-placement")!=="point",gn=se.get("icon-rotation-alignment")==="map"&&se.get("symbol-placement")!=="point",en=se.get("symbol-placement"),Kt=Ne/2,Ht=se.get("icon-text-fit");let tn;p&&Ht!=="none"&&(c.allowVerticalPlacement&&h.vertical&&(tn=Qw(p,h.vertical,Ht,se.get("icon-text-fit-padding"),oe,Te)),ue&&(p=Qw(p,ue,Ht,se.get("icon-text-fit-padding"),oe,Te)));const Xt=(Ft,Tn)=>{Tn.x<0||Tn.x>=$i||Tn.y<0||Tn.y>=$i||function(yn,Zn,Di,zi,mr,Hs,Lr,or,Sr,Or,Vr,ds,lr,Rr,Hr,es,hs,fs,Xi,Fr,Kn,ks,$r,Gr,ma){const $a=yn.addToLineVertexArray(Zn,Di);let za,Yo,va,Gs,ps=0,Jo=0,Af=0,LS=0,a0=-1,o0=-1;const Qo={};let OS=nr(""),l0=0,c0=0;if(or._unevaluatedLayout.getValue("text-radial-offset")===void 0?[l0,c0]=or.layout.get("text-offset").evaluate(Kn,{},Gr).map(ms=>ms*Cr):(l0=or.layout.get("text-radial-offset").evaluate(Kn,{},Gr)*Cr,c0=Yy),yn.allowVerticalPlacement&&zi.vertical){const ms=or.layout.get("text-rotate").evaluate(Kn,{},Gr)+90;va=new xg(Sr,Zn,Or,Vr,ds,zi.vertical,lr,Rr,Hr,ms),Lr&&(Gs=new xg(Sr,Zn,Or,Vr,ds,Lr,hs,fs,Hr,ms))}if(mr){const ms=or.layout.get("icon-rotate").evaluate(Kn,{}),yo=or.layout.get("icon-text-fit")!=="none",Mf=ES(mr,ms,$r,yo),kf=Lr?ES(Lr,ms,$r,yo):void 0;Yo=new xg(Sr,Zn,Or,Vr,ds,mr,hs,fs,!1,ms),ps=4*Mf.length;const $S=yn.iconSizeData;let qc=null;$S.kind==="source"?(qc=[Xo*or.layout.get("icon-size").evaluate(Kn,{})],qc[0]>Ll&&U(`${yn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):$S.kind==="composite"&&(qc=[Xo*ks.compositeIconSizes[0].evaluate(Kn,{},Gr),Xo*ks.compositeIconSizes[1].evaluate(Kn,{},Gr)],(qc[0]>Ll||qc[1]>Ll)&&U(`${yn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),yn.addSymbols(yn.icon,Mf,qc,Fr,Xi,Kn,l.WritingMode.none,Zn,$a.lineStartIndex,$a.lineLength,-1,Gr),a0=yn.icon.placedSymbolArray.length-1,kf&&(Jo=4*kf.length,yn.addSymbols(yn.icon,kf,qc,Fr,Xi,Kn,l.WritingMode.vertical,Zn,$a.lineStartIndex,$a.lineLength,-1,Gr),o0=yn.icon.placedSymbolArray.length-1)}const RS=Object.keys(zi.horizontal);for(const ms of RS){const yo=zi.horizontal[ms];if(!za){OS=nr(yo.text);const kf=or.layout.get("text-rotate").evaluate(Kn,{},Gr);za=new xg(Sr,Zn,Or,Vr,ds,yo,lr,Rr,Hr,kf)}const Mf=yo.positionedLines.length===1;if(Af+=AS(yn,Zn,yo,Hs,or,Hr,Kn,es,$a,zi.vertical?l.WritingMode.horizontal:l.WritingMode.horizontalOnly,Mf?RS:[ms],Qo,a0,ks,Gr),Mf)break}zi.vertical&&(LS+=AS(yn,Zn,zi.vertical,Hs,or,Hr,Kn,es,$a,l.WritingMode.vertical,["vertical"],Qo,o0,ks,Gr));const FL=za?za.boxStartIndex:yn.collisionBoxArray.length,$L=za?za.boxEndIndex:yn.collisionBoxArray.length,zL=va?va.boxStartIndex:yn.collisionBoxArray.length,BL=va?va.boxEndIndex:yn.collisionBoxArray.length,NL=Yo?Yo.boxStartIndex:yn.collisionBoxArray.length,jL=Yo?Yo.boxEndIndex:yn.collisionBoxArray.length,UL=Gs?Gs.boxStartIndex:yn.collisionBoxArray.length,VL=Gs?Gs.boxEndIndex:yn.collisionBoxArray.length;let Ba=-1;const Sg=(ms,yo)=>ms&&ms.circleDiameter?Math.max(ms.circleDiameter,yo):yo;Ba=Sg(za,Ba),Ba=Sg(va,Ba),Ba=Sg(Yo,Ba),Ba=Sg(Gs,Ba);const FS=Ba>-1?1:0;FS&&(Ba*=ma/Cr),yn.glyphOffsetArray.length>=wd.MAX_GLYPHS&&U("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Kn.sortKey!==void 0&&yn.addToSortKeyRanges(yn.symbolInstances.length,Kn.sortKey),yn.symbolInstances.emplaceBack(Zn.x,Zn.y,Qo.right>=0?Qo.right:-1,Qo.center>=0?Qo.center:-1,Qo.left>=0?Qo.left:-1,Qo.vertical||-1,a0,o0,OS,FL,$L,zL,BL,NL,jL,UL,VL,Or,Af,LS,ps,Jo,FS,0,lr,l0,c0,Ba)}(c,Tn,Ft,h,p,y,tn,c.layers[0],c.collisionBoxArray,a.index,a.sourceLayerIndex,c.index,we,[at,at,at,at],cn,D,Je,ct,gn,oe,a,S,j,W,T)};if(en==="line")for(const Ft of yS(a.geometry,0,0,$i,$i)){const Tn=AL(Ft,Ne,Tt,h.vertical||ue,p,24,Ve,c.overscaling,$i);for(const yn of Tn)ue&&OL(c,ue.text,Kt,yn)||Xt(Ft,yn)}else if(en==="line-center"){for(const Ft of a.geometry)if(Ft.length>1){const Tn=CL(Ft,Tt,h.vertical||ue,p,24,Ve);Tn&&Xt(Ft,Tn)}}else if(a.type==="Polygon")for(const Ft of Py(a.geometry,0)){const Tn=PL(Ft,16);Xt(Ft[0],new Rl(Tn.x,Tn.y,0))}else if(a.type==="LineString")for(const Ft of a.geometry)Xt(Ft,new Rl(Ft[0].x,Ft[0].y,0));else if(a.type==="Point")for(const Ft of a.geometry)for(const Tn of Ft)Xt([Tn],new Rl(Tn.x,Tn.y,0))}function AS(c,a,h,p,y,S,T,M,D,j,W,J,se,oe,ue){const Te=function(Je,Ne,at,ct,Tt,cn,gn,en){const Kt=ct.layout.get("text-rotate").evaluate(cn,{})*Math.PI/180,Ht=[];for(const tn of Ne.positionedLines)for(const Xt of tn.positionedGlyphs){if(!Xt.rect)continue;const Ft=Xt.rect||{};let Tn=4,yn=!0,Zn=1,Di=0;const zi=(Tt||en)&&Xt.vertical,mr=Xt.metrics.advance*Xt.scale/2;if(en&&Ne.verticalizable&&(Di=tn.lineOffset/2-(Xt.imageName?-(Cr-Xt.metrics.width*Xt.scale)/2:(Xt.scale-1)*Cr)),Xt.imageName){const Xi=gn[Xt.imageName];yn=Xi.sdf,Zn=Xi.pixelRatio,Tn=1/Zn}const Hs=Tt?[Xt.x+mr,Xt.y]:[0,0];let Lr=Tt?[0,0]:[Xt.x+mr+at[0],Xt.y+at[1]-Di],or=[0,0];zi&&(or=Lr,Lr=[0,0]);const Sr=(Xt.metrics.left-Tn)*Xt.scale-mr+Lr[0],Or=(-Xt.metrics.top-Tn)*Xt.scale+Lr[1],Vr=Sr+Ft.w*Xt.scale/Zn,ds=Or+Ft.h*Xt.scale/Zn,lr=new w(Sr,Or),Rr=new w(Vr,Or),Hr=new w(Sr,ds),es=new w(Vr,ds);if(zi){const Xi=new w(-mr,mr-hg),Fr=-Math.PI/2,Kn=12-mr,ks=new w(22-Kn,-(Xt.imageName?Kn:0)),$r=new w(...or);lr._rotateAround(Fr,Xi)._add(ks)._add($r),Rr._rotateAround(Fr,Xi)._add(ks)._add($r),Hr._rotateAround(Fr,Xi)._add(ks)._add($r),es._rotateAround(Fr,Xi)._add(ks)._add($r)}if(Kt){const Xi=Math.sin(Kt),Fr=Math.cos(Kt),Kn=[Fr,-Xi,Xi,Fr];lr._matMult(Kn),Rr._matMult(Kn),Hr._matMult(Kn),es._matMult(Kn)}const hs=new w(0,0),fs=new w(0,0);Ht.push({tl:lr,tr:Rr,bl:Hr,br:es,tex:Ft,writingMode:Ne.writingMode,glyphOffset:Hs,sectionIndex:Xt.sectionIndex,isSDF:yn,pixelOffsetTL:hs,pixelOffsetBR:fs,minFontScaleX:0,minFontScaleY:0})}return Ht}(0,h,M,y,S,T,p,c.allowVerticalPlacement),we=c.textSizeData;let Ve=null;we.kind==="source"?(Ve=[Xo*y.layout.get("text-size").evaluate(T,{})],Ve[0]>Ll&&U(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):we.kind==="composite"&&(Ve=[Xo*oe.compositeTextSizes[0].evaluate(T,{},ue),Xo*oe.compositeTextSizes[1].evaluate(T,{},ue)],(Ve[0]>Ll||Ve[1]>Ll)&&U(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),c.addSymbols(c.text,Te,Ve,M,S,T,j,a,D.lineStartIndex,D.lineLength,se,ue);for(const Je of W)J[Je]=c.text.placedSymbolArray.length-1;return 4*Te.length}function MS(c){for(const a in c)return c[a];return null}function OL(c,a,h,p){const y=c.compareText;if(a in y){const S=y[a];for(let T=S.length-1;T>=0;T--)if(p.dist(S[T])<h)return!0}else y[a]=[];return y[a].push(p),!1}const kS=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Qy{static from(a){if(!(a instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,p]=new Uint8Array(a,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");const y=p>>4;if(y!==1)throw new Error(`Got v${y} data when expected v1.`);const S=kS[15&p];if(!S)throw new Error("Unrecognized array type.");const[T]=new Uint16Array(a,2,1),[M]=new Uint32Array(a,4,1);return new Qy(M,T,S,a)}constructor(a,h=64,p=Float64Array,y){if(isNaN(a)||a<0)throw new Error(`Unpexpected numItems value: ${a}.`);this.numItems=+a,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=p,this.IndexArrayType=a<65536?Uint16Array:Uint32Array;const S=kS.indexOf(this.ArrayType),T=2*a*this.ArrayType.BYTES_PER_ELEMENT,M=a*this.IndexArrayType.BYTES_PER_ELEMENT,D=(8-M%8)%8;if(S<0)throw new Error(`Unexpected typed array class: ${p}.`);y&&y instanceof ArrayBuffer?(this.data=y,this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+M+D,2*a),this._pos=2*a,this._finished=!0):(this.data=new ArrayBuffer(8+T+M+D),this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+M+D,2*a),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+S]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=a)}add(a,h){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=a,this.coords[this._pos++]=h,p}finish(){const a=this._pos>>1;if(a!==this.numItems)throw new Error(`Added ${a} items when expected ${this.numItems}.`);return e0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(a,h,p,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:S,coords:T,nodeSize:M}=this,D=[0,S.length-1,0],j=[];for(;D.length;){const W=D.pop()||0,J=D.pop()||0,se=D.pop()||0;if(J-se<=M){for(let we=se;we<=J;we++){const Ve=T[2*we],Je=T[2*we+1];Ve>=a&&Ve<=p&&Je>=h&&Je<=y&&j.push(S[we])}continue}const oe=se+J>>1,ue=T[2*oe],Te=T[2*oe+1];ue>=a&&ue<=p&&Te>=h&&Te<=y&&j.push(S[oe]),(W===0?a<=ue:h<=Te)&&(D.push(se),D.push(oe-1),D.push(1-W)),(W===0?p>=ue:y>=Te)&&(D.push(oe+1),D.push(J),D.push(1-W))}return j}within(a,h,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:S,nodeSize:T}=this,M=[0,y.length-1,0],D=[],j=p*p;for(;M.length;){const W=M.pop()||0,J=M.pop()||0,se=M.pop()||0;if(J-se<=T){for(let we=se;we<=J;we++)DS(S[2*we],S[2*we+1],a,h)<=j&&D.push(y[we]);continue}const oe=se+J>>1,ue=S[2*oe],Te=S[2*oe+1];DS(ue,Te,a,h)<=j&&D.push(y[oe]),(W===0?a-p<=ue:h-p<=Te)&&(M.push(se),M.push(oe-1),M.push(1-W)),(W===0?a+p>=ue:h+p>=Te)&&(M.push(oe+1),M.push(J),M.push(1-W))}return D}}function e0(c,a,h,p,y,S){if(y-p<=h)return;const T=p+y>>1;PS(c,a,T,p,y,S),e0(c,a,h,p,T-1,1-S),e0(c,a,h,T+1,y,1-S)}function PS(c,a,h,p,y,S){for(;y>p;){if(y-p>600){const j=y-p+1,W=h-p+1,J=Math.log(j),se=.5*Math.exp(2*J/3),oe=.5*Math.sqrt(J*se*(j-se)/j)*(W-j/2<0?-1:1);PS(c,a,h,Math.max(p,Math.floor(h-W*se/j+oe)),Math.min(y,Math.floor(h+(j-W)*se/j+oe)),S)}const T=a[2*h+S];let M=p,D=y;for(If(c,a,p,h),a[2*y+S]>T&&If(c,a,p,y);M<D;){for(If(c,a,M,D),M++,D--;a[2*M+S]<T;)M++;for(;a[2*D+S]>T;)D--}a[2*p+S]===T?If(c,a,p,D):(D++,If(c,a,D,y)),D<=h&&(p=D+1),h<=D&&(y=D-1)}}function If(c,a,h,p){t0(c,h,p),t0(a,2*h,2*p),t0(a,2*h+1,2*p+1)}function t0(c,a,h){const p=c[a];c[a]=c[h],c[h]=p}function DS(c,a,h,p){const y=c-h,S=a-p;return y*y+S*S}var n0;l.PerformanceMarkers=void 0,(n0=l.PerformanceMarkers||(l.PerformanceMarkers={})).create="create",n0.load="load",n0.fullLoad="fullLoad";let wg=null,Cf=[];const i0=1e3/60,r0="loadTime",s0="fullLoadTime",RL={mark(c){performance.mark(c)},frame(c){const a=c;wg!=null&&Cf.push(a-wg),wg=a},clearMetrics(){wg=null,Cf=[],performance.clearMeasures(r0),performance.clearMeasures(s0);for(const c in l.PerformanceMarkers)performance.clearMarks(l.PerformanceMarkers[c])},getPerformanceMetrics(){performance.measure(r0,l.PerformanceMarkers.create,l.PerformanceMarkers.load),performance.measure(s0,l.PerformanceMarkers.create,l.PerformanceMarkers.fullLoad);const c=performance.getEntriesByName(r0)[0].duration,a=performance.getEntriesByName(s0)[0].duration,h=Cf.length,p=1/(Cf.reduce((S,T)=>S+T,0)/h/1e3),y=Cf.filter(S=>S>i0).reduce((S,T)=>S+(T-i0)/i0,0);return{loadTime:c,fullLoadTime:a,fps:p,percentDroppedFrames:y/(h+y)*100,totalFrames:h}}};l.AJAXError=nt,l.ARRAY_TYPE=gd,l.Actor=class{constructor(c,a,h){this.target=c,this.parent=a,this.mapId=h,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Q(["receive","process"],this),this.invoker=new EL(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=X()?c:window}send(c,a,h,p,y=!1){const S=Math.round(1e18*Math.random()).toString(36).substring(0,10);h&&(this.callbacks[S]=h);const T=Ee(this.globalScope)?void 0:[];return this.target.postMessage({id:S,type:c,hasCallback:!!h,targetMapId:p,mustQueue:y,sourceMapId:this.mapId,data:zc(a,T)},T),{cancel:()=>{h&&delete this.callbacks[S],this.target.postMessage({id:S,type:"<cancel>",targetMapId:p,sourceMapId:this.mapId})}}}receive(c){const a=c.data,h=a.id;if(h&&(!a.targetMapId||this.mapId===a.targetMapId))if(a.type==="<cancel>"){delete this.tasks[h];const p=this.cancelCallbacks[h];delete this.cancelCallbacks[h],p&&p()}else X()||a.mustQueue?(this.tasks[h]=a,this.taskQueue.push(h),this.invoker.trigger()):this.processTask(h,a)}process(){if(!this.taskQueue.length)return;const c=this.taskQueue.shift(),a=this.tasks[c];delete this.tasks[c],this.taskQueue.length&&this.invoker.trigger(),a&&this.processTask(c,a)}processTask(c,a){if(a.type==="<response>"){const h=this.callbacks[c];delete this.callbacks[c],h&&(a.error?h(La(a.error)):h(null,La(a.data)))}else{let h=!1;const p=Ee(this.globalScope)?void 0:[],y=a.hasCallback?(M,D)=>{h=!0,delete this.cancelCallbacks[c],this.target.postMessage({id:c,type:"<response>",sourceMapId:this.mapId,error:M?zc(M):null,data:zc(D,p)},p)}:M=>{h=!0};let S=null;const T=La(a.data);if(this.parent[a.type])S=this.parent[a.type](a.sourceMapId,T,y);else if(this.parent.getWorkerSource){const M=a.type.split(".");S=this.parent.getWorkerSource(a.sourceMapId,M[0],T.source)[M[1]](T,y)}else y(new Error(`Could not find function ${a.type}`));!h&&S&&S.cancel&&(this.cancelCallbacks[c]=S.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.AlphaImage=gf,l.CanonicalTileID=Xy,l.CollisionBoxArray=b,l.CollisionCircleLayoutArray=class extends cd{},l.Color=yt,l.DEMData=fS,l.DataConstantProperty=bn,l.DictionaryCoder=pS,l.EXTENT=$i,l.ErrorEvent=_e,l.EvaluationParameters=Fi,l.Event=qt,l.Evented=ke,l.FeatureIndex=gS,l.FillBucket=Oy,l.FillExtrusionBucket=Fy,l.GeoJSONFeature=mS,l.ImageAtlas=Zw,l.ImagePosition=Ny,l.KDBush=Qy,l.LineBucket=$y,l.LineStripIndexArray=class extends o{},l.LngLat=Ol,l.MercatorCoordinate=vg,l.ONE_EM=Cr,l.OverscaledTileID=Vs,l.PerformanceUtils=RL,l.Point=w,l.Pos3dArray=class extends ad{},l.PosArray=Se,l.Properties=Jr,l.Protobuf=By,l.QuadTriangleArray=class extends ud{},l.RGBAImage=Us,l.RasterBoundsArray=class extends cf{},l.RequestPerformance=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},l.SegmentVector=Zt,l.SymbolBucket=wd,l.Transitionable=Jm,l.TriangleIndexArray=Lt,l.Uniform1f=pa,l.Uniform1i=class extends Ur{constructor(c,a){super(c,a),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},l.Uniform2f=class extends Ur{constructor(c,a){super(c,a),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},l.Uniform3f=class extends Ur{constructor(c,a){super(c,a),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},l.Uniform4f=Vc,l.UniformColor=Dr,l.UniformMatrix4f=class extends Ur{constructor(c,a){super(c,a),this.current=xr}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let a=1;a<16;a++)if(c[a]!==this.current[a]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},l.UnwrappedTileID=hS,l.ValidationError=vt,l.ZoomHistory=Wm,l.addDynamicAttributes=Hy,l.arrayBufferToImage=function(c,a){const h=new Image;h.onload=()=>{a(null,h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=Xe})},h.onerror=()=>a(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const p=new Blob([new Uint8Array(c)],{type:"image/png"});h.src=c.byteLength?URL.createObjectURL(p):Xe},l.arrayBufferToImageBitmap=function(c,a){const h=new Blob([new Uint8Array(c)],{type:"image/png"});createImageBitmap(h).then(p=>{a(null,p)}).catch(p=>{a(new Error(`Could not load image because of ${p.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},l.asyncAll=function(c,a,h){if(!c.length)return h(null,[]);let p=c.length;const y=new Array(c.length);let S=null;c.forEach((T,M)=>{a(T,(D,j)=>{D&&(S=D),y[M]=j,--p==0&&h(S,y)})})},l.bezier=L,l.bindAll=Q,l.clamp=F,l.clipLine=yS,l.clone=function(c){var a=new gd(16);return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15],a},l.clone$1=te,l.collisionCircleLayout=eL,l.config=It,l.copy=function(c,a){return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c},l.create=function(){var c=new gd(16);return gd!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},l.createExpression=Bi,l.createFilter=qh,l.createLayout=ar,l.createStyleLayer=function(c){return c.type==="custom"?new SL(c):new TL[c.type](c)},l.deepEqual=function c(a,h){if(Array.isArray(a)){if(!Array.isArray(h)||a.length!==h.length)return!1;for(let p=0;p<a.length;p++)if(!c(a[p],h[p]))return!1;return!0}if(typeof a=="object"&&a!==null&&h!==null){if(typeof h!="object"||Object.keys(a).length!==Object.keys(h).length)return!1;for(const p in a)if(!c(a[p],h[p]))return!1;return!0}return a===h},l.derefLayers=function(c){c=c.slice();const a=Object.create(null);for(let h=0;h<c.length;h++)a[c[h].id]=c[h];for(let h=0;h<c.length;h++)"ref"in c[h]&&(c[h]=q(c[h],a[c[h].ref]));return c},l.diffStyles=function(c,a){if(!c)return[{command:Pe.setStyle,args:[a]}];let h=[];try{if(!fe(c.version,a.version))return[{command:Pe.setStyle,args:[a]}];fe(c.center,a.center)||h.push({command:Pe.setCenter,args:[a.center]}),fe(c.zoom,a.zoom)||h.push({command:Pe.setZoom,args:[a.zoom]}),fe(c.bearing,a.bearing)||h.push({command:Pe.setBearing,args:[a.bearing]}),fe(c.pitch,a.pitch)||h.push({command:Pe.setPitch,args:[a.pitch]}),fe(c.sprite,a.sprite)||h.push({command:Pe.setSprite,args:[a.sprite]}),fe(c.glyphs,a.glyphs)||h.push({command:Pe.setGlyphs,args:[a.glyphs]}),fe(c.transition,a.transition)||h.push({command:Pe.setTransition,args:[a.transition]}),fe(c.light,a.light)||h.push({command:Pe.setLight,args:[a.light]});const p={},y=[];(function(T,M,D,j){let W;for(W in M=M||{},T=T||{})Object.prototype.hasOwnProperty.call(T,W)&&(Object.prototype.hasOwnProperty.call(M,W)||pt(W,D,j));for(W in M)Object.prototype.hasOwnProperty.call(M,W)&&(Object.prototype.hasOwnProperty.call(T,W)?fe(T[W],M[W])||(T[W].type==="geojson"&&M[W].type==="geojson"&&zt(T,M,W)?D.push({command:Pe.setGeoJSONSourceData,args:[W,M[W].data]}):ht(W,M,D,j)):We(W,M,D))})(c.sources,a.sources,y,p);const S=[];c.layers&&c.layers.forEach(T=>{p[T.source]?h.push({command:Pe.removeLayer,args:[T.id]}):S.push(T)}),h=h.concat(y),function(T,M,D){M=M||[];const j=(T=T||[]).map(Gt),W=M.map(Gt),J=T.reduce(ln,{}),se=M.reduce(ln,{}),oe=j.slice(),ue=Object.create(null);let Te,we,Ve,Je,Ne,at,ct;for(Te=0,we=0;Te<j.length;Te++)Ve=j[Te],Object.prototype.hasOwnProperty.call(se,Ve)?we++:(D.push({command:Pe.removeLayer,args:[Ve]}),oe.splice(oe.indexOf(Ve,we),1));for(Te=0,we=0;Te<W.length;Te++)Ve=W[W.length-1-Te],oe[oe.length-1-Te]!==Ve&&(Object.prototype.hasOwnProperty.call(J,Ve)?(D.push({command:Pe.removeLayer,args:[Ve]}),oe.splice(oe.lastIndexOf(Ve,oe.length-we),1)):we++,at=oe[oe.length-Te],D.push({command:Pe.addLayer,args:[se[Ve],at]}),oe.splice(oe.length-Te,0,Ve),ue[Ve]=!0);for(Te=0;Te<W.length;Te++)if(Ve=W[Te],Je=J[Ve],Ne=se[Ve],!ue[Ve]&&!fe(Je,Ne))if(fe(Je.source,Ne.source)&&fe(Je["source-layer"],Ne["source-layer"])&&fe(Je.type,Ne.type)){for(ct in Dt(Je.layout,Ne.layout,D,Ve,null,Pe.setLayoutProperty),Dt(Je.paint,Ne.paint,D,Ve,null,Pe.setPaintProperty),fe(Je.filter,Ne.filter)||D.push({command:Pe.setFilter,args:[Ve,Ne.filter]}),fe(Je.minzoom,Ne.minzoom)&&fe(Je.maxzoom,Ne.maxzoom)||D.push({command:Pe.setLayerZoomRange,args:[Ve,Ne.minzoom,Ne.maxzoom]}),Je)Object.prototype.hasOwnProperty.call(Je,ct)&&ct!=="layout"&&ct!=="paint"&&ct!=="filter"&&ct!=="metadata"&&ct!=="minzoom"&&ct!=="maxzoom"&&(ct.indexOf("paint.")===0?Dt(Je[ct],Ne[ct],D,Ve,ct.slice(6),Pe.setPaintProperty):fe(Je[ct],Ne[ct])||D.push({command:Pe.setLayerProperty,args:[Ve,ct,Ne[ct]]}));for(ct in Ne)Object.prototype.hasOwnProperty.call(Ne,ct)&&!Object.prototype.hasOwnProperty.call(Je,ct)&&ct!=="layout"&&ct!=="paint"&&ct!=="filter"&&ct!=="metadata"&&ct!=="minzoom"&&ct!=="maxzoom"&&(ct.indexOf("paint.")===0?Dt(Je[ct],Ne[ct],D,Ve,ct.slice(6),Pe.setPaintProperty):fe(Je[ct],Ne[ct])||D.push({command:Pe.setLayerProperty,args:[Ve,ct,Ne[ct]]}))}else D.push({command:Pe.removeLayer,args:[Ve]}),at=oe[oe.lastIndexOf(Ve)+1],D.push({command:Pe.addLayer,args:[Ne,at]})}(S,a.layers,h)}catch(p){console.warn("Unable to compute style diff:",p),h=[{command:Pe.setStyle,args:[a]}]}return h},l.dot=function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]*a[3]},l.earthRadius=Zy,l.ease=$,l.emitValidationErrors=Al,l.emptyStyle=function(){const c={},a=ge.$version;for(const h in ge.$root){const p=ge.$root[h];if(p.required){let y=null;y=h==="version"?a:p.type==="array"?[]:{},y!=null&&(c[h]=y)}}return c},l.equals=function(c,a){var h=c[0],p=c[1],y=c[2],S=c[3],T=c[4],M=c[5],D=c[6],j=c[7],W=c[8],J=c[9],se=c[10],oe=c[11],ue=c[12],Te=c[13],we=c[14],Ve=c[15],Je=a[0],Ne=a[1],at=a[2],ct=a[3],Tt=a[4],cn=a[5],gn=a[6],en=a[7],Kt=a[8],Ht=a[9],tn=a[10],Xt=a[11],Ft=a[12],Tn=a[13],yn=a[14],Zn=a[15];return Math.abs(h-Je)<=Qr*Math.max(1,Math.abs(h),Math.abs(Je))&&Math.abs(p-Ne)<=Qr*Math.max(1,Math.abs(p),Math.abs(Ne))&&Math.abs(y-at)<=Qr*Math.max(1,Math.abs(y),Math.abs(at))&&Math.abs(S-ct)<=Qr*Math.max(1,Math.abs(S),Math.abs(ct))&&Math.abs(T-Tt)<=Qr*Math.max(1,Math.abs(T),Math.abs(Tt))&&Math.abs(M-cn)<=Qr*Math.max(1,Math.abs(M),Math.abs(cn))&&Math.abs(D-gn)<=Qr*Math.max(1,Math.abs(D),Math.abs(gn))&&Math.abs(j-en)<=Qr*Math.max(1,Math.abs(j),Math.abs(en))&&Math.abs(W-Kt)<=Qr*Math.max(1,Math.abs(W),Math.abs(Kt))&&Math.abs(J-Ht)<=Qr*Math.max(1,Math.abs(J),Math.abs(Ht))&&Math.abs(se-tn)<=Qr*Math.max(1,Math.abs(se),Math.abs(tn))&&Math.abs(oe-Xt)<=Qr*Math.max(1,Math.abs(oe),Math.abs(Xt))&&Math.abs(ue-Ft)<=Qr*Math.max(1,Math.abs(ue),Math.abs(Ft))&&Math.abs(Te-Tn)<=Qr*Math.max(1,Math.abs(Te),Math.abs(Tn))&&Math.abs(we-yn)<=Qr*Math.max(1,Math.abs(we),Math.abs(yn))&&Math.abs(Ve-Zn)<=Qr*Math.max(1,Math.abs(Ve),Math.abs(Zn))},l.evaluateSizeForFeature=function(c,{uSize:a,uSizeT:h},{lowerSize:p,upperSize:y}){return c.kind==="source"?p/Xo:c.kind==="composite"?Xr.number(p/Xo,y/Xo,h):a},l.evaluateSizeForZoom=function(c,a){let h=0,p=0;if(c.kind==="constant")p=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:y,minZoom:S,maxZoom:T}=c,M=y?F(ls.interpolationFactor(y,a,S,T),0,1):0;c.kind==="camera"?p=Xr.number(c.minSize,c.maxSize,M):h=M}return{uSizeT:h,uSize:p}},l.evaluateVariableOffset=CS,l.evented=nd,l.exported=$t,l.extend=ee,l.filterObject=be,l.findLineIntersection=function(c,a,h,p){const y=a.y-c.y,S=a.x-c.x,T=p.y-h.y,M=p.x-h.x,D=T*S-M*y;if(D===0)return null;const j=(M*(c.y-h.y)-T*(c.x-h.x))/D;return new w(c.x+j*S,c.y+j*y)},l.fromScaling=function(c,a){return c[0]=a[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=a[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=a[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},l.getAnchorAlignment=Uy,l.getAnchorJustification=Jy,l.getArrayBuffer=ut,l.getDefaultExportFromCjs=m,l.getJSON=function(c,a){return Ke(ee(c,{type:"json"}),a)},l.getOverlapMode=Vy,l.getProtocolAction=dt,l.getRTLTextPluginStatus=rf,l.getReferrer=et,l.getVideo=function(c,a){const h=window.document.createElement("video");h.muted=!0,h.onloadstart=function(){a(null,h)};for(let p=0;p<c.length;p++){const y=window.document.createElement("source");Ot(c[p])||(h.crossOrigin="Anonymous"),y.src=c[p],h.appendChild(y)}return{cancel:()=>{}}},l.groupByLayout=function(c,a){const h={};for(let y=0;y<c.length;y++){const S=a&&a[c[y].id]||my(c[y]);a&&(a[c[y].id]=S);let T=h[S];T||(T=h[S]=[]),T.push(c[y])}const p=[];for(const y in h)p.push(h[y]);return p},l.identity=Ty,l.interpolate=Xr,l.invert=function(c,a){var h=a[0],p=a[1],y=a[2],S=a[3],T=a[4],M=a[5],D=a[6],j=a[7],W=a[8],J=a[9],se=a[10],oe=a[11],ue=a[12],Te=a[13],we=a[14],Ve=a[15],Je=h*M-p*T,Ne=h*D-y*T,at=h*j-S*T,ct=p*D-y*M,Tt=p*j-S*M,cn=y*j-S*D,gn=W*Te-J*ue,en=W*we-se*ue,Kt=W*Ve-oe*ue,Ht=J*we-se*Te,tn=J*Ve-oe*Te,Xt=se*Ve-oe*we,Ft=Je*Xt-Ne*tn+at*Ht+ct*Kt-Tt*en+cn*gn;return Ft?(c[0]=(M*Xt-D*tn+j*Ht)*(Ft=1/Ft),c[1]=(y*tn-p*Xt-S*Ht)*Ft,c[2]=(Te*cn-we*Tt+Ve*ct)*Ft,c[3]=(se*Tt-J*cn-oe*ct)*Ft,c[4]=(D*Kt-T*Xt-j*en)*Ft,c[5]=(h*Xt-y*Kt+S*en)*Ft,c[6]=(we*at-ue*cn-Ve*Ne)*Ft,c[7]=(W*cn-se*at+oe*Ne)*Ft,c[8]=(T*tn-M*Kt+j*gn)*Ft,c[9]=(p*Kt-h*tn-S*gn)*Ft,c[10]=(ue*Tt-Te*at+Ve*Je)*Ft,c[11]=(J*at-W*Tt-oe*Je)*Ft,c[12]=(M*en-T*Ht-D*gn)*Ft,c[13]=(h*Ht-p*en+y*gn)*Ft,c[14]=(Te*Ne-ue*ct-we*Je)*Ft,c[15]=(W*ct-J*Ne+se*Je)*Ft,c):null},l.isImageBitmap=Ie,l.isSafari=Ee,l.isWorker=X,l.keysDifference=function(c,a){const h=[];for(const p in c)p in a||h.push(p);return h},l.lazyLoadRTLTextPlugin=function(){Ms.isLoading()||Ms.isLoaded()||rf()!=="deferred"||Ym()},l.makeRequest=Ke,l.mapObject=ae,l.mercatorXfromLng=lS,l.mercatorYfromLat=cS,l.mercatorZfromAltitude=uS,l.mul=hD,l.mul$1=function(c,a,h){return c[0]=a[0]*h[0],c[1]=a[1]*h[1],c[2]=a[2]*h[2],c[3]=a[3]*h[3],c},l.multiply=pw,l.nextPowerOfTwo=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},l.operations=Pe,l.ortho=function(c,a,h,p,y,S,T){var M=1/(a-h),D=1/(p-y),j=1/(S-T);return c[0]=-2*M,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*D,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*j,c[11]=0,c[12]=(a+h)*M,c[13]=(y+p)*D,c[14]=(T+S)*j,c[15]=1,c},l.parseCacheControl=function(c){const a={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,p,y,S)=>{const T=y||S;return a[p]=!T||T.toLowerCase(),""}),a["max-age"]){const h=parseInt(a["max-age"],10);isNaN(h)?delete a["max-age"]:a["max-age"]=h}return a},l.parseGlyphPbf=function(c){return new By(c).readFields(dL,[])},l.pbf=Nw,l.performSymbolLayout=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=$i/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const a=c.bucket.layers[0].layout,h=c.bucket.layers[0]._unevaluatedLayout._values,p={layoutIconSize:h["icon-size"].possiblyEvaluate(new Fi(c.bucket.zoom+1),c.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new Fi(c.bucket.zoom+1),c.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new Fi(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:D,maxZoom:j}=c.bucket.textSizeData;p.compositeTextSizes=[h["text-size"].possiblyEvaluate(new Fi(D),c.canonical),h["text-size"].possiblyEvaluate(new Fi(j),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:D,maxZoom:j}=c.bucket.iconSizeData;p.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new Fi(D),c.canonical),h["icon-size"].possiblyEvaluate(new Fi(j),c.canonical)]}const y=a.get("text-line-height")*Cr,S=a.get("text-rotation-alignment")!=="viewport"&&a.get("symbol-placement")!=="point",T=a.get("text-keep-upright"),M=a.get("text-size");for(const D of c.bucket.features){const j=a.get("text-font").evaluate(D,{},c.canonical).join(","),W=M.evaluate(D,{},c.canonical),J=p.layoutTextSize.evaluate(D,{},c.canonical),se=p.layoutIconSize.evaluate(D,{},c.canonical),oe={horizontal:{},vertical:void 0},ue=D.text;let Te,we=[0,0];if(ue){const Ne=ue.toString(),at=a.get("text-letter-spacing").evaluate(D,{},c.canonical)*Cr,ct=Qh(Ne)?at:0,Tt=a.get("text-anchor").evaluate(D,{},c.canonical),cn=a.get("text-variable-anchor");if(!cn){const tn=a.get("text-radial-offset").evaluate(D,{},c.canonical);we=tn?CS(Tt,[tn*Cr,Yy]):a.get("text-offset").evaluate(D,{},c.canonical).map(Xt=>Xt*Cr)}let gn=S?"center":a.get("text-justify").evaluate(D,{},c.canonical);const en=a.get("symbol-placement"),Kt=en==="point"?a.get("text-max-width").evaluate(D,{},c.canonical)*Cr:0,Ht=()=>{c.bucket.allowVerticalPlacement&&Yu(Ne)&&(oe.vertical=fg(ue,c.glyphMap,c.glyphPositions,c.imagePositions,j,Kt,y,Tt,"left",ct,we,l.WritingMode.vertical,!0,en,J,W))};if(!S&&cn){const tn=gn==="auto"?cn.map(Ft=>Jy(Ft)):[gn];let Xt=!1;for(let Ft=0;Ft<tn.length;Ft++){const Tn=tn[Ft];if(!oe.horizontal[Tn])if(Xt)oe.horizontal[Tn]=oe.horizontal[0];else{const yn=fg(ue,c.glyphMap,c.glyphPositions,c.imagePositions,j,Kt,y,"center",Tn,ct,we,l.WritingMode.horizontal,!1,en,J,W);yn&&(oe.horizontal[Tn]=yn,Xt=yn.positionedLines.length===1)}}Ht()}else{gn==="auto"&&(gn=Jy(Tt));const tn=fg(ue,c.glyphMap,c.glyphPositions,c.imagePositions,j,Kt,y,Tt,gn,ct,we,l.WritingMode.horizontal,!1,en,J,W);tn&&(oe.horizontal[gn]=tn),Ht(),Yu(Ne)&&S&&T&&(oe.vertical=fg(ue,c.glyphMap,c.glyphPositions,c.imagePositions,j,Kt,y,Tt,gn,ct,we,l.WritingMode.vertical,!1,en,J,W))}}let Ve=!1;if(D.icon&&D.icon.name){const Ne=c.imageMap[D.icon.name];Ne&&(Te=vL(c.imagePositions[D.icon.name],a.get("icon-offset").evaluate(D,{},c.canonical),a.get("icon-anchor").evaluate(D,{},c.canonical)),Ve=!!Ne.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=Ve:c.bucket.sdfIcons!==Ve&&U("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ne.pixelRatio!==c.bucket.pixelRatio||a.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const Je=MS(oe.horizontal)||oe.vertical;c.bucket.iconsInText=!!Je&&Je.iconsInText,(Je||Te)&&LL(c.bucket,D,oe,Te,c.imageMap,p,J,se,we,Ve,c.canonical)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},l.perspective=function(c,a,h,p,y){var S,T=1/Math.tan(a/2);return c[0]=T/h,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=T,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,y!=null&&y!==1/0?(c[10]=(y+p)*(S=1/(p-y)),c[14]=2*y*p*S):(c[10]=-1,c[14]=-2*p),c},l.pick=function(c,a){const h={};for(let p=0;p<a.length;p++){const y=a[p];y in c&&(h[y]=c[y])}return h},l.plugin=Ms,l.pointGeometry=g,l.polygonIntersectsPolygon=lw,l.potpack=qw,l.register=dn,l.registerForPluginStateChange=function(c){return c({pluginStatus:Yr,pluginURL:_o}),nd.on("pluginStateChange",c),c},l.renderColorRamp=yw,l.rotateX=function(c,a,h){var p=Math.sin(h),y=Math.cos(h),S=a[4],T=a[5],M=a[6],D=a[7],j=a[8],W=a[9],J=a[10],se=a[11];return a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]),c[4]=S*y+j*p,c[5]=T*y+W*p,c[6]=M*y+J*p,c[7]=D*y+se*p,c[8]=j*y-S*p,c[9]=W*y-T*p,c[10]=J*y-M*p,c[11]=se*y-D*p,c},l.rotateZ=function(c,a,h){var p=Math.sin(h),y=Math.cos(h),S=a[0],T=a[1],M=a[2],D=a[3],j=a[4],W=a[5],J=a[6],se=a[7];return a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]),c[0]=S*y+j*p,c[1]=T*y+W*p,c[2]=M*y+J*p,c[3]=D*y+se*p,c[4]=j*y-S*p,c[5]=W*y-T*p,c[6]=J*y-M*p,c[7]=se*y-D*p,c},l.sameOrigin=Ot,l.scale=function(c,a,h){var p=h[0],y=h[1],S=h[2];return c[0]=a[0]*p,c[1]=a[1]*p,c[2]=a[2]*p,c[3]=a[3]*p,c[4]=a[4]*y,c[5]=a[5]*y,c[6]=a[6]*y,c[7]=a[7]*y,c[8]=a[8]*S,c[9]=a[9]*S,c[10]=a[10]*S,c[11]=a[11]*S,c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c},l.setRTLTextPlugin=function(c,a,h=!1){if(Yr===ef||Yr===td||Yr===tf)throw new Error("setRTLTextPlugin cannot be called multiple times.");_o=$t.resolveURL(c),Yr=ef,Bc=a,nf(),h||Ym()},l.sphericalToCartesian=function([c,a,h]){return a+=90,a*=Math.PI/180,h*=Math.PI/180,{x:c*Math.cos(a)*Math.sin(h),y:c*Math.sin(a)*Math.sin(h),z:c*Math.cos(h)}},l.toEvaluationFeature=Gc,l.transformMat4=sg,l.translate=function(c,a,h){var p,y,S,T,M,D,j,W,J,se,oe,ue,Te=h[0],we=h[1],Ve=h[2];return a===c?(c[12]=a[0]*Te+a[4]*we+a[8]*Ve+a[12],c[13]=a[1]*Te+a[5]*we+a[9]*Ve+a[13],c[14]=a[2]*Te+a[6]*we+a[10]*Ve+a[14],c[15]=a[3]*Te+a[7]*we+a[11]*Ve+a[15]):(y=a[1],S=a[2],T=a[3],M=a[4],D=a[5],j=a[6],W=a[7],J=a[8],se=a[9],oe=a[10],ue=a[11],c[0]=p=a[0],c[1]=y,c[2]=S,c[3]=T,c[4]=M,c[5]=D,c[6]=j,c[7]=W,c[8]=J,c[9]=se,c[10]=oe,c[11]=ue,c[12]=p*Te+M*we+J*Ve+a[12],c[13]=y*Te+D*we+se*Ve+a[13],c[14]=S*Te+j*we+oe*Ve+a[14],c[15]=T*Te+W*we+ue*Ve+a[15]),c},l.triggerPluginCompletionEvent=Xm,l.unicodeBlockLookup=Jt,l.uniqueId=function(){return H++},l.v8Spec=ge,l.validateCustomStyleLayer=function(c){const a=[],h=c.id;return h===void 0&&a.push({message:`layers.${h}: missing required property "id"`}),c.render===void 0&&a.push({message:`layers.${h}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&a.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),a},l.validateLight=gy,l.validateStyle=vo,l.vectorTile=Pl,l.warnOnce=U,l.wrap=z}),u(["./shared"],function(l){class m{constructor(Y){this.keyCache={},Y&&this.replace(Y)}replace(Y){this._layerConfigs={},this._layers={},this.update(Y,[])}update(Y,re){for(const Ae of Y){this._layerConfigs[Ae.id]=Ae;const $e=this._layers[Ae.id]=l.createStyleLayer(Ae);$e._featureFilter=l.createFilter($e.filter),this.keyCache[Ae.id]&&delete this.keyCache[Ae.id]}for(const Ae of re)delete this.keyCache[Ae],delete this._layerConfigs[Ae],delete this._layers[Ae];this.familiesBySource={};const me=l.groupByLayout(Object.values(this._layerConfigs),this.keyCache);for(const Ae of me){const $e=Ae.map(bt=>this._layers[bt.id]),qe=$e[0];if(qe.visibility==="none")continue;const He=qe.source||"";let Oe=this.familiesBySource[He];Oe||(Oe=this.familiesBySource[He]={});const Ze=qe.sourceLayer||"_geojsonTileLayer";let wt=Oe[Ze];wt||(wt=Oe[Ze]=[]),wt.push($e)}}}class g{constructor(Y){const re={},me=[];for(const He in Y){const Oe=Y[He],Ze=re[He]={};for(const wt in Oe){const bt=Oe[+wt];if(!bt||bt.bitmap.width===0||bt.bitmap.height===0)continue;const Et={x:0,y:0,w:bt.bitmap.width+2,h:bt.bitmap.height+2};me.push(Et),Ze[wt]={rect:Et,metrics:bt.metrics}}}const{w:Ae,h:$e}=l.potpack(me),qe=new l.AlphaImage({width:Ae||1,height:$e||1});for(const He in Y){const Oe=Y[He];for(const Ze in Oe){const wt=Oe[+Ze];if(!wt||wt.bitmap.width===0||wt.bitmap.height===0)continue;const bt=re[He][Ze].rect;l.AlphaImage.copy(wt.bitmap,qe,{x:0,y:0},{x:bt.x+1,y:bt.y+1},wt.bitmap)}}this.image=qe,this.positions=re}}l.register("GlyphAtlas",g);class x{constructor(Y){this.tileID=new l.OverscaledTileID(Y.tileID.overscaledZ,Y.tileID.wrap,Y.tileID.canonical.z,Y.tileID.canonical.x,Y.tileID.canonical.y),this.uid=Y.uid,this.zoom=Y.zoom,this.pixelRatio=Y.pixelRatio,this.tileSize=Y.tileSize,this.source=Y.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Y.showCollisionBoxes,this.collectResourceTiming=!!Y.collectResourceTiming,this.returnDependencies=!!Y.returnDependencies,this.promoteId=Y.promoteId}parse(Y,re,me,Ae,$e){this.status="parsing",this.data=Y,this.collisionBoxArray=new l.CollisionBoxArray;const qe=new l.DictionaryCoder(Object.keys(Y.layers).sort()),He=new l.FeatureIndex(this.tileID,this.promoteId);He.bucketLayerIDs=[];const Oe={},Ze={featureIndex:He,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:me},wt=re.familiesBySource[this.source];for(const zn in wt){const Ut=Y.layers[zn];if(!Ut)continue;Ut.version===1&&l.warnOnce(`Vector tile source "${this.source}" layer "${zn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ge=qe.encode(zn),Ct=[];for(let gt=0;gt<Ut.length;gt++){const ze=Ut.feature(gt),yt=He.getId(ze,zn);Ct.push({feature:ze,id:yt,index:gt,sourceLayerIndex:Ge})}for(const gt of wt[zn]){const ze=gt[0];ze.source!==this.source&&l.warnOnce(`layer.source = ${ze.source} does not equal this.source = ${this.source}`),ze.minzoom&&this.zoom<Math.floor(ze.minzoom)||ze.maxzoom&&this.zoom>=ze.maxzoom||ze.visibility!=="none"&&(w(gt,this.zoom,me),(Oe[ze.id]=ze.createBucket({index:He.bucketLayerIDs.length,layers:gt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ge,sourceID:this.source})).populate(Ct,Ze,this.tileID.canonical),He.bucketLayerIDs.push(gt.map(yt=>yt.id)))}}let bt,Et,pn,wn;const un=l.mapObject(Ze.glyphDependencies,zn=>Object.keys(zn).map(Number));Object.keys(un).length?Ae.send("getGlyphs",{uid:this.uid,stacks:un,source:this.source,tileID:this.tileID,type:"glyphs"},(zn,Ut)=>{bt||(bt=zn,Et=Ut,Vn.call(this))}):Et={};const mn=Object.keys(Ze.iconDependencies);mn.length?Ae.send("getImages",{icons:mn,source:this.source,tileID:this.tileID,type:"icons"},(zn,Ut)=>{bt||(bt=zn,pn=Ut,Vn.call(this))}):pn={};const In=Object.keys(Ze.patternDependencies);function Vn(){if(bt)return $e(bt);if(Et&&pn&&wn){const zn=new g(Et),Ut=new l.ImageAtlas(pn,wn);for(const Ge in Oe){const Ct=Oe[Ge];Ct instanceof l.SymbolBucket?(w(Ct.layers,this.zoom,me),l.performSymbolLayout({bucket:Ct,glyphMap:Et,glyphPositions:zn.positions,imageMap:pn,imagePositions:Ut.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Ct.hasPattern&&(Ct instanceof l.LineBucket||Ct instanceof l.FillBucket||Ct instanceof l.FillExtrusionBucket)&&(w(Ct.layers,this.zoom,me),Ct.addFeatures(Ze,this.tileID.canonical,Ut.patternPositions))}this.status="done",$e(null,{buckets:Object.values(Oe).filter(Ge=>!Ge.isEmpty()),featureIndex:He,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:zn.image,imageAtlas:Ut,glyphMap:this.returnDependencies?Et:null,iconMap:this.returnDependencies?pn:null,glyphPositions:this.returnDependencies?zn.positions:null})}}In.length?Ae.send("getImages",{icons:In,source:this.source,tileID:this.tileID,type:"patterns"},(zn,Ut)=>{bt||(bt=zn,wn=Ut,Vn.call(this))}):wn={},Vn.call(this)}}function w(he,Y,re){const me=new l.EvaluationParameters(Y);for(const Ae of he)Ae.recalculate(me,re)}function I(he,Y){const re=l.getArrayBuffer(he.request,(me,Ae,$e,qe)=>{me?Y(me):Ae&&Y(null,{vectorTile:new l.vectorTile.VectorTile(new l.Protobuf(Ae)),rawData:Ae,cacheControl:$e,expires:qe})});return()=>{re.cancel(),Y()}}class C{constructor(Y,re,me,Ae){this.actor=Y,this.layerIndex=re,this.availableImages=me,this.loadVectorData=Ae||I,this.loading={},this.loaded={}}loadTile(Y,re){const me=Y.uid;this.loading||(this.loading={});const Ae=!!(Y&&Y.request&&Y.request.collectResourceTiming)&&new l.RequestPerformance(Y.request),$e=this.loading[me]=new x(Y);$e.abort=this.loadVectorData(Y,(qe,He)=>{if(delete this.loading[me],qe||!He)return $e.status="done",this.loaded[me]=$e,re(qe);const Oe=He.rawData,Ze={};He.expires&&(Ze.expires=He.expires),He.cacheControl&&(Ze.cacheControl=He.cacheControl);const wt={};if(Ae){const bt=Ae.finish();bt&&(wt.resourceTiming=JSON.parse(JSON.stringify(bt)))}$e.vectorTile=He.vectorTile,$e.parse(He.vectorTile,this.layerIndex,this.availableImages,this.actor,(bt,Et)=>{if(bt||!Et)return re(bt);re(null,l.extend({rawTileData:Oe.slice(0)},Et,Ze,wt))}),this.loaded=this.loaded||{},this.loaded[me]=$e})}reloadTile(Y,re){const me=this.loaded,Ae=Y.uid,$e=this;if(me&&me[Ae]){const qe=me[Ae];qe.showCollisionBoxes=Y.showCollisionBoxes;const He=(Oe,Ze)=>{const wt=qe.reloadCallback;wt&&(delete qe.reloadCallback,qe.parse(qe.vectorTile,$e.layerIndex,this.availableImages,$e.actor,wt)),re(Oe,Ze)};qe.status==="parsing"?qe.reloadCallback=He:qe.status==="done"&&(qe.vectorTile?qe.parse(qe.vectorTile,this.layerIndex,this.availableImages,this.actor,He):He())}}abortTile(Y,re){const me=this.loading,Ae=Y.uid;me&&me[Ae]&&me[Ae].abort&&(me[Ae].abort(),delete me[Ae]),re()}removeTile(Y,re){const me=this.loaded,Ae=Y.uid;me&&me[Ae]&&delete me[Ae],re()}}class A{constructor(){this.loaded={}}loadTile(Y,re){const{uid:me,encoding:Ae,rawImageData:$e}=Y,qe=l.isImageBitmap($e)?this.getImageData($e):$e,He=new l.DEMData(me,qe,Ae);this.loaded=this.loaded||{},this.loaded[me]=He,re(null,He)}getImageData(Y){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Y.width,Y.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Y.width,this.offscreenCanvas.height=Y.height,this.offscreenCanvasContext.drawImage(Y,0,0,Y.width,Y.height);const re=this.offscreenCanvasContext.getImageData(-1,-1,Y.width+2,Y.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:re.width,height:re.height},re.data)}removeTile(Y){const re=this.loaded,me=Y.uid;re&&re[me]&&delete re[me]}}function L(he,Y){if(he.length!==0){$(he[0],Y);for(var re=1;re<he.length;re++)$(he[re],!Y)}}function $(he,Y){for(var re=0,me=0,Ae=0,$e=he.length,qe=$e-1;Ae<$e;qe=Ae++){var He=(he[Ae][0]-he[qe][0])*(he[qe][1]+he[Ae][1]),Oe=re+He;me+=Math.abs(re)>=Math.abs(He)?re-Oe+He:He-Oe+re,re=Oe}re+me>=0!=!!Y&&he.reverse()}var F=l.getDefaultExportFromCjs(function he(Y,re){var me,Ae=Y&&Y.type;if(Ae==="FeatureCollection")for(me=0;me<Y.features.length;me++)he(Y.features[me],re);else if(Ae==="GeometryCollection")for(me=0;me<Y.geometries.length;me++)he(Y.geometries[me],re);else if(Ae==="Feature")he(Y.geometry,re);else if(Ae==="Polygon")L(Y.coordinates,re);else if(Ae==="MultiPolygon")for(me=0;me<Y.coordinates.length;me++)L(Y.coordinates[me],re);return Y});const z=l.vectorTile.VectorTileFeature.prototype.toGeoJSON;var ee={exports:{}},H=l.pointGeometry,Q=l.vectorTile.VectorTileFeature,ae=be;function be(he,Y){this.options=Y||{},this.features=he,this.length=he.length}function te(he,Y){this.id=typeof he.id=="number"?he.id:void 0,this.type=he.type,this.rawGeometry=he.type===1?[he.geometry]:he.geometry,this.properties=he.tags,this.extent=Y||4096}be.prototype.feature=function(he){return new te(this.features[he],this.options.extent)},te.prototype.loadGeometry=function(){var he=this.rawGeometry;this.geometry=[];for(var Y=0;Y<he.length;Y++){for(var re=he[Y],me=[],Ae=0;Ae<re.length;Ae++)me.push(new H(re[Ae][0],re[Ae][1]));this.geometry.push(me)}return this.geometry},te.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var he=this.geometry,Y=1/0,re=-1/0,me=1/0,Ae=-1/0,$e=0;$e<he.length;$e++)for(var qe=he[$e],He=0;He<qe.length;He++){var Oe=qe[He];Y=Math.min(Y,Oe.x),re=Math.max(re,Oe.x),me=Math.min(me,Oe.y),Ae=Math.max(Ae,Oe.y)}return[Y,me,re,Ae]},te.prototype.toGeoJSON=Q.prototype.toGeoJSON;var G=l.pbf,U=ae;function B(he){var Y=new G;return function(re,me){for(var Ae in re.layers)me.writeMessage(3,ie,re.layers[Ae])}(he,Y),Y.finish()}function ie(he,Y){var re;Y.writeVarintField(15,he.version||1),Y.writeStringField(1,he.name||""),Y.writeVarintField(5,he.extent||4096);var me={keys:[],values:[],keycache:{},valuecache:{}};for(re=0;re<he.length;re++)me.feature=he.feature(re),Y.writeMessage(2,X,me);var Ae=me.keys;for(re=0;re<Ae.length;re++)Y.writeStringField(3,Ae[re]);var $e=me.values;for(re=0;re<$e.length;re++)Y.writeMessage(4,lt,$e[re])}function X(he,Y){var re=he.feature;re.id!==void 0&&Y.writeVarintField(1,re.id),Y.writeMessage(2,ne,he),Y.writeVarintField(3,re.type),Y.writeMessage(4,Xe,re)}function ne(he,Y){var re=he.feature,me=he.keys,Ae=he.values,$e=he.keycache,qe=he.valuecache;for(var He in re.properties){var Oe=re.properties[He],Ze=$e[He];if(Oe!==null){Ze===void 0&&(me.push(He),$e[He]=Ze=me.length-1),Y.writeVarint(Ze);var wt=typeof Oe;wt!=="string"&&wt!=="boolean"&&wt!=="number"&&(Oe=JSON.stringify(Oe));var bt=wt+":"+Oe,Et=qe[bt];Et===void 0&&(Ae.push(Oe),qe[bt]=Et=Ae.length-1),Y.writeVarint(Et)}}}function Ee(he,Y){return(Y<<3)+(7&he)}function Ie(he){return he<<1^he>>31}function Xe(he,Y){for(var re=he.loadGeometry(),me=he.type,Ae=0,$e=0,qe=re.length,He=0;He<qe;He++){var Oe=re[He],Ze=1;me===1&&(Ze=Oe.length),Y.writeVarint(Ee(1,Ze));for(var wt=me===3?Oe.length-1:Oe.length,bt=0;bt<wt;bt++){bt===1&&me!==1&&Y.writeVarint(Ee(2,wt-1));var Et=Oe[bt].x-Ae,pn=Oe[bt].y-$e;Y.writeVarint(Ie(Et)),Y.writeVarint(Ie(pn)),Ae+=Et,$e+=pn}me===3&&Y.writeVarint(Ee(7,1))}}function lt(he,Y){var re=typeof he;re==="string"?Y.writeStringField(1,he):re==="boolean"?Y.writeBooleanField(7,he):re==="number"&&(he%1!=0?Y.writeDoubleField(3,he):he<0?Y.writeSVarintField(6,he):Y.writeVarintField(5,he))}ee.exports=B,ee.exports.fromVectorTileJs=B,ee.exports.fromGeojsonVt=function(he,Y){Y=Y||{};var re={};for(var me in he)re[me]=new U(he[me].features,Y),re[me].name=me,re[me].version=Y.version,re[me].extent=Y.extent;return B({layers:re})},ee.exports.GeoJSONWrapper=U;var st=l.getDefaultExportFromCjs(ee.exports);const $t={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:he=>he},It=Math.fround||(nt=new Float32Array(1),he=>(nt[0]=+he,nt[0]));var nt;class et{constructor(Y){this.options=Object.assign(Object.create($t),Y),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Y){const{log:re,minZoom:me,maxZoom:Ae}=this.options;re&&console.time("total time");const $e=`prepare ${Y.length} points`;re&&console.time($e),this.points=Y;const qe=[];for(let Oe=0;Oe<Y.length;Oe++){const Ze=Y[Oe];if(!Ze.geometry)continue;const[wt,bt]=Ze.geometry.coordinates,Et=It(Ke(wt)),pn=It(ut(bt));qe.push(Et,pn,1/0,Oe,-1,1),this.options.reduce&&qe.push(0)}let He=this.trees[Ae+1]=this._createTree(qe);re&&console.timeEnd($e);for(let Oe=Ae;Oe>=me;Oe--){const Ze=+Date.now();He=this.trees[Oe]=this._createTree(this._cluster(He,Oe)),re&&console.log("z%d: %d clusters in %dms",Oe,He.numItems,+Date.now()-Ze)}return re&&console.timeEnd("total time"),this}getClusters(Y,re){let me=((Y[0]+180)%360+360)%360-180;const Ae=Math.max(-90,Math.min(90,Y[1]));let $e=Y[2]===180?180:((Y[2]+180)%360+360)%360-180;const qe=Math.max(-90,Math.min(90,Y[3]));if(Y[2]-Y[0]>=360)me=-180,$e=180;else if(me>$e){const bt=this.getClusters([me,Ae,180,qe],re),Et=this.getClusters([-180,Ae,$e,qe],re);return bt.concat(Et)}const He=this.trees[this._limitZoom(re)],Oe=He.range(Ke(me),ut(qe),Ke($e),ut(Ae)),Ze=He.data,wt=[];for(const bt of Oe){const Et=this.stride*bt;wt.push(Ze[Et+5]>1?dt(Ze,Et,this.clusterProps):this.points[Ze[Et+3]])}return wt}getChildren(Y){const re=this._getOriginId(Y),me=this._getOriginZoom(Y),Ae="No cluster with the specified id.",$e=this.trees[me];if(!$e)throw new Error(Ae);const qe=$e.data;if(re*this.stride>=qe.length)throw new Error(Ae);const He=this.options.radius/(this.options.extent*Math.pow(2,me-1)),Oe=$e.within(qe[re*this.stride],qe[re*this.stride+1],He),Ze=[];for(const wt of Oe){const bt=wt*this.stride;qe[bt+4]===Y&&Ze.push(qe[bt+5]>1?dt(qe,bt,this.clusterProps):this.points[qe[bt+3]])}if(Ze.length===0)throw new Error(Ae);return Ze}getLeaves(Y,re,me){const Ae=[];return this._appendLeaves(Ae,Y,re=re||10,me=me||0,0),Ae}getTile(Y,re,me){const Ae=this.trees[this._limitZoom(Y)],$e=Math.pow(2,Y),{extent:qe,radius:He}=this.options,Oe=He/qe,Ze=(me-Oe)/$e,wt=(me+1+Oe)/$e,bt={features:[]};return this._addTileFeatures(Ae.range((re-Oe)/$e,Ze,(re+1+Oe)/$e,wt),Ae.data,re,me,$e,bt),re===0&&this._addTileFeatures(Ae.range(1-Oe/$e,Ze,1,wt),Ae.data,$e,me,$e,bt),re===$e-1&&this._addTileFeatures(Ae.range(0,Ze,Oe/$e,wt),Ae.data,-1,me,$e,bt),bt.features.length?bt:null}getClusterExpansionZoom(Y){let re=this._getOriginZoom(Y)-1;for(;re<=this.options.maxZoom;){const me=this.getChildren(Y);if(re++,me.length!==1)break;Y=me[0].properties.cluster_id}return re}_appendLeaves(Y,re,me,Ae,$e){const qe=this.getChildren(re);for(const He of qe){const Oe=He.properties;if(Oe&&Oe.cluster?$e+Oe.point_count<=Ae?$e+=Oe.point_count:$e=this._appendLeaves(Y,Oe.cluster_id,me,Ae,$e):$e<Ae?$e++:Y.push(He),Y.length===me)break}return $e}_createTree(Y){const re=new l.KDBush(Y.length/this.stride|0,this.options.nodeSize,Float32Array);for(let me=0;me<Y.length;me+=this.stride)re.add(Y[me],Y[me+1]);return re.finish(),re.data=Y,re}_addTileFeatures(Y,re,me,Ae,$e,qe){for(const He of Y){const Oe=He*this.stride,Ze=re[Oe+5]>1;let wt,bt,Et;if(Ze)wt=Be(re,Oe,this.clusterProps),bt=re[Oe],Et=re[Oe+1];else{const un=this.points[re[Oe+3]];wt=un.properties;const[mn,In]=un.geometry.coordinates;bt=Ke(mn),Et=ut(In)}const pn={type:1,geometry:[[Math.round(this.options.extent*(bt*$e-me)),Math.round(this.options.extent*(Et*$e-Ae))]],tags:wt};let wn;wn=Ze||this.options.generateId?re[Oe+3]:this.points[re[Oe+3]].id,wn!==void 0&&(pn.id=wn),qe.features.push(pn)}}_limitZoom(Y){return Math.max(this.options.minZoom,Math.min(Math.floor(+Y),this.options.maxZoom+1))}_cluster(Y,re){const{radius:me,extent:Ae,reduce:$e,minPoints:qe}=this.options,He=me/(Ae*Math.pow(2,re)),Oe=Y.data,Ze=[],wt=this.stride;for(let bt=0;bt<Oe.length;bt+=wt){if(Oe[bt+2]<=re)continue;Oe[bt+2]=re;const Et=Oe[bt],pn=Oe[bt+1],wn=Y.within(Oe[bt],Oe[bt+1],He),un=Oe[bt+5];let mn=un;for(const In of wn){const Vn=In*wt;Oe[Vn+2]>re&&(mn+=Oe[Vn+5])}if(mn>un&&mn>=qe){let In,Vn=Et*un,zn=pn*un,Ut=-1;const Ge=((bt/wt|0)<<5)+(re+1)+this.points.length;for(const Ct of wn){const gt=Ct*wt;if(Oe[gt+2]<=re)continue;Oe[gt+2]=re;const ze=Oe[gt+5];Vn+=Oe[gt]*ze,zn+=Oe[gt+1]*ze,Oe[gt+4]=Ge,$e&&(In||(In=this._map(Oe,bt,!0),Ut=this.clusterProps.length,this.clusterProps.push(In)),$e(In,this._map(Oe,gt)))}Oe[bt+4]=Ge,Ze.push(Vn/mn,zn/mn,1/0,Ge,-1,mn),$e&&Ze.push(Ut)}else{for(let In=0;In<wt;In++)Ze.push(Oe[bt+In]);if(mn>1)for(const In of wn){const Vn=In*wt;if(!(Oe[Vn+2]<=re)){Oe[Vn+2]=re;for(let zn=0;zn<wt;zn++)Ze.push(Oe[Vn+zn])}}}}return Ze}_getOriginId(Y){return Y-this.points.length>>5}_getOriginZoom(Y){return(Y-this.points.length)%32}_map(Y,re,me){if(Y[re+5]>1){const qe=this.clusterProps[Y[re+6]];return me?Object.assign({},qe):qe}const Ae=this.points[Y[re+3]].properties,$e=this.options.map(Ae);return me&&$e===Ae?Object.assign({},$e):$e}}function dt(he,Y,re){return{type:"Feature",id:he[Y+3],properties:Be(he,Y,re),geometry:{type:"Point",coordinates:[(me=he[Y],360*(me-.5)),Ot(he[Y+1])]}};var me}function Be(he,Y,re){const me=he[Y+5],Ae=me>=1e4?`${Math.round(me/1e3)}k`:me>=1e3?Math.round(me/100)/10+"k":me,$e=he[Y+6],qe=$e===-1?{}:Object.assign({},re[$e]);return Object.assign(qe,{cluster:!0,cluster_id:he[Y+3],point_count:me,point_count_abbreviated:Ae})}function Ke(he){return he/360+.5}function ut(he){const Y=Math.sin(he*Math.PI/180),re=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return re<0?0:re>1?1:re}function Ot(he){const Y=(180-360*he)*Math.PI/180;return 360*Math.atan(Math.exp(Y))/Math.PI-90}function Vt(he,Y,re,me){for(var Ae,$e=me,qe=re-Y>>1,He=re-Y,Oe=he[Y],Ze=he[Y+1],wt=he[re],bt=he[re+1],Et=Y+3;Et<re;Et+=3){var pn=_n(he[Et],he[Et+1],Oe,Ze,wt,bt);if(pn>$e)Ae=Et,$e=pn;else if(pn===$e){var wn=Math.abs(Et-qe);wn<He&&(Ae=Et,He=wn)}}$e>me&&(Ae-Y>3&&Vt(he,Y,Ae,me),he[Ae+2]=$e,re-Ae>3&&Vt(he,Ae,re,me))}function _n(he,Y,re,me,Ae,$e){var qe=Ae-re,He=$e-me;if(qe!==0||He!==0){var Oe=((he-re)*qe+(Y-me)*He)/(qe*qe+He*He);Oe>1?(re=Ae,me=$e):Oe>0&&(re+=qe*Oe,me+=He*Oe)}return(qe=he-re)*qe+(He=Y-me)*He}function qt(he,Y,re,me){var Ae={id:he===void 0?null:he,type:Y,geometry:re,tags:me,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function($e){var qe=$e.geometry,He=$e.type;if(He==="Point"||He==="MultiPoint"||He==="LineString")_e($e,qe);else if(He==="Polygon"||He==="MultiLineString")for(var Oe=0;Oe<qe.length;Oe++)_e($e,qe[Oe]);else if(He==="MultiPolygon")for(Oe=0;Oe<qe.length;Oe++)for(var Ze=0;Ze<qe[Oe].length;Ze++)_e($e,qe[Oe][Ze])}(Ae),Ae}function _e(he,Y){for(var re=0;re<Y.length;re+=3)he.minX=Math.min(he.minX,Y[re]),he.minY=Math.min(he.minY,Y[re+1]),he.maxX=Math.max(he.maxX,Y[re]),he.maxY=Math.max(he.maxY,Y[re+1])}function ke(he,Y,re,me){if(Y.geometry){var Ae=Y.geometry.coordinates,$e=Y.geometry.type,qe=Math.pow(re.tolerance/((1<<re.maxZoom)*re.extent),2),He=[],Oe=Y.id;if(re.promoteId?Oe=Y.properties[re.promoteId]:re.generateId&&(Oe=me||0),$e==="Point")ge(Ae,He);else if($e==="MultiPoint")for(var Ze=0;Ze<Ae.length;Ze++)ge(Ae[Ze],He);else if($e==="LineString")ft(Ae,He,qe,!1);else if($e==="MultiLineString"){if(re.lineMetrics){for(Ze=0;Ze<Ae.length;Ze++)ft(Ae[Ze],He=[],qe,!1),he.push(qt(Oe,"LineString",He,Y.properties));return}q(Ae,He,qe,!1)}else if($e==="Polygon")q(Ae,He,qe,!0);else{if($e!=="MultiPolygon"){if($e==="GeometryCollection"){for(Ze=0;Ze<Y.geometry.geometries.length;Ze++)ke(he,{id:Oe,geometry:Y.geometry.geometries[Ze],properties:Y.properties},re,me);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ze=0;Ze<Ae.length;Ze++){var wt=[];q(Ae[Ze],wt,qe,!0),He.push(wt)}}he.push(qt(Oe,$e,He,Y.properties))}}function ge(he,Y){Y.push(fe(he[0])),Y.push(Pe(he[1])),Y.push(0)}function ft(he,Y,re,me){for(var Ae,$e,qe=0,He=0;He<he.length;He++){var Oe=fe(he[He][0]),Ze=Pe(he[He][1]);Y.push(Oe),Y.push(Ze),Y.push(0),He>0&&(qe+=me?(Ae*Ze-Oe*$e)/2:Math.sqrt(Math.pow(Oe-Ae,2)+Math.pow(Ze-$e,2))),Ae=Oe,$e=Ze}var wt=Y.length-3;Y[2]=1,Vt(Y,0,wt,re),Y[wt+2]=1,Y.size=Math.abs(qe),Y.start=0,Y.end=Y.size}function q(he,Y,re,me){for(var Ae=0;Ae<he.length;Ae++){var $e=[];ft(he[Ae],$e,re,me),Y.push($e)}}function fe(he){return he/360+.5}function Pe(he){var Y=Math.sin(he*Math.PI/180),re=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return re<0?0:re>1?1:re}function We(he,Y,re,me,Ae,$e,qe,He){if(me/=Y,$e>=(re/=Y)&&qe<me)return he;if(qe<re||$e>=me)return null;for(var Oe=[],Ze=0;Ze<he.length;Ze++){var wt=he[Ze],bt=wt.geometry,Et=wt.type,pn=Ae===0?wt.minX:wt.minY,wn=Ae===0?wt.maxX:wt.maxY;if(pn>=re&&wn<me)Oe.push(wt);else if(!(wn<re||pn>=me)){var un=[];if(Et==="Point"||Et==="MultiPoint")pt(bt,un,re,me,Ae);else if(Et==="LineString")ht(bt,un,re,me,Ae,!1,He.lineMetrics);else if(Et==="MultiLineString")Dt(bt,un,re,me,Ae,!1);else if(Et==="Polygon")Dt(bt,un,re,me,Ae,!0);else if(Et==="MultiPolygon")for(var mn=0;mn<bt.length;mn++){var In=[];Dt(bt[mn],In,re,me,Ae,!0),In.length&&un.push(In)}if(un.length){if(He.lineMetrics&&Et==="LineString"){for(mn=0;mn<un.length;mn++)Oe.push(qt(wt.id,Et,un[mn],wt.tags));continue}Et!=="LineString"&&Et!=="MultiLineString"||(un.length===1?(Et="LineString",un=un[0]):Et="MultiLineString"),Et!=="Point"&&Et!=="MultiPoint"||(Et=un.length===3?"Point":"MultiPoint"),Oe.push(qt(wt.id,Et,un,wt.tags))}}}return Oe.length?Oe:null}function pt(he,Y,re,me,Ae){for(var $e=0;$e<he.length;$e+=3){var qe=he[$e+Ae];qe>=re&&qe<=me&&(Y.push(he[$e]),Y.push(he[$e+1]),Y.push(he[$e+2]))}}function ht(he,Y,re,me,Ae,$e,qe){for(var He,Oe,Ze=zt(he),wt=Ae===0?ln:vt,bt=he.start,Et=0;Et<he.length-3;Et+=3){var pn=he[Et],wn=he[Et+1],un=he[Et+2],mn=he[Et+3],In=he[Et+4],Vn=Ae===0?pn:wn,zn=Ae===0?mn:In,Ut=!1;qe&&(He=Math.sqrt(Math.pow(pn-mn,2)+Math.pow(wn-In,2))),Vn<re?zn>re&&(Oe=wt(Ze,pn,wn,mn,In,re),qe&&(Ze.start=bt+He*Oe)):Vn>me?zn<me&&(Oe=wt(Ze,pn,wn,mn,In,me),qe&&(Ze.start=bt+He*Oe)):Gt(Ze,pn,wn,un),zn<re&&Vn>=re&&(Oe=wt(Ze,pn,wn,mn,In,re),Ut=!0),zn>me&&Vn<=me&&(Oe=wt(Ze,pn,wn,mn,In,me),Ut=!0),!$e&&Ut&&(qe&&(Ze.end=bt+He*Oe),Y.push(Ze),Ze=zt(he)),qe&&(bt+=He)}var Ge=he.length-3;pn=he[Ge],wn=he[Ge+1],un=he[Ge+2],(Vn=Ae===0?pn:wn)>=re&&Vn<=me&&Gt(Ze,pn,wn,un),Ge=Ze.length-3,$e&&Ge>=3&&(Ze[Ge]!==Ze[0]||Ze[Ge+1]!==Ze[1])&&Gt(Ze,Ze[0],Ze[1],Ze[2]),Ze.length&&Y.push(Ze)}function zt(he){var Y=[];return Y.size=he.size,Y.start=he.start,Y.end=he.end,Y}function Dt(he,Y,re,me,Ae,$e){for(var qe=0;qe<he.length;qe++)ht(he[qe],Y,re,me,Ae,$e,!1)}function Gt(he,Y,re,me){he.push(Y),he.push(re),he.push(me)}function ln(he,Y,re,me,Ae,$e){var qe=($e-Y)/(me-Y);return he.push($e),he.push(re+(Ae-re)*qe),he.push(1),qe}function vt(he,Y,re,me,Ae,$e){var qe=($e-re)/(Ae-re);return he.push(Y+(me-Y)*qe),he.push($e),he.push(1),qe}function Rn(he,Y){for(var re=[],me=0;me<he.length;me++){var Ae,$e=he[me],qe=$e.type;if(qe==="Point"||qe==="MultiPoint"||qe==="LineString")Ae=Ln($e.geometry,Y);else if(qe==="MultiLineString"||qe==="Polygon"){Ae=[];for(var He=0;He<$e.geometry.length;He++)Ae.push(Ln($e.geometry[He],Y))}else if(qe==="MultiPolygon")for(Ae=[],He=0;He<$e.geometry.length;He++){for(var Oe=[],Ze=0;Ze<$e.geometry[He].length;Ze++)Oe.push(Ln($e.geometry[He][Ze],Y));Ae.push(Oe)}re.push(qt($e.id,qe,Ae,$e.tags))}return re}function Ln(he,Y){var re=[];re.size=he.size,he.start!==void 0&&(re.start=he.start,re.end=he.end);for(var me=0;me<he.length;me+=3)re.push(he[me]+Y,he[me+1],he[me+2]);return re}function Ye(he,Y){if(he.transformed)return he;var re,me,Ae,$e=1<<he.z,qe=he.x,He=he.y;for(re=0;re<he.features.length;re++){var Oe=he.features[re],Ze=Oe.geometry,wt=Oe.type;if(Oe.geometry=[],wt===1)for(me=0;me<Ze.length;me+=2)Oe.geometry.push(Qe(Ze[me],Ze[me+1],Y,$e,qe,He));else for(me=0;me<Ze.length;me++){var bt=[];for(Ae=0;Ae<Ze[me].length;Ae+=2)bt.push(Qe(Ze[me][Ae],Ze[me][Ae+1],Y,$e,qe,He));Oe.geometry.push(bt)}}return he.transformed=!0,he}function Qe(he,Y,re,me,Ae,$e){return[Math.round(re*(he*me-Ae)),Math.round(re*(Y*me-$e))]}function Fe(he,Y,re,me,Ae){for(var $e=Y===Ae.maxZoom?0:Ae.tolerance/((1<<Y)*Ae.extent),qe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:re,y:me,z:Y,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},He=0;He<he.length;He++){qe.numFeatures++,mt(qe,he[He],$e,Ae);var Oe=he[He].minX,Ze=he[He].minY,wt=he[He].maxX,bt=he[He].maxY;Oe<qe.minX&&(qe.minX=Oe),Ze<qe.minY&&(qe.minY=Ze),wt>qe.maxX&&(qe.maxX=wt),bt>qe.maxY&&(qe.maxY=bt)}return qe}function mt(he,Y,re,me){var Ae=Y.geometry,$e=Y.type,qe=[];if($e==="Point"||$e==="MultiPoint")for(var He=0;He<Ae.length;He+=3)qe.push(Ae[He]),qe.push(Ae[He+1]),he.numPoints++,he.numSimplified++;else if($e==="LineString")St(qe,Ae,he,re,!1,!1);else if($e==="MultiLineString"||$e==="Polygon")for(He=0;He<Ae.length;He++)St(qe,Ae[He],he,re,$e==="Polygon",He===0);else if($e==="MultiPolygon")for(var Oe=0;Oe<Ae.length;Oe++){var Ze=Ae[Oe];for(He=0;He<Ze.length;He++)St(qe,Ze[He],he,re,!0,He===0)}if(qe.length){var wt=Y.tags||null;if($e==="LineString"&&me.lineMetrics){for(var bt in wt={},Y.tags)wt[bt]=Y.tags[bt];wt.mapbox_clip_start=Ae.start/Ae.size,wt.mapbox_clip_end=Ae.end/Ae.size}var Et={geometry:qe,type:$e==="Polygon"||$e==="MultiPolygon"?3:$e==="LineString"||$e==="MultiLineString"?2:1,tags:wt};Y.id!==null&&(Et.id=Y.id),he.features.push(Et)}}function St(he,Y,re,me,Ae,$e){var qe=me*me;if(me>0&&Y.size<(Ae?qe:me))re.numPoints+=Y.length/3;else{for(var He=[],Oe=0;Oe<Y.length;Oe+=3)(me===0||Y[Oe+2]>qe)&&(re.numSimplified++,He.push(Y[Oe]),He.push(Y[Oe+1])),re.numPoints++;Ae&&function(Ze,wt){for(var bt=0,Et=0,pn=Ze.length,wn=pn-2;Et<pn;wn=Et,Et+=2)bt+=(Ze[Et]-Ze[wn])*(Ze[Et+1]+Ze[wn+1]);if(bt>0===wt)for(Et=0,pn=Ze.length;Et<pn/2;Et+=2){var un=Ze[Et],mn=Ze[Et+1];Ze[Et]=Ze[pn-2-Et],Ze[Et+1]=Ze[pn-1-Et],Ze[pn-2-Et]=un,Ze[pn-1-Et]=mn}}(He,$e),he.push(He)}}function Yt(he,Y){var re=(Y=this.options=function(Ae,$e){for(var qe in $e)Ae[qe]=$e[qe];return Ae}(Object.create(this.options),Y)).debug;if(re&&console.time("preprocess data"),Y.maxZoom<0||Y.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Y.promoteId&&Y.generateId)throw new Error("promoteId and generateId cannot be used together.");var me=function(Ae,$e){var qe=[];if(Ae.type==="FeatureCollection")for(var He=0;He<Ae.features.length;He++)ke(qe,Ae.features[He],$e,He);else ke(qe,Ae.type==="Feature"?Ae:{geometry:Ae},$e);return qe}(he,Y);this.tiles={},this.tileCoords=[],re&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Y.indexMaxZoom,Y.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),me=function(Ae,$e){var qe=$e.buffer/$e.extent,He=Ae,Oe=We(Ae,1,-1-qe,qe,0,-1,2,$e),Ze=We(Ae,1,1-qe,2+qe,0,-1,2,$e);return(Oe||Ze)&&(He=We(Ae,1,-qe,1+qe,0,-1,2,$e)||[],Oe&&(He=Rn(Oe,1).concat(He)),Ze&&(He=He.concat(Rn(Ze,-1)))),He}(me,Y),me.length&&this.splitTile(me,0,0,0),re&&(me.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function an(he,Y,re){return 32*((1<<he)*re+Y)+he}function Pt(he,Y){return Y?he.properties[Y]:he.id}function qn(he,Y){if(he==null)return!0;if(he.type==="Feature")return Pt(he,Y)!=null;if(he.type==="FeatureCollection"){const re=new Set;for(const me of he.features){const Ae=Pt(me,Y);if(Ae==null||re.has(Ae))return!1;re.add(Ae)}return!0}return!1}function Cn(he,Y){const re=new Map;if(he!=null)if(he.type==="Feature")re.set(Pt(he,Y),he);else for(const me of he.features)re.set(Pt(me,Y),me);return re}function jt(he,Y){const re=he.tileID.canonical;if(!this._geoJSONIndex)return Y(null,null);const me=this._geoJSONIndex.getTile(re.z,re.x,re.y);if(!me)return Y(null,null);const Ae=new class{constructor(qe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=qe.length,this._features=qe}feature(qe){return new class{constructor(He){this._feature=He,this.extent=l.EXTENT,this.type=He.type,this.properties=He.tags,"id"in He&&!isNaN(He.id)&&(this.id=parseInt(He.id,10))}loadGeometry(){if(this._feature.type===1){const He=[];for(const Oe of this._feature.geometry)He.push([new l.Point(Oe[0],Oe[1])]);return He}{const He=[];for(const Oe of this._feature.geometry){const Ze=[];for(const wt of Oe)Ze.push(new l.Point(wt[0],wt[1]));He.push(Ze)}return He}}toGeoJSON(He,Oe,Ze){return z.call(this,He,Oe,Ze)}}(this._features[qe])}}(me.features);let $e=st(Ae);$e.byteOffset===0&&$e.byteLength===$e.buffer.byteLength||($e=new Uint8Array($e)),Y(null,{vectorTile:Ae,rawData:$e.buffer})}Yt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Yt.prototype.splitTile=function(he,Y,re,me,Ae,$e,qe){for(var He=[he,Y,re,me],Oe=this.options,Ze=Oe.debug;He.length;){me=He.pop(),re=He.pop(),Y=He.pop(),he=He.pop();var wt=1<<Y,bt=an(Y,re,me),Et=this.tiles[bt];if(!Et&&(Ze>1&&console.time("creation"),Et=this.tiles[bt]=Fe(he,Y,re,me,Oe),this.tileCoords.push({z:Y,x:re,y:me}),Ze)){Ze>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Y,re,me,Et.numFeatures,Et.numPoints,Et.numSimplified),console.timeEnd("creation"));var pn="z"+Y;this.stats[pn]=(this.stats[pn]||0)+1,this.total++}if(Et.source=he,Ae){if(Y===Oe.maxZoom||Y===Ae)continue;var wn=1<<Ae-Y;if(re!==Math.floor($e/wn)||me!==Math.floor(qe/wn))continue}else if(Y===Oe.indexMaxZoom||Et.numPoints<=Oe.indexMaxPoints)continue;if(Et.source=null,he.length!==0){Ze>1&&console.time("clipping");var un,mn,In,Vn,zn,Ut,Ge=.5*Oe.buffer/Oe.extent,Ct=.5-Ge,gt=.5+Ge,ze=1+Ge;un=mn=In=Vn=null,zn=We(he,wt,re-Ge,re+gt,0,Et.minX,Et.maxX,Oe),Ut=We(he,wt,re+Ct,re+ze,0,Et.minX,Et.maxX,Oe),he=null,zn&&(un=We(zn,wt,me-Ge,me+gt,1,Et.minY,Et.maxY,Oe),mn=We(zn,wt,me+Ct,me+ze,1,Et.minY,Et.maxY,Oe),zn=null),Ut&&(In=We(Ut,wt,me-Ge,me+gt,1,Et.minY,Et.maxY,Oe),Vn=We(Ut,wt,me+Ct,me+ze,1,Et.minY,Et.maxY,Oe),Ut=null),Ze>1&&console.timeEnd("clipping"),He.push(un||[],Y+1,2*re,2*me),He.push(mn||[],Y+1,2*re,2*me+1),He.push(In||[],Y+1,2*re+1,2*me),He.push(Vn||[],Y+1,2*re+1,2*me+1)}}},Yt.prototype.getTile=function(he,Y,re){var me=this.options,Ae=me.extent,$e=me.debug;if(he<0||he>24)return null;var qe=1<<he,He=an(he,Y=(Y%qe+qe)%qe,re);if(this.tiles[He])return Ye(this.tiles[He],Ae);$e>1&&console.log("drilling down to z%d-%d-%d",he,Y,re);for(var Oe,Ze=he,wt=Y,bt=re;!Oe&&Ze>0;)Ze--,wt=Math.floor(wt/2),bt=Math.floor(bt/2),Oe=this.tiles[an(Ze,wt,bt)];return Oe&&Oe.source?($e>1&&console.log("found parent tile z%d-%d-%d",Ze,wt,bt),$e>1&&console.time("drilling down"),this.splitTile(Oe.source,Ze,wt,bt,he,Y,re),$e>1&&console.timeEnd("drilling down"),this.tiles[He]?Ye(this.tiles[He],Ae):null):null};class vn extends C{constructor(Y,re,me,Ae){super(Y,re,me,jt),this._dataUpdateable=new Map,this.loadGeoJSON=($e,qe)=>{const{promoteId:He}=$e;if($e.request)return l.getJSON($e.request,(Oe,Ze,wt,bt)=>{this._dataUpdateable=qn(Ze,He)?Cn(Ze,He):void 0,qe(Oe,Ze,wt,bt)});if(typeof $e.data=="string")try{const Oe=JSON.parse($e.data);this._dataUpdateable=qn(Oe,He)?Cn(Oe,He):void 0,qe(null,Oe)}catch{qe(new Error(`Input data given to '${$e.source}' is not a valid GeoJSON object.`))}else $e.dataDiff?this._dataUpdateable?(function(Oe,Ze,wt){var bt,Et,pn,wn;if(Ze.removeAll&&Oe.clear(),Ze.remove)for(const un of Ze.remove)Oe.delete(un);if(Ze.add)for(const un of Ze.add){const mn=Pt(un,wt);mn!=null&&Oe.set(mn,un)}if(Ze.update)for(const un of Ze.update){let mn=Oe.get(un.id);if(mn==null)continue;const In=!un.removeAllProperties&&(((bt=un.removeProperties)===null||bt===void 0?void 0:bt.length)>0||((Et=un.addOrUpdateProperties)===null||Et===void 0?void 0:Et.length)>0);if((un.newGeometry||un.removeAllProperties||In)&&(mn={...mn},Oe.set(un.id,mn),In&&(mn.properties={...mn.properties})),un.newGeometry&&(mn.geometry=un.newGeometry),un.removeAllProperties)mn.properties={};else if(((pn=un.removeProperties)===null||pn===void 0?void 0:pn.length)>0)for(const Vn of un.removeProperties)Object.prototype.hasOwnProperty.call(mn.properties,Vn)&&delete mn.properties[Vn];if(((wn=un.addOrUpdateProperties)===null||wn===void 0?void 0:wn.length)>0)for(const{key:Vn,value:zn}of un.addOrUpdateProperties)mn.properties[Vn]=zn}}(this._dataUpdateable,$e.dataDiff,He),qe(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):qe(new Error(`Cannot update existing geojson data in ${$e.source}`)):qe(new Error(`Input data given to '${$e.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},Ae&&(this.loadGeoJSON=Ae)}loadData(Y,re){var me;(me=this._pendingRequest)===null||me===void 0||me.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Ae=!!(Y&&Y.request&&Y.request.collectResourceTiming)&&new l.RequestPerformance(Y.request);this._pendingCallback=re,this._pendingRequest=this.loadGeoJSON(Y,($e,qe)=>{if(delete this._pendingCallback,delete this._pendingRequest,$e||!qe)return re($e);if(typeof qe!="object")return re(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`));{F(qe,!0);try{if(Y.filter){const Oe=l.createExpression(Y.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Oe.result==="error")throw new Error(Oe.value.map(wt=>`${wt.key}: ${wt.message}`).join(", "));qe={type:"FeatureCollection",features:qe.features.filter(wt=>Oe.value.evaluate({zoom:0},wt))}}this._geoJSONIndex=Y.cluster?new et(function({superclusterOptions:Oe,clusterProperties:Ze}){if(!Ze||!Oe)return Oe;const wt={},bt={},Et={accumulated:null,zoom:0},pn={properties:null},wn=Object.keys(Ze);for(const un of wn){const[mn,In]=Ze[un],Vn=l.createExpression(In),zn=l.createExpression(typeof mn=="string"?[mn,["accumulated"],["get",un]]:mn);wt[un]=Vn.value,bt[un]=zn.value}return Oe.map=un=>{pn.properties=un;const mn={};for(const In of wn)mn[In]=wt[In].evaluate(Et,pn);return mn},Oe.reduce=(un,mn)=>{pn.properties=mn;for(const In of wn)Et.accumulated=un[In],un[In]=bt[In].evaluate(Et,pn)},Oe}(Y)).load(qe.features):function(Oe,Ze){return new Yt(Oe,Ze)}(qe,Y.geojsonVtOptions)}catch(Oe){return re(Oe)}this.loaded={};const He={};if(Ae){const Oe=Ae.finish();Oe&&(He.resourceTiming={},He.resourceTiming[Y.source]=JSON.parse(JSON.stringify(Oe)))}re(null,He)}})}reloadTile(Y,re){const me=this.loaded;return me&&me[Y.uid]?super.reloadTile(Y,re):this.loadTile(Y,re)}removeSource(Y,re){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),re()}getClusterExpansionZoom(Y,re){try{re(null,this._geoJSONIndex.getClusterExpansionZoom(Y.clusterId))}catch(me){re(me)}}getClusterChildren(Y,re){try{re(null,this._geoJSONIndex.getChildren(Y.clusterId))}catch(me){re(me)}}getClusterLeaves(Y,re){try{re(null,this._geoJSONIndex.getLeaves(Y.clusterId,Y.limit,Y.offset))}catch(me){re(me)}}}class Pn{constructor(Y){this.self=Y,this.actor=new l.Actor(Y,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:C,geojson:vn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(re,me)=>{if(this.workerSourceTypes[re])throw new Error(`Worker source with name "${re}" already registered.`);this.workerSourceTypes[re]=me},this.self.registerRTLTextPlugin=re=>{if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=re.applyArabicShaping,l.plugin.processBidirectionalText=re.processBidirectionalText,l.plugin.processStyledBidirectionalText=re.processStyledBidirectionalText}}setReferrer(Y,re){this.referrer=re}setImages(Y,re,me){this.availableImages[Y]=re;for(const Ae in this.workerSources[Y]){const $e=this.workerSources[Y][Ae];for(const qe in $e)$e[qe].availableImages=re}me()}setLayers(Y,re,me){this.getLayerIndex(Y).replace(re),me()}updateLayers(Y,re,me){this.getLayerIndex(Y).update(re.layers,re.removedIds),me()}loadTile(Y,re,me){this.getWorkerSource(Y,re.type,re.source).loadTile(re,me)}loadDEMTile(Y,re,me){this.getDEMWorkerSource(Y,re.source).loadTile(re,me)}reloadTile(Y,re,me){this.getWorkerSource(Y,re.type,re.source).reloadTile(re,me)}abortTile(Y,re,me){this.getWorkerSource(Y,re.type,re.source).abortTile(re,me)}removeTile(Y,re,me){this.getWorkerSource(Y,re.type,re.source).removeTile(re,me)}removeDEMTile(Y,re){this.getDEMWorkerSource(Y,re.source).removeTile(re)}removeSource(Y,re,me){if(!this.workerSources[Y]||!this.workerSources[Y][re.type]||!this.workerSources[Y][re.type][re.source])return;const Ae=this.workerSources[Y][re.type][re.source];delete this.workerSources[Y][re.type][re.source],Ae.removeSource!==void 0?Ae.removeSource(re,me):me()}loadWorkerSource(Y,re,me){try{this.self.importScripts(re.url),me()}catch(Ae){me(Ae.toString())}}syncRTLPluginState(Y,re,me){try{l.plugin.setState(re);const Ae=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&Ae!=null){this.self.importScripts(Ae);const $e=l.plugin.isParsed();me($e?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ae}`),$e)}}catch(Ae){me(Ae.toString())}}getAvailableImages(Y){let re=this.availableImages[Y];return re||(re=[]),re}getLayerIndex(Y){let re=this.layerIndexes[Y];return re||(re=this.layerIndexes[Y]=new m),re}getWorkerSource(Y,re,me){if(this.workerSources[Y]||(this.workerSources[Y]={}),this.workerSources[Y][re]||(this.workerSources[Y][re]={}),!this.workerSources[Y][re][me]){const Ae={send:($e,qe,He)=>{this.actor.send($e,qe,He,Y)}};this.workerSources[Y][re][me]=new this.workerSourceTypes[re](Ae,this.getLayerIndex(Y),this.getAvailableImages(Y))}return this.workerSources[Y][re][me]}getDEMWorkerSource(Y,re){return this.demWorkerSources[Y]||(this.demWorkerSources[Y]={}),this.demWorkerSources[Y][re]||(this.demWorkerSources[Y][re]=new A),this.demWorkerSources[Y][re]}}return l.isWorker()&&(self.worker=new Pn(self)),Pn}),u(["./shared"],function(l){var m="3.0.1";class g{static testProp(o){if(!g.docStyle)return o[0];for(let f=0;f<o.length;f++)if(o[f]in g.docStyle)return o[f];return o[0]}static create(o,f,v){const b=window.document.createElement(o);return f!==void 0&&(b.className=f),v&&v.appendChild(b),b}static createNS(o,f){return window.document.createElementNS(o,f)}static disableDrag(){g.docStyle&&g.selectProp&&(g.userSelect=g.docStyle[g.selectProp],g.docStyle[g.selectProp]="none")}static enableDrag(){g.docStyle&&g.selectProp&&(g.docStyle[g.selectProp]=g.userSelect)}static setTransform(o,f){o.style[g.transformProp]=f}static addEventListener(o,f,v,b={}){o.addEventListener(f,v,"passive"in b?b:b.capture)}static removeEventListener(o,f,v,b={}){o.removeEventListener(f,v,"passive"in b?b:b.capture)}static suppressClickInternal(o){o.preventDefault(),o.stopPropagation(),window.removeEventListener("click",g.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",g.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",g.suppressClickInternal,!0)},0)}static mousePos(o,f){const v=o.getBoundingClientRect();return new l.Point(f.clientX-v.left-o.clientLeft,f.clientY-v.top-o.clientTop)}static touchPos(o,f){const v=o.getBoundingClientRect(),b=[];for(let E=0;E<f.length;E++)b.push(new l.Point(f[E].clientX-v.left-o.clientLeft,f[E].clientY-v.top-o.clientTop));return b}static mouseButton(o){return o.button}static remove(o){o.parentNode&&o.parentNode.removeChild(o)}}g.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,g.selectProp=g.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),g.transformProp=g.testProp(["transform","WebkitTransform"]);const x={supported:!1,testSupport:function(_){!C&&I&&(A?L(_):w=_)}};let w,I,C=!1,A=!1;function L(_){const o=_.createTexture();_.bindTexture(_.TEXTURE_2D,o);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,I),_.isContextLost())return;x.supported=!0}catch{}_.deleteTexture(o),C=!0}var $;typeof document<"u"&&(I=document.createElement("img"),I.onload=function(){w&&L(w),w=null,A=!0},I.onerror=function(){C=!0,w=null},I.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(_){let o,f,v,b;_.resetRequestQueue=()=>{o=[],f=0,v=0,b={}},_.addThrottleControl=N=>{const K=v++;return b[K]=N,K},_.removeThrottleControl=N=>{delete b[N],R()},_.getImage=(N,K,Z=!0)=>{x.supported&&(N.headers||(N.headers={}),N.headers.accept="image/webp,*/*");const le={requestParameters:N,supportImageRefresh:Z,callback:K,cancelled:!1,completed:!1,cancel:()=>{le.completed||le.cancelled||(le.cancelled=!0,le.innerRequest&&(le.innerRequest.cancel(),f--),R())}};return o.push(le),R(),le};const E=N=>{const{requestParameters:K,supportImageRefresh:Z,callback:le}=N;return l.extend(K,{type:"image"}),(Z!==!1||l.isWorker()||l.getProtocolAction(K.url)||K.headers&&!Object.keys(K.headers).reduce((Se,ve)=>Se&&ve==="accept",!0)?l.makeRequest:O)(K,(Se,ve,xe,De)=>{P(N,le,Se,ve,xe,De)})},P=(N,K,Z,le,Se,ve)=>{Z?K(Z):le instanceof HTMLImageElement||le instanceof ImageBitmap?K(null,le):le&&((xe,De)=>{typeof createImageBitmap=="function"?l.arrayBufferToImageBitmap(xe,De):l.arrayBufferToImage(xe,De)})(le,(xe,De)=>{xe!=null?K(xe):De!=null&&K(null,De,{cacheControl:Se,expires:ve})}),N.cancelled||(N.completed=!0,f--,R())},R=()=>{const N=(()=>{const K=Object.keys(b);let Z=!1;if(K.length>0){for(const le of K)if(Z=b[le](),Z)break}return Z})()?l.config.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.config.MAX_PARALLEL_IMAGE_REQUESTS;for(let K=f;K<N&&o.length>0;K++){const Z=o.shift();if(Z.cancelled){K--;continue}const le=E(Z);f++,Z.innerRequest=le}},O=(N,K)=>{const Z=new Image,le=N.url;let Se=!1;const ve=N.credentials;return ve&&ve==="include"?Z.crossOrigin="use-credentials":(ve&&ve==="same-origin"||!l.sameOrigin(le))&&(Z.crossOrigin="anonymous"),Z.fetchPriority="high",Z.onload=()=>{K(null,Z),Z.onerror=Z.onload=null},Z.onerror=()=>{Se||K(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),Z.onerror=Z.onload=null},Z.src=le,{cancel:()=>{Se=!0,Z.src=""}}}}($||($={})),$.resetRequestQueue();var F,z=$;(function(_){_.Glyphs="Glyphs",_.Image="Image",_.Source="Source",_.SpriteImage="SpriteImage",_.SpriteJSON="SpriteJSON",_.Style="Style",_.Tile="Tile",_.Unknown="Unknown"})(F||(F={}));class ee{constructor(o){this._transformRequestFn=o}transformRequest(o,f){return this._transformRequestFn&&this._transformRequestFn(o,f)||{url:o}}normalizeSpriteURL(o,f,v){const b=function(E){const P=E.match(H);if(!P)throw new Error(`Unable to parse URL "${E}"`);return{protocol:P[1],authority:P[2],path:P[3]||"/",params:P[4]?P[4].split("&"):[]}}(o);return b.path+=`${f}${v}`,function(E){const P=E.params.length?`?${E.params.join("&")}`:"";return`${E.protocol}://${E.authority}${E.path}${P}`}(b)}setTransformRequest(o){this._transformRequestFn=o}}const H=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Q(_){var o=new l.ARRAY_TYPE(3);return o[0]=_[0],o[1]=_[1],o[2]=_[2],o}var ae,be=function(_,o,f){return _[0]=o[0]-f[0],_[1]=o[1]-f[1],_[2]=o[2]-f[2],_};ae=new l.ARRAY_TYPE(3),l.ARRAY_TYPE!=Float32Array&&(ae[0]=0,ae[1]=0,ae[2]=0);var te=function(_){var o=_[0],f=_[1];return o*o+f*f};function G(_){const o=[];if(typeof _=="string")o.push({id:"default",url:_});else if(_&&_.length>0){const f=[];for(const{id:v,url:b}of _){const E=`${v}${b}`;f.indexOf(E)===-1&&(f.push(E),o.push({id:v,url:b}))}}return o}function U(_,o,f,v,b){if(v)return void _(v);if(b!==Object.values(o).length||b!==Object.values(f).length)return;const E={};for(const P in o){E[P]={};const R=l.exported.getImageCanvasContext(f[P]),O=o[P];for(const N in O){const{width:K,height:Z,x:le,y:Se,sdf:ve,pixelRatio:xe,stretchX:De,stretchY:Ue,content:ot}=O[N];E[P][N]={data:null,pixelRatio:xe,sdf:ve,stretchX:De,stretchY:Ue,content:ot,spriteData:{width:K,height:Z,x:le,y:Se,context:R}}}}_(null,E)}(function(){var _=new l.ARRAY_TYPE(2);l.ARRAY_TYPE!=Float32Array&&(_[0]=0,_[1]=0)})();class B{constructor(o,f,v,b){this.context=o,this.format=v,this.texture=o.gl.createTexture(),this.update(f,b)}update(o,f,v){const{width:b,height:E}=o,P=!(this.size&&this.size[0]===b&&this.size[1]===E||v),{context:R}=this,{gl:O}=R;if(this.useMipmap=!!(f&&f.useMipmap),O.bindTexture(O.TEXTURE_2D,this.texture),R.pixelStoreUnpackFlipY.set(!1),R.pixelStoreUnpack.set(1),R.pixelStoreUnpackPremultiplyAlpha.set(this.format===O.RGBA&&(!f||f.premultiply!==!1)),P)this.size=[b,E],o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||l.isImageBitmap(o)?O.texImage2D(O.TEXTURE_2D,0,this.format,this.format,O.UNSIGNED_BYTE,o):O.texImage2D(O.TEXTURE_2D,0,this.format,b,E,0,this.format,O.UNSIGNED_BYTE,o.data);else{const{x:N,y:K}=v||{x:0,y:0};o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||l.isImageBitmap(o)?O.texSubImage2D(O.TEXTURE_2D,0,N,K,O.RGBA,O.UNSIGNED_BYTE,o):O.texSubImage2D(O.TEXTURE_2D,0,N,K,b,E,O.RGBA,O.UNSIGNED_BYTE,o.data)}this.useMipmap&&this.isSizePowerOfTwo()&&O.generateMipmap(O.TEXTURE_2D)}bind(o,f,v){const{context:b}=this,{gl:E}=b;E.bindTexture(E.TEXTURE_2D,this.texture),v!==E.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(v=E.LINEAR),o!==this.filter&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,o),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,v||o),this.filter=o),f!==this.wrap&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,f),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,f),this.wrap=f)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}function ie(_){const{userImage:o}=_;return!!(o&&o.render&&o.render())&&(_.data.replace(new Uint8Array(o.data.buffer)),!0)}class X extends l.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(o){if(this.loaded!==o&&(this.loaded=o,o)){for(const{ids:f,callback:v}of this.requestors)this._notify(f,v);this.requestors=[]}}getImage(o){const f=this.images[o];if(f&&!f.data&&f.spriteData){const v=f.spriteData;f.data=new l.RGBAImage({width:v.width,height:v.height},v.context.getImageData(v.x,v.y,v.width,v.height).data),f.spriteData=null}return f}addImage(o,f){if(this.images[o])throw new Error(`Image id ${o} already exist, use updateImage instead`);this._validate(o,f)&&(this.images[o]=f)}_validate(o,f){let v=!0;const b=f.data||f.spriteData;return this._validateStretch(f.stretchX,b&&b.width)||(this.fire(new l.ErrorEvent(new Error(`Image "${o}" has invalid "stretchX" value`))),v=!1),this._validateStretch(f.stretchY,b&&b.height)||(this.fire(new l.ErrorEvent(new Error(`Image "${o}" has invalid "stretchY" value`))),v=!1),this._validateContent(f.content,f)||(this.fire(new l.ErrorEvent(new Error(`Image "${o}" has invalid "content" value`))),v=!1),v}_validateStretch(o,f){if(!o)return!0;let v=0;for(const b of o){if(b[0]<v||b[1]<b[0]||f<b[1])return!1;v=b[1]}return!0}_validateContent(o,f){if(!o)return!0;if(o.length!==4)return!1;const v=f.spriteData,b=v&&v.width||f.data.width,E=v&&v.height||f.data.height;return!(o[0]<0||b<o[0]||o[1]<0||E<o[1]||o[2]<0||b<o[2]||o[3]<0||E<o[3]||o[2]<o[0]||o[3]<o[1])}updateImage(o,f,v=!0){const b=this.getImage(o);if(v&&(b.data.width!==f.data.width||b.data.height!==f.data.height))throw new Error(`size mismatch between old image (${b.data.width}x${b.data.height}) and new image (${f.data.width}x${f.data.height}).`);f.version=b.version+1,this.images[o]=f,this.updatedImages[o]=!0}removeImage(o){const f=this.images[o];delete this.images[o],delete this.patterns[o],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(o,f){let v=!0;if(!this.isLoaded())for(const b of o)this.images[b]||(v=!1);this.isLoaded()||v?this._notify(o,f):this.requestors.push({ids:o,callback:f})}_notify(o,f){const v={};for(const b of o){let E=this.getImage(b);E||(this.fire(new l.Event("styleimagemissing",{id:b})),E=this.getImage(b)),E?v[b]={data:E.data.clone(),pixelRatio:E.pixelRatio,sdf:E.sdf,version:E.version,stretchX:E.stretchX,stretchY:E.stretchY,content:E.content,hasRenderCallback:!!(E.userImage&&E.userImage.render)}:l.warnOnce(`Image "${b}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}f(null,v)}getPixelSize(){const{width:o,height:f}=this.atlasImage;return{width:o,height:f}}getPattern(o){const f=this.patterns[o],v=this.getImage(o);if(!v)return null;if(f&&f.position.version===v.version)return f.position;if(f)f.position.version=v.version;else{const b={w:v.data.width+2,h:v.data.height+2,x:0,y:0},E=new l.ImagePosition(b,v);this.patterns[o]={bin:b,position:E}}return this._updatePatternAtlas(),this.patterns[o].position}bind(o){const f=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new B(o,this.atlasImage,f.RGBA),this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const o=[];for(const E in this.patterns)o.push(this.patterns[E].bin);const{w:f,h:v}=l.potpack(o),b=this.atlasImage;b.resize({width:f||1,height:v||1});for(const E in this.patterns){const{bin:P}=this.patterns[E],R=P.x+1,O=P.y+1,N=this.getImage(E).data,K=N.width,Z=N.height;l.RGBAImage.copy(N,b,{x:0,y:0},{x:R,y:O},{width:K,height:Z}),l.RGBAImage.copy(N,b,{x:0,y:Z-1},{x:R,y:O-1},{width:K,height:1}),l.RGBAImage.copy(N,b,{x:0,y:0},{x:R,y:O+Z},{width:K,height:1}),l.RGBAImage.copy(N,b,{x:K-1,y:0},{x:R-1,y:O},{width:1,height:Z}),l.RGBAImage.copy(N,b,{x:0,y:0},{x:R+K,y:O},{width:1,height:Z})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(o){for(const f of o){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const v=this.getImage(f);v||l.warnOnce(`Image with ID: "${f}" was not found`),ie(v)&&this.updateImage(f,v)}}}const ne=1e20;function Ee(_,o,f,v,b,E,P,R,O){for(let N=o;N<o+v;N++)Ie(_,f*E+N,E,b,P,R,O);for(let N=f;N<f+b;N++)Ie(_,N*E+o,1,v,P,R,O)}function Ie(_,o,f,v,b,E,P){E[0]=0,P[0]=-ne,P[1]=ne,b[0]=_[o];for(let R=1,O=0,N=0;R<v;R++){b[R]=_[o+R*f];const K=R*R;do{const Z=E[O];N=(b[R]-b[Z]+K-Z*Z)/(R-Z)/2}while(N<=P[O]&&--O>-1);O++,E[O]=R,P[O]=N,P[O+1]=ne}for(let R=0,O=0;R<v;R++){for(;P[O+1]<R;)O++;const N=E[O],K=R-N;_[o+R*f]=b[N]+K*K}}class Xe{constructor(o,f){this.requestManager=o,this.localIdeographFontFamily=f,this.entries={}}setURL(o){this.url=o}getGlyphs(o,f){const v=[];for(const b in o)for(const E of o[b])v.push({stack:b,id:E});l.asyncAll(v,({stack:b,id:E},P)=>{let R=this.entries[b];R||(R=this.entries[b]={glyphs:{},requests:{},ranges:{}});let O=R.glyphs[E];if(O!==void 0)return void P(null,{stack:b,id:E,glyph:O});if(O=this._tinySDF(R,b,E),O)return R.glyphs[E]=O,void P(null,{stack:b,id:E,glyph:O});const N=Math.floor(E/256);if(256*N>65535)return void P(new Error("glyphs > 65535 not supported"));if(R.ranges[N])return void P(null,{stack:b,id:E,glyph:O});if(!this.url)return void P(new Error("glyphsUrl is not set"));let K=R.requests[N];K||(K=R.requests[N]=[],Xe.loadGlyphRange(b,N,this.url,this.requestManager,(Z,le)=>{if(le){for(const Se in le)this._doesCharSupportLocalGlyph(+Se)||(R.glyphs[+Se]=le[+Se]);R.ranges[N]=!0}for(const Se of K)Se(Z,le);delete R.requests[N]})),K.push((Z,le)=>{Z?P(Z):le&&P(null,{stack:b,id:E,glyph:le[E]||null})})},(b,E)=>{if(b)f(b);else if(E){const P={};for(const{stack:R,id:O,glyph:N}of E)(P[R]||(P[R]={}))[O]=N&&{id:N.id,bitmap:N.bitmap.clone(),metrics:N.metrics};f(null,P)}})}_doesCharSupportLocalGlyph(o){return!!this.localIdeographFontFamily&&(l.unicodeBlockLookup["CJK Unified Ideographs"](o)||l.unicodeBlockLookup["Hangul Syllables"](o)||l.unicodeBlockLookup.Hiragana(o)||l.unicodeBlockLookup.Katakana(o))}_tinySDF(o,f,v){const b=this.localIdeographFontFamily;if(!b||!this._doesCharSupportLocalGlyph(v))return;let E=o.tinySDF;if(!E){let R="400";/bold/i.test(f)?R="900":/medium/i.test(f)?R="500":/light/i.test(f)&&(R="200"),E=o.tinySDF=new Xe.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:b,fontWeight:R})}const P=E.draw(String.fromCharCode(v));return{id:v,bitmap:new l.AlphaImage({width:P.width||30,height:P.height||30},P.data),metrics:{width:P.glyphWidth||24,height:P.glyphHeight||24,left:P.glyphLeft||0,top:P.glyphTop-27||-8,advance:P.glyphAdvance||24}}}}Xe.loadGlyphRange=function(_,o,f,v,b){const E=256*o,P=E+255,R=v.transformRequest(f.replace("{fontstack}",_).replace("{range}",`${E}-${P}`),F.Glyphs);l.getArrayBuffer(R,(O,N)=>{if(O)b(O);else if(N){const K={};for(const Z of l.parseGlyphPbf(N))K[Z.id]=Z;b(null,K)}})},Xe.TinySDF=class{constructor({fontSize:_=24,buffer:o=3,radius:f=8,cutoff:v=.25,fontFamily:b="sans-serif",fontWeight:E="normal",fontStyle:P="normal"}={}){this.buffer=o,this.cutoff=v,this.radius=f;const R=this.size=_+4*o,O=this._createCanvas(R),N=this.ctx=O.getContext("2d",{willReadFrequently:!0});N.font=`${P} ${E} ${_}px ${b}`,N.textBaseline="alphabetic",N.textAlign="left",N.fillStyle="black",this.gridOuter=new Float64Array(R*R),this.gridInner=new Float64Array(R*R),this.f=new Float64Array(R),this.z=new Float64Array(R+1),this.v=new Uint16Array(R)}_createCanvas(_){const o=document.createElement("canvas");return o.width=o.height=_,o}draw(_){const{width:o,actualBoundingBoxAscent:f,actualBoundingBoxDescent:v,actualBoundingBoxLeft:b,actualBoundingBoxRight:E}=this.ctx.measureText(_),P=Math.ceil(f),R=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(E-b))),O=Math.min(this.size-this.buffer,P+Math.ceil(v)),N=R+2*this.buffer,K=O+2*this.buffer,Z=Math.max(N*K,0),le=new Uint8ClampedArray(Z),Se={data:le,width:N,height:K,glyphWidth:R,glyphHeight:O,glyphTop:P,glyphLeft:0,glyphAdvance:o};if(R===0||O===0)return Se;const{ctx:ve,buffer:xe,gridInner:De,gridOuter:Ue}=this;ve.clearRect(xe,xe,R,O),ve.fillText(_,xe,xe+P);const ot=ve.getImageData(xe,xe,R,O);Ue.fill(ne,0,Z),De.fill(0,0,Z);for(let Me=0;Me<O;Me++)for(let it=0;it<R;it++){const _t=ot.data[4*(Me*R+it)+3]/255;if(_t===0)continue;const At=(Me+xe)*N+it+xe;if(_t===1)Ue[At]=0,De[At]=ne;else{const Rt=.5-_t;Ue[At]=Rt>0?Rt*Rt:0,De[At]=Rt<0?Rt*Rt:0}}Ee(Ue,0,0,N,K,N,this.f,this.v,this.z),Ee(De,xe,xe,R,O,N,this.f,this.v,this.z);for(let Me=0;Me<Z;Me++){const it=Math.sqrt(Ue[Me])-Math.sqrt(De[Me]);le[Me]=Math.round(255-255*(it/this.radius+this.cutoff))}return Se}};class lt{constructor(){this.specification=l.v8Spec.light.position}possiblyEvaluate(o,f){return l.sphericalToCartesian(o.expression.evaluate(f))}interpolate(o,f,v){return{x:l.interpolate.number(o.x,f.x,v),y:l.interpolate.number(o.y,f.y,v),z:l.interpolate.number(o.z,f.z,v)}}}const st="-transition";let $t,It;class nt extends l.Evented{constructor(o){super(),$t=$t||new l.Properties({anchor:new l.DataConstantProperty(l.v8Spec.light.anchor),position:new lt,color:new l.DataConstantProperty(l.v8Spec.light.color),intensity:new l.DataConstantProperty(l.v8Spec.light.intensity)}),this._transitionable=new l.Transitionable($t),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,f={}){if(!this._validate(l.validateLight,o,f))for(const v in o){const b=o[v];v.endsWith(st)?this._transitionable.setTransition(v.slice(0,-st.length),b):this._transitionable.setValue(v,b)}}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,f,v){return(!v||v.validate!==!1)&&l.emitValidationErrors(this,o.call(l.validateStyle,l.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:l.v8Spec})))}}class et{constructor(o,f){this.width=o,this.height=f,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(o,f){const v=o.join(",")+String(f);return this.dashEntry[v]||(this.dashEntry[v]=this.addDash(o,f)),this.dashEntry[v]}getDashRanges(o,f,v){const b=[];let E=o.length%2==1?-o[o.length-1]*v:0,P=o[0]*v,R=!0;b.push({left:E,right:P,isDash:R,zeroLength:o[0]===0});let O=o[0];for(let N=1;N<o.length;N++){R=!R;const K=o[N];E=O*v,O+=K,P=O*v,b.push({left:E,right:P,isDash:R,zeroLength:K===0})}return b}addRoundDash(o,f,v){const b=f/2;for(let E=-v;E<=v;E++){const P=this.width*(this.nextRow+v+E);let R=0,O=o[R];for(let N=0;N<this.width;N++){N/O.right>1&&(O=o[++R]);const K=Math.abs(N-O.left),Z=Math.abs(N-O.right),le=Math.min(K,Z);let Se;const ve=E/v*(b+1);if(O.isDash){const xe=b-Math.abs(ve);Se=Math.sqrt(le*le+xe*xe)}else Se=b-Math.sqrt(le*le+ve*ve);this.data[P+N]=Math.max(0,Math.min(255,Se+128))}}}addRegularDash(o){for(let R=o.length-1;R>=0;--R){const O=o[R],N=o[R+1];O.zeroLength?o.splice(R,1):N&&N.isDash===O.isDash&&(N.left=O.left,o.splice(R,1))}const f=o[0],v=o[o.length-1];f.isDash===v.isDash&&(f.left=v.left-this.width,v.right=f.right+this.width);const b=this.width*this.nextRow;let E=0,P=o[E];for(let R=0;R<this.width;R++){R/P.right>1&&(P=o[++E]);const O=Math.abs(R-P.left),N=Math.abs(R-P.right),K=Math.min(O,N);this.data[b+R]=Math.max(0,Math.min(255,(P.isDash?K:-K)+128))}}addDash(o,f){const v=f?7:0,b=2*v+1;if(this.nextRow+b>this.height)return l.warnOnce("LineAtlas out of space"),null;let E=0;for(let R=0;R<o.length;R++)E+=o[R];if(E!==0){const R=this.width/E,O=this.getDashRanges(o,this.width,R);f?this.addRoundDash(O,R,v):this.addRegularDash(O)}const P={y:(this.nextRow+v+.5)/this.height,height:2*v/this.height,width:E};return this.nextRow+=b,this.dirty=!0,P}bind(o){const f=o.gl;this.texture?(f.bindTexture(f.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,f.texSubImage2D(f.TEXTURE_2D,0,0,0,this.width,this.height,f.ALPHA,f.UNSIGNED_BYTE,this.data))):(this.texture=f.createTexture(),f.bindTexture(f.TEXTURE_2D,this.texture),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texImage2D(f.TEXTURE_2D,0,f.ALPHA,this.width,this.height,0,f.ALPHA,f.UNSIGNED_BYTE,this.data))}}class dt{constructor(o,f,v){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=v;const b=this.workerPool.acquire(v);for(let E=0;E<b.length;E++){const P=new dt.Actor(b[E],f,v);P.name=`Worker ${E}`,this.actors.push(P)}if(!this.actors.length)throw new Error("No actors found")}broadcast(o,f,v){l.asyncAll(this.actors,(b,E)=>{b.send(o,f,E)},v=v||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(o=!0){this.actors.forEach(f=>{f.remove()}),this.actors=[],o&&this.workerPool.release(this.id)}}function Be(_,o,f){const v=function(b,E){if(b)return f(b);if(E){const P=l.pick(l.extend(E,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);E.vector_layers&&(P.vectorLayers=E.vector_layers,P.vectorLayerIds=P.vectorLayers.map(R=>R.id)),f(null,P)}};return _.url?l.getJSON(o.transformRequest(_.url,F.Source),v):l.exported.frame(()=>v(null,_))}dt.Actor=l.Actor;class Ke{constructor(o,f){o&&(f?this.setSouthWest(o).setNorthEast(f):Array.isArray(o)&&(o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1])))}setNorthEast(o){return this._ne=o instanceof l.LngLat?new l.LngLat(o.lng,o.lat):l.LngLat.convert(o),this}setSouthWest(o){return this._sw=o instanceof l.LngLat?new l.LngLat(o.lng,o.lat):l.LngLat.convert(o),this}extend(o){const f=this._sw,v=this._ne;let b,E;if(o instanceof l.LngLat)b=o,E=o;else{if(!(o instanceof Ke))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(Ke.convert(o)):this.extend(l.LngLat.convert(o)):o&&("lng"in o||"lon"in o)&&"lat"in o?this.extend(l.LngLat.convert(o)):this;if(b=o._sw,E=o._ne,!b||!E)return this}return f||v?(f.lng=Math.min(b.lng,f.lng),f.lat=Math.min(b.lat,f.lat),v.lng=Math.max(E.lng,v.lng),v.lat=Math.max(E.lat,v.lat)):(this._sw=new l.LngLat(b.lng,b.lat),this._ne=new l.LngLat(E.lng,E.lat)),this}getCenter(){return new l.LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.LngLat(this.getWest(),this.getNorth())}getSouthEast(){return new l.LngLat(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:f,lat:v}=l.LngLat.convert(o);let b=this._sw.lng<=f&&f<=this._ne.lng;return this._sw.lng>this._ne.lng&&(b=this._sw.lng>=f&&f>=this._ne.lng),this._sw.lat<=v&&v<=this._ne.lat&&b}static convert(o){return o instanceof Ke?o:o&&new Ke(o)}static fromLngLat(o,f=0){const v=360*f/40075017,b=v/Math.cos(Math.PI/180*o.lat);return new Ke(new l.LngLat(o.lng-b,o.lat-v),new l.LngLat(o.lng+b,o.lat+v))}}class ut{constructor(o,f,v){this.bounds=Ke.convert(this.validateBounds(o)),this.minzoom=f||0,this.maxzoom=v||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const f=Math.pow(2,o.z),v=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*f),b=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*f),E=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*f),P=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*f);return o.x>=v&&o.x<E&&o.y>=b&&o.y<P}}class Ot extends l.Evented{constructor(o,f,v,b){if(super(),this.id=o,this.dispatcher=v,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(f,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},f),this._collectResourceTiming=f.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b)}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Be(this._options,this.map._requestManager,(o,f)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),o?this.fire(new l.ErrorEvent(o)):f&&(l.extend(this,f),f.bounds&&(this.tileBounds=new ut(f.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}setSourceProperty(o){this._tileJSONRequest&&this._tileJSONRequest.cancel(),o(),this.load()}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}loadTile(o,f){const v=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),b={request:this.map._requestManager.transformRequest(v,F.Tile),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function E(P,R){return delete o.request,o.aborted?f(null):P&&P.status!==404?f(P):(R&&R.resourceTiming&&(o.resourceTiming=R.resourceTiming),this.map._refreshExpiredTiles&&R&&o.setExpiryData(R),o.loadVectorData(R,this.map.painter),f(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}b.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired"?o.state==="loading"?o.reloadCallback=f:o.request=o.actor.send("reloadTile",b,E.bind(this)):(o.actor=this.dispatcher.getActor(),o.request=o.actor.send("loadTile",b,E.bind(this)))}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id},void 0)}unloadTile(o){o.unloadVectorData(),o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Vt extends l.Evented{constructor(o,f,v,b){super(),this.id=o,this.dispatcher=v,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},f),l.extend(this,l.pick(f,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Be(this._options,this.map._requestManager,(o,f)=>{this._tileJSONRequest=null,this._loaded=!0,o?this.fire(new l.ErrorEvent(o)):f&&(l.extend(this,f),f.bounds&&(this.tileBounds=new ut(f.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o,f){const v=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);o.request=z.getImage(this.map._requestManager.transformRequest(v,F.Tile),(b,E,P)=>{if(delete o.request,o.aborted)o.state="unloaded",f(null);else if(b)o.state="errored",f(b);else if(E){this.map._refreshExpiredTiles&&P&&o.setExpiryData(P);const R=this.map.painter.context,O=R.gl;o.texture=this.map.painter.getTileTexture(E.width),o.texture?o.texture.update(E,{useMipmap:!0}):(o.texture=new B(R,E,O.RGBA,{useMipmap:!0}),o.texture.bind(O.LINEAR,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),R.extTextureFilterAnisotropic&&O.texParameterf(O.TEXTURE_2D,R.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,R.extTextureFilterAnisotropicMax)),o.state="loaded",f(null)}},this.map._refreshExpiredTiles)}abortTile(o,f){o.request&&(o.request.cancel(),delete o.request),f()}unloadTile(o,f){o.texture&&this.map.painter.saveTileTexture(o.texture),f()}hasTransition(){return!1}}class _n extends Vt{constructor(o,f,v,b){super(o,f,v,b),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},f),this.encoding=f.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(o,f){const v=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function b(E,P){E&&(o.state="errored",f(E)),P&&(o.dem=P,o.needsHillshadePrepare=!0,o.needsTerrainPrepare=!0,o.state="loaded",f(null))}o.request=z.getImage(this.map._requestManager.transformRequest(v,F.Tile),function(E,P){if(delete o.request,o.aborted)o.state="unloaded",f(null);else if(E)o.state="errored",f(E);else if(P){this.map._refreshExpiredTiles&&o.setExpiryData(P),delete P.cacheControl,delete P.expires;const R=l.isImageBitmap(P)&&(It==null&&(It=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),It)?P:l.exported.getImageData(P,1),O={uid:o.uid,coord:o.tileID,source:this.id,rawImageData:R,encoding:this.encoding};o.actor&&o.state!=="expired"||(o.actor=this.dispatcher.getActor(),o.actor.send("loadDEMTile",O,b.bind(this)))}}.bind(this),this.map._refreshExpiredTiles),o.neighboringTiles=this._getNeighboringTiles(o.tileID)}_getNeighboringTiles(o){const f=o.canonical,v=Math.pow(2,f.z),b=(f.x-1+v)%v,E=f.x===0?o.wrap-1:o.wrap,P=(f.x+1+v)%v,R=f.x+1===v?o.wrap+1:o.wrap,O={};return O[new l.OverscaledTileID(o.overscaledZ,E,f.z,b,f.y).key]={backfilled:!1},O[new l.OverscaledTileID(o.overscaledZ,R,f.z,P,f.y).key]={backfilled:!1},f.y>0&&(O[new l.OverscaledTileID(o.overscaledZ,E,f.z,b,f.y-1).key]={backfilled:!1},O[new l.OverscaledTileID(o.overscaledZ,o.wrap,f.z,f.x,f.y-1).key]={backfilled:!1},O[new l.OverscaledTileID(o.overscaledZ,R,f.z,P,f.y-1).key]={backfilled:!1}),f.y+1<v&&(O[new l.OverscaledTileID(o.overscaledZ,E,f.z,b,f.y+1).key]={backfilled:!1},O[new l.OverscaledTileID(o.overscaledZ,o.wrap,f.z,f.x,f.y+1).key]={backfilled:!1},O[new l.OverscaledTileID(o.overscaledZ,R,f.z,P,f.y+1).key]={backfilled:!1}),O}unloadTile(o){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&o.actor.send("removeDEMTile",{uid:o.uid,source:this.id})}}class qt extends l.Evented{constructor(o,f,v,b){super(),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=v.getActor(),this.setEventedParent(b),this._data=f.data,this._options=l.extend({},f),this._collectResourceTiming=f.collectResourceTiming,f.maxzoom!==void 0&&(this.maxzoom=f.maxzoom),f.type&&(this.type=f.type),f.attribution&&(this.attribution=f.attribution),this.promoteId=f.promoteId;const E=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:f.cluster||!1,geojsonVtOptions:{buffer:(f.buffer!==void 0?f.buffer:128)*E,tolerance:(f.tolerance!==void 0?f.tolerance:.375)*E,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:f.lineMetrics||!1,generateId:f.generateId||!1},superclusterOptions:{maxZoom:f.clusterMaxZoom!==void 0?f.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,f.clusterMinPoints||2),extent:l.EXTENT,radius:(f.clusterRadius||50)*E,log:!1,generateId:f.generateId||!1},clusterProperties:f.clusterProperties,filter:f.filter},f.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){this._updateWorkerData()}onAdd(o){this.map=o,this.load()}setData(o){return this._data=o,this._updateWorkerData(),this}updateData(o){return this._updateWorkerData(o),this}setClusterOptions(o){return this.workerOptions.cluster=o.cluster,o&&(o.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=o.clusterRadius),o.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=o.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(o,f){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:o,source:this.id},f),this}getClusterChildren(o,f){return this.actor.send("geojson.getClusterChildren",{clusterId:o,source:this.id},f),this}getClusterLeaves(o,f,v,b){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:o,limit:f,offset:v},b),this}_updateWorkerData(o){const f=l.extend({},this.workerOptions);o?f.dataDiff=o:typeof this._data=="string"?(f.request=this.map._requestManager.transformRequest(l.exported.resolveURL(this._data),F.Source),f.request.collectResourceTiming=this._collectResourceTiming):f.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,f,(v,b)=>{if(this._pendingLoads--,this._removed||b&&b.abandoned)return void this.fire(new l.Event("dataabort",{dataType:"source"}));let E=null;if(b&&b.resourceTiming&&b.resourceTiming[this.id]&&(E=b.resourceTiming[this.id].slice(0)),v)return void this.fire(new l.ErrorEvent(v));const P={dataType:"source"};this._collectResourceTiming&&E&&E.length>0&&l.extend(P,{resourceTiming:E}),this.fire(new l.Event("data",{...P,sourceDataType:"metadata"})),this.fire(new l.Event("data",{...P,sourceDataType:"content"}))})}loaded(){return this._pendingLoads===0}loadTile(o,f){const v=o.actor?"reloadTile":"loadTile";o.actor=this.actor;const b={type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};o.request=this.actor.send(v,b,(E,P)=>(delete o.request,o.unloadVectorData(),o.aborted?f(null):E?f(E):(o.loadVectorData(P,this.map.painter,v==="reloadTile"),f(null))))}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.aborted=!0}unloadTile(o){o.unloadVectorData(),this.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return l.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var _e=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ke extends l.Evented{constructor(o,f,v,b){super(),this.id=o,this.dispatcher=v,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(b),this.options=f}load(o,f){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=z.getImage(this.map._requestManager.transformRequest(this.url,F.Image),(v,b)=>{this._request=null,this._loaded=!0,v?this.fire(new l.ErrorEvent(v)):b&&(this.image=b,o&&(this.coordinates=o),f&&f(),this._finishLoading())})}loaded(){return this._loaded}updateImage(o){return o.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=o.url,this.load(o.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(o){this.coordinates=o;const f=o.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(b){let E=1/0,P=1/0,R=-1/0,O=-1/0;for(const le of b)E=Math.min(E,le.x),P=Math.min(P,le.y),R=Math.max(R,le.x),O=Math.max(O,le.y);const N=Math.max(R-E,O-P),K=Math.max(0,Math.floor(-Math.log(N)/Math.LN2)),Z=Math.pow(2,K);return new l.CanonicalTileID(K,Math.floor((E+R)/2*Z),Math.floor((P+O)/2*Z))}(f),this.minzoom=this.maxzoom=this.tileID.z;const v=f.map(b=>this.tileID.getTilePoint(b)._round());return this._boundsArray=new l.RasterBoundsArray,this._boundsArray.emplaceBack(v[0].x,v[0].y,0,0),this._boundsArray.emplaceBack(v[1].x,v[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(v[3].x,v[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(v[2].x,v[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const o=this.map.painter.context,f=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,_e.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new B(o,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let v=!1;for(const b in this.tiles){const E=this.tiles[b];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,v=!0)}v&&this.fire(new l.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(o,f){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},f(null)):(o.state="errored",f(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class ge extends ke{constructor(o,f,v,b){super(o,f,v,b),this.roundZoom=!0,this.type="video",this.options=f}load(){this._loaded=!1;const o=this.options;this.urls=[];for(const f of o.urls)this.urls.push(this.map._requestManager.transformRequest(f,F.Source).url);l.getVideo(this.urls,(f,v)=>{this._loaded=!0,f?this.fire(new l.ErrorEvent(f)):v&&(this.video=v,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(o){if(this.video){const f=this.video.seekable;o<f.start(0)||o>f.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${f.start(0)} and ${f.end(0)}-second mark.`))):this.video.currentTime=o}}getVideo(){return this.video}onAdd(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const o=this.map.painter.context,f=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,_e.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE),f.texSubImage2D(f.TEXTURE_2D,0,0,0,f.RGBA,f.UNSIGNED_BYTE,this.video)):(this.texture=new B(o,this.video,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let v=!1;for(const b in this.tiles){const E=this.tiles[b];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,v=!0)}v&&this.fire(new l.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ft extends ke{constructor(o,f,v,b){super(o,f,v,b),f.coordinates?Array.isArray(f.coordinates)&&f.coordinates.length===4&&!f.coordinates.some(E=>!Array.isArray(E)||E.length!==2||E.some(P=>typeof P!="number"))||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${o}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${o}`,null,'missing required property "coordinates"'))),f.animate&&typeof f.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${o}`,null,'optional "animate" property must be a boolean value'))),f.canvas?typeof f.canvas=="string"||f.canvas instanceof HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${o}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${o}`,null,'missing required property "canvas"'))),this.options=f,this.animate=f.animate===void 0||f.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const f=this.map.painter.context,v=f.gl;this.boundsBuffer||(this.boundsBuffer=f.createVertexBuffer(this._boundsArray,_e.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new B(f,this.canvas,v.RGBA,{premultiply:!0});let b=!1;for(const E in this.tiles){const P=this.tiles[E];P.state!=="loaded"&&(P.state="loaded",P.texture=this.texture,b=!0)}b&&this.fire(new l.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const o of[this.canvas.width,this.canvas.height])if(isNaN(o)||o<=0)return!0;return!1}}const q={vector:Ot,raster:Vt,"raster-dem":_n,geojson:qt,video:ge,image:ke,canvas:ft};function fe(_,o){const f=l.create();return l.translate(f,f,[1,1,0]),l.scale(f,f,[.5*_.width,.5*_.height,1]),l.multiply(f,f,_.calculatePosMatrix(o.toUnwrapped()))}function Pe(_,o,f,v,b,E){const P=function(Z,le,Se){if(Z)for(const ve of Z){const xe=le[ve];if(xe&&xe.source===Se&&xe.type==="fill-extrusion")return!0}else for(const ve in le){const xe=le[ve];if(xe.source===Se&&xe.type==="fill-extrusion")return!0}return!1}(b&&b.layers,o,_.id),R=E.maxPitchScaleFactor(),O=_.tilesIn(v,R,P);O.sort(We);const N=[];for(const Z of O)N.push({wrappedTileID:Z.tileID.wrapped().key,queryResults:Z.tile.queryRenderedFeatures(o,f,_._state,Z.queryGeometry,Z.cameraQueryGeometry,Z.scale,b,E,R,fe(_.transform,Z.tileID))});const K=function(Z){const le={},Se={};for(const ve of Z){const xe=ve.queryResults,De=ve.wrappedTileID,Ue=Se[De]=Se[De]||{};for(const ot in xe){const Me=xe[ot],it=Ue[ot]=Ue[ot]||{},_t=le[ot]=le[ot]||[];for(const At of Me)it[At.featureIndex]||(it[At.featureIndex]=!0,_t.push(At))}}return le}(N);for(const Z in K)K[Z].forEach(le=>{const Se=le.feature,ve=_.getFeatureState(Se.layer["source-layer"],Se.id);Se.source=Se.layer.source,Se.layer["source-layer"]&&(Se.sourceLayer=Se.layer["source-layer"]),Se.state=ve});return K}function We(_,o){const f=_.tileID,v=o.tileID;return f.overscaledZ-v.overscaledZ||f.canonical.y-v.canonical.y||f.wrap-v.wrap||f.canonical.x-v.canonical.x}class pt{constructor(o,f){this.timeAdded=0,this.fadeEndTime=0,this.tileID=o,this.uid=l.uniqueId(),this.uses=0,this.tileSize=f,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(o){const f=o+this.timeAdded;f<this.fadeEndTime||(this.fadeEndTime=f)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(o){this.demTexture&&o.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(o,f,v){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(b,E){const P={};if(!E)return P;for(const R of b){const O=R.layerIds.map(N=>E.getLayer(N)).filter(Boolean);if(O.length!==0){R.layers=O,R.stateDependentLayerIds&&(R.stateDependentLayers=R.stateDependentLayerIds.map(N=>O.filter(K=>K.id===N)[0]));for(const N of O)P[N.id]=R}}return P}(o.buckets,f.style),this.hasSymbolBuckets=!1;for(const b in this.buckets){const E=this.buckets[b];if(E instanceof l.SymbolBucket){if(this.hasSymbolBuckets=!0,!v)break;E.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const b in this.buckets){const E=this.buckets[b];if(E instanceof l.SymbolBucket&&E.hasRTLText){this.hasRTLText=!0,l.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const b in this.buckets){const E=this.buckets[b];this.queryPadding=Math.max(this.queryPadding,f.style.getLayer(b).queryRadius(E))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage)}else this.collisionBoxArray=new l.CollisionBoxArray}unloadVectorData(){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(o){return this.buckets[o.id]}upload(o){for(const v in this.buckets){const b=this.buckets[v];b.uploadPending()&&b.upload(o)}const f=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new B(o,this.imageAtlas.image,f.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new B(o,this.glyphAtlasImage,f.ALPHA),this.glyphAtlasImage=null)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,f,v,b,E,P,R,O,N,K){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:b,cameraQueryGeometry:E,scale:P,tileSize:this.tileSize,pixelPosMatrix:K,transform:O,params:R,queryPadding:this.queryPadding*N},o,f,v):{}}querySourceFeatures(o,f){const v=this.latestFeatureIndex;if(!v||!v.rawTileData)return;const b=v.loadVTLayers(),E=f&&f.sourceLayer?f.sourceLayer:"",P=b._geojsonTileLayer||b[E];if(!P)return;const R=l.createFilter(f&&f.filter),{z:O,x:N,y:K}=this.tileID.canonical,Z={z:O,x:N,y:K};for(let le=0;le<P.length;le++){const Se=P.feature(le);if(R.needGeometry){const De=l.toEvaluationFeature(Se,!0);if(!R.filter(new l.EvaluationParameters(this.tileID.overscaledZ),De,this.tileID.canonical))continue}else if(!R.filter(new l.EvaluationParameters(this.tileID.overscaledZ),Se))continue;const ve=v.getId(Se,E),xe=new l.GeoJSONFeature(Se,O,N,K,ve);xe.tile=Z,o.push(xe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const f=this.expirationTime;if(o.cacheControl){const v=l.parseCacheControl(o.cacheControl);v["max-age"]&&(this.expirationTime=Date.now()+1e3*v["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const v=Date.now();let b=!1;if(this.expirationTime>v)b=!1;else if(f)if(this.expirationTime<f)b=!0;else{const E=this.expirationTime-f;E?this.expirationTime=v+Math.max(E,3e4):b=!0}else b=!0;b?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(o,f){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(o).length===0)return;const v=this.latestFeatureIndex.loadVTLayers();for(const b in this.buckets){if(!f.style.hasLayer(b))continue;const E=this.buckets[b],P=E.layers[0].sourceLayer||"_geojsonTileLayer",R=v[P],O=o[P];if(!R||!O||Object.keys(O).length===0)continue;E.update(O,R,this.imageAtlas&&this.imageAtlas.patternPositions||{});const N=f&&f.style&&f.style.getLayer(b);N&&(this.queryPadding=Math.max(this.queryPadding,N.queryRadius(E)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=l.exported.now()+o}setDependencies(o,f){const v={};for(const b of f)v[b]=!0;this.dependencies[o]=v}hasDependency(o,f){for(const v of o){const b=this.dependencies[v];if(b){for(const E of f)if(b[E])return!0}}return!1}}class ht{constructor(o,f){this.max=o,this.onRemove=f,this.reset()}reset(){for(const o in this.data)for(const f of this.data[o])f.timeout&&clearTimeout(f.timeout),this.onRemove(f.value);return this.data={},this.order=[],this}add(o,f,v){const b=o.wrapped().key;this.data[b]===void 0&&(this.data[b]=[]);const E={value:f,timeout:void 0};if(v!==void 0&&(E.timeout=setTimeout(()=>{this.remove(o,E)},v)),this.data[b].push(E),this.order.push(b),this.order.length>this.max){const P=this._getAndRemoveByKey(this.order[0]);P&&this.onRemove(P)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const f=this.data[o].shift();return f.timeout&&clearTimeout(f.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),f.value}getByKey(o){const f=this.data[o];return f?f[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,f){if(!this.has(o))return this;const v=o.wrapped().key,b=f===void 0?0:this.data[v].indexOf(f),E=this.data[v][b];return this.data[v].splice(b,1),E.timeout&&clearTimeout(E.timeout),this.data[v].length===0&&delete this.data[v],this.onRemove(E.value),this.order.splice(this.order.indexOf(v),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const f=this._getAndRemoveByKey(this.order[0]);f&&this.onRemove(f)}return this}filter(o){const f=[];for(const v in this.data)for(const b of this.data[v])o(b.value)||f.push(b);for(const v of f)this.remove(v.value.tileID,v)}}class zt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,f,v){const b=String(f);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][b]=this.stateChanges[o][b]||{},l.extend(this.stateChanges[o][b],v),this.deletedStates[o]===null){this.deletedStates[o]={};for(const E in this.state[o])E!==b&&(this.deletedStates[o][E]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][b]===null){this.deletedStates[o][b]={};for(const E in this.state[o][b])v[E]||(this.deletedStates[o][b][E]=null)}else for(const E in v)this.deletedStates[o]&&this.deletedStates[o][b]&&this.deletedStates[o][b][E]===null&&delete this.deletedStates[o][b][E]}removeFeatureState(o,f,v){if(this.deletedStates[o]===null)return;const b=String(f);if(this.deletedStates[o]=this.deletedStates[o]||{},v&&f!==void 0)this.deletedStates[o][b]!==null&&(this.deletedStates[o][b]=this.deletedStates[o][b]||{},this.deletedStates[o][b][v]=null);else if(f!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][b])for(v in this.deletedStates[o][b]={},this.stateChanges[o][b])this.deletedStates[o][b][v]=null;else this.deletedStates[o][b]=null;else this.deletedStates[o]=null}getState(o,f){const v=String(f),b=l.extend({},(this.state[o]||{})[v],(this.stateChanges[o]||{})[v]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){const E=this.deletedStates[o][f];if(E===null)return{};for(const P in E)delete b[P]}return b}initializeTileState(o,f){o.setFeatureState(this.state,f)}coalesceChanges(o,f){const v={};for(const b in this.stateChanges){this.state[b]=this.state[b]||{};const E={};for(const P in this.stateChanges[b])this.state[b][P]||(this.state[b][P]={}),l.extend(this.state[b][P],this.stateChanges[b][P]),E[P]=this.state[b][P];v[b]=E}for(const b in this.deletedStates){this.state[b]=this.state[b]||{};const E={};if(this.deletedStates[b]===null)for(const P in this.state[b])E[P]={},this.state[b][P]={};else for(const P in this.deletedStates[b]){if(this.deletedStates[b][P]===null)this.state[b][P]={};else for(const R of Object.keys(this.deletedStates[b][P]))delete this.state[b][P][R];E[P]=this.state[b][P]}v[b]=v[b]||{},l.extend(v[b],E)}if(this.stateChanges={},this.deletedStates={},Object.keys(v).length!==0)for(const b in o)o[b].setFeatureState(v,f)}}class Dt extends l.Evented{constructor(o,f,v){super(),this.id=o,this.dispatcher=v,this.on("data",b=>{b.dataType==="source"&&b.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&b.dataType==="source"&&b.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(b,E,P,R){const O=new q[E.type](b,E,P,R);if(O.id!==b)throw new Error(`Expected Source id to be ${b} instead of ${O.id}`);return l.bindAll(["load","abort","unload","serialize","prepare"],O),O}(o,f,v,this),this._tiles={},this._cache=new ht(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new zt,this._didEmitContent=!1,this._updated=!1}onAdd(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(o)}onRemove(o){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(o)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const o in this._tiles){const f=this._tiles[o];if(f.state!=="loaded"&&f.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(o,f){return this._source.loadTile(o,f)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o,()=>{})}_abortTile(o){this._source.abortTile&&this._source.abortTile(o,()=>{}),this._source.fire(new l.Event("dataabort",{tile:o,coord:o.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const f in this._tiles){const v=this._tiles[f];v.upload(o),v.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(o=>o.tileID).sort(Gt).map(o=>o.key)}getRenderableIds(o){const f=[];for(const v in this._tiles)this._isIdRenderable(v,o)&&f.push(this._tiles[v]);return o?f.sort((v,b)=>{const E=v.tileID,P=b.tileID,R=new l.Point(E.canonical.x,E.canonical.y)._rotate(this.transform.angle),O=new l.Point(P.canonical.x,P.canonical.y)._rotate(this.transform.angle);return E.overscaledZ-P.overscaledZ||O.y-R.y||O.x-R.x}).map(v=>v.tileID.key):f.map(v=>v.tileID).sort(Gt).map(v=>v.key)}hasRenderableParent(o){const f=this.findLoadedParent(o,0);return!!f&&this._isIdRenderable(f.tileID.key)}_isIdRenderable(o,f){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(f||!this._tiles[o].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")}}_reloadTile(o,f){const v=this._tiles[o];v&&(v.state!=="loading"&&(v.state=f),this._loadTile(v,this._tileLoaded.bind(this,v,o,f)))}_tileLoaded(o,f,v,b){if(b)return o.state="errored",void(b.status!==404?this._source.fire(new l.ErrorEvent(b,{tile:o})):this.update(this.transform,this.terrain));o.timeAdded=l.exported.now(),v==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(f,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),o.aborted||this._source.fire(new l.Event("data",{dataType:"source",tile:o,coord:o.tileID}))}_backfillDEM(o){const f=this.getRenderableIds();for(let b=0;b<f.length;b++){const E=f[b];if(o.neighboringTiles&&o.neighboringTiles[E]){const P=this.getTileByID(E);v(o,P),v(P,o)}}function v(b,E){b.needsHillshadePrepare=!0,b.needsTerrainPrepare=!0;let P=E.tileID.canonical.x-b.tileID.canonical.x;const R=E.tileID.canonical.y-b.tileID.canonical.y,O=Math.pow(2,b.tileID.canonical.z),N=E.tileID.key;P===0&&R===0||Math.abs(R)>1||(Math.abs(P)>1&&(Math.abs(P+O)===1?P+=O:Math.abs(P-O)===1&&(P-=O)),E.dem&&b.dem&&(b.dem.backfillBorder(E.dem,P,R),b.neighboringTiles&&b.neighboringTiles[N]&&(b.neighboringTiles[N].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,f,v,b){for(const E in this._tiles){let P=this._tiles[E];if(b[E]||!P.hasData()||P.tileID.overscaledZ<=f||P.tileID.overscaledZ>v)continue;let R=P.tileID;for(;P&&P.tileID.overscaledZ>f+1;){const N=P.tileID.scaledTo(P.tileID.overscaledZ-1);P=this._tiles[N.key],P&&P.hasData()&&(R=N)}let O=R;for(;O.overscaledZ>f;)if(O=O.scaledTo(O.overscaledZ-1),o[O.key]){b[R.key]=R;break}}}findLoadedParent(o,f){if(o.key in this._loadedParentTiles){const v=this._loadedParentTiles[o.key];return v&&v.tileID.overscaledZ>=f?v:null}for(let v=o.overscaledZ-1;v>=f;v--){const b=o.scaledTo(v),E=this._getLoadedTile(b);if(E)return E}}_getLoadedTile(o){const f=this._tiles[o.key];return f&&f.hasData()?f:this._cache.getByKey(o.wrapped().key)}updateCacheSize(o){const f=Math.ceil(o.width/this._source.tileSize)+1,v=Math.ceil(o.height/this._source.tileSize)+1,b=Math.floor(f*v*5),E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,b):b;this._cache.setMaxSize(E)}handleWrapJump(o){const f=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,f){const v={};for(const b in this._tiles){const E=this._tiles[b];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+f),v[E.tileID.key]=E}this._tiles=v;for(const b in this._timers)clearTimeout(this._timers[b]),delete this._timers[b];for(const b in this._tiles)this._setTileReloadTimer(b,this._tiles[b])}}update(o,f){if(this.transform=o,this.terrain=f,!this._sourceLoaded||this._paused)return;let v;this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?v=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(K=>new l.OverscaledTileID(K.canonical.z,K.wrap,K.canonical.z,K.canonical.x,K.canonical.y)):(v=o.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:f}),this._source.hasTile&&(v=v.filter(K=>this._source.hasTile(K)))):v=[];const b=o.coveringZoomLevel(this._source),E=Math.max(b-Dt.maxOverzooming,this._source.minzoom),P=Math.max(b+Dt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const K={};for(const Z of v)if(Z.canonical.z>this._source.minzoom){const le=Z.scaledTo(Z.canonical.z-1);K[le.key]=le;const Se=Z.scaledTo(Math.max(this._source.minzoom,Math.min(Z.canonical.z,5)));K[Se.key]=Se}v=v.concat(Object.values(K))}const R=v.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,R&&this.fire(new l.Event("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const O=this._updateRetainedTiles(v,b);if(ln(this._source.type)){const K={},Z={},le=Object.keys(O),Se=l.exported.now();for(const ve of le){const xe=O[ve],De=this._tiles[ve];if(!De||De.fadeEndTime!==0&&De.fadeEndTime<=Se)continue;const Ue=this.findLoadedParent(xe,E);Ue&&(this._addTile(Ue.tileID),K[Ue.tileID.key]=Ue.tileID),Z[ve]=xe}this._retainLoadedChildren(Z,b,P,O);for(const ve in K)O[ve]||(this._coveredTiles[ve]=!0,O[ve]=K[ve]);if(f){const ve={},xe={};for(const De of v)this._tiles[De.key].hasData()?ve[De.key]=De:xe[De.key]=De;for(const De in xe){const Ue=xe[De].children(this._source.maxzoom);this._tiles[Ue[0].key]&&this._tiles[Ue[1].key]&&this._tiles[Ue[2].key]&&this._tiles[Ue[3].key]&&(ve[Ue[0].key]=O[Ue[0].key]=Ue[0],ve[Ue[1].key]=O[Ue[1].key]=Ue[1],ve[Ue[2].key]=O[Ue[2].key]=Ue[2],ve[Ue[3].key]=O[Ue[3].key]=Ue[3],delete xe[De])}for(const De in xe){const Ue=this.findLoadedParent(xe[De],this._source.minzoom);if(Ue){ve[Ue.tileID.key]=O[Ue.tileID.key]=Ue.tileID;for(const ot in ve)ve[ot].isChildOf(Ue.tileID)&&delete ve[ot]}}for(const De in this._tiles)ve[De]||(this._coveredTiles[De]=!0)}}for(const K in O)this._tiles[K].clearFadeHold();const N=l.keysDifference(this._tiles,O);for(const K of N){const Z=this._tiles[K];Z.hasSymbolBuckets&&!Z.holdingForFade()?Z.setHoldDuration(this.map._fadeDuration):Z.hasSymbolBuckets&&!Z.symbolFadeFinished()||this._removeTile(K)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)}_updateRetainedTiles(o,f){const v={},b={},E=Math.max(f-Dt.maxOverzooming,this._source.minzoom),P=Math.max(f+Dt.maxUnderzooming,this._source.minzoom),R={};for(const O of o){const N=this._addTile(O);v[O.key]=O,N.hasData()||f<this._source.maxzoom&&(R[O.key]=O)}this._retainLoadedChildren(R,f,P,v);for(const O of o){let N=this._tiles[O.key];if(N.hasData())continue;if(f+1>this._source.maxzoom){const Z=O.children(this._source.maxzoom)[0],le=this.getTile(Z);if(le&&le.hasData()){v[Z.key]=Z;continue}}else{const Z=O.children(this._source.maxzoom);if(v[Z[0].key]&&v[Z[1].key]&&v[Z[2].key]&&v[Z[3].key])continue}let K=N.wasRequested();for(let Z=O.overscaledZ-1;Z>=E;--Z){const le=O.scaledTo(Z);if(b[le.key])break;if(b[le.key]=!0,N=this.getTile(le),!N&&K&&(N=this._addTile(le)),N){const Se=N.hasData();if((K||Se)&&(v[le.key]=le),K=N.wasRequested(),Se)break}}}return v}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const f=[];let v,b=this._tiles[o].tileID;for(;b.overscaledZ>0;){if(b.key in this._loadedParentTiles){v=this._loadedParentTiles[b.key];break}f.push(b.key);const E=b.scaledTo(b.overscaledZ-1);if(v=this._getLoadedTile(E),v)break;b=E}for(const E of f)this._loadedParentTiles[E]=v}}_addTile(o){let f=this._tiles[o.key];if(f)return f;f=this._cache.getAndRemove(o),f&&(this._setTileReloadTimer(o.key,f),f.tileID=o,this._state.initializeTileState(f,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,f)));const v=f;return f||(f=new pt(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(f,this._tileLoaded.bind(this,f,o.key,f.state))),f.uses++,this._tiles[o.key]=f,v||this._source.fire(new l.Event("dataloading",{tile:f,coord:f.tileID,dataType:"source"})),f}_setTileReloadTimer(o,f){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const v=f.getExpiryTimeout();v&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},v))}_removeTile(o){const f=this._tiles[o];f&&(f.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),f.uses>0||(f.hasData()&&f.state!=="reloading"?this._cache.add(f.tileID,f,f.getExpiryTimeout()):(f.aborted=!0,this._abortTile(f),this._unloadTile(f))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(o);this._cache.reset()}tilesIn(o,f,v){const b=[],E=this.transform;if(!E)return b;const P=v?E.getCameraQueryGeometry(o):o,R=o.map(ve=>E.pointCoordinate(ve,this.terrain)),O=P.map(ve=>E.pointCoordinate(ve,this.terrain)),N=this.getIds();let K=1/0,Z=1/0,le=-1/0,Se=-1/0;for(const ve of O)K=Math.min(K,ve.x),Z=Math.min(Z,ve.y),le=Math.max(le,ve.x),Se=Math.max(Se,ve.y);for(let ve=0;ve<N.length;ve++){const xe=this._tiles[N[ve]];if(xe.holdingForFade())continue;const De=xe.tileID,Ue=Math.pow(2,E.zoom-xe.tileID.overscaledZ),ot=f*xe.queryPadding*l.EXTENT/xe.tileSize/Ue,Me=[De.getTilePoint(new l.MercatorCoordinate(K,Z)),De.getTilePoint(new l.MercatorCoordinate(le,Se))];if(Me[0].x-ot<l.EXTENT&&Me[0].y-ot<l.EXTENT&&Me[1].x+ot>=0&&Me[1].y+ot>=0){const it=R.map(At=>De.getTilePoint(At)),_t=O.map(At=>De.getTilePoint(At));b.push({tile:xe,tileID:De,queryGeometry:it,cameraQueryGeometry:_t,scale:Ue})}}return b}getVisibleCoordinates(o){const f=this.getRenderableIds(o).map(v=>this._tiles[v].tileID);for(const v of f)v.posMatrix=this.transform.calculatePosMatrix(v.toUnwrapped());return f}hasTransition(){if(this._source.hasTransition())return!0;if(ln(this._source.type)){const o=l.exported.now();for(const f in this._tiles)if(this._tiles[f].fadeEndTime>=o)return!0}return!1}setFeatureState(o,f,v){this._state.updateState(o=o||"_geojsonTileLayer",f,v)}removeFeatureState(o,f,v){this._state.removeFeatureState(o=o||"_geojsonTileLayer",f,v)}getFeatureState(o,f){return this._state.getState(o=o||"_geojsonTileLayer",f)}setDependencies(o,f,v){const b=this._tiles[o];b&&b.setDependencies(f,v)}reloadTilesForDependencies(o,f){for(const v in this._tiles)this._tiles[v].hasDependency(o,f)&&this._reloadTile(v,"reloading");this._cache.filter(v=>!v.hasDependency(o,f))}}function Gt(_,o){const f=Math.abs(2*_.wrap)-+(_.wrap<0),v=Math.abs(2*o.wrap)-+(o.wrap<0);return _.overscaledZ-o.overscaledZ||v-f||o.canonical.y-_.canonical.y||o.canonical.x-_.canonical.x}function ln(_){return _==="raster"||_==="image"||_==="video"}Dt.maxOverzooming=10,Dt.maxUnderzooming=3;const vt="mapboxgl_preloaded_worker_pool";class Rn{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<Rn.workerCount;)this.workers.push(new Worker(l.config.WORKER_URL));return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(f=>{f.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[vt]}numActive(){return Object.keys(this.active).length}}const Ln=Math.floor(l.exported.hardwareConcurrency/2);let Ye;function Qe(){return Ye||(Ye=new Rn),Ye}Rn.workerCount=l.isSafari(globalThis)?Math.max(Math.min(Ln,3),1):1;class Fe{constructor(o,f){this.reset(o,f)}reset(o,f){this.points=o||[],this._distances=[0];for(let v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=l.clamp(o,0,1);let f=1,v=this._distances[f];const b=o*this.paddedLength+this.padding;for(;v<b&&f<this._distances.length;)v=this._distances[++f];const E=f-1,P=this._distances[E],R=v-P,O=R>0?(b-P)/R:0;return this.points[E].mult(1-O).add(this.points[f].mult(O))}}function mt(_,o){let f=!0;return _==="always"||_!=="never"&&o!=="never"||(f=!1),f}class St{constructor(o,f,v){const b=this.boxCells=[],E=this.circleCells=[];this.xCellCount=Math.ceil(o/v),this.yCellCount=Math.ceil(f/v);for(let P=0;P<this.xCellCount*this.yCellCount;P++)b.push([]),E.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=f,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,f,v,b,E){this._forEachCell(f,v,b,E,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(b),this.bboxes.push(E)}insertCircle(o,f,v,b){this._forEachCell(f-b,v-b,f+b,v+b,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(f),this.circles.push(v),this.circles.push(b)}_insertBoxCell(o,f,v,b,E,P){this.boxCells[E].push(P)}_insertCircleCell(o,f,v,b,E,P){this.circleCells[E].push(P)}_query(o,f,v,b,E,P,R){if(v<0||o>this.width||b<0||f>this.height)return[];const O=[];if(o<=0&&f<=0&&this.width<=v&&this.height<=b){if(E)return[{key:null,x1:o,y1:f,x2:v,y2:b}];for(let N=0;N<this.boxKeys.length;N++)O.push({key:this.boxKeys[N],x1:this.bboxes[4*N],y1:this.bboxes[4*N+1],x2:this.bboxes[4*N+2],y2:this.bboxes[4*N+3]});for(let N=0;N<this.circleKeys.length;N++){const K=this.circles[3*N],Z=this.circles[3*N+1],le=this.circles[3*N+2];O.push({key:this.circleKeys[N],x1:K-le,y1:Z-le,x2:K+le,y2:Z+le})}}else this._forEachCell(o,f,v,b,this._queryCell,O,{hitTest:E,overlapMode:P,seenUids:{box:{},circle:{}}},R);return O}query(o,f,v,b){return this._query(o,f,v,b,!1,null)}hitTest(o,f,v,b,E,P){return this._query(o,f,v,b,!0,E,P).length>0}hitTestCircle(o,f,v,b,E){const P=o-v,R=o+v,O=f-v,N=f+v;if(R<0||P>this.width||N<0||O>this.height)return!1;const K=[];return this._forEachCell(P,O,R,N,this._queryCellCircle,K,{hitTest:!0,overlapMode:b,circle:{x:o,y:f,radius:v},seenUids:{box:{},circle:{}}},E),K.length>0}_queryCell(o,f,v,b,E,P,R,O){const{seenUids:N,hitTest:K,overlapMode:Z}=R,le=this.boxCells[E];if(le!==null){const ve=this.bboxes;for(const xe of le)if(!N.box[xe]){N.box[xe]=!0;const De=4*xe,Ue=this.boxKeys[xe];if(o<=ve[De+2]&&f<=ve[De+3]&&v>=ve[De+0]&&b>=ve[De+1]&&(!O||O(Ue))&&(!K||!mt(Z,Ue.overlapMode))&&(P.push({key:Ue,x1:ve[De],y1:ve[De+1],x2:ve[De+2],y2:ve[De+3]}),K))return!0}}const Se=this.circleCells[E];if(Se!==null){const ve=this.circles;for(const xe of Se)if(!N.circle[xe]){N.circle[xe]=!0;const De=3*xe,Ue=this.circleKeys[xe];if(this._circleAndRectCollide(ve[De],ve[De+1],ve[De+2],o,f,v,b)&&(!O||O(Ue))&&(!K||!mt(Z,Ue.overlapMode))){const ot=ve[De],Me=ve[De+1],it=ve[De+2];if(P.push({key:Ue,x1:ot-it,y1:Me-it,x2:ot+it,y2:Me+it}),K)return!0}}}return!1}_queryCellCircle(o,f,v,b,E,P,R,O){const{circle:N,seenUids:K,overlapMode:Z}=R,le=this.boxCells[E];if(le!==null){const ve=this.bboxes;for(const xe of le)if(!K.box[xe]){K.box[xe]=!0;const De=4*xe,Ue=this.boxKeys[xe];if(this._circleAndRectCollide(N.x,N.y,N.radius,ve[De+0],ve[De+1],ve[De+2],ve[De+3])&&(!O||O(Ue))&&!mt(Z,Ue.overlapMode))return P.push(!0),!0}}const Se=this.circleCells[E];if(Se!==null){const ve=this.circles;for(const xe of Se)if(!K.circle[xe]){K.circle[xe]=!0;const De=3*xe,Ue=this.circleKeys[xe];if(this._circlesCollide(ve[De],ve[De+1],ve[De+2],N.x,N.y,N.radius)&&(!O||O(Ue))&&!mt(Z,Ue.overlapMode))return P.push(!0),!0}}}_forEachCell(o,f,v,b,E,P,R,O){const N=this._convertToXCellCoord(o),K=this._convertToYCellCoord(f),Z=this._convertToXCellCoord(v),le=this._convertToYCellCoord(b);for(let Se=N;Se<=Z;Se++)for(let ve=K;ve<=le;ve++)if(E.call(this,o,f,v,b,this.xCellCount*ve+Se,P,R,O))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,f,v,b,E,P){const R=b-o,O=E-f,N=v+P;return N*N>R*R+O*O}_circleAndRectCollide(o,f,v,b,E,P,R){const O=(P-b)/2,N=Math.abs(o-(b+O));if(N>O+v)return!1;const K=(R-E)/2,Z=Math.abs(f-(E+K));if(Z>K+v)return!1;if(N<=O||Z<=K)return!0;const le=N-O,Se=Z-K;return le*le+Se*Se<=v*v}}function Yt(_,o,f,v,b){const E=l.create();return o?(l.scale(E,E,[1/b,1/b,1]),f||l.rotateZ(E,E,v.angle)):l.multiply(E,v.labelPlaneMatrix,_),E}function an(_,o,f,v,b){if(o){const E=l.clone(_);return l.scale(E,E,[b,b,1]),f||l.rotateZ(E,E,-v.angle),E}return v.glCoordMatrix}function Pt(_,o,f){let v;f?(v=[_.x,_.y,f(_.x,_.y),1],l.transformMat4(v,v,o)):(v=[_.x,_.y,0,1],Oe(v,v,o));const b=v[3];return{point:new l.Point(v[0]/b,v[1]/b),signedDistanceFromCamera:b}}function qn(_,o){return .5+_/o*.5}function Cn(_,o){const f=_[0]/_[3],v=_[1]/_[3];return f>=-o[0]&&f<=o[0]&&v>=-o[1]&&v<=o[1]}function jt(_,o,f,v,b,E,P,R,O,N){const K=v?_.textSizeData:_.iconSizeData,Z=l.evaluateSizeForZoom(K,f.transform.zoom),le=[256/f.width*2+1,256/f.height*2+1],Se=v?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;Se.clear();const ve=_.lineVertexArray,xe=v?_.text.placedSymbolArray:_.icon.placedSymbolArray,De=f.transform.width/f.transform.height;let Ue=!1;for(let ot=0;ot<xe.length;ot++){const Me=xe.get(ot);if(Me.hidden||Me.writingMode===l.WritingMode.vertical&&!Ue){He(Me.numGlyphs,Se);continue}let it;if(Ue=!1,N?(it=[Me.anchorX,Me.anchorY,N(Me.anchorX,Me.anchorY),1],l.transformMat4(it,it,o)):(it=[Me.anchorX,Me.anchorY,0,1],Oe(it,it,o)),!Cn(it,le)){He(Me.numGlyphs,Se);continue}const _t=qn(f.transform.cameraToCenterDistance,it[3]),At=l.evaluateSizeForFeature(K,Z,Me),Rt=P?At/_t:At*_t,Bt=new l.Point(Me.anchorX,Me.anchorY),Lt=Pt(Bt,b,N).point,nn={projections:{},offsets:{}},Sn=he(Me,Rt,!1,R,o,b,E,_.glyphOffsetArray,ve,Se,Lt,Bt,nn,De,O,N);Ue=Sn.useVertical,(Sn.notEnoughRoom||Ue||Sn.needsFlipping&&he(Me,Rt,!0,R,o,b,E,_.glyphOffsetArray,ve,Se,Lt,Bt,nn,De,O,N).notEnoughRoom)&&He(Me.numGlyphs,Se)}v?_.text.dynamicLayoutVertexBuffer.updateData(Se):_.icon.dynamicLayoutVertexBuffer.updateData(Se)}function vn(_,o,f,v,b,E,P,R,O,N,K,Z,le){const Se=R.glyphStartIndex+R.numGlyphs,ve=R.lineStartIndex,xe=R.lineStartIndex+R.lineLength,De=o.getoffsetX(R.glyphStartIndex),Ue=o.getoffsetX(Se-1),ot=$e(_*De,f,v,b,E,P,R.segment,ve,xe,O,N,K,Z,le);if(!ot)return null;const Me=$e(_*Ue,f,v,b,E,P,R.segment,ve,xe,O,N,K,Z,le);return Me?{first:ot,last:Me}:null}function Pn(_,o,f,v){return _===l.WritingMode.horizontal&&Math.abs(f.y-o.y)>Math.abs(f.x-o.x)*v?{useVertical:!0}:(_===l.WritingMode.vertical?o.y<f.y:o.x>f.x)?{needsFlipping:!0}:null}function he(_,o,f,v,b,E,P,R,O,N,K,Z,le,Se,ve,xe){const De=o/24,Ue=_.lineOffsetX*De,ot=_.lineOffsetY*De;let Me;if(_.numGlyphs>1){const it=_.glyphStartIndex+_.numGlyphs,_t=_.lineStartIndex,At=_.lineStartIndex+_.lineLength,Rt=vn(De,R,Ue,ot,f,K,Z,_,O,E,le,ve,xe);if(!Rt)return{notEnoughRoom:!0};const Bt=Pt(Rt.first.point,P,xe).point,Lt=Pt(Rt.last.point,P,xe).point;if(v&&!f){const nn=Pn(_.writingMode,Bt,Lt,Se);if(nn)return nn}Me=[Rt.first];for(let nn=_.glyphStartIndex+1;nn<it-1;nn++)Me.push($e(De*R.getoffsetX(nn),Ue,ot,f,K,Z,_.segment,_t,At,O,E,le,ve,xe));Me.push(Rt.last)}else{if(v&&!f){const _t=Pt(Z,b,xe).point,At=_.lineStartIndex+_.segment+1,Rt=new l.Point(O.getx(At),O.gety(At)),Bt=Pt(Rt,b,xe),Lt=Bt.signedDistanceFromCamera>0?Bt.point:Y(Z,Rt,_t,1,b,xe),nn=Pn(_.writingMode,_t,Lt,Se);if(nn)return nn}const it=$e(De*R.getoffsetX(_.glyphStartIndex),Ue,ot,f,K,Z,_.segment,_.lineStartIndex,_.lineStartIndex+_.lineLength,O,E,le,ve,xe);if(!it)return{notEnoughRoom:!0};Me=[it]}for(const it of Me)l.addDynamicAttributes(N,it.point,it.angle);return{}}function Y(_,o,f,v,b,E){const P=Pt(_.add(_.sub(o)._unit()),b,E).point,R=f.sub(P);return f.add(R._mult(v/R.mag()))}function re(_,o){const{projectionCache:f,lineVertexArray:v,labelPlaneMatrix:b,tileAnchorPoint:E,distanceFromAnchor:P,getElevation:R,previousVertex:O,direction:N,absOffsetX:K}=o;if(f.projections[_])return f.projections[_];const Z=new l.Point(v.getx(_),v.gety(_)),le=Pt(Z,b,R);if(le.signedDistanceFromCamera>0)return f.projections[_]=le.point,le.point;const Se=_-N;return Y(P===0?E:new l.Point(v.getx(Se),v.gety(Se)),Z,O,K-P+1,b,R)}function me(_,o,f){return _._unit()._perp()._mult(o*f)}function Ae(_,o,f,v,b,E,P,R){const{projectionCache:O,direction:N}=R;if(O.offsets[_])return O.offsets[_];const K=f.add(o);if(_+N<v||_+N>=b)return O.offsets[_]=K,K;const Z=re(_+N,R),le=me(Z.sub(f),P,N),Se=f.add(le),ve=Z.add(le);return O.offsets[_]=l.findLineIntersection(E,K,Se,ve)||K,O.offsets[_]}function $e(_,o,f,v,b,E,P,R,O,N,K,Z,le,Se){const ve=v?_-o:_+o;let xe=ve>0?1:-1,De=0;v&&(xe*=-1,De=Math.PI),xe<0&&(De+=Math.PI);let Ue,ot,Me=xe>0?R+P:R+P+1,it=b,_t=b,At=0,Rt=0;const Bt=Math.abs(ve),Lt=[];let nn;for(;At+Rt<=Bt;){if(Me+=xe,Me<R||Me>=O)return null;At+=Rt,_t=it,ot=Ue;const Zt={projectionCache:Z,lineVertexArray:N,labelPlaneMatrix:K,tileAnchorPoint:E,distanceFromAnchor:At,getElevation:Se,previousVertex:_t,direction:xe,absOffsetX:Bt};if(it=re(Me,Zt),f===0)Lt.push(_t),nn=it.sub(_t);else{let On;const on=it.sub(_t);On=on.mag()===0?me(re(Me+xe,Zt).sub(it),f,xe):me(on,f,xe),ot||(ot=_t.add(On)),Ue=Ae(Me,On,it,R,O,ot,f,Zt),Lt.push(ot),nn=Ue.sub(ot)}Rt=nn.mag()}const Sn=nn._mult((Bt-At)/Rt)._add(ot||_t),Bn=De+Math.atan2(it.y-_t.y,it.x-_t.x);return Lt.push(Sn),{point:Sn,angle:le?Bn:0,path:Lt}}const qe=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function He(_,o){for(let f=0;f<_;f++){const v=o.length;o.resize(v+4),o.float32.set(qe,3*v)}}function Oe(_,o,f){const v=o[0],b=o[1];return _[0]=f[0]*v+f[4]*b+f[12],_[1]=f[1]*v+f[5]*b+f[13],_[3]=f[3]*v+f[7]*b+f[15],_}const Ze=100;class wt{constructor(o,f=new St(o.width+200,o.height+200,25),v=new St(o.width+200,o.height+200,25)){this.transform=o,this.grid=f,this.ignoredGrid=v,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+Ze,this.screenBottomBoundary=o.height+Ze,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(o,f,v,b,E,P){const R=this.projectAndGetPerspectiveRatio(b,o.anchorPointX,o.anchorPointY,P),O=v*R.perspectiveRatio,N=o.x1*O+R.point.x,K=o.y1*O+R.point.y,Z=o.x2*O+R.point.x,le=o.y2*O+R.point.y;return!this.isInsideGrid(N,K,Z,le)||f!=="always"&&this.grid.hitTest(N,K,Z,le,f,E)||R.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[N,K,Z,le],offscreen:this.isOffscreen(N,K,Z,le)}}placeCollisionCircles(o,f,v,b,E,P,R,O,N,K,Z,le,Se,ve){const xe=[],De=new l.Point(f.anchorX,f.anchorY),Ue=Pt(De,P,ve),ot=qn(this.transform.cameraToCenterDistance,Ue.signedDistanceFromCamera),Me=(K?E/ot:E*ot)/l.ONE_EM,it=Pt(De,R,ve).point,_t=vn(Me,b,f.lineOffsetX*Me,f.lineOffsetY*Me,!1,it,De,f,v,R,{projections:{},offsets:{}},!1,ve);let At=!1,Rt=!1,Bt=!0;if(_t){const Lt=.5*le*ot+Se,nn=new l.Point(-100,-100),Sn=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),Bn=new Fe,Zt=_t.first,On=_t.last;let on=[];for(let hi=Zt.path.length-1;hi>=1;hi--)on.push(Zt.path[hi]);for(let hi=1;hi<On.path.length;hi++)on.push(On.path[hi]);const di=2.5*Lt;if(O){const hi=on.map(Nn=>Pt(Nn,O,ve));on=hi.some(Nn=>Nn.signedDistanceFromCamera<=0)?[]:hi.map(Nn=>Nn.point)}let tr=[];if(on.length>0){const hi=on[0].clone(),Nn=on[0].clone();for(let Ki=1;Ki<on.length;Ki++)hi.x=Math.min(hi.x,on[Ki].x),hi.y=Math.min(hi.y,on[Ki].y),Nn.x=Math.max(Nn.x,on[Ki].x),Nn.y=Math.max(Nn.y,on[Ki].y);tr=hi.x>=nn.x&&Nn.x<=Sn.x&&hi.y>=nn.y&&Nn.y<=Sn.y?[on]:Nn.x<nn.x||hi.x>Sn.x||Nn.y<nn.y||hi.y>Sn.y?[]:l.clipLine([on],nn.x,nn.y,Sn.x,Sn.y)}for(const hi of tr){Bn.reset(hi,.25*Lt);let Nn=0;Nn=Bn.length<=.5*Lt?1:Math.ceil(Bn.paddedLength/di)+1;for(let Ki=0;Ki<Nn;Ki++){const jr=Ki/Math.max(Nn-1,1),nr=Bn.lerp(jr),br=nr.x+Ze,cs=nr.y+Ze;xe.push(br,cs,Lt,0);const Ns=br-Lt,js=cs-Lt,Ur=br+Lt,pa=cs+Lt;if(Bt=Bt&&this.isOffscreen(Ns,js,Ur,pa),Rt=Rt||this.isInsideGrid(Ns,js,Ur,pa),o!=="always"&&this.grid.hitTestCircle(br,cs,Lt,o,Z)&&(At=!0,!N))return{circles:[],offscreen:!1,collisionDetected:At}}}}return{circles:!N&&At||!Rt||ot<this.perspectiveRatioCutoff?[]:xe,offscreen:Bt,collisionDetected:At}}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const f=[];let v=1/0,b=1/0,E=-1/0,P=-1/0;for(const K of o){const Z=new l.Point(K.x+Ze,K.y+Ze);v=Math.min(v,Z.x),b=Math.min(b,Z.y),E=Math.max(E,Z.x),P=Math.max(P,Z.y),f.push(Z)}const R=this.grid.query(v,b,E,P).concat(this.ignoredGrid.query(v,b,E,P)),O={},N={};for(const K of R){const Z=K.key;if(O[Z.bucketInstanceId]===void 0&&(O[Z.bucketInstanceId]={}),O[Z.bucketInstanceId][Z.featureIndex])continue;const le=[new l.Point(K.x1,K.y1),new l.Point(K.x2,K.y1),new l.Point(K.x2,K.y2),new l.Point(K.x1,K.y2)];l.polygonIntersectsPolygon(f,le)&&(O[Z.bucketInstanceId][Z.featureIndex]=!0,N[Z.bucketInstanceId]===void 0&&(N[Z.bucketInstanceId]=[]),N[Z.bucketInstanceId].push(Z.featureIndex))}return N}insertCollisionBox(o,f,v,b,E,P){(v?this.ignoredGrid:this.grid).insert({bucketInstanceId:b,featureIndex:E,collisionGroupID:P,overlapMode:f},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,f,v,b,E,P){const R=v?this.ignoredGrid:this.grid,O={bucketInstanceId:b,featureIndex:E,collisionGroupID:P,overlapMode:f};for(let N=0;N<o.length;N+=4)R.insertCircle(O,o[N],o[N+1],o[N+2])}projectAndGetPerspectiveRatio(o,f,v,b){let E;return b?(E=[f,v,b(f,v),1],l.transformMat4(E,E,o)):(E=[f,v,0,1],Oe(E,E,o)),{point:new l.Point((E[0]/E[3]+1)/2*this.transform.width+Ze,(-E[1]/E[3]+1)/2*this.transform.height+Ze),perspectiveRatio:.5+this.transform.cameraToCenterDistance/E[3]*.5}}isOffscreen(o,f,v,b){return v<Ze||o>=this.screenRightBoundary||b<Ze||f>this.screenBottomBoundary}isInsideGrid(o,f,v,b){return v>=0&&o<this.gridRightBoundary&&b>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const o=l.identity([]);return l.translate(o,o,[-100,-100,0]),o}}function bt(_,o,f){return o*(l.EXTENT/(_.tileSize*Math.pow(2,f-_.tileID.overscaledZ)))}class Et{constructor(o,f,v,b){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?f:-f))):b&&v?1:0,this.placed=v}isHidden(){return this.opacity===0&&!this.placed}}class pn{constructor(o,f,v,b,E){this.text=new Et(o?o.text:null,f,v,E),this.icon=new Et(o?o.icon:null,f,b,E)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class wn{constructor(o,f,v){this.text=o,this.icon=f,this.skipFade=v}}class un{constructor(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]}}class mn{constructor(o,f,v,b,E){this.bucketInstanceId=o,this.featureIndex=f,this.sourceLayerIndex=v,this.bucketIndex=b,this.tileID=E}}class In{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const f=++this.maxGroupID;this.collisionGroups[o]={ID:f,predicate:v=>v.collisionGroupID===f}}return this.collisionGroups[o]}}function Vn(_,o,f,v,b){const{horizontalAlign:E,verticalAlign:P}=l.getAnchorAlignment(_),R=-(E-.5)*o,O=-(P-.5)*f,N=l.evaluateVariableOffset(_,v);return new l.Point(R+N[0]*b,O+N[1]*b)}function zn(_,o,f,v,b,E){const{x1:P,x2:R,y1:O,y2:N,anchorPointX:K,anchorPointY:Z}=_,le=new l.Point(o,f);return v&&le._rotate(b?E:-E),{x1:P+le.x,y1:O+le.y,x2:R+le.x,y2:N+le.y,anchorPointX:K,anchorPointY:Z}}class Ut{constructor(o,f,v,b,E){this.transform=o.clone(),this.terrain=f,this.collisionIndex=new wt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=v,this.retainedQueryData={},this.collisionGroups=new In(b),this.collisionCircleArrays={},this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(o,f,v,b){const E=v.getBucket(f),P=v.latestFeatureIndex;if(!E||!P||f.id!==E.layerIds[0])return;const R=v.collisionBoxArray,O=E.layers[0].layout,N=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),K=v.tileSize/l.EXTENT,Z=this.transform.calculatePosMatrix(v.tileID.toUnwrapped()),le=O.get("text-pitch-alignment")==="map",Se=O.get("text-rotation-alignment")==="map",ve=bt(v,1,this.transform.zoom),xe=Yt(Z,le,Se,this.transform,ve);let De=null;if(le){const ot=an(Z,le,Se,this.transform,ve);De=l.multiply([],this.transform.labelPlaneMatrix,ot)}this.retainedQueryData[E.bucketInstanceId]=new mn(E.bucketInstanceId,P,E.sourceLayerIndex,E.index,v.tileID);const Ue={bucket:E,layout:O,posMatrix:Z,textLabelPlaneMatrix:xe,labelToScreenMatrix:De,scale:N,textPixelRatio:K,holdingForFade:v.holdingForFade(),collisionBoxArray:R,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(E.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(E.sourceID)};if(b)for(const ot of E.sortKeyRanges){const{sortKey:Me,symbolInstanceStart:it,symbolInstanceEnd:_t}=ot;o.push({sortKey:Me,symbolInstanceStart:it,symbolInstanceEnd:_t,parameters:Ue})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:E.symbolInstances.length,parameters:Ue})}attemptAnchorPlacement(o,f,v,b,E,P,R,O,N,K,Z,le,Se,ve,xe,De){const Ue=[le.textOffset0,le.textOffset1],ot=Vn(o,v,b,Ue,E),Me=this.collisionIndex.placeCollisionBox(zn(f,ot.x,ot.y,P,R,this.transform.angle),Z,O,N,K.predicate,De);if((!xe||this.collisionIndex.placeCollisionBox(zn(xe,ot.x,ot.y,P,R,this.transform.angle),Z,O,N,K.predicate,De).box.length!==0)&&Me.box.length>0){let it;if(this.prevPlacement&&this.prevPlacement.variableOffsets[le.crossTileID]&&this.prevPlacement.placements[le.crossTileID]&&this.prevPlacement.placements[le.crossTileID].text&&(it=this.prevPlacement.variableOffsets[le.crossTileID].anchor),le.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[le.crossTileID]={textOffset:Ue,width:v,height:b,anchor:o,textBoxScale:E,prevAnchor:it},this.markUsedJustification(Se,o,le,ve),Se.allowVerticalPlacement&&(this.markUsedOrientation(Se,ve,le),this.placedOrientations[le.crossTileID]=ve),{shift:ot,placedGlyphBoxes:Me}}}placeLayerBucketPart(o,f,v){const{bucket:b,layout:E,posMatrix:P,textLabelPlaneMatrix:R,labelToScreenMatrix:O,textPixelRatio:N,holdingForFade:K,collisionBoxArray:Z,partiallyEvaluatedTextSize:le,collisionGroup:Se}=o.parameters,ve=E.get("text-optional"),xe=E.get("icon-optional"),De=l.getOverlapMode(E,"text-overlap","text-allow-overlap"),Ue=De==="always",ot=l.getOverlapMode(E,"icon-overlap","icon-allow-overlap"),Me=ot==="always",it=E.get("text-rotation-alignment")==="map",_t=E.get("text-pitch-alignment")==="map",At=E.get("icon-text-fit")!=="none",Rt=E.get("symbol-z-order")==="viewport-y",Bt=Ue&&(Me||!b.hasIconData()||xe),Lt=Me&&(Ue||!b.hasTextData()||ve);!b.collisionArrays&&Z&&b.deserializeCollisionBoxes(Z);const nn=this.retainedQueryData[b.bucketInstanceId].tileID,Sn=this.terrain?(Zt,On)=>this.terrain.getElevation(nn,Zt,On):null,Bn=(Zt,On)=>{if(f[Zt.crossTileID])return;if(K)return void(this.placements[Zt.crossTileID]=new wn(!1,!1,!1));let on=!1,di=!1,tr=!0,hi=null,Nn={box:null,offscreen:null},Ki={box:null,offscreen:null},jr=null,nr=null,br=null,cs=0,Ns=0,js=0;On.textFeatureIndex?cs=On.textFeatureIndex:Zt.useRuntimeCollisionCircles&&(cs=Zt.featureIndex),On.verticalTextFeatureIndex&&(Ns=On.verticalTextFeatureIndex);const Ur=On.textBox;if(Ur){const Dr=pi=>{let fr=l.WritingMode.horizontal;if(b.allowVerticalPlacement&&!pi&&this.prevPlacement){const wr=this.prevPlacement.placedOrientations[Zt.crossTileID];wr&&(this.placedOrientations[Zt.crossTileID]=wr,fr=wr,this.markUsedOrientation(b,fr,Zt))}return fr},xr=(pi,fr)=>{if(b.allowVerticalPlacement&&Zt.numVerticalGlyphVertices>0&&On.verticalTextBox){for(const wr of b.writingModes)if(wr===l.WritingMode.vertical?(Nn=fr(),Ki=Nn):Nn=pi(),Nn&&Nn.box&&Nn.box.length)break}else Nn=pi()};if(E.get("text-variable-anchor")){let pi=E.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Zt.crossTileID]){const vi=this.prevPlacement.variableOffsets[Zt.crossTileID];pi.indexOf(vi.anchor)>0&&(pi=pi.filter(pr=>pr!==vi.anchor),pi.unshift(vi.anchor))}const fr=(vi,pr,us)=>{const pd=vi.x2-vi.x1,Ra=vi.y2-vi.y1,by=Zt.textBoxScale,tg=At&&ot==="never"?pr:null;let $i={box:[],offscreen:!1};const ff=De!=="never"?2*pi.length:pi.length;for(let Hc=0;Hc<ff;++Hc){const Fa=this.attemptAnchorPlacement(pi[Hc%pi.length],vi,pd,Ra,by,it,_t,N,P,Se,Hc>=pi.length?De:"never",Zt,b,us,tg,Sn);if(Fa&&($i=Fa.placedGlyphBoxes,$i&&$i.box&&$i.box.length)){on=!0,hi=Fa.shift;break}}return $i};xr(()=>fr(Ur,On.iconBox,l.WritingMode.horizontal),()=>{const vi=On.verticalTextBox;return b.allowVerticalPlacement&&!(Nn&&Nn.box&&Nn.box.length)&&Zt.numVerticalGlyphVertices>0&&vi?fr(vi,On.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),Nn&&(on=Nn.box,tr=Nn.offscreen);const wr=Dr(Nn&&Nn.box);if(!on&&this.prevPlacement){const vi=this.prevPlacement.variableOffsets[Zt.crossTileID];vi&&(this.variableOffsets[Zt.crossTileID]=vi,this.markUsedJustification(b,vi.anchor,Zt,wr))}}else{const pi=(fr,wr)=>{const vi=this.collisionIndex.placeCollisionBox(fr,De,N,P,Se.predicate,Sn);return vi&&vi.box&&vi.box.length&&(this.markUsedOrientation(b,wr,Zt),this.placedOrientations[Zt.crossTileID]=wr),vi};xr(()=>pi(Ur,l.WritingMode.horizontal),()=>{const fr=On.verticalTextBox;return b.allowVerticalPlacement&&Zt.numVerticalGlyphVertices>0&&fr?pi(fr,l.WritingMode.vertical):{box:null,offscreen:null}}),Dr(Nn&&Nn.box&&Nn.box.length)}}if(jr=Nn,on=jr&&jr.box&&jr.box.length>0,tr=jr&&jr.offscreen,Zt.useRuntimeCollisionCircles){const Dr=b.text.placedSymbolArray.get(Zt.centerJustifiedTextSymbolIndex),xr=l.evaluateSizeForFeature(b.textSizeData,le,Dr),pi=E.get("text-padding");nr=this.collisionIndex.placeCollisionCircles(De,Dr,b.lineVertexArray,b.glyphOffsetArray,xr,P,R,O,v,_t,Se.predicate,Zt.collisionCircleDiameter,pi,Sn),nr.circles.length&&nr.collisionDetected&&!v&&l.warnOnce("Collisions detected, but collision boxes are not shown"),on=Ue||nr.circles.length>0&&!nr.collisionDetected,tr=tr&&nr.offscreen}if(On.iconFeatureIndex&&(js=On.iconFeatureIndex),On.iconBox){const Dr=xr=>{const pi=At&&hi?zn(xr,hi.x,hi.y,it,_t,this.transform.angle):xr;return this.collisionIndex.placeCollisionBox(pi,ot,N,P,Se.predicate,Sn)};Ki&&Ki.box&&Ki.box.length&&On.verticalIconBox?(br=Dr(On.verticalIconBox),di=br.box.length>0):(br=Dr(On.iconBox),di=br.box.length>0),tr=tr&&br.offscreen}const pa=ve||Zt.numHorizontalGlyphVertices===0&&Zt.numVerticalGlyphVertices===0,Vc=xe||Zt.numIconVertices===0;if(pa||Vc?Vc?pa||(di=di&&on):on=di&&on:di=on=di&&on,on&&jr&&jr.box&&this.collisionIndex.insertCollisionBox(jr.box,De,E.get("text-ignore-placement"),b.bucketInstanceId,Ki&&Ki.box&&Ns?Ns:cs,Se.ID),di&&br&&this.collisionIndex.insertCollisionBox(br.box,ot,E.get("icon-ignore-placement"),b.bucketInstanceId,js,Se.ID),nr&&(on&&this.collisionIndex.insertCollisionCircles(nr.circles,De,E.get("text-ignore-placement"),b.bucketInstanceId,cs,Se.ID),v)){const Dr=b.bucketInstanceId;let xr=this.collisionCircleArrays[Dr];xr===void 0&&(xr=this.collisionCircleArrays[Dr]=new un);for(let pi=0;pi<nr.circles.length;pi+=4)xr.circles.push(nr.circles[pi+0]),xr.circles.push(nr.circles[pi+1]),xr.circles.push(nr.circles[pi+2]),xr.circles.push(nr.collisionDetected?1:0)}if(Zt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(b.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Zt.crossTileID]=new wn(on||Bt,di||Lt,tr||b.justReloaded),f[Zt.crossTileID]=!0};if(Rt){if(o.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Zt=b.getSortedSymbolIndexes(this.transform.angle);for(let On=Zt.length-1;On>=0;--On){const on=Zt[On];Bn(b.symbolInstances.get(on),b.collisionArrays[on])}}else for(let Zt=o.symbolInstanceStart;Zt<o.symbolInstanceEnd;Zt++)Bn(b.symbolInstances.get(Zt),b.collisionArrays[Zt]);if(v&&b.bucketInstanceId in this.collisionCircleArrays){const Zt=this.collisionCircleArrays[b.bucketInstanceId];l.invert(Zt.invProjMatrix,P),Zt.viewportMatrix=this.collisionIndex.getViewportMatrix()}b.justReloaded=!1}markUsedJustification(o,f,v,b){let E;E=b===l.WritingMode.vertical?v.verticalPlacedTextSymbolIndex:{left:v.leftJustifiedTextSymbolIndex,center:v.centerJustifiedTextSymbolIndex,right:v.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(f)];const P=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex,v.verticalPlacedTextSymbolIndex];for(const R of P)R>=0&&(o.text.placedSymbolArray.get(R).crossTileID=E>=0&&R!==E?0:v.crossTileID)}markUsedOrientation(o,f,v){const b=f===l.WritingMode.horizontal||f===l.WritingMode.horizontalOnly?f:0,E=f===l.WritingMode.vertical?f:0,P=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex];for(const R of P)o.text.placedSymbolArray.get(R).placedOrientation=b;v.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(v.verticalPlacedTextSymbolIndex).placedOrientation=E)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let v=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const b=f?f.symbolFadeChange(o):1,E=f?f.opacities:{},P=f?f.variableOffsets:{},R=f?f.placedOrientations:{};for(const O in this.placements){const N=this.placements[O],K=E[O];K?(this.opacities[O]=new pn(K,b,N.text,N.icon),v=v||N.text!==K.text.placed||N.icon!==K.icon.placed):(this.opacities[O]=new pn(null,b,N.text,N.icon,N.skipFade),v=v||N.text||N.icon)}for(const O in E){const N=E[O];if(!this.opacities[O]){const K=new pn(N,b,!1,!1);K.isHidden()||(this.opacities[O]=K,v=v||N.text.placed||N.icon.placed)}}for(const O in P)this.variableOffsets[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.variableOffsets[O]=P[O]);for(const O in R)this.placedOrientations[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.placedOrientations[O]=R[O]);if(f&&f.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");v?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:o)}updateLayerOpacities(o,f){const v={};for(const b of f){const E=b.getBucket(o);E&&b.latestFeatureIndex&&o.id===E.layerIds[0]&&this.updateBucketOpacities(E,v,b.collisionBoxArray)}}updateBucketOpacities(o,f,v){o.hasTextData()&&(o.text.opacityVertexArray.clear(),o.text.hasVisibleVertices=!1),o.hasIconData()&&(o.icon.opacityVertexArray.clear(),o.icon.hasVisibleVertices=!1),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const b=o.layers[0].layout,E=new pn(null,0,!1,!1,!0),P=b.get("text-allow-overlap"),R=b.get("icon-allow-overlap"),O=b.get("text-variable-anchor"),N=b.get("text-rotation-alignment")==="map",K=b.get("text-pitch-alignment")==="map",Z=b.get("icon-text-fit")!=="none",le=new pn(null,0,P&&(R||!o.hasIconData()||b.get("icon-optional")),R&&(P||!o.hasTextData()||b.get("text-optional")),!0);!o.collisionArrays&&v&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(v);const Se=(ve,xe,De)=>{for(let Ue=0;Ue<xe/4;Ue++)ve.opacityVertexArray.emplaceBack(De);ve.hasVisibleVertices=ve.hasVisibleVertices||De!==ri};for(let ve=0;ve<o.symbolInstances.length;ve++){const xe=o.symbolInstances.get(ve),{numHorizontalGlyphVertices:De,numVerticalGlyphVertices:Ue,crossTileID:ot}=xe;let Me=this.opacities[ot];f[ot]?Me=E:Me||(Me=le,this.opacities[ot]=Me),f[ot]=!0;const it=xe.numIconVertices>0,_t=this.placedOrientations[xe.crossTileID],At=_t===l.WritingMode.vertical,Rt=_t===l.WritingMode.horizontal||_t===l.WritingMode.horizontalOnly;if(De>0||Ue>0){const Bt=li(Me.text);Se(o.text,De,At?ri:Bt),Se(o.text,Ue,Rt?ri:Bt);const Lt=Me.text.isHidden();[xe.rightJustifiedTextSymbolIndex,xe.centerJustifiedTextSymbolIndex,xe.leftJustifiedTextSymbolIndex].forEach(Bn=>{Bn>=0&&(o.text.placedSymbolArray.get(Bn).hidden=Lt||At?1:0)}),xe.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(xe.verticalPlacedTextSymbolIndex).hidden=Lt||Rt?1:0);const nn=this.variableOffsets[xe.crossTileID];nn&&this.markUsedJustification(o,nn.anchor,xe,_t);const Sn=this.placedOrientations[xe.crossTileID];Sn&&(this.markUsedJustification(o,"left",xe,Sn),this.markUsedOrientation(o,Sn,xe))}if(it){const Bt=li(Me.icon),Lt=!(Z&&xe.verticalPlacedIconSymbolIndex&&At);xe.placedIconSymbolIndex>=0&&(Se(o.icon,xe.numIconVertices,Lt?Bt:ri),o.icon.placedSymbolArray.get(xe.placedIconSymbolIndex).hidden=Me.icon.isHidden()),xe.verticalPlacedIconSymbolIndex>=0&&(Se(o.icon,xe.numVerticalIconVertices,Lt?ri:Bt),o.icon.placedSymbolArray.get(xe.verticalPlacedIconSymbolIndex).hidden=Me.icon.isHidden())}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const Bt=o.collisionArrays[ve];if(Bt){let Lt=new l.Point(0,0);if(Bt.textBox||Bt.verticalTextBox){let Sn=!0;if(O){const Bn=this.variableOffsets[ot];Bn?(Lt=Vn(Bn.anchor,Bn.width,Bn.height,Bn.textOffset,Bn.textBoxScale),N&&Lt._rotate(K?this.transform.angle:-this.transform.angle)):Sn=!1}Bt.textBox&&Ge(o.textCollisionBox.collisionVertexArray,Me.text.placed,!Sn||At,Lt.x,Lt.y),Bt.verticalTextBox&&Ge(o.textCollisionBox.collisionVertexArray,Me.text.placed,!Sn||Rt,Lt.x,Lt.y)}const nn=!!(!Rt&&Bt.verticalIconBox);Bt.iconBox&&Ge(o.iconCollisionBox.collisionVertexArray,Me.icon.placed,nn,Z?Lt.x:0,Z?Lt.y:0),Bt.verticalIconBox&&Ge(o.iconCollisionBox.collisionVertexArray,Me.icon.placed,!nn,Z?Lt.x:0,Z?Lt.y:0)}}}if(o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.text.opacityVertexArray.length!==o.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${o.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${o.text.layoutVertexArray.length}) / 4`);if(o.icon.opacityVertexArray.length!==o.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${o.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${o.icon.layoutVertexArray.length}) / 4`);if(o.bucketInstanceId in this.collisionCircleArrays){const ve=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=ve.invProjMatrix,o.placementViewportMatrix=ve.viewportMatrix,o.collisionCircleArray=ve.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,f){const v=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*v>o}setStale(){this.stale=!0}}function Ge(_,o,f,v,b){_.emplaceBack(o?1:0,f?1:0,v||0,b||0),_.emplaceBack(o?1:0,f?1:0,v||0,b||0),_.emplaceBack(o?1:0,f?1:0,v||0,b||0),_.emplaceBack(o?1:0,f?1:0,v||0,b||0)}const Ct=Math.pow(2,25),gt=Math.pow(2,24),ze=Math.pow(2,17),yt=Math.pow(2,16),Wt=Math.pow(2,9),An=Math.pow(2,8),Yn=Math.pow(2,1);function li(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const o=_.placed?1:0,f=Math.floor(127*_.opacity);return f*Ct+o*gt+f*ze+o*yt+f*Wt+o*An+f*Yn+o}const ri=0;class fo{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&!o.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(o,f,v,b,E){const P=this._bucketParts;for(;this._currentTileIndex<o.length;)if(f.getBucketParts(P,b,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,E())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,P.sort((R,O)=>R.sortKey-O.sortKey));this._currentPartIndex<P.length;)if(f.placeLayerBucketPart(P[this._currentPartIndex],this._seenCrossTileIDs,v),this._currentPartIndex++,E())return!0;return!1}}class Ui{constructor(o,f,v,b,E,P,R,O){this.placement=new Ut(o,f,P,R,O),this._currentPlacementIndex=v.length-1,this._forceFullPlacement=b,this._showCollisionBoxes=E,this._done=!1}isDone(){return this._done}continuePlacement(o,f,v){const b=l.exported.now(),E=()=>!this._forceFullPlacement&&l.exported.now()-b>2;for(;this._currentPlacementIndex>=0;){const P=f[o[this._currentPlacementIndex]],R=this.placement.collisionIndex.transform.zoom;if(P.type==="symbol"&&(!P.minzoom||P.minzoom<=R)&&(!P.maxzoom||P.maxzoom>R)){if(this._inProgressLayer||(this._inProgressLayer=new fo(P)),this._inProgressLayer.continuePlacement(v[P.source],this.placement,this._showCollisionBoxes,P,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const Ci=512/l.EXTENT/2;class po{constructor(o,f,v){this.tileID=o,this.bucketInstanceId=v,this._symbolsByKey={};const b=new Map;for(let E=0;E<f.length;E++){const P=f.get(E),R=P.key,O=b.get(R);O?O.push(P):b.set(R,[P])}for(const[E,P]of b){const R={positions:P.map(O=>({x:Math.floor(O.anchorX*Ci),y:Math.floor(O.anchorY*Ci)})),crossTileIDs:P.map(O=>O.crossTileID)};if(R.positions.length>128){const O=new l.KDBush(R.positions.length,16,Uint16Array);for(const{x:N,y:K}of R.positions)O.add(N,K);O.finish(),delete R.positions,R.index=O}this._symbolsByKey[E]=R}}getScaledCoordinates(o,f){const{x:v,y:b,z:E}=this.tileID.canonical,{x:P,y:R,z:O}=f.canonical,N=Ci/Math.pow(2,O-E),K=(R*l.EXTENT+o.anchorY)*N,Z=b*l.EXTENT*Ci;return{x:Math.floor((P*l.EXTENT+o.anchorX)*N-v*l.EXTENT*Ci),y:Math.floor(K-Z)}}findMatches(o,f,v){const b=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z);for(let E=0;E<o.length;E++){const P=o.get(E);if(P.crossTileID)continue;const R=this._symbolsByKey[P.key];if(!R)continue;const O=this.getScaledCoordinates(P,f);if(R.index){const N=R.index.range(O.x-b,O.y-b,O.x+b,O.y+b).sort();for(const K of N){const Z=R.crossTileIDs[K];if(!v[Z]){v[Z]=!0,P.crossTileID=Z;break}}}else if(R.positions)for(let N=0;N<R.positions.length;N++){const K=R.positions[N],Z=R.crossTileIDs[N];if(Math.abs(K.x-O.x)<=b&&Math.abs(K.y-O.y)<=b&&!v[Z]){v[Z]=!0,P.crossTileID=Z;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:o})=>o)}}class mo{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class yr{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const f=Math.round((o-this.lng)/360);if(f!==0)for(const v in this.indexes){const b=this.indexes[v],E={};for(const P in b){const R=b[P];R.tileID=R.tileID.unwrapTo(R.tileID.wrap+f),E[R.tileID.key]=R}this.indexes[v]=E}this.lng=o}addBucket(o,f,v){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let E=0;E<f.symbolInstances.length;E++)f.symbolInstances.get(E).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});const b=this.usedCrossTileIDs[o.overscaledZ];for(const E in this.indexes){const P=this.indexes[E];if(Number(E)>o.overscaledZ)for(const R in P){const O=P[R];O.tileID.isChildOf(o)&&O.findMatches(f.symbolInstances,o,b)}else{const R=P[o.scaledTo(Number(E)).key];R&&R.findMatches(f.symbolInstances,o,b)}}for(let E=0;E<f.symbolInstances.length;E++){const P=f.symbolInstances.get(E);P.crossTileID||(P.crossTileID=v.generate(),b[P.crossTileID]=!0)}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new po(o,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(o,f){for(const v of f.getCrossTileIDsLists())for(const b of v)delete this.usedCrossTileIDs[o][b]}removeStaleBuckets(o){let f=!1;for(const v in this.indexes){const b=this.indexes[v];for(const E in b)o[b[E].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,b[E]),delete b[E],f=!0)}return f}}class Sc{constructor(){this.layerIndexes={},this.crossTileIDs=new mo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,f,v){let b=this.layerIndexes[o.id];b===void 0&&(b=this.layerIndexes[o.id]=new yr);let E=!1;const P={};b.handleWrapJump(v);for(const R of f){const O=R.getBucket(o);O&&o.id===O.layerIds[0]&&(O.bucketInstanceId||(O.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket(R.tileID,O,this.crossTileIDs)&&(E=!0),P[O.bucketInstanceId]=!0)}return b.removeStaleBuckets(P)&&(E=!0),E}pruneUnusedLayers(o){const f={};o.forEach(v=>{f[v]=!0});for(const v in this.layerIndexes)f[v]||delete this.layerIndexes[v]}}const Zr=(_,o)=>l.emitValidationErrors(_,o&&o.filter(f=>f.identifier!=="source.canvas")),xm=l.pick(l.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),go=l.pick(l.operations,["setCenter","setZoom","setBearing","setPitch"]),ny=l.emptyStyle();class Bs extends l.Evented{constructor(o,f={}){super(),this.map=o,this.dispatcher=new dt(Qe(),this,o._getMapId()),this.imageManager=new X,this.imageManager.setEventedParent(this),this.glyphManager=new Xe(o._requestManager,f.localIdeographFontFamily),this.lineAtlas=new et(256,512),this.crossTileSymbolIndex=new Sc,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());const v=this;this._rtlTextPluginCallback=Bs.registerForPluginStateChange(b=>{v.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:b.pluginStatus,pluginURL:b.pluginURL},(E,P)=>{if(l.triggerPluginCompletionEvent(E),P&&P.every(R=>R))for(const R in v.sourceCaches){const O=v.sourceCaches[R].getSource().type;O!=="vector"&&O!=="geojson"||v.sourceCaches[R].reload()}})}),this.on("data",b=>{if(b.dataType!=="source"||b.sourceDataType!=="metadata")return;const E=this.sourceCaches[b.sourceId];if(!E)return;const P=E.getSource();if(P&&P.vectorLayerIds)for(const R in this._layers){const O=this._layers[R];O.source===P.id&&this._validateLayer(O)}})}loadURL(o,f={},v){this.fire(new l.Event("dataloading",{dataType:"style"})),f.validate=typeof f.validate!="boolean"||f.validate;const b=this.map._requestManager.transformRequest(o,F.Style);this._request=l.getJSON(b,(E,P)=>{this._request=null,E?this.fire(new l.ErrorEvent(E)):P&&this._load(P,f,v)})}loadJSON(o,f={},v){this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.exported.frame(()=>{this._request=null,f.validate=f.validate!==!1,this._load(o,f,v)})}loadEmpty(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(ny,{validate:!1})}_load(o,f,v){const b=f.transformStyle?f.transformStyle(v,o):o;if(!f.validate||!Zr(this,l.validateStyle(b))){this._loaded=!0,this.stylesheet=b;for(const E in b.sources)this.addSource(E,b.sources[E],{validate:!1});b.sprite?this._loadSprite(b.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(b.glyphs),this._createLayers(),this.light=new nt(this.stylesheet.light),this.map.setTerrain(this.stylesheet.terrain),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}}_createLayers(){const o=l.derefLayers(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",o),this._order=o.map(f=>f.id),this._layers={},this._serializedLayers=null;for(const f of o){const v=l.createStyleLayer(f);v.setEventedParent(this,{layer:{id:f.id}}),this._layers[f.id]=v}}_loadSprite(o,f=!1,v){this.imageManager.setLoaded(!1),this._spriteRequest=function(b,E,P,R){const O=G(b),N=O.length,K=P>1?"@2x":"",Z={},le={},Se={};for(const{id:ve,url:xe}of O){const De=E.transformRequest(E.normalizeSpriteURL(xe,K,".json"),F.SpriteJSON),Ue=`${ve}_${De.url}`;Z[Ue]=l.getJSON(De,(it,_t)=>{delete Z[Ue],le[ve]=_t,U(R,le,Se,it,N)});const ot=E.transformRequest(E.normalizeSpriteURL(xe,K,".png"),F.SpriteImage),Me=`${ve}_${ot.url}`;Z[Me]=z.getImage(ot,(it,_t)=>{delete Z[Me],Se[ve]=_t,U(R,le,Se,it,N)})}return{cancel(){for(const ve of Object.values(Z))ve.cancel()}}}(o,this.map._requestManager,this.map.getPixelRatio(),(b,E)=>{if(this._spriteRequest=null,b)this.fire(new l.ErrorEvent(b));else if(E)for(const P in E){this._spritesImagesIds[P]=[];const R=this._spritesImagesIds[P]?this._spritesImagesIds[P].filter(O=>!(O in E)):[];for(const O of R)this.imageManager.removeImage(O),this._changedImages[O]=!0;for(const O in E[P]){const N=P==="default"?O:`${P}:${O}`;this._spritesImagesIds[P].push(N),N in this.imageManager.images?this.imageManager.updateImage(N,E[P][O],!1):this.imageManager.addImage(N,E[P][O]),f&&(this._changedImages[N]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),f&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"})),v&&v(b)})}_unloadSprite(){for(const o of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(o),this._changedImages[o]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}_validateLayer(o){const f=this.sourceCaches[o.source];if(!f)return;const v=o.sourceLayer;if(!v)return;const b=f.getSource();(b.type==="geojson"||b.vectorLayerIds&&b.vectorLayerIds.indexOf(v)===-1)&&this.fire(new l.ErrorEvent(new Error(`Source layer "${v}" does not exist on source "${b.id}" as specified by style layer "${o.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(o){const f=this._serializedAllLayers();if(!o||o.length===0)return Object.values(f);const v=[];for(const b of o)f[b]&&v.push(f[b]);return v}_serializedAllLayers(){let o=this._serializedLayers;if(o)return o;o=this._serializedLayers={};const f=Object.keys(this._layers);for(const v of f){const b=this._layers[v];b.type!=="custom"&&(o[v]=b.serialize())}return o}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const o in this.sourceCaches)if(this.sourceCaches[o].hasTransition())return!0;for(const o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(o){if(!this._loaded)return;const f=this._changed;if(this._changed){const b=Object.keys(this._updatedLayers),E=Object.keys(this._removedLayers);(b.length||E.length)&&this._updateWorkerLayers(b,E);for(const P in this._updatedSources){const R=this._updatedSources[P];if(R==="reload")this._reloadSource(P);else{if(R!=="clear")throw new Error(`Invalid action ${R}`);this._clearSource(P)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const P in this._updatedPaintProps)this._layers[P].updateTransitions(o);this.light.updateTransitions(o),this._resetUpdates()}const v={};for(const b in this.sourceCaches){const E=this.sourceCaches[b];v[b]=E.used,E.used=!1}for(const b of this._order){const E=this._layers[b];E.recalculate(o,this._availableImages),!E.isHidden(o.zoom)&&E.source&&(this.sourceCaches[E.source].used=!0)}for(const b in v){const E=this.sourceCaches[b];v[b]!==E.used&&E.fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:b}))}this.light.recalculate(o),this.z=o.zoom,f&&this.fire(new l.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=Object.keys(this._changedImages);if(o.length){for(const f in this.sourceCaches)this.sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(o,f){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(o),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(o,f={}){this._checkLoaded();const v=this.serialize();if(o=f.transformStyle?f.transformStyle(v,o):o,Zr(this,l.validateStyle(o)))return!1;(o=l.clone$1(o)).layers=l.derefLayers(o.layers);const b=l.diffStyles(v,o).filter(P=>!(P.command in go));if(b.length===0)return!1;const E=b.filter(P=>!(P.command in xm));if(E.length>0)throw new Error(`Unimplemented: ${E.map(P=>P.command).join(", ")}.`);for(const P of b)P.command!=="setTransition"&&this[P.command].apply(this,P.args);return this.stylesheet=o,!0}addImage(o,f){if(this.getImage(o))return this.fire(new l.ErrorEvent(new Error(`An image named "${o}" already exists.`)));this.imageManager.addImage(o,f),this._afterImageUpdated(o)}updateImage(o,f){this.imageManager.updateImage(o,f)}getImage(o){return this.imageManager.getImage(o)}removeImage(o){if(!this.getImage(o))return this.fire(new l.ErrorEvent(new Error(`An image named "${o}" does not exist.`)));this.imageManager.removeImage(o),this._afterImageUpdated(o)}_afterImageUpdated(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(o,f,v={}){if(this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error(`Source "${o}" already exists.`);if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(l.validateStyle.source,`sources.${o}`,f,null,v))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const b=this.sourceCaches[o]=new Dt(o,f,this.dispatcher);b.style=this,b.setEventedParent(this,()=>({isSourceLoaded:b.loaded(),source:b.serialize(),sourceId:o})),b.onAdd(this.map),this._changed=!0}removeSource(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===o)return this.fire(new l.ErrorEvent(new Error(`Source "${o}" cannot be removed while layer "${v}" is using it.`)));const f=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],f.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),f.setEventedParent(null),f.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(o,f){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error(`There is no source with this ID=${o}`);const v=this.sourceCaches[o].getSource();if(v.type!=="geojson")throw new Error(`geojsonSource.type is ${v.type}, which is !== 'geojson`);v.setData(f),this._changed=!0}getSource(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()}addLayer(o,f,v={}){this._checkLoaded();const b=o.id;if(this.getLayer(b))return void this.fire(new l.ErrorEvent(new Error(`Layer "${b}" already exists on this map.`)));let E;if(o.type==="custom"){if(Zr(this,l.validateCustomStyleLayer(o)))return;E=l.createStyleLayer(o)}else{if(typeof o.source=="object"&&(this.addSource(b,o.source),o=l.clone$1(o),o=l.extend(o,{source:b})),this._validate(l.validateStyle.layer,`layers.${b}`,o,{arrayIndex:-1},v))return;E=l.createStyleLayer(o),this._validateLayer(E),E.setEventedParent(this,{layer:{id:b}})}const P=f?this._order.indexOf(f):this._order.length;if(f&&P===-1)this.fire(new l.ErrorEvent(new Error(`Cannot add layer "${b}" before non-existing layer "${f}".`)));else{if(this._order.splice(P,0,b),this._layerOrderChanged=!0,this._layers[b]=E,this._removedLayers[b]&&E.source&&E.type!=="custom"){const R=this._removedLayers[b];delete this._removedLayers[b],R.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",this.sourceCaches[E.source].pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map)}}moveLayer(o,f){if(this._checkLoaded(),this._changed=!0,!this._layers[o])return void this.fire(new l.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be moved.`)));if(o===f)return;const v=this._order.indexOf(o);this._order.splice(v,1);const b=f?this._order.indexOf(f):this._order.length;f&&b===-1?this.fire(new l.ErrorEvent(new Error(`Cannot move layer "${o}" before non-existing layer "${f}".`))):(this._order.splice(b,0,o),this._layerOrderChanged=!0)}removeLayer(o){this._checkLoaded();const f=this._layers[o];if(!f)return void this.fire(new l.ErrorEvent(new Error(`Cannot remove non-existing layer "${o}".`)));f.setEventedParent(null);const v=this._order.indexOf(o);this._order.splice(v,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=f,delete this._layers[o],this._serializedLayers&&delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],f.onRemove&&f.onRemove(this.map)}getLayer(o){return this._layers[o]}hasLayer(o){return o in this._layers}setLayerZoomRange(o,f,v){this._checkLoaded();const b=this.getLayer(o);b?b.minzoom===f&&b.maxzoom===v||(f!=null&&(b.minzoom=f),v!=null&&(b.maxzoom=v),this._updateLayer(b)):this.fire(new l.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${o}".`)))}setFilter(o,f,v={}){this._checkLoaded();const b=this.getLayer(o);if(b){if(!l.deepEqual(b.filter,f))return f==null?(b.filter=void 0,void this._updateLayer(b)):void(this._validate(l.validateStyle.filter,`layers.${b.id}.filter`,f,null,v)||(b.filter=l.clone$1(f),this._updateLayer(b)))}else this.fire(new l.ErrorEvent(new Error(`Cannot filter non-existing layer "${o}".`)))}getFilter(o){return l.clone$1(this.getLayer(o).filter)}setLayoutProperty(o,f,v,b={}){this._checkLoaded();const E=this.getLayer(o);E?l.deepEqual(E.getLayoutProperty(f),v)||(E.setLayoutProperty(f,v,b),this._updateLayer(E)):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${o}".`)))}getLayoutProperty(o,f){const v=this.getLayer(o);if(v)return v.getLayoutProperty(f);this.fire(new l.ErrorEvent(new Error(`Cannot get style of non-existing layer "${o}".`)))}setPaintProperty(o,f,v,b={}){this._checkLoaded();const E=this.getLayer(o);E?l.deepEqual(E.getPaintProperty(f),v)||(E.setPaintProperty(f,v,b)&&this._updateLayer(E),this._changed=!0,this._updatedPaintProps[o]=!0):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${o}".`)))}getPaintProperty(o,f){return this.getLayer(o).getPaintProperty(f)}setFeatureState(o,f){this._checkLoaded();const v=o.source,b=o.sourceLayer,E=this.sourceCaches[v];if(E===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${v}' does not exist in the map's style.`)));const P=E.getSource().type;P==="geojson"&&b?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):P!=="vector"||b?(o.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),E.setFeatureState(b,o.id,f)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(o,f){this._checkLoaded();const v=o.source,b=this.sourceCaches[v];if(b===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${v}' does not exist in the map's style.`)));const E=b.getSource().type,P=E==="vector"?o.sourceLayer:void 0;E!=="vector"||P?f&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):b.removeFeatureState(P,o.id,f):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(o){this._checkLoaded();const f=o.source,v=o.sourceLayer,b=this.sourceCaches[f];if(b!==void 0)return b.getSource().type!=="vector"||v?(o.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),b.getFeatureState(v,o.id)):void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const o=l.mapObject(this.sourceCaches,b=>b.serialize()),f=this._serializeByIds(this._order),v=this.stylesheet;return l.filterObject({version:v.version,name:v.name,metadata:v.metadata,light:v.light,center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,sprite:v.sprite,glyphs:v.glyphs,transition:v.transition,sources:o,layers:f},b=>b!==void 0)}_updateLayer(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(o){const f=P=>this._layers[P].type==="fill-extrusion",v={},b=[];for(let P=this._order.length-1;P>=0;P--){const R=this._order[P];if(f(R)){v[R]=P;for(const O of o){const N=O[R];if(N)for(const K of N)b.push(K)}}}b.sort((P,R)=>R.intersectionZ-P.intersectionZ);const E=[];for(let P=this._order.length-1;P>=0;P--){const R=this._order[P];if(f(R))for(let O=b.length-1;O>=0;O--){const N=b[O].feature;if(v[N.layer.id]<P)break;E.push(N),b.pop()}else for(const O of o){const N=O[R];if(N)for(const K of N)E.push(K.feature)}}return E}queryRenderedFeatures(o,f,v){f&&f.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",f.filter,null,f);const b={};if(f&&f.layers){if(!Array.isArray(f.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const R of f.layers){const O=this._layers[R];if(!O)return this.fire(new l.ErrorEvent(new Error(`The layer '${R}' does not exist in the map's style and cannot be queried for features.`))),[];b[O.source]=!0}}const E=[];f.availableImages=this._availableImages;const P=this._serializedAllLayers();for(const R in this.sourceCaches)f.layers&&!b[R]||E.push(Pe(this.sourceCaches[R],this._layers,P,o,f,v));return this.placement&&E.push(function(R,O,N,K,Z,le,Se){const ve={},xe=le.queryRenderedSymbols(K),De=[];for(const Ue of Object.keys(xe).map(Number))De.push(Se[Ue]);De.sort(We);for(const Ue of De){const ot=Ue.featureIndex.lookupSymbolFeatures(xe[Ue.bucketInstanceId],O,Ue.bucketIndex,Ue.sourceLayerIndex,Z.filter,Z.layers,Z.availableImages,R);for(const Me in ot){const it=ve[Me]=ve[Me]||[],_t=ot[Me];_t.sort((At,Rt)=>{const Bt=Ue.featureSortOrder;if(Bt){const Lt=Bt.indexOf(At.featureIndex);return Bt.indexOf(Rt.featureIndex)-Lt}return Rt.featureIndex-At.featureIndex});for(const At of _t)it.push(At)}}for(const Ue in ve)ve[Ue].forEach(ot=>{const Me=ot.feature,it=N[R[Ue].source].getFeatureState(Me.layer["source-layer"],Me.id);Me.source=Me.layer.source,Me.layer["source-layer"]&&(Me.sourceLayer=Me.layer["source-layer"]),Me.state=it});return ve}(this._layers,P,this.sourceCaches,o,f,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(E)}querySourceFeatures(o,f){f&&f.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",f.filter,null,f);const v=this.sourceCaches[o];return v?function(b,E){const P=b.getRenderableIds().map(N=>b.getTileByID(N)),R=[],O={};for(let N=0;N<P.length;N++){const K=P[N],Z=K.tileID.canonical.key;O[Z]||(O[Z]=!0,K.querySourceFeatures(R,E))}return R}(v,f):[]}addSourceType(o,f,v){return Bs.getSourceType(o)?v(new Error(`A source type called "${o}" already exists.`)):(Bs.setSourceType(o,f),f.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:f.workerSourceURL},v):v(null,null))}getLight(){return this.light.getLight()}setLight(o,f={}){this._checkLoaded();const v=this.light.getLight();let b=!1;for(const P in o)if(!l.deepEqual(o[P],v[P])){b=!0;break}if(!b)return;const E={now:l.exported.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,f),this.light.updateTransitions(E)}_validate(o,f,v,b,E={}){return(!E||E.validate!==!1)&&Zr(this,o.call(l.validateStyle,l.extend({key:f,style:this.serialize(),value:v,styleSpec:l.v8Spec},b)))}_remove(o=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const f in this._layers)this._layers[f].setEventedParent(null);for(const f in this.sourceCaches){const v=this.sourceCaches[f];v.setEventedParent(null),v.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(o)}_clearSource(o){this.sourceCaches[o].clearTiles()}_reloadSource(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()}_updateSources(o){for(const f in this.sourceCaches)this.sourceCaches[f].update(o,this.map.terrain)}_generateCollisionBoxes(){for(const o in this.sourceCaches)this._reloadSource(o)}_updatePlacement(o,f,v,b,E=!1){let P=!1,R=!1;const O={};for(const N of this._order){const K=this._layers[N];if(K.type!=="symbol")continue;if(!O[K.source]){const le=this.sourceCaches[K.source];O[K.source]=le.getRenderableIds(!0).map(Se=>le.getTileByID(Se)).sort((Se,ve)=>ve.tileID.overscaledZ-Se.tileID.overscaledZ||(Se.tileID.isLessThan(ve.tileID)?-1:1))}const Z=this.crossTileSymbolIndex.addLayer(K,O[K.source],o.center.lng);P=P||Z}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((E=E||this._layerOrderChanged||v===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.exported.now(),o.zoom))&&(this.pauseablePlacement=new Ui(o,this.map.terrain,this._order,E,f,v,b,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,O),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.exported.now()),R=!0),P&&this.pauseablePlacement.placement.setStale()),R||P)for(const N of this._order){const K=this._layers[N];K.type==="symbol"&&this.placement.updateLayerOpacities(K,O[K.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.exported.now())}_releaseSymbolFadeTiles(){for(const o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()}getImages(o,f,v){this.imageManager.getImages(f.icons,v),this._updateTilesForChangedImages();const b=this.sourceCaches[f.source];b&&b.setDependencies(f.tileID.key,f.type,f.icons)}getGlyphs(o,f,v){this.glyphManager.getGlyphs(f.stacks,v);const b=this.sourceCaches[f.source];b&&b.setDependencies(f.tileID.key,f.type,[""])}getResource(o,f,v){return l.makeRequest(f,v)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(o,f={}){this._checkLoaded(),o&&this._validate(l.validateStyle.glyphs,"glyphs",o,null,f)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=o,this.glyphManager.entries={},this.glyphManager.setURL(o))}addSprite(o,f,v={},b){this._checkLoaded();const E=[{id:o,url:f}],P=[...G(this.stylesheet.sprite),...E];this._validate(l.validateStyle.sprite,"sprite",P,null,v)||(this.stylesheet.sprite=P,this._loadSprite(E,!0,b))}removeSprite(o){this._checkLoaded();const f=G(this.stylesheet.sprite);if(f.find(v=>v.id===o)){if(this._spritesImagesIds[o])for(const v of this._spritesImagesIds[o])this.imageManager.removeImage(v),this._changedImages[v]=!0;f.splice(f.findIndex(v=>v.id===o),1),this.stylesheet.sprite=f.length>0?f:void 0,delete this._spritesImagesIds[o],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}else this.fire(new l.ErrorEvent(new Error(`Sprite "${o}" doesn't exists on this map.`)))}getSprite(){return G(this.stylesheet.sprite)}setSprite(o,f={},v){this._checkLoaded(),o&&this._validate(l.validateStyle.sprite,"sprite",o,null,f)||(this.stylesheet.sprite=o,o?this._loadSprite(o,!0,v):(this._unloadSprite(),v&&v(null)))}}Bs.getSourceType=function(_){return q[_]},Bs.setSourceType=function(_,o){q[_]=o},Bs.registerForPluginStateChange=l.registerForPluginStateChange;var bl=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),xl="in vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Is={prelude:_i(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:_i(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:_i(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:_i(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:_i("void main() {fragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:_i(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:_i(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:_i("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:_i("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:_i("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:_i(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:_i(`in vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;out vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:_i(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:_i(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:_i(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:_i(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:_i(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));fragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:_i(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:_i(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:_i(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:_i(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:_i(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:_i(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:_i(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:_i(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:_i(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:_i("uniform sampler2D u_texture;in vec2 v_texture_pos;void main() {fragColor=texture(u_texture,v_texture_pos);}",xl),terrainDepth:_i("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}",xl),terrainCoords:_i("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",xl)};function _i(_,o){const f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=o.match(/(attribute|in) ([\w]+) ([\w]+)/g),b=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=E?E.concat(b):b,R={};return{fragmentSource:_=_.replace(f,(O,N,K,Z,le)=>(R[le]=!0,N==="define"?`
#ifndef HAS_UNIFORM_u_${le}
in ${K} ${Z} ${le};
#else
uniform ${K} ${Z} u_${le};
#endif
`:`
#ifdef HAS_UNIFORM_u_${le}
    ${K} ${Z} ${le} = u_${le};
#endif
`)),vertexSource:o=o.replace(f,(O,N,K,Z,le)=>{const Se=Z==="float"?"vec2":"vec4",ve=le.match(/color/)?"color":Se;return R[le]?N==="define"?`
#ifndef HAS_UNIFORM_u_${le}
uniform lowp float u_${le}_t;
in ${K} ${Se} a_${le};
out ${K} ${Z} ${le};
#else
uniform ${K} ${Z} u_${le};
#endif
`:ve==="vec4"?`
#ifndef HAS_UNIFORM_u_${le}
    ${le} = a_${le};
#else
    ${K} ${Z} ${le} = u_${le};
#endif
`:`
#ifndef HAS_UNIFORM_u_${le}
    ${le} = unpack_mix_${ve}(a_${le}, u_${le}_t);
#else
    ${K} ${Z} ${le} = u_${le};
#endif
`:N==="define"?`
#ifndef HAS_UNIFORM_u_${le}
uniform lowp float u_${le}_t;
in ${K} ${Se} a_${le};
#else
uniform ${K} ${Z} u_${le};
#endif
`:ve==="vec4"?`
#ifndef HAS_UNIFORM_u_${le}
    ${K} ${Z} ${le} = a_${le};
#else
    ${K} ${Z} ${le} = u_${le};
#endif
`:`
#ifndef HAS_UNIFORM_u_${le}
    ${K} ${Z} ${le} = unpack_mix_${ve}(a_${le}, u_${le}_t);
#else
    ${K} ${Z} ${le} = u_${le};
#endif
`}),staticAttributes:v,staticUniforms:P}}class Du{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(o,f,v,b,E,P,R,O,N){this.context=o;let K=this.boundPaintVertexBuffers.length!==b.length;for(let Z=0;!K&&Z<b.length;Z++)this.boundPaintVertexBuffers[Z]!==b[Z]&&(K=!0);!this.vao||this.boundProgram!==f||this.boundLayoutVertexBuffer!==v||K||this.boundIndexBuffer!==E||this.boundVertexOffset!==P||this.boundDynamicVertexBuffer!==R||this.boundDynamicVertexBuffer2!==O||this.boundDynamicVertexBuffer3!==N?this.freshBind(f,v,b,E,P,R,O,N):(o.bindVertexArray.set(this.vao),R&&R.bind(),E&&E.dynamicDraw&&E.bind(),O&&O.bind(),N&&N.bind())}freshBind(o,f,v,b,E,P,R,O){const N=o.numAttributes,K=this.context,Z=K.gl;this.vao&&this.destroy(),this.vao=K.createVertexArray(),K.bindVertexArray.set(this.vao),this.boundProgram=o,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=b,this.boundVertexOffset=E,this.boundDynamicVertexBuffer=P,this.boundDynamicVertexBuffer2=R,this.boundDynamicVertexBuffer3=O,f.enableAttributes(Z,o);for(const le of v)le.enableAttributes(Z,o);P&&P.enableAttributes(Z,o),R&&R.enableAttributes(Z,o),O&&O.enableAttributes(Z,o),f.bind(),f.setVertexAttribPointers(Z,o,E);for(const le of v)le.bind(),le.setVertexAttribPointers(Z,o,E);P&&(P.bind(),P.setVertexAttribPointers(Z,o,E)),b&&b.bind(),R&&(R.bind(),R.setVertexAttribPointers(Z,o,E)),O&&(O.bind(),O.setVertexAttribPointers(Z,o,E)),K.currentNumAttributes=N}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function kh(_){const o=[];for(let f=0;f<_.length;f++){if(_[f]===null)continue;const v=_[f].split(" ");o.push(v.pop())}return o}class iy{constructor(o,f,v,b,E,P,R){const O=o.gl;this.program=O.createProgram();const N=kh(v.staticAttributes),K=b?b.getBinderAttributes():[],Z=N.concat(K),le=Is.prelude.staticUniforms?kh(Is.prelude.staticUniforms):[],Se=v.staticUniforms?kh(v.staticUniforms):[],ve=b?b.getBinderUniforms():[],xe=le.concat(Se).concat(ve),De=[];for(const Rt of xe)De.indexOf(Rt)<0&&De.push(Rt);const Ue=b?b.defines():[];P&&Ue.push("#define OVERDRAW_INSPECTOR;"),R&&Ue.push("#define TERRAIN3D;"),Ue.unshift("#version 300 es");const ot=Ue.concat(Is.prelude.fragmentSource,v.fragmentSource).join(`
`),Me=Ue.concat(Is.prelude.vertexSource,v.vertexSource).join(`
`),it=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);O.shaderSource(it,ot),O.compileShader(it),O.attachShader(this.program,it);const _t=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);O.shaderSource(_t,Me),O.compileShader(_t),O.attachShader(this.program,_t),this.attributes={};const At={};this.numAttributes=Z.length;for(let Rt=0;Rt<this.numAttributes;Rt++)Z[Rt]&&(O.bindAttribLocation(this.program,Rt,Z[Rt]),this.attributes[Z[Rt]]=Rt);O.linkProgram(this.program),O.deleteShader(_t),O.deleteShader(it);for(let Rt=0;Rt<De.length;Rt++){const Bt=De[Rt];if(Bt&&!At[Bt]){const Lt=O.getUniformLocation(this.program,Bt);Lt&&(At[Bt]=Lt)}}this.fixedUniforms=E(o,At),this.terrainUniforms=((Rt,Bt)=>({u_depth:new l.Uniform1i(Rt,Bt.u_depth),u_terrain:new l.Uniform1i(Rt,Bt.u_terrain),u_terrain_dim:new l.Uniform1f(Rt,Bt.u_terrain_dim),u_terrain_matrix:new l.UniformMatrix4f(Rt,Bt.u_terrain_matrix),u_terrain_unpack:new l.Uniform4f(Rt,Bt.u_terrain_unpack),u_terrain_exaggeration:new l.Uniform1f(Rt,Bt.u_terrain_exaggeration)}))(o,At),this.binderUniforms=b?b.getUniforms(o,At):[]}draw(o,f,v,b,E,P,R,O,N,K,Z,le,Se,ve,xe,De,Ue,ot){const Me=o.gl;if(this.failedToCreate)return;if(o.program.set(this.program),o.setDepthMode(v),o.setStencilMode(b),o.setColorMode(E),o.setCullFace(P),O){o.activeTexture.set(Me.TEXTURE2),Me.bindTexture(Me.TEXTURE_2D,O.depthTexture),o.activeTexture.set(Me.TEXTURE3),Me.bindTexture(Me.TEXTURE_2D,O.texture);for(const _t in this.terrainUniforms)this.terrainUniforms[_t].set(O[_t])}for(const _t in this.fixedUniforms)this.fixedUniforms[_t].set(R[_t]);xe&&xe.setUniforms(o,this.binderUniforms,Se,{zoom:ve});let it=0;switch(f){case Me.LINES:it=2;break;case Me.TRIANGLES:it=3;break;case Me.LINE_STRIP:it=1}for(const _t of le.get()){const At=_t.vaos||(_t.vaos={});(At[N]||(At[N]=new Du)).bind(o,this,K,xe?xe.getPaintVertexBuffers():[],Z,_t.vertexOffset,De,Ue,ot),Me.drawElements(f,_t.primitiveLength*it,Me.UNSIGNED_SHORT,_t.primitiveOffset*it*2)}}}function Lu(_,o,f){const v=1/bt(f,1,o.transform.tileZoom),b=Math.pow(2,f.tileID.overscaledZ),E=f.tileSize*Math.pow(2,o.transform.tileZoom)/b,P=E*(f.tileID.canonical.x+f.tileID.wrap*b),R=E*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture.size,u_scale:[v,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[P>>16,R>>16],u_pixel_coord_lower:[65535&P,65535&R]}}const wm=(_,o,f,v)=>{const b=o.style.light,E=b.properties.get("position"),P=[E.x,E.y,E.z],R=function(){var N=new l.ARRAY_TYPE(9);return l.ARRAY_TYPE!=Float32Array&&(N[1]=0,N[2]=0,N[3]=0,N[5]=0,N[6]=0,N[7]=0),N[0]=1,N[4]=1,N[8]=1,N}();b.properties.get("anchor")==="viewport"&&function(N,K){var Z=Math.sin(K),le=Math.cos(K);N[0]=le,N[1]=Z,N[2]=0,N[3]=-Z,N[4]=le,N[5]=0,N[6]=0,N[7]=0,N[8]=1}(R,-o.transform.angle),function(N,K,Z){var le=K[0],Se=K[1],ve=K[2];N[0]=le*Z[0]+Se*Z[3]+ve*Z[6],N[1]=le*Z[1]+Se*Z[4]+ve*Z[7],N[2]=le*Z[2]+Se*Z[5]+ve*Z[8]}(P,P,R);const O=b.properties.get("color");return{u_matrix:_,u_lightpos:P,u_lightintensity:b.properties.get("intensity"),u_lightcolor:[O.r,O.g,O.b],u_vertical_gradient:+f,u_opacity:v}},Sm=(_,o,f,v,b,E,P)=>l.extend(wm(_,o,f,v),Lu(E,o,P),{u_height_factor:-Math.pow(2,b.overscaledZ)/P.tileSize/8}),Tm=_=>({u_matrix:_}),Ph=(_,o,f,v)=>l.extend(Tm(_),Lu(f,o,v)),ry=(_,o)=>({u_matrix:_,u_world:o}),Dh=(_,o,f,v,b)=>l.extend(Ph(_,o,f,v),{u_world:b}),Em=(_,o,f,v)=>{const b=_.transform;let E,P;if(v.paint.get("circle-pitch-alignment")==="map"){const R=bt(f,1,b.zoom);E=!0,P=[R,R]}else E=!1,P=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+(v.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(o.posMatrix,f,v.paint.get("circle-translate"),v.paint.get("circle-translate-anchor")),u_pitch_with_map:+E,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:P}},Im=(_,o,f)=>{const v=bt(f,1,o.zoom),b=Math.pow(2,o.zoom-f.tileID.overscaledZ),E=f.tileID.overscaleFactor();return{u_matrix:_,u_camera_to_center_distance:o.cameraToCenterDistance,u_pixels_to_tile_units:v,u_extrude_scale:[o.pixelsToGLUnits[0]/(v*b),o.pixelsToGLUnits[1]/(v*b)],u_overscale_factor:E}},Lh=(_,o,f=1)=>({u_matrix:_,u_color:o,u_overlay:0,u_overlay_scale:f}),Oh=_=>({u_matrix:_}),Uo=(_,o,f,v)=>({u_matrix:_,u_extrude_scale:bt(o,1,f),u_intensity:v});function Ou(_,o){const f=Math.pow(2,o.canonical.z),v=o.canonical.y;return[new l.MercatorCoordinate(0,v/f).toLngLat().lat,new l.MercatorCoordinate(0,(v+1)/f).toLngLat().lat]}const Kr=(_,o,f,v)=>{const b=_.transform;return{u_matrix:Ic(_,o,f,v),u_ratio:1/bt(o,1,b.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},Ru=(_,o,f,v,b)=>l.extend(Kr(_,o,f,b),{u_image:0,u_image_height:v}),Fu=(_,o,f,v,b)=>{const E=_.transform,P=Ec(o,E);return{u_matrix:Ic(_,o,f,b),u_texsize:o.imageAtlasTexture.size,u_ratio:1/bt(o,1,E.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[P,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]]}},Tc=(_,o,f,v,b,E)=>{const P=_.lineAtlas,R=Ec(o,_.transform),O=f.layout.get("line-cap")==="round",N=P.getDash(v.from,O),K=P.getDash(v.to,O),Z=N.width*b.fromScale,le=K.width*b.toScale;return l.extend(Kr(_,o,f,E),{u_patternscale_a:[R/Z,-N.height/2],u_patternscale_b:[R/le,-K.height/2],u_sdfgamma:P.width/(256*Math.min(Z,le)*_.pixelRatio)/2,u_image:0,u_tex_y_a:N.y,u_tex_y_b:K.y,u_mix:b.t})};function Ec(_,o){return 1/bt(_,1,o.tileZoom)}function Ic(_,o,f,v){return _.translatePosMatrix(v?v.posMatrix:o.tileID.posMatrix,o,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}const Cc=(_,o,f,v,b)=>{return{u_matrix:_,u_tl_parent:o,u_scale_parent:f,u_buffer_scale:1,u_fade_t:v.mix,u_opacity:v.opacity*b.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:b.paint.get("raster-brightness-min"),u_brightness_high:b.paint.get("raster-brightness-max"),u_saturation_factor:(P=b.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(E=b.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:Ac(b.paint.get("raster-hue-rotate"))};var E,P};function Ac(_){_*=Math.PI/180;const o=Math.sin(_),f=Math.cos(_);return[(2*f+1)/3,(-Math.sqrt(3)*o-f+1)/3,(Math.sqrt(3)*o-f+1)/3]}const Mc=(_,o,f,v,b,E,P,R,O,N)=>{const K=b.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:K.cameraToCenterDistance,u_pitch:K.pitch/360*2*Math.PI,u_rotate_symbol:+f,u_aspect_ratio:K.width/K.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:P,u_coord_matrix:R,u_is_text:+O,u_pitch_with_map:+v,u_texsize:N,u_texture:0}},Xr=(_,o,f,v,b,E,P,R,O,N,K)=>{const Z=b.transform;return l.extend(Mc(_,o,f,v,b,E,P,R,O,N),{u_gamma_scale:v?Math.cos(Z._pitch)*Z.cameraToCenterDistance:1,u_device_pixel_ratio:b.pixelRatio,u_is_halo:+K})},ls=(_,o,f,v,b,E,P,R,O,N)=>l.extend(Xr(_,o,f,v,b,E,P,R,!0,O,!0),{u_texsize_icon:N,u_texture_icon:1}),Rh=(_,o,f)=>({u_matrix:_,u_opacity:o,u_color:f}),$u=(_,o,f,v,b,E)=>l.extend(function(P,R,O,N){const K=O.imageManager.getPattern(P.from.toString()),Z=O.imageManager.getPattern(P.to.toString()),{width:le,height:Se}=O.imageManager.getPixelSize(),ve=Math.pow(2,N.tileID.overscaledZ),xe=N.tileSize*Math.pow(2,O.transform.tileZoom)/ve,De=xe*(N.tileID.canonical.x+N.tileID.wrap*ve),Ue=xe*N.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:K.tl,u_pattern_br_a:K.br,u_pattern_tl_b:Z.tl,u_pattern_br_b:Z.br,u_texsize:[le,Se],u_mix:R.t,u_pattern_size_a:K.displaySize,u_pattern_size_b:Z.displaySize,u_scale_a:R.fromScale,u_scale_b:R.toScale,u_tile_units_to_pixels:1/bt(N,1,O.transform.tileZoom),u_pixel_coord_upper:[De>>16,Ue>>16],u_pixel_coord_lower:[65535&De,65535&Ue]}}(v,E,f,b),{u_matrix:_,u_opacity:o}),zu={fillExtrusion:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_lightpos:new l.Uniform3f(_,o.u_lightpos),u_lightintensity:new l.Uniform1f(_,o.u_lightintensity),u_lightcolor:new l.Uniform3f(_,o.u_lightcolor),u_vertical_gradient:new l.Uniform1f(_,o.u_vertical_gradient),u_opacity:new l.Uniform1f(_,o.u_opacity)}),fillExtrusionPattern:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_lightpos:new l.Uniform3f(_,o.u_lightpos),u_lightintensity:new l.Uniform1f(_,o.u_lightintensity),u_lightcolor:new l.Uniform3f(_,o.u_lightcolor),u_vertical_gradient:new l.Uniform1f(_,o.u_vertical_gradient),u_height_factor:new l.Uniform1f(_,o.u_height_factor),u_image:new l.Uniform1i(_,o.u_image),u_texsize:new l.Uniform2f(_,o.u_texsize),u_pixel_coord_upper:new l.Uniform2f(_,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(_,o.u_pixel_coord_lower),u_scale:new l.Uniform3f(_,o.u_scale),u_fade:new l.Uniform1f(_,o.u_fade),u_opacity:new l.Uniform1f(_,o.u_opacity)}),fill:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix)}),fillPattern:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_image:new l.Uniform1i(_,o.u_image),u_texsize:new l.Uniform2f(_,o.u_texsize),u_pixel_coord_upper:new l.Uniform2f(_,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(_,o.u_pixel_coord_lower),u_scale:new l.Uniform3f(_,o.u_scale),u_fade:new l.Uniform1f(_,o.u_fade)}),fillOutline:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_world:new l.Uniform2f(_,o.u_world)}),fillOutlinePattern:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_world:new l.Uniform2f(_,o.u_world),u_image:new l.Uniform1i(_,o.u_image),u_texsize:new l.Uniform2f(_,o.u_texsize),u_pixel_coord_upper:new l.Uniform2f(_,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(_,o.u_pixel_coord_lower),u_scale:new l.Uniform3f(_,o.u_scale),u_fade:new l.Uniform1f(_,o.u_fade)}),circle:(_,o)=>({u_camera_to_center_distance:new l.Uniform1f(_,o.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(_,o.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(_,o.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(_,o.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(_,o.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(_,o.u_matrix)}),collisionBox:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_camera_to_center_distance:new l.Uniform1f(_,o.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(_,o.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(_,o.u_extrude_scale),u_overscale_factor:new l.Uniform1f(_,o.u_overscale_factor)}),collisionCircle:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_inv_matrix:new l.UniformMatrix4f(_,o.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(_,o.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(_,o.u_viewport_size)}),debug:(_,o)=>({u_color:new l.UniformColor(_,o.u_color),u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_overlay:new l.Uniform1i(_,o.u_overlay),u_overlay_scale:new l.Uniform1f(_,o.u_overlay_scale)}),clippingMask:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix)}),heatmap:(_,o)=>({u_extrude_scale:new l.Uniform1f(_,o.u_extrude_scale),u_intensity:new l.Uniform1f(_,o.u_intensity),u_matrix:new l.UniformMatrix4f(_,o.u_matrix)}),heatmapTexture:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_world:new l.Uniform2f(_,o.u_world),u_image:new l.Uniform1i(_,o.u_image),u_color_ramp:new l.Uniform1i(_,o.u_color_ramp),u_opacity:new l.Uniform1f(_,o.u_opacity)}),hillshade:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_image:new l.Uniform1i(_,o.u_image),u_latrange:new l.Uniform2f(_,o.u_latrange),u_light:new l.Uniform2f(_,o.u_light),u_shadow:new l.UniformColor(_,o.u_shadow),u_highlight:new l.UniformColor(_,o.u_highlight),u_accent:new l.UniformColor(_,o.u_accent)}),hillshadePrepare:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_image:new l.Uniform1i(_,o.u_image),u_dimension:new l.Uniform2f(_,o.u_dimension),u_zoom:new l.Uniform1f(_,o.u_zoom),u_unpack:new l.Uniform4f(_,o.u_unpack)}),line:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_ratio:new l.Uniform1f(_,o.u_ratio),u_device_pixel_ratio:new l.Uniform1f(_,o.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(_,o.u_units_to_pixels)}),lineGradient:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_ratio:new l.Uniform1f(_,o.u_ratio),u_device_pixel_ratio:new l.Uniform1f(_,o.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(_,o.u_units_to_pixels),u_image:new l.Uniform1i(_,o.u_image),u_image_height:new l.Uniform1f(_,o.u_image_height)}),linePattern:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_texsize:new l.Uniform2f(_,o.u_texsize),u_ratio:new l.Uniform1f(_,o.u_ratio),u_device_pixel_ratio:new l.Uniform1f(_,o.u_device_pixel_ratio),u_image:new l.Uniform1i(_,o.u_image),u_units_to_pixels:new l.Uniform2f(_,o.u_units_to_pixels),u_scale:new l.Uniform3f(_,o.u_scale),u_fade:new l.Uniform1f(_,o.u_fade)}),lineSDF:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_ratio:new l.Uniform1f(_,o.u_ratio),u_device_pixel_ratio:new l.Uniform1f(_,o.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(_,o.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(_,o.u_patternscale_a),u_patternscale_b:new l.Uniform2f(_,o.u_patternscale_b),u_sdfgamma:new l.Uniform1f(_,o.u_sdfgamma),u_image:new l.Uniform1i(_,o.u_image),u_tex_y_a:new l.Uniform1f(_,o.u_tex_y_a),u_tex_y_b:new l.Uniform1f(_,o.u_tex_y_b),u_mix:new l.Uniform1f(_,o.u_mix)}),raster:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_tl_parent:new l.Uniform2f(_,o.u_tl_parent),u_scale_parent:new l.Uniform1f(_,o.u_scale_parent),u_buffer_scale:new l.Uniform1f(_,o.u_buffer_scale),u_fade_t:new l.Uniform1f(_,o.u_fade_t),u_opacity:new l.Uniform1f(_,o.u_opacity),u_image0:new l.Uniform1i(_,o.u_image0),u_image1:new l.Uniform1i(_,o.u_image1),u_brightness_low:new l.Uniform1f(_,o.u_brightness_low),u_brightness_high:new l.Uniform1f(_,o.u_brightness_high),u_saturation_factor:new l.Uniform1f(_,o.u_saturation_factor),u_contrast_factor:new l.Uniform1f(_,o.u_contrast_factor),u_spin_weights:new l.Uniform3f(_,o.u_spin_weights)}),symbolIcon:(_,o)=>({u_is_size_zoom_constant:new l.Uniform1i(_,o.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(_,o.u_is_size_feature_constant),u_size_t:new l.Uniform1f(_,o.u_size_t),u_size:new l.Uniform1f(_,o.u_size),u_camera_to_center_distance:new l.Uniform1f(_,o.u_camera_to_center_distance),u_pitch:new l.Uniform1f(_,o.u_pitch),u_rotate_symbol:new l.Uniform1i(_,o.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(_,o.u_aspect_ratio),u_fade_change:new l.Uniform1f(_,o.u_fade_change),u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(_,o.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(_,o.u_coord_matrix),u_is_text:new l.Uniform1i(_,o.u_is_text),u_pitch_with_map:new l.Uniform1i(_,o.u_pitch_with_map),u_texsize:new l.Uniform2f(_,o.u_texsize),u_texture:new l.Uniform1i(_,o.u_texture)}),symbolSDF:(_,o)=>({u_is_size_zoom_constant:new l.Uniform1i(_,o.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(_,o.u_is_size_feature_constant),u_size_t:new l.Uniform1f(_,o.u_size_t),u_size:new l.Uniform1f(_,o.u_size),u_camera_to_center_distance:new l.Uniform1f(_,o.u_camera_to_center_distance),u_pitch:new l.Uniform1f(_,o.u_pitch),u_rotate_symbol:new l.Uniform1i(_,o.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(_,o.u_aspect_ratio),u_fade_change:new l.Uniform1f(_,o.u_fade_change),u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(_,o.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(_,o.u_coord_matrix),u_is_text:new l.Uniform1i(_,o.u_is_text),u_pitch_with_map:new l.Uniform1i(_,o.u_pitch_with_map),u_texsize:new l.Uniform2f(_,o.u_texsize),u_texture:new l.Uniform1i(_,o.u_texture),u_gamma_scale:new l.Uniform1f(_,o.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(_,o.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(_,o.u_is_halo)}),symbolTextAndIcon:(_,o)=>({u_is_size_zoom_constant:new l.Uniform1i(_,o.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(_,o.u_is_size_feature_constant),u_size_t:new l.Uniform1f(_,o.u_size_t),u_size:new l.Uniform1f(_,o.u_size),u_camera_to_center_distance:new l.Uniform1f(_,o.u_camera_to_center_distance),u_pitch:new l.Uniform1f(_,o.u_pitch),u_rotate_symbol:new l.Uniform1i(_,o.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(_,o.u_aspect_ratio),u_fade_change:new l.Uniform1f(_,o.u_fade_change),u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(_,o.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(_,o.u_coord_matrix),u_is_text:new l.Uniform1i(_,o.u_is_text),u_pitch_with_map:new l.Uniform1i(_,o.u_pitch_with_map),u_texsize:new l.Uniform2f(_,o.u_texsize),u_texsize_icon:new l.Uniform2f(_,o.u_texsize_icon),u_texture:new l.Uniform1i(_,o.u_texture),u_texture_icon:new l.Uniform1i(_,o.u_texture_icon),u_gamma_scale:new l.Uniform1f(_,o.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(_,o.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(_,o.u_is_halo)}),background:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_opacity:new l.Uniform1f(_,o.u_opacity),u_color:new l.UniformColor(_,o.u_color)}),backgroundPattern:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_opacity:new l.Uniform1f(_,o.u_opacity),u_image:new l.Uniform1i(_,o.u_image),u_pattern_tl_a:new l.Uniform2f(_,o.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(_,o.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(_,o.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(_,o.u_pattern_br_b),u_texsize:new l.Uniform2f(_,o.u_texsize),u_mix:new l.Uniform1f(_,o.u_mix),u_pattern_size_a:new l.Uniform2f(_,o.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(_,o.u_pattern_size_b),u_scale_a:new l.Uniform1f(_,o.u_scale_a),u_scale_b:new l.Uniform1f(_,o.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(_,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(_,o.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(_,o.u_tile_units_to_pixels)}),terrain:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_texture:new l.Uniform1i(_,o.u_texture),u_ele_delta:new l.Uniform1f(_,o.u_ele_delta)}),terrainDepth:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_ele_delta:new l.Uniform1f(_,o.u_ele_delta)}),terrainCoords:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_texture:new l.Uniform1i(_,o.u_texture),u_terrain_coords_id:new l.Uniform1f(_,o.u_terrain_coords_id),u_ele_delta:new l.Uniform1f(_,o.u_ele_delta)})};class Fh{constructor(o,f,v){this.context=o;const b=o.gl;this.buffer=b.createBuffer(),this.dynamicDraw=!!v,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){const f=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const $h={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Bu{constructor(o,f,v,b){this.length=f.length,this.attributes=v,this.itemSize=f.bytesPerElement,this.dynamicDraw=b,this.context=o;const E=o.gl;this.buffer=E.createBuffer(),o.bindVertexBuffer.set(this.buffer),E.bufferData(E.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){if(o.length!==this.length)throw new Error(`Length of new data is ${o.length}, which doesn't match current length of ${this.length}`);const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,f){for(let v=0;v<this.attributes.length;v++){const b=f.attributes[this.attributes[v].name];b!==void 0&&o.enableVertexAttribArray(b)}}setVertexAttribPointers(o,f,v){for(let b=0;b<this.attributes.length;b++){const E=this.attributes[b],P=f.attributes[E.name];P!==void 0&&o.vertexAttribPointer(P,E.components,o[$h[E.type]],!1,this.itemSize,E.offset+this.itemSize*(v||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ui{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class zh extends ui{getDefault(){return l.Color.transparent}set(o){const f=this.current;(o.r!==f.r||o.g!==f.g||o.b!==f.b||o.a!==f.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class Nu extends ui{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class Cm extends ui{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class Am extends ui{getDefault(){return[!0,!0,!0,!0]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||o[2]!==f[2]||o[3]!==f[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class wl extends ui{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class sy extends ui{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class ay extends ui{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const f=this.current;(o.func!==f.func||o.ref!==f.ref||o.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class oy extends ui{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||o[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class ly extends ui{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=o,this.dirty=!1}}class cy extends ui{getDefault(){return[0,1]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class uy extends ui{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=o,this.dirty=!1}}class Bh extends ui{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class ju extends ui{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.BLEND):f.disable(f.BLEND),this.current=o,this.dirty=!1}}class Nh extends ui{getDefault(){const o=this.gl;return[o.ONE,o.ZERO]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)}}class jh extends ui{getDefault(){return l.Color.transparent}set(o){const f=this.current;(o.r!==f.r||o.g!==f.g||o.b!==f.b||o.a!==f.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class Sl extends ui{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)}}class Mm extends ui{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=o,this.dirty=!1}}class km extends ui{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class Uh extends ui{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}class Vo extends ui{getDefault(){return null}set(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)}}class Pm extends ui{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class Tl extends ui{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||o[2]!==f[2]||o[3]!==f[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class El extends ui{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class Dm extends ui{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Vh extends ui{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class yi extends ui{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Uu extends ui{getDefault(){return null}set(o){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class dy extends ui{getDefault(){return null}set(o){(o!==this.current||this.dirty)&&(this.gl.bindVertexArray(o),this.current=o,this.dirty=!1)}}class Lm extends ui{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class kc extends ui{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class hy extends ui{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class Hh extends ui{constructor(o,f){super(o),this.context=o,this.parent=f}getDefault(){return null}}class Om extends Hh{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class fy extends Hh{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Gh extends Hh{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Vu{constructor(o,f,v,b,E){this.context=o,this.width=f,this.height=v;const P=o.gl,R=this.framebuffer=P.createFramebuffer();if(this.colorAttachment=new Om(o,R),b)this.depthAttachment=E?new Gh(o,R):new fy(o,R);else if(E)throw new Error("Stencil cannot be setted without depth");if(P.checkFramebufferStatus(P.FRAMEBUFFER)!==P.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const o=this.context.gl,f=this.colorAttachment.get();if(f&&o.deleteTexture(f),this.depthAttachment){const v=this.depthAttachment.get();v&&o.deleteRenderbuffer(v)}o.deleteFramebuffer(this.framebuffer)}}class Bi{constructor(o,f,v){this.blendFunction=o,this.blendColor=f,this.mask=v}}Bi.Replace=[1,0],Bi.disabled=new Bi(Bi.Replace,l.Color.transparent,[!1,!1,!1,!1]),Bi.unblended=new Bi(Bi.Replace,l.Color.transparent,[!0,!0,!0,!0]),Bi.alphaBlended=new Bi([1,771],l.Color.transparent,[!0,!0,!0,!0]);class Wh{constructor(o){this.gl=o,this.clearColor=new zh(this),this.clearDepth=new Nu(this),this.clearStencil=new Cm(this),this.colorMask=new Am(this),this.depthMask=new wl(this),this.stencilMask=new sy(this),this.stencilFunc=new ay(this),this.stencilOp=new oy(this),this.stencilTest=new ly(this),this.depthRange=new cy(this),this.depthTest=new uy(this),this.depthFunc=new Bh(this),this.blend=new ju(this),this.blendFunc=new Nh(this),this.blendColor=new jh(this),this.blendEquation=new Sl(this),this.cullFace=new Mm(this),this.cullFaceSide=new km(this),this.frontFace=new Uh(this),this.program=new Vo(this),this.activeTexture=new Pm(this),this.viewport=new Tl(this),this.bindFramebuffer=new El(this),this.bindRenderbuffer=new Dm(this),this.bindTexture=new Vh(this),this.bindVertexBuffer=new yi(this),this.bindElementBuffer=new Uu(this),this.bindVertexArray=new dy(this),this.pixelStoreUnpack=new Lm(this),this.pixelStoreUnpackPremultiplyAlpha=new kc(this),this.pixelStoreUnpackFlipY=new hy(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),this.HALF_FLOAT=o.HALF_FLOAT,o.getExtension("EXT_color_buffer_half_float"),o.getExtension("EXT_color_buffer_float"),this.RGBA16F=o.RGBA16F,this.RGB16F=o.RGB16F}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,f){return new Fh(this,o,f)}createVertexBuffer(o,f,v){return new Bu(this,o,f,v)}createRenderbuffer(o,f,v){const b=this.gl,E=b.createRenderbuffer();return this.bindRenderbuffer.set(E),b.renderbufferStorage(b.RENDERBUFFER,o,f,v),this.bindRenderbuffer.set(null),E}createFramebuffer(o,f,v,b){return new Vu(this,o,f,v,b)}clear({color:o,depth:f,stencil:v}){const b=this.gl;let E=0;o&&(E|=b.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(E|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),v!==void 0&&(E|=b.STENCIL_BUFFER_BIT,this.clearStencil.set(v),this.stencilMask.set(255)),b.clear(E)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){l.deepEqual(o.blendFunction,Bi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)}createVertexArray(){return this.gl.createVertexArray()}deleteVertexArray(o){return this.gl.deleteVertexArray(o)}unbindVAO(){this.bindVertexArray.set(null)}}class Jn{constructor(o,f,v){this.func=o,this.mask=f,this.range=v}}Jn.ReadOnly=!1,Jn.ReadWrite=!0,Jn.disabled=new Jn(519,Jn.ReadOnly,[0,1]);const Hu=7680;class Mi{constructor(o,f,v,b,E,P){this.test=o,this.ref=f,this.mask=v,this.fail=b,this.depthFail=E,this.pass=P}}Mi.disabled=new Mi({func:519,mask:0},0,0,Hu,Hu,Hu);class Ai{constructor(o,f,v){this.enable=o,this.mode=f,this.frontFace=v}}let Il;function Rm(_,o,f,v,b,E,P){const R=_.context,O=R.gl,N=_.useProgram("collisionBox"),K=[];let Z=0,le=0;for(let Me=0;Me<v.length;Me++){const it=v[Me],_t=o.getTile(it),At=_t.getBucket(f);if(!At)continue;let Rt=it.posMatrix;b[0]===0&&b[1]===0||(Rt=_.translatePosMatrix(it.posMatrix,_t,b,E));const Bt=P?At.textCollisionBox:At.iconCollisionBox,Lt=At.collisionCircleArray;if(Lt.length>0){const nn=l.create(),Sn=Rt;l.mul(nn,At.placementInvProjMatrix,_.transform.glCoordMatrix),l.mul(nn,nn,At.placementViewportMatrix),K.push({circleArray:Lt,circleOffset:le,transform:Sn,invTransform:nn,coord:it}),Z+=Lt.length/4,le=Z}Bt&&N.draw(R,O.LINES,Jn.disabled,Mi.disabled,_.colorModeForRenderPass(),Ai.disabled,Im(Rt,_.transform,_t),_.style.map.terrain&&_.style.map.terrain.getTerrainData(it),f.id,Bt.layoutVertexBuffer,Bt.indexBuffer,Bt.segments,null,_.transform.zoom,null,null,Bt.collisionVertexBuffer)}if(!P||!K.length)return;const Se=_.useProgram("collisionCircle"),ve=new l.CollisionCircleLayoutArray;ve.resize(4*Z),ve._trim();let xe=0;for(const Me of K)for(let it=0;it<Me.circleArray.length/4;it++){const _t=4*it,At=Me.circleArray[_t+0],Rt=Me.circleArray[_t+1],Bt=Me.circleArray[_t+2],Lt=Me.circleArray[_t+3];ve.emplace(xe++,At,Rt,Bt,Lt,0),ve.emplace(xe++,At,Rt,Bt,Lt,1),ve.emplace(xe++,At,Rt,Bt,Lt,2),ve.emplace(xe++,At,Rt,Bt,Lt,3)}(!Il||Il.length<2*Z)&&(Il=function(Me){const it=2*Me,_t=new l.QuadTriangleArray;_t.resize(it),_t._trim();for(let At=0;At<it;At++){const Rt=6*At;_t.uint16[Rt+0]=4*At+0,_t.uint16[Rt+1]=4*At+1,_t.uint16[Rt+2]=4*At+2,_t.uint16[Rt+3]=4*At+2,_t.uint16[Rt+4]=4*At+3,_t.uint16[Rt+5]=4*At+0}return _t}(Z));const De=R.createIndexBuffer(Il,!0),Ue=R.createVertexBuffer(ve,l.collisionCircleLayout.members,!0);for(const Me of K){const it={u_matrix:Me.transform,u_inv_matrix:Me.invTransform,u_camera_to_center_distance:(ot=_.transform).cameraToCenterDistance,u_viewport_size:[ot.width,ot.height]};Se.draw(R,O.TRIANGLES,Jn.disabled,Mi.disabled,_.colorModeForRenderPass(),Ai.disabled,it,_.style.map.terrain&&_.style.map.terrain.getTerrainData(Me.coord),f.id,Ue,De,l.SegmentVector.simpleSegment(0,2*Me.circleOffset,Me.circleArray.length,Me.circleArray.length/2),null,_.transform.zoom,null,null,null)}var ot;Ue.destroy(),De.destroy()}Ai.disabled=new Ai(!1,1029,2305),Ai.backCCW=new Ai(!0,1029,2305);const qh=l.identity(new Float32Array(16));function py(_,o,f,v,b,E){const{horizontalAlign:P,verticalAlign:R}=l.getAnchorAlignment(_),O=-(P-.5)*o,N=-(R-.5)*f,K=l.evaluateVariableOffset(_,v);return new l.Point((O/b+K[0])*E,(N/b+K[1])*E)}function Fm(_,o,f,v,b,E,P,R,O,N,K){const Z=_.text.placedSymbolArray,le=_.text.dynamicLayoutVertexArray,Se=_.icon.dynamicLayoutVertexArray,ve={};le.clear();for(let xe=0;xe<Z.length;xe++){const De=Z.get(xe),Ue=De.hidden||!De.crossTileID||_.allowVerticalPlacement&&!De.placedOrientation?null:v[De.crossTileID];if(Ue){const ot=new l.Point(De.anchorX,De.anchorY),Me=Pt(ot,f?P:E,K),it=qn(b.cameraToCenterDistance,Me.signedDistanceFromCamera);let _t=l.evaluateSizeForFeature(_.textSizeData,O,De)*it/l.ONE_EM;f&&(_t*=_.tilePixelRatio/R);const{width:At,height:Rt,anchor:Bt,textOffset:Lt,textBoxScale:nn}=Ue,Sn=py(Bt,At,Rt,Lt,nn,_t),Bn=f?Pt(ot.add(Sn),E,K).point:Me.point.add(o?Sn.rotate(-b.angle):Sn),Zt=_.allowVerticalPlacement&&De.placedOrientation===l.WritingMode.vertical?Math.PI/2:0;for(let On=0;On<De.numGlyphs;On++)l.addDynamicAttributes(le,Bn,Zt);N&&De.associatedIconIndex>=0&&(ve[De.associatedIconIndex]={shiftedAnchor:Bn,angle:Zt})}else He(De.numGlyphs,le)}if(N){Se.clear();const xe=_.icon.placedSymbolArray;for(let De=0;De<xe.length;De++){const Ue=xe.get(De);if(Ue.hidden)He(Ue.numGlyphs,Se);else{const ot=ve[De];if(ot)for(let Me=0;Me<Ue.numGlyphs;Me++)l.addDynamicAttributes(Se,ot.shiftedAnchor,ot.angle);else He(Ue.numGlyphs,Se)}}_.icon.dynamicLayoutVertexBuffer.updateData(Se)}_.text.dynamicLayoutVertexBuffer.updateData(le)}function Gu(_,o,f){return f.iconsInText&&o?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function Wu(_,o,f,v,b,E,P,R,O,N,K,Z){const le=_.context,Se=le.gl,ve=_.transform,xe=R==="map",De=O==="map",Ue=R!=="viewport"&&f.layout.get("symbol-placement")!=="point",ot=xe&&!De&&!Ue,Me=!f.layout.get("symbol-sort-key").isConstant();let it=!1;const _t=_.depthModeForSublayer(0,Jn.ReadOnly),At=f.layout.get("text-variable-anchor"),Rt=[];for(const Bt of v){const Lt=o.getTile(Bt),nn=Lt.getBucket(f);if(!nn)continue;const Sn=b?nn.text:nn.icon;if(!Sn||!Sn.segments.get().length||!Sn.hasVisibleVertices)continue;const Bn=Sn.programConfigurations.get(f.id),Zt=b||nn.sdfIcons,On=b?nn.textSizeData:nn.iconSizeData,on=De||ve.pitch!==0,di=_.useProgram(Gu(Zt,b,nn),Bn),tr=l.evaluateSizeForZoom(On,ve.zoom),hi=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Bt);let Nn,Ki,jr,nr,br=[0,0],cs=null;if(b)Ki=Lt.glyphAtlasTexture,jr=Se.LINEAR,Nn=Lt.glyphAtlasTexture.size,nn.iconsInText&&(br=Lt.imageAtlasTexture.size,cs=Lt.imageAtlasTexture,nr=on||_.options.rotating||_.options.zooming||On.kind==="composite"||On.kind==="camera"?Se.LINEAR:Se.NEAREST);else{const pr=f.layout.get("icon-size").constantOr(0)!==1||nn.iconsNeedLinear;Ki=Lt.imageAtlasTexture,jr=Zt||_.options.rotating||_.options.zooming||pr||on?Se.LINEAR:Se.NEAREST,Nn=Lt.imageAtlasTexture.size}const Ns=bt(Lt,1,_.transform.zoom),js=Yt(Bt.posMatrix,De,xe,_.transform,Ns),Ur=an(Bt.posMatrix,De,xe,_.transform,Ns),pa=At&&nn.hasTextData(),Vc=f.layout.get("icon-text-fit")!=="none"&&pa&&nn.hasIconData();if(Ue){const pr=_.style.map.terrain?(pd,Ra)=>_.style.map.terrain.getElevation(Bt,pd,Ra):null,us=f.layout.get("text-rotation-alignment")==="map";jt(nn,Bt.posMatrix,_,b,js,Ur,De,N,us,pr)}const Dr=_.translatePosMatrix(Bt.posMatrix,Lt,E,P),xr=Ue||b&&At||Vc?qh:js,pi=_.translatePosMatrix(Ur,Lt,E,P,!0),fr=Zt&&f.paint.get(b?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let wr;wr=Zt?nn.iconsInText?ls(On.kind,tr,ot,De,_,Dr,xr,pi,Nn,br):Xr(On.kind,tr,ot,De,_,Dr,xr,pi,b,Nn,!0):Mc(On.kind,tr,ot,De,_,Dr,xr,pi,b,Nn);const vi={program:di,buffers:Sn,uniformValues:wr,atlasTexture:Ki,atlasTextureIcon:cs,atlasInterpolation:jr,atlasInterpolationIcon:nr,isSDF:Zt,hasHalo:fr};if(Me&&nn.canOverlap){it=!0;const pr=Sn.segments.get();for(const us of pr)Rt.push({segments:new l.SegmentVector([us]),sortKey:us.sortKey,state:vi,terrainData:hi})}else Rt.push({segments:Sn.segments,sortKey:0,state:vi,terrainData:hi})}it&&Rt.sort((Bt,Lt)=>Bt.sortKey-Lt.sortKey);for(const Bt of Rt){const Lt=Bt.state;if(le.activeTexture.set(Se.TEXTURE0),Lt.atlasTexture.bind(Lt.atlasInterpolation,Se.CLAMP_TO_EDGE),Lt.atlasTextureIcon&&(le.activeTexture.set(Se.TEXTURE1),Lt.atlasTextureIcon&&Lt.atlasTextureIcon.bind(Lt.atlasInterpolationIcon,Se.CLAMP_TO_EDGE)),Lt.isSDF){const nn=Lt.uniformValues;Lt.hasHalo&&(nn.u_is_halo=1,Zh(Lt.buffers,Bt.segments,f,_,Lt.program,_t,K,Z,nn,Bt.terrainData)),nn.u_is_halo=0}Zh(Lt.buffers,Bt.segments,f,_,Lt.program,_t,K,Z,Lt.uniformValues,Bt.terrainData)}}function Zh(_,o,f,v,b,E,P,R,O,N){const K=v.context;b.draw(K,K.gl.TRIANGLES,E,P,R,Ai.disabled,O,N,f.id,_.layoutVertexBuffer,_.indexBuffer,o,f.paint,v.transform.zoom,_.programConfigurations.get(f.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function Kh(_,o,f,v,b){if(!f||!v||!v.imageAtlas)return;const E=v.imageAtlas.patternPositions;let P=E[f.to.toString()],R=E[f.from.toString()];if(!P||!R){const O=b.getPaintProperty(o);P=E[O],R=E[O]}P&&R&&_.setConstantPatternPositions(P,R)}function Pc(_,o,f,v,b,E,P){const R=_.context.gl,O="fill-pattern",N=f.paint.get(O),K=N&&N.constantOr(1),Z=f.getCrossfadeParameters();let le,Se,ve,xe,De;P?(Se=K&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",le=R.LINES):(Se=K?"fillPattern":"fill",le=R.TRIANGLES);const Ue=N.constantOr(null);for(const ot of v){const Me=o.getTile(ot);if(K&&!Me.patternsLoaded())continue;const it=Me.getBucket(f);if(!it)continue;const _t=it.programConfigurations.get(f.id),At=_.useProgram(Se,_t),Rt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ot);K&&(_.context.activeTexture.set(R.TEXTURE0),Me.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),_t.updatePaintBuffers(Z)),Kh(_t,O,Ue,Me,f);const Bt=Rt?ot:null,Lt=_.translatePosMatrix(Bt?Bt.posMatrix:ot.posMatrix,Me,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(P){xe=it.indexBuffer2,De=it.segments2;const nn=[R.drawingBufferWidth,R.drawingBufferHeight];ve=Se==="fillOutlinePattern"&&K?Dh(Lt,_,Z,Me,nn):ry(Lt,nn)}else xe=it.indexBuffer,De=it.segments,ve=K?Ph(Lt,_,Z,Me):Tm(Lt);At.draw(_.context,le,b,_.stencilModeForClipping(ot),E,Ai.disabled,ve,Rt,f.id,it.layoutVertexBuffer,xe,De,f.paint,_.transform.zoom,_t)}}function Dc(_,o,f,v,b,E,P){const R=_.context,O=R.gl,N="fill-extrusion-pattern",K=f.paint.get(N),Z=K.constantOr(1),le=f.getCrossfadeParameters(),Se=f.paint.get("fill-extrusion-opacity"),ve=K.constantOr(null);for(const xe of v){const De=o.getTile(xe),Ue=De.getBucket(f);if(!Ue)continue;const ot=_.style.map.terrain&&_.style.map.terrain.getTerrainData(xe),Me=Ue.programConfigurations.get(f.id),it=_.useProgram(Z?"fillExtrusionPattern":"fillExtrusion",Me);Z&&(_.context.activeTexture.set(O.TEXTURE0),De.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),Me.updatePaintBuffers(le)),Kh(Me,N,ve,De,f);const _t=_.translatePosMatrix(xe.posMatrix,De,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),At=f.paint.get("fill-extrusion-vertical-gradient"),Rt=Z?Sm(_t,_,At,Se,xe,le,De):wm(_t,_,At,Se);it.draw(R,R.gl.TRIANGLES,b,E,P,Ai.backCCW,Rt,ot,f.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,f.paint,_.transform.zoom,Me,_.style.map.terrain&&Ue.centroidVertexBuffer)}}function my(_,o,f,v,b,E,P){const R=_.context,O=R.gl,N=f.fbo;if(!N)return;const K=_.useProgram("hillshade"),Z=_.style.map.terrain&&_.style.map.terrain.getTerrainData(o);R.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,N.colorAttachment.get()),K.draw(R,O.TRIANGLES,b,E,P,Ai.disabled,((le,Se,ve,xe)=>{const De=ve.paint.get("hillshade-shadow-color"),Ue=ve.paint.get("hillshade-highlight-color"),ot=ve.paint.get("hillshade-accent-color");let Me=ve.paint.get("hillshade-illumination-direction")*(Math.PI/180);ve.paint.get("hillshade-illumination-anchor")==="viewport"&&(Me-=le.transform.angle);const it=!le.options.moving;return{u_matrix:xe?xe.posMatrix:le.transform.calculatePosMatrix(Se.tileID.toUnwrapped(),it),u_image:0,u_latrange:Ou(0,Se.tileID),u_light:[ve.paint.get("hillshade-exaggeration"),Me],u_shadow:De,u_highlight:Ue,u_accent:ot}})(_,f,v,Z?o:null),Z,v.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}function $m(_,o,f,v,b,E){const P=_.context,R=P.gl,O=o.dem;if(O&&O.data){const N=O.dim,K=O.stride,Z=O.getPixels();if(P.activeTexture.set(R.TEXTURE1),P.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||_.getTileTexture(K),o.demTexture){const Se=o.demTexture;Se.update(Z,{premultiply:!1}),Se.bind(R.NEAREST,R.CLAMP_TO_EDGE)}else o.demTexture=new B(P,Z,R.RGBA,{premultiply:!1}),o.demTexture.bind(R.NEAREST,R.CLAMP_TO_EDGE);P.activeTexture.set(R.TEXTURE0);let le=o.fbo;if(!le){const Se=new B(P,{width:N,height:N,data:null},R.RGBA);Se.bind(R.LINEAR,R.CLAMP_TO_EDGE),le=o.fbo=P.createFramebuffer(N,N,!0,!1),le.colorAttachment.set(Se.texture)}P.bindFramebuffer.set(le.framebuffer),P.viewport.set([0,0,N,N]),_.useProgram("hillshadePrepare").draw(P,R.TRIANGLES,v,b,E,Ai.disabled,((Se,ve)=>{const xe=ve.stride,De=l.create();return l.ortho(De,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(De,De,[0,-l.EXTENT,0]),{u_matrix:De,u_image:1,u_dimension:[xe,xe],u_zoom:Se.overscaledZ,u_unpack:ve.getUnpackVector()}})(o.tileID,O),null,f.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),o.needsHillshadePrepare=!1}}function er(_,o,f,v,b,E){const P=v.paint.get("raster-fade-duration");if(!E&&P>0){const R=l.exported.now(),O=(R-_.timeAdded)/P,N=o?(R-o.timeAdded)/P:-1,K=f.getSource(),Z=b.coveringZoomLevel({tileSize:K.tileSize,roundZoom:K.roundZoom}),le=!o||Math.abs(o.tileID.overscaledZ-Z)>Math.abs(_.tileID.overscaledZ-Z),Se=le&&_.refreshedUponExpiration?1:l.clamp(le?O:1-N,0,1);return _.refreshedUponExpiration&&O>=1&&(_.refreshedUponExpiration=!1),o?{opacity:1,mix:1-Se}:{opacity:Se,mix:0}}return{opacity:1,mix:0}}const Ho=new l.Color(1,0,0,1),Cs=new l.Color(0,1,0,1),zm=new l.Color(0,0,1,1),Xh=new l.Color(1,0,1,1),Bm=new l.Color(0,1,1,1);function Go(_,o,f,v){Cl(_,0,o+f/2,_.transform.width,f,v)}function Lc(_,o,f,v){Cl(_,o-f/2,0,f,_.transform.height,v)}function Cl(_,o,f,v,b,E){const P=_.context,R=P.gl;R.enable(R.SCISSOR_TEST),R.scissor(o*_.pixelRatio,f*_.pixelRatio,v*_.pixelRatio,b*_.pixelRatio),P.clear({color:E}),R.disable(R.SCISSOR_TEST)}function Nm(_,o,f){const v=_.context,b=v.gl,E=f.posMatrix,P=_.useProgram("debug"),R=Jn.disabled,O=Mi.disabled,N=_.colorModeForRenderPass(),K="$debug",Z=_.style.map.terrain&&_.style.map.terrain.getTerrainData(f);v.activeTexture.set(b.TEXTURE0);const le=o.getTileByID(f.key).latestRawTileData,Se=Math.floor((le&&le.byteLength||0)/1024),ve=o.getTile(f).tileSize,xe=512/Math.min(ve,512)*(f.overscaledZ/_.transform.zoom)*.5;let De=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(De+=` => ${f.overscaledZ}`),function(Ue,ot){Ue.initDebugOverlayCanvas();const Me=Ue.debugOverlayCanvas,it=Ue.context.gl,_t=Ue.debugOverlayCanvas.getContext("2d");_t.clearRect(0,0,Me.width,Me.height),_t.shadowColor="white",_t.shadowBlur=2,_t.lineWidth=1.5,_t.strokeStyle="white",_t.textBaseline="top",_t.font="bold 36px Open Sans, sans-serif",_t.fillText(ot,5,5),_t.strokeText(ot,5,5),Ue.debugOverlayTexture.update(Me),Ue.debugOverlayTexture.bind(it.LINEAR,it.CLAMP_TO_EDGE)}(_,`${De} ${Se}kB`),P.draw(v,b.TRIANGLES,R,O,Bi.alphaBlended,Ai.disabled,Lh(E,l.Color.transparent,xe),null,K,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),P.draw(v,b.LINE_STRIP,R,O,N,Ai.disabled,Lh(E,l.Color.red),Z,K,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function Yh(_,o,f){const v=_.context,b=v.gl,E=_.colorModeForRenderPass(),P=new Jn(b.LEQUAL,Jn.ReadWrite,_.depthRangeFor3D),R=_.useProgram("terrain"),O=o.getTerrainMesh();v.bindFramebuffer.set(null),v.viewport.set([0,0,_.width,_.height]);for(const N of f){const K=_.renderToTexture.getTexture(N),Z=o.getTerrainData(N.tileID);v.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,K.texture);const le={u_matrix:_.transform.calculatePosMatrix(N.tileID.toUnwrapped()),u_texture:0,u_ele_delta:o.getMeshFrameDelta(_.transform.zoom)};R.draw(v,b.TRIANGLES,P,Mi.disabled,E,Ai.backCCW,le,Z,"terrain",O.vertexBuffer,O.indexBuffer,O.segments)}}const Jh={symbol:function(_,o,f,v,b){if(_.renderPass!=="translucent")return;const E=Mi.disabled,P=_.colorModeForRenderPass();f.layout.get("text-variable-anchor")&&function(R,O,N,K,Z,le,Se){const ve=O.transform,xe=Z==="map",De=le==="map";for(const Ue of R){const ot=K.getTile(Ue),Me=ot.getBucket(N);if(!Me||!Me.text||!Me.text.segments.get().length)continue;const it=l.evaluateSizeForZoom(Me.textSizeData,ve.zoom),_t=bt(ot,1,O.transform.zoom),At=Yt(Ue.posMatrix,De,xe,O.transform,_t),Rt=N.layout.get("icon-text-fit")!=="none"&&Me.hasIconData();if(it){const Bt=Math.pow(2,ve.zoom-ot.tileID.overscaledZ);Fm(Me,xe,De,Se,ve,At,Ue.posMatrix,Bt,it,Rt,O.style.map.terrain?(Lt,nn)=>O.style.map.terrain.getElevation(Ue,Lt,nn):null)}}}(v,_,f,o,f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),b),f.paint.get("icon-opacity").constantOr(1)!==0&&Wu(_,o,f,v,!1,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),f.layout.get("icon-rotation-alignment"),f.layout.get("icon-pitch-alignment"),f.layout.get("icon-keep-upright"),E,P),f.paint.get("text-opacity").constantOr(1)!==0&&Wu(_,o,f,v,!0,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),f.layout.get("text-keep-upright"),E,P),o.map.showCollisionBoxes&&(Rm(_,o,f,v,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),!0),Rm(_,o,f,v,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),!1))},circle:function(_,o,f,v){if(_.renderPass!=="translucent")return;const b=f.paint.get("circle-opacity"),E=f.paint.get("circle-stroke-width"),P=f.paint.get("circle-stroke-opacity"),R=!f.layout.get("circle-sort-key").isConstant();if(b.constantOr(1)===0&&(E.constantOr(1)===0||P.constantOr(1)===0))return;const O=_.context,N=O.gl,K=_.depthModeForSublayer(0,Jn.ReadOnly),Z=Mi.disabled,le=_.colorModeForRenderPass(),Se=[];for(let ve=0;ve<v.length;ve++){const xe=v[ve],De=o.getTile(xe),Ue=De.getBucket(f);if(!Ue)continue;const ot=Ue.programConfigurations.get(f.id),Me=_.useProgram("circle",ot),it=Ue.layoutVertexBuffer,_t=Ue.indexBuffer,At=_.style.map.terrain&&_.style.map.terrain.getTerrainData(xe),Rt={programConfiguration:ot,program:Me,layoutVertexBuffer:it,indexBuffer:_t,uniformValues:Em(_,xe,De,f),terrainData:At};if(R){const Bt=Ue.segments.get();for(const Lt of Bt)Se.push({segments:new l.SegmentVector([Lt]),sortKey:Lt.sortKey,state:Rt})}else Se.push({segments:Ue.segments,sortKey:0,state:Rt})}R&&Se.sort((ve,xe)=>ve.sortKey-xe.sortKey);for(const ve of Se){const{programConfiguration:xe,program:De,layoutVertexBuffer:Ue,indexBuffer:ot,uniformValues:Me,terrainData:it}=ve.state;De.draw(O,N.TRIANGLES,K,Z,le,Ai.disabled,Me,it,f.id,Ue,ot,ve.segments,f.paint,_.transform.zoom,xe)}},heatmap:function(_,o,f,v){if(f.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const b=_.context,E=b.gl,P=Mi.disabled,R=new Bi([E.ONE,E.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(O,N,K){const Z=O.gl;O.activeTexture.set(Z.TEXTURE1),O.viewport.set([0,0,N.width/4,N.height/4]);let le=K.heatmapFbo;if(le)Z.bindTexture(Z.TEXTURE_2D,le.colorAttachment.get()),O.bindFramebuffer.set(le.framebuffer);else{const Se=Z.createTexture();Z.bindTexture(Z.TEXTURE_2D,Se),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_S,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_T,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MIN_FILTER,Z.LINEAR),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MAG_FILTER,Z.LINEAR),le=K.heatmapFbo=O.createFramebuffer(N.width/4,N.height/4,!1,!1),function(ve,xe,De,Ue){var ot,Me;const it=ve.gl,_t=(ot=ve.HALF_FLOAT)!==null&&ot!==void 0?ot:it.UNSIGNED_BYTE,At=(Me=ve.RGBA16F)!==null&&Me!==void 0?Me:it.RGBA;it.texImage2D(it.TEXTURE_2D,0,At,xe.width/4,xe.height/4,0,it.RGBA,_t,null),Ue.colorAttachment.set(De)}(O,N,Se,le)}})(b,_,f),b.clear({color:l.Color.transparent});for(let O=0;O<v.length;O++){const N=v[O];if(o.hasRenderableParent(N))continue;const K=o.getTile(N),Z=K.getBucket(f);if(!Z)continue;const le=Z.programConfigurations.get(f.id),Se=_.useProgram("heatmap",le),{zoom:ve}=_.transform;Se.draw(b,E.TRIANGLES,Jn.disabled,P,R,Ai.disabled,Uo(N.posMatrix,K,ve,f.paint.get("heatmap-intensity")),null,f.id,Z.layoutVertexBuffer,Z.indexBuffer,Z.segments,f.paint,_.transform.zoom,le)}b.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(b,E){const P=b.context,R=P.gl,O=E.heatmapFbo;if(!O)return;P.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,O.colorAttachment.get()),P.activeTexture.set(R.TEXTURE1);let N=E.colorRampTexture;N||(N=E.colorRampTexture=new B(P,E.colorRamp,R.RGBA)),N.bind(R.LINEAR,R.CLAMP_TO_EDGE),b.useProgram("heatmapTexture").draw(P,R.TRIANGLES,Jn.disabled,Mi.disabled,b.colorModeForRenderPass(),Ai.disabled,((K,Z,le,Se)=>{const ve=l.create();l.ortho(ve,0,K.width,K.height,0,0,1);const xe=K.context.gl;return{u_matrix:ve,u_world:[xe.drawingBufferWidth,xe.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Z.paint.get("heatmap-opacity")}})(b,E),null,E.id,b.viewportBuffer,b.quadTriangleIndexBuffer,b.viewportSegments,E.paint,b.transform.zoom)}(_,f))},line:function(_,o,f,v){if(_.renderPass!=="translucent")return;const b=f.paint.get("line-opacity"),E=f.paint.get("line-width");if(b.constantOr(1)===0||E.constantOr(1)===0)return;const P=_.depthModeForSublayer(0,Jn.ReadOnly),R=_.colorModeForRenderPass(),O=f.paint.get("line-dasharray"),N=f.paint.get("line-pattern"),K=N.constantOr(1),Z=f.paint.get("line-gradient"),le=f.getCrossfadeParameters(),Se=K?"linePattern":O?"lineSDF":Z?"lineGradient":"line",ve=_.context,xe=ve.gl;let De=!0;for(const Ue of v){const ot=o.getTile(Ue);if(K&&!ot.patternsLoaded())continue;const Me=ot.getBucket(f);if(!Me)continue;const it=Me.programConfigurations.get(f.id),_t=_.context.program.get(),At=_.useProgram(Se,it),Rt=De||At.program!==_t,Bt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ue),Lt=N.constantOr(null);if(Lt&&ot.imageAtlas){const Bn=ot.imageAtlas,Zt=Bn.patternPositions[Lt.to.toString()],On=Bn.patternPositions[Lt.from.toString()];Zt&&On&&it.setConstantPatternPositions(Zt,On)}const nn=Bt?Ue:null,Sn=K?Fu(_,ot,f,le,nn):O?Tc(_,ot,f,O,le,nn):Z?Ru(_,ot,f,Me.lineClipsArray.length,nn):Kr(_,ot,f,nn);if(K)ve.activeTexture.set(xe.TEXTURE0),ot.imageAtlasTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE),it.updatePaintBuffers(le);else if(O&&(Rt||_.lineAtlas.dirty))ve.activeTexture.set(xe.TEXTURE0),_.lineAtlas.bind(ve);else if(Z){const Bn=Me.gradients[f.id];let Zt=Bn.texture;if(f.gradientVersion!==Bn.version){let On=256;if(f.stepInterpolant){const on=o.getSource().maxzoom,di=Ue.canonical.z===on?Math.ceil(1<<_.transform.maxZoom-Ue.canonical.z):1;On=l.clamp(l.nextPowerOfTwo(Me.maxLineLength/l.EXTENT*1024*di),256,ve.maxTextureSize)}Bn.gradient=l.renderColorRamp({expression:f.gradientExpression(),evaluationKey:"lineProgress",resolution:On,image:Bn.gradient||void 0,clips:Me.lineClipsArray}),Bn.texture?Bn.texture.update(Bn.gradient):Bn.texture=new B(ve,Bn.gradient,xe.RGBA),Bn.version=f.gradientVersion,Zt=Bn.texture}ve.activeTexture.set(xe.TEXTURE0),Zt.bind(f.stepInterpolant?xe.NEAREST:xe.LINEAR,xe.CLAMP_TO_EDGE)}At.draw(ve,xe.TRIANGLES,P,_.stencilModeForClipping(Ue),R,Ai.disabled,Sn,Bt,f.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,f.paint,_.transform.zoom,it,Me.layoutVertexBuffer2),De=!1}},fill:function(_,o,f,v){const b=f.paint.get("fill-color"),E=f.paint.get("fill-opacity");if(E.constantOr(1)===0)return;const P=_.colorModeForRenderPass(),R=f.paint.get("fill-pattern"),O=_.opaquePassEnabledForLayer()&&!R.constantOr(1)&&b.constantOr(l.Color.transparent).a===1&&E.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===O){const N=_.depthModeForSublayer(1,_.renderPass==="opaque"?Jn.ReadWrite:Jn.ReadOnly);Pc(_,o,f,v,N,P,!1)}if(_.renderPass==="translucent"&&f.paint.get("fill-antialias")){const N=_.depthModeForSublayer(f.getPaintProperty("fill-outline-color")?2:0,Jn.ReadOnly);Pc(_,o,f,v,N,P,!0)}},"fill-extrusion":function(_,o,f,v){const b=f.paint.get("fill-extrusion-opacity");if(b!==0&&_.renderPass==="translucent"){const E=new Jn(_.context.gl.LEQUAL,Jn.ReadWrite,_.depthRangeFor3D);if(b!==1||f.paint.get("fill-extrusion-pattern").constantOr(1))Dc(_,o,f,v,E,Mi.disabled,Bi.disabled),Dc(_,o,f,v,E,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const P=_.colorModeForRenderPass();Dc(_,o,f,v,E,Mi.disabled,P)}}},hillshade:function(_,o,f,v){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const b=_.context,E=_.depthModeForSublayer(0,Jn.ReadOnly),P=_.colorModeForRenderPass(),[R,O]=_.renderPass==="translucent"?_.stencilConfigForOverlap(v):[{},v];for(const N of O){const K=o.getTile(N);K.needsHillshadePrepare!==void 0&&K.needsHillshadePrepare&&_.renderPass==="offscreen"?$m(_,K,f,E,Mi.disabled,P):_.renderPass==="translucent"&&my(_,N,K,f,E,R[N.overscaledZ],P)}b.viewport.set([0,0,_.width,_.height])},raster:function(_,o,f,v){if(_.renderPass!=="translucent"||f.paint.get("raster-opacity")===0||!v.length)return;const b=_.context,E=b.gl,P=o.getSource(),R=_.useProgram("raster"),O=_.colorModeForRenderPass(),[N,K]=P instanceof ke?[{},v]:_.stencilConfigForOverlap(v),Z=K[K.length-1].overscaledZ,le=!_.options.moving;for(const Se of K){const ve=_.depthModeForSublayer(Se.overscaledZ-Z,f.paint.get("raster-opacity")===1?Jn.ReadWrite:Jn.ReadOnly,E.LESS),xe=o.getTile(Se);xe.registerFadeDuration(f.paint.get("raster-fade-duration"));const De=o.findLoadedParent(Se,0),Ue=er(xe,De,o,f,_.transform,_.style.map.terrain);let ot,Me;const it=f.paint.get("raster-resampling")==="nearest"?E.NEAREST:E.LINEAR;b.activeTexture.set(E.TEXTURE0),xe.texture.bind(it,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),b.activeTexture.set(E.TEXTURE1),De?(De.texture.bind(it,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),ot=Math.pow(2,De.tileID.overscaledZ-xe.tileID.overscaledZ),Me=[xe.tileID.canonical.x*ot%1,xe.tileID.canonical.y*ot%1]):xe.texture.bind(it,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST);const _t=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Se),At=_t?Se:null,Rt=At?At.posMatrix:_.transform.calculatePosMatrix(Se.toUnwrapped(),le),Bt=Cc(Rt,Me||[0,0],ot||1,Ue,f);P instanceof ke?R.draw(b,E.TRIANGLES,ve,Mi.disabled,O,Ai.disabled,Bt,_t,f.id,P.boundsBuffer,_.quadTriangleIndexBuffer,P.boundsSegments):R.draw(b,E.TRIANGLES,ve,N[Se.overscaledZ],O,Ai.disabled,Bt,_t,f.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}},background:function(_,o,f,v){const b=f.paint.get("background-color"),E=f.paint.get("background-opacity");if(E===0)return;const P=_.context,R=P.gl,O=_.transform,N=O.tileSize,K=f.paint.get("background-pattern");if(_.isPatternMissing(K))return;const Z=!K&&b.a===1&&E===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==Z)return;const le=Mi.disabled,Se=_.depthModeForSublayer(0,Z==="opaque"?Jn.ReadWrite:Jn.ReadOnly),ve=_.colorModeForRenderPass(),xe=_.useProgram(K?"backgroundPattern":"background"),De=v||O.coveringTiles({tileSize:N,terrain:_.style.map.terrain});K&&(P.activeTexture.set(R.TEXTURE0),_.imageManager.bind(_.context));const Ue=f.getCrossfadeParameters();for(const ot of De){const Me=v?ot.posMatrix:_.transform.calculatePosMatrix(ot.toUnwrapped()),it=K?$u(Me,E,_,K,{tileID:ot,tileSize:N},Ue):Rh(Me,E,b),_t=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ot);xe.draw(P,R.TRIANGLES,Se,le,ve,Ai.disabled,it,_t,f.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}},debug:function(_,o,f){for(let v=0;v<f.length;v++)Nm(_,o,f[v])},custom:function(_,o,f){const v=_.context,b=f.implementation;if(_.renderPass==="offscreen"){const E=b.prerender;E&&(_.setCustomLayerDefaults(),v.setColorMode(_.colorModeForRenderPass()),E.call(b,v.gl,_.transform.customLayerMatrix()),v.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),v.setColorMode(_.colorModeForRenderPass()),v.setStencilMode(Mi.disabled);const E=b.renderingMode==="3d"?new Jn(_.context.gl.LEQUAL,Jn.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,Jn.ReadOnly);v.setDepthMode(E),b.render(v.gl,_.transform.customLayerMatrix()),v.setDirty(),_.setBaseState(),v.bindFramebuffer.set(null)}}};class jm{constructor(o,f){this.context=new Wh(o),this.transform=f,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.create(),renderTime:0},this.setup(),this.numSublayers=Dt.maxUnderzooming+Dt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Sc}resize(o,f,v){if(this.width=o*v,this.height=f*v,this.pixelRatio=v,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const b of this.style._order)this.style._layers[b].resize()}setup(){const o=this.context,f=new l.PosArray;f.emplaceBack(0,0),f.emplaceBack(l.EXTENT,0),f.emplaceBack(0,l.EXTENT),f.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=o.createVertexBuffer(f,bl.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);const v=new l.PosArray;v.emplaceBack(0,0),v.emplaceBack(l.EXTENT,0),v.emplaceBack(0,l.EXTENT),v.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=o.createVertexBuffer(v,bl.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);const b=new l.RasterBoundsArray;b.emplaceBack(0,0,0,0),b.emplaceBack(l.EXTENT,0,l.EXTENT,0),b.emplaceBack(0,l.EXTENT,0,l.EXTENT),b.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=o.createVertexBuffer(b,_e.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);const E=new l.PosArray;E.emplaceBack(0,0),E.emplaceBack(1,0),E.emplaceBack(0,1),E.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(E,bl.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);const P=new l.LineStripIndexArray;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(P);const R=new l.TriangleIndexArray;R.emplaceBack(0,1,2),R.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(R);const O=this.context.gl;this.stencilClearMode=new Mi({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO)}clearStencil(){const o=this.context,f=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const v=l.create();l.ortho(v,0,this.width,this.height,0,0,1),l.scale(v,v,[f.drawingBufferWidth,f.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(o,f.TRIANGLES,Jn.disabled,this.stencilClearMode,Bi.disabled,Ai.disabled,Oh(v),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(o,f){if(this.currentStencilSource===o.source||!o.isTileClipped()||!f||!f.length)return;this.currentStencilSource=o.source;const v=this.context,b=v.gl;this.nextStencilID+f.length>256&&this.clearStencil(),v.setColorMode(Bi.disabled),v.setDepthMode(Jn.disabled);const E=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const P of f){const R=this._tileClippingMaskIDs[P.key]=this.nextStencilID++,O=this.style.map.terrain&&this.style.map.terrain.getTerrainData(P);E.draw(v,b.TRIANGLES,Jn.disabled,new Mi({func:b.ALWAYS,mask:0},R,255,b.KEEP,b.KEEP,b.REPLACE),Bi.disabled,Ai.disabled,Oh(P.posMatrix),O,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,f=this.context.gl;return new Mi({func:f.NOTEQUAL,mask:255},o,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(o){const f=this.context.gl;return new Mi({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,f.KEEP,f.KEEP,f.REPLACE)}stencilConfigForOverlap(o){const f=this.context.gl,v=o.sort((P,R)=>R.overscaledZ-P.overscaledZ),b=v[v.length-1].overscaledZ,E=v[0].overscaledZ-b+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();const P={};for(let R=0;R<E;R++)P[R+b]=new Mi({func:f.GEQUAL,mask:255},R+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=E,[P,v]}return[{[b]:Mi.disabled},v]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new Bi([o.CONSTANT_COLOR,o.ONE],new l.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Bi.unblended:Bi.alphaBlended}depthModeForSublayer(o,f,v){if(!this.opaquePassEnabledForLayer())return Jn.disabled;const b=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new Jn(v||this.context.gl.LEQUAL,f,[b,b])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(o,f){this.style=o,this.options=f,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(l.exported.now()),this.imageManager.beginFrame();const v=this.style._order,b=this.style.sourceCaches,E={},P={},R={};for(const O in b){const N=b[O];N.used&&N.prepare(this.context),E[O]=N.getVisibleCoordinates(),P[O]=E[O].slice().reverse(),R[O]=N.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let O=0;O<v.length;O++)if(this.style._layers[v[O]].is3D()){this.opaquePassCutoff=O;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const O=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!l.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||O.length)&&(l.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(N,K){const Z=N.context,le=Z.gl,Se=Bi.unblended,ve=new Jn(le.LEQUAL,Jn.ReadWrite,[0,1]),xe=K.getTerrainMesh(),De=K.sourceCache.getRenderableTiles(),Ue=N.useProgram("terrainDepth");Z.bindFramebuffer.set(K.getFramebuffer("depth").framebuffer),Z.viewport.set([0,0,N.width/devicePixelRatio,N.height/devicePixelRatio]),Z.clear({color:l.Color.transparent,depth:1});for(const ot of De){const Me=K.getTerrainData(ot.tileID),it={u_matrix:N.transform.calculatePosMatrix(ot.tileID.toUnwrapped()),u_ele_delta:K.getMeshFrameDelta(N.transform.zoom)};Ue.draw(Z,le.TRIANGLES,ve,Mi.disabled,Se,Ai.backCCW,it,Me,"terrain",xe.vertexBuffer,xe.indexBuffer,xe.segments)}Z.bindFramebuffer.set(null),Z.viewport.set([0,0,N.width,N.height])}(this,this.style.map.terrain),function(N,K){const Z=N.context,le=Z.gl,Se=Bi.unblended,ve=new Jn(le.LEQUAL,Jn.ReadWrite,[0,1]),xe=K.getTerrainMesh(),De=K.getCoordsTexture(),Ue=K.sourceCache.getRenderableTiles(),ot=N.useProgram("terrainCoords");Z.bindFramebuffer.set(K.getFramebuffer("coords").framebuffer),Z.viewport.set([0,0,N.width/devicePixelRatio,N.height/devicePixelRatio]),Z.clear({color:l.Color.transparent,depth:1}),K.coordsIndex=[];for(const Me of Ue){const it=K.getTerrainData(Me.tileID);Z.activeTexture.set(le.TEXTURE0),le.bindTexture(le.TEXTURE_2D,De.texture);const _t={u_matrix:N.transform.calculatePosMatrix(Me.tileID.toUnwrapped()),u_terrain_coords_id:(255-K.coordsIndex.length)/255,u_texture:0,u_ele_delta:K.getMeshFrameDelta(N.transform.zoom)};ot.draw(Z,le.TRIANGLES,ve,Mi.disabled,Se,Ai.backCCW,_t,it,"terrain",xe.vertexBuffer,xe.indexBuffer,xe.segments),K.coordsIndex.push(Me.tileID.key)}Z.bindFramebuffer.set(null),Z.viewport.set([0,0,N.width,N.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const O of v){const N=this.style._layers[O];if(!N.hasOffscreenPass()||N.isHidden(this.transform.zoom))continue;const K=P[N.source];(N.type==="custom"||K.length)&&this.renderLayer(this,b[N.source],N,K)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:f.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=f.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){const O=this.style._layers[v[this.currentLayer]],N=b[O.source],K=E[O.source];this._renderTileClippingMasks(O,K),this.renderLayer(this,N,O,K)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){const O=this.style._layers[v[this.currentLayer]],N=b[O.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(O))continue;const K=(O.type==="symbol"?R:P)[O.source];this._renderTileClippingMasks(O,E[O.source]),this.renderLayer(this,N,O,K)}if(this.options.showTileBoundaries){const O=function(N,K){let Z=null;const le=Object.values(N._layers).flatMap(De=>De.source&&!De.isHidden(K)?[N.sourceCaches[De.source]]:[]),Se=le.filter(De=>De.getSource().type==="vector"),ve=le.filter(De=>De.getSource().type!=="vector"),xe=De=>{(!Z||Z.getSource().maxzoom<De.getSource().maxzoom)&&(Z=De)};return Se.forEach(De=>xe(De)),Z||ve.forEach(De=>xe(De)),Z}(this.style,this.transform.zoom);O&&Jh.debug(this,O,O.getVisibleCoordinates())}this.options.showPadding&&function(O){const N=O.transform.padding;Go(O,O.transform.height-(N.top||0),3,Ho),Go(O,N.bottom||0,3,Cs),Lc(O,N.left||0,3,zm),Lc(O,O.transform.width-(N.right||0),3,Xh);const K=O.transform.centerPoint;(function(Z,le,Se,ve){Cl(Z,le-1,Se-10,2,20,ve),Cl(Z,le-10,Se-1,20,2,ve)})(O,K.x,O.transform.height-K.y,Bm)}(this),this.context.setDefault()}renderLayer(o,f,v,b){v.isHidden(this.transform.zoom)||(v.type==="background"||v.type==="custom"||(b||[]).length)&&(this.id=v.id,Jh[v.type](o,f,v,b,this.style.placement.variableOffsets))}translatePosMatrix(o,f,v,b,E){if(!v[0]&&!v[1])return o;const P=E?b==="map"?this.transform.angle:0:b==="viewport"?-this.transform.angle:0;if(P){const N=Math.sin(P),K=Math.cos(P);v=[v[0]*K-v[1]*N,v[0]*N+v[1]*K]}const R=[E?v[0]:bt(f,v[0],this.transform.zoom),E?v[1]:bt(f,v[1],this.transform.zoom),0],O=new Float32Array(16);return l.translate(O,o,R),O}saveTileTexture(o){const f=this._tileTextures[o.size[0]];f?f.push(o):this._tileTextures[o.size[0]]=[o]}getTileTexture(o){const f=this._tileTextures[o];return f&&f.length>0?f.pop():null}isPatternMissing(o){if(!o)return!1;if(!o.from||!o.to)return!0;const f=this.imageManager.getPattern(o.from.toString()),v=this.imageManager.getPattern(o.to.toString());return!f||!v}useProgram(o,f){this.cache=this.cache||{};const v=o+(f?f.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[v]||(this.cache[v]=new iy(this.context,o,Is[o],f,zu[o],this._showOverdrawInspector,this.style.map.terrain)),this.cache[v]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new B(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class qu{constructor(o,f){this.points=o,this.planes=f}static fromInvProjectionMatrix(o,f,v){const b=Math.pow(2,v),E=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(R=>{const O=1/(R=l.transformMat4([],R,o))[3]/f*b;return l.mul$1(R,R,[O,O,1/R[3],O])}),P=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(R=>{const O=function(le,Se){var ve=Se[0],xe=Se[1],De=Se[2],Ue=ve*ve+xe*xe+De*De;return Ue>0&&(Ue=1/Math.sqrt(Ue)),le[0]=Se[0]*Ue,le[1]=Se[1]*Ue,le[2]=Se[2]*Ue,le}([],function(le,Se,ve){var xe=Se[0],De=Se[1],Ue=Se[2],ot=ve[0],Me=ve[1],it=ve[2];return le[0]=De*it-Ue*Me,le[1]=Ue*ot-xe*it,le[2]=xe*Me-De*ot,le}([],be([],E[R[0]],E[R[1]]),be([],E[R[2]],E[R[1]]))),N=-((K=O)[0]*(Z=E[R[1]])[0]+K[1]*Z[1]+K[2]*Z[2]);var K,Z;return O.concat(N)});return new qu(E,P)}}class la{constructor(o,f){this.min=o,this.max=f,this.center=function(v,b,E){return v[0]=.5*b[0],v[1]=.5*b[1],v[2]=.5*b[2],v}([],function(v,b,E){return v[0]=b[0]+E[0],v[1]=b[1]+E[1],v[2]=b[2]+E[2],v}([],this.min,this.max))}quadrant(o){const f=[o%2==0,o<2],v=Q(this.min),b=Q(this.max);for(let E=0;E<f.length;E++)v[E]=f[E]?this.min[E]:this.center[E],b[E]=f[E]?this.center[E]:this.max[E];return b[2]=this.max[2],new la(v,b)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}intersects(o){const f=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let v=!0;for(let b=0;b<o.planes.length;b++){const E=o.planes[b];let P=0;for(let R=0;R<f.length;R++)l.dot(E,f[R])>=0&&P++;if(P===0)return 0;P!==f.length&&(v=!1)}if(v)return 2;for(let b=0;b<3;b++){let E=Number.MAX_VALUE,P=-Number.MAX_VALUE;for(let R=0;R<o.points.length;R++){const O=o.points[R][b]-this.min[b];E=Math.min(E,O),P=Math.max(P,O)}if(P<0||E>this.max[b]-this.min[b])return 0}return 1}}class Zu{constructor(o=0,f=0,v=0,b=0){if(isNaN(o)||o<0||isNaN(f)||f<0||isNaN(v)||v<0||isNaN(b)||b<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=f,this.left=v,this.right=b}interpolate(o,f,v){return f.top!=null&&o.top!=null&&(this.top=l.interpolate.number(o.top,f.top,v)),f.bottom!=null&&o.bottom!=null&&(this.bottom=l.interpolate.number(o.bottom,f.bottom,v)),f.left!=null&&o.left!=null&&(this.left=l.interpolate.number(o.left,f.left,v)),f.right!=null&&o.right!=null&&(this.right=l.interpolate.number(o.right,f.right,v)),this}getCenter(o,f){const v=l.clamp((this.left+o-this.right)/2,0,o),b=l.clamp((this.top+f-this.bottom)/2,0,f);return new l.Point(v,b)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new Zu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Ku{constructor(o,f,v,b,E){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=E===void 0||!!E,this._minZoom=o||0,this._maxZoom=f||22,this._minPitch=v??0,this._maxPitch=b??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Zu,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const o=new Ku(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return o.apply(this),o}apply(o){this.tileSize=o.tileSize,this.latRange=o.latRange,this.width=o.width,this.height=o.height,this._center=o._center,this._elevation=o._elevation,this.zoom=o.zoom,this.angle=o.angle,this._fov=o._fov,this._pitch=o._pitch,this._unmodified=o._unmodified,this._edgeInsets=o._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(o){const f=-l.wrap(o,-180,180)*Math.PI/180;this.angle!==f&&(this._unmodified=!1,this.angle=f,this._calcMatrices(),this.rotationMatrix=function(){var v=new l.ARRAY_TYPE(4);return l.ARRAY_TYPE!=Float32Array&&(v[1]=0,v[2]=0),v[0]=1,v[3]=1,v}(),function(v,b,E){var P=b[0],R=b[1],O=b[2],N=b[3],K=Math.sin(E),Z=Math.cos(E);v[0]=P*Z+O*K,v[1]=R*Z+N*K,v[2]=P*-K+O*Z,v[3]=R*-K+N*Z}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(o){const f=l.clamp(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==f&&(this._unmodified=!1,this._pitch=f,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=o/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(o){const f=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==f&&(this._unmodified=!1,this._zoom=f,this.tileZoom=Math.max(0,Math.floor(f)),this.scale=this.zoomScale(f),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(o){o!==this._elevation&&(this._elevation=o,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,f,v){this._unmodified=!1,this._edgeInsets.interpolate(o,f,v),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){const f=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,f)}getVisibleUnwrappedCoordinates(o){const f=[new l.UnwrappedTileID(0,o)];if(this._renderWorldCopies){const v=this.pointCoordinate(new l.Point(0,0)),b=this.pointCoordinate(new l.Point(this.width,0)),E=this.pointCoordinate(new l.Point(this.width,this.height)),P=this.pointCoordinate(new l.Point(0,this.height)),R=Math.floor(Math.min(v.x,b.x,E.x,P.x)),O=Math.floor(Math.max(v.x,b.x,E.x,P.x)),N=1;for(let K=R-N;K<=O+N;K++)K!==0&&f.push(new l.UnwrappedTileID(K,o))}return f}coveringTiles(o){var f,v;let b=this.coveringZoomLevel(o);const E=b;if(o.minzoom!==void 0&&b<o.minzoom)return[];o.maxzoom!==void 0&&b>o.maxzoom&&(b=o.maxzoom);const P=this.pointCoordinate(this.getCameraPoint()),R=l.MercatorCoordinate.fromLngLat(this.center),O=Math.pow(2,b),N=[O*P.x,O*P.y,0],K=[O*R.x,O*R.y,0],Z=qu.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,b);let le=o.minzoom||0;!o.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(le=b);const Se=o.terrain?2/Math.min(this.tileSize,o.tileSize)*this.tileSize:3,ve=Me=>({aabb:new la([Me*O,0,0],[(Me+1)*O,O,0]),zoom:0,x:0,y:0,wrap:Me,fullyVisible:!1}),xe=[],De=[],Ue=b,ot=o.reparseOverscaled?E:b;if(this._renderWorldCopies)for(let Me=1;Me<=3;Me++)xe.push(ve(-Me)),xe.push(ve(Me));for(xe.push(ve(0));xe.length>0;){const Me=xe.pop(),it=Me.x,_t=Me.y;let At=Me.fullyVisible;if(!At){const Sn=Me.aabb.intersects(Z);if(Sn===0)continue;At=Sn===2}const Rt=o.terrain?N:K,Bt=Me.aabb.distanceX(Rt),Lt=Me.aabb.distanceY(Rt),nn=Math.max(Math.abs(Bt),Math.abs(Lt));if(Me.zoom===Ue||nn>Se+(1<<Ue-Me.zoom)-2&&Me.zoom>=le){const Sn=Ue-Me.zoom,Bn=N[0]-.5-(it<<Sn),Zt=N[1]-.5-(_t<<Sn);De.push({tileID:new l.OverscaledTileID(Me.zoom===Ue?ot:Me.zoom,Me.wrap,Me.zoom,it,_t),distanceSq:te([K[0]-.5-it,K[1]-.5-_t]),tileDistanceToCamera:Math.sqrt(Bn*Bn+Zt*Zt)})}else for(let Sn=0;Sn<4;Sn++){const Bn=(it<<1)+Sn%2,Zt=(_t<<1)+(Sn>>1),On=Me.zoom+1;let on=Me.aabb.quadrant(Sn);if(o.terrain){const di=new l.OverscaledTileID(On,Me.wrap,On,Bn,Zt),tr=o.terrain.getMinMaxElevation(di),hi=(f=tr.minElevation)!==null&&f!==void 0?f:this.elevation,Nn=(v=tr.maxElevation)!==null&&v!==void 0?v:this.elevation;on=new la([on.min[0],on.min[1],hi],[on.max[0],on.max[1],Nn])}xe.push({aabb:on,zoom:On,x:Bn,y:Zt,wrap:Me.wrap,fullyVisible:At})}}return De.sort((Me,it)=>Me.distanceSq-it.distanceSq).map(Me=>Me.tileID)}resize(o,f){this.width=o,this.height=f,this.pixelsToGLUnits=[2/o,-2/f],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){const f=l.clamp(o.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.Point(l.mercatorXfromLng(o.lng)*this.worldSize,l.mercatorYfromLat(f)*this.worldSize)}unproject(o){return new l.MercatorCoordinate(o.x/this.worldSize,o.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(o){this.freezeElevation||(this.elevation=o?this.getElevation(this._center,o):0)}getElevation(o,f){const v=l.MercatorCoordinate.fromLngLat(o.wrap()),b=(1<<this.tileZoom)*l.EXTENT,E=v.x*b,P=v.y*b,R=Math.floor(E/l.EXTENT),O=Math.floor(P/l.EXTENT),N=new l.OverscaledTileID(this.tileZoom,0,this.tileZoom,R,O);return f.getElevation(N,E%l.EXTENT,P%l.EXTENT,l.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(o){const f=this.pointLocation(this.centerPoint,o),v=this.getElevation(f,o);if(!(this.elevation-v))return;const b=this.getCameraPosition(),E=l.MercatorCoordinate.fromLngLat(b.lngLat,b.altitude),P=l.MercatorCoordinate.fromLngLat(f,v),R=E.x-P.x,O=E.y-P.y,N=E.z-P.z,K=Math.sqrt(R*R+O*O+N*N),Z=this.scaleZoom(this.cameraToCenterDistance/K/this.tileSize);this._elevation=v,this._center=f,this.zoom=Z}setLocationAtPoint(o,f){const v=this.pointCoordinate(f),b=this.pointCoordinate(this.centerPoint),E=this.locationCoordinate(o),P=new l.MercatorCoordinate(E.x-(v.x-b.x),E.y-(v.y-b.y));this.center=this.coordinateLocation(P),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(o,f){return f?this.coordinatePoint(this.locationCoordinate(o),this.getElevation(o,f),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(o))}pointLocation(o,f){return this.coordinateLocation(this.pointCoordinate(o,f))}locationCoordinate(o){return l.MercatorCoordinate.fromLngLat(o)}coordinateLocation(o){return o&&o.toLngLat()}pointCoordinate(o,f){if(f){const le=f.pointCoordinate(o);if(le!=null)return le}const v=[o.x,o.y,0,1],b=[o.x,o.y,1,1];l.transformMat4(v,v,this.pixelMatrixInverse),l.transformMat4(b,b,this.pixelMatrixInverse);const E=v[3],P=b[3],R=v[1]/E,O=b[1]/P,N=v[2]/E,K=b[2]/P,Z=N===K?0:(0-N)/(K-N);return new l.MercatorCoordinate(l.interpolate.number(v[0]/E,b[0]/P,Z)/this.worldSize,l.interpolate.number(R,O,Z)/this.worldSize)}coordinatePoint(o,f=0,v=this.pixelMatrix){const b=[o.x*this.worldSize,o.y*this.worldSize,f,1];return l.transformMat4(b,b,v),new l.Point(b[0]/b[3],b[1]/b[3])}getBounds(){const o=Math.max(0,this.height/2-this.getHorizon());return new Ke().extend(this.pointLocation(new l.Point(0,o))).extend(this.pointLocation(new l.Point(this.width,o))).extend(this.pointLocation(new l.Point(this.width,this.height))).extend(this.pointLocation(new l.Point(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Ke([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(o){o?(this.lngRange=[o.getWest(),o.getEast()],this.latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(o,f=!1){const v=o.key,b=f?this._alignedPosMatrixCache:this._posMatrixCache;if(b[v])return b[v];const E=o.canonical,P=this.worldSize/this.zoomScale(E.z),R=E.x+Math.pow(2,E.z)*o.wrap,O=l.identity(new Float64Array(16));return l.translate(O,O,[R*P,E.y*P,0]),l.scale(O,O,[P/l.EXTENT,P/l.EXTENT,1]),l.multiply(O,f?this.alignedProjMatrix:this.projMatrix,O),b[v]=new Float32Array(O),b[v]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let o,f,v,b,E=-90,P=90,R=-180,O=180;const N=this.size,K=this._unmodified;if(this.latRange){const Se=this.latRange;E=l.mercatorYfromLat(Se[1])*this.worldSize,P=l.mercatorYfromLat(Se[0])*this.worldSize,o=P-E<N.y?N.y/(P-E):0}if(this.lngRange){const Se=this.lngRange;R=l.wrap(l.mercatorXfromLng(Se[0])*this.worldSize,0,this.worldSize),O=l.wrap(l.mercatorXfromLng(Se[1])*this.worldSize,0,this.worldSize),O<R&&(O+=this.worldSize),f=O-R<N.x?N.x/(O-R):0}const Z=this.point,le=Math.max(f||0,o||0);if(le)return this.center=this.unproject(new l.Point(f?(O+R)/2:Z.x,o?(P+E)/2:Z.y)),this.zoom+=this.scaleZoom(le),this._unmodified=K,void(this._constraining=!1);if(this.latRange){const Se=Z.y,ve=N.y/2;Se-ve<E&&(b=E+ve),Se+ve>P&&(b=P-ve)}if(this.lngRange){const Se=(R+O)/2,ve=l.wrap(Z.x,Se-this.worldSize/2,Se+this.worldSize/2),xe=N.x/2;ve-xe<R&&(v=R+xe),ve+xe>O&&(v=O-xe)}v===void 0&&b===void 0||(this.center=this.unproject(new l.Point(v!==void 0?v:Z.x,b!==void 0?b:Z.y)).wrap()),this._unmodified=K,this._constraining=!1}_calcMatrices(){if(!this.height)return;const o=this.centerOffset,f=this.point.x,v=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let b=l.identity(new Float64Array(16));l.scale(b,b,[this.width/2,-this.height/2,1]),l.translate(b,b,[1,-1,0]),this.labelPlaneMatrix=b,b=l.identity(new Float64Array(16)),l.scale(b,b,[1,-1,1]),l.translate(b,b,[-1,-1,0]),l.scale(b,b,[2/this.width,2/this.height,1]),this.glCoordMatrix=b,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const E=this._elevation<0?this.cameraToCenterDistance:this.cameraToSeaLevelDistance,P=Math.PI/2+this._pitch,R=this._fov*(.5+o.y/this.height),O=Math.sin(R)*E/Math.sin(l.clamp(Math.PI-P-R,.01,Math.PI-.01)),N=this.getHorizon(),K=2*Math.atan(N/this.cameraToCenterDistance)*(.5+o.y/(2*N)),Z=Math.sin(K)*E/Math.sin(l.clamp(Math.PI-P-K,.01,Math.PI-.01)),le=Math.min(O,Z),Se=1.01*(Math.cos(Math.PI/2-this._pitch)*le+E),ve=this.height/50;b=new Float64Array(16),l.perspective(b,this._fov,this.width/this.height,ve,Se),b[8]=2*-o.x/this.width,b[9]=2*o.y/this.height,l.scale(b,b,[1,-1,1]),l.translate(b,b,[0,0,-this.cameraToCenterDistance]),l.rotateX(b,b,this._pitch),l.rotateZ(b,b,this.angle),l.translate(b,b,[-f,-v,0]),this.mercatorMatrix=l.scale([],b,[this.worldSize,this.worldSize,this.worldSize]),l.scale(b,b,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,b),l.translate(b,b,[0,0,-this.elevation]),this.projMatrix=b,this.invProjMatrix=l.invert([],b),this.pixelMatrix3D=l.multiply(new Float64Array(16),this.labelPlaneMatrix,b);const xe=this.width%2/2,De=this.height%2/2,Ue=Math.cos(this.angle),ot=Math.sin(this.angle),Me=f-Math.round(f)+Ue*xe+ot*De,it=v-Math.round(v)+Ue*De+ot*xe,_t=new Float64Array(b);if(l.translate(_t,_t,[Me>.5?Me-1:Me,it>.5?it-1:it,0]),this.alignedProjMatrix=_t,b=l.invert(new Float64Array(16),this.pixelMatrix),!b)throw new Error("failed to invert matrix");this.pixelMatrixInverse=b,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const o=this.pointCoordinate(new l.Point(0,0)),f=[o.x*this.worldSize,o.y*this.worldSize,0,1];return l.transformMat4(f,f,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,o))}getCameraQueryGeometry(o){const f=this.getCameraPoint();if(o.length===1)return[o[0],f];{let v=f.x,b=f.y,E=f.x,P=f.y;for(const R of o)v=Math.min(v,R.x),b=Math.min(b,R.y),E=Math.max(E,R.x),P=Math.max(P,R.y);return[new l.Point(v,b),new l.Point(E,b),new l.Point(E,P),new l.Point(v,P),new l.Point(v,b)]}}}class Um{constructor(o){this._hashName=o&&encodeURIComponent(o),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(f,v){let b=!1,E=null;const P=()=>{E=null,b&&(f(),E=setTimeout(P,300),b=!1)};return()=>(b=!0,E||P(),E)}(this._updateHashUnthrottled.bind(this))}addTo(o){return this._map=o,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(o){const f=this._map.getCenter(),v=Math.round(100*this._map.getZoom())/100,b=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),E=Math.pow(10,b),P=Math.round(f.lng*E)/E,R=Math.round(f.lat*E)/E,O=this._map.getBearing(),N=this._map.getPitch();let K="";if(K+=o?`/${P}/${R}/${v}`:`${v}/${R}/${P}`,(O||N)&&(K+="/"+Math.round(10*O)/10),N&&(K+=`/${Math.round(N)}`),this._hashName){const Z=this._hashName;let le=!1;const Se=window.location.hash.slice(1).split("&").map(ve=>{const xe=ve.split("=")[0];return xe===Z?(le=!0,`${xe}=${K}`):ve}).filter(ve=>ve);return le||Se.push(`${Z}=${K}`),`#${Se.join("&")}`}return`#${K}`}_getCurrentHash(){const o=window.location.hash.replace("#","");if(this._hashName){let f;return o.split("&").map(v=>v.split("=")).forEach(v=>{v[0]===this._hashName&&(f=v)}),(f&&f[1]||"").split("/")}return o.split("/")}_onHashChange(){const o=this._getCurrentHash();if(o.length>=3&&!o.some(f=>isNaN(f))){const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:f,pitch:+(o[4]||0)}),!0}return!1}_updateHashUnthrottled(){const o=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,o)}catch{}}}const Oc={linearity:.3,easing:l.bezier(0,0,.3,1)},Vm=l.extend({deceleration:2500,maxSpeed:1400},Oc),Hm=l.extend({deceleration:20,maxSpeed:1400},Oc),Rc=l.extend({deceleration:1e3,maxSpeed:360},Oc),Gm=l.extend({deceleration:1e3,maxSpeed:90},Oc);class ca{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.exported.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,f=l.exported.now();for(;o.length>0&&f-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const f={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:E}of this._inertiaBuffer)f.zoom+=E.zoomDelta||0,f.bearing+=E.bearingDelta||0,f.pitch+=E.pitchDelta||0,E.panDelta&&f.pan._add(E.panDelta),E.around&&(f.around=E.around),E.pinchAround&&(f.pinchAround=E.pinchAround);const v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(f.pan.mag()){const E=Fc(f.pan.mag(),v,l.extend({},Vm,o||{}));b.offset=f.pan.mult(E.amount/f.pan.mag()),b.center=this._map.transform.center,As(b,E)}if(f.zoom){const E=Fc(f.zoom,v,Hm);b.zoom=this._map.transform.zoom+E.amount,As(b,E)}if(f.bearing){const E=Fc(f.bearing,v,Rc);b.bearing=this._map.transform.bearing+l.clamp(E.amount,-179,179),As(b,E)}if(f.pitch){const E=Fc(f.pitch,v,Gm);b.pitch=this._map.transform.pitch+E.amount,As(b,E)}if(b.zoom||b.bearing){const E=f.pinchAround===void 0?f.around:f.pinchAround;b.around=E?this._map.unproject(E):this._map.getCenter()}return this.clear(),l.extend(b,{noMoveStart:!0})}}function As(_,o){(!_.duration||_.duration<o.duration)&&(_.duration=o.duration,_.easing=o.easing)}function Fc(_,o,f){const{maxSpeed:v,linearity:b,deceleration:E}=f,P=l.clamp(_*b/(o/1e3),-v,v),R=Math.abs(P)/(E*b);return{easing:f.easing,duration:1e3*R,amount:P*(R/2)}}class sr extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,f,v,b={}){const E=g.mousePos(f.getCanvasContainer(),v),P=f.unproject(E);super(o,l.extend({point:E,lngLat:P,originalEvent:v},b)),this._defaultPrevented=!1,this.target=f}}class vo extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,f,v){const b=o==="touchend"?v.changedTouches:v.touches,E=g.touchPos(f.getCanvasContainer(),b),P=E.map(O=>f.unproject(O)),R=E.reduce((O,N,K,Z)=>O.add(N.div(Z.length)),new l.Point(0,0));super(o,{points:E,point:R,lngLats:P,lngLat:f.unproject(R),originalEvent:v}),this._defaultPrevented=!1}}class gy extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,f,v){super(o,{originalEvent:v}),this._defaultPrevented=!1}}class vy{constructor(o,f){this._map=o,this._clickTolerance=f.clickTolerance}reset(){delete this._mousedownPos}wheel(o){return this._firePreventable(new gy(o.type,this._map,o))}mousedown(o,f){return this._mousedownPos=f,this._firePreventable(new sr(o.type,this._map,o))}mouseup(o){this._map.fire(new sr(o.type,this._map,o))}click(o,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||this._map.fire(new sr(o.type,this._map,o))}dblclick(o){return this._firePreventable(new sr(o.type,this._map,o))}mouseover(o){this._map.fire(new sr(o.type,this._map,o))}mouseout(o){this._map.fire(new sr(o.type,this._map,o))}touchstart(o){return this._firePreventable(new vo(o.type,this._map,o))}touchmove(o){this._map.fire(new vo(o.type,this._map,o))}touchend(o){this._map.fire(new vo(o.type,this._map,o))}touchcancel(o){this._map.fire(new vo(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class _y{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(o){this._map.fire(new sr(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new sr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._ignoreContextMenu||this._map.fire(new sr(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Al{constructor(o){this._map=o}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(o){return this.transform.pointLocation(l.Point.convert(o),this._map.terrain)}}class $c{constructor(o,f){this._map=o,this._tr=new Al(o),this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,f){this.isEnabled()&&o.shiftKey&&o.button===0&&(g.disableDrag(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(o,f){if(!this._active)return;const v=f;if(this._lastPos.equals(v)||!this._box&&v.dist(this._startPos)<this._clickTolerance)return;const b=this._startPos;this._lastPos=v,this._box||(this._box=g.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",o));const E=Math.min(b.x,v.x),P=Math.max(b.x,v.x),R=Math.min(b.y,v.y),O=Math.max(b.y,v.y);g.setTransform(this._box,`translate(${E}px,${R}px)`),this._box.style.width=P-E+"px",this._box.style.height=O-R+"px"}mouseupWindow(o,f){if(!this._active||o.button!==0)return;const v=this._startPos,b=f;if(this.reset(),g.suppressClick(),v.x!==b.x||v.y!==b.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:o})),{cameraAnimation:E=>E.fitScreenCoordinates(v,b,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",o)}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(g.remove(this._box),this._box=null),g.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(o,f){return this._map.fire(new l.Event(o,{originalEvent:f}))}}function ua(_,o){if(_.length!==o.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${o.length}`);const f={};for(let v=0;v<_.length;v++)f[_[v].identifier]=o[v];return f}class dn{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(o,f,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=o.timeStamp),v.length===this.numTouches&&(this.centroid=function(b){const E=new l.Point(0,0);for(const P of b)E._add(P);return E.div(b.length)}(f),this.touches=ua(v,f)))}touchmove(o,f,v){if(this.aborted||!this.centroid)return;const b=ua(v,f);for(const E in this.touches){const P=b[E];(!P||P.dist(this.touches[E])>30)&&(this.aborted=!0)}}touchend(o,f,v){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),v.length===0){const b=!this.aborted&&this.centroid;if(this.reset(),b)return b}}}class Xu{constructor(o){this.singleTap=new dn(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(o,f,v){this.singleTap.touchstart(o,f,v)}touchmove(o,f,v){this.singleTap.touchmove(o,f,v)}touchend(o,f,v){const b=this.singleTap.touchend(o,f,v);if(b){const E=o.timeStamp-this.lastTime<500,P=!this.lastTap||this.lastTap.dist(b)<30;if(E&&P||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=b,this.count===this.numTaps)return this.reset(),b}}}class zc{constructor(o){this._tr=new Al(o),this._zoomIn=new Xu({numTouches:1,numTaps:2}),this._zoomOut=new Xu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,f,v){this._zoomIn.touchstart(o,f,v),this._zoomOut.touchstart(o,f,v)}touchmove(o,f,v){this._zoomIn.touchmove(o,f,v),this._zoomOut.touchmove(o,f,v)}touchend(o,f,v){const b=this._zoomIn.touchend(o,f,v),E=this._zoomOut.touchend(o,f,v),P=this._tr;return b?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:R=>R.easeTo({duration:300,zoom:P.zoom+1,around:P.unproject(b)},{originalEvent:o})}):E?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:R=>R.easeTo({duration:300,zoom:P.zoom-1,around:P.unproject(E)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class La{constructor(o){this._enabled=!!o.enable,this._moveStateManager=o.moveStateManager,this._clickTolerance=o.clickTolerance||1,this._moveFunction=o.move,this._activateOnStart=!!o.activateOnStart,o.assignEvents(this),this.reset()}reset(o){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(o)}_move(...o){const f=this._moveFunction(...o);if(f.bearingDelta||f.pitchDelta||f.around||f.panDelta)return this._active=!0,f}dragStart(o,f){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(o)&&(this._moveStateManager.startMove(o),this._lastPoint=f.length?f[0]:f,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(o,f){if(!this.isEnabled())return;const v=this._lastPoint;if(!v)return;if(o.preventDefault(),!this._moveStateManager.isValidMoveEvent(o))return void this.reset(o);const b=f.length?f[0]:f;return!this._moved&&b.dist(v)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=b,this._move(v,b))}dragEnd(o){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(o)&&(this._moved&&g.suppressClick(),this.reset(o))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Wm={0:1,2:2};class Jt{constructor(o){this._correctEvent=o.checkCorrectEvent}startMove(o){const f=g.mouseButton(o);this._eventButton=f}endMove(o){delete this._eventButton}isValidStartEvent(o){return this._correctEvent(o)}isValidMoveEvent(o){return!function(f,v){const b=Wm[v];return f.buttons===void 0||(f.buttons&b)!==b}(o,this._eventButton)}isValidEndEvent(o){return g.mouseButton(o)===this._eventButton}}class Yu{constructor(){this._firstTouch=void 0}_isOneFingerTouch(o){return o.targetTouches.length===1}_isSameTouchEvent(o){return o.targetTouches[0].identifier===this._firstTouch}startMove(o){this._firstTouch=o.targetTouches[0].identifier}endMove(o){delete this._firstTouch}isValidStartEvent(o){return this._isOneFingerTouch(o)}isValidMoveEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}isValidEndEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}}const Qh=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=function(o){o.preventDefault()}},qm=({enable:_,clickTolerance:o,bearingDegreesPerPixelMoved:f=.8})=>{const v=new Jt({checkCorrectEvent:b=>g.mouseButton(b)===0&&b.ctrlKey||g.mouseButton(b)===2});return new La({clickTolerance:o,move:(b,E)=>({bearingDelta:(E.x-b.x)*f}),moveStateManager:v,enable:_,assignEvents:Qh})},Ju=({enable:_,clickTolerance:o,pitchDegreesPerPixelMoved:f=-.5})=>{const v=new Jt({checkCorrectEvent:b=>g.mouseButton(b)===0&&b.ctrlKey||g.mouseButton(b)===2});return new La({clickTolerance:o,move:(b,E)=>({pitchDelta:(E.y-b.y)*f}),moveStateManager:v,enable:_,assignEvents:Qh})};class Zm{constructor(o,f){this._minTouches=o.cooperativeGestures?2:1,this._clickTolerance=o.clickTolerance||1,this._map=f,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.Point(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(o,f,v){return this._calculateTransform(o,f,v)}touchmove(o,f,v){if(this._map._cooperativeGestures&&(this._minTouches===2&&v.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(o,!1,v.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(v.length<this._minTouches))return o.preventDefault(),this._calculateTransform(o,f,v)}touchend(o,f,v){this._calculateTransform(o,f,v),this._active&&v.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,f,v){v.length>0&&(this._active=!0);const b=ua(v,f),E=new l.Point(0,0),P=new l.Point(0,0);let R=0;for(const N in b){const K=b[N],Z=this._touches[N];Z&&(E._add(K),P._add(K.sub(Z)),R++,b[N]=K)}if(this._touches=b,R<this._minTouches||!P.mag())return;const O=P.div(R);return this._sum._add(O),this._sum.mag()<this._clickTolerance?void 0:{around:E.div(R),panDelta:O}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qu{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(o){}_move(o,f,v){return{}}touchstart(o,f,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([f[0],f[1]]))}touchmove(o,f,v){if(!this._firstTwoTouches)return;o.preventDefault();const[b,E]=this._firstTwoTouches,P=ed(v,f,b),R=ed(v,f,E);if(!P||!R)return;const O=this._aroundCenter?null:P.add(R).div(2);return this._move([P,R],O,o)}touchend(o,f,v){if(!this._firstTwoTouches)return;const[b,E]=this._firstTwoTouches,P=ed(v,f,b),R=ed(v,f,E);P&&R||(this._active&&g.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ed(_,o,f){for(let v=0;v<_.length;v++)if(_[v].identifier===f)return o[v]}function Km(_,o){return Math.log(_/o)/Math.LN2}class ef extends Qu{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,f){const v=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(Km(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Km(this._distance,v),pinchAround:f}}}function td(_,o){return 180*_.angleWith(o)/Math.PI}class tf extends Qu{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,f){const v=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:td(this._vector,v),pinchAround:f}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const f=25/(Math.PI*this._minDiameter)*360,v=td(o,this._startVector);return Math.abs(v)<f}}function Bc(_){return Math.abs(_.y)>Math.abs(_.x)}class Yr extends Qu{constructor(o){super(),this._map=o}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(o,f,v){super.touchstart(o,f,v),this._currentTouchCount=v.length}_start(o){this._lastPoints=o,Bc(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,f,v){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const b=o[0].sub(this._lastPoints[0]),E=o[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(b,E,v.timeStamp),this._valid?(this._lastPoints=o,this._active=!0,{pitchDelta:(b.y+E.y)/2*-.5}):void 0}gestureBeginsVertically(o,f,v){if(this._valid!==void 0)return this._valid;const b=o.mag()>=2,E=f.mag()>=2;if(!b&&!E)return;if(!b||!E)return this._firstMove===void 0&&(this._firstMove=v),v-this._firstMove<100&&void 0;const P=o.y>0==f.y>0;return Bc(o)&&Bc(f)&&P}}const _o={panStep:100,bearingStep:15,pitchStep:10};class Xm{constructor(o){this._tr=new Al(o);const f=_o;this._panStep=f.panStep,this._bearingStep=f.bearingStep,this._pitchStep=f.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let f=0,v=0,b=0,E=0,P=0;switch(o.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:o.shiftKey?v=-1:(o.preventDefault(),E=-1);break;case 39:o.shiftKey?v=1:(o.preventDefault(),E=1);break;case 38:o.shiftKey?b=1:(o.preventDefault(),P=-1);break;case 40:o.shiftKey?b=-1:(o.preventDefault(),P=1);break;default:return}return this._rotationDisabled&&(v=0,b=0),{cameraAnimation:R=>{const O=this._tr;R.easeTo({duration:300,easeId:"keyboardHandler",easing:nf,zoom:f?Math.round(O.zoom)+f*(o.shiftKey?2:1):O.zoom,bearing:O.bearing+v*this._bearingStep,pitch:O.pitch+b*this._pitchStep,offset:[-E*this._panStep,-P*this._panStep],center:O.center},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function nf(_){return _*(2-_)}const nd=4.000244140625;class rf{constructor(o,f){this._map=o,this._tr=new Al(o),this._el=o.getCanvasContainer(),this._handler=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onTimeout"],this)}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=o&&o.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(o){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!o[this._map._metaKey])return;o.preventDefault()}let f=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const v=l.exported.now(),b=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,f!==0&&f%nd==0?this._type="wheel":f!==0&&Math.abs(f)<4?this._type="trackpad":b>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(b*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),o.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=o,this._delta-=f,this._active||this._start(o)),o.preventDefault()}_onTimeout(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=g.mousePos(this._el,o),v=this._tr;this._around=l.LngLat.convert(this._aroundCenter?v.center:v.unproject(f)),this._aroundPoint=v.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._tr.transform;if(this._delta!==0){const R=this._type==="wheel"&&Math.abs(this._delta)>nd?this._wheelZoomRate:this._defaultZoomRate;let O=2/(1+Math.exp(-Math.abs(this._delta*R)));this._delta<0&&O!==0&&(O=1/O);const N=typeof this._targetZoom=="number"?o.zoomScale(this._targetZoom):o.scale;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(N*O))),this._type==="wheel"&&(this._startZoom=o.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const f=typeof this._targetZoom=="number"?this._targetZoom:o.zoom,v=this._startZoom,b=this._easing;let E,P=!1;if(this._type==="wheel"&&v&&b){const R=Math.min((l.exported.now()-this._lastWheelEventTime)/200,1),O=b(R);E=l.interpolate.number(v,f,O),R<1?this._frameId||(this._frameId=!0):P=!0}else E=f,P=!0;return this._active=!0,P&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!P,zoomDelta:E-o.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let f=l.ease;if(this._prevEase){const v=this._prevEase,b=(l.exported.now()-v.start)/v.duration,E=v.easing(b+.01)-v.easing(b),P=.27/Math.sqrt(E*E+1e-4)*.01,R=Math.sqrt(.0729-P*P);f=l.bezier(P,R,.25,1)}return this._prevEase={start:l.exported.now(),duration:o,easing:f},f}reset(){this._active=!1}}class Ym{constructor(o,f){this._clickZoom=o,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ms{constructor(o){this._tr=new Al(o),this.reset()}reset(){this._active=!1}dblclick(o,f){return o.preventDefault(),{cameraAnimation:v=>{v.easeTo({duration:300,zoom:this._tr.zoom+(o.shiftKey?-1:1),around:this._tr.unproject(f)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fi{constructor(){this._tap=new Xu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(o,f,v){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?v.length>0&&(this._swipePoint=f[0],this._swipeTouch=v[0].identifier):this._tap.touchstart(o,f,v))}touchmove(o,f,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;const b=f[0],E=b.y-this._swipePoint.y;return this._swipePoint=b,o.preventDefault(),this._active=!0,{zoomDelta:E/128}}}else this._tap.touchmove(o,f,v)}touchend(o,f,v){this._tapTime?this._swipePoint&&v.length===0&&this.reset():this._tap.touchend(o,f,v)&&(this._tapTime=o.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class id{constructor(o,f,v){this._el=o,this._mousePan=f,this._touchPan=v}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class sf{constructor(o,f,v){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=f,this._mousePitch=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Jm{constructor(o,f,v,b){this._el=o,this._touchZoom=f,this._touchRotate=v,this._tapDragZoom=b,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Nc=_=>_.zoom||_.drag||_.pitch||_.rotate;class Qm extends l.Event{}function af(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class da{constructor(o,f){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ca(o),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(f),l.bindAll(["handleEvent","handleWindowEvent"],this);const v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[window,"blur",void 0]];for(const[b,E,P]of this._listeners)g.addEventListener(b,E,b===document?this.handleWindowEvent:this.handleEvent,P)}destroy(){for(const[o,f,v]of this._listeners)g.removeEventListener(o,f,o===document?this.handleWindowEvent:this.handleEvent,v)}_addDefaultHandlers(o){const f=this._map,v=f.getCanvasContainer();this._add("mapEvent",new vy(f,o));const b=f.boxZoom=new $c(f,o);this._add("boxZoom",b);const E=new zc(f),P=new Ms(f);f.doubleClickZoom=new Ym(P,E),this._add("tapZoom",E),this._add("clickZoom",P);const R=new Fi;this._add("tapDragZoom",R);const O=f.touchPitch=new Yr(f);this._add("touchPitch",O);const N=qm(o),K=Ju(o);f.dragRotate=new sf(o,N,K),this._add("mouseRotate",N,["mousePitch"]),this._add("mousePitch",K,["mouseRotate"]);const Z=(({enable:Ue,clickTolerance:ot})=>{const Me=new Jt({checkCorrectEvent:it=>g.mouseButton(it)===0&&!it.ctrlKey});return new La({clickTolerance:ot,move:(it,_t)=>({around:_t,panDelta:_t.sub(it)}),activateOnStart:!0,moveStateManager:Me,enable:Ue,assignEvents:Qh})})(o),le=new Zm(o,f);f.dragPan=new id(v,Z,le),this._add("mousePan",Z),this._add("touchPan",le,["touchZoom","touchRotate"]);const Se=new tf,ve=new ef;f.touchZoomRotate=new Jm(v,ve,Se,R),this._add("touchRotate",Se,["touchPan","touchZoom"]),this._add("touchZoom",ve,["touchPan","touchRotate"]);const xe=f.scrollZoom=new rf(f,this);this._add("scrollZoom",xe,["mousePan"]);const De=f.keyboard=new Xm(f);this._add("keyboard",De),this._add("blockableMapEvent",new _y(f));for(const Ue of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])o.interactive&&o[Ue]&&f[Ue].enable(o[Ue])}_add(o,f,v){this._handlers.push({handlerName:o,handler:f,allowed:v}),this._handlersById[o]=f}stop(o){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Nc(this._eventsInProgress)||this.isZooming()}_blockedByActive(o,f,v){for(const b in o)if(b!==v&&(!f||f.indexOf(b)<0))return!0;return!1}handleWindowEvent(o){this.handleEvent(o,`${o.type}Window`)}_getMapTouches(o){const f=[];for(const v of o)this._el.contains(v.target)&&f.push(v);return f}handleEvent(o,f){if(o.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const v=o.type==="renderFrame"?void 0:o,b={needsRenderFrame:!1},E={},P={},R=o.touches,O=R?this._getMapTouches(R):void 0,N=O?g.touchPos(this._el,O):g.mousePos(this._el,o);for(const{handlerName:le,handler:Se,allowed:ve}of this._handlers){if(!Se.isEnabled())continue;let xe;this._blockedByActive(P,ve,le)?Se.reset():Se[f||o.type]&&(xe=Se[f||o.type](o,N,O),this.mergeHandlerResult(b,E,xe,le,v),xe&&xe.needsRenderFrame&&this._triggerRenderFrame()),(xe||Se.isActive())&&(P[le]=Se)}const K={};for(const le in this._previousActiveHandlers)P[le]||(K[le]=v);this._previousActiveHandlers=P,(Object.keys(K).length||af(b))&&(this._changes.push([b,E,K]),this._triggerRenderFrame()),(Object.keys(P).length||af(b))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Z}=b;Z&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Z(this._map))}mergeHandlerResult(o,f,v,b,E){if(!v)return;l.extend(o,v);const P={handlerName:b,originalEvent:v.originalEvent||E};v.zoomDelta!==void 0&&(f.zoom=P),v.panDelta!==void 0&&(f.drag=P),v.pitchDelta!==void 0&&(f.pitch=P),v.bearingDelta!==void 0&&(f.rotate=P)}_applyChanges(){const o={},f={},v={};for(const[b,E,P]of this._changes)b.panDelta&&(o.panDelta=(o.panDelta||new l.Point(0,0))._add(b.panDelta)),b.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+b.pitchDelta),b.around!==void 0&&(o.around=b.around),b.pinchAround!==void 0&&(o.pinchAround=b.pinchAround),b.noInertia&&(o.noInertia=b.noInertia),l.extend(f,E),l.extend(v,P);this._updateMapTransform(o,f,v),this._changes=[]}_updateMapTransform(o,f,v){const b=this._map,E=b._getTransformForUpdate(),P=b.terrain;if(!(af(o)||P&&this._terrainMovement))return this._fireEvents(f,v,!0);let{panDelta:R,zoomDelta:O,bearingDelta:N,pitchDelta:K,around:Z,pinchAround:le}=o;le!==void 0&&(Z=le),b._stop(!0),Z=Z||b.transform.centerPoint;const Se=E.pointLocation(R?Z.sub(R):Z);N&&(E.bearing+=N),K&&(E.pitch+=K),O&&(E.zoom+=O),P?this._terrainMovement||!f.drag&&!f.zoom?f.drag&&this._terrainMovement?E.center=E.pointLocation(E.centerPoint.sub(R)):E.setLocationAtPoint(Se,Z):(this._terrainMovement=!0,E.freezeElevation=!0,E.setLocationAtPoint(Se,Z),this._map.once("moveend",()=>{E.freezeElevation=!1,this._terrainMovement=!1,E.recalculateZoom(b.terrain)})):E.setLocationAtPoint(Se,Z),b._applyUpdatedTransform(E),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(f,v,!0)}_fireEvents(o,f,v){const b=Nc(this._eventsInProgress),E=Nc(o),P={};for(const K in o){const{originalEvent:Z}=o[K];this._eventsInProgress[K]||(P[`${K}start`]=Z),this._eventsInProgress[K]=o[K]}!b&&E&&this._fireEvent("movestart",E.originalEvent);for(const K in P)this._fireEvent(K,P[K]);E&&this._fireEvent("move",E.originalEvent);for(const K in o){const{originalEvent:Z}=o[K];this._fireEvent(K,Z)}const R={};let O;for(const K in this._eventsInProgress){const{handlerName:Z,originalEvent:le}=this._eventsInProgress[K];this._handlersById[Z].isActive()||(delete this._eventsInProgress[K],O=f[Z]||le,R[`${K}end`]=O)}for(const K in R)this._fireEvent(K,R[K]);const N=Nc(this._eventsInProgress);if(v&&(b||E)&&!N){this._updatingCamera=!0;const K=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Z=le=>le!==0&&-this._bearingSnap<le&&le<this._bearingSnap;K?(Z(K.bearing||this._map.getBearing())&&(K.bearing=0),K.freezeElevation=!0,this._map.easeTo(K,{originalEvent:O})):(this._map.fire(new l.Event("moveend",{originalEvent:O})),Z(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(o,f){this._map.fire(new l.Event(o,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{delete this._frameId,this.handleEvent(new Qm("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const rd={extend:(_,...o)=>l.extend(_,...o),run(_){_()},logToElement(_,o=!1,f="log"){const v=window.document.getElementById(f);v&&(o&&(v.innerHTML=""),v.innerHTML+=`<br>${_}`)}};class bn extends l.Evented{constructor(o,f){super(),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=f.bearingSnap,l.bindAll(["_renderFrameCallback"],this),this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(o,f){return this.jumpTo({center:o},f)}panBy(o,f,v){return o=l.Point.convert(o).mult(-1),this.panTo(this.transform.center,l.extend({offset:o},f),v)}panTo(o,f,v){return this.easeTo(l.extend({center:o},f),v)}getZoom(){return this.transform.zoom}setZoom(o,f){return this.jumpTo({zoom:o},f),this}zoomTo(o,f,v){return this.easeTo(l.extend({zoom:o},f),v)}zoomIn(o,f){return this.zoomTo(this.getZoom()+1,o,f),this}zoomOut(o,f){return this.zoomTo(this.getZoom()-1,o,f),this}getBearing(){return this.transform.bearing}setBearing(o,f){return this.jumpTo({bearing:o},f),this}getPadding(){return this.transform.padding}setPadding(o,f){return this.jumpTo({padding:o},f),this}rotateTo(o,f,v){return this.easeTo(l.extend({bearing:o},f),v)}resetNorth(o,f){return this.rotateTo(0,l.extend({duration:1e3},o),f),this}resetNorthPitch(o,f){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},o),f),this}snapToNorth(o,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,f):this}getPitch(){return this.transform.pitch}setPitch(o,f){return this.jumpTo({pitch:o},f),this}cameraForBounds(o,f){o=Ke.convert(o);const v=f&&f.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),v,f)}_cameraForBoxAndBearing(o,f,v,b){const E={top:0,bottom:0,right:0,left:0};if(typeof(b=l.extend({padding:E,offset:[0,0],maxZoom:this.transform.maxZoom},b)).padding=="number"){const _t=b.padding;b.padding={top:_t,bottom:_t,right:_t,left:_t}}b.padding=l.extend(E,b.padding);const P=this.transform,R=P.padding,O=P.project(l.LngLat.convert(o)),N=P.project(l.LngLat.convert(f)),K=O.rotate(-v*Math.PI/180),Z=N.rotate(-v*Math.PI/180),le=new l.Point(Math.max(K.x,Z.x),Math.max(K.y,Z.y)),Se=new l.Point(Math.min(K.x,Z.x),Math.min(K.y,Z.y)),ve=le.sub(Se),xe=(P.width-(R.left+R.right+b.padding.left+b.padding.right))/ve.x,De=(P.height-(R.top+R.bottom+b.padding.top+b.padding.bottom))/ve.y;if(De<0||xe<0)return void l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ue=Math.min(P.scaleZoom(P.scale*Math.min(xe,De)),b.maxZoom),ot=l.Point.convert(b.offset),Me=new l.Point((b.padding.left-b.padding.right)/2,(b.padding.top-b.padding.bottom)/2).rotate(v*Math.PI/180),it=ot.add(Me).mult(P.scale/P.zoomScale(Ue));return{center:P.unproject(O.add(N).div(2).sub(it)),zoom:Ue,bearing:v}}fitBounds(o,f,v){return this._fitInternal(this.cameraForBounds(o,f),f,v)}fitScreenCoordinates(o,f,v,b,E){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.Point.convert(o)),this.transform.pointLocation(l.Point.convert(f)),v,b),b,E)}_fitInternal(o,f,v){return o?(delete(f=l.extend(o,f)).padding,f.linear?this.easeTo(f,v):this.flyTo(f,v)):this}jumpTo(o,f){this.stop();const v=this._getTransformForUpdate();let b=!1,E=!1,P=!1;return"zoom"in o&&v.zoom!==+o.zoom&&(b=!0,v.zoom=+o.zoom),o.center!==void 0&&(v.center=l.LngLat.convert(o.center)),"bearing"in o&&v.bearing!==+o.bearing&&(E=!0,v.bearing=+o.bearing),"pitch"in o&&v.pitch!==+o.pitch&&(P=!0,v.pitch=+o.pitch),o.padding==null||v.isPaddingEqual(o.padding)||(v.padding=o.padding),this._applyUpdatedTransform(v),this.fire(new l.Event("movestart",f)).fire(new l.Event("move",f)),b&&this.fire(new l.Event("zoomstart",f)).fire(new l.Event("zoom",f)).fire(new l.Event("zoomend",f)),E&&this.fire(new l.Event("rotatestart",f)).fire(new l.Event("rotate",f)).fire(new l.Event("rotateend",f)),P&&this.fire(new l.Event("pitchstart",f)).fire(new l.Event("pitch",f)).fire(new l.Event("pitchend",f)),this.fire(new l.Event("moveend",f))}calculateCameraOptionsFromTo(o,f,v,b=0){const E=l.MercatorCoordinate.fromLngLat(o,f),P=l.MercatorCoordinate.fromLngLat(v,b),R=P.x-E.x,O=P.y-E.y,N=P.z-E.z,K=Math.hypot(R,O,N);if(K===0)throw new Error("Can't calculate camera options with same From and To");const Z=Math.hypot(R,O),le=this.transform.scaleZoom(this.transform.cameraToCenterDistance/K/this.transform.tileSize),Se=180*Math.atan2(R,-O)/Math.PI;let ve=180*Math.acos(Z/K)/Math.PI;return ve=N<0?90-ve:90+ve,{center:P.toLngLat(),zoom:le,pitch:ve,bearing:Se}}easeTo(o,f){this._stop(!1,o.easeId),((o=l.extend({offset:[0,0],duration:500,easing:l.ease},o)).animate===!1||!o.essential&&l.exported.prefersReducedMotion)&&(o.duration=0);const v=this._getTransformForUpdate(),b=this.getZoom(),E=this.getBearing(),P=this.getPitch(),R=this.getPadding(),O="zoom"in o?+o.zoom:b,N="bearing"in o?this._normalizeBearing(o.bearing,E):E,K="pitch"in o?+o.pitch:P,Z="padding"in o?o.padding:v.padding,le=l.Point.convert(o.offset);let Se=v.centerPoint.add(le);const ve=v.pointLocation(Se),xe=l.LngLat.convert(o.center||ve);this._normalizeCenter(xe);const De=v.project(ve),Ue=v.project(xe).sub(De),ot=v.zoomScale(O-b);let Me,it;o.around&&(Me=l.LngLat.convert(o.around),it=v.locationPoint(Me));const _t={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||O!==b,this._rotating=this._rotating||E!==N,this._pitching=this._pitching||K!==P,this._padding=!v.isPaddingEqual(Z),this._easeId=o.easeId,this._prepareEase(f,o.noMoveStart,_t),this.terrain&&this._prepareElevation(xe),this._ease(At=>{if(this._zooming&&(v.zoom=l.interpolate.number(b,O,At)),this._rotating&&(v.bearing=l.interpolate.number(E,N,At)),this._pitching&&(v.pitch=l.interpolate.number(P,K,At)),this._padding&&(v.interpolatePadding(R,Z,At),Se=v.centerPoint.add(le)),this.terrain&&!o.freezeElevation&&this._updateElevation(At),Me)v.setLocationAtPoint(Me,it);else{const Rt=v.zoomScale(v.zoom-b),Bt=O>b?Math.min(2,ot):Math.max(.5,ot),Lt=Math.pow(Bt,1-At),nn=v.unproject(De.add(Ue.mult(At*Lt)).mult(Rt));v.setLocationAtPoint(v.renderWorldCopies?nn.wrap():nn,Se)}this._applyUpdatedTransform(v),this._fireMoveEvents(f)},At=>{this.terrain&&this._finalizeElevation(),this._afterEase(f,At)},o),this}_prepareEase(o,f,v={}){this._moving=!0,f||v.moving||this.fire(new l.Event("movestart",o)),this._zooming&&!v.zooming&&this.fire(new l.Event("zoomstart",o)),this._rotating&&!v.rotating&&this.fire(new l.Event("rotatestart",o)),this._pitching&&!v.pitching&&this.fire(new l.Event("pitchstart",o))}_prepareElevation(o){this._elevationCenter=o,this._elevationStart=this.transform.elevation,this._elevationTarget=this.transform.getElevation(o,this.terrain),this.transform.freezeElevation=!0}_updateElevation(o){const f=this.transform.getElevation(this._elevationCenter,this.terrain);if(o<1&&f!==this._elevationTarget){const v=this._elevationTarget-this._elevationStart;this._elevationStart+=o*(v-(f-(v*o+this._elevationStart))/(1-o)),this._elevationTarget=f}this.transform.elevation=l.interpolate.number(this._elevationStart,this._elevationTarget,o)}_finalizeElevation(){this.transform.freezeElevation=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(o){if(!this.transformCameraUpdate)return;const f=o.clone(),{center:v,zoom:b,pitch:E,bearing:P,elevation:R}=this.transformCameraUpdate(f);v&&(f.center=v),b!==void 0&&(f.zoom=b),E!==void 0&&(f.pitch=E),P!==void 0&&(f.bearing=P),R!==void 0&&(f.elevation=R),this.transform.apply(f)}_fireMoveEvents(o){this.fire(new l.Event("move",o)),this._zooming&&this.fire(new l.Event("zoom",o)),this._rotating&&this.fire(new l.Event("rotate",o)),this._pitching&&this.fire(new l.Event("pitch",o))}_afterEase(o,f){if(this._easeId&&f&&this._easeId===f)return;delete this._easeId;const v=this._zooming,b=this._rotating,E=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,v&&this.fire(new l.Event("zoomend",o)),b&&this.fire(new l.Event("rotateend",o)),E&&this.fire(new l.Event("pitchend",o)),this.fire(new l.Event("moveend",o))}flyTo(o,f){if(!o.essential&&l.exported.prefersReducedMotion){const on=l.pick(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(on,f)}this.stop(),o=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},o);const v=this._getTransformForUpdate(),b=this.getZoom(),E=this.getBearing(),P=this.getPitch(),R=this.getPadding(),O="zoom"in o?l.clamp(+o.zoom,v.minZoom,v.maxZoom):b,N="bearing"in o?this._normalizeBearing(o.bearing,E):E,K="pitch"in o?+o.pitch:P,Z="padding"in o?o.padding:v.padding,le=v.zoomScale(O-b),Se=l.Point.convert(o.offset);let ve=v.centerPoint.add(Se);const xe=v.pointLocation(ve),De=l.LngLat.convert(o.center||xe);this._normalizeCenter(De);const Ue=v.project(xe),ot=v.project(De).sub(Ue);let Me=o.curve;const it=Math.max(v.width,v.height),_t=it/le,At=ot.mag();if("minZoom"in o){const on=l.clamp(Math.min(o.minZoom,b,O),v.minZoom,v.maxZoom),di=it/v.zoomScale(on-b);Me=Math.sqrt(di/At*2)}const Rt=Me*Me;function Bt(on){const di=(_t*_t-it*it+(on?-1:1)*Rt*Rt*At*At)/(2*(on?_t:it)*Rt*At);return Math.log(Math.sqrt(di*di+1)-di)}function Lt(on){return(Math.exp(on)-Math.exp(-on))/2}function nn(on){return(Math.exp(on)+Math.exp(-on))/2}const Sn=Bt(0);let Bn=function(on){return nn(Sn)/nn(Sn+Me*on)},Zt=function(on){return it*((nn(Sn)*(Lt(di=Sn+Me*on)/nn(di))-Lt(Sn))/Rt)/At;var di},On=(Bt(1)-Sn)/Me;if(Math.abs(At)<1e-6||!isFinite(On)){if(Math.abs(it-_t)<1e-6)return this.easeTo(o,f);const on=_t<it?-1:1;On=Math.abs(Math.log(_t/it))/Me,Zt=function(){return 0},Bn=function(di){return Math.exp(on*Me*di)}}return o.duration="duration"in o?+o.duration:1e3*On/("screenSpeed"in o?+o.screenSpeed/Me:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=E!==N,this._pitching=K!==P,this._padding=!v.isPaddingEqual(Z),this._prepareEase(f,!1),this.terrain&&this._prepareElevation(De),this._ease(on=>{const di=on*On,tr=1/Bn(di);v.zoom=on===1?O:b+v.scaleZoom(tr),this._rotating&&(v.bearing=l.interpolate.number(E,N,on)),this._pitching&&(v.pitch=l.interpolate.number(P,K,on)),this._padding&&(v.interpolatePadding(R,Z,on),ve=v.centerPoint.add(Se)),this.terrain&&!o.freezeElevation&&this._updateElevation(on);const hi=on===1?De:v.unproject(Ue.add(ot.mult(Zt(di))).mult(tr));v.setLocationAtPoint(v.renderWorldCopies?hi.wrap():hi,ve),this._applyUpdatedTransform(v),this._fireMoveEvents(f)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(f)},o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(o,f){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const v=this._onEaseEnd;delete this._onEaseEnd,v.call(this,f)}if(!o){const v=this.handlers;v&&v.stop(!1)}return this}_ease(o,f,v){v.animate===!1||v.duration===0?(o(1),f()):(this._easeStart=l.exported.now(),this._easeOptions=v,this._onEaseFrame=o,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const o=Math.min((l.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(o,f){o=l.wrap(o,-180,180);const v=Math.abs(o-f);return Math.abs(o-360-f)<v&&(o-=360),Math.abs(o+360-f)<v&&(o+=360),o}_normalizeCenter(o){const f=this.transform;if(!f.renderWorldCopies||f.lngRange)return;const v=o.lng-f.center.lng;o.lng+=v>180?-360:v<-180?360:0}queryTerrainElevation(o){return this.terrain?this.transform.getElevation(l.LngLat.convert(o),this.terrain)-this.transform.elevation:null}}class Dn{constructor(o={}){this.options=o,l.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(o){return this._map=o,this._compact=this.options&&this.options.compact,this._container=g.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=g.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=g.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){g.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(o,f){const v=this._map._getUIString(`AttributionControl.${f}`);o.title=v,o.setAttribute("aria-label",v)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))}_updateData(o){!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"&&o.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(b=>typeof b!="string"?"":b)):typeof this.options.customAttribution=="string"&&o.push(this.options.customAttribution)),this._map.style.stylesheet){const b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}const f=this._map.style.sourceCaches;for(const b in f){const E=f[b];if(E.used||E.usedForTerrain){const P=E.getSource();P.attribution&&o.indexOf(P.attribution)<0&&o.push(P.attribution)}}o=o.filter(b=>String(b).trim()),o.sort((b,E)=>b.length-E.length),o=o.filter((b,E)=>{for(let P=E+1;P<o.length;P++)if(o[P].indexOf(b)>=0)return!1;return!0});const v=o.join(" | ");v!==this._attribHTML&&(this._attribHTML=v,o.length?(this._innerContainer.innerHTML=v,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")}}class jc{constructor(o={}){this.options=o,l.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(o){this._map=o,this._compact=this.options&&this.options.compact,this._container=g.create("div","maplibregl-ctrl");const f=g.create("a","maplibregl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://maplibre.org/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){g.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const o=this._container.children;if(o.length){const f=o[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}}}class of{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const f=++this._id;return this._queue.push({callback:o,id:f,cancelled:!1}),f}remove(o){const f=this._currentlyRunning,v=f?this._queue.concat(f):this._queue;for(const b of v)if(b.id===o)return void(b.cancelled=!0)}run(o=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const f=this._currentlyRunning=this._queue;this._queue=[];for(const v of f)if(!v.cancelled&&(v.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const lf={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Jr=l.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class sd extends l.Evented{constructor(o){super(),this.sourceCache=o,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,o.usedForTerrain=!0,o.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(o,f){this.sourceCache.update(o,f),this._renderableTilesKeys=[];const v={};for(const b of o.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:f}))v[b.key]=!0,this._renderableTilesKeys.push(b.key),this._tiles[b.key]||(b.posMatrix=new Float64Array(16),l.ortho(b.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),this._tiles[b.key]=new pt(b,this.tileSize));for(const b in this._tiles)v[b]||delete this._tiles[b]}freeRtt(o){for(const f in this._tiles){const v=this._tiles[f];(!o||v.tileID.equals(o)||v.tileID.isChildOf(o)||o.isChildOf(v.tileID))&&(v.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(o=>this.getTileByID(o))}getTileByID(o){return this._tiles[o]}getTerrainCoords(o){const f={};for(const v of this._renderableTilesKeys){const b=this._tiles[v].tileID;if(b.canonical.equals(o.canonical)){const E=o.clone();E.posMatrix=new Float64Array(16),l.ortho(E.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),f[v]=E}else if(b.canonical.isChildOf(o.canonical)){const E=o.clone();E.posMatrix=new Float64Array(16);const P=b.canonical.z-o.canonical.z,R=b.canonical.x-(b.canonical.x>>P<<P),O=b.canonical.y-(b.canonical.y>>P<<P),N=l.EXTENT>>P;l.ortho(E.posMatrix,0,N,0,N,0,1),l.translate(E.posMatrix,E.posMatrix,[-R*N,-O*N,0]),f[v]=E}else if(o.canonical.isChildOf(b.canonical)){const E=o.clone();E.posMatrix=new Float64Array(16);const P=o.canonical.z-b.canonical.z,R=o.canonical.x-(o.canonical.x>>P<<P),O=o.canonical.y-(o.canonical.y>>P<<P),N=l.EXTENT>>P;l.ortho(E.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),l.translate(E.posMatrix,E.posMatrix,[R*N,O*N,0]),l.scale(E.posMatrix,E.posMatrix,[1/2**P,1/2**P,0]),f[v]=E}}return f}getSourceTile(o,f){const v=this.sourceCache._source;let b=o.overscaledZ-this.deltaZoom;if(b>v.maxzoom&&(b=v.maxzoom),b<v.minzoom)return null;this._sourceTileCache[o.key]||(this._sourceTileCache[o.key]=o.scaledTo(b).key);let E=this.sourceCache.getTileByID(this._sourceTileCache[o.key]);if((!E||!E.dem)&&f)for(;b>=v.minzoom&&(!E||!E.dem);)E=this.sourceCache.getTileByID(o.scaledTo(b--).key);return E}tilesAfterTime(o=Date.now()){return Object.values(this._tiles).filter(f=>f.timeAdded>=o)}}class ha{constructor(o,f,v){this.painter=o,this.sourceCache=new sd(f),this.options=v,this.exaggeration=typeof v.exaggeration=="number"?v.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(o,f,v,b=l.EXTENT){if(!(f>=0&&f<b&&v>=0&&v<b))return 0;let E=0;const P=this.getTerrainData(o);if(P.tile&&P.tile.dem){const R=function(ve,xe,De){var Ue=xe[0],ot=xe[1];return ve[0]=De[0]*Ue+De[4]*ot+De[12],ve[1]=De[1]*Ue+De[5]*ot+De[13],ve}([],[f/b*l.EXTENT,v/b*l.EXTENT],P.u_terrain_matrix),O=[R[0]*P.tile.dem.dim,R[1]*P.tile.dem.dim],N=[Math.floor(O[0]),Math.floor(O[1])],K=P.tile.dem.get(N[0],N[1]),Z=P.tile.dem.get(N[0],N[1]+1),le=P.tile.dem.get(N[0]+1,N[1]),Se=P.tile.dem.get(N[0]+1,N[1]+1);E=l.interpolate.number(l.interpolate.number(K,Z,O[0]-N[0]),l.interpolate.number(le,Se,O[0]-N[0]),O[1]-N[1])}return E}getElevation(o,f,v,b=l.EXTENT){return this.getDEMElevation(o,f,v,b)*this.exaggeration}getTerrainData(o){if(!this._emptyDemTexture){const b=this.painter.context,E=new l.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new B(b,E,b.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new B(b,new l.RGBAImage({width:1,height:1}),b.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.identity([])}const f=this.sourceCache.getSourceTile(o,!0);if(f&&f.dem&&(!f.demTexture||f.needsTerrainPrepare)){const b=this.painter.context;f.demTexture=this.painter.getTileTexture(f.dem.stride),f.demTexture?f.demTexture.update(f.dem.getPixels(),{premultiply:!1}):f.demTexture=new B(b,f.dem.getPixels(),b.gl.RGBA,{premultiply:!1}),f.demTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),f.needsTerrainPrepare=!1}const v=f&&f+f.tileID.key+o.key;if(v&&!this._demMatrixCache[v]){const b=this.sourceCache.sourceCache._source.maxzoom;let E=o.canonical.z-f.tileID.canonical.z;o.overscaledZ>o.canonical.z&&(o.canonical.z>=b?E=o.canonical.z-b:l.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const P=o.canonical.x-(o.canonical.x>>E<<E),R=o.canonical.y-(o.canonical.y>>E<<E),O=l.fromScaling(new Float64Array(16),[1/(l.EXTENT<<E),1/(l.EXTENT<<E),0]);l.translate(O,O,[P*l.EXTENT,R*l.EXTENT,0]),this._demMatrixCache[o.key]={matrix:O,coord:o}}return{u_depth:2,u_terrain:3,u_terrain_dim:f&&f.dem&&f.dem.dim||1,u_terrain_matrix:v?this._demMatrixCache[o.key].matrix:this._emptyDemMatrix,u_terrain_unpack:f&&f.dem&&f.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(f&&f.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:f}}getFramebuffer(o){const f=this.painter,v=f.width/devicePixelRatio,b=f.height/devicePixelRatio;return!this._fbo||this._fbo.width===v&&this._fbo.height===b||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new B(f.context,{width:v,height:b,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new B(f.context,{width:v,height:b,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=f.context.createFramebuffer(v,b,!0,!1),this._fbo.depthAttachment.set(f.context.createRenderbuffer(f.context.gl.DEPTH_COMPONENT16,v,b))),this._fbo.colorAttachment.set(o==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const o=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const f=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let E=0,P=0;E<this._coordsTextureSize;E++)for(let R=0;R<this._coordsTextureSize;R++,P+=4)f[P+0]=255&R,f[P+1]=255&E,f[P+2]=R>>8<<4|E>>8,f[P+3]=0;const v=new l.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(f.buffer)),b=new B(o,v,o.gl.RGBA,{premultiply:!1});return b.bind(o.gl.NEAREST,o.gl.CLAMP_TO_EDGE),this._coordsTexture=b,b}pointCoordinate(o){const f=new Uint8Array(4),v=this.painter.context,b=v.gl;v.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),b.readPixels(o.x,this.painter.height/devicePixelRatio-o.y-1,1,1,b.RGBA,b.UNSIGNED_BYTE,f),v.bindFramebuffer.set(null);const E=f[0]+(f[2]>>4<<8),P=f[1]+((15&f[2])<<8),R=this.coordsIndex[255-f[3]],O=R&&this.sourceCache.getTileByID(R);if(!O)return null;const N=this._coordsTextureSize,K=(1<<O.tileID.canonical.z)*N;return new l.MercatorCoordinate((O.tileID.canonical.x*N+E)/K,(O.tileID.canonical.y*N+P)/K,this.getElevation(O.tileID,E,P,N))}getTerrainMesh(){if(this._mesh)return this._mesh;const o=this.painter.context,f=new l.Pos3dArray,v=new l.TriangleIndexArray,b=this.meshSize,E=l.EXTENT/b,P=b*b;for(let Z=0;Z<=b;Z++)for(let le=0;le<=b;le++)f.emplaceBack(le*E,Z*E,0);for(let Z=0;Z<P;Z+=b+1)for(let le=0;le<b;le++)v.emplaceBack(le+Z,b+le+Z+1,b+le+Z+2),v.emplaceBack(le+Z,b+le+Z+2,le+Z+1);const R=f.length,O=R+2*(b+1);for(const Z of[0,1])for(let le=0;le<=b;le++)for(const Se of[0,1])f.emplaceBack(le*E,Z*l.EXTENT,Se);for(let Z=0;Z<2*b;Z+=2)v.emplaceBack(O+Z,O+Z+1,O+Z+3),v.emplaceBack(O+Z,O+Z+3,O+Z+2),v.emplaceBack(R+Z,R+Z+3,R+Z+1),v.emplaceBack(R+Z,R+Z+2,R+Z+3);const N=f.length,K=N+2*(b+1);for(const Z of[0,1])for(let le=0;le<=b;le++)for(const Se of[0,1])f.emplaceBack(Z*l.EXTENT,le*E,Se);for(let Z=0;Z<2*b;Z+=2)v.emplaceBack(N+Z,N+Z+1,N+Z+3),v.emplaceBack(N+Z,N+Z+3,N+Z+2),v.emplaceBack(K+Z,K+Z+3,K+Z+1),v.emplaceBack(K+Z,K+Z+2,K+Z+3);return this._mesh={indexBuffer:o.createIndexBuffer(v),vertexBuffer:o.createVertexBuffer(f,Jr.members),segments:l.SegmentVector.simpleSegment(0,0,f.length,v.length)},this._mesh}getMeshFrameDelta(o){return 2*Math.PI*l.earthRadius/Math.pow(2,o)/5}getMinMaxElevation(o){const f=this.getTerrainData(o).tile,v={minElevation:null,maxElevation:null};return f&&f.dem&&(v.minElevation=f.dem.min*this.exaggeration,v.maxElevation=f.dem.max*this.exaggeration),v}}class yy{constructor(o,f,v){this._context=o,this._size=f,this._tileSize=v,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const o of this._objects)o.texture.destroy(),o.fbo.destroy()}_createObject(o){const f=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),v=new B(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return v.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),f.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),f.colorAttachment.set(v.texture),{id:o,fbo:f,texture:v,stamp:-1,inUse:!1}}getObjectForId(o){return this._objects[o]}useObject(o){o.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(f=>o.id!==f),this._recentlyUsed.push(o.id)}stampObject(o){o.stamp=++this._stamp}getOrCreateFreeObject(){for(const f of this._recentlyUsed)if(!this._objects[f].inUse)return this._objects[f];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const o=this._createObject(this._objects.length);return this._objects.push(o),o}freeObject(o){o.inUse=!1}freeAllObjects(){for(const o of this._objects)this.freeObject(o)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(o=>!o.inUse)===!1}}const Oa={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Zi{constructor(o,f){this.painter=o,this.terrain=f,this.pool=new yy(o.context,30,f.sourceCache.tileSize*f.qualityFactor)}destruct(){this.pool.destruct()}getTexture(o){return this.pool.getObjectForId(o.rtt[this._stacks.length-1].id).texture}prepareForRender(o,f){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=o._order.filter(v=>!o._layers[v].isHidden(f)),this._coordsDescendingInv={};for(const v in o.sourceCaches){this._coordsDescendingInv[v]={};const b=o.sourceCaches[v].getVisibleCoordinates();for(const E of b){const P=this.terrain.sourceCache.getTerrainCoords(E);for(const R in P)this._coordsDescendingInv[v][R]||(this._coordsDescendingInv[v][R]=[]),this._coordsDescendingInv[v][R].push(P[R])}}this._coordsDescendingInvStr={};for(const v of o._order){const b=o._layers[v],E=b.source;if(Oa[b.type]&&!this._coordsDescendingInvStr[E]){this._coordsDescendingInvStr[E]={};for(const P in this._coordsDescendingInv[E])this._coordsDescendingInvStr[E][P]=this._coordsDescendingInv[E][P].map(R=>R.key).sort().join()}}for(const v of this._renderableTiles)for(const b in this._coordsDescendingInvStr){const E=this._coordsDescendingInvStr[b][v.tileID.key];E&&E!==v.rttCoords[b]&&(v.rtt=[])}}renderLayer(o){if(o.isHidden(this.painter.transform.zoom))return!1;const f=o.type,v=this.painter,b=this._renderableLayerIds[this._renderableLayerIds.length-1]===o.id;if(Oa[f]&&(this._prevType&&Oa[this._prevType]||this._stacks.push([]),this._prevType=f,this._stacks[this._stacks.length-1].push(o.id),!b))return!0;if(Oa[this._prevType]||Oa[f]&&b){this._prevType=f;const E=this._stacks.length-1,P=this._stacks[E]||[];for(const R of this._renderableTiles){if(this.pool.isFull()&&(Yh(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(R),R.rtt[E]){const N=this.pool.getObjectForId(R.rtt[E].id);if(N.stamp===R.rtt[E].stamp){this.pool.useObject(N);continue}}const O=this.pool.getOrCreateFreeObject();this.pool.useObject(O),this.pool.stampObject(O),R.rtt[E]={id:O.id,stamp:O.stamp},v.context.bindFramebuffer.set(O.fbo.framebuffer),v.context.clear({color:l.Color.transparent,stencil:0}),v.currentStencilSource=void 0;for(let N=0;N<P.length;N++){const K=v.style._layers[P[N]],Z=K.source?this._coordsDescendingInv[K.source][R.tileID.key]:[R.tileID];v.context.viewport.set([0,0,O.fbo.width,O.fbo.height]),v._renderTileClippingMasks(K,Z),v.renderLayer(v,v.style.sourceCaches[K.source],K,Z),K.source&&(R.rttCoords[K.source]=this._coordsDescendingInvStr[K.source][R.tileID.key])}}return Yh(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Oa[f]}return!1}}const ar=m,eg={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0},Ml=_=>{_.touchstart=_.dragStart,_.touchmoveWindow=_.dragMove,_.touchend=_.dragEnd},ad={showCompass:!0,showZoom:!0,visualizePitch:!1};class cf{constructor(o,f,v=!1){this._clickTolerance=10;const b=o.dragRotate._mouseRotate.getClickTolerance(),E=o.dragRotate._mousePitch.getClickTolerance();this.element=f,this.mouseRotate=qm({clickTolerance:b,enable:!0}),this.touchRotate=(({enable:P,clickTolerance:R,bearingDegreesPerPixelMoved:O=.8})=>{const N=new Yu;return new La({clickTolerance:R,move:(K,Z)=>({bearingDelta:(Z.x-K.x)*O}),moveStateManager:N,enable:P,assignEvents:Ml})})({clickTolerance:b,enable:!0}),this.map=o,v&&(this.mousePitch=Ju({clickTolerance:E,enable:!0}),this.touchPitch=(({enable:P,clickTolerance:R,pitchDegreesPerPixelMoved:O=-.5})=>{const N=new Yu;return new La({clickTolerance:R,move:(K,Z)=>({pitchDelta:(Z.y-K.y)*O}),moveStateManager:N,enable:P,assignEvents:Ml})})({clickTolerance:E,enable:!0})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),g.addEventListener(f,"mousedown",this.mousedown),g.addEventListener(f,"touchstart",this.touchstart,{passive:!1}),g.addEventListener(f,"touchcancel",this.reset)}startMouse(o,f){this.mouseRotate.dragStart(o,f),this.mousePitch&&this.mousePitch.dragStart(o,f),g.disableDrag()}startTouch(o,f){this.touchRotate.dragStart(o,f),this.touchPitch&&this.touchPitch.dragStart(o,f),g.disableDrag()}moveMouse(o,f){const v=this.map,{bearingDelta:b}=this.mouseRotate.dragMove(o,f)||{};if(b&&v.setBearing(v.getBearing()+b),this.mousePitch){const{pitchDelta:E}=this.mousePitch.dragMove(o,f)||{};E&&v.setPitch(v.getPitch()+E)}}moveTouch(o,f){const v=this.map,{bearingDelta:b}=this.touchRotate.dragMove(o,f)||{};if(b&&v.setBearing(v.getBearing()+b),this.touchPitch){const{pitchDelta:E}=this.touchPitch.dragMove(o,f)||{};E&&v.setPitch(v.getPitch()+E)}}off(){const o=this.element;g.removeEventListener(o,"mousedown",this.mousedown),g.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),g.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.removeEventListener(window,"touchend",this.touchend),g.removeEventListener(o,"touchcancel",this.reset),this.offTemp()}offTemp(){g.enableDrag(),g.removeEventListener(window,"mousemove",this.mousemove),g.removeEventListener(window,"mouseup",this.mouseup),g.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.removeEventListener(window,"touchend",this.touchend)}mousedown(o){this.startMouse(l.extend({},o,{ctrlKey:!0,preventDefault:()=>o.preventDefault()}),g.mousePos(this.element,o)),g.addEventListener(window,"mousemove",this.mousemove),g.addEventListener(window,"mouseup",this.mouseup)}mousemove(o){this.moveMouse(o,g.mousePos(this.element,o))}mouseup(o){this.mouseRotate.dragEnd(o),this.mousePitch&&this.mousePitch.dragEnd(o),this.offTemp()}touchstart(o){o.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=g.touchPos(this.element,o.targetTouches)[0],this.startTouch(o,this._startPos),g.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.addEventListener(window,"touchend",this.touchend))}touchmove(o){o.targetTouches.length!==1?this.reset():(this._lastPos=g.touchPos(this.element,o.targetTouches)[0],this.moveTouch(o,this._lastPos))}touchend(o){o.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}let fa;function od(_,o,f){if(_=new l.LngLat(_.lng,_.lat),o){const v=new l.LngLat(_.lng-360,_.lat),b=new l.LngLat(_.lng+360,_.lat),E=f.locationPoint(_).distSqr(o);f.locationPoint(v).distSqr(o)<E?_=v:f.locationPoint(b).distSqr(o)<E&&(_=b)}for(;Math.abs(_.lng-f.center.lng)>180;){const v=f.locationPoint(_);if(v.x>=0&&v.y>=0&&v.x<=f.width&&v.y<=f.height)break;_.lng>f.center.lng?_.lng-=360:_.lng+=360}return _}const Wo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ld(_,o,f){const v=_.classList;for(const b in Wo)v.remove(`maplibregl-${f}-anchor-${b}`);v.add(`maplibregl-${f}-anchor-${o}`)}class Uc extends l.Evented{constructor(o,f){if(super(),(o instanceof HTMLElement||f)&&(o=l.extend({element:o},f)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,o&&o.element)this._element=o.element,this._offset=l.Point.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=g.create("div"),this._element.setAttribute("aria-label","Map marker");const v=g.createNS("http://www.w3.org/2000/svg","svg"),b=41,E=27;v.setAttributeNS(null,"display","block"),v.setAttributeNS(null,"height",`${b}px`),v.setAttributeNS(null,"width",`${E}px`),v.setAttributeNS(null,"viewBox",`0 0 ${E} ${b}`);const P=g.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"stroke","none"),P.setAttributeNS(null,"stroke-width","1"),P.setAttributeNS(null,"fill","none"),P.setAttributeNS(null,"fill-rule","evenodd");const R=g.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"fill-rule","nonzero");const O=g.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"transform","translate(3.0, 29.0)"),O.setAttributeNS(null,"fill","#000000");const N=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ot of N){const Me=g.createNS("http://www.w3.org/2000/svg","ellipse");Me.setAttributeNS(null,"opacity","0.04"),Me.setAttributeNS(null,"cx","10.5"),Me.setAttributeNS(null,"cy","5.80029008"),Me.setAttributeNS(null,"rx",ot.rx),Me.setAttributeNS(null,"ry",ot.ry),O.appendChild(Me)}const K=g.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"fill",this._color);const Z=g.createNS("http://www.w3.org/2000/svg","path");Z.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),K.appendChild(Z);const le=g.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"opacity","0.25"),le.setAttributeNS(null,"fill","#000000");const Se=g.createNS("http://www.w3.org/2000/svg","path");Se.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),le.appendChild(Se);const ve=g.createNS("http://www.w3.org/2000/svg","g");ve.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ve.setAttributeNS(null,"fill","#FFFFFF");const xe=g.createNS("http://www.w3.org/2000/svg","g");xe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const De=g.createNS("http://www.w3.org/2000/svg","circle");De.setAttributeNS(null,"fill","#000000"),De.setAttributeNS(null,"opacity","0.25"),De.setAttributeNS(null,"cx","5.5"),De.setAttributeNS(null,"cy","5.5"),De.setAttributeNS(null,"r","5.4999962");const Ue=g.createNS("http://www.w3.org/2000/svg","circle");Ue.setAttributeNS(null,"fill","#FFFFFF"),Ue.setAttributeNS(null,"cx","5.5"),Ue.setAttributeNS(null,"cy","5.5"),Ue.setAttributeNS(null,"r","5.4999962"),xe.appendChild(De),xe.appendChild(Ue),R.appendChild(O),R.appendChild(K),R.appendChild(le),R.appendChild(ve),R.appendChild(xe),v.appendChild(R),v.setAttributeNS(null,"height",b*this._scale+"px"),v.setAttributeNS(null,"width",E*this._scale+"px"),this._element.appendChild(v),this._offset=l.Point.convert(o&&o.offset||[0,-14])}this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",v=>{v.preventDefault()}),this._element.addEventListener("mousedown",v=>{v.preventDefault()}),ld(this._element,this._anchor,"marker"),this._popup=null}addTo(o){return this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),g.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=l.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const b=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[b,-1*(38.1-13.5+b)],"bottom-right":[-b,-1*(38.1-13.5+b)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(o){const f=o.code,v=o.charCode||o.keyCode;f!=="Space"&&f!=="Enter"&&v!==32&&v!==13||this.togglePopup()}_onMapClick(o){const f=o.originalEvent.target,v=this._element;this._popup&&(f===v||v.contains(f))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const o=this._popup;return o?(o.isOpen()?o.remove():o.addTo(this._map),this):this}_update(o){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=od(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let f="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?f=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(f=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let v="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?v="rotateX(0deg)":this._pitchAlignment==="map"&&(v=`rotateX(${this._map.getPitch()}deg)`),o&&o.type!=="moveend"||(this._pos=this._pos.round()),g.setTransform(this._element,`${Wo[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${v} ${f}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const b=this._map.unproject(this._pos),E=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=b.distanceTo(this._lngLat)>20*E?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(o){return this._offset=l.Point.convert(o),this._update(),this}_onMove(o){if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"}_addDragHandler(o){this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const uf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let kl=0,qo=!1;const df={maxWidth:100,unit:"metric"};function cd(_,o,f){const v=f&&f.maxWidth||100,b=_._container.clientHeight/2,E=_.unproject([0,b]),P=_.unproject([v,b]),R=E.distanceTo(P);if(f&&f.unit==="imperial"){const O=3.2808*R;O>5280?Zo(o,v,O/5280,_._getUIString("ScaleControl.Miles")):Zo(o,v,O,_._getUIString("ScaleControl.Feet"))}else f&&f.unit==="nautical"?Zo(o,v,R/1852,_._getUIString("ScaleControl.NauticalMiles")):R>=1e3?Zo(o,v,R/1e3,_._getUIString("ScaleControl.Kilometers")):Zo(o,v,R,_._getUIString("ScaleControl.Meters"))}function Zo(_,o,f,v){const b=function(E){const P=Math.pow(10,`${Math.floor(E)}`.length-1);let R=E/P;return R=R>=10?10:R>=5?5:R>=3?3:R>=2?2:R>=1?1:function(O){const N=Math.pow(10,Math.ceil(-Math.log(O)/Math.LN10));return Math.round(O*N)/N}(R),P*R}(f);_.style.width=o*(b/f)+"px",_.innerHTML=`${b}&nbsp;${v}`}const ud={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},hf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function dd(_){if(_){if(typeof _=="number"){const o=Math.round(Math.sqrt(.5*Math.pow(_,2)));return{center:new l.Point(0,0),top:new l.Point(0,_),"top-left":new l.Point(o,o),"top-right":new l.Point(-o,o),bottom:new l.Point(0,-_),"bottom-left":new l.Point(o,-o),"bottom-right":new l.Point(-o,-o),left:new l.Point(_,0),right:new l.Point(-_,0)}}if(_ instanceof l.Point||Array.isArray(_)){const o=l.Point.convert(_);return{center:o,top:o,"top-left":o,"top-right":o,bottom:o,"bottom-left":o,"bottom-right":o,left:o,right:o}}return{center:l.Point.convert(_.center||[0,0]),top:l.Point.convert(_.top||[0,0]),"top-left":l.Point.convert(_["top-left"]||[0,0]),"top-right":l.Point.convert(_["top-right"]||[0,0]),bottom:l.Point.convert(_.bottom||[0,0]),"bottom-left":l.Point.convert(_["bottom-left"]||[0,0]),"bottom-right":l.Point.convert(_["bottom-right"]||[0,0]),left:l.Point.convert(_.left||[0,0]),right:l.Point.convert(_.right||[0,0])}}return dd(new l.Point(0,0))}const hd=m,fd={setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:class extends bn{constructor(_){var o;if(l.PerformanceUtils.mark(l.PerformanceMarkers.create),(_=l.extend({},eg,_)).minZoom!=null&&_.maxZoom!=null&&_.minZoom>_.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(_.minPitch!=null&&_.maxPitch!=null&&_.minPitch>_.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(_.minPitch!=null&&_.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(_.maxPitch!=null&&_.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ku(_.minZoom,_.maxZoom,_.minPitch,_.maxPitch,_.renderWorldCopies),{bearingSnap:_.bearingSnap}),this._interactive=_.interactive,this._cooperativeGestures=_.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=_.maxTileCacheSize,this._failIfMajorPerformanceCaveat=_.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=_.preserveDrawingBuffer,this._antialias=_.antialias,this._trackResize=_.trackResize,this._bearingSnap=_.bearingSnap,this._refreshExpiredTiles=_.refreshExpiredTiles,this._fadeDuration=_.fadeDuration,this._crossSourceCollisions=_.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=_.collectResourceTiming,this._renderTaskQueue=new of,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},lf,_.locale),this._clickTolerance=_.clickTolerance,this._pixelRatio=(o=_.pixelRatio)!==null&&o!==void 0?o:devicePixelRatio,this.transformCameraUpdate=_.transformCameraUpdate,this._imageQueueHandle=z.addThrottleControl(()=>this.isMoving()),this._requestManager=new ee(_.transformRequest),typeof _.container=="string"){if(this._container=document.getElementById(_.container),!this._container)throw new Error(`Container '${_.container}' not found.`)}else{if(!(_.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_.container}if(_.maxBounds&&this.setMaxBounds(_.maxBounds),l.bindAll(["_onWindowOnline","_onMapScroll","_cooperativeGesturesOnWheel","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let f=!1;this._resizeObserver=new ResizeObserver(v=>{f?this._trackResize&&this.resize(v)._update():f=!0}),this._resizeObserver.observe(this._container)}this.handlers=new da(this,_),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=_.hash&&new Um(typeof _.hash=="string"&&_.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch}),_.bounds&&(this.resize(),this.fitBounds(_.bounds,l.extend({},_.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=_.localIdeographFontFamily,this._validateStyle=_.validateStyle,_.style&&this.setStyle(_.style,{localIdeographFontFamily:_.localIdeographFontFamily}),_.attributionControl&&this.addControl(new Dn({customAttribution:_.customAttribution})),_.maplibreLogo&&this.addControl(new jc,_.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",f=>{this._update(f.dataType==="style"),this.fire(new l.Event(`${f.dataType}data`,f))}),this.on("dataloading",f=>{this.fire(new l.Event(`${f.dataType}dataloading`,f))}),this.on("dataabort",f=>{this.fire(new l.Event("sourcedataabort",f))})}_getMapId(){return this._mapId}addControl(_,o){if(o===void 0&&(o=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=_.onAdd(this);this._controls.push(_);const v=this._controlPositions[o];return o.indexOf("bottom")!==-1?v.insertBefore(f,v.firstChild):v.appendChild(f),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(_);return o>-1&&this._controls.splice(o,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}calculateCameraOptionsFromTo(_,o,f,v){return v==null&&this.terrain&&(v=this.transform.getElevation(f,this.terrain)),super.calculateCameraOptionsFromTo(_,o,f,v)}resize(_){var o;const f=this._containerDimensions(),v=f[0],b=f[1];this._resizeCanvas(v,b,this.getPixelRatio()),this.transform.resize(v,b),(o=this._requestedCameraState)===null||o===void 0||o.resize(v,b),this.painter.resize(v,b,this.getPixelRatio());const E=!this._moving;return E&&(this.stop(),this.fire(new l.Event("movestart",_)).fire(new l.Event("move",_))),this.fire(new l.Event("resize",_)),E&&this.fire(new l.Event("moveend",_)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(_){const[o,f]=this._containerDimensions();this._pixelRatio=_,this._resizeCanvas(o,f,_),this.painter.resize(o,f,_)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(Ke.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(_){return this._cooperativeGestures=_,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(_){return this.transform.locationPoint(l.LngLat.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.pointLocation(l.Point.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,o,f){if(_==="mouseenter"||_==="mouseover"){let v=!1;return{layer:o,listener:f,delegates:{mousemove:E=>{const P=this.getLayer(o)?this.queryRenderedFeatures(E.point,{layers:[o]}):[];P.length?v||(v=!0,f.call(this,new sr(_,this,E.originalEvent,{features:P}))):v=!1},mouseout:()=>{v=!1}}}}if(_==="mouseleave"||_==="mouseout"){let v=!1;return{layer:o,listener:f,delegates:{mousemove:P=>{(this.getLayer(o)?this.queryRenderedFeatures(P.point,{layers:[o]}):[]).length?v=!0:v&&(v=!1,f.call(this,new sr(_,this,P.originalEvent)))},mouseout:P=>{v&&(v=!1,f.call(this,new sr(_,this,P.originalEvent)))}}}}{const v=b=>{const E=this.getLayer(o)?this.queryRenderedFeatures(b.point,{layers:[o]}):[];E.length&&(b.features=E,f.call(this,b),delete b.features)};return{layer:o,listener:f,delegates:{[_]:v}}}}on(_,o,f){if(f===void 0)return super.on(_,o);const v=this._createDelegatedListener(_,o,f);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(v);for(const b in v.delegates)this.on(b,v.delegates[b]);return this}once(_,o,f){if(f===void 0)return super.once(_,o);const v=this._createDelegatedListener(_,o,f);for(const b in v.delegates)this.once(b,v.delegates[b]);return this}off(_,o,f){return f===void 0?super.off(_,o):(this._delegatedListeners&&this._delegatedListeners[_]&&(v=>{const b=this._delegatedListeners[_];for(let E=0;E<b.length;E++){const P=b[E];if(P.layer===o&&P.listener===f){for(const R in P.delegates)this.off(R,P.delegates[R]);return b.splice(E,1),this}}})(),this)}queryRenderedFeatures(_,o){if(!this.style)return[];let f;const v=_ instanceof l.Point||Array.isArray(_),b=v?_:[[0,0],[this.transform.width,this.transform.height]];if(o=o||(v?{}:_)||{},b instanceof l.Point||typeof b[0]=="number")f=[l.Point.convert(b)];else{const E=l.Point.convert(b[0]),P=l.Point.convert(b[1]);f=[E,new l.Point(P.x,E.y),P,new l.Point(E.x,P.y),E]}return this.style.queryRenderedFeatures(f,o,this.transform)}querySourceFeatures(_,o){return this.style.querySourceFeatures(_,o)}setStyle(_,o){return(o=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},o)).diff!==!1&&o.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,o),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._updateStyle(_,o))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){const o=this._locale[_];if(o==null)throw new Error(`Missing UI string '${_}'`);return o}_updateStyle(_,o){if(o.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(_,o));const f=this.style&&o.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new Bs(this,o||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,o,f):this.style.loadJSON(_,o,f),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Bs(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,o){if(typeof _=="string"){const f=this._requestManager.transformRequest(_,F.Style);l.getJSON(f,(v,b)=>{v?this.fire(new l.ErrorEvent(v)):b&&this._updateDiff(b,o)})}else typeof _=="object"&&this._updateDiff(_,o)}_updateDiff(_,o){try{this.style.setState(_,o)&&this._update(!0)}catch(f){l.warnOnce(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(_,o)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")}addSource(_,o){return this._lazyInitEmptyStyle(),this.style.addSource(_,o),this._update(!0)}isSourceLoaded(_){const o=this.style&&this.style.sourceCaches[_];if(o!==void 0)return o.loaded();this.fire(new l.ErrorEvent(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){const o=this.style.sourceCaches[_.source];if(!o)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);for(const f in this.style._layers){const v=this.style._layers[f];v.type==="hillshade"&&v.source===_.source&&l.warnOnce("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ha(this.painter,o,_),this.painter.renderToTexture=new Zi(this.painter,this.terrain),this.transform.updateElevation(this.terrain),this._terrainDataCallback=f=>{f.dataType==="style"?this.terrain.sourceCache.freeRtt():f.dataType==="source"&&f.tile&&(f.sourceId===_.source&&this.transform.updateElevation(this.terrain),this.terrain.sourceCache.freeRtt(f.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.updateElevation(this.terrain);return this.fire(new l.Event("terrain",{terrain:_})),this}getTerrain(){return this.terrain&&this.terrain.options}areTilesLoaded(){const _=this.style&&this.style.sourceCaches;for(const o in _){const f=_[o]._tiles;for(const v in f){const b=f[v];if(b.state!=="loaded"&&b.state!=="errored")return!1}}return!0}addSourceType(_,o,f){return this._lazyInitEmptyStyle(),this.style.addSourceType(_,o,f)}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,o,{pixelRatio:f=1,sdf:v=!1,stretchX:b,stretchY:E,content:P}={}){if(this._lazyInitEmptyStyle(),o instanceof HTMLImageElement||l.isImageBitmap(o)){const{width:R,height:O,data:N}=l.exported.getImageData(o);this.style.addImage(_,{data:new l.RGBAImage({width:R,height:O},N),pixelRatio:f,stretchX:b,stretchY:E,content:P,sdf:v,version:0})}else{if(o.width===void 0||o.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:R,height:O,data:N}=o,K=o;this.style.addImage(_,{data:new l.RGBAImage({width:R,height:O},new Uint8Array(N)),pixelRatio:f,stretchX:b,stretchY:E,content:P,sdf:v,version:0,userImage:K}),K.onAdd&&K.onAdd(this,_)}}}updateImage(_,o){const f=this.style.getImage(_);if(!f)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const v=o instanceof HTMLImageElement||l.isImageBitmap(o)?l.exported.getImageData(o):o,{width:b,height:E,data:P}=v;if(b===void 0||E===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(b!==f.data.width||E!==f.data.height)return this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const R=!(o instanceof HTMLImageElement||l.isImageBitmap(o));f.data.replace(P,R),this.style.updateImage(_,f)}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_,o){z.getImage(this._requestManager.transformRequest(_,F.Image),o)}listImages(){return this.style.listImages()}addLayer(_,o){return this._lazyInitEmptyStyle(),this.style.addLayer(_,o),this._update(!0)}moveLayer(_,o){return this.style.moveLayer(_,o),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}setLayerZoomRange(_,o,f){return this.style.setLayerZoomRange(_,o,f),this._update(!0)}setFilter(_,o,f={}){return this.style.setFilter(_,o,f),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,o,f,v={}){return this.style.setPaintProperty(_,o,f,v),this._update(!0)}getPaintProperty(_,o){return this.style.getPaintProperty(_,o)}setLayoutProperty(_,o,f,v={}){return this.style.setLayoutProperty(_,o,f,v),this._update(!0)}getLayoutProperty(_,o){return this.style.getLayoutProperty(_,o)}setGlyphs(_,o={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,o),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,o,f={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,o,f,v=>{v||this._update(!0)}),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,o={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,o,f=>{f||this._update(!0)}),this}setLight(_,o={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,o),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(_,o){return this.style.setFeatureState(_,o),this._update()}removeFeatureState(_,o){return this.style.removeFeatureState(_,o),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,o=0;return this._container&&(_=this._container.clientWidth||400,o=this._container.clientHeight||300),[_,o]}_setupContainer(){const _=this._container;_.classList.add("maplibregl-map");const o=this._canvasContainer=g.create("div","maplibregl-canvas-container",_);this._interactive&&o.classList.add("maplibregl-interactive"),this._canvas=g.create("canvas","maplibregl-canvas",o),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const f=this._containerDimensions();this._resizeCanvas(f[0],f[1],this.getPixelRatio());const v=this._controlContainer=g.create("div","maplibregl-control-container",_),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(E=>{b[E]=g.create("div",`maplibregl-ctrl-${E} `,v)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_cooperativeGesturesOnWheel(_){this._onCooperativeGesture(_,_[this._metaKey],1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=g.create("div","maplibregl-cooperative-gesture-screen",this._container);let _=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(_=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${_}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){g.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(_,o,f){this._canvas.width=f*_,this._canvas.height=f*o,this._canvas.style.width=`${_}px`,this._canvas.style.height=`${o}px`}_setupPainter(){const _={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let o=null;this._canvas.addEventListener("webglcontextcreationerror",v=>{o={requestedAttributes:_},v&&(o.statusMessage=v.statusMessage,o.type=v.type)},{once:!0});const f=this._canvas.getContext("webgl2",_);if(!f){const v="Failed to initialize WebGL";throw o?(o.message=v,new Error(JSON.stringify(o))):new Error(v)}this.painter=new jm(f,this.transform),x.testSupport(f)}_contextLost(_){_.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:_}))}_contextRestored(_){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:_}))}_onMapScroll(_){if(_.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(_,o,f){return!o&&f<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){const o=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let f=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const b=this.transform.zoom,E=l.exported.now();this.style.zoomHistory.update(b,E);const P=new l.EvaluationParameters(b,{now:E,fadeDuration:o,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),R=P.crossFadingFactor();R===1&&R===this._crossFadingFactor||(f=!0,this._crossFadingFactor=R),this.style.update(P)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain&&this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.updateElevation(this.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,o,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:o,showPadding:this.showPadding}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.load),this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||f)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const v=this._sourcesDirty||this._styleDirty||this._placementDirty;return v||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.Event("idle")),!this._loaded||this._fullyLoaded||v||(this._fullyLoaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(const f of this._controls)f.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),z.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();const o=this.painter.context.gl.getExtension("WEBGL_lose_context");o&&o.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),g.remove(this._canvasContainer),g.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),l.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new l.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.exported.frame(_=>{l.PerformanceUtils.frame(_),this._frame=null,this._render(_)}))}_onWindowOnline(){this._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return ar}getCameraTargetElevation(){return this.transform.elevation}},NavigationControl:class{constructor(_){this.options=l.extend({},ad,_),this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",o=>this._map.zoomIn({},{originalEvent:o})),g.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",o=>this._map.zoomOut({},{originalEvent:o})),g.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass",o=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:o}):this._map.resetNorth({},{originalEvent:o})}),this._compassIcon=g.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const _=this._map.getZoom(),o=_===this._map.getMaxZoom(),f=_===this._map.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())}_rotateCompassArrow(){const _=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=_}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new cf(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){g.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,o){const f=g.create("button",_,this._container);return f.type="button",f.addEventListener("click",o),f}_setButtonTitle(_,o){const f=this._map._getUIString(`NavigationControl.${o}`);_.title=f,_.setAttribute("aria-label",f)}},GeolocateControl:class extends l.Evented{constructor(_){super(),this.options=l.extend({},uf,_),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(_){return this._map=_,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(o,f=!1){fa===void 0||f?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(v=>{fa=v.state!=="denied",o(fa)}).catch(()=>{fa=!!window.navigator.geolocation,o(fa)}):(fa=!!window.navigator.geolocation,o(fa)):o(fa)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),g.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,kl=0,qo=!1}_isOutOfMapMaxBounds(_){const o=this._map.getMaxBounds(),f=_.coords;return o&&(f.longitude<o.getWest()||f.longitude>o.getEast()||f.latitude<o.getSouth()||f.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(_){if(this._map){if(this._isOutOfMapMaxBounds(_))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",_)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=_,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(_),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(_),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.Event("geolocate",_)),this._finish()}}_updateCamera(_){const o=new l.LngLat(_.coords.longitude,_.coords.latitude),f=_.coords.accuracy,v=this._map.getBearing(),b=l.extend({bearing:v},this.options.fitBoundsOptions),E=Ke.fromLngLat(o,f);this._map.fitBounds(E,b,{geolocateSource:!0})}_updateMarker(_){if(_){const o=new l.LngLat(_.coords.longitude,_.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=_.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const _=this._map.getBounds(),o=_.getSouthEast(),f=_.getNorthEast(),v=o.distanceTo(f),b=Math.ceil(this._accuracy/(v/this._map._container.clientHeight)*2);this._circleElement.style.width=`${b}px`,this._circleElement.style.height=`${b}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(_){if(this._map){if(this.options.trackUserLocation)if(_.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(_.code===3&&qo)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.Event("error",_)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(_){if(this._map){if(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=g.create("button","maplibregl-ctrl-geolocate",this._container),g.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",_===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=g.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Uc(this._dotElement),this._circleElement=g.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Uc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.Event("trackuserlocationend")))})}}trigger(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":kl--,qo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),kl++,kl>1?(_={maximumAge:6e5,timeout:0},qo=!0):(_=this.options.positionOptions,qo=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Dn,LogoControl:jc,ScaleControl:class{constructor(_){this.options=l.extend({},df,_),l.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){cd(this._map,this._container,this.options)}onAdd(_){return this._map=_,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){g.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(_){this.options.unit=_,cd(this._map,this._container,this.options)}},FullscreenControl:class extends l.Evented{constructor(_={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){g.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const _=this._fullscreenButton=g.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);g.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.Event("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new l.Event("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},TerrainControl:class{constructor(_){this.options=_,l.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(_){return this._map=_,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=g.create("button","maplibregl-ctrl-terrain",this._container),g.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){g.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends l.Evented{constructor(_){super(),this.options=l.extend(Object.create(ud),_),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&g.remove(this._content),this._container&&(g.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=l.LngLat.convert(_),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const o=document.createDocumentFragment(),f=document.createElement("body");let v;for(f.innerHTML=_;v=f.firstChild,v;)o.appendChild(v);return this.setDOMContent(o)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=g.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){this._container&&this._container.classList.add(_)}removeClassName(_){this._container&&this._container.classList.remove(_)}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}_createCloseButton(){this.options.closeButton&&(this._closeButton=g.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(_){this._update(_.point)}_onMouseMove(_){this._update(_.point)}_onDrag(_){this._update(_.point)}_update(_){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=g.create("div","maplibregl-popup",this._map.getContainer()),this._tip=g.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(E=>this._container.classList.add(E)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=od(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!_))return;const o=this._pos=this._trackPointer&&_?_:this._map.project(this._lngLat);let f=this.options.anchor;const v=dd(this.options.offset);if(!f){const E=this._container.offsetWidth,P=this._container.offsetHeight;let R;R=o.y+v.bottom.y<P?["top"]:o.y>this._map.transform.height-P?["bottom"]:[],o.x<E/2?R.push("left"):o.x>this._map.transform.width-E/2&&R.push("right"),f=R.length===0?"bottom":R.join("-")}const b=o.add(v[f]).round();g.setTransform(this._container,`${Wo[f]} translate(${b.x}px,${b.y}px)`),ld(this._container,f,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(hf);_&&_.focus()}_onClose(){this.remove()}},Marker:Uc,Style:Bs,LngLat:l.LngLat,LngLatBounds:Ke,Point:l.Point,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,AJAXError:l.AJAXError,config:l.config,CanvasSource:ft,GeoJSONSource:qt,ImageSource:ke,RasterDEMTileSource:_n,RasterTileSource:Vt,VectorTileSource:Ot,VideoSource:ge,prewarm:function(){Qe().acquire(vt)},clearPrewarmedResources:function(){const _=Ye;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(vt),Ye=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return hd},get workerCount(){return Rn.workerCount},set workerCount(_){Rn.workerCount=_},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(_){l.config.MAX_PARALLEL_IMAGE_REQUESTS=_},get workerUrl(){return l.config.WORKER_URL},set workerUrl(_){l.config.WORKER_URL=_},addProtocol(_,o){l.config.REGISTERED_PROTOCOLS[_]=o},removeProtocol(_){delete l.config.REGISTERED_PROTOCOLS[_]}};return rd.extend(fd,{isSafari:l.isSafari,getPerformanceMetrics:l.PerformanceUtils.getPerformanceMetrics}),fd});var d=s;return d})})(_k);var $d=_k.exports;const bk=Symbol("MapLibreGLMap"),F9=Symbol("MapLibreGLMarker"),$9=rt({__name:"Skeleton",props:{variant:{default:"rect"},width:{default:"100%"},height:{default:"1rem"}},setup(e){return nm(t=>({"367bb0d0":t.width,cc985cd6:t.height})),(t,i)=>(V(),pe("div",{class:kn(`skeleton skeleton--${t.variant} rounded-md animate-pulse bg-neutral-200 flex items-center justify-center`)},[En(t.$slots,"default",{},void 0,!0)],2))}});const Ao=sn($9,[["__scopeId","data-v-637a971d"]]),z9={class:"maplibre-map"},B9=["onClick"],N9={class:"hidden"},Bf="markers",Cd="unclustered-points",Ad="clusters",XE="cluster-count",j9=rt({__name:"Map",props:{center:{},bounds:{default:void 0},zoom:{},apiKey:{},labelsClass:{default:""},mapStyle:{default:"light"},mapContainerClass:{default:""},fullscreenControl:{type:Boolean,default:!0},mapOptions:{default:()=>({})}},emits:["click","load"],setup(e,{emit:t}){const i=e,r=Re(null),s=Re(null),u=Nr(new Map),d=Re(!1),l={light:{label:"Light",name:"ArcGIS:LightGray",type:"style"},dark:{label:"Dark",name:"ArcGIS:DarkGray",type:"style"},satellite:{label:"Satellite",name:"ArcGIS:Imagery",type:"style"},streets:{label:"Street",name:"ArcGIS:Navigation",type:"style"}},m=Re(i.mapStyle),g=H=>{const Q="https://basemaps-api.arcgis.com/arcgis/rest/services/styles",{name:ae,type:be,url:te}=l[H];return te||`${Q}/${ae}?type=${be}&token=${i.apiKey}`};function x(){if(!s.value)throw new Error("Cannot update style: no map");s.value.setStyle(g(m.value))}function w(){if(i.bounds){if(!s.value)throw new Error("Cannot update bounds: no map");s.value.fitBounds(i.bounds,{padding:64})}}function I({id:H,lng:Q,lat:ae}){return Array.from(u.values()).filter(te=>{var B;if(((B=te.properties)==null?void 0:B.id)===H)return!1;const G=Math.abs(te.geometry.coordinates[0]-Q),U=Math.abs(te.geometry.coordinates[1]-ae);return G<1e-4&&U<1e-4})}function C({id:H,lng:Q,lat:ae,...be}){const G=I({id:H,lng:Q,lat:ae}).length?[1e-4,0]:[0,0],U={type:"Feature",geometry:{type:"Point",coordinates:[Q,ae]},properties:{...be,id:H,offset:G}};return u.set(H,U),U}function A(H){u.delete(H)}const L=new Map;function $(H,Q){L.set(H,Q)}function F(H){const Q=L.get(H);Q!=null&&Q.value&&(Q.value.innerHTML=""),L.delete(H)}function z(H){return Array.from(H.values()).map(be=>{var te;if(!((te=be.properties)!=null&&te.offset))throw new Error("No offset");return{...be,geometry:{...be.geometry,coordinates:[be.geometry.coordinates[0]+be.properties.offset[0],be.geometry.coordinates[1]+be.properties.offset[1]]}}})}function ee(){const H=s.value;if(!H)return;const Q=H.getSource("markers");Q==null||Q.setData({type:"FeatureCollection",features:z(u)})}return fn(m,x),fn([()=>i.bounds,s],w),Fn(()=>{if(!r.value)throw Error("Cannot create Map: container not defined:");const H=new $d.Map({container:r.value,center:i.center?[i.center.lng,i.center.lat]:[0,0],style:g(m.value),zoom:i.zoom,bounds:i.bounds,...i.mapOptions});i.fullscreenControl&&H.addControl(new $d.FullscreenControl({container:document.querySelector("body")})),H.addControl(new $d.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0})).addControl(new $d.ScaleControl({unit:"imperial"})).on("click",Q=>{if(!s.value)throw new Error("there was a click but no map");t("click",Q,s.value)}).on("click",Ad,function(Q){var U;if(!s.value)throw new Error("there was a click on the map, but no map. How is that even possible?");const ae=s.value,be=ae.queryRenderedFeatures(Q.point,{layers:[Ad]}),te=(U=be[0].properties)==null?void 0:U.cluster_id,G=ae.getSource(Bf);G==null||G.getClusterExpansionZoom(te,(B,ie)=>{var ne;if(B||ie===null)return;const X=(ne=be[0].geometry)==null?void 0:ne.coordinates;ae.easeTo({center:X,zoom:ie})})}).on("click",Cd,function(Q){var ie,X;if(!s.value)throw new Error("there was a click on the map, but no map. How is that even possible?");const ae=s.value,te=ae.queryRenderedFeatures(Q.point,{layers:[Cd]})[0],G=te.geometry.coordinates.slice();for(;Math.abs(Q.lngLat.lng-G[0])>180;)G[0]+=Q.lngLat.lng>G[0]?360:-360;const U=(ie=te.properties)==null?void 0:ie.id,B=(X=L.get(U))==null?void 0:X.value;if(!B){console.error(`no popup container for marker ${U}`);return}new $d.Popup().setLngLat(G).setDOMContent(B).addTo(ae)}).on("mouseenter",Ad,function(){H.getCanvas().style.cursor="pointer"}).on("mouseleave",Ad,function(){H.getCanvas().style.cursor=""}).on("mouseenter",Cd,function(){H.getCanvas().style.cursor="pointer"}).on("mouseleave",Cd,function(){H.getCanvas().style.cursor=""}).on("styledata",()=>{if(!s.value)throw new Error("cannot emit styledata event: no map");const Q=s.value;Q.getSource(Bf)||Q.addSource(Bf,{type:"geojson",data:{type:"FeatureCollection",features:z(u)},cluster:!0,clusterMaxZoom:14,clusterRadius:50}),Q.getLayer(Ad)||Q.addLayer({id:Ad,type:"circle",source:Bf,filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#F54D94",5,"#F54D94"],"circle-radius":["step",["get","point_count"],20,10,30,100,40],"circle-stroke-width":8,"circle-stroke-color":"rgba(245, 77, 138, 0.25)"}}),Q.getLayer(XE)||Q.addLayer({id:XE,type:"symbol",source:Bf,layout:{"text-font":["Arial Bold"],"text-field":["get","point_count"],"text-offset":[0,.1]},paint:{"text-color":"white"}}),Q.getLayer(Cd)||Q.addLayer({id:Cd,type:"circle",source:"markers",filter:["!",["has","point_count"]],paint:{"circle-color":"#F54D94","circle-radius":8,"circle-stroke-width":1,"circle-stroke-color":"#fff"}})}).on("load",()=>{if(!s.value)throw new Error("cannot emit load event: no map");d.value=!0,t("load",s.value)}),s.value=H,k_(r,()=>{s.value&&s.value.resize()})}),Wi(()=>{s.value&&(s.value.remove(),s.value=null)}),Oi(bk,{addMarker:C,removeMarker:A,setMarkerPopupContainer:$,removeMarkerPopup:F,renderMarkers:ee}),(H,Q)=>(V(),pe("div",z9,[de("div",{class:kn(["flex gap-4 sm:justify-end items-center mb-4",H.labelsClass])},[(V(),pe(Nt,null,$n(l,(ae,be)=>de("button",{key:be,class:kn(["text-sm",{"font-bold":be===m.value,"text-neutral-400":be!==m.value}]),onClick:te=>m.value=be},xt(ae.label),11,B9)),64))],2),de("div",{ref_key:"mapContainerRef",ref:r,class:kn(["map-container",H.mapContainerClass])},null,2),d.value?tt("",!0):(V(),je(Ao,{key:0,class:"w-full h-[75vh]"})),de("div",N9,[En(H.$slots,"default",{},void 0,!0)])]))}});const xk=sn(j9,[["__scopeId","data-v-b6b790f1"]]),B1=Object.freeze(Object.defineProperty({__proto__:null,default:xk},Symbol.toStringTag,{value:"Module"})),U9={class:"map-marker"},V9=rt({__name:"MapMarker",props:{id:{},lng:{},lat:{}},setup(e){const t=e,i=wi(bk);Fn(()=>{if(!i)throw new Error(`Cannot add marker ${t.id} for [${t.lng}, ${t.lat}]. Map context is null.`);i.addMarker({id:t.id,lng:t.lng,lat:t.lat})}),Wi(()=>{if(!i)throw new Error(`Cannot remove marker ${t.id} for [${t.lng}, ${t.lat}]. Map context is null.`);i.removeMarker(t.id)});function r(u){if(!i)throw new Error(`Cannot create popup for marker ${t.id} for [${t.lng}, ${t.lat}]. Map context is null.`);i.setMarkerPopupContainer(t.id,u)}function s(){if(!i)throw new Error(`Cannot remove popup for marker ${t.id} for [${t.lng}, ${t.lat}]. Map context is null.`);i.removeMarkerPopup(t.id)}return Oi(F9,{createPopup:r,removePopup:s}),(u,d)=>(V(),pe("div",U9,[En(u.$slots,"default")]))}});var Ps=63710088e-1,H9={centimeters:Ps*100,centimetres:Ps*100,degrees:Ps/111325,feet:Ps*3.28084,inches:Ps*39.37,kilometers:Ps/1e3,kilometres:Ps/1e3,meters:Ps,metres:Ps,miles:Ps/1609.344,millimeters:Ps*1e3,millimetres:Ps*1e3,nauticalmiles:Ps/1852,radians:1,yards:Ps*1.0936};function wk(e,t,i){i===void 0&&(i={});var r={type:"Feature"};return(i.id===0||i.id)&&(r.id=i.id),i.bbox&&(r.bbox=i.bbox),r.properties=t||{},r.geometry=e,r}function G9(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!JE(e[0])||!JE(e[1]))throw new Error("coordinates must contain numbers");var r={type:"Point",coordinates:e};return wk(r,t,i)}function W9(e,t,i){i===void 0&&(i={});for(var r=0,s=e;r<s.length;r++){var u=s[r];if(u.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var d=0;d<u[u.length-1].length;d++)if(u[u.length-1][d]!==u[0][d])throw new Error("First and last Position are not equivalent.")}var l={type:"Polygon",coordinates:e};return wk(l,t,i)}function q9(e,t){t===void 0&&(t="kilometers");var i=H9[t];if(!i)throw new Error(t+" units is invalid");return e/i}function YE(e){var t=e%(2*Math.PI);return t*180/Math.PI}function L0(e){var t=e%360;return t*Math.PI/180}function JE(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function Z9(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function K9(e,t,i,r){r===void 0&&(r={});var s=Z9(e),u=L0(s[0]),d=L0(s[1]),l=L0(i),m=q9(t,r.units),g=Math.asin(Math.sin(d)*Math.cos(m)+Math.cos(d)*Math.sin(m)*Math.cos(l)),x=u+Math.atan2(Math.sin(l)*Math.sin(m)*Math.cos(d),Math.cos(m)-Math.sin(d)*Math.sin(g)),w=YE(x),I=YE(g);return G9([w,I],r.properties)}function X9(e,t,i){i===void 0&&(i={});for(var r=i.steps||64,s=i.properties?i.properties:!Array.isArray(e)&&e.type==="Feature"&&e.properties?e.properties:{},u=[],d=0;d<r;d++)u.push(K9(e,t,d*-360/r,i).geometry.coordinates);return u.push(u[0]),W9([u],s)}const Y9={class:"flex items-baseline mt-2 text-sm gap-2"},J9={key:0,class:"text-xs text-red-700 mt-2"},Q9=rt({__name:"FilterByGlobalLocationRow",props:{rowIndex:{}},setup(e){const t=Ir(),i=Re(null),r=Re(!1),s=Le(()=>!u.value||!d.value?null:{lng:u.value,lat:d.value}),u=Le(()=>{var C;return parseFloat(((C=t.filterBy.globalLocation)==null?void 0:C.lng)??"")}),d=Le(()=>{var C;return parseFloat(((C=t.filterBy.globalLocation)==null?void 0:C.lat)??"")}),l=Le(()=>{var C;return parseFloat(((C=t.filterBy.globalLocation)==null?void 0:C.radius)??"")}),m=Le(()=>{if(!u.value||!d.value||!l.value)return null;const C=[u.value,d.value];return X9(C,l.value,{steps:36,units:"miles"})}),g=Le(()=>l.value>0);function x(C){r.value=!0,t.updateLocationFilter({radius:C})}function w(C){i.value=C,C.on("click",A=>{const L=A.lngLat;t.updateLocationFilter({lng:L.lng.toString(),lat:L.lat.toString()})}),C.getSource("radius-circle")||C.addSource("radius-circle",{type:"geojson",data:m.value}),C.getLayer("radius-circle")||C.addLayer({id:"radius-circle",type:"fill",source:"radius-circle",paint:{"fill-color":"#f03","fill-opacity":.2}})}function I(){const C=i.value,A=m.value;if(!C||!A||!C.loaded())return;const L=C.getSource("radius-circle");if(!L)throw new Error("Cannot render radius circle. Expected source to be defined.");if(!(L instanceof $d.GeoJSONSource))throw new Error("Expected source to be a GeoJSONSource");L.setData(A)}return fn([u,d,l],()=>I()),(C,A)=>ce(t).filterBy.globalLocation?(V(),je(j_,{key:0,rowIndex:C.rowIndex,label:"Any Location",onRemove:ce(t).removeLocationFilter},{default:Ce(()=>[de("div",Y9,[de("span",null,xt(Math.abs(u.value).toFixed(4))+"° "+xt(u.value>0?"E":"W"),1),de("span",null,xt(Math.abs(d.value).toFixed(4))+"° "+xt(d.value>0?"N":"S"),1)]),s.value?(V(),je(xk,{key:0,center:s.value,zoom:2,apiKey:ce(si).arcgis.apiKey,class:"my-2 border border-neutral-300 rounded-md",labelsClass:"hidden",mapContainerClass:"!h-[12rem] !min-h-[12rem]",fullscreenControl:!1,mapOptions:{attributionControl:!1},onLoad:w},{default:Ce(()=>[u.value&&d.value?(V(),je(V9,{key:0,id:"search-by-location-map-marker",lng:u.value,lat:d.value},null,8,["lng","lat"])):tt("",!0)]),_:1},8,["center","apiKey"])):tt("",!0),de("div",null,[ye(Ja,{id:"filter-by-global-location-radius",modelValue:ce(t).filterBy.globalLocation.radius??"",type:"text",label:"Search Radius",labelClass:{"!text-red-700":r.value&&!g.value},inputClass:{"bg-white !border-neutral-200":!0,"border-red-600 text-red-700":r.value&&!g.value},"onUpdate:modelValue":x},{append:Ce(()=>[de("span",{class:kn(["text-sm text-neutral-600 mr-2",{"!text-red-700":r.value&&!g.value}])},"miles",2)]),_:1},8,["modelValue","labelClass","inputClass"]),r.value&&!g.value?(V(),pe("p",J9," Radius must be a number greater than 0. ")):tt("",!0)])]),_:1},8,["rowIndex","onRemove"])):tt("",!0)}}),eH=e=>(ao("data-v-0b78b9fe"),e=e(),oo(),e),tH=eH(()=>de("option",{value:""},"All",-1)),nH=["value"],iH=rt({__name:"FilterByGlobalFileTypeRow",props:{rowIndex:{}},setup(e){const t=Ir(),r=[...[{label:"Image",value:"image"},{label:"Video",value:"movie"},{label:"Audio",value:"audio"},{label:"Doc",value:"office"},{label:"TXT",value:"txt"},{label:"PDF",value:"pdf"},{label:"PPT",value:"office"},{label:"3D (obj)",value:"zipobj"},{label:"3D (ply)",value:"ply"},{label:"DICOM",value:"zipmeddicom"},{label:"SCORM",value:"zipscorm"}]].sort((s,u)=>s.label.localeCompare(u.label));return(s,u)=>(V(),je(j_,{label:"File Type",rowIndex:s.rowIndex,onRemove:ce(t).removeFileTypeFilter},{default:Ce(()=>[ce(t).filterBy.globalFileType?as((V(),pe("select",{key:0,"onUpdate:modelValue":u[0]||(u[0]=d=>ce(t).filterBy.globalFileType.fileType=d),class:"rounded-md w-full text-sm"},[tH,(V(!0),pe(Nt,null,$n(ce(r),d=>(V(),pe("option",{key:d.label,value:d.value},xt(d.label),9,nH))),128))],512)),[[wh,ce(t).filterBy.globalFileType.fileType]]):tt("",!0)]),_:1},8,["rowIndex","onRemove"]))}});const rH=sn(iH,[["__scopeId","data-v-0b78b9fe"]]),sH={class:"my-4"},aH={class:"flex justify-between"},oH={class:"flex items-baseline gap-2 mb-2"},lH=de("h3",{class:"font-bold"},"Fields",-1),cH={key:0,class:"p-4 bg-transparent-black-50 rounded-md flex flex-col gap-4 sm:gap-2 mb-4"},uH={class:"flex justify-between items-baseline"},dH={class:"divide-y divide-neutral-200"},hH={class:"flex-1"},fH=rt({__name:"FilterByFieldsSection",setup(e){const t=Ei(),i=Ir(),r=Le(()=>t.searchableFields.filter(d=>i.supportedSpecificFieldTypes.includes(d.type))),s=Le(()=>{const{globalDateRangeAsFilter:d,globalLocationAsFilter:l,globalFileTypeAsFilter:m}=i;return[d,l,m].filter(g=>!!g)}),u=Le(()=>[...i.specificFieldFilters,...s.value].sort((d,l)=>d.createdAt>l.createdAt?1:d.createdAt<l.createdAt?-1:0));return(d,l)=>(V(),pe("section",sH,[de("div",aH,[de("header",oH,[lH,ce(i).hasFieldFiltersApplied?(V(),je(ai,{key:0,variant:"tertiary",onClick:ce(i).clearSearchableFieldsFilters},{default:Ce(()=>[Mt(" clear ")]),_:1},8,["onClick"])):tt("",!0)])]),ce(i).hasFieldFiltersApplied?(V(),pe("div",cH,[(V(!0),pe(Nt,null,$n(u.value,(m,g)=>(V(),pe("div",{key:m.id},[m.fieldId===ce(sl).DATE_RANGE?(V(),je(R9,{key:0,rowIndex:g},null,8,["rowIndex"])):m.fieldId===ce(sl).LOCATION?(V(),je(Q9,{key:1,rowIndex:g},null,8,["rowIndex"])):m.fieldId===ce(sl).FILE_TYPE?(V(),je(rH,{key:2,rowIndex:g},null,8,["rowIndex"])):(V(),je(L9,{key:3,filter:m,rowIndex:g},null,8,["filter","rowIndex"]))]))),128))])):tt("",!0),de("div",uH,[ye(vk,{label:"Add Field"},{default:Ce(()=>[de("div",dH,[de("div",null,[(V(!0),pe(Nt,null,$n(r.value,m=>(V(),je(Yf,{key:m.id,class:"flex items-center justify-between cursor-pointer",onClick:g=>ce(i).addSearchableFieldFilter(m.id)},{default:Ce(()=>[de("span",hH,xt(m.label),1)]),_:2},1032,["onClick"]))),128))]),de("div",null,[ye(Yf,{class:"flex items-center cursor-pointer aria-disabled:opacity-25",disabled:ce(i).hasDateRangeFilter,onClick:l[0]||(l[0]=m=>ce(i).addDateRangeFilter())},{default:Ce(()=>[Mt(" Any Date ")]),_:1},8,["disabled"]),ye(Yf,{class:"flex items-center cursor-pointer aria-disabled:opacity-25",disabled:ce(i).hasLocationFilter,onClick:l[1]||(l[1]=m=>ce(i).addLocationFilter())},{default:Ce(()=>[Mt(" Any Location ")]),_:1},8,["disabled"]),ye(Yf,{class:"flex items-center cursor-pointer aria-disabled:opacity-25",disabled:ce(i).hasFileTypeFilter,onClick:l[2]||(l[2]=m=>ce(i).addFileTypeFilter())},{default:Ce(()=>[Mt(" Any File Type ")]),_:1},8,["disabled"])])])]),_:1})])]))}}),pH={class:"inline-flex items-center gap-1.5"},mH={class:"sr-only"},gH=rt({__name:"Toggle",props:{modelValue:{type:Boolean},settingLabel:{},offLabel:{},onLabel:{},toggleClass:{},toggleOnClass:{},toggleOffClass:{},onLabelClass:{},offLabelClass:{}},emits:["update:modelValue"],setup(e){return(t,i)=>(V(),je(ce(qU),null,{default:Ce(()=>[de("div",pH,[t.offLabel?(V(),je(ce(ME),{key:0,class:kn(t.offLabelClass)},{default:Ce(()=>[Mt(xt(t.offLabel),1)]),_:1},8,["class"])):tt("",!0),ye(ce(ZU),{modelValue:t.modelValue,class:kn([t.modelValue?"bg-blue-600":"bg-neutral-200","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",t.toggleClass,t.modelValue?t.toggleOnClass:t.toggleOffClass]),"onUpdate:modelValue":i[0]||(i[0]=r=>t.$emit("update:modelValue",r))},{default:Ce(()=>[de("span",mH,xt(t.settingLabel),1),de("span",{"aria-hidden":"true",class:kn([t.modelValue?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"])},null,2)]),_:1},8,["modelValue","class"]),t.onLabel?(V(),je(ce(ME),{key:1,class:kn(t.onLabelClass)},{default:Ce(()=>[Mt(xt(t.onLabel),1)]),_:1},8,["class"])):tt("",!0)])]),_:1}))}}),vH=["onSubmit"],_H={class:"p-2"},yH=de("h1",{class:"sr-only"},"Advanced Search",-1),bH={class:"px-2"},xH=de("h2",{class:"font-bold text-xs uppercase pb-2 border-b border-b-neutral-200"}," Filter By ",-1),wH={class:"max-h-[60vh] overflow-y-auto px-2"},SH={class:"flex bg-transparent-black-100 p-2 justify-between items-center gap-4"},TH=rt({__name:"AdvancedSearchForm",emits:["close","submit"],setup(e,{emit:t}){const i=Ir(),r=Ei(),s=Re(null);_z(s,()=>{t("close")});function u(l){l.key==="Escape"&&t("close")}function d(l){l.preventDefault(),i.isValidSearch&&t("submit")}return Fn(()=>{document.addEventListener("keydown",u)}),Wi(()=>{document.removeEventListener("keydown",u)}),(l,m)=>{var g;return V(),pe("form",{ref_key:"advancedSearchForm",ref:s,class:"bg-white rounded-3xl shadow-md",onSubmit:Do(d,["prevent"])},[de("div",_H,[yH,ye(gk,{class:"mb-4",onMoreOptionClick:m[0]||(m[0]=x=>l.$emit("close"))}),de("div",bH,[xH,de("div",wH,[ye(u9),ye(fH)])])]),de("div",SH,[de("div",null,[(g=ce(r).currentUser)!=null&&g.isAdmin?(V(),je(gH,{key:0,modelValue:ce(i).filterBy.includeHiddenAssets,"onUpdate:modelValue":m[1]||(m[1]=x=>ce(i).filterBy.includeHiddenAssets=x),class:"ml-4",settingLabel:"Include Hidden Assets",onLabel:"Include Hidden",onLabelClass:"text-sm"},null,8,["modelValue"])):tt("",!0)]),de("div",null,[ye(ai,{variant:"tertiary",type:"button",onClick:ce(i).clearAllFilters},{default:Ce(()=>[Mt("Clear All")]),_:1},8,["onClick"]),ye(ai,{variant:"primary",type:"submit",class:"!rounded-full",disabled:!ce(i).isValidSearch},{default:Ce(()=>[Mt(" Search ")]),_:1},8,["disabled"])])])],40,vH)}}}),EH={};function IH(e,t){return V(),je(_r,{enterActiveClass:"ease-inout duration-200",enterFromClass:"opacity-0",enterToClass:"opacity-100",leaveActiveClass:"ease-inout duration-300",leaveFromClass:"opacity-100",leaveToClass:"opacity-0"},{default:Ce(()=>[En(e.$slots,"default")]),_:3})}const QE=sn(EH,[["render",IH]]),CH={class:"relative"},AH=["onSubmit"],MH={key:0,class:"fixed inset-0 bg-transparent-black-700 z-30"},kH=rt({__name:"SearchBar",setup(e){const t=Re(null),i=Re(!1),r=Ir(),s=lo();async function u(){i.value=!1;const g=await r.getSearchId();if(!g){s.push({name:"error",params:{errorCode:400}});return}s.push({name:"search",params:{searchId:g}})}function d(g){var x;t.value&&g.metaKey&&g.key==="k"&&(g.preventDefault(),(x=t.value.$el.querySelector("input"))==null||x.focus())}function l(g){var x;t.value&&g.key==="Escape"&&((x=t.value.$el.querySelector("input"))==null||x.blur())}document.addEventListener("keydown",d),document.addEventListener("keydown",l);const m=Iu();return fn(m,(g,x)=>{const w=g.name!==(x==null?void 0:x.name),I=!["search","asset"].includes(g.name);w&&I&&(r.query="",r.clearAllFilters())},{immediate:!0}),(g,x)=>(V(),pe("div",CH,[de("form",{class:"search-bar",onSubmit:Do(u,["prevent"])},[ye(gk,{onMoreOptionClick:x[0]||(x[0]=w=>i.value=!0),onClearAllFilters:x[1]||(x[1]=()=>{i.value||u()})})],40,AH),ye(QE,null,{default:Ce(()=>[i.value?(V(),je(TH,{key:0,isOpen:i.value,class:"fixed top-1 right-1 left-1 m-auto z-40 sm:absolute sm:!-top-2 sm:!-right-2 sm:!-left-2 advanced-search-form",onSubmit:u,onClose:x[2]||(x[2]=w=>i.value=!1)},null,8,["isOpen"])):tt("",!0)]),_:1}),ye(QE,null,{default:Ce(()=>[i.value?(V(),pe("div",MH)):tt("",!0)]),_:1})]))}});const PH=sn(kH,[["__scopeId","data-v-eaa63840"]]),DH={class:"flex gap-2 items-center"},LH=["src","alt"],OH={class:"app-header__wordmark font-bold text-lg hidden md:block"},RH=rt({__name:"AppLogoMark",setup(e){const t=Ei();return(i,r)=>(V(),pe("div",DH,[ce(t).instance.logoImg?(V(),pe("img",{key:0,src:ce(t).instance.logoImg.src,alt:ce(t).instance.logoImg.alt,class:"app-header__logo-img h-8"},null,8,LH)):(V(),je(MN,{key:1,class:"h-full app-header__icon"})),de("h1",OH,xt(ce(t).instance.name),1)]))}}),FH={class:"avatar inline-flex justify-center items-center rounded-full w-6 h-6 border text-xs border-neutral-900 font-sans"},$H=rt({__name:"Avatar",props:{name:{}},setup(e){const t=e,i=Le(()=>t.name.length?t.name[0].toUpperCase():"X");return(r,s)=>(V(),pe("div",FH,xt(i.value),1))}}),zH={key:1},BH={class:"p-4 border-b border-neutral-300 text-xs flex items-center gap-1"},NH=de("span",{class:"text-neutral-400"}," Signed in as ",-1),jH={class:"font-normal"},UH=rt({__name:"AuthDropDown",props:{currentUser:{},instance:{}},setup(e){const t=e,i=Iu(),r=YA(),s=Le(()=>{var l;const d=((l=r.value)==null?void 0:l.href)??si.instance.base.url;return encodeURIComponent(d)}),u=Le(()=>t.currentUser?t.currentUser.displayName:"Login");return(d,l)=>(V(),je(z1,{label:u.value,showChevron:!1},{label:Ce(()=>[d.currentUser?(V(),je($H,{key:0,name:d.currentUser.displayName},null,8,["name"])):(V(),pe("span",zH,"Login"))]),default:Ce(()=>[d.currentUser?(V(),pe(Nt,{key:0},[de("div",BH,[NH,de("b",jH,xt(d.currentUser.displayName),1)]),d.currentUser.id?(V(),je(jd,{key:0,href:`${ce(si).instance.base.url}/permissions/editUser/${d.currentUser.id}`},{default:Ce(()=>[Mt(" Preferences ")]),_:1},8,["href"])):tt("",!0),ye(jd,{to:"/logout"},{default:Ce(()=>[Mt("Logout")]),_:1})],64)):(V(),pe(Nt,{key:1},[d.instance.useCentralAuth&&d.instance.centralAuthLabel?(V(),je(jd,{key:0,href:`${ce(si).instance.base.url}/loginManager/remoteLogin/?redirect=${s.value}`},{default:Ce(()=>[Mt(xt(d.instance.centralAuthLabel)+" Login ",1)]),_:1},8,["href"])):tt("",!0),ye(jd,{to:`/loginManager/localLogin/?redirect=${ce(i).path}`},{default:Ce(()=>[Mt(xt(d.instance.useCentralAuth?"Guest":"")+" Login ",1)]),_:1},8,["to"])],64))]),_:1},8,["label"]))}}),VH={class:"app-header flex flex-col gap-2"},HH={class:"flex justify-between items-center md:gap-8 px-4 py-2"},GH={class:"flex gap-2 items-center"},WH={class:"flex gap-2 items-center"},qH={class:"app-header__secondary-nav"},ZH=rt({__name:"AppHeader",setup(e){const t=Ei(),i=Le(()=>t.currentUser);return(r,s)=>(V(),pe("header",VH,[de("div",HH,[de("div",GH,[ye(os,{to:"/",class:"app-header__logo-link hover:no-underline mr-4"},{default:Ce(()=>[ye(RH)]),_:1})]),ce(t).instance.userCanSearchAndBrowse?(V(),je(PH,{key:0,class:"flex-1 w-full max-w-2xl"})):tt("",!0),de("div",WH,[ye(UH,{currentUser:i.value,instance:ce(t).instance},null,8,["currentUser","instance"]),ye(jV)])]),de("div",qH,[En(r.$slots,"default",{},void 0,!0)])]))}});const Sk=sn(ZH,[["__scopeId","data-v-bd7ec3e4"]]);const KH={},XH={class:"skipnav shadow-md",href:"#main"};function YH(e,t){return V(),pe("a",XH," Skip to content ")}const JH=sn(KH,[["render",YH],["__scopeId","data-v-641f0db6"]]),QH={id:"top",class:"min-h-screen pt-18 flex flex-col"},eG={id:"main",class:"flex-1 flex flex-col",tabindex:"-1"},tG={href:"#top",class:"fixed bottom-2 right-2 w-10 h-10 flex items-center justify-center rounded-full hover:bg-blue-100 z-20"},nG=de("span",{class:"sr-only"},"Top",-1),co=rt({__name:"DefaultLayout",setup(e){const{y:t}=Gz(),i=Le(()=>t.value>0);return(r,s)=>(V(),pe("div",QH,[ye(JH,{href:"#main"}),En(r.$slots,"custom-header"),ye(Sk,{class:"app-header top-0 w-full z-20 sticky left-0"}),de("main",eG,[En(r.$slots,"default")]),En(r.$slots,"footer"),ye(_r,{name:"fade"},{default:Ce(()=>[as(de("a",tG,[ye(ce(O_)),nG],512),[[sa,i.value]])]),_:1})]))}});/*! @license DOMPurify 3.0.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.3/LICENSE */const{entries:Tk,setPrototypeOf:e2,isFrozen:iG,getPrototypeOf:rG,getOwnPropertyDescriptor:sG}=Object;let{freeze:xs,seal:no,create:aG}=Object,{apply:ix,construct:rx}=typeof Reflect<"u"&&Reflect;ix||(ix=function(t,i,r){return t.apply(i,r)});xs||(xs=function(t){return t});no||(no=function(t){return t});rx||(rx=function(t,i){return new t(...i)});const oG=Ma(Array.prototype.forEach),t2=Ma(Array.prototype.pop),Nf=Ma(Array.prototype.push),dv=Ma(String.prototype.toLowerCase),O0=Ma(String.prototype.toString),lG=Ma(String.prototype.match),Na=Ma(String.prototype.replace),cG=Ma(String.prototype.indexOf),uG=Ma(String.prototype.trim),Ws=Ma(RegExp.prototype.test),jf=dG(TypeError);function Ma(e){return function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];return ix(e,t,r)}}function dG(e){return function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return rx(e,i)}}function Qn(e,t,i){var r;i=(r=i)!==null&&r!==void 0?r:dv,e2&&e2(e,null);let s=t.length;for(;s--;){let u=t[s];if(typeof u=="string"){const d=i(u);d!==u&&(iG(t)||(t[s]=d),u=d)}e[u]=!0}return e}function Md(e){const t=aG(null);for(const[i,r]of Tk(e))t[i]=r;return t}function Ug(e,t){for(;e!==null;){const r=sG(e,t);if(r){if(r.get)return Ma(r.get);if(typeof r.value=="function")return Ma(r.value)}e=rG(e)}function i(r){return console.warn("fallback value for",r),null}return i}const n2=xs(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),R0=xs(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),F0=xs(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),hG=xs(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),$0=xs(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),fG=xs(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),i2=xs(["#text"]),r2=xs(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),z0=xs(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),s2=xs(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Vg=xs(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),pG=no(/\{\{[\w\W]*|[\w\W]*\}\}/gm),mG=no(/<%[\w\W]*|[\w\W]*%>/gm),gG=no(/\${[\w\W]*}/gm),vG=no(/^data-[\-\w.\u00B7-\uFFFF]/),_G=no(/^aria-[\-\w]+$/),Ek=no(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),yG=no(/^(?:\w+script|data):/i),bG=no(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ik=no(/^html$/i);var a2=Object.freeze({__proto__:null,MUSTACHE_EXPR:pG,ERB_EXPR:mG,TMPLIT_EXPR:gG,DATA_ATTR:vG,ARIA_ATTR:_G,IS_ALLOWED_URI:Ek,IS_SCRIPT_OR_DATA:yG,ATTR_WHITESPACE:bG,DOCTYPE_NAME:Ik});const xG=()=>typeof window>"u"?null:window,wG=function(t,i){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const s="data-tt-policy-suffix";i&&i.hasAttribute(s)&&(r=i.getAttribute(s));const u="dompurify"+(r?"#"+r:"");try{return t.createPolicy(u,{createHTML(d){return d},createScriptURL(d){return d}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function Ck(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xG();const t=Ut=>Ck(Ut);if(t.version="3.0.3",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;const i=e.document,r=i.currentScript;let{document:s}=e;const{DocumentFragment:u,HTMLTemplateElement:d,Node:l,Element:m,NodeFilter:g,NamedNodeMap:x=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:w,DOMParser:I,trustedTypes:C}=e,A=m.prototype,L=Ug(A,"cloneNode"),$=Ug(A,"nextSibling"),F=Ug(A,"childNodes"),z=Ug(A,"parentNode");if(typeof d=="function"){const Ut=s.createElement("template");Ut.content&&Ut.content.ownerDocument&&(s=Ut.content.ownerDocument)}let ee,H="";const{implementation:Q,createNodeIterator:ae,createDocumentFragment:be,getElementsByTagName:te}=s,{importNode:G}=i;let U={};t.isSupported=typeof Tk=="function"&&typeof z=="function"&&Q&&Q.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:B,ERB_EXPR:ie,TMPLIT_EXPR:X,DATA_ATTR:ne,ARIA_ATTR:Ee,IS_SCRIPT_OR_DATA:Ie,ATTR_WHITESPACE:Xe}=a2;let{IS_ALLOWED_URI:lt}=a2,st=null;const $t=Qn({},[...n2,...R0,...F0,...$0,...i2]);let It=null;const nt=Qn({},[...r2,...z0,...s2,...Vg]);let et=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),dt=null,Be=null,Ke=!0,ut=!0,Ot=!1,Vt=!0,_n=!1,qt=!1,_e=!1,ke=!1,ge=!1,ft=!1,q=!1,fe=!0,Pe=!1;const We="user-content-";let pt=!0,ht=!1,zt={},Dt=null;const Gt=Qn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ln=null;const vt=Qn({},["audio","video","img","source","image","track"]);let Rn=null;const Ln=Qn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ye="http://www.w3.org/1998/Math/MathML",Qe="http://www.w3.org/2000/svg",Fe="http://www.w3.org/1999/xhtml";let mt=Fe,St=!1,Yt=null;const an=Qn({},[Ye,Qe,Fe],O0);let Pt;const qn=["application/xhtml+xml","text/html"],Cn="text/html";let jt,vn=null;const Pn=s.createElement("form"),he=function(Ge){return Ge instanceof RegExp||Ge instanceof Function},Y=function(Ge){if(!(vn&&vn===Ge)){if((!Ge||typeof Ge!="object")&&(Ge={}),Ge=Md(Ge),Pt=qn.indexOf(Ge.PARSER_MEDIA_TYPE)===-1?Pt=Cn:Pt=Ge.PARSER_MEDIA_TYPE,jt=Pt==="application/xhtml+xml"?O0:dv,st="ALLOWED_TAGS"in Ge?Qn({},Ge.ALLOWED_TAGS,jt):$t,It="ALLOWED_ATTR"in Ge?Qn({},Ge.ALLOWED_ATTR,jt):nt,Yt="ALLOWED_NAMESPACES"in Ge?Qn({},Ge.ALLOWED_NAMESPACES,O0):an,Rn="ADD_URI_SAFE_ATTR"in Ge?Qn(Md(Ln),Ge.ADD_URI_SAFE_ATTR,jt):Ln,ln="ADD_DATA_URI_TAGS"in Ge?Qn(Md(vt),Ge.ADD_DATA_URI_TAGS,jt):vt,Dt="FORBID_CONTENTS"in Ge?Qn({},Ge.FORBID_CONTENTS,jt):Gt,dt="FORBID_TAGS"in Ge?Qn({},Ge.FORBID_TAGS,jt):{},Be="FORBID_ATTR"in Ge?Qn({},Ge.FORBID_ATTR,jt):{},zt="USE_PROFILES"in Ge?Ge.USE_PROFILES:!1,Ke=Ge.ALLOW_ARIA_ATTR!==!1,ut=Ge.ALLOW_DATA_ATTR!==!1,Ot=Ge.ALLOW_UNKNOWN_PROTOCOLS||!1,Vt=Ge.ALLOW_SELF_CLOSE_IN_ATTR!==!1,_n=Ge.SAFE_FOR_TEMPLATES||!1,qt=Ge.WHOLE_DOCUMENT||!1,ge=Ge.RETURN_DOM||!1,ft=Ge.RETURN_DOM_FRAGMENT||!1,q=Ge.RETURN_TRUSTED_TYPE||!1,ke=Ge.FORCE_BODY||!1,fe=Ge.SANITIZE_DOM!==!1,Pe=Ge.SANITIZE_NAMED_PROPS||!1,pt=Ge.KEEP_CONTENT!==!1,ht=Ge.IN_PLACE||!1,lt=Ge.ALLOWED_URI_REGEXP||Ek,mt=Ge.NAMESPACE||Fe,et=Ge.CUSTOM_ELEMENT_HANDLING||{},Ge.CUSTOM_ELEMENT_HANDLING&&he(Ge.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(et.tagNameCheck=Ge.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ge.CUSTOM_ELEMENT_HANDLING&&he(Ge.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(et.attributeNameCheck=Ge.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ge.CUSTOM_ELEMENT_HANDLING&&typeof Ge.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(et.allowCustomizedBuiltInElements=Ge.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),_n&&(ut=!1),ft&&(ge=!0),zt&&(st=Qn({},[...i2]),It=[],zt.html===!0&&(Qn(st,n2),Qn(It,r2)),zt.svg===!0&&(Qn(st,R0),Qn(It,z0),Qn(It,Vg)),zt.svgFilters===!0&&(Qn(st,F0),Qn(It,z0),Qn(It,Vg)),zt.mathMl===!0&&(Qn(st,$0),Qn(It,s2),Qn(It,Vg))),Ge.ADD_TAGS&&(st===$t&&(st=Md(st)),Qn(st,Ge.ADD_TAGS,jt)),Ge.ADD_ATTR&&(It===nt&&(It=Md(It)),Qn(It,Ge.ADD_ATTR,jt)),Ge.ADD_URI_SAFE_ATTR&&Qn(Rn,Ge.ADD_URI_SAFE_ATTR,jt),Ge.FORBID_CONTENTS&&(Dt===Gt&&(Dt=Md(Dt)),Qn(Dt,Ge.FORBID_CONTENTS,jt)),pt&&(st["#text"]=!0),qt&&Qn(st,["html","head","body"]),st.table&&(Qn(st,["tbody"]),delete dt.tbody),Ge.TRUSTED_TYPES_POLICY){if(typeof Ge.TRUSTED_TYPES_POLICY.createHTML!="function")throw jf('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Ge.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw jf('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ee=Ge.TRUSTED_TYPES_POLICY,H=ee.createHTML("")}else ee===void 0&&(ee=wG(C,r)),ee!==null&&typeof H=="string"&&(H=ee.createHTML(""));xs&&xs(Ge),vn=Ge}},re=Qn({},["mi","mo","mn","ms","mtext"]),me=Qn({},["foreignobject","desc","title","annotation-xml"]),Ae=Qn({},["title","style","font","a","script"]),$e=Qn({},R0);Qn($e,F0),Qn($e,hG);const qe=Qn({},$0);Qn(qe,fG);const He=function(Ge){let Ct=z(Ge);(!Ct||!Ct.tagName)&&(Ct={namespaceURI:mt,tagName:"template"});const gt=dv(Ge.tagName),ze=dv(Ct.tagName);return Yt[Ge.namespaceURI]?Ge.namespaceURI===Qe?Ct.namespaceURI===Fe?gt==="svg":Ct.namespaceURI===Ye?gt==="svg"&&(ze==="annotation-xml"||re[ze]):!!$e[gt]:Ge.namespaceURI===Ye?Ct.namespaceURI===Fe?gt==="math":Ct.namespaceURI===Qe?gt==="math"&&me[ze]:!!qe[gt]:Ge.namespaceURI===Fe?Ct.namespaceURI===Qe&&!me[ze]||Ct.namespaceURI===Ye&&!re[ze]?!1:!qe[gt]&&(Ae[gt]||!$e[gt]):!!(Pt==="application/xhtml+xml"&&Yt[Ge.namespaceURI]):!1},Oe=function(Ge){Nf(t.removed,{element:Ge});try{Ge.parentNode.removeChild(Ge)}catch{Ge.remove()}},Ze=function(Ge,Ct){try{Nf(t.removed,{attribute:Ct.getAttributeNode(Ge),from:Ct})}catch{Nf(t.removed,{attribute:null,from:Ct})}if(Ct.removeAttribute(Ge),Ge==="is"&&!It[Ge])if(ge||ft)try{Oe(Ct)}catch{}else try{Ct.setAttribute(Ge,"")}catch{}},wt=function(Ge){let Ct,gt;if(ke)Ge="<remove></remove>"+Ge;else{const Wt=lG(Ge,/^[\r\n\t ]+/);gt=Wt&&Wt[0]}Pt==="application/xhtml+xml"&&mt===Fe&&(Ge='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ge+"</body></html>");const ze=ee?ee.createHTML(Ge):Ge;if(mt===Fe)try{Ct=new I().parseFromString(ze,Pt)}catch{}if(!Ct||!Ct.documentElement){Ct=Q.createDocument(mt,"template",null);try{Ct.documentElement.innerHTML=St?H:ze}catch{}}const yt=Ct.body||Ct.documentElement;return Ge&&gt&&yt.insertBefore(s.createTextNode(gt),yt.childNodes[0]||null),mt===Fe?te.call(Ct,qt?"html":"body")[0]:qt?Ct.documentElement:yt},bt=function(Ge){return ae.call(Ge.ownerDocument||Ge,Ge,g.SHOW_ELEMENT|g.SHOW_COMMENT|g.SHOW_TEXT,null,!1)},Et=function(Ge){return Ge instanceof w&&(typeof Ge.nodeName!="string"||typeof Ge.textContent!="string"||typeof Ge.removeChild!="function"||!(Ge.attributes instanceof x)||typeof Ge.removeAttribute!="function"||typeof Ge.setAttribute!="function"||typeof Ge.namespaceURI!="string"||typeof Ge.insertBefore!="function"||typeof Ge.hasChildNodes!="function")},pn=function(Ge){return typeof l=="object"?Ge instanceof l:Ge&&typeof Ge=="object"&&typeof Ge.nodeType=="number"&&typeof Ge.nodeName=="string"},wn=function(Ge,Ct,gt){U[Ge]&&oG(U[Ge],ze=>{ze.call(t,Ct,gt,vn)})},un=function(Ge){let Ct;if(wn("beforeSanitizeElements",Ge,null),Et(Ge))return Oe(Ge),!0;const gt=jt(Ge.nodeName);if(wn("uponSanitizeElement",Ge,{tagName:gt,allowedTags:st}),Ge.hasChildNodes()&&!pn(Ge.firstElementChild)&&(!pn(Ge.content)||!pn(Ge.content.firstElementChild))&&Ws(/<[/\w]/g,Ge.innerHTML)&&Ws(/<[/\w]/g,Ge.textContent))return Oe(Ge),!0;if(!st[gt]||dt[gt]){if(!dt[gt]&&In(gt)&&(et.tagNameCheck instanceof RegExp&&Ws(et.tagNameCheck,gt)||et.tagNameCheck instanceof Function&&et.tagNameCheck(gt)))return!1;if(pt&&!Dt[gt]){const ze=z(Ge)||Ge.parentNode,yt=F(Ge)||Ge.childNodes;if(yt&&ze){const Wt=yt.length;for(let An=Wt-1;An>=0;--An)ze.insertBefore(L(yt[An],!0),$(Ge))}}return Oe(Ge),!0}return Ge instanceof m&&!He(Ge)||(gt==="noscript"||gt==="noembed")&&Ws(/<\/no(script|embed)/i,Ge.innerHTML)?(Oe(Ge),!0):(_n&&Ge.nodeType===3&&(Ct=Ge.textContent,Ct=Na(Ct,B," "),Ct=Na(Ct,ie," "),Ct=Na(Ct,X," "),Ge.textContent!==Ct&&(Nf(t.removed,{element:Ge.cloneNode()}),Ge.textContent=Ct)),wn("afterSanitizeElements",Ge,null),!1)},mn=function(Ge,Ct,gt){if(fe&&(Ct==="id"||Ct==="name")&&(gt in s||gt in Pn))return!1;if(!(ut&&!Be[Ct]&&Ws(ne,Ct))){if(!(Ke&&Ws(Ee,Ct))){if(!It[Ct]||Be[Ct]){if(!(In(Ge)&&(et.tagNameCheck instanceof RegExp&&Ws(et.tagNameCheck,Ge)||et.tagNameCheck instanceof Function&&et.tagNameCheck(Ge))&&(et.attributeNameCheck instanceof RegExp&&Ws(et.attributeNameCheck,Ct)||et.attributeNameCheck instanceof Function&&et.attributeNameCheck(Ct))||Ct==="is"&&et.allowCustomizedBuiltInElements&&(et.tagNameCheck instanceof RegExp&&Ws(et.tagNameCheck,gt)||et.tagNameCheck instanceof Function&&et.tagNameCheck(gt))))return!1}else if(!Rn[Ct]){if(!Ws(lt,Na(gt,Xe,""))){if(!((Ct==="src"||Ct==="xlink:href"||Ct==="href")&&Ge!=="script"&&cG(gt,"data:")===0&&ln[Ge])){if(!(Ot&&!Ws(Ie,Na(gt,Xe,"")))){if(gt)return!1}}}}}}return!0},In=function(Ge){return Ge.indexOf("-")>0},Vn=function(Ge){let Ct,gt,ze,yt;wn("beforeSanitizeAttributes",Ge,null);const{attributes:Wt}=Ge;if(!Wt)return;const An={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:It};for(yt=Wt.length;yt--;){Ct=Wt[yt];const{name:Yn,namespaceURI:li}=Ct;if(gt=Yn==="value"?Ct.value:uG(Ct.value),ze=jt(Yn),An.attrName=ze,An.attrValue=gt,An.keepAttr=!0,An.forceKeepAttr=void 0,wn("uponSanitizeAttribute",Ge,An),gt=An.attrValue,An.forceKeepAttr||(Ze(Yn,Ge),!An.keepAttr))continue;if(!Vt&&Ws(/\/>/i,gt)){Ze(Yn,Ge);continue}_n&&(gt=Na(gt,B," "),gt=Na(gt,ie," "),gt=Na(gt,X," "));const ri=jt(Ge.nodeName);if(mn(ri,ze,gt)){if(Pe&&(ze==="id"||ze==="name")&&(Ze(Yn,Ge),gt=We+gt),ee&&typeof C=="object"&&typeof C.getAttributeType=="function"&&!li)switch(C.getAttributeType(ri,ze)){case"TrustedHTML":{gt=ee.createHTML(gt);break}case"TrustedScriptURL":{gt=ee.createScriptURL(gt);break}}try{li?Ge.setAttributeNS(li,Yn,gt):Ge.setAttribute(Yn,gt),t2(t.removed)}catch{}}}wn("afterSanitizeAttributes",Ge,null)},zn=function Ut(Ge){let Ct;const gt=bt(Ge);for(wn("beforeSanitizeShadowDOM",Ge,null);Ct=gt.nextNode();)wn("uponSanitizeShadowNode",Ct,null),!un(Ct)&&(Ct.content instanceof u&&Ut(Ct.content),Vn(Ct));wn("afterSanitizeShadowDOM",Ge,null)};return t.sanitize=function(Ut){let Ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ct,gt,ze,yt;if(St=!Ut,St&&(Ut="<!-->"),typeof Ut!="string"&&!pn(Ut))if(typeof Ut.toString=="function"){if(Ut=Ut.toString(),typeof Ut!="string")throw jf("dirty is not a string, aborting")}else throw jf("toString is not a function");if(!t.isSupported)return Ut;if(_e||Y(Ge),t.removed=[],typeof Ut=="string"&&(ht=!1),ht){if(Ut.nodeName){const Yn=jt(Ut.nodeName);if(!st[Yn]||dt[Yn])throw jf("root node is forbidden and cannot be sanitized in-place")}}else if(Ut instanceof l)Ct=wt("<!---->"),gt=Ct.ownerDocument.importNode(Ut,!0),gt.nodeType===1&&gt.nodeName==="BODY"||gt.nodeName==="HTML"?Ct=gt:Ct.appendChild(gt);else{if(!ge&&!_n&&!qt&&Ut.indexOf("<")===-1)return ee&&q?ee.createHTML(Ut):Ut;if(Ct=wt(Ut),!Ct)return ge?null:q?H:""}Ct&&ke&&Oe(Ct.firstChild);const Wt=bt(ht?Ut:Ct);for(;ze=Wt.nextNode();)un(ze)||(ze.content instanceof u&&zn(ze.content),Vn(ze));if(ht)return Ut;if(ge){if(ft)for(yt=be.call(Ct.ownerDocument);Ct.firstChild;)yt.appendChild(Ct.firstChild);else yt=Ct;return(It.shadowroot||It.shadowrootmod)&&(yt=G.call(i,yt,!0)),yt}let An=qt?Ct.outerHTML:Ct.innerHTML;return qt&&st["!doctype"]&&Ct.ownerDocument&&Ct.ownerDocument.doctype&&Ct.ownerDocument.doctype.name&&Ws(Ik,Ct.ownerDocument.doctype.name)&&(An="<!DOCTYPE "+Ct.ownerDocument.doctype.name+`>
`+An),_n&&(An=Na(An,B," "),An=Na(An,ie," "),An=Na(An,X," ")),ee&&q?ee.createHTML(An):An},t.setConfig=function(Ut){Y(Ut),_e=!0},t.clearConfig=function(){vn=null,_e=!1},t.isValidAttribute=function(Ut,Ge,Ct){vn||Y({});const gt=jt(Ut),ze=jt(Ge);return mn(gt,ze,Ct)},t.addHook=function(Ut,Ge){typeof Ge=="function"&&(U[Ut]=U[Ut]||[],Nf(U[Ut],Ge))},t.removeHook=function(Ut){if(U[Ut])return t2(U[Ut])},t.removeHooks=function(Ut){U[Ut]&&(U[Ut]=[])},t.removeAllHooks=function(){U={}},t}var SG=Ck();const TG=["innerHTML"],Oo=rt({__name:"SanitizedHTML",props:{html:{},removeInlineStyles:{type:Boolean,default:!1},addTags:{default:()=>[]}},setup(e){var s;const t=e,i={FORBID_ATTR:t.removeInlineStyles?["style"]:[],ADD_TAGS:["iframe",...t.addTags],FORCE_BODY:(s=t.addTags)==null?void 0:s.includes("style")},r=Le(()=>SG.sanitize(t.html,i));return(u,d)=>(V(),pe("div",{innerHTML:r.value},null,8,TG))}});function EG(e){const{overflowY:t,overflowX:i}=getComputedStyle(e);return!t.includes("hidden")&&!t.includes("visible")&&!i.includes("hidden")&&!i.includes("visible")&&e.scrollHeight>=e.clientHeight}function Ak(e){return!e||!(e instanceof HTMLElement)?document.body:EG(e)?e:Ak(e.parentNode)??document.body}const IG=["src","alt"],CG={key:1,class:"lazy-load-image__placeholder bg-neutral-200 border-neutral-300 text-neutral-400 absolute inset-0 z-10 flex items-center justify-center border"},AG=rt({__name:"LazyLoadImage",props:{src:{},alt:{}},setup(e){const t=Re(null),i=Re(!1),r=Re(!1);function s(u,d){u.forEach(l=>{l.isIntersecting&&(i.value=!0,d.unobserve(l.target))})}return Fn(()=>{const u={root:Ak(t.value),rootMargin:"640px",threshold:0};Uz(t,s,u)}),(u,d)=>(V(),pe("div",{ref_key:"imgContainer",ref:t,class:"lazy-load-image relative"},[i.value?(V(),pe("img",Br({key:0,class:["lazy-load-image__image bg-neutral-100 block transition-opacity opacity-0",{"opacity-100":r.value}],src:u.src,alt:u.alt??""},u.$attrs,{onLoad:d[0]||(d[0]=l=>r.value=!0)}),null,16,IG)):tt("",!0),r.value?tt("",!0):(V(),pe("div",CG,[ye(C1)]))],512))}});const Mu=sn(AG,[["__scopeId","data-v-83ff1a5e"]]),MG={key:0,class:"media-card flex flex-col overflow-hidden rounded-md shadow-sm max-w-xs group-hover:border-blue-700"},kG={class:"placeholder-image aspect-video flex items-center justify-center w-full overflow-hidden bg-transparent-black-200 p-4"},PG={class:"flex-1 p-4 flex justify-between items-center"},DG={class:"search-result-card__title font-bold leading-tight group-hover:text-blue-700 text-center"},LG=rt({__name:"FeaturedAssetCard",props:{assetId:{}},setup(e){const t=e,i=Re(null);fn(()=>t.assetId,async()=>{i.value=await Hn.getAsset(t.assetId)},{immediate:!0});const r=Le(()=>i.value?Eu(i.value):""),s=Le(()=>{var d;const u=((d=i.value)==null?void 0:d.firstFileHandlerId)??null;return u?yc(u):null});return(u,d)=>(V(),je(os,{to:ce(hl)(u.assetId),class:"group hover:no-underline relative"},{default:Ce(()=>[ye(_r,{name:"fade"},{default:Ce(()=>[i.value?(V(),pe("article",MG,[de("div",kG,[s.value?(V(),je(Mu,{key:0,src:s.value,alt:r.value||"Untitled",loading:"lazy",class:"object-contain w-full h-full !bg-transparent"},null,8,["src","alt"])):(V(),je(ce(Fp),{key:1}))]),de("div",PG,[de("h1",DG,[ye(Oo,{html:r.value},null,8,["html"])]),ye(ce(Cu),{class:"group-hover:text-blue-700"})])])):tt("",!0)]),_:1})]),_:1},8,["to"]))}});const OG=sn(LG,[["__scopeId","data-v-cf0ba366"]]),RG={key:0,class:"app-footer bg-transparent-black-100"},FG=rt({__name:"AppFooter",setup(e){const t=Ei();return(i,r)=>ce(t).customFooter?(V(),pe("footer",RG,[ye(Oo,{class:"flex flex-col max-w-screen-xl mx-auto p-4 lg:p-8",html:ce(t).customFooter,addTags:["style"]},null,8,["html"])])):tt("",!0)}});const Mk=sn(FG,[["__scopeId","data-v-75fe6435"]]),$G={class:"custom-app-header bg-transparent-black-100"},kk=rt({__name:"CustomAppHeader",setup(e){const t=Ei();return(i,r)=>{var s;return V(),pe("div",$G,[ye(Oo,{html:((s=ce(t))==null?void 0:s.customHeader)??"",addTags:["style","link"]},null,8,["html"])])}}}),Pk=e=>(ao("data-v-ad946d69"),e=e(),oo(),e),zG={class:"page-content-block col-span-2 p-4 lg:p-8"},BG={key:1,class:"bg-white p-8 my-8 shadow-sm"},NG={class:"text-4xl text-center font-bold"},jG={key:0,class:"featured-asset-block col-span-1 p-4 lg:p-8"},UG=Pk(()=>de("h2",{class:"text-sm font-bold uppercase mb-2"},"Featured",-1)),VG={class:"mb-4"},HG=Pk(()=>de("p",null," Your account does not have permission to search and browse assets. Please contact your administrator if you believe this is an error. ",-1)),GG=rt({__name:"HomePage",setup(e){const t=Re(null),i=Ei(),r=Le(()=>{var I;return((I=i.instance)==null?void 0:I.userCanSearchAndBrowse)??!1}),s=Le(()=>i.isReady),u={title:"No Home Page",content:"<p>Update your instance to set a Home Page</p>"},d=Le(()=>{var I;return((I=i.instance)==null?void 0:I.featuredAssetId)??null}),l=Le(()=>{var I;return((I=i.instance)==null?void 0:I.featuredAssetText)??""}),m=Re(null);function g(){var I;return(I=i.pages.find(C=>C.title==="Home Page"))==null?void 0:I.id}async function x(I){return I?Hn.getStaticPage(I):u}async function w(I){return I?Hn.getAsset(I):null}return fn(()=>i.fetchStatus,async()=>{if(i.fetchStatus!=="success"||!r.value)return;const I=g();t.value=await x(I),m.value=await w(d.value)},{immediate:!0}),(I,C)=>(V(),je(co,null,{"custom-header":Ce(()=>[ce(i).customHeader?(V(),je(kk,{key:0})):tt("",!0)]),default:Ce(()=>[s.value&&!r.value&&!ce(i).isLoggedIn?(V(),je(vM,{key:0,class:"my-8 mx-4"})):tt("",!0),s.value&&r.value?(V(),pe("div",{key:1,class:kn(["home-page-content flex-1 md:grid max-w-screen-xl w-full mx-auto",{"md:grid-cols-2":!d.value,"md:grid-cols-3":d.value}])},[de("article",zG,[t.value?(V(),je(_r,{key:0,name:"fade"},{default:Ce(()=>{var A;return[t.value.content?(V(),je(Oo,{key:0,html:t.value.content,class:"prose prose-neutral"},null,8,["html"])):(V(),pe("section",BG,[de("h1",NG,xt(((A=ce(i).instance)==null?void 0:A.name)??"Elevator"),1)]))]}),_:1})):tt("",!0)]),d.value?(V(),pe("aside",jG,[UG,de("div",VG,[ye(Oo,{html:l.value},null,8,["html"])]),ye(OG,{assetId:d.value},null,8,["assetId"])])):tt("",!0)],2)):s.value&&!r.value&&ce(i).isLoggedIn?(V(),je(cm,{key:2,title:"Nothing to See Here",class:"my-8 mx-4"},{default:Ce(()=>[HG]),_:1})):tt("",!0),ye(Mk)]),_:1}))}});const WG=sn(GG,[["__scopeId","data-v-ad946d69"]]),qG={class:"h-screen flex flex-col"},ZG={ref:"contentContainer",class:"flex-1 mt-18 md:mt-0 overflow-auto"},Dk=rt({__name:"NoScrollLayout",setup(e){return(t,i)=>(V(),pe("div",qG,[ye(Sk,{class:"top-0 w-full z-20 backdrop-blur-sm"},{default:Ce(()=>[En(t.$slots,"secondaryAppHeader")]),_:3}),de("div",ZG,[En(t.$slots,"default")],512)]))}}),KG={class:"object-viewer relative flex flex-col"},XG=de("h2",{class:"sr-only"},"Object Viewer",-1),YG=["src"],JG={key:1,class:"w-full h-full min-h-[20rem] bg-neutral-400 place-items-center p-8"},QG=de("p",null,"No asset file found.",-1),eW={class:"text-sm"},Lk=rt({__name:"ObjectViewer",props:{fileHandlerId:{}},setup(e){return(t,i)=>(V(),pe("section",KG,[XG,t.fileHandlerId?(V(),pe("iframe",{key:0,class:"object-viewer__iframe w-full flex-1",src:`${ce(si).instance.base.url}/asset/getEmbed/${t.fileHandlerId}`,frameBorder:"0",allowfullscreen:"true"},null,8,YG)):(V(),pe("div",JG,[QG,de("code",eW,"FileHandlerId: "+xt(t.fileHandlerId??"null"),1)]))]))}}),tW=["title"],nW=["innerHTML"],Ok=rt({__name:"PanelLabel",props:{label:{}},setup(e){return(t,i)=>(V(),pe("h1",{class:"header-label font-bold relative text-left",title:t.label},[de("span",{class:"min-w-0 block",innerHTML:t.label},null,8,nW)],8,tW))}}),iW={class:"panel flex flex-col overflow-auto"},rW=["disabled"],sW={key:0},aW={class:"panel__header-utils"},oW={class:"panel__body flex flex-col gap-6 px-4 md:p-8 flex-1"},lW=rt({__name:"Panel",props:{label:{},isOpen:{type:Boolean,default:!0},showToggle:{type:Boolean,default:!0}},emits:["toggle"],setup(e){return(t,i)=>(V(),pe("section",iW,[de("header",{class:kn(["panel__header flex items-center sticky top-0 left-0 justify-between z-10 backdrop-blur-[2px]",{"h-full":!t.isOpen}])},[de("button",{disabled:!t.showToggle,class:"flex items-center p-4 leading-tight gap-4 flex-1",onClick:i[0]||(i[0]=r=>t.$emit("toggle"))},[t.showToggle?(V(),pe("span",sW,[t.isOpen?(V(),je(Ih,{key:0,class:"w-5 h-5"})):tt("",!0),t.isOpen?tt("",!0):(V(),je(O_,{key:1,class:"w-5 h-5"}))])):tt("",!0),En(t.$slots,"header-label",{},()=>[ye(Ok,{label:t.label,isOpen:t.isOpen},null,8,["label","isOpen"])],!0)],8,rW),de("div",aW,[En(t.$slots,"header-utils",{},void 0,!0)])],2),as(de("div",oW,[En(t.$slots,"default",{},void 0,!0)],512),[[sa,t.isOpen]])]))}});const Rk=sn(lW,[["__scopeId","data-v-a57c7f16"]]),cW={class:"tuple__label"},uW={inheritAttrs:!1},dW=rt({...uW,__name:"Tuple",props:{label:{},variant:{default:"stacked"}},setup(e){return(t,i)=>(V(),pe("div",{class:kn(["tuple",{"w-full":t.variant==="stacked","inline-flex items-baseline gap-2":t.variant==="inline"}])},[de("div",cW,[En(t.$slots,"label",{},()=>[de("span",{class:kn(["text-xs block uppercase leading-none mb-1 tracking-wide",{"font-bold":t.variant==="stacked","sr-only":t.variant==="value-only"}])},xt(t.label),3)],!0)]),de("span",Br({class:"tuple__value block"},t.$attrs),[En(t.$slots,"default",{},()=>[Mt(" - ")],!0)],16)],2))}});const Js=sn(dW,[["__scopeId","data-v-304b7d45"]]),hW={key:0},fW=["href","onClick"],pW={key:1},fm=rt({__name:"ClickToSearchLink",props:{linkText:{},widget:{}},setup(e){const t=e,i=lo(),r=Ir(),s=Le(()=>FA(t.linkText,t.widget));async function u(){r.reset();const d=await Hn.getSearchIdForClickToSearch(t.linkText,t.widget);i.push(`/search/s/${d}`)}return(d,l)=>t.widget.clickToSearch?(V(),pe("span",hW,[de("a",{href:s.value,class:"text-blue-600 hover:text-blue-700 hover:underline",onClick:Do(u,["prevent"])},[En(d.$slots,"default",{isClickable:!0})],8,fW)])):(V(),pe("span",pW,[En(d.$slots,"default",{isClickable:!1})]))}}),mW=["innerHTML"],gW=rt({__name:"TextWidget",props:{widget:{},contents:{}},setup(e){function t(i){return i.replace(/(<([^>]+)>)/gi,"")!=i?i:i.replace(/(https?:\/\/[a-zA-Z0-9\-_.:@!~*'(¥);/?&=+$,%#]+)/g,'<a href="$1" target="_blank">$1</a>')}return(i,r)=>(V(),pe("ul",null,[(V(!0),pe(Nt,null,$n(i.contents,(s,u)=>(V(),pe("li",{key:u},[ye(fm,{widget:i.widget,linkText:s.fieldContents},{default:Ce(()=>[de("span",{innerHTML:t(s.fieldContents)},null,8,mW)]),_:2},1032,["widget","linkText"])]))),128))]))}}),vW=["innerHTML"],_W=rt({__name:"SelectItem",props:{selectValues:{},widget:{}},setup(e){const t=e,i=Le(()=>typeof t.selectValues.fieldContents=="string"?[t.selectValues.fieldContents]:t.selectValues.fieldContents);function r(s){var u,d;return(u=t.widget.fieldData.selectGroup)!=null&&u.hasOwnProperty(s)?(d=t.widget.fieldData)==null?void 0:d.selectGroup[s]:s}return(s,u)=>(V(!0),pe(Nt,null,$n(i.value,(d,l)=>(V(),pe("li",{key:l},[ye(fm,{widget:s.widget,linkText:r(d)},{default:Ce(()=>[de("div",{innerHTML:r(d)},null,8,vW)]),_:2},1032,["widget","linkText"])]))),128))}}),yW=rt({__name:"SelectWidget",props:{widget:{},contents:{}},setup(e){return(t,i)=>(V(),pe("ul",null,[(V(!0),pe(Nt,null,$n(t.contents,(r,s)=>(V(),je(_W,{key:s,selectValues:r,widget:t.widget},null,8,["selectValues","widget"]))),128))]))}}),bW=rt({__name:"CheckBoxWidget",props:{widget:{},contents:{}},setup(e){return(t,i)=>(V(),pe("ul",null,[(V(!0),pe(Nt,null,$n(t.contents,(r,s)=>(V(),pe("li",{key:s},[r.fieldContents==!0?(V(),je(pM,{key:0})):(V(),je(iN,{key:1}))]))),128))]))}});/**
  shave - Shave is a javascript plugin that truncates multi-line text within a html element based on set max height
  @version v5.0.2
  @link https://github.com/yowainwright/shave#readme
  @author Jeff Wainwright <yowainwright@gmail.com> (jeffry.in)
  @license MIT
**/function o2(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),s,u=[],d;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)u.push(s.value)}catch(l){d={error:l}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(d)throw d.error}}return u}function l2(e,t,i){if(i||arguments.length===2)for(var r=0,s=t.length,u;r<s;r++)(u||!(r in t))&&(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return e.concat(u||Array.prototype.slice.call(t))}function xW(e){return typeof e=="string"?l2([],o2(document.querySelectorAll(e)),!1):"length"in e?l2([],o2(e),!1):[e]}function wW(e,t,i){if(i===void 0&&(i={}),typeof t>"u"||isNaN(t))throw Error("maxHeight is required");var r=xW(e);if(r.length)for(var s=i.character,u=s===void 0?"…":s,d=i.classname,l=d===void 0?"js-shave":d,m=i.spaces,g=m===void 0?!0:m,x=i.charclassname,w=x===void 0?"js-shave-char":x,I=i.link,C=I===void 0?{}:I,A=typeof g=="boolean"?g:!0,L=C&&JSON.stringify(C)!=="{}"&&C.href,$=L?"a":"span",F=0;F<r.length;F+=1){var z=r[F],ee=z.style,H=z.querySelector("."+l),Q=z.textContent===void 0?"innerText":"textContent";H&&(z.removeChild(z.querySelector("."+w)),z[Q]=z[Q]);var ae=z[Q],be=A?ae.split(" "):ae;if(!(be.length<2)){var te=ee.height;ee.height="auto";var G=ee.maxHeight;if(ee.maxHeight="none",z.offsetHeight<=t){ee.height=te,ee.maxHeight=G;continue}var U=L&&C.textContent?C.textContent:u,B=document.createElement($),ie={className:w,textContent:U};for(var X in ie)B[X]=ie[X],B.textContent=u;if(L)for(var ne in C)B[ne]=C[ne];for(var Ee=be.length-1,Ie=0,Xe=void 0;Ie<Ee;)Xe=Ie+Ee+1>>1,z[Q]=A?be.slice(0,Xe).join(" "):be.slice(0,Xe),z.insertAdjacentElement("beforeend",B),z.offsetHeight>t?Ee=Xe-1:Ie=Xe;z[Q]=A?be.slice(0,Ee).join(" "):be.slice(0,Ee),z.insertAdjacentElement("beforeend",B);var lt=A?" ".concat(be.slice(Ee).join(" ")):be.slice(Ee),st=document.createTextNode(lt),$t=document.createElement("span");$t.classList.add(l),$t.style.display="none",$t.appendChild(st),z.insertAdjacentElement("beforeend",$t),ee.height=te,ee.maxHeight=G}}}const SW=["innerHTML"],TW=["innerHTML"],EW=rt({__name:"TextAreaItem",props:{fieldContents:{},widget:{},textTruncationHeight:{default:si.instance.textAreaItem.defaultTextTruncationHeight}},setup(e){const t=e,i=Re(!1),r=Re(null),s=Re(!1),u=qA(()=>{d()},50);function d(){r.value&&(wW([r.value],t.textTruncationHeight),s.value=r.value.querySelector(".js-shave")!==null)}return k_(r,u),Fn(()=>{d()}),(l,m)=>(V(),pe(Nt,null,[i.value?tt("",!0):(V(),pe("div",{key:0,ref_key:"truncateText",ref:r,innerHTML:l.fieldContents},null,8,SW)),i.value?(V(),pe("div",{key:1,innerHTML:l.fieldContents},null,8,TW)):tt("",!0),s.value?(V(),pe("button",{key:2,class:"flex items-center uppercase text-xs text-blue-600",onClick:m[0]||(m[0]=g=>i.value=!i.value)},[Mt(" Show "+xt(i.value?"Less":"More")+" ",1),i.value?(V(),je(O_,{key:0})):(V(),je(Ih,{key:1}))])):tt("",!0)],64))}}),IW={class:"text-area-widget flex flex-col gap-4"},CW=rt({__name:"TextAreaWidget",props:{widget:{},contents:{}},setup(e){return(t,i)=>(V(),pe("ul",IW,[(V(!0),pe(Nt,null,$n(t.contents,(r,s)=>(V(),pe("li",{key:s},[ye(EW,{widget:t.widget,fieldContents:r.fieldContents??""},null,8,["widget","fieldContents"])]))),128))]))}}),AW=rt({__name:"DateWidgetItem",props:{dateContent:{},widget:{}},setup(e){const t=e,i=Le(()=>{let r="";return r+=t.dateContent.start.text,t.dateContent.range&&(r+=" - "+t.dateContent.end.text),r});return(r,s)=>(V(),je(fm,{widget:r.widget,linkText:i.value},{default:Ce(()=>[r.dateContent.label?(V(),je(Js,{key:0,label:r.dateContent.label,variant:"inline"},{default:Ce(()=>[Mt(xt(i.value),1)]),_:1},8,["label"])):(V(),pe(Nt,{key:1},[Mt(xt(i.value),1)],64))]),_:1},8,["widget","linkText"]))}}),MW=rt({__name:"DateWidget",props:{widget:{},contents:{}},setup(e){return(t,i)=>(V(),pe("ul",null,[(V(!0),pe(Nt,null,$n(t.contents,(r,s)=>(V(),pe("li",{key:s},[ye(AW,{dateContent:r,widget:t.widget},null,8,["dateContent","widget"])]))),128))]))}}),Fk=(e,t)=>{let i=[];for(const r in e)t||i.push(r),typeof e[r]=="object"&&(i=i.concat(Fk(e[r],!t)));return i.flat()},kW=e=>e.filter((t,i,r)=>r.indexOf(t)===i),PW={key:0},DW=rt({__name:"MultiSelectItem",props:{widget:{},content:{}},setup(e){const t=e,i=Le(()=>kW(Fk(t.widget.fieldData,!1)).map(r)),r=u=>u.replace(/[^a-zA-Z0-9]+/,""),s=u=>{const d=[];for(const l of i.value)if(d.push(t.content.fieldContents[l]),l==u)return d.join(" : ");return d.join(" : ")};return(u,d)=>(V(),pe("ul",null,[(V(!0),pe(Nt,null,$n(i.value,l=>(V(),pe(Nt,{key:l},[u.content.fieldContents[l]?(V(),pe("li",PW,[ye(fm,{widget:u.widget,linkText:s(l)},{default:Ce(()=>[Mt(xt(u.content.fieldContents[l]),1)]),_:2},1032,["widget","linkText"])])):tt("",!0)],64))),128))]))}});const LW=sn(DW,[["__scopeId","data-v-34a7054d"]]),OW=rt({__name:"MultiSelectWidget",props:{widget:{},contents:{}},setup(e){return(t,i)=>(V(),pe("ul",null,[(V(!0),pe(Nt,null,$n(t.contents,(r,s)=>(V(),pe("li",{key:s},[ye(LW,{widget:t.widget,content:r},null,8,["widget","content"])]))),128))]))}}),RW={class:"modal-contents__header flex justify-between items-start p-4 md:p-8"},FW={class:"flex-1 font-bold text-2xl mr-12 flex items-center"},$W={class:"modal-contents__body flex-1 overflow-auto p-4 md:p-8"},zW={key:0,class:"modal-contents__footer"},BW=rt({__name:"Modal",props:{label:{default:""},isOpen:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:t}){const i=e,r=Re();function s(u){i.isOpen&&u.keyCode===27&&t("close")}return Fn(()=>{document.addEventListener("keydown",s)}),Wi(()=>document.removeEventListener("keydown",s)),Oi(pk,Le(()=>i.isOpen)),(u,d)=>(V(),je(tm,{to:"body"},[de("div",{ref_key:"modal",ref:r,class:kn({"modal flex bg-transparent-black-700 fixed inset-0 z-50 justify-center items-center p-4":u.isOpen,hidden:!u.isOpen}),onClick:d[1]||(d[1]=Do(l=>u.$emit("close"),["self"]))},[de("div",Br({class:"modal-contents shadow-lg relative rounded-2xl flex flex-col overflow-hidden max-w-[60rem] max-h-[90vh] m-auto w-full"},u.$attrs),[ye(_M,{class:"absolute right-4 top-4 md:top-8 md:right-8",onClick:d[0]||(d[0]=l=>u.$emit("close"))}),de("header",RW,[de("h2",FW,[En(u.$slots,"label",{},()=>[Mt(xt(u.label),1)],!0)])]),de("div",$W,[En(u.$slots,"default",{},void 0,!0)]),u.$slots.footer?(V(),pe("div",zW,[En(u.$slots,"footer",{},void 0,!0)])):tt("",!0)],16)],2)]))}});const xc=sn(BW,[["__scopeId","data-v-035831a8"]]),NW={class:"accordion w-full mt-2 overflow-hidden rounded"},jW=["label"],UW={class:"place-items-center flex p-4"},VW={key:0,class:"accordion__body flex flex-col gap-4 px-4 pt-2 pb-4 border-t"},HW=rt({__name:"Accordion",props:{label:{default:"-"}},emits:["toggle","open"],setup(e,{emit:t}){const i=Re(!1);function r(){i.value=!i.value,t("toggle"),i.value&&t("open")}return(s,u)=>(V(),pe("div",NW,[de("button",{class:"accordion__header flex items-center justify-between w-full gap-2 border-none rounded-b-none",label:i.value?"close":"open",onClick:r},[En(s.$slots,"label",{},()=>[de("span",{class:kn(["flex-1 block p-4 text-left",{"font-bold ":i.value,"font-normal":!i.value}])},xt(ce(Qa)(s.label)),3)],!0),de("div",UW,[En(s.$slots,"label-icon",{},()=>[i.value?(V(),je(O_,{key:0,class:"w-5 h-5"})):(V(),je(Ih,{key:1,class:"w-5 h-5"}))],!0)])],8,jW),i.value?(V(),pe("div",VW,[En(s.$slots,"default",{},void 0,!0)])):tt("",!0)]))}});const $k=sn(HW,[["__scopeId","data-v-fc17cd65"]]),GW={key:0,class:"flex gap-4 p-4 pr-0 flex-wrap"},WW={key:1,class:"p-4"},qW={key:0,class:"w-min flex gap-4 my-4"},ZW={class:"w-min flex gap-4 my-4"},KW=rt({__name:"LocationItem",props:{locationContent:{},widget:{}},setup(e){const t=e,i=ic(()=>Za(()=>Promise.resolve().then(()=>B1),void 0)),r=ic(()=>Za(()=>import("./MapMarker-53f700ab.js"),[])),s=Le(()=>{var I,C;return((C=(I=t.locationContent.loc)==null?void 0:I.coordinates)==null?void 0:C[1])??0}),u=Le(()=>{var I,C;return((C=(I=t.locationContent.loc)==null?void 0:I.coordinates)==null?void 0:C[0])??0}),d=Le(()=>u.value?u.value.toFixed(4):"-"),l=Le(()=>s.value?s.value.toFixed(4):"-"),m=Le(()=>({lng:u.value,lat:s.value})),g=Le(()=>(t.locationContent.locationLabel||t.locationContent.address)??null),x=Le(()=>u.value!==0&&s.value!==0),w=Re(!1);return(I,C)=>(V(),pe(Nt,null,[ye($k,null,{label:Ce(()=>[g.value?(V(),pe("span",WW,xt(g.value),1)):(V(),pe("div",GW,[ye(Js,{label:"Lat",class:"w-auto",variant:"inline"},{default:Ce(()=>[Mt(xt(l.value),1)]),_:1}),ye(Js,{label:"Lng",class:"w-auto",variant:"inline"},{default:Ce(()=>[Mt(xt(d.value),1)]),_:1})]))]),default:Ce(()=>[g.value?(V(),pe("div",qW,[ye(Js,{label:"Latitude",class:"w-auto"},{default:Ce(()=>[Mt(xt(l.value),1)]),_:1}),ye(Js,{label:"Longitude",class:"w-auto"},{default:Ce(()=>[Mt(xt(d.value),1)]),_:1})])):tt("",!0),x.value?(V(),je(ai,{key:1,icon:"map",iconPosition:"start",onClick:C[0]||(C[0]=A=>w.value=!0)},{default:Ce(()=>[Mt("Show Location")]),_:1})):tt("",!0)]),_:1}),ye(xc,{isOpen:w.value,label:g.value,onClose:C[1]||(C[1]=A=>w.value=!1)},{default:Ce(()=>[ye(ce(i),{center:m.value,zoom:10,mapStyle:"streets",apiKey:ce(si).arcgis.apiKey,class:"p-1 rounded",mapContainerClass:"!h-[50vh]"},{default:Ce(()=>[ye(ce(r),{id:`locationItem-${g.value}`,lng:m.value.lng,lat:m.value.lat},null,8,["id","lng","lat"])]),_:1},8,["center","apiKey"]),de("div",ZW,[ye(Js,{label:"Latitude",class:"w-auto"},{default:Ce(()=>[Mt(xt(l.value),1)]),_:1}),ye(Js,{label:"Longitude",class:"w-auto"},{default:Ce(()=>[Mt(xt(d.value),1)]),_:1})])]),_:1},8,["isOpen","label"])],64))}}),XW=rt({__name:"LocationWidget",props:{widget:{},contents:{}},setup(e){return(t,i)=>(V(),pe("ul",null,[(V(!0),pe(Nt,null,$n(t.contents,(r,s)=>(V(),pe("li",{key:s},[ye(KW,{widget:t.widget,locationContent:r},null,8,["widget","locationContent"])]))),128))]))}}),YW={class:"thumbnail-image__icon absolute z-10 bg-transparent-white-500 rounded-full w-12 h-12 flex justify-center items-center backdrop-blur-sm top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 scale-0 group-hover:scale-100 transition-all"},JW={key:0,class:"backdrop-blur-md bg-transparent-white-500 text-neutral-900 flex absolute bottom-1 right-1 z-10 rounded-full justify-center items-center p-1 w-6 h-6"},QW=rt({__name:"ThumbnailImage",props:{src:{},alt:{},href:{default:void 0},fileType:{default:void 0}},setup(e){const t=e,i=["mp3","aiff","aif","m4a","wav","wave","wma"],r=["mov","mp4","m4v","mts","mkv","avi","mpeg","mpg","m2t","m2ts","dv","vob","mxf","wmv"],s=Le(()=>t.fileType?r.includes(t.fileType.toLowerCase()):!1),u=Le(()=>t.fileType?i.includes(t.fileType.toLowerCase()):!1);return(d,l)=>(V(),je(_c(d.href?"a":"div"),{href:d.href,class:"thumbnail-image block rounded overflow-hidden w-24 aspect-square relative border border-transparent-black-200 shadow-sm group transition-all"},{default:Ce(()=>[de("div",YW,[ye(ce(Cu),{class:"text-neutral-900"})]),ye(Mu,{src:d.src,alt:d.alt,class:"group-hover:scale-110 w-full h-full object-cover transition-all group-hover:opacity-100 opacity-80"},null,8,["src","alt"]),s.value||u.value?(V(),pe("div",JW,[u.value?(V(),je(ce(I6),{key:0})):tt("",!0),s.value?(V(),je(ce(rj),{key:1})):tt("",!0)])):tt("",!0),En(d.$slots,"default",{},void 0,!0)]),_:3},8,["href"]))}});const zk=sn(QW,[["__scopeId","data-v-975e84a0"]]),eq={class:"upload-widget flex gap-2 flex-wrap mt-2"},tq=["title","onClick"],nq=rt({__name:"UploadWidget",props:{widget:{},contents:{}},setup(e){const t=e,i=Lo(),r=g=>i.activeFileObjectId===g,s=Le(()=>t.contents.findIndex(g=>r(g.fileId))),u=Le(()=>s.value!==-1);function d(){const g=(s.value-1+t.contents.length)%t.contents.length;i.activeFileObjectId=t.contents[g].fileId}function l(){const g=(s.value+1)%t.contents.length;i.activeFileObjectId=t.contents[g].fileId}function m(g){if(u.value){if(g.key==="ArrowLeft")return d();if(g.key==="ArrowRight")return l()}}return Fn(()=>{t.contents.length<2||window.addEventListener("keydown",m)}),oa(()=>{window.removeEventListener("keydown",m)}),(g,x)=>(V(),pe("div",eq,[(V(!0),pe(Nt,null,$n(g.contents,(w,I)=>(V(),pe("button",{key:I,title:w.fileDescription,class:kn(["thumbnail-related-asset-widget flex flex-col rounded-md border border-transparent p-1 no-underline hover:no-underline hover:bg-blue-50 hover:text-blue-600 w-24 text-neutral-600",{"opacity-80 hover:opacity-100 hover:border-blue-600":!r(w.fileId),"ring ring-offset-1 ring-blue-600 hover:border-transparent opacity-100 bg-blue-50":r(w.fileId)}]),onClick:C=>ce(i).activeFileObjectId=w.fileId},[ye(zk,{src:`${ce(si).instance.base.url}/fileManager/tinyImageByFileId/${w.fileId}/true`,alt:w.fileDescription,fileType:w.fileType,class:"thumbnail-related-asset-widget__image max-w-full"},null,8,["src","alt","fileType"]),w.fileDescription?(V(),je(Oo,{key:0,class:"whitespace-nowrap text-xs mt-1 truncate overflow-hidden w-full text-center",html:w.fileDescription},null,8,["html"])):tt("",!0)],10,tq))),128))]))}}),iq=rt({__name:"Chip",props:{href:{default:void 0}},setup(e){return(t,i)=>(V(),je(_c(t.href?"a":"span"),{href:t.href,class:kn(["chip inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-transparent-black-100 hover:no-underline no-underline text-neutral-700",{"chip--is-clickable border border-blue-700  bg-blue-100 text-blue-700 cursor-pointer hover:bg-blue-700 hover:text-white transition-colors ease-in-out":t.href}])},{default:Ce(()=>[En(t.$slots,"default",{},void 0,!0)]),_:3},8,["href","class"]))}});const Gv=sn(iq,[["__scopeId","data-v-f8a00a29"]]),rq={class:"flex gap-2 flex-wrap"},sq=rt({__name:"TagWidget",props:{widget:{},contents:{}},setup(e){return(t,i)=>(V(),pe("ul",null,[(V(!0),pe(Nt,null,$n(t.contents,(r,s)=>(V(),pe("li",{key:s},[de("ul",rq,[(V(!0),pe(Nt,null,$n(r.tags,(u,d)=>(V(),pe("li",{key:d},[ye(fm,{linkText:u,widget:t.widget},{default:Ce(({isClickable:l})=>[ye(Gv,{class:kn({"chip--is-clickable border border-blue-700  bg-blue-100 text-blue-700 cursor-pointer hover:bg-blue-700 hover:text-white transition-colors ease-in-out":l})},{default:Ce(()=>[Mt(xt(u),1)]),_:2},1032,["class"])]),_:2},1032,["linkText","widget"])]))),128))])]))),128))]))}});function U_(e){var t;return((t=e==null?void 0:e.relatedAssetTitle)==null?void 0:t[0])??"(No Title)"}const aq={class:"accordion-related-asset-widget-item w-full max-w-lg"},oq={key:0,class:"flex items-center flex-1 w-full gap-4 py-2 pl-2 pr-4"},lq=["src","alt"],cq=rt({__name:"AccordionRelatedAssetWidgetItem",props:{assetId:{},assetCacheItem:{}},setup(e){const t=e,i=Le(()=>U_(t.assetCacheItem));return(r,s)=>{var u;return V(),pe("div",aq,[ye($k,{label:i.value},rC({default:Ce(()=>[ye(pm,{assetId:r.assetId},null,8,["assetId"]),En(r.$slots,"default")]),_:2},[(u=r.assetCacheItem)!=null&&u.primaryHandler?{name:"label",fn:Ce(()=>{var d;return[(d=r.assetCacheItem)!=null&&d.primaryHandler?(V(),pe("div",oq,[r.assetCacheItem.primaryHandler?(V(),pe("img",{key:0,src:ce(RA)(r.assetCacheItem.primaryHandler),alt:i.value,class:"aspect-square h-10 overflow-hidden rounded",loading:"lazy"},null,8,lq)):tt("",!0),de("h3",null,xt(i.value),1)])):tt("",!0)]}),key:"0"}:void 0]),1032,["label"])])}}});function V_(e){const t=Re(null),i=Re(null),r=Le(()=>t.value?Eu(t.value):"");async function s(){const{asset:u,template:d}=await Hn.getAssetWithTemplate(e.value);t.value=u,i.value=d}return fn(e,s,{immediate:!0}),{asset:t,template:i,title:r}}const uq={key:0,class:"collapsed-inline-related-asset-widget-item flex flex-col"},dq=rt({__name:"CollapsedInlineRelatedAssetWidgetItem",props:{assetId:{},assetCacheItem:{}},setup(e){const t=e,i=Le(()=>U_(t.assetCacheItem)),r=Le(()=>t.assetId),{asset:s}=V_(r);return(u,d)=>ce(s)?(V(),pe("section",uq,[de("h3",null,xt(i.value),1),ye(pm,{assetId:u.assetId},null,8,["assetId"])])):tt("",!0)}});const hq=sn(dq,[["__scopeId","data-v-fdc8ade2"]]),fq={class:"thumbnail-image__icon bg-transparent-white-500 backdrop-blur-sm top-1/2 left-1/2 group-hover:scale-100 absolute z-10 flex items-center justify-center w-12 h-12 transition-all scale-0 -translate-x-1/2 -translate-y-1/2 rounded-full"},pq={class:"group-hover:scale-110 flex flex-col items-center justify-center transition-all"},mq={class:"whitespace-nowrap text-ellipsis max-w-full px-2 overflow-hidden text-xs"},gq=rt({__name:"ThumbnailGeneric",props:{isActive:{type:Boolean}},setup(e){return(t,i)=>(V(),pe("div",{class:kn(["thumbnail-generic aspect-square hover:shadow-md border-transparent-black-200 hover:opacity-100 group relative inline-flex flex-col items-center justify-center w-24 transition-all border rounded shadow-sm opacity-75",{"thumbnail-generic--is-active ring ring-offset-1 ring-blue-600":t.isActive}])},[de("div",fq,[ye(Cu,{class:"text-neutral-900"})]),de("div",pq,[ye(Fp,{class:"thumbnail-generic__icon"}),de("div",mq,[En(t.$slots,"default",{},void 0,!0)])])],2))}});const vq=sn(gq,[["__scopeId","data-v-9378db69"]]),c2=rt({__name:"ThumbnailRelatedAssetWidgetItem",props:{assetId:{},assetCacheItem:{},isActiveObject:{type:Boolean}},setup(e){const t=e,i=Le(()=>U_(t.assetCacheItem));return(r,s)=>{const u=y_("RouterLink");return V(),je(u,{title:i.value,class:kn(["thumbnail-related-asset-widget flex flex-col rounded-md border border-transparent p-1 no-underline hover:no-underline hover:bg-blue-50 hover:text-blue-600 w-24 text-neutral-600",{"opacity-80 hover:opacity-100 hover:border-blue-600":!r.isActiveObject,"ring ring-offset-1 ring-blue-600 hover:border-transparent opacity-100 bg-blue-50":r.isActiveObject}]),to:`#${r.assetId}`},{default:Ce(()=>[r.assetCacheItem.primaryHandler?(V(),je(zk,{key:0,src:ce(RA)(r.assetCacheItem.primaryHandler),alt:i.value,class:"thumbnail-related-asset-widget__image max-w-full"},null,8,["src","alt"])):(V(),je(vq,{key:1,isActive:r.isActiveObject},null,8,["isActive"])),ye(Oo,{class:"whitespace-nowrap text-xs mt-1 truncate overflow-hidden w-full text-center",html:i.value},null,8,["html"])]),_:1},8,["title","class","to"])}}}),_q={class:"linked-related-asset-widget-item"},B0=rt({__name:"LinkedRelatedAssetWidgetItem",props:{assetId:{},assetCacheItem:{}},setup(e){const t=e,i=Le(()=>U_(t.assetCacheItem)),r=Le(()=>hl(t.assetId));return(s,u)=>(V(),pe("div",_q,[ye(os,{to:r.value},{default:Ce(()=>[Mt(xt(i.value),1)]),_:1},8,["to"])]))}}),Bk=rt({__name:"ArrowButton",setup(e){return(t,i)=>(V(),je(ai,Br({class:"arrow-button !rounded-full !p-2 cursor-pointer",variant:"primary"},t.$attrs),{default:Ce(()=>[En(t.$slots,"default"),ye(Cu)]),_:3},16))}}),yq={class:"flex items-center justify-end gap-2"},bq=rt({__name:"RelatedAssetWidget",props:{widget:{},contents:{},asset:{}},setup(e){const t=e,i=Lo(),r=Le(()=>t.widget.fieldData.collapseNestedChildren?hq:t.widget.fieldData.thumbnailView?c2:t.widget.fieldData.nestData?cq:B0),s=Le(()=>t.contents.filter(w=>!!w.targetAssetId)),u=Le(()=>s.value.findIndex(w=>w.targetAssetId===i.activeObjectId)),d=Le(()=>u.value!==-1);function l(){const w=(u.value-1+t.contents.length)%t.contents.length,I=s.value[w].targetAssetId;i.setActiveObject(I)}function m(){const w=(u.value+1)%t.contents.length,I=s.value[w].targetAssetId;i.setActiveObject(I)}function g(w){if(d.value){if(w.key==="ArrowLeft")return l();if(w.key==="ArrowRight")return m()}}const x=Le(()=>r.value===c2);return Fn(()=>{!x.value||s.value.length<2||window.addEventListener("keydown",g)}),oa(()=>{window.removeEventListener("keydown",g)}),(w,I)=>(V(),pe("div",{class:kn(["related-asset-widget flex flex-wrap w-full",{"flex-col gap-1 leading-5":r.value===B0,"gap-2":r.value!==B0}])},[(V(!0),pe(Nt,null,$n(s.value,C=>{var A;return V(),je(_c(r.value),{key:C.targetAssetId,isActiveObject:ce(i).activeObjectId===C.targetAssetId,assetId:C.targetAssetId,assetCacheItem:(A=w.asset.relatedAssetCache)==null?void 0:A[C.targetAssetId],label:C.label??""},{default:Ce(()=>[de("div",yq,[ye(Bk,{to:`/asset/viewAsset/${C.targetAssetId}`},null,8,["to"])])]),_:2},1032,["isActiveObject","assetId","assetCacheItem","label"])}),128))],2))}}),xq=rt({__name:"Widget",props:{widget:{},asset:{}},setup(e){const t=e,i=Le(()=>b1({asset:t.asset,widget:t.widget})),r={text:gW,select:yW,checkbox:bW,"text area":CW,date:MW,multiselect:OW,location:XW,upload:nq,"tag list":sq,"related asset":bq};function s(u){return r[u]||null}return(u,d)=>(V(),je(Js,{label:u.widget.label},{default:Ce(()=>[s(u.widget.type)?(V(),je(_c(s(u.widget.type)),{key:0,widget:u.widget,contents:i.value,asset:u.asset},null,8,["widget","contents","asset"])):tt("",!0)]),_:1},8,["label"]))}}),wq={key:0,class:"widget-list flex flex-col"},Sq=rt({__name:"WidgetList",props:{assetId:{}},setup(e){const t=e,i=Le(()=>t.assetId),{asset:r,template:s}=V_(i),u=Le(()=>UF({asset:r.value,template:s.value}));return(d,l)=>(V(),je(_r,{name:"fade"},{default:Ce(()=>[ce(r)&&ce(s)?(V(),pe("div",wq,[(V(!0),pe(Nt,null,$n(u.value,m=>(V(),je(xq,{key:m.widgetId,widget:m,asset:ce(r)},null,8,["widget","asset"]))),128))])):tt("",!0)]),_:1}))}});const pm=sn(Sq,[["__scopeId","data-v-aa3a6e37"]]);function sx(e,t,i){var r,s,u,d,l;t==null&&(t=100);function m(){var x=Date.now()-d;x<t&&x>=0?r=setTimeout(m,t-x):(r=null,i||(l=e.apply(u,s),u=s=null))}var g=function(){u=this,s=arguments,d=Date.now();var x=i&&!r;return r||(r=setTimeout(m,t)),x&&(l=e.apply(u,s),u=s=null),l};return g.clear=function(){r&&(clearTimeout(r),r=null)},g.flush=function(){r&&(l=e.apply(u,s),u=s=null,clearTimeout(r),r=null)},g}sx.debounce=sx;var N0=sx;function Tq(e,t,i){Gi(e)?fn(e,(r,s)=>{s==null||s.removeEventListener(t,i),r==null||r.addEventListener(t,i)}):Fn(()=>{e.addEventListener(t,i)}),oa(()=>{var r;(r=ce(e))===null||r===void 0||r.removeEventListener(t,i)})}function Eq(e,t){const i="pointerdown";return typeof window>"u"||!window?void 0:Tq(window,i,s=>{const u=ce(e);u&&(u===s.target||s.composedPath().includes(u)||t(s))})}function Iq(e,t,i){let r=null;const s=Re(!1);Fn(()=>{(e.content!==void 0||i.value)&&(s.value=!0),r=new MutationObserver(u),r.observe(t.value,{childList:!0,subtree:!0})}),oa(()=>r.disconnect()),fn(i,d=>{d?s.value=!0:s.value=!1});const u=()=>{e.content?s.value=!0:s.value=!1};return{hasContent:s}}function uh(e,t){var i=e.getBoundingClientRect(),r=1,s=1;return{width:i.width/r,height:i.height/s,top:i.top/s,right:i.right/r,bottom:i.bottom/s,left:i.left/r,x:i.left/r,y:i.top/s}}function uo(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function N1(e){var t=uo(e),i=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:i,scrollTop:r}}function Np(e){var t=uo(e).Element;return e instanceof t||e instanceof Element}function Ta(e){var t=uo(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Nk(e){if(typeof ShadowRoot>"u")return!1;var t=uo(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Cq(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Aq(e){return e===uo(e)||!Ta(e)?N1(e):Cq(e)}function Ro(e){return e?(e.nodeName||"").toLowerCase():null}function wc(e){return((Np(e)?e.ownerDocument:e.document)||window.document).documentElement}function j1(e){return uh(wc(e)).left+N1(e).scrollLeft}function fl(e){return uo(e).getComputedStyle(e)}function U1(e){var t=fl(e),i=t.overflow,r=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+s+r)}function Mq(e){var t=e.getBoundingClientRect(),i=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return i!==1||r!==1}function kq(e,t,i){i===void 0&&(i=!1);var r=Ta(t);Ta(t)&&Mq(t);var s=wc(t),u=uh(e),d={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!i)&&((Ro(t)!=="body"||U1(s))&&(d=Aq(t)),Ta(t)?(l=uh(t),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=j1(s))),{x:u.left+d.scrollLeft-l.x,y:u.top+d.scrollTop-l.y,width:u.width,height:u.height}}function V1(e){var t=uh(e),i=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:r}}function H_(e){return Ro(e)==="html"?e:e.assignedSlot||e.parentNode||(Nk(e)?e.host:null)||wc(e)}function jk(e){return["html","body","#document"].indexOf(Ro(e))>=0?e.ownerDocument.body:Ta(e)&&U1(e)?e:jk(H_(e))}function _p(e,t){var i;t===void 0&&(t=[]);var r=jk(e),s=r===((i=e.ownerDocument)==null?void 0:i.body),u=uo(r),d=s?[u].concat(u.visualViewport||[],U1(r)?r:[]):r,l=t.concat(d);return s?l:l.concat(_p(H_(d)))}function Pq(e){return["table","td","th"].indexOf(Ro(e))>=0}function u2(e){return!Ta(e)||fl(e).position==="fixed"?null:e.offsetParent}function Dq(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,i=navigator.userAgent.indexOf("Trident")!==-1;if(i&&Ta(e)){var r=fl(e);if(r.position==="fixed")return null}for(var s=H_(e);Ta(s)&&["html","body"].indexOf(Ro(s))<0;){var u=fl(s);if(u.transform!=="none"||u.perspective!=="none"||u.contain==="paint"||["transform","perspective"].indexOf(u.willChange)!==-1||t&&u.willChange==="filter"||t&&u.filter&&u.filter!=="none")return s;s=s.parentNode}return null}function mm(e){for(var t=uo(e),i=u2(e);i&&Pq(i)&&fl(i).position==="static";)i=u2(i);return i&&(Ro(i)==="html"||Ro(i)==="body"&&fl(i).position==="static")?t:i||Dq(e)||t}var Ea="top",io="bottom",ro="right",Ia="left",H1="auto",gm=[Ea,io,ro,Ia],dh="start",jp="end",Lq="clippingParents",Uk="viewport",Uf="popper",Oq="reference",d2=gm.reduce(function(e,t){return e.concat([t+"-"+dh,t+"-"+jp])},[]),Vk=[].concat(gm,[H1]).reduce(function(e,t){return e.concat([t,t+"-"+dh,t+"-"+jp])},[]),Rq="beforeRead",Fq="read",$q="afterRead",zq="beforeMain",Bq="main",Nq="afterMain",jq="beforeWrite",Uq="write",Vq="afterWrite",Hq=[Rq,Fq,$q,zq,Bq,Nq,jq,Uq,Vq];function Gq(e){var t=new Map,i=new Set,r=[];e.forEach(function(u){t.set(u.name,u)});function s(u){i.add(u.name);var d=[].concat(u.requires||[],u.requiresIfExists||[]);d.forEach(function(l){if(!i.has(l)){var m=t.get(l);m&&s(m)}}),r.push(u)}return e.forEach(function(u){i.has(u.name)||s(u)}),r}function Wq(e){var t=Gq(e);return Hq.reduce(function(i,r){return i.concat(t.filter(function(s){return s.phase===r}))},[])}function qq(e){var t;return function(){return t||(t=new Promise(function(i){Promise.resolve().then(function(){t=void 0,i(e())})})),t}}function Mo(e){return e.split("-")[0]}function Zq(e){var t=e.reduce(function(i,r){var s=i[r.name];return i[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,i},{});return Object.keys(t).map(function(i){return t[i]})}function Kq(e){var t=uo(e),i=wc(e),r=t.visualViewport,s=i.clientWidth,u=i.clientHeight,d=0,l=0;return r&&(s=r.width,u=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(d=r.offsetLeft,l=r.offsetTop)),{width:s,height:u,x:d+j1(e),y:l}}var lc=Math.max,Up=Math.min,Hg=Math.round;function Xq(e){var t,i=wc(e),r=N1(e),s=(t=e.ownerDocument)==null?void 0:t.body,u=lc(i.scrollWidth,i.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),d=lc(i.scrollHeight,i.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),l=-r.scrollLeft+j1(e),m=-r.scrollTop;return fl(s||i).direction==="rtl"&&(l+=lc(i.clientWidth,s?s.clientWidth:0)-u),{width:u,height:d,x:l,y:m}}function Hk(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&Nk(i)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ax(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Yq(e){var t=uh(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function h2(e,t){return t===Uk?ax(Kq(e)):Ta(t)?Yq(t):ax(Xq(wc(e)))}function Jq(e){var t=_p(H_(e)),i=["absolute","fixed"].indexOf(fl(e).position)>=0,r=i&&Ta(e)?mm(e):e;return Np(r)?t.filter(function(s){return Np(s)&&Hk(s,r)&&Ro(s)!=="body"}):[]}function Qq(e,t,i){var r=t==="clippingParents"?Jq(e):[].concat(t),s=[].concat(r,[i]),u=s[0],d=s.reduce(function(l,m){var g=h2(e,m);return l.top=lc(g.top,l.top),l.right=Up(g.right,l.right),l.bottom=Up(g.bottom,l.bottom),l.left=lc(g.left,l.left),l},h2(e,u));return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d}function hh(e){return e.split("-")[1]}function G1(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Gk(e){var t=e.reference,i=e.element,r=e.placement,s=r?Mo(r):null,u=r?hh(r):null,d=t.x+t.width/2-i.width/2,l=t.y+t.height/2-i.height/2,m;switch(s){case Ea:m={x:d,y:t.y-i.height};break;case io:m={x:d,y:t.y+t.height};break;case ro:m={x:t.x+t.width,y:l};break;case Ia:m={x:t.x-i.width,y:l};break;default:m={x:t.x,y:t.y}}var g=s?G1(s):null;if(g!=null){var x=g==="y"?"height":"width";switch(u){case dh:m[g]=m[g]-(t[x]/2-i[x]/2);break;case jp:m[g]=m[g]+(t[x]/2-i[x]/2);break}}return m}function Wk(){return{top:0,right:0,bottom:0,left:0}}function qk(e){return Object.assign({},Wk(),e)}function Zk(e,t){return t.reduce(function(i,r){return i[r]=e,i},{})}function W1(e,t){t===void 0&&(t={});var i=t,r=i.placement,s=r===void 0?e.placement:r,u=i.boundary,d=u===void 0?Lq:u,l=i.rootBoundary,m=l===void 0?Uk:l,g=i.elementContext,x=g===void 0?Uf:g,w=i.altBoundary,I=w===void 0?!1:w,C=i.padding,A=C===void 0?0:C,L=qk(typeof A!="number"?A:Zk(A,gm)),$=x===Uf?Oq:Uf,F=e.rects.popper,z=e.elements[I?$:x],ee=Qq(Np(z)?z:z.contextElement||wc(e.elements.popper),d,m),H=uh(e.elements.reference),Q=Gk({reference:H,element:F,strategy:"absolute",placement:s}),ae=ax(Object.assign({},F,Q)),be=x===Uf?ae:H,te={top:ee.top-be.top+L.top,bottom:be.bottom-ee.bottom+L.bottom,left:ee.left-be.left+L.left,right:be.right-ee.right+L.right},G=e.modifiersData.offset;if(x===Uf&&G){var U=G[s];Object.keys(te).forEach(function(B){var ie=[ro,io].indexOf(B)>=0?1:-1,X=[Ea,io].indexOf(B)>=0?"y":"x";te[B]+=U[X]*ie})}return te}var f2={placement:"bottom",modifiers:[],strategy:"absolute"};function p2(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function eZ(e){e===void 0&&(e={});var t=e,i=t.defaultModifiers,r=i===void 0?[]:i,s=t.defaultOptions,u=s===void 0?f2:s;return function(l,m,g){g===void 0&&(g=u);var x={placement:"bottom",orderedModifiers:[],options:Object.assign({},f2,u),modifiersData:{},elements:{reference:l,popper:m},attributes:{},styles:{}},w=[],I=!1,C={state:x,setOptions:function(F){var z=typeof F=="function"?F(x.options):F;L(),x.options=Object.assign({},u,x.options,z),x.scrollParents={reference:Np(l)?_p(l):l.contextElement?_p(l.contextElement):[],popper:_p(m)};var ee=Wq(Zq([].concat(r,x.options.modifiers)));return x.orderedModifiers=ee.filter(function(H){return H.enabled}),A(),C.update()},forceUpdate:function(){if(!I){var F=x.elements,z=F.reference,ee=F.popper;if(p2(z,ee)){x.rects={reference:kq(z,mm(ee),x.options.strategy==="fixed"),popper:V1(ee)},x.reset=!1,x.placement=x.options.placement,x.orderedModifiers.forEach(function(U){return x.modifiersData[U.name]=Object.assign({},U.data)});for(var H=0;H<x.orderedModifiers.length;H++){if(x.reset===!0){x.reset=!1,H=-1;continue}var Q=x.orderedModifiers[H],ae=Q.fn,be=Q.options,te=be===void 0?{}:be,G=Q.name;typeof ae=="function"&&(x=ae({state:x,options:te,name:G,instance:C})||x)}}}},update:qq(function(){return new Promise(function($){C.forceUpdate(),$(x)})}),destroy:function(){L(),I=!0}};if(!p2(l,m))return C;C.setOptions(g).then(function($){!I&&g.onFirstUpdate&&g.onFirstUpdate($)});function A(){x.orderedModifiers.forEach(function($){var F=$.name,z=$.options,ee=z===void 0?{}:z,H=$.effect;if(typeof H=="function"){var Q=H({state:x,name:F,instance:C,options:ee}),ae=function(){};w.push(Q||ae)}})}function L(){w.forEach(function($){return $()}),w=[]}return C}}var Gg={passive:!0};function tZ(e){var t=e.state,i=e.instance,r=e.options,s=r.scroll,u=s===void 0?!0:s,d=r.resize,l=d===void 0?!0:d,m=uo(t.elements.popper),g=[].concat(t.scrollParents.reference,t.scrollParents.popper);return u&&g.forEach(function(x){x.addEventListener("scroll",i.update,Gg)}),l&&m.addEventListener("resize",i.update,Gg),function(){u&&g.forEach(function(x){x.removeEventListener("scroll",i.update,Gg)}),l&&m.removeEventListener("resize",i.update,Gg)}}var nZ={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:tZ,data:{}};function iZ(e){var t=e.state,i=e.name;t.modifiersData[i]=Gk({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var rZ={name:"popperOffsets",enabled:!0,phase:"read",fn:iZ,data:{}},sZ={top:"auto",right:"auto",bottom:"auto",left:"auto"};function aZ(e){var t=e.x,i=e.y,r=window,s=r.devicePixelRatio||1;return{x:Hg(Hg(t*s)/s)||0,y:Hg(Hg(i*s)/s)||0}}function m2(e){var t,i=e.popper,r=e.popperRect,s=e.placement,u=e.variation,d=e.offsets,l=e.position,m=e.gpuAcceleration,g=e.adaptive,x=e.roundOffsets,w=x===!0?aZ(d):typeof x=="function"?x(d):d,I=w.x,C=I===void 0?0:I,A=w.y,L=A===void 0?0:A,$=d.hasOwnProperty("x"),F=d.hasOwnProperty("y"),z=Ia,ee=Ea,H=window;if(g){var Q=mm(i),ae="clientHeight",be="clientWidth";Q===uo(i)&&(Q=wc(i),fl(Q).position!=="static"&&l==="absolute"&&(ae="scrollHeight",be="scrollWidth")),Q=Q,(s===Ea||(s===Ia||s===ro)&&u===jp)&&(ee=io,L-=Q[ae]-r.height,L*=m?1:-1),(s===Ia||(s===Ea||s===io)&&u===jp)&&(z=ro,C-=Q[be]-r.width,C*=m?1:-1)}var te=Object.assign({position:l},g&&sZ);if(m){var G;return Object.assign({},te,(G={},G[ee]=F?"0":"",G[z]=$?"0":"",G.transform=(H.devicePixelRatio||1)<=1?"translate("+C+"px, "+L+"px)":"translate3d("+C+"px, "+L+"px, 0)",G))}return Object.assign({},te,(t={},t[ee]=F?L+"px":"",t[z]=$?C+"px":"",t.transform="",t))}function oZ(e){var t=e.state,i=e.options,r=i.gpuAcceleration,s=r===void 0?!0:r,u=i.adaptive,d=u===void 0?!0:u,l=i.roundOffsets,m=l===void 0?!0:l,g={placement:Mo(t.placement),variation:hh(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,m2(Object.assign({},g,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:d,roundOffsets:m})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,m2(Object.assign({},g,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:m})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var lZ={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:oZ,data:{}};function cZ(e){var t=e.state;Object.keys(t.elements).forEach(function(i){var r=t.styles[i]||{},s=t.attributes[i]||{},u=t.elements[i];!Ta(u)||!Ro(u)||(Object.assign(u.style,r),Object.keys(s).forEach(function(d){var l=s[d];l===!1?u.removeAttribute(d):u.setAttribute(d,l===!0?"":l)}))})}function uZ(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(r){var s=t.elements[r],u=t.attributes[r]||{},d=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:i[r]),l=d.reduce(function(m,g){return m[g]="",m},{});!Ta(s)||!Ro(s)||(Object.assign(s.style,l),Object.keys(u).forEach(function(m){s.removeAttribute(m)}))})}}var dZ={name:"applyStyles",enabled:!0,phase:"write",fn:cZ,effect:uZ,requires:["computeStyles"]},hZ=[nZ,rZ,lZ,dZ],fZ=eZ({defaultModifiers:hZ});function pZ(e){return e==="x"?"y":"x"}function hv(e,t,i){return lc(e,Up(t,i))}function mZ(e){var t=e.state,i=e.options,r=e.name,s=i.mainAxis,u=s===void 0?!0:s,d=i.altAxis,l=d===void 0?!1:d,m=i.boundary,g=i.rootBoundary,x=i.altBoundary,w=i.padding,I=i.tether,C=I===void 0?!0:I,A=i.tetherOffset,L=A===void 0?0:A,$=W1(t,{boundary:m,rootBoundary:g,padding:w,altBoundary:x}),F=Mo(t.placement),z=hh(t.placement),ee=!z,H=G1(F),Q=pZ(H),ae=t.modifiersData.popperOffsets,be=t.rects.reference,te=t.rects.popper,G=typeof L=="function"?L(Object.assign({},t.rects,{placement:t.placement})):L,U={x:0,y:0};if(ae){if(u||l){var B=H==="y"?Ea:Ia,ie=H==="y"?io:ro,X=H==="y"?"height":"width",ne=ae[H],Ee=ae[H]+$[B],Ie=ae[H]-$[ie],Xe=C?-te[X]/2:0,lt=z===dh?be[X]:te[X],st=z===dh?-te[X]:-be[X],$t=t.elements.arrow,It=C&&$t?V1($t):{width:0,height:0},nt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Wk(),et=nt[B],dt=nt[ie],Be=hv(0,be[X],It[X]),Ke=ee?be[X]/2-Xe-Be-et-G:lt-Be-et-G,ut=ee?-be[X]/2+Xe+Be+dt+G:st+Be+dt+G,Ot=t.elements.arrow&&mm(t.elements.arrow),Vt=Ot?H==="y"?Ot.clientTop||0:Ot.clientLeft||0:0,_n=t.modifiersData.offset?t.modifiersData.offset[t.placement][H]:0,qt=ae[H]+Ke-_n-Vt,_e=ae[H]+ut-_n;if(u){var ke=hv(C?Up(Ee,qt):Ee,ne,C?lc(Ie,_e):Ie);ae[H]=ke,U[H]=ke-ne}if(l){var ge=H==="x"?Ea:Ia,ft=H==="x"?io:ro,q=ae[Q],fe=q+$[ge],Pe=q-$[ft],We=hv(C?Up(fe,qt):fe,q,C?lc(Pe,_e):Pe);ae[Q]=We,U[Q]=We-q}}t.modifiersData[r]=U}}var gZ={name:"preventOverflow",enabled:!0,phase:"main",fn:mZ,requiresIfExists:["offset"]},vZ={left:"right",right:"left",bottom:"top",top:"bottom"};function fv(e){return e.replace(/left|right|bottom|top/g,function(t){return vZ[t]})}var _Z={start:"end",end:"start"};function g2(e){return e.replace(/start|end/g,function(t){return _Z[t]})}function yZ(e,t){t===void 0&&(t={});var i=t,r=i.placement,s=i.boundary,u=i.rootBoundary,d=i.padding,l=i.flipVariations,m=i.allowedAutoPlacements,g=m===void 0?Vk:m,x=hh(r),w=x?l?d2:d2.filter(function(A){return hh(A)===x}):gm,I=w.filter(function(A){return g.indexOf(A)>=0});I.length===0&&(I=w);var C=I.reduce(function(A,L){return A[L]=W1(e,{placement:L,boundary:s,rootBoundary:u,padding:d})[Mo(L)],A},{});return Object.keys(C).sort(function(A,L){return C[A]-C[L]})}function bZ(e){if(Mo(e)===H1)return[];var t=fv(e);return[g2(e),t,g2(t)]}function xZ(e){var t=e.state,i=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var s=i.mainAxis,u=s===void 0?!0:s,d=i.altAxis,l=d===void 0?!0:d,m=i.fallbackPlacements,g=i.padding,x=i.boundary,w=i.rootBoundary,I=i.altBoundary,C=i.flipVariations,A=C===void 0?!0:C,L=i.allowedAutoPlacements,$=t.options.placement,F=Mo($),z=F===$,ee=m||(z||!A?[fv($)]:bZ($)),H=[$].concat(ee).reduce(function(dt,Be){return dt.concat(Mo(Be)===H1?yZ(t,{placement:Be,boundary:x,rootBoundary:w,padding:g,flipVariations:A,allowedAutoPlacements:L}):Be)},[]),Q=t.rects.reference,ae=t.rects.popper,be=new Map,te=!0,G=H[0],U=0;U<H.length;U++){var B=H[U],ie=Mo(B),X=hh(B)===dh,ne=[Ea,io].indexOf(ie)>=0,Ee=ne?"width":"height",Ie=W1(t,{placement:B,boundary:x,rootBoundary:w,altBoundary:I,padding:g}),Xe=ne?X?ro:Ia:X?io:Ea;Q[Ee]>ae[Ee]&&(Xe=fv(Xe));var lt=fv(Xe),st=[];if(u&&st.push(Ie[ie]<=0),l&&st.push(Ie[Xe]<=0,Ie[lt]<=0),st.every(function(dt){return dt})){G=B,te=!1;break}be.set(B,st)}if(te)for(var $t=A?3:1,It=function(Be){var Ke=H.find(function(ut){var Ot=be.get(ut);if(Ot)return Ot.slice(0,Be).every(function(Vt){return Vt})});if(Ke)return G=Ke,"break"},nt=$t;nt>0;nt--){var et=It(nt);if(et==="break")break}t.placement!==G&&(t.modifiersData[r]._skip=!0,t.placement=G,t.reset=!0)}}var wZ={name:"flip",enabled:!0,phase:"main",fn:xZ,requiresIfExists:["offset"],data:{_skip:!1}};function SZ(e,t,i){var r=Mo(e),s=[Ia,Ea].indexOf(r)>=0?-1:1,u=typeof i=="function"?i(Object.assign({},t,{placement:e})):i,d=u[0],l=u[1];return d=d||0,l=(l||0)*s,[Ia,ro].indexOf(r)>=0?{x:l,y:d}:{x:d,y:l}}function TZ(e){var t=e.state,i=e.options,r=e.name,s=i.offset,u=s===void 0?[0,0]:s,d=Vk.reduce(function(x,w){return x[w]=SZ(w,t.rects,u),x},{}),l=d[t.placement],m=l.x,g=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=m,t.modifiersData.popperOffsets.y+=g),t.modifiersData[r]=d}var EZ={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:TZ},IZ=function(t,i){return t=typeof t=="function"?t(Object.assign({},i.rects,{placement:i.placement})):t,qk(typeof t!="number"?t:Zk(t,gm))};function CZ(e){var t,i=e.state,r=e.name,s=e.options,u=i.elements.arrow,d=i.modifiersData.popperOffsets,l=Mo(i.placement),m=G1(l),g=[Ia,ro].indexOf(l)>=0,x=g?"height":"width";if(!(!u||!d)){var w=IZ(s.padding,i),I=V1(u),C=m==="y"?Ea:Ia,A=m==="y"?io:ro,L=i.rects.reference[x]+i.rects.reference[m]-d[m]-i.rects.popper[x],$=d[m]-i.rects.reference[m],F=mm(u),z=F?m==="y"?F.clientHeight||0:F.clientWidth||0:0,ee=L/2-$/2,H=w[C],Q=z-I[x]-w[A],ae=z/2-I[x]/2+ee,be=hv(H,ae,Q),te=m;i.modifiersData[r]=(t={},t[te]=be,t.centerOffset=be-ae,t)}}function AZ(e){var t=e.state,i=e.options,r=i.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||Hk(t.elements.popper,s)&&(t.elements.arrow=s))}var MZ={name:"arrow",enabled:!0,phase:"main",fn:CZ,effect:AZ,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};const j0=e=>parseInt(e,10);function kZ({arrowPadding:e,emit:t,locked:i,offsetDistance:r,offsetSkid:s,placement:u,popperNode:d,triggerNode:l}){const m=Nr({isOpen:!1,popperInstance:null}),g=L=>{var $;($=m.popperInstance)===null||$===void 0||$.setOptions(F=>({...F,modifiers:[...F.modifiers,{name:"eventListeners",enabled:L}]}))},x=()=>g(!0),w=()=>g(!1),I=()=>{m.isOpen&&(m.isOpen=!1,t("close:popper"))},C=()=>{m.isOpen||(m.isOpen=!0,t("open:popper"))};fn([()=>m.isOpen,u],async([L])=>{L?(await A(),x()):w()});const A=async()=>{await Ar(),m.popperInstance=fZ(l.value,d.value,{placement:u.value,modifiers:[gZ,wZ,{name:"flip",enabled:!i.value},MZ,{name:"arrow",options:{padding:j0(e.value)}},EZ,{name:"offset",options:{offset:[j0(s.value),j0(r.value)]}}]}),m.popperInstance.update()};return oa(()=>{var L;(L=m.popperInstance)===null||L===void 0||L.destroy()}),{...f_(m),open:C,close:I}}const PZ={id:"arrow","data-popper-arrow":""};function DZ(e,t){return V(),pe("div",PZ)}function Kk(e,t){t===void 0&&(t={});var i=t.insertAt;if(!(!e||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",i==="top"&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}}var LZ=`
#arrow[data-v-20b7fd4a],
  #arrow[data-v-20b7fd4a]::before {
    transition: background 250ms ease-in-out;
    position: absolute;
    width: calc(10px - var(--popper-theme-border-width, 0px));
    height: calc(10px - var(--popper-theme-border-width, 0px));
    box-sizing: border-box;
    background: var(--popper-theme-background-color);
}
#arrow[data-v-20b7fd4a] {
    visibility: hidden;
}
#arrow[data-v-20b7fd4a]::before {
    visibility: visible;
    content: "";
    transform: rotate(45deg);
}

  /* Top arrow */
.popper[data-popper-placement^="top"] > #arrow[data-v-20b7fd4a] {
    bottom: -5px;
}
.popper[data-popper-placement^="top"] > #arrow[data-v-20b7fd4a]::before {
    border-right: var(--popper-theme-border-width)
      var(--popper-theme-border-style) var(--popper-theme-border-color);
    border-bottom: var(--popper-theme-border-width)
      var(--popper-theme-border-style) var(--popper-theme-border-color);
}

  /* Bottom arrow */
.popper[data-popper-placement^="bottom"] > #arrow[data-v-20b7fd4a] {
    top: -5px;
}
.popper[data-popper-placement^="bottom"] > #arrow[data-v-20b7fd4a]::before {
    border-left: var(--popper-theme-border-width)
      var(--popper-theme-border-style) var(--popper-theme-border-color);
    border-top: var(--popper-theme-border-width)
      var(--popper-theme-border-style) var(--popper-theme-border-color);
}

  /* Left arrow */
.popper[data-popper-placement^="left"] > #arrow[data-v-20b7fd4a] {
    right: -5px;
}
.popper[data-popper-placement^="left"] > #arrow[data-v-20b7fd4a]::before {
    border-right: var(--popper-theme-border-width)
      var(--popper-theme-border-style) var(--popper-theme-border-color);
    border-top: var(--popper-theme-border-width)
      var(--popper-theme-border-style) var(--popper-theme-border-color);
}

  /* Right arrow */
.popper[data-popper-placement^="right"] > #arrow[data-v-20b7fd4a] {
    left: -5px;
}
`;Kk(LZ);const q1={};q1.render=DZ;q1.__scopeId="data-v-20b7fd4a";var OZ=q1;const RZ=["onKeyup"];var Xk={props:{placement:{type:String,default:"bottom",validator:function(e){return["auto","auto-start","auto-end","top","top-start","top-end","bottom","bottom-start","bottom-end","right","right-start","right-end","left","left-start","left-end"].includes(e)}},disableClickAway:{type:Boolean,default:!1},offsetSkid:{type:String,default:"0"},offsetDistance:{type:String,default:"12"},hover:{type:Boolean,default:!1},show:{type:Boolean,default:null},disabled:{type:Boolean,default:!1},openDelay:{type:[Number,String],default:0},closeDelay:{type:[Number,String],default:0},zIndex:{type:[Number,String],default:9999},arrow:{type:Boolean,default:!1},arrowPadding:{type:String,default:"0"},interactive:{type:Boolean,default:!0},locked:{type:Boolean,default:!1},content:{type:String,default:null}},emits:["open:popper","close:popper"],setup(e,{emit:t}){const i=e;nm(lt=>({c81fc0a4:e.zIndex}));const r=aC(),s=Re(null),u=Re(null),d=Re(null),l=Re(!1);Fn(()=>{const lt=r.default();if(lt&&lt.length>1)return console.error(`[Popper]: The <Popper> component expects only one child element at its root. You passed ${lt.length} child nodes.`)});const{arrowPadding:m,closeDelay:g,content:x,disableClickAway:w,disabled:I,interactive:C,locked:A,offsetDistance:L,offsetSkid:$,openDelay:F,placement:z,show:ee}=f_(i),{isOpen:H,open:Q,close:ae}=kZ({arrowPadding:m,emit:t,locked:A,offsetDistance:L,offsetSkid:$,placement:z,popperNode:u,triggerNode:d}),{hasContent:be}=Iq(r,u,x),te=Le(()=>ee.value!==null),G=Le(()=>I.value||!be.value),U=Le(()=>H.value&&!G.value),B=Le(()=>!w.value&&!te.value),ie=Le(()=>C.value?`border: ${L.value}px solid transparent; margin: -${L.value}px;`:null),X=N0.debounce(Q,F.value),ne=N0.debounce(ae,g.value),Ee=async()=>{G.value||te.value||(ne.clear(),X())},Ie=async()=>{te.value||(X.clear(),ne())},Xe=()=>{H.value?Ie():Ee()};return fn([be,I],([lt,st])=>{H.value&&(!lt||st)&&ae()}),fn(H,lt=>{lt?l.value=!0:N0.debounce(()=>{l.value=!1},200)}),Mr(()=>{te.value&&(ee.value?X():ne())}),Mr(()=>{B.value&&Eq(s,Ie)}),(lt,st)=>(V(),pe("div",{class:"inline-block",style:wu(ce(ie)),onMouseleave:st[2]||(st[2]=$t=>e.hover&&Ie()),ref:($t,It)=>{It.popperContainerNode=$t,s.value=$t}},[de("div",{ref:($t,It)=>{It.triggerNode=$t,d.value=$t},onMouseover:st[0]||(st[0]=$t=>e.hover&&Ee()),onClick:Xe,onFocus:Ee,onKeyup:GC(Ie,["esc"])},[En(lt.$slots,"default")],40,RZ),ye(_r,{name:"fade"},{default:Ce(()=>[as(de("div",{onClick:st[1]||(st[1]=$t=>!ce(C)&&Ie()),class:"popper",ref:($t,It)=>{It.popperNode=$t,u.value=$t}},[En(lt.$slots,"content",{close:ce(ae),isOpen:l.value},()=>[Mt(xt(ce(x)),1)]),e.arrow?(V(),je(OZ,{key:0})):tt("",!0)],512),[[sa,ce(U)]])]),_:3})],36))}},FZ=`
.inline-block[data-v-5784ed69] {
    display: inline-block;
}
.popper[data-v-5784ed69] {
    transition: background 250ms ease-in-out;
    background: var(--popper-theme-background-color);
    padding: var(--popper-theme-padding);
    color: var(--popper-theme-text-color);
    border-radius: var(--popper-theme-border-radius);
    border-width: var(--popper-theme-border-width);
    border-style: var(--popper-theme-border-style);
    border-color: var(--popper-theme-border-color);
    box-shadow: var(--popper-theme-box-shadow);
    z-index: var(--c81fc0a4);
}
.popper[data-v-5784ed69]:hover,
  .popper:hover > #arrow[data-v-5784ed69]::before {
    background: var(--popper-theme-background-color-hover);
}
.inline-block[data-v-5784ed69] {
    display: inline-block;
}
.fade-enter-active[data-v-5784ed69],
  .fade-leave-active[data-v-5784ed69] {
    transition: opacity 0.2s ease;
}
.fade-enter-from[data-v-5784ed69],
  .fade-leave-to[data-v-5784ed69] {
    opacity: 0;
}
`;Kk(FZ);Xk.__scopeId="data-v-5784ed69";var $Z=(()=>{const e=Xk;return e.install=t=>{t.component("Popper",e)},e})();const zZ=rt({__name:"Popover",props:{hover:{type:Boolean,default:!0},arrow:{type:Boolean,default:!0},content:{default:void 0}},setup(e){return(t,i)=>(V(),je(ce($Z),{class:"popover",hover:t.hover,arrow:t.arrow},{content:Ce(()=>[En(t.$slots,"content",{},()=>[de("div",Br({class:"popover-content"},t.$attrs),xt(t.content),17)])]),default:Ce(()=>[En(t.$slots,"default")]),_:3},8,["hover","arrow"]))}});const vc=rt({__name:"IconButton",props:{title:{},href:{default:void 0},to:{default:void 0},type:{default:"button"}},emits:["click"],setup(e){const t=e,i=lo(),r=Le(()=>{if(t.href)return t.href;if(t.to&&s.value===sc)return i.resolve(t.to).href}),s=Le(()=>t.href?"a":t.to?sc:"button");return(u,d)=>(V(),je(zZ,{content:u.title},{default:Ce(()=>[(V(),je(_c(s.value),Br({href:r.value,type:u.type,to:s.value===ce(sc)?u.to:void 0},u.$attrs,{class:"flex items-center justify-center aspect-square p-2 text-neutral-900 hover:text-blue-700 hover:bg-blue-50 border border-transparent hover:border-blue-600 rounded-md transition-colors duration-150",title:u.title,onClick:d[0]||(d[0]=l=>u.$emit("click",l))}),{default:Ce(()=>[En(u.$slots,"default")]),_:3},16,["href","type","to","title"]))]),_:3},8,["content"]))}}),BZ=de("span",{class:"sr-only"},"More Info",-1),NZ={key:0},jZ={key:0},UZ={key:1,class:"flex flex-col gap-6"},VZ={class:"bg-neutral-200 p-4 rounded-xl"},HZ=de("h2",{class:"text-xl font-bold mt-6 border-t pt-6"},"EXIF Details",-1),GZ={key:2},Yk=rt({__name:"MoreFileInfoButton",props:{fileObjectId:{}},setup(e){const t=e,i=ic(()=>Za(()=>Promise.resolve().then(()=>B1),void 0)),r=ic(()=>Za(()=>import("./MapMarker-53f700ab.js"),[])),s=Re(!1),u=Re(void 0),d=Le(()=>u.value!==void 0);async function l(){s.value=!s.value,u.value=void 0,u.value=await Hn.getFileMetaData(t.fileObjectId)}return(m,g)=>(V(),pe(Nt,null,[ye(vc,{title:"More Info",onClick:l},{default:Ce(()=>[ye(gM),BZ]),_:1}),ye(xc,{label:"File Info",isOpen:s.value,class:"max-w-4xl m-auto h-[75vh]",onClose:g[0]||(g[0]=x=>s.value=!1)},{default:Ce(()=>[ye(_r,{name:"fade"},{default:Ce(()=>{var x;return[d.value?(V(),pe("div",NZ,[u.value?tt("",!0):(V(),pe("span",jZ,"No meta data found.")),(x=u.value)!=null&&x.exif?(V(),pe("section",UZ,[ye(Js,{label:"File Type"},{default:Ce(()=>{var w,I;return[Mt(xt(((I=(w=u.value.exif)==null?void 0:w.File)==null?void 0:I.FileType)??"Unknown"),1)]}),_:1}),ye(Js,{label:"Original Name"},{default:Ce(()=>[Mt(xt(u.value.sourcefile??"Unknown"),1)]),_:1}),ye(Js,{label:"File Size"},{default:Ce(()=>{var w,I;return[Mt(xt(((I=(w=u.value.exif)==null?void 0:w.File)==null?void 0:I.FileSize)??"Unknown"),1)]}),_:1}),ye(Js,{label:"Image Size"},{default:Ce(()=>[Mt(xt(u.value.width??"Unknown")+" x "+xt(u.value.height??"Unknonwn"),1)]),_:1}),u.value.coordinates?(V(),je(Js,{key:0,label:"Location"},{default:Ce(()=>[de("div",VZ,[ye(ce(i),{center:{lng:u.value.coordinates[0],lat:u.value.coordinates[1]},zoom:10,mapStyle:"streets",apiKey:ce(si).arcgis.apiKey,mapContainerClass:"!h-[50vh]"},{default:Ce(()=>[ye(ce(r),{id:"more-info-location-map-marker",lng:u.value.coordinates[0],lat:u.value.coordinates[1]},null,8,["lng","lat"])]),_:1},8,["center","apiKey"])])]),_:1})):tt("",!0),HZ,de("pre",null,xt(u.value.exif),1)])):(V(),pe("section",GZ,[de("pre",null,xt(u.value),1)]))])):tt("",!0)]}),_:1})]),_:1},8,["isOpen"])],64))}}),WZ=de("span",{class:"sr-only"},"Download File",-1),qZ={key:0},ZZ={key:0},KZ={key:1,class:"max-w-sm"},XZ=["href"],YZ={class:"flex justify-between"},JZ={class:"group-hover:underline"},Jk=rt({__name:"DownloadFileButton",props:{fileObjectId:{},assetId:{}},setup(e){const t=e,i=Re(!1),r=Re(void 0),s=Le(()=>r.value!==void 0);async function u(){i.value=!0,r.value=void 0,r.value=await Hn.getFileDownloadInfo(t.fileObjectId,t.assetId)}return(d,l)=>(V(),pe(Nt,null,[ye(vc,{title:"Download File",onClick:u},{default:Ce(()=>[ye(I1),WZ]),_:1}),ye(xc,{label:"File Downloads",isOpen:i.value,class:"max-w-sm",onClose:l[0]||(l[0]=m=>i.value=!1)},{default:Ce(()=>[s.value?(V(),pe("div",qZ,[r.value?(V(),pe("ul",KZ,[(V(!0),pe(Nt,null,$n(r.value,m=>(V(),pe(Nt,{key:m.filetype},[m.isReady||m.filetype==="original"?(V(),pe("a",{key:0,href:m.url,class:"py-2 hover:bg-transparent-black-50 border-t last:border-b block hover:no-underline group"},[de("li",YZ,[de("span",JZ,xt(m.filetype),1),ye(Gv,{class:"group-hover:bg-blue-100 group-hover:text-blue-600"},{default:Ce(()=>[Mt(xt(m.extension),1)]),_:2},1024)])],8,XZ)):tt("",!0)],64))),128))])):(V(),pe("span",ZZ,"No Downloads available"))])):tt("",!0)]),_:1},8,["isOpen"])],64))}}),QZ={class:"flex justify-between items-baseline"},eK={for:"share-embed",class:"block text-sm font-medium text-gray-700"},tK={class:"mt-1 flex rounded-md shadow-sm relative"},nK=["placeholder","value"],iK=rt({__name:"TextArea",props:{label:{},value:{},placeholder:{default:""}},emits:["input"],setup(e){return(t,i)=>(V(),pe("div",null,[de("div",QZ,[En(t.$slots,"label",{},()=>[de("label",eK,xt(t.label),1)]),de("div",null,[En(t.$slots,"corner")])]),de("div",tK,[de("textarea",{id:"share-embed",name:"share-embed",class:"block w-full rounded border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 font-mono text-neutral-500 focus:text-neutral-900 h-24",placeholder:t.placeholder,value:t.value,onInput:i[0]||(i[0]=r=>t.$emit("input",r))},null,40,nK)])]))}}),v2=rt({__name:"CopyableTextArea",props:{label:{},value:{},placeholder:{default:""}},setup(e){const i=Qd(e,"value"),{copy:r,copied:s}=Iz({source:i,copiedDuring:3e3});return(u,d)=>(V(),je(iK,{label:u.label,value:u.value,placeholder:u.placeholder},{corner:Ce(()=>[ye(ai,{icon:ce(s)?"check":"content_copy",variant:"tertiary",onClick:d[0]||(d[0]=l=>ce(r)())},{default:Ce(()=>[Mt(xt(ce(s)?"Copied":"Copy"),1)]),_:1},8,["icon"])]),_:1},8,["label","value","placeholder"]))}}),rK=de("span",{class:"sr-only"},"Share",-1),sK={class:"flex flex-col gap-4"},Qk=rt({__name:"ShareButton",props:{url:{}},setup(e){const t=e,i=u=>u.replace(/\s+/g," ").trim(),r=Re(!1),s=Le(()=>i(`
  <iframe width="560" height="480" src="${t.url}" frameborder="0" allowfullscreen></iframe>`));return(u,d)=>(V(),je(vc,{title:"Share",onClick:d[1]||(d[1]=l=>r.value=!r.value)},{default:Ce(()=>[ye(A8),rK,ye(xc,{label:"Share",isOpen:r.value,class:"max-w-xl mx-auto",onClose:d[0]||(d[0]=l=>r.value=!1)},{default:Ce(()=>[de("div",sK,[ye(v2,{label:"Embed",value:s.value},null,8,["value"]),ye(v2,{label:"Link",value:t.url},null,8,["value"]),ye(ai,{icon:"open_in_new",label:"Open in New Window",href:t.url,target:"_blank"},{default:Ce(()=>[Mt(" Open Viewer in New Window ")]),_:1},8,["href"])])]),_:1},8,["isOpen"])]),_:1}))}}),eP=rt({__name:"ShareFileButton",props:{fileObjectId:{}},setup(e){const t=e,i=Le(()=>`${si.instance.base.url}/asset/getEmbed/${t.fileObjectId}/null/true`);return(r,s)=>(V(),je(Qk,{url:i.value},null,8,["url"]))}}),aK=de("span",{class:"sr-only"},"Clear",-1),oK={key:0,class:"text-xs text-red-600 mt-1"},Z1=rt({__name:"DrawerTitleInput",props:{modelValue:{},label:{default:"Drawer Title"},labelHidden:{type:Boolean,default:!1},placeholder:{default:"New Drawer Title"},inputClass:{default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const i=e,r=Da(),s=Le(()=>i.modelValue.trim()),u=Le(()=>i.modelValue.length>0),d=Le(()=>!r.drawers.some(g=>g.title.trim()===s.value)),l=Le(()=>u.value&&d.value);function m(){t("update:modelValue","")}return(g,x)=>(V(),pe("div",null,[ye(Ja,{id:"new-drawer-title",label:g.label,modelValue:g.modelValue,labelHidden:g.labelHidden,placeholder:g.placeholder,inputClass:g.inputClass,"onUpdate:modelValue":x[0]||(x[0]=w=>t("update:modelValue",w))},{append:Ce(()=>[g.modelValue.length?(V(),pe("button",{key:0,type:"button",class:"text-transparent-black-500 hover:text-neutral-900 float-right",onClick:m},[aK,ye(ce(om))])):tt("",!0)]),_:1},8,["label","modelValue","labelHidden","placeholder","inputClass"]),!l.value&&g.modelValue.length>0?(V(),pe("p",oK," Drawer title must be unique. ")):tt("",!0)]))}});function lK(e){return/^(\d{1,2}:)?([0-5]?\d:)?[0-5]?\d$/.test(e)}function Wl(e){if(e===null)return"";if(Number.isNaN(e))throw new Error("Cannot convert seconds to time string: seconds is NaN");if(e>=60*60*24)throw new Error("Cannot convert seconds to time string: seconds larger than 1 day");return e<60*60?new Date(e*1e3).toISOString().slice(14,19):new Date(e*1e3).toISOString().slice(11,19)}function _2(e){if(!lK(e))return null;const t=e.split(":").reverse();let i=0;return t.forEach((r,s)=>{i+=Number.parseInt(r)*Math.pow(60,s)}),i}const ox={SET_PLAY_BOUNDS:"SET_PLAY_BOUNDS",GET_SCRUBBER_POSITION:"GET_SCRUBBER_POSITION",PAUSE_PLAYER:"PAUSE_PLAYER"},U0={MEDIAPLAYER_READY:"MEDIAPLAYER_READY",CURRENT_SCRUBBER_POSITION:"CURRENT_SCRUBBER_POSITION",SET_PLAY_BOUNDS_SUCCESS:"SET_PLAY_BOUNDS_SUCCESS",PAUSE_PLAYER_SUCCESS:"PAUSE_PLAYER_SUCCESS"},cK=(...e)=>console.log("[PARENT] ",...e);function tP(e){const t=[];function i(s){var u,d;s.source===((u=e.value)==null?void 0:u.contentWindow)&&(d=s.data)!=null&&d.type&&(cK("message received:",s.data.type,s.data.payload??"",{event:s}),t.forEach(l=>l(s)))}const r=fn(e,()=>{e.value&&(window.addEventListener("message",i),r())});return oa(()=>{window.removeEventListener("message",i)}),{postMessage(s){var u,d;(d=(u=e.value)==null?void 0:u.contentWindow)==null||d.postMessage(s,"*")},addResponseHandler(s){t.push(s)},destroy(){window.removeEventListener("message",i)}}}const uK=["src"],nP=rt({__name:"ExcerptableIframe",props:{fileObjectId:{},startTime:{},endTime:{}},emits:["ready","update:currentScrubberPosition"],setup(e,{emit:t}){const i=e,r=Re(null),s=Re(0),u=tP(r);u.addResponseHandler(l=>{const{type:m}=l.data;if(m===U0.MEDIAPLAYER_READY)return u.postMessage({type:ox.SET_PLAY_BOUNDS,payload:{startTime:i.startTime,endTime:i.endTime}});if(m===U0.CURRENT_SCRUBBER_POSITION)return s.value=l.data.payload,t("update:currentScrubberPosition",l.data.payload);if(m===U0.SET_PLAY_BOUNDS_SUCCESS)return t("ready")});const d=wi(pk);return d&&fn(d,()=>{u.postMessage({type:ox.PAUSE_PLAYER})}),(l,m)=>(V(),pe("iframe",{ref_key:"videoPlayerIframe",ref:r,src:`${ce(si).instance.base.url}/asset/getEmbed/${l.fileObjectId}`,frameBorder:"0",allowfullscreen:"true",class:"w-full aspect-video"},`
    <slot />
  `,8,uK))}}),dK={class:"text-sm rounded-md"},hK={class:"inline-flex gap-1 items-center"},fK=["checked"],pK={key:0,class:"excerpt-details flex flex-col gap-4 mt-2 border border-neutral-300 bg-neutral-100 p-4 rounded-md"},mK={class:"flex gap-4"},gK=rt({__name:"AddExcerptToDrawerSection",props:{isAddingExcerpt:{type:Boolean},startTime:{},endTime:{},excerptName:{},fileObjectId:{}},emits:["update:startTime","update:endTime","update:excerptName","update:isAddingExcerpt"],setup(e,{emit:t}){const i=e,r=Re(Wl(i.startTime??0)),s=Re(Wl(i.endTime??0)),u=Re(0),d=Re(!1),l=Re(!1),m=Re(!1);function g(){r.value=Wl(u.value),t("update:startTime",u.value)}function x(){s.value=Wl(u.value),t("update:endTime",u.value)}return(w,I)=>(V(),pe("div",dK,[de("label",hK,[de("input",{checked:w.isAddingExcerpt,type:"checkbox","aria-label":"Add Excerpt",class:"text-sm rounded-sm",onChange:I[0]||(I[0]=C=>w.$emit("update:isAddingExcerpt",C.target.checked))},null,40,fK),Mt(" Add as Excerpt ")]),w.isAddingExcerpt?(V(),pe("div",pK,[ye(Ja,{id:"excerpt-name",modelValue:w.excerptName,label:"Excerpt Name",placeholder:"Excerpt Name",class:"flex-1 text-sm",inputClass:["!bg-white border !border-neutral-300",{"!border !border-red-500":!w.excerptName&&m.value}],"onUpdate:modelValue":I[1]||(I[1]=C=>{m.value=!0,w.$emit("update:excerptName",C)}),onBlur:I[2]||(I[2]=C=>m.value=!0)},null,8,["modelValue","inputClass"]),de("div",mK,[ye(Ja,{id:"excerpt__start-time",modelValue:r.value,"onUpdate:modelValue":[I[3]||(I[3]=C=>r.value=C),I[4]||(I[4]=C=>{d.value=!0,w.$emit("update:startTime",ce(_2)(C)??0)})],label:"Start Time",placeholder:"00:00",type:"text",class:"flex-1 text-sm",inputClass:["!bg-white border !border-neutral-300",{"!border !border-red-500":d.value&&!r.value}],onBlur:I[5]||(I[5]=()=>{d.value=!0,r.value=ce(Wl)(w.startTime??0)})},{append:Ce(()=>[ye(ai,{variant:"tertiary",class:"text-sm",onClick:g},{default:Ce(()=>[Mt(" Set")]),_:1})]),_:1},8,["modelValue","inputClass"]),ye(Ja,{id:"excerpt__end-time",modelValue:s.value,"onUpdate:modelValue":[I[6]||(I[6]=C=>s.value=C),I[7]||(I[7]=C=>{l.value=!0,w.$emit("update:endTime",ce(_2)(C)??0)})],label:"End Time",placeholder:"00:00",type:"text",class:"flex-1 text-sm",inputClass:["!bg-white border !border-neutral-300",{"!border !border-red-500":l.value&&!s.value}],onBlur:I[8]||(I[8]=()=>{l.value=!0,s.value=ce(Wl)(w.endTime??0)})},{append:Ce(()=>[ye(ai,{variant:"tertiary",class:"text-sm",onClick:x},{default:Ce(()=>[Mt(" Set ")]),_:1})]),_:1},8,["modelValue","inputClass"])]),ye(nP,{fileObjectId:w.fileObjectId,class:"aspect-video rounded","onUpdate:currentScrubberPosition":I[9]||(I[9]=C=>u.value=C)},null,8,["fileObjectId"])])):tt("",!0)]))}}),vK=de("span",{class:"sr-only"},"Add to Drawer",-1),_K={class:"flex items-start justify-between gap-2 flex-1"},yK=de("legend",{class:"sr-only"},"Choose a drawer",-1),bK={class:"flex-1 flex flex-col gap-1"},xK=de("label",{class:"text-xs uppercase font-medium"},"Existing Drawer",-1),wK=de("option",{value:""},"-",-1),SK=["value"],TK=de("p",{class:"mt-8 before:absolute before:top-1/2 before:-translate-y-1/2 before:block before:h-[1px] before:w-full before:left-0 before:bg-transparent-black-100 relative leading-none text-center text-sm"},[de("span",{class:"bg-neutral-50 relative z-10 px-2"},"or")],-1),EK={key:0,class:"text-xs italic text-red-500 my-2"},IK={class:"p-4 bg-neutral-200"},CK={class:"flex justify-end gap-4"},AK=rt({__name:"AddToDrawerButton",props:{assetId:{}},setup(e){const t=e,i=Re(!1),r=Re(""),s=Re(""),u=Re("idle"),d=Re(!1),l=Re(!1),m=Re(!1),g=Da(),x=Lo(),w=Nr({fileHandlerId:x.activeFileObjectId,name:"",startTime:0,endTime:0}),I=Le(()=>s.value.trim()&&!g.drawers.some(H=>H.title===s.value)),C=Le(()=>(r.value||s.value.trim())&&!(r.value&&s.value.trim())),A=Le(()=>w.startTime>=0&&w.endTime>=0&&w.name.trim()&&Math.abs(w.endTime-w.startTime)>=1),L=Le(()=>C.value&&(!d.value||A.value));async function $(){const H=Number.parseInt(r.value),Q=s.value.trim();if(!t.assetId)throw new Error("Cannot add to drawer. No active asset.");if(!H&&!Q)throw new Error("Cannot add to drawer. No new or selected drawer.");if(H&&Q)throw new Error("Cannot add to existing and new drawer at the same time.");if(Q&&!I.value)throw new Error("Drawer name is invalid.");if(H&&isNaN(H))throw new Error("Cannot add to drawer. Drawer ID is not a number.");if(d.value&&!A.value)throw new Error("Cannot add excerpt. Excerpt is invalid.");if(d.value&&!w.fileHandlerId)throw new Error("Cannot add excerpt. No file handler ID.");i.value=!1,u.value="fetching";const ae=isNaN(H)?(await g.createDrawer(Q)).id:H;w.startTime>w.endTime&&([w.startTime,w.endTime]=[w.endTime,w.startTime]),await g.addAssetToDrawer(t.assetId,ae,d.value?w:null),F()}function F(){r.value="",s.value="",u.value="idle",d.value=!1,w.name="",w.startTime=0,w.endTime=0,w.fileHandlerId=x.activeFileObjectId,l.value=!1}const z=Re(null),{postMessage:ee}=tP(z);return Fn(()=>{z.value=document.querySelector(".object-viewer__iframe")}),fn([()=>x.activeFileObjectId,i],async()=>{if(!i.value)return;if(!x.activeFileObjectId){m.value=!1;return}w.fileHandlerId=x.activeFileObjectId;const H=await Hn.getFileMetaData(x.activeFileObjectId);m.value=!!(H!=null&&H.handlerType)&&["MovieHandler","AudioHandler"].includes(H.handlerType),m.value&&ee({type:ox.PAUSE_PLAYER})},{immediate:!0}),(H,Q)=>(V(),pe(Nt,null,[ye(vc,Br({title:"Add to Drawer"},H.$attrs,{onClick:Q[0]||(Q[0]=ae=>i.value=!0)}),{default:Ce(()=>[u.value==="fetching"?(V(),je(ce(No),{key:0})):(V(),je(ce(dM),{key:1})),vK]),_:1},16),ye(xc,{type:"info",label:"Add to Drawer",isOpen:i.value,class:"max-w-xl",onClose:Q[10]||(Q[10]=ae=>i.value=!1)},{footer:Ce(()=>[de("footer",IK,[de("div",CK,[ye(ai,{variant:"tertiary",onClick:Q[9]||(Q[9]=ae=>i.value=!1)},{default:Ce(()=>[Mt("Cancel")]),_:1}),ye(ai,{class:"text-sm",disabled:!L.value,variant:"primary",onClick:$},{default:Ce(()=>[Mt(" Add to Drawer ")]),_:1},8,["disabled"])])])]),default:Ce(()=>[de("div",null,[de("fieldset",_K,[yK,de("div",bK,[xK,as(de("select",{"onUpdate:modelValue":Q[1]||(Q[1]=ae=>r.value=ae),class:kn(["border border-neutral-200 rounded w-full text-sm",{" !border-red-500 text-red-700":!C.value&&l.value}]),"on:update:modelValue":Q[2]||(Q[2]=ae=>l.value=!0)},[wK,(V(!0),pe(Nt,null,$n(ce(g).drawers,ae=>(V(),pe("option",{key:ae.id,value:ae.id},xt(ae.title),9,SK))),128))],34),[[wh,r.value]])]),TK,ye(Z1,{modelValue:s.value,"onUpdate:modelValue":[Q[3]||(Q[3]=ae=>s.value=ae),Q[4]||(Q[4]=ae=>l.value=!0)],class:"flex-1",label:"New Drawer",inputClass:["bg-white placeholder-neutral-400 border !border-neutral-200 rounded",{"!border !border-red-500 !text-red-700":!C.value&&l.value}]},null,8,["modelValue","inputClass"])]),!C.value&&l.value?(V(),pe("p",EK," Please select a drawer or enter a new drawer name. ")):tt("",!0),ce(x).activeFileObjectId&&m.value?(V(),je(gK,{key:1,startTime:w.startTime,"onUpdate:startTime":Q[5]||(Q[5]=ae=>w.startTime=ae),endTime:w.endTime,"onUpdate:endTime":Q[6]||(Q[6]=ae=>w.endTime=ae),excerptName:w.name,"onUpdate:excerptName":Q[7]||(Q[7]=ae=>w.name=ae),"is-adding-excerpt":d.value,"onUpdate:isAddingExcerpt":Q[8]||(Q[8]=ae=>d.value=ae),fileObjectId:ce(x).activeFileObjectId,class:"mt-4"},null,8,["startTime","endTime","excerptName","is-adding-excerpt","fileObjectId"])):tt("",!0)])]),_:1},8,["isOpen"])],64))}}),MK=de("div",{class:"fixed inset-0 z-40 bg-black/70","aria-hidden":"true"},null,-1),kK={class:"fixed inset-0 z-50 flex items-center justify-center p-4"},PK={class:"flex justify-end mt-4 space-x-2"},K1=rt({__name:"ConfirmModal",props:{isOpen:{type:Boolean},title:{},type:{default:"info"},confirmLabel:{default:"Confirm"},cancelLabel:{default:"Cancel"}},emits:["close","confirm"],setup(e,{emit:t}){const i=e,r=Re(null),s=Le(()=>i.type==="danger"?"danger":"primary");function u(){t("confirm"),t("close")}function d(){t("close")}return(l,m)=>(V(),je(ce(WM),{show:l.isOpen,as:"template",class:"fixed inset-0 z-40"},{default:Ce(()=>[ye(ce(PU),{as:"div",onClose:d},{default:Ce(()=>[ye(ce($v),{enter:"duration-300 ease-out",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"duration-200 ease-in",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{default:Ce(()=>[MK]),_:1}),de("div",kK,[ye(ce($v),{enter:"duration-300 ease-out",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"duration-200 ease-in",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",as:"template"},{default:Ce(()=>[ye(ce(DU),{class:"flex-1"},{default:Ce(()=>[ye(cm,{title:l.title,type:l.type,isDismissable:"",onDismiss:d},{default:Ce(()=>[En(l.$slots,"default"),de("div",PK,[ye(ai,{variant:"tertiary",onClick:d},{default:Ce(()=>[Mt(xt(l.cancelLabel),1)]),_:1}),ye(ai,{ref_key:"confirmButtonRef",ref:r,variant:s.value,onClick:u},{default:Ce(()=>[Mt(xt(l.confirmLabel),1)]),_:1},8,["variant"])])]),_:3},8,["title","type"])]),_:3})]),_:3})])]),_:3})]),_:3},8,["show"]))}});function iP(){const e=T0("returnURL",null),t=T0("elevatorPlugin",null),i=Le(()=>!!t.value),r=T0("elevatorCallbackType",null);function s(){e.value=null,t.value=null,r.value=null}return{returnUrl:e,isInEmbedMode:i,elevatorPlugin:t,elevatorCallbackType:r,clear:s}}const DK={key:2},LK=["innerHTML"],OK={key:1},RK=["action"],FK=de("input",{type:"hidden",name:"lti_version",value:"LTI-1p0"},null,-1),$K=de("input",{type:"hidden",name:"lti_message_type",value:"ContentItemSelection"},null,-1),zK=["value"],BK=rt({__name:"AddToEmbeddedPluginButton",props:{fileHandlerId:{}},setup(e){const t=e,i=Lo(),r=Nd(),{elevatorPlugin:s,elevatorCallbackType:u,returnUrl:d,clear:l}=iP(),m=Re(null),g=Re(!1),x=Re(null),w=Re(!1),I=Re("idle"),C=Re("");Fn(async()=>{x.value=await Hn.getEmbedPluginInterstitial()}),window.addEventListener("beforeunload",()=>l());async function A(){if(I.value="loading",!x.value)throw I.value="error",new Error("Interstitial not loaded");if(x.value.haveInterstitial){g.value=!0;return}w.value=!0}function L(){g.value=!1,I.value="idle"}function $(){g.value=!1,w.value=!0}async function F(){if(!t.fileHandlerId)throw I.value="error",new Error("File handler ID not set");if(u.value==="lti"){const z=await Hn.postLtiPayload({fileObjectId:t.fileHandlerId,excerptId:"",returnUrl:d.value??""});C.value=JSON.stringify(z),Ar(()=>{if(!m.value)throw I.value="error",new Error("Return form not set");m.value.submit(),I.value="success",r.addToast({message:"Added to Canvas"})})}u.value==="JS"&&(window.opener.postMessage({pluginResponse:!0,fileObjectId:i.activeFileObjectId,objectId:i.activeObjectId,currentLink:window.location.href},"*"),I.value="success",r.addToast({message:"Added to WordPress"}),window.close())}return fn(w,F),(z,ee)=>(V(),pe(Nt,null,[ye(vc,{title:`Add to ${ce(s)||"Elevator Plugin"}`,onClick:A},{default:Ce(()=>[I.value==="loading"?(V(),je(ce(No),{key:0})):(V(),pe(Nt,{key:1},[ce(s)==="Canvas"?(V(),je(ce(i6),{key:0})):ce(s)==="WordPress"?(V(),je(ce(m6),{key:1})):(V(),pe("span",DK,"+ "+xt(ce(s)??"Elevator Plugin"),1))],64))]),_:1},8,["title"]),ye(K1,{isOpen:g.value,title:`Add to ${ce(s)}`,onClose:L,onConfirm:$},{default:Ce(()=>{var H,Q;return[(H=x.value)!=null&&H.interstitialText?(V(),pe("div",{key:0,innerHTML:(Q=x.value)==null?void 0:Q.interstitialText},null,8,LK)):(V(),pe("p",OK,"Are you sure you want to add this to "+xt(ce(s))+"?",1))]}),_:1},8,["isOpen","title"]),ce(u)=="lti"?(V(),pe("form",{key:0,ref_key:"returnForm",ref:m,action:ce(d)??"",method:"POST"},[FK,$K,de("input",{type:"hidden",name:"content_items",value:C.value},null,8,zK)],8,RK)):tt("",!0)],64))}}),NK={class:"object-toolbar"},jK={class:"flex justify-between items-center w-full px-4 py-2"},UK={class:"flex gap-1 items-center leading-none"},y2=rt({__name:"ActiveFileViewToolbar",props:{fileHandlerId:{},assetId:{}},setup(e){const t=Ei(),{isInEmbedMode:i}=iP();return(r,s)=>{var u;return V(),pe("div",NK,[de("div",jK,[de("div",UK,[r.fileHandlerId?(V(),je(Yk,{key:0,fileObjectId:r.fileHandlerId},null,8,["fileObjectId"])):tt("",!0),r.assetId&&r.fileHandlerId?(V(),je(Jk,{key:1,assetId:r.assetId,fileObjectId:r.fileHandlerId},null,8,["assetId","fileObjectId"])):tt("",!0),r.fileHandlerId?(V(),je(eP,{key:2,fileObjectId:r.fileHandlerId},null,8,["fileObjectId"])):tt("",!0),(u=ce(t).currentUser)!=null&&u.canManageDrawers&&r.assetId?(V(),je(AK,{key:3,assetId:r.assetId},null,8,["assetId"])):tt("",!0),ce(i)?(V(),je(BK,{key:4,fileHandlerId:r.fileHandlerId},null,8,["fileHandlerId"])):tt("",!0)])])])}}}),VK={class:"object-details"},HK={key:0,class:"h-full flex justify-end"},GK={key:1,class:"flex gap-2"},WK=rt({__name:"ObjectDetailsPanel",props:{assetId:{},objectId:{},fileHandlerId:{},isOpen:{type:Boolean,default:!1},showToggle:{type:Boolean,default:!0}},emits:["toggle"],setup(e){const t=e,i=Le(()=>t.objectId?hl(t.objectId):null);return(r,s)=>(V(),pe("div",VK,[r.objectId?(V(),je(Rk,{key:1,label:"Details",variant:"secondary",isOpen:r.isOpen,showToggle:r.showToggle,class:"h-full",onToggle:s[0]||(s[0]=u=>r.$emit("toggle"))},{"header-utils":Ce(()=>[ye(y2,{fileHandlerId:r.fileHandlerId,assetId:r.objectId},null,8,["fileHandlerId","assetId"])]),default:Ce(()=>[r.objectId?(V(),je(pm,{key:0,assetId:r.objectId},null,8,["assetId"])):tt("",!0),r.objectId?(V(),pe("footer",GK,[i.value?(V(),je(Bk,{key:0,to:i.value},null,8,["to"])):tt("",!0)])):tt("",!0)]),_:1},8,["isOpen","showToggle"])):(V(),pe("div",HK,[ye(y2,{fileHandlerId:r.fileHandlerId,assetId:r.assetId},null,8,["fileHandlerId","assetId"])]))]))}}),qK={class:"media-card flex flex-col overflow-hidden border rounded-md shadow-sm"},ZK={class:"placeholder-image aspect-video overflow-hidden"},KK={class:"flex items-center justify-center w-full h-full media-card__image"},XK={class:"flex-1 p-4 media-card__body hover:no-underline"},YK=rt({__name:"MediaCard",props:{imgSrc:{},imgAlt:{}},setup(e){return(t,i)=>(V(),pe("article",qK,[de("div",ZK,[de("div",KK,[t.imgSrc?(V(),je(Mu,{key:0,src:t.imgSrc,alt:t.imgAlt||"Untitled",loading:"lazy",class:"object-cover w-full h-full"},null,8,["src","alt"])):(V(),je(ce(Fp),{key:1}))])]),de("div",XK,[En(t.$slots,"default",{},void 0,!0)]),En(t.$slots,"footer",{},void 0,!0)]))}});const JK=sn(YK,[["__scopeId","data-v-a8eaec7b"]]),QK=de("span",{class:"sr-only"},"Remove",-1),eX=rt({__name:"RemoveFromDrawerButton",props:{drawerId:{},objectId:{},excerptId:{}},setup(e){const t=e,i=Da(),r=Le(()=>i.getDrawerById(t.drawerId)),s=Le(()=>{var w,I,C;return(C=(I=(w=r.value)==null?void 0:w.contents)==null?void 0:I.matches)==null?void 0:C.find(A=>A.objectId===t.objectId)}),u=Le(()=>{var w,I,C;return(C=(I=(w=r.value)==null?void 0:w.contents)==null?void 0:I.matches)==null?void 0:C.find(A=>A.excerptId===t.excerptId)}),d=Re(!1),l=Le(()=>{var I;const w=(I=s.value)==null?void 0:I.title;return w?Array.isArray(w)?Qa(w[0]):Qa(w):null}),m=Le(()=>{var w;return((w=u.value)==null?void 0:w.excerptLabel)??null}),g=Le(()=>{var w;return(w=r.value)==null?void 0:w.title});async function x(){if(t.excerptId)return i.removeExcerptFromDrawer({drawerId:t.drawerId,excerptId:t.excerptId});i.removeAssetFromDrawer({drawerId:t.drawerId,assetId:t.objectId})}return(w,I)=>(V(),pe(Nt,null,[de("button",Br({class:"bg-white w-6 h-6 text-neutral-500 inline-flex justify-center items-center rounded-full shadow-sm border border-neutral-200 hover:bg-neutral-900 hover:text-neutral-200 transition-all",title:"Remove"},w.$attrs,{onClick:I[0]||(I[0]=C=>d.value=!0)}),[QK,Mt(" × ")],16),ye(K1,{isOpen:d.value,title:"Remove from drawer",type:"danger",confirmLabel:"Remove",onClose:I[1]||(I[1]=C=>d.value=!1),onConfirm:x},{default:Ce(()=>[Mt(" Are you sure you want to remove "),de("b",null,xt(w.excerptId?m.value??"this excerpt":l.value??"this asset"),1),Mt(" from the drawer "),de("b",null,xt(g.value),1),Mt("? ")]),_:1},8,["isOpen"])],64))}}),tX={class:"relative search-result-card rounded-lg"},nX={class:"absolute top-1 right-1 z-10 flex gap-1"},iX={class:"search-result-card__title font-bold leading-tight mb-2"},rX={key:0,class:"search-result-card__contents max-h-[15rem] overflow-y-auto overflow-x-hidden"},sX={class:"text-sm"},aX={class:"font-bold text-xs uppercase"},oX=rt({__name:"SearchResultCard",props:{searchMatch:{},drawerId:{},mediaCardClass:{}},setup(e){const t=e,i=Ei(),r=Le(()=>{if(!t.searchMatch.excerpt)return null;if(!t.searchMatch.excerptId)throw new Error("Excerpt is missing excerptId");return`/asset/viewExcerpt/${t.searchMatch.excerptId}`}),s=Le(()=>t.searchMatch.excerpt?t.searchMatch.excerptLabel:null),u=Le(()=>hl(t.searchMatch.objectId)),d=Le(()=>Array.isArray(t.searchMatch.title)?t.searchMatch.title.map(m=>Qa(m)).join(","):t.searchMatch.title&&t.searchMatch.title.length>0?Qa(t.searchMatch.title):"(no title)"),l=Le(()=>{const{excerptAsset:m,primaryHandlerThumbnail2x:g}=t.searchMatch;return m?yc(m):g??null});return(m,g)=>{var x;return V(),pe("div",tX,[m.drawerId&&((x=ce(i).currentUser)!=null&&x.canManageDrawers)?(V(),je(eX,{key:0,class:"absolute top-0 right-0 -translate-y-1/2 translate-x-1/2 z-10 remove-from-drawer-btn",drawerId:m.drawerId,objectId:m.searchMatch.objectId,excerptId:m.searchMatch.excerptId??void 0},null,8,["drawerId","objectId","excerptId"])):tt("",!0),ye(os,{to:r.value??u.value,class:"rounded-md hover:no-underline"},{default:Ce(()=>[ye(JK,{imgSrc:l.value,imgAlt:d.value,class:kn(["search-result-card flex w-full h-full relative transition-colors",m.mediaCardClass])},{default:Ce(()=>{var w;return[de("div",nX,[!m.searchMatch.excerpt&&m.searchMatch.fileAssets&&m.searchMatch.fileAssets>1?(V(),je(Gv,{key:0,class:"!bg-neutral-900 !text-neutral-200 border !border-neutral-900"},{default:Ce(()=>[Mt(xt(m.searchMatch.fileAssets)+" files ",1)]),_:1})):tt("",!0),m.searchMatch.excerpt?(V(),je(Gv,{key:1,class:"!bg-neutral-50 !text-neutral-900 border !border-neutral-50"},{default:Ce(()=>[Mt(" Excerpt ")]),_:1})):tt("",!0)]),de("h1",iX,xt(s.value??d.value),1),(w=t.searchMatch)!=null&&w.entries?(V(),pe("div",rX,[de("dl",sX,[(V(!0),pe(Nt,null,$n(t.searchMatch.entries,(I,C)=>{var A;return V(),pe("div",{key:C,class:"mb-2"},[de("dt",aX,xt((I==null?void 0:I.label)??"Item"),1),de("dd",null,xt((A=I.entries)==null?void 0:A.join(", ")),1)])}),128))])])):tt("",!0)]}),_:1},8,["imgSrc","imgAlt","class"])]),_:1},8,["to"])])}}});const Wv=sn(oX,[["__scopeId","data-v-5e461163"]]);const lX={},cX={class:"more-like-this__count inline-flex items-center px-2 py-1 text-xs font-bold rounded-full"};function uX(e,t){return V(),pe("span",cX,[En(e.$slots,"default",{},void 0,!0)])}const lx=sn(lX,[["render",uX],["__scopeId","data-v-67b76540"]]),dX=rt({__name:"ButtonWithCount",props:{count:{}},setup(e){return(t,i)=>(V(),je(ai,null,{default:Ce(()=>[En(t.$slots,"default"),ye(lx,null,{default:Ce(()=>[Mt(xt(t.count),1)]),_:1})]),_:3}))}}),rP=e=>(ao("data-v-23538bf6"),e=e(),oo(),e),hX={key:0,class:"more-like-this"},fX={key:0,class:"pt-6 mt-6"},pX={class:"more-like-this__title flex flex-wrap items-center gap-2 mb-4 text-xl font-bold"},mX=rP(()=>de("span",null,"More Like This",-1)),gX=rP(()=>de("span",null,"More Like This",-1)),vX={class:"grid grid-cols-3 gap-2"},_X=rt({__name:"MoreLikeThis",props:{items:{},listContainerClass:{}},setup(e){const t=e,i=Le(()=>t.items.slice(0,si.instance.moreLikeThis.maxInlineResults)),r=Le(()=>t.items.length-i.value.length),s=Re(!1);return(u,d)=>u.items.length?(V(),pe("section",hX,[i.value.length?(V(),pe("div",fX,[de("h3",pX,[mX,ye(lx,null,{default:Ce(()=>[Mt(xt(u.items.length),1)]),_:1})]),de("div",{class:kn(["flex flex-col gap-2",u.listContainerClass])},[(V(!0),pe(Nt,null,$n(i.value,l=>(V(),je(Wv,{key:l.objectId,searchMatch:l},null,8,["searchMatch"]))),128))],2)])):tt("",!0),r.value?(V(),je(dX,{key:1,count:r.value,class:"my-4",onClick:d[0]||(d[0]=l=>s.value=!0)},{default:Ce(()=>[Mt(xt(ce(si).instance.moreLikeThis.maxInlineResults?"Show More":"More Like This"),1)]),_:1},8,["count"])):tt("",!0),ye(xc,{label:"More Like This",isOpen:s.value,onClose:d[1]||(d[1]=l=>s.value=!1)},{label:Ce(()=>[gX,ye(lx,{class:"ml-2"},{default:Ce(()=>[Mt(xt(u.items.length),1)]),_:1})]),default:Ce(()=>[de("div",vX,[(V(!0),pe(Nt,null,$n(u.items,l=>(V(),je(Wv,{key:l.objectId,searchMatch:l},null,8,["searchMatch"]))),128))])]),_:1},8,["isOpen"])])):tt("",!0)}});const sP=sn(_X,[["__scopeId","data-v-23538bf6"]]),yX={class:"asset-details"},bX=rt({__name:"AssetDetailsPanel",props:{assetId:{},isOpen:{type:Boolean,default:!0},showToggle:{type:Boolean,default:!0}},emits:["toggle"],setup(e){const t=e,i=Le(()=>t.assetId),{asset:r}=V_(i),s=Re([]);fn(i,async()=>{s.value=await Hn.getMoreLikeThis(i.value)},{immediate:!0});const u=Le(()=>r.value?Eu(r.value):"");return(d,l)=>(V(),pe("div",yX,[ye(Rk,{label:u.value,isOpen:d.isOpen,showToggle:d.showToggle,class:"h-full py-4 md:py-0",onToggle:l[0]||(l[0]=m=>d.$emit("toggle"))},{"header-label":Ce(()=>[ye(Ok,{label:u.value||"(No Title)",class:kn({"text-2xl":d.isOpen})},null,8,["label","class"])]),default:Ce(()=>[d.assetId?(V(),je(pm,{key:0,assetId:d.assetId,class:"py-4 md:py-0"},null,8,["assetId"])):tt("",!0),d.assetId?(V(),je(sP,{key:1,items:s.value},null,8,["items"])):tt("",!0)]),_:1},8,["label","isOpen","showToggle"])]))}}),xX={class:"asset-view h-full relative"},wX=rt({__name:"AssetView",props:{assetId:{},objectId:{}},setup(e){const t=Re(!0),i=Re(!1),r=Lo(),s=xz("(min-width: 768px)");return(u,d)=>(V(),pe("div",xX,[ye(Lk,{class:kn(["asset-view__object-viewer h-[75vh] md:h-auto md:absolute md:top-0 border-t-0 border-b-asset-view",{"md:top-0 md:bottom-1/2 md:left-sm md:right-0 border-l-asset-view":t.value&&i.value,"md:top-0 md:bottom-16 md:left-sm md:right-0 border-l-asset-view":t.value&&!i.value,"md:top-0 md:bottom-16 md:left-0 md:right-sm border-r-asset-view":!t.value&&i.value,"md:top-0 md:bottom-16 md:left-0 md:right-0":!t.value&&!i.value}]),fileHandlerId:ce(r).activeFileObjectId},null,8,["class","fileHandlerId"]),ye(bX,{class:kn(["asset-view__asset-panel md:absolute",{"asset-view__asset-panel--open":t.value,"md:bottom-0 md:left-0 md:top-0 md:w-sm":t.value,"md:bottom-0 md:left-0 md:h-16 md:right-sm border-r-asset-view":!t.value&&i.value,"md:bottom-0 md:left-0 md:h-16 md:w-1/2":!t.value&&!i.value}]),showToggle:ce(s),assetId:ce(r).activeAssetId,isOpen:ce(s)?t.value:!0,onToggle:d[0]||(d[0]=l=>t.value=!t.value)},null,8,["class","showToggle","assetId","isOpen"]),ye(WK,{class:kn(["asset-view__details-panel md:absolute",{"asset-view__details-panel--open":i.value,"border-l-asset-view":!i.value,"md:bottom-0 md:right-0 md:h-16 md:left-sm":!i.value&&t.value,"md:bottom-0 md:right-0 md:h-1/2 md:left-sm border-l-asset-view":i.value&&t.value,"md:bottom-0 md:right-0 md:top-0 md:w-sm":i.value&&!t.value,"md:bottom-0 md:right-0 md:h-16 md:w-1/2":!i.value&&!t.value}]),showToggle:ce(s),assetId:ce(r).activeAssetId,objectId:ce(r).activeObjectId,fileHandlerId:ce(r).activeFileObjectId,isOpen:ce(s)?i.value:!0,onToggle:d[1]||(d[1]=l=>i.value=!i.value)},null,8,["class","showToggle","assetId","objectId","fileHandlerId","isOpen"])]))}});const SX=sn(wX,[["__scopeId","data-v-df4920af"]]),TX={class:"h-full relative"},EX={class:"meta-data-only-view h-full sm:p-8"},IX={class:"meta-data-only-view__article m-auto sm:max-w-3xl h-full overflow-auto p-4 sm:p-12 rounded shadow sm:px-12"},CX={class:"text-3xl mb-12 sm:text-5xl font-bold py-8 after:content-[''] after:w-8 after:h-2 after:block relative after:absolute after:bottom-0 after:left-0"},AX=rt({__name:"MetaDataOnlyView",props:{assetId:{}},setup(e){const t=e,i=Le(()=>t.assetId),{asset:r}=V_(i),s=Le(()=>r.value?Eu(r.value):"Unknown"),u=Re([]);return fn(i,async()=>{u.value=await Hn.getMoreLikeThis(i.value)},{immediate:!0}),(d,l)=>(V(),pe("div",TX,[de("div",EX,[de("article",IX,[de("h2",CX,xt(s.value||"(No Title)"),1),d.assetId?(V(),je(pm,{key:0,assetId:d.assetId},null,8,["assetId"])):tt("",!0),d.assetId?(V(),je(sP,{key:1,items:u.value,listContainerClass:"sm:!grid sm:!grid-cols-2"},null,8,["items"])):tt("",!0)])])]))}});const MX=sn(AX,[["__scopeId","data-v-bbc41242"]]),aP=(e="")=>{const t=Ei(),i=Re(e),r=Le(()=>i.value?`${i.value} | ${t.instance.name}`:t.instance.name);return Hz(r),i},kX={key:0,class:"justify-between items-center gap-4 grid grid-cols-3 px-4 py-1"},PX={class:"flex justify-start"},DX={class:"flex justify-center text-xs text-gray-500 leading-none p-2"},LX={class:"flex justify-end"},OX=5,RX=rt({__name:"PrevNextSearchResultNav",setup(e){const t=Lo(),i=Ir(),r=Le(()=>{const{activeAssetId:l}=t;if(!l)return null;const m=i.matches.findIndex(g=>g.objectId===l);return m===-1?null:m});function s(){return r.value!==null&&i.hasMoreResults&&i.matches.length-r.value<=OX}fn([()=>i.matches,r],()=>{s()&&i.loadMore()});const u=Le(()=>{const l=r.value;return l===null||l<=0?null:i.matches[l-1].objectId}),d=Le(()=>{var m;const l=r.value;return l===null||l+1>=i.matches.length||i.status=="fetching"?null:((m=i.matches[l+1])==null?void 0:m.objectId)??null});return(l,m)=>r.value!==null?(V(),pe("nav",kX,[de("div",PX,[u.value?(V(),je(ai,{key:0,variant:"tertiary",to:ce(hl)(u.value)},{default:Ce(()=>[ye(ce(hM),{class:"h-3 w-3"}),Mt(" Prev ")]),_:1},8,["to"])):tt("",!0)]),de("div",DX,[ye(ai,{to:{name:"search",params:{searchId:ce(i).searchId},query:{objectId:ce(t).activeAssetId,resultsView:ce(i).resultsView}},variant:"tertiary"},{default:Ce(()=>[Mt(xt(r.value+1)+" of "+xt(ce(i).totalResults),1)]),_:1},8,["to"])]),de("div",LX,[d.value?(V(),je(ai,{key:0,variant:"tertiary",to:ce(hl)(d.value),class:"!ml-0"},{default:Ce(()=>[Mt(" Next "),ye(ce(fM),{class:"h-3 w-3"})]),_:1},8,["to"])):tt("",!0)])])):tt("",!0)}});function b2(e){return e==" "||e==`
`||e=="\r"||e=="	"}function FX(e){return e=='"'||e=="'"}const Xd="<",G_=">",qv="&lt;",oP="&gt;";class Vp{constructor(t){this.options=t}consume(t,i){return t==Xd?(i(new $X(this.options)),""):t==G_&&this.options.encodePlaintextTagDelimiters?oP:t}}class $X{constructor(t){this.options=t,this.nameBuffer="",this.isClosingTag=!1}consume(t,i){if(this.nameBuffer.length==0){if(b2(t))return i(new Vp(this.options)),(this.options.encodePlaintextTagDelimiters?qv:"<")+t;if(t=="/")return this.isClosingTag=!0,""}return b2(t)?this.isNameBufferAnAllowedTag()?(i(new cx(0,this.options)),Xd+(this.isClosingTag?"/":"")+this.nameBuffer+t):(i(new cx(1,this.options)),this.options.tagReplacementText):t==Xd?(this.nameBuffer+=qv,""):t==G_?(i(new Vp(this.options)),this.isNameBufferAnAllowedTag()?Xd+(this.isClosingTag?"/":"")+this.nameBuffer+t:this.options.tagReplacementText):t=="-"&&this.nameBuffer=="!-"?(i(new BX(this.options)),""):(this.nameBuffer+=t,"")}isNameBufferAnAllowedTag(){const t=this.nameBuffer.toLowerCase();return this.options.allowedTags?this.options.allowedTags.has(t):this.options.disallowedTags?!this.options.disallowedTags.has(t):!1}}class cx{constructor(t,i){this.mode=t,this.options=i}consume(t,i){return t==G_?i(new Vp(this.options)):FX(t)&&i(new zX(this.mode,t,this.options)),this.mode==1?"":t==Xd?qv:t}}class zX{constructor(t,i,r){this.mode=t,this.quoteCharacter=i,this.options=r}consume(t,i){return t==this.quoteCharacter&&i(new cx(this.mode,this.options)),this.mode==1?"":t==Xd?qv:t==G_?oP:t}}class BX{constructor(t){this.options=t,this.consecutiveHyphens=0}consume(t,i){return t==">"&&this.consecutiveHyphens>=2?i(new Vp(this.options)):t=="-"?this.consecutiveHyphens++:this.consecutiveHyphens=0,""}}const NX={tagReplacementText:"",encodePlaintextTagDelimiters:!0};class jX{constructor(t={}){this.state=new Vp(Object.assign(Object.assign({},NX),t)),this.transitionFunction=(i=>{this.state=i}).bind(this)}consume(t){let i="";for(const r of t)i+=this.state.consume(r,this.transitionFunction);return i}}function UX(e,t={}){return new jX(t).consume(e)}const VX=rt({__name:"AssetViewPage",props:{assetId:{},objectId:{default:null}},setup(e){const t=e,i=Lo(),r=Le(()=>!i.activeFileObjectId),s=Re(!1),u=Iu(),d=Le(()=>{var g;return((g=u.hash)==null?void 0:g.substring(1))||t.objectId||null}),l=aP();async function m(){s.value=!1;const g=await i.setActiveAsset(t.assetId,d.value);if(!g){l.value="Asset not found",s.value=!0;return}const x=Eu(g);l.value=UX(x),s.value=!0}return fn([()=>t.assetId,()=>{var g;return(g=u.params)==null?void 0:g.assetId}],m,{immediate:!0}),fn([()=>t.objectId,()=>u.hash],async()=>{await i.setActiveObject(d.value)}),BB(()=>{i.setActiveAsset(null)}),(g,x)=>(V(),je(Dk,{class:"overflow-x-hidden"},{secondaryAppHeader:Ce(()=>[ye(RX)]),default:Ce(()=>[s.value?(V(),pe(Nt,{key:0},[r.value?(V(),je(MX,{key:0,assetId:ce(i).activeAssetId},null,8,["assetId"])):(V(),je(SX,{key:1,assetId:ce(i).activeAssetId,objectId:ce(i).activeObjectId},null,8,["assetId","objectId"]))],64)):tt("",!0)]),_:1}))}}),HX={class:"collection-item p-4 rounded border transition-colors duration-150"},GX={class:"flex items-center gap-1"},WX={key:0},qX=rt({__name:"CollectionItem",props:{collection:{}},setup(e){const t=e,i=Le(()=>{const s=t.collection.previewImageId;return s?yc(s):null}),r=Re(!1);return(s,u)=>{const d=y_("CollectionItem",!0);return V(),pe("div",HX,[de("div",GX,[s.collection.children&&s.collection.children.length>0?(V(),pe("button",{key:0,class:"p-2 -ml-2 rounded-full inline-flex items-center justify-center hover:bg-white transition-colors duration-150",onClick:u[0]||(u[0]=l=>r.value=!r.value)},[ye(ce(Ih),{class:kn(["transform w-4 h-4",{"-rotate-90":!r.value}])},null,8,["class"])])):tt("",!0),ye(os,{class:"flex gap-2 flex-1 items-center !no-underline h-full",to:`/collections/browseCollection/${s.collection.id}`},{default:Ce(()=>[i.value?(V(),je(Mu,{key:0,src:i.value,alt:s.collection.title,class:"w-6 h-6 object-cover rounded-md"},null,8,["src","alt"])):tt("",!0),de("h2",{class:kn({"font-bold":r.value})},xt(s.collection.title),3)]),_:1},8,["to"])]),s.collection.children?(V(),pe("div",WX,[(V(!0),pe(Nt,null,$n(s.collection.children,l=>as((V(),je(d,{key:l.id,collection:l,class:"!p-0 m-2 ml-8"},null,8,["collection"])),[[sa,r.value]])),128))])):tt("",!0)])}}});const ZX=sn(qX,[["__scopeId","data-v-6b255d03"]]),KX=e=>(ao("data-v-9adf5d43"),e=e(),oo(),e),XX={class:"collections-page p-8 px-4"},YX=KX(()=>de("h1",{class:"text-4xl font-bold my-8"},"Collections",-1)),JX=rt({__name:"AllCollectionsPage",setup(e){nm(l=>({"24980f8b":s.value,"249ee271":d.value}));const t=Ei(),i=Re(null),r=Le(()=>t.collections),s=Re(1),u=Re(null);Fn(async()=>{const l=t.pages.find(m=>m.title==="Collection Page");l&&(u.value=await Hn.getStaticPage(l.id))}),k_(i,l=>{const[m]=l,{width:g}=m.contentRect;g<640&&(s.value=1),g<768&&(s.value=2),g<1024&&(s.value=3),g>=1024&&(s.value=4)});const d=Le(()=>{const l=r.value.length;return Math.ceil(l/s.value)});return(l,m)=>(V(),je(co,null,{default:Ce(()=>{var g;return[de("div",XX,[YX,(g=u.value)!=null&&g.content?(V(),je(Oo,{key:0,class:"mb-8",html:u.value.content},null,8,["html"])):tt("",!0),de("div",{ref_key:"collectionGrid",ref:i,class:"grid"},[(V(!0),pe(Nt,null,$n(r.value,x=>(V(),je(ZX,{key:x.id,collection:x},null,8,["collection"]))),128))],512)])]}),_:1}))}});const QX=sn(JX,[["__scopeId","data-v-9adf5d43"]]),eY=rt({__name:"BrowseCollectionPage",props:{collectionId:{}},setup(e){const t=e,i=lo();return fn([()=>t.collectionId],async()=>{const r=await Hn.getSearchIdForCollection(t.collectionId);i.replace(`/search/s/${r}`)},{immediate:!0}),(r,s)=>(V(),je(co))}}),tY={class:"pb-8 my-8"},nY={key:0,class:"text-4xl font-bold mt-4"},iY=rt({__name:"BrowseCollectionHeader",props:{collectionId:{}},setup(e){const t=e,i=Ei(),r=Re(null);return fn([()=>t.collectionId,()=>i.isReady],async()=>{i.isReady&&(r.value=await i.getCollectionById(t.collectionId))},{immediate:!0}),(s,u)=>{var d,l,m;return V(),pe("div",null,[de("header",tY,[ye(os,{to:"/search/listCollections",class:"flex items-center gap-1"},{default:Ce(()=>[ye(ce(Cu),{class:"transform rotate-180 h-4 w-4"}),Mt(" Back to Collections ")]),_:1}),(d=r.value)!=null&&d.title?(V(),pe("h2",nY," Browsing "+xt((l=r.value)==null?void 0:l.title),1)):tt("",!0),(m=r.value)!=null&&m.description?(V(),je(Oo,{key:1,html:r.value.description,class:"prose max-w-screen-lg mt-2"},null,8,["html"])):tt("",!0),r.value?tt("",!0):(V(),je(Ao,{key:2,class:"!w-1/2 !h-12 !my-8"}))])])}}}),rY={key:0},Eo=rt({__name:"Tab",props:{id:{},label:{}},setup(e){const t=e,i=wi(fk);return Fn(()=>{if(!i)throw new Error("TabsContext not found");i.addTab(t)}),Wi(()=>{if(!i)throw new Error("TabsContext not found");i.removeTab(t)}),(r,s)=>{var u;return(u=ce(i))!=null&&u.isActiveTab(r.id)?(V(),pe("div",rY,[En(r.$slots,"default")])):tt("",!0)}}}),sY=["onClick"],aY={class:"py-4"},lP=rt({__name:"Tabs",props:{labelsClass:{},activeTabId:{}},emits:["tabChange"],setup(e,{emit:t}){const i=e,r=Re([]),s=m=>{r.value.push(m)},u=m=>{const g=r.value.findIndex(x=>x.id===m.id);g!==-1&&r.value.splice(g,1)},d=m=>{const g=r.value.find(x=>x.id===m);if(!g)throw new Error(`Tab with id ${m} not found`);t("tabChange",g)};return Oi(fk,{addTab:s,removeTab:u,setActiveTab:d,isActiveTab:m=>m===i.activeTabId}),(m,g)=>(V(),pe("div",null,[de("div",{class:kn(["tabs flex",m.labelsClass])},[(V(!0),pe(Nt,null,$n(r.value,x=>(V(),pe("button",{key:x.id,class:kn([`tab-button tab-button--${x.id} px-4 py-2 text-sm border-b-2`,{"border-transparent text-neutral-400":x.id!==m.activeTabId,"tab-button--is-active border-neutral-900 text-neutral-900 font-bold":x.id===m.activeTabId}]),onClick:w=>d(x.id)},xt(x.label),11,sY))),128))],2),de("div",aY,[En(m.$slots,"default")])]))}}),oY={class:"card-skeleton flex flex-col overflow-hidden border rounded-md shadow-sm"},lY={class:"placeholder-image aspect-video flex items-center justify-center w-full overflow-hidden"},cY={class:"flex-1 p-4"},uY=rt({__name:"SkeletonCard",setup(e){return(t,i)=>(V(),pe("article",oY,[de("div",lY,[ye(Ao,{width:"100%",height:"100%",class:"rounded-none"},{default:Ce(()=>[ye(C1,{class:"opacity-25 w-8 h-8"})]),_:1})]),de("div",cY,[ye(Ao,{height:"1.5rem",width:"50%",class:"mb-4"}),(V(),pe(Nt,null,$n(3,r=>ye(Ao,{key:r,class:"mb-2",height:"0.75rem"})),64))])]))}}),dY={class:"grid grid-cols-auto-md gap-4"},hY=rt({__name:"SearchResultsGrid",props:{totalResults:{default:void 0},matches:{},status:{},drawerId:{default:void 0}},emits:["loadMore"],setup(e,{emit:t}){const i=e,{arrivedState:r}=P_(window,{offset:{bottom:100}});fn(r,u=>{u.bottom&&s.value&&i.status!=="fetching"&&t("loadMore")},{immediate:!0});const s=Le(()=>(i.totalResults??1/0)>i.matches.length);return(u,d)=>(V(),pe("div",null,[de("div",dY,[(V(!0),pe(Nt,null,$n(u.matches,l=>(V(),je(Wv,{id:`object-${l.objectId}`,key:l.objectId,searchMatch:l,showDetails:!1,drawerId:u.drawerId},null,8,["id","searchMatch","drawerId"]))),128)),(V(!0),pe(Nt,null,$n(Math.min(30,(u.totalResults??1/0)-u.matches.length),l=>as((V(),je(uY,{key:l})),[[sa,u.status==="fetching"]])),128))])]))}}),fY={key:1,class:"h-8 w-8 sm:h-16 sm:w-16"},pY={class:"flex-1"},mY={class:"font-bold text-md sm:text-lg leading-tight sm:mb-2 group-hover:text-blue-700 group-focus:text-blue-700"},gY={key:0,class:"inline-flex items-baseline gap-x-4 sm:gap-y-2 flex-wrap m-0"},vY={class:"text-xs uppercase"},_Y={class:"text-sm"},yY={class:"not-sr-only hidden sm:inline-flex self-center rounded-full w-10 h-10 items-center justify-center group-hover:bg-blue-700 transition-all"},cP=rt({__name:"SearchResultRow",props:{searchMatch:{}},setup(e){const t=e,i=Le(()=>Array.isArray(t.searchMatch.title)?t.searchMatch.title.map(Qa).join(","):t.searchMatch.title&&t.searchMatch.title.length>0?Qa(t.searchMatch.title):"(no title)"),r=Le(()=>{const{primaryHandlerId:s}=t.searchMatch;return s?yc(s):null});return(s,u)=>(V(),je(os,{to:ce(hl)(s.searchMatch.objectId),class:"group hover:no-underline relative text-inherit group focus:outline-blue-600 focus:outline-offset-2 focus-within:outline-solid search-result-row flex bg-white p-2 sm:p-4 gap-4 group-hover:bg-blue-50 transition-all rounded-md border-2 border-transparent hover:border-blue-600 group-focus:bg-blue-50 group-focus:border-blue-600 items-center"},{default:Ce(()=>{var d;return[r.value?(V(),je(Mu,{key:0,src:r.value,alt:i.value,class:"h-8 w-8 sm:h-16 sm:w-16 object-cover rounded-md overflow-hidden"},null,8,["src","alt"])):(V(),pe("div",fY)),de("div",pY,[de("h1",mY,xt(i.value),1),(d=t.searchMatch)!=null&&d.entries?(V(),pe("dl",gY,[(V(!0),pe(Nt,null,$n(t.searchMatch.entries,(l,m)=>{var g;return V(),pe("div",{key:m,class:"inline-flex items-baseline gap-x-2 flex-wrap text-neutral-400 group-hover:text-blue-700 group-focus:text-blue-700"},[de("dt",vY,xt((l==null?void 0:l.label)||"Item"),1),de("dd",_Y,xt((g=l.entries)==null?void 0:g.join(", ")),1)])}),128))])):tt("",!0)]),de("div",yY,[ye(ce(Cu),{class:"text-neutral-900 group-hover:text-white transition-all"})])]}),_:1},8,["to"]))}}),bY={class:"search-result-row flex bg-white p-2 sm:p-4 gap-4 rounded-md border-2 border-transparent"},xY={class:"flex-1"},wY=rt({__name:"SkeletonResultRow",setup(e){return(t,i)=>(V(),pe("div",bY,[ye(Ao,{width:"4rem",height:"4rem"},{default:Ce(()=>[ye(C1,{class:"opacity-25"})]),_:1}),de("div",xY,[ye(Ao,{width:"25%",height:"1.25rem",class:"mb-4"}),(V(),pe(Nt,null,$n(2,r=>ye(Ao,{key:r,class:"my-2",height:"0.75rem",width:"50%"})),64))])]))}}),SY={class:"flex flex-col gap-1"},TY=rt({__name:"SearchResultsList",props:{totalResults:{},matches:{},status:{}},emits:["loadMore"],setup(e,{emit:t}){const i=e,{arrivedState:r}=P_(window,{offset:{bottom:100}});fn(r,u=>{u.bottom&&s.value&&i.status!=="fetching"&&t("loadMore")},{immediate:!0});const s=Le(()=>(i.totalResults??1/0)>i.matches.length);return(u,d)=>(V(),pe("div",null,[de("div",SY,[(V(!0),pe(Nt,null,$n(u.matches,l=>(V(),je(cP,{id:`object-${l.objectId}`,key:l.objectId,searchMatch:l,showDetails:!1},null,8,["id","searchMatch"]))),128)),(V(!0),pe(Nt,null,$n(Math.min(30,(u.totalResults??1/0)-u.matches.length),l=>as((V(),je(wY,{key:l})),[[sa,u.status==="fetching"]])),128))])]))}});const Fo=navigator?navigator.userAgent.toLowerCase():"no-user-agent-specified",fh=document?document.documentElement:null,EY=Fo?Fo.indexOf("phantom")!==-1:!1,vm=window&&"ActiveXObject"in window;vm&&Fo.match(/MSIE 9/i);const W_=Fo.indexOf("webkit")!==-1;Fo.indexOf("android");const IY=Fo.search("android [23]")!==-1,ku=window?typeof window.orientation<"u":!1,CY=navigator&&window?navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&!window.PointerEvent:!1,AY=navigator&&window?window.PointerEvent&&navigator.pointerEnabled&&navigator.maxTouchPoints:CY,uP=window?window.opera:!1;Fo.indexOf("gecko");const ph=Fo.indexOf("gecko")!==-1&&!W_&&!uP&&!vm;Fo.indexOf("chrome");const MY=Fo.indexOf("edge/")!==-1;fh&&vm&&"transition"in fh.style;window&&"WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix;fh&&"MozPerspective"in fh.style;fh&&"OTransition"in fh.style;let x2=window?"devicePixelRatio"in window&&window.devicePixelRatio>1:!1;if(!x2&&window&&"matchMedia"in window){let e=window.matchMedia("(min-resolution:144dpi)");x2=e&&e.matches}const ko=window&&!window.L_NO_TOUCH&&!EY&&(AY||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);function kY(){var e=window.innerWidth,t=window.innerHeight,i="portrait";return e>t&&(i="landscape"),i}function _m(e){return typeof e=="string"?document.getElementById(e):e}function hn(e,t,i){var r=document.createElement(e);return r.className=t,i&&i.appendChild(r),r}function Jf(e,t){var i=hn("button",e,t);return i.type="button",i}function ux(e){for(var t={x:0,y:0};e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t.x+=e.offsetLeft,t.y+=e.offsetTop,e=e.offsetParent;return t}function dP(e){for(var t=document.documentElement.style,i=0;i<e.length;i++)if(e[i]in t)return e[i];return!1}dP(["transition","webkitTransition","OTransition","MozTransition","msTransition"]);dP(["transformProperty","WebkitTransform","OTransform","MozTransform","msTransform"]);function PY(e,t){return e.className.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)}function cc(e,t){PY(e,t)||(e.className+=(e.className?" ":"")+t)}function hP(e,t){e.className=e.className.replace(/(\S+)\s*/g,function(i,r){return r===t?"":i}).replace(/^\s+/,"")}class mi extends Error{constructor(t,i){super(),this.name="TLError",this.message=t||"error",this.message_key=this.message,this.detail=i||""}}const w2={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function fP(e){w2[e.toLowerCase()]&&(e=w2[e.toLowerCase()]);var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(r,s,u,d){return s+s+u+u+d+d});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null}function Pi(e,t){var i;for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}function DY(e){return e==null?!1:e==!0||String(e).toLowerCase()=="true"||Number(e)==1}function zd(e){for(var t=Array.prototype.slice.call(arguments,1),i=0,r=t.length,s;i<r;i++)s=t[i]||{},Pi(e,s);return e}const pP=[];function LY(e){pP.push(e)}function gi(e){pP.forEach(t=>{try{t(e)}catch(i){console&&console.log&&console.log("Error handling trace",i)}})}function tl(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}const S2=function(){var e=0,t="_tl_id";return function(i){return i[t]=i[t]||++e,i[t]}}();function ia(e){return e&&typeof e.replace=="function"?e.replace(/^\s+|\s+$/g,""):""}function Ss(e,...t){for(let r of t)for(var i of Object.getOwnPropertyNames(r.prototype))e.prototype[i]=r.prototype[i]}function OY(e,t){if(t||(t=yu(6)),!(t in e))return t;var i=t.match(/^(.+)(-\d+)?$/)[1],r=[];for(let u in e)u.match(/^(.+?)(-\d+)?$/)[1]==i&&r.push(u);t=i+"-"+(r.length+1);for(var s=r.length;r.indexOf(t)!=-1;s++)t=i+"-"+s;return t}function RY(e){var t=[];if(Object.keys)t=Object.keys(e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);for(var r=0;r<t.length;r++){var s=t[r];if(e[s]!=null&&typeof e[s]!="string"||ia(e[s]).length!=0)return!1}return!0}function V0(e){e=ia(e),e=e.toLowerCase();for(var t="ãàáäâẽèéëêìíïîõòóöôùúüûñç·/_,:;",i="aaaaaeeeeeiiiiooooouuuunc------",r=0,s=t.length;r<s;r++)e=e.replace(new RegExp(t.charAt(r),"g"),i.charAt(r));return e=e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),e=e.replace(/^([0-9])/,"_$1"),e}function yu(e,t){var i=function(u){return Math.floor(Math.random()*u)},r=function(){var u="abcdefghijklmnopqurstuvwxyz";return u.substr(i(32),1)},s=function(u){for(var d="",l=0;l<u;l++)d+=r();return d};return t?t+"-"+s(e):"tl-"+s(e)}function FY(e,t,i){for(var r=0;r<e.length;r++)if(t<e[r])return e[r];return i||t}function $Y(e,t,i){for(var r=e.length-1;r>=0;r--)if(t>e[r])return e[r];return i||t}function zY(e){return e==parseFloat(e)?!(e%2):void 0}function mP(e,t,i,r){for(var s=r||0,u=0;u<t.length;u++)t[u].data[i]==e&&(s=u);return s}function Yd(e){return e&&(e=e.replace(/<a\b[^>]*>/i,""),e=e.replace(/<\/a>/i,""),e)}function BY(e,t){e.data=zd({},e.data,t),e.data.unique_id===""&&(e.data.unique_id=yu(6))}function NY(e){return e.match(/<p>[\s\S]*?<\/p>/)?e:"<p>"+e+"</p>"}function mh(e){return e=e.replace(/(<[^>]*>)+/g,""),e.replace('"',"'")}function dx(e,t,i){var r=function(l,m,g){g||(g="");var x=30;return m&&m.length>x&&(m=m.substring(0,x)+"…"),g+"<a class='tl-makelink' href='"+l+"' onclick='void(0)'>"+m+"</a>"},s=/\b(?:https?|ftp):\/\/([a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|])/gim,u=/(^|[^\/>])(www\.[\S]+(\b|$))/gim,d=/([a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+)/gim;return e.replace(s,function(l,m,g,x){if(g>0){var w=x[g-1];if(w=='"'||w=="'"||w=="=")return l}return r(l,m)}).replace(u,function(l,m,g,x,w){return r("http://"+g,g,m)}).replace(d,function(l,m,g,x){return r("mailto:"+m,m)})}function q_(e){return e.replace(/(.*)www.dropbox.com\/(.*)/,"$1dl.dropboxusercontent.com/$2")}const Pu={square:e=>{var t={w:0,h:0};return e.w>e.h&&e.h>0?(t.h=e.h,t.w=e.h):(t.w=e.w,t.h=e.w),t},r16_9:e=>e.w!==null&&e.w!==""?Math.round(e.w/16*9):e.h!==null&&e.h!==""?Math.round(e.h/9*16):0,r4_3:e=>{if(e.w!==null&&e.w!=="")return Math.round(e.w/4*3);if(e.h!==null&&e.h!=="")return Math.round(e.h/3*4)}};function jY(e){var t,i=[],r,s;t=e.toString(),t.match("&#038;")?t=t.replace("&#038;","&"):t.match("&#38;")?t=t.replace("&#38;","&"):t.match("&amp;")&&(t=t.replace("&amp;","&")),s=t.slice(t.indexOf("?")+1).split("&");for(var u=0;u<s.length;u++)r=s[u].split("="),i.push(r[0]),i[r[0]]=r[1];return i}function UY(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i+"="+e[i]);return"?"+t.join("&")}function VY(e,t){if(typeof e<"u"){var i=0;for(var r in e){if(t===i)return e[r];i++}return""}else return""}let HY=function(e){var t=e||"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",i=t.length;return{encode:function(r){if(typeof r!="number"||r!==parseInt(r))throw'"encode" only accepts integers.';for(var s="";r;){var u=r%i;r=Math.floor(r/i),s=t[u].toString()+s}return s},decode:function(r){if(typeof r!="string")throw'"decode" only accepts strings.';for(var s=0;r;){var u=t.indexOf(r[0]);if(u<0)throw`"decode" can't find "`+r[0]+'" in the alphabet: "'+t+'"';var d=r.length-1;s+=u*Math.pow(i,d),r=r.substring(1)}return s}}}();function H0(e){if(typeof e=="string"){let s=e.match(/^\s*(\d+h)?(\d+m)?(\d+s)?\s*/i);if(s){var t=parseInt(s[1])||0,i=parseInt(s[2])||0,r=parseInt(s[3])||0;return r+i*60+t*60*60}}else if(typeof e=="number")return e;return 0}function GY(e){var t=new DOMParser().parseFromString(e,"text/html");return t.body.textContent||""}function WY(e){}function Z_(e){var t=new WY;return t.get(e)}function Hp(e){return e==1?1:1-Math.pow(2,-10*e)}function Ch(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}let Zv=function(){};Zv.extend=function(e){var t=function(){this.initialize&&this.initialize.apply(this,arguments)},i=function(){};i.prototype=this.prototype;var r=new i;r.constructor=t,t.prototype=r,t.superclass=this.prototype;for(var s in this)this.hasOwnProperty(s)&&s!=="prototype"&&s!=="superclass"&&(t[s]=this[s]);return e.statics&&(zd(t,e.statics),delete e.statics),e.includes&&(zd.apply(null,[r].concat(e.includes)),delete e.includes),e.options&&r.options&&(e.options=zd({},r.options,e.options)),zd(r,e),t.extend=Zv.extend,t.include=function(u){zd(this.prototype,u)},t};class Ts{on(t,i,r){if(!i)throw new mi("No callback function provided");var s=this._tl_events=this._tl_events||{};return s[t]=s[t]||[],s[t].push({action:i,context:r||this}),this}addEventListener(t,i,r){return this.on(t,i,r)}hasEventListeners(t){var i="_tl_events";return i in this&&t in this[i]&&this[i][t].length>0}removeEventListener(t,i,r){if(!this.hasEventListeners(t))return this;for(var s=0,u=this._tl_events,d=u[t].length;s<d;s++)if(u[t][s].action===i&&(!r||u[t][s].context===r))return u[t].splice(s,1),this;return this}off(t,i,r){return this.removeEventListener(t,i,r)}fire(t,i){if(!this.hasEventListeners(t))return this;for(var r=Pi({type:t,target:this},i),s=this._tl_events[t].slice(),u=0,d=s.length;u<d;u++)s[u].action?s[u].action.call(s[u].context||this,r):gi(`no action defined for ${t} listener`);return this}}function pl(e,t){return qY(e,t)}const qY=function(){var e=document,t=window,i=t.performance,r=i&&(i.now||i.webkitNow||i.msNow||i.mozNow),s=r?function(){return r.call(i)}:function(){return+new Date},u=e.documentElement,d=!1,l=1e3,m=/^rgb\(|#/,g=/^([+\-])=([\d\.]+)/,x=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,w=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,I=/scale\(((?:[+\-]=)?([\d\.]+))\)/,C=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,A=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,L={lineHeight:1,zoom:1,zIndex:1,opacity:1,transform:1},$=function(){var nt=e.createElement("a").style,et=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],dt;for(dt=0;dt<et.length;dt++)if(et[dt]in nt)return et[dt]}(),F=function(){return typeof e.createElement("a").style.opacity<"u"}(),z=e.defaultView&&e.defaultView.getComputedStyle?function(nt,et){et=et=="transform"?$:et,et=X(et);var dt=null,Be=e.defaultView.getComputedStyle(nt,"");return Be&&(dt=Be[et]),nt.style[et]||dt}:u.currentStyle?function(nt,et){if(et=X(et),et=="opacity"){var dt=100;try{dt=nt.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch{try{dt=nt.filters("alpha").opacity}catch{}}return dt/100}var Be=nt.currentStyle?nt.currentStyle[et]:null;return nt.style[et]||Be}:function(nt,et){return nt.style[X(et)]},ee=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||t.oRequestAnimationFrame||function(nt){t.setTimeout(function(){nt(+new Date)},17)}}(),H=[];ee(function(nt){d=nt>1e12!=s()>1e12});function Q(nt,et,dt){if(Array.prototype.indexOf)return nt.indexOf(et);for(dt=0;dt<nt.length;++dt)if(nt[dt]===et)return dt}function ae(nt){var et,dt=H.length;for(r&&nt>1e12&&(nt=s()),d&&(nt=s()),et=dt;et--;)H[et](nt);H.length&&ee(ae)}function be(nt){H.push(nt)===1&&ee(ae)}function te(nt){var et,dt=Q(H,nt);dt>=0&&(et=H.slice(dt+1),H.length=dt,H=H.concat(et))}function G(nt,et){var dt={},Be;return(Be=nt.match(w))&&(dt.rotate=$t(Be[1],et?et.rotate:null)),(Be=nt.match(I))&&(dt.scale=$t(Be[1],et?et.scale:null)),(Be=nt.match(C))&&(dt.skewx=$t(Be[1],et?et.skewx:null),dt.skewy=$t(Be[3],et?et.skewy:null)),(Be=nt.match(A))&&(dt.translatex=$t(Be[1],et?et.translatex:null),dt.translatey=$t(Be[3],et?et.translatey:null)),dt}function U(nt){var et="";return"rotate"in nt&&(et+="rotate("+nt.rotate+"deg) "),"scale"in nt&&(et+="scale("+nt.scale+") "),"translatex"in nt&&(et+="translate("+nt.translatex+"px,"+nt.translatey+"px) "),"skewx"in nt&&(et+="skew("+nt.skewx+"deg,"+nt.skewy+"deg)"),et}function B(nt,et,dt){return"#"+(1<<24|nt<<16|et<<8|dt).toString(16).slice(1)}function ie(nt){var et=nt.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return(et?B(et[1],et[2],et[3]):nt).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function X(nt){return nt.replace(/-(.)/g,function(et,dt){return dt.toUpperCase()})}function ne(nt){return typeof nt=="function"}function Ee(nt){return Math.sin(nt*Math.PI/2)}function Ie(nt,et,dt,Be,Ke,ut){Be=ne(Be)?Be:It.easings[Be]||Ee;var Ot=nt||l,Vt=this,_n=ut-Ke,qt=s(),_e=0,ke=0;function ge(ft){var q=ft-qt;if(q>Ot||_e)return ut=isFinite(ut)?ut:1,_e?ke&&et(ut):et(ut),te(ge),dt&&dt.apply(Vt);isFinite(ut)?et(_n*Be(q/Ot)+Ke):et(Be(q/Ot))}return be(ge),{stop:function(ft){_e=1,ke=ft,ft||(dt=null)}}}function Xe(nt,et){var dt=nt.length,Be=[],Ke,ut;for(Ke=0;Ke<dt;++Ke)Be[Ke]=[nt[Ke][0],nt[Ke][1]];for(ut=1;ut<dt;++ut)for(Ke=0;Ke<dt-ut;++Ke)Be[Ke][0]=(1-et)*Be[Ke][0]+et*Be[parseInt(Ke+1,10)][0],Be[Ke][1]=(1-et)*Be[Ke][1]+et*Be[parseInt(Ke+1,10)][1];return[Be[0][0],Be[0][1]]}function lt(nt,et,dt){var Be=[],Ke,ut,Ot,Vt;for(Ke=0;Ke<6;Ke++)Ot=Math.min(15,parseInt(et.charAt(Ke),16)),Vt=Math.min(15,parseInt(dt.charAt(Ke),16)),ut=Math.floor((Vt-Ot)*nt+Ot),ut=ut>15?15:ut<0?0:ut,Be[Ke]=ut.toString(16);return"#"+Be.join("")}function st(nt,et,dt,Be,Ke,ut,Ot){if(Ke=="transform"){Ot={};for(var Vt in dt[ut][Ke])Ot[Vt]=Vt in Be[ut][Ke]?Math.round(((Be[ut][Ke][Vt]-dt[ut][Ke][Vt])*nt+dt[ut][Ke][Vt])*l)/l:dt[ut][Ke][Vt];return Ot}else return typeof dt[ut][Ke]=="string"?lt(nt,dt[ut][Ke],Be[ut][Ke]):(Ot=Math.round(((Be[ut][Ke]-dt[ut][Ke])*nt+dt[ut][Ke])*l)/l,Ke in L||(Ot+=et[ut][Ke]||"px"),Ot)}function $t(nt,et,dt,Be,Ke){return(dt=g.exec(nt))?(Ke=parseFloat(dt[2]))&&et+(dt[1]=="+"?1:-1)*Ke:parseFloat(nt)}function It(nt,et){var dt=nt?dt=isFinite(nt.length)?nt:[nt]:[],Be,Ke=et.complete,ut=et.duration,Ot=et.easing,Vt=et.bezier,_n=[],qt=[],_e=[],ke=[],ge,ft;for(Vt&&(ge=et.left,ft=et.top,delete et.right,delete et.bottom,delete et.left,delete et.top),Be=dt.length;Be--;){if(_n[Be]={},qt[Be]={},_e[Be]={},Vt){var q=z(dt[Be],"left"),fe=z(dt[Be],"top"),Pe=[$t(ne(ge)?ge(dt[Be]):ge||0,parseFloat(q)),$t(ne(ft)?ft(dt[Be]):ft||0,parseFloat(fe))];ke[Be]=ne(Vt)?Vt(dt[Be],Pe):Vt,ke[Be].push(Pe),ke[Be].unshift([parseInt(q,10),parseInt(fe,10)])}for(var We in et){switch(We){case"complete":case"duration":case"easing":case"bezier":continue}var pt=z(dt[Be],We),ht,zt=ne(et[We])?et[We](dt[Be]):et[We];if(typeof zt=="string"&&m.test(zt)&&!m.test(pt)){delete et[We];continue}_n[Be][We]=We=="transform"?G(pt):typeof zt=="string"&&m.test(zt)?ie(pt).slice(1):parseFloat(pt),qt[Be][We]=We=="transform"?G(zt,_n[Be][We]):typeof zt=="string"&&zt.charAt(0)=="#"?ie(zt).slice(1):$t(zt,parseFloat(pt)),typeof zt=="string"&&(ht=zt.match(x))&&(_e[Be][We]=ht[1])}}return Ie.apply(dt,[ut,function(Dt,Gt,ln){for(Be=dt.length;Be--;){Vt&&(ln=Xe(ke[Be],Dt),dt[Be].style.left=ln[0]+"px",dt[Be].style.top=ln[1]+"px");for(var vt in et)Gt=st(Dt,_e,_n,qt,vt,Be),vt=="transform"?dt[Be].style[$]=U(Gt):vt=="opacity"&&!F?dt[Be].style.filter="alpha(opacity="+Gt*100+")":dt[Be].style[X(vt)]=Gt}},Ke,Ot])}return It.tween=Ie,It.getStyle=z,It.bezier=Xe,It.transform=$,It.parseTransform=G,It.formatTransform=U,It.easings={},It}();class gl{show(t){t||(this._el.container.style.display="block")}hide(t){this._el.container.style.display="none"}addTo(t){t.appendChild(this._el.container),this.onAdd()}removeFrom(t){t.removeChild(this._el.container),this.onRemove()}animatePosition(t,i){var r={duration:this.options.duration,easing:this.options.ease};for(var s in t)t.hasOwnProperty(s)&&(r[s]=t[s]+"px");this.animator&&this.animator.stop(),this.animator=pl(i,r)}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}setPosition(t,i){for(var r in t)t.hasOwnProperty(r)&&(i?i.style[r]=t[r]+"px":this._el.container.style[r]=t[r]+"px")}getPosition(){return ux(this._el.container)}}let ZY=class{constructor(t,i,r){this._el={drag:t,move:t},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},r&&(this._el.move=r),this.options={enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:!1,right:!1},momentum_multiplier:2e3,duration:1e3,ease:Ch},this.animator=null,this.dragevent=this.mousedrag,ko&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},Pi(this.options,i)}enable(t){this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){ti.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),ti.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(t){this.options.constraint=t}_onDragStart(t){ko?t.originalEvent?(this.data.pagex.start=t.originalEvent.touches[0].screenX,this.data.pagey.start=t.originalEvent.touches[0].screenY):(this.data.pagex.start=t.targetTouches[0].screenX,this.data.pagey.start=t.targetTouches[0].screenY):(this.data.pagex.start=t.pageX,this.data.pagey.start=t.pageY),this.options.enable.x&&(this._el.move.style.left=this.data.pagex.start-this._el.move.offsetWidth/2+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.pagey.start-this._el.move.offsetHeight/2+"px"),this.data.pos.start=ux(this._el.drag),this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),ti.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),ti.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(t){this.data.sliding=!1,ti.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),ti.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(t){t.preventDefault(),this.data.sliding=!0,ko?t.originalEvent?(this.data.pagex.end=t.originalEvent.touches[0].screenX,this.data.pagey.end=t.originalEvent.touches[0].screenY):(this.data.pagex.end=t.targetTouches[0].screenX,this.data.pagey.end=t.targetTouches[0].screenY):(this.data.pagex.end=t.pageX,this.data.pagey.end=t.pageY),this.data.pos.end=ux(this._el.drag),this.data.new_pos.x=-(this.data.pagex.start-this.data.pagex.end-this.data.pos.start.x),this.data.new_pos.y=-(this.data.pagey.start-this.data.pagey.end-this.data.pos.start.y),this.options.enable.x&&(this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var t={x:0,y:0,time:0},i={x:0,y:0,time:0},r=!1;t.time=(new Date().getTime()-this.data.time.start)*10,i.time=(new Date().getTime()-this.data.time.start)*10,i.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),i.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),t.x=Math.round(i.x/i.time),t.y=Math.round(i.y/i.time),this.data.new_pos.x=Math.min(this.data.pos.end.x+t.x),this.data.new_pos.y=Math.min(this.data.pos.end.y+t.y),this.options.enable.x?this.data.new_pos.x<0&&(this.data.new_pos.x=0):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,i.time<3e3&&(r=!0),Math.abs(i.x)>1e4&&(this.data.direction="left",i.x>0&&(this.data.direction="right")),Math.abs(i.y)>1e4&&(this.data.direction="up",i.y>0&&(this.data.direction="down")),this._animateMomentum(),r&&this.fire("swipe_"+this.data.direction,this.data)}_animateMomentum(){var t={x:this.data.new_pos.x,y:this.data.new_pos.y},i={duration:this.options.duration,easing:Hp};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(t.y>this.options.constraint.bottom?t.y=this.options.constraint.bottom:t.y<this.options.constraint.top&&(t.y=this.options.constraint.top)),i.top=Math.floor(t.y)+"px"),this.options.enable.x&&((this.options.constraint.left||this.options.constraint.right)&&(t.x>this.options.constraint.left?t.x=this.options.constraint.left:t.x<this.options.constraint.right&&(t.x=this.options.constraint.right)),i.left=Math.floor(t.x)+"px"),this.animator=pl(this._el.move,i),this.fire("momentum",this.data)}};Ss(Ts);var ti={addListener:function(e,t,i,r){var s=S2(i),u="_tl_"+t+s;if(!e[u]){var d=function(g){return i.call(r||e,g||ti._getEvent())};if(ko&&t==="dblclick"&&this.addDoubleTapListener)this.addDoubleTapListener(e,d,s);else if("addEventListener"in e)if(t==="mousewheel")e.addEventListener("DOMMouseScroll",d,!1),e.addEventListener(t,d,!1);else if(t==="mouseenter"||t==="mouseleave"){var l=d,m=t==="mouseenter"?"mouseover":"mouseout";d=function(g){if(ti._checkMouse(e,g))return l(g)},e.addEventListener(m,d,!1)}else e.addEventListener(t,d,!1);else"attachEvent"in e&&e.attachEvent("on"+t,d);e[u]=d}},removeListener:function(e,t,i){var r=S2(i),s="_tl_"+t+r,u=e[s];u&&(ko&&t==="dblclick"&&this.removeDoubleTapListener?this.removeDoubleTapListener(e,r):"removeEventListener"in e?t==="mousewheel"?(e.removeEventListener("DOMMouseScroll",u,!1),e.removeEventListener(t,u,!1)):t==="mouseenter"||t==="mouseleave"?e.removeEventListener(t==="mouseenter"?"mouseover":"mouseout",u,!1):e.removeEventListener(t,u,!1):"detachEvent"in e&&e.detachEvent("on"+t,u),e[s]=null)},_checkMouse:function(e,t){var i=t.relatedTarget;if(!i)return!0;try{for(;i&&i!==e;)i=i.parentNode}catch{return!1}return i!==e},_getEvent:function(){var e=window.event;if(!e)for(var t=arguments.callee.caller;t&&(e=t.arguments[0],!(e&&window.Event===e.constructor));)t=t.caller;return e},stopPropagation:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},disableClickPropagation:function(e){ti.addListener(e,ZY.START,ti.stopPropagation),ti.addListener(e,"click",ti.stopPropagation),ti.addListener(e,"dblclick",ti.stopPropagation)},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},stop:function(e){ti.preventDefault(e),ti.stopPropagation(e)},getWheelDelta:function(e){var t=0;return e.wheelDelta&&(t=e.wheelDelta/120),e.detail&&(t=-e.detail/3),t}},vl=function(){var e,t,i,r,s=[],u=s.slice,d=s.filter,l=window.document,m={},g={},x={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},w=/^\s*<(\w+|!)[^>]*>/,I=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,C=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,A=/^(?:body|html)$/i,L=/([A-Z])/g,$=["val","css","html","text","data","width","height","offset"],F=["after","prepend","before","append"],z=l.createElement("table"),ee=l.createElement("tr"),H={tr:l.createElement("tbody"),tbody:z,thead:z,tfoot:z,td:ee,th:ee,"*":l.createElement("div")},Q=/complete|loaded|interactive/,ae=/^[\w-]*$/,be={},te=be.toString,G={},U,B,ie=l.createElement("div"),X={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},ne=Array.isArray||function(q){return q instanceof Array};G.matches=function(q,fe){if(!fe||!q||q.nodeType!==1)return!1;var Pe=q.webkitMatchesSelector||q.mozMatchesSelector||q.oMatchesSelector||q.matchesSelector;if(Pe)return Pe.call(q,fe);var We,pt=q.parentNode,ht=!pt;return ht&&(pt=ie).appendChild(q),We=~G.qsa(pt,fe).indexOf(q),ht&&ie.removeChild(q),We};function Ee(q){return q==null?String(q):be[te.call(q)]||"object"}function Ie(q){return Ee(q)=="function"}function Xe(q){return q!=null&&q==q.window}function lt(q){return q!=null&&q.nodeType==q.DOCUMENT_NODE}function st(q){return Ee(q)=="object"}function $t(q){return st(q)&&!Xe(q)&&Object.getPrototypeOf(q)==Object.prototype}function It(q){return typeof q.length=="number"}function nt(q){return d.call(q,function(fe){return fe!=null})}function et(q){return q.length>0?i.fn.concat.apply([],q):q}U=function(q){return q.replace(/-+(.)?/g,function(fe,Pe){return Pe?Pe.toUpperCase():""})};function dt(q){return q.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}B=function(q){return d.call(q,function(fe,Pe){return q.indexOf(fe)==Pe})};function Be(q){return q in g?g[q]:g[q]=new RegExp("(^|\\s)"+q+"(\\s|$)")}function Ke(q,fe){return typeof fe=="number"&&!x[dt(q)]?fe+"px":fe}function ut(q){var fe,Pe;return m[q]||(fe=l.createElement(q),l.body.appendChild(fe),Pe=getComputedStyle(fe,"").getPropertyValue("display"),fe.parentNode.removeChild(fe),Pe=="none"&&(Pe="block"),m[q]=Pe),m[q]}function Ot(q){return"children"in q?u.call(q.children):i.map(q.childNodes,function(fe){if(fe.nodeType==1)return fe})}G.fragment=function(q,fe,Pe){var We,pt,ht;return I.test(q)&&(We=i(l.createElement(RegExp.$1))),We||(q.replace&&(q=q.replace(C,"<$1></$2>")),fe===e&&(fe=w.test(q)&&RegExp.$1),fe in H||(fe="*"),ht=H[fe],ht.innerHTML=""+q,We=i.each(u.call(ht.childNodes),function(){ht.removeChild(this)})),$t(Pe)&&(pt=i(We),i.each(Pe,function(zt,Dt){$.indexOf(zt)>-1?pt[zt](Dt):pt.attr(zt,Dt)})),We},G.Z=function(q,fe){return q=q||[],q.__proto__=i.fn,q.selector=fe||"",q},G.isZ=function(q){return q instanceof G.Z},G.init=function(q,fe){var Pe;if(q)if(typeof q=="string")if(q=q.trim(),q[0]=="<"&&w.test(q))Pe=G.fragment(q,RegExp.$1,fe),q=null;else{if(fe!==e)return i(fe).find(q);Pe=G.qsa(l,q)}else{if(Ie(q))return i(l).ready(q);if(G.isZ(q))return q;if(ne(q))Pe=nt(q);else if(st(q))Pe=[q],q=null;else if(w.test(q))Pe=G.fragment(q.trim(),RegExp.$1,fe),q=null;else{if(fe!==e)return i(fe).find(q);Pe=G.qsa(l,q)}}else return G.Z();return G.Z(Pe,q)},i=function(q,fe){return G.init(q,fe)};function Vt(q,fe,Pe){for(t in fe)Pe&&($t(fe[t])||ne(fe[t]))?($t(fe[t])&&!$t(q[t])&&(q[t]={}),ne(fe[t])&&!ne(q[t])&&(q[t]=[]),Vt(q[t],fe[t],Pe)):fe[t]!==e&&(q[t]=fe[t])}i.extend=function(q){var fe,Pe=u.call(arguments,1);return typeof q=="boolean"&&(fe=q,q=Pe.shift()),Pe.forEach(function(We){Vt(q,We,fe)}),q},G.qsa=function(q,fe){var Pe,We=fe[0]=="#",pt=!We&&fe[0]==".",ht=We||pt?fe.slice(1):fe,zt=ae.test(ht);return lt(q)&&zt&&We?(Pe=q.getElementById(ht))?[Pe]:[]:q.nodeType!==1&&q.nodeType!==9?[]:u.call(zt&&!We?pt?q.getElementsByClassName(ht):q.getElementsByTagName(fe):q.querySelectorAll(fe))};function _n(q,fe){return fe==null?i(q):i(q).filter(fe)}i.contains=function(q,fe){return q!==fe&&q.contains(fe)};function qt(q,fe,Pe,We){return Ie(fe)?fe.call(q,Pe,We):fe}function _e(q,fe,Pe){Pe==null?q.removeAttribute(fe):q.setAttribute(fe,Pe)}function ke(q,fe){var Pe=q.className,We=Pe&&Pe.baseVal!==e;if(fe===e)return We?Pe.baseVal:Pe;We?Pe.baseVal=fe:q.className=fe}function ge(q){var fe;try{return q&&(q=="true"||(q=="false"?!1:q=="null"?null:!/^0/.test(q)&&!isNaN(fe=Number(q))?fe:/^[\[\{]/.test(q)?i.parseJSON(q):q))}catch{return q}}i.type=Ee,i.isFunction=Ie,i.isWindow=Xe,i.isArray=ne,i.isPlainObject=$t,i.isEmptyObject=function(q){var fe;for(fe in q)return!1;return!0},i.inArray=function(q,fe,Pe){return s.indexOf.call(fe,q,Pe)},i.camelCase=U,i.trim=function(q){return q==null?"":String.prototype.trim.call(q)},i.uuid=0,i.support={},i.expr={},i.map=function(q,fe){var Pe,We=[],pt,ht;if(It(q))for(pt=0;pt<q.length;pt++)Pe=fe(q[pt],pt),Pe!=null&&We.push(Pe);else for(ht in q)Pe=fe(q[ht],ht),Pe!=null&&We.push(Pe);return et(We)},i.each=function(q,fe){var Pe,We;if(It(q)){for(Pe=0;Pe<q.length;Pe++)if(fe.call(q[Pe],Pe,q[Pe])===!1)return q}else for(We in q)if(fe.call(q[We],We,q[We])===!1)return q;return q},i.grep=function(q,fe){return d.call(q,fe)},window.JSON&&(i.parseJSON=JSON.parse),i.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(q,fe){be["[object "+fe+"]"]=fe.toLowerCase()}),i.fn={forEach:s.forEach,reduce:s.reduce,push:s.push,sort:s.sort,indexOf:s.indexOf,concat:s.concat,map:function(q){return i(i.map(this,function(fe,Pe){return q.call(fe,Pe,fe)}))},slice:function(){return i(u.apply(this,arguments))},ready:function(q){return Q.test(l.readyState)&&l.body?q(i):l.addEventListener("DOMContentLoaded",function(){q(i)},!1),this},get:function(q){return q===e?u.call(this):this[q>=0?q:q+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(q){return s.every.call(this,function(fe,Pe){return q.call(fe,Pe,fe)!==!1}),this},filter:function(q){return Ie(q)?this.not(this.not(q)):i(d.call(this,function(fe){return G.matches(fe,q)}))},add:function(q,fe){return i(B(this.concat(i(q,fe))))},is:function(q){return this.length>0&&G.matches(this[0],q)},not:function(q){var fe=[];if(Ie(q)&&q.call!==e)this.each(function(We){q.call(this,We)||fe.push(this)});else{var Pe=typeof q=="string"?this.filter(q):It(q)&&Ie(q.item)?u.call(q):i(q);this.forEach(function(We){Pe.indexOf(We)<0&&fe.push(We)})}return i(fe)},has:function(q){return this.filter(function(){return st(q)?i.contains(this,q):i(this).find(q).size()})},eq:function(q){return q===-1?this.slice(q):this.slice(q,+q+1)},first:function(){var q=this[0];return q&&!st(q)?q:i(q)},last:function(){var q=this[this.length-1];return q&&!st(q)?q:i(q)},find:function(q){var fe,Pe=this;return typeof q=="object"?fe=i(q).filter(function(){var We=this;return s.some.call(Pe,function(pt){return i.contains(pt,We)})}):this.length==1?fe=i(G.qsa(this[0],q)):fe=this.map(function(){return G.qsa(this,q)}),fe},closest:function(q,fe){var Pe=this[0],We=!1;for(typeof q=="object"&&(We=i(q));Pe&&!(We?We.indexOf(Pe)>=0:G.matches(Pe,q));)Pe=Pe!==fe&&!lt(Pe)&&Pe.parentNode;return i(Pe)},parents:function(q){for(var fe=[],Pe=this;Pe.length>0;)Pe=i.map(Pe,function(We){if((We=We.parentNode)&&!lt(We)&&fe.indexOf(We)<0)return fe.push(We),We});return _n(fe,q)},parent:function(q){return _n(B(this.pluck("parentNode")),q)},children:function(q){return _n(this.map(function(){return Ot(this)}),q)},contents:function(){return this.map(function(){return u.call(this.childNodes)})},siblings:function(q){return _n(this.map(function(fe,Pe){return d.call(Ot(Pe.parentNode),function(We){return We!==Pe})}),q)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(q){return i.map(this,function(fe){return fe[q]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=""),getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=ut(this.nodeName))})},replaceWith:function(q){return this.before(q).remove()},wrap:function(q){var fe=Ie(q);if(this[0]&&!fe)var Pe=i(q).get(0),We=Pe.parentNode||this.length>1;return this.each(function(pt){i(this).wrapAll(fe?q.call(this,pt):We?Pe.cloneNode(!0):Pe)})},wrapAll:function(q){if(this[0]){i(this[0]).before(q=i(q));for(var fe;(fe=q.children()).length;)q=fe.first();i(q).append(this)}return this},wrapInner:function(q){var fe=Ie(q);return this.each(function(Pe){var We=i(this),pt=We.contents(),ht=fe?q.call(this,Pe):q;pt.length?pt.wrapAll(ht):We.append(ht)})},unwrap:function(){return this.parent().each(function(){i(this).replaceWith(i(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(q){return this.each(function(){var fe=i(this);(q===e?fe.css("display")=="none":q)?fe.show():fe.hide()})},prev:function(q){return i(this.pluck("previousElementSibling")).filter(q||"*")},next:function(q){return i(this.pluck("nextElementSibling")).filter(q||"*")},html:function(q){return arguments.length===0?this.length>0?this[0].innerHTML:null:this.each(function(fe){var Pe=this.innerHTML;i(this).empty().append(qt(this,q,fe,Pe))})},text:function(q){return arguments.length===0?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=q===e?"":""+q})},attr:function(q,fe){var Pe;return typeof q=="string"&&fe===e?this.length==0||this[0].nodeType!==1?e:q=="value"&&this[0].nodeName=="INPUT"?this.val():!(Pe=this[0].getAttribute(q))&&q in this[0]?this[0][q]:Pe:this.each(function(We){if(this.nodeType===1)if(st(q))for(t in q)_e(this,t,q[t]);else _e(this,q,qt(this,fe,We,this.getAttribute(q)))})},removeAttr:function(q){return this.each(function(){this.nodeType===1&&_e(this,q)})},prop:function(q,fe){return q=X[q]||q,fe===e?this[0]&&this[0][q]:this.each(function(Pe){this[q]=qt(this,fe,Pe,this[q])})},data:function(q,fe){var Pe=this.attr("data-"+q.replace(L,"-$1").toLowerCase(),fe);return Pe!==null?ge(Pe):e},val:function(q){return arguments.length===0?this[0]&&(this[0].multiple?i(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(fe){this.value=qt(this,q,fe,this.value)})},offset:function(q){if(q)return this.each(function(Pe){var We=i(this),pt=qt(this,q,Pe,We.offset()),ht=We.offsetParent().offset(),zt={top:pt.top-ht.top,left:pt.left-ht.left};We.css("position")=="static"&&(zt.position="relative"),We.css(zt)});if(this.length==0)return null;var fe=this[0].getBoundingClientRect();return{left:fe.left+window.pageXOffset,top:fe.top+window.pageYOffset,width:Math.round(fe.width),height:Math.round(fe.height)}},css:function(q,fe){if(arguments.length<2){var Pe=this[0],We=getComputedStyle(Pe,"");if(!Pe)return;if(typeof q=="string")return Pe.style[U(q)]||We.getPropertyValue(q);if(ne(q)){var pt={};return i.each(ne(q)?q:[q],function(zt,Dt){pt[Dt]=Pe.style[U(Dt)]||We.getPropertyValue(Dt)}),pt}}var ht="";if(Ee(q)=="string")!fe&&fe!==0?this.each(function(){this.style.removeProperty(dt(q))}):ht=dt(q)+":"+Ke(q,fe);else for(t in q)!q[t]&&q[t]!==0?this.each(function(){this.style.removeProperty(dt(t))}):ht+=dt(t)+":"+Ke(t,q[t])+";";return this.each(function(){this.style.cssText+=";"+ht})},index:function(q){return q?this.indexOf(i(q)[0]):this.parent().children().indexOf(this[0])},hasClass:function(q){return q?s.some.call(this,function(fe){return this.test(ke(fe))},Be(q)):!1},addClass:function(q){return q?this.each(function(fe){r=[];var Pe=ke(this),We=qt(this,q,fe,Pe);We.split(/\s+/g).forEach(function(pt){i(this).hasClass(pt)||r.push(pt)},this),r.length&&ke(this,Pe+(Pe?" ":"")+r.join(" "))}):this},removeClass:function(q){return this.each(function(fe){if(q===e)return ke(this,"");r=ke(this),qt(this,q,fe,r).split(/\s+/g).forEach(function(Pe){r=r.replace(Be(Pe)," ")}),ke(this,r.trim())})},toggleClass:function(q,fe){return q?this.each(function(Pe){var We=i(this),pt=qt(this,q,Pe,ke(this));pt.split(/\s+/g).forEach(function(ht){(fe===e?!We.hasClass(ht):fe)?We.addClass(ht):We.removeClass(ht)})}):this},scrollTop:function(q){if(this.length){var fe="scrollTop"in this[0];return q===e?fe?this[0].scrollTop:this[0].pageYOffset:this.each(fe?function(){this.scrollTop=q}:function(){this.scrollTo(this.scrollX,q)})}},scrollLeft:function(q){if(this.length){var fe="scrollLeft"in this[0];return q===e?fe?this[0].scrollLeft:this[0].pageXOffset:this.each(fe?function(){this.scrollLeft=q}:function(){this.scrollTo(q,this.scrollY)})}},position:function(){if(this.length){var q=this[0],fe=this.offsetParent(),Pe=this.offset(),We=A.test(fe[0].nodeName)?{top:0,left:0}:fe.offset();return Pe.top-=parseFloat(i(q).css("margin-top"))||0,Pe.left-=parseFloat(i(q).css("margin-left"))||0,We.top+=parseFloat(i(fe[0]).css("border-top-width"))||0,We.left+=parseFloat(i(fe[0]).css("border-left-width"))||0,{top:Pe.top-We.top,left:Pe.left-We.left}}},offsetParent:function(){return this.map(function(){for(var q=this.offsetParent||l.body;q&&!A.test(q.nodeName)&&i(q).css("position")=="static";)q=q.offsetParent;return q})}},i.fn.detach=i.fn.remove,["width","height"].forEach(function(q){var fe=q.replace(/./,function(Pe){return Pe[0].toUpperCase()});i.fn[q]=function(Pe){var We,pt=this[0];return Pe===e?Xe(pt)?pt["inner"+fe]:lt(pt)?pt.documentElement["scroll"+fe]:(We=this.offset())&&We[q]:this.each(function(ht){pt=i(this),pt.css(q,qt(this,Pe,ht,pt[q]()))})}});function ft(q,fe){fe(q);for(var Pe in q.childNodes)ft(q.childNodes[Pe],fe)}return F.forEach(function(q,fe){var Pe=fe%2;i.fn[q]=function(){var We,pt=i.map(arguments,function(Dt){return We=Ee(Dt),We=="object"||We=="array"||Dt==null?Dt:G.fragment(Dt)}),ht,zt=this.length>1;return pt.length<1?this:this.each(function(Dt,Gt){ht=Pe?Gt:Gt.parentNode,Gt=fe==0?Gt.nextSibling:fe==1?Gt.firstChild:fe==2?Gt:null,pt.forEach(function(ln){if(zt)ln=ln.cloneNode(!0);else if(!ht)return i(ln).remove();ft(ht.insertBefore(ln,Gt),function(vt){vt.nodeName!=null&&vt.nodeName.toUpperCase()==="SCRIPT"&&(!vt.type||vt.type==="text/javascript")&&!vt.src&&window.eval.call(window,vt.innerHTML)})})})},i.fn[Pe?q+"To":"insert"+(fe?"Before":"After")]=function(We){return i(We)[q](this),this}}),G.Z.prototype=i.fn,G.uniq=B,G.deserializeValue=ge,i.zepto=G,i}();window.Zepto=vl;window.$===void 0&&(window.$=vl);(function(e){e.zepto.qsa;var t=1,i,r=Array.prototype.slice,s=e.isFunction,u=function(G){return typeof G=="string"},d={},l={},m="onfocusin"in window,g={focus:"focusin",blur:"focusout"},x={mouseenter:"mouseover",mouseleave:"mouseout"};l.click=l.mousedown=l.mouseup=l.mousemove="MouseEvents";function w(G){return G._zid||(G._zid=t++)}function I(G,U,B,ie){if(U=C(U),U.ns)var X=A(U.ns);return(d[w(G)]||[]).filter(function(ne){return ne&&(!U.e||ne.e==U.e)&&(!U.ns||X.test(ne.ns))&&(!B||w(ne.fn)===w(B))&&(!ie||ne.sel==ie)})}function C(G){var U=(""+G).split(".");return{e:U[0],ns:U.slice(1).sort().join(" ")}}function A(G){return new RegExp("(?:^| )"+G.replace(" "," .* ?")+"(?: |$)")}function L(G,U){return G.del&&!m&&G.e in g||!!U}function $(G){return x[G]||m&&g[G]||G}function F(G,U,B,ie,X,ne,Ee){var Ie=w(G),Xe=d[Ie]||(d[Ie]=[]);U.split(/\s/).forEach(function(lt){if(lt=="ready")return e(document).ready(B);var st=C(lt);st.fn=B,st.sel=X,st.e in x&&(B=function(It){var nt=It.relatedTarget;if(!nt||nt!==this&&!e.contains(this,nt))return st.fn.apply(this,arguments)}),st.del=ne;var $t=ne||B;st.proxy=function(It){if(It=be(It),!It.isImmediatePropagationStopped()){It.data=ie;var nt=$t.apply(G,It._args==i?[It]:[It].concat(It._args));return nt===!1&&(It.preventDefault(),It.stopPropagation()),nt}},st.i=Xe.length,Xe.push(st),"addEventListener"in G&&G.addEventListener($(st.e),st.proxy,L(st,Ee))})}function z(G,U,B,ie,X){var ne=w(G);(U||"").split(/\s/).forEach(function(Ee){I(G,Ee,B,ie).forEach(function(Ie){delete d[ne][Ie.i],"removeEventListener"in G&&G.removeEventListener($(Ie.e),Ie.proxy,L(Ie,X))})})}e.event={add:F,remove:z},e.proxy=function(G,U){if(s(G)){var B=function(){return G.apply(U,arguments)};return B._zid=w(G),B}else{if(u(U))return e.proxy(G[U],G);throw new TypeError("expected function")}},e.fn.bind=function(G,U,B){return this.on(G,U,B)},e.fn.unbind=function(G,U){return this.off(G,U)},e.fn.one=function(G,U,B,ie){return this.on(G,U,B,ie,1)};var ee=function(){return!0},H=function(){return!1},Q=/^([A-Z]|returnValue$|layer[XY]$)/,ae={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function be(G,U){return(U||!G.isDefaultPrevented)&&(U||(U=G),e.each(ae,function(B,ie){var X=U[B];G[B]=function(){return this[ie]=ee,X&&X.apply(U,arguments)},G[ie]=H}),(U.defaultPrevented!==i?U.defaultPrevented:"returnValue"in U?U.returnValue===!1:U.getPreventDefault&&U.getPreventDefault())&&(G.isDefaultPrevented=ee)),G}function te(G){var U,B={originalEvent:G};for(U in G)!Q.test(U)&&G[U]!==i&&(B[U]=G[U]);return be(B,G)}e.fn.delegate=function(G,U,B){return this.on(U,G,B)},e.fn.undelegate=function(G,U,B){return this.off(U,G,B)},e.fn.live=function(G,U){return e(document.body).delegate(this.selector,G,U),this},e.fn.die=function(G,U){return e(document.body).undelegate(this.selector,G,U),this},e.fn.on=function(G,U,B,ie,X){var ne,Ee,Ie=this;return G&&!u(G)?(e.each(G,function(Xe,lt){Ie.on(Xe,U,B,lt,X)}),Ie):(!u(U)&&!s(ie)&&ie!==!1&&(ie=B,B=U,U=i),(s(B)||B===!1)&&(ie=B,B=i),ie===!1&&(ie=H),Ie.each(function(Xe,lt){X&&(ne=function(st){return z(lt,st.type,ie),ie.apply(this,arguments)}),U&&(Ee=function(st){var $t,It=e(st.target).closest(U,lt).get(0);if(It&&It!==lt)return $t=e.extend(te(st),{currentTarget:It,liveFired:lt}),(ne||ie).apply(It,[$t].concat(r.call(arguments,1)))}),F(lt,G,ie,B,U,Ee||ne)}))},e.fn.off=function(G,U,B){var ie=this;return G&&!u(G)?(e.each(G,function(X,ne){ie.off(X,U,ne)}),ie):(!u(U)&&!s(B)&&B!==!1&&(B=U,U=i),B===!1&&(B=H),ie.each(function(){z(this,G,B,U)}))},e.fn.trigger=function(G,U){return G=u(G)||e.isPlainObject(G)?e.Event(G):be(G),G._args=U,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(G):e(this).triggerHandler(G,U)})},e.fn.triggerHandler=function(G,U){var B,ie;return this.each(function(X,ne){B=te(u(G)?e.Event(G):G),B._args=U,B.target=ne,e.each(I(ne,G.type||G),function(Ee,Ie){if(ie=Ie.proxy(B),B.isImmediatePropagationStopped())return!1})}),ie},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(G){e.fn[G]=function(U){return U?this.bind(G,U):this.trigger(G)}}),["focus","blur"].forEach(function(G){e.fn[G]=function(U){return U?this.bind(G,U):this.each(function(){try{this[G]()}catch{}}),this}}),e.Event=function(G,U){u(G)||(U=G,G=U.type);var B=document.createEvent(l[G]||"Events"),ie=!0;if(U)for(var X in U)X=="bubbles"?ie=!!U[X]:B[X]=U[X];return B.initEvent(G,ie,!0),be(B)}})(vl);(function(e){var t=0,i=window.document,r,s,u=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,d=/^(?:text|application)\/javascript/i,l=/^(?:text|application)\/xml/i,m="application/json",g="text/html",x=/^\s*$/;function w(U,B,ie){var X=e.Event(B);return e(U).trigger(X,ie),!X.isDefaultPrevented()}function I(U,B,ie,X){if(U.global)return w(B||i,ie,X)}e.active=0;function C(U){U.global&&e.active++===0&&I(U,null,"ajaxStart")}function A(U){U.global&&!--e.active&&I(U,null,"ajaxStop")}function L(U,B){var ie=B.context;if(B.beforeSend.call(ie,U,B)===!1||I(B,ie,"ajaxBeforeSend",[U,B])===!1)return!1;I(B,ie,"ajaxSend",[U,B])}function $(U,B,ie,X){var ne=ie.context,Ee="success";ie.success.call(ne,U,Ee,B),X&&X.resolveWith(ne,[U,Ee,B]),I(ie,ne,"ajaxSuccess",[B,ie,U]),z(Ee,B,ie)}function F(U,B,ie,X,ne){var Ee=X.context;X.error.call(Ee,ie,B,U),ne&&ne.rejectWith(Ee,[ie,B,U]),I(X,Ee,"ajaxError",[ie,X,U||B]),z(B,ie,X)}function z(U,B,ie){var X=ie.context;ie.complete.call(X,B,U),I(ie,X,"ajaxComplete",[B,ie]),A(ie)}function ee(){}e.ajaxJSONP=function(U,B){if(!("type"in U))return e.ajax(U);var ie=U.jsonpCallback,X=(e.isFunction(ie)?ie():ie)||"jsonp"+ ++t,ne=i.createElement("script"),Ee=window[X],Ie,Xe=function($t){e(ne).triggerHandler("error",$t||"abort")},lt={abort:Xe},st;return B&&B.promise(lt),e(ne).on("load error",function($t,It){clearTimeout(st),e(ne).off().remove(),$t.type=="error"||!Ie?F(null,It||"error",lt,U,B):$(Ie[0],lt,U,B),window[X]=Ee,Ie&&e.isFunction(Ee)&&Ee(Ie[0]),Ee=Ie=void 0}),L(lt,U)===!1?(Xe("abort"),lt):(window[X]=function(){Ie=arguments},ne.src=U.url.replace(/\?(.+)=\?/,"?$1="+X),i.head.appendChild(ne),U.timeout>0&&(st=setTimeout(function(){Xe("timeout")},U.timeout)),lt)},e.ajaxSettings={type:"GET",beforeSend:ee,success:ee,error:ee,complete:ee,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:m,xml:"application/xml, text/xml",html:g,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0};function H(U){return U&&(U=U.split(";",2)[0]),U&&(U==g?"html":U==m?"json":d.test(U)?"script":l.test(U)&&"xml")||"text"}function Q(U,B){return B==""?U:(U+"&"+B).replace(/[&?]{1,2}/,"?")}function ae(U){U.processData&&U.data&&e.type(U.data)!="string"&&(U.data=e.param(U.data,U.traditional)),U.data&&(!U.type||U.type.toUpperCase()=="GET")&&(U.url=Q(U.url,U.data),U.data=void 0)}e.ajax=function(U){var B=e.extend({},U||{}),ie=e.Deferred&&e.Deferred();for(r in e.ajaxSettings)B[r]===void 0&&(B[r]=e.ajaxSettings[r]);C(B),B.crossDomain||(B.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(B.url)&&RegExp.$2!=window.location.host),B.url||(B.url=window.location.toString()),ae(B),B.cache===!1&&(B.url=Q(B.url,"_="+Date.now()));var X=B.dataType,ne=/\?.+=\?/.test(B.url);if(X=="jsonp"||ne)return ne||(B.url=Q(B.url,B.jsonp?B.jsonp+"=?":B.jsonp===!1?"":"callback=?")),e.ajaxJSONP(B,ie);var Ee=B.accepts[X],Ie={},Xe=function(et,dt){Ie[et.toLowerCase()]=[et,dt]},lt=/^([\w-]+:)\/\//.test(B.url)?RegExp.$1:window.location.protocol,st=B.xhr(),$t=st.setRequestHeader,It;if(ie&&ie.promise(st),B.crossDomain||Xe("X-Requested-With","XMLHttpRequest"),Xe("Accept",Ee||"*/*"),(Ee=B.mimeType||Ee)&&(Ee.indexOf(",")>-1&&(Ee=Ee.split(",",2)[0]),st.overrideMimeType&&st.overrideMimeType(Ee)),(B.contentType||B.contentType!==!1&&B.data&&B.type.toUpperCase()!="GET")&&Xe("Content-Type",B.contentType||"application/x-www-form-urlencoded"),B.headers)for(s in B.headers)Xe(s,B.headers[s]);if(st.setRequestHeader=Xe,st.onreadystatechange=function(){if(st.readyState==4){st.onreadystatechange=ee,clearTimeout(It);var et,dt=!1;if(st.status>=200&&st.status<300||st.status==304||st.status==0&&lt=="file:"){X=X||H(B.mimeType||st.getResponseHeader("content-type")),et=st.responseText;try{X=="script"?(0,eval)(et):X=="xml"?et=st.responseXML:X=="json"&&(et=x.test(et)?null:e.parseJSON(et))}catch(Be){dt=Be}dt?F(dt,"parsererror",st,B,ie):$(et,st,B,ie)}else F(st.statusText||null,st.status?"error":"abort",st,B,ie)}},L(st,B)===!1)return st.abort(),F(null,"abort",st,B,ie),st;if(B.xhrFields)for(s in B.xhrFields)st[s]=B.xhrFields[s];var nt="async"in B?B.async:!0;st.open(B.type,B.url,nt,B.username,B.password);for(s in Ie)$t.apply(st,Ie[s]);return B.timeout>0&&(It=setTimeout(function(){st.onreadystatechange=ee,st.abort(),F(null,"timeout",st,B,ie)},B.timeout)),st.send(B.data?B.data:null),st};function be(U,B,ie,X){var ne=!e.isFunction(B);return{url:U,data:ne?B:void 0,success:ne?e.isFunction(ie)?ie:void 0:B,dataType:ne&&X||ie}}e.get=function(U,B,ie,X){return e.ajax(be.apply(null,arguments))},e.post=function(U,B,ie,X){var ne=be.apply(null,arguments);return ne.type="POST",e.ajax(ne)},e.getJSON=function(U,B,ie){var X=be.apply(null,arguments);return X.dataType="json",e.ajax(X)},e.fetchJSON=function(U){var B=new XMLHttpRequest;return new Promise(function(ie,X){B.onreadystatechange=function(){try{if(B.readyState!==4)return;if(B.status>=200&&B.status<300){var ne=JSON.parse(B.responseText);ie(ne)}else X({status:B.status,statusText:B.statusText})}catch(Ee){X({status:400,statusText:`Error fetching JSON from ${U}: ${Ee}`})}},B.open("GET",U,!0),B.send()})},e.fn.load=function(U,B,ie){if(!this.length)return this;var X=this,ne=U.split(/\s/),Ee,Ie=be(U,B,ie),Xe=Ie.success;return ne.length>1&&(Ie.url=ne[0],Ee=ne[1]),Ie.success=function(lt){X.html(Ee?e("<div>").html(lt.replace(u,"")).find(Ee):lt),Xe&&Xe.apply(X,arguments)},e.ajax(Ie),this};var te=encodeURIComponent;function G(U,B,ie,X){var ne,Ee=e.isArray(B),Ie=e.isPlainObject(B);e.each(B,function(Xe,lt){ne=e.type(lt),X&&(Xe=ie?X:X+"["+(Ie||ne=="object"||ne=="array"?Xe:"")+"]"),!X&&Ee?U.add(lt.name,lt.value):ne=="array"||!ie&&ne=="object"?G(U,lt,ie,Xe):U.add(Xe,lt)})}e.param=function(U,B){var ie=[];return ie.add=function(X,ne){this.push(te(X)+"="+te(ne))},G(ie,U,B),ie.join("&").replace(/%20/g,"+")}})(vl);(function(e){e.fn.serializeArray=function(){var t=[],i;return e([].slice.call(this.get(0).elements)).each(function(){i=e(this);var r=i.attr("type");this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&r!="submit"&&r!="reset"&&r!="button"&&(r!="radio"&&r!="checkbox"||this.checked)&&t.push({name:i.attr("name"),value:i.val()})}),t},e.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(i){t.push(encodeURIComponent(i.name)+"="+encodeURIComponent(i.value))}),t.join("&")},e.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var i=e.Event("submit");this.eq(0).trigger(i),i.isDefaultPrevented()||this.get(0).submit()}return this}})(vl);(function(e){"__proto__"in{}||e.extend(e.zepto,{Z:function(i,r){return i=i||[],e.extend(i,e.fn),i.selector=r||"",i.__Z=!0,i},isZ:function(i){return e.type(i)==="array"&&"__Z"in i}});try{getComputedStyle(void 0)}catch{var t=getComputedStyle;window.getComputedStyle=function(r,s){try{return t(r,s)}catch{return null}}}})(vl);const Kv=vl.getJSON,Ah=vl.ajax,K_=vl.fetchJSON,xo=[["millisecond",1,function(e){}],["second",1e3,function(e){e.setMilliseconds(0)}],["minute",1e3*60,function(e){e.setSeconds(0)}],["hour",1e3*60*60,function(e){e.setMinutes(0)}],["day",1e3*60*60*24,function(e){e.setHours(0)}],["month",1e3*60*60*24*30,function(e){e.setDate(1)}],["year",1e3*60*60*24*365,function(e){e.setMonth(0)}],["decade",1e3*60*60*24*365*10,function(e){var t=e.getFullYear();e.setFullYear(t-t%10)}],["century",1e3*60*60*24*365*100,function(e){var t=e.getFullYear();e.setFullYear(t-t%100)}],["millennium",1e3*60*60*24*365*1e3,function(e){var t=e.getFullYear();e.setFullYear(t-t%1e3)}]],Yc=["millisecond","second","minute","hour","day","month","year"],T2=/^([\+-]?\d+?)(-\d{2}?)?(-\d{2}?)?$/,KY=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,E2={base:{millisecond:"time_short",second:"time",minute:"time_no_seconds_small_date",hour:"time_no_seconds_small_date",day:"full",month:"month",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"},short:{millisecond:"time_short",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"}},X_=Zv.extend({initialize:function(e,t,i){typeof e=="number"?this.data={format:"yyyy mmmm",date_obj:new Date(e)}:Date==e.constructor?this.data={format:"yyyy mmmm",date_obj:e}:(this.data=JSON.parse(JSON.stringify(e)),this._createDateObj()),e.format&&!t&&(t=e.format),this._setFormat(t,i)},setDateFormat:function(e){this.data.format=e},getDisplayDate:function(e,t){if(this.data.display_date)return this.data.display_date;e||(e=Ca.fallback),e.constructor!=Ca&&(gi("First argument to getDisplayDate must be type Language"),e=Ca.fallback);var i=t||this.data.format;return e.formatDate(this.data.date_obj,i)},getMillisecond:function(){return this.getTime()},getTime:function(){return this.data.date_obj.getTime()},isBefore:function(e){if(!this.data.date_obj.constructor==e.data.date_obj.constructor)throw new mi("date_compare_err");return"isBefore"in this.data.date_obj?this.data.date_obj.isBefore(e.data.date_obj):this.data.date_obj<e.data.date_obj},isAfter:function(e){if(!this.data.date_obj.constructor==e.data.date_obj.constructor)throw new mi("date_compare_err");return"isAfter"in this.data.date_obj?this.data.date_obj.isAfter(e.data.date_obj):this.data.date_obj>e.data.date_obj},floor:function(e){for(var t=new Date(this.data.date_obj.getTime()),i=0;i<xo.length;i++)if(xo[i][2](t),xo[i][0]==e)return new X_(t);throw new mi("invalid_scale_err",e)},_getDateData:function(){var e={year:0,month:1,day:1,hour:0,minute:0,second:0,millisecond:0};Pi(e,this.data);for(var t in Yc){var i=ia(e[Yc[t]]);if(!i.match(/^-?\d*$/))throw new mi("invalid_date_err",Yc[t]+" = '"+e[Yc[t]]+"'");var r=parseInt(e[Yc[t]]);isNaN(r)&&(r=t==4||t==5?1:0),e[Yc[t]]=r}return e.month>0&&e.month<=12&&(e.month=e.month-1),e},_createDateObj:function(){var e=this._getDateData();this.data.date_obj=new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond),this.data.date_obj.getFullYear()!=e.year&&this.data.date_obj.setFullYear(e.year)},findBestFormat:function(e){for(var t=Yc,i=0;i<t.length;i++)if(this.data[t[i]])return e?e in E2||(e="short"):e="base",E2[e][t[i]];return""},_setFormat:function(e,t){e?this.data.format=e:this.data.format||(this.data.format=this.findBestFormat()),t?this.data.format_short=t:this.data.format_short||(this.data.format_short=this.findBestFormat(!0))},getFullYear:function(){return this.data.date_obj.getFullYear()}});function I2(e){if(e.match(T2)){var t=e.match(T2).slice(1),i={year:t[0].replace("+","")};return t[1]&&(i.month=t[1].replace("-","")),t[2]&&(i.day=t[2].replace("-","")),i}if(e.match(KY))return cls.parseISODate(e);if(e.match(/^\-?\d+$/))return{year:e};var r={};if(e.match(/\d+\/\d+\/\d+/)){var s=e.match(/\d+\/\d+\/\d+/)[0];e=ia(e.replace(s,""));var u=s.split("/");r.month=u[0],r.day=u[1],r.year=u[2]}if(e.match(/\d+\/\d+/)){var s=e.match(/\d+\/\d+/)[0];e=ia(e.replace(s,""));var u=s.split("/");r.month=u[0],r.year=u[1]}if(e.match(":")){var d=e.split(":");if(r.hour=d[0],r.minute=d[1],d[2]){let l=d[2].split(".");r.second=l[0],r.millisecond=l[1]}}return r}const Gp=Zv.extend({initialize:function(e){if(this.year=parseInt(e),isNaN(this.year))throw new mi("invalid_year_err",e)},isBefore:function(e){return this.year<e.year},isAfter:function(e){return this.year>e.year},getTime:function(){return this.year}}),hx=1e6,fx=hx*10,px=fx*10,C2=px*10;function jl(e){return function(t){var i=t.getTime();return new Gp(Math.floor(i/e)*e)}}const pv=[["year",1,new jl(1)],["decade",10,new jl(10)],["century",100,new jl(100)],["millennium",1e3,new jl(1e3)],["age",hx,new jl(hx)],["epoch",fx,new jl(fx)],["era",px,new jl(px)],["eon",C2,new jl(C2)]],Y_=X_.extend({initialize:function(e,t,i){Gp==e.constructor?this.data={date_obj:e}:(this.data=JSON.parse(JSON.stringify(e)),this._createDateObj()),e.format&&!t&&(t=e.format),this._setFormat(t,i)},_createDateObj:function(){var e=this._getDateData();this.data.date_obj=new Gp(e.year)},floor:function(e){for(var t=0;t<pv.length;t++)if(pv[t][0]==e){var i=pv[t][2](this.data.date_obj);return new Y_(i)}throw new mi("invalid_scale_err",e)},getFullYear:function(){return this.data.date_obj.getTime()}}),A2=new RegExp(/\$\{(.+?)\}/g);class Ca{constructor(t,i){for(let u in ql.en)this[u]=ql.en[u];if(t&&typeof t=="string"&&t!="en"){var r=t;if(!(r in ql)){console.log(`Expected language ${r} to be cached. Did you call the constructor directly?`);var s=gP(r,i);K_(s).then(u=>{ql[r]=u}).catch(u=>{console.log(`Error loading language [${s}] ${u.statusText} [${u.status}]`)})}Pi(this,ql[r])}}mergeData(t){for(k in ql.en)t[k]&&(typeof this[k]=="object"?Pi(t[k],this[k]):this[k]=t[k])}formatBigYear(t,i){var r=t.year,s=this.bigdateformats[i]||this.bigdateformats.fallback;if(s){for(var u=0;u<s.length;u++){var d=s[u];if(Math.abs(r/d[0])>1)return M2(Math.abs(r/d[0]),d[1])}return r.toString()}else return gi("Language file dateformats missing cosmological. Falling back."),M2(r,i)}_(t,i){let r=this.messages[t]||Ca.fallback.messages[t]||t;if(r.match(A2)){if(!i)throw new mi("template_message_without_context");for(let s of r.matchAll(A2)){if(!(s[1]in i))throw new mi("template_message_without_context");r=r.replace(s[0],i[s[1]])}}return r}formatDate(t,i){return t.constructor==Date?this.formatJSDate(t,i):t.constructor==Gp?this.formatBigYear(t,i):t.data&&t.data.date_obj?this.formatDate(t.data.date_obj,i):(gi("Unfamiliar date presented for formatting"),t.toString())}formatJSDate(t,i){var r=this,s=function(H,Q){var ae=r.period_labels[H];if(ae)var H=Q<12?ae[0]:ae[1];return"<span class='tl-timeaxis-timesuffix'>"+H+"</span>"},u=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,d=/[^-+\dA-Z]/g;i||(i="full");var l=this.dateformats[i]||Ca.fallback.dateformats[i];l||(l=i);var m="get",g=t[m+"Date"](),x=t[m+"Day"](),w=t[m+"Month"](),I=t[m+"FullYear"](),C=t[m+"Hours"](),A=t[m+"Minutes"](),L=t[m+"Seconds"](),$=t[m+"Milliseconds"](),F=t.getTimezoneOffset(),z={d:g,dd:tl(g),ddd:this.date.day_abbr[x],dddd:this.date.day[x],m:w+1,mm:tl(w+1),mmm:this.date.month_abbr[w],mmmm:this.date.month[w],yy:String(I).slice(2),yyyy:I<0&&this.has_negative_year_modifier()?Math.abs(I):I,h:C%12||12,hh:tl(C%12||12),H:C,HH:tl(C),M:A,MM:tl(A),s:L,ss:tl(L),l:tl($,3),L:tl($>99?Math.round($/10):$),t:s("t",C),tt:s("tt",C),T:s("T",C),TT:s("TT",C),Z:(String(t).match(u)||[""]).pop().replace(d,""),o:(F>0?"-":"+")+tl(Math.floor(Math.abs(F)/60)*100+Math.abs(F)%60,4),S:["th","st","nd","rd"][g%10>3?0:(g%100-g%10!=10)*g%10]},ee=l.replace(Ca.DATE_FORMAT_TOKENS,function(H){return H in z?z[H]:H.slice(1,H.length-1)});return this._applyEra(ee,I)}has_negative_year_modifier(){return!!(this.era_labels.negative_year.prefix||this.era_labels.negative_year.suffix)}_applyEra(t,i){var r=i<0?this.era_labels.negative_year:this.era_labels.positive_year,s="";return r.prefix&&(s+="<span>"+r.prefix+"</span> "),s+=t,r.suffix&&(s+=" <span>"+r.suffix+"</span>"),s}}async function XY(e,t){var i=gP(e,t);try{if(!ql[e]){let r=await K_(i);ql[e]=r}return new Ca(e,t)}catch(r){return console.log(`Error loading language [${i}] ${r.statusText}`),null}}function gP(e,t){if(/\.json$/.test(e))var i=e;else{var r="/locale/"+e+".json";/\/$/.test(t)&&(r=r.substr(1));var i=t+r}return i}function M2(e,t){if(t.match(/%(\.(\d+))?f/)){var i=t.match(/%(\.(\d+))?f/),r=i[0];return i[2]&&(e=e.toFixed(i[2])),t.replace(r,e)}return t}Ca.fallback={messages:{}};Ca.DATE_FORMAT_TOKENS=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g;var ql={en:{name:"English (built-in)",lang:"en",api:{wikipedia:"en"},messages:{loading:"Loading",wikipedia:"From Wikipedia, the free encyclopedia",error:"Error",return_to_title:"Return to Title",go_to_end:"Go to the last slide",loading_content:"Loading Content",loading_timeline:"Loading Timeline... ",swipe_to_navigate:"Swipe to Navigate<br><span class='tl-button'>OK</span>",zoom_in:"Zoom in",zoom_out:"Zoom out",unknown_read_err:"An unexpected error occurred trying to read your spreadsheet data",invalid_url_err:"Unable to read Timeline data. Make sure your URL is for a Google Spreadsheet or a Timeline JSON file.",network_err:"Unable to read your Google Spreadsheet. Make sure you have published it to the web.",missing_start_date_err:"Missing start_date",invalid_start_time_without_date:"Invalid configuration: time cannot be used without date.",invalid_end_time_without_date:"Invalid configuration: end time cannot be used without end date.",date_compare_err:"Can't compare timeline date objects on different scales",invalid_scale_err:"Invalid scale",invalid_date_err:"Invalid date: month, day and year must be numbers.",invalid_separator_error:"Invalid time: misuse of : or . as separator.",invalid_hour_err:"Invalid time (hour)",invalid_minute_err:"Invalid time (minute)",invalid_second_err:"Invalid time (second)",invalid_fractional_err:"Invalid time (fractional seconds)",invalid_second_fractional_err:"Invalid time (seconds and fractional seconds)",invalid_year_err:"Invalid year",flickr_notfound_err:"Photo not found or private",flickr_invalidurl_err:"Invalid Flickr URL",imgur_invalidurl_err:"Invalid Imgur URL",twitter_load_err:"Unable to load Tweet",twitterembed_invalidurl_err:"Invalid Twitter Embed url",wikipedia_load_err:"Unable to load Wikipedia entry",wikipedia_image_load_err:"Unable to load Wikipedia image data",spotify_invalid_url:"Invalid Spotify URL",invalid_rgb_err:"Invalid RGB argument",time_scale_scale_err:"Don't know how to get date from time for scale",axis_helper_no_options_err:"Axis helper must be configured with options",axis_helper_scale_err:"No AxisHelper available for scale",invalid_integer_option:"Invalid option value—must be a whole number.",instagram_bad_request:"Invalid or private Instagram URL",template_message_without_context:"Required variables not provided for template translation message",aria_label_timeline:"Timeline",aria_label_timeline_navigation:"Timeline navigation",aria_label_timeline_content:"Timeline content",aria_label_zoomin:"Show less than ${start} to ${end}",aria_label_zoomout:"Show more than ${start} to ${end}"},date:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],month_abbr:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_abbr:["Sun.","Mon.","Tues.","Wed.","Thurs.","Fri.","Sat."]},era_labels:{positive_year:{prefix:"",suffix:""},negative_year:{prefix:"",suffix:"BCE"}},period_labels:{t:["a","p"],tt:["am","pm"],T:["A","P"],TT:["AM","PM"]},dateformats:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time:"h:MM:ss TT' <small>'mmmm d',' yyyy'</small>'",time_short:"h:MM:ss TT",time_no_seconds_short:"h:MM TT",time_no_minutes_short:"h TT",time_no_seconds_small_date:"h:MM TT' <small>'mmmm d',' yyyy'</small>'",time_milliseconds:"l",full_long:"mmm d',' yyyy 'at' h:MM TT",full_long_small_date:"h:MM TT' <small>mmm d',' yyyy'</small>'"},bigdateformats:{fallback:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]],compact:[[1e9,"%.2f bya"],[1e6,"%.1f mya"],[1e3,"%.1f kya"],[1,"%f years ago"]],verbose:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]]}}};let X1=new Ca;Ca.fallback=X1;class _l{setLanguage(t){this.language=t}getLanguage(){if(this.language){if(typeof this.language=="object")return this.language;gi(`I18NMixins.getLanguage: this.language should be object, but is ${typeof this.language}`)}return X1}_(t,i){return this.getLanguage()._(t,i)}}class J_{constructor(t,i,r){r&&this.setLanguage(r),this._el={parent:{},container:{},message_container:{},loading_icon:{},message:{}},this.options={width:600,height:600,message_class:"tl-message",message_icon_class:"tl-loading-icon"},this.container=t,Pi(this.options,i),this._el.container=hn("div",this.options.message_class),t&&(t.appendChild(this._el.container),this._el.parent=t),this.animator={},this._initLayout(),this._initEvents()}updateMessage(t){t?this._el.message.innerHTML=t:this._el.message.innerHTML=this._("loading"),!this._el.parent.atributes&&this.container.attributes&&(this.container.appendChild(this._el.container),this._el.parent=this.container)}updateDisplay(t,i){}_onMouseClick(){this.fire("clicked",this.options)}_onRemove(){this._el.parent={}}_initLayout(){this._el.message_container=hn("div","tl-message-container",this._el.container),this._el.loading_icon=hn("div",this.options.message_icon_class,this._el.message_container),this._el.message=hn("div","tl-message-content",this._el.message_container),this.updateMessage()}_initEvents(){ti.addListener(this._el.container,"click",this._onMouseClick,this),ti.addListener(this,"removed",this._onRemove,this)}}Ss(J_,_l,Ts,gl);function Wg(e,i){var i=i||"start_date";e.sort(function(r,s){return r[i].isBefore(s[i])?-1:r[i].isAfter(s[i])?1:0})}function k2(e){var t={hour:null,minute:null,second:null,millisecond:null},i=null,r=e.match(/(\s*[AaPp]\.?[Mm]\.?\s*)$/);r&&(i=ia(r[0]),e=ia(e.substring(0,e.lastIndexOf(i))));var s=[],u=e.match(/^\s*(\d{1,2})(\d{2})\s*$/);if(u?s=u.slice(1):(s=e.split(":"),s.length==1&&(s=e.split("."))),s.length>4)throw new mi("invalid_separator_error");let d=s[0];if(t.hour=parseInt(d),i&&i.toLowerCase()[0]=="p"&&t.hour!=12?t.hour+=12:i&&i.toLowerCase()[0]=="a"&&t.hour==12&&(t.hour=0),isNaN(t.hour)||t.hour<0||t.hour>23)throw new mi("invalid_hour_err",d);if(s.length>1){let g=s[1];if(t.minute=parseInt(g),isNaN(t.minute))throw new mi("invalid_minute_err",g)}if(s.length>2){var l=s[2].split(/[\.,]/);if(s=l.concat(s.slice(3)),s.length>2)throw new mi("invalid_second_fractional_err");if(t.second=parseInt(s[0]),isNaN(t.second))throw new mi("invalid_second_err",s[0]);if(s.length==2){var m=parseInt(s[1]);if(isNaN(m))throw new mi("invalid_fractional_err",s[1]);t.millisecond=100*m}}return t}const YY=new RegExp("(^-?\\d+$|^$)");function P2(e){try{return Object.keys(e).forEach(t=>{let i=e[t];if(i&&i.match&&!i.match(YY))throw`invalid value ${i} for ${t}`}),!0}catch{return!1}}const D2={human:X_,cosmological:Y_};/*! @license DOMPurify 2.4.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.5/LICENSE */function Xl(e){"@babel/helpers - typeof";return Xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xl(e)}function mx(e,t){return mx=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},mx(e,t)}function JY(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function mv(e,t,i){return JY()?mv=Reflect.construct:mv=function(s,u,d){var l=[null];l.push.apply(l,u);var m=Function.bind.apply(s,l),g=new m;return d&&mx(g,d.prototype),g},mv.apply(null,arguments)}function Ha(e){return QY(e)||eJ(e)||tJ(e)||nJ()}function QY(e){if(Array.isArray(e))return gx(e)}function eJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tJ(e,t){if(e){if(typeof e=="string")return gx(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return gx(e,t)}}function gx(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function nJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var iJ=Object.hasOwnProperty,L2=Object.setPrototypeOf,rJ=Object.isFrozen,sJ=Object.getPrototypeOf,aJ=Object.getOwnPropertyDescriptor,ws=Object.freeze,so=Object.seal,oJ=Object.create,vP=typeof Reflect<"u"&&Reflect,Xv=vP.apply,vx=vP.construct;Xv||(Xv=function(t,i,r){return t.apply(i,r)});ws||(ws=function(t){return t});so||(so=function(t){return t});vx||(vx=function(t,i){return mv(t,Ha(i))});var lJ=ka(Array.prototype.forEach),O2=ka(Array.prototype.pop),Vf=ka(Array.prototype.push),gv=ka(String.prototype.toLowerCase),G0=ka(String.prototype.toString),cJ=ka(String.prototype.match),ja=ka(String.prototype.replace),uJ=ka(String.prototype.indexOf),dJ=ka(String.prototype.trim),gs=ka(RegExp.prototype.test),W0=hJ(TypeError);function ka(e){return function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];return Xv(e,t,r)}}function hJ(e){return function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return vx(e,i)}}function ei(e,t,i){i=i||gv,L2&&L2(e,null);for(var r=t.length;r--;){var s=t[r];if(typeof s=="string"){var u=i(s);u!==s&&(rJ(t)||(t[r]=u),s=u)}e[s]=!0}return e}function Jc(e){var t=oJ(null),i;for(i in e)Xv(iJ,e,[i])===!0&&(t[i]=e[i]);return t}function qg(e,t){for(;e!==null;){var i=aJ(e,t);if(i){if(i.get)return ka(i.get);if(typeof i.value=="function")return ka(i.value)}e=sJ(e)}function r(s){return console.warn("fallback value for",s),null}return r}var R2=ws(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),q0=ws(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Z0=ws(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),fJ=ws(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),K0=ws(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),pJ=ws(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),F2=ws(["#text"]),$2=ws(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),X0=ws(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),z2=ws(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Zg=ws(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),mJ=so(/\{\{[\w\W]*|[\w\W]*\}\}/gm),gJ=so(/<%[\w\W]*|[\w\W]*%>/gm),vJ=so(/\${[\w\W]*}/gm),_J=so(/^data-[\-\w.\u00B7-\uFFFF]/),yJ=so(/^aria-[\-\w]+$/),bJ=so(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),xJ=so(/^(?:\w+script|data):/i),wJ=so(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),SJ=so(/^html$/i),TJ=function(){return typeof window>"u"?null:window},EJ=function(t,i){if(Xl(t)!=="object"||typeof t.createPolicy!="function")return null;var r=null,s="data-tt-policy-suffix";i.currentScript&&i.currentScript.hasAttribute(s)&&(r=i.currentScript.getAttribute(s));var u="dompurify"+(r?"#"+r:"");try{return t.createPolicy(u,{createHTML:function(l){return l},createScriptURL:function(l){return l}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function _P(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:TJ(),t=function(ze){return _P(ze)};if(t.version="2.4.5",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;var i=e.document,r=e.document,s=e.DocumentFragment,u=e.HTMLTemplateElement,d=e.Node,l=e.Element,m=e.NodeFilter,g=e.NamedNodeMap,x=g===void 0?e.NamedNodeMap||e.MozNamedAttrMap:g,w=e.HTMLFormElement,I=e.DOMParser,C=e.trustedTypes,A=l.prototype,L=qg(A,"cloneNode"),$=qg(A,"nextSibling"),F=qg(A,"childNodes"),z=qg(A,"parentNode");if(typeof u=="function"){var ee=r.createElement("template");ee.content&&ee.content.ownerDocument&&(r=ee.content.ownerDocument)}var H=EJ(C,i),Q=H?H.createHTML(""):"",ae=r,be=ae.implementation,te=ae.createNodeIterator,G=ae.createDocumentFragment,U=ae.getElementsByTagName,B=i.importNode,ie={};try{ie=Jc(r).documentMode?r.documentMode:{}}catch{}var X={};t.isSupported=typeof z=="function"&&be&&typeof be.createHTMLDocument<"u"&&ie!==9;var ne=mJ,Ee=gJ,Ie=vJ,Xe=_J,lt=yJ,st=xJ,$t=wJ,It=bJ,nt=null,et=ei({},[].concat(Ha(R2),Ha(q0),Ha(Z0),Ha(K0),Ha(F2))),dt=null,Be=ei({},[].concat(Ha($2),Ha(X0),Ha(z2),Ha(Zg))),Ke=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ut=null,Ot=null,Vt=!0,_n=!0,qt=!1,_e=!0,ke=!1,ge=!1,ft=!1,q=!1,fe=!1,Pe=!1,We=!1,pt=!0,ht=!1,zt="user-content-",Dt=!0,Gt=!1,ln={},vt=null,Rn=ei({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ln=null,Ye=ei({},["audio","video","img","source","image","track"]),Qe=null,Fe=ei({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),mt="http://www.w3.org/1998/Math/MathML",St="http://www.w3.org/2000/svg",Yt="http://www.w3.org/1999/xhtml",an=Yt,Pt=!1,qn=null,Cn=ei({},[mt,St,Yt],G0),jt,vn=["application/xhtml+xml","text/html"],Pn="text/html",he,Y=null,re=r.createElement("form"),me=function(ze){return ze instanceof RegExp||ze instanceof Function},Ae=function(ze){Y&&Y===ze||((!ze||Xl(ze)!=="object")&&(ze={}),ze=Jc(ze),jt=vn.indexOf(ze.PARSER_MEDIA_TYPE)===-1?jt=Pn:jt=ze.PARSER_MEDIA_TYPE,he=jt==="application/xhtml+xml"?G0:gv,nt="ALLOWED_TAGS"in ze?ei({},ze.ALLOWED_TAGS,he):et,dt="ALLOWED_ATTR"in ze?ei({},ze.ALLOWED_ATTR,he):Be,qn="ALLOWED_NAMESPACES"in ze?ei({},ze.ALLOWED_NAMESPACES,G0):Cn,Qe="ADD_URI_SAFE_ATTR"in ze?ei(Jc(Fe),ze.ADD_URI_SAFE_ATTR,he):Fe,Ln="ADD_DATA_URI_TAGS"in ze?ei(Jc(Ye),ze.ADD_DATA_URI_TAGS,he):Ye,vt="FORBID_CONTENTS"in ze?ei({},ze.FORBID_CONTENTS,he):Rn,ut="FORBID_TAGS"in ze?ei({},ze.FORBID_TAGS,he):{},Ot="FORBID_ATTR"in ze?ei({},ze.FORBID_ATTR,he):{},ln="USE_PROFILES"in ze?ze.USE_PROFILES:!1,Vt=ze.ALLOW_ARIA_ATTR!==!1,_n=ze.ALLOW_DATA_ATTR!==!1,qt=ze.ALLOW_UNKNOWN_PROTOCOLS||!1,_e=ze.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ke=ze.SAFE_FOR_TEMPLATES||!1,ge=ze.WHOLE_DOCUMENT||!1,fe=ze.RETURN_DOM||!1,Pe=ze.RETURN_DOM_FRAGMENT||!1,We=ze.RETURN_TRUSTED_TYPE||!1,q=ze.FORCE_BODY||!1,pt=ze.SANITIZE_DOM!==!1,ht=ze.SANITIZE_NAMED_PROPS||!1,Dt=ze.KEEP_CONTENT!==!1,Gt=ze.IN_PLACE||!1,It=ze.ALLOWED_URI_REGEXP||It,an=ze.NAMESPACE||Yt,Ke=ze.CUSTOM_ELEMENT_HANDLING||{},ze.CUSTOM_ELEMENT_HANDLING&&me(ze.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ke.tagNameCheck=ze.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ze.CUSTOM_ELEMENT_HANDLING&&me(ze.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ke.attributeNameCheck=ze.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ze.CUSTOM_ELEMENT_HANDLING&&typeof ze.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ke.allowCustomizedBuiltInElements=ze.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ke&&(_n=!1),Pe&&(fe=!0),ln&&(nt=ei({},Ha(F2)),dt=[],ln.html===!0&&(ei(nt,R2),ei(dt,$2)),ln.svg===!0&&(ei(nt,q0),ei(dt,X0),ei(dt,Zg)),ln.svgFilters===!0&&(ei(nt,Z0),ei(dt,X0),ei(dt,Zg)),ln.mathMl===!0&&(ei(nt,K0),ei(dt,z2),ei(dt,Zg))),ze.ADD_TAGS&&(nt===et&&(nt=Jc(nt)),ei(nt,ze.ADD_TAGS,he)),ze.ADD_ATTR&&(dt===Be&&(dt=Jc(dt)),ei(dt,ze.ADD_ATTR,he)),ze.ADD_URI_SAFE_ATTR&&ei(Qe,ze.ADD_URI_SAFE_ATTR,he),ze.FORBID_CONTENTS&&(vt===Rn&&(vt=Jc(vt)),ei(vt,ze.FORBID_CONTENTS,he)),Dt&&(nt["#text"]=!0),ge&&ei(nt,["html","head","body"]),nt.table&&(ei(nt,["tbody"]),delete ut.tbody),ws&&ws(ze),Y=ze)},$e=ei({},["mi","mo","mn","ms","mtext"]),qe=ei({},["foreignobject","desc","title","annotation-xml"]),He=ei({},["title","style","font","a","script"]),Oe=ei({},q0);ei(Oe,Z0),ei(Oe,fJ);var Ze=ei({},K0);ei(Ze,pJ);var wt=function(ze){var yt=z(ze);(!yt||!yt.tagName)&&(yt={namespaceURI:an,tagName:"template"});var Wt=gv(ze.tagName),An=gv(yt.tagName);return qn[ze.namespaceURI]?ze.namespaceURI===St?yt.namespaceURI===Yt?Wt==="svg":yt.namespaceURI===mt?Wt==="svg"&&(An==="annotation-xml"||$e[An]):!!Oe[Wt]:ze.namespaceURI===mt?yt.namespaceURI===Yt?Wt==="math":yt.namespaceURI===St?Wt==="math"&&qe[An]:!!Ze[Wt]:ze.namespaceURI===Yt?yt.namespaceURI===St&&!qe[An]||yt.namespaceURI===mt&&!$e[An]?!1:!Ze[Wt]&&(He[Wt]||!Oe[Wt]):!!(jt==="application/xhtml+xml"&&qn[ze.namespaceURI]):!1},bt=function(ze){Vf(t.removed,{element:ze});try{ze.parentNode.removeChild(ze)}catch{try{ze.outerHTML=Q}catch{ze.remove()}}},Et=function(ze,yt){try{Vf(t.removed,{attribute:yt.getAttributeNode(ze),from:yt})}catch{Vf(t.removed,{attribute:null,from:yt})}if(yt.removeAttribute(ze),ze==="is"&&!dt[ze])if(fe||Pe)try{bt(yt)}catch{}else try{yt.setAttribute(ze,"")}catch{}},pn=function(ze){var yt,Wt;if(q)ze="<remove></remove>"+ze;else{var An=cJ(ze,/^[\r\n\t ]+/);Wt=An&&An[0]}jt==="application/xhtml+xml"&&an===Yt&&(ze='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ze+"</body></html>");var Yn=H?H.createHTML(ze):ze;if(an===Yt)try{yt=new I().parseFromString(Yn,jt)}catch{}if(!yt||!yt.documentElement){yt=be.createDocument(an,"template",null);try{yt.documentElement.innerHTML=Pt?Q:Yn}catch{}}var li=yt.body||yt.documentElement;return ze&&Wt&&li.insertBefore(r.createTextNode(Wt),li.childNodes[0]||null),an===Yt?U.call(yt,ge?"html":"body")[0]:ge?yt.documentElement:li},wn=function(ze){return te.call(ze.ownerDocument||ze,ze,m.SHOW_ELEMENT|m.SHOW_COMMENT|m.SHOW_TEXT,null,!1)},un=function(ze){return ze instanceof w&&(typeof ze.nodeName!="string"||typeof ze.textContent!="string"||typeof ze.removeChild!="function"||!(ze.attributes instanceof x)||typeof ze.removeAttribute!="function"||typeof ze.setAttribute!="function"||typeof ze.namespaceURI!="string"||typeof ze.insertBefore!="function"||typeof ze.hasChildNodes!="function")},mn=function(ze){return Xl(d)==="object"?ze instanceof d:ze&&Xl(ze)==="object"&&typeof ze.nodeType=="number"&&typeof ze.nodeName=="string"},In=function(ze,yt,Wt){X[ze]&&lJ(X[ze],function(An){An.call(t,yt,Wt,Y)})},Vn=function(ze){var yt;if(In("beforeSanitizeElements",ze,null),un(ze)||gs(/[\u0080-\uFFFF]/,ze.nodeName))return bt(ze),!0;var Wt=he(ze.nodeName);if(In("uponSanitizeElement",ze,{tagName:Wt,allowedTags:nt}),ze.hasChildNodes()&&!mn(ze.firstElementChild)&&(!mn(ze.content)||!mn(ze.content.firstElementChild))&&gs(/<[/\w]/g,ze.innerHTML)&&gs(/<[/\w]/g,ze.textContent)||Wt==="select"&&gs(/<template/i,ze.innerHTML))return bt(ze),!0;if(!nt[Wt]||ut[Wt]){if(!ut[Wt]&&Ut(Wt)&&(Ke.tagNameCheck instanceof RegExp&&gs(Ke.tagNameCheck,Wt)||Ke.tagNameCheck instanceof Function&&Ke.tagNameCheck(Wt)))return!1;if(Dt&&!vt[Wt]){var An=z(ze)||ze.parentNode,Yn=F(ze)||ze.childNodes;if(Yn&&An)for(var li=Yn.length,ri=li-1;ri>=0;--ri)An.insertBefore(L(Yn[ri],!0),$(ze))}return bt(ze),!0}return ze instanceof l&&!wt(ze)||(Wt==="noscript"||Wt==="noembed")&&gs(/<\/no(script|embed)/i,ze.innerHTML)?(bt(ze),!0):(ke&&ze.nodeType===3&&(yt=ze.textContent,yt=ja(yt,ne," "),yt=ja(yt,Ee," "),yt=ja(yt,Ie," "),ze.textContent!==yt&&(Vf(t.removed,{element:ze.cloneNode()}),ze.textContent=yt)),In("afterSanitizeElements",ze,null),!1)},zn=function(ze,yt,Wt){if(pt&&(yt==="id"||yt==="name")&&(Wt in r||Wt in re))return!1;if(!(_n&&!Ot[yt]&&gs(Xe,yt))){if(!(Vt&&gs(lt,yt))){if(!dt[yt]||Ot[yt]){if(!(Ut(ze)&&(Ke.tagNameCheck instanceof RegExp&&gs(Ke.tagNameCheck,ze)||Ke.tagNameCheck instanceof Function&&Ke.tagNameCheck(ze))&&(Ke.attributeNameCheck instanceof RegExp&&gs(Ke.attributeNameCheck,yt)||Ke.attributeNameCheck instanceof Function&&Ke.attributeNameCheck(yt))||yt==="is"&&Ke.allowCustomizedBuiltInElements&&(Ke.tagNameCheck instanceof RegExp&&gs(Ke.tagNameCheck,Wt)||Ke.tagNameCheck instanceof Function&&Ke.tagNameCheck(Wt))))return!1}else if(!Qe[yt]){if(!gs(It,ja(Wt,$t,""))){if(!((yt==="src"||yt==="xlink:href"||yt==="href")&&ze!=="script"&&uJ(Wt,"data:")===0&&Ln[ze])){if(!(qt&&!gs(st,ja(Wt,$t,"")))){if(Wt)return!1}}}}}}return!0},Ut=function(ze){return ze.indexOf("-")>0},Ge=function(ze){var yt,Wt,An,Yn;In("beforeSanitizeAttributes",ze,null);var li=ze.attributes;if(li){var ri={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:dt};for(Yn=li.length;Yn--;){yt=li[Yn];var fo=yt,Ui=fo.name,Ci=fo.namespaceURI;if(Wt=Ui==="value"?yt.value:dJ(yt.value),An=he(Ui),ri.attrName=An,ri.attrValue=Wt,ri.keepAttr=!0,ri.forceKeepAttr=void 0,In("uponSanitizeAttribute",ze,ri),Wt=ri.attrValue,!ri.forceKeepAttr&&(Et(Ui,ze),!!ri.keepAttr)){if(!_e&&gs(/\/>/i,Wt)){Et(Ui,ze);continue}ke&&(Wt=ja(Wt,ne," "),Wt=ja(Wt,Ee," "),Wt=ja(Wt,Ie," "));var po=he(ze.nodeName);if(zn(po,An,Wt)){if(ht&&(An==="id"||An==="name")&&(Et(Ui,ze),Wt=zt+Wt),H&&Xl(C)==="object"&&typeof C.getAttributeType=="function"&&!Ci)switch(C.getAttributeType(po,An)){case"TrustedHTML":Wt=H.createHTML(Wt);break;case"TrustedScriptURL":Wt=H.createScriptURL(Wt);break}try{Ci?ze.setAttributeNS(Ci,Ui,Wt):ze.setAttribute(Ui,Wt),O2(t.removed)}catch{}}}}In("afterSanitizeAttributes",ze,null)}},Ct=function gt(ze){var yt,Wt=wn(ze);for(In("beforeSanitizeShadowDOM",ze,null);yt=Wt.nextNode();)In("uponSanitizeShadowNode",yt,null),!Vn(yt)&&(yt.content instanceof s&&gt(yt.content),Ge(yt));In("afterSanitizeShadowDOM",ze,null)};return t.sanitize=function(gt){var ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},yt,Wt,An,Yn,li;if(Pt=!gt,Pt&&(gt="<!-->"),typeof gt!="string"&&!mn(gt)){if(typeof gt.toString!="function")throw W0("toString is not a function");if(gt=gt.toString(),typeof gt!="string")throw W0("dirty is not a string, aborting")}if(!t.isSupported){if(Xl(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof gt=="string")return e.toStaticHTML(gt);if(mn(gt))return e.toStaticHTML(gt.outerHTML)}return gt}if(ft||Ae(ze),t.removed=[],typeof gt=="string"&&(Gt=!1),Gt){if(gt.nodeName){var ri=he(gt.nodeName);if(!nt[ri]||ut[ri])throw W0("root node is forbidden and cannot be sanitized in-place")}}else if(gt instanceof d)yt=pn("<!---->"),Wt=yt.ownerDocument.importNode(gt,!0),Wt.nodeType===1&&Wt.nodeName==="BODY"||Wt.nodeName==="HTML"?yt=Wt:yt.appendChild(Wt);else{if(!fe&&!ke&&!ge&&gt.indexOf("<")===-1)return H&&We?H.createHTML(gt):gt;if(yt=pn(gt),!yt)return fe?null:We?Q:""}yt&&q&&bt(yt.firstChild);for(var fo=wn(Gt?gt:yt);An=fo.nextNode();)An.nodeType===3&&An===Yn||Vn(An)||(An.content instanceof s&&Ct(An.content),Ge(An),Yn=An);if(Yn=null,Gt)return gt;if(fe){if(Pe)for(li=G.call(yt.ownerDocument);yt.firstChild;)li.appendChild(yt.firstChild);else li=yt;return(dt.shadowroot||dt.shadowrootmod)&&(li=B.call(i,li,!0)),li}var Ui=ge?yt.outerHTML:yt.innerHTML;return ge&&nt["!doctype"]&&yt.ownerDocument&&yt.ownerDocument.doctype&&yt.ownerDocument.doctype.name&&gs(SJ,yt.ownerDocument.doctype.name)&&(Ui="<!DOCTYPE "+yt.ownerDocument.doctype.name+`>
`+Ui),ke&&(Ui=ja(Ui,ne," "),Ui=ja(Ui,Ee," "),Ui=ja(Ui,Ie," ")),H&&We?H.createHTML(Ui):Ui},t.setConfig=function(gt){Ae(gt),ft=!0},t.clearConfig=function(){Y=null,ft=!1},t.isValidAttribute=function(gt,ze,yt){Y||Ae({});var Wt=he(gt),An=he(ze);return zn(Wt,An,yt)},t.addHook=function(gt,ze){typeof ze=="function"&&(X[gt]=X[gt]||[],Vf(X[gt],ze))},t.removeHook=function(gt){if(X[gt])return O2(X[gt])},t.removeHooks=function(gt){X[gt]&&(X[gt]=[])},t.removeAllHooks=function(){X={}},t}var Q_=_P();const IJ={text:["headline","text"],media:["caption","credit"]},CJ={start_date:["display_date"],end_date:["display_date"],slide:["display_date","group"],date:["display_date"]};Q_.addHook("afterSanitizeAttributes",function(e){if(e.nodeName=="A"&&"href"in e){"target"in e.attributes||e.setAttribute("target","_blank");let t=e.attributes.rel;t?t.value.indexOf("noopener")==-1&&e.setAttribute("rel",`noopener ${t.value}`):e.setAttribute("rel","noopener")}});function B2(e,t,i){Object.keys(i).forEach(r=>{var s=r=="slide"?e:e[r];s&&i[r].forEach(u=>{typeof s[u]<"u"&&(s[u]=t(s[u]))})})}function AJ(e){return Q_.sanitize(e,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder","target"]})}class au{constructor(t){if(this.title="",this.scale="",this.events=[],this.eras=[],this.event_dict={},this.messages={errors:[],warnings:[]},typeof t=="object"&&t.events){if(this.scale=t.scale,this.events=[],this._ensureValidScale(t.events),t.title){var i=this._assignID(t.title);this._tidyFields(t.title),this.title=t.title,this.event_dict[i]=this.title}for(var r=0;r<t.events.length;r++)try{this.addEvent(t.events[r],!0)}catch(s){this.logError(s)}t.eras&&t.eras.forEach((s,u)=>{try{this.addEra(s)}catch(d){this.logError("Era "+u+": "+d)}}),Wg(this.events),Wg(this.eras)}}logError(t){gi(`logError: ${t}`),this.messages.errors.push(t)}getErrors(t){return t?this.messages.errors.join(t):this.messages.errors}validate(){(typeof this.events>"u"||typeof this.events.length>"u"||this.events.length==0)&&this.logError("Timeline configuration has no events.");for(var t=0;t<this.eras.length;t++)if(typeof this.eras[t].start_date>"u"||typeof this.eras[t].end_date>"u"){var i;this.eras[t].headline?i=this.eras[t].headline:i="era "+(t+1),this.logError("All eras must have start and end dates. ["+i+"]")}}isValid(){return this.messages.errors.length==0}addEvent(t,i){var r=this._assignID(t);return typeof t.start_date>"u"?(gi("Missing start date, skipping event"),console.log(t),null):(this._processDates(t),this._tidyFields(t),this.events.push(t),this.event_dict[r]=t,i||Wg(this.events),r)}addEra(t){var i=this._assignID(t);if(typeof t.start_date>"u")throw new mi("missing_start_date_err",i);this._processDates(t),this._tidyFields(t),this.eras.push({start_date:t.start_date,end_date:t.end_date,headline:t.text.headline})}_assignID(t){var i=t.unique_id;return ia(i)||(i=t.text?V0(t.text.headline):null),t.unique_id=OY(this.event_dict,i),t.unique_id}_makeUniqueIdentifiers(t,i){for(var r=[t],s=0;s<i.length;s++)ia(i[s].unique_id)&&(i[s].unique_id=V0(i[s].unique_id),r.indexOf(i[s].unique_id)==-1?r.push(i[s].unique_id):i[s].unique_id="");if(r.length!=i.length+1){for(var s=0;s<i.length;s++)if(!i[s].unique_id){var u=i[s].text?V0(i[s].text.headline):null;u||(u=yu(6)),r.indexOf(u)!=-1&&(u=u+"-"+s),r.push(u),i[s].unique_id=u}}}_ensureValidScale(t){if(!this.scale){this.scale="human";for(var i=0;i<t.length;i++){if(t[i].scale=="cosmological"){this.scale="cosmological";break}if(t[i].start_date&&typeof t[i].start_date.year<"u"){var r=new Y_(t[i].start_date),s=r.data.date_obj.year;if(s<-271820||s>275759){this.scale="cosmological";break}}}gi(`Determining scale dynamically: ${this.scale}`)}var u=D2[this.scale];u||this.logError("Don't know how to process dates on scale "+this.scale)}_processDates(t){var i=D2[this.scale];if(!(t.start_date instanceof i)){var r=t.start_date;if(t.start_date=new i(r),typeof t.end_date<"u"&&!(t.end_date instanceof i)){var s=t.end_date,u=!0;for(let d in r)u=u&&r[d]==s[d];u?(gi("End date same as start date is redundant; dropping end date"),delete t.end_date):t.end_date=new i(s)}}}getEarliestDate(){var t=this.events[0].start_date;return this.eras&&this.eras.length>0&&this.eras[0].start_date.isBefore(t)?this.eras[0].start_date:t}getLatestDate(){for(var t=[],i=0;i<this.events.length;i++)this.events[i].end_date?t.push({date:this.events[i].end_date}):t.push({date:this.events[i].start_date});for(var i=0;i<this.eras.length;i++)this.eras[i].end_date?t.push({date:this.eras[i].end_date}):t.push({date:this.eras[i].start_date});return Wg(t,"date"),t.slice(-1)[0].date}_tidyFields(t){function i(r,s,u){u||(u=""),r.hasOwnProperty(s)||(r[s]=u)}t.group&&(t.group=ia(t.group)),t.text||(t.text={}),i(t.text,"text"),i(t.text,"headline"),B2(t,AJ,IJ),B2(t,GY,CJ)}}function MJ(e,t){return e==null?"":(t=t||`
`,e.charAt(e.length-t.length)!==t?e:e.substring(0,e.length-t.length))}async function kJ(e){return new Promise((t,i)=>{if(e.data){var r=yP(bP(e.data,e),e);r.useMemoryStore=!0,t(r)}else e.url&&window.fetch(e.url,{mode:"cors"}).then(function(s){if(s.status!=200){s.headers.get("content-type")=="application/json"?s.text().then(u=>{i(JSON.parse(u))}):i({status_code:s.status,message:`Error fetching CSV: [${s.status} ${s.statusText}]`});return}return s.text?s.text():s}).then(function(s){if(s){var u=LJ(s,e);u.useMemoryStore=!0,t(u)}}).catch(s=>{i({status_code:500,message:`Error fetching CSV: ${s}`})})})}function yP(e,t){return t=t||{},t.noHeaderRow!==!0&&e.length>0?{fields:e[0].map((i,r)=>i&&i.trim?i.trim():`untitled${r}`),records:e.slice(1)}:{records:e}}function PJ(e){var t={delimiter:",",doublequote:!0,lineterminator:`
`,quotechar:'"',skipinitialspace:!0,skipinitialrows:0};for(var i in e)i==="trim"?t.skipinitialspace=e.trim:t[i.toLowerCase()]=e[i];return t}function bP(e,t){(!t||t&&!t.lineterminator)&&(e=DJ(e,t));var i=PJ(t);e=MJ(e,i.lineterminator);var r="",s=!1,u=!1,d="",l=[],m=[],g,x;for(x=function(w){return u!==!0&&(w===""?w=null:i.skipinitialspace===!0&&(w=w.trim())),w},g=0;g<e.length;g+=1)r=e.charAt(g),s===!1&&(r===i.delimiter||r===i.lineterminator)?(d=x(d),l.push(d),r===i.lineterminator&&(m.push(l),l=[]),d="",u=!1):r!==i.quotechar?d+=r:s?e.charAt(g+1)===i.quotechar?(d+=i.quotechar,g+=1):s=!1:(s=!0,u=!0);return d=x(d),l.push(d),m.push(l),i.skipinitialrows&&(m=m.slice(i.skipinitialrows)),m}function DJ(e,t){return t&&!t.lineterminator?e.replace(/(\r\n|\n|\r)/gm,`
`):e}function LJ(e,t){let i=yP(bP(e,t)),r=[];return i.records.forEach(s=>{let u={};i.fields.forEach((d,l)=>u[d]=s[l]),r.push(u)}),r}function kd(e){if(e)return e.replace(/[\s,]+/g,"")}function OJ(e){let t={key:null,worksheet:0};var i=/\bkey=([-_A-Za-z0-9]+)&?/i,r=/docs.google.com\/spreadsheets(.*?)\/d\//;if(e.match(i))t.key=e.match(i)[1];else if(e.match(r)){var s=e.search(r)+e.match(r)[0].length,u=e.substr(s);t.key=u.split("/")[0],e.match(/\?gid=(\d+)/)&&(t.worksheet=e.match(/\?gid=(\d+)/)[1])}else e.match(/^\b[-_A-Za-z0-9]+$/)&&(t.key=e);return t.key?t:null}function RJ(e){return typeof e!="string"?"":e.match(/^(https?:)?\/\/?/)?{url:e}:{color:e}}function FJ(e){let t={};Object.keys(e).forEach(r=>{t[r]=ia(e[r])});var i={media:{caption:t["Media Caption"]||"",credit:t["Media Credit"]||"",url:t.Media||"",thumbnail:t["Media Thumbnail"]||""},text:{headline:t.Headline||"",text:t.Text||""},display_date:t["Display Date"]||"",group:t.Group||t.Tag||"",background:RJ(t.Background),type:t.Type||""};if(Object.keys(t).includes("Start Date")||Object.keys(t).includes("End Date"))t["Start Date"]&&(i.start_date=I2(t["Start Date"])),t["End Date"]&&(i.end_date=I2(t["End Date"]));else{if(t.Year&&(i.start_date={year:kd(t.Year),month:kd(t.Month)||"",day:kd(t.Day)||""}),t["End Year"]&&(i.end_date={year:kd(t["End Year"])||"",month:kd(t["End Month"])||"",day:kd(t["End Day"])||""}),t.Time)if(i.start_date)Pi(i.start_date,k2(t.Time));else throw new mi("invalid_start_time_without_date");if(t["End Time"])if(i.end_date)Pi(i.end_date,k2(t["End Time"]));else throw new mi("invalid_end_time_without_date");if(i.start_date&&!P2(i.start_date))throw new mi("invalid_date_err");if(i.end_date&&!P2(i.end_date))throw new mi("invalid_date_err")}return i}async function $J(e,t){let i=[];e=zJ(e),await kJ({url:`${t}${e}`}).then(s=>{i=s}).catch(s=>{throw s.proxy_err_code=="response_not_csv"?new mi("Timeline could not read the data for your timeline. Make sure you have published it to the web."):new mi(s.message)});let r={events:[],errors:[],warnings:[],eras:[]};return i.forEach((s,u)=>{try{if(!RY(s)){let d=FJ(s);jJ(d,r)}}catch(d){if(d.constructor==mi)r.errors.push(d);else{d.message&&(d=d.message);let l=s.Headline||u;r.errors.push(d+`[${l}]`)}}}),r}function zJ(e){if(e=e.trim(),e.match(/^[a-zA-Z0-9-_]+$/))return`https://docs.google.com/spreadsheets/d/${e}/pub?output=csv`;if(e.startsWith("https://docs.google.com/spreadsheets/")){if(e.match(/\/pub\?output=csv$/))return e;let t=new URL(e),i=new URLSearchParams(t.search);i.set("output","csv"),i.get("gid")&&i.set("single","true"),t.search=`?${i.toString()}`;let r=t.pathname.substr(0,t.pathname.lastIndexOf("/"));return t.pathname=`${r}/pub`,t.toString()}throw new mi("invalid_url_err",e)}async function BJ(e,t){if(!t.sheets_proxy)throw new mi("Proxy option must be set to read data from Google");var i=await $J(e,t.sheets_proxy);if(i)return i}async function NJ(e,t){let i=null,r={};if(typeof t=="function"?i=t:typeof t=="object"&&(r=t,i=t.callback,typeof r.callback=="function"&&(i=r.callback)),!i)throw new mi("Second argument to makeConfig must be either a function or an object which includes a 'callback' property with a 'function' type value");var s,u,d=OJ(e);if(d){try{u=await BJ(e,r)}catch(m){s=new au,m.name=="NetworkError"?s.logError(new mi("network_err")):m.name=="TLError"?s.logError(m):s.logError(new mi("unknown_read_err",m.name)),i(s);return}if(s=new au(u),u.errors)for(var l=0;l<u.errors.length;l++)s.logError(u.errors[l]);i(s)}else Ah({url:e,dataType:"json",success:function(m){try{s=new au(m)}catch(g){s=new au,s.logError(g)}i(s)},error:function(m,g,x){if(s=new au,g=="parsererror")var x=new mi("invalid_url_err");else var x=new mi("unknown_read_err",g);s.logError(x),i(s)}})}function jJ(e,t){var i="event";typeof e.type<"u"&&(i=e.type,delete e.type),i=="title"?t.title?(t.warnings.push("Multiple title slides detected."),t.events.push(e)):t.title=e:i=="era"?t.eras.push(e):t.events.push(e)}class UJ{constructor(t){if(t)this.scale=t.scale,this.minor=t.minor,this.major=t.major;else throw new mi("axis_helper_no_options_err")}getPixelsPerTick(t){return t*this.minor.factor}getMajorTicks(t){return this._getTicks(t,this.major)}getMinorTicks(t){return this._getTicks(t,this.minor)}_getTicks(t,i){for(var r=t._scaled_padding*i.factor,s=t._earliest-r,u=t._latest+r,d=[],l=s;l<u;l+=i.factor)d.push(t.getDateFromTime(l).floor(i.name));return{name:i.name,ticks:d}}}var _x={},xP=function(e,t){_x[e]=[];for(var i=0;i<t.length-1;i++){var r=t[i],s=t[i+1];_x[e].push(new UJ({scale:r[3],minor:{name:r[0],factor:r[1]},major:{name:s[0],factor:s[1]}}))}};xP("human",xo);xP("cosmological",pv);function VJ(e,t){typeof t!="number"&&(t=100);var i=e.getScale(),r=_x[i];if(!r)throw new mi("axis_helper_scale_err",i);for(var s=null,u=0;u<r.length;u++){var d=r[u],l=d.getPixelsPerTick(e._pixels_per_milli);if(l>t){if(s==null)return d;var m=Math.abs(t-l),g=Math.abs(t-l);return m<g?d:s}s=d}return r[r.length-1]}const HJ={millisecond:"time_milliseconds",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"compact",epoch:"compact",era:"compact",eon:"compact",eon2:"compact"};class N2{constructor(t,i){var r=t.events;this._scale=t.scale,i=Pi({display_width:500,screen_multiplier:3,max_rows:null},i),this._display_width=i.display_width,this._screen_multiplier=i.screen_multiplier,this._pixel_width=this._screen_multiplier*this._display_width,this._group_labels=void 0,this._positions=[],this._pixels_per_milli=0,this._earliest=t.getEarliestDate().getTime(),this._latest=t.getLatestDate().getTime(),this._span_in_millis=this._latest-this._earliest,this._span_in_millis<=0&&(this._span_in_millis=this._computeDefaultSpan(t)),this._average=this._span_in_millis/r.length,this._pixels_per_milli=this.getPixelWidth()/this._span_in_millis,this._axis_helper=VJ(this),this._scaled_padding=1/this.getPixelsPerTick()*(this._display_width/2),this._computePositionInfo(r,i.max_rows)}_computeDefaultSpan(t){if(t.scale=="human"){for(var i={},r=0;r<t.events.length;r++){var s=t.events[r].start_date.findBestFormat();i[s]=i[s]?i[s]+1:1}for(var r=xo.length-1;r>=0;r--)if(i.hasOwnProperty(xo[r][0])){var u=xo[xo.length-1];return xo[r+1]&&(u=xo[r+1]),u[1]}return 365*24*60*60*1e3}return 2e5}getGroupLabels(){return this._group_labels||[]}getScale(){return this._scale}getNumberOfRows(){return this._number_of_rows}getPixelWidth(){return this._pixel_width}getPosition(t){return(t-this._earliest)*this._pixels_per_milli}getPositionInfo(t){return this._positions[t]}getPixelsPerTick(){return this._axis_helper.getPixelsPerTick(this._pixels_per_milli)}getTicks(){return{major:this._axis_helper.getMajorTicks(this),minor:this._axis_helper.getMinorTicks(this)}}getDateFromTime(t){if(this._scale=="human")return new X_(t);if(this._scale=="cosmological")return new Y_(new Gp(t));throw new mi("time_scale_scale_err",this._scale)}getMajorScale(){return this._axis_helper.major.name}getMinorScale(){return this._axis_helper.minor.name}_assessGroups(t){for(var i=[],r=!1,s=0;s<t.length;s++)t[s].group&&(i.indexOf(t[s].group)<0?i.push(t[s].group):r=!0);return i.length&&r&&i.push(""),i}_computeRowInfo(t,i){for(var r=[],s=0,u=0;u<t.length;u++){var d=t[u],l=[];delete d.row;for(var m=0;m<r.length;m++)if(l.push(r[m].end-d.start),l[m]<=0){d.row=m,r[m]=d;break}if(typeof d.row>"u")if(i===null)d.row=r.length,r.push(d);else if(i>0)d.row=r.length,r.push(d),i--;else{var g=Math.min.apply(null,l),x=l.indexOf(g);d.row=x,d.end>r[x].end&&(r[x]=d),s++}}return{n_rows:r.length,n_overlaps:s}}_computePositionInfo(t,i,r){r=r||100;for(var s=[],u=!1,d=0;d<t.length;d++){var l={start:this.getPosition(t[d].start_date.getTime())};if(this._positions.push(l),typeof t[d].end_date<"u"){var m=this.getPosition(t[d].end_date.getTime());l.width=m-l.start,l.width>r?l.end=l.start+l.width:l.end=l.start+r}else l.width=r,l.end=l.start+r;t[d].group?s.indexOf(t[d].group)<0&&s.push(t[d].group):u=!0}if(s.length){u&&s.push("");for(var x=[],d=0;d<s.length;d++)x[d]={label:s[d],idx:d,positions:[],n_rows:1,n_overlaps:0};for(var d=0;d<this._positions.length;d++){var l=this._positions[d];l.group=s.indexOf(t[d].group||""),l.row=0;for(var w=x[l.group],I=w.positions.length-1;I>=0;I--)w.positions[I].end>l.start&&w.n_overlaps++;w.positions.push(l)}for(var C=s.length;;){var A=Math.max(0,i-C);if(!A||(x.sort(function(z,ee){return z.n_overlaps>ee.n_overlaps?-1:z.n_overlaps<ee.n_overlaps?1:z.idx-ee.idx}),!x[0].n_overlaps))break;for(var C=0,d=0;d<x.length;d++){var w=x[d];if(w.n_overlaps&&A){var L=this._computeRowInfo(w.positions,w.n_rows+1);w.n_rows=L.n_rows,w.n_overlaps=L.n_overlaps,A--}C+=w.n_rows}}this._number_of_rows=C,this._group_labels=[],x.sort(function(F,z){return F.idx-z.idx});for(var d=0,$=0;d<x.length;d++){this._group_labels.push({label:x[d].label,rows:x[d].n_rows});for(var I=0;I<x[d].positions.length;I++){var l=x[d].positions[I];l.row+=$}$+=x[d].n_rows}}else{var g=this._computeRowInfo(this._positions,i);this._number_of_rows=g.n_rows}}getAxisTickDateFormat(t){return this._scale=="cosmological"?"compact":HJ[t]}}class wP{constructor(t){this._el={parent:{},container:{},message:{}},this.options={width:600,height:600},this.data={label:"",rows:1},this._el.container=hn("div","tl-timegroup"),Pi(this.data,t),this.animator={},this._initLayout(),this._initEvents()}updateDisplay(t,i){}setRowPosition(t,i){this.options.height=i*this.data.rows,this.setPosition({top:t}),this._el.container.style.height=this.options.height+"px"}setAlternateRowColor(t,i){var r="tl-timegroup";t&&(r+=" tl-timegroup-alternate"),i&&(r+=" tl-timegroup-hidden"),this._el.container.className=r}_onMouseClick(){this.fire("clicked",this.options)}_initLayout(){this._el.message=hn("div","tl-timegroup-message",this._el.container),this._el.message.innerHTML=this.data.label}_initEvents(){ti.addListener(this._el.container,"click",this._onMouseClick,this)}_updateDisplay(t,i,r){}}Ss(wP,Ts,gl);class SP{constructor(t,i,r,s){this.start_date=t,this.end_date=i,this.headline=r,this._el={container:{},background:{},content_container:{},content:{},text:{}},this._text={},this._state={loaded:!1},this.options={duration:1e3,ease:Z_,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,Pi(this.options,s),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(t){}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}updateDisplay(t,i){this._updateDisplay(t,i)}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.start_date.getTime()}getEndTime(){return this.end_date?this.end_date.getTime():!1}setHeight(t){var i=12,r=1;this._el.content_container.style.height=t+"px",this._el.content.className="tl-timeera-content",W_?(r=Math.floor(t/(i+2)),r<1&&(r=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=r):(r=t/i,r>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=r*i+"px")}setWidth(t){this.end_date&&(this._el.container.style.width=t+"px",t>this.options.marker_width_min?(this._el.content_container.style.width=t+"px",this._el.content_container.className="tl-timeera-content-container tl-timeera-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timeera-content-container"))}setClass(t){this._el.container.className=t}setRowPosition(t,i){this.setPosition({top:t}),i<56&&hP(this._el.content_container,"tl-timeera-content-container-small")}setColor(t){this._el.container.className="tl-timeera tl-timeera-color"+t}_initLayout(){this._el.container=hn("div","tl-timeera"),this.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timeera tl-timeera-with-end"),this._el.content_container=hn("div","tl-timeera-content-container",this._el.container),this._el.background=hn("div","tl-timeera-background",this._el.content_container),this._el.content=hn("div","tl-timeera-content",this._el.content_container),this._el.text=hn("div","tl-timeera-text",this._el.content),this._text=hn("h2","tl-headline",this._el.text),this.headline&&this.headline!=""&&(this._text.innerHTML=Yd(this.headline)),this.onLoaded()}_initEvents(){}_updateDisplay(t,i,r){t&&(this.options.width=t),i&&(this.options.height=i)}}Ss(SP,Ts,gl);function GJ(e){const t=e.getBoundingClientRect();return t.left>=0&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}class TP{constructor(t,i,r){r&&this.setLanguage(r),this._el={container:{},content_container:{},major:{},minor:{}},this._text={},this._state={loaded:!1},this.data={},this.options={duration:1e3,ease:Z_,width:600,height:600},this.active=!1,this.animator={},this.axis_helper={},this.minor_ticks=[],this.major_ticks=[],typeof t=="object"?this._el.container=t:this._el.container=_m(t),Pi(this.options,i),this._initLayout(),this._initEvents()}show(){}hide(){}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}updateDisplay(t,i){this._updateDisplay(t,i)}getLeft(){return this._el.container.style.left.slice(0,-2)}drawTicks(t,i){var r=t.getTicks();this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor",this._el.major.style.opacity=0,this._el.minor.style.opacity=0,this.major_ticks=this._createTickElements(r.major.ticks,this._el.major,t.getAxisTickDateFormat(r.major.name)),this.minor_ticks=this._createTickElements(r.minor.ticks,this._el.minor,t.getAxisTickDateFormat(r.minor.name),r.major.ticks),this.positionTicks(t,i,!0),this._el.major.className="tl-timeaxis-major tl-animate-opacity tl-timeaxis-animate-opacity",this._el.minor.className="tl-timeaxis-minor tl-animate-opacity tl-timeaxis-animate-opacity",this._el.major.style.opacity=1,this._el.minor.style.opacity=1}_createTickElements(t,i,r,s){i.innerHTML="";var u={},d=new Date(-1,13,-30);if(u[d.getTime()]=!0,s)for(var l=0;l<s.length;l++)u[s[l].getTime()]=!0;for(var m=[],l=0;l<t.length;l++){var g=t[l];if(!(g.getTime()in u)){var x=hn("div","tl-timeaxis-tick",i),w=hn("span","tl-timeaxis-tick-text tl-animate-opacity",x);let C=g.getDisplayDate(this.getLanguage(),r);w.innerHTML=C,m.push({tick:x,tick_text:w,display_date:C,date:g})}}return m}positionTicks(t,i,r){r?(this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor"):(this._el.major.className="tl-timeaxis-major tl-timeaxis-animate",this._el.minor.className="tl-timeaxis-minor tl-timeaxis-animate"),this._positionTickArray(this.major_ticks,t,i),this._positionTickArray(this.minor_ticks,t,i)}_positionTickArray(t,i,r){if(t[1]&&t[0]){var s=i.getPosition(t[1].date.getMillisecond())-i.getPosition(t[0].date.getMillisecond()),u=1;s<r&&(u=Math.round(r/i.getPixelsPerTick()));for(var d=1,l=0;l<t.length;l++){var m=t[l];m.tick.style.left=i.getPosition(m.date.getMillisecond())+"px",m.tick_text.innerHTML=m.display_date,u>1?d>=u?(d=1,m.tick_text.style.opacity=1,m.tick.className="tl-timeaxis-tick"):(d++,m.tick_text.style.opacity=0,m.tick.className="tl-timeaxis-tick tl-timeaxis-tick-hidden"):(m.tick_text.style.opacity=1,m.tick.className="tl-timeaxis-tick")}}}getVisibleTicks(){return{major:this._getVisibleTickArray(this.major_ticks),minor:this._getVisibleTickArray(this.minor_ticks)}}_getVisibleTickArray(t){return t.filter(({tick:i})=>GJ(i))}_initLayout(){this._el.content_container=hn("div","tl-timeaxis-content-container",this._el.container),this._el.major=hn("div","tl-timeaxis-major",this._el.content_container),this._el.minor=hn("div","tl-timeaxis-minor",this._el.content_container),this.onLoaded()}_initEvents(){}_updateDisplay(t,i,r){t&&(this.options.width=t),i&&(this.options.height=i)}}Ss(TP,Ts,gl,_l);class EP{constructor(t,i,r){this._el={container:{},content_container:{},content:{},headline_container:{},headline:{},date:{}},this.options={title:!1},this.data={unique_id:"",headline:"headline",text:"text"},BY(this,t),Pi(this.options,i),this._el.container=hn("div","tl-text"),this._el.container.id=this.data.unique_id,this._initLayout(),r&&r.appendChild(this._el.container)}show(){}hide(){}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}headlineHeight(){return this._el.headline.offsetHeight+40}addDateText(t){this._el.date.innerHTML=t}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){if(this._el.content_container=hn("div","tl-text-content-container",this._el.container),this._el.headline_container=hn("div","tl-text-headline-container",this._el.content_container),this.data.headline!=""){var t="tl-headline";this.options.title&&(t="tl-headline tl-headline-title"),this._el.headline=hn("h2",t,this._el.headline_container),this._el.headline.innerHTML=this.data.headline}if(this._el.date=hn("h3","tl-headline-date",this._el.headline_container),this.data.text!=""){var i="";i+=NY(this.options.autolink==!0?dx(this.data.text):this.data.text),this._el.content=hn("div","tl-text-content",this._el.content_container),this._el.content.innerHTML=i}this.onLoaded()}}Ss(EP,Ts);class qi{constructor(t,i,r){r&&this.setLanguage(r),this._el={container:{},content_container:{},content:{},content_item:{},content_link:{},caption:null,credit:null,parent:{},link:null},this.player=null,this.timer=null,this.load_timer=null,this.message=null,this.media_id=null,this._state={loaded:!1,show_meta:!1,media_loaded:!1},this.data={unique_id:null,url:null,credit:null,caption:null,credit_alternate:null,caption_alternate:null,link:null,link_target:null},this.options={api_key_flickr:"bd3a7c45ddd52f3101825d41563a6125",api_key_googlemaps:"AIzaSyB9dW8e_iRrATFa8g24qB6BDBGdkrLDZYI",api_key_embedly:"",credit_height:0,caption_height:0,background:0},this.animator={},Pi(this.options,i),Pi(this.data,t),this.options.background||(this._el.container=hn("div","tl-media"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._initLayout())}loadMedia(){var t=this;if(!this._state.loaded)try{this.load_timer=setTimeout(function(){t.loadingMessage(),t._loadMedia(),t._updateDisplay()},1200)}catch(i){gi("Error loading media for ",this._media),gi(i)}}_updateMessage(t){this.message&&this.message.updateMessage(t)}loadingMessage(){this._updateMessage(this._("loading")+" "+this.options.media_name)}errorMessage(t){t?t=this._("error")+": "+t:t=this._("error"),this._updateMessage(t)}updateMediaDisplay(t){this._state.loaded&&!this.options.background&&(ku?this._el.content_item.style.maxHeight=this.options.height/2+"px":this._el.content_item.style.maxHeight=this.options.height-this.options.credit_height-this.options.caption_height-30+"px",this._el.container.style.maxWidth=this.options.width+"px",ph&&this._el.content_item.offsetWidth>this._el.content_item.offsetHeight,this._updateMediaDisplay(t),this._state.media_loaded&&(this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")))}_loadMedia(){this.onLoaded()}_updateMediaDisplay(t){ph&&(this._el.content_item.style.maxWidth=this.options.width+"px",this._el.content_item.style.width="auto")}_getMeta(){}_getImageURL(t,i){return""}show(){}hide(){}addTo(t){t.appendChild(this._el.container),this.onAdd()}removeFrom(t){t.removeChild(this._el.container),this.onRemove()}getImageURL(t,i){return this._getImageURL(t,i)}updateDisplay(t,i,r){this._updateDisplay(t,i,r)}stopMedia(){try{this._stopMedia()}catch(t){gi(`stopMedia() exception: ${t}`)}}loadErrorDisplay(t){try{this._el.content.removeChild(this._el.content_item)}catch{}this._el.content_item=hn("div","tl-media-item tl-media-loaderror",this._el.content),this._el.content_item.innerHTML="<div class='tl-icon-"+this.options.media_type+"'></div><p>"+t+"</p>",this.onLoaded(!0)}onLoaded(t){this._state.loaded=!0,this.fire("loaded",this.data),this.message&&this.message.hide(),t||this.options.background||this.showMeta(),this.updateDisplay()}onMediaLoaded(t){this._state.media_loaded=!0,this.fire("media_loaded",this.data),this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")}showMeta(t,i){this._state.show_meta=!0,this.data.credit&&this.data.credit!=""&&(this._el.credit=hn("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.options.autolink==!0?dx(this.data.credit):this.data.credit,this.options.credit_height=this._el.credit.offsetHeight),this.data.caption&&this.data.caption!=""&&(this._el.caption=hn("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.options.autolink==!0?dx(this.data.caption):this.data.caption,this.options.caption_height=this._el.caption.offsetHeight),(!this.data.caption||!this.data.credit)&&this.getMeta()}getMeta(){this._getMeta()}updateMeta(){!this.data.credit&&this.data.credit_alternate&&(this._el.credit=hn("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.data.credit_alternate,this.options.credit_height=this._el.credit.offsetHeight),!this.data.caption&&this.data.caption_alternate&&(this._el.caption=hn("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.data.caption_alternate,this.options.caption_height=this._el.caption.offsetHeight),this.updateDisplay()}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){this.message=new J_(this._el.container,this.options,this.getLanguage()),this._el.content_container=hn("div","tl-media-content-container",this._el.container),this.data.link&&this.data.link!=""?(this._el.link=hn("a","tl-media-link",this._el.content_container),this._el.link.href=this.data.link,this.data.link_target&&this.data.link_target!=""?this._el.link.target=this.data.link_target:this._el.link.target="_blank",this._el.link.target=="_blank"&&this._el.link.setAttribute("rel","noopener"),this._el.content=hn("div","tl-media-content",this._el.link)):this._el.content=hn("div","tl-media-content",this._el.content_container)}_updateDisplay(t,i,r){t&&(this.options.width=t),i&&(this.options.height=i),r&&(this.options.layout=r),this._el.credit&&(this.options.credit_height=this._el.credit.offsetHeight),this._el.caption&&(this.options.caption_height=this._el.caption.offsetHeight+5),this.updateMediaDisplay(this.options.layout)}domCreate(...t){return hn(...t)}_stopMedia(){}}Ss(qi,Ts,_l);let j2=class extends qi{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var t=this,i="tl-media-item tl-media-image tl-media-shadow";(this.data.url.match(/.png(\?.*)?$/)||this.data.url.match(/.svg(\?.*)?$/))&&(i="tl-media-item tl-media-image"),this._el.content_item=this.domCreate("img",i,this._el.content),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=mh(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=mh(this.data.caption)),this._el.content_item.addEventListener("load",function(r){t.onMediaLoaded()}),this._el.content_item.src=this.getImageURL()}getImageURL(t,i){return q_(this.data.url)}_updateMediaDisplay(t){ph&&(this._el.content_item.style.width="auto")}};class WJ{constructor(t){this.doc=t,this.pending={},this.queue={css:[],js:[]},this.styleSheets=t.styleSheets,this.env=this.getEnv(),this.head=this.doc.head||this.doc.getElementsByTagName("head")[0],this.pollCount=0}createNode(t,i){var r=this.doc.createElement(t),s;for(s in i)i.hasOwnProperty(s)&&r.setAttribute(s,i[s]);return r}finish(t){var i=this.pending[t],r,s;i&&(r=i.callback,s=i.urls,s.shift(),this.pollCount=0,s.length||(r&&r.call(i.context,i.obj),this.pending[t]=null,this.queue[t].length&&this.load(t)))}getEnv(){var t=navigator.userAgent,i={async:this.doc.createElement("script").async===!0};return(i.webkit=/AppleWebKit\//.test(t))||(i.ie=/MSIE/.test(t))||(i.opera=/Opera/.test(t))||(i.gecko=/Gecko\//.test(t))||(i.unknown=!0),i}load(t,i,r,s,u){var d=function(){this.finish(t)}.bind(this),l=t==="css",m=[],g,x,w,I,C,A;if(i)if(i=typeof i=="string"?[i]:i.concat(),l||this.env.async||this.env.gecko||this.env.opera)this.queue[t].push({urls:i,callback:r,obj:s,context:u});else for(g=0,x=i.length;g<x;++g)this.queue[t].push({urls:[i[g]],callback:g===x-1?r:null,obj:s,context:u});if(!(this.pending[t]||!(I=this.pending[t]=this.queue[t].shift()))){for(C=I.urls,g=0,x=C.length;g<x;++g)A=C[g],l?w=this.env.gecko?this.createNode("style"):this.createNode("link",{href:A,rel:"stylesheet"}):(w=this.createNode("script",{src:A}),w.async=!1),w.className="lazyload",w.setAttribute("charset","utf-8"),this.env.ie&&!l?w.onreadystatechange=function(){/loaded|complete/.test(w.readyState)&&(w.onreadystatechange=null,d())}:l&&(this.env.gecko||this.env.webkit)?this.env.webkit?(I.urls[g]=w.href,this.pollWebKit()):(w.innerHTML='@import "'+A+'";',this.pollGecko(w)):w.onload=w.onerror=d,m.push(w);for(g=0,x=m.length;g<x;++g)this.head.appendChild(m[g])}}pollGecko(t){var i;try{i=!!t.sheet.cssRules}catch{if(this.pollCount+=1,this.pollCount<200){var r=this;setTimeout(function(){r.pollGecko(t)},50)}else i&&this.finish("css");return}this.finish("css")}pollWebKit(){var t=this.pending.css,i;if(t){for(i=this.styleSheets.length;--i>=0;)if(this.styleSheets[i].href===t.urls[0]){this.finish("css");break}this.pollCount+=1,t&&(this.pollCount<200?setTimeout(this.pollWebKit.bind(this),50):this.finish("css"))}}css(t,i,r,s){this.load("css",t,i,r,s)}js(t,i,r,s){this.load("js",t,i,r,s)}}function Mh(e,t,i,r){IP.js(e,t,i,r)}function Y0(e,t,i,r){IP.css(e,t,i,r)}let IP=new WJ(document);class qJ extends qi{_loadMedia(){var t=this,i;this.youtube_loaded=!1,this._el.content_item=this.domCreate("div","tl-media-item tl-media-youtube tl-media-shadow",this._el.content),this._el.content_item.id=yu(7),i=jY(this.data.url),this.media_id={},this.data.url.match("v=")?this.media_id.id=i.v:this.data.url.match("/embed/")?this.media_id.id=this.data.url.split("embed/")[1].split(/[?&]/)[0]:this.data.url.match(/v\/|v=|youtu\.be\//)?this.media_id.id=this.data.url.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0]:gi("YOUTUBE IN URL BUT NOT A VALID VIDEO"),this.data.url.match("start=")?this.media_id.start=H0(this.data.url.split("start=")[1]):this.data.url.match("t=")&&(this.media_id.start=H0(this.data.url.split("t=")[1])),this.data.url.match("end=")&&(this.media_id.end=H0(this.data.url.split("end=")[1])),this.media_id.hd=typeof i.hd<"u",Mh("https://www.youtube.com/iframe_api",function(){t.createMedia()})}_updateMediaDisplay(){this._el.content_item.style.height=Pu.r16_9({w:this.options.width})+"px",this._el.content_item.style.width=this.options.width+"px"}_stopMedia(){if(this.youtube_loaded)try{this.player.getPlayerState()==YT.PlayerState.PLAYING&&this.player.pauseVideo()}catch(t){gi(t)}}createMedia(){var t=this;clearTimeout(this.timer),typeof YT<"u"&&typeof YT.Player<"u"?this.player=new YT.Player(this._el.content_item.id,{playerVars:{enablejsapi:1,color:"white",controls:1,start:this.media_id.start,end:this.media_id.end,fs:1},videoId:this.media_id.id,events:{onReady:function(){t.onPlayerReady(),t.onLoaded()},onStateChange:t.onStateChange}}):this.timer=setTimeout(function(){t.createMedia()},1e3)}onPlayerReady(t){this.youtube_loaded=!0,this._el.content_item=document.getElementById(this._el.content_item.id),this.onMediaLoaded()}onStateChange(t){t.data==YT.PlayerState.ENDED&&(t.target.seekTo(0),t.target.pauseVideo())}}class ZJ extends qi{_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-map tl-media-shadow",this._el.content),this.media_id=this.data.url,this.mapframe=this.domCreate("iframe","",this._el.content_item),this.mapframe.width="100%",this.mapframe.height="100%",this.mapframe.frameBorder="0",this.mapframe.src=this.makeGoogleMapsEmbedURL(this.media_id,this.options.api_key_googlemaps),this.onLoaded()}_updateMediaDisplay(){if(this._state.loaded){var t=Pu.square({w:this._el.content_item.offsetWidth});this._el.content_item.style.height=t.h+"px"}}makeGoogleMapsEmbedURL(t,i){var r=!1;function s(w){function I(L,$){if(L.slice(-1)=="z")$.zoom=L;else if(L.slice(-1)=="m")$.zoom=14,$.maptype="satellite";else if(L.slice(-1)=="t"){if(r=!0,A=="place")var F=w.match(x.place)[3]+","+w.match(x.place)[4];else{var F=$.center;delete $.center}$={},$.location=F,streetview_params=L.split(",");for(let ee in u.streetview){var z=parseInt(ee)+1;u.streetview[ee]=="pitch"&&streetview_params[z]=="90t"?$[u.streetview[ee]]=0:$[u.streetview[ee]]=streetview_params[z].slice(0,-1)}}return $}function C(L,$){var F={},z=$[1],ee=$[$.length-1];for(let Q in u[L]){var H=parseInt(Q)+2;u[L][Q]=="center"?F[u[L][Q]]=$[H]+","+$[++H]:F[u[L][Q]]=$[H]}return F=I(ee,F),F.key=i,r==!0&&(L="streetview"),z+"/embed/v1/"+L+UY(F)}let A="view";return w.match(x.place)?A="place":w.match(x.directions)?A="directions":w.match(x.search)&&(A="search"),C(A,w.match(x[A]))}var u={view:["center"],place:["q","center"],directions:["origin","destination","center"],search:["q","center"],streetview:["fov","heading","pitch"]},d=/(https:\/\/.+google.+?\/maps)/,l=/@([-\d.]+),([-\d.]+)/,m=/([\w\W]+)/,g=/,((?:[-\d.]+[zmayht],?)*)/,x={view:new RegExp(d.source+"/"+l.source+g.source),place:new RegExp(d.source+"/place/"+m.source+"/"+l.source+g.source),directions:new RegExp(d.source+"/dir/"+m.source+"/"+m.source+"/"+l.source+g.source),search:new RegExp(d.source+"/search/"+m.source+"/"+l.source+g.source)};return s(t)}}class KJ extends qi{constructor(t,i,r){super(t,i,r),this.blockquote=Q_.sanitize(this.data.url)}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-blockquote",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this._el.content_item.innerHTML=this.blockquote,this.onLoaded()}updateMediaDisplay(){}}class XJ extends qi{_loadMedia(){var t,i,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-wikipedia",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.media_id=this.data.url.split("wiki/")[1].split("#")[0].replace("_"," "),this.media_id=this.media_id.replace(" ","%20"),i=this.data.url.split("//")[1].split(".wikipedia")[0],t="https://"+i+".wikipedia.org/w/api.php?action=query&prop=extracts|pageimages&redirects=&titles="+this.media_id+"&exintro=1&format=json&callback=?",Ah({type:"GET",url:t,dataType:"json",success:function(s){r.createMedia(s)},error:function(s,u){var d="";d+=r._("wikipedia_load_err")+"<br/>"+r.media_id+"<br/>"+u,r.loadErrorDisplay(d)}})}createMedia(t){var i="";if(t.query){var r="",i={entry:{},title:"",text:"",extract:"",paragraphs:1,page_image:"",text_array:[]};i.entry=VY(t.query.pages,0),i.extract=i.entry.extract,i.title=i.entry.title,i.page_image=i.entry.thumbnail,i.extract.match("<p>")?i.text_array=i.extract.split("<p>"):i.text_array.push(i.extract);for(var s=0;s<i.text_array.length;s++)s+1<=i.paragraphs&&s+1<i.text_array.length&&(i.text+="<p>"+i.text_array[s+1]);r+="<span class='tl-icon-wikipedia'></span>",r+="<div class='tl-wikipedia-title'><h4><a href='"+this.data.url+"' target='_blank' rel='noopener'>"+i.title+"</a></h4>",r+="<span class='tl-wikipedia-source'>"+this._("wikipedia")+"</span></div>",i.page_image,r+=i.text,i.extract.match("REDIRECT")||(this._el.content_item.innerHTML=r,this.onLoaded())}}updateMediaDisplay(){}}function YJ(e){if(e.match(/^.+#\/media\/.+/))return`File:${e.split("#")[1].split(":")[1]}`;if(e.match(/^.*commons.wikimedia.org\/wiki\/File:.+/)){let t=e.split("/");return t[t.length-1]}return null}function JJ(e){let t={};if(e.query&&e.query.pages){let i=Object.keys(e.query.pages);t.page_id=i[0];let r=e.query.pages[t.page_id];t.url=r.imageinfo[0].thumburl,r.entityterms&&r.entityterms.label&&(t.label=r.entityterms.label[0])}return t}class U2 extends qi{_loadMedia(){var t,i=this.options.width||1e3,r=this.getLanguage().lang.toLowerCase(),s=this;try{this.establishMediaID(),t=`https://commons.wikimedia.org/w/api.php?action=query&titles=${this.media_id}&prop=imageinfo|entityterms&iiprop=url&&iiurlwidth=${i}&format=json&origin=*&wbetlanguage=${r}`,Kv(t,function(u){let d=JJ(u);d.url?(s.base_image_url=d.url,s.page_id=d.page_id,!s.data.alt&&d.label&&(s.data.alt=d.label),s.options.background||s.createMedia(),s.onLoaded()):s.loadErrorDisplay(s._("wikipedia_image_load_err"))})}catch(u){s.loadErrorDisplay(s._(u.message_key))}}establishMediaID(){let t=YJ(this.data.url);if(t)this.media_id=t;else throw new mi("Invalid Wikipedia Image URL")}createMedia(){var t=this;if(this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-wikipedia-image tl-media-shadow",this._el.content),this.data.alt)this._el.content_item.alt=this.data.alt;else if(this.page_id){let i=`M${this.page_id}`,r=`https://commons.wikimedia.org/w/api.php?action=wbgetentities&format=json&ids=${i}&format=json&origin=*`;K_(r).then(s=>{if(s.entities&&s.entities[i]){let u=s.entities[i].labels,d=t.getLanguage().lang.toLowerCase(),l=null;u[d]?l=u[d]:d.length>2&&u[d.substr(0,2)]?l=u[d.substr(0,2)]:u.en&&(l=u.en),l?(console.log(`wikibase_id: ${t.media_id} alt ${l.value}`),t.data.alt=l.value,t._el.content_item.alt=t.data.alt):console.log(`wikibase_id: ${t.media_id} ain't got no alt`)}})}this.data.title&&(this._el.content_item.title=this.data.title),this._el.content_item.addEventListener("load",function(i){t.onMediaLoaded()}),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}_getImageURL(t,i){if(t&&this.base_image_url){let r=this.base_image_url.match(/(\/\d+px-)/);if(r)return this.base_image_url.replace(r[1],`/${t}px-`)}return this.base_image_url}}class QJ extends qi{_loadMedia(){var t,i=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-soundcloud tl-media-shadow",this._el.content),this.media_id=this.data.url,t="https://soundcloud.com/oembed?url="+this.media_id+"&format=js&callback=?",Kv(t,function(r){Mh("https://w.soundcloud.com/player/api.js",function(){i.createMedia(r)})})}createMedia(t){this._el.content_item.innerHTML=t.html,self.widget=SC.Widget(this._el.content_item.querySelector("iframe")),this.soundCloudCreated=!0,this.onLoaded()}_stopMedia(){this.soundCloudCreated&&self.widget.pause()}}class eQ extends qi{_loadMedia(){var t,i=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vimeo tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/video\/|\/\/vimeo\.com\//)[1].split(/[?&]/)[0];var r=null;this.data.url.match(/#t=([^&]+).*/)&&(r=this.data.url.match(/#t=([^&]+).*/)[1]),t="https://player.vimeo.com/video/"+this.media_id+"?api=1&title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff",r&&(t=t+="&amp;#t="+r),this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(s){i.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=t,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=Pu.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player&&this.player.contentWindow&&this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(t){gi(t)}}}class tQ extends qi{_loadMedia(){var t;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-dailymotion",this._el.content),this.data.url.indexOf("dai.ly/")!=-1?this.media_id=this.data.url.substr(this.data.url.indexOf("dai.ly/")+7):this.data.url.match("video")?this.media_id=this.data.url.split("video/")[1].split(/[?&]/)[0]:this.media_id=this.data.url.split("embed/")[1].split(/[?&]/)[0],this.media_id.indexOf("_")!=-1&&(this.media_id=this.media_id.split("_")[0]),t="https://www.dailymotion.com/embed/video/"+this.media_id+"?api=postMessage",this._el.content_item.innerHTML="<iframe autostart='false' frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._state.loaded&&(this._el.content_item.style.height=Pu.r16_9({w:this._el.content_item.offsetWidth})+"px")}_stopMedia(){this._state.loaded&&this._el.content_item.querySelector("iframe").contentWindow.postMessage('{"command":"pause","parameters":[]}',"*")}}class nQ extends qi{_loadMedia(){var t;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vine tl-media-shadow",this._el.content),this.media_id=this.data.url.split("vine.co/v/")[1],t="https://vine.co/v/"+this.media_id+"/embed/simple",this._el.content_item.innerHTML="<iframe frameborder='0' width='100%' height='100%' src='"+t+"'></iframe><script async src='https://platform.vine.co/static/scripts/embed.js' charset='utf-8'><\/script>",this.onLoaded()}_updateMediaDisplay(){var t=Pu.square({w:this._el.content_item.offsetWidth,h:this.options.height});this._el.content_item.style.height=t.h+"px"}_stopMedia(){this._el.content_item.querySelector("iframe").contentWindow.postMessage("pause","*")}}class iQ extends qi{_loadMedia(){var t,i=this;if(this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.data.url.match("^(https?:)?/*(www.)?twitter.com"))this.data.url.match("status/")?this.media_id=this.data.url.split("status/")[1]:this.data.url.match("statuses/")?this.media_id=this.data.url.split("statuses/")[1]:this.media_id="";else if(this.data.url.match(`<blockquote class=['"]twitter-tweet['"]`)){var r=this.data.url.match(/(status|statuses)\/(\d+)/);if(r&&r.length>2)this.media_id=r[2];else{i.loadErrorDisplay(i._("twitterembed_invalidurl_err"));return}}t="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",Ah({type:"GET",url:t,dataType:"json",success:function(s){i.createMedia(s)},error:function(s,u){var d="";d+=i._("twitter_load_err")+"<br/>"+i.media_id+"<br/>"+u,i.loadErrorDisplay(d)}})}createMedia(t){var i="",r="",s="",u="",d="",l="",m=this;r=t.html.split("</p>&mdash;")[0]+"</p></blockquote>",s=t.author_url.split("twitter.com/")[1],u=t.html.split("</p>&mdash;")[1].split('<a href="')[1],d=u.split('">')[0],l=u.split('">')[1].split("</a>")[0],r=r.replace(/<a href/ig,'<a target="_blank" rel="noopener" href'),r.includes("pic.twitter.com")?(Mh("https://platform.twitter.com/widgets.js",function(){twttr.widgets.createTweet(m.media_id,m._el.content_item,{conversation:"none",linkColor:"#cc0000",theme:"light"})}),this.onLoaded()):(i+=r,i+="<div class='vcard'>",i+="<a href='"+d+"' class='twitter-date' rel='noopener' target='_blank'>"+l+"</a>",i+="<img src='' class='tl-media-item tl-media-image'></a>",i+="<div class='author'>",i+="<a class='screen-name url' href='"+t.author_url+"' rel='noopener' target='_blank'>",i+="<span class='avatar'></span>",i+="<span class='fn'>"+t.author_name+" <span class='tl-icon-twitter'></span></span>",i+="<span class='nickname'>@"+s+"<span class='thumbnail-inline'></span></span>",i+="</a>",i+="</div>",i+="</div>",this._el.content_item.innerHTML=i,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class rQ extends qi{_loadMedia(){var t,i=this;this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text";var r=this.data.url.match(/(status|statuses)\/(\d+)/);if(r&&r.length>2)this.media_id=r[2];else{i.loadErrorDisplay(i._("twitterembed_invalidurl_err"));return}t="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",window.twttr=function(s,u,d){var l,m=s.getElementsByTagName(u)[0],g=window.twttr||{};return s.getElementById(d)||(l=s.createElement(u),l.id=d,l.src="https://platform.twitter.com/widgets.js",m.parentNode.insertBefore(l,m),g._e=[],g.ready=function(x){g._e.push(x)}),g}(document,"script","twitter-wjs"),Ah({type:"GET",url:t,dataType:"json",success(s){i.createMedia(s)},error:function(s,u){var d="";d+=i._("twitter_load_err")+"<br/>"+i.media_id+"<br/>"+u,i.loadErrorDisplay(d)}})}createMedia(t){var i="",r="",s="",u="",d="",l="";r=t.html.split("</p>&mdash;")[0]+"</p></blockquote>",s=t.author_url.split("twitter.com/")[1],u=t.html.split("</p>&mdash;")[1].split('<a href="')[1],d=u.split('">')[0],l=u.split('">')[1].split("</a>")[0],r=r.replace(/<a href/ig,'<a target="_blank" rel="noopener" href');let m=this.media_id;r.includes("pic.twitter.com")?(twttr.ready(function(g){i=document.getElementsByClassName("tl-media-twitter")[0];var x=String(m);twttr.widgets.createTweet(x,i,{conversation:"none",linkColor:"#cc0000",theme:"light"}).then(function(w){this.onLoaded()})}),this._el.content_item.innerHTML=i,this.onLoaded()):(i+=r,i+="<div class='vcard'>",i+="<a href='"+d+"' class='twitter-date' rel='noopener' target='_blank'>"+l+"</a>",i+="<div class='author'>",i+="<a class='screen-name url' href='"+t.author_url+"' rel='noopener' target='_blank'>",i+="<span class='avatar'></span>",i+="<span class='fn'>"+t.author_name+" <span class='tl-icon-twitter'></span></span>",i+="<span class='nickname'>@"+s+"<span class='thumbnail-inline'></span></span>",i+="</a>",i+="</div>",i+="</div>",this._el.content_item.innerHTML=i,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class V2 extends qi{_loadMedia(){var t,i=this;try{this.establishMediaID(),t="https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",Kv(t,function(r){r.stat=="ok"?(i.sizes=r.sizes.size,i.options.background||i.createMedia(),i.onLoaded()):i.loadErrorDisplay(i._("flickr_notfound_err"))})}catch(r){i.loadErrorDisplay(i._(r.message_key))}}establishMediaID(){if(this.data.url.match(/flic.kr\/.+/i)){var t=this.data.url.split("/").slice(-1)[0];this.media_id=HY.decode(t)}else{var i="flickr.com/photos/",r=this.data.url.indexOf(i);if(r==-1)throw new mi("flickr_invalidurl_err");var s=r+i.length;this.media_id=this.data.url.substr(s).split("/")[1]}}createMedia(){var t=this;this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-flickr tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=mh(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=mh(this.data.caption)),this._el.content_item.addEventListener("load",function(i){t.onMediaLoaded()}),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}getImageURL(t,i){for(var r=this.size_label(i),s=this.sizes[this.sizes.length-2].source,u=0;u<this.sizes.length;u++)this.sizes[u].label==r&&(s=this.sizes[u].source);return s}_getMeta(){var t=this,i;i="https://api.flickr.com/services/rest/?method=flickr.photos.getInfo&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",Kv(i,function(r){t.data.credit_alternate="<a href='"+t.data.url+"' target='_blank' rel='noopener'>"+r.photo.owner.realname+"</a>",t.data.caption_alternate=r.photo.title._content+" "+r.photo.description._content,t.updateMeta()})}size_label(t){var i="";return t<=75?t<=0?i="Large":i="Thumbnail":t<=180?i="Small":t<=240?i="Small 320":t<=375?i="Medium":t<=480?i="Medium 640":(t<=600,i="Large"),i}}class sQ extends qi{_loadMedia(){var t=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-documentcloud tl-media-shadow",this._el.content),this._el.content_item.id=yu(7),this.data.url.match(/\.html$/)?this.data.url=this._transformURL(this.data.url):this.data.url.match(/.(json|js)$/)||gi("DOCUMENT CLOUD IN URL BUT INVALID SUFFIX"),Mh(["https://assets.documentcloud.org/viewer/loader.js","https://assets.documentcloud.org/viewer/viewer.js"],function(){t.createMedia()})}_transformURL(t){return t.replace(/(.*)\.html$/,"$1.js")}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}createMedia(){DV.load(this.data.url,{container:"#"+this._el.content_item.id,showSidebar:!1}),this.onLoaded()}}const aQ="830b21071290df4f81a35c56abbea096",oQ="704270473831239",lQ=`${oQ}|${aQ}`,H2=`https://graph.facebook.com/v8.0/instagram_oembed?access_token=${lQ}&fields=html,thumbnail_url,author_name&url=`;function cQ(e){this.oembed_response=e,this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-instagram tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=mh(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=mh(this.data.caption)),this._el.content_item.addEventListener("load",function(t){this.onMediaLoaded()}.bind(this)),this._el.content_item.src=e.thumbnail_url,this.onLoaded()}function uQ(e){let t=`${e.statusText} [${e.status}]`;e.status==400&&(t=this._("instagram_bad_request")),this.loadErrorDisplay(t)}class dQ extends qi{_loadMedia(){this.media_id=this.data.url.split("/p/")[1].split("/")[0],this.options.background||this.createMedia()}createMedia(){this.oembed_response=null;let t=`${H2}${this.data.url}`;try{Ah({url:t,dataType:"json",success:cQ,error:uQ,context:this})}catch(i){console.log(`Instagram: error fetching ${t}`),console.log(i);debugger}}getImageURL(){if(this.oembed_response&&this.oembed_response.thumbnail_url)return this.oembed_response.thumbnail_url;K_(`${H2}${this.data.url}`).then(t=>t.thumbnail_url).catch(t=>{gi(`Instagram getImageURL Error: ${t.status} ${t.statusText}`)})}_getMeta(){this.oembed_response&&this.oembed_response.author_name&&(this.data.credit_alternate=`Instagram: <a href="https://instagram.com/${this.oembed_response.author_name}" target="_blank">@${this.oembed_response.author_name}</a>`),this.updateMeta()}sizes(t){var i="";return t<=150?i="t":t<=306?i="m":i="l",i}}class hQ extends qi{_loadMedia(){this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-profile tl-media-shadow",this._el.content),this._el.content_item.src=this.data.url,this.onLoaded()}_updateMediaDisplay(t){ph&&(this._el.content_item.style.maxWidth=this.options.width/2-40+"px")}}class fQ extends qi{_loadMedia(){var t;if(this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this.data.url.match(/open\?id=([^&]+)/)){var i=this.data.url.match(/open\?id=([^&]+)/)[1];t="https://drive.google.com/file/d/"+i+"/preview"}else if(this.data.url.match(/file\/d\/([^/]*)\/?/)){var i=this.data.url.match(/file\/d\/([^/]*)\/?/)[1];t="https://drive.google.com/file/d/"+i+"/preview"}else t=this.data.url;this._el.content_item.innerHTML="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}function pQ(e){return e.match(/^spotify:/)?e:(e=new URL(e),`spotify${e.pathname.replace(/\/$/,"").replace(/\//g,":")}`)}class mQ extends qi{_loadMedia(){var t;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-spotify",this._el.content),this.media_id=pQ(this.data.url),this.media_id?(t="https://embed.spotify.com/?uri="+this.media_id+"&theme=white&view=coverart",this.player=this.domCreate("iframe","tl-media-shadow",this._el.content_item),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=t,this.onLoaded()):this.loadErrorDisplay(this._("spotify_invalid_url"))}_updateMediaDisplay(t){var i=this.options.height,r=0,s=0;ku?i=this.options.height/2:i=this.options.height-this.options.credit_height-this.options.caption_height-30,this._el.content_item.style.maxHeight="none",gi(i),gi(this.options.width),i>this.options.width?(gi("height is greater"),r=this.options.width+80+"px",s=this.options.width+"px"):(gi("width is greater"),gi(this.options.width),r=i+"px",s=i-80+"px"),this.player.style.width=s,this.player.style.height=r,this._el.credit&&(this._el.credit.style.width=s),this._el.caption&&(this._el.caption.style.width=s)}_stopMedia(){}}class gQ extends qi{constructor(t,i,r){super(t,i,r),this.iframe=Q_.sanitize(this.data.url,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder"]})}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this._el.content_item.innerHTML=this.iframe,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class vQ extends qi{_loadMedia(){try{var t=this;if(this.data.url.match(`<blockquote class=['"]imgur-embed-pub['"]`)){var i=this.data.url.match(/(imgur\.com)\/(\w+)/);this.media_id=i[2],this.data.url="http://imgur.com/gallery/"+this.media_id}else this.data.url&&(this.media_id=this.data.url.split("/").slice(-1)[0]);Mh(["https://s.imgur.com/min/embed.js"],function(){t.createMedia()})}catch{this.loadErrorDisplay(this._("imgur_invalidurl_err"))}}createMedia(){var t=this,i="https://api.imgur.com/oembed.json?url="+this.data.url;this._el.content_item=this.domCreate("div","tl-media-item tl-media-image tl-media-imgur",this._el.content),Ah({type:"GET",url:i,dataType:"json",success:function(r){try{t._el.content_item.innerHTML=r.html,setInterval(function(){document.querySelector("blockquote.imgur-embed-pub")==null?clearInterval():(imgurEmbed.createIframe(),document.getElementById("imageElement").removeAttribute("style"),document.getElementById("image").removeAttribute("style"))},2e3)}catch{gi("Error processing imgur ajax response")}},error:function(r,s,u){s=="parsererror"?t.loadErrorDisplay(t._("imgur_invalidurl_err")):t.loadErrorDisplay(t._("unknown_read_err",s))}}),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.width=this.options.width+"px",this._el.content_item.style.height=Pu.r16_9({w:this.options.width})+"px"}}class _Q extends qi{_loadMedia(){var t=q_(this.data.url);this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content);var i="";vm||MY||t.match(/dl.dropboxusercontent.com/)?i="<iframe class='doc' frameborder='0' width='100%' height='100%' src='//docs.google.com/viewer?url="+t+"&amp;embedded=true'></iframe>":i="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this._el.content_item.innerHTML=i,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class yQ extends qi{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var t=q_(this.data.url),i=this,i=this,r="tl-media-item tl-media-audio tl-media-shadow";this._el.content_item=this.domCreate("audio",r,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){i.onMediaLoaded()}),this._el.source_item.src=t,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 audio with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(t){ph&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(t,i){var r=t.match(i),s="audio/";switch(r[1]){case"mp3":s+="mpeg";break;case"wav":s+="wav";break;case"m4a":s+="mp4";break;default:s="audio";break}return s}}class bQ extends qi{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var t=q_(this.data.url),i=this,i=this,r="tl-media-item tl-media-video tl-media-shadow";this._el.content_item=this.domCreate("video",r,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){i.onMediaLoaded()}),this._el.source_item.src=t,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 video with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(t){ph&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(t,i){var r=t.match(i),s="video/";switch(r[1]){case"mp4":s+="mp4";break;case"webm":s+="webm";break;default:s="video";break}return s}}class xQ extends qi{_loadMedia(){var t,i=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-wistia tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/https?:\/\/(.+)?(wistia\.com|wi\.st)\/medias\/(.*)/)[3],gi(`Wistia: media_id: ${this.media_id}`),t="https://fast.wistia.com/embed/iframe/"+this.media_id+"?version=v1&controlsVisibleOnLoad=true&playerColor=aae3d8",this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(r){i.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=t,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=Pu.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(t){gi(t)}}}function Yv(e,t){var i={},r=[{type:"youtube",name:"YouTube",match_str:"^(https?:)?/*(www.|m.)?youtube|youtu.be",cls:qJ},{type:"vimeo",name:"Vimeo",match_str:"^(https?:)?/*(player.)?vimeo.com",cls:eQ},{type:"dailymotion",name:"DailyMotion",match_str:"^(https?:)?/*(www.)?(dailymotion.com|dai.ly)",cls:tQ},{type:"vine",name:"Vine",match_str:"^(https?:)?/*(www.)?vine.co",cls:nQ},{type:"soundcloud",name:"SoundCloud",match_str:"^(https?:)?/*(player.)?soundcloud.com",cls:QJ},{type:"twitter",name:"Twitter",match_str:"^(https?:)?/*(www.)?twitter.com",cls:iQ},{type:"twitterembed",name:"TwitterEmbed",match_str:`<blockquote class=['"]twitter-tweet['"]`,cls:rQ},{type:"googlemaps",name:"Google Map",match_str:/google.+?\/maps\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/search\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/place\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/dir\/([\w\W]+)\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)/,cls:ZJ},{type:"flickr",name:"Flickr",match_str:"^(https?:)?/*(www.)?flickr.com/photos",cls:V2},{type:"flickr",name:"Flickr",match_str:"^(https?://)?flic.kr/.*",cls:V2},{type:"instagram",name:"Instagram",match_str:/^(https?:)?\/*(www.)?(instagr.am|^(https?:)?\/*(www.)?instagram.com)\/p\//,cls:dQ},{type:"profile",name:"Profile",match_str:/^(https?:)?\/*(www.)?instagr.am\/[a-zA-Z0-9]{2,}|^(https?:)?\/*(www.)?instagram.com\/[a-zA-Z0-9]{2,}/,cls:hQ},{type:"documentcloud",name:"Document Cloud",match_str:/documentcloud.org\//,cls:sQ},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://.+.wiki[mp]edia.org.+#/media/.+.(jpg|jpeg|png|gif|svg|webp)",cls:U2},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://commons.wikimedia.org/wiki/File:.+.(jpg|jpeg|png|gif|svg|webp)",cls:U2},{type:"wikipedia",name:"Wikipedia",match_str:"^(https?:)?/.+.wikipedia.org",cls:XJ},{type:"image",name:"Image",match_str:/(jpg|jpeg|png|gif|svg|webp)(\?.*)?$/i,cls:j2},{type:"imgur",name:"Imgur",match_str:/^.*imgur.com\/.+$|<blockquote class=['\"]imgur-embed-pub['\"]/i,cls:vQ},{type:"googledocs",name:"Google Doc",match_str:"^(https?:)?/*[^.]*.google.com/[^/]*/d/[^/]*/[^/]*?usp=shar.*|^(https?:)?/*drive.google.com/open?id=[^&]*&authuser=0|^(https?:)?//*drive.google.com/open\\?id=[^&]*|^(https?:)?/*[^.]*.googledrive.com/host/[^/]*/",cls:fQ},{type:"pdf",name:"PDF",match_str:/^.*\.pdf(\?.*)?(\#.*)?/,cls:_Q},{type:"spotify",name:"spotify",match_str:"spotify",cls:mQ},{type:"iframe",name:"iFrame",match_str:"iframe",cls:gQ},{type:"blockquote",name:"Quote",match_str:"blockquote",cls:KJ},{type:"video",name:"Video",match_str:/(mp4|webm)(\?.*)?$/i,cls:bQ},{type:"wistia",name:"Wistia",match_str:/https?:\/\/(.+)?(wistia\.com|wi\.st)\/.*/i,cls:xQ},{type:"audio",name:"Audio",match_str:/(mp3|wav|m4a)(\?.*)?$/i,cls:yQ},{type:"imageblank",name:"Imageblank",match_str:"",cls:j2}];if(t){if(e instanceof Array)return!1;for(var s=0;s<r.length;s++)switch(r[s].type){case"flickr":case"image":case"instagram":if(e.url.match(r[s].match_str))return i=r[s],i;break}}else for(var s=0;s<r.length;s++)if(e.url.match(r[s].match_str))return r[s];return!1}class CP{constructor(t,i){this._el={container:{},content_container:{},media_container:{},timespan:{},line_left:{},line_right:{},content:{},text:{},media:{}},this._text={},this._state={loaded:!1},this.data={unique_id:"",background:null,date:{year:0,month:0,day:0,hour:0,minute:0,second:0,millisecond:0,thumbnail:"",format:""},text:{headline:"",text:""},media:null},this.options={duration:1e3,ease:Z_,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,this.ariaLabel="",Pi(this.options,i),Pi(this.data,t),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(t){this.active=t,this.active&&this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end tl-timemarker-active":this.active?this._el.container.className="tl-timemarker tl-timemarker-active":this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end":this._el.container.className="tl-timemarker",this._el.container.ariaLabel=this.ariaLabel,this.active?this._el.container.ariaLabel+=", shown":this._el.container.ariaLabel+=", press space to show"}setFocus(t={preventScroll:!0}){this._el.container.focus(t)}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}updateDisplay(t,i){this._updateDisplay(t,i)}loadMedia(){this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0)}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.data.start_date.getTime()}getEndTime(){return this.data.end_date?this.data.end_date.getTime():!1}setHeight(t){var i=12,r=1;this._el.content_container.style.height=t+"px",this._el.timespan_content.style.height=t+"px",t<=30?this._el.content.className="tl-timemarker-content tl-timemarker-content-small":this._el.content.className="tl-timemarker-content",t<=56?cc(this._el.content_container,"tl-timemarker-content-container-small"):hP(this._el.content_container,"tl-timemarker-content-container-small"),W_?(r=Math.floor(t/(i+2)),r<1&&(r=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=r):(r=t/i,r>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=r*i+"px")}setWidth(t){this.data.end_date&&(this._el.container.style.width=t+"px",t>this.options.marker_width_min?(this._el.content_container.style.width=t+"px",this._el.content_container.className="tl-timemarker-content-container tl-timemarker-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timemarker-content-container"))}setClass(t){this._el.container.className=t}setRowPosition(t,i){this.setPosition({top:t}),this._el.timespan.style.height=i+"px"}getFormattedDate(){if(ia(this.data.display_date).length>0)return this.data.display_date;let t="";return this.data.end_date&&(t=" to "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(t=(t?"from ":"")+this.data.start_date.getDisplayDate(this.getLanguage())+t),t}_onMarkerClick(t){this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerKeydown(t){/Space|Enter/.test(t.code)&&this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerBlur(t){this.fire("markerblur",{unique_id:this.data.unique_id})}_initLayout(){if(this._el.container=hn("div","tl-timemarker"),this._el.container.setAttribute("tabindex","-1"),this.data.unique_id&&(this._el.container.id=this.data.unique_id+"-marker"),this.data.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timemarker tl-timemarker-with-end"),this._el.timespan=hn("div","tl-timemarker-timespan",this._el.container),this._el.timespan_content=hn("div","tl-timemarker-timespan-content",this._el.timespan),this._el.content_container=hn("div","tl-timemarker-content-container",this._el.container),this._el.content=hn("div","tl-timemarker-content",this._el.content_container),this._el.line_left=hn("div","tl-timemarker-line-left",this._el.timespan),this._el.line_right=hn("div","tl-timemarker-line-right",this._el.timespan),this.data.media){this._el.media_container=hn("div","tl-timemarker-media-container",this._el.content);var t={url:this.data.media.thumbnail},i=this.data.media.thumbnail?Yv(t,!0):null;if(i){var r=new i.cls(t);r.on("loaded",function(){this._el.media=hn("img","tl-timemarker-media",this._el.media_container),this._el.media.src=r.getImageURL()}.bind(this)),r.loadMedia()}else{var s=Yv(this.data.media).type;this._el.media=hn("span","tl-icon-"+s,this._el.media_container)}}this._el.text=hn("div","tl-timemarker-text",this._el.content),this._text=hn("h2","tl-headline",this._el.text),this.data.text.headline&&this.data.text.headline!=""?this._text.innerHTML=Yd(this.data.text.headline):this.data.text.text&&this.data.text.text!=""?this._text.innerHTML=Yd(this.data.text.text):this.data.media&&this.data.media.caption&&this.data.media.caption!=""&&(this._text.innerHTML=Yd(this.data.media.caption));const u=this.getFormattedDate();this.ariaLabel=`${this._text.innerHTML}, ${u}`,this.onLoaded()}_initEvents(){ti.addListener(this._el.container,"click",this._onMarkerClick,this),ti.addListener(this._el.container,"keydown",this._onMarkerKeydown,this),ti.addListener(this._el.container,"blur",this._onMarkerBlur,this)}_updateDisplay(t,i,r){t&&(this.options.width=t),i&&(this.options.height=i)}}Ss(CP,_l,Ts,gl);class Y1{constructor(t,i,r){this._el={drag:t,move:t},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},i&&(this._el.move=i),this.options={snap:!1,enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:0,right:!1},momentum_multiplier:2e3,duration:1e3,ease:Ch},this.animator=null,this.dragevent=this.mousedrag,ko&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},Pi(this.options,r)}enable(t){ti.addListener(this._el.drag,this.dragevent.down,this._onDragStart,this),ti.addListener(this._el.drag,this.dragevent.up,this._onDragEnd,this),this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){ti.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),ti.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(t){this.options.constraint=t}_onDragStart(t){this.animator&&this.animator.stop(),ko?t.originalEvent?(this.data.pagex.start=t.originalEvent.touches[0].screenX,this.data.pagey.start=t.originalEvent.touches[0].screenY):(this.data.pagex.start=t.targetTouches[0].screenX,this.data.pagey.start=t.targetTouches[0].screenY):(this.data.pagex.start=t.pageX,this.data.pagey.start=t.pageY),this.options.enable.x,this.options.enable.y,this.data.pos.start={x:this._el.move.offsetLeft,y:this._el.move.offsetTop},this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),ti.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),ti.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(t){this.data.sliding=!1,ti.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),ti.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(t){var i={x:0,y:0};this.data.sliding=!0,ko?t.originalEvent?(this.data.pagex.end=t.originalEvent.touches[0].screenX,this.data.pagey.end=t.originalEvent.touches[0].screenY):(this.data.pagex.end=t.targetTouches[0].screenX,this.data.pagey.end=t.targetTouches[0].screenY):(this.data.pagex.end=t.pageX,this.data.pagey.end=t.pageY),i.x=this.data.pagex.start-this.data.pagex.end,i.y=this.data.pagey.start-this.data.pagey.end,this.data.pos.end={x:this._el.drag.offsetLeft,y:this._el.drag.offsetTop},this.data.new_pos.x=-(i.x-this.data.pos.start.x),this.data.new_pos.y=-(i.y-this.data.pos.start.y),this.options.enable.x&&Math.abs(i.x)>Math.abs(i.y)&&(t.preventDefault(),this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&Math.abs(i.y)>Math.abs(i.y)&&(t.preventDefault(),this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var t={x:0,y:0,time:0},i={x:0,y:0,time:0},r={x:!1,y:!1},s=!1;this.data.direction=null,t.time=(new Date().getTime()-this.data.time.start)*10,i.time=(new Date().getTime()-this.data.time.start)*10,i.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),i.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),t.x=Math.round(i.x/i.time),t.y=Math.round(i.y/i.time),this.data.new_pos.x=Math.min(this.data.new_pos.x+t.x),this.data.new_pos.y=Math.min(this.data.new_pos.y+t.y),this.options.enable.x?this.options.constraint.left&&this.data.new_pos.x>this.options.constraint.left&&(this.data.new_pos.x=this.options.constraint.left):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,i.time<2e3&&(s=!0),this.options.enable.x&&this.options.enable.y?Math.abs(i.x)>Math.abs(i.y)?r.x=!0:r.y=!0:this.options.enable.x?Math.abs(i.x)>Math.abs(i.y)&&(r.x=!0):Math.abs(i.y)>Math.abs(i.x)&&(r.y=!0),r.x&&(Math.abs(i.x)>this._el.drag.offsetWidth/2&&(s=!0),Math.abs(i.x)>1e4&&(this.data.direction="left",i.x>0&&(this.data.direction="right"))),r.y&&(Math.abs(i.y)>this._el.drag.offsetHeight/2&&(s=!0),Math.abs(i.y)>1e4&&(this.data.direction="up",i.y>0&&(this.data.direction="down"))),i.time<1e3||this._animateMomentum(),s&&this.data.direction?this.fire("swipe_"+this.data.direction,this.data):this.data.direction?this.fire("swipe_nodirection",this.data):this.options.snap&&(this.animator.stop(),this.animator=pl(this._el.move,{top:this.data.pos.start.y,left:this.data.pos.start.x,duration:this.options.duration,easing:Hp}))}_animateMomentum(){var t={x:this.data.new_pos.x,y:this.data.new_pos.y},i={duration:this.options.duration,easing:Hp};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(t.y>this.options.constraint.bottom?t.y=this.options.constraint.bottom:t.y<this.options.constraint.top&&(t.y=this.options.constraint.top)),i.top=Math.floor(t.y)+"px"),this.options.enable.x&&(this.options.constraint.left&&t.x>=this.options.constraint.left&&(t.x=this.options.constraint.left),this.options.constraint.right&&t.x<this.options.constraint.right&&(t.x=this.options.constraint.right),i.left=Math.floor(t.x)+"px"),this.animator=pl(this._el.move,i),this.fire("momentum",this.data)}}Ss(Y1,Ts);class AP{constructor(t,i,r,s){this.language=s,this._el={parent:{},container:{},slider:{},slider_background:{},line:{},marker_container_mask:{},marker_container:{},marker_item_container:{},timeaxis:{},timeaxis_background:{}},this.collapsed=!1,typeof t=="object"?this._el.container=t:this._el.container=_m(t),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","application"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline_navigation")),this._el.container.setAttribute("aria-description",'Navigate between markers with arrow keys. Press "Home" for the first and "End" for the last markers'),this.config=i,this.options={width:600,height:600,duration:1e3,ease:Ch,has_groups:!1,optimal_tick_width:50,scale_factor:2,marker_padding:5,timenav_height_min:150,marker_height_min:30,marker_width_min:100,zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89]},this.animator=null,this.ready=!1,this._markers=[],this._eras=[],this.has_eras=!1,this._groups=[],this._calculated_row_height=100,this.current_id="",this.current_focused_id="",this.timescale={},this.timeaxis={},this.max_rows=6,this.animate_css=!1,this._swipable,Pi(this.options,r)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this._onLoaded()}positionMarkers(t){for(var i=0;i<this._markers.length;i++){var r=this.timescale.getPositionInfo(i);t?this._markers[i].setClass("tl-timemarker tl-timemarker-fast"):this._markers[i].setClass("tl-timemarker"),this._markers[i].setPosition({left:r.start}),this._markers[i].setWidth(r.width)}}updateDisplay(t,i,r){let s=!1;t&&(this.options.width==0&&t>0&&(s=!0),this.options.width=t),i&&i!=this.options.height&&(this.options.height=i,this.timescale=this._getTimeScale()),this._assignRowsToMarkers(),this._el.slider_background.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._el.slider_background.style.left=-(this.options.width/2)+"px",this._el.slider.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._swipable.updateConstraint({top:!1,bottom:!1,left:this.options.width/2,right:-(this.timescale.getPixelWidth()-this.options.width/2)}),s&&this._drawTimeline(),this.goToId(this.current_id,!0)}_getTimeScale(){var t=0;try{t=parseInt(this.options.marker_height_min)}catch{gi("Invalid value for marker_height_min option."),t=30}return t==0&&(gi("marker_height_min option must not be zero."),t=30),this.max_rows=Math.round((this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding)/t),this.max_rows<1&&(this.max_rows=1),new N2(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows})}_updateTimeScale(t){this.options.scale_factor=t,this._updateDrawTimeline()}zoomIn(){var t=FY(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(t)}zoomOut(){var t=$Y(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(t)}setZoom(t){var i=this.options.zoom_sequence[t];typeof i=="number"?this.setZoomFactor(i):console.warn("Invalid zoom level. Please use an index number between 0 and "+(this.options.zoom_sequence.length-1))}setZoomFactor(t){t<=this.options.zoom_sequence[0]?this.fire("zoomtoggle",{zoom:"out",show:!1}):this.fire("zoomtoggle",{zoom:"out",show:!0}),t>=this.options.zoom_sequence[this.options.zoom_sequence.length-1]?this.fire("zoomtoggle",{zoom:"in",show:!1}):this.fire("zoomtoggle",{zoom:"in",show:!0}),t==0&&(console.warn("Zoom factor must be greater than zero. Using 0.1"),t=.1),this.options.scale_factor=t,this.goToId(this.current_id,!this._updateDrawTimeline(!0),!0)}_createGroups(){this._groups=[];var t=this.timescale.getGroupLabels();if(t){this.options.has_groups=!0;for(var i=0;i<t.length;i++)this._createGroup(t[i])}}_createGroup(t){var i=new wP(t);this._addGroup(i),this._groups.push(i)}_addGroup(t){t.addTo(this._el.container)}_positionGroups(){if(this.options.has_groups){var t=this.options.height-this._el.timeaxis_background.offsetHeight,i=Math.floor(t/this.timescale.getNumberOfRows()-this.options.marker_padding);this.timescale.getGroupLabels();for(var r=0,s=0;r<this._groups.length;r++){var u=Math.floor(s*(i+this.options.marker_padding)),d=!1;u>t-this.options.marker_padding&&(d=!0),this._groups[r].setRowPosition(u,this._calculated_row_height+this.options.marker_padding/2),this._groups[r].setAlternateRowColor(zY(r),d),s+=this._groups[r].data.rows}}}_addMarker(t){t.addTo(this._el.marker_item_container),t.on("markerclick",this._onMarkerClick,this),t.on("added",this._onMarkerAdded,this)}_createMarker(t,i){var r=new CP(t,this.options);this._addMarker(r),i<0?this._markers.push(r):this._markers.splice(i,0,r)}_createMarkers(t){for(var i=0;i<t.length;i++)this._createMarker(t[i],-1)}_removeMarker(t){t.removeFrom(this._el.marker_item_container)}_destroyMarker(t){this._removeMarker(this._markers[t]),this._markers.splice(t,1)}_calculateMarkerHeight(t){return t/this.timescale.getNumberOfRows()-this.options.marker_padding}_calculateRowHeight(t){return t/this.timescale.getNumberOfRows()}_calculateAvailableHeight(){return this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding}_calculateMinimumTimeNavHeight(){return this.timescale.getNumberOfRows()*this.options.marker_height_min+this._el.timeaxis_background.offsetHeight+this.options.marker_padding}getMinimumHeight(){return this._calculateMinimumTimeNavHeight()}_assignRowsToMarkers(){var t=this._calculateAvailableHeight(),i=this._calculateMarkerHeight(t);this._positionGroups(),this._calculated_row_height=this._calculateRowHeight(t);for(var r=0;r<this._markers.length;r++){this._markers[r].setHeight(i);var s=this.timescale.getPositionInfo(r).row,u=Math.floor(s*(i+this.options.marker_padding))+this.options.marker_padding,d=t-u+this.options.marker_padding;this._markers[r].setRowPosition(u,d)}}_resetMarkersActive(){for(var t=0;t<this._markers.length;t++)this._markers[t].setActive(!1)}_resetMarkersBlurListeners(){for(var t=0;t<this._markers.length;t++)this._markers[t].off("markerblur",this._onMarkerBlur,this)}_findMarkerIndex(t){var i=-1;return(typeof t=="string"||t instanceof String)&&(i=mP(t,this._markers,"unique_id",i)),i}_createEras(t){for(var i=0;i<t.length;i++){var r=t[i],s=new SP(r.start_date,r.end_date,r.headline,this.options);this._eras.push(s),s.addTo(this._el.marker_item_container),s.on("added",this._onEraAdded,this)}}_positionEras(t){for(var i=0,r=0;r<this._eras.length;r++){var s={start:0,end:0,width:0};s.start=this.timescale.getPosition(this._eras[r].start_date.getTime()),s.end=this.timescale.getPosition(this._eras[r].end_date.getTime()),s.width=s.end-s.start,t?this._eras[r].setClass("tl-timeera tl-timeera-fast"):this._eras[r].setClass("tl-timeera"),this._eras[r].setPosition({left:s.start}),this._eras[r].setWidth(s.width),i++,i>5&&(i=0),this._eras[r].setColor(i)}}createMarker(t,i){this._createMarker(t,i)}createMarkers(t){this._createMarkers(t)}destroyMarker(t){this._destroyMarker(t)}destroyMarkerId(t){this.destroyMarker(this._findMarkerIndex(t))}goTo(t,i,r){var s=this.options.ease,u=this.options.duration,d=t<0?0:t;this._resetMarkersActive(),t>=0&&t<this._markers.length&&this._markers[t].setActive(!0),this.animateMovement(d,i,r,u,s),t>=0&&t<this._markers.length?this.current_id=this.current_focused_id=this._markers[t].data.unique_id:this.current_id=this.current_focused_id="",this._setLabelWithCurrentMarker()}goToId(t,i,r){this.goTo(this._findMarkerIndex(t),i,r)}focusOn(t,i,r){const s=this.options.ease,u=this.options.duration,d=t<0?0:t;this.animateMovement(d,i,r,u,s),this._resetMarkersBlurListeners(),t>=0&&t<this._markers.length&&(this._markers[t].setFocus(),this.current_focused_id=this._markers[t].data.unique_id,this._markers[t].on("markerblur",this._onMarkerBlur,this))}focusNext(){const t=this._findMarkerIndex(this.current_focused_id);t+1<this._markers.length?this.focusOn(t+1):this.focusOn(t)}focusPrevious(){const t=this._findMarkerIndex(this.current_focused_id);t-1>=0?this.focusOn(t-1):this.focusOn(t)}animateMovement(t,i,r,s,u){this.animator&&this.animator.stop(),i?(this._el.slider.className="tl-timenav-slider",this._el.slider.style.left=-this._markers[t].getLeft()+this.options.width/2+"px"):r?(this._el.slider.className="tl-timenav-slider tl-timenav-slider-animate",this.animate_css=!0,this._el.slider.style.left=-this._markers[t].getLeft()+this.options.width/2+"px"):(this._el.slider.className="tl-timenav-slider",this.animator=pl(this._el.slider,{left:-this._markers[t].getLeft()+this.options.width/2+"px",duration:s,easing:u})),t>=0&&t<this._markers.length?this.current_id=this._markers[t].data.unique_id:this.current_id="",this._dispatchVisibleTicksChange()}goToId(t,i,r){this.goTo(this._findMarkerIndex(t),i,r)}_dispatchVisibleTicksChange(){this.ticks_change_timeout&&(clearTimeout(this.ticks_change_timeout),this.ticks_change_timeout=null),this.ticks_change_timeout=setTimeout(()=>{const t=this.timeaxis.getVisibleTicks();this.fire("visible_ticks_change",{visible_ticks:t})},this.options.duration)}_onLoaded(){this.ready=!0,this.fire("loaded",this.config)}_onMarkerAdded(t){this.fire("dateAdded",this.config)}_onEraAdded(t){this.fire("eraAdded",this.config)}_onMarkerRemoved(t){this.fire("dateRemoved",this.config)}_onMarkerClick(t){this.goToId(t.unique_id),this.fire("change",{unique_id:t.unique_id})}_onMarkerBlur(t){this.current_focused_id!==this.current_id&&this.focusOn(this._findMarkerIndex(this.current_id))}_onMouseScroll(t){var i=0,r=0,s={right:-(this.timescale.getPixelWidth()-this.options.width/2),left:this.options.width/2};t||(t=window.event),t.originalEvent&&(t=t.originalEvent),typeof t.wheelDeltaX<"u"&&(i=t.wheelDeltaY/6,Math.abs(t.wheelDeltaX)>Math.abs(t.wheelDeltaY)?i=t.wheelDeltaX/6:i=0),i&&(t.preventDefault&&t.preventDefault(),t.returnValue=!1),r=parseInt(this._el.slider.style.left.replace("px",""))+i,r>s.left?r=s.left:r<s.right&&(r=s.right),this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1),this._el.slider.style.left=r+"px"}_onDragMove(t){this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1)}_onKeydown(t){switch(ti.stopPropagation(t),t.key){case"ArrowUp":case"ArrowRight":{this.focusNext();break}case"ArrowDown":case"ArrowLeft":{this.focusPrevious();break}case"Home":{this.focusOn(0);break}case"End":{this.focusOn(this._markers.length-1);break}}}_drawTimeline(t){this.timescale=this._getTimeScale(),this.timeaxis.drawTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(t),this._assignRowsToMarkers(),this._createGroups(),this._positionGroups(),this.has_eras&&this._positionEras(t)}_updateDrawTimeline(t){var i=!1;if(t){var r=new N2(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows});this.timescale.getMajorScale()==r.getMajorScale()&&this.timescale.getMinorScale()==r.getMinorScale()&&(i=!0)}else i=!0;return i?(this.timescale=this._getTimeScale(),this.timeaxis.positionTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(),this._assignRowsToMarkers(),this._positionGroups(),this.has_eras&&this._positionEras(),this.updateDisplay()):this._drawTimeline(!0),i}_setLabelWithCurrentMarker(){const t=this._markers[this._findMarkerIndex(this.current_focused_id)],i=t&&t.ariaLabel?`, ${t.ariaLabel}, shown`:"";this._el.container.setAttribute("aria-label",`Timeline navigation ${i}`)}_initLayout(){this._el.line=hn("div","tl-timenav-line",this._el.container),this._el.slider=hn("div","tl-timenav-slider",this._el.container),this._el.slider_background=hn("div","tl-timenav-slider-background",this._el.slider),this._el.marker_container_mask=hn("div","tl-timenav-container-mask",this._el.slider),this._el.marker_container=hn("div","tl-timenav-container",this._el.marker_container_mask),this._el.marker_item_container=hn("div","tl-timenav-item-container",this._el.marker_container),this._el.timeaxis=hn("div","tl-timeaxis",this._el.slider),this._el.timeaxis_background=hn("div","tl-timeaxis-background",this._el.container),this.timeaxis=new TP(this._el.timeaxis,this.options,this.language),this._swipable=new Y1(this._el.slider_background,this._el.slider,{enable:{x:!0,y:!1},constraint:{top:!1,bottom:!1,left:this.options.width/2,right:!1},snap:!1}),this._swipable.enable()}_initEvents(){this._swipable.on("dragmove",this._onDragMove,this),ti.addListener(this._el.container,"mousewheel",this._onMouseScroll,this),ti.addListener(this._el.container,"DOMMouseScroll",this._onMouseScroll,this),ti.addListener(this._el.container,"keydown",this._onKeydown,this)}_initData(){this._createMarkers(this.config.events),this.config.eras&&this.config.eras.length>0&&(this.has_eras=!0,this._createEras(this.config.eras)),this._drawTimeline()}}Ss(AP,Ts,gl,_l);var J0=function(){function e(t,i){for(var r=0;r<i.length;r++){var s=i[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();function Q0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(function(){if(typeof window>"u")return;var e=Array.prototype.slice,t=Element.prototype.matches||Element.prototype.msMatchesSelector,i=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","details","summary","iframe","object","embed","[contenteditable]"].join(","),r=function(){function g(x,w){Q0(this,g),this._inertManager=w,this._rootElement=x,this._managedNodes=new Set,this._rootElement.hasAttribute("aria-hidden")?this._savedAriaHidden=this._rootElement.getAttribute("aria-hidden"):this._savedAriaHidden=null,this._rootElement.setAttribute("aria-hidden","true"),this._makeSubtreeUnfocusable(this._rootElement),this._observer=new MutationObserver(this._onMutation.bind(this)),this._observer.observe(this._rootElement,{attributes:!0,childList:!0,subtree:!0})}return J0(g,[{key:"destructor",value:function(){this._observer.disconnect(),this._rootElement&&(this._savedAriaHidden!==null?this._rootElement.setAttribute("aria-hidden",this._savedAriaHidden):this._rootElement.removeAttribute("aria-hidden")),this._managedNodes.forEach(function(w){this._unmanageNode(w.node)},this),this._observer=null,this._rootElement=null,this._managedNodes=null,this._inertManager=null}},{key:"_makeSubtreeUnfocusable",value:function(w){var I=this;d(w,function($){return I._visitNode($)});var C=document.activeElement;if(!document.body.contains(w)){for(var A=w,L=void 0;A;){if(A.nodeType===Node.DOCUMENT_FRAGMENT_NODE){L=A;break}A=A.parentNode}L&&(C=L.activeElement)}w.contains(C)&&(C.blur(),C===document.activeElement&&document.body.focus())}},{key:"_visitNode",value:function(w){if(w.nodeType===Node.ELEMENT_NODE){var I=w;I!==this._rootElement&&I.hasAttribute("inert")&&this._adoptInertRoot(I),(t.call(I,i)||I.hasAttribute("tabindex"))&&this._manageNode(I)}}},{key:"_manageNode",value:function(w){var I=this._inertManager.register(w,this);this._managedNodes.add(I)}},{key:"_unmanageNode",value:function(w){var I=this._inertManager.deregister(w,this);I&&this._managedNodes.delete(I)}},{key:"_unmanageSubtree",value:function(w){var I=this;d(w,function(C){return I._unmanageNode(C)})}},{key:"_adoptInertRoot",value:function(w){var I=this._inertManager.getInertRoot(w);I||(this._inertManager.setInert(w,!0),I=this._inertManager.getInertRoot(w)),I.managedNodes.forEach(function(C){this._manageNode(C.node)},this)}},{key:"_onMutation",value:function(w,I){w.forEach(function(C){var A=C.target;if(C.type==="childList")e.call(C.addedNodes).forEach(function($){this._makeSubtreeUnfocusable($)},this),e.call(C.removedNodes).forEach(function($){this._unmanageSubtree($)},this);else if(C.type==="attributes"){if(C.attributeName==="tabindex")this._manageNode(A);else if(A!==this._rootElement&&C.attributeName==="inert"&&A.hasAttribute("inert")){this._adoptInertRoot(A);var L=this._inertManager.getInertRoot(A);this._managedNodes.forEach(function($){A.contains($.node)&&L._manageNode($.node)})}}},this)}},{key:"managedNodes",get:function(){return new Set(this._managedNodes)}},{key:"hasSavedAriaHidden",get:function(){return this._savedAriaHidden!==null}},{key:"savedAriaHidden",set:function(w){this._savedAriaHidden=w},get:function(){return this._savedAriaHidden}}]),g}(),s=function(){function g(x,w){Q0(this,g),this._node=x,this._overrodeFocusMethod=!1,this._inertRoots=new Set([w]),this._savedTabIndex=null,this._destroyed=!1,this.ensureUntabbable()}return J0(g,[{key:"destructor",value:function(){if(this._throwIfDestroyed(),this._node&&this._node.nodeType===Node.ELEMENT_NODE){var w=this._node;this._savedTabIndex!==null?w.setAttribute("tabindex",this._savedTabIndex):w.removeAttribute("tabindex"),this._overrodeFocusMethod&&delete w.focus}this._node=null,this._inertRoots=null,this._destroyed=!0}},{key:"_throwIfDestroyed",value:function(){if(this.destroyed)throw new Error("Trying to access destroyed InertNode")}},{key:"ensureUntabbable",value:function(){if(this.node.nodeType===Node.ELEMENT_NODE){var w=this.node;if(t.call(w,i)){if(w.tabIndex===-1&&this.hasSavedTabIndex)return;w.hasAttribute("tabindex")&&(this._savedTabIndex=w.tabIndex),w.setAttribute("tabindex","-1"),w.nodeType===Node.ELEMENT_NODE&&(w.focus=function(){},this._overrodeFocusMethod=!0)}else w.hasAttribute("tabindex")&&(this._savedTabIndex=w.tabIndex,w.removeAttribute("tabindex"))}}},{key:"addInertRoot",value:function(w){this._throwIfDestroyed(),this._inertRoots.add(w)}},{key:"removeInertRoot",value:function(w){this._throwIfDestroyed(),this._inertRoots.delete(w),this._inertRoots.size===0&&this.destructor()}},{key:"destroyed",get:function(){return this._destroyed}},{key:"hasSavedTabIndex",get:function(){return this._savedTabIndex!==null}},{key:"node",get:function(){return this._throwIfDestroyed(),this._node}},{key:"savedTabIndex",set:function(w){this._throwIfDestroyed(),this._savedTabIndex=w},get:function(){return this._throwIfDestroyed(),this._savedTabIndex}}]),g}(),u=function(){function g(x){if(Q0(this,g),!x)throw new Error("Missing required argument; InertManager needs to wrap a document.");this._document=x,this._managedNodes=new Map,this._inertRoots=new Map,this._observer=new MutationObserver(this._watchForInert.bind(this)),l(x.head||x.body||x.documentElement),x.readyState==="loading"?x.addEventListener("DOMContentLoaded",this._onDocumentLoaded.bind(this)):this._onDocumentLoaded()}return J0(g,[{key:"setInert",value:function(w,I){if(I){if(this._inertRoots.has(w))return;var C=new r(w,this);if(w.setAttribute("inert",""),this._inertRoots.set(w,C),!this._document.body.contains(w))for(var A=w.parentNode;A;)A.nodeType===11&&l(A),A=A.parentNode}else{if(!this._inertRoots.has(w))return;var L=this._inertRoots.get(w);L.destructor(),this._inertRoots.delete(w),w.removeAttribute("inert")}}},{key:"getInertRoot",value:function(w){return this._inertRoots.get(w)}},{key:"register",value:function(w,I){var C=this._managedNodes.get(w);return C!==void 0?C.addInertRoot(I):C=new s(w,I),this._managedNodes.set(w,C),C}},{key:"deregister",value:function(w,I){var C=this._managedNodes.get(w);return C?(C.removeInertRoot(I),C.destroyed&&this._managedNodes.delete(w),C):null}},{key:"_onDocumentLoaded",value:function(){var w=e.call(this._document.querySelectorAll("[inert]"));w.forEach(function(I){this.setInert(I,!0)},this),this._observer.observe(this._document.body||this._document.documentElement,{attributes:!0,subtree:!0,childList:!0})}},{key:"_watchForInert",value:function(w,I){var C=this;w.forEach(function(A){switch(A.type){case"childList":e.call(A.addedNodes).forEach(function(F){if(F.nodeType===Node.ELEMENT_NODE){var z=e.call(F.querySelectorAll("[inert]"));t.call(F,"[inert]")&&z.unshift(F),z.forEach(function(ee){this.setInert(ee,!0)},C)}},C);break;case"attributes":if(A.attributeName!=="inert")return;var L=A.target,$=L.hasAttribute("inert");C.setInert(L,$);break}},this)}}]),g}();function d(g,x,w){if(g.nodeType==Node.ELEMENT_NODE){var I=g;x&&x(I);var C=I.shadowRoot;if(C){d(C,x);return}if(I.localName=="content"){for(var A=I,L=A.getDistributedNodes?A.getDistributedNodes():[],$=0;$<L.length;$++)d(L[$],x);return}if(I.localName=="slot"){for(var F=I,z=F.assignedNodes?F.assignedNodes({flatten:!0}):[],ee=0;ee<z.length;ee++)d(z[ee],x);return}}for(var H=g.firstChild;H!=null;)d(H,x),H=H.nextSibling}function l(g){if(!g.querySelector("style#inert-style, link#inert-style")){var x=document.createElement("style");x.setAttribute("id","inert-style"),x.textContent=`
[inert] {
  pointer-events: none;
  cursor: default;
}

[inert], [inert] * {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
`,g.appendChild(x)}}if(!HTMLElement.prototype.hasOwnProperty("inert")){var m=new u(document);Object.defineProperty(HTMLElement.prototype,"inert",{enumerable:!0,get:function(){return this.hasAttribute("inert")},set:function(x){m.setInert(this,x)}})}})();class MP{constructor(t,i,r,s){s&&this.setLanguage(s),this._el={container:{},scroll_container:{},background:{},content_container:{},content:{}},this._media=null,this._mediaclass={},this._text={},this._background_media=null,this._state={loaded:!1},this.has={headline:!1,text:!1,media:!1,title:!1,background:{image:!1,color:!1,color_value:""}},this.has.title=r,this.data={unique_id:null,background:null,start_date:null,end_date:null,location:null,text:null,media:null,autolink:!0},this.options={duration:1e3,slide_padding_lr:40,ease:Z_,width:600,height:600,skinny_size:650,media_name:""},this.active=!1,this.animator={},Pi(this.options,i),Pi(this.data,t),this._initLayout(),this._initEvents()}show(){this.animator=pl(this._el.slider_container,{left:-(this._el.container.offsetWidth*n)+"px",duration:this.options.duration,easing:this.options.ease})}hide(){}setActive(t){this.active=t,this.active?(this.data.background&&this.fire("background_change",this.has.background),this._setInteractive(!0),this.loadMedia()):(this.stopMedia(),this._setInteractive(!1))}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}updateDisplay(t,i,r){var s,u=this.options.slide_padding_lr,d=this.options.slide_padding_lr;t?this.options.width=t:this.options.width=this._el.container.offsetWidth,s=this.options.width-this.options.slide_padding_lr*2,ku&&this.options.width<=this.options.skinny_size?(u=0,d=0,s=this.options.width):r=="landscape"||this.options.width<=this.options.skinny_size&&(u=50,d=50,s=this.options.width-u-d),this._el.content.style.paddingLeft=u+"px",this._el.content.style.paddingRight=d+"px",this._el.content.style.width=s+"px",i?this.options.height=i:this.options.height=this._el.container.offsetHeight,this._media&&(!this.has.text&&this.has.headline?this._media.updateDisplay(s,this.options.height-this._text.headlineHeight(),r):!this.has.text&&!this.has.headline?this._media.updateDisplay(s,this.options.height,r):this.options.width<=this.options.skinny_size?this._media.updateDisplay(s,this.options.height,r):this._media.updateDisplay(s/2,this.options.height,r)),this._updateBackgroundDisplay()}loadMedia(){var t=this;this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0),this._background_media&&!this._background_media._state.loaded&&(this._background_media.on("loaded",function(){t._updateBackgroundDisplay()}),this._background_media.loadMedia())}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getBackground(){return this.has.background}scrollToTop(){this._el.container.scrollTop=0}getFormattedDate(){if(ia(this.data.display_date).length>0)return this.data.display_date;var t="";return this.has.title||(this.data.end_date&&(t=" &mdash; "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(t=this.data.start_date.getDisplayDate(this.getLanguage())+t)),t}_initLayout(){if(this._el.container=hn("div","tl-slide"),this.has.title&&(this._el.container.className="tl-slide tl-slide-titleslide"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._el.scroll_container=hn("div","tl-slide-scrollable-container",this._el.container),this._el.content_container=hn("div","tl-slide-content-container",this._el.scroll_container),this._el.content=hn("div","tl-slide-content",this._el.content_container),this._el.background=hn("div","tl-slide-background",this._el.container),this.data.background){if(this.data.background.url){var t=Yv(this.data.background,!0);t&&(this._background_media=new t.cls(this.data.background,{background:1}),this.has.background.image=!0,this._el.container.className+=" tl-full-image-background",this.has.background.color_value="#000",this._el.background.style.display="block"),this.data.background.alt&&(this._el.background.setAttribute("role","img"),this._el.background.setAttribute("aria-label",this.data.background.alt))}this.data.background.color&&(this.has.background.color=!0,this._el.container.className+=" tl-full-color-background",this.has.background.color_value=this.data.background.color),this.data.background.text_background&&(this._el.container.className+=" tl-text-background")}this.data.media&&this.data.media.url&&this.data.media.url!=""&&(this.has.media=!0),this.data.text&&this.data.text.text&&(this.has.text=!0),this.data.text&&this.data.text.headline&&(this.has.headline=!0),this.has.media&&(this.data.media.mediatype=Yv(this.data.media),this.options.media_name=this.data.media.mediatype.name,this.options.media_type=this.data.media.mediatype.type,this.options.autolink=this.data.autolink,this._media=new this.data.media.mediatype.cls(this.data.media,this.options,this.getLanguage())),(this.has.text||this.has.headline)&&(this._text=new EP(this.data.text,{title:this.has.title,language:this.getLanguage(),autolink:this.data.autolink}),this._text.addDateText(this.getFormattedDate())),!this.has.text&&!this.has.headline&&this.has.media?(cc(this._el.container,"tl-slide-media-only"),this._media.addTo(this._el.content)):this.has.headline&&this.has.media&&!this.has.text?(cc(this._el.container,"tl-slide-media-only"),this._text.addTo(this._el.content),this._media.addTo(this._el.content)):this.has.text&&this.has.media?(this._text.addTo(this._el.content),this._media.addTo(this._el.content)):(this.has.text||this.has.headline)&&(cc(this._el.container,"tl-slide-text-only"),this._text.addTo(this._el.content)),this.onLoaded()}_initEvents(){}_updateBackgroundDisplay(){this._background_media&&this._background_media._state.loaded&&(this._el.background.style.backgroundImage="url('"+this._background_media.getImageURL(this.options.width,this.options.height)+"')")}_setInteractive(t){t?this._el.container.removeAttribute("inert"):this._el.container.setAttribute("inert",!0)}}Ss(MP,_l,Ts,gl);class yx{constructor(t,i,r){this._el={container:{},content_container:{},icon:{},title:{},description:{}},this.mediatype={},this.data={title:"Navigation",description:"Description",date:"Date"},this.options={direction:"previous"},this.animator=null,Pi(this.options,i),Pi(this.data,t),this._el.container=Jf("tl-slidenav-"+this.options.direction),ku&&this._el.container.setAttribute("ontouchstart"," "),this._initLayout(),this._initEvents(),r&&r.appendChild(this._el.container)}update(t){var i={title:"",description:"",date:t.getFormattedDate()};t.data.text&&t.data.text.headline&&(i.title=t.data.text.headline),this._update(i)}setColor(t){t?this._el.content_container.className="tl-slidenav-content-container tl-slidenav-inverted":this._el.content_container.className="tl-slidenav-content-container"}_onMouseClick(){this.fire("clicked",this.options)}_update(t){this.data=Pi(this.data,t);const i=Yd(this.data.title);this._el.title.innerHTML=i;const r=Yd(this.data.date);this._el.description.innerHTML=r,this._el.container.setAttribute("aria-label",`${this.options.direction}, ${i}, ${r}`)}_initLayout(){this._el.content_container=hn("div","tl-slidenav-content-container",this._el.container),this._el.icon=hn("div","tl-slidenav-icon",this._el.content_container),this._el.title=hn("div","tl-slidenav-title",this._el.content_container),this._el.description=hn("div","tl-slidenav-description",this._el.content_container),this._el.icon.innerHTML="&nbsp;",this._update()}_initEvents(){ti.addListener(this._el.container,"click",this._onMouseClick,this)}}Ss(yx,gl,Ts);class kP{constructor(t,i,r,s){s&&this.setLanguage(s),this._el={container:{},background:{},slider_container_mask:{},slider_container:{},slider_item_container:{}},this._nav={},this._nav.previous={},this._nav.next={},this.slide_spacing=0,this._slides=[],this._swipable,this.preloadTimer,this._message,this.current_id="",this.data={},this.options={id:"",layout:"portrait",width:600,height:600,default_bg_color:{r:255,g:255,b:255},slide_padding_lr:40,start_at_slide:1,slide_default_fade:"0%",duration:1e3,ease:Ch,dragging:!0,trackResize:!0},typeof t=="object"?(this._el.container=t,this.options.id=yu(6,"tl")):(this.options.id=t,this._el.container=_m(t)),this._el.container.id||(this._el.container.id=this.options.id),this.animator=null,Pi(this.options,r),Pi(this.data,i)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this.goTo(this.options.start_at_slide),this._onLoaded()}_addSlide(t){t.addTo(this._el.slider_item_container),t.on("added",this._onSlideAdded,this),t.on("background_change",this._onBackgroundChange,this)}_createSlide(t,i,r){var s=new MP(t,this.options,i,this.getLanguage());this._addSlide(s),r<0?this._slides.push(s):this._slides.splice(r,0,s)}_createSlides(t){for(var i=0;i<t.length;i++)t[i].unique_id==""&&(t[i].unique_id=yu(6,"tl-slide")),this._createSlide(t[i],!1,-1)}_removeSlide(t){t.removeFrom(this._el.slider_item_container),t.off("added",this._onSlideRemoved,this),t.off("background_change",this._onBackgroundChange)}_destroySlide(t){this._removeSlide(this._slides[t]),this._slides.splice(t,1)}_findSlideIndex(t){var i=t;return(typeof t=="string"||t instanceof String)&&(i=mP(t,this._slides,"unique_id")),i}updateDisplay(t,i,r,s){var u,d;typeof s>"u"?d=this.options.layout:d=s,this.options.layout=d,t?this.options.width=t:this.options.width=this._el.container.offsetWidth,i?this.options.height=i:this.options.height=this._el.container.offsetHeight,this.slide_spacing=this.options.width*2,u=this.options.height/2,this._nav.next.setPosition({top:u}),this._nav.previous.setPosition({top:u});for(var l=0;l<this._slides.length;l++)this._slides[l].updateDisplay(this.options.width,this.options.height,d),this._slides[l].setPosition({left:this.slide_spacing*l,top:0});this.goToId(this.current_id,!0,!0)}createSlide(t,i){this._createSlide(t,!1,i)}createSlides(t){this._createSlides(t)}destroySlide(t){this._destroySlide(t)}destroySlideId(t){this.destroySlide(this._findSlideIndex(t))}goTo(t,i,r){t=parseInt(t),isNaN(t)&&(t=0);var s=this;this.changeBackground({color_value:"",image:!1}),this.preloadTimer&&clearTimeout(this.preloadTimer);for(var u=0;u<this._slides.length;u++)this._slides[u].setActive(!1);t<this._slides.length&&t>=0&&(this.current_id=this._slides[t].data.unique_id,this.animator&&this.animator.stop(),this._swipable&&this._swipable.stopMomentum(),i?(this._el.slider_container.style.left=-(this.slide_spacing*t)+"px",this._onSlideChange(r)):this.animator=pl(this._el.slider_container,{left:-(this.slide_spacing*t)+"px",duration:this.options.duration,easing:this.options.ease,complete:this._onSlideChange(r)}),this._slides[t].setActive(!0),this._slides[t+1]?(this.showNav(this._nav.next,!0),this._nav.next.update(this._slides[t+1])):this.showNav(this._nav.next,!1),this._slides[t-1]?(this.showNav(this._nav.previous,!0),this._nav.previous.update(this._slides[t-1])):this.showNav(this._nav.previous,!1),this.preloadTimer=setTimeout(function(){s.preloadSlides(t)},this.options.duration))}goToId(t,i,r){this.goTo(this._findSlideIndex(t),i,r)}preloadSlides(t){this._slides[t+1]&&(this._slides[t+1].loadMedia(),this._slides[t+1].scrollToTop()),this._slides[t+2]&&(this._slides[t+2].loadMedia(),this._slides[t+2].scrollToTop()),this._slides[t-1]&&(this._slides[t-1].loadMedia(),this._slides[t-1].scrollToTop()),this._slides[t-2]&&(this._slides[t-2].loadMedia(),this._slides[t-2].scrollToTop())}next(){var t=this._findSlideIndex(this.current_id);t+1<this._slides.length?this.goTo(t+1):this.goTo(t)}previous(){var t=this._findSlideIndex(this.current_id);t-1>=0?this.goTo(t-1):this.goTo(t)}showNav(t,i){this.options.width<=500&&ku?t.hide():i?t.show():t.hide()}changeBackground(t){var i={r:256,g:256,b:256};t.color_value&&t.color_value!=""?(i=fP(t.color_value),i||(gi("Invalid color value "+t.color_value),i=this.options.default_bg_color)):(i=this.options.default_bg_color,t.color_value="rgb("+i.r+" , "+i.g+", "+i.b+")"),i.r+""+i.g+i.b,this._el.background.style.backgroundImage="none",t.color_value?this._el.background.style.backgroundColor=t.color_value:this._el.background.style.backgroundColor="transparent",i.r<255||i.g<255||i.b<255||t.image?(this._nav.next.setColor(!0),this._nav.previous.setColor(!0)):(this._nav.next.setColor(!1),this._nav.previous.setColor(!1))}_updateDrawSlides(){for(var t=this.options.layout,i=0;i<this._slides.length;i++)this._slides[i].updateDisplay(this.options.width,this.options.height,t),this._slides[i].setPosition({left:this.slide_spacing*i,top:0});this.goToId(this.current_id,!0,!1)}_initLayout(){cc(this._el.container,"tl-storyslider"),this._nav.previous=new yx({title:"Previous",description:"description"},{direction:"previous"},this._el.container),this._nav.next=new yx({title:"Next",description:"description"},{direction:"next"},this._el.container),this._el.slider_container_mask=hn("div","tl-slider-container-mask",this._el.container),this._el.background=hn("div","tl-slider-background tl-animate",this._el.container),this._el.slider_container=hn("div","tl-slider-container tlanimate",this._el.slider_container_mask),this._el.slider_item_container=hn("div","tl-slider-item-container",this._el.slider_container),this._el.slider_container.setAttribute("aria-live","polite"),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this._el.slider_container.style.left="0px",ko&&(this._swipable=new Y1(this._el.slider_container_mask,this._el.slider_container,{enable:{x:!0,y:!1},snap:!0}),this._swipable.enable(),this._message=new J_(this._el.container,{message_class:"tl-message-full",message_icon_class:"tl-icon-swipe-left"},this.getLanguage()),this._message.updateMessage(this._("swipe_to_navigate")),this._message.addTo(this._el.container))}_initEvents(){this._nav.next.on("clicked",this._onNavigation,this),this._nav.previous.on("clicked",this._onNavigation,this),this._message&&this._message.on("clicked",this._onMessageClick,this),this._swipable&&(this._swipable.on("swipe_left",this._onNavigation,this),this._swipable.on("swipe_right",this._onNavigation,this),this._swipable.on("swipe_nodirection",this._onSwipeNoDirection,this))}_initData(){this.data.title&&this._createSlide(this.data.title,!0,-1),this._createSlides(this.data.events)}_onBackgroundChange(t){var i=this._findSlideIndex(this.current_id),r=this._slides[i].getBackground();this.changeBackground(t),this.fire("colorchange",r)}_onMessageClick(t){this._message.hide()}_onSwipeNoDirection(t){this.goToId(this.current_id)}_onNavigation(t){t.direction=="next"||t.direction=="left"?this.next():(t.direction=="previous"||t.direction=="right")&&this.previous(),this.fire("nav_"+t.direction,this.data)}_onSlideAdded(t){gi("slideadded"),this.fire("slideAdded",this.data)}_onSlideRemoved(t){this.fire("slideRemoved",this.data)}_onSlideChange(t){t||this.fire("change",{unique_id:this.current_id})}_onMouseClick(t){}_fireMouseEvent(t){if(this._loaded){var i=t.type;i=i==="mouseenter"?"mouseover":i==="mouseleave"?"mouseout":i,this.hasEventListeners(i)&&(i==="contextmenu"&&ti.preventDefault(t),this.fire(i,{latlng:"something",layerPoint:"something else"}))}}_onLoaded(){this.fire("loaded",this.data)}}Ss(kP,_l,Ts);class PP{constructor(t,i,r,s){this._el={parent:{},container:{},button_forwardtoend:{},button_backtostart:{},button_zoomin:{},button_zoomout:{},arrow:{},line:{},coverbar:{},grip:{}},this.collapsed=!1,typeof t=="object"?this._el.container=t:this._el.container=_m(t),i&&(this._el.parent=i),this.data={visible_ticks_dates:{}},this.options={width:600,height:600,duration:1e3,ease:Ch,menubar_default_y:0},this.animator={},this.setLanguage(s),Pi(this.options,r),this._initLayout(),this._initEvents()}show(t){this.options.duration}hide(t){}toogleZoomIn(t){t?this._el.button_zoomin.removeAttribute("disabled"):this._el.button_zoomin.setAttribute("disabled",!0)}toogleZoomOut(t){t?this._el.button_zoomout.removeAttribute("disabled"):this._el.button_zoomout.setAttribute("disabled",!0)}changeVisibleTicks(t){const i=t.minor;if(!i.length){this.data.visible_ticks_dates={};return}const s=i[0].date.getFullYear(),d=i[i.length-1].date.getFullYear();this.data.visible_ticks_dates={start:s,end:d},this._updateZoomAriaLabels()}setSticky(t){this.options.menubar_default_y=t}setColor(t){t?this._el.container.className="tl-menubar tl-menubar-inverted":this._el.container.className="tl-menubar"}updateDisplay(t,i,r,s){this._updateDisplay(t,i,r,s)}_onButtonZoomIn(t){this.fire("zoom_in",t)}_onButtonZoomOut(t){this.fire("zoom_out",t)}_onButtonForwardToEnd(t){this.fire("forward_to_end",t)}_onButtonBackToStart(t){this.fire("back_to_start",t)}_initLayout(){this._el.button_zoomin=Jf("tl-menubar-button",this._el.container),this._el.button_zoomout=Jf("tl-menubar-button",this._el.container),this._el.button_forwardtoend=Jf("tl-menubar-button",this._el.container),this._el.button_backtostart=Jf("tl-menubar-button",this._el.container),ku&&this._el.container.setAttribute("ontouchstart"," "),this._el.button_backtostart.innerHTML="<span class='tl-icon-goback'></span>",this._el.button_backtostart.setAttribute("aria-label",this._("return_to_title")),this._el.button_forwardtoend.innerHTML="<span class='tl-icon-goend'></span>",this._el.button_forwardtoend.setAttribute("aria-label",this._("go_to_end")),this._el.button_zoomin.innerHTML="<span class='tl-icon-zoom-in'></span>",this._el.button_zoomin.setAttribute("aria-label",this._("zoom_in")),this._el.button_zoomout.innerHTML="<span class='tl-icon-zoom-out'></span>",this._el.button_zoomout.setAttribute("aria-label",this._("zoom_out"))}_initEvents(){ti.addListener(this._el.button_forwardtoend,"click",this._onButtonForwardToEnd,this),ti.addListener(this._el.button_backtostart,"click",this._onButtonBackToStart,this),ti.addListener(this._el.button_zoomin,"click",this._onButtonZoomIn,this),ti.addListener(this._el.button_zoomout,"click",this._onButtonZoomOut,this)}_updateDisplay(t,i,r){t&&(this.options.width=t),i&&(this.options.height=i)}_updateZoomAriaLabels(){Object.keys(this.data.visible_ticks_dates).length==0?(this._el.button_zoomin.setAttribute("aria-description",""),this._el.button_zoomout.setAttribute("aria-description","")):(this._el.button_zoomin.setAttribute("aria-description",this._("aria_label_zoomin",this.data.visible_ticks_dates)),this._el.button_zoomout.setAttribute("aria-description",this._("aria_label_zoomout",this.data.visible_ticks_dates)))}}Ss(PP,gl,Ts,_l);let bx=null;if(document){let e=document.getElementsByTagName("script");e&&e.length>0&&(bx=e[e.length-1].src)}function wQ(e){return function(t){if(e.config){var i=t.key,r=e._getSlideIndex(self.current_id),s=e.config.events.length-1,u=e.config.title?s+1:s,d=0;i=="ArrowLeft"?r!=d&&e.goToPrev():i=="ArrowRight"&&r!=u&&e.goToNext()}}}class DP{constructor(t,i,r){if(r||(r={}),this.ready=!1,this._el={container:_m(t),storyslider:{},timenav:{},menubar:{}},r.lang&&!r.language&&(r.language=r.lang),this.language=X1,this._storyslider={},this._timenav={},this._menubar={},this._loaded={storyslider:!1,timenav:!1},this.config=null,this.options={script_path:"https://cdn.knightlab.com/libs/timeline3/latest/js/",height:this._el.container.offsetHeight,width:this._el.container.offsetWidth,debug:!1,font:"default",is_embed:!1,is_full_embed:!1,hash_bookmark:!1,default_bg_color:{r:255,g:255,b:255},scale_factor:2,layout:"landscape",timenav_position:"bottom",optimal_tick_width:60,base_class:"tl-timeline",timenav_height:null,timenav_height_percentage:25,timenav_mobile_height_percentage:40,timenav_height_min:175,marker_height_min:30,marker_width_min:100,marker_padding:5,start_at_slide:0,start_at_end:!1,menubar_height:0,skinny_size:650,medium_size:800,use_bc:!1,duration:1e3,ease:Ch,dragging:!0,trackResize:!0,map_type:"stamen:toner-lite",slide_padding_lr:100,slide_default_fade:"0%",zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89],language:"en",ga_property_id:null,track_events:["back_to_start","nav_next","nav_previous","zoom_in","zoom_out"],theme:null,sheets_proxy:"https://sheets-proxy.knightlab.com/proxy/",soundcite:!1},this.animator_timenav=null,this.animator_storyslider=null,this.animator_menubar=null,this.message=new J_(this._el.container,{message_class:"tl-message-full"}),typeof r.default_bg_color=="string"){var s=fP(r.default_bg_color);s?r.default_bg_color=s:(delete r.default_bg_color,gi("Invalid default background color. Ignoring."))}Pi(this.options,r),this.options.script_path||(this.options.script_path=this.determineScriptPath()),r.soundcite&&this.on("ready",()=>{gi("Loading Soundcite resources "),Y0("https://cdn.knightlab.com/libs/soundcite/latest/css/player.css"),Mh("https://cdn.knightlab.com/libs/soundcite/latest/js/soundcite.min.js")}),this._loadStyles(),document.addEventListener("keydown",wQ(this)),window.addEventListener("resize",function(u){this.updateDisplay()}.bind(this)),this.options.debug&&LY(console.log),cc(this._el.container,"tl-timeline"),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","region"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline")),this.options.is_embed&&cc(this._el.container,"tl-timeline-embed"),this.options.is_full_embed&&cc(this._el.container,"tl-timeline-full-embed"),this._loadLanguage(i)}_loadStyles(){let t=null,i=null;if(this.options.font&&(this.options.font.indexOf("http")==0||this.options.font.match(/\.css$/)))t=this.options.font;else if(this.options.font){let r="../css/fonts/font."+this.options.font.toLowerCase()+".css";t=new URL(r,this.options.script_path).toString()}if(t&&Y0(t),this.options.theme&&(this.options.theme.indexOf("http")==0||this.options.theme.match(/\.css$/)))i=this.options.theme;else if(this.options.theme){let r="../css/themes/timeline.theme."+this.options.theme.toLowerCase()+".css";i=new URL(r,this.options.script_path).toString()}i&&Y0(i)}_loadLanguage(t){try{var i=this.options.language,r=this.options.script_path;XY(i,r).then(s=>{s?(this.language=s,this.message.setLanguage(this.language),this.showMessage(this._("loading_timeline"))):this.showMessage(`Error loading ${i}`),this._initData(t)})}catch(s){this.showMessage(this._translateError(s))}}_initData(t){typeof t=="string"?NJ(t,{callback:function(i){this.setConfig(i)}.bind(this),sheets_proxy:this.options.sheets_proxy}):au==t.constructor?this.setConfig(t):this.setConfig(new au(t))}_translateError(t){return t.hasOwnProperty("stack")&&gi(t.stack),t.message_key?this._(t.message_key)+(t.detail?" ["+t.detail+"]":""):t}showMessage(t){this.message?this.message.updateMessage(t):(gi("No message display available."),gi(t))}determineScriptPath(){let t=null;if(bx)t=bx;else{let i=document.getElementById("timeline-script-tag");i&&(t=i.src)}if(!t){let i=document.getElementsByTagName("script");for(let r=i.length-1;r>=0;r--)if(i[r].src){t=i[r].src;break}}return t?t.substr(0,t.lastIndexOf("/")+1):""}setConfig(t){if(this.config=t,this.config.isValid()&&(this.config.validate(),this._validateOptions()),this.config.isValid())try{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",this._onDataLoaded.bind(this)):this._onDataLoaded()}catch(u){this.showMessage("<strong>"+this._("error")+":</strong> "+this._translateError(u))}else{for(var i=[],r=0,s=this.config.getErrors();r<s.length;r++)i.push(this._translateError(s[r]));this.showMessage("<strong>"+this._("error")+":</strong> "+i.join("<br>"))}}_onDataLoaded(){this.fire("dataloaded"),this._initLayout(),this._initEvents(),this._initAnalytics(),this.message&&this.message.hide();let t=(r,s)=>{r.reduce((u,d)=>u||d.isIntersecting,!1)&&this.updateDisplay()};new IntersectionObserver(t.bind(this)).observe(this._el.container),this.ready=!0,this.fire("ready")}_initLayout(){this.message.removeFrom(this._el.container),this._el.container.innerHTML="",this.options.timenav_position=="top"?(this._el.timenav=hn("div","tl-timenav",this._el.container),this._el.menubar=hn("div","tl-menubar",this._el.container),this._el.storyslider=hn("div","tl-storyslider",this._el.container)):(this._el.storyslider=hn("div","tl-storyslider",this._el.container),this._el.timenav=hn("div","tl-timenav",this._el.container),this._el.menubar=hn("div","tl-menubar",this._el.container)),this._el.attribution=hn("div","tl-attribution",this._el.container),this._el.attribution.innerHTML="<a href='https://timeline.knightlab.com' target='_blank' rel='noopener'><span class='tl-knightlab-logo'></span>TimelineJS</a>",this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.timenav_height=this._calculateTimeNavHeight(this.options.timenav_height),this._timenav=new AP(this._el.timenav,this.config,this.options,this.language),this._timenav.on("loaded",this._onTimeNavLoaded,this),this._timenav.options.height=this.options.timenav_height,this._timenav.init(),this.options.initial_zoom&&this.setZoom(this.options.initial_zoom),this._storyslider=new kP(this._el.storyslider,this.config,this.options,this.language),this._el.storyslider.setAttribute("role","group"),this._el.storyslider.setAttribute("aria-label",this._("aria_label_timeline_content")),this._storyslider.on("loaded",this._onStorySliderLoaded,this),this._storyslider.init(),this._menubar=new PP(this._el.menubar,this._el.container,this.options,this.getLanguage()),this.options.layout=="portrait"?this.options.storyslider_height=this.options.height-this.options.timenav_height-1:this.options.storyslider_height=this.options.height-1,this._updateDisplay(this._timenav.options.height,!0,2e3)}_initEvents(){this._timenav.on("change",this._onTimeNavChange,this),this._timenav.on("zoomtoggle",this._onZoomToggle,this),this._timenav.on("visible_ticks_change",this._onVisibleTicksChange,this),this._storyslider.on("change",this._onSlideChange,this),this._storyslider.on("colorchange",this._onColorChange,this),this._storyslider.on("nav_next",this._onStorySliderNext,this),this._storyslider.on("nav_previous",this._onStorySliderPrevious,this),this._menubar.on("zoom_in",this._onZoomIn,this),this._menubar.on("zoom_out",this._onZoomOut,this),this._menubar.on("forward_to_end",this._onForwardToEnd,this),this._menubar.on("back_to_start",this._onBackToStart,this)}_onColorChange(t){this.fire("color_change",{unique_id:this.current_id},this)}_onSlideChange(t){this.current_id!=t.unique_id&&(this.current_id=t.unique_id,this._timenav.goToId(this.current_id),this._onChange(t))}_onTimeNavChange(t){this.current_id!=t.unique_id&&(this.current_id=t.unique_id,this._storyslider.goToId(this.current_id),this._onChange(t))}_onZoomToggle(t){t.zoom=="in"?this._menubar.toogleZoomIn(t.show):t.zoom=="out"&&this._menubar.toogleZoomOut(t.show)}_onChange(t){this.fire("change",{unique_id:this.current_id},this),this.options.hash_bookmark&&this.current_id&&this._updateHashBookmark(this.current_id)}_onVisibleTicksChange(t){this._menubar.changeVisibleTicks(t.visible_ticks)}_onForwardToEnd(t){this.goToEnd(),this.fire("forward_to_end",{unique_id:this.current_id},this)}_onBackToStart(t){this.goToStart(),this.fire("back_to_start",{unique_id:this.current_id},this)}_onZoomIn(t){this._timenav.zoomIn(),this.fire("zoom_in",{zoom_level:this._timenav.options.scale_factor},this)}_onZoomOut(t){this._timenav.zoomOut(),this.fire("zoom_out",{zoom_level:this._timenav.options.scale_factor},this)}_onTimeNavLoaded(){this._loaded.timenav=!0,this._onLoaded()}_onStorySliderLoaded(){this._loaded.storyslider=!0,this._onLoaded()}_onStorySliderNext(t){this.fire("nav_next",t)}_onStorySliderPrevious(t){this.fire("nav_previous",t)}_updateDisplay(t,i,r){var s=this.options.duration,u=this.options.base_class,d=0;r&&(s=r),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.width<=this.options.skinny_size?(u+=" tl-skinny",this.options.layout="portrait"):this.options.width<=this.options.medium_size?(u+=" tl-medium",this.options.layout="landscape"):this.options.layout="landscape",ko&&(this.options.layout=kY()),ku?(u+=" tl-mobile",this.options.timenav_height=this._calculateTimeNavHeight(t,this.options.timenav_mobile_height_percentage)):this.options.timenav_height=this._calculateTimeNavHeight(t),this.options.layout=="portrait"?u+=" tl-layout-portrait":u+=" tl-layout-landscape",this.options.storyslider_height=this.options.height-this.options.timenav_height,this.options.timenav_position=="top"?d=Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-39/2:d=Math.round(this.options.storyslider_height+1+Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-35/2),i?(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this.animator_storyslider&&this.animator_storyslider.stop(),this.animator_storyslider=pl(this._el.storyslider,{height:this.options.storyslider_height+"px",duration:s/2,easing:Hp}),this.animator_menubar&&this.animator_menubar.stop(),this.animator_menubar=pl(this._el.menubar,{top:d+"px",duration:s/2,easing:Hp})):(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this._el.storyslider.style.height=this.options.storyslider_height+"px",this._el.menubar.style.top=d+"px"),this.message&&this.message.updateDisplay(this.options.width,this.options.height),this._timenav.updateDisplay(this.options.width,this.options.timenav_height,i),this._storyslider.updateDisplay(this.options.width,this.options.storyslider_height,i,this.options.layout),this.language.direction=="rtl"&&(u+=" tl-rtl"),this._el.container.className=u}_calculateTimeNavHeight(t,i){var r=0;return t?r=t:(this.options.timenav_height_percentage||i)&&(i?r=Math.round(this.options.height/100*i):r=Math.round(this.options.height/100*this.options.timenav_height_percentage)),this._timenav.ready&&this.options.timenav_height_min<this._timenav.getMinimumHeight()&&(this.options.timenav_height_min=this._timenav.getMinimumHeight()),r<this.options.timenav_height_min&&(r=this.options.timenav_height_min),r=r-this.options.marker_padding*2,r}_validateOptions(){for(var t=["timenav_height","timenav_height_min","marker_height_min","marker_width_min","marker_padding","start_at_slide","slide_padding_lr"],i=0;i<t.length;i++){var r=t[i],s=this.options[r];let u=!0;typeof s=="number"?u=s==parseInt(s):typeof s=="string"&&(u=s.match(/^\s*(\-?\d+)?\s*$/)),u||this.config.logError({message_key:"invalid_integer_option",detail:r})}}_getSlideIndex(t){if(this.config){if(this.config.title&&this.config.title.unique_id==t)return 0;for(var i=0;i<this.config.events.length;i++)if(t==this.config.events[i].unique_id)return this.config.title?i+1:i}return-1}_getEventIndex(t){for(var i=0;i<this.config.events.length;i++)if(t==this.config.events[i].unique_id)return i;return-1}_onLoaded(){if(this._loaded.storyslider&&this._loaded.timenav&&(this.fire("loaded",this.config),DY(this.options.start_at_end)||this.options.start_at_slide>this.config.events.length?this.goToEnd():this.goTo(this.options.start_at_slide),this.options.hash_bookmark)){window.location.hash!=""?this.goToId(window.location.hash.replace("#event-","")):this._updateHashBookmark(this.current_id);let t=this;window.addEventListener("hashchange",function(){window.location.hash.indexOf("#event-")==0&&t.goToId(window.location.hash.replace("#event-",""))},!1)}}_updateHashBookmark(t){if(t){var i="#event-"+t.toString();window.history.replaceState(null,"Browsing TimelineJS",i),this.fire("hash_updated",{unique_id:this.current_id,hashbookmark:"#event-"+t.toString()},this)}}zoomIn(){this._timenav.zoomIn()}zoomOut(){this._timenav.zoomOut()}setZoom(t){this._timenav.setZoom(t)}goToId(t){this.current_id!=t&&(this.current_id=t,this._timenav.goToId(this.current_id),this._storyslider.goToId(this.current_id,!1,!0),this.fire("change",{unique_id:this.current_id},this))}goTo(t){if(!(t<0))try{this.config.title?t===0?this.goToId(this.config.title.unique_id):this.goToId(this.config.events[t-1].unique_id):this.goToId(this.config.events[t].unique_id)}catch{return}}goToStart(){this.goTo(0)}goToEnd(){var t=this.config.events.length-1;this.goTo(this.config.title?t+1:t)}goToPrev(){this.goTo(this._getSlideIndex(this.current_id)-1),this.focusContainer()}goToNext(){this.goTo(this._getSlideIndex(this.current_id)+1),this.focusContainer()}add(t){var i=this.config.addEvent(t),r=this._getEventIndex(i),s=this.config.events[r];this._storyslider.createSlide(s,this.config.title?r+1:r),this._storyslider._updateDrawSlides(),this._timenav.createMarker(s,r),this._timenav._updateDrawTimeline(!1),this.fire("added",{unique_id:i})}remove(t){if(t>=0&&t<this.config.events.length){this.config.events[t].unique_id==this.current_id&&(t<this.config.events.length-1?this.goTo(t+1):this.goTo(t-1));var i=this.config.events.splice(t,1);delete this.config.event_dict[i[0].unique_id],this._storyslider.destroySlide(this.config.title?t+1:t),this._storyslider._updateDrawSlides(),this._timenav.destroyMarker(t),this._timenav._updateDrawTimeline(!1),this.fire("removed",{unique_id:i[0].unique_id})}}removeId(t){this.remove(this._getEventIndex(t))}getData(t){if(this.config.title){if(t==0)return this.config.title;if(t>0&&t<=this.config.events.length)return this.config.events[t-1]}else if(t>=0&&t<this.config.events.length)return this.config.events[t];return null}getDataById(t){return this.getData(this._getSlideIndex(t))}getSlide(t){return t>=0&&t<this._storyslider._slides.length?this._storyslider._slides[t]:null}getSlideById(t){return this.getSlide(this._getSlideIndex(t))}getCurrentSlide(){return this.getSlideById(this.current_id)}updateDisplay(){this.ready?this._updateDisplay():gi("updateDisplay called but timeline is not in ready state")}focusContainer(){this._el.container.focus()}_initGoogleAnalytics(){(function(t,i,r,s,u,d,l){t.GoogleAnalyticsObject=u,t[u]=t[u]||function(){(t[u].q=t[u].q||[]).push(arguments)},t[u].l=1*new Date,d=i.createElement(r),l=i.getElementsByTagName(r)[0],d.async=1,d.src=s,l.parentNode.insertBefore(d,l)})(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create",this.options.ga_property_id,"auto"),ga("set","anonymizeIp",!0)}_initAnalytics(){if(this.options.ga_property_id!==null){this._initGoogleAnalytics(),ga("send","pageview");var t=this.options.track_events;for(let r=0;r<t.length;r++){var i=t[r];this.addEventListener(i,function(s){ga("send","event",s.type,"clicked")})}}}}Ss(DP,_l,Ts);function SQ(e){return{display_date:e.toLocaleDateString("en-US",{timeZone:"UTC",day:"2-digit",month:"2-digit",year:"numeric"}),year:e.getUTCFullYear(),month:e.getUTCMonth()+1,day:e.getUTCDate()}}function G2(e){const t=typeof e=="string"?Number.parseInt(e):e,i=new Date(t*1e3);return SQ(i)}function TQ(e){const t=r=>`<li>${r}</li>`,i=r=>{var s;return`<div class="previewEntry"><strong>${r.label}:</strong><ul>${((s=r.entries)==null?void 0:s.map(t).join(""))??""}</ul></div>`};return e.map(i).join("")}function EQ(e){var l,m;if(!((l=e.dates)!=null&&l.length))return null;const t=e.dates[0].dateAsset[0],i=G2(t.start.numeric),r=(m=t.end)!=null&&m.numeric?G2(t.end.numeric):void 0,s=`<a href="/defaultinstance/asset/viewAsset/${e.objectId}">${e.title}</a>`,u=e.entries?TQ(e.entries):"",d=e.primaryHandlerThumbnail2x?{thumbnail:e.primaryHandlerThumbnail2x,url:e.primaryHandlerThumbnail2x}:void 0;return{start_date:i,...r&&{end_date:r},text:{headline:s,text:u},media:d}}function IQ(e){return e.map(EQ).filter(t=>t!==null)}const LP=e=>(ao("data-v-c023243c"),e=e(),oo(),e),CQ={class:"search-results-timeline"},AQ={key:0,class:"flex flex-col items-center justify-center py-16 gap-4"},MQ=LP(()=>de("h2",{class:"text-2xl font-medium"},"No Timeline Events",-1)),kQ=LP(()=>de("p",null,"The loaded results don't have dates, so we can't make a timeline.",-1)),PQ=rt({__name:"SearchResultsTimeline",props:{totalResults:{},matches:{},status:{}},emits:["loadMore"],setup(e){const t=e,i=Re([]),r=Re(null),s=Re(null);function u(d){const l=d.cloneNode(!0);return d.parentNode.replaceChild(l,d),l}return Fn(()=>{i.value=IQ(t.matches),i.value.length&&(r.value=new DP("timeline-embed",{events:i.value},{timenav_position:"bottom",timenav_height_percentage:50,start_at_end:!0}))}),Wi(()=>{s.value&&(s.value.innerHTML="",u(s.value))}),(d,l)=>(V(),pe("div",CQ,[i.value.length?tt("",!0):(V(),pe("div",AQ,[MQ,kQ,d.matches.length<d.totalResults?(V(),je(ai,{key:0,onClick:l[0]||(l[0]=m=>d.$emit("loadMore"))},{default:Ce(()=>[Mt(" Load More "),d.status==="fetching"?(V(),je(No,{key:0,class:"w-4 h-4 ml-2"})):tt("",!0)]),_:1})):tt("",!0)])),de("div",{id:"timeline-embed",ref_key:"timelineEmbed",ref:s},null,512)]))}});const J1=sn(PQ,[["__scopeId","data-v-c023243c"]]);function DQ(e){return e.locations?e.locations.flatMap(t=>t.entries?t.entries.map(i=>i.loc?{lng:i.loc.coordinates[0],lat:i.loc.coordinates[1]}:null):[]).filter(t=>t!==null):[]}const Kg=e=>(t,i)=>e(t,i),LQ=e=>{const t=e.map(u=>u.lng).reduce(Kg(Math.min),1/0),i=e.map(cv("lat")).reduce(Kg(Math.min),1/0),r=e.map(cv("lng")).reduce(Kg(Math.max),-1/0),s=e.map(cv("lat")).reduce(Kg(Math.max),-1/0);return[[t,i],[r,s]]};function OQ(e){const[[t,i],[r,s]]=e;return{lng:(t+r)/2,lat:(i+s)/2}}const RQ={class:"search-results-map mb-16"},FQ={key:0,class:"flex flex-col items-center justify-center py-16 gap-4"},$Q=de("h2",{class:"text-2xl font-medium"},"No Locations",-1),zQ=de("p",null,"The loaded results don't have locations, so we can't make a map.",-1),BQ={class:"my-2"},NQ={key:0,class:"inline-flex items-baseline flex-wrap m-0"},jQ={class:"text-xs uppercase"},UQ={class:"text-sm"},Q1=rt({__name:"SearchResultsMap",props:{totalResults:{},matches:{},status:{}},emits:["loadMore"],setup(e){const t=e,i=ic(()=>Za(()=>Promise.resolve().then(()=>B1),void 0)),r=ic(()=>Za(()=>import("./MapMarker-53f700ab.js"),[])),s=ic(()=>Za(()=>import("./MapPopup-f51732c6.js"),["assets/MapPopup-f51732c6.js","assets/MapPopup-56628758.css"]));function u(g){return typeof g.title=="string"?g.title:Array.isArray(g.title)&&g.title.length>0?g.title[0]:"(No Title)"}const d=Le(()=>t.matches.reduce((g,x)=>{const w=DQ(x);if(!w.length)return g;const I=hl(x.objectId),C=x.primaryHandlerId?yc(x.primaryHandlerId):null,A=u(x),L=w.map($=>({id:`${x.objectId}-${$.lng}-${$.lat}`,assetUrl:I,title:A,imgSrc:C,entries:x.entries??[],...$}));return g.concat(L)},[])),l=Le(()=>{const g=d.value.map(x=>({lng:x.lng,lat:x.lat}));return LQ(g)}),m=Le(()=>OQ(l.value));return(g,x)=>(V(),pe("div",RQ,[d.value.length?tt("",!0):(V(),pe("div",FQ,[$Q,zQ,g.matches.length<(g.totalResults??1/0)?(V(),je(ai,{key:0,onClick:x[0]||(x[0]=w=>g.$emit("loadMore"))},{default:Ce(()=>[Mt(" Load More "),g.status==="fetching"?(V(),je(No,{key:0,class:"w-4 h-4 ml-2"})):tt("",!0)]),_:1})):tt("",!0)])),as(ye(ce(i),{zoom:10,mapStyle:"light",apiKey:ce(si).arcgis.apiKey,bounds:l.value,center:m.value,mapContainerClass:"!h-[50vh]"},{default:Ce(()=>[(V(!0),pe(Nt,null,$n(d.value,w=>(V(),je(ce(r),{id:w.id,key:w.id,lng:w.lng,lat:w.lat},{default:Ce(()=>[ye(ce(s),null,{default:Ce(()=>[ye(os,{to:w.assetUrl},{default:Ce(()=>[w.imgSrc?(V(),je(Mu,{key:0,src:w.imgSrc,alt:w.title,class:"h-8 w-8 sm:h-16 sm:w-16 object-cover rounded-md overflow-hidden border"},null,8,["src","alt"])):tt("",!0)]),_:2},1032,["to"]),de("h1",BQ,[ye(os,{to:w.assetUrl},{default:Ce(()=>[Mt(xt(w.title),1)]),_:2},1032,["to"])]),w.entries?(V(),pe("dl",NQ,[(V(!0),pe(Nt,null,$n(w.entries,(I,C)=>{var A;return V(),pe("div",{key:C,class:"inline-flex items-baseline gap-x-2 flex-wrap text-neutral-400 group-hover:text-blue-700 group-focus:text-blue-700"},[de("dt",jQ,xt((I==null?void 0:I.label)||"Item"),1),de("dd",UQ,xt((A=I.entries)==null?void 0:A.join(", ")),1)])}),128))])):tt("",!0)]),_:2},1024)]),_:2},1032,["id","lng","lat"]))),128))]),_:1},8,["apiKey","bounds","center"]),[[sa,d.value.length>0]])]))}});function W2(e){return e!==null&&typeof e=="object"&&"constructor"in e&&e.constructor===Object}function ew(e={},t={}){Object.keys(t).forEach(i=>{typeof e[i]>"u"?e[i]=t[i]:W2(t[i])&&W2(e[i])&&Object.keys(t[i]).length>0&&ew(e[i],t[i])})}const OP={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function ho(){const e=typeof document<"u"?document:{};return ew(e,OP),e}const VQ={document:OP,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(e){return typeof setTimeout>"u"?(e(),null):setTimeout(e,0)},cancelAnimationFrame(e){typeof setTimeout>"u"||clearTimeout(e)}};function Es(){const e=typeof window<"u"?window:{};return ew(e,VQ),e}function HQ(e){const t=e;Object.keys(t).forEach(i=>{try{t[i]=null}catch{}try{delete t[i]}catch{}})}function Jv(e,t=0){return setTimeout(e,t)}function Qv(){return Date.now()}function GQ(e){const t=Es();let i;return t.getComputedStyle&&(i=t.getComputedStyle(e,null)),!i&&e.currentStyle&&(i=e.currentStyle),i||(i=e.style),i}function WQ(e,t="x"){const i=Es();let r,s,u;const d=GQ(e);return i.WebKitCSSMatrix?(s=d.transform||d.webkitTransform,s.split(",").length>6&&(s=s.split(", ").map(l=>l.replace(",",".")).join(", ")),u=new i.WebKitCSSMatrix(s==="none"?"":s)):(u=d.MozTransform||d.OTransform||d.MsTransform||d.msTransform||d.transform||d.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=u.toString().split(",")),t==="x"&&(i.WebKitCSSMatrix?s=u.m41:r.length===16?s=parseFloat(r[12]):s=parseFloat(r[4])),t==="y"&&(i.WebKitCSSMatrix?s=u.m42:r.length===16?s=parseFloat(r[13]):s=parseFloat(r[5])),s||0}function Qf(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function qQ(e){return typeof window<"u"&&typeof window.HTMLElement<"u"?e instanceof HTMLElement:e&&(e.nodeType===1||e.nodeType===11)}function Xs(...e){const t=Object(e[0]),i=["__proto__","constructor","prototype"];for(let r=1;r<e.length;r+=1){const s=e[r];if(s!=null&&!qQ(s)){const u=Object.keys(Object(s)).filter(d=>i.indexOf(d)<0);for(let d=0,l=u.length;d<l;d+=1){const m=u[d],g=Object.getOwnPropertyDescriptor(s,m);g!==void 0&&g.enumerable&&(Qf(t[m])&&Qf(s[m])?s[m].__swiper__?t[m]=s[m]:Xs(t[m],s[m]):!Qf(t[m])&&Qf(s[m])?(t[m]={},s[m].__swiper__?t[m]=s[m]:Xs(t[m],s[m])):t[m]=s[m])}}}return t}function Xg(e,t,i){e.style.setProperty(t,i)}function RP({swiper:e,targetPosition:t,side:i}){const r=Es(),s=-e.translate;let u=null,d;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const m=t>s?"next":"prev",g=(w,I)=>m==="next"&&w>=I||m==="prev"&&w<=I,x=()=>{d=new Date().getTime(),u===null&&(u=d);const w=Math.max(Math.min((d-u)/l,1),0),I=.5-Math.cos(w*Math.PI)/2;let C=s+I*(t-s);if(g(C,t)&&(C=t),e.wrapperEl.scrollTo({[i]:C}),g(C,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:C})}),r.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=r.requestAnimationFrame(x)};x()}function Ka(e,t=""){return[...e.children].filter(i=>i.matches(t))}function ey(e,t=[]){const i=document.createElement(e);return i.classList.add(...Array.isArray(t)?t:[t]),i}function FP(e){const t=Es(),i=ho(),r=e.getBoundingClientRect(),s=i.body,u=e.clientTop||s.clientTop||0,d=e.clientLeft||s.clientLeft||0,l=e===t?t.scrollY:e.scrollTop,m=e===t?t.scrollX:e.scrollLeft;return{top:r.top+l-u,left:r.left+m-d}}function ZQ(e,t){const i=[];for(;e.previousElementSibling;){const r=e.previousElementSibling;t?r.matches(t)&&i.push(r):i.push(r),e=r}return i}function KQ(e,t){const i=[];for(;e.nextElementSibling;){const r=e.nextElementSibling;t?r.matches(t)&&i.push(r):i.push(r),e=r}return i}function Ql(e,t){return Es().getComputedStyle(e,null).getPropertyValue(t)}function xx(e){let t=e,i;if(t){for(i=0;(t=t.previousSibling)!==null;)t.nodeType===1&&(i+=1);return i}}function wx(e,t){const i=[];let r=e.parentElement;for(;r;)t?r.matches(t)&&i.push(r):i.push(r),r=r.parentElement;return i}function q2(e,t,i){const r=Es();return i?e[t==="width"?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-left":"margin-bottom")):e.offsetWidth}let eb;function XQ(){const e=Es(),t=ho();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}function $P(){return eb||(eb=XQ()),eb}let tb;function YQ({userAgent:e}={}){const t=$P(),i=Es(),r=i.navigator.platform,s=e||i.navigator.userAgent,u={ios:!1,android:!1},d=i.screen.width,l=i.screen.height,m=s.match(/(Android);?[\s\/]+([\d.]+)?/);let g=s.match(/(iPad).*OS\s([\d_]+)/);const x=s.match(/(iPod)(.*OS\s([\d_]+))?/),w=!g&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),I=r==="Win32";let C=r==="MacIntel";const A=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!g&&C&&t.touch&&A.indexOf(`${d}x${l}`)>=0&&(g=s.match(/(Version)\/([\d.]+)/),g||(g=[0,1,"13_0_0"]),C=!1),m&&!I&&(u.os="android",u.android=!0),(g||w||x)&&(u.os="ios",u.ios=!0),u}function JQ(e={}){return tb||(tb=YQ(e)),tb}let nb;function QQ(){const e=Es();let t=!1;function i(){const r=e.navigator.userAgent.toLowerCase();return r.indexOf("safari")>=0&&r.indexOf("chrome")<0&&r.indexOf("android")<0}if(i()){const r=String(e.navigator.userAgent);if(r.includes("Version/")){const[s,u]=r.split("Version/")[1].split(" ")[0].split(".").map(d=>Number(d));t=s<16||s===16&&u<2}}return{isSafari:t||i(),needPerspectiveFix:t,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}function eee(){return nb||(nb=QQ()),nb}function tee({swiper:e,on:t,emit:i}){const r=Es();let s=null,u=null;const d=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(s=new ResizeObserver(x=>{u=r.requestAnimationFrame(()=>{const{width:w,height:I}=e;let C=w,A=I;x.forEach(({contentBoxSize:L,contentRect:$,target:F})=>{F&&F!==e.el||(C=$?$.width:(L[0]||L).inlineSize,A=$?$.height:(L[0]||L).blockSize)}),(C!==w||A!==I)&&d()})}),s.observe(e.el))},m=()=>{u&&r.cancelAnimationFrame(u),s&&s.unobserve&&e.el&&(s.unobserve(e.el),s=null)},g=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof r.ResizeObserver<"u"){l();return}r.addEventListener("resize",d),r.addEventListener("orientationchange",g)}),t("destroy",()=>{m(),r.removeEventListener("resize",d),r.removeEventListener("orientationchange",g)})}function nee({swiper:e,extendParams:t,on:i,emit:r}){const s=[],u=Es(),d=(g,x={})=>{const w=u.MutationObserver||u.WebkitMutationObserver,I=new w(C=>{if(e.__preventObserver__)return;if(C.length===1){r("observerUpdate",C[0]);return}const A=function(){r("observerUpdate",C[0])};u.requestAnimationFrame?u.requestAnimationFrame(A):u.setTimeout(A,0)});I.observe(g,{attributes:typeof x.attributes>"u"?!0:x.attributes,childList:typeof x.childList>"u"?!0:x.childList,characterData:typeof x.characterData>"u"?!0:x.characterData}),s.push(I)},l=()=>{if(e.params.observer){if(e.params.observeParents){const g=wx(e.el);for(let x=0;x<g.length;x+=1)d(g[x])}d(e.el,{childList:e.params.observeSlideChildren}),d(e.wrapperEl,{attributes:!1})}},m=()=>{s.forEach(g=>{g.disconnect()}),s.splice(0,s.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",l),i("destroy",m)}const iee={on(e,t,i){const r=this;if(!r.eventsListeners||r.destroyed||typeof t!="function")return r;const s=i?"unshift":"push";return e.split(" ").forEach(u=>{r.eventsListeners[u]||(r.eventsListeners[u]=[]),r.eventsListeners[u][s](t)}),r},once(e,t,i){const r=this;if(!r.eventsListeners||r.destroyed||typeof t!="function")return r;function s(...u){r.off(e,s),s.__emitterProxy&&delete s.__emitterProxy,t.apply(r,u)}return s.__emitterProxy=t,r.on(e,s,i)},onAny(e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const r=t?"unshift":"push";return i.eventsAnyListeners.indexOf(e)<0&&i.eventsAnyListeners[r](e),i},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsAnyListeners)return t;const i=t.eventsAnyListeners.indexOf(e);return i>=0&&t.eventsAnyListeners.splice(i,1),t},off(e,t){const i=this;return!i.eventsListeners||i.destroyed||!i.eventsListeners||e.split(" ").forEach(r=>{typeof t>"u"?i.eventsListeners[r]=[]:i.eventsListeners[r]&&i.eventsListeners[r].forEach((s,u)=>{(s===t||s.__emitterProxy&&s.__emitterProxy===t)&&i.eventsListeners[r].splice(u,1)})}),i},emit(...e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsListeners)return t;let i,r,s;return typeof e[0]=="string"||Array.isArray(e[0])?(i=e[0],r=e.slice(1,e.length),s=t):(i=e[0].events,r=e[0].data,s=e[0].context||t),r.unshift(s),(Array.isArray(i)?i:i.split(" ")).forEach(d=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(l=>{l.apply(s,[d,...r])}),t.eventsListeners&&t.eventsListeners[d]&&t.eventsListeners[d].forEach(l=>{l.apply(s,r)})}),t}};function ree(){const e=this;let t,i;const r=e.el;typeof e.params.width<"u"&&e.params.width!==null?t=e.params.width:t=r.clientWidth,typeof e.params.height<"u"&&e.params.height!==null?i=e.params.height:i=r.clientHeight,!(t===0&&e.isHorizontal()||i===0&&e.isVertical())&&(t=t-parseInt(Ql(r,"padding-left")||0,10)-parseInt(Ql(r,"padding-right")||0,10),i=i-parseInt(Ql(r,"padding-top")||0,10)-parseInt(Ql(r,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(i)&&(i=0),Object.assign(e,{width:t,height:i,size:e.isHorizontal()?t:i}))}function see(){const e=this;function t(B){return e.isHorizontal()?B:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[B]}function i(B,ie){return parseFloat(B.getPropertyValue(t(ie))||0)}const r=e.params,{wrapperEl:s,slidesEl:u,size:d,rtlTranslate:l,wrongRTL:m}=e,g=e.virtual&&r.virtual.enabled,x=g?e.virtual.slides.length:e.slides.length,w=Ka(u,`.${e.params.slideClass}, swiper-slide`),I=g?e.virtual.slides.length:w.length;let C=[];const A=[],L=[];let $=r.slidesOffsetBefore;typeof $=="function"&&($=r.slidesOffsetBefore.call(e));let F=r.slidesOffsetAfter;typeof F=="function"&&(F=r.slidesOffsetAfter.call(e));const z=e.snapGrid.length,ee=e.slidesGrid.length;let H=r.spaceBetween,Q=-$,ae=0,be=0;if(typeof d>"u")return;typeof H=="string"&&H.indexOf("%")>=0?H=parseFloat(H.replace("%",""))/100*d:typeof H=="string"&&(H=parseFloat(H)),e.virtualSize=-H,w.forEach(B=>{l?B.style.marginLeft="":B.style.marginRight="",B.style.marginBottom="",B.style.marginTop=""}),r.centeredSlides&&r.cssMode&&(Xg(s,"--swiper-centered-offset-before",""),Xg(s,"--swiper-centered-offset-after",""));const te=r.grid&&r.grid.rows>1&&e.grid;te&&e.grid.initSlides(I);let G;const U=r.slidesPerView==="auto"&&r.breakpoints&&Object.keys(r.breakpoints).filter(B=>typeof r.breakpoints[B].slidesPerView<"u").length>0;for(let B=0;B<I;B+=1){G=0;let ie;if(w[B]&&(ie=w[B]),te&&e.grid.updateSlide(B,ie,I,t),!(w[B]&&Ql(ie,"display")==="none")){if(r.slidesPerView==="auto"){U&&(w[B].style[t("width")]="");const X=getComputedStyle(ie),ne=ie.style.transform,Ee=ie.style.webkitTransform;if(ne&&(ie.style.transform="none"),Ee&&(ie.style.webkitTransform="none"),r.roundLengths)G=e.isHorizontal()?q2(ie,"width",!0):q2(ie,"height",!0);else{const Ie=i(X,"width"),Xe=i(X,"padding-left"),lt=i(X,"padding-right"),st=i(X,"margin-left"),$t=i(X,"margin-right"),It=X.getPropertyValue("box-sizing");if(It&&It==="border-box")G=Ie+st+$t;else{const{clientWidth:nt,offsetWidth:et}=ie;G=Ie+Xe+lt+st+$t+(et-nt)}}ne&&(ie.style.transform=ne),Ee&&(ie.style.webkitTransform=Ee),r.roundLengths&&(G=Math.floor(G))}else G=(d-(r.slidesPerView-1)*H)/r.slidesPerView,r.roundLengths&&(G=Math.floor(G)),w[B]&&(w[B].style[t("width")]=`${G}px`);w[B]&&(w[B].swiperSlideSize=G),L.push(G),r.centeredSlides?(Q=Q+G/2+ae/2+H,ae===0&&B!==0&&(Q=Q-d/2-H),B===0&&(Q=Q-d/2-H),Math.abs(Q)<1/1e3&&(Q=0),r.roundLengths&&(Q=Math.floor(Q)),be%r.slidesPerGroup===0&&C.push(Q),A.push(Q)):(r.roundLengths&&(Q=Math.floor(Q)),(be-Math.min(e.params.slidesPerGroupSkip,be))%e.params.slidesPerGroup===0&&C.push(Q),A.push(Q),Q=Q+G+H),e.virtualSize+=G+H,ae=G,be+=1}}if(e.virtualSize=Math.max(e.virtualSize,d)+F,l&&m&&(r.effect==="slide"||r.effect==="coverflow")&&(s.style.width=`${e.virtualSize+H}px`),r.setWrapperSize&&(s.style[t("width")]=`${e.virtualSize+H}px`),te&&e.grid.updateWrapperSize(G,C,t),!r.centeredSlides){const B=[];for(let ie=0;ie<C.length;ie+=1){let X=C[ie];r.roundLengths&&(X=Math.floor(X)),C[ie]<=e.virtualSize-d&&B.push(X)}C=B,Math.floor(e.virtualSize-d)-Math.floor(C[C.length-1])>1&&C.push(e.virtualSize-d)}if(g&&r.loop){const B=L[0]+H;if(r.slidesPerGroup>1){const ie=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/r.slidesPerGroup),X=B*r.slidesPerGroup;for(let ne=0;ne<ie;ne+=1)C.push(C[C.length-1]+X)}for(let ie=0;ie<e.virtual.slidesBefore+e.virtual.slidesAfter;ie+=1)r.slidesPerGroup===1&&C.push(C[C.length-1]+B),A.push(A[A.length-1]+B),e.virtualSize+=B}if(C.length===0&&(C=[0]),H!==0){const B=e.isHorizontal()&&l?"marginLeft":t("marginRight");w.filter((ie,X)=>!r.cssMode||r.loop?!0:X!==w.length-1).forEach(ie=>{ie.style[B]=`${H}px`})}if(r.centeredSlides&&r.centeredSlidesBounds){let B=0;L.forEach(X=>{B+=X+(H||0)}),B-=H;const ie=B-d;C=C.map(X=>X<0?-$:X>ie?ie+F:X)}if(r.centerInsufficientSlides){let B=0;if(L.forEach(ie=>{B+=ie+(H||0)}),B-=H,B<d){const ie=(d-B)/2;C.forEach((X,ne)=>{C[ne]=X-ie}),A.forEach((X,ne)=>{A[ne]=X+ie})}}if(Object.assign(e,{slides:w,snapGrid:C,slidesGrid:A,slidesSizesGrid:L}),r.centeredSlides&&r.cssMode&&!r.centeredSlidesBounds){Xg(s,"--swiper-centered-offset-before",`${-C[0]}px`),Xg(s,"--swiper-centered-offset-after",`${e.size/2-L[L.length-1]/2}px`);const B=-e.snapGrid[0],ie=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(X=>X+B),e.slidesGrid=e.slidesGrid.map(X=>X+ie)}if(I!==x&&e.emit("slidesLengthChange"),C.length!==z&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),A.length!==ee&&e.emit("slidesGridLengthChange"),r.watchSlidesProgress&&e.updateSlidesOffset(),!g&&!r.cssMode&&(r.effect==="slide"||r.effect==="fade")){const B=`${r.containerModifierClass}backface-hidden`,ie=e.el.classList.contains(B);I<=r.maxBackfaceHiddenSlides?ie||e.el.classList.add(B):ie&&e.el.classList.remove(B)}}function aee(e){const t=this,i=[],r=t.virtual&&t.params.virtual.enabled;let s=0,u;typeof e=="number"?t.setTransition(e):e===!0&&t.setTransition(t.params.speed);const d=l=>r?t.slides[t.getSlideIndexByData(l)]:t.slides[l];if(t.params.slidesPerView!=="auto"&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach(l=>{i.push(l)});else for(u=0;u<Math.ceil(t.params.slidesPerView);u+=1){const l=t.activeIndex+u;if(l>t.slides.length&&!r)break;i.push(d(l))}else i.push(d(t.activeIndex));for(u=0;u<i.length;u+=1)if(typeof i[u]<"u"){const l=i[u].offsetHeight;s=l>s?l:s}(s||s===0)&&(t.wrapperEl.style.height=`${s}px`)}function oee(){const e=this,t=e.slides,i=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let r=0;r<t.length;r+=1)t[r].swiperSlideOffset=(e.isHorizontal()?t[r].offsetLeft:t[r].offsetTop)-i-e.cssOverflowAdjustment()}function lee(e=this&&this.translate||0){const t=this,i=t.params,{slides:r,rtlTranslate:s,snapGrid:u}=t;if(r.length===0)return;typeof r[0].swiperSlideOffset>"u"&&t.updateSlidesOffset();let d=-e;s&&(d=e),r.forEach(m=>{m.classList.remove(i.slideVisibleClass)}),t.visibleSlidesIndexes=[],t.visibleSlides=[];let l=i.spaceBetween;typeof l=="string"&&l.indexOf("%")>=0?l=parseFloat(l.replace("%",""))/100*t.size:typeof l=="string"&&(l=parseFloat(l));for(let m=0;m<r.length;m+=1){const g=r[m];let x=g.swiperSlideOffset;i.cssMode&&i.centeredSlides&&(x-=r[0].swiperSlideOffset);const w=(d+(i.centeredSlides?t.minTranslate():0)-x)/(g.swiperSlideSize+l),I=(d-u[0]+(i.centeredSlides?t.minTranslate():0)-x)/(g.swiperSlideSize+l),C=-(d-x),A=C+t.slidesSizesGrid[m];(C>=0&&C<t.size-1||A>1&&A<=t.size||C<=0&&A>=t.size)&&(t.visibleSlides.push(g),t.visibleSlidesIndexes.push(m),r[m].classList.add(i.slideVisibleClass)),g.progress=s?-w:w,g.originalProgress=s?-I:I}}function cee(e){const t=this;if(typeof e>"u"){const x=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*x||0}const i=t.params,r=t.maxTranslate()-t.minTranslate();let{progress:s,isBeginning:u,isEnd:d,progressLoop:l}=t;const m=u,g=d;if(r===0)s=0,u=!0,d=!0;else{s=(e-t.minTranslate())/r;const x=Math.abs(e-t.minTranslate())<1,w=Math.abs(e-t.maxTranslate())<1;u=x||s<=0,d=w||s>=1,x&&(s=0),w&&(s=1)}if(i.loop){const x=t.getSlideIndexByData(0),w=t.getSlideIndexByData(t.slides.length-1),I=t.slidesGrid[x],C=t.slidesGrid[w],A=t.slidesGrid[t.slidesGrid.length-1],L=Math.abs(e);L>=I?l=(L-I)/A:l=(L+A-C)/A,l>1&&(l-=1)}Object.assign(t,{progress:s,progressLoop:l,isBeginning:u,isEnd:d}),(i.watchSlidesProgress||i.centeredSlides&&i.autoHeight)&&t.updateSlidesProgress(e),u&&!m&&t.emit("reachBeginning toEdge"),d&&!g&&t.emit("reachEnd toEdge"),(m&&!u||g&&!d)&&t.emit("fromEdge"),t.emit("progress",s)}function uee(){const e=this,{slides:t,params:i,slidesEl:r,activeIndex:s}=e,u=e.virtual&&i.virtual.enabled,d=m=>Ka(r,`.${i.slideClass}${m}, swiper-slide${m}`)[0];t.forEach(m=>{m.classList.remove(i.slideActiveClass,i.slideNextClass,i.slidePrevClass)});let l;if(u)if(i.loop){let m=s-e.virtual.slidesBefore;m<0&&(m=e.virtual.slides.length+m),m>=e.virtual.slides.length&&(m-=e.virtual.slides.length),l=d(`[data-swiper-slide-index="${m}"]`)}else l=d(`[data-swiper-slide-index="${s}"]`);else l=t[s];if(l){l.classList.add(i.slideActiveClass);let m=KQ(l,`.${i.slideClass}, swiper-slide`)[0];i.loop&&!m&&(m=t[0]),m&&m.classList.add(i.slideNextClass);let g=ZQ(l,`.${i.slideClass}, swiper-slide`)[0];i.loop&&!g===0&&(g=t[t.length-1]),g&&g.classList.add(i.slidePrevClass)}e.emitSlidesClasses()}const vv=(e,t)=>{if(!e||e.destroyed||!e.params)return;const i=()=>e.isElement?"swiper-slide":`.${e.params.slideClass}`,r=t.closest(i());if(r){const s=r.querySelector(`.${e.params.lazyPreloaderClass}`);s&&s.remove()}},Z2=(e,t)=>{if(!e.slides[t])return;const i=e.slides[t].querySelector('[loading="lazy"]');i&&i.removeAttribute("loading")},Sx=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const i=e.slides.length;if(!i||!t||t<0)return;t=Math.min(t,i);const r=e.params.slidesPerView==="auto"?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),s=e.activeIndex,u=s+r-1;if(e.params.rewind)for(let d=s-t;d<=u+t;d+=1){const l=(d%i+i)%i;l!==s&&l>u&&Z2(e,l)}else for(let d=Math.max(u-t,0);d<=Math.min(u+t,i-1);d+=1)d!==s&&d>u&&Z2(e,d)};function dee(e){const{slidesGrid:t,params:i}=e,r=e.rtlTranslate?e.translate:-e.translate;let s;for(let u=0;u<t.length;u+=1)typeof t[u+1]<"u"?r>=t[u]&&r<t[u+1]-(t[u+1]-t[u])/2?s=u:r>=t[u]&&r<t[u+1]&&(s=u+1):r>=t[u]&&(s=u);return i.normalizeSlideIndex&&(s<0||typeof s>"u")&&(s=0),s}function hee(e){const t=this,i=t.rtlTranslate?t.translate:-t.translate,{snapGrid:r,params:s,activeIndex:u,realIndex:d,snapIndex:l}=t;let m=e,g;const x=I=>{let C=I-t.virtual.slidesBefore;return C<0&&(C=t.virtual.slides.length+C),C>=t.virtual.slides.length&&(C-=t.virtual.slides.length),C};if(typeof m>"u"&&(m=dee(t)),r.indexOf(i)>=0)g=r.indexOf(i);else{const I=Math.min(s.slidesPerGroupSkip,m);g=I+Math.floor((m-I)/s.slidesPerGroup)}if(g>=r.length&&(g=r.length-1),m===u){g!==l&&(t.snapIndex=g,t.emit("snapIndexChange")),t.params.loop&&t.virtual&&t.params.virtual.enabled&&(t.realIndex=x(m));return}let w;t.virtual&&s.virtual.enabled&&s.loop?w=x(m):t.slides[m]?w=parseInt(t.slides[m].getAttribute("data-swiper-slide-index")||m,10):w=m,Object.assign(t,{previousSnapIndex:l,snapIndex:g,previousRealIndex:d,realIndex:w,previousIndex:u,activeIndex:m}),t.initialized&&Sx(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),d!==w&&t.emit("realIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&t.emit("slideChange")}function fee(e){const t=this,i=t.params,r=e.closest(`.${i.slideClass}, swiper-slide`);let s=!1,u;if(r){for(let d=0;d<t.slides.length;d+=1)if(t.slides[d]===r){s=!0,u=d;break}}if(r&&s)t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=u;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}i.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}const pee={updateSize:ree,updateSlides:see,updateAutoHeight:aee,updateSlidesOffset:oee,updateSlidesProgress:lee,updateProgress:cee,updateSlidesClasses:uee,updateActiveIndex:hee,updateClickedSlide:fee};function mee(e=this.isHorizontal()?"x":"y"){const t=this,{params:i,rtlTranslate:r,translate:s,wrapperEl:u}=t;if(i.virtualTranslate)return r?-s:s;if(i.cssMode)return s;let d=WQ(u,e);return d+=t.cssOverflowAdjustment(),r&&(d=-d),d||0}function gee(e,t){const i=this,{rtlTranslate:r,params:s,wrapperEl:u,progress:d}=i;let l=0,m=0;const g=0;i.isHorizontal()?l=r?-e:e:m=e,s.roundLengths&&(l=Math.floor(l),m=Math.floor(m)),i.previousTranslate=i.translate,i.translate=i.isHorizontal()?l:m,s.cssMode?u[i.isHorizontal()?"scrollLeft":"scrollTop"]=i.isHorizontal()?-l:-m:s.virtualTranslate||(i.isHorizontal()?l-=i.cssOverflowAdjustment():m-=i.cssOverflowAdjustment(),u.style.transform=`translate3d(${l}px, ${m}px, ${g}px)`);let x;const w=i.maxTranslate()-i.minTranslate();w===0?x=0:x=(e-i.minTranslate())/w,x!==d&&i.updateProgress(e),i.emit("setTranslate",i.translate,t)}function vee(){return-this.snapGrid[0]}function _ee(){return-this.snapGrid[this.snapGrid.length-1]}function yee(e=0,t=this.params.speed,i=!0,r=!0,s){const u=this,{params:d,wrapperEl:l}=u;if(u.animating&&d.preventInteractionOnTransition)return!1;const m=u.minTranslate(),g=u.maxTranslate();let x;if(r&&e>m?x=m:r&&e<g?x=g:x=e,u.updateProgress(x),d.cssMode){const w=u.isHorizontal();if(t===0)l[w?"scrollLeft":"scrollTop"]=-x;else{if(!u.support.smoothScroll)return RP({swiper:u,targetPosition:-x,side:w?"left":"top"}),!0;l.scrollTo({[w?"left":"top"]:-x,behavior:"smooth"})}return!0}return t===0?(u.setTransition(0),u.setTranslate(x),i&&(u.emit("beforeTransitionStart",t,s),u.emit("transitionEnd"))):(u.setTransition(t),u.setTranslate(x),i&&(u.emit("beforeTransitionStart",t,s),u.emit("transitionStart")),u.animating||(u.animating=!0,u.onTranslateToWrapperTransitionEnd||(u.onTranslateToWrapperTransitionEnd=function(I){!u||u.destroyed||I.target===this&&(u.wrapperEl.removeEventListener("transitionend",u.onTranslateToWrapperTransitionEnd),u.onTranslateToWrapperTransitionEnd=null,delete u.onTranslateToWrapperTransitionEnd,i&&u.emit("transitionEnd"))}),u.wrapperEl.addEventListener("transitionend",u.onTranslateToWrapperTransitionEnd))),!0}const bee={getTranslate:mee,setTranslate:gee,minTranslate:vee,maxTranslate:_ee,translateTo:yee};function xee(e,t){const i=this;i.params.cssMode||(i.wrapperEl.style.transitionDuration=`${e}ms`),i.emit("setTransition",e,t)}function zP({swiper:e,runCallbacks:t,direction:i,step:r}){const{activeIndex:s,previousIndex:u}=e;let d=i;if(d||(s>u?d="next":s<u?d="prev":d="reset"),e.emit(`transition${r}`),t&&s!==u){if(d==="reset"){e.emit(`slideResetTransition${r}`);return}e.emit(`slideChangeTransition${r}`),d==="next"?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`)}}function wee(e=!0,t){const i=this,{params:r}=i;r.cssMode||(r.autoHeight&&i.updateAutoHeight(),zP({swiper:i,runCallbacks:e,direction:t,step:"Start"}))}function See(e=!0,t){const i=this,{params:r}=i;i.animating=!1,!r.cssMode&&(i.setTransition(0),zP({swiper:i,runCallbacks:e,direction:t,step:"End"}))}const Tee={setTransition:xee,transitionStart:wee,transitionEnd:See};function Eee(e=0,t=this.params.speed,i=!0,r,s){typeof e=="string"&&(e=parseInt(e,10));const u=this;let d=e;d<0&&(d=0);const{params:l,snapGrid:m,slidesGrid:g,previousIndex:x,activeIndex:w,rtlTranslate:I,wrapperEl:C,enabled:A}=u;if(u.animating&&l.preventInteractionOnTransition||!A&&!r&&!s)return!1;const L=Math.min(u.params.slidesPerGroupSkip,d);let $=L+Math.floor((d-L)/u.params.slidesPerGroup);$>=m.length&&($=m.length-1);const F=-m[$];if(l.normalizeSlideIndex)for(let ee=0;ee<g.length;ee+=1){const H=-Math.floor(F*100),Q=Math.floor(g[ee]*100),ae=Math.floor(g[ee+1]*100);typeof g[ee+1]<"u"?H>=Q&&H<ae-(ae-Q)/2?d=ee:H>=Q&&H<ae&&(d=ee+1):H>=Q&&(d=ee)}if(u.initialized&&d!==w&&(!u.allowSlideNext&&F<u.translate&&F<u.minTranslate()||!u.allowSlidePrev&&F>u.translate&&F>u.maxTranslate()&&(w||0)!==d))return!1;d!==(x||0)&&i&&u.emit("beforeSlideChangeStart"),u.updateProgress(F);let z;if(d>w?z="next":d<w?z="prev":z="reset",I&&-F===u.translate||!I&&F===u.translate)return u.updateActiveIndex(d),l.autoHeight&&u.updateAutoHeight(),u.updateSlidesClasses(),l.effect!=="slide"&&u.setTranslate(F),z!=="reset"&&(u.transitionStart(i,z),u.transitionEnd(i,z)),!1;if(l.cssMode){const ee=u.isHorizontal(),H=I?F:-F;if(t===0){const Q=u.virtual&&u.params.virtual.enabled;Q&&(u.wrapperEl.style.scrollSnapType="none",u._immediateVirtual=!0),Q&&!u._cssModeVirtualInitialSet&&u.params.initialSlide>0?(u._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{C[ee?"scrollLeft":"scrollTop"]=H})):C[ee?"scrollLeft":"scrollTop"]=H,Q&&requestAnimationFrame(()=>{u.wrapperEl.style.scrollSnapType="",u._immediateVirtual=!1})}else{if(!u.support.smoothScroll)return RP({swiper:u,targetPosition:H,side:ee?"left":"top"}),!0;C.scrollTo({[ee?"left":"top"]:H,behavior:"smooth"})}return!0}return u.setTransition(t),u.setTranslate(F),u.updateActiveIndex(d),u.updateSlidesClasses(),u.emit("beforeTransitionStart",t,r),u.transitionStart(i,z),t===0?u.transitionEnd(i,z):u.animating||(u.animating=!0,u.onSlideToWrapperTransitionEnd||(u.onSlideToWrapperTransitionEnd=function(H){!u||u.destroyed||H.target===this&&(u.wrapperEl.removeEventListener("transitionend",u.onSlideToWrapperTransitionEnd),u.onSlideToWrapperTransitionEnd=null,delete u.onSlideToWrapperTransitionEnd,u.transitionEnd(i,z))}),u.wrapperEl.addEventListener("transitionend",u.onSlideToWrapperTransitionEnd)),!0}function Iee(e=0,t=this.params.speed,i=!0,r){typeof e=="string"&&(e=parseInt(e,10));const s=this;let u=e;return s.params.loop&&(s.virtual&&s.params.virtual.enabled?u=u+s.virtual.slidesBefore:u=s.getSlideIndexByData(u)),s.slideTo(u,t,i,r)}function Cee(e=this.params.speed,t=!0,i){const r=this,{enabled:s,params:u,animating:d}=r;if(!s)return r;let l=u.slidesPerGroup;u.slidesPerView==="auto"&&u.slidesPerGroup===1&&u.slidesPerGroupAuto&&(l=Math.max(r.slidesPerViewDynamic("current",!0),1));const m=r.activeIndex<u.slidesPerGroupSkip?1:l,g=r.virtual&&u.virtual.enabled;if(u.loop){if(d&&!g&&u.loopPreventsSliding)return!1;r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft}return u.rewind&&r.isEnd?r.slideTo(0,e,t,i):r.slideTo(r.activeIndex+m,e,t,i)}function Aee(e=this.params.speed,t=!0,i){const r=this,{params:s,snapGrid:u,slidesGrid:d,rtlTranslate:l,enabled:m,animating:g}=r;if(!m)return r;const x=r.virtual&&s.virtual.enabled;if(s.loop){if(g&&!x&&s.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}const w=l?r.translate:-r.translate;function I(F){return F<0?-Math.floor(Math.abs(F)):Math.floor(F)}const C=I(w),A=u.map(F=>I(F));let L=u[A.indexOf(C)-1];if(typeof L>"u"&&s.cssMode){let F;u.forEach((z,ee)=>{C>=z&&(F=ee)}),typeof F<"u"&&(L=u[F>0?F-1:F])}let $=0;if(typeof L<"u"&&($=d.indexOf(L),$<0&&($=r.activeIndex-1),s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&($=$-r.slidesPerViewDynamic("previous",!0)+1,$=Math.max($,0))),s.rewind&&r.isBeginning){const F=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(F,e,t,i)}return r.slideTo($,e,t,i)}function Mee(e=this.params.speed,t=!0,i){const r=this;return r.slideTo(r.activeIndex,e,t,i)}function kee(e=this.params.speed,t=!0,i,r=.5){const s=this;let u=s.activeIndex;const d=Math.min(s.params.slidesPerGroupSkip,u),l=d+Math.floor((u-d)/s.params.slidesPerGroup),m=s.rtlTranslate?s.translate:-s.translate;if(m>=s.snapGrid[l]){const g=s.snapGrid[l],x=s.snapGrid[l+1];m-g>(x-g)*r&&(u+=s.params.slidesPerGroup)}else{const g=s.snapGrid[l-1],x=s.snapGrid[l];m-g<=(x-g)*r&&(u-=s.params.slidesPerGroup)}return u=Math.max(u,0),u=Math.min(u,s.slidesGrid.length-1),s.slideTo(u,e,t,i)}function Pee(){const e=this,{params:t,slidesEl:i}=e,r=t.slidesPerView==="auto"?e.slidesPerViewDynamic():t.slidesPerView;let s=e.clickedIndex,u;const d=e.isElement?"swiper-slide":`.${t.slideClass}`;if(t.loop){if(e.animating)return;u=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?s<e.loopedSlides-r/2||s>e.slides.length-e.loopedSlides+r/2?(e.loopFix(),s=e.getSlideIndex(Ka(i,`${d}[data-swiper-slide-index="${u}"]`)[0]),Jv(()=>{e.slideTo(s)})):e.slideTo(s):s>e.slides.length-r?(e.loopFix(),s=e.getSlideIndex(Ka(i,`${d}[data-swiper-slide-index="${u}"]`)[0]),Jv(()=>{e.slideTo(s)})):e.slideTo(s)}else e.slideTo(s)}const Dee={slideTo:Eee,slideToLoop:Iee,slideNext:Cee,slidePrev:Aee,slideReset:Mee,slideToClosest:kee,slideToClickedSlide:Pee};function Lee(e){const t=this,{params:i,slidesEl:r}=t;if(!i.loop||t.virtual&&t.params.virtual.enabled)return;Ka(r,`.${i.slideClass}, swiper-slide`).forEach((u,d)=>{u.setAttribute("data-swiper-slide-index",d)}),t.loopFix({slideRealIndex:e,direction:i.centeredSlides?void 0:"next"})}function Oee({slideRealIndex:e,slideTo:t=!0,direction:i,setTranslate:r,activeSlideIndex:s,byController:u,byMousewheel:d}={}){const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:m,allowSlidePrev:g,allowSlideNext:x,slidesEl:w,params:I}=l;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&I.virtual.enabled){t&&(!I.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):I.centeredSlides&&l.snapIndex<I.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=g,l.allowSlideNext=x,l.emit("loopFix");return}const C=I.slidesPerView==="auto"?l.slidesPerViewDynamic():Math.ceil(parseFloat(I.slidesPerView,10));let A=I.loopedSlides||C;A%I.slidesPerGroup!==0&&(A+=I.slidesPerGroup-A%I.slidesPerGroup),l.loopedSlides=A;const L=[],$=[];let F=l.activeIndex;typeof s>"u"?s=l.getSlideIndex(l.slides.filter(ae=>ae.classList.contains(I.slideActiveClass))[0]):F=s;const z=i==="next"||!i,ee=i==="prev"||!i;let H=0,Q=0;if(s<A){H=Math.max(A-s,I.slidesPerGroup);for(let ae=0;ae<A-s;ae+=1){const be=ae-Math.floor(ae/m.length)*m.length;L.push(m.length-be-1)}}else if(s>l.slides.length-A*2){Q=Math.max(s-(l.slides.length-A*2),I.slidesPerGroup);for(let ae=0;ae<Q;ae+=1){const be=ae-Math.floor(ae/m.length)*m.length;$.push(be)}}if(ee&&L.forEach(ae=>{l.slides[ae].swiperLoopMoveDOM=!0,w.prepend(l.slides[ae]),l.slides[ae].swiperLoopMoveDOM=!1}),z&&$.forEach(ae=>{l.slides[ae].swiperLoopMoveDOM=!0,w.append(l.slides[ae]),l.slides[ae].swiperLoopMoveDOM=!1}),l.recalcSlides(),I.slidesPerView==="auto"&&l.updateSlides(),I.watchSlidesProgress&&l.updateSlidesOffset(),t){if(L.length>0&&ee)if(typeof e>"u"){const ae=l.slidesGrid[F],te=l.slidesGrid[F+H]-ae;d?l.setTranslate(l.translate-te):(l.slideTo(F+H,0,!1,!0),r&&(l.touches[l.isHorizontal()?"startX":"startY"]+=te))}else r&&l.slideToLoop(e,0,!1,!0);else if($.length>0&&z)if(typeof e>"u"){const ae=l.slidesGrid[F],te=l.slidesGrid[F-Q]-ae;d?l.setTranslate(l.translate-te):(l.slideTo(F-Q,0,!1,!0),r&&(l.touches[l.isHorizontal()?"startX":"startY"]+=te))}else l.slideToLoop(e,0,!1,!0)}if(l.allowSlidePrev=g,l.allowSlideNext=x,l.controller&&l.controller.control&&!u){const ae={slideRealIndex:e,slideTo:!1,direction:i,setTranslate:r,activeSlideIndex:s,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(be=>{!be.destroyed&&be.params.loop&&be.loopFix(ae)}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix(ae)}l.emit("loopFix")}function Ree(){const e=this,{params:t,slidesEl:i}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const r=[];e.slides.forEach(s=>{const u=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;r[u]=s}),e.slides.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),r.forEach(s=>{i.append(s)}),e.recalcSlides(),e.slideTo(e.realIndex,0)}const Fee={loopCreate:Lee,loopFix:Oee,loopDestroy:Ree};function $ee(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const i=t.params.touchEventsTarget==="container"?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),i.style.cursor="move",i.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1})}function zee(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e[e.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1}))}const Bee={setGrabCursor:$ee,unsetGrabCursor:zee};function Nee(e,t=this){function i(r){if(!r||r===ho()||r===Es())return null;r.assignedSlot&&(r=r.assignedSlot);const s=r.closest(e);return!s&&!r.getRootNode?null:s||i(r.getRootNode().host)}return i(t)}function jee(e){const t=this,i=ho(),r=Es(),s=t.touchEventsData;s.evCache.push(e);const{params:u,touches:d,enabled:l}=t;if(!l||!u.simulateTouch&&e.pointerType==="mouse"||t.animating&&u.preventInteractionOnTransition)return;!t.animating&&u.cssMode&&u.loop&&t.loopFix();let m=e;m.originalEvent&&(m=m.originalEvent);let g=m.target;if(u.touchEventsTarget==="wrapper"&&!t.wrapperEl.contains(g)||"which"in m&&m.which===3||"button"in m&&m.button>0||s.isTouched&&s.isMoved)return;const x=!!u.noSwipingClass&&u.noSwipingClass!=="",w=e.composedPath?e.composedPath():e.path;x&&m.target&&m.target.shadowRoot&&w&&(g=w[0]);const I=u.noSwipingSelector?u.noSwipingSelector:`.${u.noSwipingClass}`,C=!!(m.target&&m.target.shadowRoot);if(u.noSwiping&&(C?Nee(I,g):g.closest(I))){t.allowClick=!0;return}if(u.swipeHandler&&!g.closest(u.swipeHandler))return;d.currentX=m.pageX,d.currentY=m.pageY;const A=d.currentX,L=d.currentY,$=u.edgeSwipeDetection||u.iOSEdgeSwipeDetection,F=u.edgeSwipeThreshold||u.iOSEdgeSwipeThreshold;if($&&(A<=F||A>=r.innerWidth-F))if($==="prevent")e.preventDefault();else return;Object.assign(s,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),d.startX=A,d.startY=L,s.touchStartTime=Qv(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,u.threshold>0&&(s.allowThresholdMove=!1);let z=!0;g.matches(s.focusableElements)&&(z=!1,g.nodeName==="SELECT"&&(s.isTouched=!1)),i.activeElement&&i.activeElement.matches(s.focusableElements)&&i.activeElement!==g&&i.activeElement.blur();const ee=z&&t.allowTouchMove&&u.touchStartPreventDefault;(u.touchStartForcePreventDefault||ee)&&!g.isContentEditable&&m.preventDefault(),t.params.freeMode&&t.params.freeMode.enabled&&t.freeMode&&t.animating&&!u.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",m)}function Uee(e){const t=ho(),i=this,r=i.touchEventsData,{params:s,touches:u,rtlTranslate:d,enabled:l}=i;if(!l||!s.simulateTouch&&e.pointerType==="mouse")return;let m=e;if(m.originalEvent&&(m=m.originalEvent),!r.isTouched){r.startMoving&&r.isScrolling&&i.emit("touchMoveOpposite",m);return}const g=r.evCache.findIndex(ae=>ae.pointerId===m.pointerId);g>=0&&(r.evCache[g]=m);const x=r.evCache.length>1?r.evCache[0]:m,w=x.pageX,I=x.pageY;if(m.preventedByNestedSwiper){u.startX=w,u.startY=I;return}if(!i.allowTouchMove){m.target.matches(r.focusableElements)||(i.allowClick=!1),r.isTouched&&(Object.assign(u,{startX:w,startY:I,prevX:i.touches.currentX,prevY:i.touches.currentY,currentX:w,currentY:I}),r.touchStartTime=Qv());return}if(s.touchReleaseOnEdges&&!s.loop){if(i.isVertical()){if(I<u.startY&&i.translate<=i.maxTranslate()||I>u.startY&&i.translate>=i.minTranslate()){r.isTouched=!1,r.isMoved=!1;return}}else if(w<u.startX&&i.translate<=i.maxTranslate()||w>u.startX&&i.translate>=i.minTranslate())return}if(t.activeElement&&m.target===t.activeElement&&m.target.matches(r.focusableElements)){r.isMoved=!0,i.allowClick=!1;return}if(r.allowTouchCallbacks&&i.emit("touchMove",m),m.targetTouches&&m.targetTouches.length>1)return;u.currentX=w,u.currentY=I;const C=u.currentX-u.startX,A=u.currentY-u.startY;if(i.params.threshold&&Math.sqrt(C**2+A**2)<i.params.threshold)return;if(typeof r.isScrolling>"u"){let ae;i.isHorizontal()&&u.currentY===u.startY||i.isVertical()&&u.currentX===u.startX?r.isScrolling=!1:C*C+A*A>=25&&(ae=Math.atan2(Math.abs(A),Math.abs(C))*180/Math.PI,r.isScrolling=i.isHorizontal()?ae>s.touchAngle:90-ae>s.touchAngle)}if(r.isScrolling&&i.emit("touchMoveOpposite",m),typeof r.startMoving>"u"&&(u.currentX!==u.startX||u.currentY!==u.startY)&&(r.startMoving=!0),r.isScrolling||i.zoom&&i.params.zoom&&i.params.zoom.enabled&&r.evCache.length>1){r.isTouched=!1;return}if(!r.startMoving)return;i.allowClick=!1,!s.cssMode&&m.cancelable&&m.preventDefault(),s.touchMoveStopPropagation&&!s.nested&&m.stopPropagation();let L=i.isHorizontal()?C:A,$=i.isHorizontal()?u.currentX-u.previousX:u.currentY-u.previousY;s.oneWayMovement&&(L=Math.abs(L)*(d?1:-1),$=Math.abs($)*(d?1:-1)),u.diff=L,L*=s.touchRatio,d&&(L=-L,$=-$);const F=i.touchesDirection;i.swipeDirection=L>0?"prev":"next",i.touchesDirection=$>0?"prev":"next";const z=i.params.loop&&!s.cssMode;if(!r.isMoved){if(z&&i.loopFix({direction:i.swipeDirection}),r.startTranslate=i.getTranslate(),i.setTransition(0),i.animating){const ae=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});i.wrapperEl.dispatchEvent(ae)}r.allowMomentumBounce=!1,s.grabCursor&&(i.allowSlideNext===!0||i.allowSlidePrev===!0)&&i.setGrabCursor(!0),i.emit("sliderFirstMove",m)}let ee;r.isMoved&&F!==i.touchesDirection&&z&&Math.abs(L)>=1&&(i.loopFix({direction:i.swipeDirection,setTranslate:!0}),ee=!0),i.emit("sliderMove",m),r.isMoved=!0,r.currentTranslate=L+r.startTranslate;let H=!0,Q=s.resistanceRatio;if(s.touchReleaseOnEdges&&(Q=0),L>0?(z&&!ee&&r.currentTranslate>(s.centeredSlides?i.minTranslate()-i.size/2:i.minTranslate())&&i.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>i.minTranslate()&&(H=!1,s.resistance&&(r.currentTranslate=i.minTranslate()-1+(-i.minTranslate()+r.startTranslate+L)**Q))):L<0&&(z&&!ee&&r.currentTranslate<(s.centeredSlides?i.maxTranslate()+i.size/2:i.maxTranslate())&&i.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:i.slides.length-(s.slidesPerView==="auto"?i.slidesPerViewDynamic():Math.ceil(parseFloat(s.slidesPerView,10)))}),r.currentTranslate<i.maxTranslate()&&(H=!1,s.resistance&&(r.currentTranslate=i.maxTranslate()+1-(i.maxTranslate()-r.startTranslate-L)**Q))),H&&(m.preventedByNestedSwiper=!0),!i.allowSlideNext&&i.swipeDirection==="next"&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!i.allowSlidePrev&&i.swipeDirection==="prev"&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),!i.allowSlidePrev&&!i.allowSlideNext&&(r.currentTranslate=r.startTranslate),s.threshold>0)if(Math.abs(L)>s.threshold||r.allowThresholdMove){if(!r.allowThresholdMove){r.allowThresholdMove=!0,u.startX=u.currentX,u.startY=u.currentY,r.currentTranslate=r.startTranslate,u.diff=i.isHorizontal()?u.currentX-u.startX:u.currentY-u.startY;return}}else{r.currentTranslate=r.startTranslate;return}!s.followFinger||s.cssMode||((s.freeMode&&s.freeMode.enabled&&i.freeMode||s.watchSlidesProgress)&&(i.updateActiveIndex(),i.updateSlidesClasses()),i.params.freeMode&&s.freeMode.enabled&&i.freeMode&&i.freeMode.onTouchMove(),i.updateProgress(r.currentTranslate),i.setTranslate(r.currentTranslate))}function Vee(e){const t=this,i=t.touchEventsData,r=i.evCache.findIndex(ee=>ee.pointerId===e.pointerId);if(r>=0&&i.evCache.splice(r,1),["pointercancel","pointerout","pointerleave"].includes(e.type)&&!(e.type==="pointercancel"&&(t.browser.isSafari||t.browser.isWebView)))return;const{params:s,touches:u,rtlTranslate:d,slidesGrid:l,enabled:m}=t;if(!m||!s.simulateTouch&&e.pointerType==="mouse")return;let g=e;if(g.originalEvent&&(g=g.originalEvent),i.allowTouchCallbacks&&t.emit("touchEnd",g),i.allowTouchCallbacks=!1,!i.isTouched){i.isMoved&&s.grabCursor&&t.setGrabCursor(!1),i.isMoved=!1,i.startMoving=!1;return}s.grabCursor&&i.isMoved&&i.isTouched&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!1);const x=Qv(),w=x-i.touchStartTime;if(t.allowClick){const ee=g.path||g.composedPath&&g.composedPath();t.updateClickedSlide(ee&&ee[0]||g.target),t.emit("tap click",g),w<300&&x-i.lastClickTime<300&&t.emit("doubleTap doubleClick",g)}if(i.lastClickTime=Qv(),Jv(()=>{t.destroyed||(t.allowClick=!0)}),!i.isTouched||!i.isMoved||!t.swipeDirection||u.diff===0||i.currentTranslate===i.startTranslate){i.isTouched=!1,i.isMoved=!1,i.startMoving=!1;return}i.isTouched=!1,i.isMoved=!1,i.startMoving=!1;let I;if(s.followFinger?I=d?t.translate:-t.translate:I=-i.currentTranslate,s.cssMode)return;if(t.params.freeMode&&s.freeMode.enabled){t.freeMode.onTouchEnd({currentPos:I});return}let C=0,A=t.slidesSizesGrid[0];for(let ee=0;ee<l.length;ee+=ee<s.slidesPerGroupSkip?1:s.slidesPerGroup){const H=ee<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;typeof l[ee+H]<"u"?I>=l[ee]&&I<l[ee+H]&&(C=ee,A=l[ee+H]-l[ee]):I>=l[ee]&&(C=ee,A=l[l.length-1]-l[l.length-2])}let L=null,$=null;s.rewind&&(t.isBeginning?$=t.params.virtual&&t.params.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(L=0));const F=(I-l[C])/A,z=C<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;if(w>s.longSwipesMs){if(!s.longSwipes){t.slideTo(t.activeIndex);return}t.swipeDirection==="next"&&(F>=s.longSwipesRatio?t.slideTo(s.rewind&&t.isEnd?L:C+z):t.slideTo(C)),t.swipeDirection==="prev"&&(F>1-s.longSwipesRatio?t.slideTo(C+z):$!==null&&F<0&&Math.abs(F)>s.longSwipesRatio?t.slideTo($):t.slideTo(C))}else{if(!s.shortSwipes){t.slideTo(t.activeIndex);return}t.navigation&&(g.target===t.navigation.nextEl||g.target===t.navigation.prevEl)?g.target===t.navigation.nextEl?t.slideTo(C+z):t.slideTo(C):(t.swipeDirection==="next"&&t.slideTo(L!==null?L:C+z),t.swipeDirection==="prev"&&t.slideTo($!==null?$:C))}}function K2(){const e=this,{params:t,el:i}=e;if(i&&i.offsetWidth===0)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:s,snapGrid:u}=e,d=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const l=d&&t.loop;(t.slidesPerView==="auto"||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides&&!l?e.slideTo(e.slides.length-1,0,!1,!0):e.params.loop&&!d?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout(()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()},500)),e.allowSlidePrev=s,e.allowSlideNext=r,e.params.watchOverflow&&u!==e.snapGrid&&e.checkOverflow()}function Hee(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function Gee(){const e=this,{wrapperEl:t,rtlTranslate:i,enabled:r}=e;if(!r)return;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,e.translate===0&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();let s;const u=e.maxTranslate()-e.minTranslate();u===0?s=0:s=(e.translate-e.minTranslate())/u,s!==e.progress&&e.updateProgress(i?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function Wee(e){const t=this;vv(t,e.target),!(t.params.cssMode||t.params.slidesPerView!=="auto"&&!t.params.autoHeight)&&t.update()}let X2=!1;function qee(){}const BP=(e,t)=>{const i=ho(),{params:r,el:s,wrapperEl:u,device:d}=e,l=!!r.nested,m=t==="on"?"addEventListener":"removeEventListener",g=t;s[m]("pointerdown",e.onTouchStart,{passive:!1}),i[m]("pointermove",e.onTouchMove,{passive:!1,capture:l}),i[m]("pointerup",e.onTouchEnd,{passive:!0}),i[m]("pointercancel",e.onTouchEnd,{passive:!0}),i[m]("pointerout",e.onTouchEnd,{passive:!0}),i[m]("pointerleave",e.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&s[m]("click",e.onClick,!0),r.cssMode&&u[m]("scroll",e.onScroll),r.updateOnWindowResize?e[g](d.ios||d.android?"resize orientationchange observerUpdate":"resize observerUpdate",K2,!0):e[g]("observerUpdate",K2,!0),s[m]("load",e.onLoad,{capture:!0})};function Zee(){const e=this,t=ho(),{params:i}=e;e.onTouchStart=jee.bind(e),e.onTouchMove=Uee.bind(e),e.onTouchEnd=Vee.bind(e),i.cssMode&&(e.onScroll=Gee.bind(e)),e.onClick=Hee.bind(e),e.onLoad=Wee.bind(e),X2||(t.addEventListener("touchstart",qee),X2=!0),BP(e,"on")}function Kee(){BP(this,"off")}const Xee={attachEvents:Zee,detachEvents:Kee},Y2=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;function Yee(){const e=this,{realIndex:t,initialized:i,params:r,el:s}=e,u=r.breakpoints;if(!u||u&&Object.keys(u).length===0)return;const d=e.getBreakpoint(u,e.params.breakpointsBase,e.el);if(!d||e.currentBreakpoint===d)return;const m=(d in u?u[d]:void 0)||e.originalParams,g=Y2(e,r),x=Y2(e,m),w=r.enabled;g&&!x?(s.classList.remove(`${r.containerModifierClass}grid`,`${r.containerModifierClass}grid-column`),e.emitContainerClasses()):!g&&x&&(s.classList.add(`${r.containerModifierClass}grid`),(m.grid.fill&&m.grid.fill==="column"||!m.grid.fill&&r.grid.fill==="column")&&s.classList.add(`${r.containerModifierClass}grid-column`),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(L=>{const $=r[L]&&r[L].enabled,F=m[L]&&m[L].enabled;$&&!F&&e[L].disable(),!$&&F&&e[L].enable()});const I=m.direction&&m.direction!==r.direction,C=r.loop&&(m.slidesPerView!==r.slidesPerView||I);I&&i&&e.changeDirection(),Xs(e.params,m);const A=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),w&&!A?e.disable():!w&&A&&e.enable(),e.currentBreakpoint=d,e.emit("_beforeBreakpoint",m),C&&i&&(e.loopDestroy(),e.loopCreate(t),e.updateSlides()),e.emit("breakpoint",m)}function Jee(e,t="window",i){if(!e||t==="container"&&!i)return;let r=!1;const s=Es(),u=t==="window"?s.innerHeight:i.clientHeight,d=Object.keys(e).map(l=>{if(typeof l=="string"&&l.indexOf("@")===0){const m=parseFloat(l.substr(1));return{value:u*m,point:l}}return{value:l,point:l}});d.sort((l,m)=>parseInt(l.value,10)-parseInt(m.value,10));for(let l=0;l<d.length;l+=1){const{point:m,value:g}=d[l];t==="window"?s.matchMedia(`(min-width: ${g}px)`).matches&&(r=m):g<=i.clientWidth&&(r=m)}return r||"max"}const Qee={setBreakpoint:Yee,getBreakpoint:Jee};function ete(e,t){const i=[];return e.forEach(r=>{typeof r=="object"?Object.keys(r).forEach(s=>{r[s]&&i.push(t+s)}):typeof r=="string"&&i.push(t+r)}),i}function tte(){const e=this,{classNames:t,params:i,rtl:r,el:s,device:u}=e,d=ete(["initialized",i.direction,{"free-mode":e.params.freeMode&&i.freeMode.enabled},{autoheight:i.autoHeight},{rtl:r},{grid:i.grid&&i.grid.rows>1},{"grid-column":i.grid&&i.grid.rows>1&&i.grid.fill==="column"},{android:u.android},{ios:u.ios},{"css-mode":i.cssMode},{centered:i.cssMode&&i.centeredSlides},{"watch-progress":i.watchSlidesProgress}],i.containerModifierClass);t.push(...d),s.classList.add(...t),e.emitContainerClasses()}function nte(){const e=this,{el:t,classNames:i}=e;t.classList.remove(...i),e.emitContainerClasses()}const ite={addClasses:tte,removeClasses:nte};function rte(){const e=this,{isLocked:t,params:i}=e,{slidesOffsetBefore:r}=i;if(r){const s=e.slides.length-1,u=e.slidesGrid[s]+e.slidesSizesGrid[s]+r*2;e.isLocked=e.size>u}else e.isLocked=e.snapGrid.length===1;i.allowSlideNext===!0&&(e.allowSlideNext=!e.isLocked),i.allowSlidePrev===!0&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}const ste={checkOverflow:rte},J2={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function ate(e,t){return function(r={}){const s=Object.keys(r)[0],u=r[s];if(typeof u!="object"||u===null){Xs(t,r);return}if(["navigation","pagination","scrollbar"].indexOf(s)>=0&&e[s]===!0&&(e[s]={auto:!0}),!(s in e&&"enabled"in u)){Xs(t,r);return}e[s]===!0&&(e[s]={enabled:!0}),typeof e[s]=="object"&&!("enabled"in e[s])&&(e[s].enabled=!0),e[s]||(e[s]={enabled:!1}),Xs(t,r)}}const ib={eventsEmitter:iee,update:pee,translate:bee,transition:Tee,slide:Dee,loop:Fee,grabCursor:Bee,events:Xee,breakpoints:Qee,checkOverflow:ste,classes:ite},rb={};let Wp=class il{constructor(...t){let i,r;t.length===1&&t[0].constructor&&Object.prototype.toString.call(t[0]).slice(8,-1)==="Object"?r=t[0]:[i,r]=t,r||(r={}),r=Xs({},r),i&&!r.el&&(r.el=i);const s=ho();if(r.el&&typeof r.el=="string"&&s.querySelectorAll(r.el).length>1){const m=[];return s.querySelectorAll(r.el).forEach(g=>{const x=Xs({},r,{el:g});m.push(new il(x))}),m}const u=this;u.__swiper__=!0,u.support=$P(),u.device=JQ({userAgent:r.userAgent}),u.browser=eee(),u.eventsListeners={},u.eventsAnyListeners=[],u.modules=[...u.__modules__],r.modules&&Array.isArray(r.modules)&&u.modules.push(...r.modules);const d={};u.modules.forEach(m=>{m({params:r,swiper:u,extendParams:ate(r,d),on:u.on.bind(u),once:u.once.bind(u),off:u.off.bind(u),emit:u.emit.bind(u)})});const l=Xs({},J2,d);return u.params=Xs({},l,rb,r),u.originalParams=Xs({},u.params),u.passedParams=Xs({},r),u.params&&u.params.on&&Object.keys(u.params.on).forEach(m=>{u.on(m,u.params.on[m])}),u.params&&u.params.onAny&&u.onAny(u.params.onAny),Object.assign(u,{enabled:u.params.enabled,el:i,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return u.params.direction==="horizontal"},isVertical(){return u.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:u.params.allowSlideNext,allowSlidePrev:u.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:u.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:u.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),u.emit("_swiper"),u.params.init&&u.init(),u}getSlideIndex(t){const{slidesEl:i,params:r}=this,s=Ka(i,`.${r.slideClass}, swiper-slide`),u=xx(s[0]);return xx(t)-u}getSlideIndexByData(t){return this.getSlideIndex(this.slides.filter(i=>i.getAttribute("data-swiper-slide-index")*1===t)[0])}recalcSlides(){const t=this,{slidesEl:i,params:r}=t;t.slides=Ka(i,`.${r.slideClass}, swiper-slide`)}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;t.enabled&&(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,i){const r=this;t=Math.min(Math.max(t,0),1);const s=r.minTranslate(),d=(r.maxTranslate()-s)*t+s;r.translateTo(d,typeof i>"u"?0:i),r.updateActiveIndex(),r.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const i=t.el.className.split(" ").filter(r=>r.indexOf("swiper")===0||r.indexOf(t.params.containerModifierClass)===0);t.emit("_containerClasses",i.join(" "))}getSlideClasses(t){const i=this;return i.destroyed?"":t.className.split(" ").filter(r=>r.indexOf("swiper-slide")===0||r.indexOf(i.params.slideClass)===0).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const i=[];t.slides.forEach(r=>{const s=t.getSlideClasses(r);i.push({slideEl:r,classNames:s}),t.emit("_slideClass",r,s)}),t.emit("_slideClasses",i)}slidesPerViewDynamic(t="current",i=!1){const r=this,{params:s,slides:u,slidesGrid:d,slidesSizesGrid:l,size:m,activeIndex:g}=r;let x=1;if(s.centeredSlides){let w=u[g].swiperSlideSize,I;for(let C=g+1;C<u.length;C+=1)u[C]&&!I&&(w+=u[C].swiperSlideSize,x+=1,w>m&&(I=!0));for(let C=g-1;C>=0;C-=1)u[C]&&!I&&(w+=u[C].swiperSlideSize,x+=1,w>m&&(I=!0))}else if(t==="current")for(let w=g+1;w<u.length;w+=1)(i?d[w]+l[w]-d[g]<m:d[w]-d[g]<m)&&(x+=1);else for(let w=g-1;w>=0;w-=1)d[g]-d[w]<m&&(x+=1);return x}update(){const t=this;if(!t||t.destroyed)return;const{snapGrid:i,params:r}=t;r.breakpoints&&t.setBreakpoint(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach(d=>{d.complete&&vv(t,d)}),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses();function s(){const d=t.rtlTranslate?t.translate*-1:t.translate,l=Math.min(Math.max(d,t.maxTranslate()),t.minTranslate());t.setTranslate(l),t.updateActiveIndex(),t.updateSlidesClasses()}let u;if(t.params.freeMode&&t.params.freeMode.enabled)s(),t.params.autoHeight&&t.updateAutoHeight();else{if((t.params.slidesPerView==="auto"||t.params.slidesPerView>1)&&t.isEnd&&!t.params.centeredSlides){const d=t.virtual&&t.params.virtual.enabled?t.virtual.slides:t.slides;u=t.slideTo(d.length-1,0,!1,!0)}else u=t.slideTo(t.activeIndex,0,!1,!0);u||s()}r.watchOverflow&&i!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,i=!0){const r=this,s=r.params.direction;return t||(t=s==="horizontal"?"vertical":"horizontal"),t===s||t!=="horizontal"&&t!=="vertical"||(r.el.classList.remove(`${r.params.containerModifierClass}${s}`),r.el.classList.add(`${r.params.containerModifierClass}${t}`),r.emitContainerClasses(),r.params.direction=t,r.slides.forEach(u=>{t==="vertical"?u.style.width="":u.style.height=""}),r.emit("changeDirection"),i&&r.update()),r}changeLanguageDirection(t){const i=this;i.rtl&&t==="rtl"||!i.rtl&&t==="ltr"||(i.rtl=t==="rtl",i.rtlTranslate=i.params.direction==="horizontal"&&i.rtl,i.rtl?(i.el.classList.add(`${i.params.containerModifierClass}rtl`),i.el.dir="rtl"):(i.el.classList.remove(`${i.params.containerModifierClass}rtl`),i.el.dir="ltr"),i.update())}mount(t){const i=this;if(i.mounted)return!0;let r=t||i.params.el;if(typeof r=="string"&&(r=document.querySelector(r)),!r)return!1;r.swiper=i,r.shadowEl&&(i.isElement=!0);const s=()=>`.${(i.params.wrapperClass||"").trim().split(" ").join(".")}`;let d=(()=>r&&r.shadowRoot&&r.shadowRoot.querySelector?r.shadowRoot.querySelector(s()):Ka(r,s())[0])();return!d&&i.params.createElements&&(d=ey("div",i.params.wrapperClass),r.append(d),Ka(r,`.${i.params.slideClass}`).forEach(l=>{d.append(l)})),Object.assign(i,{el:r,wrapperEl:d,slidesEl:i.isElement?r:d,mounted:!0,rtl:r.dir.toLowerCase()==="rtl"||Ql(r,"direction")==="rtl",rtlTranslate:i.params.direction==="horizontal"&&(r.dir.toLowerCase()==="rtl"||Ql(r,"direction")==="rtl"),wrongRTL:Ql(d,"display")==="-webkit-box"}),!0}init(t){const i=this;return i.initialized||i.mount(t)===!1||(i.emit("beforeInit"),i.params.breakpoints&&i.setBreakpoint(),i.addClasses(),i.updateSize(),i.updateSlides(),i.params.watchOverflow&&i.checkOverflow(),i.params.grabCursor&&i.enabled&&i.setGrabCursor(),i.params.loop&&i.virtual&&i.params.virtual.enabled?i.slideTo(i.params.initialSlide+i.virtual.slidesBefore,0,i.params.runCallbacksOnInit,!1,!0):i.slideTo(i.params.initialSlide,0,i.params.runCallbacksOnInit,!1,!0),i.params.loop&&i.loopCreate(),i.attachEvents(),[...i.el.querySelectorAll('[loading="lazy"]')].forEach(s=>{s.complete?vv(i,s):s.addEventListener("load",u=>{vv(i,u.target)})}),Sx(i),i.initialized=!0,Sx(i),i.emit("init"),i.emit("afterInit")),i}destroy(t=!0,i=!0){const r=this,{params:s,el:u,wrapperEl:d,slides:l}=r;return typeof r.params>"u"||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),s.loop&&r.loopDestroy(),i&&(r.removeClasses(),u.removeAttribute("style"),d.removeAttribute("style"),l&&l.length&&l.forEach(m=>{m.classList.remove(s.slideVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass),m.removeAttribute("style"),m.removeAttribute("data-swiper-slide-index")})),r.emit("destroy"),Object.keys(r.eventsListeners).forEach(m=>{r.off(m)}),t!==!1&&(r.el.swiper=null,HQ(r)),r.destroyed=!0),null}static extendDefaults(t){Xs(rb,t)}static get extendedDefaults(){return rb}static get defaults(){return J2}static installModule(t){il.prototype.__modules__||(il.prototype.__modules__=[]);const i=il.prototype.__modules__;typeof t=="function"&&i.indexOf(t)<0&&i.push(t)}static use(t){return Array.isArray(t)?(t.forEach(i=>il.installModule(i)),il):(il.installModule(t),il)}};Object.keys(ib).forEach(e=>{Object.keys(ib[e]).forEach(t=>{Wp.prototype[t]=ib[e][t]})});Wp.use([tee,nee]);function ote({swiper:e,extendParams:t,on:i,emit:r}){const s=ho(),u=Es();e.keyboard={enabled:!1},t({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}});function d(g){if(!e.enabled)return;const{rtlTranslate:x}=e;let w=g;w.originalEvent&&(w=w.originalEvent);const I=w.keyCode||w.charCode,C=e.params.keyboard.pageUpDown,A=C&&I===33,L=C&&I===34,$=I===37,F=I===39,z=I===38,ee=I===40;if(!e.allowSlideNext&&(e.isHorizontal()&&F||e.isVertical()&&ee||L)||!e.allowSlidePrev&&(e.isHorizontal()&&$||e.isVertical()&&z||A))return!1;if(!(w.shiftKey||w.altKey||w.ctrlKey||w.metaKey)&&!(s.activeElement&&s.activeElement.nodeName&&(s.activeElement.nodeName.toLowerCase()==="input"||s.activeElement.nodeName.toLowerCase()==="textarea"))){if(e.params.keyboard.onlyInViewport&&(A||L||$||F||z||ee)){let H=!1;if(wx(e.el,`.${e.params.slideClass}, swiper-slide`).length>0&&wx(e.el,`.${e.params.slideActiveClass}`).length===0)return;const Q=e.el,ae=Q.clientWidth,be=Q.clientHeight,te=u.innerWidth,G=u.innerHeight,U=FP(Q);x&&(U.left-=Q.scrollLeft);const B=[[U.left,U.top],[U.left+ae,U.top],[U.left,U.top+be],[U.left+ae,U.top+be]];for(let ie=0;ie<B.length;ie+=1){const X=B[ie];if(X[0]>=0&&X[0]<=te&&X[1]>=0&&X[1]<=G){if(X[0]===0&&X[1]===0)continue;H=!0}}if(!H)return}e.isHorizontal()?((A||L||$||F)&&(w.preventDefault?w.preventDefault():w.returnValue=!1),((L||F)&&!x||(A||$)&&x)&&e.slideNext(),((A||$)&&!x||(L||F)&&x)&&e.slidePrev()):((A||L||z||ee)&&(w.preventDefault?w.preventDefault():w.returnValue=!1),(L||ee)&&e.slideNext(),(A||z)&&e.slidePrev()),r("keyPress",I)}}function l(){e.keyboard.enabled||(s.addEventListener("keydown",d),e.keyboard.enabled=!0)}function m(){e.keyboard.enabled&&(s.removeEventListener("keydown",d),e.keyboard.enabled=!1)}i("init",()=>{e.params.keyboard.enabled&&l()}),i("destroy",()=>{e.keyboard.enabled&&m()}),Object.assign(e.keyboard,{enable:l,disable:m})}function NP(e,t,i,r){return e.params.createElements&&Object.keys(r).forEach(s=>{if(!i[s]&&i.auto===!0){let u=Ka(e.el,`.${r[s]}`)[0];u||(u=ey("div",r[s]),u.className=r[s],e.el.append(u)),i[s]=u,t[s]=u}}),i}function lte({swiper:e,extendParams:t,on:i,emit:r}){t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};const s=A=>(Array.isArray(A)||(A=[A].filter(L=>!!L)),A);function u(A){let L;return A&&typeof A=="string"&&e.isElement&&(L=e.el.shadowRoot.querySelector(A),L)?L:(A&&(typeof A=="string"&&(L=[...document.querySelectorAll(A)]),e.params.uniqueNavElements&&typeof A=="string"&&L.length>1&&e.el.querySelectorAll(A).length===1&&(L=e.el.querySelector(A))),A&&!L?A:L)}function d(A,L){const $=e.params.navigation;A=s(A),A.forEach(F=>{F&&(F.classList[L?"add":"remove"](...$.disabledClass.split(" ")),F.tagName==="BUTTON"&&(F.disabled=L),e.params.watchOverflow&&e.enabled&&F.classList[e.isLocked?"add":"remove"]($.lockClass))})}function l(){const{nextEl:A,prevEl:L}=e.navigation;if(e.params.loop){d(L,!1),d(A,!1);return}d(L,e.isBeginning&&!e.params.rewind),d(A,e.isEnd&&!e.params.rewind)}function m(A){A.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),r("navigationPrev"))}function g(A){A.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),r("navigationNext"))}function x(){const A=e.params.navigation;if(e.params.navigation=NP(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(A.nextEl||A.prevEl))return;let L=u(A.nextEl),$=u(A.prevEl);Object.assign(e.navigation,{nextEl:L,prevEl:$}),L=s(L),$=s($);const F=(z,ee)=>{z&&z.addEventListener("click",ee==="next"?g:m),!e.enabled&&z&&z.classList.add(...A.lockClass.split(" "))};L.forEach(z=>F(z,"next")),$.forEach(z=>F(z,"prev"))}function w(){let{nextEl:A,prevEl:L}=e.navigation;A=s(A),L=s(L);const $=(F,z)=>{F.removeEventListener("click",z==="next"?g:m),F.classList.remove(...e.params.navigation.disabledClass.split(" "))};A.forEach(F=>$(F,"next")),L.forEach(F=>$(F,"prev"))}i("init",()=>{e.params.navigation.enabled===!1?C():(x(),l())}),i("toEdge fromEdge lock unlock",()=>{l()}),i("destroy",()=>{w()}),i("enable disable",()=>{let{nextEl:A,prevEl:L}=e.navigation;A=s(A),L=s(L),[...A,...L].filter($=>!!$).forEach($=>$.classList[e.enabled?"remove":"add"](e.params.navigation.lockClass))}),i("click",(A,L)=>{let{nextEl:$,prevEl:F}=e.navigation;$=s($),F=s(F);const z=L.target;if(e.params.navigation.hideOnClick&&!F.includes(z)&&!$.includes(z)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===z||e.pagination.el.contains(z)))return;let ee;$.length?ee=$[0].classList.contains(e.params.navigation.hiddenClass):F.length&&(ee=F[0].classList.contains(e.params.navigation.hiddenClass)),r(ee===!0?"navigationShow":"navigationHide"),[...$,...F].filter(H=>!!H).forEach(H=>H.classList.toggle(e.params.navigation.hiddenClass))}});const I=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),x(),l()},C=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),w()};Object.assign(e.navigation,{enable:I,disable:C,update:l,init:x,destroy:w})}function sb(e=""){return`.${e.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function Q2({swiper:e,extendParams:t,on:i,emit:r}){const s=ho();let u=!1,d=null,l=null,m,g,x,w;t({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),e.scrollbar={el:null,dragEl:null};function I(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:B,rtlTranslate:ie}=e,{dragEl:X,el:ne}=B,Ee=e.params.scrollbar,Ie=e.params.loop?e.progressLoop:e.progress;let Xe=g,lt=(x-g)*Ie;ie?(lt=-lt,lt>0?(Xe=g-lt,lt=0):-lt+g>x&&(Xe=x+lt)):lt<0?(Xe=g+lt,lt=0):lt+g>x&&(Xe=x-lt),e.isHorizontal()?(X.style.transform=`translate3d(${lt}px, 0, 0)`,X.style.width=`${Xe}px`):(X.style.transform=`translate3d(0px, ${lt}px, 0)`,X.style.height=`${Xe}px`),Ee.hide&&(clearTimeout(d),ne.style.opacity=1,d=setTimeout(()=>{ne.style.opacity=0,ne.style.transitionDuration="400ms"},1e3))}function C(B){!e.params.scrollbar.el||!e.scrollbar.el||(e.scrollbar.dragEl.style.transitionDuration=`${B}ms`)}function A(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:B}=e,{dragEl:ie,el:X}=B;ie.style.width="",ie.style.height="",x=e.isHorizontal()?X.offsetWidth:X.offsetHeight,w=e.size/(e.virtualSize+e.params.slidesOffsetBefore-(e.params.centeredSlides?e.snapGrid[0]:0)),e.params.scrollbar.dragSize==="auto"?g=x*w:g=parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?ie.style.width=`${g}px`:ie.style.height=`${g}px`,w>=1?X.style.display="none":X.style.display="",e.params.scrollbar.hide&&(X.style.opacity=0),e.params.watchOverflow&&e.enabled&&B.el.classList[e.isLocked?"add":"remove"](e.params.scrollbar.lockClass)}function L(B){return e.isHorizontal()?B.clientX:B.clientY}function $(B){const{scrollbar:ie,rtlTranslate:X}=e,{el:ne}=ie;let Ee;Ee=(L(B)-FP(ne)[e.isHorizontal()?"left":"top"]-(m!==null?m:g/2))/(x-g),Ee=Math.max(Math.min(Ee,1),0),X&&(Ee=1-Ee);const Ie=e.minTranslate()+(e.maxTranslate()-e.minTranslate())*Ee;e.updateProgress(Ie),e.setTranslate(Ie),e.updateActiveIndex(),e.updateSlidesClasses()}function F(B){const ie=e.params.scrollbar,{scrollbar:X,wrapperEl:ne}=e,{el:Ee,dragEl:Ie}=X;u=!0,m=B.target===Ie?L(B)-B.target.getBoundingClientRect()[e.isHorizontal()?"left":"top"]:null,B.preventDefault(),B.stopPropagation(),ne.style.transitionDuration="100ms",Ie.style.transitionDuration="100ms",$(B),clearTimeout(l),Ee.style.transitionDuration="0ms",ie.hide&&(Ee.style.opacity=1),e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="none"),r("scrollbarDragStart",B)}function z(B){const{scrollbar:ie,wrapperEl:X}=e,{el:ne,dragEl:Ee}=ie;u&&(B.preventDefault?B.preventDefault():B.returnValue=!1,$(B),X.style.transitionDuration="0ms",ne.style.transitionDuration="0ms",Ee.style.transitionDuration="0ms",r("scrollbarDragMove",B))}function ee(B){const ie=e.params.scrollbar,{scrollbar:X,wrapperEl:ne}=e,{el:Ee}=X;u&&(u=!1,e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="",ne.style.transitionDuration=""),ie.hide&&(clearTimeout(l),l=Jv(()=>{Ee.style.opacity=0,Ee.style.transitionDuration="400ms"},1e3)),r("scrollbarDragEnd",B),ie.snapOnRelease&&e.slideToClosest())}function H(B){const{scrollbar:ie,params:X}=e,ne=ie.el;if(!ne)return;const Ee=ne,Ie=X.passiveListeners?{passive:!1,capture:!1}:!1,Xe=X.passiveListeners?{passive:!0,capture:!1}:!1;if(!Ee)return;const lt=B==="on"?"addEventListener":"removeEventListener";Ee[lt]("pointerdown",F,Ie),s[lt]("pointermove",z,Ie),s[lt]("pointerup",ee,Xe)}function Q(){!e.params.scrollbar.el||!e.scrollbar.el||H("on")}function ae(){!e.params.scrollbar.el||!e.scrollbar.el||H("off")}function be(){const{scrollbar:B,el:ie}=e;e.params.scrollbar=NP(e,e.originalParams.scrollbar,e.params.scrollbar,{el:"swiper-scrollbar"});const X=e.params.scrollbar;if(!X.el)return;let ne;typeof X.el=="string"&&e.isElement&&(ne=e.el.shadowRoot.querySelector(X.el)),!ne&&typeof X.el=="string"?ne=s.querySelectorAll(X.el):ne||(ne=X.el),e.params.uniqueNavElements&&typeof X.el=="string"&&ne.length>1&&ie.querySelectorAll(X.el).length===1&&(ne=ie.querySelector(X.el)),ne.length>0&&(ne=ne[0]),ne.classList.add(e.isHorizontal()?X.horizontalClass:X.verticalClass);let Ee;ne&&(Ee=ne.querySelector(`.${e.params.scrollbar.dragClass}`),Ee||(Ee=ey("div",e.params.scrollbar.dragClass),ne.append(Ee))),Object.assign(B,{el:ne,dragEl:Ee}),X.draggable&&Q(),ne&&ne.classList[e.enabled?"remove":"add"](e.params.scrollbar.lockClass)}function te(){const B=e.params.scrollbar,ie=e.scrollbar.el;ie&&ie.classList.remove(e.isHorizontal()?B.horizontalClass:B.verticalClass),ae()}i("init",()=>{e.params.scrollbar.enabled===!1?U():(be(),A(),I())}),i("update resize observerUpdate lock unlock",()=>{A()}),i("setTranslate",()=>{I()}),i("setTransition",(B,ie)=>{C(ie)}),i("enable disable",()=>{const{el:B}=e.scrollbar;B&&B.classList[e.enabled?"remove":"add"](e.params.scrollbar.lockClass)}),i("destroy",()=>{te()});const G=()=>{e.el.classList.remove(e.params.scrollbar.scrollbarDisabledClass),e.scrollbar.el&&e.scrollbar.el.classList.remove(e.params.scrollbar.scrollbarDisabledClass),be(),A(),I()},U=()=>{e.el.classList.add(e.params.scrollbar.scrollbarDisabledClass),e.scrollbar.el&&e.scrollbar.el.classList.add(e.params.scrollbar.scrollbarDisabledClass),te()};Object.assign(e.scrollbar,{enable:G,disable:U,updateSize:A,setTranslate:I,init:be,destroy:te})}function cte({swiper:e,extendParams:t,on:i}){t({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}}),e.a11y={clicked:!1};let r=null;function s(X){const ne=r;ne.length!==0&&(ne.innerHTML="",ne.innerHTML=X)}const u=X=>(Array.isArray(X)||(X=[X].filter(ne=>!!ne)),X);function d(X=16){const ne=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(X).replace(/x/g,ne)}function l(X){X=u(X),X.forEach(ne=>{ne.setAttribute("tabIndex","0")})}function m(X){X=u(X),X.forEach(ne=>{ne.setAttribute("tabIndex","-1")})}function g(X,ne){X=u(X),X.forEach(Ee=>{Ee.setAttribute("role",ne)})}function x(X,ne){X=u(X),X.forEach(Ee=>{Ee.setAttribute("aria-roledescription",ne)})}function w(X,ne){X=u(X),X.forEach(Ee=>{Ee.setAttribute("aria-controls",ne)})}function I(X,ne){X=u(X),X.forEach(Ee=>{Ee.setAttribute("aria-label",ne)})}function C(X,ne){X=u(X),X.forEach(Ee=>{Ee.setAttribute("id",ne)})}function A(X,ne){X=u(X),X.forEach(Ee=>{Ee.setAttribute("aria-live",ne)})}function L(X){X=u(X),X.forEach(ne=>{ne.setAttribute("aria-disabled",!0)})}function $(X){X=u(X),X.forEach(ne=>{ne.setAttribute("aria-disabled",!1)})}function F(X){if(X.keyCode!==13&&X.keyCode!==32)return;const ne=e.params.a11y,Ee=X.target;e.pagination&&e.pagination.el&&(Ee===e.pagination.el||e.pagination.el.contains(X.target))&&!X.target.matches(sb(e.params.pagination.bulletClass))||(e.navigation&&e.navigation.nextEl&&Ee===e.navigation.nextEl&&(e.isEnd&&!e.params.loop||e.slideNext(),e.isEnd?s(ne.lastSlideMessage):s(ne.nextSlideMessage)),e.navigation&&e.navigation.prevEl&&Ee===e.navigation.prevEl&&(e.isBeginning&&!e.params.loop||e.slidePrev(),e.isBeginning?s(ne.firstSlideMessage):s(ne.prevSlideMessage)),e.pagination&&Ee.matches(sb(e.params.pagination.bulletClass))&&Ee.click())}function z(){if(e.params.loop||e.params.rewind||!e.navigation)return;const{nextEl:X,prevEl:ne}=e.navigation;ne&&(e.isBeginning?(L(ne),m(ne)):($(ne),l(ne))),X&&(e.isEnd?(L(X),m(X)):($(X),l(X)))}function ee(){return e.pagination&&e.pagination.bullets&&e.pagination.bullets.length}function H(){return ee()&&e.params.pagination.clickable}function Q(){const X=e.params.a11y;ee()&&e.pagination.bullets.forEach(ne=>{e.params.pagination.clickable&&(l(ne),e.params.pagination.renderBullet||(g(ne,"button"),I(ne,X.paginationBulletMessage.replace(/\{\{index\}\}/,xx(ne)+1)))),ne.matches(sb(e.params.pagination.bulletActiveClass))?ne.setAttribute("aria-current","true"):ne.removeAttribute("aria-current")})}const ae=(X,ne,Ee)=>{l(X),X.tagName!=="BUTTON"&&(g(X,"button"),X.addEventListener("keydown",F)),I(X,Ee),w(X,ne)},be=()=>{e.a11y.clicked=!0},te=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.destroyed||(e.a11y.clicked=!1)})})},G=X=>{if(e.a11y.clicked)return;const ne=X.target.closest(`.${e.params.slideClass}, swiper-slide`);if(!ne||!e.slides.includes(ne))return;const Ee=e.slides.indexOf(ne)===e.activeIndex,Ie=e.params.watchSlidesProgress&&e.visibleSlides&&e.visibleSlides.includes(ne);Ee||Ie||X.sourceCapabilities&&X.sourceCapabilities.firesTouchEvents||(e.isHorizontal()?e.el.scrollLeft=0:e.el.scrollTop=0,e.slideTo(e.slides.indexOf(ne),0))},U=()=>{const X=e.params.a11y;X.itemRoleDescriptionMessage&&x(e.slides,X.itemRoleDescriptionMessage),X.slideRole&&g(e.slides,X.slideRole);const ne=e.slides.length;X.slideLabelMessage&&e.slides.forEach((Ee,Ie)=>{const Xe=e.params.loop?parseInt(Ee.getAttribute("data-swiper-slide-index"),10):Ie,lt=X.slideLabelMessage.replace(/\{\{index\}\}/,Xe+1).replace(/\{\{slidesLength\}\}/,ne);I(Ee,lt)})},B=()=>{const X=e.params.a11y;e.isElement?e.el.shadowEl.append(r):e.el.append(r);const ne=e.el;X.containerRoleDescriptionMessage&&x(ne,X.containerRoleDescriptionMessage),X.containerMessage&&I(ne,X.containerMessage);const Ee=e.wrapperEl,Ie=X.id||Ee.getAttribute("id")||`swiper-wrapper-${d(16)}`,Xe=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite";C(Ee,Ie),A(Ee,Xe),U();let{nextEl:lt,prevEl:st}=e.navigation?e.navigation:{};lt=u(lt),st=u(st),lt&&lt.forEach($t=>ae($t,Ie,X.nextSlideMessage)),st&&st.forEach($t=>ae($t,Ie,X.prevSlideMessage)),H()&&(Array.isArray(e.pagination.el)?e.pagination.el:[e.pagination.el]).forEach(It=>{It.addEventListener("keydown",F)}),e.el.addEventListener("focus",G,!0),e.el.addEventListener("pointerdown",be,!0),e.el.addEventListener("pointerup",te,!0)};function ie(){r&&r.remove();let{nextEl:X,prevEl:ne}=e.navigation?e.navigation:{};X=u(X),ne=u(ne),X&&X.forEach(Ee=>Ee.removeEventListener("keydown",F)),ne&&ne.forEach(Ee=>Ee.removeEventListener("keydown",F)),H()&&(Array.isArray(e.pagination.el)?e.pagination.el:[e.pagination.el]).forEach(Ie=>{Ie.removeEventListener("keydown",F)}),e.el.removeEventListener("focus",G,!0),e.el.removeEventListener("pointerdown",be,!0),e.el.removeEventListener("pointerup",te,!0)}i("beforeInit",()=>{r=ey("span",e.params.a11y.notificationClass),r.setAttribute("aria-live","assertive"),r.setAttribute("aria-atomic","true")}),i("afterInit",()=>{e.params.a11y.enabled&&B()}),i("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{e.params.a11y.enabled&&U()}),i("fromEdge toEdge afterInit lock unlock",()=>{e.params.a11y.enabled&&z()}),i("paginationUpdate",()=>{e.params.a11y.enabled&&Q()}),i("destroy",()=>{e.params.a11y.enabled&&ie()})}function eI({swiper:e,extendParams:t,on:i}){t({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let r=!1,s=!1;e.thumbs={swiper:null};function u(){const m=e.thumbs.swiper;if(!m||m.destroyed)return;const g=m.clickedIndex,x=m.clickedSlide;if(x&&x.classList.contains(e.params.thumbs.slideThumbActiveClass)||typeof g>"u"||g===null)return;let w;m.params.loop?w=parseInt(m.clickedSlide.getAttribute("data-swiper-slide-index"),10):w=g,e.params.loop?e.slideToLoop(w):e.slideTo(w)}function d(){const{thumbs:m}=e.params;if(r)return!1;r=!0;const g=e.constructor;if(m.swiper instanceof g)e.thumbs.swiper=m.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update();else if(Qf(m.swiper)){const x=Object.assign({},m.swiper);Object.assign(x,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new g(x),s=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",u),!0}function l(m){const g=e.thumbs.swiper;if(!g||g.destroyed)return;const x=g.params.slidesPerView==="auto"?g.slidesPerViewDynamic():g.params.slidesPerView;let w=1;const I=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(w=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(w=1),w=Math.floor(w),g.slides.forEach(L=>L.classList.remove(I)),g.params.loop||g.params.virtual&&g.params.virtual.enabled)for(let L=0;L<w;L+=1)Ka(g.slidesEl,`[data-swiper-slide-index="${e.realIndex+L}"]`).forEach($=>{$.classList.add(I)});else for(let L=0;L<w;L+=1)g.slides[e.realIndex+L]&&g.slides[e.realIndex+L].classList.add(I);const C=e.params.thumbs.autoScrollOffset,A=C&&!g.params.loop;if(e.realIndex!==g.realIndex||A){const L=g.activeIndex;let $,F;if(g.params.loop){const z=g.slides.filter(ee=>ee.getAttribute("data-swiper-slide-index")===`${e.realIndex}`)[0];$=g.slides.indexOf(z),F=e.activeIndex>e.previousIndex?"next":"prev"}else $=e.realIndex,F=$>e.previousIndex?"next":"prev";A&&($+=F==="next"?C:-1*C),g.visibleSlidesIndexes&&g.visibleSlidesIndexes.indexOf($)<0&&(g.params.centeredSlides?$>L?$=$-Math.floor(x/2)+1:$=$+Math.floor(x/2)-1:$>L&&g.params.slidesPerGroup,g.slideTo($,m?0:void 0))}}i("beforeInit",()=>{const{thumbs:m}=e.params;if(!(!m||!m.swiper))if(typeof m.swiper=="string"||m.swiper instanceof HTMLElement){const g=ho(),x=()=>{const I=typeof m.swiper=="string"?g.querySelector(m.swiper):m.swiper;if(I&&I.swiper)m.swiper=I.swiper,d(),l(!0);else if(I){const C=A=>{m.swiper=A.detail[0],I.removeEventListener("init",C),d(),l(!0),m.swiper.update(),e.update()};I.addEventListener("init",C)}return I},w=()=>{if(e.destroyed)return;x()||requestAnimationFrame(w)};requestAnimationFrame(w)}else d(),l(!0)}),i("slideChange update resize observerUpdate",()=>{l()}),i("setTransition",(m,g)=>{const x=e.thumbs.swiper;!x||x.destroyed||x.setTransition(g)}),i("beforeDestroy",()=>{const m=e.thumbs.swiper;!m||m.destroyed||s&&m.destroy()}),Object.assign(e.thumbs,{init:d,update:l})}function bu(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function ec(e,t){const i=["__proto__","constructor","prototype"];Object.keys(t).filter(r=>i.indexOf(r)<0).forEach(r=>{typeof e[r]>"u"?e[r]=t[r]:bu(t[r])&&bu(e[r])&&Object.keys(t[r]).length>0?t[r].__swiper__?e[r]=t[r]:ec(e[r],t[r]):e[r]=t[r]})}function jP(e={}){return e.navigation&&typeof e.navigation.nextEl>"u"&&typeof e.navigation.prevEl>"u"}function UP(e={}){return e.pagination&&typeof e.pagination.el>"u"}function VP(e={}){return e.scrollbar&&typeof e.scrollbar.el>"u"}function HP(e=""){const t=e.split(" ").map(r=>r.trim()).filter(r=>!!r),i=[];return t.forEach(r=>{i.indexOf(r)<0&&i.push(r)}),i.join(" ")}function ute(e=""){return e?e.includes("swiper-wrapper")?e:`swiper-wrapper ${e}`:"swiper-wrapper"}const GP=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopedSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideNextClass","slidePrevClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function tI(e={},t=!0){const i={on:{}},r={},s={};ec(i,Wp.defaults),ec(i,Wp.extendedDefaults),i._emitClasses=!0,i.init=!1;const u={},d=GP.map(m=>m.replace(/_/,"")),l=Object.assign({},e);return Object.keys(l).forEach(m=>{typeof e[m]>"u"||(d.indexOf(m)>=0?bu(e[m])?(i[m]={},s[m]={},ec(i[m],e[m]),ec(s[m],e[m])):(i[m]=e[m],s[m]=e[m]):m.search(/on[A-Z]/)===0&&typeof e[m]=="function"?t?r[`${m[2].toLowerCase()}${m.substr(3)}`]=e[m]:i.on[`${m[2].toLowerCase()}${m.substr(3)}`]=e[m]:u[m]=e[m])}),["navigation","pagination","scrollbar"].forEach(m=>{i[m]===!0&&(i[m]={}),i[m]===!1&&delete i[m]}),{params:i,passedParams:s,rest:u,events:r}}function dte({el:e,nextEl:t,prevEl:i,paginationEl:r,scrollbarEl:s,swiper:u},d){jP(d)&&t&&i&&(u.params.navigation.nextEl=t,u.originalParams.navigation.nextEl=t,u.params.navigation.prevEl=i,u.originalParams.navigation.prevEl=i),UP(d)&&r&&(u.params.pagination.el=r,u.originalParams.pagination.el=r),VP(d)&&s&&(u.params.scrollbar.el=s,u.originalParams.scrollbar.el=s),u.init(e)}function hte(e,t,i,r,s){const u=[];if(!t)return u;const d=m=>{u.indexOf(m)<0&&u.push(m)};if(i&&r){const m=r.map(s),g=i.map(s);m.join("")!==g.join("")&&d("children"),r.length!==i.length&&d("children")}return GP.filter(m=>m[0]==="_").map(m=>m.replace(/_/,"")).forEach(m=>{if(m in e&&m in t)if(bu(e[m])&&bu(t[m])){const g=Object.keys(e[m]),x=Object.keys(t[m]);g.length!==x.length?d(m):(g.forEach(w=>{e[m][w]!==t[m][w]&&d(m)}),x.forEach(w=>{e[m][w]!==t[m][w]&&d(m)}))}else e[m]!==t[m]&&d(m)}),u}function ab(e,t,i){e===void 0&&(e={});const r=[],s={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},u=(d,l)=>{Array.isArray(d)&&d.forEach(m=>{const g=typeof m.type=="symbol";l==="default"&&(l="container-end"),g&&m.children?u(m.children,l):m.type&&(m.type.name==="SwiperSlide"||m.type.name==="AsyncComponentWrapper")?r.push(m):s[l]&&s[l].push(m)})};return Object.keys(e).forEach(d=>{if(typeof e[d]!="function")return;const l=e[d]();u(l,d)}),i.value=t.value,t.value=r,{slides:r,slots:s}}function fte({swiper:e,slides:t,passedParams:i,changedParams:r,nextEl:s,prevEl:u,scrollbarEl:d,paginationEl:l}){const m=r.filter(te=>te!=="children"&&te!=="direction"&&te!=="wrapperClass"),{params:g,pagination:x,navigation:w,scrollbar:I,virtual:C,thumbs:A}=e;let L,$,F,z,ee,H,Q,ae;r.includes("thumbs")&&i.thumbs&&i.thumbs.swiper&&g.thumbs&&!g.thumbs.swiper&&(L=!0),r.includes("controller")&&i.controller&&i.controller.control&&g.controller&&!g.controller.control&&($=!0),r.includes("pagination")&&i.pagination&&(i.pagination.el||l)&&(g.pagination||g.pagination===!1)&&x&&!x.el&&(F=!0),r.includes("scrollbar")&&i.scrollbar&&(i.scrollbar.el||d)&&(g.scrollbar||g.scrollbar===!1)&&I&&!I.el&&(z=!0),r.includes("navigation")&&i.navigation&&(i.navigation.prevEl||u)&&(i.navigation.nextEl||s)&&(g.navigation||g.navigation===!1)&&w&&!w.prevEl&&!w.nextEl&&(ee=!0);const be=te=>{e[te]&&(e[te].destroy(),te==="navigation"?(e.isElement&&(e[te].prevEl.remove(),e[te].nextEl.remove()),g[te].prevEl=void 0,g[te].nextEl=void 0,e[te].prevEl=void 0,e[te].nextEl=void 0):(e.isElement&&e[te].el.remove(),g[te].el=void 0,e[te].el=void 0))};r.includes("loop")&&e.isElement&&(g.loop&&!i.loop?H=!0:!g.loop&&i.loop?Q=!0:ae=!0),m.forEach(te=>{if(bu(g[te])&&bu(i[te]))ec(g[te],i[te]),(te==="navigation"||te==="pagination"||te==="scrollbar")&&"enabled"in i[te]&&!i[te].enabled&&be(te);else{const G=i[te];(G===!0||G===!1)&&(te==="navigation"||te==="pagination"||te==="scrollbar")?G===!1&&be(te):g[te]=i[te]}}),m.includes("controller")&&!$&&e.controller&&e.controller.control&&g.controller&&g.controller.control&&(e.controller.control=g.controller.control),r.includes("children")&&t&&C&&g.virtual.enabled&&(C.slides=t,C.update(!0)),r.includes("children")&&t&&g.loop&&(ae=!0),L&&A.init()&&A.update(!0),$&&(e.controller.control=g.controller.control),F&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),e.el.shadowEl.appendChild(l)),l&&(g.pagination.el=l),x.init(),x.render(),x.update()),z&&(e.isElement&&(!d||typeof d=="string")&&(d=document.createElement("div"),d.classList.add("swiper-scrollbar"),e.el.shadowEl.appendChild(d)),d&&(g.scrollbar.el=d),I.init(),I.updateSize(),I.setTranslate()),ee&&(e.isElement&&((!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-next"),e.el.shadowEl.appendChild(s)),(!u||typeof u=="string")&&(u=document.createElement("div"),u.classList.add("swiper-button-prev"),e.el.shadowEl.appendChild(u))),s&&(g.navigation.nextEl=s),u&&(g.navigation.prevEl=u),w.init(),w.update()),r.includes("allowSlideNext")&&(e.allowSlideNext=i.allowSlideNext),r.includes("allowSlidePrev")&&(e.allowSlidePrev=i.allowSlidePrev),r.includes("direction")&&e.changeDirection(i.direction,!1),(H||ae)&&e.loopDestroy(),(Q||ae)&&e.loopCreate(),e.update()}function pte(e,t,i){if(!i)return null;const r=x=>{let w=x;return x<0?w=t.length+x:w>=t.length&&(w=w-t.length),w},s=e.value.isHorizontal()?{[e.value.rtlTranslate?"right":"left"]:`${i.offset}px`}:{top:`${i.offset}px`},{from:u,to:d}=i,l=e.value.params.loop?-t.length:0,m=e.value.params.loop?t.length*2:t.length,g=[];for(let x=l;x<m;x+=1)x>=u&&x<=d&&g.push(t[r(x)]);return g.map(x=>(x.props||(x.props={}),x.props.style||(x.props.style={}),x.props.swiperRef=e,x.props.style=s,ni(x.type,{...x.props},x.children)))}const mte=e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())},nI={name:"Swiper",props:{tag:{type:String,default:"div"},wrapperTag:{type:String,default:"div"},modules:{type:Array,default:void 0},init:{type:Boolean,default:void 0},direction:{type:String,default:void 0},oneWayMovement:{type:Boolean,default:void 0},touchEventsTarget:{type:String,default:void 0},initialSlide:{type:Number,default:void 0},speed:{type:Number,default:void 0},cssMode:{type:Boolean,default:void 0},updateOnWindowResize:{type:Boolean,default:void 0},resizeObserver:{type:Boolean,default:void 0},nested:{type:Boolean,default:void 0},focusableElements:{type:String,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},preventInteractionOnTransition:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},edgeSwipeDetection:{type:[Boolean,String],default:void 0},edgeSwipeThreshold:{type:Number,default:void 0},autoHeight:{type:Boolean,default:void 0},setWrapperSize:{type:Boolean,default:void 0},virtualTranslate:{type:Boolean,default:void 0},effect:{type:String,default:void 0},breakpoints:{type:Object,default:void 0},spaceBetween:{type:[Number,String],default:void 0},slidesPerView:{type:[Number,String],default:void 0},maxBackfaceHiddenSlides:{type:Number,default:void 0},slidesPerGroup:{type:Number,default:void 0},slidesPerGroupSkip:{type:Number,default:void 0},slidesPerGroupAuto:{type:Boolean,default:void 0},centeredSlides:{type:Boolean,default:void 0},centeredSlidesBounds:{type:Boolean,default:void 0},slidesOffsetBefore:{type:Number,default:void 0},slidesOffsetAfter:{type:Number,default:void 0},normalizeSlideIndex:{type:Boolean,default:void 0},centerInsufficientSlides:{type:Boolean,default:void 0},watchOverflow:{type:Boolean,default:void 0},roundLengths:{type:Boolean,default:void 0},touchRatio:{type:Number,default:void 0},touchAngle:{type:Number,default:void 0},simulateTouch:{type:Boolean,default:void 0},shortSwipes:{type:Boolean,default:void 0},longSwipes:{type:Boolean,default:void 0},longSwipesRatio:{type:Number,default:void 0},longSwipesMs:{type:Number,default:void 0},followFinger:{type:Boolean,default:void 0},allowTouchMove:{type:Boolean,default:void 0},threshold:{type:Number,default:void 0},touchMoveStopPropagation:{type:Boolean,default:void 0},touchStartPreventDefault:{type:Boolean,default:void 0},touchStartForcePreventDefault:{type:Boolean,default:void 0},touchReleaseOnEdges:{type:Boolean,default:void 0},uniqueNavElements:{type:Boolean,default:void 0},resistance:{type:Boolean,default:void 0},resistanceRatio:{type:Number,default:void 0},watchSlidesProgress:{type:Boolean,default:void 0},grabCursor:{type:Boolean,default:void 0},preventClicks:{type:Boolean,default:void 0},preventClicksPropagation:{type:Boolean,default:void 0},slideToClickedSlide:{type:Boolean,default:void 0},loop:{type:Boolean,default:void 0},loopedSlides:{type:Number,default:void 0},loopPreventsSliding:{type:Boolean,default:void 0},rewind:{type:Boolean,default:void 0},allowSlidePrev:{type:Boolean,default:void 0},allowSlideNext:{type:Boolean,default:void 0},swipeHandler:{type:Boolean,default:void 0},noSwiping:{type:Boolean,default:void 0},noSwipingClass:{type:String,default:void 0},noSwipingSelector:{type:String,default:void 0},passiveListeners:{type:Boolean,default:void 0},containerModifierClass:{type:String,default:void 0},slideClass:{type:String,default:void 0},slideActiveClass:{type:String,default:void 0},slideVisibleClass:{type:String,default:void 0},slideNextClass:{type:String,default:void 0},slidePrevClass:{type:String,default:void 0},wrapperClass:{type:String,default:void 0},lazyPreloaderClass:{type:String,default:void 0},lazyPreloadPrevNext:{type:Number,default:void 0},runCallbacksOnInit:{type:Boolean,default:void 0},observer:{type:Boolean,default:void 0},observeParents:{type:Boolean,default:void 0},observeSlideChildren:{type:Boolean,default:void 0},a11y:{type:[Boolean,Object],default:void 0},autoplay:{type:[Boolean,Object],default:void 0},controller:{type:Object,default:void 0},coverflowEffect:{type:Object,default:void 0},cubeEffect:{type:Object,default:void 0},fadeEffect:{type:Object,default:void 0},flipEffect:{type:Object,default:void 0},creativeEffect:{type:Object,default:void 0},cardsEffect:{type:Object,default:void 0},hashNavigation:{type:[Boolean,Object],default:void 0},history:{type:[Boolean,Object],default:void 0},keyboard:{type:[Boolean,Object],default:void 0},mousewheel:{type:[Boolean,Object],default:void 0},navigation:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:void 0},parallax:{type:[Boolean,Object],default:void 0},scrollbar:{type:[Boolean,Object],default:void 0},thumbs:{type:Object,default:void 0},virtual:{type:[Boolean,Object],default:void 0},zoom:{type:[Boolean,Object],default:void 0},grid:{type:[Object],default:void 0},freeMode:{type:[Boolean,Object],default:void 0},enabled:{type:Boolean,default:void 0}},emits:["_beforeBreakpoint","_containerClasses","_slideClass","_slideClasses","_swiper","_freeModeNoMomentumRelease","activeIndexChange","afterInit","autoplay","autoplayStart","autoplayStop","autoplayPause","autoplayResume","autoplayTimeLeft","beforeDestroy","beforeInit","beforeLoopFix","beforeResize","beforeSlideChangeStart","beforeTransitionStart","breakpoint","changeDirection","click","disable","doubleTap","doubleClick","destroy","enable","fromEdge","hashChange","hashSet","init","keyPress","lock","loopFix","momentumBounce","navigationHide","navigationShow","navigationPrev","navigationNext","observerUpdate","orientationchange","paginationHide","paginationRender","paginationShow","paginationUpdate","progress","reachBeginning","reachEnd","realIndexChange","resize","scroll","scrollbarDragEnd","scrollbarDragMove","scrollbarDragStart","setTransition","setTranslate","slideChange","slideChangeTransitionEnd","slideChangeTransitionStart","slideNextTransitionEnd","slideNextTransitionStart","slidePrevTransitionEnd","slidePrevTransitionStart","slideResetTransitionStart","slideResetTransitionEnd","sliderMove","sliderFirstMove","slidesLengthChange","slidesGridLengthChange","snapGridLengthChange","snapIndexChange","swiper","tap","toEdge","touchEnd","touchMove","touchMoveOpposite","touchStart","transitionEnd","transitionStart","unlock","update","virtualUpdate","zoomChange"],setup(e,t){let{slots:i,emit:r}=t;const{tag:s,wrapperTag:u}=e,d=Re("swiper"),l=Re(null),m=Re(!1),g=Re(!1),x=Re(null),w=Re(null),I=Re(null),C={value:[]},A={value:[]},L=Re(null),$=Re(null),F=Re(null),z=Re(null),{params:ee,passedParams:H}=tI(e,!1);ab(i,C,A),I.value=H,A.value=C.value;const Q=()=>{ab(i,C,A),m.value=!0};ee.onAny=function(te){for(var G=arguments.length,U=new Array(G>1?G-1:0),B=1;B<G;B++)U[B-1]=arguments[B];r(te,...U)},Object.assign(ee.on,{_beforeBreakpoint:Q,_containerClasses(te,G){d.value=G}});const ae={...ee};if(delete ae.wrapperClass,w.value=new Wp(ae),w.value.virtual&&w.value.params.virtual.enabled){w.value.virtual.slides=C.value;const te={cache:!1,slides:C.value,renderExternal:G=>{l.value=G},renderExternalUpdate:!1};ec(w.value.params.virtual,te),ec(w.value.originalParams.virtual,te)}xh(()=>{!g.value&&w.value&&(w.value.emitSlidesClasses(),g.value=!0);const{passedParams:te}=tI(e,!1),G=hte(te,I.value,C.value,A.value,U=>U.props&&U.props.key);I.value=te,(G.length||m.value)&&w.value&&!w.value.destroyed&&fte({swiper:w.value,slides:C.value,passedParams:te,changedParams:G,nextEl:L.value,prevEl:$.value,scrollbarEl:z.value,paginationEl:F.value}),m.value=!1}),Oi("swiper",w),fn(l,()=>{Ar(()=>{mte(w.value)})}),Fn(()=>{x.value&&(dte({el:x.value,nextEl:L.value,prevEl:$.value,paginationEl:F.value,scrollbarEl:z.value,swiper:w.value},ee),r("swiper",w.value))}),oa(()=>{w.value&&!w.value.destroyed&&w.value.destroy(!0,!1)});function be(te){return ee.virtual?pte(w,te,l.value):(te.forEach((G,U)=>{G.props||(G.props={}),G.props.swiperRef=w,G.props.swiperSlideIndex=U}),te)}return()=>{const{slides:te,slots:G}=ab(i,C,A);return ni(s,{ref:x,class:HP(d.value)},[G["container-start"],ni(u,{class:ute(ee.wrapperClass)},[G["wrapper-start"],be(te),G["wrapper-end"]]),jP(e)&&[ni("div",{ref:$,class:"swiper-button-prev"}),ni("div",{ref:L,class:"swiper-button-next"})],VP(e)&&ni("div",{ref:z,class:"swiper-scrollbar"}),UP(e)&&ni("div",{ref:F,class:"swiper-pagination"}),G["container-end"]])}}},iI={name:"SwiperSlide",props:{tag:{type:String,default:"div"},swiperRef:{type:Object,required:!1},swiperSlideIndex:{type:Number,default:void 0,required:!1},zoom:{type:Boolean,default:void 0,required:!1},lazy:{type:Boolean,default:!1,required:!1},virtualIndex:{type:[String,Number],default:void 0}},setup(e,t){let{slots:i}=t,r=!1;const{swiperRef:s}=e,u=Re(null),d=Re("swiper-slide"),l=Re(!1);function m(w,I,C){I===u.value&&(d.value=C)}Fn(()=>{!s||!s.value||(s.value.on("_slideClass",m),r=!0)}),Yx(()=>{r||!s||!s.value||(s.value.on("_slideClass",m),r=!0)}),xh(()=>{!u.value||!s||!s.value||(typeof e.swiperSlideIndex<"u"&&(u.value.swiperSlideIndex=e.swiperSlideIndex),s.value.destroyed&&d.value!=="swiper-slide"&&(d.value="swiper-slide"))}),oa(()=>{!s||!s.value||s.value.off("_slideClass",m)});const g=Le(()=>({isActive:d.value.indexOf("swiper-slide-active")>=0,isVisible:d.value.indexOf("swiper-slide-visible")>=0,isPrev:d.value.indexOf("swiper-slide-prev")>=0,isNext:d.value.indexOf("swiper-slide-next")>=0}));Oi("swiperSlide",g);const x=()=>{l.value=!0};return()=>ni(e.tag,{class:HP(`${d.value}`),ref:u,"data-swiper-slide-index":typeof e.virtualIndex>"u"&&s&&s.value&&s.value.params.loop?e.swiperSlideIndex:e.virtualIndex,onLoadCapture:x},e.zoom?ni("div",{class:"swiper-zoom-container","data-swiper-zoom":typeof e.zoom=="number"?e.zoom:void 0},[i.default&&i.default(g.value),e.lazy&&!l.value&&ni("div",{class:"swiper-lazy-preloader"})]):[i.default&&i.default(g.value),e.lazy&&!l.value&&ni("div",{class:"swiper-lazy-preloader"})])}},Tx=e=>{var t;return Array.isArray(e.title)?e.title.map(Qa).join(", "):(t=e.title)!=null&&t.length?Qa(e.title):"(No Title)"},gte=e=>{const{primaryHandlerId:t}=e;return t?yc(t):null},vte=e=>({id:e.objectId,objectId:e.objectId,primaryHandlerId:e.primaryHandlerId??null,title:Tx(e),thumb:{src:gte(e),alt:Tx(e)}});function _te(e){const{fileAssets:t,objectId:i}=e,r=[];if(!t)return r;const s=t-1;for(let u=0;u<s;u++){const d={id:`${i}-placeholder-${u}`,objectId:void 0,title:void 0,primaryHandlerId:void 0,thumb:{src:void 0,alt:void 0},isChildSlide:!0,isPlaceholder:!0,parentObjectId:i,parentTitle:Tx(e),childIndex:u,totalChildren:s};r.push(d)}return r}function yte(e){const{id:t,relatedAssetTitle:i,primaryHandler:r}=e,s=Array.isArray(i)?i[0]:i??"No Title";return{id:`${t}-related-asset`,objectId:t,title:s,primaryHandlerId:r,thumb:{src:r?yc(r):null,alt:s}}}function bte({fileId:e,parentObjectId:t,parentTitle:i}){return{id:`${t}-file-${e}`,objectId:t,title:i,primaryHandlerId:e,thumb:{src:e?yc(e):null,alt:i}}}function xte(e){const t=[],i=r=>r&&typeof r=="object"&&r.fileId;return Object.values(e).forEach(r=>{Array.isArray(r)&&r.forEach(s=>{i(s)&&t.push(s)})}),t}function wte(e){return Object.entries((e==null?void 0:e.relatedAssets)??{}).map(([t,i])=>({...i,id:t}))}async function Ste(e){const t=await Hn.getAsset(e);if(!t)throw new Error("Asset not found. Cannot fetch child slides.");const i=xte(t),r=wte(t);return[...i.filter(u=>!u.isPrimary).map(u=>({fileId:u.fileId,parentObjectId:e,parentTitle:Eu(t)})).map(bte),...r.map(yte)]}function Tte(e){const t=Nr([]);function i(r){const s=vte(r);t.push(s);const u=_te(r);t.push(...u),Ste(r.objectId).then(d=>{u.forEach((l,m)=>{const g=d[m];if(!g)throw new Error("Child slide not found, cannot replace placeholder. There may be a mismatch between the number of placeholders and the number of child slides.");const x=t.findIndex(w=>w.id===l.id);t[x]=g})})}return e.forEach(r=>{i(r)}),{slides:t,createSlidesForMatch:i}}const Ete=de("span",{class:"sr-only"},"Toggle fullscreen",-1),Ite={class:"not-sr-only hidden md:inline-block"},Cte=rt({__name:"FullscreenButton",props:{isFullscreen:{type:Boolean}},emits:["click"],setup(e){return(t,i)=>(V(),pe("button",{class:kn(["inline-flex gap-1 p-2 md:px-4 items-center justify-center rounded-md text-xs uppercase tracking-wide whitespace-nowrap group transition-all",{" text-neutral-900 bg-transparent-black-100 hover:bg-blue-600 hover:text-blue-100":!t.isFullscreen,"bg-transparent-white-300 text-neutral-500 hover:bg-blue-600 hover:text-blue-100":t.isFullscreen}]),onClick:i[0]||(i[0]=r=>t.$emit("click",r))},[t.isFullscreen?(V(),je(ce(RN),{key:1,class:"fill-neutral-500 group-hover:fill-neutral-100 transition-all"})):(V(),je(ce(e8),{key:0,class:"fill-neutral-900 group-hover:fill-neutral-200 transition-all"})),Ete,de("span",Ite,xt(t.isFullscreen?"Exit":"")+" Fullscreen",1)],2))}});const Ate={class:"font-bold"},Mte={class:"w-full h-full border"},kte={key:1,class:"w-full h-full flex items-center justify-center -mt-12"},Pte={class:"border border-neutral-400 aspect-video flex items-center justify-center w-full relative"},Dte={key:0,class:"absolute bottom-0 left-0 w-6 h-6 text-xs z-10 flex items-center justify-center bg-transparent-white-800 text-neutral-900"},Lte={class:"flex flex-col items-center justify-center text-xs text-center px-4 py-2"},tw=rt({__name:"SearchResultsGallery",props:{totalResults:{},matches:{},status:{}},emits:["loadMore"],setup(e,{emit:t}){const i=e,r=[lte,Q2,cte,eI,ote],s=Re(null),u=Re(null),d=Re(null),{isFullscreen:l,toggle:m}=Vz(d),{slides:g,createSlidesForMatch:x}=Tte([]),w=Re(0),I=Le(()=>g[w.value]),C=F=>{s.value=F},A=F=>{u.value=F},L=F=>{w.value=F.activeIndex,s.value&&s.value.slideTo(F.activeIndex)},$=F=>{var z;w.value=F.activeIndex,(z=u.value)==null||z.slideTo(F.activeIndex)};return fn(()=>[...i.matches??[]],(F,z)=>{if(!F)return;aF(F,z??[]).forEach(x)},{immediate:!0}),fn(w,()=>{if(!i.matches||i.status==="fetching")return;const F=i.matches.length<i.totalResults,z=w.value>=g.length-10;F&&z&&t("loadMore")}),(F,z)=>(V(),pe("div",{ref_key:"galleryEl",ref:d,class:kn(["search-results-gallery",{"h-screen flex flex-col items-center justify-center":ce(l)}])},[u.value?(V(),pe("div",{key:0,class:kn(["flex items-center justify-between w-full gap-4",{"p-4":ce(l),"py-2":!ce(l)}])},[de("h2",Ate,[I.value.objectId?(V(),je(os,{key:0,to:ce(hl)(I.value.objectId),class:kn(["transition-colors hover:text-blue-600 !no-underline",{"text-neutral-300 text-4xl ":ce(l),"text-xl text-blue-700 ":!ce(l)}])},{default:Ce(()=>[Mt(xt(I.value.title),1)]),_:1},8,["to","class"])):tt("",!0)]),ye(Cte,{isFullscreen:ce(l),onClick:ce(m)},null,8,["isFullscreen","onClick"])],2)):tt("",!0),ye(ce(nI),{class:"main-swiper flex-1",modules:r,slidesPerView:1,spaceBetween:50,thumbs:{swiper:s.value},keyboard:{enabled:!0,onlyInViewport:!1},onSwiper:A,onSlideChange:L},{default:Ce(()=>[(V(!0),pe(Nt,null,$n(ce(g),ee=>(V(),je(ce(iI),{key:ee.id},{default:Ce(({isActive:H,isPrev:Q,isNext:ae})=>[de("div",Mte,[ee.primaryHandlerId&&(H||Q||ae)?(V(),je(Lk,{key:0,class:"border w-full h-full",fileHandlerId:ee.primaryHandlerId},null,8,["fileHandlerId"])):(V(),pe("div",kte,[ye(Fp)]))])]),_:2},1024))),128))]),_:1},8,["thumbs"]),ye(ce(nI),{class:"thumbs-swiper w-full",modules:[ce(eI),ce(Q2)],watchSlidesProgress:!0,slidesPerView:10,centeredSlides:!0,scrollbar:{draggable:!0,dragSize:32},spaceBetween:4,onSwiper:C,onTouchEnd:$,onScrollbarDragEnd:$},{default:Ce(()=>[(V(!0),pe(Nt,null,$n(ce(g),(ee,H)=>(V(),je(ce(iI),{key:ee.id},{default:Ce(()=>[de("div",Pte,[H!==w.value?(V(),pe("div",Dte,xt(H+1),1)):tt("",!0),ee.thumb.src?(V(),je(Mu,{key:1,src:ee.thumb.src,alt:ee.thumb.alt??"Loading...",class:"swiper-lazy object-cover w-full h-full"},null,8,["src","alt"])):(V(),je(Fp,{key:2}))])]),_:2},1024))),128))]),_:1},8,["modules"]),u.value?(V(),pe("div",{key:1,class:kn(["flex items-center justify-center mb-1 relative py-4",{"text-neutral-50":ce(l),"text-neutral-900":!ce(l)}])},[ye(ai,{variant:"tertiary",class:kn(["!m-0 bg-transparent hover:!bg-transparent-white-500",{"opacity-30":w.value===0}]),onClick:z[0]||(z[0]=ee=>u.value.slidePrev())},{default:Ce(()=>[ye(ce(hM),{class:kn({"text-neutral-50":ce(l),"text-neutral-900":!ce(l)})},null,8,["class"])]),_:1},8,["class"]),de("div",Lte,xt(w.value+1),1),ye(ai,{variant:"tertiary",class:"!m-0 bg-transparent hover:!bg-transparent-white-500",onClick:z[1]||(z[1]=ee=>u.value.slideNext())},{default:Ce(()=>[ye(ce(fM),{class:kn({"text-neutral-50 ":ce(l),"text-neutral-900":!ce(l)})},null,8,["class"])]),_:1})],2)):tt("",!0)],2))}});const Ote={class:"results-count"},Rte={key:0,class:"flex gap-2 items-baseline"},Fte={class:"text-sm text-neutral-500"},$te={key:1,class:"text-sm text-neutral-500"},Ex=rt({__name:"ResultsCount",props:{showingCount:{},total:{},fetchStatus:{}},emits:["loadMore","loadAll"],setup(e,{emit:t}){const i=e;function r(){if(i.fetchStatus!=="fetching"){if(i.total-i.showingCount<1e3){t("loadAll");return}t("loadMore")}}return(s,u)=>(V(),pe("div",Ote,[s.total>0?(V(),pe("div",Rte,[de("p",Fte,[de("b",null,xt(s.showingCount),1),Mt(" of "),de("b",null,xt(s.total),1),Mt(" results ")]),s.showingCount<s.total?(V(),je(ai,{key:0,variant:"tertiary",onClick:r},{default:Ce(()=>[En(s.$slots,"loadMoreButtonLabel",{},()=>[Mt(" Load "+xt(s.total-s.showingCount<1e3?"All":"More"),1)]),as(ye(No,{class:"w-3 h-3 text-blue-600 ml-1"},null,512),[[sa,s.fetchStatus==="fetching"]])]),_:3})):tt("",!0)])):tt("",!0),s.fetchStatus!=="fetching"&&s.total===0?(V(),pe("p",$te," No results found. ")):tt("",!0)]))}}),zte={class:"flex items-baseline gap-2"},Bte=de("label",{for:"location",class:"sr-only"},"Sort",-1),Nte=["value"],jte=["value","disabled"],Ute=rt({__name:"SearchResultsSortSelect",props:{sortOptions:{},selectedSortOption:{},searchQuery:{}},emits:["sortOptionChange"],setup(e,{emit:t}){function i(r){const s=r.target.value??null;t("sortOptionChange",s)}return(r,s)=>(V(),pe("div",zte,[Bte,de("select",{id:"sort",name:"sort",class:"block w-full rounded-md border-0 py-2 pl-3 pr-10 text-neutral-900 ring-1 ring-inset ring-neutral-300 focus:ring-2 focus:ring-indigo-600 text-sm sm:leading-6 max-w-full bg-transparent-white-800",value:r.selectedSortOption,onChange:i},[(V(!0),pe(Nt,null,$n(r.sortOptions,(u,d)=>(V(),pe("option",{key:d,value:d,disabled:d==ce(ys).BEST_MATCH&&!r.searchQuery},xt(u),9,jte))),128))],40,Nte)]))}}),Vte=de("p",{class:"mb-2"},"Something went wrong loading these search results.",-1),Hte=de("span",{class:"uppercase text-xs mr-4"},"Search Text",-1),Gte=de("span",{class:"uppercase text-xs mr-4"},"Sort Type",-1),Wte=de("p",{class:"mt-2"},[Mt(" Try reloading, and if the problem persists, please contact "),de("a",{href:"mailto:latistecharch@umn.edu"},"latistecharch@umn.edu"),Mt(" for help. ")],-1),qte=rt({__name:"SearchErrorNotification",setup(e){const t=Ir();return(i,r)=>(V(),je(cm,{type:"danger",title:"Error"},{default:Ce(()=>{var s;return[Vte,de("div",null,[Hte,de("q",null,xt(((s=ce(t).searchEntry)==null?void 0:s.searchText)??ce(t).query),1)]),de("div",null,[Gte,de("q",null,xt(ce(t).sort??"Default"),1)]),Wte]}),_:1}))}}),Zte=de("span",{class:"sr-only"}," Add Search Results ",-1),Kte={class:"flex-1 flex gap-4 items-center"},Xte=de("label",{class:"sr-only"},"Add to Drawer",-1),Yte=de("option",{disabled:"",value:""},"-- Select a Drawer --",-1),Jte=["value"],Qte=de("p",{class:"my-4 before:absolute before:top-1/2 before:-translate-y-1/2 before:block before:h-[1px] before:w-full before:left-0 before:bg-transparent-black-100 relative leading-none text-center"},[de("span",{class:"bg-neutral-50 relative z-10 px-2"},"or")],-1),ene=["onSubmit"],tne=rt({__name:"AddSearchResultsToDrawerButton",setup(e){const t=Re(!1),i=Re(""),r=Re(""),s=Re("idle"),u=Da(),d=Ir(),l=Le(()=>r.value.trim()&&!u.drawers.some(x=>x.title===r.value));async function m(x){const w=typeof x=="string"?Number.parseInt(x):x;if(isNaN(w))throw new Error("Cannot add to drawer. Drawer ID is not a number.");t.value=!1,s.value="fetching";const I=d.matches.map(C=>C.objectId);await u.addAssetListToDrawer(I,w),s.value="idle",r.value=""}async function g(){if(!l.value)throw new Error(`Cannot create drawer. Drawer name '${r.value}' is invalid'.`);s.value="fetching",t.value=!1;const x=await u.createDrawer(r.value);m(x.id)}return(x,w)=>(V(),pe(Nt,null,[ye(vc,Br({title:"Add Search Results to Drawer"},x.$attrs,{disabled:ce(d).matches.length===0,onClick:w[0]||(w[0]=I=>t.value=!0)}),{default:Ce(()=>[s.value==="fetching"?(V(),je(ce(No),{key:0})):(V(),je(ce(dM),{key:1})),Zte]),_:1},16,["disabled"]),ye(xc,{type:"info",label:"Add Search Results to Drawer",isOpen:t.value,class:"max-w-lg",onClose:w[4]||(w[4]=I=>t.value=!1)},{default:Ce(()=>[de("div",null,[de("form",{class:"flex items-center justify-between gap-2",onSubmit:w[2]||(w[2]=Do(I=>m(i.value),["prevent"]))},[de("div",Kte,[Xte,as(de("select",{"onUpdate:modelValue":w[1]||(w[1]=I=>i.value=I),class:kn(["border border-neutral-200 rounded w-full text-sm",{"text-neutral-400":!i.value}])},[Yte,(V(!0),pe(Nt,null,$n(ce(u).drawers,I=>(V(),pe("option",{key:I.id,value:I.id},xt(I.title),9,Jte))),128))],2),[[wh,i.value]])]),ye(ai,{class:"text-sm",type:"submit",disabled:!i.value},{default:Ce(()=>[Mt(" Add to Drawer ")]),_:1},8,["disabled"])],32),Qte,de("form",{class:"flex items-center justify-between gap-2",onSubmit:Do(g,["prevent"])},[ye(Z1,{modelValue:r.value,"onUpdate:modelValue":w[3]||(w[3]=I=>r.value=I),class:"flex-1 border border-neutral-200 rounded",inputClass:"bg-white placeholder-neutral-400",labelHidden:!0},null,8,["modelValue"]),ye(ai,{type:"submit",class:"text-sm",disabled:!l.value},{default:Ce(()=>[Mt(" Create Drawer ")]),_:1},8,["disabled"])],40,ene)])]),_:1},8,["isOpen"])],64))}}),nne={key:0},ine=de("p",null,"Did you mean?",-1),rne=rt({__name:"DidYouMeanSuggestions",props:{searchTerm:{}},setup(e){const t=e,i=Re({}),r=Ir(),s=lo(),u=Le(()=>Object.keys(i.value).length),d=Le(()=>Object.entries(i.value).reduce((g,[x,w])=>l(g,x,w),t.searchTerm)),l=(g,x,w)=>{const I=new RegExp(`\\b${x}\\b`,"ig");return g.replace(I,w)};async function m(){r.query=d.value;const g=await r.getSearchId();s.push({name:"search",params:{searchId:g}})}return fn(()=>t.searchTerm,async()=>{t.searchTerm&&(i.value=await Hn.getDidYouMeanSuggestions(t.searchTerm))},{immediate:!0}),(g,x)=>u.value?(V(),pe("div",nne,[ine,de("button",{class:"text-blue-500 hover:underline italic",onClick:m},xt(d.value),1)])):tt("",!0)}}),sne={class:"px-4"},ane={class:"flex justify-between items-center my-8"},one={key:1,class:"text-4xl font-bold"},lne={key:0},cne={key:1},une={class:"sm:flex justify-between items-center bg-transparent-black-50 rounded-md mb-4 p-2 flex-wrap"},dne={key:0,class:"flex items-center"},hne=rt({__name:"SearchResultsPage",props:{searchId:{},objectId:{default:null},resultsView:{default:void 0}},setup(e){const t=e,i=Ei(),r=Ir(),s=Iu(),u=lo(),d=Le(()=>{var A;return((A=r.searchEntry)==null?void 0:A.searchText)??r.query}),l=si.instance.base.url,m=Le(()=>`${l}/search/${t.resultsView}/${r.searchId}`),g=Re(!1);r.onBeforeNewSearch(()=>{g.value=!1}),r.onAfterNewSearch(()=>{g.value=!0}),fn(()=>t.searchId,()=>r.search(t.searchId),{immediate:!0});const x=A=>nx.includes(A.id);function w(A){if(!x(A))throw new Error(`Invalid tab id: ${A.id}`);r.setResultsView(A.id),u.replace({query:{...s.query,resultsView:A.id}})}async function I(A){await r.setSortOption(A),u.push({name:"search",params:{searchId:r.searchId},query:{...s.query,sort:A}})}function C(A){const L=s.query.sort;return A===""&&(!L||L===ys.BEST_MATCH)?ys.TITLE:L||ys.BEST_MATCH}return Fn(()=>{const A=t.resultsView||r.resultsView||"grid";r.sort=C(r.currentSearchTerm??r.query),r.setResultsView(A),u.replace({query:{...s.query,resultsView:A}})}),fn([()=>t.objectId,()=>r.status],([A,L])=>{!A||L==="fetching"||Ar(()=>{const $=document.getElementById(`object-${A}`);$&&$.scrollIntoView({block:"center"})})},{immediate:!0}),(A,L)=>(V(),je(co,{class:"search-results-page"},{default:Ce(()=>[de("div",sne,[ce(r).status==="error"?(V(),je(qte,{key:0})):(V(),pe(Nt,{key:1},[de("div",ane,[ce(r).browsingCollectionId?(V(),je(iY,{key:0,collectionId:ce(r).browsingCollectionId},null,8,["collectionId"])):ce(r).isReady?(V(),pe("h2",one,[d.value?(V(),pe("q",lne,xt(d.value),1)):(V(),pe("span",cne,"Search Results"))])):(V(),je(Ao,{key:2,class:"!w-1/2 !h-12"}))]),ce(r).isReady?(V(),je(rne,{key:0,searchTerm:ce(r).currentSearchTerm},null,8,["searchTerm"])):tt("",!0),ye(lP,{labelsClass:"sticky top-14 z-20 search-results-page__tabs -mx-4 px-4 border-b border-neutral-200 pt-4",activeTabId:ce(r).resultsView,onTabChange:w},{default:Ce(()=>{var $,F;return[de("div",une,[ye(Ex,{class:"mb-2 sm:mb-0",fetchStatus:ce(r).status,showingCount:ce(r).matches.length,total:ce(r).totalResults??0,onLoadMore:ce(r).loadMore,onLoadAll:L[0]||(L[0]=z=>ce(r).loadMore({loadAll:!0}))},null,8,["fetchStatus","showingCount","total","onLoadMore"]),ce(r).isReady?(V(),pe("div",dne,[["map","timeline"].includes(ce(r).resultsView)?tt("",!0):(V(),je(Ute,{key:0,sortOptions:ce(r).sortOptions,selectedSortOption:ce(r).sort,searchQuery:(($=ce(r).searchEntry)==null?void 0:$.searchText)??ce(r).query,class:"mr-1",onSortOptionChange:I},null,8,["sortOptions","selectedSortOption","searchQuery"])),(F=ce(i).currentUser)!=null&&F.canManageDrawers?(V(),je(tne,{key:1})):tt("",!0),["map","timeline","gallery"].includes(ce(r).resultsView)?(V(),je(Qk,{key:2,url:m.value},null,8,["url"])):tt("",!0)])):tt("",!0)]),ye(Eo,{id:"grid",label:"Grid"},{default:Ce(()=>{var z;return[ye(hY,{totalResults:ce(r).totalResults,matches:ce(r).matches,status:ce(r).status,showAddToDrawerButton:(z=ce(i).currentUser)==null?void 0:z.canManageDrawers,onLoadMore:L[1]||(L[1]=()=>ce(r).loadMore())},null,8,["totalResults","matches","status","showAddToDrawerButton"])]}),_:1}),ye(Eo,{id:"list",label:"List"},{default:Ce(()=>[ye(TY,{totalResults:ce(r).totalResults,matches:ce(r).matches,status:ce(r).status,onLoadMore:L[2]||(L[2]=()=>ce(r).loadMore())},null,8,["totalResults","matches","status"])]),_:1}),ye(Eo,{id:"timeline",label:"Timeline"},{default:Ce(()=>[ce(r).totalResults&&ce(r).status==="success"?(V(),je(J1,{key:0,totalResults:ce(r).totalResults,matches:ce(r).matches,status:ce(r).status,onLoadMore:L[3]||(L[3]=()=>ce(r).loadMore())},null,8,["totalResults","matches","status"])):tt("",!0)]),_:1}),ye(Eo,{id:"map",label:"Map"},{default:Ce(()=>[ce(r).isReady?(V(),je(Q1,{key:0,totalResults:ce(r).totalResults,matches:ce(r).matches,status:ce(r).status,onLoadMore:L[4]||(L[4]=()=>ce(r).loadMore())},null,8,["totalResults","matches","status"])):tt("",!0)]),_:1}),ye(Eo,{id:"gallery",label:"Gallery"},{default:Ce(()=>[g.value?(V(),je(tw,{key:0,totalResults:ce(r).totalResults??1/0,matches:ce(r).matches,status:ce(r).status,onLoadMore:L[5]||(L[5]=()=>ce(r).loadMore())},null,8,["totalResults","matches","status"])):tt("",!0)]),_:1}),["grid","list"].includes(ce(r).resultsView)&&(ce(r).totalResults??0)>6?(V(),je(Ex,{key:0,class:"mt-4",fetchStatus:ce(r).status,showingCount:ce(r).matches.length,total:ce(r).totalResults??0,onLoadMore:ce(r).loadMore,onLoadAll:L[6]||(L[6]=z=>ce(r).loadMore({loadAll:!0}))},null,8,["fetchStatus","showingCount","total","onLoadMore"])):tt("",!0)]}),_:1},8,["activeTabId"])],64))])]),_:1}))}});function WP(){const e=J3();if(!e)throw new Error("Cannot reset all stores. Pinia not found.");e._s.forEach(t=>t.$reset())}const fne=e=>(ao("data-v-a2825c4e"),e=e(),oo(),e),pne={class:"px-4"},mne=fne(()=>de("header",{class:"font-bold text-center mb-8 pb-4 border-b border-neutral-900"},[de("h2",{class:"text-2xl capitalize"},"Login")],-1)),gne=["onSubmit"],vne={key:0,class:"text-red-500 text-sm italic mb-6 capitalize bg-red-50 p-2 rounded-md border border-red-200 text-center"},_ne={class:"flex flex-col gap-6 mb-12"},yne={key:0,class:"text-red-500 text-sm italic mt-2"},bne={class:"border-none",type:"button"},xne={key:0,class:"text-red-600 text-sm italic mt-2"},wne={key:1,class:"text-center mt-4 text-sm"},Sne=["href"],Tne=rt({__name:"LocalLoginPage",props:{redirectURL:{default:si.instance.base.path}},setup(e){const t=e,i=Re(""),r=Re(""),s=Re(!1),u=Re(!1),d=Nr({username:"",password:"",form:""}),l=Re(!1),m=Ei(),g=Da(),x=lo(),w=async()=>{if(d.username="",d.password="",l.value=!1,i.value||(d.username="Username required"),r.value||(d.password="Password required"),!i.value||!r.value)return;u.value=!0;const{status:C,message:A}=await Hn.loginAsGuest({username:i.value,password:r.value});if(r.value="",u.value=!1,C==="error"){d.form=A,l.value=!0;return}C==="success"&&(d.form="",Hn.clearCache(),WP(),await m.init(),await g.init(),x.push(t.redirectURL))},I=Le(()=>encodeURIComponent(t.redirectURL));return Fn(()=>{m.isLoggedIn&&x.push(t.redirectURL)}),(C,A)=>(V(),je(co,null,{default:Ce(()=>[de("div",pne,[de("section",{class:kn(["max-w-md border border-neutral-900 rounded-lg mx-auto my-12 p-8",{"has-form-error":l.value}])},[mne,de("form",{onSubmit:Do(w,["prevent"])},[d.form?(V(),pe("p",vne,xt(d.form),1)):tt("",!0),de("div",_ne,[de("div",null,[ye(Ja,{id:"username",modelValue:i.value,"onUpdate:modelValue":A[0]||(A[0]=L=>i.value=L),label:"Username",inputClass:{"!border-red-500 !bg-red-50":!!d.username},type:"string","aria-required":"true"},null,8,["modelValue","inputClass"]),d.username?(V(),pe("p",yne,xt(d.username),1)):tt("",!0)]),de("div",null,[ye(Ja,{id:"password",modelValue:r.value,"onUpdate:modelValue":A[3]||(A[3]=L=>r.value=L),label:"Password",inputClass:{"!border-red-500 !bg-red-50":!!d.password},type:s.value?"text":"password","aria-required":"true"},{append:Ce(()=>[de("button",bne,[s.value?(V(),je(ce(UN),{key:1,onClick:A[2]||(A[2]=L=>s.value=!1)})):(V(),je(ce(ZN),{key:0,onClick:A[1]||(A[1]=L=>s.value=!0)}))])]),_:1},8,["modelValue","inputClass","type"]),d.password?(V(),pe("p",xne,xt(d.password),1)):tt("",!0)])]),ye(ai,{variant:"primary",type:"submit",class:kn(["w-full",{"cursor-not-allowed opacity-50 !border-neutral-300":!i.value||!r.value}]),disabled:!i.value||!r.value},{default:Ce(()=>[Mt(" Login "),u.value?(V(),je(ce(No),{key:0,class:"animate-spin ml-2 h-4 w-4"})):tt("",!0)]),_:1},8,["class","disabled"]),ce(m).instance.useCentralAuth&&ce(m).instance.centralAuthLabel?(V(),pe("div",wne,[de("a",{href:`${ce(si).instance.base.url}/loginManager/remoteLogin/?redirect=${I.value}`}," Sign In with "+xt(ce(m).instance.centralAuthLabel)+" Login ",9,Sne)])):tt("",!0)],40,gne)],2)])]),_:1}))}});const Ene=sn(Tne,[["__scopeId","data-v-a2825c4e"]]),Ine={key:0,class:"static-page__content p-4 lg:p-8 mx-auto flex-1 w-full max-w-screen-xl"},Cne=["href"],Ane={class:"prose prose-neutral mx-auto"},Mne={class:"text-4xl font-bold text-center"},kne=rt({__name:"StaticContentPage",props:{pageId:{}},setup(e){const t=e,i=Ei(),r=si.instance.base.path,s=Re(null),u=Le(()=>{var d,l;return((d=i.currentUser)==null?void 0:d.isAdmin)||((l=i.currentUser)==null?void 0:l.isSuperAdmin)});return fn(()=>t.pageId,async()=>{s.value=await Hn.getStaticPage(t.pageId)},{immediate:!0}),(d,l)=>(V(),je(co,null,{"custom-header":Ce(()=>[ce(i).customHeader?(V(),je(kk,{key:0})):tt("",!0)]),footer:Ce(()=>[ce(i).customFooter?(V(),je(Mk,{key:0})):tt("",!0)]),default:Ce(()=>[s.value?(V(),pe("div",Ine,[u.value?(V(),pe("a",{key:0,href:`${ce(r)}/instances/editPage/${d.pageId}`,class:"float-right uppercase text-xs font-medium bg-blue-100 px-2 py-1 rounded-md no-underline hover:bg-blue-600 hover:text-blue-100 hover:no-underline"}," Edit Page ",8,Cne)):tt("",!0),de("div",Ane,[de("h1",Mne,xt(s.value.title||"Untitled"),1),ye(Oo,{html:s.value.content??"",class:"w-full"},null,8,["html"])])])):tt("",!0)]),_:1}))}});const Pne=sn(kne,[["__scopeId","data-v-e02245fa"]]),Dne={class:"p-8"},Lne={class:"text-8xl font-bold text-neutral-200"},One={class:"text-4xl mb-8"},Rne={class:"my-4"},rI=rt({__name:"ErrorPage",props:{errorCode:{default:404}},setup(e){const t=e,i={400:{message:"Bad Request",detailedMessage:"We couldn't understand your request."},404:{message:"Page not found",detailedMessage:"We couldn't find this page."},500:{message:"Internal Server Error",detailedMessage:"Something went wrong on our end."}};function r(u){var d;return((d=i[u])==null?void 0:d.message)||"Unknown Error"}function s(u){var d;return((d=i[u])==null?void 0:d.detailedMessage)||"Something went wrong."}return aP(r(t.errorCode)),(u,d)=>(V(),je(co,null,{default:Ce(()=>[de("div",Dne,[de("h1",Lne,xt(u.errorCode),1),de("h2",One,xt(r(u.errorCode)),1),de("p",Rne,xt(s(u.errorCode)),1),ye(ai,{href:ce(si).instance.base.url,icon:"home",iconPosition:"start"},{default:Ce(()=>[Mt(" Go Home ")]),_:1},8,["href"])])]),_:1}))}}),Fne=de("span",{class:"sr-only"},"Delete drawer",-1),$ne=rt({__name:"DeleteDrawerButton",props:{drawer:{}},setup(e){const t=e,i=Da(),r=Re(!1);async function s(){i.deleteDrawer(t.drawer.id)}return(u,d)=>(V(),pe(Nt,null,[de("button",Br({class:"px-2 py-4 inline-flex items-center justify-center text-transparent-black-400 hover:text-neutral-900",type:"button"},u.$attrs,{onClick:d[0]||(d[0]=l=>r.value=!0)}),[Fne,ye(ce(om),{class:"!w-5 !h-5"})],16),ye(K1,{isOpen:r.value,title:"Delete Drawer",type:"danger",confirmLabel:"Delete",onClose:d[1]||(d[1]=l=>r.value=!1),onConfirm:s},{default:Ce(()=>[de("p",null,[Mt(" Are you sure you want to delete drawer "),de("b",null,xt(u.drawer.title),1),Mt("? This action cannot be undone. ")])]),_:1},8,["isOpen"])],64))}}),zne=["onSubmit"],Bne={class:"flex justify-end gap-2 items-center"},Nne=rt({__name:"CreateDrawerButton",setup(e){const t=Re(!1),i=Re(""),r=Re(!1),s=Da(),u=Le(()=>i.value.trim()),d=Le(()=>i.value.length>0),l=Le(()=>!s.drawers.some(I=>I.title.trim()===u.value)),m=Le(()=>d.value&&l.value);function g(){s.createDrawer(u.value),t.value=!1,x()}function x(){i.value="",r.value=!1}function w(){t.value=!1,x()}return(I,C)=>(V(),pe(Nt,null,[ye(ai,{onClick:C[0]||(C[0]=A=>t.value=!0)},{default:Ce(()=>[Mt("Create Drawer")]),_:1}),ye(xc,{isOpen:t.value,label:"Create Drawer",class:"max-w-lg mx-auto m-4",onClose:w},{default:Ce(()=>[de("form",{class:"flex flex-col gap-6",onSubmit:Do(g,["prevent"])},[ye(Z1,{modelValue:i.value,"onUpdate:modelValue":C[1]||(C[1]=A=>i.value=A)},null,8,["modelValue"]),de("div",Bne,[ye(ai,{variant:"tertiary",onClick:w},{default:Ce(()=>[Mt("Cancel")]),_:1}),ye(ai,{type:"submit",variant:"primary",disabled:!m.value},{default:Ce(()=>[Mt(" Create ")]),_:1},8,["disabled"])])],40,zne)]),_:1},8,["isOpen"])],64))}}),jne=e=>(ao("data-v-b6643f72"),e=e(),oo(),e),Une={class:"p-8 px-4"},Vne=jne(()=>de("h1",{class:"text-4xl font-bold my-8"},"Drawers",-1)),Hne={key:0,class:"mb-4"},Gne={key:"no-drawers"},Wne={class:"transition-colors duration-150"},qne=rt({__name:"AllDrawersPage",setup(e){nm(m=>({"4ff35b63":i.value,"4ffa2e49":l.value}));const t=Re(null),i=Re(1),r=Ei(),s=Da(),u=Le(()=>r.currentUser),d=Le(()=>[...s.drawers].sort((m,g)=>m.title.localeCompare(g.title)));k_(t,m=>{const[g]=m,{width:x}=g.contentRect;x<640&&(i.value=1),x<768&&(i.value=2),x<1024&&(i.value=3),x>=1024&&(i.value=4)});const l=Le(()=>Math.ceil(d.value.length/i.value));return(m,g)=>(V(),je(co,null,{default:Ce(()=>{var x;return[de("div",Une,[Vne,(x=u.value)!=null&&x.canManageDrawers?(V(),pe("nav",Hne,[ye(Nne)])):tt("",!0),de("div",{ref_key:"gridContainer",ref:t,class:"grid grid-cols-2 gap-2"},[ye(a1,{name:"fade"},{default:Ce(()=>[ce(s).isReady&&!d.value.length?(V(),pe("p",Gne," No drawers. ")):tt("",!0),(V(!0),pe(Nt,null,$n(d.value,w=>{var I;return V(),pe("article",{key:w.id,class:"relative drawer-list-item rounded group transition-colors duration-150"},[(I=u.value)!=null&&I.canManageDrawers?(V(),je($ne,{key:0,drawer:w,class:"float-right"},null,8,["drawer"])):tt("",!0),ye(os,{class:"p-4 block hover:no-underline w-full h-full",to:`/drawers/viewDrawer/${w.id}`},{default:Ce(()=>[de("h2",Wne,xt(w.title),1)]),_:2},1032,["to"])])}),128))]),_:1})],512)])]}),_:1}))}});const Zne=sn(qne,[["__scopeId","data-v-b6643f72"]]);var qP={exports:{}};const Kne=LA(X3);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function sI(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),i.push.apply(i,r)}return i}function $o(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?sI(Object(i),!0).forEach(function(r){Xne(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):sI(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}function _v(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_v=function(t){return typeof t}:_v=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_v(e)}function Xne(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Pa(){return Pa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},Pa.apply(this,arguments)}function Yne(e,t){if(e==null)return{};var i={},r=Object.keys(e),s,u;for(u=0;u<r.length;u++)s=r[u],!(t.indexOf(s)>=0)&&(i[s]=e[s]);return i}function Jne(e,t){if(e==null)return{};var i=Yne(e,t),r,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(s=0;s<u.length;s++)r=u[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Qne(e){return eie(e)||tie(e)||nie(e)||iie()}function eie(e){if(Array.isArray(e))return Ix(e)}function tie(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function nie(e,t){if(e){if(typeof e=="string")return Ix(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ix(e,t)}}function Ix(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function iie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var rie="1.14.0";function ul(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var yl=ul(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ym=ul(/Edge/i),aI=ul(/firefox/i),yp=ul(/safari/i)&&!ul(/chrome/i)&&!ul(/android/i),ZP=ul(/iP(ad|od|hone)/i),sie=ul(/chrome/i)&&ul(/android/i),KP={capture:!1,passive:!1};function fi(e,t,i){e.addEventListener(t,i,!yl&&KP)}function oi(e,t,i){e.removeEventListener(t,i,!yl&&KP)}function e_(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function aie(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Ga(e,t,i,r){if(e){i=i||document;do{if(t!=null&&(t[0]===">"?e.parentNode===i&&e_(e,t):e_(e,t))||r&&e===i)return e;if(e===i)break}while(e=aie(e))}return null}var oI=/\s+/g;function rr(e,t,i){if(e&&t)if(e.classList)e.classList[i?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(oI," ").replace(" "+t+" "," ");e.className=(r+(i?" "+t:"")).replace(oI," ")}}function Mn(e,t,i){var r=e&&e.style;if(r){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),t===void 0?i:i[t];!(t in r)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),r[t]=i+(typeof i=="string"?"":"px")}}function hu(e,t){var i="";if(typeof e=="string")i=e;else do{var r=Mn(e,"transform");r&&r!=="none"&&(i=r+" "+i)}while(!t&&(e=e.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(i)}function XP(e,t,i){if(e){var r=e.getElementsByTagName(t),s=0,u=r.length;if(i)for(;s<u;s++)i(r[s],s);return r}return[]}function Po(){var e=document.scrollingElement;return e||document.documentElement}function Ji(e,t,i,r,s){if(!(!e.getBoundingClientRect&&e!==window)){var u,d,l,m,g,x,w;if(e!==window&&e.parentNode&&e!==Po()?(u=e.getBoundingClientRect(),d=u.top,l=u.left,m=u.bottom,g=u.right,x=u.height,w=u.width):(d=0,l=0,m=window.innerHeight,g=window.innerWidth,x=window.innerHeight,w=window.innerWidth),(t||i)&&e!==window&&(s=s||e.parentNode,!yl))do if(s&&s.getBoundingClientRect&&(Mn(s,"transform")!=="none"||i&&Mn(s,"position")!=="static")){var I=s.getBoundingClientRect();d-=I.top+parseInt(Mn(s,"border-top-width")),l-=I.left+parseInt(Mn(s,"border-left-width")),m=d+u.height,g=l+u.width;break}while(s=s.parentNode);if(r&&e!==window){var C=hu(s||e),A=C&&C.a,L=C&&C.d;C&&(d/=L,l/=A,w/=A,x/=L,m=d+x,g=l+w)}return{top:d,left:l,bottom:m,right:g,width:w,height:x}}}function lI(e,t,i){for(var r=tc(e,!0),s=Ji(e)[t];r;){var u=Ji(r)[i],d=void 0;if(i==="top"||i==="left"?d=s>=u:d=s<=u,!d)return r;if(r===Po())break;r=tc(r,!1)}return!1}function gh(e,t,i,r){for(var s=0,u=0,d=e.children;u<d.length;){if(d[u].style.display!=="none"&&d[u]!==jn.ghost&&(r||d[u]!==jn.dragged)&&Ga(d[u],i.draggable,e,!1)){if(s===t)return d[u];s++}u++}return null}function nw(e,t){for(var i=e.lastElementChild;i&&(i===jn.ghost||Mn(i,"display")==="none"||t&&!e_(i,t));)i=i.previousElementSibling;return i||null}function dr(e,t){var i=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==jn.clone&&(!t||e_(e,t))&&i++;return i}function cI(e){var t=0,i=0,r=Po();if(e)do{var s=hu(e),u=s.a,d=s.d;t+=e.scrollLeft*u,i+=e.scrollTop*d}while(e!==r&&(e=e.parentNode));return[t,i]}function oie(e,t){for(var i in e)if(e.hasOwnProperty(i)){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[i][r])return Number(i)}return-1}function tc(e,t){if(!e||!e.getBoundingClientRect)return Po();var i=e,r=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var s=Mn(i);if(i.clientWidth<i.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return Po();if(r||t)return i;r=!0}}while(i=i.parentNode);return Po()}function lie(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function ob(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var bp;function YP(e,t){return function(){if(!bp){var i=arguments,r=this;i.length===1?e.call(r,i[0]):e.apply(r,i),bp=setTimeout(function(){bp=void 0},t)}}}function cie(){clearTimeout(bp),bp=void 0}function JP(e,t,i){e.scrollLeft+=t,e.scrollTop+=i}function iw(e){var t=window.Polymer,i=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):i?i(e).clone(!0)[0]:e.cloneNode(!0)}function uI(e,t){Mn(e,"position","absolute"),Mn(e,"top",t.top),Mn(e,"left",t.left),Mn(e,"width",t.width),Mn(e,"height",t.height)}function lb(e){Mn(e,"position",""),Mn(e,"top",""),Mn(e,"left",""),Mn(e,"width",""),Mn(e,"height","")}var is="Sortable"+new Date().getTime();function uie(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(s){if(!(Mn(s,"display")==="none"||s===jn.ghost)){e.push({target:s,rect:Ji(s)});var u=$o({},e[e.length-1].rect);if(s.thisAnimationDuration){var d=hu(s,!0);d&&(u.top-=d.f,u.left-=d.e)}s.fromRect=u}})}},addAnimationState:function(r){e.push(r)},removeAnimationState:function(r){e.splice(oie(e,{target:r}),1)},animateAll:function(r){var s=this;if(!this.options.animation){clearTimeout(t),typeof r=="function"&&r();return}var u=!1,d=0;e.forEach(function(l){var m=0,g=l.target,x=g.fromRect,w=Ji(g),I=g.prevFromRect,C=g.prevToRect,A=l.rect,L=hu(g,!0);L&&(w.top-=L.f,w.left-=L.e),g.toRect=w,g.thisAnimationDuration&&ob(I,w)&&!ob(x,w)&&(A.top-w.top)/(A.left-w.left)===(x.top-w.top)/(x.left-w.left)&&(m=hie(A,I,C,s.options)),ob(w,x)||(g.prevFromRect=x,g.prevToRect=w,m||(m=s.options.animation),s.animate(g,A,w,m)),m&&(u=!0,d=Math.max(d,m),clearTimeout(g.animationResetTimer),g.animationResetTimer=setTimeout(function(){g.animationTime=0,g.prevFromRect=null,g.fromRect=null,g.prevToRect=null,g.thisAnimationDuration=null},m),g.thisAnimationDuration=m)}),clearTimeout(t),u?t=setTimeout(function(){typeof r=="function"&&r()},d):typeof r=="function"&&r(),e=[]},animate:function(r,s,u,d){if(d){Mn(r,"transition",""),Mn(r,"transform","");var l=hu(this.el),m=l&&l.a,g=l&&l.d,x=(s.left-u.left)/(m||1),w=(s.top-u.top)/(g||1);r.animatingX=!!x,r.animatingY=!!w,Mn(r,"transform","translate3d("+x+"px,"+w+"px,0)"),this.forRepaintDummy=die(r),Mn(r,"transition","transform "+d+"ms"+(this.options.easing?" "+this.options.easing:"")),Mn(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Mn(r,"transition",""),Mn(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},d)}}}}function die(e){return e.offsetWidth}function hie(e,t,i,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))*r.animation}var Pd=[],cb={initializeByDefault:!0},bm={mount:function(t){for(var i in cb)cb.hasOwnProperty(i)&&!(i in t)&&(t[i]=cb[i]);Pd.forEach(function(r){if(r.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Pd.push(t)},pluginEvent:function(t,i,r){var s=this;this.eventCanceled=!1,r.cancel=function(){s.eventCanceled=!0};var u=t+"Global";Pd.forEach(function(d){i[d.pluginName]&&(i[d.pluginName][u]&&i[d.pluginName][u]($o({sortable:i},r)),i.options[d.pluginName]&&i[d.pluginName][t]&&i[d.pluginName][t]($o({sortable:i},r)))})},initializePlugins:function(t,i,r,s){Pd.forEach(function(l){var m=l.pluginName;if(!(!t.options[m]&&!l.initializeByDefault)){var g=new l(t,i,t.options);g.sortable=t,g.options=t.options,t[m]=g,Pa(r,g.defaults)}});for(var u in t.options)if(t.options.hasOwnProperty(u)){var d=this.modifyOption(t,u,t.options[u]);typeof d<"u"&&(t.options[u]=d)}},getEventProperties:function(t,i){var r={};return Pd.forEach(function(s){typeof s.eventProperties=="function"&&Pa(r,s.eventProperties.call(i[s.pluginName],t))}),r},modifyOption:function(t,i,r){var s;return Pd.forEach(function(u){t[u.pluginName]&&u.optionListeners&&typeof u.optionListeners[i]=="function"&&(s=u.optionListeners[i].call(t[u.pluginName],r))}),s}};function ep(e){var t=e.sortable,i=e.rootEl,r=e.name,s=e.targetEl,u=e.cloneEl,d=e.toEl,l=e.fromEl,m=e.oldIndex,g=e.newIndex,x=e.oldDraggableIndex,w=e.newDraggableIndex,I=e.originalEvent,C=e.putSortable,A=e.extraEventProperties;if(t=t||i&&i[is],!!t){var L,$=t.options,F="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!yl&&!ym?L=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(L=document.createEvent("Event"),L.initEvent(r,!0,!0)),L.to=d||i,L.from=l||i,L.item=s||i,L.clone=u,L.oldIndex=m,L.newIndex=g,L.oldDraggableIndex=x,L.newDraggableIndex=w,L.originalEvent=I,L.pullMode=C?C.lastPutMode:void 0;var z=$o($o({},A),bm.getEventProperties(r,t));for(var ee in z)L[ee]=z[ee];i&&i.dispatchEvent(L),$[F]&&$[F].call(t,L)}}var fie=["evt"],Ds=function(t,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=r.evt,u=Jne(r,fie);bm.pluginEvent.bind(jn)(t,i,$o({dragEl:rn,parentEl:cr,ghostEl:Xn,rootEl:Yi,nextEl:nu,lastDownEl:yv,cloneEl:ur,cloneHidden:Yl,dragStarted:tp,putSortable:Wr,activeSortable:jn.active,originalEvent:s,oldIndex:Ud,oldDraggableIndex:xp,newIndex:Zs,newDraggableIndex:Zl,hideGhostForTarget:nD,unhideGhostForTarget:iD,cloneNowHidden:function(){Yl=!0},cloneNowShown:function(){Yl=!1},dispatchSortableEvent:function(l){_s({sortable:i,name:l,originalEvent:s})}},u))};function _s(e){ep($o({putSortable:Wr,cloneEl:ur,targetEl:rn,rootEl:Yi,oldIndex:Ud,oldDraggableIndex:xp,newIndex:Zs,newDraggableIndex:Zl},e))}var rn,cr,Xn,Yi,nu,yv,ur,Yl,Ud,Zs,xp,Zl,Yg,Wr,Bd=!1,t_=!1,n_=[],Qc,Ua,ub,db,dI,hI,tp,Dd,wp,Sp=!1,Jg=!1,bv,ts,hb=[],Cx=!1,i_=[],ty=typeof document<"u",Qg=ZP,fI=ym||yl?"cssFloat":"float",pie=ty&&!sie&&!ZP&&"draggable"in document.createElement("div"),QP=function(){if(ty){if(yl)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),eD=function(t,i){var r=Mn(t),s=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),u=gh(t,0,i),d=gh(t,1,i),l=u&&Mn(u),m=d&&Mn(d),g=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Ji(u).width,x=m&&parseInt(m.marginLeft)+parseInt(m.marginRight)+Ji(d).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(u&&l.float&&l.float!=="none"){var w=l.float==="left"?"left":"right";return d&&(m.clear==="both"||m.clear===w)?"vertical":"horizontal"}return u&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||g>=s&&r[fI]==="none"||d&&r[fI]==="none"&&g+x>s)?"vertical":"horizontal"},mie=function(t,i,r){var s=r?t.left:t.top,u=r?t.right:t.bottom,d=r?t.width:t.height,l=r?i.left:i.top,m=r?i.right:i.bottom,g=r?i.width:i.height;return s===l||u===m||s+d/2===l+g/2},gie=function(t,i){var r;return n_.some(function(s){var u=s[is].options.emptyInsertThreshold;if(!(!u||nw(s))){var d=Ji(s),l=t>=d.left-u&&t<=d.right+u,m=i>=d.top-u&&i<=d.bottom+u;if(l&&m)return r=s}}),r},tD=function(t){function i(u,d){return function(l,m,g,x){var w=l.options.group.name&&m.options.group.name&&l.options.group.name===m.options.group.name;if(u==null&&(d||w))return!0;if(u==null||u===!1)return!1;if(d&&u==="clone")return u;if(typeof u=="function")return i(u(l,m,g,x),d)(l,m,g,x);var I=(d?l:m).options.group.name;return u===!0||typeof u=="string"&&u===I||u.join&&u.indexOf(I)>-1}}var r={},s=t.group;(!s||_v(s)!="object")&&(s={name:s}),r.name=s.name,r.checkPull=i(s.pull,!0),r.checkPut=i(s.put),r.revertClone=s.revertClone,t.group=r},nD=function(){!QP&&Xn&&Mn(Xn,"display","none")},iD=function(){!QP&&Xn&&Mn(Xn,"display","")};ty&&document.addEventListener("click",function(e){if(t_)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),t_=!1,!1},!0);var eu=function(t){if(rn){t=t.touches?t.touches[0]:t;var i=gie(t.clientX,t.clientY);if(i){var r={};for(var s in t)t.hasOwnProperty(s)&&(r[s]=t[s]);r.target=r.rootEl=i,r.preventDefault=void 0,r.stopPropagation=void 0,i[is]._onDragOver(r)}}},vie=function(t){rn&&rn.parentNode[is]._isOutsideThisEl(t.target)};function jn(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Pa({},t),e[is]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return eD(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(d,l){d.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:jn.supportPointer!==!1&&"PointerEvent"in window&&!yp,emptyInsertThreshold:5};bm.initializePlugins(this,e,i);for(var r in i)!(r in t)&&(t[r]=i[r]);tD(t);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=t.forceFallback?!1:pie,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?fi(e,"pointerdown",this._onTapStart):(fi(e,"mousedown",this._onTapStart),fi(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(fi(e,"dragover",this),fi(e,"dragenter",this)),n_.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Pa(this,uie())}jn.prototype={constructor:jn,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Dd=null)},_getDirection:function(t,i){return typeof this.options.direction=="function"?this.options.direction.call(this,t,i,rn):this.options.direction},_onTapStart:function(t){if(t.cancelable){var i=this,r=this.el,s=this.options,u=s.preventOnFilter,d=t.type,l=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,m=(l||t).target,g=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||m,x=s.filter;if(Eie(r),!rn&&!(/mousedown|pointerdown/.test(d)&&t.button!==0||s.disabled)&&!g.isContentEditable&&!(!this.nativeDraggable&&yp&&m&&m.tagName.toUpperCase()==="SELECT")&&(m=Ga(m,s.draggable,r,!1),!(m&&m.animated)&&yv!==m)){if(Ud=dr(m),xp=dr(m,s.draggable),typeof x=="function"){if(x.call(this,t,m,this)){_s({sortable:i,rootEl:g,name:"filter",targetEl:m,toEl:r,fromEl:r}),Ds("filter",i,{evt:t}),u&&t.cancelable&&t.preventDefault();return}}else if(x&&(x=x.split(",").some(function(w){if(w=Ga(g,w.trim(),r,!1),w)return _s({sortable:i,rootEl:w,name:"filter",targetEl:m,fromEl:r,toEl:r}),Ds("filter",i,{evt:t}),!0}),x)){u&&t.cancelable&&t.preventDefault();return}s.handle&&!Ga(g,s.handle,r,!1)||this._prepareDragStart(t,l,m)}}},_prepareDragStart:function(t,i,r){var s=this,u=s.el,d=s.options,l=u.ownerDocument,m;if(r&&!rn&&r.parentNode===u){var g=Ji(r);if(Yi=u,rn=r,cr=rn.parentNode,nu=rn.nextSibling,yv=r,Yg=d.group,jn.dragged=rn,Qc={target:rn,clientX:(i||t).clientX,clientY:(i||t).clientY},dI=Qc.clientX-g.left,hI=Qc.clientY-g.top,this._lastX=(i||t).clientX,this._lastY=(i||t).clientY,rn.style["will-change"]="all",m=function(){if(Ds("delayEnded",s,{evt:t}),jn.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!aI&&s.nativeDraggable&&(rn.draggable=!0),s._triggerDragStart(t,i),_s({sortable:s,name:"choose",originalEvent:t}),rr(rn,d.chosenClass,!0)},d.ignore.split(",").forEach(function(x){XP(rn,x.trim(),fb)}),fi(l,"dragover",eu),fi(l,"mousemove",eu),fi(l,"touchmove",eu),fi(l,"mouseup",s._onDrop),fi(l,"touchend",s._onDrop),fi(l,"touchcancel",s._onDrop),aI&&this.nativeDraggable&&(this.options.touchStartThreshold=4,rn.draggable=!0),Ds("delayStart",this,{evt:t}),d.delay&&(!d.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(ym||yl))){if(jn.eventCanceled){this._onDrop();return}fi(l,"mouseup",s._disableDelayedDrag),fi(l,"touchend",s._disableDelayedDrag),fi(l,"touchcancel",s._disableDelayedDrag),fi(l,"mousemove",s._delayedDragTouchMoveHandler),fi(l,"touchmove",s._delayedDragTouchMoveHandler),d.supportPointer&&fi(l,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(m,d.delay)}else m()}},_delayedDragTouchMoveHandler:function(t){var i=t.touches?t.touches[0]:t;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){rn&&fb(rn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;oi(t,"mouseup",this._disableDelayedDrag),oi(t,"touchend",this._disableDelayedDrag),oi(t,"touchcancel",this._disableDelayedDrag),oi(t,"mousemove",this._delayedDragTouchMoveHandler),oi(t,"touchmove",this._delayedDragTouchMoveHandler),oi(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,i){i=i||t.pointerType=="touch"&&t,!this.nativeDraggable||i?this.options.supportPointer?fi(document,"pointermove",this._onTouchMove):i?fi(document,"touchmove",this._onTouchMove):fi(document,"mousemove",this._onTouchMove):(fi(rn,"dragend",this),fi(Yi,"dragstart",this._onDragStart));try{document.selection?xv(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,i){if(Bd=!1,Yi&&rn){Ds("dragStarted",this,{evt:i}),this.nativeDraggable&&fi(document,"dragover",vie);var r=this.options;!t&&rr(rn,r.dragClass,!1),rr(rn,r.ghostClass,!0),jn.active=this,t&&this._appendGhost(),_s({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(Ua){this._lastX=Ua.clientX,this._lastY=Ua.clientY,nD();for(var t=document.elementFromPoint(Ua.clientX,Ua.clientY),i=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Ua.clientX,Ua.clientY),t!==i);)i=t;if(rn.parentNode[is]._isOutsideThisEl(t),i)do{if(i[is]){var r=void 0;if(r=i[is]._onDragOver({clientX:Ua.clientX,clientY:Ua.clientY,target:t,rootEl:i}),r&&!this.options.dragoverBubble)break}t=i}while(i=i.parentNode);iD()}},_onTouchMove:function(t){if(Qc){var i=this.options,r=i.fallbackTolerance,s=i.fallbackOffset,u=t.touches?t.touches[0]:t,d=Xn&&hu(Xn,!0),l=Xn&&d&&d.a,m=Xn&&d&&d.d,g=Qg&&ts&&cI(ts),x=(u.clientX-Qc.clientX+s.x)/(l||1)+(g?g[0]-hb[0]:0)/(l||1),w=(u.clientY-Qc.clientY+s.y)/(m||1)+(g?g[1]-hb[1]:0)/(m||1);if(!jn.active&&!Bd){if(r&&Math.max(Math.abs(u.clientX-this._lastX),Math.abs(u.clientY-this._lastY))<r)return;this._onDragStart(t,!0)}if(Xn){d?(d.e+=x-(ub||0),d.f+=w-(db||0)):d={a:1,b:0,c:0,d:1,e:x,f:w};var I="matrix(".concat(d.a,",").concat(d.b,",").concat(d.c,",").concat(d.d,",").concat(d.e,",").concat(d.f,")");Mn(Xn,"webkitTransform",I),Mn(Xn,"mozTransform",I),Mn(Xn,"msTransform",I),Mn(Xn,"transform",I),ub=x,db=w,Ua=u}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Xn){var t=this.options.fallbackOnBody?document.body:Yi,i=Ji(rn,!0,Qg,!0,t),r=this.options;if(Qg){for(ts=t;Mn(ts,"position")==="static"&&Mn(ts,"transform")==="none"&&ts!==document;)ts=ts.parentNode;ts!==document.body&&ts!==document.documentElement?(ts===document&&(ts=Po()),i.top+=ts.scrollTop,i.left+=ts.scrollLeft):ts=Po(),hb=cI(ts)}Xn=rn.cloneNode(!0),rr(Xn,r.ghostClass,!1),rr(Xn,r.fallbackClass,!0),rr(Xn,r.dragClass,!0),Mn(Xn,"transition",""),Mn(Xn,"transform",""),Mn(Xn,"box-sizing","border-box"),Mn(Xn,"margin",0),Mn(Xn,"top",i.top),Mn(Xn,"left",i.left),Mn(Xn,"width",i.width),Mn(Xn,"height",i.height),Mn(Xn,"opacity","0.8"),Mn(Xn,"position",Qg?"absolute":"fixed"),Mn(Xn,"zIndex","100000"),Mn(Xn,"pointerEvents","none"),jn.ghost=Xn,t.appendChild(Xn),Mn(Xn,"transform-origin",dI/parseInt(Xn.style.width)*100+"% "+hI/parseInt(Xn.style.height)*100+"%")}},_onDragStart:function(t,i){var r=this,s=t.dataTransfer,u=r.options;if(Ds("dragStart",this,{evt:t}),jn.eventCanceled){this._onDrop();return}Ds("setupClone",this),jn.eventCanceled||(ur=iw(rn),ur.draggable=!1,ur.style["will-change"]="",this._hideClone(),rr(ur,this.options.chosenClass,!1),jn.clone=ur),r.cloneId=xv(function(){Ds("clone",r),!jn.eventCanceled&&(r.options.removeCloneOnHide||Yi.insertBefore(ur,rn),r._hideClone(),_s({sortable:r,name:"clone"}))}),!i&&rr(rn,u.dragClass,!0),i?(t_=!0,r._loopId=setInterval(r._emulateDragOver,50)):(oi(document,"mouseup",r._onDrop),oi(document,"touchend",r._onDrop),oi(document,"touchcancel",r._onDrop),s&&(s.effectAllowed="move",u.setData&&u.setData.call(r,s,rn)),fi(document,"drop",r),Mn(rn,"transform","translateZ(0)")),Bd=!0,r._dragStartId=xv(r._dragStarted.bind(r,i,t)),fi(document,"selectstart",r),tp=!0,yp&&Mn(document.body,"user-select","none")},_onDragOver:function(t){var i=this.el,r=t.target,s,u,d,l=this.options,m=l.group,g=jn.active,x=Yg===m,w=l.sort,I=Wr||g,C,A=this,L=!1;if(Cx)return;function $(lt,st){Ds(lt,A,$o({evt:t,isOwner:x,axis:C?"vertical":"horizontal",revert:d,dragRect:s,targetRect:u,canSort:w,fromSortable:I,target:r,completed:z,onMove:function(It,nt){return ev(Yi,i,rn,s,It,Ji(It),t,nt)},changed:ee},st))}function F(){$("dragOverAnimationCapture"),A.captureAnimationState(),A!==I&&I.captureAnimationState()}function z(lt){return $("dragOverCompleted",{insertion:lt}),lt&&(x?g._hideClone():g._showClone(A),A!==I&&(rr(rn,Wr?Wr.options.ghostClass:g.options.ghostClass,!1),rr(rn,l.ghostClass,!0)),Wr!==A&&A!==jn.active?Wr=A:A===jn.active&&Wr&&(Wr=null),I===A&&(A._ignoreWhileAnimating=r),A.animateAll(function(){$("dragOverAnimationComplete"),A._ignoreWhileAnimating=null}),A!==I&&(I.animateAll(),I._ignoreWhileAnimating=null)),(r===rn&&!rn.animated||r===i&&!r.animated)&&(Dd=null),!l.dragoverBubble&&!t.rootEl&&r!==document&&(rn.parentNode[is]._isOutsideThisEl(t.target),!lt&&eu(t)),!l.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),L=!0}function ee(){Zs=dr(rn),Zl=dr(rn,l.draggable),_s({sortable:A,name:"change",toEl:i,newIndex:Zs,newDraggableIndex:Zl,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),r=Ga(r,l.draggable,i,!0),$("dragOver"),jn.eventCanceled)return L;if(rn.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||A._ignoreWhileAnimating===r)return z(!1);if(t_=!1,g&&!l.disabled&&(x?w||(d=cr!==Yi):Wr===this||(this.lastPutMode=Yg.checkPull(this,g,rn,t))&&m.checkPut(this,g,rn,t))){if(C=this._getDirection(t,r)==="vertical",s=Ji(rn),$("dragOverValid"),jn.eventCanceled)return L;if(d)return cr=Yi,F(),this._hideClone(),$("revert"),jn.eventCanceled||(nu?Yi.insertBefore(rn,nu):Yi.appendChild(rn)),z(!0);var H=nw(i,l.draggable);if(!H||xie(t,C,this)&&!H.animated){if(H===rn)return z(!1);if(H&&i===t.target&&(r=H),r&&(u=Ji(r)),ev(Yi,i,rn,s,r,u,t,!!r)!==!1)return F(),i.appendChild(rn),cr=i,ee(),z(!0)}else if(H&&bie(t,C,this)){var Q=gh(i,0,l,!0);if(Q===rn)return z(!1);if(r=Q,u=Ji(r),ev(Yi,i,rn,s,r,u,t,!1)!==!1)return F(),i.insertBefore(rn,Q),cr=i,ee(),z(!0)}else if(r.parentNode===i){u=Ji(r);var ae=0,be,te=rn.parentNode!==i,G=!mie(rn.animated&&rn.toRect||s,r.animated&&r.toRect||u,C),U=C?"top":"left",B=lI(r,"top","top")||lI(rn,"top","top"),ie=B?B.scrollTop:void 0;Dd!==r&&(be=u[U],Sp=!1,Jg=!G&&l.invertSwap||te),ae=wie(t,r,u,C,G?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,Jg,Dd===r);var X;if(ae!==0){var ne=dr(rn);do ne-=ae,X=cr.children[ne];while(X&&(Mn(X,"display")==="none"||X===Xn))}if(ae===0||X===r)return z(!1);Dd=r,wp=ae;var Ee=r.nextElementSibling,Ie=!1;Ie=ae===1;var Xe=ev(Yi,i,rn,s,r,u,t,Ie);if(Xe!==!1)return(Xe===1||Xe===-1)&&(Ie=Xe===1),Cx=!0,setTimeout(yie,30),F(),Ie&&!Ee?i.appendChild(rn):r.parentNode.insertBefore(rn,Ie?Ee:r),B&&JP(B,0,ie-B.scrollTop),cr=rn.parentNode,be!==void 0&&!Jg&&(bv=Math.abs(be-Ji(r)[U])),ee(),z(!0)}if(i.contains(rn))return z(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){oi(document,"mousemove",this._onTouchMove),oi(document,"touchmove",this._onTouchMove),oi(document,"pointermove",this._onTouchMove),oi(document,"dragover",eu),oi(document,"mousemove",eu),oi(document,"touchmove",eu)},_offUpEvents:function(){var t=this.el.ownerDocument;oi(t,"mouseup",this._onDrop),oi(t,"touchend",this._onDrop),oi(t,"pointerup",this._onDrop),oi(t,"touchcancel",this._onDrop),oi(document,"selectstart",this)},_onDrop:function(t){var i=this.el,r=this.options;if(Zs=dr(rn),Zl=dr(rn,r.draggable),Ds("drop",this,{evt:t}),cr=rn&&rn.parentNode,Zs=dr(rn),Zl=dr(rn,r.draggable),jn.eventCanceled){this._nulling();return}Bd=!1,Jg=!1,Sp=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ax(this.cloneId),Ax(this._dragStartId),this.nativeDraggable&&(oi(document,"drop",this),oi(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),yp&&Mn(document.body,"user-select",""),Mn(rn,"transform",""),t&&(tp&&(t.cancelable&&t.preventDefault(),!r.dropBubble&&t.stopPropagation()),Xn&&Xn.parentNode&&Xn.parentNode.removeChild(Xn),(Yi===cr||Wr&&Wr.lastPutMode!=="clone")&&ur&&ur.parentNode&&ur.parentNode.removeChild(ur),rn&&(this.nativeDraggable&&oi(rn,"dragend",this),fb(rn),rn.style["will-change"]="",tp&&!Bd&&rr(rn,Wr?Wr.options.ghostClass:this.options.ghostClass,!1),rr(rn,this.options.chosenClass,!1),_s({sortable:this,name:"unchoose",toEl:cr,newIndex:null,newDraggableIndex:null,originalEvent:t}),Yi!==cr?(Zs>=0&&(_s({rootEl:cr,name:"add",toEl:cr,fromEl:Yi,originalEvent:t}),_s({sortable:this,name:"remove",toEl:cr,originalEvent:t}),_s({rootEl:cr,name:"sort",toEl:cr,fromEl:Yi,originalEvent:t}),_s({sortable:this,name:"sort",toEl:cr,originalEvent:t})),Wr&&Wr.save()):Zs!==Ud&&Zs>=0&&(_s({sortable:this,name:"update",toEl:cr,originalEvent:t}),_s({sortable:this,name:"sort",toEl:cr,originalEvent:t})),jn.active&&((Zs==null||Zs===-1)&&(Zs=Ud,Zl=xp),_s({sortable:this,name:"end",toEl:cr,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Ds("nulling",this),Yi=rn=cr=Xn=nu=ur=yv=Yl=Qc=Ua=tp=Zs=Zl=Ud=xp=Dd=wp=Wr=Yg=jn.dragged=jn.ghost=jn.clone=jn.active=null,i_.forEach(function(t){t.checked=!0}),i_.length=ub=db=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":rn&&(this._onDragOver(t),_ie(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],i,r=this.el.children,s=0,u=r.length,d=this.options;s<u;s++)i=r[s],Ga(i,d.draggable,this.el,!1)&&t.push(i.getAttribute(d.dataIdAttr)||Tie(i));return t},sort:function(t,i){var r={},s=this.el;this.toArray().forEach(function(u,d){var l=s.children[d];Ga(l,this.options.draggable,s,!1)&&(r[u]=l)},this),i&&this.captureAnimationState(),t.forEach(function(u){r[u]&&(s.removeChild(r[u]),s.appendChild(r[u]))}),i&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,i){return Ga(t,i||this.options.draggable,this.el,!1)},option:function(t,i){var r=this.options;if(i===void 0)return r[t];var s=bm.modifyOption(this,t,i);typeof s<"u"?r[t]=s:r[t]=i,t==="group"&&tD(r)},destroy:function(){Ds("destroy",this);var t=this.el;t[is]=null,oi(t,"mousedown",this._onTapStart),oi(t,"touchstart",this._onTapStart),oi(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(oi(t,"dragover",this),oi(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),n_.splice(n_.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Yl){if(Ds("hideClone",this),jn.eventCanceled)return;Mn(ur,"display","none"),this.options.removeCloneOnHide&&ur.parentNode&&ur.parentNode.removeChild(ur),Yl=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Yl){if(Ds("showClone",this),jn.eventCanceled)return;rn.parentNode==Yi&&!this.options.group.revertClone?Yi.insertBefore(ur,rn):nu?Yi.insertBefore(ur,nu):Yi.appendChild(ur),this.options.group.revertClone&&this.animate(rn,ur),Mn(ur,"display",""),Yl=!1}}};function _ie(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function ev(e,t,i,r,s,u,d,l){var m,g=e[is],x=g.options.onMove,w;return window.CustomEvent&&!yl&&!ym?m=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent("move",!0,!0)),m.to=t,m.from=e,m.dragged=i,m.draggedRect=r,m.related=s||t,m.relatedRect=u||Ji(t),m.willInsertAfter=l,m.originalEvent=d,e.dispatchEvent(m),x&&(w=x.call(g,m,d)),w}function fb(e){e.draggable=!1}function yie(){Cx=!1}function bie(e,t,i){var r=Ji(gh(i.el,0,i.options,!0)),s=10;return t?e.clientX<r.left-s||e.clientY<r.top&&e.clientX<r.right:e.clientY<r.top-s||e.clientY<r.bottom&&e.clientX<r.left}function xie(e,t,i){var r=Ji(nw(i.el,i.options.draggable)),s=10;return t?e.clientX>r.right+s||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+s}function wie(e,t,i,r,s,u,d,l){var m=r?e.clientY:e.clientX,g=r?i.height:i.width,x=r?i.top:i.left,w=r?i.bottom:i.right,I=!1;if(!d){if(l&&bv<g*s){if(!Sp&&(wp===1?m>x+g*u/2:m<w-g*u/2)&&(Sp=!0),Sp)I=!0;else if(wp===1?m<x+bv:m>w-bv)return-wp}else if(m>x+g*(1-s)/2&&m<w-g*(1-s)/2)return Sie(t)}return I=I||d,I&&(m<x+g*u/2||m>w-g*u/2)?m>x+g/2?1:-1:0}function Sie(e){return dr(rn)<dr(e)?1:-1}function Tie(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,r=0;i--;)r+=t.charCodeAt(i);return r.toString(36)}function Eie(e){i_.length=0;for(var t=e.getElementsByTagName("input"),i=t.length;i--;){var r=t[i];r.checked&&i_.push(r)}}function xv(e){return setTimeout(e,0)}function Ax(e){return clearTimeout(e)}ty&&fi(document,"touchmove",function(e){(jn.active||Bd)&&e.cancelable&&e.preventDefault()});jn.utils={on:fi,off:oi,css:Mn,find:XP,is:function(t,i){return!!Ga(t,i,t,!1)},extend:lie,throttle:YP,closest:Ga,toggleClass:rr,clone:iw,index:dr,nextTick:xv,cancelNextTick:Ax,detectDirection:eD,getChild:gh};jn.get=function(e){return e[is]};jn.mount=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t[0].constructor===Array&&(t=t[0]),t.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(jn.utils=$o($o({},jn.utils),r.utils)),bm.mount(r)})};jn.create=function(e,t){return new jn(e,t)};jn.version=rie;var Tr=[],np,Mx,kx=!1,pb,mb,r_,ip;function Iie(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(i){var r=i.originalEvent;this.sortable.nativeDraggable?fi(document,"dragover",this._handleAutoScroll):this.options.supportPointer?fi(document,"pointermove",this._handleFallbackAutoScroll):r.touches?fi(document,"touchmove",this._handleFallbackAutoScroll):fi(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var r=i.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?oi(document,"dragover",this._handleAutoScroll):(oi(document,"pointermove",this._handleFallbackAutoScroll),oi(document,"touchmove",this._handleFallbackAutoScroll),oi(document,"mousemove",this._handleFallbackAutoScroll)),pI(),wv(),cie()},nulling:function(){r_=Mx=np=kx=ip=pb=mb=null,Tr.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,r){var s=this,u=(i.touches?i.touches[0]:i).clientX,d=(i.touches?i.touches[0]:i).clientY,l=document.elementFromPoint(u,d);if(r_=i,r||this.options.forceAutoScrollFallback||ym||yl||yp){gb(i,this.options,l,r);var m=tc(l,!0);kx&&(!ip||u!==pb||d!==mb)&&(ip&&pI(),ip=setInterval(function(){var g=tc(document.elementFromPoint(u,d),!0);g!==m&&(m=g,wv()),gb(i,s.options,g,r)},10),pb=u,mb=d)}else{if(!this.options.bubbleScroll||tc(l,!0)===Po()){wv();return}gb(i,this.options,tc(l,!1),!1)}}},Pa(e,{pluginName:"scroll",initializeByDefault:!0})}function wv(){Tr.forEach(function(e){clearInterval(e.pid)}),Tr=[]}function pI(){clearInterval(ip)}var gb=YP(function(e,t,i,r){if(t.scroll){var s=(e.touches?e.touches[0]:e).clientX,u=(e.touches?e.touches[0]:e).clientY,d=t.scrollSensitivity,l=t.scrollSpeed,m=Po(),g=!1,x;Mx!==i&&(Mx=i,wv(),np=t.scroll,x=t.scrollFn,np===!0&&(np=tc(i,!0)));var w=0,I=np;do{var C=I,A=Ji(C),L=A.top,$=A.bottom,F=A.left,z=A.right,ee=A.width,H=A.height,Q=void 0,ae=void 0,be=C.scrollWidth,te=C.scrollHeight,G=Mn(C),U=C.scrollLeft,B=C.scrollTop;C===m?(Q=ee<be&&(G.overflowX==="auto"||G.overflowX==="scroll"||G.overflowX==="visible"),ae=H<te&&(G.overflowY==="auto"||G.overflowY==="scroll"||G.overflowY==="visible")):(Q=ee<be&&(G.overflowX==="auto"||G.overflowX==="scroll"),ae=H<te&&(G.overflowY==="auto"||G.overflowY==="scroll"));var ie=Q&&(Math.abs(z-s)<=d&&U+ee<be)-(Math.abs(F-s)<=d&&!!U),X=ae&&(Math.abs($-u)<=d&&B+H<te)-(Math.abs(L-u)<=d&&!!B);if(!Tr[w])for(var ne=0;ne<=w;ne++)Tr[ne]||(Tr[ne]={});(Tr[w].vx!=ie||Tr[w].vy!=X||Tr[w].el!==C)&&(Tr[w].el=C,Tr[w].vx=ie,Tr[w].vy=X,clearInterval(Tr[w].pid),(ie!=0||X!=0)&&(g=!0,Tr[w].pid=setInterval(function(){r&&this.layer===0&&jn.active._onTouchMove(r_);var Ee=Tr[this.layer].vy?Tr[this.layer].vy*l:0,Ie=Tr[this.layer].vx?Tr[this.layer].vx*l:0;typeof x=="function"&&x.call(jn.dragged.parentNode[is],Ie,Ee,e,r_,Tr[this.layer].el)!=="continue"||JP(Tr[this.layer].el,Ie,Ee)}.bind({layer:w}),24))),w++}while(t.bubbleScroll&&I!==m&&(I=tc(I,!1)));kx=g}},30),rD=function(t){var i=t.originalEvent,r=t.putSortable,s=t.dragEl,u=t.activeSortable,d=t.dispatchSortableEvent,l=t.hideGhostForTarget,m=t.unhideGhostForTarget;if(i){var g=r||u;l();var x=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,w=document.elementFromPoint(x.clientX,x.clientY);m(),g&&!g.el.contains(w)&&(d("spill"),this.onSpill({dragEl:s,putSortable:r}))}};function rw(){}rw.prototype={startIndex:null,dragStart:function(t){var i=t.oldDraggableIndex;this.startIndex=i},onSpill:function(t){var i=t.dragEl,r=t.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var s=gh(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(i,s):this.sortable.el.appendChild(i),this.sortable.animateAll(),r&&r.animateAll()},drop:rD};Pa(rw,{pluginName:"revertOnSpill"});function sw(){}sw.prototype={onSpill:function(t){var i=t.dragEl,r=t.putSortable,s=r||this.sortable;s.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),s.animateAll()},drop:rD};Pa(sw,{pluginName:"removeOnSpill"});var ya;function Cie(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(i){var r=i.dragEl;ya=r},dragOverValid:function(i){var r=i.completed,s=i.target,u=i.onMove,d=i.activeSortable,l=i.changed,m=i.cancel;if(d.options.swap){var g=this.sortable.el,x=this.options;if(s&&s!==g){var w=ya;u(s)!==!1?(rr(s,x.swapClass,!0),ya=s):ya=null,w&&w!==ya&&rr(w,x.swapClass,!1)}l(),r(!0),m()}},drop:function(i){var r=i.activeSortable,s=i.putSortable,u=i.dragEl,d=s||this.sortable,l=this.options;ya&&rr(ya,l.swapClass,!1),ya&&(l.swap||s&&s.options.swap)&&u!==ya&&(d.captureAnimationState(),d!==r&&r.captureAnimationState(),Aie(u,ya),d.animateAll(),d!==r&&r.animateAll())},nulling:function(){ya=null}},Pa(e,{pluginName:"swap",eventProperties:function(){return{swapItem:ya}}})}function Aie(e,t){var i=e.parentNode,r=t.parentNode,s,u;!i||!r||i.isEqualNode(t)||r.isEqualNode(e)||(s=dr(e),u=dr(t),i.isEqualNode(r)&&s<u&&u++,i.insertBefore(t,i.children[s]),r.insertBefore(e,r.children[u]))}var Gn=[],qs=[],Hf,Va,Gf=!1,Ls=!1,Ld=!1,Ni,Wf,tv;function Mie(){function e(t){for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));t.options.supportPointer?fi(document,"pointerup",this._deselectMultiDrag):(fi(document,"mouseup",this._deselectMultiDrag),fi(document,"touchend",this._deselectMultiDrag)),fi(document,"keydown",this._checkKeyDown),fi(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(s,u){var d="";Gn.length&&Va===t?Gn.forEach(function(l,m){d+=(m?", ":"")+l.textContent}):d=u.textContent,s.setData("Text",d)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(i){var r=i.dragEl;Ni=r},delayEnded:function(){this.isMultiDrag=~Gn.indexOf(Ni)},setupClone:function(i){var r=i.sortable,s=i.cancel;if(this.isMultiDrag){for(var u=0;u<Gn.length;u++)qs.push(iw(Gn[u])),qs[u].sortableIndex=Gn[u].sortableIndex,qs[u].draggable=!1,qs[u].style["will-change"]="",rr(qs[u],this.options.selectedClass,!1),Gn[u]===Ni&&rr(qs[u],this.options.chosenClass,!1);r._hideClone(),s()}},clone:function(i){var r=i.sortable,s=i.rootEl,u=i.dispatchSortableEvent,d=i.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Gn.length&&Va===r&&(mI(!0,s),u("clone"),d()))},showClone:function(i){var r=i.cloneNowShown,s=i.rootEl,u=i.cancel;this.isMultiDrag&&(mI(!1,s),qs.forEach(function(d){Mn(d,"display","")}),r(),tv=!1,u())},hideClone:function(i){var r=this;i.sortable;var s=i.cloneNowHidden,u=i.cancel;this.isMultiDrag&&(qs.forEach(function(d){Mn(d,"display","none"),r.options.removeCloneOnHide&&d.parentNode&&d.parentNode.removeChild(d)}),s(),tv=!0,u())},dragStartGlobal:function(i){i.sortable,!this.isMultiDrag&&Va&&Va.multiDrag._deselectMultiDrag(),Gn.forEach(function(r){r.sortableIndex=dr(r)}),Gn=Gn.sort(function(r,s){return r.sortableIndex-s.sortableIndex}),Ld=!0},dragStarted:function(i){var r=this,s=i.sortable;if(this.isMultiDrag){if(this.options.sort&&(s.captureAnimationState(),this.options.animation)){Gn.forEach(function(d){d!==Ni&&Mn(d,"position","absolute")});var u=Ji(Ni,!1,!0,!0);Gn.forEach(function(d){d!==Ni&&uI(d,u)}),Ls=!0,Gf=!0}s.animateAll(function(){Ls=!1,Gf=!1,r.options.animation&&Gn.forEach(function(d){lb(d)}),r.options.sort&&nv()})}},dragOver:function(i){var r=i.target,s=i.completed,u=i.cancel;Ls&&~Gn.indexOf(r)&&(s(!1),u())},revert:function(i){var r=i.fromSortable,s=i.rootEl,u=i.sortable,d=i.dragRect;Gn.length>1&&(Gn.forEach(function(l){u.addAnimationState({target:l,rect:Ls?Ji(l):d}),lb(l),l.fromRect=d,r.removeAnimationState(l)}),Ls=!1,kie(!this.options.removeCloneOnHide,s))},dragOverCompleted:function(i){var r=i.sortable,s=i.isOwner,u=i.insertion,d=i.activeSortable,l=i.parentEl,m=i.putSortable,g=this.options;if(u){if(s&&d._hideClone(),Gf=!1,g.animation&&Gn.length>1&&(Ls||!s&&!d.options.sort&&!m)){var x=Ji(Ni,!1,!0,!0);Gn.forEach(function(I){I!==Ni&&(uI(I,x),l.appendChild(I))}),Ls=!0}if(!s)if(Ls||nv(),Gn.length>1){var w=tv;d._showClone(r),d.options.animation&&!tv&&w&&qs.forEach(function(I){d.addAnimationState({target:I,rect:Wf}),I.fromRect=Wf,I.thisAnimationDuration=null})}else d._showClone(r)}},dragOverAnimationCapture:function(i){var r=i.dragRect,s=i.isOwner,u=i.activeSortable;if(Gn.forEach(function(l){l.thisAnimationDuration=null}),u.options.animation&&!s&&u.multiDrag.isMultiDrag){Wf=Pa({},r);var d=hu(Ni,!0);Wf.top-=d.f,Wf.left-=d.e}},dragOverAnimationComplete:function(){Ls&&(Ls=!1,nv())},drop:function(i){var r=i.originalEvent,s=i.rootEl,u=i.parentEl,d=i.sortable,l=i.dispatchSortableEvent,m=i.oldIndex,g=i.putSortable,x=g||this.sortable;if(r){var w=this.options,I=u.children;if(!Ld)if(w.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),rr(Ni,w.selectedClass,!~Gn.indexOf(Ni)),~Gn.indexOf(Ni))Gn.splice(Gn.indexOf(Ni),1),Hf=null,ep({sortable:d,rootEl:s,name:"deselect",targetEl:Ni,originalEvt:r});else{if(Gn.push(Ni),ep({sortable:d,rootEl:s,name:"select",targetEl:Ni,originalEvt:r}),r.shiftKey&&Hf&&d.el.contains(Hf)){var C=dr(Hf),A=dr(Ni);if(~C&&~A&&C!==A){var L,$;for(A>C?($=C,L=A):($=A,L=C+1);$<L;$++)~Gn.indexOf(I[$])||(rr(I[$],w.selectedClass,!0),Gn.push(I[$]),ep({sortable:d,rootEl:s,name:"select",targetEl:I[$],originalEvt:r}))}}else Hf=Ni;Va=x}if(Ld&&this.isMultiDrag){if(Ls=!1,(u[is].options.sort||u!==s)&&Gn.length>1){var F=Ji(Ni),z=dr(Ni,":not(."+this.options.selectedClass+")");if(!Gf&&w.animation&&(Ni.thisAnimationDuration=null),x.captureAnimationState(),!Gf&&(w.animation&&(Ni.fromRect=F,Gn.forEach(function(H){if(H.thisAnimationDuration=null,H!==Ni){var Q=Ls?Ji(H):F;H.fromRect=Q,x.addAnimationState({target:H,rect:Q})}})),nv(),Gn.forEach(function(H){I[z]?u.insertBefore(H,I[z]):u.appendChild(H),z++}),m===dr(Ni))){var ee=!1;Gn.forEach(function(H){if(H.sortableIndex!==dr(H)){ee=!0;return}}),ee&&l("update")}Gn.forEach(function(H){lb(H)}),x.animateAll()}Va=x}(s===u||g&&g.lastPutMode!=="clone")&&qs.forEach(function(H){H.parentNode&&H.parentNode.removeChild(H)})}},nullingGlobal:function(){this.isMultiDrag=Ld=!1,qs.length=0},destroyGlobal:function(){this._deselectMultiDrag(),oi(document,"pointerup",this._deselectMultiDrag),oi(document,"mouseup",this._deselectMultiDrag),oi(document,"touchend",this._deselectMultiDrag),oi(document,"keydown",this._checkKeyDown),oi(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(i){if(!(typeof Ld<"u"&&Ld)&&Va===this.sortable&&!(i&&Ga(i.target,this.options.draggable,this.sortable.el,!1))&&!(i&&i.button!==0))for(;Gn.length;){var r=Gn[0];rr(r,this.options.selectedClass,!1),Gn.shift(),ep({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r,originalEvt:i})}},_checkKeyDown:function(i){i.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(i){i.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Pa(e,{pluginName:"multiDrag",utils:{select:function(i){var r=i.parentNode[is];!r||!r.options.multiDrag||~Gn.indexOf(i)||(Va&&Va!==r&&(Va.multiDrag._deselectMultiDrag(),Va=r),rr(i,r.options.selectedClass,!0),Gn.push(i))},deselect:function(i){var r=i.parentNode[is],s=Gn.indexOf(i);!r||!r.options.multiDrag||!~s||(rr(i,r.options.selectedClass,!1),Gn.splice(s,1))}},eventProperties:function(){var i=this,r=[],s=[];return Gn.forEach(function(u){r.push({multiDragElement:u,index:u.sortableIndex});var d;Ls&&u!==Ni?d=-1:Ls?d=dr(u,":not(."+i.options.selectedClass+")"):d=dr(u),s.push({multiDragElement:u,index:d})}),{items:Qne(Gn),clones:[].concat(qs),oldIndicies:r,newIndicies:s}},optionListeners:{multiDragKey:function(i){return i=i.toLowerCase(),i==="ctrl"?i="Control":i.length>1&&(i=i.charAt(0).toUpperCase()+i.substr(1)),i}}})}function kie(e,t){Gn.forEach(function(i,r){var s=t.children[i.sortableIndex+(e?Number(r):0)];s?t.insertBefore(i,s):t.appendChild(i)})}function mI(e,t){qs.forEach(function(i,r){var s=t.children[i.sortableIndex+(e?Number(r):0)];s?t.insertBefore(i,s):t.appendChild(i)})}function nv(){Gn.forEach(function(e){e!==Ni&&e.parentNode&&e.parentNode.removeChild(e)})}jn.mount(new Iie);jn.mount(sw,rw);const Pie=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:Mie,Sortable:jn,Swap:Cie,default:jn},Symbol.toStringTag,{value:"Module"})),Die=LA(Pie);(function(e,t){(function(r,s){e.exports=s(Kne,Die)})(typeof self<"u"?self:PA,function(i,r){return function(s){var u={};function d(l){if(u[l])return u[l].exports;var m=u[l]={i:l,l:!1,exports:{}};return s[l].call(m.exports,m,m.exports,d),m.l=!0,m.exports}return d.m=s,d.c=u,d.d=function(l,m,g){d.o(l,m)||Object.defineProperty(l,m,{enumerable:!0,get:g})},d.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},d.t=function(l,m){if(m&1&&(l=d(l)),m&8||m&4&&typeof l=="object"&&l&&l.__esModule)return l;var g=Object.create(null);if(d.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:l}),m&2&&typeof l!="string")for(var x in l)d.d(g,x,function(w){return l[w]}.bind(null,x));return g},d.n=function(l){var m=l&&l.__esModule?function(){return l.default}:function(){return l};return d.d(m,"a",m),m},d.o=function(l,m){return Object.prototype.hasOwnProperty.call(l,m)},d.p="",d(d.s="fb15")}({"00ee":function(s,u,d){var l=d("b622"),m=l("toStringTag"),g={};g[m]="z",s.exports=String(g)==="[object z]"},"0366":function(s,u,d){var l=d("1c0b");s.exports=function(m,g,x){if(l(m),g===void 0)return m;switch(x){case 0:return function(){return m.call(g)};case 1:return function(w){return m.call(g,w)};case 2:return function(w,I){return m.call(g,w,I)};case 3:return function(w,I,C){return m.call(g,w,I,C)}}return function(){return m.apply(g,arguments)}}},"057f":function(s,u,d){var l=d("fc6a"),m=d("241c").f,g={}.toString,x=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],w=function(I){try{return m(I)}catch{return x.slice()}};s.exports.f=function(C){return x&&g.call(C)=="[object Window]"?w(C):m(l(C))}},"06cf":function(s,u,d){var l=d("83ab"),m=d("d1e7"),g=d("5c6c"),x=d("fc6a"),w=d("c04e"),I=d("5135"),C=d("0cfb"),A=Object.getOwnPropertyDescriptor;u.f=l?A:function($,F){if($=x($),F=w(F,!0),C)try{return A($,F)}catch{}if(I($,F))return g(!m.f.call($,F),$[F])}},"0cfb":function(s,u,d){var l=d("83ab"),m=d("d039"),g=d("cc12");s.exports=!l&&!m(function(){return Object.defineProperty(g("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(s,u,d){var l=d("23e7"),m=d("d58f").left,g=d("a640"),x=d("ae40"),w=g("reduce"),I=x("reduce",{1:0});l({target:"Array",proto:!0,forced:!w||!I},{reduce:function(A){return m(this,A,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(s,u,d){var l=d("c6b6"),m=d("9263");s.exports=function(g,x){var w=g.exec;if(typeof w=="function"){var I=w.call(g,x);if(typeof I!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return I}if(l(g)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return m.call(g,x)}},"159b":function(s,u,d){var l=d("da84"),m=d("fdbc"),g=d("17c2"),x=d("9112");for(var w in m){var I=l[w],C=I&&I.prototype;if(C&&C.forEach!==g)try{x(C,"forEach",g)}catch{C.forEach=g}}},"17c2":function(s,u,d){var l=d("b727").forEach,m=d("a640"),g=d("ae40"),x=m("forEach"),w=g("forEach");s.exports=!x||!w?function(C){return l(this,C,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(s,u,d){var l=d("d066");s.exports=l("document","documentElement")},"1c0b":function(s,u){s.exports=function(d){if(typeof d!="function")throw TypeError(String(d)+" is not a function");return d}},"1c7e":function(s,u,d){var l=d("b622"),m=l("iterator"),g=!1;try{var x=0,w={next:function(){return{done:!!x++}},return:function(){g=!0}};w[m]=function(){return this},Array.from(w,function(){throw 2})}catch{}s.exports=function(I,C){if(!C&&!g)return!1;var A=!1;try{var L={};L[m]=function(){return{next:function(){return{done:A=!0}}}},I(L)}catch{}return A}},"1d80":function(s,u){s.exports=function(d){if(d==null)throw TypeError("Can't call method on "+d);return d}},"1dde":function(s,u,d){var l=d("d039"),m=d("b622"),g=d("2d00"),x=m("species");s.exports=function(w){return g>=51||!l(function(){var I=[],C=I.constructor={};return C[x]=function(){return{foo:1}},I[w](Boolean).foo!==1})}},"23cb":function(s,u,d){var l=d("a691"),m=Math.max,g=Math.min;s.exports=function(x,w){var I=l(x);return I<0?m(I+w,0):g(I,w)}},"23e7":function(s,u,d){var l=d("da84"),m=d("06cf").f,g=d("9112"),x=d("6eeb"),w=d("ce4e"),I=d("e893"),C=d("94ca");s.exports=function(A,L){var $=A.target,F=A.global,z=A.stat,ee,H,Q,ae,be,te;if(F?H=l:z?H=l[$]||w($,{}):H=(l[$]||{}).prototype,H)for(Q in L){if(be=L[Q],A.noTargetGet?(te=m(H,Q),ae=te&&te.value):ae=H[Q],ee=C(F?Q:$+(z?".":"#")+Q,A.forced),!ee&&ae!==void 0){if(typeof be==typeof ae)continue;I(be,ae)}(A.sham||ae&&ae.sham)&&g(be,"sham",!0),x(H,Q,be,A)}}},"241c":function(s,u,d){var l=d("ca84"),m=d("7839"),g=m.concat("length","prototype");u.f=Object.getOwnPropertyNames||function(w){return l(w,g)}},"25f0":function(s,u,d){var l=d("6eeb"),m=d("825a"),g=d("d039"),x=d("ad6d"),w="toString",I=RegExp.prototype,C=I[w],A=g(function(){return C.call({source:"a",flags:"b"})!="/a/b"}),L=C.name!=w;(A||L)&&l(RegExp.prototype,w,function(){var F=m(this),z=String(F.source),ee=F.flags,H=String(ee===void 0&&F instanceof RegExp&&!("flags"in I)?x.call(F):ee);return"/"+z+"/"+H},{unsafe:!0})},"2ca0":function(s,u,d){var l=d("23e7"),m=d("06cf").f,g=d("50c4"),x=d("5a34"),w=d("1d80"),I=d("ab13"),C=d("c430"),A="".startsWith,L=Math.min,$=I("startsWith"),F=!C&&!$&&!!function(){var z=m(String.prototype,"startsWith");return z&&!z.writable}();l({target:"String",proto:!0,forced:!F&&!$},{startsWith:function(ee){var H=String(w(this));x(ee);var Q=g(L(arguments.length>1?arguments[1]:void 0,H.length)),ae=String(ee);return A?A.call(H,ae,Q):H.slice(Q,Q+ae.length)===ae}})},"2d00":function(s,u,d){var l=d("da84"),m=d("342f"),g=l.process,x=g&&g.versions,w=x&&x.v8,I,C;w?(I=w.split("."),C=I[0]+I[1]):m&&(I=m.match(/Edge\/(\d+)/),(!I||I[1]>=74)&&(I=m.match(/Chrome\/(\d+)/),I&&(C=I[1]))),s.exports=C&&+C},"342f":function(s,u,d){var l=d("d066");s.exports=l("navigator","userAgent")||""},"35a1":function(s,u,d){var l=d("f5df"),m=d("3f8c"),g=d("b622"),x=g("iterator");s.exports=function(w){if(w!=null)return w[x]||w["@@iterator"]||m[l(w)]}},"37e8":function(s,u,d){var l=d("83ab"),m=d("9bf2"),g=d("825a"),x=d("df75");s.exports=l?Object.defineProperties:function(I,C){g(I);for(var A=x(C),L=A.length,$=0,F;L>$;)m.f(I,F=A[$++],C[F]);return I}},"3bbe":function(s,u,d){var l=d("861d");s.exports=function(m){if(!l(m)&&m!==null)throw TypeError("Can't set "+String(m)+" as a prototype");return m}},"3ca3":function(s,u,d){var l=d("6547").charAt,m=d("69f3"),g=d("7dd0"),x="String Iterator",w=m.set,I=m.getterFor(x);g(String,"String",function(C){w(this,{type:x,string:String(C),index:0})},function(){var A=I(this),L=A.string,$=A.index,F;return $>=L.length?{value:void 0,done:!0}:(F=l(L,$),A.index+=F.length,{value:F,done:!1})})},"3f8c":function(s,u){s.exports={}},4160:function(s,u,d){var l=d("23e7"),m=d("17c2");l({target:"Array",proto:!0,forced:[].forEach!=m},{forEach:m})},"428f":function(s,u,d){var l=d("da84");s.exports=l},"44ad":function(s,u,d){var l=d("d039"),m=d("c6b6"),g="".split;s.exports=l(function(){return!Object("z").propertyIsEnumerable(0)})?function(x){return m(x)=="String"?g.call(x,""):Object(x)}:Object},"44d2":function(s,u,d){var l=d("b622"),m=d("7c73"),g=d("9bf2"),x=l("unscopables"),w=Array.prototype;w[x]==null&&g.f(w,x,{configurable:!0,value:m(null)}),s.exports=function(I){w[x][I]=!0}},"44e7":function(s,u,d){var l=d("861d"),m=d("c6b6"),g=d("b622"),x=g("match");s.exports=function(w){var I;return l(w)&&((I=w[x])!==void 0?!!I:m(w)=="RegExp")}},4930:function(s,u,d){var l=d("d039");s.exports=!!Object.getOwnPropertySymbols&&!l(function(){return!String(Symbol())})},"4d64":function(s,u,d){var l=d("fc6a"),m=d("50c4"),g=d("23cb"),x=function(w){return function(I,C,A){var L=l(I),$=m(L.length),F=g(A,$),z;if(w&&C!=C){for(;$>F;)if(z=L[F++],z!=z)return!0}else for(;$>F;F++)if((w||F in L)&&L[F]===C)return w||F||0;return!w&&-1}};s.exports={includes:x(!0),indexOf:x(!1)}},"4de4":function(s,u,d){var l=d("23e7"),m=d("b727").filter,g=d("1dde"),x=d("ae40"),w=g("filter"),I=x("filter");l({target:"Array",proto:!0,forced:!w||!I},{filter:function(A){return m(this,A,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(s,u,d){var l=d("0366"),m=d("7b0b"),g=d("9bdd"),x=d("e95a"),w=d("50c4"),I=d("8418"),C=d("35a1");s.exports=function(L){var $=m(L),F=typeof this=="function"?this:Array,z=arguments.length,ee=z>1?arguments[1]:void 0,H=ee!==void 0,Q=C($),ae=0,be,te,G,U,B,ie;if(H&&(ee=l(ee,z>2?arguments[2]:void 0,2)),Q!=null&&!(F==Array&&x(Q)))for(U=Q.call($),B=U.next,te=new F;!(G=B.call(U)).done;ae++)ie=H?g(U,ee,[G.value,ae],!0):G.value,I(te,ae,ie);else for(be=w($.length),te=new F(be);be>ae;ae++)ie=H?ee($[ae],ae):$[ae],I(te,ae,ie);return te.length=ae,te}},"4fad":function(s,u,d){var l=d("23e7"),m=d("6f53").entries;l({target:"Object",stat:!0},{entries:function(x){return m(x)}})},"50c4":function(s,u,d){var l=d("a691"),m=Math.min;s.exports=function(g){return g>0?m(l(g),9007199254740991):0}},5135:function(s,u){var d={}.hasOwnProperty;s.exports=function(l,m){return d.call(l,m)}},5319:function(s,u,d){var l=d("d784"),m=d("825a"),g=d("7b0b"),x=d("50c4"),w=d("a691"),I=d("1d80"),C=d("8aa5"),A=d("14c3"),L=Math.max,$=Math.min,F=Math.floor,z=/\$([$&'`]|\d\d?|<[^>]*>)/g,ee=/\$([$&'`]|\d\d?)/g,H=function(Q){return Q===void 0?Q:String(Q)};l("replace",2,function(Q,ae,be,te){var G=te.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,U=te.REPLACE_KEEPS_$0,B=G?"$":"$0";return[function(ne,Ee){var Ie=I(this),Xe=ne==null?void 0:ne[Q];return Xe!==void 0?Xe.call(ne,Ie,Ee):ae.call(String(Ie),ne,Ee)},function(X,ne){if(!G&&U||typeof ne=="string"&&ne.indexOf(B)===-1){var Ee=be(ae,X,this,ne);if(Ee.done)return Ee.value}var Ie=m(X),Xe=String(this),lt=typeof ne=="function";lt||(ne=String(ne));var st=Ie.global;if(st){var $t=Ie.unicode;Ie.lastIndex=0}for(var It=[];;){var nt=A(Ie,Xe);if(nt===null||(It.push(nt),!st))break;var et=String(nt[0]);et===""&&(Ie.lastIndex=C(Xe,x(Ie.lastIndex),$t))}for(var dt="",Be=0,Ke=0;Ke<It.length;Ke++){nt=It[Ke];for(var ut=String(nt[0]),Ot=L($(w(nt.index),Xe.length),0),Vt=[],_n=1;_n<nt.length;_n++)Vt.push(H(nt[_n]));var qt=nt.groups;if(lt){var _e=[ut].concat(Vt,Ot,Xe);qt!==void 0&&_e.push(qt);var ke=String(ne.apply(void 0,_e))}else ke=ie(ut,Xe,Ot,Vt,qt,ne);Ot>=Be&&(dt+=Xe.slice(Be,Ot)+ke,Be=Ot+ut.length)}return dt+Xe.slice(Be)}];function ie(X,ne,Ee,Ie,Xe,lt){var st=Ee+X.length,$t=Ie.length,It=ee;return Xe!==void 0&&(Xe=g(Xe),It=z),ae.call(lt,It,function(nt,et){var dt;switch(et.charAt(0)){case"$":return"$";case"&":return X;case"`":return ne.slice(0,Ee);case"'":return ne.slice(st);case"<":dt=Xe[et.slice(1,-1)];break;default:var Be=+et;if(Be===0)return nt;if(Be>$t){var Ke=F(Be/10);return Ke===0?nt:Ke<=$t?Ie[Ke-1]===void 0?et.charAt(1):Ie[Ke-1]+et.charAt(1):nt}dt=Ie[Be-1]}return dt===void 0?"":dt})}})},5692:function(s,u,d){var l=d("c430"),m=d("c6cd");(s.exports=function(g,x){return m[g]||(m[g]=x!==void 0?x:{})})("versions",[]).push({version:"3.6.5",mode:l?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(s,u,d){var l=d("d066"),m=d("241c"),g=d("7418"),x=d("825a");s.exports=l("Reflect","ownKeys")||function(I){var C=m.f(x(I)),A=g.f;return A?C.concat(A(I)):C}},"5a34":function(s,u,d){var l=d("44e7");s.exports=function(m){if(l(m))throw TypeError("The method doesn't accept regular expressions");return m}},"5c6c":function(s,u){s.exports=function(d,l){return{enumerable:!(d&1),configurable:!(d&2),writable:!(d&4),value:l}}},"5db7":function(s,u,d){var l=d("23e7"),m=d("a2bf"),g=d("7b0b"),x=d("50c4"),w=d("1c0b"),I=d("65f0");l({target:"Array",proto:!0},{flatMap:function(A){var L=g(this),$=x(L.length),F;return w(A),F=I(L,0),F.length=m(F,L,L,$,0,1,A,arguments.length>1?arguments[1]:void 0),F}})},6547:function(s,u,d){var l=d("a691"),m=d("1d80"),g=function(x){return function(w,I){var C=String(m(w)),A=l(I),L=C.length,$,F;return A<0||A>=L?x?"":void 0:($=C.charCodeAt(A),$<55296||$>56319||A+1===L||(F=C.charCodeAt(A+1))<56320||F>57343?x?C.charAt(A):$:x?C.slice(A,A+2):($-55296<<10)+(F-56320)+65536)}};s.exports={codeAt:g(!1),charAt:g(!0)}},"65f0":function(s,u,d){var l=d("861d"),m=d("e8b5"),g=d("b622"),x=g("species");s.exports=function(w,I){var C;return m(w)&&(C=w.constructor,typeof C=="function"&&(C===Array||m(C.prototype))?C=void 0:l(C)&&(C=C[x],C===null&&(C=void 0))),new(C===void 0?Array:C)(I===0?0:I)}},"69f3":function(s,u,d){var l=d("7f9a"),m=d("da84"),g=d("861d"),x=d("9112"),w=d("5135"),I=d("f772"),C=d("d012"),A=m.WeakMap,L,$,F,z=function(G){return F(G)?$(G):L(G,{})},ee=function(G){return function(U){var B;if(!g(U)||(B=$(U)).type!==G)throw TypeError("Incompatible receiver, "+G+" required");return B}};if(l){var H=new A,Q=H.get,ae=H.has,be=H.set;L=function(G,U){return be.call(H,G,U),U},$=function(G){return Q.call(H,G)||{}},F=function(G){return ae.call(H,G)}}else{var te=I("state");C[te]=!0,L=function(G,U){return x(G,te,U),U},$=function(G){return w(G,te)?G[te]:{}},F=function(G){return w(G,te)}}s.exports={set:L,get:$,has:F,enforce:z,getterFor:ee}},"6eeb":function(s,u,d){var l=d("da84"),m=d("9112"),g=d("5135"),x=d("ce4e"),w=d("8925"),I=d("69f3"),C=I.get,A=I.enforce,L=String(String).split("String");(s.exports=function($,F,z,ee){var H=ee?!!ee.unsafe:!1,Q=ee?!!ee.enumerable:!1,ae=ee?!!ee.noTargetGet:!1;if(typeof z=="function"&&(typeof F=="string"&&!g(z,"name")&&m(z,"name",F),A(z).source=L.join(typeof F=="string"?F:"")),$===l){Q?$[F]=z:x(F,z);return}else H?!ae&&$[F]&&(Q=!0):delete $[F];Q?$[F]=z:m($,F,z)})(Function.prototype,"toString",function(){return typeof this=="function"&&C(this).source||w(this)})},"6f53":function(s,u,d){var l=d("83ab"),m=d("df75"),g=d("fc6a"),x=d("d1e7").f,w=function(I){return function(C){for(var A=g(C),L=m(A),$=L.length,F=0,z=[],ee;$>F;)ee=L[F++],(!l||x.call(A,ee))&&z.push(I?[ee,A[ee]]:A[ee]);return z}};s.exports={entries:w(!0),values:w(!1)}},"73d9":function(s,u,d){var l=d("44d2");l("flatMap")},7418:function(s,u){u.f=Object.getOwnPropertySymbols},"746f":function(s,u,d){var l=d("428f"),m=d("5135"),g=d("e538"),x=d("9bf2").f;s.exports=function(w){var I=l.Symbol||(l.Symbol={});m(I,w)||x(I,w,{value:g.f(w)})}},7839:function(s,u){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(s,u,d){var l=d("1d80");s.exports=function(m){return Object(l(m))}},"7c73":function(s,u,d){var l=d("825a"),m=d("37e8"),g=d("7839"),x=d("d012"),w=d("1be4"),I=d("cc12"),C=d("f772"),A=">",L="<",$="prototype",F="script",z=C("IE_PROTO"),ee=function(){},H=function(G){return L+F+A+G+L+"/"+F+A},Q=function(G){G.write(H("")),G.close();var U=G.parentWindow.Object;return G=null,U},ae=function(){var G=I("iframe"),U="java"+F+":",B;return G.style.display="none",w.appendChild(G),G.src=String(U),B=G.contentWindow.document,B.open(),B.write(H("document.F=Object")),B.close(),B.F},be,te=function(){try{be=document.domain&&new ActiveXObject("htmlfile")}catch{}te=be?Q(be):ae();for(var G=g.length;G--;)delete te[$][g[G]];return te()};x[z]=!0,s.exports=Object.create||function(U,B){var ie;return U!==null?(ee[$]=l(U),ie=new ee,ee[$]=null,ie[z]=U):ie=te(),B===void 0?ie:m(ie,B)}},"7dd0":function(s,u,d){var l=d("23e7"),m=d("9ed3"),g=d("e163"),x=d("d2bb"),w=d("d44e"),I=d("9112"),C=d("6eeb"),A=d("b622"),L=d("c430"),$=d("3f8c"),F=d("ae93"),z=F.IteratorPrototype,ee=F.BUGGY_SAFARI_ITERATORS,H=A("iterator"),Q="keys",ae="values",be="entries",te=function(){return this};s.exports=function(G,U,B,ie,X,ne,Ee){m(B,U,ie);var Ie=function(Ke){if(Ke===X&&It)return It;if(!ee&&Ke in st)return st[Ke];switch(Ke){case Q:return function(){return new B(this,Ke)};case ae:return function(){return new B(this,Ke)};case be:return function(){return new B(this,Ke)}}return function(){return new B(this)}},Xe=U+" Iterator",lt=!1,st=G.prototype,$t=st[H]||st["@@iterator"]||X&&st[X],It=!ee&&$t||Ie(X),nt=U=="Array"&&st.entries||$t,et,dt,Be;if(nt&&(et=g(nt.call(new G)),z!==Object.prototype&&et.next&&(!L&&g(et)!==z&&(x?x(et,z):typeof et[H]!="function"&&I(et,H,te)),w(et,Xe,!0,!0),L&&($[Xe]=te))),X==ae&&$t&&$t.name!==ae&&(lt=!0,It=function(){return $t.call(this)}),(!L||Ee)&&st[H]!==It&&I(st,H,It),$[U]=It,X)if(dt={values:Ie(ae),keys:ne?It:Ie(Q),entries:Ie(be)},Ee)for(Be in dt)(ee||lt||!(Be in st))&&C(st,Be,dt[Be]);else l({target:U,proto:!0,forced:ee||lt},dt);return dt}},"7f9a":function(s,u,d){var l=d("da84"),m=d("8925"),g=l.WeakMap;s.exports=typeof g=="function"&&/native code/.test(m(g))},"825a":function(s,u,d){var l=d("861d");s.exports=function(m){if(!l(m))throw TypeError(String(m)+" is not an object");return m}},"83ab":function(s,u,d){var l=d("d039");s.exports=!l(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(s,u,d){var l=d("c04e"),m=d("9bf2"),g=d("5c6c");s.exports=function(x,w,I){var C=l(w);C in x?m.f(x,C,g(0,I)):x[C]=I}},"861d":function(s,u){s.exports=function(d){return typeof d=="object"?d!==null:typeof d=="function"}},8875:function(s,u,d){var l,m,g;(function(x,w){m=[],l=w,g=typeof l=="function"?l.apply(u,m):l,g!==void 0&&(s.exports=g)})(typeof self<"u"?self:this,function(){function x(){var w=Object.getOwnPropertyDescriptor(document,"currentScript");if(!w&&"currentScript"in document&&document.currentScript||w&&w.get!==x&&document.currentScript)return document.currentScript;try{throw new Error}catch(be){var I=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,C=/@([^@]*):(\d+):(\d+)\s*$/ig,A=I.exec(be.stack)||C.exec(be.stack),L=A&&A[1]||!1,$=A&&A[2]||!1,F=document.location.href.replace(document.location.hash,""),z,ee,H,Q=document.getElementsByTagName("script");L===F&&(z=document.documentElement.outerHTML,ee=new RegExp("(?:[^\\n]+?\\n){0,"+($-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),H=z.replace(ee,"$1").trim());for(var ae=0;ae<Q.length;ae++)if(Q[ae].readyState==="interactive"||Q[ae].src===L||L===F&&Q[ae].innerHTML&&Q[ae].innerHTML.trim()===H)return Q[ae];return null}}return x})},8925:function(s,u,d){var l=d("c6cd"),m=Function.toString;typeof l.inspectSource!="function"&&(l.inspectSource=function(g){return m.call(g)}),s.exports=l.inspectSource},"8aa5":function(s,u,d){var l=d("6547").charAt;s.exports=function(m,g,x){return g+(x?l(m,g).length:1)}},"8bbf":function(s,u){s.exports=i},"90e3":function(s,u){var d=0,l=Math.random();s.exports=function(m){return"Symbol("+String(m===void 0?"":m)+")_"+(++d+l).toString(36)}},9112:function(s,u,d){var l=d("83ab"),m=d("9bf2"),g=d("5c6c");s.exports=l?function(x,w,I){return m.f(x,w,g(1,I))}:function(x,w,I){return x[w]=I,x}},9263:function(s,u,d){var l=d("ad6d"),m=d("9f7f"),g=RegExp.prototype.exec,x=String.prototype.replace,w=g,I=function(){var $=/a/,F=/b*/g;return g.call($,"a"),g.call(F,"a"),$.lastIndex!==0||F.lastIndex!==0}(),C=m.UNSUPPORTED_Y||m.BROKEN_CARET,A=/()??/.exec("")[1]!==void 0,L=I||A||C;L&&(w=function(F){var z=this,ee,H,Q,ae,be=C&&z.sticky,te=l.call(z),G=z.source,U=0,B=F;return be&&(te=te.replace("y",""),te.indexOf("g")===-1&&(te+="g"),B=String(F).slice(z.lastIndex),z.lastIndex>0&&(!z.multiline||z.multiline&&F[z.lastIndex-1]!==`
`)&&(G="(?: "+G+")",B=" "+B,U++),H=new RegExp("^(?:"+G+")",te)),A&&(H=new RegExp("^"+G+"$(?!\\s)",te)),I&&(ee=z.lastIndex),Q=g.call(be?H:z,B),be?Q?(Q.input=Q.input.slice(U),Q[0]=Q[0].slice(U),Q.index=z.lastIndex,z.lastIndex+=Q[0].length):z.lastIndex=0:I&&Q&&(z.lastIndex=z.global?Q.index+Q[0].length:ee),A&&Q&&Q.length>1&&x.call(Q[0],H,function(){for(ae=1;ae<arguments.length-2;ae++)arguments[ae]===void 0&&(Q[ae]=void 0)}),Q}),s.exports=w},"94ca":function(s,u,d){var l=d("d039"),m=/#|\.prototype\./,g=function(A,L){var $=w[x(A)];return $==C?!0:$==I?!1:typeof L=="function"?l(L):!!L},x=g.normalize=function(A){return String(A).replace(m,".").toLowerCase()},w=g.data={},I=g.NATIVE="N",C=g.POLYFILL="P";s.exports=g},"99af":function(s,u,d){var l=d("23e7"),m=d("d039"),g=d("e8b5"),x=d("861d"),w=d("7b0b"),I=d("50c4"),C=d("8418"),A=d("65f0"),L=d("1dde"),$=d("b622"),F=d("2d00"),z=$("isConcatSpreadable"),ee=9007199254740991,H="Maximum allowed index exceeded",Q=F>=51||!m(function(){var G=[];return G[z]=!1,G.concat()[0]!==G}),ae=L("concat"),be=function(G){if(!x(G))return!1;var U=G[z];return U!==void 0?!!U:g(G)},te=!Q||!ae;l({target:"Array",proto:!0,forced:te},{concat:function(U){var B=w(this),ie=A(B,0),X=0,ne,Ee,Ie,Xe,lt;for(ne=-1,Ie=arguments.length;ne<Ie;ne++)if(lt=ne===-1?B:arguments[ne],be(lt)){if(Xe=I(lt.length),X+Xe>ee)throw TypeError(H);for(Ee=0;Ee<Xe;Ee++,X++)Ee in lt&&C(ie,X,lt[Ee])}else{if(X>=ee)throw TypeError(H);C(ie,X++,lt)}return ie.length=X,ie}})},"9bdd":function(s,u,d){var l=d("825a");s.exports=function(m,g,x,w){try{return w?g(l(x)[0],x[1]):g(x)}catch(C){var I=m.return;throw I!==void 0&&l(I.call(m)),C}}},"9bf2":function(s,u,d){var l=d("83ab"),m=d("0cfb"),g=d("825a"),x=d("c04e"),w=Object.defineProperty;u.f=l?w:function(C,A,L){if(g(C),A=x(A,!0),g(L),m)try{return w(C,A,L)}catch{}if("get"in L||"set"in L)throw TypeError("Accessors not supported");return"value"in L&&(C[A]=L.value),C}},"9ed3":function(s,u,d){var l=d("ae93").IteratorPrototype,m=d("7c73"),g=d("5c6c"),x=d("d44e"),w=d("3f8c"),I=function(){return this};s.exports=function(C,A,L){var $=A+" Iterator";return C.prototype=m(l,{next:g(1,L)}),x(C,$,!1,!0),w[$]=I,C}},"9f7f":function(s,u,d){var l=d("d039");function m(g,x){return RegExp(g,x)}u.UNSUPPORTED_Y=l(function(){var g=m("a","y");return g.lastIndex=2,g.exec("abcd")!=null}),u.BROKEN_CARET=l(function(){var g=m("^r","gy");return g.lastIndex=2,g.exec("str")!=null})},a2bf:function(s,u,d){var l=d("e8b5"),m=d("50c4"),g=d("0366"),x=function(w,I,C,A,L,$,F,z){for(var ee=L,H=0,Q=F?g(F,z,3):!1,ae;H<A;){if(H in C){if(ae=Q?Q(C[H],H,I):C[H],$>0&&l(ae))ee=x(w,I,ae,m(ae.length),ee,$-1)-1;else{if(ee>=9007199254740991)throw TypeError("Exceed the acceptable array length");w[ee]=ae}ee++}H++}return ee};s.exports=x},a352:function(s,u){s.exports=r},a434:function(s,u,d){var l=d("23e7"),m=d("23cb"),g=d("a691"),x=d("50c4"),w=d("7b0b"),I=d("65f0"),C=d("8418"),A=d("1dde"),L=d("ae40"),$=A("splice"),F=L("splice",{ACCESSORS:!0,0:0,1:2}),z=Math.max,ee=Math.min,H=9007199254740991,Q="Maximum allowed length exceeded";l({target:"Array",proto:!0,forced:!$||!F},{splice:function(be,te){var G=w(this),U=x(G.length),B=m(be,U),ie=arguments.length,X,ne,Ee,Ie,Xe,lt;if(ie===0?X=ne=0:ie===1?(X=0,ne=U-B):(X=ie-2,ne=ee(z(g(te),0),U-B)),U+X-ne>H)throw TypeError(Q);for(Ee=I(G,ne),Ie=0;Ie<ne;Ie++)Xe=B+Ie,Xe in G&&C(Ee,Ie,G[Xe]);if(Ee.length=ne,X<ne){for(Ie=B;Ie<U-ne;Ie++)Xe=Ie+ne,lt=Ie+X,Xe in G?G[lt]=G[Xe]:delete G[lt];for(Ie=U;Ie>U-ne+X;Ie--)delete G[Ie-1]}else if(X>ne)for(Ie=U-ne;Ie>B;Ie--)Xe=Ie+ne-1,lt=Ie+X-1,Xe in G?G[lt]=G[Xe]:delete G[lt];for(Ie=0;Ie<X;Ie++)G[Ie+B]=arguments[Ie+2];return G.length=U-ne+X,Ee}})},a4d3:function(s,u,d){var l=d("23e7"),m=d("da84"),g=d("d066"),x=d("c430"),w=d("83ab"),I=d("4930"),C=d("fdbf"),A=d("d039"),L=d("5135"),$=d("e8b5"),F=d("861d"),z=d("825a"),ee=d("7b0b"),H=d("fc6a"),Q=d("c04e"),ae=d("5c6c"),be=d("7c73"),te=d("df75"),G=d("241c"),U=d("057f"),B=d("7418"),ie=d("06cf"),X=d("9bf2"),ne=d("d1e7"),Ee=d("9112"),Ie=d("6eeb"),Xe=d("5692"),lt=d("f772"),st=d("d012"),$t=d("90e3"),It=d("b622"),nt=d("e538"),et=d("746f"),dt=d("d44e"),Be=d("69f3"),Ke=d("b727").forEach,ut=lt("hidden"),Ot="Symbol",Vt="prototype",_n=It("toPrimitive"),qt=Be.set,_e=Be.getterFor(Ot),ke=Object[Vt],ge=m.Symbol,ft=g("JSON","stringify"),q=ie.f,fe=X.f,Pe=U.f,We=ne.f,pt=Xe("symbols"),ht=Xe("op-symbols"),zt=Xe("string-to-symbol-registry"),Dt=Xe("symbol-to-string-registry"),Gt=Xe("wks"),ln=m.QObject,vt=!ln||!ln[Vt]||!ln[Vt].findChild,Rn=w&&A(function(){return be(fe({},"a",{get:function(){return fe(this,"a",{value:7}).a}})).a!=7})?function(Cn,jt,vn){var Pn=q(ke,jt);Pn&&delete ke[jt],fe(Cn,jt,vn),Pn&&Cn!==ke&&fe(ke,jt,Pn)}:fe,Ln=function(Cn,jt){var vn=pt[Cn]=be(ge[Vt]);return qt(vn,{type:Ot,tag:Cn,description:jt}),w||(vn.description=jt),vn},Ye=C?function(Cn){return typeof Cn=="symbol"}:function(Cn){return Object(Cn)instanceof ge},Qe=function(jt,vn,Pn){jt===ke&&Qe(ht,vn,Pn),z(jt);var he=Q(vn,!0);return z(Pn),L(pt,he)?(Pn.enumerable?(L(jt,ut)&&jt[ut][he]&&(jt[ut][he]=!1),Pn=be(Pn,{enumerable:ae(0,!1)})):(L(jt,ut)||fe(jt,ut,ae(1,{})),jt[ut][he]=!0),Rn(jt,he,Pn)):fe(jt,he,Pn)},Fe=function(jt,vn){z(jt);var Pn=H(vn),he=te(Pn).concat(Pt(Pn));return Ke(he,function(Y){(!w||St.call(Pn,Y))&&Qe(jt,Y,Pn[Y])}),jt},mt=function(jt,vn){return vn===void 0?be(jt):Fe(be(jt),vn)},St=function(jt){var vn=Q(jt,!0),Pn=We.call(this,vn);return this===ke&&L(pt,vn)&&!L(ht,vn)?!1:Pn||!L(this,vn)||!L(pt,vn)||L(this,ut)&&this[ut][vn]?Pn:!0},Yt=function(jt,vn){var Pn=H(jt),he=Q(vn,!0);if(!(Pn===ke&&L(pt,he)&&!L(ht,he))){var Y=q(Pn,he);return Y&&L(pt,he)&&!(L(Pn,ut)&&Pn[ut][he])&&(Y.enumerable=!0),Y}},an=function(jt){var vn=Pe(H(jt)),Pn=[];return Ke(vn,function(he){!L(pt,he)&&!L(st,he)&&Pn.push(he)}),Pn},Pt=function(jt){var vn=jt===ke,Pn=Pe(vn?ht:H(jt)),he=[];return Ke(Pn,function(Y){L(pt,Y)&&(!vn||L(ke,Y))&&he.push(pt[Y])}),he};if(I||(ge=function(){if(this instanceof ge)throw TypeError("Symbol is not a constructor");var jt=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),vn=$t(jt),Pn=function(he){this===ke&&Pn.call(ht,he),L(this,ut)&&L(this[ut],vn)&&(this[ut][vn]=!1),Rn(this,vn,ae(1,he))};return w&&vt&&Rn(ke,vn,{configurable:!0,set:Pn}),Ln(vn,jt)},Ie(ge[Vt],"toString",function(){return _e(this).tag}),Ie(ge,"withoutSetter",function(Cn){return Ln($t(Cn),Cn)}),ne.f=St,X.f=Qe,ie.f=Yt,G.f=U.f=an,B.f=Pt,nt.f=function(Cn){return Ln(It(Cn),Cn)},w&&(fe(ge[Vt],"description",{configurable:!0,get:function(){return _e(this).description}}),x||Ie(ke,"propertyIsEnumerable",St,{unsafe:!0}))),l({global:!0,wrap:!0,forced:!I,sham:!I},{Symbol:ge}),Ke(te(Gt),function(Cn){et(Cn)}),l({target:Ot,stat:!0,forced:!I},{for:function(Cn){var jt=String(Cn);if(L(zt,jt))return zt[jt];var vn=ge(jt);return zt[jt]=vn,Dt[vn]=jt,vn},keyFor:function(jt){if(!Ye(jt))throw TypeError(jt+" is not a symbol");if(L(Dt,jt))return Dt[jt]},useSetter:function(){vt=!0},useSimple:function(){vt=!1}}),l({target:"Object",stat:!0,forced:!I,sham:!w},{create:mt,defineProperty:Qe,defineProperties:Fe,getOwnPropertyDescriptor:Yt}),l({target:"Object",stat:!0,forced:!I},{getOwnPropertyNames:an,getOwnPropertySymbols:Pt}),l({target:"Object",stat:!0,forced:A(function(){B.f(1)})},{getOwnPropertySymbols:function(jt){return B.f(ee(jt))}}),ft){var qn=!I||A(function(){var Cn=ge();return ft([Cn])!="[null]"||ft({a:Cn})!="{}"||ft(Object(Cn))!="{}"});l({target:"JSON",stat:!0,forced:qn},{stringify:function(jt,vn,Pn){for(var he=[jt],Y=1,re;arguments.length>Y;)he.push(arguments[Y++]);if(re=vn,!(!F(vn)&&jt===void 0||Ye(jt)))return $(vn)||(vn=function(me,Ae){if(typeof re=="function"&&(Ae=re.call(this,me,Ae)),!Ye(Ae))return Ae}),he[1]=vn,ft.apply(null,he)}})}ge[Vt][_n]||Ee(ge[Vt],_n,ge[Vt].valueOf),dt(ge,Ot),st[ut]=!0},a630:function(s,u,d){var l=d("23e7"),m=d("4df4"),g=d("1c7e"),x=!g(function(w){Array.from(w)});l({target:"Array",stat:!0,forced:x},{from:m})},a640:function(s,u,d){var l=d("d039");s.exports=function(m,g){var x=[][m];return!!x&&l(function(){x.call(null,g||function(){throw 1},1)})}},a691:function(s,u){var d=Math.ceil,l=Math.floor;s.exports=function(m){return isNaN(m=+m)?0:(m>0?l:d)(m)}},ab13:function(s,u,d){var l=d("b622"),m=l("match");s.exports=function(g){var x=/./;try{"/./"[g](x)}catch{try{return x[m]=!1,"/./"[g](x)}catch{}}return!1}},ac1f:function(s,u,d){var l=d("23e7"),m=d("9263");l({target:"RegExp",proto:!0,forced:/./.exec!==m},{exec:m})},ad6d:function(s,u,d){var l=d("825a");s.exports=function(){var m=l(this),g="";return m.global&&(g+="g"),m.ignoreCase&&(g+="i"),m.multiline&&(g+="m"),m.dotAll&&(g+="s"),m.unicode&&(g+="u"),m.sticky&&(g+="y"),g}},ae40:function(s,u,d){var l=d("83ab"),m=d("d039"),g=d("5135"),x=Object.defineProperty,w={},I=function(C){throw C};s.exports=function(C,A){if(g(w,C))return w[C];A||(A={});var L=[][C],$=g(A,"ACCESSORS")?A.ACCESSORS:!1,F=g(A,0)?A[0]:I,z=g(A,1)?A[1]:void 0;return w[C]=!!L&&!m(function(){if($&&!l)return!0;var ee={length:-1};$?x(ee,1,{enumerable:!0,get:I}):ee[1]=1,L.call(ee,F,z)})}},ae93:function(s,u,d){var l=d("e163"),m=d("9112"),g=d("5135"),x=d("b622"),w=d("c430"),I=x("iterator"),C=!1,A=function(){return this},L,$,F;[].keys&&(F=[].keys(),"next"in F?($=l(l(F)),$!==Object.prototype&&(L=$)):C=!0),L==null&&(L={}),!w&&!g(L,I)&&m(L,I,A),s.exports={IteratorPrototype:L,BUGGY_SAFARI_ITERATORS:C}},b041:function(s,u,d){var l=d("00ee"),m=d("f5df");s.exports=l?{}.toString:function(){return"[object "+m(this)+"]"}},b0c0:function(s,u,d){var l=d("83ab"),m=d("9bf2").f,g=Function.prototype,x=g.toString,w=/^\s*function ([^ (]*)/,I="name";l&&!(I in g)&&m(g,I,{configurable:!0,get:function(){try{return x.call(this).match(w)[1]}catch{return""}}})},b622:function(s,u,d){var l=d("da84"),m=d("5692"),g=d("5135"),x=d("90e3"),w=d("4930"),I=d("fdbf"),C=m("wks"),A=l.Symbol,L=I?A:A&&A.withoutSetter||x;s.exports=function($){return g(C,$)||(w&&g(A,$)?C[$]=A[$]:C[$]=L("Symbol."+$)),C[$]}},b64b:function(s,u,d){var l=d("23e7"),m=d("7b0b"),g=d("df75"),x=d("d039"),w=x(function(){g(1)});l({target:"Object",stat:!0,forced:w},{keys:function(C){return g(m(C))}})},b727:function(s,u,d){var l=d("0366"),m=d("44ad"),g=d("7b0b"),x=d("50c4"),w=d("65f0"),I=[].push,C=function(A){var L=A==1,$=A==2,F=A==3,z=A==4,ee=A==6,H=A==5||ee;return function(Q,ae,be,te){for(var G=g(Q),U=m(G),B=l(ae,be,3),ie=x(U.length),X=0,ne=te||w,Ee=L?ne(Q,ie):$?ne(Q,0):void 0,Ie,Xe;ie>X;X++)if((H||X in U)&&(Ie=U[X],Xe=B(Ie,X,G),A)){if(L)Ee[X]=Xe;else if(Xe)switch(A){case 3:return!0;case 5:return Ie;case 6:return X;case 2:I.call(Ee,Ie)}else if(z)return!1}return ee?-1:F||z?z:Ee}};s.exports={forEach:C(0),map:C(1),filter:C(2),some:C(3),every:C(4),find:C(5),findIndex:C(6)}},c04e:function(s,u,d){var l=d("861d");s.exports=function(m,g){if(!l(m))return m;var x,w;if(g&&typeof(x=m.toString)=="function"&&!l(w=x.call(m))||typeof(x=m.valueOf)=="function"&&!l(w=x.call(m))||!g&&typeof(x=m.toString)=="function"&&!l(w=x.call(m)))return w;throw TypeError("Can't convert object to primitive value")}},c430:function(s,u){s.exports=!1},c6b6:function(s,u){var d={}.toString;s.exports=function(l){return d.call(l).slice(8,-1)}},c6cd:function(s,u,d){var l=d("da84"),m=d("ce4e"),g="__core-js_shared__",x=l[g]||m(g,{});s.exports=x},c740:function(s,u,d){var l=d("23e7"),m=d("b727").findIndex,g=d("44d2"),x=d("ae40"),w="findIndex",I=!0,C=x(w);w in[]&&Array(1)[w](function(){I=!1}),l({target:"Array",proto:!0,forced:I||!C},{findIndex:function(L){return m(this,L,arguments.length>1?arguments[1]:void 0)}}),g(w)},c8ba:function(s,u){var d;d=function(){return this}();try{d=d||new Function("return this")()}catch{typeof window=="object"&&(d=window)}s.exports=d},c975:function(s,u,d){var l=d("23e7"),m=d("4d64").indexOf,g=d("a640"),x=d("ae40"),w=[].indexOf,I=!!w&&1/[1].indexOf(1,-0)<0,C=g("indexOf"),A=x("indexOf",{ACCESSORS:!0,1:0});l({target:"Array",proto:!0,forced:I||!C||!A},{indexOf:function($){return I?w.apply(this,arguments)||0:m(this,$,arguments.length>1?arguments[1]:void 0)}})},ca84:function(s,u,d){var l=d("5135"),m=d("fc6a"),g=d("4d64").indexOf,x=d("d012");s.exports=function(w,I){var C=m(w),A=0,L=[],$;for($ in C)!l(x,$)&&l(C,$)&&L.push($);for(;I.length>A;)l(C,$=I[A++])&&(~g(L,$)||L.push($));return L}},caad:function(s,u,d){var l=d("23e7"),m=d("4d64").includes,g=d("44d2"),x=d("ae40"),w=x("indexOf",{ACCESSORS:!0,1:0});l({target:"Array",proto:!0,forced:!w},{includes:function(C){return m(this,C,arguments.length>1?arguments[1]:void 0)}}),g("includes")},cc12:function(s,u,d){var l=d("da84"),m=d("861d"),g=l.document,x=m(g)&&m(g.createElement);s.exports=function(w){return x?g.createElement(w):{}}},ce4e:function(s,u,d){var l=d("da84"),m=d("9112");s.exports=function(g,x){try{m(l,g,x)}catch{l[g]=x}return x}},d012:function(s,u){s.exports={}},d039:function(s,u){s.exports=function(d){try{return!!d()}catch{return!0}}},d066:function(s,u,d){var l=d("428f"),m=d("da84"),g=function(x){return typeof x=="function"?x:void 0};s.exports=function(x,w){return arguments.length<2?g(l[x])||g(m[x]):l[x]&&l[x][w]||m[x]&&m[x][w]}},d1e7:function(s,u,d){var l={}.propertyIsEnumerable,m=Object.getOwnPropertyDescriptor,g=m&&!l.call({1:2},1);u.f=g?function(w){var I=m(this,w);return!!I&&I.enumerable}:l},d28b:function(s,u,d){var l=d("746f");l("iterator")},d2bb:function(s,u,d){var l=d("825a"),m=d("3bbe");s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var g=!1,x={},w;try{w=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,w.call(x,[]),g=x instanceof Array}catch{}return function(C,A){return l(C),m(A),g?w.call(C,A):C.__proto__=A,C}}():void 0)},d3b7:function(s,u,d){var l=d("00ee"),m=d("6eeb"),g=d("b041");l||m(Object.prototype,"toString",g,{unsafe:!0})},d44e:function(s,u,d){var l=d("9bf2").f,m=d("5135"),g=d("b622"),x=g("toStringTag");s.exports=function(w,I,C){w&&!m(w=C?w:w.prototype,x)&&l(w,x,{configurable:!0,value:I})}},d58f:function(s,u,d){var l=d("1c0b"),m=d("7b0b"),g=d("44ad"),x=d("50c4"),w=function(I){return function(C,A,L,$){l(A);var F=m(C),z=g(F),ee=x(F.length),H=I?ee-1:0,Q=I?-1:1;if(L<2)for(;;){if(H in z){$=z[H],H+=Q;break}if(H+=Q,I?H<0:ee<=H)throw TypeError("Reduce of empty array with no initial value")}for(;I?H>=0:ee>H;H+=Q)H in z&&($=A($,z[H],H,F));return $}};s.exports={left:w(!1),right:w(!0)}},d784:function(s,u,d){d("ac1f");var l=d("6eeb"),m=d("d039"),g=d("b622"),x=d("9263"),w=d("9112"),I=g("species"),C=!m(function(){var z=/./;return z.exec=function(){var ee=[];return ee.groups={a:"7"},ee},"".replace(z,"$<a>")!=="7"}),A=function(){return"a".replace(/./,"$0")==="$0"}(),L=g("replace"),$=function(){return/./[L]?/./[L]("a","$0")==="":!1}(),F=!m(function(){var z=/(?:)/,ee=z.exec;z.exec=function(){return ee.apply(this,arguments)};var H="ab".split(z);return H.length!==2||H[0]!=="a"||H[1]!=="b"});s.exports=function(z,ee,H,Q){var ae=g(z),be=!m(function(){var X={};return X[ae]=function(){return 7},""[z](X)!=7}),te=be&&!m(function(){var X=!1,ne=/a/;return z==="split"&&(ne={},ne.constructor={},ne.constructor[I]=function(){return ne},ne.flags="",ne[ae]=/./[ae]),ne.exec=function(){return X=!0,null},ne[ae](""),!X});if(!be||!te||z==="replace"&&!(C&&A&&!$)||z==="split"&&!F){var G=/./[ae],U=H(ae,""[z],function(X,ne,Ee,Ie,Xe){return ne.exec===x?be&&!Xe?{done:!0,value:G.call(ne,Ee,Ie)}:{done:!0,value:X.call(Ee,ne,Ie)}:{done:!1}},{REPLACE_KEEPS_$0:A,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:$}),B=U[0],ie=U[1];l(String.prototype,z,B),l(RegExp.prototype,ae,ee==2?function(X,ne){return ie.call(X,this,ne)}:function(X){return ie.call(X,this)})}Q&&w(RegExp.prototype[ae],"sham",!0)}},d81d:function(s,u,d){var l=d("23e7"),m=d("b727").map,g=d("1dde"),x=d("ae40"),w=g("map"),I=x("map");l({target:"Array",proto:!0,forced:!w||!I},{map:function(A){return m(this,A,arguments.length>1?arguments[1]:void 0)}})},da84:function(s,u,d){(function(l){var m=function(g){return g&&g.Math==Math&&g};s.exports=m(typeof globalThis=="object"&&globalThis)||m(typeof window=="object"&&window)||m(typeof self=="object"&&self)||m(typeof l=="object"&&l)||Function("return this")()}).call(this,d("c8ba"))},dbb4:function(s,u,d){var l=d("23e7"),m=d("83ab"),g=d("56ef"),x=d("fc6a"),w=d("06cf"),I=d("8418");l({target:"Object",stat:!0,sham:!m},{getOwnPropertyDescriptors:function(A){for(var L=x(A),$=w.f,F=g(L),z={},ee=0,H,Q;F.length>ee;)Q=$(L,H=F[ee++]),Q!==void 0&&I(z,H,Q);return z}})},dbf1:function(s,u,d){(function(l){d.d(u,"a",function(){return g});function m(){return typeof window<"u"?window.console:l.console}var g=m()}).call(this,d("c8ba"))},ddb0:function(s,u,d){var l=d("da84"),m=d("fdbc"),g=d("e260"),x=d("9112"),w=d("b622"),I=w("iterator"),C=w("toStringTag"),A=g.values;for(var L in m){var $=l[L],F=$&&$.prototype;if(F){if(F[I]!==A)try{x(F,I,A)}catch{F[I]=A}if(F[C]||x(F,C,L),m[L]){for(var z in g)if(F[z]!==g[z])try{x(F,z,g[z])}catch{F[z]=g[z]}}}}},df75:function(s,u,d){var l=d("ca84"),m=d("7839");s.exports=Object.keys||function(x){return l(x,m)}},e01a:function(s,u,d){var l=d("23e7"),m=d("83ab"),g=d("da84"),x=d("5135"),w=d("861d"),I=d("9bf2").f,C=d("e893"),A=g.Symbol;if(m&&typeof A=="function"&&(!("description"in A.prototype)||A().description!==void 0)){var L={},$=function(){var ae=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),be=this instanceof $?new A(ae):ae===void 0?A():A(ae);return ae===""&&(L[be]=!0),be};C($,A);var F=$.prototype=A.prototype;F.constructor=$;var z=F.toString,ee=String(A("test"))=="Symbol(test)",H=/^Symbol\((.*)\)[^)]+$/;I(F,"description",{configurable:!0,get:function(){var ae=w(this)?this.valueOf():this,be=z.call(ae);if(x(L,ae))return"";var te=ee?be.slice(7,-1):be.replace(H,"$1");return te===""?void 0:te}}),l({global:!0,forced:!0},{Symbol:$})}},e163:function(s,u,d){var l=d("5135"),m=d("7b0b"),g=d("f772"),x=d("e177"),w=g("IE_PROTO"),I=Object.prototype;s.exports=x?Object.getPrototypeOf:function(C){return C=m(C),l(C,w)?C[w]:typeof C.constructor=="function"&&C instanceof C.constructor?C.constructor.prototype:C instanceof Object?I:null}},e177:function(s,u,d){var l=d("d039");s.exports=!l(function(){function m(){}return m.prototype.constructor=null,Object.getPrototypeOf(new m)!==m.prototype})},e260:function(s,u,d){var l=d("fc6a"),m=d("44d2"),g=d("3f8c"),x=d("69f3"),w=d("7dd0"),I="Array Iterator",C=x.set,A=x.getterFor(I);s.exports=w(Array,"Array",function(L,$){C(this,{type:I,target:l(L),index:0,kind:$})},function(){var L=A(this),$=L.target,F=L.kind,z=L.index++;return!$||z>=$.length?(L.target=void 0,{value:void 0,done:!0}):F=="keys"?{value:z,done:!1}:F=="values"?{value:$[z],done:!1}:{value:[z,$[z]],done:!1}},"values"),g.Arguments=g.Array,m("keys"),m("values"),m("entries")},e439:function(s,u,d){var l=d("23e7"),m=d("d039"),g=d("fc6a"),x=d("06cf").f,w=d("83ab"),I=m(function(){x(1)}),C=!w||I;l({target:"Object",stat:!0,forced:C,sham:!w},{getOwnPropertyDescriptor:function(L,$){return x(g(L),$)}})},e538:function(s,u,d){var l=d("b622");u.f=l},e893:function(s,u,d){var l=d("5135"),m=d("56ef"),g=d("06cf"),x=d("9bf2");s.exports=function(w,I){for(var C=m(I),A=x.f,L=g.f,$=0;$<C.length;$++){var F=C[$];l(w,F)||A(w,F,L(I,F))}}},e8b5:function(s,u,d){var l=d("c6b6");s.exports=Array.isArray||function(g){return l(g)=="Array"}},e95a:function(s,u,d){var l=d("b622"),m=d("3f8c"),g=l("iterator"),x=Array.prototype;s.exports=function(w){return w!==void 0&&(m.Array===w||x[g]===w)}},f5df:function(s,u,d){var l=d("00ee"),m=d("c6b6"),g=d("b622"),x=g("toStringTag"),w=m(function(){return arguments}())=="Arguments",I=function(C,A){try{return C[A]}catch{}};s.exports=l?m:function(C){var A,L,$;return C===void 0?"Undefined":C===null?"Null":typeof(L=I(A=Object(C),x))=="string"?L:w?m(A):($=m(A))=="Object"&&typeof A.callee=="function"?"Arguments":$}},f772:function(s,u,d){var l=d("5692"),m=d("90e3"),g=l("keys");s.exports=function(x){return g[x]||(g[x]=m(x))}},fb15:function(s,u,d){if(d.r(u),typeof window<"u"){var l=window.document.currentScript;{var m=d("8875");l=m(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:m})}var g=l&&l.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);g&&(d.p=g[1])}d("99af"),d("4de4"),d("4160"),d("c975"),d("d81d"),d("a434"),d("159b"),d("a4d3"),d("e439"),d("dbb4"),d("b64b");function x(Ye,Qe,Fe){return Qe in Ye?Object.defineProperty(Ye,Qe,{value:Fe,enumerable:!0,configurable:!0,writable:!0}):Ye[Qe]=Fe,Ye}function w(Ye,Qe){var Fe=Object.keys(Ye);if(Object.getOwnPropertySymbols){var mt=Object.getOwnPropertySymbols(Ye);Qe&&(mt=mt.filter(function(St){return Object.getOwnPropertyDescriptor(Ye,St).enumerable})),Fe.push.apply(Fe,mt)}return Fe}function I(Ye){for(var Qe=1;Qe<arguments.length;Qe++){var Fe=arguments[Qe]!=null?arguments[Qe]:{};Qe%2?w(Object(Fe),!0).forEach(function(mt){x(Ye,mt,Fe[mt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ye,Object.getOwnPropertyDescriptors(Fe)):w(Object(Fe)).forEach(function(mt){Object.defineProperty(Ye,mt,Object.getOwnPropertyDescriptor(Fe,mt))})}return Ye}function C(Ye){if(Array.isArray(Ye))return Ye}d("e01a"),d("d28b"),d("e260"),d("d3b7"),d("3ca3"),d("ddb0");function A(Ye,Qe){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Ye)))){var Fe=[],mt=!0,St=!1,Yt=void 0;try{for(var an=Ye[Symbol.iterator](),Pt;!(mt=(Pt=an.next()).done)&&(Fe.push(Pt.value),!(Qe&&Fe.length===Qe));mt=!0);}catch(qn){St=!0,Yt=qn}finally{try{!mt&&an.return!=null&&an.return()}finally{if(St)throw Yt}}return Fe}}d("a630"),d("fb6a"),d("b0c0"),d("25f0");function L(Ye,Qe){(Qe==null||Qe>Ye.length)&&(Qe=Ye.length);for(var Fe=0,mt=new Array(Qe);Fe<Qe;Fe++)mt[Fe]=Ye[Fe];return mt}function $(Ye,Qe){if(Ye){if(typeof Ye=="string")return L(Ye,Qe);var Fe=Object.prototype.toString.call(Ye).slice(8,-1);if(Fe==="Object"&&Ye.constructor&&(Fe=Ye.constructor.name),Fe==="Map"||Fe==="Set")return Array.from(Ye);if(Fe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Fe))return L(Ye,Qe)}}function F(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z(Ye,Qe){return C(Ye)||A(Ye,Qe)||$(Ye,Qe)||F()}function ee(Ye){if(Array.isArray(Ye))return L(Ye)}function H(Ye){if(typeof Symbol<"u"&&Symbol.iterator in Object(Ye))return Array.from(Ye)}function Q(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ae(Ye){return ee(Ye)||H(Ye)||$(Ye)||Q()}var be=d("a352"),te=d.n(be);function G(Ye){Ye.parentElement!==null&&Ye.parentElement.removeChild(Ye)}function U(Ye,Qe,Fe){var mt=Fe===0?Ye.children[0]:Ye.children[Fe-1].nextSibling;Ye.insertBefore(Qe,mt)}var B=d("dbf1");d("13d5"),d("4fad"),d("ac1f"),d("5319");function ie(Ye){var Qe=Object.create(null);return function(mt){var St=Qe[mt];return St||(Qe[mt]=Ye(mt))}}var X=/-(\w)/g,ne=ie(function(Ye){return Ye.replace(X,function(Qe,Fe){return Fe.toUpperCase()})});d("5db7"),d("73d9");var Ee=["Start","Add","Remove","Update","End"],Ie=["Choose","Unchoose","Sort","Filter","Clone"],Xe=["Move"],lt=[Xe,Ee,Ie].flatMap(function(Ye){return Ye}).map(function(Ye){return"on".concat(Ye)}),st={manage:Xe,manageAndEmit:Ee,emit:Ie};function $t(Ye){return lt.indexOf(Ye)!==-1}d("caad"),d("2ca0");var It=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function nt(Ye){return It.includes(Ye)}function et(Ye){return["transition-group","TransitionGroup"].includes(Ye)}function dt(Ye){return["id","class","role","style"].includes(Ye)||Ye.startsWith("data-")||Ye.startsWith("aria-")||Ye.startsWith("on")}function Be(Ye){return Ye.reduce(function(Qe,Fe){var mt=z(Fe,2),St=mt[0],Yt=mt[1];return Qe[St]=Yt,Qe},{})}function Ke(Ye){var Qe=Ye.$attrs,Fe=Ye.componentData,mt=Fe===void 0?{}:Fe,St=Be(Object.entries(Qe).filter(function(Yt){var an=z(Yt,2),Pt=an[0];return an[1],dt(Pt)}));return I(I({},St),mt)}function ut(Ye){var Qe=Ye.$attrs,Fe=Ye.callBackBuilder,mt=Be(Ot(Qe));Object.entries(Fe).forEach(function(Yt){var an=z(Yt,2),Pt=an[0],qn=an[1];st[Pt].forEach(function(Cn){mt["on".concat(Cn)]=qn(Cn)})});var St="[data-draggable]".concat(mt.draggable||"");return I(I({},mt),{},{draggable:St})}function Ot(Ye){return Object.entries(Ye).filter(function(Qe){var Fe=z(Qe,2),mt=Fe[0];return Fe[1],!dt(mt)}).map(function(Qe){var Fe=z(Qe,2),mt=Fe[0],St=Fe[1];return[ne(mt),St]}).filter(function(Qe){var Fe=z(Qe,2),mt=Fe[0];return Fe[1],!$t(mt)})}d("c740");function Vt(Ye,Qe){if(!(Ye instanceof Qe))throw new TypeError("Cannot call a class as a function")}function _n(Ye,Qe){for(var Fe=0;Fe<Qe.length;Fe++){var mt=Qe[Fe];mt.enumerable=mt.enumerable||!1,mt.configurable=!0,"value"in mt&&(mt.writable=!0),Object.defineProperty(Ye,mt.key,mt)}}function qt(Ye,Qe,Fe){return Qe&&_n(Ye.prototype,Qe),Fe&&_n(Ye,Fe),Ye}var _e=function(Qe){var Fe=Qe.el;return Fe},ke=function(Qe,Fe){return Qe.__draggable_context=Fe},ge=function(Qe){return Qe.__draggable_context},ft=function(){function Ye(Qe){var Fe=Qe.nodes,mt=Fe.header,St=Fe.default,Yt=Fe.footer,an=Qe.root,Pt=Qe.realList;Vt(this,Ye),this.defaultNodes=St,this.children=[].concat(ae(mt),ae(St),ae(Yt)),this.externalComponent=an.externalComponent,this.rootTransition=an.transition,this.tag=an.tag,this.realList=Pt}return qt(Ye,[{key:"render",value:function(Fe,mt){var St=this.tag,Yt=this.children,an=this._isRootComponent,Pt=an?{default:function(){return Yt}}:Yt;return Fe(St,mt,Pt)}},{key:"updated",value:function(){var Fe=this.defaultNodes,mt=this.realList;Fe.forEach(function(St,Yt){ke(_e(St),{element:mt[Yt],index:Yt})})}},{key:"getUnderlyingVm",value:function(Fe){return ge(Fe)}},{key:"getVmIndexFromDomIndex",value:function(Fe,mt){var St=this.defaultNodes,Yt=St.length,an=mt.children,Pt=an.item(Fe);if(Pt===null)return Yt;var qn=ge(Pt);if(qn)return qn.index;if(Yt===0)return 0;var Cn=_e(St[0]),jt=ae(an).findIndex(function(vn){return vn===Cn});return Fe<jt?0:Yt}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),Ye}(),q=d("8bbf");function fe(Ye,Qe){var Fe=Ye[Qe];return Fe?Fe():[]}function Pe(Ye){var Qe=Ye.$slots,Fe=Ye.realList,mt=Ye.getKey,St=Fe||[],Yt=["header","footer"].map(function(vn){return fe(Qe,vn)}),an=z(Yt,2),Pt=an[0],qn=an[1],Cn=Qe.item;if(!Cn)throw new Error("draggable element must have an item slot");var jt=St.flatMap(function(vn,Pn){return Cn({element:vn,index:Pn}).map(function(he){return he.key=mt(vn),he.props=I(I({},he.props||{}),{},{"data-draggable":!0}),he})});if(jt.length!==St.length)throw new Error("Item slot must have only one child");return{header:Pt,footer:qn,default:jt}}function We(Ye){var Qe=et(Ye),Fe=!nt(Ye)&&!Qe;return{transition:Qe,externalComponent:Fe,tag:Fe?Object(q.resolveComponent)(Ye):Qe?q.TransitionGroup:Ye}}function pt(Ye){var Qe=Ye.$slots,Fe=Ye.tag,mt=Ye.realList,St=Ye.getKey,Yt=Pe({$slots:Qe,realList:mt,getKey:St}),an=We(Fe);return new ft({nodes:Yt,root:an,realList:mt})}function ht(Ye,Qe){var Fe=this;Object(q.nextTick)(function(){return Fe.$emit(Ye.toLowerCase(),Qe)})}function zt(Ye){var Qe=this;return function(Fe,mt){if(Qe.realList!==null)return Qe["onDrag".concat(Ye)](Fe,mt)}}function Dt(Ye){var Qe=this,Fe=zt.call(this,Ye);return function(mt,St){Fe.call(Qe,mt,St),ht.call(Qe,Ye,mt)}}var Gt=null,ln={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(Qe){return Qe}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},vt=["update:modelValue","change"].concat(ae([].concat(ae(st.manageAndEmit),ae(st.emit)).map(function(Ye){return Ye.toLowerCase()}))),Rn=Object(q.defineComponent)({name:"draggable",inheritAttrs:!1,props:ln,emits:vt,data:function(){return{error:!1}},render:function(){try{this.error=!1;var Qe=this.$slots,Fe=this.$attrs,mt=this.tag,St=this.componentData,Yt=this.realList,an=this.getKey,Pt=pt({$slots:Qe,tag:mt,realList:Yt,getKey:an});this.componentStructure=Pt;var qn=Ke({$attrs:Fe,componentData:St});return Pt.render(q.h,qn)}catch(Cn){return this.error=!0,Object(q.h)("pre",{style:{color:"red"}},Cn.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&B.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var Qe=this;if(!this.error){var Fe=this.$attrs,mt=this.$el,St=this.componentStructure;St.updated();var Yt=ut({$attrs:Fe,callBackBuilder:{manageAndEmit:function(qn){return Dt.call(Qe,qn)},emit:function(qn){return ht.bind(Qe,qn)},manage:function(qn){return zt.call(Qe,qn)}}}),an=mt.nodeType===1?mt:mt.parentElement;this._sortable=new te.a(an,Yt),this.targetDomElement=an,an.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var Qe=this.list;return Qe||this.modelValue},getKey:function(){var Qe=this.itemKey;return typeof Qe=="function"?Qe:function(Fe){return Fe[Qe]}}},watch:{$attrs:{handler:function(Qe){var Fe=this._sortable;Fe&&Ot(Qe).forEach(function(mt){var St=z(mt,2),Yt=St[0],an=St[1];Fe.option(Yt,an)})},deep:!0}},methods:{getUnderlyingVm:function(Qe){return this.componentStructure.getUnderlyingVm(Qe)||null},getUnderlyingPotencialDraggableComponent:function(Qe){return Qe.__draggable_component__},emitChanges:function(Qe){var Fe=this;Object(q.nextTick)(function(){return Fe.$emit("change",Qe)})},alterList:function(Qe){if(this.list){Qe(this.list);return}var Fe=ae(this.modelValue);Qe(Fe),this.$emit("update:modelValue",Fe)},spliceList:function(){var Qe=arguments,Fe=function(St){return St.splice.apply(St,ae(Qe))};this.alterList(Fe)},updatePosition:function(Qe,Fe){var mt=function(Yt){return Yt.splice(Fe,0,Yt.splice(Qe,1)[0])};this.alterList(mt)},getRelatedContextFromMoveEvent:function(Qe){var Fe=Qe.to,mt=Qe.related,St=this.getUnderlyingPotencialDraggableComponent(Fe);if(!St)return{component:St};var Yt=St.realList,an={list:Yt,component:St};if(Fe!==mt&&Yt){var Pt=St.getUnderlyingVm(mt)||{};return I(I({},Pt),an)}return an},getVmIndexFromDomIndex:function(Qe){return this.componentStructure.getVmIndexFromDomIndex(Qe,this.targetDomElement)},onDragStart:function(Qe){this.context=this.getUnderlyingVm(Qe.item),Qe.item._underlying_vm_=this.clone(this.context.element),Gt=Qe.item},onDragAdd:function(Qe){var Fe=Qe.item._underlying_vm_;if(Fe!==void 0){G(Qe.item);var mt=this.getVmIndexFromDomIndex(Qe.newIndex);this.spliceList(mt,0,Fe);var St={element:Fe,newIndex:mt};this.emitChanges({added:St})}},onDragRemove:function(Qe){if(U(this.$el,Qe.item,Qe.oldIndex),Qe.pullMode==="clone"){G(Qe.clone);return}var Fe=this.context,mt=Fe.index,St=Fe.element;this.spliceList(mt,1);var Yt={element:St,oldIndex:mt};this.emitChanges({removed:Yt})},onDragUpdate:function(Qe){G(Qe.item),U(Qe.from,Qe.item,Qe.oldIndex);var Fe=this.context.index,mt=this.getVmIndexFromDomIndex(Qe.newIndex);this.updatePosition(Fe,mt);var St={element:this.context.element,oldIndex:Fe,newIndex:mt};this.emitChanges({moved:St})},computeFutureIndex:function(Qe,Fe){if(!Qe.element)return 0;var mt=ae(Fe.to.children).filter(function(Pt){return Pt.style.display!=="none"}),St=mt.indexOf(Fe.related),Yt=Qe.component.getVmIndexFromDomIndex(St),an=mt.indexOf(Gt)!==-1;return an||!Fe.willInsertAfter?Yt:Yt+1},onDragMove:function(Qe,Fe){var mt=this.move,St=this.realList;if(!mt||!St)return!0;var Yt=this.getRelatedContextFromMoveEvent(Qe),an=this.computeFutureIndex(Yt,Qe),Pt=I(I({},this.context),{},{futureIndex:an}),qn=I(I({},Qe),{},{relatedContext:Yt,draggedContext:Pt});return mt(qn,Fe)},onDragEnd:function(){Gt=null}}}),Ln=Rn;u.default=Ln},fb6a:function(s,u,d){var l=d("23e7"),m=d("861d"),g=d("e8b5"),x=d("23cb"),w=d("50c4"),I=d("fc6a"),C=d("8418"),A=d("b622"),L=d("1dde"),$=d("ae40"),F=L("slice"),z=$("slice",{ACCESSORS:!0,0:0,1:2}),ee=A("species"),H=[].slice,Q=Math.max;l({target:"Array",proto:!0,forced:!F||!z},{slice:function(be,te){var G=I(this),U=w(G.length),B=x(be,U),ie=x(te===void 0?U:te,U),X,ne,Ee;if(g(G)&&(X=G.constructor,typeof X=="function"&&(X===Array||g(X.prototype))?X=void 0:m(X)&&(X=X[ee],X===null&&(X=void 0)),X===Array||X===void 0))return H.call(G,B,ie);for(ne=new(X===void 0?Array:X)(Q(ie-B,0)),Ee=0;B<ie;B++,Ee++)B in G&&C(ne,Ee,G[B]);return ne.length=Ee,ne}})},fc6a:function(s,u,d){var l=d("44ad"),m=d("1d80");s.exports=function(g){return l(m(g))}},fdbc:function(s,u){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(s,u,d){var l=d("4930");s.exports=l&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(qP);var Lie=qP.exports;const sD=DA(Lie),Oie={class:"drawer-items-grid"},Rie={class:"item-container relative rounded flex items-start group shadow-sm"},Fie={key:0,class:"drag-handle cursor-move h-full py-1 rounded-l border border-r-0 group-hover:bg-blue-600 group-hover:border-blue-600 group-hover:text-blue-100 transition-colors"},$ie=rt({__name:"DrawerItemsGrid",props:{totalResults:{default:void 0},matches:{},status:{},drawerId:{default:void 0},isDraggable:{type:Boolean,default:!1}},emits:["loadMore","dragEnd"],setup(e,{emit:t}){const i=e,r=Re(i.matches);fn(()=>i.matches,d=>{r.value=d});const{arrivedState:s}=P_(window,{offset:{bottom:100}});fn(s,d=>{d.bottom&&u.value&&i.status!=="fetching"&&t("loadMore")},{immediate:!0});const u=Le(()=>(i.totalResults??1/0)>i.matches.length);return(d,l)=>(V(),pe("div",Oie,[ye(ce(sD),{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=m=>r.value=m),class:"grid grid-cols-auto-md gap-4",itemKey:m=>m.excerptId?`${m.objectId}-${m.excerptId}`:`${m.objectId}`,handle:".drag-handle",ghostClass:"draggable-ghost",dragClass:"is-dragging",disabled:!d.isDraggable,onEnd:l[1]||(l[1]=m=>t("dragEnd",r.value))},{item:Ce(({element:m})=>[de("div",Rie,[d.isDraggable?(V(),pe("div",Fie,[ye(ce(mM))])):tt("",!0),ye(Wv,{id:`object-${m.objectId}`,searchMatch:m,showDetails:!1,drawerId:d.drawerId,class:"search-result-card h-full flex-1 !rounded-l-none",mediaCardClass:["group-hover:bg-blue-50 group-hover:border-blue-600 group-hover:!text-blue-600",d.isDraggable?"rounded-l-none !border-l-0 shadow-none":""]},null,8,["id","searchMatch","drawerId","mediaCardClass"])])]),_:1},8,["modelValue","itemKey","disabled"])]))}});const zie=sn($ie,[["__scopeId","data-v-168550da"]]),Bie={class:"item-container relative rounded flex group shadow-sm"},Nie={key:0,class:"drag-handle cursor-move py-1 rounded-l group-hover:bg-blue-600 group-hover:border-blue-600 group-hover:text-blue-100 transition-colors bg-white"},jie=rt({__name:"DrawerItemsList",props:{totalResults:{default:void 0},matches:{},status:{},isDraggable:{type:Boolean,default:!1}},emits:["loadMore","dragEnd"],setup(e,{emit:t}){const i=e,r=Re(i.matches);fn(()=>i.matches,d=>{r.value=d});const{arrivedState:s}=P_(window,{offset:{bottom:100}});fn(s,d=>{d.bottom&&u.value&&i.status!=="fetching"&&t("loadMore")},{immediate:!0});const u=Le(()=>(i.totalResults??1/0)>i.matches.length);return(d,l)=>(V(),pe("div",null,[ye(ce(sD),{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=m=>r.value=m),class:"flex flex-col gap-2",itemKey:"objectId",handle:".drag-handle",ghostClass:"draggable-ghost",dragClass:"is-dragging",disabled:!d.isDraggable,onEnd:l[1]||(l[1]=m=>t("dragEnd",r.value))},{item:Ce(({element:m})=>[de("div",Bie,[d.isDraggable?(V(),pe("div",Nie,[ye(ce(mM))])):tt("",!0),(V(),je(cP,{id:`object-${m.objectId}`,key:m.objectId,searchMatch:m,showDetails:!1,class:kn(["search-result-row flex-1",{"rounded-l-none border-l-none":d.isDraggable}])},null,8,["id","searchMatch","class"]))])]),_:1},8,["modelValue","disabled"])]))}});const Uie=sn(jie,[["__scopeId","data-v-22d39cd1"]]),Vie={class:"px-4"},Hie={class:"my-8 flex flex-wrap items-center"},Gie={class:"text-4xl font-bold flex-grow"},Wie={key:0,class:"flex items-center gap-2 bg-white p-1 rounded-md"},qie=de("span",{class:"sr-only"},"Edit Permissions",-1),Zie=de("span",{class:"sr-only"},"Download Drawer",-1),Kie={class:"bg-transparent-black-50 rounded-md mb-4 sm:flex justify-between items-center p-2"},Xie={key:1,class:"flex items-center gap-2 text-neutral-500 text-sm"},Yie={class:"flex items-baseline gap-2"},Jie=de("label",{for:"location",class:"sr-only"},"Sort",-1),Qie=["value"],ere=["value"],tre=rt({__name:"DrawerViewPage",props:{drawerId:{},resultsView:{default:"grid"}},setup(e){const t=e,i=si.instance.base.url,r=Ei(),u=(te=>nx.includes(te))(t.resultsView)?t.resultsView:"grid",d=Re(u),l=Re("idle"),m=Da(),g=lo(),x=Iu(),w=Le(()=>m.getDrawerById(t.drawerId)),I={[ys.TITLE]:"Default Title",[ys.CUSTOM]:"Custom"},C=Re(ys.TITLE),A=Le(()=>{var te;return(te=m.drawerRecords[t.drawerId])==null?void 0:te.title}),L=te=>nx.includes(te.id);function $(te){if(!L(te))throw new Error(`Invalid tab id: ${te.id}`);d.value=te.id,g.replace({query:{...x.query,resultsView:te.id}})}function F(te){m.setDrawerItems(t.drawerId,te)}function z(){console.log("load more")}function ee(){console.log("load all")}const H=te=>typeof te=="string"&&te in I;function Q(te){const G=te.target.value;if(!H(G))throw new Error(`Invalid sort option: ${G}`);C.value=G,ae(G),m.setDrawerSortBy(t.drawerId,G)}function ae(te){g.replace({query:{...x.query,sort:te}})}const be=sm();return Fn(async()=>{l.value="fetching";const te=await m.refreshDrawer(t.drawerId);if(!(te!=null&&te.contents))return l.value="error",be.setError(new Error("Couldn't find drawer content."));if(!x.query.sort||!H(x.query.sort)){C.value=te.contents.sortBy??ys.TITLE,ae(C.value),l.value="success";return}if(x.query.sort===te.contents.sortBy){C.value=x.query.sort,l.value="success";return}C.value=x.query.sort,await m.setDrawerSortBy(t.drawerId,x.query.sort),l.value="success"}),(te,G)=>(V(),je(co,{class:"drawer-view-page"},{default:Ce(()=>{var U;return[de("div",Vie,[ye(os,{to:"/drawers/listDrawers",class:"flex items-center gap-1 mb-4 hover:no-underline mt-8"},{default:Ce(()=>[ye(ce(Cu),{class:"transform rotate-180 h-4 w-4"}),Mt(" Back to Drawers ")]),_:1}),de("header",Hie,[de("h2",Gie,xt(A.value),1),(U=ce(r).currentUser)!=null&&U.canManageDrawers?(V(),pe("div",Wie,[ye(vc,{href:`${ce(i)}/permissions/edit/drawer/${te.drawerId}`,title:"Edit Permissions"},{default:Ce(()=>[ye(ce(W8),{class:"!w-5 !h-5"}),qie]),_:1},8,["href"]),ye(vc,{title:"Download Drawer",to:`/drawers/downloadDrawer/${te.drawerId}`},{default:Ce(()=>[ye(ce(I1),{class:"!w-5 !h-5"}),Zie]),_:1},8,["to"])])):tt("",!0)]),w.value?(V(),je(lP,{key:0,labelsClass:"drawer-view-page__tabs sticky top-14 z-20  -mx-4 px-4 border-b border-neutral-200 pt-4",activeTabId:d.value,onTabChange:$},{default:Ce(()=>[de("div",Kie,[de("div",null,[w.value.contents?(V(),je(Ex,{key:0,class:"mb-2 sm:mb-0",total:w.value.contents.totalResults,fetchStatus:l.value,showingCount:w.value.contents.matches.length,onLoadMore:z,onLoadAll:ee},null,8,["total","fetchStatus","showingCount"])):(V(),pe("div",Xie,[ye(No,{class:"animate-spin h-5 w-5"}),Mt(" Loading... ")]))]),de("div",Yie,[Jie,de("select",{id:"sort",name:"sort",class:"block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-neutral-900 ring-1 ring-inset ring-neutral-300 focus:ring-2 focus:ring-indigo-600 text-sm sm:leading-6 max-w-full bg-transparent-white-800",value:C.value,onChange:Q},[(V(),pe(Nt,null,$n(I,(B,ie)=>de("option",{key:ie,value:ie},xt(B),9,ere)),64))],40,Qie)])]),ye(Eo,{id:"grid",label:"Grid"},{default:Ce(()=>[ye(_r,{name:"fade"},{default:Ce(()=>{var B;return[w.value.contents?(V(),je(zie,{key:0,totalResults:w.value.contents.totalResults,matches:w.value.contents.matches,status:l.value,drawerId:te.drawerId,isDraggable:C.value===ce(ys).CUSTOM&&((B=ce(r).currentUser)==null?void 0:B.canManageDrawers),onDragEnd:F},null,8,["totalResults","matches","status","drawerId","isDraggable"])):tt("",!0)]}),_:1})]),_:1}),ye(Eo,{id:"list",label:"List"},{default:Ce(()=>[ye(_r,{name:"fade"},{default:Ce(()=>{var B;return[w.value.contents?(V(),je(Uie,{key:0,totalResults:w.value.contents.totalResults,matches:w.value.contents.matches,status:l.value,drawerId:te.drawerId,isDraggable:C.value===ce(ys).CUSTOM&&((B=ce(r).currentUser)==null?void 0:B.canManageDrawers),onDragEnd:F},null,8,["totalResults","matches","status","drawerId","isDraggable"])):tt("",!0)]}),_:1})]),_:1}),ye(Eo,{id:"timeline",label:"Timeline"},{default:Ce(()=>[ye(_r,{name:"fade"},{default:Ce(()=>[w.value.contents?(V(),je(J1,{key:0,totalResults:w.value.contents.totalResults,matches:w.value.contents.matches,status:l.value},null,8,["totalResults","matches","status"])):tt("",!0)]),_:1})]),_:1}),ye(Eo,{id:"map",label:"Map"},{default:Ce(()=>[ye(_r,{name:"fade"},{default:Ce(()=>[w.value.contents?(V(),je(Q1,{key:0,totalResults:w.value.contents.totalResults,matches:w.value.contents.matches,status:l.value},null,8,["totalResults","matches","status"])):tt("",!0)]),_:1})]),_:1}),ye(Eo,{id:"gallery",label:"Gallery"},{default:Ce(()=>[ye(_r,{name:"fade"},{default:Ce(()=>[w.value.contents?(V(),je(tw,{key:0,totalResults:w.value.contents.totalResults,matches:w.value.contents.matches,status:l.value},null,8,["totalResults","matches","status"])):tt("",!0)]),_:1})]),_:1})]),_:1},8,["activeTabId"])):tt("",!0)])]}),_:1}))}});const aw=e=>(ao("data-v-92e8dc65"),e=e(),oo(),e),nre={class:"max-w-lg mx-auto mt-12"},ire=aw(()=>de("h1",{class:"text-4xl font-bold mb-8"},"Add Asset",-1)),rre=["action"],sre=aw(()=>de("label",{for:"templateId"},"Choose a template ",-1)),are=aw(()=>de("option",{value:"",disabled:"",selected:""},"--",-1)),ore=["value"],lre=rt({__name:"CreateAssetPage",setup(e){const t=si.instance.base.url,i=Ei(),r=Re("");return(s,u)=>(V(),je(co,null,{default:Ce(()=>[de("div",nre,[ire,de("form",{action:`${ce(t)}/assetManager/addAsset`,method:"POST",class:"flex flex-col gap-4"},[sre,as(de("select",{id:"templateId","onUpdate:modelValue":u[0]||(u[0]=d=>r.value=d),name:"templateId",class:"rounded-md",required:""},[are,(V(!0),pe(Nt,null,$n(ce(i).instance.templates,d=>(V(),pe("option",{key:d.id,value:d.id},xt(d.name),9,ore))),128))],512),[[wh,r.value]]),ye(ai,{type:"submit",variant:"primary",class:"block my-4 w-full",disabled:!r.value},{default:Ce(()=>[Mt("Add Asset")]),_:1},8,["disabled"])],8,rre)])]),_:1}))}});const cre=sn(lre,[["__scopeId","data-v-92e8dc65"]]),ure={class:"max-w-md mx-auto py-8 px-4 text-center"},dre=de("h1",{class:"text-2xl my-8"},"Your Download is Ready",-1),hre={class:"flex flex-col items-center justify-center"},fre=de("h1",{class:"text-3xl my-6"},"Working on it!",-1),pre=de("p",null," We're getting your drawer ready. We'll send you an email when your link is all set. ",-1),mre=rt({__name:"DownloadDrawerPage",props:{drawerId:{}},setup(e){const t=e,i=Re(!1),r=Da(),s=Re(null),u=Ei(),d=lo();return Fn(async()=>{s.value=await r.downloadDrawer(t.drawerId),i.value=!0}),NB(()=>{var l;if(!((l=u.currentUser)!=null&&l.canManageDrawers)){d.push(`/drawers/viewDrawer/${t.drawerId}`);return}}),(l,m)=>(V(),je(co,null,{default:Ce(()=>{var g;return[de("div",ure,[i.value?((g=s.value)==null?void 0:g.status)==="completed"?(V(),pe(Nt,{key:1},[dre,de("p",hre,[ye(ai,{variant:"primary",href:s.value.url},{default:Ce(()=>[ye(ce(I1),{class:"!w-5 !h-5 mr-2"}),Mt(" Download ")]),_:1},8,["href"]),ye(ai,{variant:"tertiary",to:`/drawers/viewDrawer/${l.drawerId}`,class:"my-6"},{default:Ce(()=>[Mt(" ← Back to Drawer ")]),_:1},8,["to"])])],64)):(V(),pe(Nt,{key:2},[fre,pre,ye(ai,{to:`/drawers/viewDrawer/${l.drawerId}`,class:"my-6"},{default:Ce(()=>[Mt(" ← Back to Drawer ")]),_:1},8,["to"])],64)):(V(),je(ce(No),{key:0,class:"!w-5 !h-5 animate-spin"}))])]}),_:1}))}}),gre=rt({__name:"LogoutPage",setup(e){const t=Ei(),i=Da(),r=lo();return Fn(async()=>{await Hn.logout(),Hn.clearCache(),WP(),t.init(),i.init(),r.push("/")}),()=>{}}}),vre={key:0,class:"p-4 lg:p-8 mx-auto flex-1 w-full max-w-screen-xl"},_re={class:"flex justify-between items-baseline my-4 flex-wrap"},yre={class:"text-4xl font-bold flex-1"},bre={class:"flex justify-between p-1 items-center flex-wrap"},xre={class:"inline-flex gap-2 items-center"},wre=de("span",{class:"font-bold text-xs uppercase"},"Time",-1),Sre={class:"text-sm"},Tre=rt({__name:"ExcerptViewPage",props:{excerptId:{}},setup(e){const t=e,i=Re(null);return Fn(async()=>{i.value=await Hn.getExcerpt(t.excerptId)}),(r,s)=>(V(),je(Dk,null,{default:Ce(()=>[ye(_r,{name:"fade"},{default:Ce(()=>[i.value?(V(),pe("div",vre,[de("header",_re,[de("h1",yre,xt(i.value.label||`Excerpt ${i.value.id}`),1),ye(ai,{variant:"tertiary",to:`/asset/viewAsset/${i.value.assetId}`},{default:Ce(()=>[Mt("View Asset")]),_:1},8,["to"])]),ye(nP,{fileObjectId:i.value.fileObjectId,startTime:i.value.startTime,endTime:i.value.endTime},null,8,["fileObjectId","startTime","endTime"]),de("div",bre,[de("div",xre,[wre,de("span",Sre,xt(ce(Wl)(i.value.startTime))+" - "+xt(ce(Wl)(i.value.endTime)),1)]),de("div",null,[ye(Yk,{fileObjectId:i.value.fileObjectId},null,8,["fileObjectId"]),ye(Jk,{assetId:i.value.assetId,fileObjectId:i.value.fileObjectId},null,8,["assetId","fileObjectId"]),ye(eP,{fileObjectId:i.value.fileObjectId},null,8,["fileObjectId"])])])])):tt("",!0)]),_:1})]),_:1}))}}),Ere={class:"p-4"},Ire={key:0,class:"flex items-center justify-center bg-neutral-200 p-4 gap-4 min-h-[480px]"},Cre={key:1},Are=rt({__name:"SearchResultsEmbedPage",props:{searchId:{},embedType:{}},setup(e){const t=e,i=Ir(),r=Re(!1);return i.onBeforeNewSearch(()=>{r.value=!1}),i.onAfterNewSearch(()=>{r.value=!0}),fn(()=>t.searchId,()=>{const s=["map","timeline"].includes(t.embedType);i.search(t.searchId,{loadAll:s})},{immediate:!0}),(s,u)=>(V(),pe("div",Ere,[ye(_r,{name:"fade",mode:"out-in"},{default:Ce(()=>[r.value?(V(),pe("div",Cre,[s.embedType==="map"?(V(),je(Q1,{key:0,class:"",totalResults:ce(i).totalResults,matches:ce(i).matches,status:ce(i).status,onLoadMore:u[0]||(u[0]=()=>ce(i).loadMore())},null,8,["totalResults","matches","status"])):s.embedType==="timeline"?(V(),je(J1,{key:1,totalResults:ce(i).totalResults??1/0,matches:ce(i).matches,status:ce(i).status,onLoadMore:u[1]||(u[1]=()=>ce(i).loadMore())},null,8,["totalResults","matches","status"])):s.embedType==="gallery"?(V(),je(tw,{key:2,totalResults:ce(i).totalResults??1/0,matches:ce(i).matches,status:ce(i).status,onLoadMore:u[2]||(u[2]=()=>ce(i).loadMore())},null,8,["totalResults","matches","status"])):tt("",!0)])):(V(),pe("div",Ire,[ye(Ao,{width:"100%",height:"100%",class:"rounded-none"},{default:Ce(()=>[Mt(" Loading... ")]),_:1})]))]),_:1})]))}});function Od(e){return typeof e=="string"?Number.parseInt(e):null}const ow=qB({history:cB(si.instance.base.path),scrollBehavior(e,t,i){if(i)return i;const r=e.hash?document.getElementById(e.hash.substring(1)):null;return r?{el:r,behavior:"smooth",top:100}:e.path===t.path?!1:{top:0}},routes:[{name:"home",path:"/",component:WG},{name:"asset",path:"/asset/viewAsset/:assetId",component:VX,props:e=>{var t;return{assetId:e.params.assetId,objectId:(t=e.hash)==null?void 0:t.substring(1)}}},{name:"viewExcerpt",path:"/asset/viewExcerpt/:excerptId",component:Tre,props:e=>({excerptId:Od(e.params.excerptId)})},{name:"addAsset",path:"/asset/create",component:cre},{name:"listCollections",path:"/search/listCollections",alias:"/collections",component:QX},{name:"browseCollection",path:"/collections/browseCollection/:collectionId",alias:"/collections/:collectionId",component:eY,props:e=>({collectionId:Od(e.params.collectionId)})},{name:"allDrawersPage",path:"/drawers/listDrawers",component:Zne},{name:"viewDrawerPage",path:"/drawers/viewDrawer/:drawerId",component:tre,props:e=>({drawerId:Od(e.params.drawerId),resultsView:e.query.resultsView??null})},{name:"downloadDrawerPage",path:"/drawers/downloadDrawer/:drawerId",component:mre,props:e=>({drawerId:Od(e.params.drawerId)})},{name:"search",path:"/search/s/:searchId",component:hne,props:e=>({searchId:e.params.searchId,objectId:e.query.objectId??null,resultsView:e.query.resultsView??null})},{name:"searchResultsMapEmbed",path:"/search/:embedType/:searchId",component:Are,props:!0},{name:"localLogin",path:"/loginManager/localLogin",component:Ene,props:e=>({redirectURL:e.query.redirect??null})},{name:"logout",path:"/logout",component:gre},{name:"staticContentPage",path:"/page/view/:pageId",component:Pne,props:e=>({pageId:Od(e.params.pageId)})},{name:"error",path:"/error/:errorCode",component:rI,props:e=>({errorCode:Od(e.params.errorCode)})},{name:"catchall",path:"/:pathMatch(.*)",component:rI,props:()=>({errorCode:404})}]});ow.onError(e=>{sm().setError(e)});ow.beforeResolve((e,t,i)=>{sm().clearError();const s=e.path.replace(/\/\//g,"/");s!==e.path&&i(s),i()});const Mre=XC(Rj),aD=Q3();aD.use(Fj);Mre.use(ow).use(aD).mount("#app");export{F9 as M,V9 as _,Wi as a,V as b,pe as c,rt as d,En as e,wi as i,Fn as o,Re as r};
//# sourceMappingURL=main-60fc7ca3.js.map
