var NL=Object.defineProperty;var UL=(e,t,i)=>t in e?NL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var Tg=(e,t,i)=>(UL(e,typeof t!="symbol"?t+"":t,i),i);function s_(e,t){const i=Object.create(null),r=e.split(",");for(let s=0;s<r.length;s++)i[r[s]]=!0;return t?s=>!!i[s.toLowerCase()]:s=>!!i[s]}const Li={},jd=[],Ka=()=>{},jL=()=>!1,VL=/^on[^a-z]/,qp=e=>VL.test(e),kx=e=>e.startsWith("onUpdate:"),Ui=Object.assign,Px=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},HL=Object.prototype.hasOwnProperty,bi=(e,t)=>HL.call(e,t),xn=Array.isArray,Vd=e=>vh(e)==="[object Map]",bu=e=>vh(e)==="[object Set]",OS=e=>vh(e)==="[object Date]",GL=e=>vh(e)==="[object RegExp]",jn=e=>typeof e=="function",Qi=e=>typeof e=="string",Tp=e=>typeof e=="symbol",Ri=e=>e!==null&&typeof e=="object",Dx=e=>Ri(e)&&jn(e.then)&&jn(e.catch),pC=Object.prototype.toString,vh=e=>pC.call(e),WL=e=>vh(e).slice(8,-1),mC=e=>vh(e)==="[object Object]",Lx=e=>Qi(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,rp=s_(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),a_=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},qL=/-(\w)/g,$s=a_(e=>e.replace(qL,(t,i)=>i?i.toUpperCase():"")),ZL=/\B([A-Z])/g,_a=a_(e=>e.replace(ZL,"-$1").toLowerCase()),Zp=a_(e=>e.charAt(0).toUpperCase()+e.slice(1)),sp=a_(e=>e?`on${Zp(e)}`:""),Yd=(e,t)=>!Object.is(e,t),Hd=(e,t)=>{for(let i=0;i<e.length;i++)e[i](t)},Sv=(e,t,i)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:i})},Tv=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Ev=e=>{const t=Qi(e)?Number(e):NaN;return isNaN(t)?e:t};let RS;const gb=()=>RS||(RS=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),KL="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console",XL=s_(KL);function xu(e){if(xn(e)){const t={};for(let i=0;i<e.length;i++){const r=e[i],s=Qi(r)?eO(r):xu(r);if(s)for(const u in s)t[u]=s[u]}return t}else{if(Qi(e))return e;if(Ri(e))return e}}const YL=/;(?![^(]*\))/g,JL=/:([^]+)/,QL=/\/\*[^]*?\*\//g;function eO(e){const t={};return e.replace(QL,"").split(YL).forEach(i=>{if(i){const r=i.split(JL);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Dn(e){let t="";if(Qi(e))t=e;else if(xn(e))for(let i=0;i<e.length;i++){const r=Dn(e[i]);r&&(t+=r+" ")}else if(Ri(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}function tO(e){if(!e)return null;let{class:t,style:i}=e;return t&&!Qi(t)&&(e.class=Dn(t)),i&&(e.style=xu(i)),e}const nO="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",iO=s_(nO);function gC(e){return!!e||e===""}function rO(e,t){if(e.length!==t.length)return!1;let i=!0;for(let r=0;i&&r<e.length;r++)i=cc(e[r],t[r]);return i}function cc(e,t){if(e===t)return!0;let i=OS(e),r=OS(t);if(i||r)return i&&r?e.getTime()===t.getTime():!1;if(i=Tp(e),r=Tp(t),i||r)return e===t;if(i=xn(e),r=xn(t),i||r)return i&&r?rO(e,t):!1;if(i=Ri(e),r=Ri(t),i||r){if(!i||!r)return!1;const s=Object.keys(e).length,u=Object.keys(t).length;if(s!==u)return!1;for(const d in e){const l=e.hasOwnProperty(d),m=t.hasOwnProperty(d);if(l&&!m||!l&&m||!cc(e[d],t[d]))return!1}}return String(e)===String(t)}function o_(e,t){return e.findIndex(i=>cc(i,t))}const xt=e=>Qi(e)?e:e==null?"":xn(e)||Ri(e)&&(e.toString===pC||!jn(e.toString))?JSON.stringify(e,vC,2):String(e),vC=(e,t)=>t&&t.__v_isRef?vC(e,t.value):Vd(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[r,s])=>(i[`${r} =>`]=s,i),{})}:bu(t)?{[`Set(${t.size})`]:[...t.values()]}:Ri(t)&&!xn(t)&&!mC(t)?String(t):t;let Ks;class Ox{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Ks,!t&&Ks&&(this.index=(Ks.scopes||(Ks.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const i=Ks;try{return Ks=this,t()}finally{Ks=i}}}on(){Ks=this}off(){Ks=this.parent}stop(t){if(this._active){let i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].stop();for(i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.scopes)for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Rx(e){return new Ox(e)}function _C(e,t=Ks){t&&t.active&&t.effects.push(e)}function Kp(){return Ks}function Xp(e){Ks&&Ks.cleanups.push(e)}const Fx=e=>{const t=new Set(e);return t.w=0,t.n=0,t},yC=e=>(e.w&uc)>0,bC=e=>(e.n&uc)>0,sO=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=uc},aO=e=>{const{deps:t}=e;if(t.length){let i=0;for(let r=0;r<t.length;r++){const s=t[r];yC(s)&&!bC(s)?s.delete(e):t[i++]=s,s.w&=~uc,s.n&=~uc}t.length=i}},Cv=new WeakMap;let qf=0,uc=1;const vb=30;let Ga;const lu=Symbol(""),_b=Symbol("");class Yp{constructor(t,i=null,r){this.fn=t,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,_C(this,r)}run(){if(!this.active)return this.fn();let t=Ga,i=tc;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Ga,Ga=this,tc=!0,uc=1<<++qf,qf<=vb?sO(this):FS(this),this.fn()}finally{qf<=vb&&aO(this),uc=1<<--qf,Ga=this.parent,tc=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Ga===this?this.deferStop=!0:this.active&&(FS(this),this.onStop&&this.onStop(),this.active=!1)}}function FS(e){const{deps:t}=e;if(t.length){for(let i=0;i<t.length;i++)t[i].delete(e);t.length=0}}function oO(e,t){e.effect&&(e=e.effect.fn);const i=new Yp(e);t&&(Ui(i,t),t.scope&&_C(i,t.scope)),(!t||!t.lazy)&&i.run();const r=i.run.bind(i);return r.effect=i,r}function lO(e){e.effect.stop()}let tc=!0;const xC=[];function _h(){xC.push(tc),tc=!1}function yh(){const e=xC.pop();tc=e===void 0?!0:e}function zs(e,t,i){if(tc&&Ga){let r=Cv.get(e);r||Cv.set(e,r=new Map);let s=r.get(i);s||r.set(i,s=Fx()),wC(s)}}function wC(e,t){let i=!1;qf<=vb?bC(e)||(e.n|=uc,i=!yC(e)):i=!e.has(Ga),i&&(e.add(Ga),Ga.deps.push(e))}function ul(e,t,i,r,s,u){const d=Cv.get(e);if(!d)return;let l=[];if(t==="clear")l=[...d.values()];else if(i==="length"&&xn(e)){const m=Number(r);d.forEach((g,x)=>{(x==="length"||x>=m)&&l.push(g)})}else switch(i!==void 0&&l.push(d.get(i)),t){case"add":xn(e)?Lx(i)&&l.push(d.get("length")):(l.push(d.get(lu)),Vd(e)&&l.push(d.get(_b)));break;case"delete":xn(e)||(l.push(d.get(lu)),Vd(e)&&l.push(d.get(_b)));break;case"set":Vd(e)&&l.push(d.get(lu));break}if(l.length===1)l[0]&&yb(l[0]);else{const m=[];for(const g of l)g&&m.push(...g);yb(Fx(m))}}function yb(e,t){const i=xn(e)?e:[...e];for(const r of i)r.computed&&$S(r);for(const r of i)r.computed||$S(r)}function $S(e,t){(e!==Ga||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}function cO(e,t){var i;return(i=Cv.get(e))==null?void 0:i.get(t)}const uO=s_("__proto__,__v_isRef,__isVue"),TC=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Tp)),dO=l_(),hO=l_(!1,!0),fO=l_(!0),pO=l_(!0,!0),zS=mO();function mO(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...i){const r=li(this);for(let u=0,d=this.length;u<d;u++)zs(r,"get",u+"");const s=r[t](...i);return s===-1||s===!1?r[t](...i.map(li)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...i){_h();const r=li(this)[t].apply(this,i);return yh(),r}}),e}function gO(e){const t=li(this);return zs(t,"has",e),t.hasOwnProperty(e)}function l_(e=!1,t=!1){return function(r,s,u){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_isShallow")return t;if(s==="__v_raw"&&u===(e?t?PC:kC:t?MC:AC).get(r))return r;const d=xn(r);if(!e){if(d&&bi(zS,s))return Reflect.get(zS,s,u);if(s==="hasOwnProperty")return gO}const l=Reflect.get(r,s,u);return(Tp(s)?TC.has(s):uO(s))||(e||zs(r,"get",s),t)?l:Gi(l)?d&&Lx(s)?l:l.value:Ri(l)?e?wu(l):Br(l):l}}const vO=EC(),_O=EC(!0);function EC(e=!1){return function(i,r,s,u){let d=i[r];if(hu(d)&&Gi(d)&&!Gi(s))return!1;if(!e&&(!Ep(s)&&!hu(s)&&(d=li(d),s=li(s)),!xn(i)&&Gi(d)&&!Gi(s)))return d.value=s,!0;const l=xn(i)&&Lx(r)?Number(r)<i.length:bi(i,r),m=Reflect.set(i,r,s,u);return i===li(u)&&(l?Yd(s,d)&&ul(i,"set",r,s):ul(i,"add",r,s)),m}}function yO(e,t){const i=bi(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&i&&ul(e,"delete",t,void 0),r}function bO(e,t){const i=Reflect.has(e,t);return(!Tp(t)||!TC.has(t))&&zs(e,"has",t),i}function xO(e){return zs(e,"iterate",xn(e)?"length":lu),Reflect.ownKeys(e)}const CC={get:dO,set:vO,deleteProperty:yO,has:bO,ownKeys:xO},IC={get:fO,set(e,t){return!0},deleteProperty(e,t){return!0}},wO=Ui({},CC,{get:hO,set:_O}),SO=Ui({},IC,{get:pO}),$x=e=>e,c_=e=>Reflect.getPrototypeOf(e);function Eg(e,t,i=!1,r=!1){e=e.__v_raw;const s=li(e),u=li(t);i||(t!==u&&zs(s,"get",t),zs(s,"get",u));const{has:d}=c_(s),l=r?$x:i?Bx:Cp;if(d.call(s,t))return l(e.get(t));if(d.call(s,u))return l(e.get(u));e!==s&&e.get(t)}function Cg(e,t=!1){const i=this.__v_raw,r=li(i),s=li(e);return t||(e!==s&&zs(r,"has",e),zs(r,"has",s)),e===s?i.has(e):i.has(e)||i.has(s)}function Ig(e,t=!1){return e=e.__v_raw,!t&&zs(li(e),"iterate",lu),Reflect.get(e,"size",e)}function BS(e){e=li(e);const t=li(this);return c_(t).has.call(t,e)||(t.add(e),ul(t,"add",e,e)),this}function NS(e,t){t=li(t);const i=li(this),{has:r,get:s}=c_(i);let u=r.call(i,e);u||(e=li(e),u=r.call(i,e));const d=s.call(i,e);return i.set(e,t),u?Yd(t,d)&&ul(i,"set",e,t):ul(i,"add",e,t),this}function US(e){const t=li(this),{has:i,get:r}=c_(t);let s=i.call(t,e);s||(e=li(e),s=i.call(t,e)),r&&r.call(t,e);const u=t.delete(e);return s&&ul(t,"delete",e,void 0),u}function jS(){const e=li(this),t=e.size!==0,i=e.clear();return t&&ul(e,"clear",void 0,void 0),i}function Ag(e,t){return function(r,s){const u=this,d=u.__v_raw,l=li(d),m=t?$x:e?Bx:Cp;return!e&&zs(l,"iterate",lu),d.forEach((g,x)=>r.call(s,m(g),m(x),u))}}function Mg(e,t,i){return function(...r){const s=this.__v_raw,u=li(s),d=Vd(u),l=e==="entries"||e===Symbol.iterator&&d,m=e==="keys"&&d,g=s[e](...r),x=i?$x:t?Bx:Cp;return!t&&zs(u,"iterate",m?_b:lu),{next(){const{value:w,done:C}=g.next();return C?{value:w,done:C}:{value:l?[x(w[0]),x(w[1])]:x(w),done:C}},[Symbol.iterator](){return this}}}}function Rl(e){return function(...t){return e==="delete"?!1:this}}function TO(){const e={get(u){return Eg(this,u)},get size(){return Ig(this)},has:Cg,add:BS,set:NS,delete:US,clear:jS,forEach:Ag(!1,!1)},t={get(u){return Eg(this,u,!1,!0)},get size(){return Ig(this)},has:Cg,add:BS,set:NS,delete:US,clear:jS,forEach:Ag(!1,!0)},i={get(u){return Eg(this,u,!0)},get size(){return Ig(this,!0)},has(u){return Cg.call(this,u,!0)},add:Rl("add"),set:Rl("set"),delete:Rl("delete"),clear:Rl("clear"),forEach:Ag(!0,!1)},r={get(u){return Eg(this,u,!0,!0)},get size(){return Ig(this,!0)},has(u){return Cg.call(this,u,!0)},add:Rl("add"),set:Rl("set"),delete:Rl("delete"),clear:Rl("clear"),forEach:Ag(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(u=>{e[u]=Mg(u,!1,!1),i[u]=Mg(u,!0,!1),t[u]=Mg(u,!1,!0),r[u]=Mg(u,!0,!0)}),[e,i,t,r]}const[EO,CO,IO,AO]=TO();function u_(e,t){const i=t?e?AO:IO:e?CO:EO;return(r,s,u)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(bi(i,s)&&s in r?i:r,s,u)}const MO={get:u_(!1,!1)},kO={get:u_(!1,!0)},PO={get:u_(!0,!1)},DO={get:u_(!0,!0)},AC=new WeakMap,MC=new WeakMap,kC=new WeakMap,PC=new WeakMap;function LO(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function OO(e){return e.__v_skip||!Object.isExtensible(e)?0:LO(WL(e))}function Br(e){return hu(e)?e:d_(e,!1,CC,MO,AC)}function DC(e){return d_(e,!1,wO,kO,MC)}function wu(e){return d_(e,!0,IC,PO,kC)}function eu(e){return d_(e,!0,SO,DO,PC)}function d_(e,t,i,r,s){if(!Ri(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const u=s.get(e);if(u)return u;const d=OO(e);if(d===0)return e;const l=new Proxy(e,d===2?r:i);return s.set(e,l),l}function Eo(e){return hu(e)?Eo(e.__v_raw):!!(e&&e.__v_isReactive)}function hu(e){return!!(e&&e.__v_isReadonly)}function Ep(e){return!!(e&&e.__v_isShallow)}function zx(e){return Eo(e)||hu(e)}function li(e){const t=e&&e.__v_raw;return t?li(t):e}function Jp(e){return Sv(e,"__v_skip",!0),e}const Cp=e=>Ri(e)?Br(e):e,Bx=e=>Ri(e)?wu(e):e;function Nx(e){tc&&Ga&&(e=li(e),wC(e.dep||(e.dep=Fx())))}function h_(e,t){e=li(e);const i=e.dep;i&&yb(i)}function Gi(e){return!!(e&&e.__v_isRef===!0)}function Fe(e){return LC(e,!1)}function bh(e){return LC(e,!0)}function LC(e,t){return Gi(e)?e:new RO(e,t)}class RO{constructor(t,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?t:li(t),this._value=i?t:Cp(t)}get value(){return Nx(this),this._value}set value(t){const i=this.__v_isShallow||Ep(t)||hu(t);t=i?t:li(t),Yd(t,this._rawValue)&&(this._rawValue=t,this._value=i?t:Cp(t),h_(this))}}function FO(e){h_(e)}function he(e){return Gi(e)?e.value:e}function $O(e){return jn(e)?e():he(e)}const zO={get:(e,t,i)=>he(Reflect.get(e,t,i)),set:(e,t,i,r)=>{const s=e[t];return Gi(s)&&!Gi(i)?(s.value=i,!0):Reflect.set(e,t,i,r)}};function Ux(e){return Eo(e)?e:new Proxy(e,zO)}class BO{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:i,set:r}=t(()=>Nx(this),()=>h_(this));this._get=i,this._set=r}get value(){return this._get()}set value(t){this._set(t)}}function OC(e){return new BO(e)}function f_(e){const t=xn(e)?new Array(e.length):{};for(const i in e)t[i]=RC(e,i);return t}class NO{constructor(t,i,r){this._object=t,this._key=i,this._defaultValue=r,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return cO(li(this._object),this._key)}}class UO{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Jd(e,t,i){return Gi(e)?e:jn(e)?new UO(e):Ri(e)&&arguments.length>1?RC(e,t,i):Fe(e)}function RC(e,t,i){const r=e[t];return Gi(r)?r:new NO(e,t,i)}class jO{constructor(t,i,r,s){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Yp(t,()=>{this._dirty||(this._dirty=!0,h_(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const t=li(this);return Nx(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function VO(e,t,i=!1){let r,s;const u=jn(e);return u?(r=e,s=Ka):(r=e.get,s=e.set),new jO(r,s,u||!s,i)}function HO(e,...t){}function GO(e,t){}function sl(e,t,i,r){let s;try{s=r?e(...r):e()}catch(u){Su(u,t,i)}return s}function ta(e,t,i,r){if(jn(e)){const u=sl(e,t,i,r);return u&&Dx(u)&&u.catch(d=>{Su(d,t,i)}),u}const s=[];for(let u=0;u<e.length;u++)s.push(ta(e[u],t,i,r));return s}function Su(e,t,i,r=!0){const s=t?t.vnode:null;if(t){let u=t.parent;const d=t.proxy,l=i;for(;u;){const g=u.ec;if(g){for(let x=0;x<g.length;x++)if(g[x](e,d,l)===!1)return}u=u.parent}const m=t.appContext.config.errorHandler;if(m){sl(m,null,10,[e,d,l]);return}}WO(e,i,s,r)}function WO(e,t,i,r=!0){console.error(e)}let Ip=!1,bb=!1;const ns=[];let bo=0;const Gd=[];let nl=null,nu=0;const FC=Promise.resolve();let jx=null;function Ir(e){const t=jx||FC;return e?t.then(this?e.bind(this):e):t}function qO(e){let t=bo+1,i=ns.length;for(;t<i;){const r=t+i>>>1;Ap(ns[r])<e?t=r+1:i=r}return t}function p_(e){(!ns.length||!ns.includes(e,Ip&&e.allowRecurse?bo+1:bo))&&(e.id==null?ns.push(e):ns.splice(qO(e.id),0,e),$C())}function $C(){!Ip&&!bb&&(bb=!0,jx=FC.then(zC))}function ZO(e){const t=ns.indexOf(e);t>bo&&ns.splice(t,1)}function Vx(e){xn(e)?Gd.push(...e):(!nl||!nl.includes(e,e.allowRecurse?nu+1:nu))&&Gd.push(e),$C()}function VS(e,t=Ip?bo+1:0){for(;t<ns.length;t++){const i=ns[t];i&&i.pre&&(ns.splice(t,1),t--,i())}}function Iv(e){if(Gd.length){const t=[...new Set(Gd)];if(Gd.length=0,nl){nl.push(...t);return}for(nl=t,nl.sort((i,r)=>Ap(i)-Ap(r)),nu=0;nu<nl.length;nu++)nl[nu]();nl=null,nu=0}}const Ap=e=>e.id==null?1/0:e.id,KO=(e,t)=>{const i=Ap(e)-Ap(t);if(i===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return i};function zC(e){bb=!1,Ip=!0,ns.sort(KO);const t=Ka;try{for(bo=0;bo<ns.length;bo++){const i=ns[bo];i&&i.active!==!1&&sl(i,null,14)}}finally{bo=0,ns.length=0,Iv(),Ip=!1,jx=null,(ns.length||Gd.length)&&zC()}}let Od,kg=[];function BC(e,t){var i,r;Od=e,Od?(Od.enabled=!0,kg.forEach(({event:s,args:u})=>Od.emit(s,...u)),kg=[]):typeof window<"u"&&window.HTMLElement&&!((r=(i=window.navigator)==null?void 0:i.userAgent)!=null&&r.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(u=>{BC(u,t)}),setTimeout(()=>{Od||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,kg=[])},3e3)):kg=[]}function XO(e,t,...i){if(e.isUnmounted)return;const r=e.vnode.props||Li;let s=i;const u=t.startsWith("update:"),d=u&&t.slice(7);if(d&&d in r){const x=`${d==="modelValue"?"model":d}Modifiers`,{number:w,trim:C}=r[x]||Li;C&&(s=i.map(I=>Qi(I)?I.trim():I)),w&&(s=i.map(Tv))}let l,m=r[l=sp(t)]||r[l=sp($s(t))];!m&&u&&(m=r[l=sp(_a(t))]),m&&ta(m,e,6,s);const g=r[l+"Once"];if(g){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,ta(g,e,6,s)}}function NC(e,t,i=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const u=e.emits;let d={},l=!1;if(!jn(e)){const m=g=>{const x=NC(g,t,!0);x&&(l=!0,Ui(d,x))};!i&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}return!u&&!l?(Ri(e)&&r.set(e,null),null):(xn(u)?u.forEach(m=>d[m]=null):Ui(d,u),Ri(e)&&r.set(e,d),d)}function m_(e,t){return!e||!qp(t)?!1:(t=t.slice(2).replace(/Once$/,""),bi(e,t[0].toLowerCase()+t.slice(1))||bi(e,_a(t))||bi(e,t))}let $r=null,g_=null;function Mp(e){const t=$r;return $r=e,g_=e&&e.type.__scopeId||null,t}function ro(e){g_=e}function so(){g_=null}const YO=e=>Me;function Me(e,t=$r,i){if(!t||e._n)return e;const r=(...s)=>{r._d&&Ib(-1);const u=Mp(t);let d;try{d=e(...s)}finally{Mp(u),r._d&&Ib(1)}return d};return r._n=!0,r._c=!0,r._d=!0,r}function iv(e){const{type:t,vnode:i,proxy:r,withProxy:s,props:u,propsOptions:[d],slots:l,attrs:m,emit:g,render:x,renderCache:w,data:C,setupState:I,ctx:M,inheritAttrs:L}=e;let $,F;const U=Mp(e);try{if(i.shapeFlag&4){const V=s||r;$=Ys(x.call(V,V,w,u,I,C,M)),F=m}else{const V=t;$=Ys(V.length>1?V(u,{attrs:m,slots:l,emit:g}):V(u,null)),F=t.props?m:QO(m)}}catch(V){lp.length=0,Su(V,e,1),$=ye(ss)}let ee=$;if(F&&L!==!1){const V=Object.keys(F),{shapeFlag:Q}=ee;V.length&&Q&7&&(d&&V.some(kx)&&(F=eR(F,d)),ee=ra(ee,F))}return i.dirs&&(ee=ra(ee),ee.dirs=ee.dirs?ee.dirs.concat(i.dirs):i.dirs),i.transition&&(ee.transition=i.transition),$=ee,Mp(U),$}function JO(e){let t;for(let i=0;i<e.length;i++){const r=e[i];if(dc(r)){if(r.type!==ss||r.children==="v-if"){if(t)return;t=r}}else return}return t}const QO=e=>{let t;for(const i in e)(i==="class"||i==="style"||qp(i))&&((t||(t={}))[i]=e[i]);return t},eR=(e,t)=>{const i={};for(const r in e)(!kx(r)||!(r.slice(9)in t))&&(i[r]=e[r]);return i};function tR(e,t,i){const{props:r,children:s,component:u}=e,{props:d,children:l,patchFlag:m}=t,g=u.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&m>=0){if(m&1024)return!0;if(m&16)return r?HS(r,d,g):!!d;if(m&8){const x=t.dynamicProps;for(let w=0;w<x.length;w++){const C=x[w];if(d[C]!==r[C]&&!m_(g,C))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===d?!1:r?d?HS(r,d,g):!0:!!d;return!1}function HS(e,t,i){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const u=r[s];if(t[u]!==e[u]&&!m_(i,u))return!0}return!1}function Hx({vnode:e,parent:t},i){for(;t&&t.subTree===e;)(e=t.vnode).el=i,t=t.parent}const UC=e=>e.__isSuspense,nR={name:"Suspense",__isSuspense:!0,process(e,t,i,r,s,u,d,l,m,g){e==null?rR(t,i,r,s,u,d,l,m,g):sR(e,t,i,r,s,d,l,m,g)},hydrate:aR,create:Gx,normalize:oR},iR=nR;function kp(e,t){const i=e.props&&e.props[t];jn(i)&&i()}function rR(e,t,i,r,s,u,d,l,m){const{p:g,o:{createElement:x}}=m,w=x("div"),C=e.suspense=Gx(e,s,r,t,w,i,u,d,l,m);g(null,C.pendingBranch=e.ssContent,w,null,r,C,u,d),C.deps>0?(kp(e,"onPending"),kp(e,"onFallback"),g(null,e.ssFallback,t,i,r,null,u,d),Wd(C,e.ssFallback)):C.resolve(!1,!0)}function sR(e,t,i,r,s,u,d,l,{p:m,um:g,o:{createElement:x}}){const w=t.suspense=e.suspense;w.vnode=t,t.el=e.el;const C=t.ssContent,I=t.ssFallback,{activeBranch:M,pendingBranch:L,isInFallback:$,isHydrating:F}=w;if(L)w.pendingBranch=C,Wa(C,L)?(m(L,C,w.hiddenContainer,null,s,w,u,d,l),w.deps<=0?w.resolve():$&&(m(M,I,i,r,s,null,u,d,l),Wd(w,I))):(w.pendingId++,F?(w.isHydrating=!1,w.activeBranch=L):g(L,s,w),w.deps=0,w.effects.length=0,w.hiddenContainer=x("div"),$?(m(null,C,w.hiddenContainer,null,s,w,u,d,l),w.deps<=0?w.resolve():(m(M,I,i,r,s,null,u,d,l),Wd(w,I))):M&&Wa(C,M)?(m(M,C,i,r,s,w,u,d,l),w.resolve(!0)):(m(null,C,w.hiddenContainer,null,s,w,u,d,l),w.deps<=0&&w.resolve()));else if(M&&Wa(C,M))m(M,C,i,r,s,w,u,d,l),Wd(w,C);else if(kp(t,"onPending"),w.pendingBranch=C,w.pendingId++,m(null,C,w.hiddenContainer,null,s,w,u,d,l),w.deps<=0)w.resolve();else{const{timeout:U,pendingId:ee}=w;U>0?setTimeout(()=>{w.pendingId===ee&&w.fallback(I)},U):U===0&&w.fallback(I)}}function Gx(e,t,i,r,s,u,d,l,m,g,x=!1){const{p:w,m:C,um:I,n:M,o:{parentNode:L,remove:$}}=g;let F;const U=lR(e);U&&t!=null&&t.pendingBranch&&(F=t.pendingId,t.deps++);const ee=e.props?Ev(e.props.timeout):void 0,V={vnode:e,parent:t,parentComponent:i,isSVG:d,container:r,hiddenContainer:s,anchor:u,deps:0,pendingId:0,timeout:typeof ee=="number"?ee:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:x,isUnmounted:!1,effects:[],resolve(Q=!1,ae=!1){const{vnode:be,activeBranch:te,pendingBranch:G,pendingId:j,effects:z,parentComponent:ie,container:X}=V;if(V.isHydrating)V.isHydrating=!1;else if(!Q){const Ce=te&&G.transition&&G.transition.mode==="out-in";Ce&&(te.transition.afterLeave=()=>{j===V.pendingId&&C(G,X,Xe,0)});let{anchor:Xe}=V;te&&(Xe=M(te),I(te,ie,V,!0)),Ce||C(G,X,Xe,0)}Wd(V,G),V.pendingBranch=null,V.isInFallback=!1;let ne=V.parent,Ee=!1;for(;ne;){if(ne.pendingBranch){ne.effects.push(...z),Ee=!0;break}ne=ne.parent}Ee||Vx(z),V.effects=[],U&&t&&t.pendingBranch&&F===t.pendingId&&(t.deps--,t.deps===0&&!ae&&t.resolve()),kp(be,"onResolve")},fallback(Q){if(!V.pendingBranch)return;const{vnode:ae,activeBranch:be,parentComponent:te,container:G,isSVG:j}=V;kp(ae,"onFallback");const z=M(be),ie=()=>{V.isInFallback&&(w(null,Q,G,z,te,null,j,l,m),Wd(V,Q))},X=Q.transition&&Q.transition.mode==="out-in";X&&(be.transition.afterLeave=ie),V.isInFallback=!0,I(be,te,null,!0),X||ie()},move(Q,ae,be){V.activeBranch&&C(V.activeBranch,Q,ae,be),V.container=Q},next(){return V.activeBranch&&M(V.activeBranch)},registerDep(Q,ae){const be=!!V.pendingBranch;be&&V.deps++;const te=Q.vnode.el;Q.asyncDep.catch(G=>{Su(G,Q,0)}).then(G=>{if(Q.isUnmounted||V.isUnmounted||V.pendingId!==Q.suspenseId)return;Q.asyncResolved=!0;const{vnode:j}=Q;Ab(Q,G,!1),te&&(j.el=te);const z=!te&&Q.subTree.el;ae(Q,j,L(te||Q.subTree.el),te?null:M(Q.subTree),V,d,m),z&&$(z),Hx(Q,j.el),be&&--V.deps===0&&V.resolve()})},unmount(Q,ae){V.isUnmounted=!0,V.activeBranch&&I(V.activeBranch,i,Q,ae),V.pendingBranch&&I(V.pendingBranch,i,Q,ae)}};return V}function aR(e,t,i,r,s,u,d,l,m){const g=t.suspense=Gx(t,r,i,e.parentNode,document.createElement("div"),null,s,u,d,l,!0),x=m(e,g.pendingBranch=t.ssContent,i,g,u,d);return g.deps===0&&g.resolve(!1,!0),x}function oR(e){const{shapeFlag:t,children:i}=e,r=t&32;e.ssContent=GS(r?i.default:i),e.ssFallback=r?GS(i.fallback):ye(ss)}function GS(e){let t;if(jn(e)){const i=mu&&e._c;i&&(e._d=!1,H()),e=e(),i&&(e._d=!0,t=Rs,mI())}return xn(e)&&(e=JO(e)),e=Ys(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(i=>i!==e)),e}function jC(e,t){t&&t.pendingBranch?xn(e)?t.effects.push(...e):t.effects.push(e):Vx(e)}function Wd(e,t){e.activeBranch=t;const{vnode:i,parentComponent:r}=e,s=i.el=t.el;r&&r.subTree===i&&(r.vnode.el=s,Hx(r,s))}function lR(e){var t;return((t=e.props)==null?void 0:t.suspensible)!=null&&e.props.suspensible!==!1}function Ar(e,t){return Qp(e,null,t)}function VC(e,t){return Qp(e,null,{flush:"post"})}function cR(e,t){return Qp(e,null,{flush:"sync"})}const Pg={};function fn(e,t,i){return Qp(e,t,i)}function Qp(e,t,{immediate:i,deep:r,flush:s,onTrack:u,onTrigger:d}=Li){var l;const m=Kp()===((l=Tr)==null?void 0:l.scope)?Tr:null;let g,x=!1,w=!1;if(Gi(e)?(g=()=>e.value,x=Ep(e)):Eo(e)?(g=()=>e,r=!0):xn(e)?(w=!0,x=e.some(V=>Eo(V)||Ep(V)),g=()=>e.map(V=>{if(Gi(V))return V.value;if(Eo(V))return au(V);if(jn(V))return sl(V,m,2)})):jn(e)?t?g=()=>sl(e,m,2):g=()=>{if(!(m&&m.isUnmounted))return C&&C(),ta(e,m,3,[I])}:g=Ka,t&&r){const V=g;g=()=>au(V())}let C,I=V=>{C=U.onStop=()=>{sl(V,m,4)}},M;if(eh)if(I=Ka,t?i&&ta(t,m,3,[g(),w?[]:void 0,I]):g(),s==="sync"){const V=CI();M=V.__watcherHandles||(V.__watcherHandles=[])}else return Ka;let L=w?new Array(e.length).fill(Pg):Pg;const $=()=>{if(U.active)if(t){const V=U.run();(r||x||(w?V.some((Q,ae)=>Yd(Q,L[ae])):Yd(V,L)))&&(C&&C(),ta(t,m,3,[V,L===Pg?void 0:w&&L[0]===Pg?[]:L,I]),L=V)}else U.run()};$.allowRecurse=!!t;let F;s==="sync"?F=$:s==="post"?F=()=>qr($,m&&m.suspense):($.pre=!0,m&&($.id=m.uid),F=()=>p_($));const U=new Yp(g,F);t?i?$():L=U.run():s==="post"?qr(U.run.bind(U),m&&m.suspense):U.run();const ee=()=>{U.stop(),m&&m.scope&&Px(m.scope.effects,U)};return M&&M.push(ee),ee}function uR(e,t,i){const r=this.proxy,s=Qi(e)?e.includes(".")?HC(r,e):()=>r[e]:e.bind(r,r);let u;jn(t)?u=t:(u=t.handler,i=t);const d=Tr;hc(this);const l=Qp(s,u.bind(r),i);return d?hc(d):ic(),l}function HC(e,t){const i=t.split(".");return()=>{let r=e;for(let s=0;s<i.length&&r;s++)r=r[i[s]];return r}}function au(e,t){if(!Ri(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Gi(e))au(e.value,t);else if(xn(e))for(let i=0;i<e.length;i++)au(e[i],t);else if(bu(e)||Vd(e))e.forEach(i=>{au(i,t)});else if(mC(e))for(const i in e)au(e[i],t);return e}function bs(e,t){const i=$r;if(i===null)return e;const r=x_(i)||i.proxy,s=e.dirs||(e.dirs=[]);for(let u=0;u<t.length;u++){let[d,l,m,g=Li]=t[u];d&&(jn(d)&&(d={mounted:d,updated:d}),d.deep&&au(l),s.push({dir:d,instance:r,value:l,oldValue:void 0,arg:m,modifiers:g}))}return e}function _o(e,t,i,r){const s=e.dirs,u=t&&t.dirs;for(let d=0;d<s.length;d++){const l=s[d];u&&(l.oldValue=u[d].value);let m=l.dir[r];m&&(_h(),ta(m,i,8,[e.el,l,e,t]),yh())}}function Wx(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Bn(()=>{e.isMounted=!0}),ao(()=>{e.isUnmounting=!0}),e}const ma=[Function,Array],qx={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ma,onEnter:ma,onAfterEnter:ma,onEnterCancelled:ma,onBeforeLeave:ma,onLeave:ma,onAfterLeave:ma,onLeaveCancelled:ma,onBeforeAppear:ma,onAppear:ma,onAfterAppear:ma,onAppearCancelled:ma},dR={name:"BaseTransition",props:qx,setup(e,{slots:t}){const i=Ro(),r=Wx();let s;return()=>{const u=t.default&&v_(t.default(),!0);if(!u||!u.length)return;let d=u[0];if(u.length>1){for(const L of u)if(L.type!==ss){d=L;break}}const l=li(e),{mode:m}=l;if(r.isLeaving)return u0(d);const g=WS(d);if(!g)return u0(d);const x=Qd(g,l,r,i);fu(g,x);const w=i.subTree,C=w&&WS(w);let I=!1;const{getTransitionKey:M}=g.type;if(M){const L=M();s===void 0?s=L:L!==s&&(s=L,I=!0)}if(C&&C.type!==ss&&(!Wa(g,C)||I)){const L=Qd(C,l,r,i);if(fu(C,L),m==="out-in")return r.isLeaving=!0,L.afterLeave=()=>{r.isLeaving=!1,i.update.active!==!1&&i.update()},u0(d);m==="in-out"&&g.type!==ss&&(L.delayLeave=($,F,U)=>{const ee=WC(r,C);ee[String(C.key)]=C,$._leaveCb=()=>{F(),$._leaveCb=void 0,delete x.delayedLeave},x.delayedLeave=U})}return d}}},GC=dR;function WC(e,t){const{leavingVNodes:i}=e;let r=i.get(t.type);return r||(r=Object.create(null),i.set(t.type,r)),r}function Qd(e,t,i,r){const{appear:s,mode:u,persisted:d=!1,onBeforeEnter:l,onEnter:m,onAfterEnter:g,onEnterCancelled:x,onBeforeLeave:w,onLeave:C,onAfterLeave:I,onLeaveCancelled:M,onBeforeAppear:L,onAppear:$,onAfterAppear:F,onAppearCancelled:U}=t,ee=String(e.key),V=WC(i,e),Q=(te,G)=>{te&&ta(te,r,9,G)},ae=(te,G)=>{const j=G[1];Q(te,G),xn(te)?te.every(z=>z.length<=1)&&j():te.length<=1&&j()},be={mode:u,persisted:d,beforeEnter(te){let G=l;if(!i.isMounted)if(s)G=L||l;else return;te._leaveCb&&te._leaveCb(!0);const j=V[ee];j&&Wa(e,j)&&j.el._leaveCb&&j.el._leaveCb(),Q(G,[te])},enter(te){let G=m,j=g,z=x;if(!i.isMounted)if(s)G=$||m,j=F||g,z=U||x;else return;let ie=!1;const X=te._enterCb=ne=>{ie||(ie=!0,ne?Q(z,[te]):Q(j,[te]),be.delayedLeave&&be.delayedLeave(),te._enterCb=void 0)};G?ae(G,[te,X]):X()},leave(te,G){const j=String(e.key);if(te._enterCb&&te._enterCb(!0),i.isUnmounting)return G();Q(w,[te]);let z=!1;const ie=te._leaveCb=X=>{z||(z=!0,G(),X?Q(M,[te]):Q(I,[te]),te._leaveCb=void 0,V[j]===e&&delete V[j])};V[j]=e,C?ae(C,[te,ie]):ie()},clone(te){return Qd(te,t,i,r)}};return be}function u0(e){if(em(e))return e=ra(e),e.children=null,e}function WS(e){return em(e)?e.children?e.children[0]:void 0:e}function fu(e,t){e.shapeFlag&6&&e.component?fu(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function v_(e,t=!1,i){let r=[],s=0;for(let u=0;u<e.length;u++){let d=e[u];const l=i==null?d.key:String(i)+String(d.key!=null?d.key:u);d.type===Nt?(d.patchFlag&128&&s++,r=r.concat(v_(d.children,t,l))):(t||d.type!==ss)&&r.push(l!=null?ra(d,{key:l}):d)}if(s>1)for(let u=0;u<r.length;u++)r[u].patchFlag=-2;return r}function lt(e,t){return jn(e)?(()=>Ui({name:e.name},t,{setup:e}))():e}const cu=e=>!!e.type.__asyncLoader;function nc(e){jn(e)&&(e={loader:e});const{loader:t,loadingComponent:i,errorComponent:r,delay:s=200,timeout:u,suspensible:d=!0,onError:l}=e;let m=null,g,x=0;const w=()=>(x++,m=null,C()),C=()=>{let I;return m||(I=m=t().catch(M=>{if(M=M instanceof Error?M:new Error(String(M)),l)return new Promise((L,$)=>{l(M,()=>L(w()),()=>$(M),x+1)});throw M}).then(M=>I!==m&&m?m:(M&&(M.__esModule||M[Symbol.toStringTag]==="Module")&&(M=M.default),g=M,M)))};return lt({name:"AsyncComponentWrapper",__asyncLoader:C,get __asyncResolved(){return g},setup(){const I=Tr;if(g)return()=>d0(g,I);const M=U=>{m=null,Su(U,I,13,!r)};if(d&&I.suspense||eh)return C().then(U=>()=>d0(U,I)).catch(U=>(M(U),()=>r?ye(r,{error:U}):null));const L=Fe(!1),$=Fe(),F=Fe(!!s);return s&&setTimeout(()=>{F.value=!1},s),u!=null&&setTimeout(()=>{if(!L.value&&!$.value){const U=new Error(`Async component timed out after ${u}ms.`);M(U),$.value=U}},u),C().then(()=>{L.value=!0,I.parent&&em(I.parent.vnode)&&p_(I.parent.update)}).catch(U=>{M(U),$.value=U}),()=>{if(L.value&&g)return d0(g,I);if($.value&&r)return ye(r,{error:$.value});if(i&&!F.value)return ye(i)}}})}function d0(e,t){const{ref:i,props:r,children:s,ce:u}=t.vnode,d=ye(e,r,s);return d.ref=i,d.ce=u,delete t.vnode.ce,d}const em=e=>e.type.__isKeepAlive,hR={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const i=Ro(),r=i.ctx;if(!r.renderer)return()=>{const U=t.default&&t.default();return U&&U.length===1?U[0]:U};const s=new Map,u=new Set;let d=null;const l=i.suspense,{renderer:{p:m,m:g,um:x,o:{createElement:w}}}=r,C=w("div");r.activate=(U,ee,V,Q,ae)=>{const be=U.component;g(U,ee,V,0,l),m(be.vnode,U,ee,V,be,l,Q,U.slotScopeIds,ae),qr(()=>{be.isDeactivated=!1,be.a&&Hd(be.a);const te=U.props&&U.props.onVnodeMounted;te&&Os(te,be.parent,U)},l)},r.deactivate=U=>{const ee=U.component;g(U,C,null,1,l),qr(()=>{ee.da&&Hd(ee.da);const V=U.props&&U.props.onVnodeUnmounted;V&&Os(V,ee.parent,U),ee.isDeactivated=!0},l)};function I(U){h0(U),x(U,i,l,!0)}function M(U){s.forEach((ee,V)=>{const Q=kb(ee.type);Q&&(!U||!U(Q))&&L(V)})}function L(U){const ee=s.get(U);!d||!Wa(ee,d)?I(ee):d&&h0(d),s.delete(U),u.delete(U)}fn(()=>[e.include,e.exclude],([U,ee])=>{U&&M(V=>Zf(U,V)),ee&&M(V=>!Zf(ee,V))},{flush:"post",deep:!0});let $=null;const F=()=>{$!=null&&s.set($,f0(i.subTree))};return Bn(F),xh(F),ao(()=>{s.forEach(U=>{const{subTree:ee,suspense:V}=i,Q=f0(ee);if(U.type===Q.type&&U.key===Q.key){h0(Q);const ae=Q.component.da;ae&&qr(ae,V);return}I(U)})}),()=>{if($=null,!t.default)return null;const U=t.default(),ee=U[0];if(U.length>1)return d=null,U;if(!dc(ee)||!(ee.shapeFlag&4)&&!(ee.shapeFlag&128))return d=null,ee;let V=f0(ee);const Q=V.type,ae=kb(cu(V)?V.type.__asyncResolved||{}:Q),{include:be,exclude:te,max:G}=e;if(be&&(!ae||!Zf(be,ae))||te&&ae&&Zf(te,ae))return d=V,ee;const j=V.key==null?Q:V.key,z=s.get(j);return V.el&&(V=ra(V),ee.shapeFlag&128&&(ee.ssContent=V)),$=j,z?(V.el=z.el,V.component=z.component,V.transition&&fu(V,V.transition),V.shapeFlag|=512,u.delete(j),u.add(j)):(u.add(j),G&&u.size>parseInt(G,10)&&L(u.values().next().value)),V.shapeFlag|=256,d=V,UC(ee.type)?ee:V}}},fR=hR;function Zf(e,t){return xn(e)?e.some(i=>Zf(i,t)):Qi(e)?e.split(",").includes(t):GL(e)?e.test(t):!1}function Zx(e,t){qC(e,"a",t)}function Kx(e,t){qC(e,"da",t)}function qC(e,t,i=Tr){const r=e.__wdc||(e.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(__(t,r,i),i){let s=i.parent;for(;s&&s.parent;)em(s.parent.vnode)&&pR(r,t,i,s),s=s.parent}}function pR(e,t,i,r){const s=__(t,e,r,!0);Wi(()=>{Px(r[t],s)},i)}function h0(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function f0(e){return e.shapeFlag&128?e.ssContent:e}function __(e,t,i=Tr,r=!1){if(i){const s=i[e]||(i[e]=[]),u=t.__weh||(t.__weh=(...d)=>{if(i.isUnmounted)return;_h(),hc(i);const l=ta(t,i,e,d);return ic(),yh(),l});return r?s.unshift(u):s.push(u),u}}const pl=e=>(t,i=Tr)=>(!eh||e==="sp")&&__(e,(...r)=>t(...r),i),ZC=pl("bm"),Bn=pl("m"),Xx=pl("bu"),xh=pl("u"),ao=pl("bum"),Wi=pl("um"),KC=pl("sp"),XC=pl("rtg"),YC=pl("rtc");function JC(e,t=Tr){__("ec",e,t)}const Yx="components",mR="directives";function y_(e,t){return Jx(Yx,e,!0,t)||e}const QC=Symbol.for("v-ndc");function vc(e){return Qi(e)?Jx(Yx,e,!1)||e:e||QC}function gR(e){return Jx(mR,e)}function Jx(e,t,i=!0,r=!1){const s=$r||Tr;if(s){const u=s.type;if(e===Yx){const l=kb(u,!1);if(l&&(l===t||l===$s(t)||l===Zp($s(t))))return u}const d=qS(s[e]||u[e],t)||qS(s.appContext[e],t);return!d&&r?u:d}}function qS(e,t){return e&&(e[t]||e[$s(t)]||e[Zp($s(t))])}function Fn(e,t,i,r){let s;const u=i&&i[r];if(xn(e)||Qi(e)){s=new Array(e.length);for(let d=0,l=e.length;d<l;d++)s[d]=t(e[d],d,void 0,u&&u[d])}else if(typeof e=="number"){s=new Array(e);for(let d=0;d<e;d++)s[d]=t(d+1,d,void 0,u&&u[d])}else if(Ri(e))if(e[Symbol.iterator])s=Array.from(e,(d,l)=>t(d,l,void 0,u&&u[l]));else{const d=Object.keys(e);s=new Array(d.length);for(let l=0,m=d.length;l<m;l++){const g=d[l];s[l]=t(e[g],g,l,u&&u[l])}}else s=[];return i&&(i[r]=s),s}function eI(e,t){for(let i=0;i<t.length;i++){const r=t[i];if(xn(r))for(let s=0;s<r.length;s++)e[r[s].name]=r[s].fn;else r&&(e[r.name]=r.key?(...s)=>{const u=r.fn(...s);return u&&(u.key=r.key),u}:r.fn)}return e}function Mn(e,t,i={},r,s){if($r.isCE||$r.parent&&cu($r.parent)&&$r.parent.isCE)return t!=="default"&&(i.name=t),ye("slot",i,r&&r());let u=e[t];u&&u._c&&(u._d=!1),H();const d=u&&tI(u(i)),l=We(Nt,{key:i.key||d&&d.key||`_${t}`},d||(r?r():[]),d&&e._===1?64:-2);return!s&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),u&&u._c&&(u._d=!0),l}function tI(e){return e.some(t=>dc(t)?!(t.type===ss||t.type===Nt&&!tI(t.children)):!0)?e:null}function vR(e,t){const i={};for(const r in e)i[t&&/[A-Z]/.test(r)?`on:${r}`:sp(r)]=e[r];return i}const xb=e=>e?xI(e)?x_(e)||e.proxy:xb(e.parent):null,ap=Ui(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>xb(e.parent),$root:e=>xb(e.root),$emit:e=>e.emit,$options:e=>Qx(e),$forceUpdate:e=>e.f||(e.f=()=>p_(e.update)),$nextTick:e=>e.n||(e.n=Ir.bind(e.proxy)),$watch:e=>uR.bind(e)}),p0=(e,t)=>e!==Li&&!e.__isScriptSetup&&bi(e,t),wb={get({_:e},t){const{ctx:i,setupState:r,data:s,props:u,accessCache:d,type:l,appContext:m}=e;let g;if(t[0]!=="$"){const I=d[t];if(I!==void 0)switch(I){case 1:return r[t];case 2:return s[t];case 4:return i[t];case 3:return u[t]}else{if(p0(r,t))return d[t]=1,r[t];if(s!==Li&&bi(s,t))return d[t]=2,s[t];if((g=e.propsOptions[0])&&bi(g,t))return d[t]=3,u[t];if(i!==Li&&bi(i,t))return d[t]=4,i[t];Sb&&(d[t]=0)}}const x=ap[t];let w,C;if(x)return t==="$attrs"&&zs(e,"get",t),x(e);if((w=l.__cssModules)&&(w=w[t]))return w;if(i!==Li&&bi(i,t))return d[t]=4,i[t];if(C=m.config.globalProperties,bi(C,t))return C[t]},set({_:e},t,i){const{data:r,setupState:s,ctx:u}=e;return p0(s,t)?(s[t]=i,!0):r!==Li&&bi(r,t)?(r[t]=i,!0):bi(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(u[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:r,appContext:s,propsOptions:u}},d){let l;return!!i[d]||e!==Li&&bi(e,d)||p0(t,d)||(l=u[0])&&bi(l,d)||bi(r,d)||bi(ap,d)||bi(s.config.globalProperties,d)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:bi(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}},_R=Ui({},wb,{get(e,t){if(t!==Symbol.unscopables)return wb.get(e,t,e)},has(e,t){return t[0]!=="_"&&!XL(t)}});function yR(){return null}function bR(){return null}function xR(e){}function wR(e){}function SR(){return null}function TR(){}function ER(e,t){return null}function nI(){return iI().slots}function CR(){return iI().attrs}function IR(e,t,i){const r=Ro();if(i&&i.local){const s=Fe(e[t]);return fn(()=>e[t],u=>s.value=u),fn(s,u=>{u!==e[t]&&r.emit(`update:${t}`,u)}),s}else return{__v_isRef:!0,get value(){return e[t]},set value(s){r.emit(`update:${t}`,s)}}}function iI(){const e=Ro();return e.setupContext||(e.setupContext=TI(e))}function Pp(e){return xn(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}function AR(e,t){const i=Pp(e);for(const r in t){if(r.startsWith("__skip"))continue;let s=i[r];s?xn(s)||jn(s)?s=i[r]={type:s,default:t[r]}:s.default=t[r]:s===null&&(s=i[r]={default:t[r]}),s&&t[`__skip_${r}`]&&(s.skipFactory=!0)}return i}function MR(e,t){return!e||!t?e||t:xn(e)&&xn(t)?e.concat(t):Ui({},Pp(e),Pp(t))}function kR(e,t){const i={};for(const r in e)t.includes(r)||Object.defineProperty(i,r,{enumerable:!0,get:()=>e[r]});return i}function PR(e){const t=Ro();let i=e();return ic(),Dx(i)&&(i=i.catch(r=>{throw hc(t),r})),[i,()=>hc(t)]}let Sb=!0;function DR(e){const t=Qx(e),i=e.proxy,r=e.ctx;Sb=!1,t.beforeCreate&&ZS(t.beforeCreate,e,"bc");const{data:s,computed:u,methods:d,watch:l,provide:m,inject:g,created:x,beforeMount:w,mounted:C,beforeUpdate:I,updated:M,activated:L,deactivated:$,beforeDestroy:F,beforeUnmount:U,destroyed:ee,unmounted:V,render:Q,renderTracked:ae,renderTriggered:be,errorCaptured:te,serverPrefetch:G,expose:j,inheritAttrs:z,components:ie,directives:X,filters:ne}=t;if(g&&LR(g,r,null),d)for(const Xe in d){const at=d[Xe];jn(at)&&(r[Xe]=at.bind(i))}if(s){const Xe=s.call(i,i);Ri(Xe)&&(e.data=Br(Xe))}if(Sb=!0,u)for(const Xe in u){const at=u[Xe],it=jn(at)?at.bind(i,i):jn(at.get)?at.get.bind(i,i):Ka,$t=!jn(at)&&jn(at.set)?at.set.bind(i):Ka,Ct=Oe({get:it,set:$t});Object.defineProperty(r,Xe,{enumerable:!0,configurable:!0,get:()=>Ct.value,set:tt=>Ct.value=tt})}if(l)for(const Xe in l)rI(l[Xe],r,i,Xe);if(m){const Xe=jn(m)?m.call(i):m;Reflect.ownKeys(Xe).forEach(at=>{Oi(at,Xe[at])})}x&&ZS(x,e,"c");function Ce(Xe,at){xn(at)?at.forEach(it=>Xe(it.bind(i))):at&&Xe(at.bind(i))}if(Ce(ZC,w),Ce(Bn,C),Ce(Xx,I),Ce(xh,M),Ce(Zx,L),Ce(Kx,$),Ce(JC,te),Ce(YC,ae),Ce(XC,be),Ce(ao,U),Ce(Wi,V),Ce(KC,G),xn(j))if(j.length){const Xe=e.exposed||(e.exposed={});j.forEach(at=>{Object.defineProperty(Xe,at,{get:()=>i[at],set:it=>i[at]=it})})}else e.exposed||(e.exposed={});Q&&e.render===Ka&&(e.render=Q),z!=null&&(e.inheritAttrs=z),ie&&(e.components=ie),X&&(e.directives=X)}function LR(e,t,i=Ka){xn(e)&&(e=Tb(e));for(const r in e){const s=e[r];let u;Ri(s)?"default"in s?u=wi(s.from||r,s.default,!0):u=wi(s.from||r):u=wi(s),Gi(u)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>u.value,set:d=>u.value=d}):t[r]=u}}function ZS(e,t,i){ta(xn(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,i)}function rI(e,t,i,r){const s=r.includes(".")?HC(i,r):()=>i[r];if(Qi(e)){const u=t[e];jn(u)&&fn(s,u)}else if(jn(e))fn(s,e.bind(i));else if(Ri(e))if(xn(e))e.forEach(u=>rI(u,t,i,r));else{const u=jn(e.handler)?e.handler.bind(i):t[e.handler];jn(u)&&fn(s,u,e)}}function Qx(e){const t=e.type,{mixins:i,extends:r}=t,{mixins:s,optionsCache:u,config:{optionMergeStrategies:d}}=e.appContext,l=u.get(t);let m;return l?m=l:!s.length&&!i&&!r?m=t:(m={},s.length&&s.forEach(g=>Av(m,g,d,!0)),Av(m,t,d)),Ri(t)&&u.set(t,m),m}function Av(e,t,i,r=!1){const{mixins:s,extends:u}=t;u&&Av(e,u,i,!0),s&&s.forEach(d=>Av(e,d,i,!0));for(const d in t)if(!(r&&d==="expose")){const l=OR[d]||i&&i[d];e[d]=l?l(e[d],t[d]):t[d]}return e}const OR={data:KS,props:XS,emits:XS,methods:Kf,computed:Kf,beforeCreate:gs,created:gs,beforeMount:gs,mounted:gs,beforeUpdate:gs,updated:gs,beforeDestroy:gs,beforeUnmount:gs,destroyed:gs,unmounted:gs,activated:gs,deactivated:gs,errorCaptured:gs,serverPrefetch:gs,components:Kf,directives:Kf,watch:FR,provide:KS,inject:RR};function KS(e,t){return t?e?function(){return Ui(jn(e)?e.call(this,this):e,jn(t)?t.call(this,this):t)}:t:e}function RR(e,t){return Kf(Tb(e),Tb(t))}function Tb(e){if(xn(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function gs(e,t){return e?[...new Set([].concat(e,t))]:t}function Kf(e,t){return e?Ui(Object.create(null),e,t):t}function XS(e,t){return e?xn(e)&&xn(t)?[...new Set([...e,...t])]:Ui(Object.create(null),Pp(e),Pp(t??{})):t}function FR(e,t){if(!e)return t;if(!t)return e;const i=Ui(Object.create(null),e);for(const r in t)i[r]=gs(e[r],t[r]);return i}function sI(){return{app:null,config:{isNativeTag:jL,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let $R=0;function zR(e,t){return function(r,s=null){jn(r)||(r=Ui({},r)),s!=null&&!Ri(s)&&(s=null);const u=sI(),d=new Set;let l=!1;const m=u.app={_uid:$R++,_component:r,_props:s,_container:null,_context:u,_instance:null,version:AI,get config(){return u.config},set config(g){},use(g,...x){return d.has(g)||(g&&jn(g.install)?(d.add(g),g.install(m,...x)):jn(g)&&(d.add(g),g(m,...x))),m},mixin(g){return u.mixins.includes(g)||u.mixins.push(g),m},component(g,x){return x?(u.components[g]=x,m):u.components[g]},directive(g,x){return x?(u.directives[g]=x,m):u.directives[g]},mount(g,x,w){if(!l){const C=ye(r,s);return C.appContext=u,x&&t?t(C,g):e(C,g,w),l=!0,m._container=g,g.__vue_app__=m,x_(C.component)||C.component.proxy}},unmount(){l&&(e(null,m._container),delete m._container.__vue_app__)},provide(g,x){return u.provides[g]=x,m},runWithContext(g){Dp=m;try{return g()}finally{Dp=null}}};return m}}let Dp=null;function Oi(e,t){if(Tr){let i=Tr.provides;const r=Tr.parent&&Tr.parent.provides;r===i&&(i=Tr.provides=Object.create(r)),i[e]=t}}function wi(e,t,i=!1){const r=Tr||$r;if(r||Dp){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Dp._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return i&&jn(t)?t.call(r&&r.proxy):t}}function e1(){return!!(Tr||$r||Dp)}function BR(e,t,i,r=!1){const s={},u={};Sv(u,b_,1),e.propsDefaults=Object.create(null),aI(e,t,s,u);for(const d in e.propsOptions[0])d in s||(s[d]=void 0);i?e.props=r?s:DC(s):e.type.props?e.props=s:e.props=u,e.attrs=u}function NR(e,t,i,r){const{props:s,attrs:u,vnode:{patchFlag:d}}=e,l=li(s),[m]=e.propsOptions;let g=!1;if((r||d>0)&&!(d&16)){if(d&8){const x=e.vnode.dynamicProps;for(let w=0;w<x.length;w++){let C=x[w];if(m_(e.emitsOptions,C))continue;const I=t[C];if(m)if(bi(u,C))I!==u[C]&&(u[C]=I,g=!0);else{const M=$s(C);s[M]=Eb(m,l,M,I,e,!1)}else I!==u[C]&&(u[C]=I,g=!0)}}}else{aI(e,t,s,u)&&(g=!0);let x;for(const w in l)(!t||!bi(t,w)&&((x=_a(w))===w||!bi(t,x)))&&(m?i&&(i[w]!==void 0||i[x]!==void 0)&&(s[w]=Eb(m,l,w,void 0,e,!0)):delete s[w]);if(u!==l)for(const w in u)(!t||!bi(t,w))&&(delete u[w],g=!0)}g&&ul(e,"set","$attrs")}function aI(e,t,i,r){const[s,u]=e.propsOptions;let d=!1,l;if(t)for(let m in t){if(rp(m))continue;const g=t[m];let x;s&&bi(s,x=$s(m))?!u||!u.includes(x)?i[x]=g:(l||(l={}))[x]=g:m_(e.emitsOptions,m)||(!(m in r)||g!==r[m])&&(r[m]=g,d=!0)}if(u){const m=li(i),g=l||Li;for(let x=0;x<u.length;x++){const w=u[x];i[w]=Eb(s,m,w,g[w],e,!bi(g,w))}}return d}function Eb(e,t,i,r,s,u){const d=e[i];if(d!=null){const l=bi(d,"default");if(l&&r===void 0){const m=d.default;if(d.type!==Function&&!d.skipFactory&&jn(m)){const{propsDefaults:g}=s;i in g?r=g[i]:(hc(s),r=g[i]=m.call(null,t),ic())}else r=m}d[0]&&(u&&!l?r=!1:d[1]&&(r===""||r===_a(i))&&(r=!0))}return r}function oI(e,t,i=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const u=e.props,d={},l=[];let m=!1;if(!jn(e)){const x=w=>{m=!0;const[C,I]=oI(w,t,!0);Ui(d,C),I&&l.push(...I)};!i&&t.mixins.length&&t.mixins.forEach(x),e.extends&&x(e.extends),e.mixins&&e.mixins.forEach(x)}if(!u&&!m)return Ri(e)&&r.set(e,jd),jd;if(xn(u))for(let x=0;x<u.length;x++){const w=$s(u[x]);YS(w)&&(d[w]=Li)}else if(u)for(const x in u){const w=$s(x);if(YS(w)){const C=u[x],I=d[w]=xn(C)||jn(C)?{type:C}:Ui({},C);if(I){const M=eT(Boolean,I.type),L=eT(String,I.type);I[0]=M>-1,I[1]=L<0||M<L,(M>-1||bi(I,"default"))&&l.push(w)}}}const g=[d,l];return Ri(e)&&r.set(e,g),g}function YS(e){return e[0]!=="$"}function JS(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function QS(e,t){return JS(e)===JS(t)}function eT(e,t){return xn(t)?t.findIndex(i=>QS(i,e)):jn(t)&&QS(t,e)?0:-1}const lI=e=>e[0]==="_"||e==="$stable",t1=e=>xn(e)?e.map(Ys):[Ys(e)],UR=(e,t,i)=>{if(t._n)return t;const r=Me((...s)=>t1(t(...s)),i);return r._c=!1,r},cI=(e,t,i)=>{const r=e._ctx;for(const s in e){if(lI(s))continue;const u=e[s];if(jn(u))t[s]=UR(s,u,r);else if(u!=null){const d=t1(u);t[s]=()=>d}}},uI=(e,t)=>{const i=t1(t);e.slots.default=()=>i},jR=(e,t)=>{if(e.vnode.shapeFlag&32){const i=t._;i?(e.slots=li(t),Sv(t,"_",i)):cI(t,e.slots={})}else e.slots={},t&&uI(e,t);Sv(e.slots,b_,1)},VR=(e,t,i)=>{const{vnode:r,slots:s}=e;let u=!0,d=Li;if(r.shapeFlag&32){const l=t._;l?i&&l===1?u=!1:(Ui(s,t),!i&&l===1&&delete s._):(u=!t.$stable,cI(t,s)),d=t}else t&&(uI(e,t),d={default:1});if(u)for(const l in s)!lI(l)&&!(l in d)&&delete s[l]};function Mv(e,t,i,r,s=!1){if(xn(e)){e.forEach((C,I)=>Mv(C,t&&(xn(t)?t[I]:t),i,r,s));return}if(cu(r)&&!s)return;const u=r.shapeFlag&4?x_(r.component)||r.component.proxy:r.el,d=s?null:u,{i:l,r:m}=e,g=t&&t.r,x=l.refs===Li?l.refs={}:l.refs,w=l.setupState;if(g!=null&&g!==m&&(Qi(g)?(x[g]=null,bi(w,g)&&(w[g]=null)):Gi(g)&&(g.value=null)),jn(m))sl(m,l,12,[d,x]);else{const C=Qi(m),I=Gi(m);if(C||I){const M=()=>{if(e.f){const L=C?bi(w,m)?w[m]:x[m]:m.value;s?xn(L)&&Px(L,u):xn(L)?L.includes(u)||L.push(u):C?(x[m]=[u],bi(w,m)&&(w[m]=x[m])):(m.value=[u],e.k&&(x[e.k]=m.value))}else C?(x[m]=d,bi(w,m)&&(w[m]=d)):I&&(m.value=d,e.k&&(x[e.k]=d))};d?(M.id=-1,qr(M,i)):M()}}}let Fl=!1;const Dg=e=>/svg/.test(e.namespaceURI)&&e.tagName!=="foreignObject",Lg=e=>e.nodeType===8;function HR(e){const{mt:t,p:i,o:{patchProp:r,createText:s,nextSibling:u,parentNode:d,remove:l,insert:m,createComment:g}}=e,x=(F,U)=>{if(!U.hasChildNodes()){i(null,F,U),Iv(),U._vnode=F;return}Fl=!1,w(U.firstChild,F,null,null,null),Iv(),U._vnode=F,Fl&&console.error("Hydration completed but contains mismatches.")},w=(F,U,ee,V,Q,ae=!1)=>{const be=Lg(F)&&F.data==="[",te=()=>L(F,U,ee,V,Q,be),{type:G,ref:j,shapeFlag:z,patchFlag:ie}=U;let X=F.nodeType;U.el=F,ie===-2&&(ae=!1,U.dynamicChildren=null);let ne=null;switch(G){case pu:X!==3?U.children===""?(m(U.el=s(""),d(F),F),ne=F):ne=te():(F.data!==U.children&&(Fl=!0,F.data=U.children),ne=u(F));break;case ss:X!==8||be?ne=te():ne=u(F);break;case uu:if(be&&(F=u(F),X=F.nodeType),X===1||X===3){ne=F;const Ee=!U.children.length;for(let Ce=0;Ce<U.staticCount;Ce++)Ee&&(U.children+=ne.nodeType===1?ne.outerHTML:ne.data),Ce===U.staticCount-1&&(U.anchor=ne),ne=u(ne);return be?u(ne):ne}else te();break;case Nt:be?ne=M(F,U,ee,V,Q,ae):ne=te();break;default:if(z&1)X!==1||U.type.toLowerCase()!==F.tagName.toLowerCase()?ne=te():ne=C(F,U,ee,V,Q,ae);else if(z&6){U.slotScopeIds=Q;const Ee=d(F);if(t(U,Ee,null,ee,V,Dg(Ee),ae),ne=be?$(F):u(F),ne&&Lg(ne)&&ne.data==="teleport end"&&(ne=u(ne)),cu(U)){let Ce;be?(Ce=ye(Nt),Ce.anchor=ne?ne.previousSibling:Ee.lastChild):Ce=F.nodeType===3?Mt(""):ye("div"),Ce.el=F,U.component.subTree=Ce}}else z&64?X!==8?ne=te():ne=U.type.hydrate(F,U,ee,V,Q,ae,e,I):z&128&&(ne=U.type.hydrate(F,U,ee,V,Dg(d(F)),Q,ae,e,w))}return j!=null&&Mv(j,null,V,U),ne},C=(F,U,ee,V,Q,ae)=>{ae=ae||!!U.dynamicChildren;const{type:be,props:te,patchFlag:G,shapeFlag:j,dirs:z}=U,ie=be==="input"&&z||be==="option";if(ie||G!==-1){if(z&&_o(U,null,ee,"created"),te)if(ie||!ae||G&48)for(const ne in te)(ie&&ne.endsWith("value")||qp(ne)&&!rp(ne))&&r(F,ne,null,te[ne],!1,void 0,ee);else te.onClick&&r(F,"onClick",null,te.onClick,!1,void 0,ee);let X;if((X=te&&te.onVnodeBeforeMount)&&Os(X,ee,U),z&&_o(U,null,ee,"beforeMount"),((X=te&&te.onVnodeMounted)||z)&&jC(()=>{X&&Os(X,ee,U),z&&_o(U,null,ee,"mounted")},V),j&16&&!(te&&(te.innerHTML||te.textContent))){let ne=I(F.firstChild,U,F,ee,V,Q,ae);for(;ne;){Fl=!0;const Ee=ne;ne=ne.nextSibling,l(Ee)}}else j&8&&F.textContent!==U.children&&(Fl=!0,F.textContent=U.children)}return F.nextSibling},I=(F,U,ee,V,Q,ae,be)=>{be=be||!!U.dynamicChildren;const te=U.children,G=te.length;for(let j=0;j<G;j++){const z=be?te[j]:te[j]=Ys(te[j]);if(F)F=w(F,z,V,Q,ae,be);else{if(z.type===pu&&!z.children)continue;Fl=!0,i(null,z,ee,null,V,Q,Dg(ee),ae)}}return F},M=(F,U,ee,V,Q,ae)=>{const{slotScopeIds:be}=U;be&&(Q=Q?Q.concat(be):be);const te=d(F),G=I(u(F),U,te,ee,V,Q,ae);return G&&Lg(G)&&G.data==="]"?u(U.anchor=G):(Fl=!0,m(U.anchor=g("]"),te,G),G)},L=(F,U,ee,V,Q,ae)=>{if(Fl=!0,U.el=null,ae){const G=$(F);for(;;){const j=u(F);if(j&&j!==G)l(j);else break}}const be=u(F),te=d(F);return l(F),i(null,U,te,be,ee,V,Dg(te),Q),be},$=F=>{let U=0;for(;F;)if(F=u(F),F&&Lg(F)&&(F.data==="["&&U++,F.data==="]")){if(U===0)return u(F);U--}return F};return[x,w]}const qr=jC;function dI(e){return fI(e)}function hI(e){return fI(e,HR)}function fI(e,t){const i=gb();i.__VUE__=!0;const{insert:r,remove:s,patchProp:u,createElement:d,createText:l,createComment:m,setText:g,setElementText:x,parentNode:w,nextSibling:C,setScopeId:I=Ka,insertStaticContent:M}=e,L=(_e,ke,ge,ft=null,q=null,fe=null,Pe=!1,Ge=null,pt=!!ke.dynamicChildren)=>{if(_e===ke)return;_e&&!Wa(_e,ke)&&(ft=ut(_e),tt(_e,q,fe,!0),_e=null),ke.patchFlag===-2&&(pt=!1,ke.dynamicChildren=null);const{type:ht,ref:zt,shapeFlag:Dt}=ke;switch(ht){case pu:$(_e,ke,ge,ft);break;case ss:F(_e,ke,ge,ft);break;case uu:_e==null&&U(ke,ge,ft,Pe);break;case Nt:ie(_e,ke,ge,ft,q,fe,Pe,Ge,pt);break;default:Dt&1?Q(_e,ke,ge,ft,q,fe,Pe,Ge,pt):Dt&6?X(_e,ke,ge,ft,q,fe,Pe,Ge,pt):(Dt&64||Dt&128)&&ht.process(_e,ke,ge,ft,q,fe,Pe,Ge,pt,Vt)}zt!=null&&q&&Mv(zt,_e&&_e.ref,fe,ke||_e,!ke)},$=(_e,ke,ge,ft)=>{if(_e==null)r(ke.el=l(ke.children),ge,ft);else{const q=ke.el=_e.el;ke.children!==_e.children&&g(q,ke.children)}},F=(_e,ke,ge,ft)=>{_e==null?r(ke.el=m(ke.children||""),ge,ft):ke.el=_e.el},U=(_e,ke,ge,ft)=>{[_e.el,_e.anchor]=M(_e.children,ke,ge,ft,_e.el,_e.anchor)},ee=({el:_e,anchor:ke},ge,ft)=>{let q;for(;_e&&_e!==ke;)q=C(_e),r(_e,ge,ft),_e=q;r(ke,ge,ft)},V=({el:_e,anchor:ke})=>{let ge;for(;_e&&_e!==ke;)ge=C(_e),s(_e),_e=ge;s(ke)},Q=(_e,ke,ge,ft,q,fe,Pe,Ge,pt)=>{Pe=Pe||ke.type==="svg",_e==null?ae(ke,ge,ft,q,fe,Pe,Ge,pt):G(_e,ke,q,fe,Pe,Ge,pt)},ae=(_e,ke,ge,ft,q,fe,Pe,Ge)=>{let pt,ht;const{type:zt,props:Dt,shapeFlag:Gt,transition:ln,dirs:vt}=_e;if(pt=_e.el=d(_e.type,fe,Dt&&Dt.is,Dt),Gt&8?x(pt,_e.children):Gt&16&&te(_e.children,pt,null,ft,q,fe&&zt!=="foreignObject",Pe,Ge),vt&&_o(_e,null,ft,"created"),be(pt,_e,_e.scopeId,Pe,ft),Dt){for(const Ln in Dt)Ln!=="value"&&!rp(Ln)&&u(pt,Ln,null,Dt[Ln],fe,_e.children,ft,q,Ke);"value"in Dt&&u(pt,"value",null,Dt.value),(ht=Dt.onVnodeBeforeMount)&&Os(ht,ft,_e)}vt&&_o(_e,null,ft,"beforeMount");const Rn=(!q||q&&!q.pendingBranch)&&ln&&!ln.persisted;Rn&&ln.beforeEnter(pt),r(pt,ke,ge),((ht=Dt&&Dt.onVnodeMounted)||Rn||vt)&&qr(()=>{ht&&Os(ht,ft,_e),Rn&&ln.enter(pt),vt&&_o(_e,null,ft,"mounted")},q)},be=(_e,ke,ge,ft,q)=>{if(ge&&I(_e,ge),ft)for(let fe=0;fe<ft.length;fe++)I(_e,ft[fe]);if(q){let fe=q.subTree;if(ke===fe){const Pe=q.vnode;be(_e,Pe,Pe.scopeId,Pe.slotScopeIds,q.parent)}}},te=(_e,ke,ge,ft,q,fe,Pe,Ge,pt=0)=>{for(let ht=pt;ht<_e.length;ht++){const zt=_e[ht]=Ge?Vl(_e[ht]):Ys(_e[ht]);L(null,zt,ke,ge,ft,q,fe,Pe,Ge)}},G=(_e,ke,ge,ft,q,fe,Pe)=>{const Ge=ke.el=_e.el;let{patchFlag:pt,dynamicChildren:ht,dirs:zt}=ke;pt|=_e.patchFlag&16;const Dt=_e.props||Li,Gt=ke.props||Li;let ln;ge&&qc(ge,!1),(ln=Gt.onVnodeBeforeUpdate)&&Os(ln,ge,ke,_e),zt&&_o(ke,_e,ge,"beforeUpdate"),ge&&qc(ge,!0);const vt=q&&ke.type!=="foreignObject";if(ht?j(_e.dynamicChildren,ht,Ge,ge,ft,vt,fe):Pe||at(_e,ke,Ge,null,ge,ft,vt,fe,!1),pt>0){if(pt&16)z(Ge,ke,Dt,Gt,ge,ft,q);else if(pt&2&&Dt.class!==Gt.class&&u(Ge,"class",null,Gt.class,q),pt&4&&u(Ge,"style",Dt.style,Gt.style,q),pt&8){const Rn=ke.dynamicProps;for(let Ln=0;Ln<Rn.length;Ln++){const Ye=Rn[Ln],Qe=Dt[Ye],Re=Gt[Ye];(Re!==Qe||Ye==="value")&&u(Ge,Ye,Qe,Re,q,_e.children,ge,ft,Ke)}}pt&1&&_e.children!==ke.children&&x(Ge,ke.children)}else!Pe&&ht==null&&z(Ge,ke,Dt,Gt,ge,ft,q);((ln=Gt.onVnodeUpdated)||zt)&&qr(()=>{ln&&Os(ln,ge,ke,_e),zt&&_o(ke,_e,ge,"updated")},ft)},j=(_e,ke,ge,ft,q,fe,Pe)=>{for(let Ge=0;Ge<ke.length;Ge++){const pt=_e[Ge],ht=ke[Ge],zt=pt.el&&(pt.type===Nt||!Wa(pt,ht)||pt.shapeFlag&70)?w(pt.el):ge;L(pt,ht,zt,null,ft,q,fe,Pe,!0)}},z=(_e,ke,ge,ft,q,fe,Pe)=>{if(ge!==ft){if(ge!==Li)for(const Ge in ge)!rp(Ge)&&!(Ge in ft)&&u(_e,Ge,ge[Ge],null,Pe,ke.children,q,fe,Ke);for(const Ge in ft){if(rp(Ge))continue;const pt=ft[Ge],ht=ge[Ge];pt!==ht&&Ge!=="value"&&u(_e,Ge,ht,pt,Pe,ke.children,q,fe,Ke)}"value"in ft&&u(_e,"value",ge.value,ft.value)}},ie=(_e,ke,ge,ft,q,fe,Pe,Ge,pt)=>{const ht=ke.el=_e?_e.el:l(""),zt=ke.anchor=_e?_e.anchor:l("");let{patchFlag:Dt,dynamicChildren:Gt,slotScopeIds:ln}=ke;ln&&(Ge=Ge?Ge.concat(ln):ln),_e==null?(r(ht,ge,ft),r(zt,ge,ft),te(ke.children,ge,zt,q,fe,Pe,Ge,pt)):Dt>0&&Dt&64&&Gt&&_e.dynamicChildren?(j(_e.dynamicChildren,Gt,ge,q,fe,Pe,Ge),(ke.key!=null||q&&ke===q.subTree)&&n1(_e,ke,!0)):at(_e,ke,ge,zt,q,fe,Pe,Ge,pt)},X=(_e,ke,ge,ft,q,fe,Pe,Ge,pt)=>{ke.slotScopeIds=Ge,_e==null?ke.shapeFlag&512?q.ctx.activate(ke,ge,ft,Pe,pt):ne(ke,ge,ft,q,fe,Pe,pt):Ee(_e,ke,pt)},ne=(_e,ke,ge,ft,q,fe,Pe)=>{const Ge=_e.component=bI(_e,ft,q);if(em(_e)&&(Ge.ctx.renderer=Vt),wI(Ge),Ge.asyncDep){if(q&&q.registerDep(Ge,Ce),!_e.el){const pt=Ge.subTree=ye(ss);F(null,pt,ke,ge)}return}Ce(Ge,_e,ke,ge,q,fe,Pe)},Ee=(_e,ke,ge)=>{const ft=ke.component=_e.component;if(tR(_e,ke,ge))if(ft.asyncDep&&!ft.asyncResolved){Xe(ft,ke,ge);return}else ft.next=ke,ZO(ft.update),ft.update();else ke.el=_e.el,ft.vnode=ke},Ce=(_e,ke,ge,ft,q,fe,Pe)=>{const Ge=()=>{if(_e.isMounted){let{next:zt,bu:Dt,u:Gt,parent:ln,vnode:vt}=_e,Rn=zt,Ln;qc(_e,!1),zt?(zt.el=vt.el,Xe(_e,zt,Pe)):zt=vt,Dt&&Hd(Dt),(Ln=zt.props&&zt.props.onVnodeBeforeUpdate)&&Os(Ln,ln,zt,vt),qc(_e,!0);const Ye=iv(_e),Qe=_e.subTree;_e.subTree=Ye,L(Qe,Ye,w(Qe.el),ut(Qe),_e,q,fe),zt.el=Ye.el,Rn===null&&Hx(_e,Ye.el),Gt&&qr(Gt,q),(Ln=zt.props&&zt.props.onVnodeUpdated)&&qr(()=>Os(Ln,ln,zt,vt),q)}else{let zt;const{el:Dt,props:Gt}=ke,{bm:ln,m:vt,parent:Rn}=_e,Ln=cu(ke);if(qc(_e,!1),ln&&Hd(ln),!Ln&&(zt=Gt&&Gt.onVnodeBeforeMount)&&Os(zt,Rn,ke),qc(_e,!0),Dt&&qt){const Ye=()=>{_e.subTree=iv(_e),qt(Dt,_e.subTree,_e,q,null)};Ln?ke.type.__asyncLoader().then(()=>!_e.isUnmounted&&Ye()):Ye()}else{const Ye=_e.subTree=iv(_e);L(null,Ye,ge,ft,_e,q,fe),ke.el=Ye.el}if(vt&&qr(vt,q),!Ln&&(zt=Gt&&Gt.onVnodeMounted)){const Ye=ke;qr(()=>Os(zt,Rn,Ye),q)}(ke.shapeFlag&256||Rn&&cu(Rn.vnode)&&Rn.vnode.shapeFlag&256)&&_e.a&&qr(_e.a,q),_e.isMounted=!0,ke=ge=ft=null}},pt=_e.effect=new Yp(Ge,()=>p_(ht),_e.scope),ht=_e.update=()=>pt.run();ht.id=_e.uid,qc(_e,!0),ht()},Xe=(_e,ke,ge)=>{ke.component=_e;const ft=_e.vnode.props;_e.vnode=ke,_e.next=null,NR(_e,ke.props,ft,ge),VR(_e,ke.children,ge),_h(),VS(),yh()},at=(_e,ke,ge,ft,q,fe,Pe,Ge,pt=!1)=>{const ht=_e&&_e.children,zt=_e?_e.shapeFlag:0,Dt=ke.children,{patchFlag:Gt,shapeFlag:ln}=ke;if(Gt>0){if(Gt&128){$t(ht,Dt,ge,ft,q,fe,Pe,Ge,pt);return}else if(Gt&256){it(ht,Dt,ge,ft,q,fe,Pe,Ge,pt);return}}ln&8?(zt&16&&Ke(ht,q,fe),Dt!==ht&&x(ge,Dt)):zt&16?ln&16?$t(ht,Dt,ge,ft,q,fe,Pe,Ge,pt):Ke(ht,q,fe,!0):(zt&8&&x(ge,""),ln&16&&te(Dt,ge,ft,q,fe,Pe,Ge,pt))},it=(_e,ke,ge,ft,q,fe,Pe,Ge,pt)=>{_e=_e||jd,ke=ke||jd;const ht=_e.length,zt=ke.length,Dt=Math.min(ht,zt);let Gt;for(Gt=0;Gt<Dt;Gt++){const ln=ke[Gt]=pt?Vl(ke[Gt]):Ys(ke[Gt]);L(_e[Gt],ln,ge,null,q,fe,Pe,Ge,pt)}ht>zt?Ke(_e,q,fe,!0,!1,Dt):te(ke,ge,ft,q,fe,Pe,Ge,pt,Dt)},$t=(_e,ke,ge,ft,q,fe,Pe,Ge,pt)=>{let ht=0;const zt=ke.length;let Dt=_e.length-1,Gt=zt-1;for(;ht<=Dt&&ht<=Gt;){const ln=_e[ht],vt=ke[ht]=pt?Vl(ke[ht]):Ys(ke[ht]);if(Wa(ln,vt))L(ln,vt,ge,null,q,fe,Pe,Ge,pt);else break;ht++}for(;ht<=Dt&&ht<=Gt;){const ln=_e[Dt],vt=ke[Gt]=pt?Vl(ke[Gt]):Ys(ke[Gt]);if(Wa(ln,vt))L(ln,vt,ge,null,q,fe,Pe,Ge,pt);else break;Dt--,Gt--}if(ht>Dt){if(ht<=Gt){const ln=Gt+1,vt=ln<zt?ke[ln].el:ft;for(;ht<=Gt;)L(null,ke[ht]=pt?Vl(ke[ht]):Ys(ke[ht]),ge,vt,q,fe,Pe,Ge,pt),ht++}}else if(ht>Gt)for(;ht<=Dt;)tt(_e[ht],q,fe,!0),ht++;else{const ln=ht,vt=ht,Rn=new Map;for(ht=vt;ht<=Gt;ht++){const an=ke[ht]=pt?Vl(ke[ht]):Ys(ke[ht]);an.key!=null&&Rn.set(an.key,ht)}let Ln,Ye=0;const Qe=Gt-vt+1;let Re=!1,mt=0;const St=new Array(Qe);for(ht=0;ht<Qe;ht++)St[ht]=0;for(ht=ln;ht<=Dt;ht++){const an=_e[ht];if(Ye>=Qe){tt(an,q,fe,!0);continue}let Pt;if(an.key!=null)Pt=Rn.get(an.key);else for(Ln=vt;Ln<=Gt;Ln++)if(St[Ln-vt]===0&&Wa(an,ke[Ln])){Pt=Ln;break}Pt===void 0?tt(an,q,fe,!0):(St[Pt-vt]=ht+1,Pt>=mt?mt=Pt:Re=!0,L(an,ke[Pt],ge,null,q,fe,Pe,Ge,pt),Ye++)}const Yt=Re?GR(St):jd;for(Ln=Yt.length-1,ht=Qe-1;ht>=0;ht--){const an=vt+ht,Pt=ke[an],qn=an+1<zt?ke[an+1].el:ft;St[ht]===0?L(null,Pt,ge,qn,q,fe,Pe,Ge,pt):Re&&(Ln<0||ht!==Yt[Ln]?Ct(Pt,ge,qn,2):Ln--)}}},Ct=(_e,ke,ge,ft,q=null)=>{const{el:fe,type:Pe,transition:Ge,children:pt,shapeFlag:ht}=_e;if(ht&6){Ct(_e.component.subTree,ke,ge,ft);return}if(ht&128){_e.suspense.move(ke,ge,ft);return}if(ht&64){Pe.move(_e,ke,ge,Vt);return}if(Pe===Nt){r(fe,ke,ge);for(let Dt=0;Dt<pt.length;Dt++)Ct(pt[Dt],ke,ge,ft);r(_e.anchor,ke,ge);return}if(Pe===uu){ee(_e,ke,ge);return}if(ft!==2&&ht&1&&Ge)if(ft===0)Ge.beforeEnter(fe),r(fe,ke,ge),qr(()=>Ge.enter(fe),q);else{const{leave:Dt,delayLeave:Gt,afterLeave:ln}=Ge,vt=()=>r(fe,ke,ge),Rn=()=>{Dt(fe,()=>{vt(),ln&&ln()})};Gt?Gt(fe,vt,Rn):Rn()}else r(fe,ke,ge)},tt=(_e,ke,ge,ft=!1,q=!1)=>{const{type:fe,props:Pe,ref:Ge,children:pt,dynamicChildren:ht,shapeFlag:zt,patchFlag:Dt,dirs:Gt}=_e;if(Ge!=null&&Mv(Ge,null,ge,_e,!0),zt&256){ke.ctx.deactivate(_e);return}const ln=zt&1&&Gt,vt=!cu(_e);let Rn;if(vt&&(Rn=Pe&&Pe.onVnodeBeforeUnmount)&&Os(Rn,ke,_e),zt&6)Be(_e.component,ge,ft);else{if(zt&128){_e.suspense.unmount(ge,ft);return}ln&&_o(_e,null,ke,"beforeUnmount"),zt&64?_e.type.remove(_e,ke,ge,q,Vt,ft):ht&&(fe!==Nt||Dt>0&&Dt&64)?Ke(ht,ke,ge,!1,!0):(fe===Nt&&Dt&384||!q&&zt&16)&&Ke(pt,ke,ge),ft&&et(_e)}(vt&&(Rn=Pe&&Pe.onVnodeUnmounted)||ln)&&qr(()=>{Rn&&Os(Rn,ke,_e),ln&&_o(_e,null,ke,"unmounted")},ge)},et=_e=>{const{type:ke,el:ge,anchor:ft,transition:q}=_e;if(ke===Nt){dt(ge,ft);return}if(ke===uu){V(_e);return}const fe=()=>{s(ge),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(_e.shapeFlag&1&&q&&!q.persisted){const{leave:Pe,delayLeave:Ge}=q,pt=()=>Pe(ge,fe);Ge?Ge(_e.el,fe,pt):pt()}else fe()},dt=(_e,ke)=>{let ge;for(;_e!==ke;)ge=C(_e),s(_e),_e=ge;s(ke)},Be=(_e,ke,ge)=>{const{bum:ft,scope:q,update:fe,subTree:Pe,um:Ge}=_e;ft&&Hd(ft),q.stop(),fe&&(fe.active=!1,tt(Pe,_e,ke,ge)),Ge&&qr(Ge,ke),qr(()=>{_e.isUnmounted=!0},ke),ke&&ke.pendingBranch&&!ke.isUnmounted&&_e.asyncDep&&!_e.asyncResolved&&_e.suspenseId===ke.pendingId&&(ke.deps--,ke.deps===0&&ke.resolve())},Ke=(_e,ke,ge,ft=!1,q=!1,fe=0)=>{for(let Pe=fe;Pe<_e.length;Pe++)tt(_e[Pe],ke,ge,ft,q)},ut=_e=>_e.shapeFlag&6?ut(_e.component.subTree):_e.shapeFlag&128?_e.suspense.next():C(_e.anchor||_e.el),Ot=(_e,ke,ge)=>{_e==null?ke._vnode&&tt(ke._vnode,null,null,!0):L(ke._vnode||null,_e,ke,null,null,null,ge),VS(),Iv(),ke._vnode=_e},Vt={p:L,um:tt,m:Ct,r:et,mt:ne,mc:te,pc:at,pbc:j,n:ut,o:e};let _n,qt;return t&&([_n,qt]=t(Vt)),{render:Ot,hydrate:_n,createApp:zR(Ot,_n)}}function qc({effect:e,update:t},i){e.allowRecurse=t.allowRecurse=i}function n1(e,t,i=!1){const r=e.children,s=t.children;if(xn(r)&&xn(s))for(let u=0;u<r.length;u++){const d=r[u];let l=s[u];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[u]=Vl(s[u]),l.el=d.el),i||n1(d,l)),l.type===pu&&(l.el=d.el)}}function GR(e){const t=e.slice(),i=[0];let r,s,u,d,l;const m=e.length;for(r=0;r<m;r++){const g=e[r];if(g!==0){if(s=i[i.length-1],e[s]<g){t[r]=s,i.push(r);continue}for(u=0,d=i.length-1;u<d;)l=u+d>>1,e[i[l]]<g?u=l+1:d=l;g<e[i[u]]&&(u>0&&(t[r]=i[u-1]),i[u]=r)}}for(u=i.length,d=i[u-1];u-- >0;)i[u]=d,d=t[d];return i}const WR=e=>e.__isTeleport,op=e=>e&&(e.disabled||e.disabled===""),tT=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Cb=(e,t)=>{const i=e&&e.to;return Qi(i)?t?t(i):null:i},qR={__isTeleport:!0,process(e,t,i,r,s,u,d,l,m,g){const{mc:x,pc:w,pbc:C,o:{insert:I,querySelector:M,createText:L,createComment:$}}=g,F=op(t.props);let{shapeFlag:U,children:ee,dynamicChildren:V}=t;if(e==null){const Q=t.el=L(""),ae=t.anchor=L("");I(Q,i,r),I(ae,i,r);const be=t.target=Cb(t.props,M),te=t.targetAnchor=L("");be&&(I(te,be),d=d||tT(be));const G=(j,z)=>{U&16&&x(ee,j,z,s,u,d,l,m)};F?G(i,ae):be&&G(be,te)}else{t.el=e.el;const Q=t.anchor=e.anchor,ae=t.target=e.target,be=t.targetAnchor=e.targetAnchor,te=op(e.props),G=te?i:ae,j=te?Q:be;if(d=d||tT(ae),V?(C(e.dynamicChildren,V,G,s,u,d,l),n1(e,t,!0)):m||w(e,t,G,j,s,u,d,l,!1),F)te||Og(t,i,Q,g,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const z=t.target=Cb(t.props,M);z&&Og(t,z,null,g,0)}else te&&Og(t,ae,be,g,1)}pI(t)},remove(e,t,i,r,{um:s,o:{remove:u}},d){const{shapeFlag:l,children:m,anchor:g,targetAnchor:x,target:w,props:C}=e;if(w&&u(x),(d||!op(C))&&(u(g),l&16))for(let I=0;I<m.length;I++){const M=m[I];s(M,t,i,!0,!!M.dynamicChildren)}},move:Og,hydrate:ZR};function Og(e,t,i,{o:{insert:r},m:s},u=2){u===0&&r(e.targetAnchor,t,i);const{el:d,anchor:l,shapeFlag:m,children:g,props:x}=e,w=u===2;if(w&&r(d,t,i),(!w||op(x))&&m&16)for(let C=0;C<g.length;C++)s(g[C],t,i,2);w&&r(l,t,i)}function ZR(e,t,i,r,s,u,{o:{nextSibling:d,parentNode:l,querySelector:m}},g){const x=t.target=Cb(t.props,m);if(x){const w=x._lpa||x.firstChild;if(t.shapeFlag&16)if(op(t.props))t.anchor=g(d(e),t,l(e),i,r,s,u),t.targetAnchor=w;else{t.anchor=d(e);let C=w;for(;C;)if(C=d(C),C&&C.nodeType===8&&C.data==="teleport anchor"){t.targetAnchor=C,x._lpa=t.targetAnchor&&d(t.targetAnchor);break}g(w,t,x,i,r,s,u)}pI(t)}return t.anchor&&d(t.anchor)}const tm=qR;function pI(e){const t=e.ctx;if(t&&t.ut){let i=e.children[0].el;for(;i!==e.targetAnchor;)i.nodeType===1&&i.setAttribute("data-v-owner",t.uid),i=i.nextSibling;t.ut()}}const Nt=Symbol.for("v-fgt"),pu=Symbol.for("v-txt"),ss=Symbol.for("v-cmt"),uu=Symbol.for("v-stc"),lp=[];let Rs=null;function H(e=!1){lp.push(Rs=e?null:[])}function mI(){lp.pop(),Rs=lp[lp.length-1]||null}let mu=1;function Ib(e){mu+=e}function gI(e){return e.dynamicChildren=mu>0?Rs||jd:null,mI(),mu>0&&Rs&&Rs.push(e),e}function me(e,t,i,r,s,u){return gI(ue(e,t,i,r,s,u,!0))}function We(e,t,i,r,s){return gI(ye(e,t,i,r,s,!0))}function dc(e){return e?e.__v_isVNode===!0:!1}function Wa(e,t){return e.type===t.type&&e.key===t.key}function KR(e){}const b_="__vInternal",vI=({key:e})=>e??null,rv=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?Qi(e)||Gi(e)||jn(e)?{i:$r,r:e,k:t,f:!!i}:e:null);function ue(e,t=null,i=null,r=0,s=null,u=e===Nt?0:1,d=!1,l=!1){const m={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&vI(t),ref:t&&rv(t),scopeId:g_,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:u,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:$r};return l?(i1(m,i),u&128&&e.normalize(m)):i&&(m.shapeFlag|=Qi(i)?8:16),mu>0&&!d&&Rs&&(m.patchFlag>0||u&6)&&m.patchFlag!==32&&Rs.push(m),m}const ye=XR;function XR(e,t=null,i=null,r=0,s=null,u=!1){if((!e||e===QC)&&(e=ss),dc(e)){const l=ra(e,t,!0);return i&&i1(l,i),mu>0&&!u&&Rs&&(l.shapeFlag&6?Rs[Rs.indexOf(e)]=l:Rs.push(l)),l.patchFlag|=-2,l}if(i3(e)&&(e=e.__vccOpts),t){t=_I(t);let{class:l,style:m}=t;l&&!Qi(l)&&(t.class=Dn(l)),Ri(m)&&(zx(m)&&!xn(m)&&(m=Ui({},m)),t.style=xu(m))}const d=Qi(e)?1:UC(e)?128:WR(e)?64:Ri(e)?4:jn(e)?2:0;return ue(e,t,i,r,s,d,u,!0)}function _I(e){return e?zx(e)||b_ in e?Ui({},e):e:null}function ra(e,t,i=!1){const{props:r,ref:s,patchFlag:u,children:d}=e,l=t?zr(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&vI(l),ref:t&&t.ref?i&&s?xn(s)?s.concat(rv(t)):[s,rv(t)]:rv(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:d,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Nt?u===-1?16:u|16:u,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ra(e.ssContent),ssFallback:e.ssFallback&&ra(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Mt(e=" ",t=0){return ye(pu,null,e,t)}function yI(e,t){const i=ye(uu,null,e);return i.staticCount=t,i}function ot(e="",t=!1){return t?(H(),We(ss,null,e)):ye(ss,null,e)}function Ys(e){return e==null||typeof e=="boolean"?ye(ss):xn(e)?ye(Nt,null,e.slice()):typeof e=="object"?Vl(e):ye(pu,null,String(e))}function Vl(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ra(e)}function i1(e,t){let i=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(xn(t))i=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),i1(e,s()),s._c&&(s._d=!0));return}else{i=32;const s=t._;!s&&!(b_ in t)?t._ctx=$r:s===3&&$r&&($r.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else jn(t)?(t={default:t,_ctx:$r},i=32):(t=String(t),r&64?(i=16,t=[Mt(t)]):i=8);e.children=t,e.shapeFlag|=i}function zr(...e){const t={};for(let i=0;i<e.length;i++){const r=e[i];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=Dn([t.class,r.class]));else if(s==="style")t.style=xu([t.style,r.style]);else if(qp(s)){const u=t[s],d=r[s];d&&u!==d&&!(xn(u)&&u.includes(d))&&(t[s]=u?[].concat(u,d):d)}else s!==""&&(t[s]=r[s])}return t}function Os(e,t,i,r=null){ta(e,t,7,[i,r])}const YR=sI();let JR=0;function bI(e,t,i){const r=e.type,s=(t?t.appContext:e.appContext)||YR,u={uid:JR++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Ox(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:oI(r,s),emitsOptions:NC(r,s),emit:null,emitted:null,propsDefaults:Li,inheritAttrs:r.inheritAttrs,ctx:Li,data:Li,props:Li,attrs:Li,slots:Li,refs:Li,setupState:Li,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return u.ctx={_:u},u.root=t?t.root:u,u.emit=XO.bind(null,u),e.ce&&e.ce(u),u}let Tr=null;const Ro=()=>Tr||$r;let r1,Sd,nT="__VUE_INSTANCE_SETTERS__";(Sd=gb()[nT])||(Sd=gb()[nT]=[]),Sd.push(e=>Tr=e),r1=e=>{Sd.length>1?Sd.forEach(t=>t(e)):Sd[0](e)};const hc=e=>{r1(e),e.scope.on()},ic=()=>{Tr&&Tr.scope.off(),r1(null)};function xI(e){return e.vnode.shapeFlag&4}let eh=!1;function wI(e,t=!1){eh=t;const{props:i,children:r}=e.vnode,s=xI(e);BR(e,i,s,t),jR(e,r);const u=s?QR(e,t):void 0;return eh=!1,u}function QR(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=Jp(new Proxy(e.ctx,wb));const{setup:r}=i;if(r){const s=e.setupContext=r.length>1?TI(e):null;hc(e),_h();const u=sl(r,e,0,[e.props,s]);if(yh(),ic(),Dx(u)){if(u.then(ic,ic),t)return u.then(d=>{Ab(e,d,t)}).catch(d=>{Su(d,e,0)});e.asyncDep=u}else Ab(e,u,t)}else SI(e,t)}function Ab(e,t,i){jn(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ri(t)&&(e.setupState=Ux(t)),SI(e,i)}let kv,Mb;function e3(e){kv=e,Mb=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,_R))}}const t3=()=>!kv;function SI(e,t,i){const r=e.type;if(!e.render){if(!t&&kv&&!r.render){const s=r.template||Qx(e).template;if(s){const{isCustomElement:u,compilerOptions:d}=e.appContext.config,{delimiters:l,compilerOptions:m}=r,g=Ui(Ui({isCustomElement:u,delimiters:l},d),m);r.render=kv(s,g)}}e.render=r.render||Ka,Mb&&Mb(e)}hc(e),_h(),DR(e),yh(),ic()}function n3(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,i){return zs(e,"get","$attrs"),t[i]}}))}function TI(e){const t=i=>{e.exposed=i||{}};return{get attrs(){return n3(e)},slots:e.slots,emit:e.emit,expose:t}}function x_(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Ux(Jp(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in ap)return ap[i](e)},has(t,i){return i in t||i in ap}}))}function kb(e,t=!0){return jn(e)?e.displayName||e.name:e.name||t&&e.__name}function i3(e){return jn(e)&&"__vccOpts"in e}const Oe=(e,t)=>VO(e,t,eh);function ni(e,t,i){const r=arguments.length;return r===2?Ri(t)&&!xn(t)?dc(t)?ye(e,null,[t]):ye(e,t):ye(e,null,t):(r>3?i=Array.prototype.slice.call(arguments,2):r===3&&dc(i)&&(i=[i]),ye(e,t,i))}const EI=Symbol.for("v-scx"),CI=()=>wi(EI);function r3(){}function s3(e,t,i,r){const s=i[r];if(s&&II(s,e))return s;const u=t();return u.memo=e.slice(),i[r]=u}function II(e,t){const i=e.memo;if(i.length!=t.length)return!1;for(let r=0;r<i.length;r++)if(Yd(i[r],t[r]))return!1;return mu>0&&Rs&&Rs.push(e),!0}const AI="3.3.4",a3={createComponentInstance:bI,setupComponent:wI,renderComponentRoot:iv,setCurrentRenderingInstance:Mp,isVNode:dc,normalizeVNode:Ys},o3=a3,l3=null,c3=null,u3="http://www.w3.org/2000/svg",iu=typeof document<"u"?document:null,iT=iu&&iu.createElement("template"),d3={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,r)=>{const s=t?iu.createElementNS(u3,e):iu.createElement(e,i?{is:i}:void 0);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>iu.createTextNode(e),createComment:e=>iu.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>iu.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,r,s,u){const d=i?i.previousSibling:t.lastChild;if(s&&(s===u||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),i),!(s===u||!(s=s.nextSibling)););else{iT.innerHTML=r?`<svg>${e}</svg>`:e;const l=iT.content;if(r){const m=l.firstChild;for(;m.firstChild;)l.appendChild(m.firstChild);l.removeChild(m)}t.insertBefore(l,i)}return[d?d.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}};function h3(e,t,i){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}function f3(e,t,i){const r=e.style,s=Qi(i);if(i&&!s){if(t&&!Qi(t))for(const u in t)i[u]==null&&Pb(r,u,"");for(const u in i)Pb(r,u,i[u])}else{const u=r.display;s?t!==i&&(r.cssText=i):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=u)}}const rT=/\s*!important$/;function Pb(e,t,i){if(xn(i))i.forEach(r=>Pb(e,t,r));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const r=p3(e,t);rT.test(i)?e.setProperty(_a(r),i.replace(rT,""),"important"):e[r]=i}}const sT=["Webkit","Moz","ms"],m0={};function p3(e,t){const i=m0[t];if(i)return i;let r=$s(t);if(r!=="filter"&&r in e)return m0[t]=r;r=Zp(r);for(let s=0;s<sT.length;s++){const u=sT[s]+r;if(u in e)return m0[t]=u}return t}const aT="http://www.w3.org/1999/xlink";function m3(e,t,i,r,s){if(r&&t.startsWith("xlink:"))i==null?e.removeAttributeNS(aT,t.slice(6,t.length)):e.setAttributeNS(aT,t,i);else{const u=iO(t);i==null||u&&!gC(i)?e.removeAttribute(t):e.setAttribute(t,u?"":i)}}function g3(e,t,i,r,s,u,d){if(t==="innerHTML"||t==="textContent"){r&&d(r,s,u),e[t]=i??"";return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){e._value=i;const g=l==="OPTION"?e.getAttribute("value"):e.value,x=i??"";g!==x&&(e.value=x),i==null&&e.removeAttribute(t);return}let m=!1;if(i===""||i==null){const g=typeof e[t];g==="boolean"?i=gC(i):i==null&&g==="string"?(i="",m=!0):g==="number"&&(i=0,m=!0)}try{e[t]=i}catch{}m&&e.removeAttribute(t)}function rl(e,t,i,r){e.addEventListener(t,i,r)}function v3(e,t,i,r){e.removeEventListener(t,i,r)}function _3(e,t,i,r,s=null){const u=e._vei||(e._vei={}),d=u[t];if(r&&d)d.value=r;else{const[l,m]=y3(t);if(r){const g=u[t]=w3(r,s);rl(e,l,g,m)}else d&&(v3(e,l,d,m),u[t]=void 0)}}const oT=/(?:Once|Passive|Capture)$/;function y3(e){let t;if(oT.test(e)){t={};let r;for(;r=e.match(oT);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):_a(e.slice(2)),t]}let g0=0;const b3=Promise.resolve(),x3=()=>g0||(b3.then(()=>g0=0),g0=Date.now());function w3(e,t){const i=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=i.attached)return;ta(S3(r,i.value),t,5,[r])};return i.value=e,i.attached=x3(),i}function S3(e,t){if(xn(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const lT=/^on[a-z]/,T3=(e,t,i,r,s=!1,u,d,l,m)=>{t==="class"?h3(e,r,s):t==="style"?f3(e,i,r):qp(t)?kx(t)||_3(e,t,i,r,d):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):E3(e,t,r,s))?g3(e,t,r,u,d,l,m):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),m3(e,t,r,s))};function E3(e,t,i,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&lT.test(t)&&jn(i)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||lT.test(t)&&Qi(i)?!1:t in e}function MI(e,t){const i=lt(e);class r extends w_{constructor(u){super(i,u,t)}}return r.def=i,r}const C3=e=>MI(e,HI),I3=typeof HTMLElement<"u"?HTMLElement:class{};class w_ extends I3{constructor(t,i={},r){super(),this._def=t,this._props=i,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&r?r(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,Ir(()=>{this._connected||(Ob(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);new MutationObserver(r=>{for(const s of r)this._setAttr(s.attributeName)}).observe(this,{attributes:!0});const t=(r,s=!1)=>{const{props:u,styles:d}=r;let l;if(u&&!xn(u))for(const m in u){const g=u[m];(g===Number||g&&g.type===Number)&&(m in this._props&&(this._props[m]=Ev(this._props[m])),(l||(l=Object.create(null)))[$s(m)]=!0)}this._numberProps=l,s&&this._resolveProps(r),this._applyStyles(d),this._update()},i=this._def.__asyncLoader;i?i().then(r=>t(r,!0)):t(this._def)}_resolveProps(t){const{props:i}=t,r=xn(i)?i:Object.keys(i||{});for(const s of Object.keys(this))s[0]!=="_"&&r.includes(s)&&this._setProp(s,this[s],!0,!1);for(const s of r.map($s))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(u){this._setProp(s,u)}})}_setAttr(t){let i=this.getAttribute(t);const r=$s(t);this._numberProps&&this._numberProps[r]&&(i=Ev(i)),this._setProp(r,i,!1)}_getProp(t){return this._props[t]}_setProp(t,i,r=!0,s=!0){i!==this._props[t]&&(this._props[t]=i,s&&this._instance&&this._update(),r&&(i===!0?this.setAttribute(_a(t),""):typeof i=="string"||typeof i=="number"?this.setAttribute(_a(t),i+""):i||this.removeAttribute(_a(t))))}_update(){Ob(this._createVNode(),this.shadowRoot)}_createVNode(){const t=ye(this._def,Ui({},this._props));return this._instance||(t.ce=i=>{this._instance=i,i.isCE=!0;const r=(u,d)=>{this.dispatchEvent(new CustomEvent(u,{detail:d}))};i.emit=(u,...d)=>{r(u,d),_a(u)!==u&&r(_a(u),d)};let s=this;for(;s=s&&(s.parentNode||s.host);)if(s instanceof w_){i.parent=s._instance,i.provides=s._instance.provides;break}}),t}_applyStyles(t){t&&t.forEach(i=>{const r=document.createElement("style");r.textContent=i,this.shadowRoot.appendChild(r)})}}function A3(e="$style"){{const t=Ro();if(!t)return Li;const i=t.type.__cssModules;if(!i)return Li;const r=i[e];return r||Li}}function nm(e){const t=Ro();if(!t)return;const i=t.ut=(s=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(u=>Lb(u,s))},r=()=>{const s=e(t.proxy);Db(t.subTree,s),i(s)};VC(r),Bn(()=>{const s=new MutationObserver(r);s.observe(t.subTree.el.parentNode,{childList:!0}),Wi(()=>s.disconnect())})}function Db(e,t){if(e.shapeFlag&128){const i=e.suspense;e=i.activeBranch,i.pendingBranch&&!i.isHydrating&&i.effects.push(()=>{Db(i.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)Lb(e.el,t);else if(e.type===Nt)e.children.forEach(i=>Db(i,t));else if(e.type===uu){let{el:i,anchor:r}=e;for(;i&&(Lb(i,t),i!==r);)i=i.nextSibling}}function Lb(e,t){if(e.nodeType===1){const i=e.style;for(const r in t)i.setProperty(`--${r}`,t[r])}}const $l="transition",Pf="animation",Er=(e,{slots:t})=>ni(GC,PI(e),t);Er.displayName="Transition";const kI={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},M3=Er.props=Ui({},qx,kI),Zc=(e,t=[])=>{xn(e)?e.forEach(i=>i(...t)):e&&e(...t)},cT=e=>e?xn(e)?e.some(t=>t.length>1):e.length>1:!1;function PI(e){const t={};for(const ie in e)ie in kI||(t[ie]=e[ie]);if(e.css===!1)return t;const{name:i="v",type:r,duration:s,enterFromClass:u=`${i}-enter-from`,enterActiveClass:d=`${i}-enter-active`,enterToClass:l=`${i}-enter-to`,appearFromClass:m=u,appearActiveClass:g=d,appearToClass:x=l,leaveFromClass:w=`${i}-leave-from`,leaveActiveClass:C=`${i}-leave-active`,leaveToClass:I=`${i}-leave-to`}=e,M=k3(s),L=M&&M[0],$=M&&M[1],{onBeforeEnter:F,onEnter:U,onEnterCancelled:ee,onLeave:V,onLeaveCancelled:Q,onBeforeAppear:ae=F,onAppear:be=U,onAppearCancelled:te=ee}=t,G=(ie,X,ne)=>{Ul(ie,X?x:l),Ul(ie,X?g:d),ne&&ne()},j=(ie,X)=>{ie._isLeaving=!1,Ul(ie,w),Ul(ie,I),Ul(ie,C),X&&X()},z=ie=>(X,ne)=>{const Ee=ie?be:U,Ce=()=>G(X,ie,ne);Zc(Ee,[X,Ce]),uT(()=>{Ul(X,ie?m:u),el(X,ie?x:l),cT(Ee)||dT(X,r,L,Ce)})};return Ui(t,{onBeforeEnter(ie){Zc(F,[ie]),el(ie,u),el(ie,d)},onBeforeAppear(ie){Zc(ae,[ie]),el(ie,m),el(ie,g)},onEnter:z(!1),onAppear:z(!0),onLeave(ie,X){ie._isLeaving=!0;const ne=()=>j(ie,X);el(ie,w),LI(),el(ie,C),uT(()=>{ie._isLeaving&&(Ul(ie,w),el(ie,I),cT(V)||dT(ie,r,$,ne))}),Zc(V,[ie,ne])},onEnterCancelled(ie){G(ie,!1),Zc(ee,[ie])},onAppearCancelled(ie){G(ie,!0),Zc(te,[ie])},onLeaveCancelled(ie){j(ie),Zc(Q,[ie])}})}function k3(e){if(e==null)return null;if(Ri(e))return[v0(e.enter),v0(e.leave)];{const t=v0(e);return[t,t]}}function v0(e){return Ev(e)}function el(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.add(i)),(e._vtc||(e._vtc=new Set)).add(t)}function Ul(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const{_vtc:i}=e;i&&(i.delete(t),i.size||(e._vtc=void 0))}function uT(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let P3=0;function dT(e,t,i,r){const s=e._endId=++P3,u=()=>{s===e._endId&&r()};if(i)return setTimeout(u,i);const{type:d,timeout:l,propCount:m}=DI(e,t);if(!d)return r();const g=d+"end";let x=0;const w=()=>{e.removeEventListener(g,C),u()},C=I=>{I.target===e&&++x>=m&&w()};setTimeout(()=>{x<m&&w()},l+1),e.addEventListener(g,C)}function DI(e,t){const i=window.getComputedStyle(e),r=M=>(i[M]||"").split(", "),s=r(`${$l}Delay`),u=r(`${$l}Duration`),d=hT(s,u),l=r(`${Pf}Delay`),m=r(`${Pf}Duration`),g=hT(l,m);let x=null,w=0,C=0;t===$l?d>0&&(x=$l,w=d,C=u.length):t===Pf?g>0&&(x=Pf,w=g,C=m.length):(w=Math.max(d,g),x=w>0?d>g?$l:Pf:null,C=x?x===$l?u.length:m.length:0);const I=x===$l&&/\b(transform|all)(,|$)/.test(r(`${$l}Property`).toString());return{type:x,timeout:w,propCount:C,hasTransform:I}}function hT(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((i,r)=>fT(i)+fT(e[r])))}function fT(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function LI(){return document.body.offsetHeight}const OI=new WeakMap,RI=new WeakMap,FI={name:"TransitionGroup",props:Ui({},M3,{tag:String,moveClass:String}),setup(e,{slots:t}){const i=Ro(),r=Wx();let s,u;return xh(()=>{if(!s.length)return;const d=e.moveClass||`${e.name||"v"}-move`;if(!F3(s[0].el,i.vnode.el,d))return;s.forEach(L3),s.forEach(O3);const l=s.filter(R3);LI(),l.forEach(m=>{const g=m.el,x=g.style;el(g,d),x.transform=x.webkitTransform=x.transitionDuration="";const w=g._moveCb=C=>{C&&C.target!==g||(!C||/transform$/.test(C.propertyName))&&(g.removeEventListener("transitionend",w),g._moveCb=null,Ul(g,d))};g.addEventListener("transitionend",w)})}),()=>{const d=li(e),l=PI(d);let m=d.tag||Nt;s=u,u=t.default?v_(t.default()):[];for(let g=0;g<u.length;g++){const x=u[g];x.key!=null&&fu(x,Qd(x,l,r,i))}if(s)for(let g=0;g<s.length;g++){const x=s[g];fu(x,Qd(x,l,r,i)),OI.set(x,x.el.getBoundingClientRect())}return ye(m,null,u)}}},D3=e=>delete e.mode;FI.props;const s1=FI;function L3(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function O3(e){RI.set(e,e.el.getBoundingClientRect())}function R3(e){const t=OI.get(e),i=RI.get(e),r=t.left-i.left,s=t.top-i.top;if(r||s){const u=e.el.style;return u.transform=u.webkitTransform=`translate(${r}px,${s}px)`,u.transitionDuration="0s",e}}function F3(e,t,i){const r=e.cloneNode();e._vtc&&e._vtc.forEach(d=>{d.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),i.split(/\s+/).forEach(d=>d&&r.classList.add(d)),r.style.display="none";const s=t.nodeType===1?t:t.parentNode;s.appendChild(r);const{hasTransform:u}=DI(r);return s.removeChild(r),u}const fc=e=>{const t=e.props["onUpdate:modelValue"]||!1;return xn(t)?i=>Hd(t,i):t};function $3(e){e.target.composing=!0}function pT(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Pv={created(e,{modifiers:{lazy:t,trim:i,number:r}},s){e._assign=fc(s);const u=r||s.props&&s.props.type==="number";rl(e,t?"change":"input",d=>{if(d.target.composing)return;let l=e.value;i&&(l=l.trim()),u&&(l=Tv(l)),e._assign(l)}),i&&rl(e,"change",()=>{e.value=e.value.trim()}),t||(rl(e,"compositionstart",$3),rl(e,"compositionend",pT),rl(e,"change",pT))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:i,trim:r,number:s}},u){if(e._assign=fc(u),e.composing||document.activeElement===e&&e.type!=="range"&&(i||r&&e.value.trim()===t||(s||e.type==="number")&&Tv(e.value)===t))return;const d=t??"";e.value!==d&&(e.value=d)}},a1={deep:!0,created(e,t,i){e._assign=fc(i),rl(e,"change",()=>{const r=e._modelValue,s=th(e),u=e.checked,d=e._assign;if(xn(r)){const l=o_(r,s),m=l!==-1;if(u&&!m)d(r.concat(s));else if(!u&&m){const g=[...r];g.splice(l,1),d(g)}}else if(bu(r)){const l=new Set(r);u?l.add(s):l.delete(s),d(l)}else d($I(e,u))})},mounted:mT,beforeUpdate(e,t,i){e._assign=fc(i),mT(e,t,i)}};function mT(e,{value:t,oldValue:i},r){e._modelValue=t,xn(t)?e.checked=o_(t,r.props.value)>-1:bu(t)?e.checked=t.has(r.props.value):t!==i&&(e.checked=cc(t,$I(e,!0)))}const o1={created(e,{value:t},i){e.checked=cc(t,i.props.value),e._assign=fc(i),rl(e,"change",()=>{e._assign(th(e))})},beforeUpdate(e,{value:t,oldValue:i},r){e._assign=fc(r),t!==i&&(e.checked=cc(t,r.props.value))}},wh={deep:!0,created(e,{value:t,modifiers:{number:i}},r){const s=bu(t);rl(e,"change",()=>{const u=Array.prototype.filter.call(e.options,d=>d.selected).map(d=>i?Tv(th(d)):th(d));e._assign(e.multiple?s?new Set(u):u:u[0])}),e._assign=fc(r)},mounted(e,{value:t}){gT(e,t)},beforeUpdate(e,t,i){e._assign=fc(i)},updated(e,{value:t}){gT(e,t)}};function gT(e,t){const i=e.multiple;if(!(i&&!xn(t)&&!bu(t))){for(let r=0,s=e.options.length;r<s;r++){const u=e.options[r],d=th(u);if(i)xn(t)?u.selected=o_(t,d)>-1:u.selected=t.has(d);else if(cc(th(u),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!i&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function th(e){return"_value"in e?e._value:e.value}function $I(e,t){const i=t?"_trueValue":"_falseValue";return i in e?e[i]:t}const zI={created(e,t,i){Rg(e,t,i,null,"created")},mounted(e,t,i){Rg(e,t,i,null,"mounted")},beforeUpdate(e,t,i,r){Rg(e,t,i,r,"beforeUpdate")},updated(e,t,i,r){Rg(e,t,i,r,"updated")}};function BI(e,t){switch(e){case"SELECT":return wh;case"TEXTAREA":return Pv;default:switch(t){case"checkbox":return a1;case"radio":return o1;default:return Pv}}}function Rg(e,t,i,r,s){const d=BI(e.tagName,i.props&&i.props.type)[s];d&&d(e,t,i,r)}function z3(){Pv.getSSRProps=({value:e})=>({value:e}),o1.getSSRProps=({value:e},t)=>{if(t.props&&cc(t.props.value,e))return{checked:!0}},a1.getSSRProps=({value:e},t)=>{if(xn(e)){if(t.props&&o_(e,t.props.value)>-1)return{checked:!0}}else if(bu(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},zI.getSSRProps=(e,t)=>{if(typeof t.type!="string")return;const i=BI(t.type.toUpperCase(),t.props&&t.props.type);if(i.getSSRProps)return i.getSSRProps(e,t)}}const B3=["ctrl","shift","alt","meta"],N3={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>B3.some(i=>e[`${i}Key`]&&!t.includes(i))},Mo=(e,t)=>(i,...r)=>{for(let s=0;s<t.length;s++){const u=N3[t[s]];if(u&&u(i,t))return}return e(i,...r)},U3={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},NI=(e,t)=>i=>{if(!("key"in i))return;const r=_a(i.key);if(t.some(s=>s===r||U3[s]===r))return e(i)},Ca={beforeMount(e,{value:t},{transition:i}){e._vod=e.style.display==="none"?"":e.style.display,i&&t?i.beforeEnter(e):Df(e,t)},mounted(e,{value:t},{transition:i}){i&&t&&i.enter(e)},updated(e,{value:t,oldValue:i},{transition:r}){!t!=!i&&(r?t?(r.beforeEnter(e),Df(e,!0),r.enter(e)):r.leave(e,()=>{Df(e,!1)}):Df(e,t))},beforeUnmount(e,{value:t}){Df(e,t)}};function Df(e,t){e.style.display=t?e._vod:"none"}function j3(){Ca.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const UI=Ui({patchProp:T3},d3);let cp,vT=!1;function jI(){return cp||(cp=dI(UI))}function VI(){return cp=vT?cp:hI(UI),vT=!0,cp}const Ob=(...e)=>{jI().render(...e)},HI=(...e)=>{VI().hydrate(...e)},GI=(...e)=>{const t=jI().createApp(...e),{mount:i}=t;return t.mount=r=>{const s=WI(r);if(!s)return;const u=t._component;!jn(u)&&!u.render&&!u.template&&(u.template=s.innerHTML),s.innerHTML="";const d=i(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),d},t},V3=(...e)=>{const t=VI().createApp(...e),{mount:i}=t;return t.mount=r=>{const s=WI(r);if(s)return i(s,!0,s instanceof SVGElement)},t};function WI(e){return Qi(e)?document.querySelector(e):e}let _T=!1;const H3=()=>{_T||(_T=!0,z3(),j3())},G3=()=>{},W3=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:GC,BaseTransitionPropsValidators:qx,Comment:ss,EffectScope:Ox,Fragment:Nt,KeepAlive:fR,ReactiveEffect:Yp,Static:uu,Suspense:iR,Teleport:tm,Text:pu,Transition:Er,TransitionGroup:s1,VueElement:w_,assertNumber:GO,callWithAsyncErrorHandling:ta,callWithErrorHandling:sl,camelize:$s,capitalize:Zp,cloneVNode:ra,compatUtils:c3,compile:G3,computed:Oe,createApp:GI,createBlock:We,createCommentVNode:ot,createElementBlock:me,createElementVNode:ue,createHydrationRenderer:hI,createPropsRestProxy:kR,createRenderer:dI,createSSRApp:V3,createSlots:eI,createStaticVNode:yI,createTextVNode:Mt,createVNode:ye,customRef:OC,defineAsyncComponent:nc,defineComponent:lt,defineCustomElement:MI,defineEmits:bR,defineExpose:xR,defineModel:TR,defineOptions:wR,defineProps:yR,defineSSRCustomElement:C3,defineSlots:SR,get devtools(){return Od},effect:oO,effectScope:Rx,getCurrentInstance:Ro,getCurrentScope:Kp,getTransitionRawChildren:v_,guardReactiveProps:_I,h:ni,handleError:Su,hasInjectionContext:e1,hydrate:HI,initCustomFormatter:r3,initDirectivesForSSR:H3,inject:wi,isMemoSame:II,isProxy:zx,isReactive:Eo,isReadonly:hu,isRef:Gi,isRuntimeOnly:t3,isShallow:Ep,isVNode:dc,markRaw:Jp,mergeDefaults:AR,mergeModels:MR,mergeProps:zr,nextTick:Ir,normalizeClass:Dn,normalizeProps:tO,normalizeStyle:xu,onActivated:Zx,onBeforeMount:ZC,onBeforeUnmount:ao,onBeforeUpdate:Xx,onDeactivated:Kx,onErrorCaptured:JC,onMounted:Bn,onRenderTracked:YC,onRenderTriggered:XC,onScopeDispose:Xp,onServerPrefetch:KC,onUnmounted:Wi,onUpdated:xh,openBlock:H,popScopeId:so,provide:Oi,proxyRefs:Ux,pushScopeId:ro,queuePostFlushCb:Vx,reactive:Br,readonly:wu,ref:Fe,registerRuntimeCompiler:e3,render:Ob,renderList:Fn,renderSlot:Mn,resolveComponent:y_,resolveDirective:gR,resolveDynamicComponent:vc,resolveFilter:l3,resolveTransitionHooks:Qd,setBlockTracking:Ib,setDevtoolsHook:BC,setTransitionHooks:fu,shallowReactive:DC,shallowReadonly:eu,shallowRef:bh,ssrContextKey:EI,ssrUtils:o3,stop:lO,toDisplayString:xt,toHandlerKey:sp,toHandlers:vR,toRaw:li,toRef:Jd,toRefs:f_,toValue:$O,transformVNodeArgs:KR,triggerRef:FO,unref:he,useAttrs:CR,useCssModule:A3,useCssVars:nm,useModel:IR,useSSRContext:CI,useSlots:nI,useTransitionState:Wx,vModelCheckbox:a1,vModelDynamic:zI,vModelRadio:o1,vModelSelect:wh,vModelText:Pv,vShow:Ca,version:AI,warn:HO,watch:fn,watchEffect:Ar,watchPostEffect:VC,watchSyncEffect:cR,withAsyncContext:PR,withCtx:Me,withDefaults:ER,withDirectives:bs,withKeys:NI,withMemo:s3,withModifiers:Mo,withScopeId:YO},Symbol.toStringTag,{value:"Module"}));var q3=!1;/*!
  * pinia v2.1.3
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let l1;const S_=e=>l1=e,Z3=()=>e1()&&wi(c1)||l1,c1=Symbol();function Rb(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var up;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(up||(up={}));function K3(){const e=Rx(!0),t=e.run(()=>Fe({}));let i=[],r=[];const s=Jp({install(u){S_(s),s._a=u,u.provide(c1,s),u.config.globalProperties.$pinia=s,r.forEach(d=>i.push(d)),r=[]},use(u){return!this._a&&!q3?r.push(u):i.push(u),this},_p:i,_a:null,_e:e,_s:new Map,state:t});return s}const qI=()=>{};function yT(e,t,i,r=qI){e.push(t);const s=()=>{const u=e.indexOf(t);u>-1&&(e.splice(u,1),r())};return!i&&Kp()&&Xp(s),s}function Td(e,...t){e.slice().forEach(i=>{i(...t)})}const X3=e=>e();function Fb(e,t){e instanceof Map&&t instanceof Map&&t.forEach((i,r)=>e.set(r,i)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const i in t){if(!t.hasOwnProperty(i))continue;const r=t[i],s=e[i];Rb(s)&&Rb(r)&&e.hasOwnProperty(i)&&!Gi(r)&&!Eo(r)?e[i]=Fb(s,r):e[i]=r}return e}const Y3=Symbol();function J3(e){return!Rb(e)||!e.hasOwnProperty(Y3)}const{assign:jl}=Object;function Q3(e){return!!(Gi(e)&&e.effect)}function e5(e,t,i,r){const{state:s,actions:u,getters:d}=t,l=i.state.value[e];let m;function g(){l||(i.state.value[e]=s?s():{});const x=f_(i.state.value[e]);return jl(x,u,Object.keys(d||{}).reduce((w,C)=>(w[C]=Jp(Oe(()=>{S_(i);const I=i._s.get(e);return d[C].call(I,I)})),w),{}))}return m=ZI(e,g,t,i,r,!0),m}function ZI(e,t,i={},r,s,u){let d;const l=jl({actions:{}},i),m={deep:!0};let g,x,w=[],C=[],I;const M=r.state.value[e];!u&&!M&&(r.state.value[e]={}),Fe({});let L;function $(te){let G;g=x=!1,typeof te=="function"?(te(r.state.value[e]),G={type:up.patchFunction,storeId:e,events:I}):(Fb(r.state.value[e],te),G={type:up.patchObject,payload:te,storeId:e,events:I});const j=L=Symbol();Ir().then(()=>{L===j&&(g=!0)}),x=!0,Td(w,G,r.state.value[e])}const F=u?function(){const{state:G}=i,j=G?G():{};this.$patch(z=>{jl(z,j)})}:qI;function U(){d.stop(),w=[],C=[],r._s.delete(e)}function ee(te,G){return function(){S_(r);const j=Array.from(arguments),z=[],ie=[];function X(Ce){z.push(Ce)}function ne(Ce){ie.push(Ce)}Td(C,{args:j,name:te,store:Q,after:X,onError:ne});let Ee;try{Ee=G.apply(this&&this.$id===e?this:Q,j)}catch(Ce){throw Td(ie,Ce),Ce}return Ee instanceof Promise?Ee.then(Ce=>(Td(z,Ce),Ce)).catch(Ce=>(Td(ie,Ce),Promise.reject(Ce))):(Td(z,Ee),Ee)}}const V={_p:r,$id:e,$onAction:yT.bind(null,C),$patch:$,$reset:F,$subscribe(te,G={}){const j=yT(w,te,G.detached,()=>z()),z=d.run(()=>fn(()=>r.state.value[e],ie=>{(G.flush==="sync"?x:g)&&te({storeId:e,type:up.direct,events:I},ie)},jl({},m,G)));return j},$dispose:U},Q=Br(V);r._s.set(e,Q);const ae=r._a&&r._a.runWithContext||X3,be=r._e.run(()=>(d=Rx(),ae(()=>d.run(t))));for(const te in be){const G=be[te];if(Gi(G)&&!Q3(G)||Eo(G))u||(M&&J3(G)&&(Gi(G)?G.value=M[te]:Fb(G,M[te])),r.state.value[e][te]=G);else if(typeof G=="function"){const j=ee(te,G);be[te]=j,l.actions[te]=G}}return jl(Q,be),jl(li(Q),be),Object.defineProperty(Q,"$state",{get:()=>r.state.value[e],set:te=>{$(G=>{jl(G,te)})}}),r._p.forEach(te=>{jl(Q,d.run(()=>te({store:Q,app:r._a,pinia:r,options:l})))}),M&&u&&i.hydrate&&i.hydrate(Q.$state,M),g=!0,x=!0,Q}function Sh(e,t,i){let r,s;const u=typeof t=="function";typeof e=="string"?(r=e,s=u?i:t):(s=e,r=e.id);function d(l,m){const g=e1();return l=l||(g?wi(c1,null):null),l&&S_(l),l=l1,l._s.has(r)||(u?ZI(r,t,s,l):e5(r,s,l)),l._s.get(r)}return d.$id=r,d}function bT(e){{e=li(e);const t={};for(const i in e){const r=e[i];(Gi(r)||Eo(r))&&(t[i]=Jd(e,i))}return t}}function KI(e,t){return function(){return e.apply(t,arguments)}}const{toString:t5}=Object.prototype,{getPrototypeOf:u1}=Object,T_=(e=>t=>{const i=t5.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Fo=e=>(e=e.toLowerCase(),t=>T_(t)===e),E_=e=>t=>typeof t===e,{isArray:Th}=Array,Lp=E_("undefined");function n5(e){return e!==null&&!Lp(e)&&e.constructor!==null&&!Lp(e.constructor)&&ya(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const XI=Fo("ArrayBuffer");function i5(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&XI(e.buffer),t}const r5=E_("string"),ya=E_("function"),YI=E_("number"),C_=e=>e!==null&&typeof e=="object",s5=e=>e===!0||e===!1,sv=e=>{if(T_(e)!=="object")return!1;const t=u1(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},a5=Fo("Date"),o5=Fo("File"),l5=Fo("Blob"),c5=Fo("FileList"),u5=e=>C_(e)&&ya(e.pipe),d5=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ya(e.append)&&((t=T_(e))==="formdata"||t==="object"&&ya(e.toString)&&e.toString()==="[object FormData]"))},h5=Fo("URLSearchParams"),f5=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function im(e,t,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),Th(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{const u=i?Object.getOwnPropertyNames(e):Object.keys(e),d=u.length;let l;for(r=0;r<d;r++)l=u[r],t.call(null,e[l],l,e)}}function JI(e,t){t=t.toLowerCase();const i=Object.keys(e);let r=i.length,s;for(;r-- >0;)if(s=i[r],t===s.toLowerCase())return s;return null}const QI=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),eA=e=>!Lp(e)&&e!==QI;function $b(){const{caseless:e}=eA(this)&&this||{},t={},i=(r,s)=>{const u=e&&JI(t,s)||s;sv(t[u])&&sv(r)?t[u]=$b(t[u],r):sv(r)?t[u]=$b({},r):Th(r)?t[u]=r.slice():t[u]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&im(arguments[r],i);return t}const p5=(e,t,i,{allOwnKeys:r}={})=>(im(t,(s,u)=>{i&&ya(s)?e[u]=KI(s,i):e[u]=s},{allOwnKeys:r}),e),m5=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),g5=(e,t,i,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},v5=(e,t,i,r)=>{let s,u,d;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),u=s.length;u-- >0;)d=s[u],(!r||r(d,e,t))&&!l[d]&&(t[d]=e[d],l[d]=!0);e=i!==!1&&u1(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},_5=(e,t,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=t.length;const r=e.indexOf(t,i);return r!==-1&&r===i},y5=e=>{if(!e)return null;if(Th(e))return e;let t=e.length;if(!YI(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},b5=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&u1(Uint8Array)),x5=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=r.next())&&!s.done;){const u=s.value;t.call(e,u[0],u[1])}},w5=(e,t)=>{let i;const r=[];for(;(i=e.exec(t))!==null;)r.push(i);return r},S5=Fo("HTMLFormElement"),T5=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,r,s){return r.toUpperCase()+s}),xT=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),E5=Fo("RegExp"),tA=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),r={};im(i,(s,u)=>{t(s,u,e)!==!1&&(r[u]=s)}),Object.defineProperties(e,r)},C5=e=>{tA(e,(t,i)=>{if(ya(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const r=e[i];if(ya(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},I5=(e,t)=>{const i={},r=s=>{s.forEach(u=>{i[u]=!0})};return Th(e)?r(e):r(String(e).split(t)),i},A5=()=>{},M5=(e,t)=>(e=+e,Number.isFinite(e)?e:t),_0="abcdefghijklmnopqrstuvwxyz",wT="0123456789",nA={DIGIT:wT,ALPHA:_0,ALPHA_DIGIT:_0+_0.toUpperCase()+wT},k5=(e=16,t=nA.ALPHA_DIGIT)=>{let i="";const{length:r}=t;for(;e--;)i+=t[Math.random()*r|0];return i};function P5(e){return!!(e&&ya(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const D5=e=>{const t=new Array(10),i=(r,s)=>{if(C_(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[s]=r;const u=Th(r)?[]:{};return im(r,(d,l)=>{const m=i(d,s+1);!Lp(m)&&(u[l]=m)}),t[s]=void 0,u}}return r};return i(e,0)},L5=Fo("AsyncFunction"),O5=e=>e&&(C_(e)||ya(e))&&ya(e.then)&&ya(e.catch),kt={isArray:Th,isArrayBuffer:XI,isBuffer:n5,isFormData:d5,isArrayBufferView:i5,isString:r5,isNumber:YI,isBoolean:s5,isObject:C_,isPlainObject:sv,isUndefined:Lp,isDate:a5,isFile:o5,isBlob:l5,isRegExp:E5,isFunction:ya,isStream:u5,isURLSearchParams:h5,isTypedArray:b5,isFileList:c5,forEach:im,merge:$b,extend:p5,trim:f5,stripBOM:m5,inherits:g5,toFlatObject:v5,kindOf:T_,kindOfTest:Fo,endsWith:_5,toArray:y5,forEachEntry:x5,matchAll:w5,isHTMLForm:S5,hasOwnProperty:xT,hasOwnProp:xT,reduceDescriptors:tA,freezeMethods:C5,toObjectSet:I5,toCamelCase:T5,noop:A5,toFiniteNumber:M5,findKey:JI,global:QI,isContextDefined:eA,ALPHABET:nA,generateString:k5,isSpecCompliantForm:P5,toJSONObject:D5,isAsyncFn:L5,isThenable:O5};function xi(e,t,i,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),r&&(this.request=r),s&&(this.response=s)}kt.inherits(xi,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:kt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const iA=xi.prototype,rA={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{rA[e]={value:e}});Object.defineProperties(xi,rA);Object.defineProperty(iA,"isAxiosError",{value:!0});xi.from=(e,t,i,r,s,u)=>{const d=Object.create(iA);return kt.toFlatObject(e,d,function(m){return m!==Error.prototype},l=>l!=="isAxiosError"),xi.call(d,e.message,t,i,r,s),d.cause=e,d.name=e.name,u&&Object.assign(d,u),d};const R5=null;function zb(e){return kt.isPlainObject(e)||kt.isArray(e)}function sA(e){return kt.endsWith(e,"[]")?e.slice(0,-2):e}function ST(e,t,i){return e?e.concat(t).map(function(s,u){return s=sA(s),!i&&u?"["+s+"]":s}).join(i?".":""):t}function F5(e){return kt.isArray(e)&&!e.some(zb)}const $5=kt.toFlatObject(kt,{},null,function(t){return/^is[A-Z]/.test(t)});function I_(e,t,i){if(!kt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,i=kt.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(L,$){return!kt.isUndefined($[L])});const r=i.metaTokens,s=i.visitor||x,u=i.dots,d=i.indexes,m=(i.Blob||typeof Blob<"u"&&Blob)&&kt.isSpecCompliantForm(t);if(!kt.isFunction(s))throw new TypeError("visitor must be a function");function g(M){if(M===null)return"";if(kt.isDate(M))return M.toISOString();if(!m&&kt.isBlob(M))throw new xi("Blob is not supported. Use a Buffer instead.");return kt.isArrayBuffer(M)||kt.isTypedArray(M)?m&&typeof Blob=="function"?new Blob([M]):Buffer.from(M):M}function x(M,L,$){let F=M;if(M&&!$&&typeof M=="object"){if(kt.endsWith(L,"{}"))L=r?L:L.slice(0,-2),M=JSON.stringify(M);else if(kt.isArray(M)&&F5(M)||(kt.isFileList(M)||kt.endsWith(L,"[]"))&&(F=kt.toArray(M)))return L=sA(L),F.forEach(function(ee,V){!(kt.isUndefined(ee)||ee===null)&&t.append(d===!0?ST([L],V,u):d===null?L:L+"[]",g(ee))}),!1}return zb(M)?!0:(t.append(ST($,L,u),g(M)),!1)}const w=[],C=Object.assign($5,{defaultVisitor:x,convertValue:g,isVisitable:zb});function I(M,L){if(!kt.isUndefined(M)){if(w.indexOf(M)!==-1)throw Error("Circular reference detected in "+L.join("."));w.push(M),kt.forEach(M,function(F,U){(!(kt.isUndefined(F)||F===null)&&s.call(t,F,kt.isString(U)?U.trim():U,L,C))===!0&&I(F,L?L.concat(U):[U])}),w.pop()}}if(!kt.isObject(e))throw new TypeError("data must be an object");return I(e),t}function TT(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function d1(e,t){this._pairs=[],e&&I_(e,this,t)}const aA=d1.prototype;aA.append=function(t,i){this._pairs.push([t,i])};aA.toString=function(t){const i=t?function(r){return t.call(this,r,TT)}:TT;return this._pairs.map(function(s){return i(s[0])+"="+i(s[1])},"").join("&")};function z5(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function oA(e,t,i){if(!t)return e;const r=i&&i.encode||z5,s=i&&i.serialize;let u;if(s?u=s(t,i):u=kt.isURLSearchParams(t)?t.toString():new d1(t,i).toString(r),u){const d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+u}return e}class B5{constructor(){this.handlers=[]}use(t,i,r){return this.handlers.push({fulfilled:t,rejected:i,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){kt.forEach(this.handlers,function(r){r!==null&&t(r)})}}const ET=B5,lA={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},N5=typeof URLSearchParams<"u"?URLSearchParams:d1,U5=typeof FormData<"u"?FormData:null,j5=typeof Blob<"u"?Blob:null,V5=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),H5=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),To={isBrowser:!0,classes:{URLSearchParams:N5,FormData:U5,Blob:j5},isStandardBrowserEnv:V5,isStandardBrowserWebWorkerEnv:H5,protocols:["http","https","file","blob","url","data"]};function G5(e,t){return I_(e,new To.classes.URLSearchParams,Object.assign({visitor:function(i,r,s,u){return To.isNode&&kt.isBuffer(i)?(this.append(r,i.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)}},t))}function W5(e){return kt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function q5(e){const t={},i=Object.keys(e);let r;const s=i.length;let u;for(r=0;r<s;r++)u=i[r],t[u]=e[u];return t}function cA(e){function t(i,r,s,u){let d=i[u++];const l=Number.isFinite(+d),m=u>=i.length;return d=!d&&kt.isArray(s)?s.length:d,m?(kt.hasOwnProp(s,d)?s[d]=[s[d],r]:s[d]=r,!l):((!s[d]||!kt.isObject(s[d]))&&(s[d]=[]),t(i,r,s[d],u)&&kt.isArray(s[d])&&(s[d]=q5(s[d])),!l)}if(kt.isFormData(e)&&kt.isFunction(e.entries)){const i={};return kt.forEachEntry(e,(r,s)=>{t(W5(r),s,i,0)}),i}return null}const Z5={"Content-Type":void 0};function K5(e,t,i){if(kt.isString(e))try{return(t||JSON.parse)(e),kt.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(i||JSON.stringify)(e)}const A_={transitional:lA,adapter:["xhr","http"],transformRequest:[function(t,i){const r=i.getContentType()||"",s=r.indexOf("application/json")>-1,u=kt.isObject(t);if(u&&kt.isHTMLForm(t)&&(t=new FormData(t)),kt.isFormData(t))return s&&s?JSON.stringify(cA(t)):t;if(kt.isArrayBuffer(t)||kt.isBuffer(t)||kt.isStream(t)||kt.isFile(t)||kt.isBlob(t))return t;if(kt.isArrayBufferView(t))return t.buffer;if(kt.isURLSearchParams(t))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(u){if(r.indexOf("application/x-www-form-urlencoded")>-1)return G5(t,this.formSerializer).toString();if((l=kt.isFileList(t))||r.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return I_(l?{"files[]":t}:t,m&&new m,this.formSerializer)}}return u||s?(i.setContentType("application/json",!1),K5(t)):t}],transformResponse:[function(t){const i=this.transitional||A_.transitional,r=i&&i.forcedJSONParsing,s=this.responseType==="json";if(t&&kt.isString(t)&&(r&&!this.responseType||s)){const d=!(i&&i.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(l){if(d)throw l.name==="SyntaxError"?xi.from(l,xi.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:To.classes.FormData,Blob:To.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};kt.forEach(["delete","get","head"],function(t){A_.headers[t]={}});kt.forEach(["post","put","patch"],function(t){A_.headers[t]=kt.merge(Z5)});const h1=A_,X5=kt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Y5=e=>{const t={};let i,r,s;return e&&e.split(`
`).forEach(function(d){s=d.indexOf(":"),i=d.substring(0,s).trim().toLowerCase(),r=d.substring(s+1).trim(),!(!i||t[i]&&X5[i])&&(i==="set-cookie"?t[i]?t[i].push(r):t[i]=[r]:t[i]=t[i]?t[i]+", "+r:r)}),t},CT=Symbol("internals");function Lf(e){return e&&String(e).trim().toLowerCase()}function av(e){return e===!1||e==null?e:kt.isArray(e)?e.map(av):String(e)}function J5(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=i.exec(e);)t[r[1]]=r[2];return t}const Q5=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function y0(e,t,i,r,s){if(kt.isFunction(r))return r.call(this,t,i);if(s&&(t=i),!!kt.isString(t)){if(kt.isString(r))return t.indexOf(r)!==-1;if(kt.isRegExp(r))return r.test(t)}}function e4(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,i,r)=>i.toUpperCase()+r)}function t4(e,t){const i=kt.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+i,{value:function(s,u,d){return this[r].call(this,t,s,u,d)},configurable:!0})})}class M_{constructor(t){t&&this.set(t)}set(t,i,r){const s=this;function u(l,m,g){const x=Lf(m);if(!x)throw new Error("header name must be a non-empty string");const w=kt.findKey(s,x);(!w||s[w]===void 0||g===!0||g===void 0&&s[w]!==!1)&&(s[w||m]=av(l))}const d=(l,m)=>kt.forEach(l,(g,x)=>u(g,x,m));return kt.isPlainObject(t)||t instanceof this.constructor?d(t,i):kt.isString(t)&&(t=t.trim())&&!Q5(t)?d(Y5(t),i):t!=null&&u(i,t,r),this}get(t,i){if(t=Lf(t),t){const r=kt.findKey(this,t);if(r){const s=this[r];if(!i)return s;if(i===!0)return J5(s);if(kt.isFunction(i))return i.call(this,s,r);if(kt.isRegExp(i))return i.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,i){if(t=Lf(t),t){const r=kt.findKey(this,t);return!!(r&&this[r]!==void 0&&(!i||y0(this,this[r],r,i)))}return!1}delete(t,i){const r=this;let s=!1;function u(d){if(d=Lf(d),d){const l=kt.findKey(r,d);l&&(!i||y0(r,r[l],l,i))&&(delete r[l],s=!0)}}return kt.isArray(t)?t.forEach(u):u(t),s}clear(t){const i=Object.keys(this);let r=i.length,s=!1;for(;r--;){const u=i[r];(!t||y0(this,this[u],u,t,!0))&&(delete this[u],s=!0)}return s}normalize(t){const i=this,r={};return kt.forEach(this,(s,u)=>{const d=kt.findKey(r,u);if(d){i[d]=av(s),delete i[u];return}const l=t?e4(u):String(u).trim();l!==u&&delete i[u],i[l]=av(s),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const i=Object.create(null);return kt.forEach(this,(r,s)=>{r!=null&&r!==!1&&(i[s]=t&&kt.isArray(r)?r.join(", "):r)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,i])=>t+": "+i).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...i){const r=new this(t);return i.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[CT]=this[CT]={accessors:{}}).accessors,s=this.prototype;function u(d){const l=Lf(d);r[l]||(t4(s,d),r[l]=!0)}return kt.isArray(t)?t.forEach(u):u(t),this}}M_.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);kt.freezeMethods(M_.prototype);kt.freezeMethods(M_);const al=M_;function b0(e,t){const i=this||h1,r=t||i,s=al.from(r.headers);let u=r.data;return kt.forEach(e,function(l){u=l.call(i,u,s.normalize(),t?t.status:void 0)}),s.normalize(),u}function uA(e){return!!(e&&e.__CANCEL__)}function rm(e,t,i){xi.call(this,e??"canceled",xi.ERR_CANCELED,t,i),this.name="CanceledError"}kt.inherits(rm,xi,{__CANCEL__:!0});function n4(e,t,i){const r=i.config.validateStatus;!i.status||!r||r(i.status)?e(i):t(new xi("Request failed with status code "+i.status,[xi.ERR_BAD_REQUEST,xi.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}const i4=To.isStandardBrowserEnv?function(){return{write:function(i,r,s,u,d,l){const m=[];m.push(i+"="+encodeURIComponent(r)),kt.isNumber(s)&&m.push("expires="+new Date(s).toGMTString()),kt.isString(u)&&m.push("path="+u),kt.isString(d)&&m.push("domain="+d),l===!0&&m.push("secure"),document.cookie=m.join("; ")},read:function(i){const r=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function r4(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function s4(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function dA(e,t){return e&&!r4(t)?s4(e,t):t}const a4=To.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");let r;function s(u){let d=u;return t&&(i.setAttribute("href",d),d=i.href),i.setAttribute("href",d),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return r=s(window.location.href),function(d){const l=kt.isString(d)?s(d):d;return l.protocol===r.protocol&&l.host===r.host}}():function(){return function(){return!0}}();function o4(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function l4(e,t){e=e||10;const i=new Array(e),r=new Array(e);let s=0,u=0,d;return t=t!==void 0?t:1e3,function(m){const g=Date.now(),x=r[u];d||(d=g),i[s]=m,r[s]=g;let w=u,C=0;for(;w!==s;)C+=i[w++],w=w%e;if(s=(s+1)%e,s===u&&(u=(u+1)%e),g-d<t)return;const I=x&&g-x;return I?Math.round(C*1e3/I):void 0}}function IT(e,t){let i=0;const r=l4(50,250);return s=>{const u=s.loaded,d=s.lengthComputable?s.total:void 0,l=u-i,m=r(l),g=u<=d;i=u;const x={loaded:u,total:d,progress:d?u/d:void 0,bytes:l,rate:m||void 0,estimated:m&&d&&g?(d-u)/m:void 0,event:s};x[t?"download":"upload"]=!0,e(x)}}const c4=typeof XMLHttpRequest<"u",u4=c4&&function(e){return new Promise(function(i,r){let s=e.data;const u=al.from(e.headers).normalize(),d=e.responseType;let l;function m(){e.cancelToken&&e.cancelToken.unsubscribe(l),e.signal&&e.signal.removeEventListener("abort",l)}kt.isFormData(s)&&(To.isStandardBrowserEnv||To.isStandardBrowserWebWorkerEnv?u.setContentType(!1):u.setContentType("multipart/form-data;",!1));let g=new XMLHttpRequest;if(e.auth){const I=e.auth.username||"",M=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";u.set("Authorization","Basic "+btoa(I+":"+M))}const x=dA(e.baseURL,e.url);g.open(e.method.toUpperCase(),oA(x,e.params,e.paramsSerializer),!0),g.timeout=e.timeout;function w(){if(!g)return;const I=al.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),L={data:!d||d==="text"||d==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:I,config:e,request:g};n4(function(F){i(F),m()},function(F){r(F),m()},L),g=null}if("onloadend"in g?g.onloadend=w:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(w)},g.onabort=function(){g&&(r(new xi("Request aborted",xi.ECONNABORTED,e,g)),g=null)},g.onerror=function(){r(new xi("Network Error",xi.ERR_NETWORK,e,g)),g=null},g.ontimeout=function(){let M=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const L=e.transitional||lA;e.timeoutErrorMessage&&(M=e.timeoutErrorMessage),r(new xi(M,L.clarifyTimeoutError?xi.ETIMEDOUT:xi.ECONNABORTED,e,g)),g=null},To.isStandardBrowserEnv){const I=(e.withCredentials||a4(x))&&e.xsrfCookieName&&i4.read(e.xsrfCookieName);I&&u.set(e.xsrfHeaderName,I)}s===void 0&&u.setContentType(null),"setRequestHeader"in g&&kt.forEach(u.toJSON(),function(M,L){g.setRequestHeader(L,M)}),kt.isUndefined(e.withCredentials)||(g.withCredentials=!!e.withCredentials),d&&d!=="json"&&(g.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&g.addEventListener("progress",IT(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&g.upload&&g.upload.addEventListener("progress",IT(e.onUploadProgress)),(e.cancelToken||e.signal)&&(l=I=>{g&&(r(!I||I.type?new rm(null,e,g):I),g.abort(),g=null)},e.cancelToken&&e.cancelToken.subscribe(l),e.signal&&(e.signal.aborted?l():e.signal.addEventListener("abort",l)));const C=o4(x);if(C&&To.protocols.indexOf(C)===-1){r(new xi("Unsupported protocol "+C+":",xi.ERR_BAD_REQUEST,e));return}g.send(s||null)})},ov={http:R5,xhr:u4};kt.forEach(ov,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const d4={getAdapter:e=>{e=kt.isArray(e)?e:[e];const{length:t}=e;let i,r;for(let s=0;s<t&&(i=e[s],!(r=kt.isString(i)?ov[i.toLowerCase()]:i));s++);if(!r)throw r===!1?new xi(`Adapter ${i} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(kt.hasOwnProp(ov,i)?`Adapter '${i}' is not available in the build`:`Unknown adapter '${i}'`);if(!kt.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:ov};function x0(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new rm(null,e)}function AT(e){return x0(e),e.headers=al.from(e.headers),e.data=b0.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),d4.getAdapter(e.adapter||h1.adapter)(e).then(function(r){return x0(e),r.data=b0.call(e,e.transformResponse,r),r.headers=al.from(r.headers),r},function(r){return uA(r)||(x0(e),r&&r.response&&(r.response.data=b0.call(e,e.transformResponse,r.response),r.response.headers=al.from(r.response.headers))),Promise.reject(r)})}const MT=e=>e instanceof al?e.toJSON():e;function nh(e,t){t=t||{};const i={};function r(g,x,w){return kt.isPlainObject(g)&&kt.isPlainObject(x)?kt.merge.call({caseless:w},g,x):kt.isPlainObject(x)?kt.merge({},x):kt.isArray(x)?x.slice():x}function s(g,x,w){if(kt.isUndefined(x)){if(!kt.isUndefined(g))return r(void 0,g,w)}else return r(g,x,w)}function u(g,x){if(!kt.isUndefined(x))return r(void 0,x)}function d(g,x){if(kt.isUndefined(x)){if(!kt.isUndefined(g))return r(void 0,g)}else return r(void 0,x)}function l(g,x,w){if(w in t)return r(g,x);if(w in e)return r(void 0,g)}const m={url:u,method:u,data:u,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:l,headers:(g,x)=>s(MT(g),MT(x),!0)};return kt.forEach(Object.keys(Object.assign({},e,t)),function(x){const w=m[x]||s,C=w(e[x],t[x],x);kt.isUndefined(C)&&w!==l||(i[x]=C)}),i}const hA="1.4.0",f1={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{f1[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const kT={};f1.transitional=function(t,i,r){function s(u,d){return"[Axios v"+hA+"] Transitional option '"+u+"'"+d+(r?". "+r:"")}return(u,d,l)=>{if(t===!1)throw new xi(s(d," has been removed"+(i?" in "+i:"")),xi.ERR_DEPRECATED);return i&&!kT[d]&&(kT[d]=!0,console.warn(s(d," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(u,d,l):!0}};function h4(e,t,i){if(typeof e!="object")throw new xi("options must be an object",xi.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const u=r[s],d=t[u];if(d){const l=e[u],m=l===void 0||d(l,u,e);if(m!==!0)throw new xi("option "+u+" must be "+m,xi.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new xi("Unknown option "+u,xi.ERR_BAD_OPTION)}}const Bb={assertOptions:h4,validators:f1},zl=Bb.validators;class Dv{constructor(t){this.defaults=t,this.interceptors={request:new ET,response:new ET}}request(t,i){typeof t=="string"?(i=i||{},i.url=t):i=t||{},i=nh(this.defaults,i);const{transitional:r,paramsSerializer:s,headers:u}=i;r!==void 0&&Bb.assertOptions(r,{silentJSONParsing:zl.transitional(zl.boolean),forcedJSONParsing:zl.transitional(zl.boolean),clarifyTimeoutError:zl.transitional(zl.boolean)},!1),s!=null&&(kt.isFunction(s)?i.paramsSerializer={serialize:s}:Bb.assertOptions(s,{encode:zl.function,serialize:zl.function},!0)),i.method=(i.method||this.defaults.method||"get").toLowerCase();let d;d=u&&kt.merge(u.common,u[i.method]),d&&kt.forEach(["delete","get","head","post","put","patch","common"],M=>{delete u[M]}),i.headers=al.concat(d,u);const l=[];let m=!0;this.interceptors.request.forEach(function(L){typeof L.runWhen=="function"&&L.runWhen(i)===!1||(m=m&&L.synchronous,l.unshift(L.fulfilled,L.rejected))});const g=[];this.interceptors.response.forEach(function(L){g.push(L.fulfilled,L.rejected)});let x,w=0,C;if(!m){const M=[AT.bind(this),void 0];for(M.unshift.apply(M,l),M.push.apply(M,g),C=M.length,x=Promise.resolve(i);w<C;)x=x.then(M[w++],M[w++]);return x}C=l.length;let I=i;for(w=0;w<C;){const M=l[w++],L=l[w++];try{I=M(I)}catch($){L.call(this,$);break}}try{x=AT.call(this,I)}catch(M){return Promise.reject(M)}for(w=0,C=g.length;w<C;)x=x.then(g[w++],g[w++]);return x}getUri(t){t=nh(this.defaults,t);const i=dA(t.baseURL,t.url);return oA(i,t.params,t.paramsSerializer)}}kt.forEach(["delete","get","head","options"],function(t){Dv.prototype[t]=function(i,r){return this.request(nh(r||{},{method:t,url:i,data:(r||{}).data}))}});kt.forEach(["post","put","patch"],function(t){function i(r){return function(u,d,l){return this.request(nh(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:u,data:d}))}}Dv.prototype[t]=i(),Dv.prototype[t+"Form"]=i(!0)});const lv=Dv;class p1{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(u){i=u});const r=this;this.promise.then(s=>{if(!r._listeners)return;let u=r._listeners.length;for(;u-- >0;)r._listeners[u](s);r._listeners=null}),this.promise.then=s=>{let u;const d=new Promise(l=>{r.subscribe(l),u=l}).then(s);return d.cancel=function(){r.unsubscribe(u)},d},t(function(u,d,l){r.reason||(r.reason=new rm(u,d,l),i(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const i=this._listeners.indexOf(t);i!==-1&&this._listeners.splice(i,1)}static source(){let t;return{token:new p1(function(s){t=s}),cancel:t}}}const f4=p1;function p4(e){return function(i){return e.apply(null,i)}}function m4(e){return kt.isObject(e)&&e.isAxiosError===!0}const Nb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Nb).forEach(([e,t])=>{Nb[t]=e});const g4=Nb;function fA(e){const t=new lv(e),i=KI(lv.prototype.request,t);return kt.extend(i,lv.prototype,t,{allOwnKeys:!0}),kt.extend(i,t,null,{allOwnKeys:!0}),i.create=function(s){return fA(nh(e,s))},i}const Mr=fA(h1);Mr.Axios=lv;Mr.CanceledError=rm;Mr.CancelToken=f4;Mr.isCancel=uA;Mr.VERSION=hA;Mr.toFormData=I_;Mr.AxiosError=xi;Mr.Cancel=Mr.CanceledError;Mr.all=function(t){return Promise.all(t)};Mr.spread=p4;Mr.isAxiosError=m4;Mr.mergeConfig=nh;Mr.AxiosHeaders=al;Mr.formToJSON=e=>cA(kt.isHTMLForm(e)?new FormData(e):e);Mr.HttpStatusCode=g4;Mr.default=Mr;const Si=Mr;function Vi(e){return e!=null&&typeof e=="object"&&e["@@functional/placeholder"]===!0}function rs(e){return function t(i){return arguments.length===0||Vi(i)?t:e.apply(this,arguments)}}function hr(e){return function t(i,r){switch(arguments.length){case 0:return t;case 1:return Vi(i)?t:rs(function(s){return e(i,s)});default:return Vi(i)&&Vi(r)?t:Vi(i)?rs(function(s){return e(s,r)}):Vi(r)?rs(function(s){return e(i,s)}):e(i,r)}}}function m1(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(i){return t.apply(this,arguments)};case 2:return function(i,r){return t.apply(this,arguments)};case 3:return function(i,r,s){return t.apply(this,arguments)};case 4:return function(i,r,s,u){return t.apply(this,arguments)};case 5:return function(i,r,s,u,d){return t.apply(this,arguments)};case 6:return function(i,r,s,u,d,l){return t.apply(this,arguments)};case 7:return function(i,r,s,u,d,l,m){return t.apply(this,arguments)};case 8:return function(i,r,s,u,d,l,m,g){return t.apply(this,arguments)};case 9:return function(i,r,s,u,d,l,m,g,x){return t.apply(this,arguments)};case 10:return function(i,r,s,u,d,l,m,g,x,w){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function pA(e,t,i){return function(){for(var r=[],s=0,u=e,d=0;d<t.length||s<arguments.length;){var l;d<t.length&&(!Vi(t[d])||s>=arguments.length)?l=t[d]:(l=arguments[s],s+=1),r[d]=l,Vi(l)||(u-=1),d+=1}return u<=0?i.apply(this,r):m1(u,pA(e,r,i))}}var mA=hr(function(t,i){return t===1?rs(i):m1(t,pA(t,[],i))});function v4(e){return function t(i,r,s){switch(arguments.length){case 0:return t;case 1:return Vi(i)?t:hr(function(u,d){return e(i,u,d)});case 2:return Vi(i)&&Vi(r)?t:Vi(i)?hr(function(u,d){return e(u,r,d)}):Vi(r)?hr(function(u,d){return e(i,u,d)}):rs(function(u){return e(i,r,u)});default:return Vi(i)&&Vi(r)&&Vi(s)?t:Vi(i)&&Vi(r)?hr(function(u,d){return e(u,d,s)}):Vi(i)&&Vi(s)?hr(function(u,d){return e(u,r,d)}):Vi(r)&&Vi(s)?hr(function(u,d){return e(i,u,d)}):Vi(i)?rs(function(u){return e(u,r,s)}):Vi(r)?rs(function(u){return e(i,u,s)}):Vi(s)?rs(function(u){return e(i,r,u)}):e(i,r,s)}}}const gA=Array.isArray||function(t){return t!=null&&t.length>=0&&Object.prototype.toString.call(t)==="[object Array]"};function _4(e){return e!=null&&typeof e["@@transducer/step"]=="function"}function g1(e,t,i){return function(){if(arguments.length===0)return i();var r=arguments[arguments.length-1];if(!gA(r)){for(var s=0;s<e.length;){if(typeof r[e[s]]=="function")return r[e[s]].apply(r,Array.prototype.slice.call(arguments,0,-1));s+=1}if(_4(r)){var u=t.apply(null,Array.prototype.slice.call(arguments,0,-1));return u(r)}}return i.apply(this,arguments)}}const ih={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}};function PT(e){for(var t=[],i;!(i=e.next()).done;)t.push(i.value);return t}function DT(e,t,i){for(var r=0,s=i.length;r<s;){if(e(t,i[r]))return!0;r+=1}return!1}function y4(e){var t=String(e).match(/^function (\w*)/);return t==null?"":t[1]}function Lv(e,t){return Object.prototype.hasOwnProperty.call(t,e)}function b4(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}const w0=typeof Object.is=="function"?Object.is:b4;var LT=Object.prototype.toString,x4=function(){return LT.call(arguments)==="[object Arguments]"?function(t){return LT.call(t)==="[object Arguments]"}:function(t){return Lv("callee",t)}}(),w4=!{toString:null}.propertyIsEnumerable("toString"),OT=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],RT=function(){return arguments.propertyIsEnumerable("length")}(),S4=function(t,i){for(var r=0;r<t.length;){if(t[r]===i)return!0;r+=1}return!1},rh=rs(typeof Object.keys=="function"&&!RT?function(t){return Object(t)!==t?[]:Object.keys(t)}:function(t){if(Object(t)!==t)return[];var i,r,s=[],u=RT&&x4(t);for(i in t)Lv(i,t)&&(!u||i!=="length")&&(s[s.length]=i);if(w4)for(r=OT.length-1;r>=0;)i=OT[r],Lv(i,t)&&!S4(s,i)&&(s[s.length]=i),r-=1;return s}),Ub=rs(function(t){return t===null?"Null":t===void 0?"Undefined":Object.prototype.toString.call(t).slice(8,-1)});function FT(e,t,i,r){var s=PT(e),u=PT(t);function d(l,m){return v1(l,m,i.slice(),r.slice())}return!DT(function(l,m){return!DT(d,m,l)},u,s)}function v1(e,t,i,r){if(w0(e,t))return!0;var s=Ub(e);if(s!==Ub(t))return!1;if(typeof e["fantasy-land/equals"]=="function"||typeof t["fantasy-land/equals"]=="function")return typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t)&&typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e);if(typeof e.equals=="function"||typeof t.equals=="function")return typeof e.equals=="function"&&e.equals(t)&&typeof t.equals=="function"&&t.equals(e);switch(s){case"Arguments":case"Array":case"Object":if(typeof e.constructor=="function"&&y4(e.constructor)==="Promise")return e===t;break;case"Boolean":case"Number":case"String":if(!(typeof e==typeof t&&w0(e.valueOf(),t.valueOf())))return!1;break;case"Date":if(!w0(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(!(e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.sticky===t.sticky&&e.unicode===t.unicode))return!1;break}for(var u=i.length-1;u>=0;){if(i[u]===e)return r[u]===t;u-=1}switch(s){case"Map":return e.size!==t.size?!1:FT(e.entries(),t.entries(),i.concat([e]),r.concat([t]));case"Set":return e.size!==t.size?!1:FT(e.values(),t.values(),i.concat([e]),r.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var d=rh(e);if(d.length!==rh(t).length)return!1;var l=i.concat([e]),m=r.concat([t]);for(u=d.length-1;u>=0;){var g=d[u];if(!(Lv(g,t)&&v1(t[g],e[g],l,m)))return!1;u-=1}return!0}var T4=hr(function(t,i){return v1(t,i,[],[])});function E4(e,t,i){var r,s;if(typeof e.indexOf=="function")switch(typeof t){case"number":if(t===0){for(r=1/t;i<e.length;){if(s=e[i],s===0&&1/s===r)return i;i+=1}return-1}else if(t!==t){for(;i<e.length;){if(s=e[i],typeof s=="number"&&s!==s)return i;i+=1}return-1}return e.indexOf(t,i);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,i);case"object":if(t===null)return e.indexOf(t,i)}for(;i<e.length;){if(T4(e[i],t))return i;i+=1}return-1}function jb(e,t){return E4(t,e,0)>=0}function dp(e,t){for(var i=0,r=t.length,s=Array(r);i<r;)s[i]=e(t[i]),i+=1;return s}function S0(e){var t=e.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+t.replace(/"/g,'\\"')+'"'}var Of=function(t){return(t<10?"0":"")+t},C4=typeof Date.prototype.toISOString=="function"?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+Of(t.getUTCMonth()+1)+"-"+Of(t.getUTCDate())+"T"+Of(t.getUTCHours())+":"+Of(t.getUTCMinutes())+":"+Of(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function I4(e){return function(){return!e.apply(this,arguments)}}function vA(e,t,i){for(var r=0,s=i.length;r<s;)t=e(t,i[r]),r+=1;return t}function A4(e,t){for(var i=0,r=t.length,s=[];i<r;)e(t[i])&&(s[s.length]=t[i]),i+=1;return s}function M4(e){return Object.prototype.toString.call(e)==="[object Object]"}var k4=function(){function e(t,i){this.xf=i,this.f=t}return e.prototype["@@transducer/init"]=ih.init,e.prototype["@@transducer/result"]=ih.result,e.prototype["@@transducer/step"]=function(t,i){return this.f(i)?this.xf["@@transducer/step"](t,i):t},e}();function P4(e){return function(t){return new k4(e,t)}}var _A=hr(g1(["fantasy-land/filter","filter"],P4,function(e,t){return M4(t)?vA(function(i,r){return e(t[r])&&(i[r]=t[r]),i},{},rh(t)):A4(e,t)})),yA=hr(function(t,i){return _A(I4(t),i)});function bA(e,t){var i=function(d){var l=t.concat([e]);return jb(d,l)?"<Circular>":bA(d,l)},r=function(u,d){return dp(function(l){return S0(l)+": "+i(u[l])},d.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+dp(i,e).join(", ")+"))";case"[object Array]":return"["+dp(i,e).concat(r(e,yA(function(u){return/^\d+$/.test(u)},rh(e)))).join(", ")+"]";case"[object Boolean]":return typeof e=="object"?"new Boolean("+i(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?i(NaN):S0(C4(e)))+")";case"[object Map]":return"new Map("+i(Array.from(e))+")";case"[object Null]":return"null";case"[object Number]":return typeof e=="object"?"new Number("+i(e.valueOf())+")":1/e===-1/0?"-0":e.toString(10);case"[object Set]":return"new Set("+i(Array.from(e).sort())+")";case"[object String]":return typeof e=="object"?"new String("+i(e.valueOf())+")":S0(e);case"[object Undefined]":return"undefined";default:if(typeof e.toString=="function"){var s=e.toString();if(s!=="[object Object]")return s}return"{"+r(e,rh(e)).join(", ")+"}"}}var $T=rs(function(t){return bA(t,[])}),D4=hr(function(t,i){if(t===i)return i;function r(m,g){if(m>g!=g>m)return g>m?g:m}var s=r(t,i);if(s!==void 0)return s;var u=r(typeof t,typeof i);if(u!==void 0)return u===typeof t?t:i;var d=$T(t),l=r(d,$T(i));return l!==void 0&&l===d?t:i}),L4=function(){function e(t,i){this.xf=i,this.f=t}return e.prototype["@@transducer/init"]=ih.init,e.prototype["@@transducer/result"]=ih.result,e.prototype["@@transducer/step"]=function(t,i){return this.xf["@@transducer/step"](t,this.f(i))},e}(),O4=function(t){return function(i){return new L4(t,i)}},R4=hr(g1(["fantasy-land/map","map"],O4,function(t,i){switch(Object.prototype.toString.call(i)){case"[object Function]":return mA(i.length,function(){return t.call(this,i.apply(this,arguments))});case"[object Object]":return vA(function(r,s){return r[s]=t(i[s]),r},{},rh(i));default:return dp(t,i)}}));const xA=Number.isInteger||function(t){return t<<0===t};function wA(e){return Object.prototype.toString.call(e)==="[object String]"}var SA=hr(function(t,i){var r=t<0?i.length+t:t;return wA(i)?i.charAt(r):i[r]}),F4=hr(function(t,i){if(i!=null)return xA(t)?SA(t,i):i[t]});const cv=F4;var $4=hr(function(t,i){return R4(cv(t),i)}),z4=rs(function(t){return gA(t)?!0:!t||typeof t!="object"||wA(t)?!1:t.length===0?!0:t.length>0?t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1):!1}),zT=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function B4(e,t,i){return function(s,u,d){if(z4(d))return e(s,u,d);if(d==null)return u;if(typeof d["fantasy-land/reduce"]=="function")return t(s,u,d,"fantasy-land/reduce");if(d[zT]!=null)return i(s,u,d[zT]());if(typeof d.next=="function")return i(s,u,d);if(typeof d.reduce=="function")return t(s,u,d,"reduce");throw new TypeError("reduce: list must be array or iterable")}}function N4(e,t,i){for(var r=0,s=i.length;r<s;){if(t=e["@@transducer/step"](t,i[r]),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r+=1}return e["@@transducer/result"](t)}var U4=hr(function(t,i){return m1(t.length,function(){return t.apply(i,arguments)})});function j4(e,t,i){for(var r=i.next();!r.done;){if(t=e["@@transducer/step"](t,r.value),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r=i.next()}return e["@@transducer/result"](t)}function V4(e,t,i,r){return e["@@transducer/result"](i[r](U4(e["@@transducer/step"],e),t))}var H4=B4(N4,V4,j4),G4=function(){function e(t){this.f=t}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(t){return t},e.prototype["@@transducer/step"]=function(t,i){return this.f(t,i)},e}();function W4(e){return new G4(e)}var q4=v4(function(e,t,i){return H4(typeof e=="function"?W4(e):e,t,i)});function Z4(e){return new RegExp(e.source,e.flags?e.flags:(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":"")+(e.dotAll?"s":""))}function TA(e,t,i){if(i||(i=new X4),K4(e))return e;var r=function(u){var d=i.get(e);if(d)return d;i.set(e,u);for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&(u[l]=t?TA(e[l],!0,i):e[l]);return u};switch(Ub(e)){case"Object":return r(Object.create(Object.getPrototypeOf(e)));case"Array":return r([]);case"Date":return new Date(e.valueOf());case"RegExp":return Z4(e);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return e.slice();default:return e}}function K4(e){var t=typeof e;return e==null||t!="object"&&t!="function"}var X4=function(){function e(){this.map={},this.length=0}return e.prototype.set=function(t,i){const r=this.hash(t);let s=this.map[r];s||(this.map[r]=s=[]),s.push([t,i]),this.length+=1},e.prototype.hash=function(t){let i=[];for(var r in t)i.push(Object.prototype.toString.call(t[r]));return i.join()},e.prototype.get=function(t){if(this.length<=180){for(const s in this.map){const u=this.map[s];for(let d=0;d<u.length;d+=1){const l=u[d];if(l[0]===t)return l[1]}}return}const i=this.hash(t),r=this.map[i];if(r)for(let s=0;s<r.length;s+=1){const u=r[s];if(u[0]===t)return u[1]}},e}(),Y4=rs(function(t){return t!=null&&typeof t.clone=="function"?t.clone():TA(t,!0)});const BT=Y4;function J4(e){return e}var Q4=rs(J4),eF=hr(function(t,i){return mA(q4(D4,0,$4("length",i)),function(){var r=arguments,s=this;return t.apply(s,dp(function(u){return u.apply(s,r)},i))})}),_1=function(){function e(){this._nativeSet=typeof Set=="function"?new Set:null,this._items={}}return e.prototype.add=function(t){return!NT(t,!0,this)},e.prototype.has=function(t){return NT(t,!1,this)},e}();function NT(e,t,i){var r=typeof e,s,u;switch(r){case"string":case"number":return e===0&&1/e===-1/0?i._items["-0"]?!0:(t&&(i._items["-0"]=!0),!1):i._nativeSet!==null?t?(s=i._nativeSet.size,i._nativeSet.add(e),u=i._nativeSet.size,u===s):i._nativeSet.has(e):r in i._items?e in i._items[r]?!0:(t&&(i._items[r][e]=!0),!1):(t&&(i._items[r]={},i._items[r][e]=!0),!1);case"boolean":if(r in i._items){var d=e?1:0;return i._items[r][d]?!0:(t&&(i._items[r][d]=!0),!1)}else return t&&(i._items[r]=e?[!1,!0]:[!0,!1]),!1;case"function":return i._nativeSet!==null?t?(s=i._nativeSet.size,i._nativeSet.add(e),u=i._nativeSet.size,u===s):i._nativeSet.has(e):r in i._items?jb(e,i._items[r])?!0:(t&&i._items[r].push(e),!1):(t&&(i._items[r]=[e]),!1);case"undefined":return i._items[r]?!0:(t&&(i._items[r]=!0),!1);case"object":if(e===null)return i._items.null?!0:(t&&(i._items.null=!0),!1);default:return r=Object.prototype.toString.call(e),r in i._items?jb(e,i._items[r])?!0:(t&&i._items[r].push(e),!1):(t&&(i._items[r]=[e]),!1)}}var tF=hr(function(t,i){for(var r=[],s=0,u=t.length,d=i.length,l=new _1,m=0;m<d;m+=1)l.add(i[m]);for(;s<u;)l.add(t[s])&&(r[r.length]=t[s]),s+=1;return r});const nF=tF;var iF=function(){function e(t,i){this.xf=i,this.f=t,this.set=new _1}return e.prototype["@@transducer/init"]=ih.init,e.prototype["@@transducer/result"]=ih.result,e.prototype["@@transducer/step"]=function(t,i){return this.set.add(this.f(i))?this.xf["@@transducer/step"](t,i):t},e}();function rF(e){return function(t){return new iF(e,t)}}var sF=hr(g1([],rF,function(e,t){for(var i=new _1,r=[],s=0,u,d;s<t.length;)d=t[s],u=e(d),i.add(u)&&r.push(d),s+=1;return r}));const aF=sF;var oF=aF(Q4);const lF=oF;var cF=rs(function(t){return eF(function(){return Array.prototype.slice.call(arguments,0)},t)});const uF=cF;var dF=hr(function(t,i){return t.map(function(r){for(var s=i,u=0,d;u<r.length;){if(s==null)return;d=r[u],s=xA(d)?SA(d,s):s[d],u+=1}return s})}),hF=hr(function(t,i){return dF([t],i)[0]});const fF=hF;var pF=hr(function(t,i){for(var r={},s={},u=0,d=t.length;u<d;)s[t[u]]=1,u+=1;for(var l in i)s.hasOwnProperty(l)||(r[l]=i[l]);return r});const EA=pF;var mF=uF([_A,yA]);const gF=mF;var CA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function IA(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function AA(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function r(){if(this instanceof r){var s=[null];s.push.apply(s,arguments);var u=Function.bind.apply(t,s);return new u}return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(i,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),i}var vF=function(t){return _F(t)&&!yF(t)};function _F(e){return!!e&&typeof e=="object"}function yF(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||wF(e)}var bF=typeof Symbol=="function"&&Symbol.for,xF=bF?Symbol.for("react.element"):60103;function wF(e){return e.$$typeof===xF}function SF(e){return Array.isArray(e)?[]:{}}function Op(e,t){return t.clone!==!1&&t.isMergeableObject(e)?sh(SF(e),e,t):e}function TF(e,t,i){return e.concat(t).map(function(r){return Op(r,i)})}function EF(e,t){if(!t.customMerge)return sh;var i=t.customMerge(e);return typeof i=="function"?i:sh}function CF(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function UT(e){return Object.keys(e).concat(CF(e))}function MA(e,t){try{return t in e}catch{return!1}}function IF(e,t){return MA(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function AF(e,t,i){var r={};return i.isMergeableObject(e)&&UT(e).forEach(function(s){r[s]=Op(e[s],i)}),UT(t).forEach(function(s){IF(e,s)||(MA(e,s)&&i.isMergeableObject(t[s])?r[s]=EF(s,i)(e[s],t[s],i):r[s]=Op(t[s],i))}),r}function sh(e,t,i){i=i||{},i.arrayMerge=i.arrayMerge||TF,i.isMergeableObject=i.isMergeableObject||vF,i.cloneUnlessOtherwiseSpecified=Op;var r=Array.isArray(t),s=Array.isArray(e),u=r===s;return u?r?i.arrayMerge(e,t,i):AF(e,t,i):Op(t,i)}sh.all=function(t,i){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(r,s){return sh(r,s,i)},{})};var MF=sh,kF=MF;const PF=IA(kF);var dC,hC;const DF={instance:{base:{origin:{}.VITE_BASE_ORIGIN??"https://localhost",path:{}.VITE_BASE_PATH??"/",url:{}.VITE_BASE_URL??"https://localhost/"},theming:{availableThemes:((dC={}.VITE_AVAILABLE_THEMES)==null?void 0:dC.split(","))??["light"],enabled:((hC={}.VITE_THEME_ENABLED)==null?void 0:hC.toLowerCase())==="true",defaultTheme:{}.VITE_DEFAULT_THEME??"light"},moreLikeThis:{maxInlineResults:3},textAreaItem:{defaultTextTruncationHeight:72}},arcgis:{apiKey:{}.VITE_ARCGIS_API_KEY??"PLEASE_SET_MAPBOX_ACCESS_TOKEN"},routes:{test:{}.VITE_TEST_ROUTE??null},mode:"production"},LF=(e,t)=>t;var fC;const ci=PF(DF,((fC=window==null?void 0:window.Elevator)==null?void 0:fC.config)??{},{arrayMerge:LF});ci.instance.theming.availableThemes=lF(ci.instance.theming.availableThemes);const OF=e=>{const t=e.split(".");return t[t.length-1]};class qd extends Error{constructor(i,r,s){super(i);Tg(this,"name","ApiError");Tg(this,"statusCode");Tg(this,"data");this.statusCode=r,this.data=s,this.stack=new Error(i).stack}}const sm=Sh("errorStore",{state:()=>({error:null}),actions:{setError(e){this.error=e},clearError(){this.error=null}}});function RF(e,t){return e.widgetArray.find(i=>i.fieldTitle===t)??null}const kA=e=>`${ci.instance.base.url}/fileManager/tinyImageByFileId/${e}/true`,_c=e=>`${ci.instance.base.url}/fileManager/previewImageByFileId/${e}/true`,dl=e=>`/asset/viewAsset/${e}`;function y1({asset:e,widget:t}){const i=e[t.fieldTitle];if(!i)return null;const[r,s]=gF(u=>!!u.isPrimary,i);return[...r,...s]}function FF({widget:e,template:t,asset:i}){if(!i||!t||!i.titleObject)return!1;const r=RF(t,i.titleObject),s=y1({asset:i,widget:e});return!!r&&e.type==="text"&&e.fieldTitle===r.fieldTitle&&(s==null?void 0:s.length)===1}function $F({asset:e,widget:t}){const i=y1({asset:e,widget:t});return i!=null}function zF({asset:e,template:t}){if(!(t&&e))return[];const i=t.widgetArray.filter(r=>r.display).filter(r=>$F({asset:e,widget:r}));return i.length<2?i:i.filter(r=>!FF({widget:r,template:t,asset:e})).sort((r,s)=>r.viewOrder-s.viewOrder)}function Tu(e){var i;const t=((i=e==null?void 0:e.title)==null?void 0:i[0])??"(No Title)";return ko(t)}function ko(e){return new DOMParser().parseFromString(e,"text/html").body.textContent||""}function PA(e,t){const i=e.trim().replace("?","").replace("...","");return t.clickToSearchType===0?ci.instance.base.url+"/search/querySearch/"+encodeURIComponent(ko(i)):ci.instance.base.url+"/search/scopedQuerySearch/"+t.fieldTitle+"/"+encodeURIComponent(i)}const Ei=ci.instance.base.url;Si.defaults.withCredentials=!0;Si.interceptors.response.use(void 0,async e=>{const t=e.config,i=sm();let r;if(e.response){const s=e.response.data??{},u=(s==null?void 0:s.message)??e.message,d=e.response.status;r=new qd(u,d,s)}else r=new qd(e.message,0);return t.skipErrorNotifications||i.setError(r),Promise.reject(r)});async function DA(e){return(await Si.get(`${Ei}/asset/viewAsset/${e}/true`)).data??null}async function BF(e){return(await Si.get(`${Ei}/assetManager/getTemplate/${e}`)).data??null}async function NF(e){const t=new FormData;return t.append("suppressRecent","true"),t.append("searchRelated","true"),t.append("searchQuery",JSON.stringify({searchText:e})),(await Si.post(`${Ei}/search/searchResults`,t)).data.matches.filter(r=>r.objectId!==e)}async function UF(e){return(await Si.get(`${Ei}/collections/collectionHeader/${e}/true`)).data.collectionDescription??null}async function jF(e){const t=await Si.get(`${Ei}/fileManager/getMetadataForObject/${e}`);return EA(["bulkMetadata"],t.data)}async function VF(e,t){const i=await Si.get(`${Ei}/asset/getEmbedAsJson/${e}/${t??""}`);return Object.entries(i.data).map(([r,s])=>({filetype:r,isReady:s.ready,url:r==="original"?`${Ei}/fileManager/getOriginal/${e}`:`${Ei}/fileManager/getDerivativeById/${e}/${r}`,originalFilename:s.originalFilename,extension:OF(s.originalFilename)}))}async function HF(){return Si.get(`${Ei}/home/interstitial`)}async function GF(e){const t=new URLSearchParams;return t.append("searchText",""),t.append("collectionId",String(e)),t.append("storeOnly","true"),(await Si.post(`${Ei}/search/searchResults`,t)).data.searchId}async function WF(e,t){const i=PA(e,t);return(await Si.get(`${i}/true`)).data.searchId}async function qF(e){return(await Si.get(`${Ei}/page/view/${e}/true`)).data}async function ZF(){return(await Si.get(`${Ei}/home/getInstanceNav`)).data}async function KF({fileObjectId:e,excerptId:t}){const i=new FormData;return i.append("object",e),i.append("excerptId",t),(await Si.post(`${Ei}/api/v1/lti/ltiPayload`,i)).data}async function XF(e,t={}){const{collection:i,...r}=t,s={searchText:e,...r};i&&(s.collection=i.map(String)),t.sort&&(s.sort=t.sort);const u=new URLSearchParams;return u.append("searchQuery",JSON.stringify(s)),u.append("storeOnly","true"),(await Si.post(`${Ei}/search/searchResults`,u)).data.searchId}async function YF(e,t,i){return(await Si.get(`${Ei}/search/searchResults/${e}/${t}/${i}`)).data}async function JF(e){return(await Si.get(`${Ei}/assetManager/deleteAsset/${e}`)).data}async function QF({username:e,password:t}){const i=new FormData;i.append("username",e),i.append("password",t);try{return(await Si.post(`${Ei}/loginManager/localLoginAsync`,i,{skipErrorNotifications:!0})).data}catch(r){if(r instanceof qd&&r.statusCode===401)return{status:"error",message:r.message};throw r}}async function e$(e){const t=new FormData;return t.append("fieldTitle",e.id),t.append("template",String(e.template)),(await Si.post(`${Ei}/search/getFieldInfo`,t)).data}async function t$(){return(await Si.get(`${Ei}/drawers/listDrawers/true`)).data}async function n$(e){return(await Si.get(`${Ei}/drawers/getDrawer/${e}`)).data}async function i$(e,t={}){const i=new FormData;return i.append("drawerTitle",e),(await Si.post(`${Ei}/drawers/addDrawer`,i,t)).data}async function r$(e,t={}){return(await Si.post(`${Ei}/drawers/delete/${e}/true`,void 0,t)).data}async function s$(e,t,i){const r=new FormData;return r.append("objectId",e),r.append("drawerList",String(t)),i&&(r.append("label",i.name),r.append("startTime",String(i.startTime)),r.append("endTime",String(i.endTime)),r.append("fileHandlerId",i.fileHandlerId)),(await Si.post(`${Ei}/drawers/addToDrawer/true`,r)).data}async function a$(e,t){const i=new FormData;return i.append("objectArray",JSON.stringify(e)),i.append("drawerList",String(t)),(await Si.post(`${Ei}/drawers/addToDrawer/true`,i)).data}async function LA({drawerId:e,excerptId:t}){return(await Si.post(`${Ei}/drawers/removeExcerpt/${e}/${t}/true`)).data}async function o$({assetId:e,drawerId:t,excerptId:i}){return i?LA({drawerId:t,excerptId:i}):(await Si.post(`${Ei}/drawers/removeFromDrawer/${t}/${e}/true`)).data}async function l$(e,t){return(await Si.post(`${Ei}/drawers/setSortOrder/${e}/${t}`)).data}async function c$(e,t){const i=new FormData;return i.append("orderArray",JSON.stringify(t)),(await Si.post(`${Ei}/drawers/setCustomOrder/${e}`,i)).data}async function u$(e){return(await Si.post(`${Ei}/drawers/downloadDrawer/${e}/true`)).data}async function d$(){return(await Si.post(`${Ei}/loginManager/logout`)).data}async function h$(e){return(await Si.get(`${Ei}/asset/viewExcerpt/${e}/true/true`)).data}function OA(){return{assets:new Map,templates:new Map,excerpts:new Map,moreLikeThisMatches:new Map,fileMetaData:new Map,fileDownloadResponses:new Map,paginatedSearchResults:new Map,collectionDescriptions:new Map,collectionSearchIds:new Map,staticPages:new Map,searchableFieldDetails:new Map,drawerDetails:new Map,listOfDrawers:null}}let ii=OA();function f$(){ii=OA()}async function p$(e){if(!e)return null;const t=ii.assets.get(e)||await DA(e);return ii.assets.set(e,t),t}async function m$(e){if(!e)return{asset:null,template:null};const t=ii.assets.get(e)||await DA(e);if(ii.assets.set(e,t),!t)return{asset:null,template:null};const i=String(t.templateId),r=ii.templates.get(i)||await BF(i);return ii.templates.set(i,r),{asset:t,template:r}}async function g$(e){const t=ii.collectionDescriptions.get(e)||await UF(e);return ii.collectionDescriptions.set(e,t),t}async function v$(e){if(!e)return[];const t=ii.moreLikeThisMatches.get(e)||await NF(e);return ii.moreLikeThisMatches.set(e,t),t}async function _$(e){if(!e)return null;const t=ii.fileMetaData.get(e)||await jF(e);return ii.fileMetaData.set(e,t),t}async function y$(e,t){if(!e)return null;const i=`${e}.${t}`,r=ii.fileDownloadResponses.get(i)||await VF(e,t);return ii.fileDownloadResponses.set(i,r),r}async function b$(){return(await HF()).data}async function x$(e){const t=ii.collectionSearchIds.get(e)||await GF(e);return ii.collectionSearchIds.set(e,t),t}async function w$(e,t=0,i=!1){const r=ii.paginatedSearchResults.get(e);if(r&&r[t])return r[t];const s=await YF(e,t,i);return ii.paginatedSearchResults.set(e,{...r||{},[t]:s}),s}async function S$(e){const t=ii.staticPages.get(e)||await qF(e);return ii.staticPages.set(e,t),t}async function b1(e){const t=`${e.id}-${e.template}`;if(ii.searchableFieldDetails.has(t))return ii.searchableFieldDetails.get(t)??null;const i=await e$(e);return ii.searchableFieldDetails.set(t,i),i}async function T$(e){const t=await b1(e);return(t==null?void 0:t.values)??[]}async function E$(e){const t=await b1(e);return(t==null?void 0:t.values)??{boolean_true:"checked",boolean_false:"unchecked"}}async function C$(e){const t=await b1(e);return(t==null?void 0:t.rawContent)??{}}async function I$({refresh:e=!1}={}){if(ii.listOfDrawers&&!e)return ii.listOfDrawers;const t=await t$();return ii.listOfDrawers=Object.entries(t).map(([i,r])=>({id:Number.parseInt(i),...r})).sort((i,r)=>i.title.localeCompare(r.title)),ii.listOfDrawers}async function A$(e){const t=ii.drawerDetails.get(e)??await n$(e);ii.drawerDetails.set(e,t);const{drawerId:i,drawerTitle:r,...s}=t;return{id:i,title:r,contents:s}}async function M$(e,t,i){const r=await s$(e,t,i);return ii.drawerDetails.delete(t),r}async function k$(e,t){const i=await a$(e,t);return ii.drawerDetails.delete(t),i}async function P$({excerptId:e,drawerId:t}){const i=await LA({drawerId:t,excerptId:e});return ii.drawerDetails.delete(t),i}async function D$({assetId:e,drawerId:t}){const i=await o$({drawerId:t,assetId:e});return ii.drawerDetails.delete(t),i}async function L$(e,t={}){const i=await i$(e,t);return ii.listOfDrawers=null,i}async function O$(e,t={}){const i=await r$(e,t);return ii.listOfDrawers=null,i}async function R$(e,t){const i=await l$(e,t);return ii.drawerDetails.delete(e),i}async function F$(e,t){const i=await c$(e,t);return ii.drawerDetails.delete(e),i}async function $$(e){const t=ii.excerpts.get(e)??await h$(e);return ii.excerpts.set(e,t),t}const Wn={getAsset:p$,getAssetWithTemplate:m$,getCollectionDescription:g$,getMoreLikeThis:v$,getFileMetaData:_$,getFileDownloadInfo:y$,getEmbedPluginInterstitial:b$,getExcerpt:$$,postLtiPayload:KF,fetchInstanceNav:ZF,getSearchId:XF,getSearchIdForCollection:x$,getSearchIdForClickToSearch:WF,getSearchResultsById:w$,getStaticPage:S$,deleteAsset:JF,loginAsGuest:QF,logout:d$,getSearchableSelectFieldValues:T$,getSearchableCheckboxFieldValues:E$,getSearchableMultiSelectFieldValues:C$,getDrawers:I$,getDrawer:A$,createDrawer:L$,deleteDrawer:O$,addAssetToDrawer:M$,addAssetListToDrawer:k$,removeAssetFromDrawer:D$,removeExcerptFromDrawer:P$,setDrawerSortBy:R$,setCustomDrawerOrder:F$,startDrawerDownload:u$,clearCache:f$};function z$(e){if(!e)return null;const{userId:t,userDisplayName:i,userCanCreateDrawers:r,userCanManageAssets:s,userIsAdmin:u,userIsSuperAdmin:d}=e;return t?{id:t,displayName:i??"Elevator User",isAdmin:u,isSuperAdmin:d,canManageAssets:s,canManageDrawers:r}:null}function B$(e){const{instanceName:t,instanceId:i,instanceHasLogo:r,contact:s,useCentralAuth:u,centralAuthLabel:d,featuredAssetId:l,featuredAssetText:m,userCanSearchAndBrowse:g,templates:x}=e,w=r?{src:`${ci.instance.base.origin}/assets/instanceAssets/${i}.png`,alt:`${t} logo`}:null,C=Object.entries(x).map(([I,M])=>({id:Number.parseInt(I),name:M})).filter(({name:I})=>typeof I=="string").sort((I,M)=>I.name.localeCompare(M.name));return{id:i,name:t??"Elevator",logoImg:w,useCentralAuth:u,centralAuthLabel:d,contact:s,featuredAssetId:l,featuredAssetText:m,userCanSearchAndBrowse:g,templates:C}}function RA(e,t=null){return{...e,parentId:t,previewImageId:e.previewImageId||null,children:e.children?e.children.map(i=>RA(i,e.id)):[]}}function N$(e,t=null){return e.map(i=>RA(i,t))}function FA(e){return e?e.reduce((t,i)=>({...t,[i.id]:i,...FA(i.children)}),{}):{}}function $A(e){return[...e.map(i=>EA(["children"],i)),...e.flatMap(i=>{const s=(i.children??[]).map(u=>({...u,title:`${i.title}  ${u.title}`}));return $A(s)})]}const U$=()=>({fetchStatus:Fe("idle"),currentUser:Fe(null),pages:Fe([]),collections:Fe([]),searchableFields:Fe([]),instance:Fe({id:null,name:"Elevator",logoImg:null,contact:null,useCentralAuth:!1,centralAuthLabel:"Central Auth",featuredAssetId:null,featuredAssetText:null,userCanSearchAndBrowse:!1,templates:[]}),customFooter:Fe(null)}),zA=e=>({isLoggedIn:Oe(()=>!!e.currentUser.value),isReady:Oe(()=>e.fetchStatus.value==="success"),collectionIndex:Oe(()=>FA(e.collections.value)),flatCollections:Oe(()=>$A(e.collections.value)),async getCollectionById(t){const r=zA(e).collectionIndex.value[t];if(!r)return null;try{const s=await Wn.getCollectionDescription(t);return{...r,description:s}}catch(s){return console.error(s),null}},getSearchableField(t){return e.searchableFields.value.find(i=>i.id===t)??null}}),BA=e=>({async refresh(){if(e.fetchStatus.value!=="fetching"){e.fetchStatus.value="fetching";try{const t=await Wn.fetchInstanceNav();e.currentUser.value=z$(t),e.pages.value=t.pages,e.instance.value=B$(t),e.collections.value=N$(t.collections),e.customFooter.value=t.customFooter,e.searchableFields.value=Object.entries(t.sortableFields).map(([i,r])=>({...r,id:i})),e.fetchStatus.value="success"}catch(t){console.error(t),e.fetchStatus.value="error"}}},async init(){if(!["fetching","success","error"].includes(e.fetchStatus.value))return BA(e).refresh()}}),Ai=Sh("instance",()=>{const e=U$(),t=zA(e),i=BA(e);return{...e,...t,...i}}),Bd=Sh("toastStore",{state:()=>({toasts:[]}),actions:{addToast(e){const t=crypto.randomUUID();this.toasts.push({...e,id:t,duration:e.duration??3e3})},dismissToast(e){const t=this.toasts.findIndex(i=>i.id===e);t!==-1&&this.toasts.splice(t,1)}}}),Po=Sh("asset2",{state:()=>({activeAssetId:null,activeObjectId:null,activeFileObjectId:null}),actions:{async setActiveAsset(e,t){const{asset:i}=await Wn.getAssetWithTemplate(e);return i?(this.activeAssetId=e,t?this.setActiveObject(t):(this.activeObjectId=(i==null?void 0:i.firstObjectId)??null,this.activeFileObjectId=(i==null?void 0:i.firstFileHandlerId)??null,i)):(this.activeAssetId=null,this.activeObjectId=null,this.activeFileObjectId=null,null)},async setActiveObject(e){const{asset:t}=await Wn.getAssetWithTemplate(e);return this.activeObjectId=t?e:null,this.activeFileObjectId=(t==null?void 0:t.firstFileHandlerId)??null,t},async getAsset(e){const{asset:t}=await Wn.getAssetWithTemplate(e);return t},async getAssetTitle(e){const t=await this.getAsset(e);return t?Tu(t):null}}}),j$=(e,t)=>e.length===t.length&&e.every((i,r)=>i===t[r]),Pa=Sh("drawer",{state:()=>({drawerRecords:{},isReady:!1}),getters:{drawers(e){return Object.values(e.drawerRecords)},getDrawerById(e){return t=>e.drawerRecords[t]}},actions:{async refresh(){const e=await Wn.getDrawers({refresh:!0});this.drawerRecords=e.reduce((t,i)=>(t[i.id]=i,t),{})},async init(){await this.refresh(),this.isReady=!0},async createDrawer(e){const t=await Wn.createDrawer(e),i={id:t.drawerId,title:t.drawerTitle};return this.drawerRecords[t.drawerId]=i,i},async deleteDrawer(e){try{delete this.drawerRecords[e],await Wn.deleteDrawer(e,{skipErrorNotifications:!0})}catch{console.log(`Failed to delete drawer: ${e}. Refreshing the drawer list.`),await this.refresh()}},async addAssetToDrawer(e,t,i){await Wn.addAssetToDrawer(e,t,i);const r=Po(),s=Bd(),u=this.drawerRecords[t].title,d=(i==null?void 0:i.name)??await r.getAssetTitle(e);s.addToast({message:`'${d??"Asset"}' added to drawer '${u}'.`,url:`/drawers/viewDrawer/${t}`,urlText:"View drawer"}),this.drawerRecords[t].contents=void 0},async addAssetListToDrawer(e,t){await Wn.addAssetListToDrawer(e,t);const i=Bd(),r=this.drawerRecords[t].title;i.addToast({message:`${e.length} assets added to drawer '${r}'.`,url:`/drawers/viewDrawer/${t}`,urlText:"View drawer"}),this.drawerRecords[t].contents=void 0},async refreshDrawer(e){const t=await Wn.getDrawer(e);return this.drawerRecords[e]=t,t},async setDrawerSortBy(e,t){return this.drawerRecords[e].contents=void 0,await Wn.setDrawerSortBy(e,t),this.refreshDrawer(e)},async downloadDrawer(e){return Wn.startDrawerDownload(e)},async setDrawerItems(e,t){const i=this.drawerRecords[e];if(!i.contents)throw new Error("Cannot set drawer items: drawer contents not found");const r=i.contents.matches.map(u=>u.objectId),s=t.map(u=>u.objectId);j$(r,s)||(i.contents.matches=t,Wn.setCustomDrawerOrder(e,s))},async removeExcerptFromDrawer({drawerId:e,excerptId:t}){const i=this.drawerRecords[e];if(!i.contents)throw new Error("Cannot remove excerpt from drawer: drawer contents not found");const r=i.contents.matches.findIndex(d=>d.excerptId===t),s=i.contents.matches[r];i.contents.matches.splice(r,1),await Wn.removeExcerptFromDrawer({drawerId:e,excerptId:t}),Bd().addToast({message:`Excerpt '${s.excerptLabel}' removed from drawer '${i.title}'.`,url:`/drawers/viewDrawer/${e}`,urlText:"View drawer"})},async removeAssetFromDrawer({assetId:e,drawerId:t}){const i=Po(),r=Bd(),s=this.drawerRecords[t].title,u=await i.getAssetTitle(e);if(!e)throw new Error("Cannot remove asset from drawer: no assetId provided");if(!t)throw new Error("Cannot remove asset from drawer: no drawerId provided");const d=this.drawerRecords[t];if(!d.contents)throw new Error("Cannot remove asset from drawer: drawer contents not found");d.contents.matches=d.contents.matches.filter(l=>l.objectId!==e),await Wn.removeAssetFromDrawer({assetId:e,drawerId:t}),r.addToast({message:`Removed '${u}' from drawer '${s}'.`})}}}),V$="modulepreload",H$=function(e){return"/assets/elevator-ui/dist/"+e},jT={},qa=function(t,i,r){if(!i||i.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(i.map(u=>{if(u=H$(u),u in jT)return;jT[u]=!0;const d=u.endsWith(".css"),l=d?'[rel="stylesheet"]':"";if(!!r)for(let x=s.length-1;x>=0;x--){const w=s[x];if(w.href===u&&(!d||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${l}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":V$,d||(g.as="script",g.crossOrigin=""),g.href=u,document.head.appendChild(g),d)return new Promise((x,w)=>{g.addEventListener("load",x),g.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})})).then(()=>t())},G$=(e,t)=>{const i=e[t];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((r,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+t)))})};function yc(e){return Kp()?(Xp(e),!0):!1}function ys(e){return typeof e=="function"?e():he(e)}const am=typeof window<"u",W$=e=>e!=null,ba=()=>{},q$=Z$();function Z$(){var e;return am&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent)}function x1(e,t){function i(...r){return new Promise((s,u)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(s).catch(u)})}return i}const NA=e=>e();function K$(e,t={}){let i,r,s=ba;const u=l=>{clearTimeout(l),s(),s=ba};return l=>{const m=ys(e),g=ys(t.maxWait);return i&&u(i),m<=0||g!==void 0&&g<=0?(r&&(u(r),r=null),Promise.resolve(l())):new Promise((x,w)=>{s=t.rejectOnCancel?w:x,g&&!r&&(r=setTimeout(()=>{i&&u(i),r=null,x(l())},g)),i=setTimeout(()=>{r&&u(r),r=null,x(l())},m)})}}function X$(e,t=!0,i=!0,r=!1){let s=0,u,d=!0,l=ba,m;const g=()=>{u&&(clearTimeout(u),u=void 0,l(),l=ba)};return w=>{const C=ys(e),I=Date.now()-s,M=()=>m=w();return g(),C<=0?(s=Date.now(),M()):(I>C&&(i||!d)?(s=Date.now(),M()):t&&(m=new Promise((L,$)=>{l=r?$:L,u=setTimeout(()=>{s=Date.now(),d=!0,L(M()),g()},Math.max(0,C-I))})),!i&&!u&&(u=setTimeout(()=>d=!0,C)),d=!1,m)}}function Y$(e=NA){const t=Fe(!0);function i(){t.value=!1}function r(){t.value=!0}const s=(...u)=>{t.value&&e(...u)};return{isActive:wu(t),pause:i,resume:r,eventFilter:s}}function J$(e){return Object.entries(e)}function UA(...e){if(e.length!==1)return Jd(...e);const t=e[0];return typeof t=="function"?wu(OC(()=>({get:t,set:ba}))):Fe(t)}function jA(e,t=200,i={}){return x1(K$(t,i),e)}function Q$(e,t=200,i=!1,r=!0,s=!1){return x1(X$(t,i,r,s),e)}function ez(e,t,i={}){const{immediate:r=!0}=i,s=Fe(!1);let u=null;function d(){u&&(clearTimeout(u),u=null)}function l(){s.value=!1,d()}function m(...g){d(),s.value=!0,u=setTimeout(()=>{s.value=!1,u=null,e(...g)},ys(t))}return r&&(s.value=!0,am&&m()),yc(l),{isPending:wu(s),start:m,stop:l}}var VT=Object.getOwnPropertySymbols,tz=Object.prototype.hasOwnProperty,nz=Object.prototype.propertyIsEnumerable,iz=(e,t)=>{var i={};for(var r in e)tz.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&VT)for(var r of VT(e))t.indexOf(r)<0&&nz.call(e,r)&&(i[r]=e[r]);return i};function rz(e,t,i={}){const r=i,{eventFilter:s=NA}=r,u=iz(r,["eventFilter"]);return fn(e,x1(s,t),u)}var sz=Object.defineProperty,az=Object.defineProperties,oz=Object.getOwnPropertyDescriptors,Ov=Object.getOwnPropertySymbols,VA=Object.prototype.hasOwnProperty,HA=Object.prototype.propertyIsEnumerable,HT=(e,t,i)=>t in e?sz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,lz=(e,t)=>{for(var i in t||(t={}))VA.call(t,i)&&HT(e,i,t[i]);if(Ov)for(var i of Ov(t))HA.call(t,i)&&HT(e,i,t[i]);return e},cz=(e,t)=>az(e,oz(t)),uz=(e,t)=>{var i={};for(var r in e)VA.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&Ov)for(var r of Ov(e))t.indexOf(r)<0&&HA.call(e,r)&&(i[r]=e[r]);return i};function dz(e,t,i={}){const r=i,{eventFilter:s}=r,u=uz(r,["eventFilter"]),{eventFilter:d,pause:l,resume:m,isActive:g}=Y$(s);return{stop:rz(e,t,cz(lz({},u),{eventFilter:d})),pause:l,resume:m,isActive:g}}function Fs(e){var t;const i=ys(e);return(t=i==null?void 0:i.$el)!=null?t:i}const Ia=am?window:void 0,GA=am?window.document:void 0,hz=am?window.navigator:void 0;function na(...e){let t,i,r,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([i,r,s]=e,t=Ia):[t,i,r,s]=e,!t)return ba;Array.isArray(i)||(i=[i]),Array.isArray(r)||(r=[r]);const u=[],d=()=>{u.forEach(x=>x()),u.length=0},l=(x,w,C,I)=>(x.addEventListener(w,C,I),()=>x.removeEventListener(w,C,I)),m=fn(()=>[Fs(t),ys(s)],([x,w])=>{d(),x&&u.push(...i.flatMap(C=>r.map(I=>l(x,C,I,w))))},{immediate:!0,flush:"post"}),g=()=>{m(),d()};return yc(g),g}let GT=!1;function fz(e,t,i={}){const{window:r=Ia,ignore:s=[],capture:u=!0,detectIframe:d=!1}=i;if(!r)return;q$&&!GT&&(GT=!0,Array.from(r.document.body.children).forEach(C=>C.addEventListener("click",ba)));let l=!0;const m=C=>s.some(I=>{if(typeof I=="string")return Array.from(r.document.querySelectorAll(I)).some(M=>M===C.target||C.composedPath().includes(M));{const M=Fs(I);return M&&(C.target===M||C.composedPath().includes(M))}}),x=[na(r,"click",C=>{const I=Fs(e);if(!(!I||I===C.target||C.composedPath().includes(I))){if(C.detail===0&&(l=!m(C)),!l){l=!0;return}t(C)}},{passive:!0,capture:u}),na(r,"pointerdown",C=>{const I=Fs(e);I&&(l=!C.composedPath().includes(I)&&!m(C))},{passive:!0}),d&&na(r,"blur",C=>{var I;const M=Fs(e);((I=r.document.activeElement)==null?void 0:I.tagName)==="IFRAME"&&!(M!=null&&M.contains(r.document.activeElement))&&t(C)})].filter(Boolean);return()=>x.forEach(C=>C())}function pz(){const e=Fe(!1);return Ro()&&Bn(()=>{e.value=!0}),e}function Eh(e){const t=pz();return Oe(()=>(t.value,!!e()))}function mz(e,t={}){const{immediate:i=!0,window:r=Ia}=t,s=Fe(!1);let u=0,d=null;function l(x){if(!s.value||!r)return;const w=x-u;e({delta:w,timestamp:x}),u=x,d=r.requestAnimationFrame(l)}function m(){!s.value&&r&&(s.value=!0,d=r.requestAnimationFrame(l))}function g(){s.value=!1,d!=null&&r&&(r.cancelAnimationFrame(d),d=null)}return i&&m(),yc(g),{isActive:wu(s),pause:g,resume:m}}function gz(e,t={}){const{window:i=Ia}=t,r=Eh(()=>i&&"matchMedia"in i&&typeof i.matchMedia=="function");let s;const u=Fe(!1),d=()=>{s&&("removeEventListener"in s?s.removeEventListener("change",l):s.removeListener(l))},l=()=>{r.value&&(d(),s=i.matchMedia(UA(e).value),u.value=!!(s!=null&&s.matches),s&&("addEventListener"in s?s.addEventListener("change",l):s.addListener(l)))};return Ar(l),yc(()=>d()),u}var vz=Object.defineProperty,WT=Object.getOwnPropertySymbols,_z=Object.prototype.hasOwnProperty,yz=Object.prototype.propertyIsEnumerable,qT=(e,t,i)=>t in e?vz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,bz=(e,t)=>{for(var i in t||(t={}))_z.call(t,i)&&qT(e,i,t[i]);if(WT)for(var i of WT(t))yz.call(t,i)&&qT(e,i,t[i]);return e};const ZT=["hash","host","hostname","href","pathname","port","protocol","search"];function WA({window:e=Ia}={}){const t=Object.fromEntries(ZT.map(s=>[s,Fe()]));for(const[s,u]of J$(t))fn(u,d=>{!(e!=null&&e.location)||e.location[s]===d||(e.location[s]=d)});const i=s=>{var u;const{state:d,length:l}=(e==null?void 0:e.history)||{},{origin:m}=(e==null?void 0:e.location)||{};for(const g of ZT)t[g].value=(u=e==null?void 0:e.location)==null?void 0:u[g];return Br(bz({trigger:s,state:d,length:l,origin:m},t))},r=Fe(i("load"));return e&&(na(e,"popstate",()=>r.value=i("popstate"),{passive:!0}),na(e,"hashchange",()=>r.value=i("hashchange"),{passive:!0})),r}function xz(e={}){const{navigator:t=hz,read:i=!1,source:r,copiedDuring:s=1500,legacy:u=!1}=e,d=["copy","cut"],l=Eh(()=>t&&"clipboard"in t),m=Oe(()=>l.value||u),g=Fe(""),x=Fe(!1),w=ez(()=>x.value=!1,s);function C(){l.value?t.clipboard.readText().then($=>{g.value=$}):g.value=L()}if(m.value&&i)for(const $ of d)na($,C);async function I($=ys(r)){m.value&&$!=null&&(l.value?await t.clipboard.writeText($):M($),g.value=$,x.value=!0,w.start())}function M($){const F=document.createElement("textarea");F.value=$??"",F.style.position="absolute",F.style.opacity="0",document.body.appendChild(F),F.select(),document.execCommand("copy"),F.remove()}function L(){var $,F,U;return(U=(F=($=document==null?void 0:document.getSelection)==null?void 0:$.call(document))==null?void 0:F.toString())!=null?U:""}return{isSupported:m,text:g,copied:x,copy:I}}const Fg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$g="__vueuse_ssr_handlers__",wz=Sz();function Sz(){return $g in Fg||(Fg[$g]=Fg[$g]||{}),Fg[$g]}function Tz(e,t){return wz[e]||t}function Ez(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}var Cz=Object.defineProperty,KT=Object.getOwnPropertySymbols,Iz=Object.prototype.hasOwnProperty,Az=Object.prototype.propertyIsEnumerable,XT=(e,t,i)=>t in e?Cz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,JT=(e,t)=>{for(var i in t||(t={}))Iz.call(t,i)&&XT(e,i,t[i]);if(KT)for(var i of KT(t))Az.call(t,i)&&XT(e,i,t[i]);return e};const Mz={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},QT="vueuse-storage";function qA(e,t,i,r={}){var s;const{flush:u="pre",deep:d=!0,listenToStorageChanges:l=!0,writeDefaults:m=!0,mergeDefaults:g=!1,shallow:x,window:w=Ia,eventFilter:C,onError:I=te=>{console.error(te)}}=r,M=(x?bh:Fe)(t);if(!i)try{i=Tz("getDefaultStorage",()=>{var te;return(te=Ia)==null?void 0:te.localStorage})()}catch(te){I(te)}if(!i)return M;const L=ys(t),$=Ez(L),F=(s=r.serializer)!=null?s:Mz[$],{pause:U,resume:ee}=dz(M,()=>V(M.value),{flush:u,deep:d,eventFilter:C});return w&&l&&(na(w,"storage",be),na(w,QT,ae)),be(),M;function V(te){try{if(te==null)i.removeItem(e);else{const G=F.write(te),j=i.getItem(e);j!==G&&(i.setItem(e,G),w&&w.dispatchEvent(new CustomEvent(QT,{detail:{key:e,oldValue:j,newValue:G,storageArea:i}})))}}catch(G){I(G)}}function Q(te){const G=te?te.newValue:i.getItem(e);if(G==null)return m&&L!==null&&i.setItem(e,F.write(L)),L;if(!te&&g){const j=F.read(G);return typeof g=="function"?g(j,L):$==="object"&&!Array.isArray(j)?JT(JT({},L),j):j}else return typeof G!="string"?G:F.read(G)}function ae(te){be(te.detail)}function be(te){if(!(te&&te.storageArea!==i)){if(te&&te.key==null){M.value=L;return}if(!(te&&te.key!==e)){U();try{M.value=Q(te)}catch(G){I(G)}finally{te?Ir(ee):ee()}}}}}var eE=Object.getOwnPropertySymbols,kz=Object.prototype.hasOwnProperty,Pz=Object.prototype.propertyIsEnumerable,Dz=(e,t)=>{var i={};for(var r in e)kz.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&eE)for(var r of eE(e))t.indexOf(r)<0&&Pz.call(e,r)&&(i[r]=e[r]);return i};function Lz(e,t,i={}){const r=i,{window:s=Ia}=r,u=Dz(r,["window"]);let d;const l=Eh(()=>s&&"MutationObserver"in s),m=()=>{d&&(d.disconnect(),d=void 0)},g=fn(()=>Fs(e),w=>{m(),l.value&&s&&w&&(d=new MutationObserver(t),d.observe(w,u))},{immediate:!0}),x=()=>{m(),g()};return yc(x),{isSupported:l,stop:x}}var tE=Object.getOwnPropertySymbols,Oz=Object.prototype.hasOwnProperty,Rz=Object.prototype.propertyIsEnumerable,Fz=(e,t)=>{var i={};for(var r in e)Oz.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&tE)for(var r of tE(e))t.indexOf(r)<0&&Rz.call(e,r)&&(i[r]=e[r]);return i};function k_(e,t,i={}){const r=i,{window:s=Ia}=r,u=Fz(r,["window"]);let d;const l=Eh(()=>s&&"ResizeObserver"in s),m=()=>{d&&(d.disconnect(),d=void 0)},g=Oe(()=>Array.isArray(e)?e.map(C=>Fs(C)):[Fs(e)]),x=fn(g,C=>{if(m(),l.value&&s){d=new ResizeObserver(t);for(const I of C)I&&d.observe(I,u)}},{immediate:!0,flush:"post",deep:!0}),w=()=>{m(),x()};return yc(w),{isSupported:l,stop:w}}function $z(e,t,i={}){const{root:r,rootMargin:s="0px",threshold:u=.1,window:d=Ia,immediate:l=!0}=i,m=Eh(()=>d&&"IntersectionObserver"in d),g=Oe(()=>{const M=ys(e);return(Array.isArray(M)?M:[M]).map(Fs).filter(W$)});let x=ba;const w=Fe(l),C=m.value?fn(()=>[g.value,Fs(r),w.value],([M,L])=>{if(x(),!w.value||!M.length)return;const $=new IntersectionObserver(t,{root:Fs(L),rootMargin:s,threshold:u});M.forEach(F=>F&&$.observe(F)),x=()=>{$.disconnect(),x=ba}},{immediate:l,flush:"post"}):ba,I=()=>{x(),C(),w.value=!1};return yc(I),{isSupported:m,isActive:w,pause(){x(),w.value=!1},resume(){w.value=!0},stop:I}}const nE=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function zz(e,t={}){const{document:i=GA,autoExit:r=!1}=t,s=Oe(()=>{var F;return(F=Fs(e))!=null?F:i==null?void 0:i.querySelector("html")}),u=Fe(!1),d=Oe(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(F=>i&&F in i||s.value&&F in s.value)),l=Oe(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(F=>i&&F in i||s.value&&F in s.value)),m=Oe(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(F=>i&&F in i||s.value&&F in s.value)),g=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(F=>i&&F in i),x=Eh(()=>s.value&&i&&d.value!==void 0&&l.value!==void 0&&m.value!==void 0),w=()=>g?(i==null?void 0:i[g])===s.value:!1,C=()=>{if(m.value){if(i&&i[m.value]!=null)return i[m.value];{const F=s.value;if((F==null?void 0:F[m.value])!=null)return!!F[m.value]}}return!1};async function I(){if(x.value){if(l.value)if((i==null?void 0:i[l.value])!=null)await i[l.value]();else{const F=s.value;(F==null?void 0:F[l.value])!=null&&await F[l.value]()}u.value=!1}}async function M(){if(!x.value)return;C()&&await I();const F=s.value;d.value&&(F==null?void 0:F[d.value])!=null&&(await F[d.value](),u.value=!0)}async function L(){await(u.value?I():M())}const $=()=>{const F=C();(!F||F&&w())&&(u.value=F)};return na(i,nE,$,!1),na(()=>Fs(s),nE,$,!1),r&&yc(I),{isSupported:x,isFullscreen:u,enter:M,exit:I,toggle:L}}const iE=1;function P_(e,t={}){const{throttle:i=0,idle:r=200,onStop:s=ba,onScroll:u=ba,offset:d={left:0,right:0,top:0,bottom:0},eventListenerOptions:l={capture:!1,passive:!0},behavior:m="auto"}=t,g=Fe(0),x=Fe(0),w=Oe({get(){return g.value},set(Q){I(Q,void 0)}}),C=Oe({get(){return x.value},set(Q){I(void 0,Q)}});function I(Q,ae){var be,te,G;const j=ys(e);j&&((G=j instanceof Document?document.body:j)==null||G.scrollTo({top:(be=ys(ae))!=null?be:C.value,left:(te=ys(Q))!=null?te:w.value,behavior:ys(m)}))}const M=Fe(!1),L=Br({left:!0,right:!1,top:!0,bottom:!1}),$=Br({left:!1,right:!1,top:!1,bottom:!1}),F=Q=>{M.value&&(M.value=!1,$.left=!1,$.right=!1,$.top=!1,$.bottom=!1,s(Q))},U=jA(F,i+r),ee=Q=>{const ae=Q===document?Q.documentElement:Q,{display:be,flexDirection:te}=getComputedStyle(ae),G=ae.scrollLeft;$.left=G<g.value,$.right=G>g.value;const j=Math.abs(G)<=0+(d.left||0),z=Math.abs(G)+ae.clientWidth>=ae.scrollWidth-(d.right||0)-iE;be==="flex"&&te==="row-reverse"?(L.left=z,L.right=j):(L.left=j,L.right=z),g.value=G;let ie=ae.scrollTop;Q===document&&!ie&&(ie=document.body.scrollTop),$.top=ie<x.value,$.bottom=ie>x.value;const X=Math.abs(ie)<=0+(d.top||0),ne=Math.abs(ie)+ae.clientHeight>=ae.scrollHeight-(d.bottom||0)-iE;be==="flex"&&te==="column-reverse"?(L.top=ne,L.bottom=X):(L.top=X,L.bottom=ne),x.value=ie},V=Q=>{const ae=Q.target===document?Q.target.documentElement:Q.target;ee(ae),M.value=!0,U(Q),u(Q)};return na(e,"scroll",i?Q$(V,i,!0,!1):V,l),na(e,"scrollend",F,l),{x:w,y:C,isScrolling:M,arrivedState:L,directions:$,measure(){const Q=ys(e);Q&&ee(Q)}}}function T0(e,t,i={}){const{window:r=Ia}=i;return qA(e,t,r==null?void 0:r.sessionStorage,i)}function Bz(e=null,t={}){var i,r;const{document:s=GA}=t,u=UA((i=e??(s==null?void 0:s.title))!=null?i:null),d=e&&typeof e=="function";function l(m){if(!("titleTemplate"in t))return m;const g=t.titleTemplate||"%s";return typeof g=="function"?g(m):ys(g).replace(/%s/g,m)}return fn(u,(m,g)=>{m!==g&&s&&(s.title=l(typeof m=="string"?m:""))},{immediate:!0}),t.observe&&!t.titleTemplate&&s&&!d&&Lz((r=s.head)==null?void 0:r.querySelector("title"),()=>{s&&s.title!==u.value&&(u.value=l(s.title))},{childList:!0}),u}function Nz({window:e=Ia}={}){if(!e)return{x:Fe(0),y:Fe(0)};const t=Fe(e.scrollX),i=Fe(e.scrollY);return na(e,"scroll",()=>{t.value=e.scrollX,i.value=e.scrollY},{capture:!1,passive:!0}),{x:t,y:i}}function ZA(){const{availableThemes:e,defaultTheme:t}=ci.instance.theming,{url:i}=ci.instance.base,r=ci.instance.theming.enabled,s=qA(`theme-${i}`,t);return fn(s,async()=>{e.includes(s.value)||(s.value=t),document.documentElement.setAttribute("data-theme",s.value),s.value!=="light"&&G$(Object.assign({"../css/themes/dark.css":()=>qa(()=>Promise.resolve({}),["assets/dark-5d0f38c8.css"]),"../css/themes/default.css":()=>qa(()=>Promise.resolve({}),["assets/default-a3e57f3c.css"]),"../css/themes/folwell.css":()=>qa(()=>Promise.resolve({}),["assets/folwell-3ae01df2.css"]),"../css/themes/hotdog.css":()=>qa(()=>Promise.resolve({}),["assets/hotdog-45a905bf.css"])}),`../css/themes/${s.value}.css`).catch(u=>{console.error(`Failed to load theme css for ${s.value}. falling back to light theme.`,u)})},{immediate:!0}),{activeTheme:s,availableThemes:e,isEnabled:r,setTheme(u){s.value=u}}}/*!
  * vue-router v4.1.5
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Rd=typeof window<"u";function Uz(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const ki=Object.assign;function E0(e,t){const i={};for(const r in t){const s=t[r];i[r]=Ja(s)?s.map(e):e(s)}return i}const hp=()=>{},Ja=Array.isArray,jz=/\/$/,Vz=e=>e.replace(jz,"");function C0(e,t,i="/"){let r,s={},u="",d="";const l=t.indexOf("#");let m=t.indexOf("?");return l<m&&l>=0&&(m=-1),m>-1&&(r=t.slice(0,m),u=t.slice(m+1,l>-1?l:t.length),s=e(u)),l>-1&&(r=r||t.slice(0,l),d=t.slice(l,t.length)),r=qz(r??t,i),{fullPath:r+(u&&"?")+u+d,path:r,query:s,hash:d}}function Hz(e,t){const i=t.query?e(t.query):"";return t.path+(i&&"?")+i+(t.hash||"")}function rE(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Gz(e,t,i){const r=t.matched.length-1,s=i.matched.length-1;return r>-1&&r===s&&ah(t.matched[r],i.matched[s])&&KA(t.params,i.params)&&e(t.query)===e(i.query)&&t.hash===i.hash}function ah(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function KA(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!Wz(e[i],t[i]))return!1;return!0}function Wz(e,t){return Ja(e)?sE(e,t):Ja(t)?sE(t,e):e===t}function sE(e,t){return Ja(t)?e.length===t.length&&e.every((i,r)=>i===t[r]):e.length===1&&e[0]===t}function qz(e,t){if(e.startsWith("/"))return e;if(!e)return t;const i=t.split("/"),r=e.split("/");let s=i.length-1,u,d;for(u=0;u<r.length;u++)if(d=r[u],d!==".")if(d==="..")s>1&&s--;else break;return i.slice(0,s).join("/")+"/"+r.slice(u-(u===r.length?1:0)).join("/")}var Rp;(function(e){e.pop="pop",e.push="push"})(Rp||(Rp={}));var fp;(function(e){e.back="back",e.forward="forward",e.unknown=""})(fp||(fp={}));function Zz(e){if(!e)if(Rd){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Vz(e)}const Kz=/^[^#]+#/;function Xz(e,t){return e.replace(Kz,"#")+t}function Yz(e,t){const i=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-i.left-(t.left||0),top:r.top-i.top-(t.top||0)}}const D_=()=>({left:window.pageXOffset,top:window.pageYOffset});function Jz(e){let t;if("el"in e){const i=e.el,r=typeof i=="string"&&i.startsWith("#"),s=typeof i=="string"?r?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!s)return;t=Yz(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function aE(e,t){return(history.state?history.state.position-t:-1)+e}const Vb=new Map;function Qz(e,t){Vb.set(e,t)}function eB(e){const t=Vb.get(e);return Vb.delete(e),t}let tB=()=>location.protocol+"//"+location.host;function XA(e,t){const{pathname:i,search:r,hash:s}=t,u=e.indexOf("#");if(u>-1){let l=s.includes(e.slice(u))?e.slice(u).length:1,m=s.slice(l);return m[0]!=="/"&&(m="/"+m),rE(m,"")}return rE(i,e)+r+s}function nB(e,t,i,r){let s=[],u=[],d=null;const l=({state:C})=>{const I=XA(e,location),M=i.value,L=t.value;let $=0;if(C){if(i.value=I,t.value=C,d&&d===M){d=null;return}$=L?C.position-L.position:0}else r(I);s.forEach(F=>{F(i.value,M,{delta:$,type:Rp.pop,direction:$?$>0?fp.forward:fp.back:fp.unknown})})};function m(){d=i.value}function g(C){s.push(C);const I=()=>{const M=s.indexOf(C);M>-1&&s.splice(M,1)};return u.push(I),I}function x(){const{history:C}=window;C.state&&C.replaceState(ki({},C.state,{scroll:D_()}),"")}function w(){for(const C of u)C();u=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",x)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",x),{pauseListeners:m,listen:g,destroy:w}}function oE(e,t,i,r=!1,s=!1){return{back:e,current:t,forward:i,replaced:r,position:window.history.length,scroll:s?D_():null}}function iB(e){const{history:t,location:i}=window,r={value:XA(e,i)},s={value:t.state};s.value||u(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function u(m,g,x){const w=e.indexOf("#"),C=w>-1?(i.host&&document.querySelector("base")?e:e.slice(w))+m:tB()+e+m;try{t[x?"replaceState":"pushState"](g,"",C),s.value=g}catch(I){console.error(I),i[x?"replace":"assign"](C)}}function d(m,g){const x=ki({},t.state,oE(s.value.back,m,s.value.forward,!0),g,{position:s.value.position});u(m,x,!0),r.value=m}function l(m,g){const x=ki({},s.value,t.state,{forward:m,scroll:D_()});u(x.current,x,!0);const w=ki({},oE(r.value,m,null),{position:x.position+1},g);u(m,w,!1),r.value=m}return{location:r,state:s,push:l,replace:d}}function rB(e){e=Zz(e);const t=iB(e),i=nB(e,t.state,t.location,t.replace);function r(u,d=!0){d||i.pauseListeners(),history.go(u)}const s=ki({location:"",base:e,go:r,createHref:Xz.bind(null,e)},t,i);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function sB(e){return typeof e=="string"||e&&typeof e=="object"}function YA(e){return typeof e=="string"||typeof e=="symbol"}const Bl={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},JA=Symbol("");var lE;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(lE||(lE={}));function oh(e,t){return ki(new Error,{type:e,[JA]:!0},t)}function Jo(e,t){return e instanceof Error&&JA in e&&(t==null||!!(e.type&t))}const cE="[^/]+?",aB={sensitive:!1,strict:!1,start:!0,end:!0},oB=/[.+*?^${}()[\]/\\]/g;function lB(e,t){const i=ki({},aB,t),r=[];let s=i.start?"^":"";const u=[];for(const g of e){const x=g.length?[]:[90];i.strict&&!g.length&&(s+="/");for(let w=0;w<g.length;w++){const C=g[w];let I=40+(i.sensitive?.25:0);if(C.type===0)w||(s+="/"),s+=C.value.replace(oB,"\\$&"),I+=40;else if(C.type===1){const{value:M,repeatable:L,optional:$,regexp:F}=C;u.push({name:M,repeatable:L,optional:$});const U=F||cE;if(U!==cE){I+=10;try{new RegExp(`(${U})`)}catch(V){throw new Error(`Invalid custom RegExp for param "${M}" (${U}): `+V.message)}}let ee=L?`((?:${U})(?:/(?:${U}))*)`:`(${U})`;w||(ee=$&&g.length<2?`(?:/${ee})`:"/"+ee),$&&(ee+="?"),s+=ee,I+=20,$&&(I+=-8),L&&(I+=-20),U===".*"&&(I+=-50)}x.push(I)}r.push(x)}if(i.strict&&i.end){const g=r.length-1;r[g][r[g].length-1]+=.7000000000000001}i.strict||(s+="/?"),i.end?s+="$":i.strict&&(s+="(?:/|$)");const d=new RegExp(s,i.sensitive?"":"i");function l(g){const x=g.match(d),w={};if(!x)return null;for(let C=1;C<x.length;C++){const I=x[C]||"",M=u[C-1];w[M.name]=I&&M.repeatable?I.split("/"):I}return w}function m(g){let x="",w=!1;for(const C of e){(!w||!x.endsWith("/"))&&(x+="/"),w=!1;for(const I of C)if(I.type===0)x+=I.value;else if(I.type===1){const{value:M,repeatable:L,optional:$}=I,F=M in g?g[M]:"";if(Ja(F)&&!L)throw new Error(`Provided param "${M}" is an array but it is not repeatable (* or + modifiers)`);const U=Ja(F)?F.join("/"):F;if(!U)if($)C.length<2&&(x.endsWith("/")?x=x.slice(0,-1):w=!0);else throw new Error(`Missing required param "${M}"`);x+=U}}return x||"/"}return{re:d,score:r,keys:u,parse:l,stringify:m}}function cB(e,t){let i=0;for(;i<e.length&&i<t.length;){const r=t[i]-e[i];if(r)return r;i++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function uB(e,t){let i=0;const r=e.score,s=t.score;for(;i<r.length&&i<s.length;){const u=cB(r[i],s[i]);if(u)return u;i++}if(Math.abs(s.length-r.length)===1){if(uE(r))return 1;if(uE(s))return-1}return s.length-r.length}function uE(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const dB={type:0,value:""},hB=/[a-zA-Z0-9_]/;function fB(e){if(!e)return[[]];if(e==="/")return[[dB]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(I){throw new Error(`ERR (${i})/"${g}": ${I}`)}let i=0,r=i;const s=[];let u;function d(){u&&s.push(u),u=[]}let l=0,m,g="",x="";function w(){g&&(i===0?u.push({type:0,value:g}):i===1||i===2||i===3?(u.length>1&&(m==="*"||m==="+")&&t(`A repeatable param (${g}) must be alone in its segment. eg: '/:ids+.`),u.push({type:1,value:g,regexp:x,repeatable:m==="*"||m==="+",optional:m==="*"||m==="?"})):t("Invalid state to consume buffer"),g="")}function C(){g+=m}for(;l<e.length;){if(m=e[l++],m==="\\"&&i!==2){r=i,i=4;continue}switch(i){case 0:m==="/"?(g&&w(),d()):m===":"?(w(),i=1):C();break;case 4:C(),i=r;break;case 1:m==="("?i=2:hB.test(m)?C():(w(),i=0,m!=="*"&&m!=="?"&&m!=="+"&&l--);break;case 2:m===")"?x[x.length-1]=="\\"?x=x.slice(0,-1)+m:i=3:x+=m;break;case 3:w(),i=0,m!=="*"&&m!=="?"&&m!=="+"&&l--,x="";break;default:t("Unknown state");break}}return i===2&&t(`Unfinished custom RegExp for param "${g}"`),w(),d(),s}function pB(e,t,i){const r=lB(fB(e.path),i),s=ki(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function mB(e,t){const i=[],r=new Map;t=fE({strict:!1,end:!0,sensitive:!1},t);function s(x){return r.get(x)}function u(x,w,C){const I=!C,M=gB(x);M.aliasOf=C&&C.record;const L=fE(t,x),$=[M];if("alias"in x){const ee=typeof x.alias=="string"?[x.alias]:x.alias;for(const V of ee)$.push(ki({},M,{components:C?C.record.components:M.components,path:V,aliasOf:C?C.record:M}))}let F,U;for(const ee of $){const{path:V}=ee;if(w&&V[0]!=="/"){const Q=w.record.path,ae=Q[Q.length-1]==="/"?"":"/";ee.path=w.record.path+(V&&ae+V)}if(F=pB(ee,w,L),C?C.alias.push(F):(U=U||F,U!==F&&U.alias.push(F),I&&x.name&&!hE(F)&&d(x.name)),M.children){const Q=M.children;for(let ae=0;ae<Q.length;ae++)u(Q[ae],F,C&&C.children[ae])}C=C||F,m(F)}return U?()=>{d(U)}:hp}function d(x){if(YA(x)){const w=r.get(x);w&&(r.delete(x),i.splice(i.indexOf(w),1),w.children.forEach(d),w.alias.forEach(d))}else{const w=i.indexOf(x);w>-1&&(i.splice(w,1),x.record.name&&r.delete(x.record.name),x.children.forEach(d),x.alias.forEach(d))}}function l(){return i}function m(x){let w=0;for(;w<i.length&&uB(x,i[w])>=0&&(x.record.path!==i[w].record.path||!QA(x,i[w]));)w++;i.splice(w,0,x),x.record.name&&!hE(x)&&r.set(x.record.name,x)}function g(x,w){let C,I={},M,L;if("name"in x&&x.name){if(C=r.get(x.name),!C)throw oh(1,{location:x});L=C.record.name,I=ki(dE(w.params,C.keys.filter(U=>!U.optional).map(U=>U.name)),x.params&&dE(x.params,C.keys.map(U=>U.name))),M=C.stringify(I)}else if("path"in x)M=x.path,C=i.find(U=>U.re.test(M)),C&&(I=C.parse(M),L=C.record.name);else{if(C=w.name?r.get(w.name):i.find(U=>U.re.test(w.path)),!C)throw oh(1,{location:x,currentLocation:w});L=C.record.name,I=ki({},w.params,x.params),M=C.stringify(I)}const $=[];let F=C;for(;F;)$.unshift(F.record),F=F.parent;return{name:L,path:M,params:I,matched:$,meta:_B($)}}return e.forEach(x=>u(x)),{addRoute:u,resolve:g,removeRoute:d,getRoutes:l,getRecordMatcher:s}}function dE(e,t){const i={};for(const r of t)r in e&&(i[r]=e[r]);return i}function gB(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:vB(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function vB(e){const t={},i=e.props||!1;if("component"in e)t.default=i;else for(const r in e.components)t[r]=typeof i=="boolean"?i:i[r];return t}function hE(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function _B(e){return e.reduce((t,i)=>ki(t,i.meta),{})}function fE(e,t){const i={};for(const r in e)i[r]=r in t?t[r]:e[r];return i}function QA(e,t){return t.children.some(i=>i===e||QA(e,i))}const eM=/#/g,yB=/&/g,bB=/\//g,xB=/=/g,wB=/\?/g,tM=/\+/g,SB=/%5B/g,TB=/%5D/g,nM=/%5E/g,EB=/%60/g,iM=/%7B/g,CB=/%7C/g,rM=/%7D/g,IB=/%20/g;function w1(e){return encodeURI(""+e).replace(CB,"|").replace(SB,"[").replace(TB,"]")}function AB(e){return w1(e).replace(iM,"{").replace(rM,"}").replace(nM,"^")}function Hb(e){return w1(e).replace(tM,"%2B").replace(IB,"+").replace(eM,"%23").replace(yB,"%26").replace(EB,"`").replace(iM,"{").replace(rM,"}").replace(nM,"^")}function MB(e){return Hb(e).replace(xB,"%3D")}function kB(e){return w1(e).replace(eM,"%23").replace(wB,"%3F")}function PB(e){return e==null?"":kB(e).replace(bB,"%2F")}function Rv(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function DB(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const u=r[s].replace(tM," "),d=u.indexOf("="),l=Rv(d<0?u:u.slice(0,d)),m=d<0?null:Rv(u.slice(d+1));if(l in t){let g=t[l];Ja(g)||(g=t[l]=[g]),g.push(m)}else t[l]=m}return t}function pE(e){let t="";for(let i in e){const r=e[i];if(i=MB(i),r==null){r!==void 0&&(t+=(t.length?"&":"")+i);continue}(Ja(r)?r.map(u=>u&&Hb(u)):[r&&Hb(r)]).forEach(u=>{u!==void 0&&(t+=(t.length?"&":"")+i,u!=null&&(t+="="+u))})}return t}function LB(e){const t={};for(const i in e){const r=e[i];r!==void 0&&(t[i]=Ja(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const S1=Symbol(""),mE=Symbol(""),L_=Symbol(""),T1=Symbol(""),Gb=Symbol("");function Rf(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function i(){e=[]}return{add:t,list:()=>e,reset:i}}function sM(e,t,i){const r=()=>{e[t].delete(i)};Wi(r),Kx(r),Zx(()=>{e[t].add(i)}),e[t].add(i)}function OB(e){const t=wi(S1,{}).value;t&&sM(t,"leaveGuards",e)}function RB(e){const t=wi(S1,{}).value;t&&sM(t,"updateGuards",e)}function Hl(e,t,i,r,s){const u=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((d,l)=>{const m=w=>{w===!1?l(oh(4,{from:i,to:t})):w instanceof Error?l(w):sB(w)?l(oh(2,{from:t,to:w})):(u&&r.enterCallbacks[s]===u&&typeof w=="function"&&u.push(w),d())},g=e.call(r&&r.instances[s],t,i,m);let x=Promise.resolve(g);e.length<3&&(x=x.then(m)),x.catch(w=>l(w))})}function I0(e,t,i,r){const s=[];for(const u of e)for(const d in u.components){let l=u.components[d];if(!(t!=="beforeRouteEnter"&&!u.instances[d]))if(FB(l)){const g=(l.__vccOpts||l)[t];g&&s.push(Hl(g,i,r,u,d))}else{let m=l();s.push(()=>m.then(g=>{if(!g)return Promise.reject(new Error(`Couldn't resolve component "${d}" at "${u.path}"`));const x=Uz(g)?g.default:g;u.components[d]=x;const C=(x.__vccOpts||x)[t];return C&&Hl(C,i,r,u,d)()}))}}return s}function FB(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function gE(e){const t=wi(L_),i=wi(T1),r=Oe(()=>t.resolve(he(e.to))),s=Oe(()=>{const{matched:m}=r.value,{length:g}=m,x=m[g-1],w=i.matched;if(!x||!w.length)return-1;const C=w.findIndex(ah.bind(null,x));if(C>-1)return C;const I=vE(m[g-2]);return g>1&&vE(x)===I&&w[w.length-1].path!==I?w.findIndex(ah.bind(null,m[g-2])):C}),u=Oe(()=>s.value>-1&&BB(i.params,r.value.params)),d=Oe(()=>s.value>-1&&s.value===i.matched.length-1&&KA(i.params,r.value.params));function l(m={}){return zB(m)?t[he(e.replace)?"replace":"push"](he(e.to)).catch(hp):Promise.resolve()}return{route:r,href:Oe(()=>r.value.href),isActive:u,isExactActive:d,navigate:l}}const $B=lt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:gE,setup(e,{slots:t}){const i=Br(gE(e)),{options:r}=wi(L_),s=Oe(()=>({[_E(e.activeClass,r.linkActiveClass,"router-link-active")]:i.isActive,[_E(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const u=t.default&&t.default(i);return e.custom?u:ni("a",{"aria-current":i.isExactActive?e.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:s.value},u)}}}),rc=$B;function zB(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function BB(e,t){for(const i in t){const r=t[i],s=e[i];if(typeof r=="string"){if(r!==s)return!1}else if(!Ja(s)||s.length!==r.length||r.some((u,d)=>u!==s[d]))return!1}return!0}function vE(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const _E=(e,t,i)=>e??t??i,NB=lt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:i}){const r=wi(Gb),s=Oe(()=>e.route||r.value),u=wi(mE,0),d=Oe(()=>{let g=he(u);const{matched:x}=s.value;let w;for(;(w=x[g])&&!w.components;)g++;return g}),l=Oe(()=>s.value.matched[d.value]);Oi(mE,Oe(()=>d.value+1)),Oi(S1,l),Oi(Gb,s);const m=Fe();return fn(()=>[m.value,l.value,e.name],([g,x,w],[C,I,M])=>{x&&(x.instances[w]=g,I&&I!==x&&g&&g===C&&(x.leaveGuards.size||(x.leaveGuards=I.leaveGuards),x.updateGuards.size||(x.updateGuards=I.updateGuards))),g&&x&&(!I||!ah(x,I)||!C)&&(x.enterCallbacks[w]||[]).forEach(L=>L(g))},{flush:"post"}),()=>{const g=s.value,x=e.name,w=l.value,C=w&&w.components[x];if(!C)return yE(i.default,{Component:C,route:g});const I=w.props[x],M=I?I===!0?g.params:typeof I=="function"?I(g):I:null,$=ni(C,ki({},M,t,{onVnodeUnmounted:F=>{F.component.isUnmounted&&(w.instances[x]=null)},ref:m}));return yE(i.default,{Component:$,route:g})||$}}});function yE(e,t){if(!e)return null;const i=e(t);return i.length===1?i[0]:i}const UB=NB;function jB(e){const t=mB(e.routes,e),i=e.parseQuery||DB,r=e.stringifyQuery||pE,s=e.history,u=Rf(),d=Rf(),l=Rf(),m=bh(Bl);let g=Bl;Rd&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const x=E0.bind(null,Be=>""+Be),w=E0.bind(null,PB),C=E0.bind(null,Rv);function I(Be,Ke){let ut,Ot;return YA(Be)?(ut=t.getRecordMatcher(Be),Ot=Ke):Ot=Be,t.addRoute(Ot,ut)}function M(Be){const Ke=t.getRecordMatcher(Be);Ke&&t.removeRoute(Ke)}function L(){return t.getRoutes().map(Be=>Be.record)}function $(Be){return!!t.getRecordMatcher(Be)}function F(Be,Ke){if(Ke=ki({},Ke||m.value),typeof Be=="string"){const _e=C0(i,Be,Ke.path),ke=t.resolve({path:_e.path},Ke),ge=s.createHref(_e.fullPath);return ki(_e,ke,{params:C(ke.params),hash:Rv(_e.hash),redirectedFrom:void 0,href:ge})}let ut;if("path"in Be)ut=ki({},Be,{path:C0(i,Be.path,Ke.path).path});else{const _e=ki({},Be.params);for(const ke in _e)_e[ke]==null&&delete _e[ke];ut=ki({},Be,{params:w(Be.params)}),Ke.params=w(Ke.params)}const Ot=t.resolve(ut,Ke),Vt=Be.hash||"";Ot.params=x(C(Ot.params));const _n=Hz(r,ki({},Be,{hash:AB(Vt),path:Ot.path})),qt=s.createHref(_n);return ki({fullPath:_n,hash:Vt,query:r===pE?LB(Be.query):Be.query||{}},Ot,{redirectedFrom:void 0,href:qt})}function U(Be){return typeof Be=="string"?C0(i,Be,m.value.path):ki({},Be)}function ee(Be,Ke){if(g!==Be)return oh(8,{from:Ke,to:Be})}function V(Be){return be(Be)}function Q(Be){return V(ki(U(Be),{replace:!0}))}function ae(Be){const Ke=Be.matched[Be.matched.length-1];if(Ke&&Ke.redirect){const{redirect:ut}=Ke;let Ot=typeof ut=="function"?ut(Be):ut;return typeof Ot=="string"&&(Ot=Ot.includes("?")||Ot.includes("#")?Ot=U(Ot):{path:Ot},Ot.params={}),ki({query:Be.query,hash:Be.hash,params:"path"in Ot?{}:Be.params},Ot)}}function be(Be,Ke){const ut=g=F(Be),Ot=m.value,Vt=Be.state,_n=Be.force,qt=Be.replace===!0,_e=ae(ut);if(_e)return be(ki(U(_e),{state:typeof _e=="object"?ki({},Vt,_e.state):Vt,force:_n,replace:qt}),Ke||ut);const ke=ut;ke.redirectedFrom=Ke;let ge;return!_n&&Gz(r,Ot,ut)&&(ge=oh(16,{to:ke,from:Ot}),$t(Ot,Ot,!0,!1)),(ge?Promise.resolve(ge):G(ke,Ot)).catch(ft=>Jo(ft)?Jo(ft,2)?ft:it(ft):Xe(ft,ke,Ot)).then(ft=>{if(ft){if(Jo(ft,2))return be(ki({replace:qt},U(ft.to),{state:typeof ft.to=="object"?ki({},Vt,ft.to.state):Vt,force:_n}),Ke||ke)}else ft=z(ke,Ot,!0,qt,Vt);return j(ke,Ot,ft),ft})}function te(Be,Ke){const ut=ee(Be,Ke);return ut?Promise.reject(ut):Promise.resolve()}function G(Be,Ke){let ut;const[Ot,Vt,_n]=VB(Be,Ke);ut=I0(Ot.reverse(),"beforeRouteLeave",Be,Ke);for(const _e of Ot)_e.leaveGuards.forEach(ke=>{ut.push(Hl(ke,Be,Ke))});const qt=te.bind(null,Be,Ke);return ut.push(qt),Ed(ut).then(()=>{ut=[];for(const _e of u.list())ut.push(Hl(_e,Be,Ke));return ut.push(qt),Ed(ut)}).then(()=>{ut=I0(Vt,"beforeRouteUpdate",Be,Ke);for(const _e of Vt)_e.updateGuards.forEach(ke=>{ut.push(Hl(ke,Be,Ke))});return ut.push(qt),Ed(ut)}).then(()=>{ut=[];for(const _e of Be.matched)if(_e.beforeEnter&&!Ke.matched.includes(_e))if(Ja(_e.beforeEnter))for(const ke of _e.beforeEnter)ut.push(Hl(ke,Be,Ke));else ut.push(Hl(_e.beforeEnter,Be,Ke));return ut.push(qt),Ed(ut)}).then(()=>(Be.matched.forEach(_e=>_e.enterCallbacks={}),ut=I0(_n,"beforeRouteEnter",Be,Ke),ut.push(qt),Ed(ut))).then(()=>{ut=[];for(const _e of d.list())ut.push(Hl(_e,Be,Ke));return ut.push(qt),Ed(ut)}).catch(_e=>Jo(_e,8)?_e:Promise.reject(_e))}function j(Be,Ke,ut){for(const Ot of l.list())Ot(Be,Ke,ut)}function z(Be,Ke,ut,Ot,Vt){const _n=ee(Be,Ke);if(_n)return _n;const qt=Ke===Bl,_e=Rd?history.state:{};ut&&(Ot||qt?s.replace(Be.fullPath,ki({scroll:qt&&_e&&_e.scroll},Vt)):s.push(Be.fullPath,Vt)),m.value=Be,$t(Be,Ke,ut,qt),it()}let ie;function X(){ie||(ie=s.listen((Be,Ke,ut)=>{if(!dt.listening)return;const Ot=F(Be),Vt=ae(Ot);if(Vt){be(ki(Vt,{replace:!0}),Ot).catch(hp);return}g=Ot;const _n=m.value;Rd&&Qz(aE(_n.fullPath,ut.delta),D_()),G(Ot,_n).catch(qt=>Jo(qt,12)?qt:Jo(qt,2)?(be(qt.to,Ot).then(_e=>{Jo(_e,20)&&!ut.delta&&ut.type===Rp.pop&&s.go(-1,!1)}).catch(hp),Promise.reject()):(ut.delta&&s.go(-ut.delta,!1),Xe(qt,Ot,_n))).then(qt=>{qt=qt||z(Ot,_n,!1),qt&&(ut.delta&&!Jo(qt,8)?s.go(-ut.delta,!1):ut.type===Rp.pop&&Jo(qt,20)&&s.go(-1,!1)),j(Ot,_n,qt)}).catch(hp)}))}let ne=Rf(),Ee=Rf(),Ce;function Xe(Be,Ke,ut){it(Be);const Ot=Ee.list();return Ot.length?Ot.forEach(Vt=>Vt(Be,Ke,ut)):console.error(Be),Promise.reject(Be)}function at(){return Ce&&m.value!==Bl?Promise.resolve():new Promise((Be,Ke)=>{ne.add([Be,Ke])})}function it(Be){return Ce||(Ce=!Be,X(),ne.list().forEach(([Ke,ut])=>Be?ut(Be):Ke()),ne.reset()),Be}function $t(Be,Ke,ut,Ot){const{scrollBehavior:Vt}=e;if(!Rd||!Vt)return Promise.resolve();const _n=!ut&&eB(aE(Be.fullPath,0))||(Ot||!ut)&&history.state&&history.state.scroll||null;return Ir().then(()=>Vt(Be,Ke,_n)).then(qt=>qt&&Jz(qt)).catch(qt=>Xe(qt,Be,Ke))}const Ct=Be=>s.go(Be);let tt;const et=new Set,dt={currentRoute:m,listening:!0,addRoute:I,removeRoute:M,hasRoute:$,getRoutes:L,resolve:F,options:e,push:V,replace:Q,go:Ct,back:()=>Ct(-1),forward:()=>Ct(1),beforeEach:u.add,beforeResolve:d.add,afterEach:l.add,onError:Ee.add,isReady:at,install(Be){const Ke=this;Be.component("RouterLink",rc),Be.component("RouterView",UB),Be.config.globalProperties.$router=Ke,Object.defineProperty(Be.config.globalProperties,"$route",{enumerable:!0,get:()=>he(m)}),Rd&&!tt&&m.value===Bl&&(tt=!0,V(s.location).catch(Vt=>{}));const ut={};for(const Vt in Bl)ut[Vt]=Oe(()=>m.value[Vt]);Be.provide(L_,Ke),Be.provide(T1,Br(ut)),Be.provide(Gb,m);const Ot=Be.unmount;et.add(Be),Be.unmount=function(){et.delete(Be),et.size<1&&(g=Bl,ie&&ie(),ie=null,m.value=Bl,tt=!1,Ce=!1),Ot()}}};return dt}function Ed(e){return e.reduce((t,i)=>t.then(()=>i()),Promise.resolve())}function VB(e,t){const i=[],r=[],s=[],u=Math.max(t.matched.length,e.matched.length);for(let d=0;d<u;d++){const l=t.matched[d];l&&(e.matched.find(g=>ah(g,l))?r.push(l):i.push(l));const m=e.matched[d];m&&(t.matched.find(g=>ah(g,m))||s.push(m))}return[i,r,s]}function $o(){return wi(L_)}function Eu(){return wi(T1)}const HB=lt({__name:"Button",props:{href:{default:void 0},to:{default:void 0},variant:{default:"secondary"},type:{default:"button"}},setup(e){const t=e,i=$o(),r=Oe(()=>{if(t.href)return t.href;if(t.to&&s.value===rc)return i.resolve(t.to).href}),s=Oe(()=>t.href?"a":t.to?rc:"button");return(u,d)=>(H(),We(vc(s.value),zr({class:["button inline-flex items-center gap-1 no-underline hover:no-underline rounded justify-center leading-none transition-colors ease-in-out group cursor-pointer",{"button--primary px-4 py-3":u.variant==="primary","button--secondary px-4 py-3":u.variant==="secondary","button--tertiary text-xs uppercase font-medium p-2":u.variant==="tertiary","button--primary px-4 py-3 !bg-red-500 !border-red-500 text-red-100 hover:!bg-red-600 hover:!border-red-600":u.variant==="danger"}]},u.$attrs,{to:s.value===he(rc)?u.to:void 0,href:r.value,type:s.value==="button"?u.type:void 0}),{default:Me(()=>[Mn(u.$slots,"default",{},void 0,!0)]),_:3},16,["class","to","href","type"]))}});const sn=(e,t)=>{const i=e.__vccOpts||e;for(const[r,s]of t)i[r]=s;return i},si=sn(HB,[["__scopeId","data-v-b3ce31e8"]]),GB={},WB={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},qB=ue("rect",{width:"24",height:"24"},null,-1),ZB=ue("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.6851 2.08796C10.1881 2.15475 9.69495 2.25958 9.21002 2.40246C9.27467 2.86436 9.45238 3.29954 9.72326 3.67131C9.98279 3.10488 10.3065 2.57399 10.6851 2.08796ZM9.02399 7.62422C8.84315 7.4298 8.58509 7.30818 8.29862 7.30818C7.75161 7.30818 7.30818 7.75162 7.30818 8.29862C7.30818 8.84563 7.75161 9.28907 8.29862 9.28907C8.68939 9.28907 9.02729 9.06277 9.18845 8.73408C9.10859 8.3727 9.05316 8.00214 9.02399 7.62422ZM20.122 14.3679C20.7663 14.0946 21.3673 13.7392 21.912 13.3149C21.8453 13.8119 21.7404 14.3051 21.5975 14.79C21.0717 14.79 20.5612 14.6416 20.122 14.3679ZM15.2627 14.8108C15.6235 14.8907 15.9934 14.9463 16.3707 14.9756C16.5654 15.1565 16.6872 15.4147 16.6872 15.7014C16.6872 16.2484 16.2437 16.6918 15.6967 16.6918C15.1497 16.6918 14.7063 16.2484 14.7063 15.7014C14.7063 15.31 14.9332 14.9717 15.2627 14.8108ZM6.92688 6.92688C7.41013 6.44895 7.70231 5.81105 7.74854 5.13295C7.79477 4.45486 7.59189 3.7832 7.17798 3.2441C5.52305 4.15964 4.15964 5.52305 3.2441 7.17798C3.7832 7.59189 4.45485 7.79478 5.13295 7.74854C5.81105 7.70231 6.44895 7.41013 6.92688 6.92688ZM4.82509 12C4.82315 11.3217 4.57738 10.6667 4.13263 10.1545C3.68788 9.64228 3.07381 9.30708 2.40245 9.21002C1.86585 11.0313 1.86585 12.9687 2.40245 14.79C3.07381 14.6929 3.68788 14.3577 4.13263 13.8455C4.57738 13.3333 4.82315 12.6783 4.82509 12ZM7.75457 12C7.75457 12.547 7.31114 12.9904 6.76413 12.9904C6.21712 12.9904 5.77369 12.547 5.77369 12C5.77369 11.453 6.21712 11.0096 6.76413 11.0096C7.31114 11.0096 7.75457 11.453 7.75457 12ZM9.28906 15.7014C9.28906 16.2484 8.84563 16.6918 8.29862 16.6918C7.75161 16.6918 7.30818 16.2484 7.30818 15.7014C7.30818 15.1544 7.75161 14.7109 8.29862 14.7109C8.84563 14.7109 9.28906 15.1544 9.28906 15.7014ZM11.4497 16.4123C11.6126 16.3035 11.8041 16.2454 12 16.2454C12.2627 16.2454 12.5146 16.3498 12.7003 16.5355C12.8861 16.7213 12.9904 16.9732 12.9904 17.2359C12.9904 17.4318 12.9324 17.6233 12.8235 17.7861C12.7147 17.949 12.56 18.076 12.379 18.1509C12.198 18.2259 11.9989 18.2455 11.8068 18.2073C11.6146 18.1691 11.4382 18.0747 11.2997 17.9362C11.1611 17.7977 11.0668 17.6212 11.0286 17.4291C10.9904 17.237 11.01 17.0378 11.0849 16.8568C11.1599 16.6759 11.2869 16.5212 11.4497 16.4123ZM10.1545 19.8674C10.6667 19.4226 11.3217 19.1769 12 19.1749C12.6783 19.1769 13.3333 19.4226 13.8455 19.8674C14.3577 20.3121 14.6929 20.9262 14.79 21.5975C12.9687 22.1342 11.0313 22.1342 9.21002 21.5975C9.30708 20.9262 9.64228 20.3121 10.1545 19.8674ZM6.92688 17.0731C6.44895 16.5899 5.81105 16.2977 5.13295 16.2515C4.45486 16.2052 3.7832 16.4081 3.2441 16.822C4.15964 18.477 5.52305 19.8404 7.17798 20.7559C7.59189 20.2168 7.79477 19.5451 7.74854 18.867C7.70231 18.189 7.41013 17.5511 6.92688 17.0731ZM17.0731 17.0731C16.5899 17.5511 16.2977 18.189 16.2515 18.867C16.2052 19.5451 16.4081 20.2168 16.822 20.7559C18.477 19.8404 19.8404 18.477 20.7559 16.822C20.2168 16.4081 19.5451 16.2052 18.867 16.2515C18.189 16.2977 17.5511 16.5899 17.0731 17.0731Z",fill:"black"},null,-1),KB=ue("path",{d:"M17 0.333334C13.318 0.333334 10.3333 3.318 10.3333 7C10.3333 10.682 13.318 13.6667 17 13.6667C20.682 13.6667 23.6667 10.682 23.6667 7C23.6667 3.318 20.682 0.333334 17 0.333334ZM20.3333 7.66667H17.6667V10.3333H16.3333V7.66667H13.6667V6.33333H16.3333V3.66667H17.6667V6.33333H20.3333V7.66667Z",fill:"black"},null,-1),XB=[qB,ZB,KB];function YB(e,t){return H(),me("svg",WB,XB)}const JB=sn(GB,[["render",YB]]),QB={},e6={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t6=yI('<g clip-path="url(#clip0_906_7883)"><rect width="24" height="24"></rect><path fill-rule="evenodd" clip-rule="evenodd" d="M9.58152 4H6.5C5.50544 4 4.55161 4.39509 3.84835 5.09835C3.14509 5.80161 2.75 6.75544 2.75 7.75V17.75C2.75 18.7446 3.14509 19.6984 3.84835 20.4017C4.55161 21.1049 5.50544 21.5 6.5 21.5H16.5C17.4946 21.5 18.4484 21.1049 19.1517 20.4017C19.8549 19.6984 20.25 18.7446 20.25 17.75V14.3123C19.8496 14.4905 19.4319 14.6368 19 14.748V17.75C19 18.413 18.7366 19.0489 18.2678 19.5178C17.7989 19.9866 17.163 20.25 16.5 20.25H6.5C5.83696 20.25 5.20107 19.9866 4.73223 19.5178C4.26339 19.0489 4 18.413 4 17.75V14H7.80125C7.94747 14.8753 8.39938 15.6704 9.07662 16.2439C9.75387 16.8174 10.6126 17.1321 11.5 17.1321C12.3874 17.1321 13.2461 16.8174 13.9234 16.2439C14.4019 15.8387 14.7679 15.3228 14.9931 14.7462C14.5843 14.6406 14.1881 14.5034 13.8073 14.3375C13.6829 14.6357 13.5007 14.9099 13.2678 15.1428C12.7989 15.6116 12.163 15.875 11.5 15.875C10.837 15.875 10.2011 15.6116 9.73223 15.1428C9.26339 14.6739 9 14.038 9 13.375C9 13.2092 8.93415 13.0503 8.81694 12.9331C8.69973 12.8158 8.54076 12.75 8.375 12.75H4V9H9.25204C9.14776 8.59486 9.07442 8.17731 9.03469 7.75H4C4 7.08696 4.26339 6.45107 4.73223 5.98223C5.20107 5.51339 5.83696 5.25 6.5 5.25L9.2067 5.18534C9.30131 4.77738 9.42714 4.38138 9.58152 4Z" fill="currentColor"></path><path d="M17 0.333334C13.318 0.333334 10.3333 3.318 10.3333 7C10.3333 10.682 13.318 13.6667 17 13.6667C20.682 13.6667 23.6667 10.682 23.6667 7C23.6667 3.318 20.682 0.333334 17 0.333334ZM20.3333 7.66667H17.6667V10.3333H16.3333V7.66667H13.6667V6.33333H16.3333V3.66667H17.6667V6.33333H20.3333V7.66667Z" fill="currentColor"></path></g><defs><clipPath id="clip0_906_7883"><rect width="24" height="24" fill="white"></rect></clipPath></defs>',2),n6=[t6];function i6(e,t){return H(),me("svg",e6,n6)}const aM=sn(QB,[["render",i6]]),r6={},s6={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a6=ue("rect",{width:"24",height:"24"},null,-1),o6=ue("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.3333 7C10.3333 3.318 13.318 0.333334 17 0.333334C20.682 0.333334 23.6667 3.318 23.6667 7C23.6667 10.682 20.682 13.6667 17 13.6667C13.318 13.6667 10.3333 10.682 10.3333 7ZM17.6667 7.66667H20.3333V6.33333H17.6667V3.66667H16.3333V6.33333H13.6667V7.66667H16.3333V10.3333H17.6667V7.66667ZM2 12C2 6.93506 5.79394 2.732 10.6866 2.08606C10.403 2.44989 10.1502 2.83888 9.93202 3.24912C7.66725 3.78259 5.73276 5.17312 4.48 7.06C4.69 7.07 4.89 7.07 5.06 7.07C6 7.07 7.46 6.96 7.46 6.96C7.95 6.93 8 7.64 7.52 7.7C7.52 7.7 7.03 7.76 6.49 7.78L9.76 17.53L11.3762 12.6897C11.5742 12.8854 11.7823 13.0709 11.9998 13.2452L9.46 20.62C10.27 20.86 11.12 20.99 12 20.99C13.05 20.99 14.05 20.81 14.98 20.47C14.9667 20.45 14.9533 20.4211 14.94 20.3922C14.9333 20.3778 14.9267 20.3633 14.92 20.35L12.4527 13.5828C13.3833 14.2269 14.4571 14.6787 15.6167 14.8808L16.48 17.46L17.2189 14.9971C17.5525 14.9881 17.881 14.9587 18.2032 14.9101L16.52 19.77C18.5451 18.5927 20.0306 16.6712 20.6601 14.4149C20.6921 14.2999 20.7218 14.1846 20.7492 14.0689C21.1601 13.8505 21.5496 13.5974 21.9139 13.3134C21.268 18.2061 17.0649 22 12 22C6.49 22 2 17.51 2 12ZM3.01 12C3.01 10.7 3.29 9.46 3.79 8.34L8.08 20.09C5.08 18.63 3.01 15.56 3.01 12Z",fill:"black"},null,-1),l6=[a6,o6];function c6(e,t){return H(),me("svg",s6,l6)}const u6=sn(r6,[["render",c6]]),d6={},h6={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},f6=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"},null,-1),p6=[f6];function m6(e,t){return H(),me("svg",h6,p6)}const Cu=sn(d6,[["render",m6]]),g6={},v6={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},_6=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"},null,-1),y6=[_6];function b6(e,t){return H(),me("svg",v6,y6)}const x6=sn(g6,[["render",b6]]),w6={},S6={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},T6=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"},null,-1),E6=[T6];function C6(e,t){return H(),me("svg",S6,E6)}const Ch=sn(w6,[["render",C6]]),I6={},A6={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},M6=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"},null,-1),k6=[M6];function P6(e,t){return H(),me("svg",A6,k6)}const O_=sn(I6,[["render",P6]]),D6={},L6={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},O6=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5L8.25 12l7.5-7.5"},null,-1),R6=[O6];function F6(e,t){return H(),me("svg",L6,R6)}const oM=sn(D6,[["render",F6]]),$6={},z6={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},B6=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"},null,-1),N6=[B6];function U6(e,t){return H(),me("svg",z6,N6)}const lM=sn($6,[["render",U6]]),j6={},V6={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},H6=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),G6=[H6];function W6(e,t){return H(),me("svg",V6,G6)}const cM=sn(j6,[["render",W6]]),q6={},Z6={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg"},K6=ue("circle",{cx:"12",cy:"12",r:"9"},null,-1),X6=[K6];function Y6(e,t){return H(),me("svg",Z6,X6)}const J6=sn(q6,[["render",Y6]]),Q6={},eN={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},tN=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),nN=[tN];function iN(e,t){return H(),me("svg",eN,nN)}const om=sn(Q6,[["render",iN]]),rN={},sN={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},aN=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"},null,-1),oN=[aN];function lN(e,t){return H(),me("svg",sN,oN)}const Fp=sn(rN,[["render",lN]]),cN={},uN={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},dN=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"},null,-1),hN=[dN];function fN(e,t){return H(),me("svg",uN,hN)}const E1=sn(cN,[["render",fN]]),pN={},mN={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},gN=ue("path",{fill:"currentColor",d:"M7 19v-2h2v2H7m4 0v-2h2v2h-2m4 0v-2h2v2h-2m-8-4v-2h2v2H7m4 0v-2h2v2h-2m4 0v-2h2v2h-2m-8-4V9h2v2H7m4 0V9h2v2h-2m4 0V9h2v2h-2M7 7V5h2v2H7m4 0V5h2v2h-2m4 0V5h2v2h-2Z"},null,-1),vN=[gN];function _N(e,t){return H(),me("svg",mN,vN)}const uM=sn(pN,[["render",_N]]),yN={},bN={width:"9",height:"31",viewBox:"0 0 9 31",fill:"none",xmlns:"http://www.w3.org/2000/svg"},xN=ue("path",{d:"M8.96268 2.86638L6.49786 0.5L4.03304 2.90298V8.47338L0 12.2597V30.5H8.96275V12.2597L9 8.43678L8.96268 2.86638ZM3.80904 26.4223H1.9418V23.182H3.80904V26.4223ZM3.80904 16.8834H1.9418V13.6431H3.80904V16.8834ZM7.24496 21.5799H5.37772V18.3396H7.24496V21.5799ZM7.24496 16.8834H5.37772V13.6431H7.24496V16.8834ZM5.639 5.85182V3.99509L6.46058 3.19412L7.28217 3.99509V5.88836L5.63893 5.88811L5.639 5.85182Z",fill:"currentColor"},null,-1),wN=[xN];function SN(e,t){return H(),me("svg",bN,wN)}const TN=sn(yN,[["render",SN]]),EN={},CN={xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 96 960 960",width:"48",class:"w-5 h-5"},IN=ue("path",{d:"M333 856V723H200v-60h193v193h-60Zm234 0V663h193v60H627v133h-60ZM200 489v-60h133V296h60v193H200Zm367 0V296h60v133h133v60H567Z"},null,-1),AN=[IN];function MN(e,t){return H(),me("svg",CN,AN)}const kN=sn(EN,[["render",MN]]),PN={},DN={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},LN=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"},null,-1),ON=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),RN=[LN,ON];function FN(e,t){return H(),me("svg",DN,RN)}const $N=sn(PN,[["render",FN]]),zN={},BN={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},NN=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"},null,-1),UN=[NN];function jN(e,t){return H(),me("svg",BN,UN)}const VN=sn(zN,[["render",jN]]),HN={},GN={xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 96 960 960",width:"48",class:"w-5 h-5"},WN=ue("path",{d:"M200 856V663h60v133h133v60H200Zm0-367V296h193v60H260v133h-60Zm367 367v-60h133V663h60v193H567Zm133-367V356H567v-60h193v193h-60Z"},null,-1),qN=[WN];function ZN(e,t){return H(),me("svg",GN,qN)}const KN=sn(HN,[["render",ZN]]),XN={},YN={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},JN=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"},null,-1),QN=[JN];function e8(e,t){return H(),me("svg",YN,QN)}const C1=sn(XN,[["render",e8]]),t8={},n8={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},i8=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"},null,-1),r8=[i8];function s8(e,t){return H(),me("svg",n8,r8)}const dM=sn(t8,[["render",s8]]),a8={},o8={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-6 h-6"},l8=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"},null,-1),c8=[l8];function u8(e,t){return H(),me("svg",o8,c8)}const d8=sn(a8,[["render",u8]]),h8={},f8={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},p8=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"},null,-1),m8=[p8];function g8(e,t){return H(),me("svg",f8,m8)}const v8=sn(h8,[["render",g8]]),_8={},y8={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},b8=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 103.935 2.186 2.25 2.25 0 00-3.935-2.186zm0-12.814a2.25 2.25 0 103.933-2.185 2.25 2.25 0 00-3.933 2.185z"},null,-1),x8=[b8];function w8(e,t){return H(),me("svg",y8,x8)}const S8=sn(_8,[["render",w8]]),T8={},E8={class:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},C8=ue("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),I8=ue("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),A8=[C8,I8];function M8(e,t){return H(),me("svg",E8,A8)}const zo=sn(T8,[["render",M8]]),k8={},P8={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},D8=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.098 19.902a3.75 3.75 0 005.304 0l6.401-6.402M6.75 21A3.75 3.75 0 013 17.25V4.125C3 3.504 3.504 3 4.125 3h5.25c.621 0 1.125.504 1.125 1.125v4.072M6.75 21a3.75 3.75 0 003.75-3.75V8.197M6.75 21h13.125c.621 0 1.125-.504 1.125-1.125v-5.25c0-.621-.504-1.125-1.125-1.125h-4.072M10.5 8.197l2.88-2.88c.438-.439 1.15-.439 1.59 0l3.712 3.713c.44.44.44 1.152 0 1.59l-2.879 2.88M6.75 17.25h.008v.008H6.75v-.008z"},null,-1),L8=[D8];function O8(e,t){return H(),me("svg",P8,L8)}const R8=sn(k8,[["render",O8]]),F8={},$8={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},z8=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"},null,-1),B8=[z8];function N8(e,t){return H(),me("svg",$8,B8)}const U8=sn(F8,[["render",N8]]),j8={},V8={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},H8=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z"},null,-1),G8=[H8];function W8(e,t){return H(),me("svg",V8,G8)}const q8=sn(j8,[["render",W8]]),Z8={},K8={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},X8=ue("path",{"stroke-linecap":"round",d:"M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 002.25 7.5v9a2.25 2.25 0 002.25 2.25z"},null,-1),Y8=[X8];function J8(e,t){return H(),me("svg",K8,Y8)}const Q8=sn(Z8,[["render",J8]]),eU={},tU={class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},nU=ue("path",{"fill-rule":"evenodd",d:"M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"},null,-1),iU=[nU];function rU(e,t){return H(),me("svg",tU,iU)}const sU=sn(eU,[["render",rU]]),aU={},oU={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},lU=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1),cU=[lU];function uU(e,t){return H(),me("svg",oU,cU)}const lm=sn(aU,[["render",uU]]),dU=e=>(ro("data-v-59dc0ca4"),e=e(),so(),e),hU={class:"notification rounded-md max-w-lg mx-auto overflow-hidden relative"},fU=dU(()=>ue("span",{class:"sr-only"},"Close",-1)),pU={class:"notification__icon rounded-full p-2 -mt-1"},mU={class:"flex-1"},gU={class:"notification__title text-sm font-bold uppercase pr-6"},vU={class:"notification__contents mt-2 text-sm"},_U=lt({__name:"Notification",props:{title:{default:"Heads Up"},type:{default:"info"},isDismissable:{type:Boolean,default:!1}},emits:["dismiss"],setup(e){return(t,i)=>(H(),me("div",hU,[t.isDismissable?(H(),me("button",{key:0,class:"absolute top-0 right-0 p-4",onClick:i[0]||(i[0]=r=>t.$emit("dismiss"))},[fU,ye(lm)])):ot("",!0),ue("div",{class:Dn(["flex gap-4 p-4 border-l-8 items-start",{"notification--info border-l-blue-600":t.type==="info","notification--warning border-l-yellow-300":t.type==="warning","notification--error border-l-red-400":t.type==="danger","notification--success border-l-green-400":t.type==="success"}])},[ue("div",pU,[t.type==="warning"?(H(),We(he(sU),{key:0})):ot("",!0),t.type==="info"?(H(),We(he(dM),{key:1})):ot("",!0),t.type==="success"?(H(),We(he(cM),{key:2})):ot("",!0),t.type==="danger"?(H(),We(he(om),{key:3})):ot("",!0)]),ue("div",mU,[ue("h3",gU,xt(t.title),1),ue("div",vU,[Mn(t.$slots,"default",{},void 0,!0)])])],2)]))}});const cm=sn(_U,[["__scopeId","data-v-59dc0ca4"]]),yU=ue("p",null,"This site requires you to sign in to search or access assets.",-1),bU={class:"flex gap-2 mt-2"},hM=lt({__name:"SignInRequiredNotice",setup(e){const t=Ai(),i=Oe(()=>t.instance),r=WA(),s=Oe(()=>{var d;const u=((d=r.value)==null?void 0:d.href)??ci.instance.base.url;return encodeURIComponent(u)});return(u,d)=>(H(),We(cm,{type:"warning",title:"Sign In Required",class:"my-4"},{default:Me(()=>[yU,ue("div",bU,[ye(si,{to:`/loginManager/localLogin/?redirect=${u.$route.path}`,variant:"tertiary"},{default:Me(()=>[Mt(xt(i.value.useCentralAuth?"Guest":"")+" Login ",1)]),_:1},8,["to"]),i.value.useCentralAuth?(H(),We(si,{key:0,href:`${he(ci).instance.base.url}/loginManager/remoteLogin/?redirect=${s.value}`,variant:"tertiary"},{default:Me(()=>[Mt(xt(i.value.centralAuthLabel)+" Login ",1)]),_:1},8,["href"])):ot("",!0)])]),_:1}))}}),xU={key:0,class:"fixed inset-0 z-40 bg-transparent-black-700 flex items-center justify-center"},wU={class:"mt-1"},SU=lt({__name:"ErrorModal",setup(e){const t=ci.instance.base.url,i=sm(),r=Ai(),s=Oe(()=>i.error),u=Oe(()=>s.value instanceof qd?s.value.statusCode===0?"Connection Error":`Error: ${s.value.statusCode}`:"Error"),d=Oe(()=>!r.isLoggedIn&&s.value instanceof qd&&s.value.statusCode===401),l={0:"There was a problem connecting to the server. If the problem persists, please contact support.",401:"You do not have permission to access this.",403:"You do not have permission to access this.",404:"We couldn't find this. Please check your link and try again.",400:"There was a problem with your request. Please check your input and try again.",500:"There was a problem on our end. Please contact support if the problem persists."},m=Oe(()=>{var x;if(!(s.value instanceof qd))return((x=s.value)==null?void 0:x.message)||"An unknown error occurred.";const g=s.value.statusCode;return g in l?l[g]:g>=400&&g<500?l[400]:g>=500&&g<600?l[500]:s.value.message});return(g,x)=>(H(),me("div",null,[ye(Er,{name:"fade"},{default:Me(()=>[s.value?(H(),me("div",xU,[d.value?(H(),We(hM,{key:0})):(H(),We(cm,{key:1,title:u.value,message:s.value.name,type:"danger",isDismissable:!0,class:"w-full max-w-md border-none max-h-[80vh] !overflow-auto",onDismiss:x[0]||(x[0]=w=>he(i).clearError())},{default:Me(()=>[ue("p",null,xt(m.value),1),ue("div",wU,[ye(si,{href:he(t),variant:"tertiary"},{default:Me(()=>[Mt(" Go Home ")]),_:1},8,["href"])])]),_:1},8,["title","message"]))])):ot("",!0)]),_:1})]))}}),TU=["href"],as=lt({__name:"Link",props:{to:{default:void 0},href:{default:"#"}},setup(e){return(t,i)=>t.to?(H(),We(he(rc),{key:0,to:t.to},{default:Me(()=>[Mn(t.$slots,"default")]),_:3},8,["to"])):(H(),me("a",{key:1,href:t.href},[Mn(t.$slots,"default")],8,TU))}}),EU=ue("span",{class:"sr-only"},"Close",-1),CU={key:0,class:"mt-1 flex justify-end"},IU=lt({__name:"Toast",props:{toast:{}},emits:["dismiss"],setup(e,{emit:t}){const i=e,r=Fe(0),s=Fe(!1),u=i.toast.duration??3e3,d=Oe(()=>r.value/u*100);function l(){s.value=!1;let m=Date.now();mz(()=>{const g=Date.now()-m;s.value||(r.value+=g),r.value>=u&&t("dismiss",i.toast.id),m=Date.now()})}return Bn(()=>{l()}),(m,g)=>(H(),me("div",{key:m.toast.id,class:"pointer-events-auto shadow-md bg-neutral-900 text-neutral-200 p-4 rounded-md relative overflow-hidden",onMouseenter:g[2]||(g[2]=x=>s.value=!0),onMouseleave:g[3]||(g[3]=x=>s.value=!1)},[ue("button",{class:"float-right",onClick:g[0]||(g[0]=x=>m.$emit("dismiss",m.toast.id))},[EU,ye(he(lm))]),ue("div",{class:"timer absolute top-0 left-0 w-full h-1 bg-neutral-600 transform",style:xu({transform:`translateX(-${d.value}%)`})},null,4),ue("p",null,xt(m.toast.message),1),m.toast.url?(H(),me("p",CU,[ye(as,{to:m.toast.url,class:"uppercase text-xs py-1 px-2 bg-transparent-white-200 text-neutral-400 hover:no-underline hover:text-neutral-900 hover:bg-neutral-200 rounded-md",onClick:g[1]||(g[1]=x=>m.$emit("dismiss",m.toast.id))},{default:Me(()=>[Mt(xt(m.toast.urlText||"View"),1)]),_:1},8,["to"])])):ot("",!0)],32))}}),AU={class:"notification-root fixed top-12 right-0 z-50 p-4 w-full max-w-sm pointer-events-none flex flex-col items-end gap-1"},MU=lt({__name:"ToastRoot",setup(e){const t=Bd();return(i,r)=>(H(),me("div",AU,[ye(s1,{name:"fade"},{default:Me(()=>[(H(!0),me(Nt,null,Fn(he(t).toasts,s=>(H(),We(IU,{key:s.id,toast:s,class:"w-full pointer-events-auto shadow-md",onDismiss:u=>he(t).dismissToast(s.id)},null,8,["toast","onDismiss"]))),128))]),_:1})]))}}),kU=lt({__name:"App",setup(e){const t=Ai(),i=Pa();return Bn(()=>{console.log("app mounted"),t.init(),i.init(),ZA()}),(r,s)=>{const u=y_("RouterView");return H(),me("div",null,[(H(),We(tm,{to:"body"},[ye(SU),ye(MU)])),he(t).isReady&&he(i).isReady?(H(),We(u,{key:0})):ot("",!0)])}}});function PU({store:e}){const t=BT(e.$state);e.$reset=()=>e.$patch(BT(t))}const DU=ue("span",{class:"sr-only"},"Close",-1),fM=lt({__name:"XButton",emits:["click"],setup(e){return(t,i)=>(H(),me("button",{class:"x-button inline-flex bg-transparent-black-50 text-neutral-700 w-8 h-8 rounded-full leading-none items-center justify-center transition ease-in-out hover:bg-transparent-black-900 hover:text-white",onClick:i[0]||(i[0]=r=>t.$emit("click"))},[ye(lm),DU]))}}),LU={},OU={width:"41",height:"25",viewBox:"0 0 41 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"umn-logo text-umn-maroon"},RU=ue("path",{d:"M38.4331 18.4558L31.2458 6.55112H33.229V0.343018H21.2666V6.54412H23.2497L20.5 11.0916L17.7573 6.54412H19.7334V0.343018H7.77101V6.54412H9.74717L2.5669 18.4558H0V24.6569H12.2015V18.4558H10.0074L13.7487 12.2547L15.1974 14.6581H13.805V20.8592H27.181V14.6581H25.7885L27.2443 12.2547L30.9856 18.4558H28.7985V24.6569H41V18.4558H38.4331Z",fill:"currentColor"},null,-1),FU=[RU];function $U(e,t){return H(),me("svg",OU,FU)}const zU=sn(LU,[["render",$U]]);function sa(e,t,...i){if(e in t){let s=t[e];return typeof s=="function"?s(...i):s}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,sa),r}var pc=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(pc||{}),Yl=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Yl||{});function kr({visible:e=!0,features:t=0,ourProps:i,theirProps:r,...s}){var u;let d=mM(r,i),l=Object.assign(s,{props:d});if(e||t&2&&d.static)return A0(l);if(t&1){let m=(u=d.unmount)==null||u?0:1;return sa(m,{[0](){return null},[1](){return A0({...s,props:{...d,hidden:!0,style:{display:"none"}}})}})}return A0(l)}function A0({props:e,attrs:t,slots:i,slot:r,name:s}){var u,d;let{as:l,...m}=I1(e,["unmount","static"]),g=(u=i.default)==null?void 0:u.call(i,r),x={};if(r){let w=!1,C=[];for(let[I,M]of Object.entries(r))typeof M=="boolean"&&(w=!0),M===!0&&C.push(I);w&&(x["data-headlessui-state"]=C.join(" "))}if(l==="template"){if(g=pM(g??[]),Object.keys(m).length>0||Object.keys(t).length>0){let[w,...C]=g??[];if(!NU(w)||C.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${s} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(m).concat(Object.keys(t)).map(L=>L.trim()).filter((L,$,F)=>F.indexOf(L)===$).sort((L,$)=>L.localeCompare($)).map(L=>`  - ${L}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(L=>`  - ${L}`).join(`
`)].join(`
`));let I=mM((d=w.props)!=null?d:{},m),M=ra(w,I);for(let L in I)L.startsWith("on")&&(M.props||(M.props={}),M.props[L]=I[L]);return M}return Array.isArray(g)&&g.length===1?g[0]:g}return ni(l,Object.assign({},m,x),{default:()=>g})}function pM(e){return e.flatMap(t=>t.type===Nt?pM(t.children):[t])}function mM(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},i={};for(let r of e)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(i[s]!=null||(i[s]=[]),i[s].push(r[s])):t[s]=r[s];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(i).map(r=>[r,void 0])));for(let r in i)Object.assign(t,{[r](s,...u){let d=i[r];for(let l of d){if(s instanceof Event&&s.defaultPrevented)return;l(s,...u)}}});return t}function BU(e){let t=Object.assign({},e);for(let i in t)t[i]===void 0&&delete t[i];return t}function I1(e,t=[]){let i=Object.assign({},e);for(let r of t)r in i&&delete i[r];return i}function NU(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}let UU=0;function jU(){return++UU}function Bo(){return jU()}var Hi=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Hi||{});function VU(e){throw new Error("Unexpected object: "+e)}var Qs=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(Qs||{});function HU(e,t){let i=t.resolveItems();if(i.length<=0)return null;let r=t.resolveActiveIndex(),s=r??-1,u=(()=>{switch(e.focus){case 0:return i.findIndex(d=>!t.resolveDisabled(d));case 1:{let d=i.slice().reverse().findIndex((l,m,g)=>s!==-1&&g.length-m-1>=s?!1:!t.resolveDisabled(l));return d===-1?d:i.length-1-d}case 2:return i.findIndex((d,l)=>l<=s?!1:!t.resolveDisabled(d));case 3:{let d=i.slice().reverse().findIndex(l=>!t.resolveDisabled(l));return d===-1?d:i.length-1-d}case 4:return i.findIndex(d=>t.resolveId(d)===e.id);case 5:return null;default:VU(e)}})();return u===-1?r:u}function Gn(e){var t;return e==null||e.value==null?null:(t=e.value.$el)!=null?t:e.value}let gM=Symbol("Context");var vr=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(vr||{});function GU(){return um()!==null}function um(){return wi(gM,null)}function A1(e){Oi(gM,e)}function bE(e,t){if(e)return e;let i=t??"button";if(typeof i=="string"&&i.toLowerCase()==="button")return"button"}function M1(e,t){let i=Fe(bE(e.value.type,e.value.as));return Bn(()=>{i.value=bE(e.value.type,e.value.as)}),Ar(()=>{var r;i.value||Gn(t)&&Gn(t)instanceof HTMLButtonElement&&!((r=Gn(t))!=null&&r.hasAttribute("type"))&&(i.value="button")}),i}var WU=Object.defineProperty,qU=(e,t,i)=>t in e?WU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,xE=(e,t,i)=>(qU(e,typeof t!="symbol"?t+"":t,i),i);let ZU=class{constructor(){xE(this,"current",this.detect()),xE(this,"currentId",0)}set(t){this.current!==t&&(this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},dm=new ZU;function Iu(e){if(dm.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(e!=null&&e.hasOwnProperty("value")){let t=Gn(e);if(t)return t.ownerDocument}return document}function KU({container:e,accept:t,walk:i,enabled:r}){Ar(()=>{let s=e.value;if(!s||r!==void 0&&!r.value)return;let u=Iu(e);if(!u)return;let d=Object.assign(m=>t(m),{acceptNode:t}),l=u.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,d,!1);for(;l.nextNode();)i(l.currentNode)})}let Wb=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var xo=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(xo||{}),vM=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(vM||{}),XU=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(XU||{});function _M(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Wb)).sort((t,i)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(i.tabIndex||Number.MAX_SAFE_INTEGER)))}var k1=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(k1||{});function P1(e,t=0){var i;return e===((i=Iu(e))==null?void 0:i.body)?!1:sa(t,{[0](){return e.matches(Wb)},[1](){let r=e;for(;r!==null;){if(r.matches(Wb))return!0;r=r.parentElement}return!1}})}function yM(e){let t=Iu(e);Ir(()=>{t&&!P1(t.activeElement,0)&&sc(e)})}var YU=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(YU||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function sc(e){e==null||e.focus({preventScroll:!0})}let JU=["textarea","input"].join(",");function QU(e){var t,i;return(i=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,JU))!=null?i:!1}function bM(e,t=i=>i){return e.slice().sort((i,r)=>{let s=t(i),u=t(r);if(s===null||u===null)return 0;let d=s.compareDocumentPosition(u);return d&Node.DOCUMENT_POSITION_FOLLOWING?-1:d&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function ej(e,t){return pp(_M(),t,{relativeTo:e})}function pp(e,t,{sorted:i=!0,relativeTo:r=null,skipElements:s=[]}={}){var u;let d=(u=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e==null?void 0:e.ownerDocument)!=null?u:document,l=Array.isArray(e)?i?bM(e):e:_M(e);s.length>0&&l.length>1&&(l=l.filter(M=>!s.includes(M))),r=r??d.activeElement;let m=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),g=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,l.indexOf(r))-1;if(t&4)return Math.max(0,l.indexOf(r))+1;if(t&8)return l.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),x=t&32?{preventScroll:!0}:{},w=0,C=l.length,I;do{if(w>=C||w+C<=0)return 0;let M=g+w;if(t&16)M=(M+C)%C;else{if(M<0)return 3;if(M>=C)return 1}I=l[M],I==null||I.focus(x),w+=m}while(I!==d.activeElement);return t&6&&QU(I)&&I.select(),2}function M0(e,t,i){dm.isServer||Ar(r=>{document.addEventListener(e,t,i),r(()=>document.removeEventListener(e,t,i))})}function xM(e,t,i=Oe(()=>!0)){function r(u,d){if(!i.value||u.defaultPrevented)return;let l=d(u);if(l===null||!l.getRootNode().contains(l))return;let m=function g(x){return typeof x=="function"?g(x()):Array.isArray(x)||x instanceof Set?x:[x]}(e);for(let g of m){if(g===null)continue;let x=g instanceof HTMLElement?g:Gn(g);if(x!=null&&x.contains(l)||u.composed&&u.composedPath().includes(x))return}return!P1(l,k1.Loose)&&l.tabIndex!==-1&&u.preventDefault(),t(u,l)}let s=Fe(null);M0("mousedown",u=>{var d,l;i.value&&(s.value=((l=(d=u.composedPath)==null?void 0:d.call(u))==null?void 0:l[0])||u.target)},!0),M0("click",u=>{s.value&&(r(u,()=>s.value),s.value=null)},!0),M0("blur",u=>r(u,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}var $p=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))($p||{});let Fv=lt({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(e,{slots:t,attrs:i}){return()=>{let{features:r,...s}=e,u={"aria-hidden":(r&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return kr({ourProps:u,theirProps:s,slot:{},attrs:i,slots:t,name:"Hidden"})}}});function tj(e){var t;let i=(t=e==null?void 0:e.form)!=null?t:e.closest("form");if(i){for(let r of i.elements)if(r.tagName==="INPUT"&&r.type==="submit"||r.tagName==="BUTTON"&&r.type==="submit"||r.nodeName==="INPUT"&&r.type==="image"){r.click();return}}}function nj(e,t,i){let r=Fe(i==null?void 0:i.value),s=Oe(()=>e.value!==void 0);return[Oe(()=>s.value?e.value:r.value),function(u){return s.value||(r.value=u),t==null?void 0:t(u)}]}function wE(e){return[e.screenX,e.screenY]}function ij(){let e=Fe([-1,-1]);return{wasMoved(t){let i=wE(t);return e.value[0]===i[0]&&e.value[1]===i[1]?!1:(e.value=i,!0)},update(t){e.value=wE(t)}}}function rj(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function sj(e,t,i){dm.isServer||Ar(r=>{window.addEventListener(e,t,i),r(()=>window.removeEventListener(e,t,i))})}var Xf=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Xf||{});function aj(){let e=Fe(0);return sj("keydown",t=>{t.key==="Tab"&&(e.value=t.shiftKey?1:0)}),e}function wM(e,t,i,r){dm.isServer||Ar(s=>{e=e??window,e.addEventListener(t,i,r),s(()=>e.removeEventListener(t,i,r))})}function SM(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function oj(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}function TM(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let i of e.value){let r=Gn(i);r instanceof HTMLElement&&t.add(r)}return t}var EM=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(EM||{});let Ff=Object.assign(lt({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:Fe(new Set)}},inheritAttrs:!1,setup(e,{attrs:t,slots:i,expose:r}){let s=Fe(null);r({el:s,$el:s});let u=Oe(()=>Iu(s)),d=Fe(!1);Bn(()=>d.value=!0),Wi(()=>d.value=!1),cj({ownerDocument:u},Oe(()=>d.value&&!!(e.features&16)));let l=uj({ownerDocument:u,container:s,initialFocus:Oe(()=>e.initialFocus)},Oe(()=>d.value&&!!(e.features&2)));dj({ownerDocument:u,container:s,containers:e.containers,previousActiveElement:l},Oe(()=>d.value&&!!(e.features&8)));let m=aj();function g(I){let M=Gn(s);M&&(L=>L())(()=>{sa(m.value,{[Xf.Forwards]:()=>{pp(M,xo.First,{skipElements:[I.relatedTarget]})},[Xf.Backwards]:()=>{pp(M,xo.Last,{skipElements:[I.relatedTarget]})}})})}let x=Fe(!1);function w(I){I.key==="Tab"&&(x.value=!0,requestAnimationFrame(()=>{x.value=!1}))}function C(I){if(!d.value)return;let M=TM(e.containers);Gn(s)instanceof HTMLElement&&M.add(Gn(s));let L=I.relatedTarget;L instanceof HTMLElement&&L.dataset.headlessuiFocusGuard!=="true"&&(CM(M,L)||(x.value?pp(Gn(s),sa(m.value,{[Xf.Forwards]:()=>xo.Next,[Xf.Backwards]:()=>xo.Previous})|xo.WrapAround,{relativeTo:I.target}):I.target instanceof HTMLElement&&sc(I.target)))}return()=>{let I={},M={ref:s,onKeydown:w,onFocusout:C},{features:L,initialFocus:$,containers:F,...U}=e;return ni(Nt,[!!(L&4)&&ni(Fv,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:g,features:$p.Focusable}),kr({ourProps:M,theirProps:{...t,...U},slot:I,attrs:t,slots:i,name:"FocusTrap"}),!!(L&4)&&ni(Fv,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:g,features:$p.Focusable})])}}}),{features:EM}),ru=[];oj(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&ru[0]!==t.target&&(ru.unshift(t.target),ru=ru.filter(i=>i!=null&&i.isConnected),ru.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function lj(e){let t=Fe(ru.slice());return fn([e],([i],[r])=>{r===!0&&i===!1?SM(()=>{t.value.splice(0)}):r===!1&&i===!0&&(t.value=ru.slice())},{flush:"post"}),()=>{var i;return(i=t.value.find(r=>r!=null&&r.isConnected))!=null?i:null}}function cj({ownerDocument:e},t){let i=lj(t);Bn(()=>{Ar(()=>{var r,s;t.value||((r=e.value)==null?void 0:r.activeElement)===((s=e.value)==null?void 0:s.body)&&sc(i())},{flush:"post"})}),Wi(()=>{sc(i())})}function uj({ownerDocument:e,container:t,initialFocus:i},r){let s=Fe(null),u=Fe(!1);return Bn(()=>u.value=!0),Wi(()=>u.value=!1),Bn(()=>{fn([t,i,r],(d,l)=>{if(d.every((g,x)=>(l==null?void 0:l[x])===g)||!r.value)return;let m=Gn(t);m&&SM(()=>{var g,x;if(!u.value)return;let w=Gn(i),C=(g=e.value)==null?void 0:g.activeElement;if(w){if(w===C){s.value=C;return}}else if(m.contains(C)){s.value=C;return}w?sc(w):pp(m,xo.First|xo.NoScroll)===vM.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),s.value=(x=e.value)==null?void 0:x.activeElement})},{immediate:!0,flush:"post"})}),s}function dj({ownerDocument:e,container:t,containers:i,previousActiveElement:r},s){var u;wM((u=e.value)==null?void 0:u.defaultView,"focus",d=>{if(!s.value)return;let l=TM(i);Gn(t)instanceof HTMLElement&&l.add(Gn(t));let m=r.value;if(!m)return;let g=d.target;g&&g instanceof HTMLElement?CM(l,g)?(r.value=g,sc(g)):(d.preventDefault(),d.stopPropagation(),sc(m)):sc(r.value)},!0)}function CM(e,t){for(let i of e)if(i.contains(t))return!0;return!1}let k0=new Map,$f=new Map;function SE(e,t=Fe(!0)){Ar(i=>{var r;if(!t.value)return;let s=Gn(e);if(!s)return;i(function(){var d;if(!s)return;let l=(d=$f.get(s))!=null?d:1;if(l===1?$f.delete(s):$f.set(s,l-1),l!==1)return;let m=k0.get(s);m&&(m["aria-hidden"]===null?s.removeAttribute("aria-hidden"):s.setAttribute("aria-hidden",m["aria-hidden"]),s.inert=m.inert,k0.delete(s))});let u=(r=$f.get(s))!=null?r:0;$f.set(s,u+1),u===0&&(k0.set(s,{"aria-hidden":s.getAttribute("aria-hidden"),inert:s.inert}),s.setAttribute("aria-hidden","true"),s.inert=!0)})}let IM=Symbol("ForcePortalRootContext");function hj(){return wi(IM,!1)}let TE=lt({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup(e,{slots:t,attrs:i}){return Oi(IM,e.force),()=>{let{force:r,...s}=e;return kr({theirProps:s,ourProps:{},slot:{},slots:t,attrs:i,name:"ForcePortalRoot"})}}});function fj(e){let t=Iu(e);if(!t){if(e===null)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${e}`)}let i=t.getElementById("headlessui-portal-root");if(i)return i;let r=t.createElement("div");return r.setAttribute("id","headlessui-portal-root"),t.body.appendChild(r)}let AM=lt({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:i}){let r=Fe(null),s=Oe(()=>Iu(r)),u=hj(),d=wi(MM,null),l=Fe(u===!0||d==null?fj(r.value):d.resolveTarget());return Ar(()=>{u||d!=null&&(l.value=d.resolveTarget())}),Wi(()=>{var m,g;let x=(m=s.value)==null?void 0:m.getElementById("headlessui-portal-root");x&&l.value===x&&l.value.children.length<=0&&((g=l.value.parentElement)==null||g.removeChild(l.value))}),()=>{if(l.value===null)return null;let m={ref:r,"data-headlessui-portal":""};return ni(tm,{to:l.value},kr({ourProps:m,theirProps:e,slot:{},attrs:i,slots:t,name:"Portal"}))}}}),MM=Symbol("PortalGroupContext"),pj=lt({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(e,{attrs:t,slots:i}){let r=Br({resolveTarget(){return e.target}});return Oi(MM,r),()=>{let{target:s,...u}=e;return kr({theirProps:u,ourProps:{},slot:{},attrs:t,slots:i,name:"PortalGroup"})}}}),kM=Symbol("StackContext");var qb=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(qb||{});function mj(){return wi(kM,()=>{})}function gj({type:e,enabled:t,element:i,onUpdate:r}){let s=mj();function u(...d){r==null||r(...d),s(...d)}Bn(()=>{fn(t,(d,l)=>{d?u(0,e,i):l===!0&&u(1,e,i)},{immediate:!0,flush:"sync"})}),Wi(()=>{t.value&&u(1,e,i)}),Oi(kM,u)}let vj=Symbol("DescriptionContext");function PM({slot:e=Fe({}),name:t="Description",props:i={}}={}){let r=Fe([]);function s(u){return r.value.push(u),()=>{let d=r.value.indexOf(u);d!==-1&&r.value.splice(d,1)}}return Oi(vj,{register:s,slot:e,name:t,props:i}),Oe(()=>r.value.length>0?r.value.join(" "):void 0)}function _j(e){let t=bh(e.getSnapshot());return Wi(e.subscribe(()=>{t.value=e.getSnapshot()})),t}function R_(){let e=[],t={addEventListener(i,r,s,u){return i.addEventListener(r,s,u),t.add(()=>i.removeEventListener(r,s,u))},requestAnimationFrame(...i){let r=requestAnimationFrame(...i);t.add(()=>cancelAnimationFrame(r))},nextFrame(...i){t.requestAnimationFrame(()=>{t.requestAnimationFrame(...i)})},setTimeout(...i){let r=setTimeout(...i);t.add(()=>clearTimeout(r))},style(i,r,s){let u=i.style.getPropertyValue(r);return Object.assign(i.style,{[r]:s}),this.add(()=>{Object.assign(i.style,{[r]:u})})},group(i){let r=R_();return i(r),this.add(()=>r.dispose())},add(i){return e.push(i),()=>{let r=e.indexOf(i);if(r>=0)for(let s of e.splice(r,1))s()}},dispose(){for(let i of e.splice(0))i()}};return t}function yj(e,t){let i=e(),r=new Set;return{getSnapshot(){return i},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...u){let d=t[s].call(i,...u);d&&(i=d,r.forEach(l=>l()))}}}function bj(){let e;return{before({doc:t}){var i;let r=t.documentElement;e=((i=t.defaultView)!=null?i:window).innerWidth-r.clientWidth},after({doc:t,d:i}){let r=t.documentElement,s=r.clientWidth-r.offsetWidth,u=e-s;i.style(r,"paddingRight",`${u}px`)}}}function xj(){if(!rj())return{};let e;return{before(){e=window.pageYOffset},after({doc:t,d:i,meta:r}){function s(d){return r.containers.flatMap(l=>l()).some(l=>l.contains(d))}i.style(t.body,"marginTop",`-${e}px`),window.scrollTo(0,0);let u=null;i.addEventListener(t,"click",d=>{if(d.target instanceof HTMLElement)try{let l=d.target.closest("a");if(!l)return;let{hash:m}=new URL(l.href),g=t.querySelector(m);g&&!s(g)&&(u=g)}catch{}},!0),i.addEventListener(t,"touchmove",d=>{d.target instanceof HTMLElement&&!s(d.target)&&d.preventDefault()},{passive:!1}),i.add(()=>{window.scrollTo(0,window.pageYOffset+e),u&&u.isConnected&&(u.scrollIntoView({block:"nearest"}),u=null)})}}}function wj(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Sj(e){let t={};for(let i of e)Object.assign(t,i(t));return t}let ou=yj(()=>new Map,{PUSH(e,t){var i;let r=(i=this.get(e))!=null?i:{doc:e,count:0,d:R_(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let i=this.get(e);return i&&(i.count--,i.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:i}){let r={doc:e,d:t,meta:Sj(i)},s=[xj(),bj(),wj()];s.forEach(({before:u})=>u==null?void 0:u(r)),s.forEach(({after:u})=>u==null?void 0:u(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});ou.subscribe(()=>{let e=ou.getSnapshot(),t=new Map;for(let[i]of e)t.set(i,i.documentElement.style.overflow);for(let i of e.values()){let r=t.get(i.doc)==="hidden",s=i.count!==0;(s&&!r||!s&&r)&&ou.dispatch(i.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",i),i.count===0&&ou.dispatch("TEARDOWN",i)}});function Tj(e,t,i){let r=_j(ou),s=Oe(()=>{let u=e.value?r.value.get(e.value):void 0;return u?u.count>0:!1});return fn([e,t],([u,d],[l],m)=>{if(!u||!d)return;ou.dispatch("PUSH",u,i);let g=!1;m(()=>{g||(ou.dispatch("POP",l??u,i),g=!0)})},{immediate:!0}),s}var Ej=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ej||{});let Zb=Symbol("DialogContext");function DM(e){let t=wi(Zb,null);if(t===null){let i=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,DM),i}return t}let zg="DC8F892D-2EBD-447C-A4C8-A03058436FF4",Cj=lt({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:zg},initialFocus:{type:Object,default:null},id:{type:String,default:()=>`headlessui-dialog-${Bo()}`}},emits:{close:e=>!0},setup(e,{emit:t,attrs:i,slots:r,expose:s}){var u;let d=Fe(!1);Bn(()=>{d.value=!0});let l=Fe(0),m=um(),g=Oe(()=>e.open===zg&&m!==null?(m.value&vr.Open)===vr.Open:e.open),x=Fe(null),w=Fe(null),C=Oe(()=>Iu(x));if(s({el:x,$el:x}),!(e.open!==zg||m!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof g.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${g.value===zg?void 0:e.open}`);let I=Oe(()=>d.value&&g.value?0:1),M=Oe(()=>I.value===0),L=Oe(()=>l.value>1),$=wi(Zb,null)!==null,F=Oe(()=>L.value?"parent":"leaf"),U=Oe(()=>m!==null?(m.value&vr.Closing)===vr.Closing:!1),ee=Oe(()=>$||U.value?!1:M.value),V=Oe(()=>{var ne,Ee,Ce;return(Ce=Array.from((Ee=(ne=C.value)==null?void 0:ne.querySelectorAll("body > *"))!=null?Ee:[]).find(Xe=>Xe.id==="headlessui-portal-root"?!1:Xe.contains(Gn(w))&&Xe instanceof HTMLElement))!=null?Ce:null});SE(V,ee);let Q=Oe(()=>L.value?!0:M.value),ae=Oe(()=>{var ne,Ee,Ce;return(Ce=Array.from((Ee=(ne=C.value)==null?void 0:ne.querySelectorAll("[data-headlessui-portal]"))!=null?Ee:[]).find(Xe=>Xe.contains(Gn(w))&&Xe instanceof HTMLElement))!=null?Ce:null});SE(ae,Q),gj({type:"Dialog",enabled:Oe(()=>I.value===0),element:x,onUpdate:(ne,Ee)=>{if(Ee==="Dialog")return sa(ne,{[qb.Add]:()=>l.value+=1,[qb.Remove]:()=>l.value-=1})}});let be=PM({name:"DialogDescription",slot:Oe(()=>({open:g.value}))}),te=Fe(null),G={titleId:te,panelRef:Fe(null),dialogState:I,setTitleId(ne){te.value!==ne&&(te.value=ne)},close(){t("close",!1)}};Oi(Zb,G);function j(){var ne,Ee,Ce;return[...Array.from((Ee=(ne=C.value)==null?void 0:ne.querySelectorAll("html > *, body > *, [data-headlessui-portal]"))!=null?Ee:[]).filter(Xe=>!(Xe===document.body||Xe===document.head||!(Xe instanceof HTMLElement)||Xe.contains(Gn(w))||G.panelRef.value&&Xe.contains(G.panelRef.value))),(Ce=G.panelRef.value)!=null?Ce:x.value]}let z=Oe(()=>!(!M.value||L.value));xM(()=>j(),(ne,Ee)=>{G.close(),Ir(()=>Ee==null?void 0:Ee.focus())},z);let ie=Oe(()=>!(L.value||I.value!==0));wM((u=C.value)==null?void 0:u.defaultView,"keydown",ne=>{ie.value&&(ne.defaultPrevented||ne.key===Hi.Escape&&(ne.preventDefault(),ne.stopPropagation(),G.close()))});let X=Oe(()=>!(U.value||I.value!==0||$));return Tj(C,X,ne=>{var Ee;return{containers:[...(Ee=ne.containers)!=null?Ee:[],j]}}),Ar(ne=>{if(I.value!==0)return;let Ee=Gn(x);if(!Ee)return;let Ce=new ResizeObserver(Xe=>{for(let at of Xe){let it=at.target.getBoundingClientRect();it.x===0&&it.y===0&&it.width===0&&it.height===0&&G.close()}});Ce.observe(Ee),ne(()=>Ce.disconnect())}),()=>{let{id:ne,open:Ee,initialFocus:Ce,...Xe}=e,at={...i,ref:x,id:ne,role:"dialog","aria-modal":I.value===0?!0:void 0,"aria-labelledby":te.value,"aria-describedby":be.value},it={open:I.value===0};return ni(TE,{force:!0},()=>[ni(AM,()=>ni(pj,{target:x.value},()=>ni(TE,{force:!1},()=>ni(Ff,{initialFocus:Ce,containers:j,features:M.value?sa(F.value,{parent:Ff.features.RestoreFocus,leaf:Ff.features.All&~Ff.features.FocusLock}):Ff.features.None},()=>kr({ourProps:at,theirProps:Xe,slot:it,attrs:i,slots:r,visible:I.value===0,features:pc.RenderStrategy|pc.Static,name:"Dialog"}))))),ni(Fv,{features:$p.Hidden,ref:w})])}}}),Ij=lt({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:()=>`headlessui-dialog-panel-${Bo()}`}},setup(e,{attrs:t,slots:i,expose:r}){let s=DM("DialogPanel");r({el:s.panelRef,$el:s.panelRef});function u(d){d.stopPropagation()}return()=>{let{id:d,...l}=e,m={id:d,ref:s.panelRef,onClick:u};return kr({ourProps:m,theirProps:l,slot:{open:s.dialogState.value===0},attrs:t,slots:i,name:"DialogPanel"})}}});var Aj=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Aj||{});let LM=Symbol("DisclosureContext");function D1(e){let t=wi(LM,null);if(t===null){let i=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,D1),i}return t}let OM=Symbol("DisclosurePanelContext");function Mj(){return wi(OM,null)}let kj=lt({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(e,{slots:t,attrs:i}){let r=Fe(e.defaultOpen?0:1),s=Fe(null),u=Fe(null),d={buttonId:Fe(null),panelId:Fe(null),disclosureState:r,panel:s,button:u,toggleDisclosure(){r.value=sa(r.value,{[0]:1,[1]:0})},closeDisclosure(){r.value!==1&&(r.value=1)},close(l){d.closeDisclosure();let m=(()=>l?l instanceof HTMLElement?l:l.value instanceof HTMLElement?Gn(l):Gn(d.button):Gn(d.button))();m==null||m.focus()}};return Oi(LM,d),A1(Oe(()=>sa(r.value,{[0]:vr.Open,[1]:vr.Closed}))),()=>{let{defaultOpen:l,...m}=e,g={open:r.value===0,close:d.close};return kr({theirProps:m,ourProps:{},slot:g,slots:t,attrs:i,name:"Disclosure"})}}}),Pj=lt({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-disclosure-button-${Bo()}`}},setup(e,{attrs:t,slots:i,expose:r}){let s=D1("DisclosureButton");Bn(()=>{s.buttonId.value=e.id}),Wi(()=>{s.buttonId.value=null});let u=Mj(),d=Oe(()=>u===null?!1:u.value===s.panelId.value),l=Fe(null);r({el:l,$el:l}),d.value||Ar(()=>{s.button.value=l.value});let m=M1(Oe(()=>({as:e.as,type:t.type})),l);function g(){var C;e.disabled||(d.value?(s.toggleDisclosure(),(C=Gn(s.button))==null||C.focus()):s.toggleDisclosure())}function x(C){var I;if(!e.disabled)if(d.value)switch(C.key){case Hi.Space:case Hi.Enter:C.preventDefault(),C.stopPropagation(),s.toggleDisclosure(),(I=Gn(s.button))==null||I.focus();break}else switch(C.key){case Hi.Space:case Hi.Enter:C.preventDefault(),C.stopPropagation(),s.toggleDisclosure();break}}function w(C){switch(C.key){case Hi.Space:C.preventDefault();break}}return()=>{let C={open:s.disclosureState.value===0},{id:I,...M}=e,L=d.value?{ref:l,type:m.value,onClick:g,onKeydown:x}:{id:I,ref:l,type:m.value,"aria-expanded":e.disabled?void 0:s.disclosureState.value===0,"aria-controls":Gn(s.panel)?s.panelId.value:void 0,disabled:e.disabled?!0:void 0,onClick:g,onKeydown:x,onKeyup:w};return kr({ourProps:L,theirProps:M,slot:C,attrs:t,slots:i,name:"DisclosureButton"})}}}),Dj=lt({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-disclosure-panel-${Bo()}`}},setup(e,{attrs:t,slots:i,expose:r}){let s=D1("DisclosurePanel");Bn(()=>{s.panelId.value=e.id}),Wi(()=>{s.panelId.value=null}),r({el:s.panel,$el:s.panel}),Oi(OM,s.panelId);let u=um(),d=Oe(()=>u!==null?(u.value&vr.Open)===vr.Open:s.disclosureState.value===0);return()=>{let l={open:s.disclosureState.value===0,close:s.close},{id:m,...g}=e,x={id:m,ref:s.panel};return kr({ourProps:x,theirProps:g,slot:l,attrs:t,slots:i,features:pc.RenderStrategy|pc.Static,visible:d.value,name:"DisclosurePanel"})}}});var Lj=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Lj||{}),Oj=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Oj||{});function Rj(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let RM=Symbol("MenuContext");function F_(e){let t=wi(RM,null);if(t===null){let i=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,F_),i}return t}let Fj=lt({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:i}){let r=Fe(1),s=Fe(null),u=Fe(null),d=Fe([]),l=Fe(""),m=Fe(null),g=Fe(1);function x(C=I=>I){let I=m.value!==null?d.value[m.value]:null,M=bM(C(d.value.slice()),$=>Gn($.dataRef.domRef)),L=I?M.indexOf(I):null;return L===-1&&(L=null),{items:M,activeItemIndex:L}}let w={menuState:r,buttonRef:s,itemsRef:u,items:d,searchQuery:l,activeItemIndex:m,activationTrigger:g,closeMenu:()=>{r.value=1,m.value=null},openMenu:()=>r.value=0,goToItem(C,I,M){let L=x(),$=HU(C===Qs.Specific?{focus:Qs.Specific,id:I}:{focus:C},{resolveItems:()=>L.items,resolveActiveIndex:()=>L.activeItemIndex,resolveId:F=>F.id,resolveDisabled:F=>F.dataRef.disabled});l.value="",m.value=$,g.value=M??1,d.value=L.items},search(C){let I=l.value!==""?0:1;l.value+=C.toLowerCase();let M=(m.value!==null?d.value.slice(m.value+I).concat(d.value.slice(0,m.value+I)):d.value).find($=>$.dataRef.textValue.startsWith(l.value)&&!$.dataRef.disabled),L=M?d.value.indexOf(M):-1;L===-1||L===m.value||(m.value=L,g.value=1)},clearSearch(){l.value=""},registerItem(C,I){let M=x(L=>[...L,{id:C,dataRef:I}]);d.value=M.items,m.value=M.activeItemIndex,g.value=1},unregisterItem(C){let I=x(M=>{let L=M.findIndex($=>$.id===C);return L!==-1&&M.splice(L,1),M});d.value=I.items,m.value=I.activeItemIndex,g.value=1}};return xM([s,u],(C,I)=>{var M;w.closeMenu(),P1(I,k1.Loose)||(C.preventDefault(),(M=Gn(s))==null||M.focus())},Oe(()=>r.value===0)),Oi(RM,w),A1(Oe(()=>sa(r.value,{[0]:vr.Open,[1]:vr.Closed}))),()=>{let C={open:r.value===0,close:w.closeMenu};return kr({ourProps:{},theirProps:e,slot:C,slots:t,attrs:i,name:"Menu"})}}}),$j=lt({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-menu-button-${Bo()}`}},setup(e,{attrs:t,slots:i,expose:r}){let s=F_("MenuButton");r({el:s.buttonRef,$el:s.buttonRef});function u(g){switch(g.key){case Hi.Space:case Hi.Enter:case Hi.ArrowDown:g.preventDefault(),g.stopPropagation(),s.openMenu(),Ir(()=>{var x;(x=Gn(s.itemsRef))==null||x.focus({preventScroll:!0}),s.goToItem(Qs.First)});break;case Hi.ArrowUp:g.preventDefault(),g.stopPropagation(),s.openMenu(),Ir(()=>{var x;(x=Gn(s.itemsRef))==null||x.focus({preventScroll:!0}),s.goToItem(Qs.Last)});break}}function d(g){switch(g.key){case Hi.Space:g.preventDefault();break}}function l(g){e.disabled||(s.menuState.value===0?(s.closeMenu(),Ir(()=>{var x;return(x=Gn(s.buttonRef))==null?void 0:x.focus({preventScroll:!0})})):(g.preventDefault(),s.openMenu(),Rj(()=>{var x;return(x=Gn(s.itemsRef))==null?void 0:x.focus({preventScroll:!0})})))}let m=M1(Oe(()=>({as:e.as,type:t.type})),s.buttonRef);return()=>{var g;let x={open:s.menuState.value===0},{id:w,...C}=e,I={ref:s.buttonRef,id:w,type:m.value,"aria-haspopup":"menu","aria-controls":(g=Gn(s.itemsRef))==null?void 0:g.id,"aria-expanded":e.disabled?void 0:s.menuState.value===0,onKeydown:u,onKeyup:d,onClick:l};return kr({ourProps:I,theirProps:C,slot:x,attrs:t,slots:i,name:"MenuButton"})}}}),zj=lt({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${Bo()}`}},setup(e,{attrs:t,slots:i,expose:r}){let s=F_("MenuItems"),u=Fe(null);r({el:s.itemsRef,$el:s.itemsRef}),KU({container:Oe(()=>Gn(s.itemsRef)),enabled:Oe(()=>s.menuState.value===0),accept(x){return x.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:x.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(x){x.setAttribute("role","none")}});function d(x){var w;switch(u.value&&clearTimeout(u.value),x.key){case Hi.Space:if(s.searchQuery.value!=="")return x.preventDefault(),x.stopPropagation(),s.search(x.key);case Hi.Enter:if(x.preventDefault(),x.stopPropagation(),s.activeItemIndex.value!==null){let C=s.items.value[s.activeItemIndex.value];(w=Gn(C.dataRef.domRef))==null||w.click()}s.closeMenu(),yM(Gn(s.buttonRef));break;case Hi.ArrowDown:return x.preventDefault(),x.stopPropagation(),s.goToItem(Qs.Next);case Hi.ArrowUp:return x.preventDefault(),x.stopPropagation(),s.goToItem(Qs.Previous);case Hi.Home:case Hi.PageUp:return x.preventDefault(),x.stopPropagation(),s.goToItem(Qs.First);case Hi.End:case Hi.PageDown:return x.preventDefault(),x.stopPropagation(),s.goToItem(Qs.Last);case Hi.Escape:x.preventDefault(),x.stopPropagation(),s.closeMenu(),Ir(()=>{var C;return(C=Gn(s.buttonRef))==null?void 0:C.focus({preventScroll:!0})});break;case Hi.Tab:x.preventDefault(),x.stopPropagation(),s.closeMenu(),Ir(()=>ej(Gn(s.buttonRef),x.shiftKey?xo.Previous:xo.Next));break;default:x.key.length===1&&(s.search(x.key),u.value=setTimeout(()=>s.clearSearch(),350));break}}function l(x){switch(x.key){case Hi.Space:x.preventDefault();break}}let m=um(),g=Oe(()=>m!==null?(m.value&vr.Open)===vr.Open:s.menuState.value===0);return()=>{var x,w;let C={open:s.menuState.value===0},{id:I,...M}=e,L={"aria-activedescendant":s.activeItemIndex.value===null||(x=s.items.value[s.activeItemIndex.value])==null?void 0:x.id,"aria-labelledby":(w=Gn(s.buttonRef))==null?void 0:w.id,id:I,onKeydown:d,onKeyup:l,role:"menu",tabIndex:0,ref:s.itemsRef};return kr({ourProps:L,theirProps:M,slot:C,attrs:t,slots:i,features:pc.RenderStrategy|pc.Static,visible:g.value,name:"MenuItems"})}}}),Bj=lt({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${Bo()}`}},setup(e,{slots:t,attrs:i,expose:r}){let s=F_("MenuItem"),u=Fe(null);r({el:u,$el:u});let d=Oe(()=>s.activeItemIndex.value!==null?s.items.value[s.activeItemIndex.value].id===e.id:!1),l=Oe(()=>({disabled:e.disabled,textValue:"",domRef:u}));Bn(()=>{var M,L;let $=(L=(M=Gn(u))==null?void 0:M.textContent)==null?void 0:L.toLowerCase().trim();$!==void 0&&(l.value.textValue=$)}),Bn(()=>s.registerItem(e.id,l)),Wi(()=>s.unregisterItem(e.id)),Ar(()=>{s.menuState.value===0&&d.value&&s.activationTrigger.value!==0&&Ir(()=>{var M,L;return(L=(M=Gn(u))==null?void 0:M.scrollIntoView)==null?void 0:L.call(M,{block:"nearest"})})});function m(M){if(e.disabled)return M.preventDefault();s.closeMenu(),yM(Gn(s.buttonRef))}function g(){if(e.disabled)return s.goToItem(Qs.Nothing);s.goToItem(Qs.Specific,e.id)}let x=ij();function w(M){x.update(M)}function C(M){x.wasMoved(M)&&(e.disabled||d.value||s.goToItem(Qs.Specific,e.id,0))}function I(M){x.wasMoved(M)&&(e.disabled||d.value&&s.goToItem(Qs.Nothing))}return()=>{let{disabled:M}=e,L={active:d.value,disabled:M,close:s.closeMenu},{id:$,...F}=e;return kr({ourProps:{id:$,ref:u,role:"menuitem",tabIndex:M===!0?void 0:-1,"aria-disabled":M===!0?!0:void 0,disabled:void 0,onClick:m,onFocus:g,onPointerenter:w,onMouseenter:w,onPointermove:C,onMousemove:C,onPointerleave:I,onMouseleave:I},theirProps:{...i,...F},slot:L,attrs:i,slots:t,name:"MenuItem"})}}}),FM=Symbol("LabelContext");function $M(){let e=wi(FM,null);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,$M),t}return e}function Nj({slot:e={},name:t="Label",props:i={}}={}){let r=Fe([]);function s(u){return r.value.push(u),()=>{let d=r.value.indexOf(u);d!==-1&&r.value.splice(d,1)}}return Oi(FM,{register:s,slot:e,name:t,props:i}),Oe(()=>r.value.length>0?r.value.join(" "):void 0)}let Uj=lt({name:"Label",props:{as:{type:[Object,String],default:"label"},passive:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-label-${Bo()}`}},setup(e,{slots:t,attrs:i}){let r=$M();return Bn(()=>Wi(r.register(e.id))),()=>{let{name:s="Label",slot:u={},props:d={}}=r,{id:l,passive:m,...g}=e,x={...Object.entries(d).reduce((w,[C,I])=>Object.assign(w,{[C]:he(I)}),{}),id:l};return m&&(delete x.onClick,delete x.htmlFor,delete g.onClick),kr({ourProps:x,theirProps:g,slot:u,attrs:i,slots:t,name:s})}}}),zM=Symbol("GroupContext"),jj=lt({name:"SwitchGroup",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:i}){let r=Fe(null),s=Nj({name:"SwitchLabel",props:{htmlFor:Oe(()=>{var d;return(d=r.value)==null?void 0:d.id}),onClick(d){r.value&&(d.currentTarget.tagName==="LABEL"&&d.preventDefault(),r.value.click(),r.value.focus({preventScroll:!0}))}}}),u=PM({name:"SwitchDescription"});return Oi(zM,{switchRef:r,labelledby:s,describedby:u}),()=>kr({theirProps:e,ourProps:{},slot:{},slots:t,attrs:i,name:"SwitchGroup"})}}),Vj=lt({name:"Switch",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:()=>`headlessui-switch-${Bo()}`}},inheritAttrs:!1,setup(e,{emit:t,attrs:i,slots:r,expose:s}){let u=wi(zM,null),[d,l]=nj(Oe(()=>e.modelValue),$=>t("update:modelValue",$),Oe(()=>e.defaultChecked));function m(){l(!d.value)}let g=Fe(null),x=u===null?g:u.switchRef,w=M1(Oe(()=>({as:e.as,type:i.type})),x);s({el:x,$el:x});function C($){$.preventDefault(),m()}function I($){$.key===Hi.Space?($.preventDefault(),m()):$.key===Hi.Enter&&tj($.currentTarget)}function M($){$.preventDefault()}let L=Oe(()=>{var $,F;return(F=($=Gn(x))==null?void 0:$.closest)==null?void 0:F.call($,"form")});return Bn(()=>{fn([L],()=>{if(!L.value||e.defaultChecked===void 0)return;function $(){l(e.defaultChecked)}return L.value.addEventListener("reset",$),()=>{var F;(F=L.value)==null||F.removeEventListener("reset",$)}},{immediate:!0})}),()=>{let{id:$,name:F,value:U,form:ee,...V}=e,Q={checked:d.value},ae={id:$,ref:x,role:"switch",type:w.value,tabIndex:0,"aria-checked":d.value,"aria-labelledby":u==null?void 0:u.labelledby.value,"aria-describedby":u==null?void 0:u.describedby.value,onClick:C,onKeyup:I,onKeypress:M};return ni(Nt,[F!=null&&d.value!=null?ni(Fv,BU({features:$p.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:d.value,form:ee,name:F,value:U})):null,kr({ourProps:ae,theirProps:{...i,...I1(V,["modelValue","defaultChecked"])},slot:Q,attrs:i,slots:r,name:"Switch"})])}}}),EE=Uj;function Hj(e){let t={called:!1};return(...i)=>{if(!t.called)return t.called=!0,e(...i)}}function P0(e,...t){e&&t.length>0&&e.classList.add(...t)}function Bg(e,...t){e&&t.length>0&&e.classList.remove(...t)}var Kb=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(Kb||{});function Gj(e,t){let i=R_();if(!e)return i.dispose;let{transitionDuration:r,transitionDelay:s}=getComputedStyle(e),[u,d]=[r,s].map(l=>{let[m=0]=l.split(",").filter(Boolean).map(g=>g.includes("ms")?parseFloat(g):parseFloat(g)*1e3).sort((g,x)=>x-g);return m});return u!==0?i.setTimeout(()=>t("finished"),u+d):t("finished"),i.add(()=>t("cancelled")),i.dispose}function CE(e,t,i,r,s,u){let d=R_(),l=u!==void 0?Hj(u):()=>{};return Bg(e,...s),P0(e,...t,...i),d.nextFrame(()=>{Bg(e,...i),P0(e,...r),d.add(Gj(e,m=>(Bg(e,...r,...t),P0(e,...s),l(m))))}),d.add(()=>Bg(e,...t,...i,...r,...s)),d.add(()=>l("cancelled")),d.dispose}function Kc(e=""){return e.split(" ").filter(t=>t.trim().length>1)}let L1=Symbol("TransitionContext");var Wj=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Wj||{});function qj(){return wi(L1,null)!==null}function Zj(){let e=wi(L1,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function Kj(){let e=wi(O1,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let O1=Symbol("NestingContext");function $_(e){return"children"in e?$_(e.children):e.value.filter(({state:t})=>t==="visible").length>0}function BM(e){let t=Fe([]),i=Fe(!1);Bn(()=>i.value=!0),Wi(()=>i.value=!1);function r(u,d=Yl.Hidden){let l=t.value.findIndex(({id:m})=>m===u);l!==-1&&(sa(d,{[Yl.Unmount](){t.value.splice(l,1)},[Yl.Hidden](){t.value[l].state="hidden"}}),!$_(t)&&i.value&&(e==null||e()))}function s(u){let d=t.value.find(({id:l})=>l===u);return d?d.state!=="visible"&&(d.state="visible"):t.value.push({id:u,state:"visible"}),()=>r(u,Yl.Unmount)}return{children:t,register:s,unregister:r}}let NM=pc.RenderStrategy,$v=lt({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:i,slots:r,expose:s}){let u=Fe(0);function d(){u.value|=vr.Opening,t("beforeEnter")}function l(){u.value&=~vr.Opening,t("afterEnter")}function m(){u.value|=vr.Closing,t("beforeLeave")}function g(){u.value&=~vr.Closing,t("afterLeave")}if(!qj()&&GU())return()=>ni(UM,{...e,onBeforeEnter:d,onAfterEnter:l,onBeforeLeave:m,onAfterLeave:g},r);let x=Fe(null),w=Oe(()=>e.unmount?Yl.Unmount:Yl.Hidden);s({el:x,$el:x});let{show:C,appear:I}=Zj(),{register:M,unregister:L}=Kj(),$=Fe(C.value?"visible":"hidden"),F={value:!0},U=Bo(),ee={value:!1},V=BM(()=>{!ee.value&&$.value!=="hidden"&&($.value="hidden",L(U),g())});Bn(()=>{let X=M(U);Wi(X)}),Ar(()=>{if(w.value===Yl.Hidden&&U){if(C.value&&$.value!=="visible"){$.value="visible";return}sa($.value,{hidden:()=>L(U),visible:()=>M(U)})}});let Q=Kc(e.enter),ae=Kc(e.enterFrom),be=Kc(e.enterTo),te=Kc(e.entered),G=Kc(e.leave),j=Kc(e.leaveFrom),z=Kc(e.leaveTo);Bn(()=>{Ar(()=>{if($.value==="visible"){let X=Gn(x);if(X instanceof Comment&&X.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function ie(X){let ne=F.value&&!I.value,Ee=Gn(x);!Ee||!(Ee instanceof HTMLElement)||ne||(ee.value=!0,C.value&&d(),C.value||m(),X(C.value?CE(Ee,Q,ae,be,te,Ce=>{ee.value=!1,Ce===Kb.Finished&&l()}):CE(Ee,G,j,z,te,Ce=>{ee.value=!1,Ce===Kb.Finished&&($_(V)||($.value="hidden",L(U),g()))})))}return Bn(()=>{fn([C],(X,ne,Ee)=>{ie(Ee),F.value=!1},{immediate:!0})}),Oi(O1,V),A1(Oe(()=>sa($.value,{visible:vr.Open,hidden:vr.Closed})|u.value)),()=>{let{appear:X,show:ne,enter:Ee,enterFrom:Ce,enterTo:Xe,entered:at,leave:it,leaveFrom:$t,leaveTo:Ct,...tt}=e,et={ref:x},dt={...tt,...I.value&&C.value&&dm.isServer?{class:Dn([i.class,tt.class,...Q,...ae])}:{}};return kr({theirProps:dt,ourProps:et,slot:{},slots:r,attrs:i,features:NM,visible:$.value==="visible",name:"TransitionChild"})}}}),Xj=$v,UM=lt({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:i,slots:r}){let s=um(),u=Oe(()=>e.show===null&&s!==null?(s.value&vr.Open)===vr.Open:e.show);Ar(()=>{if(![!0,!1].includes(u.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let d=Fe(u.value?"visible":"hidden"),l=BM(()=>{d.value="hidden"}),m=Fe(!0),g={show:u,appear:Oe(()=>e.appear||!m.value)};return Bn(()=>{Ar(()=>{m.value=!1,u.value?d.value="visible":$_(l)||(d.value="hidden")})}),Oi(O1,l),Oi(L1,g),()=>{let x=I1(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),w={unmount:e.unmount};return kr({ourProps:{...w,as:"template"},theirProps:{},slot:{},slots:{...r,default:()=>[ni(Xj,{onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave"),...i,...w,...x},r.default)]},attrs:{},features:NM,visible:d.value==="visible",name:"Transition"})}}});function wo(e){return e.split("-")[1]}function R1(e){return e==="y"?"height":"width"}function ol(e){return e.split("-")[0]}function hm(e){return["top","bottom"].includes(ol(e))?"x":"y"}function IE(e,t,i){let{reference:r,floating:s}=e;const u=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,l=hm(t),m=R1(l),g=r[m]/2-s[m]/2,x=l==="x";let w;switch(ol(t)){case"top":w={x:u,y:r.y-s.height};break;case"bottom":w={x:u,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y:d};break;case"left":w={x:r.x-s.width,y:d};break;default:w={x:r.x,y:r.y}}switch(wo(t)){case"start":w[l]-=g*(i&&x?-1:1);break;case"end":w[l]+=g*(i&&x?-1:1)}return w}const Yj=async(e,t,i)=>{const{placement:r="bottom",strategy:s="absolute",middleware:u=[],platform:d}=i,l=u.filter(Boolean),m=await(d.isRTL==null?void 0:d.isRTL(t));let g=await d.getElementRects({reference:e,floating:t,strategy:s}),{x,y:w}=IE(g,r,m),C=r,I={},M=0;for(let L=0;L<l.length;L++){const{name:$,fn:F}=l[L],{x:U,y:ee,data:V,reset:Q}=await F({x,y:w,initialPlacement:r,placement:C,strategy:s,middlewareData:I,rects:g,platform:d,elements:{reference:e,floating:t}});x=U??x,w=ee??w,I={...I,[$]:{...I[$],...V}},Q&&M<=50&&(M++,typeof Q=="object"&&(Q.placement&&(C=Q.placement),Q.rects&&(g=Q.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:s}):Q.rects),{x,y:w}=IE(g,C,m)),L=-1)}return{x,y:w,placement:C,strategy:s,middlewareData:I}};function jM(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function zv(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function zp(e,t){var i;t===void 0&&(t={});const{x:r,y:s,platform:u,rects:d,elements:l,strategy:m}=e,{boundary:g="clippingAncestors",rootBoundary:x="viewport",elementContext:w="floating",altBoundary:C=!1,padding:I=0}=t,M=jM(I),L=l[C?w==="floating"?"reference":"floating":w],$=zv(await u.getClippingRect({element:(i=await(u.isElement==null?void 0:u.isElement(L)))==null||i?L:L.contextElement||await(u.getDocumentElement==null?void 0:u.getDocumentElement(l.floating)),boundary:g,rootBoundary:x,strategy:m})),F=w==="floating"?{...d.floating,x:r,y:s}:d.reference,U=await(u.getOffsetParent==null?void 0:u.getOffsetParent(l.floating)),ee=await(u.isElement==null?void 0:u.isElement(U))&&await(u.getScale==null?void 0:u.getScale(U))||{x:1,y:1},V=zv(u.convertOffsetParentRelativeRectToViewportRelativeRect?await u.convertOffsetParentRelativeRectToViewportRelativeRect({rect:F,offsetParent:U,strategy:m}):F);return{top:($.top-V.top+M.top)/ee.y,bottom:(V.bottom-$.bottom+M.bottom)/ee.y,left:($.left-V.left+M.left)/ee.x,right:(V.right-$.right+M.right)/ee.x}}const Jj=Math.min,Qj=Math.max;function Xb(e,t,i){return Qj(e,Jj(t,i))}const e7=e=>({name:"arrow",options:e,async fn(t){const{element:i,padding:r=0}=e||{},{x:s,y:u,placement:d,rects:l,platform:m,elements:g}=t;if(i==null)return{};const x=jM(r),w={x:s,y:u},C=hm(d),I=R1(C),M=await m.getDimensions(i),L=C==="y",$=L?"top":"left",F=L?"bottom":"right",U=L?"clientHeight":"clientWidth",ee=l.reference[I]+l.reference[C]-w[C]-l.floating[I],V=w[C]-l.reference[C],Q=await(m.getOffsetParent==null?void 0:m.getOffsetParent(i));let ae=Q?Q[U]:0;ae&&await(m.isElement==null?void 0:m.isElement(Q))||(ae=g.floating[U]||l.floating[I]);const be=ee/2-V/2,te=x[$],G=ae-M[I]-x[F],j=ae/2-M[I]/2+be,z=Xb(te,j,G),ie=wo(d)!=null&&j!=z&&l.reference[I]/2-(j<te?x[$]:x[F])-M[I]/2<0;return{[C]:w[C]-(ie?j<te?te-j:G-j:0),data:{[C]:z,centerOffset:j-z}}}}),VM=["top","right","bottom","left"],AE=VM.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]),t7={left:"right",right:"left",bottom:"top",top:"bottom"};function Bv(e){return e.replace(/left|right|bottom|top/g,t=>t7[t])}function HM(e,t,i){i===void 0&&(i=!1);const r=wo(e),s=hm(e),u=R1(s);let d=s==="x"?r===(i?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[u]>t.floating[u]&&(d=Bv(d)),{main:d,cross:Bv(d)}}const n7={start:"end",end:"start"};function uv(e){return e.replace(/start|end/g,t=>n7[t])}const i7=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var i,r,s;const{rects:u,middlewareData:d,placement:l,platform:m,elements:g}=t,{crossAxis:x=!1,alignment:w,allowedPlacements:C=AE,autoAlignment:I=!0,...M}=e,L=w!==void 0||C===AE?function(j,z,ie){return(j?[...ie.filter(X=>wo(X)===j),...ie.filter(X=>wo(X)!==j)]:ie.filter(X=>ol(X)===X)).filter(X=>!j||wo(X)===j||!!z&&uv(X)!==X)}(w||null,I,C):C,$=await zp(t,M),F=((i=d.autoPlacement)==null?void 0:i.index)||0,U=L[F];if(U==null)return{};const{main:ee,cross:V}=HM(U,u,await(m.isRTL==null?void 0:m.isRTL(g.floating)));if(l!==U)return{reset:{placement:L[0]}};const Q=[$[ol(U)],$[ee],$[V]],ae=[...((r=d.autoPlacement)==null?void 0:r.overflows)||[],{placement:U,overflows:Q}],be=L[F+1];if(be)return{data:{index:F+1,overflows:ae},reset:{placement:be}};const te=ae.map(j=>{const z=wo(j.placement);return[j.placement,z&&x?j.overflows.slice(0,2).reduce((ie,X)=>ie+X,0):j.overflows[0],j.overflows]}).sort((j,z)=>j[1]-z[1]),G=((s=te.filter(j=>j[2].slice(0,wo(j[0])?2:3).every(z=>z<=0))[0])==null?void 0:s[0])||te[0][0];return G!==l?{data:{index:F+1,overflows:ae},reset:{placement:G}}:{}}}},r7=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var i;const{placement:r,middlewareData:s,rects:u,initialPlacement:d,platform:l,elements:m}=t,{mainAxis:g=!0,crossAxis:x=!0,fallbackPlacements:w,fallbackStrategy:C="bestFit",fallbackAxisSideDirection:I="none",flipAlignment:M=!0,...L}=e,$=ol(r),F=ol(d)===d,U=await(l.isRTL==null?void 0:l.isRTL(m.floating)),ee=w||(F||!M?[Bv(d)]:function(z){const ie=Bv(z);return[uv(z),ie,uv(ie)]}(d));w||I==="none"||ee.push(...function(z,ie,X,ne){const Ee=wo(z);let Ce=function(Xe,at,it){const $t=["left","right"],Ct=["right","left"],tt=["top","bottom"],et=["bottom","top"];switch(Xe){case"top":case"bottom":return it?at?Ct:$t:at?$t:Ct;case"left":case"right":return at?tt:et;default:return[]}}(ol(z),X==="start",ne);return Ee&&(Ce=Ce.map(Xe=>Xe+"-"+Ee),ie&&(Ce=Ce.concat(Ce.map(uv)))),Ce}(d,M,I,U));const V=[d,...ee],Q=await zp(t,L),ae=[];let be=((i=s.flip)==null?void 0:i.overflows)||[];if(g&&ae.push(Q[$]),x){const{main:z,cross:ie}=HM(r,u,U);ae.push(Q[z],Q[ie])}if(be=[...be,{placement:r,overflows:ae}],!ae.every(z=>z<=0)){var te,G;const z=(((te=s.flip)==null?void 0:te.index)||0)+1,ie=V[z];if(ie)return{data:{index:z,overflows:be},reset:{placement:ie}};let X=(G=be.filter(ne=>ne.overflows[0]<=0).sort((ne,Ee)=>ne.overflows[1]-Ee.overflows[1])[0])==null?void 0:G.placement;if(!X)switch(C){case"bestFit":{var j;const ne=(j=be.map(Ee=>[Ee.placement,Ee.overflows.filter(Ce=>Ce>0).reduce((Ce,Xe)=>Ce+Xe,0)]).sort((Ee,Ce)=>Ee[1]-Ce[1])[0])==null?void 0:j[0];ne&&(X=ne);break}case"initialPlacement":X=d}if(r!==X)return{reset:{placement:X}}}return{}}}};function ME(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function kE(e){return VM.some(t=>e[t]>=0)}const s7=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{strategy:i="referenceHidden",...r}=e,{rects:s}=t;switch(i){case"referenceHidden":{const u=ME(await zp(t,{...r,elementContext:"reference"}),s.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:kE(u)}}}case"escaped":{const u=ME(await zp(t,{...r,altBoundary:!0}),s.floating);return{data:{escapedOffsets:u,escaped:kE(u)}}}default:return{}}}}},a7=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:i,y:r}=t,s=await async function(u,d){const{placement:l,platform:m,elements:g}=u,x=await(m.isRTL==null?void 0:m.isRTL(g.floating)),w=ol(l),C=wo(l),I=hm(l)==="x",M=["left","top"].includes(w)?-1:1,L=x&&I?-1:1,$=typeof d=="function"?d(u):d;let{mainAxis:F,crossAxis:U,alignmentAxis:ee}=typeof $=="number"?{mainAxis:$,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...$};return C&&typeof ee=="number"&&(U=C==="end"?-1*ee:ee),I?{x:U*L,y:F*M}:{x:F*M,y:U*L}}(t,e);return{x:i+s.x,y:r+s.y,data:s}}}};function o7(e){return e==="x"?"y":"x"}const l7=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:i,y:r,placement:s}=t,{mainAxis:u=!0,crossAxis:d=!1,limiter:l={fn:$=>{let{x:F,y:U}=$;return{x:F,y:U}}},...m}=e,g={x:i,y:r},x=await zp(t,m),w=hm(ol(s)),C=o7(w);let I=g[w],M=g[C];if(u){const $=w==="y"?"bottom":"right";I=Xb(I+x[w==="y"?"top":"left"],I,I-x[$])}if(d){const $=C==="y"?"bottom":"right";M=Xb(M+x[C==="y"?"top":"left"],M,M-x[$])}const L=l.fn({...t,[w]:I,[C]:M});return{...L,data:{x:L.x-i,y:L.y-r}}}}};function xa(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Xa(e){return xa(e).getComputedStyle(e)}function GM(e){return e instanceof xa(e).Node}function mc(e){return GM(e)?(e.nodeName||"").toLowerCase():""}function Qa(e){return e instanceof xa(e).HTMLElement}function ea(e){return e instanceof xa(e).Element}function PE(e){return typeof ShadowRoot>"u"?!1:e instanceof xa(e).ShadowRoot||e instanceof ShadowRoot}function Bp(e){const{overflow:t,overflowX:i,overflowY:r,display:s}=Xa(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+i)&&!["inline","contents"].includes(s)}function c7(e){return["table","td","th"].includes(mc(e))}function Yb(e){const t=F1(),i=Xa(e);return i.transform!=="none"||i.perspective!=="none"||!t&&!!i.backdropFilter&&i.backdropFilter!=="none"||!t&&!!i.filter&&i.filter!=="none"||["transform","perspective","filter"].some(r=>(i.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(i.contain||"").includes(r))}function F1(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function z_(e){return["html","body","#document"].includes(mc(e))}const DE=Math.min,mp=Math.max,Nv=Math.round;function WM(e){const t=Xa(e);let i=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Qa(e),u=s?e.offsetWidth:i,d=s?e.offsetHeight:r,l=Nv(i)!==u||Nv(r)!==d;return l&&(i=u,r=d),{width:i,height:r,fallback:l}}function qM(e){return ea(e)?e:e.contextElement}const ZM={x:1,y:1};function Zd(e){const t=qM(e);if(!Qa(t))return ZM;const i=t.getBoundingClientRect(),{width:r,height:s,fallback:u}=WM(t);let d=(u?Nv(i.width):i.width)/r,l=(u?Nv(i.height):i.height)/s;return d&&Number.isFinite(d)||(d=1),l&&Number.isFinite(l)||(l=1),{x:d,y:l}}const LE={x:0,y:0};function KM(e,t,i){var r,s;if(t===void 0&&(t=!0),!F1())return LE;const u=e?xa(e):window;return!i||t&&i!==u?LE:{x:((r=u.visualViewport)==null?void 0:r.offsetLeft)||0,y:((s=u.visualViewport)==null?void 0:s.offsetTop)||0}}function gu(e,t,i,r){t===void 0&&(t=!1),i===void 0&&(i=!1);const s=e.getBoundingClientRect(),u=qM(e);let d=ZM;t&&(r?ea(r)&&(d=Zd(r)):d=Zd(e));const l=KM(u,i,r);let m=(s.left+l.x)/d.x,g=(s.top+l.y)/d.y,x=s.width/d.x,w=s.height/d.y;if(u){const C=xa(u),I=r&&ea(r)?xa(r):r;let M=C.frameElement;for(;M&&r&&I!==C;){const L=Zd(M),$=M.getBoundingClientRect(),F=getComputedStyle(M);$.x+=(M.clientLeft+parseFloat(F.paddingLeft))*L.x,$.y+=(M.clientTop+parseFloat(F.paddingTop))*L.y,m*=L.x,g*=L.y,x*=L.x,w*=L.y,m+=$.x,g+=$.y,M=xa(M).frameElement}}return zv({width:x,height:w,x:m,y:g})}function ac(e){return((GM(e)?e.ownerDocument:e.document)||window.document).documentElement}function B_(e){return ea(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function XM(e){return gu(ac(e)).left+B_(e).scrollLeft}function lh(e){if(mc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||PE(e)&&e.host||ac(e);return PE(t)?t.host:t}function YM(e){const t=lh(e);return z_(t)?t.ownerDocument.body:Qa(t)&&Bp(t)?t:YM(t)}function gp(e,t){var i;t===void 0&&(t=[]);const r=YM(e),s=r===((i=e.ownerDocument)==null?void 0:i.body),u=xa(r);return s?t.concat(u,u.visualViewport||[],Bp(r)?r:[]):t.concat(r,gp(r))}function OE(e,t,i){let r;if(t==="viewport")r=function(s,u){const d=xa(s),l=ac(s),m=d.visualViewport;let g=l.clientWidth,x=l.clientHeight,w=0,C=0;if(m){g=m.width,x=m.height;const I=F1();(!I||I&&u==="fixed")&&(w=m.offsetLeft,C=m.offsetTop)}return{width:g,height:x,x:w,y:C}}(e,i);else if(t==="document")r=function(s){const u=ac(s),d=B_(s),l=s.ownerDocument.body,m=mp(u.scrollWidth,u.clientWidth,l.scrollWidth,l.clientWidth),g=mp(u.scrollHeight,u.clientHeight,l.scrollHeight,l.clientHeight);let x=-d.scrollLeft+XM(s);const w=-d.scrollTop;return Xa(l).direction==="rtl"&&(x+=mp(u.clientWidth,l.clientWidth)-m),{width:m,height:g,x,y:w}}(ac(e));else if(ea(t))r=function(s,u){const d=gu(s,!0,u==="fixed"),l=d.top+s.clientTop,m=d.left+s.clientLeft,g=Qa(s)?Zd(s):{x:1,y:1};return{width:s.clientWidth*g.x,height:s.clientHeight*g.y,x:m*g.x,y:l*g.y}}(t,i);else{const s=KM(e);r={...t,x:t.x-s.x,y:t.y-s.y}}return zv(r)}function JM(e,t){const i=lh(e);return!(i===t||!ea(i)||z_(i))&&(Xa(i).position==="fixed"||JM(i,t))}function RE(e,t){return Qa(e)&&Xa(e).position!=="fixed"?t?t(e):e.offsetParent:null}function FE(e,t){const i=xa(e);if(!Qa(e))return i;let r=RE(e,t);for(;r&&c7(r)&&Xa(r).position==="static";)r=RE(r,t);return r&&(mc(r)==="html"||mc(r)==="body"&&Xa(r).position==="static"&&!Yb(r))?i:r||function(s){let u=lh(s);for(;Qa(u)&&!z_(u);){if(Yb(u))return u;u=lh(u)}return null}(e)||i}function u7(e,t,i){const r=Qa(t),s=ac(t),u=i==="fixed",d=gu(e,!0,u,t);let l={scrollLeft:0,scrollTop:0};const m={x:0,y:0};if(r||!r&&!u)if((mc(t)!=="body"||Bp(s))&&(l=B_(t)),Qa(t)){const g=gu(t,!0,u,t);m.x=g.x+t.clientLeft,m.y=g.y+t.clientTop}else s&&(m.x=XM(s));return{x:d.left+l.scrollLeft-m.x,y:d.top+l.scrollTop-m.y,width:d.width,height:d.height}}const d7={getClippingRect:function(e){let{element:t,boundary:i,rootBoundary:r,strategy:s}=e;const u=i==="clippingAncestors"?function(g,x){const w=x.get(g);if(w)return w;let C=gp(g).filter($=>ea($)&&mc($)!=="body"),I=null;const M=Xa(g).position==="fixed";let L=M?lh(g):g;for(;ea(L)&&!z_(L);){const $=Xa(L),F=Yb(L);F||$.position!=="fixed"||(I=null),(M?!F&&!I:!F&&$.position==="static"&&I&&["absolute","fixed"].includes(I.position)||Bp(L)&&!F&&JM(g,L))?C=C.filter(U=>U!==L):I=$,L=lh(L)}return x.set(g,C),C}(t,this._c):[].concat(i),d=[...u,r],l=d[0],m=d.reduce((g,x)=>{const w=OE(t,x,s);return g.top=mp(w.top,g.top),g.right=DE(w.right,g.right),g.bottom=DE(w.bottom,g.bottom),g.left=mp(w.left,g.left),g},OE(t,l,s));return{width:m.right-m.left,height:m.bottom-m.top,x:m.left,y:m.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:i,strategy:r}=e;const s=Qa(i),u=ac(i);if(i===u)return t;let d={scrollLeft:0,scrollTop:0},l={x:1,y:1};const m={x:0,y:0};if((s||!s&&r!=="fixed")&&((mc(i)!=="body"||Bp(u))&&(d=B_(i)),Qa(i))){const g=gu(i);l=Zd(i),m.x=g.x+i.clientLeft,m.y=g.y+i.clientTop}return{width:t.width*l.x,height:t.height*l.y,x:t.x*l.x-d.scrollLeft*l.x+m.x,y:t.y*l.y-d.scrollTop*l.y+m.y}},isElement:ea,getDimensions:function(e){return WM(e)},getOffsetParent:FE,getDocumentElement:ac,getScale:Zd,async getElementRects(e){let{reference:t,floating:i,strategy:r}=e;const s=this.getOffsetParent||FE,u=this.getDimensions;return{reference:u7(t,await s(i),r),floating:{x:0,y:0,...await u(i)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>Xa(e).direction==="rtl"};function h7(e,t,i,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:u=!0,elementResize:d=!0,animationFrame:l=!1}=r,m=s||u?[...ea(e)?gp(e):e.contextElement?gp(e.contextElement):[],...gp(t)]:[];m.forEach(C=>{const I=!ea(C)&&C.toString().includes("V");!s||l&&!I||C.addEventListener("scroll",i,{passive:!0}),u&&C.addEventListener("resize",i)});let g,x=null;d&&(x=new ResizeObserver(()=>{i()}),ea(e)&&!l&&x.observe(e),ea(e)||!e.contextElement||l||x.observe(e.contextElement),x.observe(t));let w=l?gu(e):null;return l&&function C(){const I=gu(e);!w||I.x===w.x&&I.y===w.y&&I.width===w.width&&I.height===w.height||i(),w=I,g=requestAnimationFrame(C)}(),i(),()=>{var C;m.forEach(I=>{s&&I.removeEventListener("scroll",i),u&&I.removeEventListener("resize",i)}),(C=x)==null||C.disconnect(),x=null,l&&cancelAnimationFrame(g)}}const f7=(e,t,i)=>{const r=new Map,s={platform:d7,...i},u={...s.platform,_c:r};return Yj(e,t,{...s,platform:u})};function Jb(e){var t;return(t=e==null?void 0:e.$el)!=null?t:e}function p7(e){return{name:"arrow",options:e,fn(t){const i=Jb(he(e.element));return i==null?{}:e7({element:i,padding:e.padding}).fn(t)}}}function m7(e,t,i){i===void 0&&(i={});const r=i.whileElementsMounted,s=Oe(()=>{var Q;return(Q=he(i.open))!=null?Q:!0}),u=Oe(()=>he(i.middleware)),d=Oe(()=>{var Q;return(Q=he(i.placement))!=null?Q:"bottom"}),l=Oe(()=>{var Q;return(Q=he(i.strategy))!=null?Q:"absolute"}),m=Oe(()=>Jb(e.value)),g=Oe(()=>Jb(t.value)),x=Fe(null),w=Fe(null),C=Fe(l.value),I=Fe(d.value),M=bh({}),L=Fe(!1);let $;function F(){m.value==null||g.value==null||f7(m.value,g.value,{middleware:u.value,placement:d.value,strategy:l.value}).then(Q=>{x.value=Q.x,w.value=Q.y,C.value=Q.strategy,I.value=Q.placement,M.value=Q.middlewareData,L.value=!0})}function U(){typeof $=="function"&&($(),$=void 0)}function ee(){if(U(),r===void 0){F();return}if(m.value!=null&&g.value!=null){$=r(m.value,g.value,F);return}}function V(){s.value||(L.value=!1)}return fn([u,d,l],F,{flush:"sync"}),fn([m,g],ee,{flush:"sync"}),fn(s,V,{flush:"sync"}),Kp()&&Xp(U),{x:eu(x),y:eu(w),strategy:eu(C),placement:eu(I),middlewareData:eu(M),isPositioned:eu(L),update:F}}var g7=Object.defineProperty,v7=(e,t,i)=>t in e?g7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,_7=(e,t,i)=>(v7(e,typeof t!="symbol"?t+"":t,i),i);function Qb(e){if(e==null||e.value==null)return null;const t=e.value.$el??e.value;return t.$el?Qb(Fe(t)):t}class y7{constructor(){_7(this,"current",this.detect())}set(t){this.current!==t&&(this.current=t)}reset(){this.set(this.detect())}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}}const QM=new y7;function ek(e){return e.reduce((t,i)=>i.type===Nt?t.concat(ek(i.children)):t.concat(i),[])}function $E(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}function zE(e){return e=he(e),e&&(e==null?void 0:e.nodeType)!==Node.COMMENT_NODE}function b7(e,t,i,r,s){fn([()=>s.offset,()=>s.flip,()=>s.shift,()=>s.autoPlacement,()=>s.arrow,()=>s.hide,()=>s.middleware],()=>{const u=[];(typeof s.offset=="number"||typeof s.offset=="object"||typeof s.offset=="function")&&u.push(a7(s.offset)),(s.flip===!0||typeof s.flip=="number"||typeof s.flip=="object")&&u.push(r7({padding:typeof s.flip=="number"?s.flip:void 0,...typeof s.flip=="object"?s.flip:{}})),(s.shift===!0||typeof s.shift=="number"||typeof s.shift=="object")&&u.push(l7({padding:typeof s.shift=="number"?s.shift:void 0,...typeof s.shift=="object"?s.shift:{}})),(s.autoPlacement===!0||typeof s.autoPlacement=="object")&&u.push(i7(typeof s.autoPlacement=="object"?s.autoPlacement:void 0)),(s.arrow===!0||typeof s.arrow=="number")&&u.push(p7({element:r,padding:s.arrow===!0?0:s.arrow})),u.push(...typeof s.middleware=="function"?s.middleware({referenceEl:t,floatingEl:i}):s.middleware||[]),(s.hide===!0||typeof s.hide=="object")&&u.push(s7(typeof s.hide=="object"?s.hide:void 0)),e.value=u},{immediate:!0})}function x7(e,t,i){let r=()=>{};Bn(()=>{if(e&&QM.isClient&&typeof ResizeObserver<"u"&&t.value&&t.value instanceof Element){const s=new ResizeObserver(([u])=>{i.value=u.borderBoxSize.reduce((d,{inlineSize:l})=>d+l,0)});s.observe(t.value),r=()=>{s.disconnect(),i.value=null}}}),ao(()=>{r()})}const w7=e=>{switch(e){case"top":return"origin-bottom";case"bottom":return"origin-top";case"left":return"origin-right";case"right":return"origin-left";case"top-start":case"right-end":return"origin-bottom-left";case"top-end":case"left-end":return"origin-bottom-right";case"right-start":case"bottom-start":return"origin-top-left";case"left-start":case"bottom-end":return"origin-top-right";default:return""}};function S7(e,t){const i=Oe(()=>{if(typeof e.originClass=="function")return e.originClass(t.value);if(typeof e.originClass=="string")return e.originClass;if(e.tailwindcssOriginClass)return w7(t.value)}),r=Oe(()=>e.enter||i.value?`${e.enter||""} ${i.value||""}`:void 0),s=Oe(()=>e.leave||i.value?`${e.leave||""} ${i.value||""}`:void 0);return{originClassRef:i,enterActiveClassRef:r,leaveActiveClassRef:s}}const T7=Symbol("ReferenceContext"),E7=Symbol("FloatingContext"),C7=Symbol("ArrowContext"),Qt={as:{type:[String,Function],default:"template"},floatingAs:{type:[String,Function],default:"div"},show:{type:Boolean,default:null},placement:{type:String,default:"bottom-start"},strategy:{type:String,default:"absolute"},offset:[Number,Function,Object],shift:{type:[Boolean,Number,Object],default:!1},flip:{type:[Boolean,Number,Object],default:!1},arrow:{type:[Boolean,Number],default:!1},autoPlacement:{type:[Boolean,Object],default:!1},hide:{type:[Boolean,Object],default:!1},autoUpdate:{type:[Boolean,Object],default:!0},zIndex:{type:[Number,String],default:9999},transitionName:String,transitionType:String,enter:String,enterFrom:String,enterTo:String,leave:String,leaveFrom:String,leaveTo:String,originClass:[String,Function],tailwindcssOriginClass:{type:Boolean,default:!1},portal:{type:Boolean,default:!1},transform:{type:Boolean,default:!0},adaptiveWidth:{type:Boolean,default:!1},composable:{type:Boolean,default:!1},dialog:{type:Boolean,default:!1},middleware:{type:[Array,Function],default:()=>[]}};function I7(e,t,i,r){const{referenceRef:s}=r,u=t,d=zr(i,{ref:s}),l=ra(e,u.as==="template"?d:{});return u.as==="template"?l:typeof u.as=="string"?ni(u.as,d,[l]):ni(u.as,d,()=>[l])}function A7(e,t,i,r){const{floatingRef:s,props:u,mounted:d,show:l,x:m,y:g,placement:x,strategy:w,referenceElWidth:C,updateFloating:I}=r,M=zr({...u,as:u.floatingAs},t),{enterActiveClassRef:L,leaveActiveClassRef:$}=S7(M,x),F={enterActiveClass:L.value,enterFromClass:M.enterFrom,enterToClass:M.enterTo,leaveActiveClass:$.value,leaveFromClass:M.leaveFrom,leaveToClass:M.leaveTo},U={name:M.transitionName,type:M.transitionType,appear:!0,...M.transitionName?{}:F,onBeforeEnter(){l.value=!0},onAfterLeave(){l.value=!1}},ee={enter:L.value,enterFrom:M.enterFrom,enterTo:M.enterTo,leave:$.value,leaveFrom:M.leaveFrom,leaveTo:M.leaveTo,onBeforeEnter:U.onBeforeEnter,onAfterLeave:U.onAfterLeave},V={style:{...!M.dialog&&M.transform?{position:w.value,zIndex:M.zIndex,top:"0px",left:"0px",right:"auto",bottom:"auto",transform:`translate(${Math.round(m.value||0)}px,${Math.round(g.value||0)}px)`}:{position:w.value,zIndex:M.zIndex,top:`${g.value||0}px`,left:`${m.value||0}px`},width:M.adaptiveWidth&&typeof C.value=="number"?`${C.value}px`:void 0}};function Q(te){return M.portal?ni(AM,()=>te):te}function ae(te){const G=zr(V,i,M.dialog?{}:{ref:s});return M.as==="template"?te:typeof M.as=="string"?ni(M.as,G,te):ni(M.as,G,()=>te)}function be(){function te(){var G;const j=M.as==="template"?zr(V,i,M.dialog?{}:{ref:s}):null,z=ra(e,j);return((G=z.props)==null?void 0:G.unmount)===!1?(I(),z):typeof M.show!="boolean"||M.show?z:ot()}return QM.isServer?d.value&&M.show?te():ot():M.transitionChild?ni($v,{key:`placement-${x.value}`,...M.dialog?{ref:s}:{},as:"template",...ee},te):ni(Er,{...M.dialog?{ref:s}:{},...U},te)}return Q(ae(be()))}function M7(e,t,i,r,s){const u=Fe(!1),d=Jd(r,"placement"),l=Jd(r,"strategy"),m=bh({}),g=Fe(null),x=Fe(void 0),w=Fe(void 0),C=Oe(()=>Qb(t)),I=Oe(()=>Qb(i)),M=Oe(()=>zE(C)&&zE(I)),{x:L,y:$,placement:F,strategy:U,middlewareData:ee,update:V}=m7(C,I,{placement:d,strategy:l,middleware:m,whileElementsMounted:()=>{}}),Q=Fe(null);Bn(()=>{u.value=!0});function ae(){M.value&&(V(),s("update"))}fn([d,l,m],ae,{flush:"sync"}),b7(m,C,I,g,r),fn(ee,()=>{const z=ee.value.arrow;x.value=z==null?void 0:z.x,w.value=z==null?void 0:z.y}),x7(r.adaptiveWidth,C,Q),fn(e,async(z,ie,X)=>{if(await Ir(),e.value&&M.value&&r.autoUpdate){const ne=h7(C.value,I.value,ae,typeof r.autoUpdate=="object"?r.autoUpdate:void 0);s("show"),X(()=>{ne(),e.value||s("hide")})}},{flush:"post",immediate:!0});const be=Fe(!0);fn(C,()=>{!(C.value instanceof Element)&&M.value&&be.value&&(be.value=!1,window.requestAnimationFrame(()=>{be.value=!0,ae()}))},{flush:"sync"});const te={referenceRef:t,placement:F},G={floatingRef:i,props:r,mounted:u,show:e,x:L,y:$,placement:F,strategy:U,referenceElWidth:Q,updateFloating:ae},j={ref:g,placement:F,x,y:w};return Oi(C7,j),{referenceApi:te,floatingApi:G,arrowApi:j,x:L,y:$,placement:F,strategy:U,referenceEl:C,floatingEl:I,middlewareData:ee,update:ae}}const k7={name:"Float",inheritAttrs:!1,props:Qt,emits:["show","hide","update"],setup(e,{emit:t,slots:i,attrs:r}){const s=Fe(e.show??!1),u=Fe(null),d=Fe(null),{referenceApi:l,floatingApi:m,placement:g}=M7(s,u,d,e,t);function x(C){return e.as==="template"?C:typeof e.as=="string"?ni(e.as,r,C):ni(e.as,r,()=>C)}const w={placement:g.value};return e.composable||e.dialog?(Oi(T7,l),Oi(E7,m),()=>{if(i.default)return x(i.default(w))}):()=>{if(!i.default)return;const[C,I]=ek(i.default(w)).filter($E);if(!$E(C))return;const M=I7(C,{as:"template"},{},l),L=A7(I,{as:e.floatingAs},{},m);return x([M,L])}}};Qt.as;Qt.floatingAs,Qt.transitionName,Qt.transitionType,Qt.enter,Qt.enterFrom,Qt.enterTo,Qt.leave,Qt.leaveFrom,Qt.leaveTo,Qt.originClass,Qt.tailwindcssOriginClass;({...Qt.as});Qt.as,Qt.show,Qt.placement,Qt.strategy,Qt.offset,Qt.shift,Qt.flip,Qt.arrow,Qt.autoPlacement,Qt.hide,Qt.autoUpdate,Qt.zIndex,Qt.transitionName,Qt.transitionType,Qt.enter,Qt.enterFrom,Qt.enterTo,Qt.leave,Qt.leaveFrom,Qt.leaveTo,Qt.originClass,Qt.tailwindcssOriginClass,Qt.portal,Qt.transform,Qt.middleware;Qt.as,Qt.placement,Qt.strategy,Qt.offset,Qt.shift,{...Qt.flip},Qt.arrow,Qt.autoPlacement,Qt.hide,Qt.autoUpdate,Qt.zIndex,Qt.transitionName,Qt.transitionType,Qt.enter,Qt.enterFrom,Qt.enterTo,Qt.leave,Qt.leaveFrom,Qt.leaveTo,Qt.originClass,Qt.tailwindcssOriginClass,Qt.transform,Qt.middleware;Qt.as,Qt.placement,Qt.strategy,Qt.offset,Qt.shift,Qt.flip,Qt.arrow,Qt.autoPlacement,Qt.hide,Qt.autoUpdate,Qt.zIndex,Qt.transitionName,Qt.transitionType,Qt.enter,Qt.enterFrom,Qt.enterTo,Qt.leave,Qt.leaveFrom,Qt.leaveTo,Qt.originClass,Qt.tailwindcssOriginClass,Qt.transform,Qt.middleware;const P7={class:"py-1"},$1=lt({__name:"DropDown",props:{label:{},alignment:{default:"right"},showChevron:{type:Boolean,default:!0},labelClass:{default:""},chevronClass:{}},setup(e){return(t,i)=>(H(),We(he(Fj),{as:"div",class:"inline-block text-left"},{default:Me(()=>[ye(he(k7),{placement:t.alignment==="left"?"bottom-start":"bottom-end",shift:"",flip:"",zIndex:"99",offset:4,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",tailwindcssOriginClass:""},{default:Me(()=>[ye(he($j),{class:Dn(["inline-flex w-full justify-center rounded-md items-center focus:outline-none focus:ring-2 p-2 placeholder:focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-gray-100",t.labelClass])},{default:Me(()=>[Mn(t.$slots,"label",{},()=>[Mt(xt(t.label),1)]),t.showChevron?(H(),We(Ch,{key:0,class:Dn(["xl:block m-1",t.chevronClass]),"aria-hidden":"true"},null,8,["class"])):ot("",!0)]),_:3},8,["class"]),ye(he(zj),{class:"w-64 divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none max-h-[50vh] overflow-y-auto"},{default:Me(()=>[Mn(t.$slots,"header"),ue("div",P7,[Mn(t.$slots,"default")]),Mn(t.$slots,"footer")]),_:3})]),_:3},8,["placement"])]),_:3}))}}),D7=lt({__name:"DropDownItem",props:{href:{},to:{},current:{type:Boolean}},setup(e){return(t,i)=>(H(),We(he(Bj),{class:"dropdown-item"},{default:Me(({active:r})=>[(H(),We(vc(t.$attrs.disabled?"span":as),{class:Dn(["block px-4 py-2 text-sm !no-underline",{"bg-blue-50 !text-blue-900":r,"text-gray-700":!r,"font-bold border-l-2 border-neutral-900 bg-transparent-black-100":t.current}]),href:t.href,to:t.to},{default:Me(()=>[Mn(t.$slots,"default",{},void 0,!0)]),_:2},1032,["class","href","to"]))]),_:3}))}});const Nd=sn(D7,[["__scopeId","data-v-f3acbc35"]]),L7=lt({__name:"ThemeSelector",setup(e){const{activeTheme:t,availableThemes:i,setTheme:r,isEnabled:s}=ZA();function u(d){return d.charAt(0).toUpperCase()+d.slice(1)}return(d,l)=>bs((H(),We($1,{label:"Select Theme",showChevron:!1},{label:Me(()=>[ye(R8)]),default:Me(()=>[(H(!0),me(Nt,null,Fn(he(i),m=>(H(),We(Nd,{key:m,current:he(t)===m,onClick:g=>he(r)(m)},{default:Me(()=>[Mt(xt(u(m)),1)]),_:2},1032,["current","onClick"]))),128))]),_:1},512)),[[Ca,he(s)&&he(i).length>1]])}}),O7=e=>(ro("data-v-73b8c317"),e=e(),so(),e),R7={class:"app-menu flex flex-col w-[90vw] sm:w-md sm:px-8 sm:py-4 p-4 h-full relative"},F7={class:"app-menu__header flex mt-4 pt-6 pb-2 justify-between items-center"},$7={class:"md:text-xl text-lg font-bold"},z7={class:"flex items-center"},B7={class:"app-menu__items flex-1 py-4 border-y border-neutral-600 overflow-auto"},N7={class:"app-menu__footer pt-4 flex flex-col items-center text-sm"},U7=O7(()=>ue("p",null,[Mt(" Powered by "),ue("a",{href:"https://umn-latis.github.io/elevator/"},"Elevator")],-1)),j7={href:"https://umn.edu"},V7=lt({__name:"AppMenuPure",props:{instance:{},currentUser:{}},emits:["close"],setup(e){return(t,i)=>(H(),me("nav",R7,[ye(fM,{class:"absolute right-4 top-4",onClick:i[0]||(i[0]=r=>t.$emit("close"))}),ue("header",F7,[ye(as,{to:"/"},{default:Me(()=>[ue("h1",$7,xt(t.instance.name),1)]),_:1}),ue("div",z7,[ye(L7)])]),ue("div",B7,[Mn(t.$slots,"default",{},void 0,!0)]),ue("footer",N7,[U7,ue("p",null,[Mt(" Made by "),ue("a",j7,[ye(zU,{class:"inline-block w-6"})])])])]))}});const H7=sn(V7,[["__scopeId","data-v-73b8c317"]]),G7=lt({__name:"AppMenuItem",props:{href:{default:void 0},to:{default:void 0},isCurrentPage:{type:Boolean,default:!1}},setup(e){return(t,i)=>(H(),We(as,{href:t.href,to:t.to,class:Dn(["app-menu-item group w-full flex items-center pl-2 py-2 font-medium my-1 hover:no-underline focus:outline-none focus:ring-2 focus:ring-indigo-500 hover:bg-blue-100 hover:text-neutral-900",{"is-current-page":t.isCurrentPage}])},{default:Me(()=>[Mn(t.$slots,"default",{},void 0,!0)]),_:3},8,["href","to","class"]))}});const gr=sn(G7,[["__scopeId","data-v-22b8d060"]]),W7={class:"expandable-nav-section"},q7={class:"flex-1"},Z7=lt({__name:"AppMenuGroup",props:{label:{}},setup(e){return(t,i)=>(H(),me("div",W7,[ye(he(kj),{as:"div",class:"space-y-1"},{default:Me(({open:r})=>[ye(he(Pj),{class:"group w-full flex items-center pl-2 pr-1 py-2 text-left font-medium focus:outline-none focus:ring-2 focus:ring-indigo-500 my-1 hover:bg-blue-100 hover:text-neutral-900"},{default:Me(()=>[ue("span",q7,xt(t.label),1),ye(Ch,{class:Dn(["w-5 h-5 text-neutral-400 group-hover:text-neutral-500 transform ease-in-out duration-150",{" -rotate-90":!r}])},null,8,["class"])]),_:2},1024),ye(he(Dj),{class:"space-y-1 pl-8"},{default:Me(()=>[Mn(t.$slots,"default",{},void 0,!0)]),_:3})]),_:3})]))}});const N_=sn(Z7,[["__scopeId","data-v-93c4a54d"]]),K7={key:0},X7=lt({__name:"PagesNavSection",props:{pages:{}},setup(e){const t=e;function i(m){return`${ci.instance.base.path}/page/view/${m.id}`===window.location.pathname}function r(m){return{id:m.id,name:m.title,isCurrentPage:i(m),href:`/page/view/${m.id}`}}function s(m){return m.map(g=>{const x=r(g);return!g.children||g.children.length===0?x:{...x,children:[x,...g.children.map(r)]}})}const u=Fe([]),d=Eu();function l(m){return m.filter(g=>g.includeInNav)}return fn([()=>t.pages,()=>d.path],()=>{const m=l(t.pages);u.value=s(m)},{immediate:!0}),(m,g)=>(H(!0),me(Nt,null,Fn(u.value,x=>(H(),me(Nt,{key:x.id},[x.children?(H(),We(N_,{key:1,label:x.name},{default:Me(()=>[(H(!0),me(Nt,null,Fn(x.children,w=>(H(),We(gr,{key:w.name,to:w.href??"#",isCurrentPage:w.isCurrentPage},{default:Me(()=>[Mt(xt(w.name),1)]),_:2},1032,["to","isCurrentPage"]))),128))]),_:2},1032,["label"])):(H(),me("div",K7,[ye(gr,{to:x.href??"#",isCurrentPage:x.isCurrentPage},{default:Me(()=>[Mt(xt(x.name),1)]),_:2},1032,["to","isCurrentPage"])]))],64))),128))}}),Y7={},J7={class:"my-2 border-neutral-500 max-w-xs"};function Q7(e,t){return H(),me("hr",J7)}const tk=sn(Y7,[["render",Q7]]),eV=lt({__name:"EditNavSection",props:{currentUser:{},instance:{},assetId:{}},setup(e){const t=e,i=ci.instance.base.url;async function r(){if(!t.assetId)throw new Error("assetId is null. Cannot delete asset.");if(confirm("Are you sure you want to delete this asset and all derivatives"))try{await Wn.deleteAsset(t.assetId),window.location.href=`${i}/assetManager/userAssets`}catch(s){console.error(s),alert("Error deleting asset.")}}return(s,u)=>{var d;return(d=s.currentUser)!=null&&d.canManageAssets?(H(),We(N_,{key:0,label:"Manage Assets"},{default:Me(()=>[ye(gr,{href:`${he(i)}/assetManager/userAssets/`},{default:Me(()=>[Mt(" All My Assets ")]),_:1},8,["href"]),ye(gr,{to:"/asset/create"},{default:Me(()=>[Mt("Add Asset")]),_:1}),s.assetId?(H(),me(Nt,{key:0},[ye(gr,{href:`${he(i)}/assetManager/editAsset/${s.assetId}`},{default:Me(()=>[Mt(" Edit Asset ")]),_:1},8,["href"]),ye(gr,{onClick:r},{default:Me(()=>[Mt(" Delete Asset ")]),_:1}),ye(gr,{href:`${he(i)}/assetManager/restoreAsset/${s.assetId}`},{default:Me(()=>[Mt(" Restore Asset ")]),_:1},8,["href"]),ye(tk)],64)):ot("",!0)]),_:1})):ot("",!0)}}});const tV=lt({__name:"AdminNavSection",props:{instance:{},currentUser:{}},setup(e){const t=ci.instance.base.url;return(i,r)=>(H(),We(N_,{label:"Admin"},{default:Me(()=>[ye(gr,{href:`${he(t)}/instances/edit/${i.instance.id}`},{default:Me(()=>[Mt(" Instance Settings ")]),_:1},8,["href"]),ye(gr,{href:`${he(t)}/permissions/edit/instance/${i.instance.id}`},{default:Me(()=>[Mt(" Instance Permissions ")]),_:1},8,["href"]),ye(gr,{href:`${he(t)}/instances/customPages`},{default:Me(()=>[Mt(" Instance Pages ")]),_:1},8,["href"]),ye(gr,{href:`${he(t)}/reports`},{default:Me(()=>[Mt(" Reports ")]),_:1},8,["href"]),ye(gr,{href:`${he(t)}/templates`},{default:Me(()=>[Mt(" Edit Templates ")]),_:1},8,["href"]),ye(gr,{href:`${he(t)}/collectionManager`},{default:Me(()=>[Mt(" Edit Collections ")]),_:1},8,["href"]),ye(gr,{href:`${he(t)}/assetManager/importFromCSV`},{default:Me(()=>[Mt(" Import from CSV ")]),_:1},8,["href"]),ye(gr,{href:`${he(t)}/assetManager/exportCSV`},{default:Me(()=>[Mt(" Export to CSV ")]),_:1},8,["href"]),i.currentUser.isSuperAdmin?(H(),me(Nt,{key:0},[ye(tk),ye(gr,{href:`${he(t)}/admin`},{default:Me(()=>[Mt(" Super Admin  ")]),_:1},8,["href"]),ye(gr,{href:`${he(t)}/admin/logs`},{default:Me(()=>[Mt(" Logs ")]),_:1},8,["href"])],64)):ot("",!0)]),_:1}))}}),nV=lt({__name:"HelpNavSection",props:{instance:{}},setup(e){return(t,i)=>(H(),We(N_,{label:"Help"},{default:Me(()=>[ye(gr,{href:"http://umn-latis.github.io/elevator/"},{default:Me(()=>[Mt(" Documentation ")]),_:1}),t.instance.contact?(H(),We(gr,{key:0,href:t.instance.contact},{default:Me(()=>[Mt(" Contact ")]),_:1},8,["href"])):ot("",!0)]),_:1}))}}),iV={class:"h-full"},rV=lt({__name:"AppMenu",emits:["close"],setup(e,{emit:t}){const i=Ai(),r=Po(),{currentUser:s,instance:u,pages:d}=bT(i),{activeAssetId:l}=bT(r),m=Eu();return fn(()=>m.path,()=>t("close")),(g,x)=>(H(),me("div",iV,[ye(H7,{instance:he(i).instance,currentUser:he(i).currentUser,onClose:x[0]||(x[0]=w=>g.$emit("close"))},{default:Me(()=>{var w,C;return[he(i).instance.userCanSearchAndBrowse?(H(),me(Nt,{key:0},[ye(X7,{pages:he(d)},null,8,["pages"]),he(s)||he(i).collections.length?(H(),We(gr,{key:0,to:"/search/listCollections"},{default:Me(()=>[Mt(" Collections ")]),_:1})):ot("",!0),he(s)?(H(),We(gr,{key:1,to:"/drawers/listDrawers"},{default:Me(()=>[Mt(" Drawers ")]),_:1})):ot("",!0),(w=he(s))!=null&&w.canManageAssets?(H(),We(eV,{key:2,currentUser:he(s),instance:he(u),assetId:he(l)},null,8,["currentUser","instance","assetId"])):ot("",!0),(C=he(s))!=null&&C.isAdmin?(H(),We(tV,{key:3,currentUser:he(s),instance:he(u)},null,8,["currentUser","instance"])):ot("",!0)],64)):ot("",!0),ye(nV,{instance:he(u)},null,8,["instance"])]}),_:1},8,["instance","currentUser"])]))}});const sV=sn(rV,[["__scopeId","data-v-38c4e5a9"]]);/*!
* tabbable 6.1.2
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var nk=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Uv=nk.join(","),ik=typeof Element>"u",vu=ik?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,jv=!ik&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},Vv=function e(t,i){var r;i===void 0&&(i=!0);var s=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),u=s===""||s==="true",d=u||i&&t&&e(t.parentNode);return d},aV=function(t){var i,r=t==null||(i=t.getAttribute)===null||i===void 0?void 0:i.call(t,"contenteditable");return r===""||r==="true"},rk=function(t,i,r){if(Vv(t))return[];var s=Array.prototype.slice.apply(t.querySelectorAll(Uv));return i&&vu.call(t,Uv)&&s.unshift(t),s=s.filter(r),s},sk=function e(t,i,r){for(var s=[],u=Array.from(t);u.length;){var d=u.shift();if(!Vv(d,!1))if(d.tagName==="SLOT"){var l=d.assignedElements(),m=l.length?l:d.children,g=e(m,!0,r);r.flatten?s.push.apply(s,g):s.push({scopeParent:d,candidates:g})}else{var x=vu.call(d,Uv);x&&r.filter(d)&&(i||!t.includes(d))&&s.push(d);var w=d.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(d),C=!Vv(w,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(d));if(w&&C){var I=e(w===!0?d.children:w.children,!0,r);r.flatten?s.push.apply(s,I):s.push({scopeParent:d,candidates:I})}else u.unshift.apply(u,d.children)}}return s},ak=function(t,i){return t.tabIndex<0&&(i||/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||aV(t))&&isNaN(parseInt(t.getAttribute("tabindex"),10))?0:t.tabIndex},oV=function(t,i){return t.tabIndex===i.tabIndex?t.documentOrder-i.documentOrder:t.tabIndex-i.tabIndex},ok=function(t){return t.tagName==="INPUT"},lV=function(t){return ok(t)&&t.type==="hidden"},cV=function(t){var i=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return i},uV=function(t,i){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===i)return t[r]},dV=function(t){if(!t.name)return!0;var i=t.form||jv(t),r=function(l){return i.querySelectorAll('input[type="radio"][name="'+l+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(t.name));else try{s=r(t.name)}catch(d){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",d.message),!1}var u=uV(s,t.form);return!u||u===t},hV=function(t){return ok(t)&&t.type==="radio"},fV=function(t){return hV(t)&&!dV(t)},pV=function(t){var i,r=t&&jv(t),s=(i=r)===null||i===void 0?void 0:i.host,u=!1;if(r&&r!==t){var d,l,m;for(u=!!((d=s)!==null&&d!==void 0&&(l=d.ownerDocument)!==null&&l!==void 0&&l.contains(s)||t!=null&&(m=t.ownerDocument)!==null&&m!==void 0&&m.contains(t));!u&&s;){var g,x,w;r=jv(s),s=(g=r)===null||g===void 0?void 0:g.host,u=!!((x=s)!==null&&x!==void 0&&(w=x.ownerDocument)!==null&&w!==void 0&&w.contains(s))}}return u},BE=function(t){var i=t.getBoundingClientRect(),r=i.width,s=i.height;return r===0&&s===0},mV=function(t,i){var r=i.displayCheck,s=i.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var u=vu.call(t,"details>summary:first-of-type"),d=u?t.parentElement:t;if(vu.call(d,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var l=t;t;){var m=t.parentElement,g=jv(t);if(m&&!m.shadowRoot&&s(m)===!0)return BE(t);t.assignedSlot?t=t.assignedSlot:!m&&g!==t.ownerDocument?t=g.host:t=m}t=l}if(pV(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return BE(t);return!1},gV=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var i=t.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var s=i.children.item(r);if(s.tagName==="LEGEND")return vu.call(i,"fieldset[disabled] *")?!0:!s.contains(t)}return!0}i=i.parentElement}return!1},Hv=function(t,i){return!(i.disabled||Vv(i)||lV(i)||mV(i,t)||cV(i)||gV(i))},ex=function(t,i){return!(fV(i)||ak(i)<0||!Hv(t,i))},vV=function(t){var i=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},_V=function e(t){var i=[],r=[];return t.forEach(function(s,u){var d=!!s.scopeParent,l=d?s.scopeParent:s,m=ak(l,d),g=d?e(s.candidates):l;m===0?d?i.push.apply(i,g):i.push(l):r.push({documentOrder:u,tabIndex:m,item:s,isScope:d,content:g})}),r.sort(oV).reduce(function(s,u){return u.isScope?s.push.apply(s,u.content):s.push(u.content),s},[]).concat(i)},yV=function(t,i){i=i||{};var r;return i.getShadowRoot?r=sk([t],i.includeContainer,{filter:ex.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:vV}):r=rk(t,i.includeContainer,ex.bind(null,i)),_V(r)},bV=function(t,i){i=i||{};var r;return i.getShadowRoot?r=sk([t],i.includeContainer,{filter:Hv.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=rk(t,i.includeContainer,Hv.bind(null,i)),r},Ng=function(t,i){if(i=i||{},!t)throw new Error("No node provided");return vu.call(t,Uv)===!1?!1:ex(i,t)},xV=nk.concat("iframe").join(","),D0=function(t,i){if(i=i||{},!t)throw new Error("No node provided");return vu.call(t,xV)===!1?!1:Hv(i,t)};/*!
* focus-trap 7.4.3
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function NE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),i.push.apply(i,r)}return i}function UE(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?NE(Object(i),!0).forEach(function(r){wV(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):NE(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}function wV(e,t,i){return t=TV(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function SV(e,t){if(typeof e!="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TV(e){var t=SV(e,"string");return typeof t=="symbol"?t:String(t)}var jE={activateTrap:function(t,i){if(t.length>0){var r=t[t.length-1];r!==i&&r.pause()}var s=t.indexOf(i);s===-1||t.splice(s,1),t.push(i)},deactivateTrap:function(t,i){var r=t.indexOf(i);r!==-1&&t.splice(r,1),t.length>0&&t[t.length-1].unpause()}},EV=function(t){return t.tagName&&t.tagName.toLowerCase()==="input"&&typeof t.select=="function"},CV=function(t){return t.key==="Escape"||t.key==="Esc"||t.keyCode===27},vp=function(t){return t.key==="Tab"||t.keyCode===9},IV=function(t){return vp(t)&&!t.shiftKey},AV=function(t){return vp(t)&&t.shiftKey},VE=function(t){return setTimeout(t,0)},HE=function(t,i){var r=-1;return t.every(function(s,u){return i(s)?(r=u,!1):!0}),r},zf=function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];return typeof t=="function"?t.apply(void 0,r):t},Ug=function(t){return t.target.shadowRoot&&typeof t.composedPath=="function"?t.composedPath()[0]:t.target},MV=[],kV=function(t,i){var r=(i==null?void 0:i.document)||document,s=(i==null?void 0:i.trapStack)||MV,u=UE({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:IV,isKeyBackward:AV},i),d={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},l,m=function(j,z,ie){return j&&j[z]!==void 0?j[z]:u[ie||z]},g=function(j,z){var ie=typeof(z==null?void 0:z.composedPath)=="function"?z.composedPath():void 0;return d.containerGroups.findIndex(function(X){var ne=X.container,Ee=X.tabbableNodes;return ne.contains(j)||(ie==null?void 0:ie.includes(ne))||Ee.find(function(Ce){return Ce===j})})},x=function(j){var z=u[j];if(typeof z=="function"){for(var ie=arguments.length,X=new Array(ie>1?ie-1:0),ne=1;ne<ie;ne++)X[ne-1]=arguments[ne];z=z.apply(void 0,X)}if(z===!0&&(z=void 0),!z){if(z===void 0||z===!1)return z;throw new Error("`".concat(j,"` was specified but was not a node, or did not return a node"))}var Ee=z;if(typeof z=="string"&&(Ee=r.querySelector(z),!Ee))throw new Error("`".concat(j,"` as selector refers to no known node"));return Ee},w=function(){var j=x("initialFocus");if(j===!1)return!1;if(j===void 0||!D0(j,u.tabbableOptions))if(g(r.activeElement)>=0)j=r.activeElement;else{var z=d.tabbableGroups[0],ie=z&&z.firstTabbableNode;j=ie||x("fallbackFocus")}if(!j)throw new Error("Your focus-trap needs to have at least one focusable element");return j},C=function(){if(d.containerGroups=d.containers.map(function(j){var z=yV(j,u.tabbableOptions),ie=bV(j,u.tabbableOptions);return{container:j,tabbableNodes:z,focusableNodes:ie,firstTabbableNode:z.length>0?z[0]:null,lastTabbableNode:z.length>0?z[z.length-1]:null,nextTabbableNode:function(ne){var Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Ce=ie.findIndex(function(Xe){return Xe===ne});if(!(Ce<0))return Ee?ie.slice(Ce+1).find(function(Xe){return Ng(Xe,u.tabbableOptions)}):ie.slice(0,Ce).reverse().find(function(Xe){return Ng(Xe,u.tabbableOptions)})}}}),d.tabbableGroups=d.containerGroups.filter(function(j){return j.tabbableNodes.length>0}),d.tabbableGroups.length<=0&&!x("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},I=function G(j){if(j!==!1&&j!==r.activeElement){if(!j||!j.focus){G(w());return}j.focus({preventScroll:!!u.preventScroll}),d.mostRecentlyFocusedNode=j,EV(j)&&j.select()}},M=function(j){var z=x("setReturnFocus",j);return z||(z===!1?!1:j)},L=function(j){var z=Ug(j);if(!(g(z,j)>=0)){if(zf(u.clickOutsideDeactivates,j)){l.deactivate({returnFocus:u.returnFocusOnDeactivate});return}zf(u.allowOutsideClick,j)||j.preventDefault()}},$=function(j){var z=Ug(j),ie=g(z,j)>=0;ie||z instanceof Document?ie&&(d.mostRecentlyFocusedNode=z):(j.stopImmediatePropagation(),I(d.mostRecentlyFocusedNode||w()))},F=function(j){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ie=Ug(j);C();var X=null;if(d.tabbableGroups.length>0){var ne=g(ie,j),Ee=ne>=0?d.containerGroups[ne]:void 0;if(ne<0)z?X=d.tabbableGroups[d.tabbableGroups.length-1].lastTabbableNode:X=d.tabbableGroups[0].firstTabbableNode;else if(z){var Ce=HE(d.tabbableGroups,function(tt){var et=tt.firstTabbableNode;return ie===et});if(Ce<0&&(Ee.container===ie||D0(ie,u.tabbableOptions)&&!Ng(ie,u.tabbableOptions)&&!Ee.nextTabbableNode(ie,!1))&&(Ce=ne),Ce>=0){var Xe=Ce===0?d.tabbableGroups.length-1:Ce-1,at=d.tabbableGroups[Xe];X=at.lastTabbableNode}else vp(j)||(X=Ee.nextTabbableNode(ie,!1))}else{var it=HE(d.tabbableGroups,function(tt){var et=tt.lastTabbableNode;return ie===et});if(it<0&&(Ee.container===ie||D0(ie,u.tabbableOptions)&&!Ng(ie,u.tabbableOptions)&&!Ee.nextTabbableNode(ie))&&(it=ne),it>=0){var $t=it===d.tabbableGroups.length-1?0:it+1,Ct=d.tabbableGroups[$t];X=Ct.firstTabbableNode}else vp(j)||(X=Ee.nextTabbableNode(ie))}}else X=x("fallbackFocus");X&&(vp(j)&&j.preventDefault(),I(X))},U=function(j){if(CV(j)&&zf(u.escapeDeactivates,j)!==!1){j.preventDefault(),l.deactivate();return}(u.isKeyForward(j)||u.isKeyBackward(j))&&F(j,u.isKeyBackward(j))},ee=function(j){var z=Ug(j);g(z,j)>=0||zf(u.clickOutsideDeactivates,j)||zf(u.allowOutsideClick,j)||(j.preventDefault(),j.stopImmediatePropagation())},V=function(){if(d.active)return jE.activateTrap(s,l),d.delayInitialFocusTimer=u.delayInitialFocus?VE(function(){I(w())}):I(w()),r.addEventListener("focusin",$,!0),r.addEventListener("mousedown",L,{capture:!0,passive:!1}),r.addEventListener("touchstart",L,{capture:!0,passive:!1}),r.addEventListener("click",ee,{capture:!0,passive:!1}),r.addEventListener("keydown",U,{capture:!0,passive:!1}),l},Q=function(){if(d.active)return r.removeEventListener("focusin",$,!0),r.removeEventListener("mousedown",L,!0),r.removeEventListener("touchstart",L,!0),r.removeEventListener("click",ee,!0),r.removeEventListener("keydown",U,!0),l},ae=function(j){var z=j.some(function(ie){var X=Array.from(ie.removedNodes);return X.some(function(ne){return ne===d.mostRecentlyFocusedNode})});z&&I(w())},be=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(ae):void 0,te=function(){be&&(be.disconnect(),d.active&&!d.paused&&d.containers.map(function(j){be.observe(j,{subtree:!0,childList:!0})}))};return l={get active(){return d.active},get paused(){return d.paused},activate:function(j){if(d.active)return this;var z=m(j,"onActivate"),ie=m(j,"onPostActivate"),X=m(j,"checkCanFocusTrap");X||C(),d.active=!0,d.paused=!1,d.nodeFocusedBeforeActivation=r.activeElement,z==null||z();var ne=function(){X&&C(),V(),te(),ie==null||ie()};return X?(X(d.containers.concat()).then(ne,ne),this):(ne(),this)},deactivate:function(j){if(!d.active)return this;var z=UE({onDeactivate:u.onDeactivate,onPostDeactivate:u.onPostDeactivate,checkCanReturnFocus:u.checkCanReturnFocus},j);clearTimeout(d.delayInitialFocusTimer),d.delayInitialFocusTimer=void 0,Q(),d.active=!1,d.paused=!1,te(),jE.deactivateTrap(s,l);var ie=m(z,"onDeactivate"),X=m(z,"onPostDeactivate"),ne=m(z,"checkCanReturnFocus"),Ee=m(z,"returnFocus","returnFocusOnDeactivate");ie==null||ie();var Ce=function(){VE(function(){Ee&&I(M(d.nodeFocusedBeforeActivation)),X==null||X()})};return Ee&&ne?(ne(M(d.nodeFocusedBeforeActivation)).then(Ce,Ce),this):(Ce(),this)},pause:function(j){if(d.paused||!d.active)return this;var z=m(j,"onPause"),ie=m(j,"onPostPause");return d.paused=!0,z==null||z(),Q(),te(),ie==null||ie(),this},unpause:function(j){if(!d.paused||!d.active)return this;var z=m(j,"onUnpause"),ie=m(j,"onPostUnpause");return d.paused=!1,z==null||z(),C(),V(),te(),ie==null||ie(),this},updateContainerElements:function(j){var z=[].concat(j).filter(Boolean);return d.containers=z.map(function(ie){return typeof ie=="string"?r.querySelector(ie):ie}),d.active&&C(),te(),this}},l.updateContainerElements(t),l};const PV=lt({name:"UseFocusTrap",props:["as","options"],setup(e,{slots:t}){let i;const r=Fe(),s=()=>i&&i.activate(),u=()=>i&&i.deactivate();return fn(()=>Fs(r),d=>{d&&(i=kV(d,e.options||{}),s())},{flush:"post"}),Xp(()=>u()),()=>{if(t.default)return ni(e.as||"div",{ref:r},t.default())}}}),LV={class:"overflow-hidden fixed inset-0 pointer-events-none z-30"},OV=["onClick"],RV=lt({__name:"AppMenuButton",setup(e){const t=Fe(!1),i=Fe(null);function r(){var u;t.value=!1,(u=i.value)==null||u.focus()}function s(u){t.value&&u.key==="Escape"&&r()}return Bn(()=>{document.addEventListener("keydown",s)}),Wi(()=>document.removeEventListener("keydown",s)),(u,d)=>(H(),me(Nt,null,[ue("button",{ref_key:"buttonRef",ref:i,class:"app-menu-button p-2 rounded-full",tabindex:"0",onClick:d[0]||(d[0]=l=>t.value=!t.value)},[ye(d8)],512),(H(),We(tm,{to:"body"},[t.value?(H(),We(he(PV),{key:0},{default:Me(()=>[ue("div",LV,[ye(Er,{name:"fade"},{default:Me(()=>[bs(ue("div",{class:"fixed inset-0 transition-opacity z-20 bg-black opacity-50 pointer-events-auto",onClick:Mo(r,["self"])},null,8,OV),[[Ca,t.value]])]),_:1}),ye(Er,{name:"slide-right"},{default:Me(()=>[bs(ye(sV,{class:"absolute right-0 top-0 bottom-0 z-30 transition-transform transform-gpu pointer-events-auto",onClose:r},null,512),[[Ca,t.value]])]),_:1})])]),_:1})):ot("",!0)]))],64))}});const FV=sn(RV,[["__scopeId","data-v-f780fd62"]]),lk=Symbol("Tabs"),ck=Symbol(),tx=["grid","list","timeline","map","gallery"],_s={BEST_MATCH:0,TITLE:"title.raw",LAST_MODIFIED_DESC:"lastModified.desc",LAST_MODIFIED_ASC:"lastModified.asc",CUSTOM:"custom"},il={DATE_RANGE:"GLOBAL_DATE_RANGE",LOCATION:"GLOBAL_LOCATION",FILE_TYPE:"GLOBAL_FILE_TYPE"};function GE(e){if(!e)return null;const t=Date.parse(e+" UTC");if(!isNaN(t))return(t/1e3).toString();if(e.toLowerCase().indexOf("bc")!=-1){e=e.replace(/,/g,"");const i=/[0-9]+/g,r=e.match(i);if(r&&r.length>0){let s=parseInt(r[0]);return e.toLowerCase().indexOf("century")!=-1&&(s=s*100),(-1*s*31556900-1970*31556900).toString()}}return null}const $V={[_s.BEST_MATCH]:"Best Match",[_s.TITLE]:"Default Title",[_s.LAST_MODIFIED_ASC]:"Modified Date (oldest to newest)",[_s.LAST_MODIFIED_DESC]:"Modified Date (newest to oldest)"},zV=()=>({searchId:Fe(void 0),status:Fe("idle"),query:Fe(""),filterBy:Br({collectionIds:[],specificFieldsMap:new Map,searchableFieldsOperator:"AND",globalDateRange:null,globalLocation:null,globalFileType:null,includeHiddenAssets:!1}),matches:Fe([]),totalResults:Fe(void 0),currentPage:Fe(0),searchEntry:Fe(null),resultsView:Fe("grid"),sortOptions:Fe($V),sort:Fe(_s.BEST_MATCH),beforeNewSearchHandlers:[],afterNewSearchHandlers:[]}),Zl=e=>({isReady:Oe(()=>e.status.value==="success"),isValidSearch:Oe(()=>{if(e.filterBy.globalLocation){const t=parseFloat(e.filterBy.globalLocation.radius);if(isNaN(t)||t<=0)return!1}return!0}),hasMoreResults:Oe(()=>e.matches.value.length<(e.totalResults.value??0)),hasDateRangeFilter:Oe(()=>e.filterBy.globalDateRange!==null),hasLocationFilter:Oe(()=>e.filterBy.globalLocation!==null),hasFileTypeFilter:Oe(()=>e.filterBy.globalFileType!==null),filteredByCount:Oe(()=>e.filterBy.collectionIds.length+e.filterBy.specificFieldsMap.size+(e.filterBy.globalDateRange?1:0)+(e.filterBy.globalLocation?1:0)+(e.filterBy.includeHiddenAssets?1:0)+(e.filterBy.globalFileType?1:0)),specificFieldFilterCount:Oe(()=>e.filterBy.specificFieldsMap.size),globalFieldFilterCount:Oe(()=>(e.filterBy.globalDateRange?1:0)+(e.filterBy.globalLocation?1:0)+(e.filterBy.globalFileType?1:0)),totalFieldFilterCount:Oe(()=>Zl(e).specificFieldFilterCount.value+Zl(e).globalFieldFilterCount.value),hasFieldFiltersApplied:Oe(()=>Zl(e).totalFieldFilterCount.value>0),globalDateRangeAsFilter:Oe(()=>{var t,i;return e.filterBy.globalDateRange?{id:il.DATE_RANGE,fieldId:il.DATE_RANGE,value:JSON.stringify([((t=e.filterBy.globalDateRange)==null?void 0:t.startDate)??null,((i=e.filterBy.globalDateRange)==null?void 0:i.endDate)??null]),isFuzzy:!1,createdAt:e.filterBy.globalDateRange.createdAt}:null}),globalLocationAsFilter:Oe(()=>e.filterBy.globalLocation?{id:il.LOCATION,fieldId:il.LOCATION,value:JSON.stringify({lng:e.filterBy.globalLocation.lng,lat:e.filterBy.globalLocation.lat}),isFuzzy:!1,createdAt:e.filterBy.globalLocation.createdAt}:null),globalFileTypeAsFilter:Oe(()=>e.filterBy.globalFileType?{id:il.FILE_TYPE,fieldId:il.FILE_TYPE,value:e.filterBy.globalFileType.fileType,isFuzzy:!1,createdAt:e.filterBy.globalFileType.createdAt}:null),hasFiltersApplied:Oe(()=>Zl(e).filteredByCount.value>0),searchRequestOptions:Oe(()=>{var u,d,l,m,g,x;const i=Array.from(e.filterBy.specificFieldsMap.values()).map(w=>({field:w.fieldId,text:w.value,fuzzy:w.isFuzzy})),r=((u=e.filterBy.globalDateRange)==null?void 0:u.startDate.toString())??"",s=((d=e.filterBy.globalDateRange)==null?void 0:d.endDate.toString())??"";return{sort:e.sort.value,collection:e.filterBy.collectionIds.length?e.filterBy.collectionIds:void 0,combineSpecificSearches:e.filterBy.searchableFieldsOperator,specificFieldSearch:i,startDateText:r,startDate:GE(r)??"",endDateText:s,endDate:GE(s)??"",longitude:((l=e.filterBy.globalLocation)==null?void 0:l.lng)??"",latitude:((m=e.filterBy.globalLocation)==null?void 0:m.lat)??"",distance:((g=e.filterBy.globalLocation)==null?void 0:g.radius)??"",fileTypesSearch:(x=e.filterBy.globalFileType)==null?void 0:x.fileType,showHidden:e.filterBy.includeHiddenAssets?"on":void 0}}),specificFieldFilters:Oe(()=>Array.from(e.filterBy.specificFieldsMap.values())),isBrowsingCollection:Oe(()=>{var t,i,r,s;return((t=e.searchEntry.value)==null?void 0:t.searchText)===""&&((r=(i=e.searchEntry.value)==null?void 0:i.collection)==null?void 0:r.length)===1&&(((s=e.searchEntry.value)==null?void 0:s.specificFieldSearch)??[]).length===0}),browsingCollectionId:Oe(()=>{var i,r;if(!Zl(e).isBrowsingCollection.value)return null;const t=(r=(i=e.searchEntry.value)==null?void 0:i.collection)==null?void 0:r[0];return t?Number.parseInt(t):null}),supportedSpecificFieldTypes:Oe(()=>["text","select","checkbox","date","tag list","text area","multiselect"])}),uk=e=>({async setSortOption(t){return e.sort.value=t,e.searchId.value=await this.getSearchId(),this.search(e.searchId.value)},addCollectionIdFilter(t){e.filterBy.collectionIds.push(t)},removeCollectionIdFilter(t){const i=e.filterBy.collectionIds.indexOf(t);if(i<0)throw new Error(`Cannot remove collection id ${t} from searchStore. ID is not in filterBy.collectionIds`);e.filterBy.collectionIds.splice(i,1)},clearCollectionIdFilters(){e.filterBy.collectionIds=[]},addDateRangeFilter(){e.filterBy.globalDateRange={startDate:"",endDate:"",createdAt:new Date().toISOString()}},removeDateRangeFilter(){e.filterBy.globalDateRange=null},addLocationFilter(){e.filterBy.globalLocation={lng:"-93.2277",lat:"44.9740",radius:"500",createdAt:new Date().toISOString()}},removeLocationFilter(){e.filterBy.globalLocation=null},updateLocationFilter(t){const i=e.filterBy.globalLocation;if(!i)throw new Error("Cannot update location filter. No location filter exists.");e.filterBy.globalLocation={...i,...t}},addFileTypeFilter(){e.filterBy.globalFileType={fileType:"",createdAt:new Date().toISOString()}},updateFileTypeFilter(t){const i=e.filterBy.globalFileType;if(!i)throw new Error("Cannot update file type filter. No file type filter exists.");e.filterBy.globalFileType={...i,fileType:t}},removeFileTypeFilter(){e.filterBy.globalFileType=null},getSearchableFieldFilter(t){return e.filterBy.specificFieldsMap.get(t)??null},updateSearchableFieldFilter(t,i){const r=this.getSearchableFieldFilter(t);if(!r)throw new Error(`cannot update filter with id ${t}. No such filter exists.`);if(i.id)throw new Error(`cannot update filter with id ${t}. Cannot update the id of a filter.`);e.filterBy.specificFieldsMap.set(t,{...r,...i})},async addSearchableFieldFilter(t,i){const s=Ai().getSearchableField(t);if(!s)throw new Error(`Cannot add searchable field filter for field ${t}: no such field exists`);const u={fieldId:t,value:"",isFuzzy:!1,id:crypto.randomUUID(),createdAt:new Date().toISOString(),...i};s.type==="checkbox"&&(u.value="boolean_true"),e.filterBy.specificFieldsMap.set(u.id,u)},removeSearchableFieldFilter(t){e.filterBy.specificFieldsMap.delete(t)},updateSearchableFieldFilterValue(t,i){const r=e.filterBy.specificFieldsMap.get(t);if(!r)throw new Error(`Cannot update value of searchable field filter ${t}: no such filter found`);r.value=i},clearSearchableFieldsFilters(){e.filterBy.specificFieldsMap.clear(),e.filterBy.searchableFieldsOperator="AND",e.filterBy.globalDateRange=null,e.filterBy.globalLocation=null,e.filterBy.globalFileType=null},updateFilterFieldId(t,i){const r=Ai(),s=e.filterBy.specificFieldsMap.get(t);if(!s)throw new Error(`Cannot update searchable field filter. No filter exists with id: ${t}`);if(s.fieldId===i)return;const u=r.getSearchableField(i);if(!u)throw new Error(`Cannot update searchable field filter. No field is found with id ${i}.`);const d={...s,fieldId:u.id};e.filterBy.specificFieldsMap.set(t,d)},updateSearchableFieldsOperator(t){const i=["AND","OR"];if(!i.includes(t))throw new Error(`Cannot update searchable fields operator. ${t} is not in ${i.join(", ")}`);e.filterBy.searchableFieldsOperator=t},updateSearchableFieldFilterIsFuzzy(t,i){const r=e.filterBy.specificFieldsMap.get(t);if(!r)throw new Error(`Cannot update isFuzzy of searchable field filter ${t}: no such filter found`);r.isFuzzy=i},clearQuery(){e.query.value=""},clearAllFilters(){this.clearCollectionIdFilters(),this.clearSearchableFieldsFilters(),e.filterBy.searchableFieldsOperator="AND",e.filterBy.includeHiddenAssets=!1},reset(){this.clearAllFilters(),this.clearQuery()},async getSearchId(){return Wn.getSearchId(e.query.value,Zl(e).searchRequestOptions.value).catch(t=>{throw new Error(`Cannot getSearchId for query: ${e.query}: ${t}`)})},async search(t){const i=Ai();e.beforeNewSearchHandlers.forEach(r=>r()),e.status.value="fetching",e.searchId.value=t,e.matches.value=[],e.totalResults.value=void 0,e.currentPage.value=0,e.searchEntry.value=null;try{Wn.getSearchResultsById(e.searchId.value).then(r=>{var s,u,d,l,m,g;e.searchEntry.value=r.searchEntry,e.totalResults.value=r.totalResults,e.matches.value=r.matches,e.status.value="success",e.sortOptions.value=r.sortableWidgets,e.filterBy.searchableFieldsOperator=r.searchEntry.combineSpecificSearches,e.filterBy.collectionIds=((s=r.searchEntry.collection)==null?void 0:s.map(x=>Number.parseInt(x)))??[],r.searchEntry.specificFieldSearch&&(e.filterBy.specificFieldsMap.clear(),(u=r.searchEntry.specificFieldSearch)==null||u.forEach(x=>{if(!i.getSearchableField(x.field)){console.log("skipping search entry field",x.field);return}console.log("adding search entry field",x.field),uk(e).addSearchableFieldFilter(x.field,{value:x.text,isFuzzy:x.fuzzy})})),r.searchEntry.startDateText||r.searchEntry.endDateText?e.filterBy.globalDateRange={startDate:((d=r.searchEntry)==null?void 0:d.startDateText)??"",endDate:((l=r.searchEntry)==null?void 0:l.endDateText)??"",createdAt:new Date().toISOString()}:e.filterBy.globalDateRange=null,r.searchEntry.longitude&&r.searchEntry.latitude&&r.searchEntry.distance?e.filterBy.globalLocation={lng:r.searchEntry.longitude,lat:r.searchEntry.latitude,radius:r.searchEntry.distance,createdAt:new Date().toISOString()}:e.filterBy.globalLocation=null,(m=r.searchEntry)!=null&&m.fileTypesSearch?e.filterBy.globalFileType={fileType:r.searchEntry.fileTypesSearch,createdAt:new Date().toISOString()}:e.filterBy.globalFileType=null,e.filterBy.includeHiddenAssets=!!r.searchEntry.showHidden,e.query.value=e.query.value||((g=r.searchEntry)==null?void 0:g.searchText)||"",e.afterNewSearchHandlers.forEach(x=>x(e))}).catch(r=>{throw e.status.value="error",new Error(`Cannot getSearchResultsById for search id: ${JSON.stringify(e.searchId)}: ${r}`)})}catch(r){console.error(r),e.status.value="error",e.afterNewSearchHandlers.forEach(s=>s(e))}return e.searchId.value},onBeforeNewSearch(t){e.beforeNewSearchHandlers.push(t)},onAfterNewSearch(t){e.afterNewSearchHandlers.push(t)},async loadMore({loadAll:t}={loadAll:!1}){if(!e.searchId.value)throw new Error("No search id found. Cannot load more.");if(!Zl(e).hasMoreResults.value){console.error("cannot load more results, already at the end");return}e.status.value="fetching";const i=e.currentPage.value;try{e.currentPage.value=i+1;const r=await Wn.getSearchResultsById(e.searchId.value,e.currentPage.value,t);e.matches.value.push(...r.matches),e.searchEntry.value=r.searchEntry,e.status.value="success"}catch(r){e.status.value="error",e.currentPage.value=i,console.error(r)}},setResultsView(t){e.resultsView.value=t}}),Nr=Sh("search",()=>{const e=zV(),t=Zl(e),i=uk(e);return{...t,...i,...e}}),BV=["for"],NV={key:0,class:"text-red-600"},UV={class:"relative rounded-md"},jV={key:0,class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},VV=["id","type","name","value","required"],HV={key:1,class:"absolute inset-y-0 right-0 flex items-center pr-1"},Ya=lt({__name:"InputGroup",props:{id:{},label:{},labelHidden:{type:Boolean,default:!1},modelValue:{},type:{default:"text"},inputClass:{default:()=>({})},labelClass:{default:()=>({})},required:{type:Boolean,default:!1}},emits:["focus","blur","update:modelValue"],setup(e){return(t,i)=>(H(),me("div",null,[ue("label",{for:t.id,class:Dn(["block text-xs font-medium text-neutral-700 uppercase mb-1",[{"sr-only":t.labelHidden},t.labelClass]])},[Mt(xt(t.label)+" ",1),t.required?(H(),me("span",NV,"*")):ot("",!0)],10,BV),ue("div",UV,[t.$slots.prepend?(H(),me("div",jV,[Mn(t.$slots,"prepend")])):ot("",!0),ue("input",zr({id:t.id,type:t.type,name:t.id,value:t.modelValue,class:["block w-full rounded-md border border-transparent focus-visible:ring-blue-600 focus-visible:ring-offset-2 focus-visible:ring-2 sm:text-sm py-2 bg-transparent-black-100 placeholder-transparent-black-400 px-4",[{"pl-10":t.$slots.prepend,"pr-10":t.$slots.append},t.inputClass]],required:t.required},t.$attrs,{onFocus:i[0]||(i[0]=r=>t.$emit("focus",r)),onBlur:i[1]||(i[1]=r=>t.$emit("blur",r)),onInput:i[2]||(i[2]=r=>t.$emit("update:modelValue",r.target.value))}),null,16,VV),t.$slots.append?(H(),me("div",HV,[Mn(t.$slots,"append")])):ot("",!0)])]))}});function GV(e,t,i){return i?e===1?t:i:e===1?t:`${t}s`}const WV={class:"flex gap-1 items-center"},qV=ue("span",{class:"sr-only"},"Clear Search",-1),ZV=ue("span",{class:"sr-only"},"Advanced Search",-1),KV={key:2,class:"inline-flex"},XV=ue("span",{class:"sr-only"},"Clear All Filters",-1),YV={class:"hidden md:inline-flex items-center justify-center bg-transparent-black-100 w-8 h-8 text-sm rounded-full text-neutral-900 gap-1 hover:bg-neutral-900 hover:text-neutral-200 transition:ease-in-out duration-150",type:"submit"},JV=ue("span",{class:"sr-only"},"Search",-1),dk=lt({__name:"SearchTextInputGroup",emits:["moreOptionClick","clearAllFilters"],setup(e,{emit:t}){const i=Fe(null),r=Fe(!1),s=Nr();function u(m){var g;i.value&&m.metaKey&&m.key==="k"&&(m.preventDefault(),(g=i.value.$el.querySelector("input"))==null||g.focus())}function d(m){var g;i.value&&m.key==="Escape"&&((g=i.value.$el.querySelector("input"))==null||g.blur())}function l(){s.clearAllFilters(),t("clearAllFilters")}return Bn(()=>{document.addEventListener("keydown",u),document.addEventListener("keydown",d)}),Wi(()=>{document.removeEventListener("keydown",u),document.removeEventListener("keydown",d)}),(m,g)=>(H(),We(Ya,{id:"search",ref_key:"inputGroup",ref:i,modelValue:he(s).query,"onUpdate:modelValue":g[3]||(g[3]=x=>he(s).query=x),label:"Search",labelHidden:!0,placeholder:"Search",inputClass:"!rounded-full",onFocus:g[4]||(g[4]=x=>r.value=!0),onBlur:g[5]||(g[5]=x=>r.value=!1)},{append:Me(()=>[ue("div",WV,[he(s).query.length?(H(),me("button",{key:0,type:"button",class:"text-transparent-black-500 hover:text-neutral-900",onClick:g[0]||(g[0]=x=>he(s).query="")},[qV,ye(he(om))])):ot("",!0),he(s).hasFiltersApplied?ot("",!0):(H(),me("button",{key:1,type:"button",class:"w-8 h-8 inline-flex items-center justify-center rounded-full",onClick:g[1]||(g[1]=x=>m.$emit("moreOptionClick"))},[ZV,ye(he(q8),{class:"h-4 w-4","aria-hidden":"true"})])),he(s).hasFiltersApplied?(H(),me("div",KV,[ue("button",{type:"button",class:"inline-flex items-center justify-center rounded-l-full bg-neutral-900 text-neutral-300 text-xs py-1 px-2 border-r border-neutral-600",onClick:g[2]||(g[2]=x=>m.$emit("moreOptionClick"))},xt(he(s).filteredByCount)+" "+xt(he(GV)(he(s).filteredByCount,"filter")),1),ue("button",{type:"button",class:"inline-flex items-center justify-center rounded-r-full bg-neutral-900 text-neutral-300 text-xs py-1 px-2",onClick:l},[XV,ye(lm,{class:"!h-3 !w-3","aria-hidden":"true"})])])):ot("",!0),ue("button",YV,[he(s).status==="fetching"?(H(),We(he(zo),{key:0,class:"h-4 w-4","aria-hidden":"true"})):(H(),We(he(v8),{key:1,class:"h-4 w-4","aria-hidden":"true"})),JV])])]),_:1},8,["modelValue"]))}}),hk=lt({__name:"AdvSearchDropDown",props:{label:{}},setup(e){return(t,i)=>(H(),We($1,{label:t.label,class:"rounded-md text-sm bg-transparent-black-100",labelClass:"justify-between p-2 py-1",chevronClass:"!w-4 !h-4",alignment:"left"},{default:Me(()=>[Mn(t.$slots,"default")]),_:3},8,["label"]))}}),Yf=lt({__name:"AdvSearchDropDownItem",setup(e){return(t,i)=>(H(),We(Nd,{class:"!whitespace-nowrap overflow-ellipsis overflow-x-hidden"},{default:Me(()=>[Mn(t.$slots,"default")]),_:3}))}}),QV={class:"my-4"},e9={class:"flex items-baseline gap-2"},t9=ue("h3",{class:"font-bold"},"Collections",-1),n9=ue("p",{class:"text-neutral-400 text-xs mb-2 italic"},' To limit your search to specific collections, choose "Add Collection" below. ',-1),i9={key:0,class:"flex flex-wrap gap-2 bg-transparent-black-50 p-4 mb-4 rounded-md"},r9=["onClick"],s9=lt({__name:"FilterByCollectionsSection",setup(e){const t=Ai(),i=Nr(),r=Oe(()=>t.flatCollections.filter(d=>i.filterBy.collectionIds.includes(d.id)).sort((d,l)=>d.title.localeCompare(l.title))),s=Oe(()=>t.flatCollections.filter(d=>!i.filterBy.collectionIds.includes(d.id)).sort((d,l)=>d.title.localeCompare(l.title)));function u(d){const l=d.split("  ");if(l.length===1)return d;const m="-".repeat(l.length-1),g=l[l.length-1];return`${m} ${g}`}return(d,l)=>(H(),me("section",QV,[ue("header",e9,[t9,r.value.length?(H(),We(si,{key:0,variant:"tertiary",onClick:l[0]||(l[0]=m=>he(i).clearCollectionIdFilters())},{default:Me(()=>[Mt(" clear ")]),_:1})):ot("",!0)]),n9,r.value.length?(H(),me("ul",i9,[(H(!0),me(Nt,null,Fn(r.value,m=>(H(),me("li",{key:m.id,class:"text-xs bg-white rounded-md border border-neutral-800 inline-flex items-center text-neutral-900 px-2 py-1"},[Mt(xt(m.title)+" ",1),ue("button",{class:"ml-2 h-full flex items-center justify-center",onClick:g=>he(i).removeCollectionIdFilter(m.id)},[ye(he(lm),{class:"!h-3 !w-3"})],8,r9)]))),128))])):ot("",!0),s.value.length?(H(),We(hk,{key:1,label:"Add Collection"},{default:Me(()=>[(H(!0),me(Nt,null,Fn(s.value,m=>(H(),We(Yf,{key:m.id,class:"!whitespace-nowrap overflow-ellipsis overflow-x-hidden",title:u(m.title),onClick:g=>he(i).addCollectionIdFilter(m.id)},{default:Me(()=>[Mt(xt(u(m.title)),1)]),_:2},1032,["title","onClick"]))),128))]),_:1})):ot("",!0)]))}}),a9=["value"],o9=["value"],l9=lt({__name:"SelectFieldOptions",props:{filter:{}},setup(e){const t=e,i=Fe(t.filter.value),r=Fe([t.filter.value]),s=Nr(),u=Ai(),d=Oe(()=>u.getSearchableField(t.filter.fieldId));function l(m){const g=m.target;s.updateSearchableFieldFilterValue(t.filter.id,g.value)}return fn([d],async()=>{if(!d.value)throw new Error(`Could not find searchable field with id ${t.filter.fieldId}`);r.value=await Wn.getSearchableSelectFieldValues(d.value),r.value.includes(t.filter.value)||(s.updateSearchableFieldFilterValue(t.filter.id,r.value[0]),i.value=r.value[0])},{immediate:!0}),(m,g)=>(H(),me("select",{value:i.value,class:"rounded-md w-full border-neutral-200",onChange:l},[(H(!0),me(Nt,null,Fn(r.value,x=>(H(),me("option",{key:x,value:x},xt(x===""?"-":x),9,o9))),128))],40,a9))}}),c9=["value"],u9={value:"boolean_true"},d9={value:"boolean_false"},h9=lt({__name:"CheckboxFieldOptions",props:{filter:{}},setup(e){const t=e,i=Fe(t.filter.value),r=Fe("Checked"),s=Fe("Unchecked"),u=Nr(),d=Ai(),l=Oe(()=>d.getSearchableField(t.filter.fieldId));function m(g){const x=g.target;u.updateSearchableFieldFilterValue(t.filter.id,x.value)}return fn([l],async()=>{if(!l.value)throw new Error(`Could not find searchable field with id ${t.filter.fieldId}`);const g=await Wn.getSearchableCheckboxFieldValues(l.value);r.value=g.boolean_true,s.value=g.boolean_false,i.value=t.filter.value??"boolean_true",u.updateSearchableFieldFilterValue(t.filter.id,i.value)},{immediate:!0}),(g,x)=>(H(),me("select",{value:i.value,class:"rounded-md border-neutral-200",onChange:m},[ue("option",u9,xt(r.value),1),ue("option",d9,xt(s.value),1)],40,c9))}}),f9={class:"flex flex-col gap-4"},p9=["value","onChange"],m9={key:0,value:"",disabled:""},g9=["value"],v9=lt({__name:"CascadeSelect",props:{options:{},selectClass:{},labelClass:{},initialSelectedValues:{}},emits:["change"],setup(e,{emit:t}){const i=e,r=Br([...s()]);function s(){var x;if(!((x=i.initialSelectedValues)!=null&&x.length))return[{label:u(i.options),options:d(i.options),value:""}];const g=[];return i.initialSelectedValues.forEach(w=>{const C=l(g,w);C&&g.push(C)}),g}function u(g){return Object.keys(g)[0]}function d(g){const x=g[u(g)];return Array.isArray(x)?x:Object.keys(x)}function l(g,x="",w=i.options){const C=[];g.forEach($=>{C.push($.label),C.push($.value)});const I=fF(C,w);if(!I)return null;const M=u(I),L=d(I);return x!==""&&!L.includes(x)&&console.error(`Cannot create next selected: initial value ${x} is not in the options ${L}`),{label:M,options:L,value:x}}function m(g,x){if(r[g].value=x,r.splice(g+1),!x)return;const w=l(r,"");if(!w){t("change",r.map(C=>C.value));return}r.push(w),t("change",r.map(C=>C.value))}return fn(()=>i.options,()=>{r.splice(0,r.length,...s())}),(g,x)=>(H(),me("div",f9,[(H(!0),me(Nt,null,Fn(r,(w,C)=>(H(),me("div",{key:C,class:"flex flex-col gap-1"},[ue("label",{class:Dn(["uppercase text-xs font-medium tracking-wider",g.labelClass])},xt(w.label),3),ue("select",{class:Dn(["rounded-md",g.selectClass]),style:{width:"100%"},value:w.value,onChange:I=>m(C,I.target.value)},[w.options.includes("")?ot("",!0):(H(),me("option",m9," Select a "+xt(w.label),1)),(H(!0),me(Nt,null,Fn(w.options.sort(),I=>(H(),me("option",{key:I,value:I},xt(I===""?"-":I),9,g9))),128))],42,p9)]))),128))]))}}),_9=lt({__name:"MultiSelectFieldOptions",props:{filter:{}},setup(e){const t=e,i=Nr(),r=Ai(),s=Oe(()=>r.getSearchableField(t.filter.fieldId)),u=Fe(null);function d(l){i.updateSearchableFieldFilterValue(t.filter.id,l.join(","))}return fn([s],async()=>{if(!s.value)throw new Error(`Could not find searchable field with id ${t.filter.fieldId}`);u.value=await Wn.getSearchableMultiSelectFieldValues(s.value)},{immediate:!0}),(l,m)=>(H(),me("div",null,[u.value?(H(),We(v9,{key:0,options:u.value,initialSelectedValues:t.filter.value.split(","),class:"!gap-1",labelClass:"sr-only",selectClass:"text-sm border-neutral-200",onChange:d},null,8,["options","initialSelectedValues"])):ot("",!0)]))}}),y9={class:"filter-row__name text-sm"},b9={class:"p-2"},x9={class:"filter-row__value text-sm"},w9={class:"filter-row__is-fuzzy"},S9=lt({__name:"BaseFilterRow",props:{label:{},rowIndex:{}},emits:["remove"],setup(e){const t=Nr(),i=Oe(()=>t.filterBy.searchableFieldsOperator);function r(){const u=t.filterBy.searchableFieldsOperator==="AND"?"OR":"AND";t.updateSearchableFieldsOperator(u)}return(s,u)=>(H(),me("div",{class:Dn(["filter-row",{"filter-row--is-only-row":he(t).totalFieldFilterCount===1,"filter-row--is-first-row":s.rowIndex===0}])},[ye(si,{class:"text-xs filter-row__operator",variant:"tertiary",type:"button",onClick:r},{default:Me(()=>[Mt(xt(i.value),1)]),_:1}),ue("div",y9,[Mn(s.$slots,"label",{},()=>[ue("p",b9,xt(s.label),1)],!0)]),ue("div",x9,[Mn(s.$slots,"default",{},void 0,!0)]),ue("div",w9,[Mn(s.$slots,"fuzzy",{},void 0,!0)]),ue("button",{class:"filter-row__remove py-2 self-start w-full flex items-center justify-center",type:"button",onClick:u[0]||(u[0]=d=>s.$emit("remove"))},[ye(he(om),{class:"!w-5 !h-5"})])],2))}});const U_=sn(S9,[["__scopeId","data-v-b24af0ec"]]),T9=["value"],E9=["value"],C9=["checked"],I9=ue("span",{"aria-label":"Fuzzy Search"},"Fuzzy",-1),A9=lt({__name:"FilterBySpecificFieldsRow",props:{filter:{},rowIndex:{}},setup(e){const t=e,i=Ai(),r=Nr(),s=Oe(()=>{const x=i.getSearchableField(t.filter.fieldId);if(!x)throw new Error(`Could not find searchable field with id ${t.filter.fieldId}`);return x}),u=Oe(()=>i.searchableFields.filter(x=>r.supportedSpecificFieldTypes.includes(x.type)));function d(x){const w=t.filter.fieldId,C=x.target.value;if(C===w)return;r.updateFilterFieldId(t.filter.id,C);const I=i.getSearchableField(w),M=i.getSearchableField(C);(I==null?void 0:I.type)==="text"&&(M==null?void 0:M.type)==="text"||r.updateSearchableFieldFilterValue(t.filter.id,"")}function l(x){r.updateSearchableFieldFilterValue(t.filter.id,x)}function m(x){r.updateSearchableFieldFilterIsFuzzy(t.filter.id,x.target.checked)}function g(){r.removeSearchableFieldFilter(t.filter.id)}return(x,w)=>(H(),We(U_,{rowIndex:x.rowIndex,onRemove:g},{label:Me(()=>[ue("select",{class:"rounded-md text-sm filter-row__name w-full border-neutral-200 bg-transparent",value:s.value.id,onChange:d},[(H(!0),me(Nt,null,Fn(u.value,C=>(H(),me("option",{key:C.id,value:C.id},xt(C.label),9,E9))),128))],40,T9)]),fuzzy:Me(()=>[ue("label",{class:Dn(["text-xs font-bold uppercase text-center cursor-pointer leading-none block",{"text-blue-600":x.filter.isFuzzy,"text-neutral-300":!x.filter.isFuzzy}])},[ue("input",{class:"sr-only",type:"checkbox",checked:x.filter.isFuzzy,onChange:m},null,40,C9),I9],2)]),default:Me(()=>[["text","date","text area"].includes(s.value.type)?(H(),We(Ya,{key:0,id:x.filter.id,class:"text-sm",inputClass:"!bg-white !border !border-neutral-200 placeholder:capitalize",label:s.value.label,modelValue:x.filter.value,labelHidden:!0,placeholder:s.value.label,"onUpdate:modelValue":l},null,8,["id","label","modelValue","placeholder"])):ot("",!0),["select","tag list"].includes(s.value.type)?(H(),We(l9,{key:1,class:"w-full text-sm",filter:x.filter},null,8,["filter"])):ot("",!0),s.value.type==="checkbox"?(H(),We(h9,{key:2,class:"w-full text-sm",filter:x.filter},null,8,["filter"])):ot("",!0),s.value.type==="multiselect"?(H(),We(_9,{key:3,class:"w-full text-sm",filter:x.filter},null,8,["filter"])):ot("",!0)]),_:1},8,["rowIndex"]))}}),M9={class:"flex flex-col lg:flex-row gap-1"},k9=lt({__name:"FilterByGlobalDateRow",props:{rowIndex:{}},setup(e){const t=Nr();return(i,r)=>(H(),We(U_,{label:"Any Date",rowIndex:i.rowIndex,onRemove:he(t).removeDateRangeFilter},{default:Me(()=>[ue("div",M9,[he(t).filterBy.globalDateRange?(H(),We(Ya,{key:0,id:"filter-by-date-range-start-date",modelValue:he(t).filterBy.globalDateRange.startDate,"onUpdate:modelValue":r[0]||(r[0]=s=>he(t).filterBy.globalDateRange.startDate=s),class:"text-sm",inputClass:"!bg-white !border !border-neutral-200",label:"Start Date",labelHidden:!0,placeholder:"Start Date"},null,8,["modelValue"])):ot("",!0),he(t).filterBy.globalDateRange?(H(),We(Ya,{key:1,id:"filter-by-date-range-end-date",modelValue:he(t).filterBy.globalDateRange.endDate,"onUpdate:modelValue":r[1]||(r[1]=s=>he(t).filterBy.globalDateRange.endDate=s),class:"text-sm",inputClass:"!bg-white !border !border-neutral-200",label:"End Date",labelHidden:!0,placeholder:"End Date"},null,8,["modelValue"])):ot("",!0)])]),_:1},8,["rowIndex","onRemove"]))}});var fk={exports:{}};(function(e,t){(function(i,r){e.exports=r()})(CA,function(){var i,r,s;function u(l,m){if(!i)i=m;else if(!r)r=m;else{var g="var sharedChunk = {}; ("+i+")(sharedChunk); ("+r+")(sharedChunk);",x={};i(x),s=m(x),typeof window<"u"&&(s.workerUrl=window.URL.createObjectURL(new Blob([g],{type:"text/javascript"})))}}u(["exports"],function(l){function m(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var g=x;function x(c,a){this.x=c,this.y=a}x.prototype={clone:function(){return new x(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,a){return this.clone()._rotateAround(c,a)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var a=c.x-this.x,h=c.y-this.y;return a*a+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,a){return Math.atan2(this.x*a-this.y*c,this.x*c+this.y*a)},_matMult:function(c){var a=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=a,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var a=Math.cos(c),h=Math.sin(c),p=h*this.x+a*this.y;return this.x=a*this.x-h*this.y,this.y=p,this},_rotateAround:function(c,a){var h=Math.cos(c),p=Math.sin(c),y=a.y+p*(this.x-a.x)+h*(this.y-a.y);return this.x=a.x+h*(this.x-a.x)-p*(this.y-a.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},x.convert=function(c){return c instanceof x?c:Array.isArray(c)?new x(c[0],c[1]):c};var w=m(g),C=I;function I(c,a,h,p){this.cx=3*c,this.bx=3*(h-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(p-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=a,this.p2x=h,this.p2y=p}I.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,a){if(a===void 0&&(a=1e-6),c<0)return 0;if(c>1)return 1;for(var h=c,p=0;p<8;p++){var y=this.sampleCurveX(h)-c;if(Math.abs(y)<a)return h;var S=this.sampleCurveDerivativeX(h);if(Math.abs(S)<1e-6)break;h-=y/S}var T=0,A=1;for(h=c,p=0;p<20&&(y=this.sampleCurveX(h),!(Math.abs(y-c)<a));p++)c>y?T=h:A=h,h=.5*(A-T)+T;return h},solve:function(c,a){return this.sampleCurveY(this.solveCurveX(c,a))}};var M=m(C);function L(c,a,h,p){const y=new M(c,a,h,p);return function(S){return y.solve(S)}}const $=L(.25,.1,.25,1);function F(c,a,h){return Math.min(h,Math.max(a,c))}function U(c,a,h){const p=h-a,y=((c-a)%p+p)%p+a;return y===a?h:y}function ee(c,...a){for(const h of a)for(const p in h)c[p]=h[p];return c}let V=1;function Q(c,a){c.forEach(h=>{a[h]&&(a[h]=a[h].bind(a))})}function ae(c,a,h){const p={};for(const y in c)p[y]=a.call(h||this,c[y],y,c);return p}function be(c,a,h){const p={};for(const y in c)a.call(h||this,c[y],y,c)&&(p[y]=c[y]);return p}function te(c){return Array.isArray(c)?c.map(te):typeof c=="object"&&c?ae(c,te):c}const G={};function j(c){G[c]||(typeof console<"u"&&console.warn(c),G[c]=!0)}function z(c,a,h){return(h.y-c.y)*(a.x-c.x)>(a.y-c.y)*(h.x-c.x)}function ie(c){let a=0;for(let h,p,y=0,S=c.length,T=S-1;y<S;T=y++)h=c[y],p=c[T],a+=(p.x-h.x)*(h.y+p.y);return a}function X(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let ne=null;function Ee(c){if(ne==null){const a=c.navigator?c.navigator.userAgent:null;ne=!!c.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))}return ne}function Ce(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const Xe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let at,it;const $t={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(c){const a=requestAnimationFrame(c);return{cancel:()=>cancelAnimationFrame(a)}},getImageData(c,a=0){return this.getImageCanvasContext(c).getImageData(-a,-a,c.width+2*a,c.height+2*a)},getImageCanvasContext(c){const a=window.document.createElement("canvas"),h=a.getContext("2d",{willReadFrequently:!0});if(!h)throw new Error("failed to create canvas 2d context");return a.width=c.width,a.height=c.height,h.drawImage(c,0,0,c.width,c.height),h},resolveURL:c=>(at||(at=document.createElement("a")),at.href=c,at.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(it==null&&(it=matchMedia("(prefers-reduced-motion: reduce)")),it.matches)}},Ct={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class tt extends Error{constructor(a,h,p,y){super(`AJAXError: ${h} (${a}): ${p}`),this.status=a,this.statusText=h,this.url=p,this.body=y}}const et=X()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,dt=c=>Ct.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))];function Be(c,a){const h=new AbortController,p=new Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,referrer:et(),signal:h.signal});let y=!1,S=!1;return c.type==="json"&&p.headers.set("Accept","application/json"),S||fetch(p).then(T=>T.ok?(A=>{(c.type==="arrayBuffer"||c.type==="image"?A.arrayBuffer():c.type==="json"?A.json():A.text()).then(D=>{S||(y=!0,a(null,D,A.headers.get("Cache-Control"),A.headers.get("Expires")))}).catch(D=>{S||a(new Error(D.message))})})(T):T.blob().then(A=>a(new tt(T.status,T.statusText,c.url,A)))).catch(T=>{T.code!==20&&a(new Error(T.message))}),{cancel:()=>{S=!0,y||h.abort()}}}const Ke=function(c,a){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){if(X()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,a);if(!X())return(dt(c.url)||Be)(c,a)}if(!(/^file:/.test(h=c.url)||/^file:/.test(et())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Be(c,a);if(X()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,a,void 0,!0)}var h;return function(p,y){const S=new XMLHttpRequest;S.open(p.method||"GET",p.url,!0),p.type!=="arrayBuffer"&&p.type!=="image"||(S.responseType="arraybuffer");for(const T in p.headers)S.setRequestHeader(T,p.headers[T]);return p.type==="json"&&(S.responseType="text",S.setRequestHeader("Accept","application/json")),S.withCredentials=p.credentials==="include",S.onerror=()=>{y(new Error(S.statusText))},S.onload=()=>{if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let T=S.response;if(p.type==="json")try{T=JSON.parse(S.response)}catch(A){return y(A)}y(null,T,S.getResponseHeader("Cache-Control"),S.getResponseHeader("Expires"))}else{const T=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});y(new tt(S.status,S.statusText,p.url,T))}},S.send(p.body),{cancel:()=>S.abort()}}(c,a)},ut=function(c,a){return Ke(ee(c,{type:"arrayBuffer"}),a)};function Ot(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;const a=new URL(c),h=window.location;return a.protocol===h.protocol&&a.host===h.host}function Vt(c,a,h){h[c]&&h[c].indexOf(a)!==-1||(h[c]=h[c]||[],h[c].push(a))}function _n(c,a,h){if(h&&h[c]){const p=h[c].indexOf(a);p!==-1&&h[c].splice(p,1)}}class qt{constructor(a,h={}){ee(this,h),this.type=a}}class _e extends qt{constructor(a,h={}){super("error",ee({error:a},h))}}class ke{on(a,h){return this._listeners=this._listeners||{},Vt(a,h,this._listeners),this}off(a,h){return _n(a,h,this._listeners),_n(a,h,this._oneTimeListeners),this}once(a,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},Vt(a,h,this._oneTimeListeners),this):new Promise(p=>this.once(a,p))}fire(a,h){typeof a=="string"&&(a=new qt(a,h||{}));const p=a.type;if(this.listens(p)){a.target=this;const y=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const A of y)A.call(this,a);const S=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const A of S)_n(p,A,this._oneTimeListeners),A.call(this,a);const T=this._eventedParent;T&&(ee(a,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),T.fire(a))}else a instanceof _e&&console.error(a.error);return this}listens(a){return this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a)}setEventedParent(a,h){return this._eventedParent=a,this._eventedParentData=h,this}}var ge={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ft=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function q(c,a){const h={};for(const p in c)p!=="ref"&&(h[p]=c[p]);return ft.forEach(p=>{p in a&&(h[p]=a[p])}),h}function fe(c,a){if(Array.isArray(c)){if(!Array.isArray(a)||c.length!==a.length)return!1;for(let h=0;h<c.length;h++)if(!fe(c[h],a[h]))return!1;return!0}if(typeof c=="object"&&c!==null&&a!==null){if(typeof a!="object"||Object.keys(c).length!==Object.keys(a).length)return!1;for(const h in c)if(!fe(c[h],a[h]))return!1;return!0}return c===a}const Pe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ge(c,a,h){h.push({command:Pe.addSource,args:[c,a[c]]})}function pt(c,a,h){a.push({command:Pe.removeSource,args:[c]}),h[c]=!0}function ht(c,a,h,p){pt(c,h,p),Ge(c,a,h)}function zt(c,a,h){let p;for(p in c[h])if(Object.prototype.hasOwnProperty.call(c[h],p)&&p!=="data"&&!fe(c[h][p],a[h][p]))return!1;for(p in a[h])if(Object.prototype.hasOwnProperty.call(a[h],p)&&p!=="data"&&!fe(c[h][p],a[h][p]))return!1;return!0}function Dt(c,a,h,p,y,S){let T;for(T in a=a||{},c=c||{})Object.prototype.hasOwnProperty.call(c,T)&&(fe(c[T],a[T])||h.push({command:S,args:[p,T,a[T],y]}));for(T in a)Object.prototype.hasOwnProperty.call(a,T)&&!Object.prototype.hasOwnProperty.call(c,T)&&(fe(c[T],a[T])||h.push({command:S,args:[p,T,a[T],y]}))}function Gt(c){return c.id}function ln(c,a){return c[a.id]=a,c}class vt{constructor(a,h,p,y){this.message=(a?`${a}: `:"")+p,y&&(this.identifier=y),h!=null&&h.__line__&&(this.line=h.__line__)}}function Rn(c,...a){for(const h of a)for(const p in h)c[p]=h[p];return c}class Ln extends Error{constructor(a,h){super(h),this.message=h,this.key=a}}class Ye{constructor(a,h=[]){this.parent=a,this.bindings={};for(const[p,y]of h)this.bindings[p]=y}concat(a){return new Ye(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}const Qe={kind:"null"},Re={kind:"number"},mt={kind:"string"},St={kind:"boolean"},Yt={kind:"color"},an={kind:"object"},Pt={kind:"value"},qn={kind:"collator"},Cn={kind:"formatted"},Ut={kind:"padding"},vn={kind:"resolvedImage"};function kn(c,a){return{kind:"array",itemType:c,N:a}}function de(c){if(c.kind==="array"){const a=de(c.itemType);return typeof c.N=="number"?`array<${a}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${a}>`}return c.kind}const Y=[Qe,Re,mt,St,Yt,Cn,an,kn(Pt),Ut,vn];function re(c,a){if(a.kind==="error")return null;if(c.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!re(c.itemType,a.itemType))&&(typeof c.N!="number"||c.N===a.N))return null}else{if(c.kind===a.kind)return null;if(c.kind==="value"){for(const h of Y)if(!re(h,a))return null}}return`Expected ${de(c)} but found ${de(a)} instead.`}function pe(c,a){return a.some(h=>h.kind===c.kind)}function Ie(c,a){return a.some(h=>h==="null"?c===null:h==="array"?Array.isArray(c):h==="object"?c&&!Array.isArray(c)&&typeof c=="object":h===typeof c)}function $e(c,a){return c.kind==="array"&&a.kind==="array"?c.itemType.kind===a.itemType.kind&&typeof c.N=="number":c.kind===a.kind}const qe=.96422,Ve=.82521,Le=4/29,Ze=6/29,wt=3*Ze*Ze,bt=Math.PI/180,Et=180/Math.PI;function pn(c){return(c%=360)<0&&(c+=360),c}function wn([c,a,h,p]){let y,S;const T=mn((.2225045*(c=un(c))+.7168786*(a=un(a))+.0606169*(h=un(h)))/1);c===a&&a===h?y=S=T:(y=mn((.4360747*c+.3850649*a+.1430804*h)/qe),S=mn((.0139322*c+.0971045*a+.7141733*h)/Ve));const A=116*T-16;return[A<0?0:A,500*(y-T),200*(T-S),p]}function un(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function mn(c){return c>.008856451679035631?Math.pow(c,1/3):c/wt+Le}function En([c,a,h,p]){let y=(c+16)/116,S=isNaN(a)?y:y+a/500,T=isNaN(h)?y:y-h/200;return y=1*$n(y),S=qe*$n(S),T=Ve*$n(T),[Vn(3.1338561*S-1.6168667*y-.4906146*T),Vn(-.9787684*S+1.9161415*y+.033454*T),Vn(.0719453*S-.2289914*y+1.4052427*T),p]}function Vn(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function $n(c){return c>Ze?c*c*c:wt*(c-Le)}function jt(c){return parseInt(c.padEnd(2,c),16)/255}function He(c,a){return It(a?c/100:c,0,1)}function It(c,a,h){return Math.min(Math.max(a,c),h)}function gt(c){return!c.some(Number.isNaN)}const ze={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class yt{constructor(a,h,p,y=1,S=!0){this.r=a,this.g=h,this.b=p,this.a=y,S||(this.r*=y,this.g*=y,this.b*=y,y||this.overwriteGetter("rgb",[a,h,p,y]))}static parse(a){if(a instanceof yt)return a;if(typeof a!="string")return;const h=function(p){if((p=p.toLowerCase())==="transparent")return[0,0,0,0];const y=ze[p];if(y){const[T,A,D]=y;return[T/255,A/255,D/255,1]}if(p.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(p)){const T=p.length<6?1:2;let A=1;return[jt(p.slice(A,A+=T)),jt(p.slice(A,A+=T)),jt(p.slice(A,A+=T)),jt(p.slice(A,A+T)||"ff")]}if(p.startsWith("rgb")){const T=p.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(T){const[A,D,N,W,J,se,oe,ce,Te,we,je,Je]=T,Ne=[W||" ",oe||" ",we].join("");if(Ne==="  "||Ne==="  /"||Ne===",,"||Ne===",,,"){const rt=[N,se,Te].join(""),ct=rt==="%%%"?100:rt===""?255:0;if(ct){const Tt=[It(+D/ct,0,1),It(+J/ct,0,1),It(+ce/ct,0,1),je?He(+je,Je):1];if(gt(Tt))return Tt}}return}}const S=p.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(S){const[T,A,D,N,W,J,se,oe,ce]=S,Te=[D||" ",W||" ",se].join("");if(Te==="  "||Te==="  /"||Te===",,"||Te===",,,"){const we=[+A,It(+N,0,100),It(+J,0,100),oe?He(+oe,ce):1];if(gt(we))return function([je,Je,Ne,rt]){function ct(Tt){const cn=(Tt+je/30)%12,gn=Je*Math.min(Ne,1-Ne);return Ne-gn*Math.max(-1,Math.min(cn-3,9-cn,1))}return je=pn(je),Je/=100,Ne/=100,[ct(0),ct(8),ct(4),rt]}(we)}}}(a);return h?new yt(...h,!1):void 0}get rgb(){const{r:a,g:h,b:p,a:y}=this,S=y||1/0;return this.overwriteGetter("rgb",[a/S,h/S,p/S,y])}get hcl(){return this.overwriteGetter("hcl",function(a){const[h,p,y,S]=wn(a),T=Math.sqrt(p*p+y*y);return[Math.round(1e4*T)?pn(Math.atan2(y,p)*Et):NaN,T,h,S]}(this.rgb))}get lab(){return this.overwriteGetter("lab",wn(this.rgb))}overwriteGetter(a,h){return Object.defineProperty(this,a,{value:h}),h}toString(){const[a,h,p,y]=this.rgb;return`rgba(${[a,h,p].map(S=>Math.round(255*S)).join(",")},${y})`}}yt.black=new yt(0,0,0,1),yt.white=new yt(1,1,1,1),yt.transparent=new yt(0,0,0,0),yt.red=new yt(1,0,0,1);class Wt{constructor(a,h,p){this.sensitivity=a?h?"variant":"case":h?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,h){return this.collator.compare(a,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class In{constructor(a,h,p,y,S){this.text=a,this.image=h,this.scale=p,this.fontStack=y,this.textColor=S}}class Yn{constructor(a){this.sections=a}static fromString(a){return new Yn([new In(a,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(a=>a.text.length!==0||a.image&&a.image.name.length!==0)}static factory(a){return a instanceof Yn?a:Yn.fromString(a)}toString(){return this.sections.length===0?"":this.sections.map(a=>a.text).join("")}}class oi{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof oi)return a;if(typeof a=="number")return new oi([a,a,a,a]);if(Array.isArray(a)&&!(a.length<1||a.length>4)){for(const h of a)if(typeof h!="number")return;switch(a.length){case 1:a=[a[0],a[0],a[0],a[0]];break;case 2:a=[a[0],a[1],a[0],a[1]];break;case 3:a=[a[0],a[1],a[2],a[1]]}return new oi(a)}}toString(){return JSON.stringify(this.values)}}class ri{constructor(a){this.name=a.name,this.available=a.available}toString(){return this.name}static fromString(a){return a?new ri({name:a,available:!1}):null}}function uo(c,a,h,p){return typeof c=="number"&&c>=0&&c<=255&&typeof a=="number"&&a>=0&&a<=255&&typeof h=="number"&&h>=0&&h<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:`Invalid rgba value [${[c,a,h,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof p=="number"?[c,a,h,p]:[c,a,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ji(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof yt||c instanceof Wt||c instanceof Yn||c instanceof oi||c instanceof ri)return!0;if(Array.isArray(c)){for(const a of c)if(!ji(a))return!1;return!0}if(typeof c=="object"){for(const a in c)if(!ji(c[a]))return!1;return!0}return!1}function Ci(c){if(c===null)return Qe;if(typeof c=="string")return mt;if(typeof c=="boolean")return St;if(typeof c=="number")return Re;if(c instanceof yt)return Yt;if(c instanceof Wt)return qn;if(c instanceof Yn)return Cn;if(c instanceof oi)return Ut;if(c instanceof ri)return vn;if(Array.isArray(c)){const a=c.length;let h;for(const p of c){const y=Ci(p);if(h){if(h===y)continue;h=Pt;break}h=y}return kn(h||Pt,a)}return an}function ho(c){const a=typeof c;return c===null?"":a==="string"||a==="number"||a==="boolean"?String(c):c instanceof yt||c instanceof Yn||c instanceof oi||c instanceof ri?c.toString():JSON.stringify(c)}class fo{constructor(a,h){this.type=a,this.value=h}static parse(a,h){if(a.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!ji(a[1]))return h.error("invalid value");const p=a[1];let y=Ci(p);const S=h.expectedType;return y.kind!=="array"||y.N!==0||!S||S.kind!=="array"||typeof S.N=="number"&&S.N!==0||(y=S),new fo(y,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class _r{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}}const wc={string:mt,number:Re,boolean:St,object:an};class Zr{constructor(a,h){this.type=a,this.args=h}static parse(a,h){if(a.length<2)return h.error("Expected at least one argument.");let p,y=1;const S=a[0];if(S==="array"){let A,D;if(a.length>2){const N=a[1];if(typeof N!="string"||!(N in wc)||N==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);A=wc[N],y++}else A=Pt;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return h.error('The length argument to "array" must be a positive integer literal',2);D=a[2],y++}p=kn(A,D)}else{if(!wc[S])throw new Error(`Types doesn't contain name = ${S}`);p=wc[S]}const T=[];for(;y<a.length;y++){const A=h.parse(a[y],y,Pt);if(!A)return null;T.push(A)}return new Zr(p,T)}evaluate(a){for(let h=0;h<this.args.length;h++){const p=this.args[h].evaluate(a);if(!re(this.type,Ci(p)))return p;if(h===this.args.length-1)throw new _r(`Expected value to be of type ${de(this.type)}, but found ${de(Ci(p))} instead.`)}throw new Error}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}const xm={"to-boolean":St,"to-color":Yt,"to-number":Re,"to-string":mt};class po{constructor(a,h){this.type=a,this.args=h}static parse(a,h){if(a.length<2)return h.error("Expected at least one argument.");const p=a[0];if(!xm[p])throw new Error(`Can't parse ${p} as it is not part of the known types`);if((p==="to-boolean"||p==="to-string")&&a.length!==2)return h.error("Expected one argument.");const y=xm[p],S=[];for(let T=1;T<a.length;T++){const A=h.parse(a[T],T,Pt);if(!A)return null;S.push(A)}return new po(y,S)}evaluate(a){if(this.type.kind==="boolean")return!!this.args[0].evaluate(a);if(this.type.kind==="color"){let h,p;for(const y of this.args){if(h=y.evaluate(a),p=null,h instanceof yt)return h;if(typeof h=="string"){const S=a.parseColor(h);if(S)return S}else if(Array.isArray(h)&&(p=h.length<3||h.length>4?`Invalid rbga value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:uo(h[0],h[1],h[2],h[3]),!p))return new yt(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new _r(p||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}if(this.type.kind==="padding"){let h;for(const p of this.args){h=p.evaluate(a);const y=oi.parse(h);if(y)return y}throw new _r(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}if(this.type.kind==="number"){let h=null;for(const p of this.args){if(h=p.evaluate(a),h===null)return 0;const y=Number(h);if(!isNaN(y))return y}throw new _r(`Could not convert ${JSON.stringify(h)} to number.`)}return this.type.kind==="formatted"?Yn.fromString(ho(this.args[0].evaluate(a))):this.type.kind==="resolvedImage"?ri.fromString(ho(this.args[0].evaluate(a))):ho(this.args[0].evaluate(a))}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}const ny=["Unknown","Point","LineString","Polygon"];class Bs{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ny[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(a){let h=this._parseColorCache[a];return h||(h=this._parseColorCache[a]=yt.parse(a)),h}}class yl{constructor(a,h,p=[],y,S=new Ye,T=[]){this.registry=a,this.path=p,this.key=p.map(A=>`[${A}]`).join(""),this.scope=S,this.errors=T,this.expectedType=y,this._isConstant=h}parse(a,h,p,y,S={}){return h?this.concat(h,p,y)._parse(a,S):this._parse(a,S)}_parse(a,h){function p(y,S,T){return T==="assert"?new Zr(S,[y]):T==="coerce"?new po(S,[y]):y}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const y=a[0];if(typeof y!="string")return this.error(`Expression name must be a string, but found ${typeof y} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const S=this.registry[y];if(S){let T=S.parse(a,this);if(!T)return null;if(this.expectedType){const A=this.expectedType,D=T.type;if(A.kind!=="string"&&A.kind!=="number"&&A.kind!=="boolean"&&A.kind!=="object"&&A.kind!=="array"||D.kind!=="value")if(A.kind!=="color"&&A.kind!=="formatted"&&A.kind!=="resolvedImage"||D.kind!=="value"&&D.kind!=="string")if(A.kind!=="padding"||D.kind!=="value"&&D.kind!=="number"&&D.kind!=="array"){if(this.checkSubtype(A,D))return null}else T=p(T,A,h.typeAnnotation||"coerce");else T=p(T,A,h.typeAnnotation||"coerce");else T=p(T,A,h.typeAnnotation||"assert")}if(!(T instanceof fo)&&T.type.kind!=="resolvedImage"&&this._isConstant(T)){const A=new Bs;try{T=new fo(T.type,T.evaluate(A))}catch(D){return this.error(D.message),null}}return T}return this.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,h,p){const y=typeof a=="number"?this.path.concat(a):this.path,S=p?this.scope.concat(p):this.scope;return new yl(this.registry,this._isConstant,y,h||null,S,this.errors)}error(a,...h){const p=`${this.key}${h.map(y=>`[${y}]`).join("")}`;this.errors.push(new Ln(p,a))}checkSubtype(a,h){const p=re(a,h);return p&&this.error(p),p}}class bl{constructor(a,h,p){this.type=qn,this.locale=p,this.caseSensitive=a,this.diacriticSensitive=h}static parse(a,h){if(a.length!==2)return h.error("Expected one argument.");const p=a[1];if(typeof p!="object"||Array.isArray(p))return h.error("Collator options argument must be an object.");const y=h.parse(p["case-sensitive"]!==void 0&&p["case-sensitive"],1,St);if(!y)return null;const S=h.parse(p["diacritic-sensitive"]!==void 0&&p["diacritic-sensitive"],1,St);if(!S)return null;let T=null;return p.locale&&(T=h.parse(p.locale,1,mt),!T)?null:new bl(y,S,T)}evaluate(a){return new Wt(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}}const Cs=8192;function _i(c,a){c[0]=Math.min(c[0],a[0]),c[1]=Math.min(c[1],a[1]),c[2]=Math.max(c[2],a[0]),c[3]=Math.max(c[3],a[1])}function Pu(c,a){return!(c[0]<=a[0]||c[2]>=a[2]||c[1]<=a[1]||c[3]>=a[3])}function kh(c,a){const h=(180+c[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,y=Math.pow(2,a.z);return[Math.round(h*y*Cs),Math.round(p*y*Cs)]}function iy(c,a,h){const p=c[0]-a[0],y=c[1]-a[1],S=c[0]-h[0],T=c[1]-h[1];return p*T-S*y==0&&p*S<=0&&y*T<=0}function Du(c,a){let h=!1;for(let T=0,A=a.length;T<A;T++){const D=a[T];for(let N=0,W=D.length;N<W-1;N++){if(iy(c,D[N],D[N+1]))return!1;(y=D[N])[1]>(p=c)[1]!=(S=D[N+1])[1]>p[1]&&p[0]<(S[0]-y[0])*(p[1]-y[1])/(S[1]-y[1])+y[0]&&(h=!h)}}var p,y,S;return h}function wm(c,a){for(let h=0;h<a.length;h++)if(Du(c,a[h]))return!0;return!1}function Sm(c,a,h,p){const y=p[0]-h[0],S=p[1]-h[1],T=(c[0]-h[0])*S-y*(c[1]-h[1]),A=(a[0]-h[0])*S-y*(a[1]-h[1]);return T>0&&A<0||T<0&&A>0}function Tm(c,a,h){for(const N of h)for(let W=0;W<N.length-1;++W)if((A=[(T=N[W+1])[0]-(S=N[W])[0],T[1]-S[1]])[0]*(D=[(y=a)[0]-(p=c)[0],y[1]-p[1]])[1]-A[1]*D[0]!=0&&Sm(p,y,S,T)&&Sm(S,T,p,y))return!0;var p,y,S,T,A,D;return!1}function Ph(c,a){for(let h=0;h<c.length;++h)if(!Du(c[h],a))return!1;for(let h=0;h<c.length-1;++h)if(Tm(c[h],c[h+1],a))return!1;return!0}function ry(c,a){for(let h=0;h<a.length;h++)if(Ph(c,a[h]))return!0;return!1}function Dh(c,a,h){const p=[];for(let y=0;y<c.length;y++){const S=[];for(let T=0;T<c[y].length;T++){const A=kh(c[y][T],h);_i(a,A),S.push(A)}p.push(S)}return p}function Em(c,a,h){const p=[];for(let y=0;y<c.length;y++){const S=Dh(c[y],a,h);p.push(S)}return p}function Cm(c,a,h,p){if(c[0]<h[0]||c[0]>h[2]){const y=.5*p;let S=c[0]-h[0]>y?-p:h[0]-c[0]>y?p:0;S===0&&(S=c[0]-h[2]>y?-p:h[2]-c[0]>y?p:0),c[0]+=S}_i(a,c)}function Lh(c,a,h,p){const y=Math.pow(2,p.z)*Cs,S=[p.x*Cs,p.y*Cs],T=[];for(const A of c)for(const D of A){const N=[D.x+S[0],D.y+S[1]];Cm(N,a,h,y),T.push(N)}return T}function Oh(c,a,h,p){const y=Math.pow(2,p.z)*Cs,S=[p.x*Cs,p.y*Cs],T=[];for(const D of c){const N=[];for(const W of D){const J=[W.x+S[0],W.y+S[1]];_i(a,J),N.push(J)}T.push(N)}if(a[2]-a[0]<=y/2){(A=a)[0]=A[1]=1/0,A[2]=A[3]=-1/0;for(const D of T)for(const N of D)Cm(N,a,h,y)}var A;return T}class No{constructor(a,h){this.type=St,this.geojson=a,this.geometries=h}static parse(a,h){if(a.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(ji(a[1])){const p=a[1];if(p.type==="FeatureCollection")for(let y=0;y<p.features.length;++y){const S=p.features[y].geometry.type;if(S==="Polygon"||S==="MultiPolygon")return new No(p,p.features[y].geometry)}else if(p.type==="Feature"){const y=p.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new No(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new No(p,p)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return function(h,p){const y=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],T=h.canonicalID();if(p.type==="Polygon"){const A=Dh(p.coordinates,S,T),D=Lh(h.geometry(),y,S,T);if(!Pu(y,S))return!1;for(const N of D)if(!Du(N,A))return!1}if(p.type==="MultiPolygon"){const A=Em(p.coordinates,S,T),D=Lh(h.geometry(),y,S,T);if(!Pu(y,S))return!1;for(const N of D)if(!wm(N,A))return!1}return!0}(a,this.geometries);if(a.geometryType()==="LineString")return function(h,p){const y=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],T=h.canonicalID();if(p.type==="Polygon"){const A=Dh(p.coordinates,S,T),D=Oh(h.geometry(),y,S,T);if(!Pu(y,S))return!1;for(const N of D)if(!Ph(N,A))return!1}if(p.type==="MultiPolygon"){const A=Em(p.coordinates,S,T),D=Oh(h.geometry(),y,S,T);if(!Pu(y,S))return!1;for(const N of D)if(!ry(N,A))return!1}return!0}(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Lu{constructor(a,h){this.type=h.type,this.name=a,this.boundExpression=h}static parse(a,h){if(a.length!==2||typeof a[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const p=a[1];return h.scope.has(p)?new Lu(p,h.scope.get(p)):h.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}}class Kr{constructor(a,h,p,y){this.name=a,this.type=h,this._evaluate=p,this.args=y}evaluate(a){return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}static parse(a,h){const p=a[0],y=Kr.definitions[p];if(!y)return h.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const S=Array.isArray(y)?y[0]:y.type,T=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,A=T.filter(([N])=>!Array.isArray(N)||N.length===a.length-1);let D=null;for(const[N,W]of A){D=new yl(h.registry,Ou,h.path,null,h.scope);const J=[];let se=!1;for(let oe=1;oe<a.length;oe++){const ce=a[oe],Te=Array.isArray(N)?N[oe-1]:N.type,we=D.parse(ce,1+J.length,Te);if(!we){se=!0;break}J.push(we)}if(!se)if(Array.isArray(N)&&N.length!==J.length)D.error(`Expected ${N.length} arguments, but found ${J.length} instead.`);else{for(let oe=0;oe<J.length;oe++){const ce=Array.isArray(N)?N[oe]:N.type,Te=J[oe];D.concat(oe+1).checkSubtype(ce,Te.type)}if(D.errors.length===0)return new Kr(p,S,W,J)}}if(A.length===1)h.errors.push(...D.errors);else{const N=(A.length?A:T).map(([J])=>{return se=J,Array.isArray(se)?`(${se.map(de).join(", ")})`:`(${de(se.type)}...)`;var se}).join(" | "),W=[];for(let J=1;J<a.length;J++){const se=h.parse(a[J],1+W.length);if(!se)return null;W.push(de(se.type))}h.error(`Expected arguments of type ${N}, but found (${W.join(", ")}) instead.`)}return null}static register(a,h){Kr.definitions=h;for(const p in h)a[p]=Kr}}function Ou(c){if(c instanceof Lu)return Ou(c.boundExpression);if(c instanceof Kr&&c.name==="error"||c instanceof bl||c instanceof No)return!1;const a=c instanceof po||c instanceof Zr;let h=!0;return c.eachChild(p=>{h=a?h&&Ou(p):h&&p instanceof fo}),!!h&&Ru(c)&&Tc(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ru(c){if(c instanceof Kr&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof No)return!1;let a=!0;return c.eachChild(h=>{a&&!Ru(h)&&(a=!1)}),a}function Sc(c){if(c instanceof Kr&&c.name==="feature-state")return!1;let a=!0;return c.eachChild(h=>{a&&!Sc(h)&&(a=!1)}),a}function Tc(c,a){if(c instanceof Kr&&a.indexOf(c.name)>=0)return!1;let h=!0;return c.eachChild(p=>{h&&!Tc(p,a)&&(h=!1)}),h}function Ec(c,a){const h=c.length-1;let p,y,S=0,T=h,A=0;for(;S<=T;)if(A=Math.floor((S+T)/2),p=c[A],y=c[A+1],p<=a){if(A===h||a<y)return A;S=A+1}else{if(!(p>a))throw new _r("Input is not a number.");T=A-1}return 0}class Cc{constructor(a,h,p){this.type=a,this.input=h,this.labels=[],this.outputs=[];for(const[y,S]of p)this.labels.push(y),this.outputs.push(S)}static parse(a,h){if(a.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return h.error("Expected an even number of arguments.");const p=h.parse(a[1],1,Re);if(!p)return null;const y=[];let S=null;h.expectedType&&h.expectedType.kind!=="value"&&(S=h.expectedType);for(let T=1;T<a.length;T+=2){const A=T===1?-1/0:a[T],D=a[T+1],N=T,W=T+1;if(typeof A!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',N);if(y.length&&y[y.length-1][0]>=A)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',N);const J=h.parse(D,W,S);if(!J)return null;S=S||J.type,y.push([A,J])}return new Cc(S,p,y)}evaluate(a){const h=this.labels,p=this.outputs;if(h.length===1)return p[0].evaluate(a);const y=this.input.evaluate(a);if(y<=h[0])return p[0].evaluate(a);const S=h.length;return y>=h[S-1]?p[S-1].evaluate(a):p[Ec(h,y)].evaluate(a)}eachChild(a){a(this.input);for(const h of this.outputs)a(h)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function Ic(c,a,h){return c+h*(a-c)}function Ac(c,a,h){return c.map((p,y)=>Ic(p,a[y],h))}const Xr={number:Ic,color:function(c,a,h,p="rgb"){switch(p){case"rgb":{const[y,S,T,A]=Ac(c.rgb,a.rgb,h);return new yt(y,S,T,A,!1)}case"hcl":{const[y,S,T,A]=c.hcl,[D,N,W,J]=a.hcl;let se,oe;if(isNaN(y)||isNaN(D))isNaN(y)?isNaN(D)?se=NaN:(se=D,T!==1&&T!==0||(oe=N)):(se=y,W!==1&&W!==0||(oe=S));else{let Je=D-y;D>y&&Je>180?Je-=360:D<y&&y-D>180&&(Je+=360),se=y+h*Je}const[ce,Te,we,je]=function([Je,Ne,rt,ct]){return Je=isNaN(Je)?0:Je*bt,En([rt,Math.cos(Je)*Ne,Math.sin(Je)*Ne,ct])}([se,oe??Ic(S,N,h),Ic(T,W,h),Ic(A,J,h)]);return new yt(ce,Te,we,je,!1)}case"lab":{const[y,S,T,A]=En(Ac(c.lab,a.lab,h));return new yt(y,S,T,A,!1)}}},array:Ac,padding:function(c,a,h){return new oi(Ac(c.values,a.values,h))}};class os{constructor(a,h,p,y,S){this.type=a,this.operator=h,this.interpolation=p,this.input=y,this.labels=[],this.outputs=[];for(const[T,A]of S)this.labels.push(T),this.outputs.push(A)}static interpolationFactor(a,h,p,y){let S=0;if(a.name==="exponential")S=Rh(h,a.base,p,y);else if(a.name==="linear")S=Rh(h,1,p,y);else if(a.name==="cubic-bezier"){const T=a.controlPoints;S=new M(T[0],T[1],T[2],T[3]).solve(Rh(h,1,p,y))}return S}static parse(a,h){let[p,y,S,...T]=a;if(!Array.isArray(y)||y.length===0)return h.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){const N=y[1];if(typeof N!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:N}}else{if(y[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(y[0])}`,1,0);{const N=y.slice(1);if(N.length!==4||N.some(W=>typeof W!="number"||W<0||W>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:N}}}if(a.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(S=h.parse(S,2,Re),!S)return null;const A=[];let D=null;p==="interpolate-hcl"||p==="interpolate-lab"?D=Yt:h.expectedType&&h.expectedType.kind!=="value"&&(D=h.expectedType);for(let N=0;N<T.length;N+=2){const W=T[N],J=T[N+1],se=N+3,oe=N+4;if(typeof W!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',se);if(A.length&&A[A.length-1][0]>=W)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',se);const ce=h.parse(J,oe,D);if(!ce)return null;D=D||ce.type,A.push([W,ce])}return $e(D,Re)||$e(D,Yt)||$e(D,Ut)||$e(D,kn(Re))?new os(D,p,y,S,A):h.error(`Type ${de(D)} is not interpolatable.`)}evaluate(a){const h=this.labels,p=this.outputs;if(h.length===1)return p[0].evaluate(a);const y=this.input.evaluate(a);if(y<=h[0])return p[0].evaluate(a);const S=h.length;if(y>=h[S-1])return p[S-1].evaluate(a);const T=Ec(h,y),A=os.interpolationFactor(this.interpolation,y,h[T],h[T+1]),D=p[T].evaluate(a),N=p[T+1].evaluate(a);switch(this.operator){case"interpolate":return Xr[this.type.kind](D,N,A);case"interpolate-hcl":return Xr.color(D,N,A,"hcl");case"interpolate-lab":return Xr.color(D,N,A,"lab")}}eachChild(a){a(this.input);for(const h of this.outputs)a(h)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function Rh(c,a,h,p){const y=p-h,S=c-h;return y===0?0:a===1?S/y:(Math.pow(a,S)-1)/(Math.pow(a,y)-1)}class Fu{constructor(a,h){this.type=a,this.args=h}static parse(a,h){if(a.length<2)return h.error("Expectected at least one argument.");let p=null;const y=h.expectedType;y&&y.kind!=="value"&&(p=y);const S=[];for(const A of a.slice(1)){const D=h.parse(A,1+S.length,p,void 0,{typeAnnotation:"omit"});if(!D)return null;p=p||D.type,S.push(D)}if(!p)throw new Error("No output type");const T=y&&S.some(A=>re(y,A.type));return new Fu(T?Pt:p,S)}evaluate(a){let h,p=null,y=0;for(const S of this.args)if(y++,p=S.evaluate(a),p&&p instanceof ri&&!p.available&&(h||(h=p.name),p=null,y===this.args.length&&(p=h)),p!==null)break;return p}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}class $u{constructor(a,h){this.type=h.type,this.bindings=[].concat(a),this.result=h}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const h of this.bindings)a(h[1]);a(this.result)}static parse(a,h){if(a.length<4)return h.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const p=[];for(let S=1;S<a.length-1;S+=2){const T=a[S];if(typeof T!="string")return h.error(`Expected string, but found ${typeof T} instead.`,S);if(/[^a-zA-Z0-9_]/.test(T))return h.error("Variable names must contain only alphanumeric characters or '_'.",S);const A=h.parse(a[S+1],S+1);if(!A)return null;p.push([T,A])}const y=h.parse(a[a.length-1],a.length-1,h.expectedType,p);return y?new $u(p,y):null}outputDefined(){return this.result.outputDefined()}}class Fh{constructor(a,h,p){this.type=a,this.index=h,this.input=p}static parse(a,h){if(a.length!==3)return h.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const p=h.parse(a[1],1,Re),y=h.parse(a[2],2,kn(h.expectedType||Pt));return p&&y?new Fh(y.type.itemType,p,y):null}evaluate(a){const h=this.index.evaluate(a),p=this.input.evaluate(a);if(h<0)throw new _r(`Array index out of bounds: ${h} < 0.`);if(h>=p.length)throw new _r(`Array index out of bounds: ${h} > ${p.length-1}.`);if(h!==Math.floor(h))throw new _r(`Array index must be an integer, but found ${h} instead.`);return p[h]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}}class $h{constructor(a,h){this.type=St,this.needle=a,this.haystack=h}static parse(a,h){if(a.length!==3)return h.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const p=h.parse(a[1],1,Pt),y=h.parse(a[2],2,Pt);return p&&y?pe(p.type,[St,mt,Re,Qe,Pt])?new $h(p,y):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${de(p.type)} instead`):null}evaluate(a){const h=this.needle.evaluate(a),p=this.haystack.evaluate(a);if(!p)return!1;if(!Ie(h,["boolean","string","number","null"]))throw new _r(`Expected first argument to be of type boolean, string, number or null, but found ${de(Ci(h))} instead.`);if(!Ie(p,["string","array"]))throw new _r(`Expected second argument to be of type array or string, but found ${de(Ci(p))} instead.`);return p.indexOf(h)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}}class zu{constructor(a,h,p){this.type=Re,this.needle=a,this.haystack=h,this.fromIndex=p}static parse(a,h){if(a.length<=2||a.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const p=h.parse(a[1],1,Pt),y=h.parse(a[2],2,Pt);if(!p||!y)return null;if(!pe(p.type,[St,mt,Re,Qe,Pt]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${de(p.type)} instead`);if(a.length===4){const S=h.parse(a[3],3,Re);return S?new zu(p,y,S):null}return new zu(p,y)}evaluate(a){const h=this.needle.evaluate(a),p=this.haystack.evaluate(a);if(!Ie(h,["boolean","string","number","null"]))throw new _r(`Expected first argument to be of type boolean, string, number or null, but found ${de(Ci(h))} instead.`);if(!Ie(p,["string","array"]))throw new _r(`Expected second argument to be of type array or string, but found ${de(Ci(p))} instead.`);if(this.fromIndex){const y=this.fromIndex.evaluate(a);return p.indexOf(h,y)}return p.indexOf(h)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}}class ui{constructor(a,h,p,y,S,T){this.inputType=a,this.type=h,this.input=p,this.cases=y,this.outputs=S,this.otherwise=T}static parse(a,h){if(a.length<5)return h.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return h.error("Expected an even number of arguments.");let p,y;h.expectedType&&h.expectedType.kind!=="value"&&(y=h.expectedType);const S={},T=[];for(let N=2;N<a.length-1;N+=2){let W=a[N];const J=a[N+1];Array.isArray(W)||(W=[W]);const se=h.concat(N);if(W.length===0)return se.error("Expected at least one branch label.");for(const ce of W){if(typeof ce!="number"&&typeof ce!="string")return se.error("Branch labels must be numbers or strings.");if(typeof ce=="number"&&Math.abs(ce)>Number.MAX_SAFE_INTEGER)return se.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ce=="number"&&Math.floor(ce)!==ce)return se.error("Numeric branch labels must be integer values.");if(p){if(se.checkSubtype(p,Ci(ce)))return null}else p=Ci(ce);if(S[String(ce)]!==void 0)return se.error("Branch labels must be unique.");S[String(ce)]=T.length}const oe=h.parse(J,N,y);if(!oe)return null;y=y||oe.type,T.push(oe)}const A=h.parse(a[1],1,Pt);if(!A)return null;const D=h.parse(a[a.length-1],a.length-1,y);return D?A.type.kind!=="value"&&h.concat(1).checkSubtype(p,A.type)?null:new ui(p,y,A,S,T,D):null}evaluate(a){const h=this.input.evaluate(a);return(Ci(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every(a=>a.outputDefined())&&this.otherwise.outputDefined()}}class zh{constructor(a,h,p){this.type=a,this.branches=h,this.otherwise=p}static parse(a,h){if(a.length<4)return h.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return h.error("Expected an odd number of arguments.");let p;h.expectedType&&h.expectedType.kind!=="value"&&(p=h.expectedType);const y=[];for(let T=1;T<a.length-1;T+=2){const A=h.parse(a[T],T,St);if(!A)return null;const D=h.parse(a[T+1],T+1,p);if(!D)return null;y.push([A,D]),p=p||D.type}const S=h.parse(a[a.length-1],a.length-1,p);if(!S)return null;if(!p)throw new Error("Can't infer output type");return new zh(p,y,S)}evaluate(a){for(const[h,p]of this.branches)if(h.evaluate(a))return p.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[h,p]of this.branches)a(h),a(p);a(this.otherwise)}outputDefined(){return this.branches.every(([a,h])=>h.outputDefined())&&this.otherwise.outputDefined()}}class Bu{constructor(a,h,p,y){this.type=a,this.input=h,this.beginIndex=p,this.endIndex=y}static parse(a,h){if(a.length<=2||a.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const p=h.parse(a[1],1,Pt),y=h.parse(a[2],2,Re);if(!p||!y)return null;if(!pe(p.type,[kn(Pt),mt,Pt]))return h.error(`Expected first argument to be of type array or string, but found ${de(p.type)} instead`);if(a.length===4){const S=h.parse(a[3],3,Re);return S?new Bu(p.type,p,y,S):null}return new Bu(p.type,p,y)}evaluate(a){const h=this.input.evaluate(a),p=this.beginIndex.evaluate(a);if(!Ie(h,["string","array"]))throw new _r(`Expected first argument to be of type array or string, but found ${de(Ci(h))} instead.`);if(this.endIndex){const y=this.endIndex.evaluate(a);return h.slice(p,y)}return h.slice(p)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}}function Im(c,a){return c==="=="||c==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function Am(c,a,h,p){return p.compare(a,h)===0}function xl(c,a,h){const p=c!=="=="&&c!=="!=";return class pk{constructor(S,T,A){this.type=St,this.lhs=S,this.rhs=T,this.collator=A,this.hasUntypedArgument=S.type.kind==="value"||T.type.kind==="value"}static parse(S,T){if(S.length!==3&&S.length!==4)return T.error("Expected two or three arguments.");const A=S[0];let D=T.parse(S[1],1,Pt);if(!D)return null;if(!Im(A,D.type))return T.concat(1).error(`"${A}" comparisons are not supported for type '${de(D.type)}'.`);let N=T.parse(S[2],2,Pt);if(!N)return null;if(!Im(A,N.type))return T.concat(2).error(`"${A}" comparisons are not supported for type '${de(N.type)}'.`);if(D.type.kind!==N.type.kind&&D.type.kind!=="value"&&N.type.kind!=="value")return T.error(`Cannot compare types '${de(D.type)}' and '${de(N.type)}'.`);p&&(D.type.kind==="value"&&N.type.kind!=="value"?D=new Zr(N.type,[D]):D.type.kind!=="value"&&N.type.kind==="value"&&(N=new Zr(D.type,[N])));let W=null;if(S.length===4){if(D.type.kind!=="string"&&N.type.kind!=="string"&&D.type.kind!=="value"&&N.type.kind!=="value")return T.error("Cannot use collator to compare non-string types.");if(W=T.parse(S[3],3,qn),!W)return null}return new pk(D,N,W)}evaluate(S){const T=this.lhs.evaluate(S),A=this.rhs.evaluate(S);if(p&&this.hasUntypedArgument){const D=Ci(T),N=Ci(A);if(D.kind!==N.kind||D.kind!=="string"&&D.kind!=="number")throw new _r(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${D.kind}, ${N.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const D=Ci(T),N=Ci(A);if(D.kind!=="string"||N.kind!=="string")return a(S,T,A)}return this.collator?h(S,T,A,this.collator.evaluate(S)):a(S,T,A)}eachChild(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)}outputDefined(){return!0}}}const sy=xl("==",function(c,a,h){return a===h},Am),ay=xl("!=",function(c,a,h){return a!==h},function(c,a,h,p){return!Am(0,a,h,p)}),oy=xl("<",function(c,a,h){return a<h},function(c,a,h,p){return p.compare(a,h)<0}),ly=xl(">",function(c,a,h){return a>h},function(c,a,h,p){return p.compare(a,h)>0}),cy=xl("<=",function(c,a,h){return a<=h},function(c,a,h,p){return p.compare(a,h)<=0}),uy=xl(">=",function(c,a,h){return a>=h},function(c,a,h,p){return p.compare(a,h)>=0});class Bh{constructor(a,h,p,y,S){this.type=mt,this.number=a,this.locale=h,this.currency=p,this.minFractionDigits=y,this.maxFractionDigits=S}static parse(a,h){if(a.length!==3)return h.error("Expected two arguments.");const p=h.parse(a[1],1,Re);if(!p)return null;const y=a[2];if(typeof y!="object"||Array.isArray(y))return h.error("NumberFormat options argument must be an object.");let S=null;if(y.locale&&(S=h.parse(y.locale,1,mt),!S))return null;let T=null;if(y.currency&&(T=h.parse(y.currency,1,mt),!T))return null;let A=null;if(y["min-fraction-digits"]&&(A=h.parse(y["min-fraction-digits"],1,Re),!A))return null;let D=null;return y["max-fraction-digits"]&&(D=h.parse(y["max-fraction-digits"],1,Re),!D)?null:new Bh(p,S,T,A,D)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}}class Nu{constructor(a){this.type=Cn,this.sections=a}static parse(a,h){if(a.length<2)return h.error("Expected at least one argument.");const p=a[1];if(!Array.isArray(p)&&typeof p=="object")return h.error("First argument must be an image or text section.");const y=[];let S=!1;for(let T=1;T<=a.length-1;++T){const A=a[T];if(S&&typeof A=="object"&&!Array.isArray(A)){S=!1;let D=null;if(A["font-scale"]&&(D=h.parse(A["font-scale"],1,Re),!D))return null;let N=null;if(A["text-font"]&&(N=h.parse(A["text-font"],1,kn(mt)),!N))return null;let W=null;if(A["text-color"]&&(W=h.parse(A["text-color"],1,Yt),!W))return null;const J=y[y.length-1];J.scale=D,J.font=N,J.textColor=W}else{const D=h.parse(a[T],1,Pt);if(!D)return null;const N=D.type.kind;if(N!=="string"&&N!=="value"&&N!=="null"&&N!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,y.push({content:D,scale:null,font:null,textColor:null})}}return new Nu(y)}evaluate(a){return new Yn(this.sections.map(h=>{const p=h.content.evaluate(a);return Ci(p)===vn?new In("",p,null,null,null):new In(ho(p),null,h.scale?h.scale.evaluate(a):null,h.font?h.font.evaluate(a).join(","):null,h.textColor?h.textColor.evaluate(a):null)}))}eachChild(a){for(const h of this.sections)a(h.content),h.scale&&a(h.scale),h.font&&a(h.font),h.textColor&&a(h.textColor)}outputDefined(){return!1}}class Nh{constructor(a){this.type=vn,this.input=a}static parse(a,h){if(a.length!==2)return h.error("Expected two arguments.");const p=h.parse(a[1],1,mt);return p?new Nh(p):h.error("No image name provided.")}evaluate(a){const h=this.input.evaluate(a),p=ri.fromString(h);return p&&a.availableImages&&(p.available=a.availableImages.indexOf(h)>-1),p}eachChild(a){a(this.input)}outputDefined(){return!1}}class Uh{constructor(a){this.type=Re,this.input=a}static parse(a,h){if(a.length!==2)return h.error(`Expected 1 argument, but found ${a.length-1} instead.`);const p=h.parse(a[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${de(p.type)} instead.`):new Uh(p):null}evaluate(a){const h=this.input.evaluate(a);if(typeof h=="string"||Array.isArray(h))return h.length;throw new _r(`Expected value to be of type string or array, but found ${de(Ci(h))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}}const wl={"==":sy,"!=":ay,">":ly,"<":oy,">=":uy,"<=":cy,array:Zr,at:Fh,boolean:Zr,case:zh,coalesce:Fu,collator:bl,format:Nu,image:Nh,in:$h,"index-of":zu,interpolate:os,"interpolate-hcl":os,"interpolate-lab":os,length:Uh,let:$u,literal:fo,match:ui,number:Zr,"number-format":Bh,object:Zr,slice:Bu,step:Cc,string:Zr,"to-boolean":po,"to-color":po,"to-number":po,"to-string":po,var:Lu,within:No};function Mm(c,[a,h,p,y]){a=a.evaluate(c),h=h.evaluate(c),p=p.evaluate(c);const S=y?y.evaluate(c):1,T=uo(a,h,p,S);if(T)throw new _r(T);return new yt(a/255,h/255,p/255,S,!1)}function km(c,a){return c in a}function jh(c,a){const h=a[c];return h===void 0?null:h}function Uo(c){return{type:c}}function Pm(c){return{result:"success",value:c}}function Sl(c){return{result:"error",value:c}}function Tl(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function Dm(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function Vh(c){return!!c.expression&&c.expression.interpolated}function yi(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Uu(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function dy(c){return c}function Lm(c,a){const h=a.type==="color",p=c.stops&&typeof c.stops[0][0]=="object",y=p||!(p||c.property!==void 0),S=c.type||(Vh(a)?"exponential":"interval");if(h||a.type==="padding"){const W=h?yt.parse:oi.parse;(c=Rn({},c)).stops&&(c.stops=c.stops.map(J=>[J[0],W(J[1])])),c.default=W(c.default?c.default:a.default)}if(c.colorSpace&&(T=c.colorSpace)!=="rgb"&&T!=="hcl"&&T!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var T;let A,D,N;if(S==="exponential")A=Om;else if(S==="interval")A=Hh;else if(S==="categorical"){A=hy,D=Object.create(null);for(const W of c.stops)D[W[0]]=W[1];N=typeof c.stops[0][0]}else{if(S!=="identity")throw new Error(`Unknown function type "${S}"`);A=fy}if(p){const W={},J=[];for(let ce=0;ce<c.stops.length;ce++){const Te=c.stops[ce],we=Te[0].zoom;W[we]===void 0&&(W[we]={zoom:we,type:c.type,property:c.property,default:c.default,stops:[]},J.push(we)),W[we].stops.push([Te[0].value,Te[1]])}const se=[];for(const ce of J)se.push([W[ce].zoom,Lm(W[ce],a)]);const oe={name:"linear"};return{kind:"composite",interpolationType:oe,interpolationFactor:os.interpolationFactor.bind(void 0,oe),zoomStops:se.map(ce=>ce[0]),evaluate:({zoom:ce},Te)=>Om({stops:se,base:c.base},a,ce).evaluate(ce,Te)}}if(y){const W=S==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:W,interpolationFactor:os.interpolationFactor.bind(void 0,W),zoomStops:c.stops.map(J=>J[0]),evaluate:({zoom:J})=>A(c,a,J,D,N)}}return{kind:"source",evaluate(W,J){const se=J&&J.properties?J.properties[c.property]:void 0;return se===void 0?Mc(c.default,a.default):A(c,a,se,D,N)}}}function Mc(c,a,h){return c!==void 0?c:a!==void 0?a:h!==void 0?h:void 0}function hy(c,a,h,p,y){return Mc(typeof h===y?p[h]:void 0,c.default,a.default)}function Hh(c,a,h){if(yi(h)!=="number")return Mc(c.default,a.default);const p=c.stops.length;if(p===1||h<=c.stops[0][0])return c.stops[0][1];if(h>=c.stops[p-1][0])return c.stops[p-1][1];const y=Ec(c.stops.map(S=>S[0]),h);return c.stops[y][1]}function Om(c,a,h){const p=c.base!==void 0?c.base:1;if(yi(h)!=="number")return Mc(c.default,a.default);const y=c.stops.length;if(y===1||h<=c.stops[0][0])return c.stops[0][1];if(h>=c.stops[y-1][0])return c.stops[y-1][1];const S=Ec(c.stops.map(W=>W[0]),h),T=function(W,J,se,oe){const ce=oe-se,Te=W-se;return ce===0?0:J===1?Te/ce:(Math.pow(J,Te)-1)/(Math.pow(J,ce)-1)}(h,p,c.stops[S][0],c.stops[S+1][0]),A=c.stops[S][1],D=c.stops[S+1][1],N=Xr[a.type]||dy;return typeof A.evaluate=="function"?{evaluate(...W){const J=A.evaluate.apply(void 0,W),se=D.evaluate.apply(void 0,W);if(J!==void 0&&se!==void 0)return N(J,se,T,c.colorSpace)}}:N(A,D,T,c.colorSpace)}function fy(c,a,h){switch(a.type){case"color":h=yt.parse(h);break;case"formatted":h=Yn.fromString(h.toString());break;case"resolvedImage":h=ri.fromString(h.toString());break;case"padding":h=oi.parse(h);break;default:yi(h)===a.type||a.type==="enum"&&a.values[h]||(h=void 0)}return Mc(h,c.default,a.default)}Kr.register(wl,{error:[{kind:"error"},[mt],(c,[a])=>{throw new _r(a.evaluate(c))}],typeof:[mt,[Pt],(c,[a])=>de(Ci(a.evaluate(c)))],"to-rgba":[kn(Re,4),[Yt],(c,[a])=>{const[h,p,y,S]=a.evaluate(c).rgb;return[255*h,255*p,255*y,S]}],rgb:[Yt,[Re,Re,Re],Mm],rgba:[Yt,[Re,Re,Re,Re],Mm],has:{type:St,overloads:[[[mt],(c,[a])=>km(a.evaluate(c),c.properties())],[[mt,an],(c,[a,h])=>km(a.evaluate(c),h.evaluate(c))]]},get:{type:Pt,overloads:[[[mt],(c,[a])=>jh(a.evaluate(c),c.properties())],[[mt,an],(c,[a,h])=>jh(a.evaluate(c),h.evaluate(c))]]},"feature-state":[Pt,[mt],(c,[a])=>jh(a.evaluate(c),c.featureState||{})],properties:[an,[],c=>c.properties()],"geometry-type":[mt,[],c=>c.geometryType()],id:[Pt,[],c=>c.id()],zoom:[Re,[],c=>c.globals.zoom],"heatmap-density":[Re,[],c=>c.globals.heatmapDensity||0],"line-progress":[Re,[],c=>c.globals.lineProgress||0],accumulated:[Pt,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[Re,Uo(Re),(c,a)=>{let h=0;for(const p of a)h+=p.evaluate(c);return h}],"*":[Re,Uo(Re),(c,a)=>{let h=1;for(const p of a)h*=p.evaluate(c);return h}],"-":{type:Re,overloads:[[[Re,Re],(c,[a,h])=>a.evaluate(c)-h.evaluate(c)],[[Re],(c,[a])=>-a.evaluate(c)]]},"/":[Re,[Re,Re],(c,[a,h])=>a.evaluate(c)/h.evaluate(c)],"%":[Re,[Re,Re],(c,[a,h])=>a.evaluate(c)%h.evaluate(c)],ln2:[Re,[],()=>Math.LN2],pi:[Re,[],()=>Math.PI],e:[Re,[],()=>Math.E],"^":[Re,[Re,Re],(c,[a,h])=>Math.pow(a.evaluate(c),h.evaluate(c))],sqrt:[Re,[Re],(c,[a])=>Math.sqrt(a.evaluate(c))],log10:[Re,[Re],(c,[a])=>Math.log(a.evaluate(c))/Math.LN10],ln:[Re,[Re],(c,[a])=>Math.log(a.evaluate(c))],log2:[Re,[Re],(c,[a])=>Math.log(a.evaluate(c))/Math.LN2],sin:[Re,[Re],(c,[a])=>Math.sin(a.evaluate(c))],cos:[Re,[Re],(c,[a])=>Math.cos(a.evaluate(c))],tan:[Re,[Re],(c,[a])=>Math.tan(a.evaluate(c))],asin:[Re,[Re],(c,[a])=>Math.asin(a.evaluate(c))],acos:[Re,[Re],(c,[a])=>Math.acos(a.evaluate(c))],atan:[Re,[Re],(c,[a])=>Math.atan(a.evaluate(c))],min:[Re,Uo(Re),(c,a)=>Math.min(...a.map(h=>h.evaluate(c)))],max:[Re,Uo(Re),(c,a)=>Math.max(...a.map(h=>h.evaluate(c)))],abs:[Re,[Re],(c,[a])=>Math.abs(a.evaluate(c))],round:[Re,[Re],(c,[a])=>{const h=a.evaluate(c);return h<0?-Math.round(-h):Math.round(h)}],floor:[Re,[Re],(c,[a])=>Math.floor(a.evaluate(c))],ceil:[Re,[Re],(c,[a])=>Math.ceil(a.evaluate(c))],"filter-==":[St,[mt,Pt],(c,[a,h])=>c.properties()[a.value]===h.value],"filter-id-==":[St,[Pt],(c,[a])=>c.id()===a.value],"filter-type-==":[St,[mt],(c,[a])=>c.geometryType()===a.value],"filter-<":[St,[mt,Pt],(c,[a,h])=>{const p=c.properties()[a.value],y=h.value;return typeof p==typeof y&&p<y}],"filter-id-<":[St,[Pt],(c,[a])=>{const h=c.id(),p=a.value;return typeof h==typeof p&&h<p}],"filter->":[St,[mt,Pt],(c,[a,h])=>{const p=c.properties()[a.value],y=h.value;return typeof p==typeof y&&p>y}],"filter-id->":[St,[Pt],(c,[a])=>{const h=c.id(),p=a.value;return typeof h==typeof p&&h>p}],"filter-<=":[St,[mt,Pt],(c,[a,h])=>{const p=c.properties()[a.value],y=h.value;return typeof p==typeof y&&p<=y}],"filter-id-<=":[St,[Pt],(c,[a])=>{const h=c.id(),p=a.value;return typeof h==typeof p&&h<=p}],"filter->=":[St,[mt,Pt],(c,[a,h])=>{const p=c.properties()[a.value],y=h.value;return typeof p==typeof y&&p>=y}],"filter-id->=":[St,[Pt],(c,[a])=>{const h=c.id(),p=a.value;return typeof h==typeof p&&h>=p}],"filter-has":[St,[Pt],(c,[a])=>a.value in c.properties()],"filter-has-id":[St,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[St,[kn(mt)],(c,[a])=>a.value.indexOf(c.geometryType())>=0],"filter-id-in":[St,[kn(Pt)],(c,[a])=>a.value.indexOf(c.id())>=0],"filter-in-small":[St,[mt,kn(Pt)],(c,[a,h])=>h.value.indexOf(c.properties()[a.value])>=0],"filter-in-large":[St,[mt,kn(Pt)],(c,[a,h])=>function(p,y,S,T){for(;S<=T;){const A=S+T>>1;if(y[A]===p)return!0;y[A]>p?T=A-1:S=A+1}return!1}(c.properties()[a.value],h.value,0,h.value.length-1)],all:{type:St,overloads:[[[St,St],(c,[a,h])=>a.evaluate(c)&&h.evaluate(c)],[Uo(St),(c,a)=>{for(const h of a)if(!h.evaluate(c))return!1;return!0}]]},any:{type:St,overloads:[[[St,St],(c,[a,h])=>a.evaluate(c)||h.evaluate(c)],[Uo(St),(c,a)=>{for(const h of a)if(h.evaluate(c))return!0;return!1}]]},"!":[St,[St],(c,[a])=>!a.evaluate(c)],"is-supported-script":[St,[mt],(c,[a])=>{const h=c.globals&&c.globals.isSupportedScript;return!h||h(a.evaluate(c))}],upcase:[mt,[mt],(c,[a])=>a.evaluate(c).toUpperCase()],downcase:[mt,[mt],(c,[a])=>a.evaluate(c).toLowerCase()],concat:[mt,Uo(Pt),(c,a)=>a.map(h=>ho(h.evaluate(c))).join("")],"resolved-locale":[mt,[qn],(c,[a])=>a.evaluate(c).resolvedLocale()]});class Gh{constructor(a,h){var p;this.expression=a,this._warningHistory={},this._evaluator=new Bs,this._defaultValue=h?(p=h).type==="color"&&Uu(p.default)?new yt(0,0,0,0):p.type==="color"?yt.parse(p.default)||null:p.type==="padding"?oi.parse(p.default)||null:p.default===void 0?null:p.default:null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(a,h,p,y,S,T){return this._evaluator.globals=a,this._evaluator.feature=h,this._evaluator.featureState=p,this._evaluator.canonical=y,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=T,this.expression.evaluate(this._evaluator)}evaluate(a,h,p,y,S,T){this._evaluator.globals=a,this._evaluator.feature=h||null,this._evaluator.featureState=p||null,this._evaluator.canonical=y,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=T||null;try{const A=this.expression.evaluate(this._evaluator);if(A==null||typeof A=="number"&&A!=A)return this._defaultValue;if(this._enumValues&&!(A in this._enumValues))throw new _r(`Expected value to be one of ${Object.keys(this._enumValues).map(D=>JSON.stringify(D)).join(", ")}, but found ${JSON.stringify(A)} instead.`);return A}catch(A){return this._warningHistory[A.message]||(this._warningHistory[A.message]=!0,typeof console<"u"&&console.warn(A.message)),this._defaultValue}}}function ju(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in wl}function Bi(c,a){const h=new yl(wl,Ou,[],a?function(y){const S={color:Yt,string:mt,number:Re,enum:mt,boolean:St,formatted:Cn,padding:Ut,resolvedImage:vn};return y.type==="array"?kn(S[y.value]||Pt,y.length):S[y.type]}(a):void 0),p=h.parse(c,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?Pm(new Gh(p,a)):Sl(h.errors)}class Wh{constructor(a,h){this.kind=a,this._styleExpression=h,this.isStateDependent=a!=="constant"&&!Sc(h.expression)}evaluateWithoutErrorHandling(a,h,p,y,S,T){return this._styleExpression.evaluateWithoutErrorHandling(a,h,p,y,S,T)}evaluate(a,h,p,y,S,T){return this._styleExpression.evaluate(a,h,p,y,S,T)}}class Jn{constructor(a,h,p,y){this.kind=a,this.zoomStops=p,this._styleExpression=h,this.isStateDependent=a!=="camera"&&!Sc(h.expression),this.interpolationType=y}evaluateWithoutErrorHandling(a,h,p,y,S,T){return this._styleExpression.evaluateWithoutErrorHandling(a,h,p,y,S,T)}evaluate(a,h,p,y,S,T){return this._styleExpression.evaluate(a,h,p,y,S,T)}interpolationFactor(a,h,p){return this.interpolationType?os.interpolationFactor(this.interpolationType,a,h,p):0}}function Vu(c,a){const h=Bi(c,a);if(h.result==="error")return h;const p=h.value.expression,y=Ru(p);if(!y&&!Tl(a))return Sl([new Ln("","data expressions not supported")]);const S=Tc(p,["zoom"]);if(!S&&!Dm(a))return Sl([new Ln("","zoom expressions not supported")]);const T=Ii(p);return T||S?T instanceof Ln?Sl([T]):T instanceof os&&!Vh(a)?Sl([new Ln("",'"interpolate" expressions cannot be used with this property')]):Pm(T?new Jn(y?"camera":"composite",h.value,T.labels,T instanceof os?T.interpolation:void 0):new Wh(y?"constant":"source",h.value)):Sl([new Ln("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Mi{constructor(a,h){this._parameters=a,this._specification=h,Rn(this,Lm(this._parameters,this._specification))}static deserialize(a){return new Mi(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function Ii(c){let a=null;if(c instanceof $u)a=Ii(c.result);else if(c instanceof Fu){for(const h of c.args)if(a=Ii(h),a)break}else(c instanceof Cc||c instanceof os)&&c.input instanceof Kr&&c.input.name==="zoom"&&(a=c);return a instanceof Ln||c.eachChild(h=>{const p=Ii(h);p instanceof Ln?a=p:!a&&p?a=new Ln("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&p&&a!==p&&(a=new Ln("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),a}function El(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const a of c.slice(1))if(!El(a)&&typeof a!="boolean")return!1;return!0;default:return!0}}const Rm={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function qh(c){if(c==null)return{filter:()=>!0,needGeometry:!1};El(c)||(c=Hu(c));const a=Bi(c,Rm);if(a.result==="error")throw new Error(a.value.map(h=>`${h.key}: ${h.message}`).join(", "));return{filter:(h,p,y)=>a.value.evaluate(h,p,{},y),needGeometry:Fm(c)}}function py(c,a){return c<a?-1:c>a?1:0}function Fm(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(let a=1;a<c.length;a++)if(Fm(c[a]))return!0;return!1}function Hu(c){if(!c)return!0;const a=c[0];return c.length<=1?a!=="any":a==="=="?Gu(c[1],c[2],"=="):a==="!="?kc(Gu(c[1],c[2],"==")):a==="<"||a===">"||a==="<="||a===">="?Gu(c[1],c[2],a):a==="any"?(h=c.slice(1),["any"].concat(h.map(Hu))):a==="all"?["all"].concat(c.slice(1).map(Hu)):a==="none"?["all"].concat(c.slice(1).map(Hu).map(kc)):a==="in"?Zh(c[1],c.slice(2)):a==="!in"?kc(Zh(c[1],c.slice(2))):a==="has"?Kh(c[1]):a==="!has"?kc(Kh(c[1])):a!=="within"||c;var h}function Gu(c,a,h){switch(c){case"$type":return[`filter-type-${h}`,a];case"$id":return[`filter-id-${h}`,a];default:return[`filter-${h}`,c,a]}}function Zh(c,a){if(a.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some(h=>typeof h!=typeof a[0])?["filter-in-large",c,["literal",a.sort(py)]]:["filter-in-small",c,["literal",a]]}}function Kh(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function kc(c){return["!",c]}function Pc(c){const a=typeof c;if(a==="number"||a==="boolean"||a==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let y="[";for(const S of c)y+=`${Pc(S)},`;return`${y}]`}const h=Object.keys(c).sort();let p="{";for(let y=0;y<h.length;y++)p+=`${JSON.stringify(h[y])}:${Pc(c[h[y]])},`;return`${p}}`}function my(c){let a="";for(const h of ft)a+=`/${Pc(c[h])}`;return a}function $m(c){const a=c.value;return a?[new vt(c.key,a,"constants have been deprecated as of v8")]:[]}function er(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function jo(c){if(Array.isArray(c))return c.map(jo);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const a={};for(const h in c)a[h]=jo(c[h]);return a}return er(c)}function Is(c){const a=c.key,h=c.value,p=c.valueSpec||{},y=c.objectElementValidators||{},S=c.style,T=c.styleSpec,A=c.validateSpec;let D=[];const N=yi(h);if(N!=="object")return[new vt(a,h,`object expected, ${N} found`)];for(const W in h){const J=W.split(".")[0],se=p[J]||p["*"];let oe;if(y[J])oe=y[J];else if(p[J])oe=A;else if(y["*"])oe=y["*"];else{if(!p["*"]){D.push(new vt(a,h[W],`unknown property "${W}"`));continue}oe=A}D=D.concat(oe({key:(a&&`${a}.`)+W,value:h[W],valueSpec:se,style:S,styleSpec:T,object:h,objectKey:W,validateSpec:A},h))}for(const W in p)y[W]||p[W].required&&p[W].default===void 0&&h[W]===void 0&&D.push(new vt(a,h,`missing required property "${W}"`));return D}function zm(c){const a=c.value,h=c.valueSpec,p=c.style,y=c.styleSpec,S=c.key,T=c.arrayElementValidator||c.validateSpec;if(yi(a)!=="array")return[new vt(S,a,`array expected, ${yi(a)} found`)];if(h.length&&a.length!==h.length)return[new vt(S,a,`array length ${h.length} expected, length ${a.length} found`)];if(h["min-length"]&&a.length<h["min-length"])return[new vt(S,a,`array length at least ${h["min-length"]} expected, length ${a.length} found`)];let A={type:h.value,values:h.values};y.$version<7&&(A.function=h.function),yi(h.value)==="object"&&(A=h.value);let D=[];for(let N=0;N<a.length;N++)D=D.concat(T({array:a,arrayIndex:N,value:a[N],valueSpec:A,validateSpec:c.validateSpec,style:p,styleSpec:y,key:`${S}[${N}]`}));return D}function Xh(c){const a=c.key,h=c.value,p=c.valueSpec;let y=yi(h);return y==="number"&&h!=h&&(y="NaN"),y!=="number"?[new vt(a,h,`number expected, ${y} found`)]:"minimum"in p&&h<p.minimum?[new vt(a,h,`${h} is less than the minimum value ${p.minimum}`)]:"maximum"in p&&h>p.maximum?[new vt(a,h,`${h} is greater than the maximum value ${p.maximum}`)]:[]}function Bm(c){const a=c.valueSpec,h=er(c.value.type);let p,y,S,T={};const A=h!=="categorical"&&c.value.property===void 0,D=!A,N=yi(c.value.stops)==="array"&&yi(c.value.stops[0])==="array"&&yi(c.value.stops[0][0])==="object",W=Is({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(oe){if(h==="identity")return[new vt(oe.key,oe.value,'identity function may not have a "stops" property')];let ce=[];const Te=oe.value;return ce=ce.concat(zm({key:oe.key,value:Te,valueSpec:oe.valueSpec,validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec,arrayElementValidator:J})),yi(Te)==="array"&&Te.length===0&&ce.push(new vt(oe.key,Te,"array must have at least one stop")),ce},default:function(oe){return oe.validateSpec({key:oe.key,value:oe.value,valueSpec:a,validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec})}}});return h==="identity"&&A&&W.push(new vt(c.key,c.value,'missing required property "property"')),h==="identity"||c.value.stops||W.push(new vt(c.key,c.value,'missing required property "stops"')),h==="exponential"&&c.valueSpec.expression&&!Vh(c.valueSpec)&&W.push(new vt(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(D&&!Tl(c.valueSpec)?W.push(new vt(c.key,c.value,"property functions not supported")):A&&!Dm(c.valueSpec)&&W.push(new vt(c.key,c.value,"zoom functions not supported"))),h!=="categorical"&&!N||c.value.property!==void 0||W.push(new vt(c.key,c.value,'"property" property is required')),W;function J(oe){let ce=[];const Te=oe.value,we=oe.key;if(yi(Te)!=="array")return[new vt(we,Te,`array expected, ${yi(Te)} found`)];if(Te.length!==2)return[new vt(we,Te,`array length 2 expected, length ${Te.length} found`)];if(N){if(yi(Te[0])!=="object")return[new vt(we,Te,`object expected, ${yi(Te[0])} found`)];if(Te[0].zoom===void 0)return[new vt(we,Te,"object stop key must have zoom")];if(Te[0].value===void 0)return[new vt(we,Te,"object stop key must have value")];if(S&&S>er(Te[0].zoom))return[new vt(we,Te[0].zoom,"stop zoom values must appear in ascending order")];er(Te[0].zoom)!==S&&(S=er(Te[0].zoom),y=void 0,T={}),ce=ce.concat(Is({key:`${we}[0]`,value:Te[0],valueSpec:{zoom:{}},validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec,objectElementValidators:{zoom:Xh,value:se}}))}else ce=ce.concat(se({key:`${we}[0]`,value:Te[0],valueSpec:{},validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec},Te));return ju(jo(Te[1]))?ce.concat([new vt(`${we}[1]`,Te[1],"expressions are not allowed in function stops.")]):ce.concat(oe.validateSpec({key:`${we}[1]`,value:Te[1],valueSpec:a,validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec}))}function se(oe,ce){const Te=yi(oe.value),we=er(oe.value),je=oe.value!==null?oe.value:ce;if(p){if(Te!==p)return[new vt(oe.key,je,`${Te} stop domain type must match previous stop domain type ${p}`)]}else p=Te;if(Te!=="number"&&Te!=="string"&&Te!=="boolean")return[new vt(oe.key,je,"stop domain value must be a number, string, or boolean")];if(Te!=="number"&&h!=="categorical"){let Je=`number expected, ${Te} found`;return Tl(a)&&h===void 0&&(Je+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new vt(oe.key,je,Je)]}return h!=="categorical"||Te!=="number"||isFinite(we)&&Math.floor(we)===we?h!=="categorical"&&Te==="number"&&y!==void 0&&we<y?[new vt(oe.key,je,"stop domain values must appear in ascending order")]:(y=we,h==="categorical"&&we in T?[new vt(oe.key,je,"stop domain values must be unique")]:(T[we]=!0,[])):[new vt(oe.key,je,`integer expected, found ${we}`)]}}function Vo(c){const a=(c.expressionContext==="property"?Vu:Bi)(jo(c.value),c.valueSpec);if(a.result==="error")return a.value.map(p=>new vt(`${c.key}${p.key}`,c.value,p.message));const h=a.value.expression||a.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!h.outputDefined())return[new vt(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Sc(h))return[new vt(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!Sc(h))return[new vt(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!Tc(h,["zoom","feature-state"]))return[new vt(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!Ru(h))return[new vt(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Dc(c){const a=c.key,h=c.value,p=c.valueSpec,y=[];return Array.isArray(p.values)?p.values.indexOf(er(h))===-1&&y.push(new vt(a,h,`expected one of [${p.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(p.values).indexOf(er(h))===-1&&y.push(new vt(a,h,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(h)} found`)),y}function Cl(c){return El(jo(c.value))?Vo(Rn({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Nm(c)}function Nm(c){const a=c.value,h=c.key;if(yi(a)!=="array")return[new vt(h,a,`array expected, ${yi(a)} found`)];const p=c.styleSpec;let y,S=[];if(a.length<1)return[new vt(h,a,"filter array must have at least 1 element")];switch(S=S.concat(Dc({key:`${h}[0]`,value:a[0],valueSpec:p.filter_operator,style:c.style,styleSpec:c.styleSpec})),er(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&er(a[1])==="$type"&&S.push(new vt(h,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&S.push(new vt(h,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(y=yi(a[1]),y!=="string"&&S.push(new vt(`${h}[1]`,a[1],`string expected, ${y} found`)));for(let T=2;T<a.length;T++)y=yi(a[T]),er(a[1])==="$type"?S=S.concat(Dc({key:`${h}[${T}]`,value:a[T],valueSpec:p.geometry_type,style:c.style,styleSpec:c.styleSpec})):y!=="string"&&y!=="number"&&y!=="boolean"&&S.push(new vt(`${h}[${T}]`,a[T],`string, number, or boolean expected, ${y} found`));break;case"any":case"all":case"none":for(let T=1;T<a.length;T++)S=S.concat(Nm({key:`${h}[${T}]`,value:a[T],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":y=yi(a[1]),a.length!==2?S.push(new vt(h,a,`filter array for "${a[0]}" operator must have 2 elements`)):y!=="string"&&S.push(new vt(`${h}[1]`,a[1],`string expected, ${y} found`));break;case"within":y=yi(a[1]),a.length!==2?S.push(new vt(h,a,`filter array for "${a[0]}" operator must have 2 elements`)):y!=="object"&&S.push(new vt(`${h}[1]`,a[1],`object expected, ${y} found`))}return S}function Yh(c,a){const h=c.key,p=c.validateSpec,y=c.style,S=c.styleSpec,T=c.value,A=c.objectKey,D=S[`${a}_${c.layerType}`];if(!D)return[];const N=A.match(/^(.*)-transition$/);if(a==="paint"&&N&&D[N[1]]&&D[N[1]].transition)return p({key:h,value:T,valueSpec:S.transition,style:y,styleSpec:S});const W=c.valueSpec||D[A];if(!W)return[new vt(h,T,`unknown property "${A}"`)];let J;if(yi(T)==="string"&&Tl(W)&&!W.tokens&&(J=/^{([^}]+)}$/.exec(T)))return[new vt(h,T,`"${A}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(J[1])} }\`.`)];const se=[];return c.layerType==="symbol"&&(A==="text-field"&&y&&!y.glyphs&&se.push(new vt(h,T,'use of "text-field" requires a style "glyphs" property')),A==="text-font"&&Uu(jo(T))&&er(T.type)==="identity"&&se.push(new vt(h,T,'"text-font" does not support identity functions'))),se.concat(p({key:c.key,value:T,valueSpec:W,style:y,styleSpec:S,expressionContext:"property",propertyType:a,propertyKey:A}))}function Jh(c){return Yh(c,"paint")}function Um(c){return Yh(c,"layout")}function Wu(c){let a=[];const h=c.value,p=c.key,y=c.style,S=c.styleSpec;h.type||h.ref||a.push(new vt(p,h,'either "type" or "ref" is required'));let T=er(h.type);const A=er(h.ref);if(h.id){const D=er(h.id);for(let N=0;N<c.arrayIndex;N++){const W=y.layers[N];er(W.id)===D&&a.push(new vt(p,h.id,`duplicate layer id "${h.id}", previously used at line ${W.id.__line__}`))}}if("ref"in h){let D;["type","source","source-layer","filter","layout"].forEach(N=>{N in h&&a.push(new vt(p,h[N],`"${N}" is prohibited for ref layers`))}),y.layers.forEach(N=>{er(N.id)===A&&(D=N)}),D?D.ref?a.push(new vt(p,h.ref,"ref cannot reference another ref layer")):T=er(D.type):a.push(new vt(p,h.ref,`ref layer "${A}" not found`))}else if(T!=="background")if(h.source){const D=y.sources&&y.sources[h.source],N=D&&er(D.type);D?N==="vector"&&T==="raster"?a.push(new vt(p,h.source,`layer "${h.id}" requires a raster source`)):N==="raster"&&T!=="raster"?a.push(new vt(p,h.source,`layer "${h.id}" requires a vector source`)):N!=="vector"||h["source-layer"]?N==="raster-dem"&&T!=="hillshade"?a.push(new vt(p,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):T!=="line"||!h.paint||!h.paint["line-gradient"]||N==="geojson"&&D.lineMetrics||a.push(new vt(p,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new vt(p,h,`layer "${h.id}" must specify a "source-layer"`)):a.push(new vt(p,h.source,`source "${h.source}" not found`))}else a.push(new vt(p,h,'missing required property "source"'));return a=a.concat(Is({key:p,value:h,valueSpec:S.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${p}.type`,value:h.type,valueSpec:S.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:h,objectKey:"type"}),filter:Cl,layout:D=>Is({layer:h,key:D.key,value:D.value,style:D.style,styleSpec:D.styleSpec,validateSpec:D.validateSpec,objectElementValidators:{"*":N=>Um(Rn({layerType:T},N))}}),paint:D=>Is({layer:h,key:D.key,value:D.value,style:D.style,styleSpec:D.styleSpec,validateSpec:D.validateSpec,objectElementValidators:{"*":N=>Jh(Rn({layerType:T},N))}})}})),a}function aa(c){const a=c.value,h=c.key,p=yi(a);return p!=="string"?[new vt(h,a,`string expected, ${p} found`)]:[]}const qu={promoteId:function({key:c,value:a}){if(yi(a)==="string")return aa({key:c,value:a});{const h=[];for(const p in a)h.push(...aa({key:`${c}.${p}`,value:a[p]}));return h}}};function Zu(c){const a=c.value,h=c.key,p=c.styleSpec,y=c.style,S=c.validateSpec;if(!a.type)return[new vt(h,a,'"type" is required')];const T=er(a.type);let A;switch(T){case"vector":case"raster":case"raster-dem":return A=Is({key:h,value:a,valueSpec:p[`source_${T.replace("-","_")}`],style:c.style,styleSpec:p,objectElementValidators:qu,validateSpec:S}),A;case"geojson":if(A=Is({key:h,value:a,valueSpec:p.source_geojson,style:y,styleSpec:p,validateSpec:S,objectElementValidators:qu}),a.cluster)for(const D in a.clusterProperties){const[N,W]=a.clusterProperties[D],J=typeof N=="string"?[N,["accumulated"],["get",D]]:N;A.push(...Vo({key:`${h}.${D}.map`,value:W,validateSpec:S,expressionContext:"cluster-map"})),A.push(...Vo({key:`${h}.${D}.reduce`,value:J,validateSpec:S,expressionContext:"cluster-reduce"}))}return A;case"video":return Is({key:h,value:a,valueSpec:p.source_video,style:y,validateSpec:S,styleSpec:p});case"image":return Is({key:h,value:a,valueSpec:p.source_image,style:y,validateSpec:S,styleSpec:p});case"canvas":return[new vt(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Dc({key:`${h}.type`,value:a.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:y,validateSpec:S,styleSpec:p})}}function jm(c){const a=c.value,h=c.styleSpec,p=h.light,y=c.style;let S=[];const T=yi(a);if(a===void 0)return S;if(T!=="object")return S=S.concat([new vt("light",a,`object expected, ${T} found`)]),S;for(const A in a){const D=A.match(/^(.*)-transition$/);S=S.concat(D&&p[D[1]]&&p[D[1]].transition?c.validateSpec({key:A,value:a[A],valueSpec:h.transition,validateSpec:c.validateSpec,style:y,styleSpec:h}):p[A]?c.validateSpec({key:A,value:a[A],valueSpec:p[A],validateSpec:c.validateSpec,style:y,styleSpec:h}):[new vt(A,a[A],`unknown property "${A}"`)])}return S}function Lc(c){const a=c.value,h=c.styleSpec,p=h.terrain,y=c.style;let S=[];const T=yi(a);if(a===void 0)return S;if(T!=="object")return S=S.concat([new vt("terrain",a,`object expected, ${T} found`)]),S;for(const A in a)S=S.concat(p[A]?c.validateSpec({key:A,value:a[A],valueSpec:p[A],validateSpec:c.validateSpec,style:y,styleSpec:h}):[new vt(A,a[A],`unknown property "${A}"`)]);return S}function Vm(c){let a=[];const h=c.value,p=c.key;if(Array.isArray(h)){const y=[],S=[];for(const T in h)h[T].id&&y.includes(h[T].id)&&a.push(new vt(p,h,`all the sprites' ids must be unique, but ${h[T].id} is duplicated`)),y.push(h[T].id),h[T].url&&S.includes(h[T].url)&&a.push(new vt(p,h,`all the sprites' URLs must be unique, but ${h[T].url} is duplicated`)),S.push(h[T].url),a=a.concat(Is({key:`${p}[${T}]`,value:h[T],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return a}return aa({key:p,value:h})}const Hm={"*":()=>[],array:zm,boolean:function(c){const a=c.value,h=c.key,p=yi(a);return p!=="boolean"?[new vt(h,a,`boolean expected, ${p} found`)]:[]},number:Xh,color:function(c){const a=c.key,h=c.value,p=yi(h);return p!=="string"?[new vt(a,h,`color expected, ${p} found`)]:yt.parse(String(h))?[]:[new vt(a,h,`color expected, "${h}" found`)]},constants:$m,enum:Dc,filter:Cl,function:Bm,layer:Wu,object:Is,source:Zu,light:jm,terrain:Lc,string:aa,formatted:function(c){return aa(c).length===0?[]:Vo(c)},resolvedImage:function(c){return aa(c).length===0?[]:Vo(c)},padding:function(c){const a=c.key,h=c.value;if(yi(h)==="array"){if(h.length<1||h.length>4)return[new vt(a,h,`padding requires 1 to 4 values; ${h.length} values found`)];const p={type:"number"};let y=[];for(let S=0;S<h.length;S++)y=y.concat(c.validateSpec({key:`${a}[${S}]`,value:h[S],validateSpec:c.validateSpec,valueSpec:p}));return y}return Xh({key:a,value:h,valueSpec:{}})},sprite:Vm};function Oc(c){const a=c.value,h=c.valueSpec,p=c.styleSpec;return c.validateSpec=Oc,h.expression&&Uu(er(a))?Bm(c):h.expression&&ju(jo(a))?Vo(c):h.type&&Hm[h.type]?Hm[h.type](c):Is(Rn({},c,{valueSpec:h.type?p[h.type]:h}))}function Gm(c){const a=c.value,h=c.key,p=aa(c);return p.length||(a.indexOf("{fontstack}")===-1&&p.push(new vt(h,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&p.push(new vt(h,a,'"glyphs" url must include a "{range}" token'))),p}function oa(c,a=ge){let h=[];return h=h.concat(Oc({key:"",value:c,valueSpec:a.$root,styleSpec:a,style:c,validateSpec:Oc,objectElementValidators:{glyphs:Gm,"*":()=>[]}})),c.constants&&(h=h.concat($m({key:"constants",value:c.constants,style:c,styleSpec:a,validateSpec:Oc}))),Rc(h)}function As(c){return function(a){return c({...a,validateSpec:Oc})}}function Rc(c){return[].concat(c).sort((a,h)=>a.line-h.line)}function sr(c){return function(...a){return Rc(c.apply(this,a))}}oa.source=sr(As(Zu)),oa.sprite=sr(As(Vm)),oa.glyphs=sr(As(Gm)),oa.light=sr(As(jm)),oa.terrain=sr(As(Lc)),oa.layer=sr(As(Wu)),oa.filter=sr(As(Cl)),oa.paintProperty=sr(As(Jh)),oa.layoutProperty=sr(As(Um));const mo=oa,gy=mo.light,vy=mo.paintProperty,_y=mo.layoutProperty;function Il(c,a){let h=!1;if(a&&a.length)for(const p of a)c.fire(new _e(new Error(p.message))),h=!0;return h}class Fc{constructor(a,h,p){const y=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;const T=new Int32Array(this.arrayBuffer);a=T[0],this.d=(h=T[1])+2*(p=T[2]);for(let D=0;D<this.d*this.d;D++){const N=T[3+D],W=T[3+D+1];y.push(N===W?null:T.subarray(N,W))}const A=T[3+y.length+1];this.keys=T.subarray(T[3+y.length],A),this.bboxes=T.subarray(A),this.insert=this._insertReadonly}else{this.d=h+2*p;for(let T=0;T<this.d*this.d;T++)y.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=a,this.padding=p,this.scale=h/a,this.uid=0;const S=p/h*a;this.min=-S,this.max=a+S}insert(a,h,p,y,S){this._forEachCell(h,p,y,S,this._insertCell,this.uid++,void 0,void 0),this.keys.push(a),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(y),this.bboxes.push(S)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(a,h,p,y,S,T){this.cells[S].push(T)}query(a,h,p,y,S){const T=this.min,A=this.max;if(a<=T&&h<=T&&A<=p&&A<=y&&!S)return Array.prototype.slice.call(this.keys);{const D=[];return this._forEachCell(a,h,p,y,this._queryCell,D,{},S),D}}_queryCell(a,h,p,y,S,T,A,D){const N=this.cells[S];if(N!==null){const W=this.keys,J=this.bboxes;for(let se=0;se<N.length;se++){const oe=N[se];if(A[oe]===void 0){const ce=4*oe;(D?D(J[ce+0],J[ce+1],J[ce+2],J[ce+3]):a<=J[ce+2]&&h<=J[ce+3]&&p>=J[ce+0]&&y>=J[ce+1])?(A[oe]=!0,T.push(W[oe])):A[oe]=!1}}}}_forEachCell(a,h,p,y,S,T,A,D){const N=this._convertToCellCoord(a),W=this._convertToCellCoord(h),J=this._convertToCellCoord(p),se=this._convertToCellCoord(y);for(let oe=N;oe<=J;oe++)for(let ce=W;ce<=se;ce++){const Te=this.d*ce+oe;if((!D||D(this._convertFromCellCoord(oe),this._convertFromCellCoord(ce),this._convertFromCellCoord(oe+1),this._convertFromCellCoord(ce+1)))&&S.call(this,a,h,p,y,Te,T,A,D))return}}_convertFromCellCoord(a){return(a-this.padding)/this.scale}_convertToCellCoord(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const a=this.cells,h=3+this.cells.length+1+1;let p=0;for(let T=0;T<this.cells.length;T++)p+=this.cells[T].length;const y=new Int32Array(h+p+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;let S=h;for(let T=0;T<a.length;T++){const A=a[T];y[3+T]=S,y.set(A,S),S+=A.length}return y[3+a.length]=S,y.set(this.keys,S),S+=this.keys.length,y[3+a.length+1]=S,y.set(this.bboxes,S),S+=this.bboxes.length,y.buffer}static serialize(a,h){const p=a.toArrayBuffer();return h&&h.push(p),{buffer:p}}static deserialize(a){return new Fc(a.buffer)}}const la={};function dn(c,a,h={}){if(la[c])throw new Error(`${c} is already registered.`);Object.defineProperty(a,"_classRegistryKey",{value:c,writeable:!1}),la[c]={klass:a,omit:h.omit||[],shallow:h.shallow||[]}}dn("Object",Object),dn("TransferableGridIndex",Fc),dn("Color",yt),dn("Error",Error),dn("AJAXError",tt),dn("ResolvedImage",ri),dn("StylePropertyFunction",Mi),dn("StyleExpression",Gh,{omit:["_evaluator"]}),dn("ZoomDependentExpression",Jn),dn("ZoomConstantExpression",Wh),dn("CompoundExpression",Kr,{omit:["_evaluate"]});for(const c in wl)wl[c]._classRegistryKey||dn(`Expression_${c}`,wl[c]);function Ku(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function $c(c,a){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob)return c;if(Ku(c)||Ce(c))return a&&a.push(c),c;if(ArrayBuffer.isView(c)){const h=c;return a&&a.push(h.buffer),h}if(c instanceof ImageData)return a&&a.push(c.data.buffer),c;if(Array.isArray(c)){const h=[];for(const p of c)h.push($c(p,a));return h}if(typeof c=="object"){const h=c.constructor,p=h._classRegistryKey;if(!p)throw new Error("can't serialize object of unregistered class");if(!la[p])throw new Error(`${p} is not registered.`);const y=h.serialize?h.serialize(c,a):{};if(h.serialize){if(a&&y===a[a.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const S in c){if(!c.hasOwnProperty(S)||la[p].omit.indexOf(S)>=0)continue;const T=c[S];y[S]=la[p].shallow.indexOf(S)>=0?T:$c(T,a)}c instanceof Error&&(y.message=c.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return p!=="Object"&&(y.$name=p),y}throw new Error("can't serialize object of type "+typeof c)}function Da(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||Ku(c)||Ce(c)||ArrayBuffer.isView(c)||c instanceof ImageData)return c;if(Array.isArray(c))return c.map(Da);if(typeof c=="object"){const a=c.$name||"Object";if(!la[a])throw new Error(`can't deserialize unregistered class ${a}`);const{klass:h}=la[a];if(!h)throw new Error(`can't deserialize unregistered class ${a}`);if(h.deserialize)return h.deserialize(c);const p=Object.create(h.prototype);for(const y of Object.keys(c)){if(y==="$name")continue;const S=c[y];p[y]=la[a].shallow.indexOf(y)>=0?S:Da(S)}return p}throw new Error("can't deserialize object of type "+typeof c)}class Wm{constructor(){this.first=!0}update(a,h){const p=Math.floor(a);return this.first?(this.first=!1,this.lastIntegerZoom=p,this.lastIntegerZoomTime=0,this.lastZoom=a,this.lastFloorZoom=p,!0):(this.lastFloorZoom>p?(this.lastIntegerZoom=p+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<p&&(this.lastIntegerZoom=p,this.lastIntegerZoomTime=h),a!==this.lastZoom&&(this.lastZoom=a,this.lastFloorZoom=p,!0))}}const Jt={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function Xu(c){for(const a of c)if(Yu(a.charCodeAt(0)))return!0;return!1}function Qh(c){for(const a of c)if(!qm(a.charCodeAt(0)))return!1;return!0}function qm(c){return!(Jt.Arabic(c)||Jt["Arabic Supplement"](c)||Jt["Arabic Extended-A"](c)||Jt["Arabic Presentation Forms-A"](c)||Jt["Arabic Presentation Forms-B"](c))}function Yu(c){return!(c!==746&&c!==747&&(c<4352||!(Jt["Bopomofo Extended"](c)||Jt.Bopomofo(c)||Jt["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||Jt["CJK Compatibility Ideographs"](c)||Jt["CJK Compatibility"](c)||Jt["CJK Radicals Supplement"](c)||Jt["CJK Strokes"](c)||!(!Jt["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||Jt["CJK Unified Ideographs Extension A"](c)||Jt["CJK Unified Ideographs"](c)||Jt["Enclosed CJK Letters and Months"](c)||Jt["Hangul Compatibility Jamo"](c)||Jt["Hangul Jamo Extended-A"](c)||Jt["Hangul Jamo Extended-B"](c)||Jt["Hangul Jamo"](c)||Jt["Hangul Syllables"](c)||Jt.Hiragana(c)||Jt["Ideographic Description Characters"](c)||Jt.Kanbun(c)||Jt["Kangxi Radicals"](c)||Jt["Katakana Phonetic Extensions"](c)||Jt.Katakana(c)&&c!==12540||!(!Jt["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!Jt["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||Jt["Unified Canadian Aboriginal Syllabics"](c)||Jt["Unified Canadian Aboriginal Syllabics Extended"](c)||Jt["Vertical Forms"](c)||Jt["Yijing Hexagram Symbols"](c)||Jt["Yi Syllables"](c)||Jt["Yi Radicals"](c))))}function Zm(c){return!(Yu(c)||function(a){return!!(Jt["Latin-1 Supplement"](a)&&(a===167||a===169||a===174||a===177||a===188||a===189||a===190||a===215||a===247)||Jt["General Punctuation"](a)&&(a===8214||a===8224||a===8225||a===8240||a===8241||a===8251||a===8252||a===8258||a===8263||a===8264||a===8265||a===8273)||Jt["Letterlike Symbols"](a)||Jt["Number Forms"](a)||Jt["Miscellaneous Technical"](a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||a===9003||a>=9085&&a<=9114||a>=9150&&a<=9165||a===9167||a>=9169&&a<=9179||a>=9186&&a<=9215)||Jt["Control Pictures"](a)&&a!==9251||Jt["Optical Character Recognition"](a)||Jt["Enclosed Alphanumerics"](a)||Jt["Geometric Shapes"](a)||Jt["Miscellaneous Symbols"](a)&&!(a>=9754&&a<=9759)||Jt["Miscellaneous Symbols and Arrows"](a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||Jt["CJK Symbols and Punctuation"](a)||Jt.Katakana(a)||Jt["Private Use Area"](a)||Jt["CJK Compatibility Forms"](a)||Jt["Small Form Variants"](a)||Jt["Halfwidth and Fullwidth Forms"](a)||a===8734||a===8756||a===8757||a>=9984&&a<=10087||a>=10102&&a<=10131||a===65532||a===65533)}(c))}function Ju(c){return c>=1424&&c<=2303||Jt["Arabic Presentation Forms-A"](c)||Jt["Arabic Presentation Forms-B"](c)}function Qu(c,a){return!(!a&&Ju(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||Jt.Khmer(c))}function Km(c){for(const a of c)if(Ju(a.charCodeAt(0)))return!0;return!1}const ef="deferred",ed="loading",tf="loaded";let zc=null,Yr="unavailable",go=null;const Xm=function(c){c&&typeof c=="string"&&c.indexOf("NetworkError")>-1&&(Yr="error"),zc&&zc(c)};function nf(){td.fire(new qt("pluginStateChange",{pluginStatus:Yr,pluginURL:go}))}const td=new ke,rf=function(){return Yr},Ym=function(){if(Yr!==ef||!go)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Yr=ed,nf(),go&&ut({url:go},c=>{c?Xm(c):(Yr=tf,nf())})},Ms={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Yr===tf||Ms.applyArabicShaping!=null,isLoading:()=>Yr===ed,setState(c){if(!X())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Yr=c.pluginStatus,go=c.pluginURL},isParsed(){if(!X())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Ms.applyArabicShaping!=null&&Ms.processBidirectionalText!=null&&Ms.processStyledBidirectionalText!=null},getPluginURL(){if(!X())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return go}};class Fi{constructor(a,h){this.zoom=a,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Wm,this.transition={})}isSupportedScript(a){return function(h,p){for(const y of h)if(!Qu(y.charCodeAt(0),p))return!1;return!0}(a,Ms.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const a=this.zoom,h=a-Math.floor(a),p=this.crossFadingFactor();return a>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*p}:{fromScale:.5,toScale:1,t:1-(1-p)*h}}}class nd{constructor(a,h){this.property=a,this.value=h,this.expression=function(p,y){if(Uu(p))return new Mi(p,y);if(ju(p)){const S=Vu(p,y);if(S.result==="error")throw new Error(S.value.map(T=>`${T.key}: ${T.message}`).join(", "));return S.value}{let S=p;return y.type==="color"&&typeof p=="string"?S=yt.parse(p):y.type!=="padding"||typeof p!="number"&&!Array.isArray(p)||(S=oi.parse(p)),{kind:"constant",evaluate:()=>S}}}(h===void 0?a.specification.default:h,a.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(a,h,p){return this.property.possiblyEvaluate(this,a,h,p)}}class sf{constructor(a){this.property=a,this.value=new nd(a,void 0)}transitioned(a,h){return new Bc(this.property,this.value,h,ee({},a.transition,this.transition),a.now)}untransitioned(){return new Bc(this.property,this.value,null,{},0)}}class Jm{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)}getValue(a){return te(this._values[a].value.value)}setValue(a,h){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new sf(this._values[a].property)),this._values[a].value=new nd(this._values[a].property,h===null?void 0:te(h))}getTransition(a){return te(this._values[a].transition)}setTransition(a,h){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new sf(this._values[a].property)),this._values[a].transition=te(h)||void 0}serialize(){const a={};for(const h of Object.keys(this._values)){const p=this.getValue(h);p!==void 0&&(a[h]=p);const y=this.getTransition(h);y!==void 0&&(a[`${h}-transition`]=y)}return a}transitioned(a,h){const p=new Qm(this._properties);for(const y of Object.keys(this._values))p._values[y]=this._values[y].transitioned(a,h._values[y]);return p}untransitioned(){const a=new Qm(this._properties);for(const h of Object.keys(this._values))a._values[h]=this._values[h].untransitioned();return a}}class Bc{constructor(a,h,p,y,S){this.property=a,this.value=h,this.begin=S+y.delay||0,this.end=this.begin+y.duration||0,a.specification.transition&&(y.delay||y.duration)&&(this.prior=p)}possiblyEvaluate(a,h,p){const y=a.now||0,S=this.value.possiblyEvaluate(a,h,p),T=this.prior;if(T){if(y>this.end)return this.prior=null,S;if(this.value.isDataDriven())return this.prior=null,S;if(y<this.begin)return T.possiblyEvaluate(a,h,p);{const A=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(T.possiblyEvaluate(a,h,p),S,function(D){if(D<=0)return 0;if(D>=1)return 1;const N=D*D,W=N*D;return 4*(D<.5?W:3*(D-N)+W-.75)}(A))}}return S}}class Qm{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,h,p){const y=new id(this._properties);for(const S of Object.keys(this._values))y._values[S]=this._values[S].possiblyEvaluate(a,h,p);return y}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class af{constructor(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)}getValue(a){return te(this._values[a].value)}setValue(a,h){this._values[a]=new nd(this._values[a].property,h===null?void 0:te(h))}serialize(){const a={};for(const h of Object.keys(this._values)){const p=this.getValue(h);p!==void 0&&(a[h]=p)}return a}possiblyEvaluate(a,h,p){const y=new id(this._properties);for(const S of Object.keys(this._values))y._values[S]=this._values[S].possiblyEvaluate(a,h,p);return y}}class ca{constructor(a,h,p){this.property=a,this.value=h,this.parameters=p}isConstant(){return this.value.kind==="constant"}constantOr(a){return this.value.kind==="constant"?this.value.value:a}evaluate(a,h,p,y){return this.property.evaluate(this.value,this.parameters,a,h,p,y)}}class id{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class bn{constructor(a){this.specification=a}possiblyEvaluate(a,h){if(a.isDataDriven())throw new Error("Value should not be data driven");return a.expression.evaluate(h)}interpolate(a,h,p){const y=Xr[this.specification.type];return y?y(a,h,p):a}}class Pn{constructor(a,h){this.specification=a,this.overrides=h}possiblyEvaluate(a,h,p,y){return new ca(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(h,null,{},p,y)}:a.expression,h)}interpolate(a,h,p){if(a.value.kind!=="constant"||h.value.kind!=="constant")return a;if(a.value.value===void 0||h.value.value===void 0)return new ca(this,{kind:"constant",value:void 0},a.parameters);const y=Xr[this.specification.type];if(y){const S=y(a.value.value,h.value.value,p);return new ca(this,{kind:"constant",value:S},a.parameters)}return a}evaluate(a,h,p,y,S,T){return a.kind==="constant"?a.value:a.evaluate(h,p,y,S,T)}}class Nc extends Pn{possiblyEvaluate(a,h,p,y){if(a.value===void 0)return new ca(this,{kind:"constant",value:void 0},h);if(a.expression.kind==="constant"){const S=a.expression.evaluate(h,null,{},p,y),T=a.property.specification.type==="resolvedImage"&&typeof S!="string"?S.name:S,A=this._calculate(T,T,T,h);return new ca(this,{kind:"constant",value:A},h)}if(a.expression.kind==="camera"){const S=this._calculate(a.expression.evaluate({zoom:h.zoom-1}),a.expression.evaluate({zoom:h.zoom}),a.expression.evaluate({zoom:h.zoom+1}),h);return new ca(this,{kind:"constant",value:S},h)}return new ca(this,a.expression,h)}evaluate(a,h,p,y,S,T){if(a.kind==="source"){const A=a.evaluate(h,p,y,S,T);return this._calculate(A,A,A,h)}return a.kind==="composite"?this._calculate(a.evaluate({zoom:Math.floor(h.zoom)-1},p,y),a.evaluate({zoom:Math.floor(h.zoom)},p,y),a.evaluate({zoom:Math.floor(h.zoom)+1},p,y),h):a.value}_calculate(a,h,p,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:a,to:h}:{from:p,to:h}}interpolate(a){return a}}class of{constructor(a){this.specification=a}possiblyEvaluate(a,h,p,y){if(a.value!==void 0){if(a.expression.kind==="constant"){const S=a.expression.evaluate(h,null,{},p,y);return this._calculate(S,S,S,h)}return this._calculate(a.expression.evaluate(new Fi(Math.floor(h.zoom-1),h)),a.expression.evaluate(new Fi(Math.floor(h.zoom),h)),a.expression.evaluate(new Fi(Math.floor(h.zoom+1),h)),h)}}_calculate(a,h,p,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:a,to:h}:{from:p,to:h}}interpolate(a){return a}}class lf{constructor(a){this.specification=a}possiblyEvaluate(a,h,p,y){return!!a.expression.evaluate(h,null,{},p,y)}interpolate(){return!1}}class Jr{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in a){const p=a[h];p.specification.overridable&&this.overridableProperties.push(h);const y=this.defaultPropertyValues[h]=new nd(p,void 0),S=this.defaultTransitionablePropertyValues[h]=new sf(p);this.defaultTransitioningPropertyValues[h]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=y.possiblyEvaluate({})}}}dn("DataDrivenProperty",Pn),dn("DataConstantProperty",bn),dn("CrossFadedDataDrivenProperty",Nc),dn("CrossFadedProperty",of),dn("ColorRampProperty",lf);const rd="-transition";class ua extends ke{constructor(a,h){if(super(),this.id=a.id,this.type=a.type,this._featureFilter={filter:()=>!0,needGeometry:!1},a.type!=="custom"&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,a.type!=="background"&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter),h.layout&&(this._unevaluatedLayout=new af(h.layout)),h.paint)){this._transitionablePaint=new Jm(h.paint);for(const p in a.paint)this.setPaintProperty(p,a.paint[p],{validate:!1});for(const p in a.layout)this.setLayoutProperty(p,a.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new id(h.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(a){return a==="visibility"?this.visibility:this._unevaluatedLayout.getValue(a)}setLayoutProperty(a,h,p={}){h!=null&&this._validate(_y,`layers.${this.id}.layout.${a}`,a,h,p)||(a!=="visibility"?this._unevaluatedLayout.setValue(a,h):this.visibility=h)}getPaintProperty(a){return a.endsWith(rd)?this._transitionablePaint.getTransition(a.slice(0,-rd.length)):this._transitionablePaint.getValue(a)}setPaintProperty(a,h,p={}){if(h!=null&&this._validate(vy,`layers.${this.id}.paint.${a}`,a,h,p))return!1;if(a.endsWith(rd))return this._transitionablePaint.setTransition(a.slice(0,-rd.length),h||void 0),!1;{const y=this._transitionablePaint._values[a],S=y.property.specification["property-type"]==="cross-faded-data-driven",T=y.value.isDataDriven(),A=y.value;this._transitionablePaint.setValue(a,h),this._handleSpecialPaintPropertyUpdate(a);const D=this._transitionablePaint._values[a].value;return D.isDataDriven()||T||S||this._handleOverridablePaintPropertyUpdate(a,A,D)}}_handleSpecialPaintPropertyUpdate(a){}_handleOverridablePaintPropertyUpdate(a,h,p){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||this.visibility==="none"}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,h){a.getCrossfadeParameters&&(this._crossfadeParameters=a.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,h)}serialize(){const a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(a.layout=a.layout||{},a.layout.visibility=this.visibility),be(a,(h,p)=>!(h===void 0||p==="layout"&&!Object.keys(h).length||p==="paint"&&!Object.keys(h).length))}_validate(a,h,p,y,S={}){return(!S||S.validate!==!1)&&Il(this,a.call(mo,{key:h,layerType:this.type,objectKey:p,value:y,styleSpec:ge,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const a in this.paint._values){const h=this.paint.get(a);if(h instanceof ca&&Tl(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}const yy={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class La{constructor(a,h){this._structArray=a,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Zi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,h){return a._trim(),h&&(a.isTransferred=!0,h.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){const h=Object.create(this.prototype);return h.arrayBuffer=a.arrayBuffer,h.length=a.length,h.capacity=a.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ar(c,a=1){let h=0,p=0;return{members:c.map(y=>{const S=yy[y.type].BYTES_PER_ELEMENT,T=h=eg(h,Math.max(a,S)),A=y.components||1;return p=Math.max(p,S),h+=S*A,{name:y.name,type:y.type,components:A,offset:T}}),size:eg(h,Math.max(p,a)),alignment:a}}function eg(c,a){return Math.ceil(c/a)*a}class Al extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h){const p=this.length;return this.resize(p+1),this.emplace(p,a,h)}emplace(a,h,p){const y=2*a;return this.int16[y+0]=h,this.int16[y+1]=p,a}}Al.prototype.bytesPerElement=4,dn("StructArrayLayout2i4",Al);class sd extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,p){const y=this.length;return this.resize(y+1),this.emplace(y,a,h,p)}emplace(a,h,p,y){const S=3*a;return this.int16[S+0]=h,this.int16[S+1]=p,this.int16[S+2]=y,a}}sd.prototype.bytesPerElement=6,dn("StructArrayLayout3i6",sd);class cf extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,p,y){const S=this.length;return this.resize(S+1),this.emplace(S,a,h,p,y)}emplace(a,h,p,y,S){const T=4*a;return this.int16[T+0]=h,this.int16[T+1]=p,this.int16[T+2]=y,this.int16[T+3]=S,a}}cf.prototype.bytesPerElement=8,dn("StructArrayLayout4i8",cf);class da extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,p,y,S,T){const A=this.length;return this.resize(A+1),this.emplace(A,a,h,p,y,S,T)}emplace(a,h,p,y,S,T,A){const D=6*a;return this.int16[D+0]=h,this.int16[D+1]=p,this.int16[D+2]=y,this.int16[D+3]=S,this.int16[D+4]=T,this.int16[D+5]=A,a}}da.prototype.bytesPerElement=12,dn("StructArrayLayout2i4i12",da);class ad extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,p,y,S,T){const A=this.length;return this.resize(A+1),this.emplace(A,a,h,p,y,S,T)}emplace(a,h,p,y,S,T,A){const D=4*a,N=8*a;return this.int16[D+0]=h,this.int16[D+1]=p,this.uint8[N+4]=y,this.uint8[N+5]=S,this.uint8[N+6]=T,this.uint8[N+7]=A,a}}ad.prototype.bytesPerElement=8,dn("StructArrayLayout2i4ub8",ad);class Ho extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h){const p=this.length;return this.resize(p+1),this.emplace(p,a,h)}emplace(a,h,p){const y=2*a;return this.float32[y+0]=h,this.float32[y+1]=p,a}}Ho.prototype.bytesPerElement=8,dn("StructArrayLayout2f8",Ho);class od extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h,p,y,S,T,A,D,N,W){const J=this.length;return this.resize(J+1),this.emplace(J,a,h,p,y,S,T,A,D,N,W)}emplace(a,h,p,y,S,T,A,D,N,W,J){const se=10*a;return this.uint16[se+0]=h,this.uint16[se+1]=p,this.uint16[se+2]=y,this.uint16[se+3]=S,this.uint16[se+4]=T,this.uint16[se+5]=A,this.uint16[se+6]=D,this.uint16[se+7]=N,this.uint16[se+8]=W,this.uint16[se+9]=J,a}}od.prototype.bytesPerElement=20,dn("StructArrayLayout10ui20",od);class Uc extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h,p,y,S,T,A,D,N,W,J,se){const oe=this.length;return this.resize(oe+1),this.emplace(oe,a,h,p,y,S,T,A,D,N,W,J,se)}emplace(a,h,p,y,S,T,A,D,N,W,J,se,oe){const ce=12*a;return this.int16[ce+0]=h,this.int16[ce+1]=p,this.int16[ce+2]=y,this.int16[ce+3]=S,this.uint16[ce+4]=T,this.uint16[ce+5]=A,this.uint16[ce+6]=D,this.uint16[ce+7]=N,this.int16[ce+8]=W,this.int16[ce+9]=J,this.int16[ce+10]=se,this.int16[ce+11]=oe,a}}Uc.prototype.bytesPerElement=24,dn("StructArrayLayout4i4ui4i24",Uc);class uf extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p){const y=this.length;return this.resize(y+1),this.emplace(y,a,h,p)}emplace(a,h,p,y){const S=3*a;return this.float32[S+0]=h,this.float32[S+1]=p,this.float32[S+2]=y,a}}uf.prototype.bytesPerElement=12,dn("StructArrayLayout3f12",uf);class Ml extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){const h=this.length;return this.resize(h+1),this.emplace(h,a)}emplace(a,h){return this.uint32[1*a+0]=h,a}}Ml.prototype.bytesPerElement=4,dn("StructArrayLayout1ul4",Ml);class Go extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h,p,y,S,T,A,D,N){const W=this.length;return this.resize(W+1),this.emplace(W,a,h,p,y,S,T,A,D,N)}emplace(a,h,p,y,S,T,A,D,N,W){const J=10*a,se=5*a;return this.int16[J+0]=h,this.int16[J+1]=p,this.int16[J+2]=y,this.int16[J+3]=S,this.int16[J+4]=T,this.int16[J+5]=A,this.uint32[se+3]=D,this.uint16[J+8]=N,this.uint16[J+9]=W,a}}Go.prototype.bytesPerElement=20,dn("StructArrayLayout6i1ul2ui20",Go);class df extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,p,y,S,T){const A=this.length;return this.resize(A+1),this.emplace(A,a,h,p,y,S,T)}emplace(a,h,p,y,S,T,A){const D=6*a;return this.int16[D+0]=h,this.int16[D+1]=p,this.int16[D+2]=y,this.int16[D+3]=S,this.int16[D+4]=T,this.int16[D+5]=A,a}}df.prototype.bytesPerElement=12,dn("StructArrayLayout2i2i2i12",df);class ld extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,p,y,S){const T=this.length;return this.resize(T+1),this.emplace(T,a,h,p,y,S)}emplace(a,h,p,y,S,T){const A=4*a,D=8*a;return this.float32[A+0]=h,this.float32[A+1]=p,this.float32[A+2]=y,this.int16[D+6]=S,this.int16[D+7]=T,a}}ld.prototype.bytesPerElement=16,dn("StructArrayLayout2f1f2i16",ld);class Wo extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p,y){const S=this.length;return this.resize(S+1),this.emplace(S,a,h,p,y)}emplace(a,h,p,y,S){const T=12*a,A=3*a;return this.uint8[T+0]=h,this.uint8[T+1]=p,this.float32[A+1]=y,this.float32[A+2]=S,a}}Wo.prototype.bytesPerElement=12,dn("StructArrayLayout2ub2f12",Wo);class cd extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h,p){const y=this.length;return this.resize(y+1),this.emplace(y,a,h,p)}emplace(a,h,p,y){const S=3*a;return this.uint16[S+0]=h,this.uint16[S+1]=p,this.uint16[S+2]=y,a}}cd.prototype.bytesPerElement=6,dn("StructArrayLayout3ui6",cd);class hf extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p,y,S,T,A,D,N,W,J,se,oe,ce,Te,we,je){const Je=this.length;return this.resize(Je+1),this.emplace(Je,a,h,p,y,S,T,A,D,N,W,J,se,oe,ce,Te,we,je)}emplace(a,h,p,y,S,T,A,D,N,W,J,se,oe,ce,Te,we,je,Je){const Ne=24*a,rt=12*a,ct=48*a;return this.int16[Ne+0]=h,this.int16[Ne+1]=p,this.uint16[Ne+2]=y,this.uint16[Ne+3]=S,this.uint32[rt+2]=T,this.uint32[rt+3]=A,this.uint32[rt+4]=D,this.uint16[Ne+10]=N,this.uint16[Ne+11]=W,this.uint16[Ne+12]=J,this.float32[rt+7]=se,this.float32[rt+8]=oe,this.uint8[ct+36]=ce,this.uint8[ct+37]=Te,this.uint8[ct+38]=we,this.uint32[rt+10]=je,this.int16[Ne+22]=Je,a}}hf.prototype.bytesPerElement=48,dn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",hf);class ud extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p,y,S,T,A,D,N,W,J,se,oe,ce,Te,we,je,Je,Ne,rt,ct,Tt,cn,gn,en,Kt,Ht,tn){const Xt=this.length;return this.resize(Xt+1),this.emplace(Xt,a,h,p,y,S,T,A,D,N,W,J,se,oe,ce,Te,we,je,Je,Ne,rt,ct,Tt,cn,gn,en,Kt,Ht,tn)}emplace(a,h,p,y,S,T,A,D,N,W,J,se,oe,ce,Te,we,je,Je,Ne,rt,ct,Tt,cn,gn,en,Kt,Ht,tn,Xt){const Ft=34*a,Tn=17*a;return this.int16[Ft+0]=h,this.int16[Ft+1]=p,this.int16[Ft+2]=y,this.int16[Ft+3]=S,this.int16[Ft+4]=T,this.int16[Ft+5]=A,this.int16[Ft+6]=D,this.int16[Ft+7]=N,this.uint16[Ft+8]=W,this.uint16[Ft+9]=J,this.uint16[Ft+10]=se,this.uint16[Ft+11]=oe,this.uint16[Ft+12]=ce,this.uint16[Ft+13]=Te,this.uint16[Ft+14]=we,this.uint16[Ft+15]=je,this.uint16[Ft+16]=Je,this.uint16[Ft+17]=Ne,this.uint16[Ft+18]=rt,this.uint16[Ft+19]=ct,this.uint16[Ft+20]=Tt,this.uint16[Ft+21]=cn,this.uint16[Ft+22]=gn,this.uint32[Tn+12]=en,this.float32[Tn+13]=Kt,this.float32[Tn+14]=Ht,this.float32[Tn+15]=tn,this.float32[Tn+16]=Xt,a}}ud.prototype.bytesPerElement=68,dn("StructArrayLayout8i15ui1ul4f68",ud);class dd extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){const h=this.length;return this.resize(h+1),this.emplace(h,a)}emplace(a,h){return this.float32[1*a+0]=h,a}}dd.prototype.bytesPerElement=4,dn("StructArrayLayout1f4",dd);class hd extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h,p){const y=this.length;return this.resize(y+1),this.emplace(y,a,h,p)}emplace(a,h,p,y){const S=4*a;return this.uint32[2*a+0]=h,this.uint16[S+2]=p,this.uint16[S+3]=y,a}}hd.prototype.bytesPerElement=8,dn("StructArrayLayout1ul2ui8",hd);class _ extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h){const p=this.length;return this.resize(p+1),this.emplace(p,a,h)}emplace(a,h,p){const y=2*a;return this.uint16[y+0]=h,this.uint16[y+1]=p,a}}_.prototype.bytesPerElement=4,dn("StructArrayLayout2ui4",_);class o extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){const h=this.length;return this.resize(h+1),this.emplace(h,a)}emplace(a,h){return this.uint16[1*a+0]=h,a}}o.prototype.bytesPerElement=2,dn("StructArrayLayout1ui2",o);class f extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p,y){const S=this.length;return this.resize(S+1),this.emplace(S,a,h,p,y)}emplace(a,h,p,y,S){const T=4*a;return this.float32[T+0]=h,this.float32[T+1]=p,this.float32[T+2]=y,this.float32[T+3]=S,a}}f.prototype.bytesPerElement=16,dn("StructArrayLayout4f16",f);class v extends La{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new w(this.anchorPointX,this.anchorPointY)}}v.prototype.size=20;class b extends Go{get(a){return new v(this,a)}}dn("CollisionBoxArray",b);class E extends La{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(a){this._structArray.uint8[this._pos1+37]=a}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(a){this._structArray.uint8[this._pos1+38]=a}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(a){this._structArray.uint32[this._pos4+10]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}E.prototype.size=48;class P extends hf{get(a){return new E(this,a)}}dn("PlacedSymbolArray",P);class R extends La{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(a){this._structArray.uint32[this._pos4+12]=a}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}R.prototype.size=68;class O extends ud{get(a){return new R(this,a)}}dn("SymbolInstanceArray",O);class B extends dd{getoffsetX(a){return this.float32[1*a+0]}}dn("GlyphOffsetArray",B);class K extends sd{getx(a){return this.int16[3*a+0]}gety(a){return this.int16[3*a+1]}gettileUnitDistanceFromAnchor(a){return this.int16[3*a+2]}}dn("SymbolLineVertexArray",K);class Z extends La{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Z.prototype.size=8;class le extends hd{get(a){return new Z(this,a)}}dn("FeatureIndexArray",le);class Se extends Al{}class ve extends Al{}class xe extends Al{}class De extends da{}class Ue extends ad{}class st extends Ho{}class Ae extends od{}class nt extends Uc{}class _t extends uf{}class At extends Ml{}class Rt extends df{}class Bt extends Wo{}class Lt extends cd{}class nn extends _{}const Sn=ar([{name:"a_pos",components:2,type:"Int16"}],4),{members:zn}=Sn;class Zt{constructor(a=[]){this.segments=a}prepareSegment(a,h,p,y){let S=this.segments[this.segments.length-1];return a>Zt.MAX_VERTEX_ARRAY_LENGTH&&j(`Max vertices per segment is ${Zt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}`),(!S||S.vertexLength+a>Zt.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==y)&&(S={vertexOffset:h.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0},y!==void 0&&(S.sortKey=y),this.segments.push(S)),S}get(){return this.segments}destroy(){for(const a of this.segments)for(const h in a.vaos)a.vaos[h].destroy()}static simpleSegment(a,h,p,y){return new Zt([{vertexOffset:a,primitiveOffset:h,vertexLength:p,primitiveLength:y,vaos:{},sortKey:0}])}}function On(c,a){return 256*(c=F(Math.floor(c),0,255))+F(Math.floor(a),0,255)}Zt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,dn("SegmentVector",Zt);const on=ar([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var di={exports:{}},tr={exports:{}};tr.exports=function(c,a){var h,p,y,S,T,A,D,N;for(p=c.length-(h=3&c.length),y=a,T=3432918353,A=461845907,N=0;N<p;)D=255&c.charCodeAt(N)|(255&c.charCodeAt(++N))<<8|(255&c.charCodeAt(++N))<<16|(255&c.charCodeAt(++N))<<24,++N,y=27492+(65535&(S=5*(65535&(y=(y^=D=(65535&(D=(D=(65535&D)*T+(((D>>>16)*T&65535)<<16)&4294967295)<<15|D>>>17))*A+(((D>>>16)*A&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(S>>>16)&65535)<<16);switch(D=0,h){case 3:D^=(255&c.charCodeAt(N+2))<<16;case 2:D^=(255&c.charCodeAt(N+1))<<8;case 1:y^=D=(65535&(D=(D=(65535&(D^=255&c.charCodeAt(N)))*T+(((D>>>16)*T&65535)<<16)&4294967295)<<15|D>>>17))*A+(((D>>>16)*A&65535)<<16)&4294967295}return y^=c.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0};var hi=tr.exports,Nn={exports:{}};Nn.exports=function(c,a){for(var h,p=c.length,y=a^p,S=0;p>=4;)h=1540483477*(65535&(h=255&c.charCodeAt(S)|(255&c.charCodeAt(++S))<<8|(255&c.charCodeAt(++S))<<16|(255&c.charCodeAt(++S))<<24))+((1540483477*(h>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),p-=4,++S;switch(p){case 3:y^=(255&c.charCodeAt(S+2))<<16;case 2:y^=(255&c.charCodeAt(S+1))<<8;case 1:y=1540483477*(65535&(y^=255&c.charCodeAt(S)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0};var Ki=hi,Ur=Nn.exports;di.exports=Ki,di.exports.murmur3=Ki,di.exports.murmur2=Ur;var nr=m(di.exports);class yr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(a,h,p,y){this.ids.push(ls(a)),this.positions.push(h,p,y)}getPositions(a){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=ls(a);let p=0,y=this.ids.length-1;for(;p<y;){const T=p+y>>1;this.ids[T]>=h?y=T:p=T+1}const S=[];for(;this.ids[p]===h;)S.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return S}static serialize(a,h){const p=new Float64Array(a.ids),y=new Uint32Array(a.positions);return Ns(p,y,0,p.length-1),h&&h.push(p.buffer,y.buffer),{ids:p,positions:y}}static deserialize(a){const h=new yr;return h.ids=a.ids,h.positions=a.positions,h.indexed=!0,h}}function ls(c){const a=+c;return!isNaN(a)&&a<=Number.MAX_SAFE_INTEGER?a:nr(String(c))}function Ns(c,a,h,p){for(;h<p;){const y=c[h+p>>1];let S=h-1,T=p+1;for(;;){do S++;while(c[S]<y);do T--;while(c[T]>y);if(S>=T)break;Us(c,S,T),Us(a,3*S,3*T),Us(a,3*S+1,3*T+1),Us(a,3*S+2,3*T+2)}T-h<p-T?(Ns(c,a,h,T),h=T+1):(Ns(c,a,T+1,p),p=T)}}function Us(c,a,h){const p=c[a];c[a]=c[h],c[h]=p}dn("FeaturePositionMap",yr);class jr{constructor(a,h){this.gl=a.gl,this.location=h}}class ha extends jr{constructor(a,h){super(a,h),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1f(this.location,a))}}class jc extends jr{constructor(a,h){super(a,h),this.current=[0,0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]&&a[3]===this.current[3]||(this.current=a,this.gl.uniform4f(this.location,a[0],a[1],a[2],a[3]))}}class Pr extends jr{constructor(a,h){super(a,h),this.current=yt.transparent}set(a){a.r===this.current.r&&a.g===this.current.g&&a.b===this.current.b&&a.a===this.current.a||(this.current=a,this.gl.uniform4f(this.location,a.r,a.g,a.b,a.a))}}const br=new Float32Array(16);function pi(c){return[On(255*c.r,255*c.g),On(255*c.b,255*c.a)]}class fr{constructor(a,h,p){this.value=a,this.uniformNames=h.map(y=>`u_${y}`),this.type=p}setUniform(a,h,p){a.set(p.constantOr(this.value))}getBinding(a,h,p){return this.type==="color"?new Pr(a,h):new ha(a,h)}}class xr{constructor(a,h){this.uniformNames=h.map(p=>`u_${p}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(a,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=a.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=a.tlbr}setUniform(a,h,p,y){const S=y==="u_pattern_to"?this.patternTo:y==="u_pattern_from"?this.patternFrom:y==="u_pixel_ratio_to"?this.pixelRatioTo:y==="u_pixel_ratio_from"?this.pixelRatioFrom:null;S&&a.set(S)}getBinding(a,h,p){return p.substr(0,9)==="u_pattern"?new jc(a,h):new ha(a,h)}}class vi{constructor(a,h,p,y){this.expression=a,this.type=p,this.maxValue=0,this.paintVertexAttributes=h.map(S=>({name:`a_${S}`,type:"Float32",components:p==="color"?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(a,h,p,y,S){const T=this.paintVertexArray.length,A=this.expression.evaluate(new Fi(0),h,{},y,[],S);this.paintVertexArray.resize(a),this._setPaintValue(T,a,A)}updatePaintArray(a,h,p,y){const S=this.expression.evaluate({zoom:0},p,y);this._setPaintValue(a,h,S)}_setPaintValue(a,h,p){if(this.type==="color"){const y=pi(p);for(let S=a;S<h;S++)this.paintVertexArray.emplace(S,y[0],y[1])}else{for(let y=a;y<h;y++)this.paintVertexArray.emplace(y,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class pr{constructor(a,h,p,y,S,T){this.expression=a,this.uniformNames=h.map(A=>`u_${A}_t`),this.type=p,this.useIntegerZoom=y,this.zoom=S,this.maxValue=0,this.paintVertexAttributes=h.map(A=>({name:`a_${A}`,type:"Float32",components:p==="color"?4:2,offset:0})),this.paintVertexArray=new T}populatePaintArray(a,h,p,y,S){const T=this.expression.evaluate(new Fi(this.zoom),h,{},y,[],S),A=this.expression.evaluate(new Fi(this.zoom+1),h,{},y,[],S),D=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(D,a,T,A)}updatePaintArray(a,h,p,y){const S=this.expression.evaluate({zoom:this.zoom},p,y),T=this.expression.evaluate({zoom:this.zoom+1},p,y);this._setPaintValue(a,h,S,T)}_setPaintValue(a,h,p,y){if(this.type==="color"){const S=pi(p),T=pi(y);for(let A=a;A<h;A++)this.paintVertexArray.emplace(A,S[0],S[1],T[0],T[1])}else{for(let S=a;S<h;S++)this.paintVertexArray.emplace(S,p,y);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(y))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,h){const p=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,y=F(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);a.set(y)}getBinding(a,h,p){return new ha(a,h)}}class cs{constructor(a,h,p,y,S,T){this.expression=a,this.type=h,this.useIntegerZoom=p,this.zoom=y,this.layerId=T,this.zoomInPaintVertexArray=new S,this.zoomOutPaintVertexArray=new S}populatePaintArray(a,h,p){const y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(a),this.zoomOutPaintVertexArray.resize(a),this._setPaintValues(y,a,h.patterns&&h.patterns[this.layerId],p)}updatePaintArray(a,h,p,y,S){this._setPaintValues(a,h,p.patterns&&p.patterns[this.layerId],S)}_setPaintValues(a,h,p,y){if(!y||!p)return;const{min:S,mid:T,max:A}=p,D=y[S],N=y[T],W=y[A];if(D&&N&&W)for(let J=a;J<h;J++)this.zoomInPaintVertexArray.emplace(J,N.tl[0],N.tl[1],N.br[0],N.br[1],D.tl[0],D.tl[1],D.br[0],D.br[1],N.pixelRatio,D.pixelRatio),this.zoomOutPaintVertexArray.emplace(J,N.tl[0],N.tl[1],N.br[0],N.br[1],W.tl[0],W.tl[1],W.br[0],W.br[1],N.pixelRatio,W.pixelRatio)}upload(a){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=a.createVertexBuffer(this.zoomInPaintVertexArray,on.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=a.createVertexBuffer(this.zoomOutPaintVertexArray,on.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class fd{constructor(a,h,p){this.binders={},this._buffers=[];const y=[];for(const S in a.paint._values){if(!p(S))continue;const T=a.paint.get(S);if(!(T instanceof ca&&Tl(T.property.specification)))continue;const A=by(S,a.type),D=T.value,N=T.property.specification.type,W=T.property.useIntegerZoom,J=T.property.specification["property-type"],se=J==="cross-faded"||J==="cross-faded-data-driven";if(D.kind==="constant")this.binders[S]=se?new xr(D.value,A):new fr(D.value,A,N),y.push(`/u_${S}`);else if(D.kind==="source"||se){const oe=tg(S,N,"source");this.binders[S]=se?new cs(D,N,W,h,oe,a.id):new vi(D,A,N,oe),y.push(`/a_${S}`)}else{const oe=tg(S,N,"composite");this.binders[S]=new pr(D,A,N,W,h,oe),y.push(`/z_${S}`)}}this.cacheKey=y.sort().join("")}getMaxValue(a){const h=this.binders[a];return h instanceof vi||h instanceof pr?h.maxValue:0}populatePaintArrays(a,h,p,y,S){for(const T in this.binders){const A=this.binders[T];(A instanceof vi||A instanceof pr||A instanceof cs)&&A.populatePaintArray(a,h,p,y,S)}}setConstantPatternPositions(a,h){for(const p in this.binders){const y=this.binders[p];y instanceof xr&&y.setConstantPatternPositions(a,h)}}updatePaintArrays(a,h,p,y,S){let T=!1;for(const A in a){const D=h.getPositions(A);for(const N of D){const W=p.feature(N.index);for(const J in this.binders){const se=this.binders[J];if((se instanceof vi||se instanceof pr||se instanceof cs)&&se.expression.isStateDependent===!0){const oe=y.paint.get(J);se.expression=oe.value,se.updatePaintArray(N.start,N.end,W,a[A],S),T=!0}}}}return T}defines(){const a=[];for(const h in this.binders){const p=this.binders[h];(p instanceof fr||p instanceof xr)&&a.push(...p.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return a}getBinderAttributes(){const a=[];for(const h in this.binders){const p=this.binders[h];if(p instanceof vi||p instanceof pr)for(let y=0;y<p.paintVertexAttributes.length;y++)a.push(p.paintVertexAttributes[y].name);else if(p instanceof cs)for(let y=0;y<on.members.length;y++)a.push(on.members[y].name)}return a}getBinderUniforms(){const a=[];for(const h in this.binders){const p=this.binders[h];if(p instanceof fr||p instanceof xr||p instanceof pr)for(const y of p.uniformNames)a.push(y)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a,h){const p=[];for(const y in this.binders){const S=this.binders[y];if(S instanceof fr||S instanceof xr||S instanceof pr){for(const T of S.uniformNames)if(h[T]){const A=S.getBinding(a,h[T],T);p.push({name:T,property:y,binding:A})}}}return p}setUniforms(a,h,p,y){for(const{name:S,property:T,binding:A}of h)this.binders[T].setUniform(A,y,p.get(T),S)}updatePaintBuffers(a){this._buffers=[];for(const h in this.binders){const p=this.binders[h];if(a&&p instanceof cs){const y=a.fromScale===2?p.zoomInPaintVertexBuffer:p.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(p instanceof vi||p instanceof pr)&&p.paintVertexBuffer&&this._buffers.push(p.paintVertexBuffer)}}upload(a){for(const h in this.binders){const p=this.binders[h];(p instanceof vi||p instanceof pr||p instanceof cs)&&p.upload(a)}this.updatePaintBuffers()}destroy(){for(const a in this.binders){const h=this.binders[a];(h instanceof vi||h instanceof pr||h instanceof cs)&&h.destroy()}}}class Oa{constructor(a,h,p=()=>!0){this.programConfigurations={};for(const y of a)this.programConfigurations[y.id]=new fd(y,h,p);this.needsUpload=!1,this._featureMap=new yr,this._bufferOffset=0}populatePaintArrays(a,h,p,y,S,T){for(const A in this.programConfigurations)this.programConfigurations[A].populatePaintArrays(a,h,y,S,T);h.id!==void 0&&this._featureMap.add(h.id,p,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,h,p,y){for(const S of p)this.needsUpload=this.programConfigurations[S.id].updatePaintArrays(a,this._featureMap,h,S,y)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}function by(c,a){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${a}-`,"").replace(/-/g,"_")]}function tg(c,a,h){const p={color:{source:Ho,composite:f},number:{source:dd,composite:Ho}},y=function(S){return{"line-pattern":{source:Ae,composite:Ae},"fill-pattern":{source:Ae,composite:Ae},"fill-extrusion-pattern":{source:Ae,composite:Ae}}[S]}(c);return y&&y[h]||p[a][h]}dn("ConstantBinder",fr),dn("CrossFadedConstantBinder",xr),dn("SourceExpressionBinder",vi),dn("CrossFadedCompositeBinder",cs),dn("CompositeExpressionBinder",pr),dn("ProgramConfiguration",fd,{omit:["_buffers"]}),dn("ProgramConfigurationSet",Oa);var $i=8192;const ff=Math.pow(2,14)-1,Vc=-ff-1;function Ra(c){const a=$i/c.extent,h=c.loadGeometry();for(let p=0;p<h.length;p++){const y=h[p];for(let S=0;S<y.length;S++){const T=y[S],A=Math.round(T.x*a),D=Math.round(T.y*a);T.x=F(A,Vc,ff),T.y=F(D,Vc,ff),(A<T.x||A>T.x+1||D<T.y||D>T.y+1)&&j("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function Hc(c,a){return{type:c.type,id:c.id,properties:c.properties,geometry:a?Ra(c):[]}}function ng(c,a,h,p,y){c.emplaceBack(2*a+(p+1)/2,2*h+(y+1)/2)}class xy{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(h=>h.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new ve,this.indexArray=new Lt,this.segments=new Zt,this.programConfigurations=new Oa(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(a,h,p){const y=this.layers[0],S=[];let T=null,A=!1;y.type==="circle"&&(T=y.layout.get("circle-sort-key"),A=!T.isConstant());for(const{feature:D,id:N,index:W,sourceLayerIndex:J}of a){const se=this.layers[0]._featureFilter.needGeometry,oe=Hc(D,se);if(!this.layers[0]._featureFilter.filter(new Fi(this.zoom),oe,p))continue;const ce=A?T.evaluate(oe,{},p):void 0,Te={id:N,properties:D.properties,type:D.type,sourceLayerIndex:J,index:W,geometry:se?oe.geometry:Ra(D),patterns:{},sortKey:ce};S.push(Te)}A&&S.sort((D,N)=>D.sortKey-N.sortKey);for(const D of S){const{geometry:N,index:W,sourceLayerIndex:J}=D,se=a[W].feature;this.addFeature(D,N,W,p),h.featureIndex.insert(se,N,W,J,this.index)}}update(a,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,h,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,zn),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,h,p,y){for(const S of h)for(const T of S){const A=T.x,D=T.y;if(A<0||A>=$i||D<0||D>=$i)continue;const N=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),W=N.vertexLength;ng(this.layoutVertexArray,A,D,-1,-1),ng(this.layoutVertexArray,A,D,1,-1),ng(this.layoutVertexArray,A,D,1,1),ng(this.layoutVertexArray,A,D,-1,1),this.indexArray.emplaceBack(W,W+1,W+2),this.indexArray.emplaceBack(W,W+3,W+2),N.vertexLength+=4,N.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,{},y)}}function rw(c,a){for(let h=0;h<c.length;h++)if(pd(a,c[h]))return!0;for(let h=0;h<a.length;h++)if(pd(c,a[h]))return!0;return!!wy(c,a)}function iD(c,a,h){return!!pd(c,a)||!!Sy(a,c,h)}function sw(c,a){if(c.length===1)return ow(a,c[0]);for(let h=0;h<a.length;h++){const p=a[h];for(let y=0;y<p.length;y++)if(pd(c,p[y]))return!0}for(let h=0;h<c.length;h++)if(ow(a,c[h]))return!0;for(let h=0;h<a.length;h++)if(wy(c,a[h]))return!0;return!1}function rD(c,a,h){if(c.length>1){if(wy(c,a))return!0;for(let p=0;p<a.length;p++)if(Sy(a[p],c,h))return!0}for(let p=0;p<c.length;p++)if(Sy(c[p],a,h))return!0;return!1}function wy(c,a){if(c.length===0||a.length===0)return!1;for(let h=0;h<c.length-1;h++){const p=c[h],y=c[h+1];for(let S=0;S<a.length-1;S++)if(sD(p,y,a[S],a[S+1]))return!0}return!1}function sD(c,a,h,p){return z(c,h,p)!==z(a,h,p)&&z(c,a,h)!==z(c,a,p)}function Sy(c,a,h){const p=h*h;if(a.length===1)return c.distSqr(a[0])<p;for(let y=1;y<a.length;y++)if(aw(c,a[y-1],a[y])<p)return!0;return!1}function aw(c,a,h){const p=a.distSqr(h);if(p===0)return c.distSqr(a);const y=((c.x-a.x)*(h.x-a.x)+(c.y-a.y)*(h.y-a.y))/p;return c.distSqr(y<0?a:y>1?h:h.sub(a)._mult(y)._add(a))}function ow(c,a){let h,p,y,S=!1;for(let T=0;T<c.length;T++){h=c[T];for(let A=0,D=h.length-1;A<h.length;D=A++)p=h[A],y=h[D],p.y>a.y!=y.y>a.y&&a.x<(y.x-p.x)*(a.y-p.y)/(y.y-p.y)+p.x&&(S=!S)}return S}function pd(c,a){let h=!1;for(let p=0,y=c.length-1;p<c.length;y=p++){const S=c[p],T=c[y];S.y>a.y!=T.y>a.y&&a.x<(T.x-S.x)*(a.y-S.y)/(T.y-S.y)+S.x&&(h=!h)}return h}function aD(c,a,h){const p=h[0],y=h[2];if(c.x<p.x&&a.x<p.x||c.x>y.x&&a.x>y.x||c.y<p.y&&a.y<p.y||c.y>y.y&&a.y>y.y)return!1;const S=z(c,a,h[0]);return S!==z(c,a,h[1])||S!==z(c,a,h[2])||S!==z(c,a,h[3])}function pf(c,a,h){const p=a.paint.get(c).value;return p.kind==="constant"?p.value:h.programConfigurations.get(a.id).getMaxValue(c)}function ig(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function rg(c,a,h,p,y){if(!a[0]&&!a[1])return c;const S=w.convert(a)._mult(y);h==="viewport"&&S._rotate(-p);const T=[];for(let A=0;A<c.length;A++)T.push(c[A].sub(S));return T}let lw,cw;dn("CircleBucket",xy,{omit:["layers"]});var oD={get paint(){return cw=cw||new Jr({"circle-radius":new Pn(ge.paint_circle["circle-radius"]),"circle-color":new Pn(ge.paint_circle["circle-color"]),"circle-blur":new Pn(ge.paint_circle["circle-blur"]),"circle-opacity":new Pn(ge.paint_circle["circle-opacity"]),"circle-translate":new bn(ge.paint_circle["circle-translate"]),"circle-translate-anchor":new bn(ge.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new bn(ge.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new bn(ge.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Pn(ge.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Pn(ge.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Pn(ge.paint_circle["circle-stroke-opacity"])})},get layout(){return lw=lw||new Jr({"circle-sort-key":new Pn(ge.layout_circle["circle-sort-key"])})}},Qr=1e-6,md=typeof Float32Array<"u"?Float32Array:Array;function Ty(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function uw(c,a,h){var p=a[0],y=a[1],S=a[2],T=a[3],A=a[4],D=a[5],N=a[6],W=a[7],J=a[8],se=a[9],oe=a[10],ce=a[11],Te=a[12],we=a[13],je=a[14],Je=a[15],Ne=h[0],rt=h[1],ct=h[2],Tt=h[3];return c[0]=Ne*p+rt*A+ct*J+Tt*Te,c[1]=Ne*y+rt*D+ct*se+Tt*we,c[2]=Ne*S+rt*N+ct*oe+Tt*je,c[3]=Ne*T+rt*W+ct*ce+Tt*Je,c[4]=(Ne=h[4])*p+(rt=h[5])*A+(ct=h[6])*J+(Tt=h[7])*Te,c[5]=Ne*y+rt*D+ct*se+Tt*we,c[6]=Ne*S+rt*N+ct*oe+Tt*je,c[7]=Ne*T+rt*W+ct*ce+Tt*Je,c[8]=(Ne=h[8])*p+(rt=h[9])*A+(ct=h[10])*J+(Tt=h[11])*Te,c[9]=Ne*y+rt*D+ct*se+Tt*we,c[10]=Ne*S+rt*N+ct*oe+Tt*je,c[11]=Ne*T+rt*W+ct*ce+Tt*Je,c[12]=(Ne=h[12])*p+(rt=h[13])*A+(ct=h[14])*J+(Tt=h[15])*Te,c[13]=Ne*y+rt*D+ct*se+Tt*we,c[14]=Ne*S+rt*N+ct*oe+Tt*je,c[15]=Ne*T+rt*W+ct*ce+Tt*Je,c}Math.hypot||(Math.hypot=function(){for(var c=0,a=arguments.length;a--;)c+=arguments[a]*arguments[a];return Math.sqrt(c)});var mf,lD=uw;function sg(c,a,h){var p=a[0],y=a[1],S=a[2],T=a[3];return c[0]=h[0]*p+h[4]*y+h[8]*S+h[12]*T,c[1]=h[1]*p+h[5]*y+h[9]*S+h[13]*T,c[2]=h[2]*p+h[6]*y+h[10]*S+h[14]*T,c[3]=h[3]*p+h[7]*y+h[11]*S+h[15]*T,c}function dw(c,a){const h=sg([],[c.x,c.y,0,1],a);return new w(h[0]/h[3],h[1]/h[3])}mf=new md(4),md!=Float32Array&&(mf[0]=0,mf[1]=0,mf[2]=0,mf[3]=0);class hw extends xy{}let fw;dn("HeatmapBucket",hw,{omit:["layers"]});var cD={get paint(){return fw=fw||new Jr({"heatmap-radius":new Pn(ge.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Pn(ge.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new bn(ge.paint_heatmap["heatmap-intensity"]),"heatmap-color":new lf(ge.paint_heatmap["heatmap-color"]),"heatmap-opacity":new bn(ge.paint_heatmap["heatmap-opacity"])})}};function Ey(c,{width:a,height:h},p,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==a*h*p)throw new RangeError(`mismatched image size. expected: ${y.length} but got: ${a*h*p}`)}else y=new Uint8Array(a*h*p);return c.width=a,c.height=h,c.data=y,c}function pw(c,{width:a,height:h},p){if(a===c.width&&h===c.height)return;const y=Ey({},{width:a,height:h},p);Cy(c,y,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,a),height:Math.min(c.height,h)},p),c.width=a,c.height=h,c.data=y.data}function Cy(c,a,h,p,y,S){if(y.width===0||y.height===0)return a;if(y.width>c.width||y.height>c.height||h.x>c.width-y.width||h.y>c.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>a.width||y.height>a.height||p.x>a.width-y.width||p.y>a.height-y.height)throw new RangeError("out of range destination coordinates for image copy");const T=c.data,A=a.data;if(T===A)throw new Error("srcData equals dstData, so image is already copied");for(let D=0;D<y.height;D++){const N=((h.y+D)*c.width+h.x)*S,W=((p.y+D)*a.width+p.x)*S;for(let J=0;J<y.width*S;J++)A[W+J]=T[N+J]}return a}class gf{constructor(a,h){Ey(this,a,1,h)}resize(a){pw(this,a,1)}clone(){return new gf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,h,p,y,S){Cy(a,h,p,y,S,1)}}class js{constructor(a,h){Ey(this,a,4,h)}resize(a){pw(this,a,4)}replace(a,h){h?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new js({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,h,p,y,S){Cy(a,h,p,y,S,4)}}function mw(c){const a={},h=c.resolution||256,p=c.clips?c.clips.length:1,y=c.image||new js({width:h,height:p});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const S=(T,A,D)=>{a[c.evaluationKey]=D;const N=c.expression.evaluate(a);y.data[T+A+0]=Math.floor(255*N.r/N.a),y.data[T+A+1]=Math.floor(255*N.g/N.a),y.data[T+A+2]=Math.floor(255*N.b/N.a),y.data[T+A+3]=Math.floor(255*N.a)};if(c.clips)for(let T=0,A=0;T<p;++T,A+=4*h)for(let D=0,N=0;D<h;D++,N+=4){const W=D/(h-1),{start:J,end:se}=c.clips[T];S(A,N,J*(1-W)+se*W)}else for(let T=0,A=0;T<h;T++,A+=4)S(0,A,T/(h-1));return y}let gw;dn("AlphaImage",gf),dn("RGBAImage",js);var uD={get paint(){return gw=gw||new Jr({"hillshade-illumination-direction":new bn(ge.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new bn(ge.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new bn(ge.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new bn(ge.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new bn(ge.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new bn(ge.paint_hillshade["hillshade-accent-color"])})}};const dD=ar([{name:"a_pos",components:2,type:"Int16"}],4),{members:hD}=dD;var Iy={exports:{}};function ag(c,a,h){h=h||2;var p,y,S,T,A,D,N,W=a&&a.length,J=W?a[0]*h:c.length,se=vw(c,0,J,h,!0),oe=[];if(!se||se.next===se.prev)return oe;if(W&&(se=function(Te,we,je,Je){var Ne,rt,ct,Tt=[];for(Ne=0,rt=we.length;Ne<rt;Ne++)(ct=vw(Te,we[Ne]*Je,Ne<rt-1?we[Ne+1]*Je:Te.length,Je,!1))===ct.next&&(ct.steiner=!0),Tt.push(bD(ct));for(Tt.sort(vD),Ne=0;Ne<Tt.length;Ne++)je=_D(Tt[Ne],je);return je}(c,a,se,h)),c.length>80*h){p=S=c[0],y=T=c[1];for(var ce=h;ce<J;ce+=h)(A=c[ce])<p&&(p=A),(D=c[ce+1])<y&&(y=D),A>S&&(S=A),D>T&&(T=D);N=(N=Math.max(S-p,T-y))!==0?32767/N:0}return vf(se,oe,h,p,y,N,0),oe}function vw(c,a,h,p,y){var S,T;if(y===ky(c,a,h,p)>0)for(S=a;S<h;S+=p)T=bw(S,c[S],c[S+1],T);else for(S=h-p;S>=a;S-=p)T=bw(S,c[S],c[S+1],T);return T&&og(T,T.next)&&(yf(T),T=T.next),T}function Gc(c,a){if(!c)return c;a||(a=c);var h,p=c;do if(h=!1,p.steiner||!og(p,p.next)&&ir(p.prev,p,p.next)!==0)p=p.next;else{if(yf(p),(p=a=p.prev)===p.next)break;h=!0}while(h||p!==a);return a}function vf(c,a,h,p,y,S,T){if(c){!T&&S&&function(W,J,se,oe){var ce=W;do ce.z===0&&(ce.z=Ay(ce.x,ce.y,J,se,oe)),ce.prevZ=ce.prev,ce.nextZ=ce.next,ce=ce.next;while(ce!==W);ce.prevZ.nextZ=null,ce.prevZ=null,function(Te){var we,je,Je,Ne,rt,ct,Tt,cn,gn=1;do{for(je=Te,Te=null,rt=null,ct=0;je;){for(ct++,Je=je,Tt=0,we=0;we<gn&&(Tt++,Je=Je.nextZ);we++);for(cn=gn;Tt>0||cn>0&&Je;)Tt!==0&&(cn===0||!Je||je.z<=Je.z)?(Ne=je,je=je.nextZ,Tt--):(Ne=Je,Je=Je.nextZ,cn--),rt?rt.nextZ=Ne:Te=Ne,Ne.prevZ=rt,rt=Ne;je=Je}rt.nextZ=null,gn*=2}while(ct>1)}(ce)}(c,p,y,S);for(var A,D,N=c;c.prev!==c.next;)if(A=c.prev,D=c.next,S?pD(c,p,y,S):fD(c))a.push(A.i/h|0),a.push(c.i/h|0),a.push(D.i/h|0),yf(c),c=D.next,N=D.next;else if((c=D)===N){T?T===1?vf(c=mD(Gc(c),a,h),a,h,p,y,S,2):T===2&&gD(c,a,h,p,y,S):vf(Gc(c),a,h,p,y,S,1);break}}}function fD(c){var a=c.prev,h=c,p=c.next;if(ir(a,h,p)>=0)return!1;for(var y=a.x,S=h.x,T=p.x,A=a.y,D=h.y,N=p.y,W=y<S?y<T?y:T:S<T?S:T,J=A<D?A<N?A:N:D<N?D:N,se=y>S?y>T?y:T:S>T?S:T,oe=A>D?A>N?A:N:D>N?D:N,ce=p.next;ce!==a;){if(ce.x>=W&&ce.x<=se&&ce.y>=J&&ce.y<=oe&&gd(y,A,S,D,T,N,ce.x,ce.y)&&ir(ce.prev,ce,ce.next)>=0)return!1;ce=ce.next}return!0}function pD(c,a,h,p){var y=c.prev,S=c,T=c.next;if(ir(y,S,T)>=0)return!1;for(var A=y.x,D=S.x,N=T.x,W=y.y,J=S.y,se=T.y,oe=A<D?A<N?A:N:D<N?D:N,ce=W<J?W<se?W:se:J<se?J:se,Te=A>D?A>N?A:N:D>N?D:N,we=W>J?W>se?W:se:J>se?J:se,je=Ay(oe,ce,a,h,p),Je=Ay(Te,we,a,h,p),Ne=c.prevZ,rt=c.nextZ;Ne&&Ne.z>=je&&rt&&rt.z<=Je;){if(Ne.x>=oe&&Ne.x<=Te&&Ne.y>=ce&&Ne.y<=we&&Ne!==y&&Ne!==T&&gd(A,W,D,J,N,se,Ne.x,Ne.y)&&ir(Ne.prev,Ne,Ne.next)>=0||(Ne=Ne.prevZ,rt.x>=oe&&rt.x<=Te&&rt.y>=ce&&rt.y<=we&&rt!==y&&rt!==T&&gd(A,W,D,J,N,se,rt.x,rt.y)&&ir(rt.prev,rt,rt.next)>=0))return!1;rt=rt.nextZ}for(;Ne&&Ne.z>=je;){if(Ne.x>=oe&&Ne.x<=Te&&Ne.y>=ce&&Ne.y<=we&&Ne!==y&&Ne!==T&&gd(A,W,D,J,N,se,Ne.x,Ne.y)&&ir(Ne.prev,Ne,Ne.next)>=0)return!1;Ne=Ne.prevZ}for(;rt&&rt.z<=Je;){if(rt.x>=oe&&rt.x<=Te&&rt.y>=ce&&rt.y<=we&&rt!==y&&rt!==T&&gd(A,W,D,J,N,se,rt.x,rt.y)&&ir(rt.prev,rt,rt.next)>=0)return!1;rt=rt.nextZ}return!0}function mD(c,a,h){var p=c;do{var y=p.prev,S=p.next.next;!og(y,S)&&_w(y,p,p.next,S)&&_f(y,S)&&_f(S,y)&&(a.push(y.i/h|0),a.push(p.i/h|0),a.push(S.i/h|0),yf(p),yf(p.next),p=c=S),p=p.next}while(p!==c);return Gc(p)}function gD(c,a,h,p,y,S){var T=c;do{for(var A=T.next.next;A!==T.prev;){if(T.i!==A.i&&xD(T,A)){var D=yw(T,A);return T=Gc(T,T.next),D=Gc(D,D.next),vf(T,a,h,p,y,S,0),void vf(D,a,h,p,y,S,0)}A=A.next}T=T.next}while(T!==c)}function vD(c,a){return c.x-a.x}function _D(c,a){var h=function(y,S){var T,A=S,D=y.x,N=y.y,W=-1/0;do{if(N<=A.y&&N>=A.next.y&&A.next.y!==A.y){var J=A.x+(N-A.y)*(A.next.x-A.x)/(A.next.y-A.y);if(J<=D&&J>W&&(W=J,T=A.x<A.next.x?A:A.next,J===D))return T}A=A.next}while(A!==S);if(!T)return null;var se,oe=T,ce=T.x,Te=T.y,we=1/0;A=T;do D>=A.x&&A.x>=ce&&D!==A.x&&gd(N<Te?D:W,N,ce,Te,N<Te?W:D,N,A.x,A.y)&&(se=Math.abs(N-A.y)/(D-A.x),_f(A,y)&&(se<we||se===we&&(A.x>T.x||A.x===T.x&&yD(T,A)))&&(T=A,we=se)),A=A.next;while(A!==oe);return T}(c,a);if(!h)return a;var p=yw(h,c);return Gc(p,p.next),Gc(h,h.next)}function yD(c,a){return ir(c.prev,c,a.prev)<0&&ir(a.next,c,c.next)<0}function Ay(c,a,h,p,y){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-h)*y|0)|c<<8))|c<<4))|c<<2))|c<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-p)*y|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function bD(c){var a=c,h=c;do(a.x<h.x||a.x===h.x&&a.y<h.y)&&(h=a),a=a.next;while(a!==c);return h}function gd(c,a,h,p,y,S,T,A){return(y-T)*(a-A)>=(c-T)*(S-A)&&(c-T)*(p-A)>=(h-T)*(a-A)&&(h-T)*(S-A)>=(y-T)*(p-A)}function xD(c,a){return c.next.i!==a.i&&c.prev.i!==a.i&&!function(h,p){var y=h;do{if(y.i!==h.i&&y.next.i!==h.i&&y.i!==p.i&&y.next.i!==p.i&&_w(y,y.next,h,p))return!0;y=y.next}while(y!==h);return!1}(c,a)&&(_f(c,a)&&_f(a,c)&&function(h,p){var y=h,S=!1,T=(h.x+p.x)/2,A=(h.y+p.y)/2;do y.y>A!=y.next.y>A&&y.next.y!==y.y&&T<(y.next.x-y.x)*(A-y.y)/(y.next.y-y.y)+y.x&&(S=!S),y=y.next;while(y!==h);return S}(c,a)&&(ir(c.prev,c,a.prev)||ir(c,a.prev,a))||og(c,a)&&ir(c.prev,c,c.next)>0&&ir(a.prev,a,a.next)>0)}function ir(c,a,h){return(a.y-c.y)*(h.x-a.x)-(a.x-c.x)*(h.y-a.y)}function og(c,a){return c.x===a.x&&c.y===a.y}function _w(c,a,h,p){var y=cg(ir(c,a,h)),S=cg(ir(c,a,p)),T=cg(ir(h,p,c)),A=cg(ir(h,p,a));return y!==S&&T!==A||!(y!==0||!lg(c,h,a))||!(S!==0||!lg(c,p,a))||!(T!==0||!lg(h,c,p))||!(A!==0||!lg(h,a,p))}function lg(c,a,h){return a.x<=Math.max(c.x,h.x)&&a.x>=Math.min(c.x,h.x)&&a.y<=Math.max(c.y,h.y)&&a.y>=Math.min(c.y,h.y)}function cg(c){return c>0?1:c<0?-1:0}function _f(c,a){return ir(c.prev,c,c.next)<0?ir(c,a,c.next)>=0&&ir(c,c.prev,a)>=0:ir(c,a,c.prev)<0||ir(c,c.next,a)<0}function yw(c,a){var h=new My(c.i,c.x,c.y),p=new My(a.i,a.x,a.y),y=c.next,S=a.prev;return c.next=a,a.prev=c,h.next=y,y.prev=h,p.next=h,h.prev=p,S.next=p,p.prev=S,p}function bw(c,a,h,p){var y=new My(c,a,h);return p?(y.next=p.next,y.prev=p,p.next.prev=y,p.next=y):(y.prev=y,y.next=y),y}function yf(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function My(c,a,h){this.i=c,this.x=a,this.y=h,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ky(c,a,h,p){for(var y=0,S=a,T=h-p;S<h;S+=p)y+=(c[T]-c[S])*(c[S+1]+c[T+1]),T=S;return y}Iy.exports=ag,Iy.exports.default=ag,ag.deviation=function(c,a,h,p){var y=a&&a.length,S=Math.abs(ky(c,0,y?a[0]*h:c.length,h));if(y)for(var T=0,A=a.length;T<A;T++)S-=Math.abs(ky(c,a[T]*h,T<A-1?a[T+1]*h:c.length,h));var D=0;for(T=0;T<p.length;T+=3){var N=p[T]*h,W=p[T+1]*h,J=p[T+2]*h;D+=Math.abs((c[N]-c[J])*(c[W+1]-c[N+1])-(c[N]-c[W])*(c[J+1]-c[N+1]))}return S===0&&D===0?0:Math.abs((D-S)/S)},ag.flatten=function(c){for(var a=c[0][0].length,h={vertices:[],holes:[],dimensions:a},p=0,y=0;y<c.length;y++){for(var S=0;S<c[y].length;S++)for(var T=0;T<a;T++)h.vertices.push(c[y][S][T]);y>0&&h.holes.push(p+=c[y-1].length)}return h};var xw=m(Iy.exports);function wD(c,a,h,p,y){ww(c,a,h||0,p||c.length-1,y||SD)}function ww(c,a,h,p,y){for(;p>h;){if(p-h>600){var S=p-h+1,T=a-h+1,A=Math.log(S),D=.5*Math.exp(2*A/3),N=.5*Math.sqrt(A*D*(S-D)/S)*(T-S/2<0?-1:1);ww(c,a,Math.max(h,Math.floor(a-T*D/S+N)),Math.min(p,Math.floor(a+(S-T)*D/S+N)),y)}var W=c[a],J=h,se=p;for(bf(c,h,a),y(c[p],W)>0&&bf(c,h,p);J<se;){for(bf(c,J,se),J++,se--;y(c[J],W)<0;)J++;for(;y(c[se],W)>0;)se--}y(c[h],W)===0?bf(c,h,se):bf(c,++se,p),se<=a&&(h=se+1),a<=se&&(p=se-1)}}function bf(c,a,h){var p=c[a];c[a]=c[h],c[h]=p}function SD(c,a){return c<a?-1:c>a?1:0}function Py(c,a){const h=c.length;if(h<=1)return[c];const p=[];let y,S;for(let T=0;T<h;T++){const A=ie(c[T]);A!==0&&(c[T].area=Math.abs(A),S===void 0&&(S=A<0),S===A<0?(y&&p.push(y),y=[c[T]]):y.push(c[T]))}if(y&&p.push(y),a>1)for(let T=0;T<p.length;T++)p[T].length<=a||(wD(p[T],a,1,p[T].length-1,TD),p[T]=p[T].slice(0,a));return p}function TD(c,a){return a.area-c.area}function Dy(c,a,h){const p=h.patternDependencies;let y=!1;for(const S of a){const T=S.paint.get(`${c}-pattern`);T.isConstant()||(y=!0);const A=T.constantOr(null);A&&(y=!0,p[A.to]=!0,p[A.from]=!0)}return y}function Ly(c,a,h,p,y){const S=y.patternDependencies;for(const T of a){const A=T.paint.get(`${c}-pattern`).value;if(A.kind!=="constant"){let D=A.evaluate({zoom:p-1},h,{},y.availableImages),N=A.evaluate({zoom:p},h,{},y.availableImages),W=A.evaluate({zoom:p+1},h,{},y.availableImages);D=D&&D.name?D.name:D,N=N&&N.name?N.name:N,W=W&&W.name?W.name:W,S[D]=!0,S[N]=!0,S[W]=!0,h.patterns[T.id]={min:D,mid:N,max:W}}}return h}class Oy{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(h=>h.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new xe,this.indexArray=new Lt,this.indexArray2=new nn,this.programConfigurations=new Oa(a.layers,a.zoom),this.segments=new Zt,this.segments2=new Zt,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(a,h,p){this.hasPattern=Dy("fill",this.layers,h);const y=this.layers[0].layout.get("fill-sort-key"),S=!y.isConstant(),T=[];for(const{feature:A,id:D,index:N,sourceLayerIndex:W}of a){const J=this.layers[0]._featureFilter.needGeometry,se=Hc(A,J);if(!this.layers[0]._featureFilter.filter(new Fi(this.zoom),se,p))continue;const oe=S?y.evaluate(se,{},p,h.availableImages):void 0,ce={id:D,properties:A.properties,type:A.type,sourceLayerIndex:W,index:N,geometry:J?se.geometry:Ra(A),patterns:{},sortKey:oe};T.push(ce)}S&&T.sort((A,D)=>A.sortKey-D.sortKey);for(const A of T){const{geometry:D,index:N,sourceLayerIndex:W}=A;if(this.hasPattern){const J=Ly("fill",this.layers,A,this.zoom,h);this.patternFeatures.push(J)}else this.addFeature(A,D,N,p,{});h.featureIndex.insert(a[N].feature,D,N,W,this.index)}}update(a,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,h,this.stateDependentLayers,p)}addFeatures(a,h,p){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,h,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,hD),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,h,p,y,S){for(const T of Py(h,500)){let A=0;for(const oe of T)A+=oe.length;const D=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray),N=D.vertexLength,W=[],J=[];for(const oe of T){if(oe.length===0)continue;oe!==T[0]&&J.push(W.length/2);const ce=this.segments2.prepareSegment(oe.length,this.layoutVertexArray,this.indexArray2),Te=ce.vertexLength;this.layoutVertexArray.emplaceBack(oe[0].x,oe[0].y),this.indexArray2.emplaceBack(Te+oe.length-1,Te),W.push(oe[0].x),W.push(oe[0].y);for(let we=1;we<oe.length;we++)this.layoutVertexArray.emplaceBack(oe[we].x,oe[we].y),this.indexArray2.emplaceBack(Te+we-1,Te+we),W.push(oe[we].x),W.push(oe[we].y);ce.vertexLength+=oe.length,ce.primitiveLength+=oe.length}const se=xw(W,J);for(let oe=0;oe<se.length;oe+=3)this.indexArray.emplaceBack(N+se[oe],N+se[oe+1],N+se[oe+2]);D.vertexLength+=A,D.primitiveLength+=se.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,S,y)}}let Sw,Tw;dn("FillBucket",Oy,{omit:["layers","patternFeatures"]});var ED={get paint(){return Tw=Tw||new Jr({"fill-antialias":new bn(ge.paint_fill["fill-antialias"]),"fill-opacity":new Pn(ge.paint_fill["fill-opacity"]),"fill-color":new Pn(ge.paint_fill["fill-color"]),"fill-outline-color":new Pn(ge.paint_fill["fill-outline-color"]),"fill-translate":new bn(ge.paint_fill["fill-translate"]),"fill-translate-anchor":new bn(ge.paint_fill["fill-translate-anchor"]),"fill-pattern":new Nc(ge.paint_fill["fill-pattern"])})},get layout(){return Sw=Sw||new Jr({"fill-sort-key":new Pn(ge.layout_fill["fill-sort-key"])})}};const CD=ar([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),ID=ar([{name:"a_centroid",components:2,type:"Int16"}],4),{members:AD}=CD;var kl={},MD=g,Ew=vd;function vd(c,a,h,p,y){this.properties={},this.extent=h,this.type=0,this._pbf=c,this._geometry=-1,this._keys=p,this._values=y,c.readFields(kD,this,a)}function kD(c,a,h){c==1?a.id=h.readVarint():c==2?function(p,y){for(var S=p.readVarint()+p.pos;p.pos<S;){var T=y._keys[p.readVarint()],A=y._values[p.readVarint()];y.properties[T]=A}}(h,a):c==3?a.type=h.readVarint():c==4&&(a._geometry=h.pos)}function PD(c){for(var a,h,p=0,y=0,S=c.length,T=S-1;y<S;T=y++)p+=((h=c[T]).x-(a=c[y]).x)*(a.y+h.y);return p}vd.types=["Unknown","Point","LineString","Polygon"],vd.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var a,h=c.readVarint()+c.pos,p=1,y=0,S=0,T=0,A=[];c.pos<h;){if(y<=0){var D=c.readVarint();p=7&D,y=D>>3}if(y--,p===1||p===2)S+=c.readSVarint(),T+=c.readSVarint(),p===1&&(a&&A.push(a),a=[]),a.push(new MD(S,T));else{if(p!==7)throw new Error("unknown command "+p);a&&a.push(a[0].clone())}}return a&&A.push(a),A},vd.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var a=c.readVarint()+c.pos,h=1,p=0,y=0,S=0,T=1/0,A=-1/0,D=1/0,N=-1/0;c.pos<a;){if(p<=0){var W=c.readVarint();h=7&W,p=W>>3}if(p--,h===1||h===2)(y+=c.readSVarint())<T&&(T=y),y>A&&(A=y),(S+=c.readSVarint())<D&&(D=S),S>N&&(N=S);else if(h!==7)throw new Error("unknown command "+h)}return[T,D,A,N]},vd.prototype.toGeoJSON=function(c,a,h){var p,y,S=this.extent*Math.pow(2,h),T=this.extent*c,A=this.extent*a,D=this.loadGeometry(),N=vd.types[this.type];function W(oe){for(var ce=0;ce<oe.length;ce++){var Te=oe[ce];oe[ce]=[360*(Te.x+T)/S-180,360/Math.PI*Math.atan(Math.exp((180-360*(Te.y+A)/S)*Math.PI/180))-90]}}switch(this.type){case 1:var J=[];for(p=0;p<D.length;p++)J[p]=D[p][0];W(D=J);break;case 2:for(p=0;p<D.length;p++)W(D[p]);break;case 3:for(D=function(oe){var ce=oe.length;if(ce<=1)return[oe];for(var Te,we,je=[],Je=0;Je<ce;Je++){var Ne=PD(oe[Je]);Ne!==0&&(we===void 0&&(we=Ne<0),we===Ne<0?(Te&&je.push(Te),Te=[oe[Je]]):Te.push(oe[Je]))}return Te&&je.push(Te),je}(D),p=0;p<D.length;p++)for(y=0;y<D[p].length;y++)W(D[p][y])}D.length===1?D=D[0]:N="Multi"+N;var se={type:"Feature",geometry:{type:N,coordinates:D},properties:this.properties};return"id"in this&&(se.id=this.id),se};var DD=Ew,Cw=Iw;function Iw(c,a){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(LD,this,a),this.length=this._features.length}function LD(c,a,h){c===15?a.version=h.readVarint():c===1?a.name=h.readString():c===5?a.extent=h.readVarint():c===2?a._features.push(h.pos):c===3?a._keys.push(h.readString()):c===4&&a._values.push(function(p){for(var y=null,S=p.readVarint()+p.pos;p.pos<S;){var T=p.readVarint()>>3;y=T===1?p.readString():T===2?p.readFloat():T===3?p.readDouble():T===4?p.readVarint64():T===5?p.readVarint():T===6?p.readSVarint():T===7?p.readBoolean():null}return y}(h))}Iw.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var a=this._pbf.readVarint()+this._pbf.pos;return new DD(this._pbf,a,this.extent,this._keys,this._values)};var OD=Cw;function RD(c,a,h){if(c===3){var p=new OD(h,h.readVarint()+h.pos);p.length&&(a[p.name]=p)}}kl.VectorTile=function(c,a){this.layers=c.readFields(RD,{},a)},kl.VectorTileFeature=Ew,kl.VectorTileLayer=Cw;const FD=kl.VectorTileFeature.types,Ry=Math.pow(2,13);function xf(c,a,h,p,y,S,T,A){c.emplaceBack(a,h,2*Math.floor(p*Ry)+T,y*Ry*2,S*Ry*2,Math.round(A))}class Fy{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(h=>h.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new De,this.centroidVertexArray=new Se,this.indexArray=new Lt,this.programConfigurations=new Oa(a.layers,a.zoom),this.segments=new Zt,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(a,h,p){this.features=[],this.hasPattern=Dy("fill-extrusion",this.layers,h);for(const{feature:y,id:S,index:T,sourceLayerIndex:A}of a){const D=this.layers[0]._featureFilter.needGeometry,N=Hc(y,D);if(!this.layers[0]._featureFilter.filter(new Fi(this.zoom),N,p))continue;const W={id:S,sourceLayerIndex:A,index:T,geometry:D?N.geometry:Ra(y),properties:y.properties,type:y.type,patterns:{}};this.hasPattern?this.features.push(Ly("fill-extrusion",this.layers,W,this.zoom,h)):this.addFeature(W,W.geometry,T,p,{}),h.featureIndex.insert(y,W.geometry,T,A,this.index,!0)}}addFeatures(a,h,p){for(const y of this.features){const{geometry:S}=y;this.addFeature(y,S,y.index,h,p)}}update(a,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,h,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,AD),this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,ID.members,!0),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(a,h,p,y,S){const T={x:0,y:0,vertexCount:0};for(const A of Py(h,500)){let D=0;for(const ce of A)D+=ce.length;let N=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ce of A){if(ce.length===0||zD(ce))continue;let Te=0;for(let we=0;we<ce.length;we++){const je=ce[we];if(we>=1){const Je=ce[we-1];if(!$D(je,Je)){N.vertexLength+4>Zt.MAX_VERTEX_ARRAY_LENGTH&&(N=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ne=je.sub(Je)._perp()._unit(),rt=Je.dist(je);Te+rt>32768&&(Te=0),xf(this.layoutVertexArray,je.x,je.y,Ne.x,Ne.y,0,0,Te),xf(this.layoutVertexArray,je.x,je.y,Ne.x,Ne.y,0,1,Te),T.x+=2*je.x,T.y+=2*je.y,T.vertexCount+=2,Te+=rt,xf(this.layoutVertexArray,Je.x,Je.y,Ne.x,Ne.y,0,0,Te),xf(this.layoutVertexArray,Je.x,Je.y,Ne.x,Ne.y,0,1,Te),T.x+=2*Je.x,T.y+=2*Je.y,T.vertexCount+=2;const ct=N.vertexLength;this.indexArray.emplaceBack(ct,ct+2,ct+1),this.indexArray.emplaceBack(ct+1,ct+2,ct+3),N.vertexLength+=4,N.primitiveLength+=2}}}}if(N.vertexLength+D>Zt.MAX_VERTEX_ARRAY_LENGTH&&(N=this.segments.prepareSegment(D,this.layoutVertexArray,this.indexArray)),FD[a.type]!=="Polygon")continue;const W=[],J=[],se=N.vertexLength;for(const ce of A)if(ce.length!==0){ce!==A[0]&&J.push(W.length/2);for(let Te=0;Te<ce.length;Te++){const we=ce[Te];xf(this.layoutVertexArray,we.x,we.y,0,0,1,1,0),T.x+=we.x,T.y+=we.y,T.vertexCount+=1,W.push(we.x),W.push(we.y)}}const oe=xw(W,J);for(let ce=0;ce<oe.length;ce+=3)this.indexArray.emplaceBack(se+oe[ce],se+oe[ce+2],se+oe[ce+1]);N.primitiveLength+=oe.length/3,N.vertexLength+=D}for(let A=0;A<T.vertexCount;A++)this.centroidVertexArray.emplaceBack(Math.floor(T.x/T.vertexCount),Math.floor(T.y/T.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,S,y)}}function $D(c,a){return c.x===a.x&&(c.x<0||c.x>$i)||c.y===a.y&&(c.y<0||c.y>$i)}function zD(c){return c.every(a=>a.x<0)||c.every(a=>a.x>$i)||c.every(a=>a.y<0)||c.every(a=>a.y>$i)}let Aw;dn("FillExtrusionBucket",Fy,{omit:["layers","features"]});var BD={get paint(){return Aw=Aw||new Jr({"fill-extrusion-opacity":new bn(ge["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Pn(ge["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new bn(ge["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new bn(ge["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Nc(ge["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Pn(ge["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Pn(ge["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new bn(ge["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};function wf(c,a){return c.x*a.x+c.y*a.y}function Mw(c,a){if(c.length===1){let h=0;const p=a[h++];let y;for(;!y||p.equals(y);)if(y=a[h++],!y)return 1/0;for(;h<a.length;h++){const S=a[h],T=c[0],A=y.sub(p),D=S.sub(p),N=T.sub(p),W=wf(A,A),J=wf(A,D),se=wf(D,D),oe=wf(N,A),ce=wf(N,D),Te=W*se-J*J,we=(se*oe-J*ce)/Te,je=(W*ce-J*oe)/Te,Je=p.z*(1-we-je)+y.z*we+S.z*je;if(isFinite(Je))return Je}return 1/0}{let h=1/0;for(const p of a)h=Math.min(h,p.z);return h}}const ND=ar([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:UD}=ND,jD=ar([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:VD}=jD,HD=kl.VectorTileFeature.types,GD=Math.cos(Math.PI/180*37.5),kw=Math.pow(2,14)/.5;class $y{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(h=>h.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new Ue,this.layoutVertexArray2=new st,this.indexArray=new Lt,this.programConfigurations=new Oa(a.layers,a.zoom),this.segments=new Zt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(a,h,p){this.hasPattern=Dy("line",this.layers,h);const y=this.layers[0].layout.get("line-sort-key"),S=!y.isConstant(),T=[];for(const{feature:A,id:D,index:N,sourceLayerIndex:W}of a){const J=this.layers[0]._featureFilter.needGeometry,se=Hc(A,J);if(!this.layers[0]._featureFilter.filter(new Fi(this.zoom),se,p))continue;const oe=S?y.evaluate(se,{},p):void 0,ce={id:D,properties:A.properties,type:A.type,sourceLayerIndex:W,index:N,geometry:J?se.geometry:Ra(A),patterns:{},sortKey:oe};T.push(ce)}S&&T.sort((A,D)=>A.sortKey-D.sortKey);for(const A of T){const{geometry:D,index:N,sourceLayerIndex:W}=A;if(this.hasPattern){const J=Ly("line",this.layers,A,this.zoom,h);this.patternFeatures.push(J)}else this.addFeature(A,D,N,p,{});h.featureIndex.insert(a[N].feature,D,N,W,this.index)}}update(a,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,h,this.stateDependentLayers,p)}addFeatures(a,h,p){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,h,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,VD)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,UD),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,h,p,y,S){const T=this.layers[0].layout,A=T.get("line-join").evaluate(a,{}),D=T.get("line-cap"),N=T.get("line-miter-limit"),W=T.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(const J of h)this.addLine(J,a,A,D,N,W);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,S,y)}addLine(a,h,p,y,S,T){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let je=0;je<a.length-1;je++)this.totalDistance+=a[je].dist(a[je+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const A=HD[h.type]==="Polygon";let D=a.length;for(;D>=2&&a[D-1].equals(a[D-2]);)D--;let N=0;for(;N<D-1&&a[N].equals(a[N+1]);)N++;if(D<(A?3:2))return;p==="bevel"&&(S=1.05);const W=this.overscaling<=16?122880/(512*this.overscaling):0,J=this.segments.prepareSegment(10*D,this.layoutVertexArray,this.indexArray);let se,oe,ce,Te,we;this.e1=this.e2=-1,A&&(se=a[D-2],we=a[N].sub(se)._unit()._perp());for(let je=N;je<D;je++){if(ce=je===D-1?A?a[N+1]:void 0:a[je+1],ce&&a[je].equals(ce))continue;we&&(Te=we),se&&(oe=se),se=a[je],we=ce?ce.sub(se)._unit()._perp():Te,Te=Te||we;let Je=Te.add(we);Je.x===0&&Je.y===0||Je._unit();const Ne=Te.x*we.x+Te.y*we.y,rt=Je.x*we.x+Je.y*we.y,ct=rt!==0?1/rt:1/0,Tt=2*Math.sqrt(2-2*rt),cn=rt<GD&&oe&&ce,gn=Te.x*we.y-Te.y*we.x>0;if(cn&&je>N){const Ht=se.dist(oe);if(Ht>2*W){const tn=se.sub(se.sub(oe)._mult(W/Ht)._round());this.updateDistance(oe,tn),this.addCurrentVertex(tn,Te,0,0,J),oe=tn}}const en=oe&&ce;let Kt=en?p:A?"butt":y;if(en&&Kt==="round"&&(ct<T?Kt="miter":ct<=2&&(Kt="fakeround")),Kt==="miter"&&ct>S&&(Kt="bevel"),Kt==="bevel"&&(ct>2&&(Kt="flipbevel"),ct<S&&(Kt="miter")),oe&&this.updateDistance(oe,se),Kt==="miter")Je._mult(ct),this.addCurrentVertex(se,Je,0,0,J);else if(Kt==="flipbevel"){if(ct>100)Je=we.mult(-1);else{const Ht=ct*Te.add(we).mag()/Te.sub(we).mag();Je._perp()._mult(Ht*(gn?-1:1))}this.addCurrentVertex(se,Je,0,0,J),this.addCurrentVertex(se,Je.mult(-1),0,0,J)}else if(Kt==="bevel"||Kt==="fakeround"){const Ht=-Math.sqrt(ct*ct-1),tn=gn?Ht:0,Xt=gn?0:Ht;if(oe&&this.addCurrentVertex(se,Te,tn,Xt,J),Kt==="fakeround"){const Ft=Math.round(180*Tt/Math.PI/20);for(let Tn=1;Tn<Ft;Tn++){let yn=Tn/Ft;if(yn!==.5){const Di=yn-.5;yn+=yn*Di*(yn-1)*((1.0904+Ne*(Ne*(3.55645-1.43519*Ne)-3.2452))*Di*Di+(.848013+Ne*(.215638*Ne-1.06021)))}const Zn=we.sub(Te)._mult(yn)._add(Te)._unit()._mult(gn?-1:1);this.addHalfVertex(se,Zn.x,Zn.y,!1,gn,0,J)}}ce&&this.addCurrentVertex(se,we,-tn,-Xt,J)}else if(Kt==="butt")this.addCurrentVertex(se,Je,0,0,J);else if(Kt==="square"){const Ht=oe?1:-1;this.addCurrentVertex(se,Je,Ht,Ht,J)}else Kt==="round"&&(oe&&(this.addCurrentVertex(se,Te,0,0,J),this.addCurrentVertex(se,Te,1,1,J,!0)),ce&&(this.addCurrentVertex(se,we,-1,-1,J,!0),this.addCurrentVertex(se,we,0,0,J)));if(cn&&je<D-1){const Ht=se.dist(ce);if(Ht>2*W){const tn=se.add(ce.sub(se)._mult(W/Ht)._round());this.updateDistance(se,tn),this.addCurrentVertex(tn,we,0,0,J),se=tn}}}}addCurrentVertex(a,h,p,y,S,T=!1){const A=h.y*y-h.x,D=-h.y-h.x*y;this.addHalfVertex(a,h.x+h.y*p,h.y-h.x*p,T,!1,p,S),this.addHalfVertex(a,A,D,T,!0,-y,S),this.distance>kw/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(a,h,p,y,S,T))}addHalfVertex({x:a,y:h},p,y,S,T,A,D){const N=.5*(this.lineClips?this.scaledDistance*(kw-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((a<<1)+(S?1:0),(h<<1)+(T?1:0),Math.round(63*p)+128,Math.round(63*y)+128,1+(A===0?0:A<0?-1:1)|(63&N)<<2,N>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const W=D.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,W),D.primitiveLength++),T?this.e2=W:this.e1=W}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(a,h){this.distance+=a.dist(h),this.updateScaledDistance()}}let Pw,Dw;dn("LineBucket",$y,{omit:["layers","patternFeatures"]});var Lw={get paint(){return Dw=Dw||new Jr({"line-opacity":new Pn(ge.paint_line["line-opacity"]),"line-color":new Pn(ge.paint_line["line-color"]),"line-translate":new bn(ge.paint_line["line-translate"]),"line-translate-anchor":new bn(ge.paint_line["line-translate-anchor"]),"line-width":new Pn(ge.paint_line["line-width"]),"line-gap-width":new Pn(ge.paint_line["line-gap-width"]),"line-offset":new Pn(ge.paint_line["line-offset"]),"line-blur":new Pn(ge.paint_line["line-blur"]),"line-dasharray":new of(ge.paint_line["line-dasharray"]),"line-pattern":new Nc(ge.paint_line["line-pattern"]),"line-gradient":new lf(ge.paint_line["line-gradient"])})},get layout(){return Pw=Pw||new Jr({"line-cap":new bn(ge.layout_line["line-cap"]),"line-join":new Pn(ge.layout_line["line-join"]),"line-miter-limit":new bn(ge.layout_line["line-miter-limit"]),"line-round-limit":new bn(ge.layout_line["line-round-limit"]),"line-sort-key":new Pn(ge.layout_line["line-sort-key"])})}};class WD extends Pn{possiblyEvaluate(a,h){return h=new Fi(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(a,h)}evaluate(a,h,p,y){return h=ee({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(a,h,p,y)}}let ug;function Ow(c,a){return a>0?a+2*c:c}const qD=ar([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ZD=ar([{name:"a_projected_pos",components:3,type:"Float32"}],4);ar([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const KD=ar([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);ar([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Rw=ar([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),XD=ar([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function YD(c,a,h){return c.sections.forEach(p=>{p.text=function(y,S,T){const A=S.layout.get("text-transform").evaluate(T,{});return A==="uppercase"?y=y.toLocaleUpperCase():A==="lowercase"&&(y=y.toLocaleLowerCase()),Ms.applyArabicShaping&&(y=Ms.applyArabicShaping(y)),y}(p.text,a,h)}),c}ar([{name:"triangle",components:3,type:"Uint16"}]),ar([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ar([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ar([{type:"Float32",name:"offsetX"}]),ar([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Sf={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Cr=24,Fw=Ti,$w=function(c,a,h,p,y){var S,T,A=8*y-p-1,D=(1<<A)-1,N=D>>1,W=-7,J=h?y-1:0,se=h?-1:1,oe=c[a+J];for(J+=se,S=oe&(1<<-W)-1,oe>>=-W,W+=A;W>0;S=256*S+c[a+J],J+=se,W-=8);for(T=S&(1<<-W)-1,S>>=-W,W+=p;W>0;T=256*T+c[a+J],J+=se,W-=8);if(S===0)S=1-N;else{if(S===D)return T?NaN:1/0*(oe?-1:1);T+=Math.pow(2,p),S-=N}return(oe?-1:1)*T*Math.pow(2,S-p)},zw=function(c,a,h,p,y,S){var T,A,D,N=8*S-y-1,W=(1<<N)-1,J=W>>1,se=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,oe=p?0:S-1,ce=p?1:-1,Te=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(A=isNaN(a)?1:0,T=W):(T=Math.floor(Math.log(a)/Math.LN2),a*(D=Math.pow(2,-T))<1&&(T--,D*=2),(a+=T+J>=1?se/D:se*Math.pow(2,1-J))*D>=2&&(T++,D/=2),T+J>=W?(A=0,T=W):T+J>=1?(A=(a*D-1)*Math.pow(2,y),T+=J):(A=a*Math.pow(2,J-1)*Math.pow(2,y),T=0));y>=8;c[h+oe]=255&A,oe+=ce,A/=256,y-=8);for(T=T<<y|A,N+=y;N>0;c[h+oe]=255&T,oe+=ce,T/=256,N-=8);c[h+oe-ce]|=128*Te};function Ti(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}Ti.Varint=0,Ti.Fixed64=1,Ti.Bytes=2,Ti.Fixed32=5;var zy=4294967296,Bw=1/zy,Nw=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function qo(c){return c.type===Ti.Bytes?c.readVarint()+c.pos:c.pos+1}function _d(c,a,h){return h?4294967296*a+(c>>>0):4294967296*(a>>>0)+(c>>>0)}function Uw(c,a,h){var p=a<=16383?1:a<=2097151?2:a<=268435455?3:Math.floor(Math.log(a)/(7*Math.LN2));h.realloc(p);for(var y=h.pos-1;y>=c;y--)h.buf[y+p]=h.buf[y]}function JD(c,a){for(var h=0;h<c.length;h++)a.writeVarint(c[h])}function QD(c,a){for(var h=0;h<c.length;h++)a.writeSVarint(c[h])}function eL(c,a){for(var h=0;h<c.length;h++)a.writeFloat(c[h])}function tL(c,a){for(var h=0;h<c.length;h++)a.writeDouble(c[h])}function nL(c,a){for(var h=0;h<c.length;h++)a.writeBoolean(c[h])}function iL(c,a){for(var h=0;h<c.length;h++)a.writeFixed32(c[h])}function rL(c,a){for(var h=0;h<c.length;h++)a.writeSFixed32(c[h])}function sL(c,a){for(var h=0;h<c.length;h++)a.writeFixed64(c[h])}function aL(c,a){for(var h=0;h<c.length;h++)a.writeSFixed64(c[h])}function dg(c,a){return(c[a]|c[a+1]<<8|c[a+2]<<16)+16777216*c[a+3]}function yd(c,a,h){c[h]=a,c[h+1]=a>>>8,c[h+2]=a>>>16,c[h+3]=a>>>24}function jw(c,a){return(c[a]|c[a+1]<<8|c[a+2]<<16)+(c[a+3]<<24)}Ti.prototype={destroy:function(){this.buf=null},readFields:function(c,a,h){for(h=h||this.length;this.pos<h;){var p=this.readVarint(),y=p>>3,S=this.pos;this.type=7&p,c(y,a,this),this.pos===S&&this.skip(p)}return a},readMessage:function(c,a){return this.readFields(c,a,this.readVarint()+this.pos)},readFixed32:function(){var c=dg(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=jw(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=dg(this.buf,this.pos)+dg(this.buf,this.pos+4)*zy;return this.pos+=8,c},readSFixed64:function(){var c=dg(this.buf,this.pos)+jw(this.buf,this.pos+4)*zy;return this.pos+=8,c},readFloat:function(){var c=$w(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=$w(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var a,h,p=this.buf;return a=127&(h=p[this.pos++]),h<128?a:(a|=(127&(h=p[this.pos++]))<<7,h<128?a:(a|=(127&(h=p[this.pos++]))<<14,h<128?a:(a|=(127&(h=p[this.pos++]))<<21,h<128?a:function(y,S,T){var A,D,N=T.buf;if(A=(112&(D=N[T.pos++]))>>4,D<128||(A|=(127&(D=N[T.pos++]))<<3,D<128)||(A|=(127&(D=N[T.pos++]))<<10,D<128)||(A|=(127&(D=N[T.pos++]))<<17,D<128)||(A|=(127&(D=N[T.pos++]))<<24,D<128)||(A|=(1&(D=N[T.pos++]))<<31,D<128))return _d(y,A,S);throw new Error("Expected varint not more than 10 bytes")}(a|=(15&(h=p[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,a=this.pos;return this.pos=c,c-a>=12&&Nw?function(h,p,y){return Nw.decode(h.subarray(p,y))}(this.buf,a,c):function(h,p,y){for(var S="",T=p;T<y;){var A,D,N,W=h[T],J=null,se=W>239?4:W>223?3:W>191?2:1;if(T+se>y)break;se===1?W<128&&(J=W):se===2?(192&(A=h[T+1]))==128&&(J=(31&W)<<6|63&A)<=127&&(J=null):se===3?(D=h[T+2],(192&(A=h[T+1]))==128&&(192&D)==128&&((J=(15&W)<<12|(63&A)<<6|63&D)<=2047||J>=55296&&J<=57343)&&(J=null)):se===4&&(D=h[T+2],N=h[T+3],(192&(A=h[T+1]))==128&&(192&D)==128&&(192&N)==128&&((J=(15&W)<<18|(63&A)<<12|(63&D)<<6|63&N)<=65535||J>=1114112)&&(J=null)),J===null?(J=65533,se=1):J>65535&&(J-=65536,S+=String.fromCharCode(J>>>10&1023|55296),J=56320|1023&J),S+=String.fromCharCode(J),T+=se}return S}(this.buf,a,c)},readBytes:function(){var c=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,c);return this.pos=c,a},readPackedVarint:function(c,a){if(this.type!==Ti.Bytes)return c.push(this.readVarint(a));var h=qo(this);for(c=c||[];this.pos<h;)c.push(this.readVarint(a));return c},readPackedSVarint:function(c){if(this.type!==Ti.Bytes)return c.push(this.readSVarint());var a=qo(this);for(c=c||[];this.pos<a;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==Ti.Bytes)return c.push(this.readBoolean());var a=qo(this);for(c=c||[];this.pos<a;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==Ti.Bytes)return c.push(this.readFloat());var a=qo(this);for(c=c||[];this.pos<a;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==Ti.Bytes)return c.push(this.readDouble());var a=qo(this);for(c=c||[];this.pos<a;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==Ti.Bytes)return c.push(this.readFixed32());var a=qo(this);for(c=c||[];this.pos<a;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==Ti.Bytes)return c.push(this.readSFixed32());var a=qo(this);for(c=c||[];this.pos<a;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==Ti.Bytes)return c.push(this.readFixed64());var a=qo(this);for(c=c||[];this.pos<a;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==Ti.Bytes)return c.push(this.readSFixed64());var a=qo(this);for(c=c||[];this.pos<a;)c.push(this.readSFixed64());return c},skip:function(c){var a=7&c;if(a===Ti.Varint)for(;this.buf[this.pos++]>127;);else if(a===Ti.Bytes)this.pos=this.readVarint()+this.pos;else if(a===Ti.Fixed32)this.pos+=4;else{if(a!==Ti.Fixed64)throw new Error("Unimplemented type: "+a);this.pos+=8}},writeTag:function(c,a){this.writeVarint(c<<3|a)},realloc:function(c){for(var a=this.length||16;a<this.pos+c;)a*=2;if(a!==this.length){var h=new Uint8Array(a);h.set(this.buf),this.buf=h,this.length=a}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),yd(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),yd(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),yd(this.buf,-1&c,this.pos),yd(this.buf,Math.floor(c*Bw),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),yd(this.buf,-1&c,this.pos),yd(this.buf,Math.floor(c*Bw),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?function(a,h){var p,y;if(a>=0?(p=a%4294967296|0,y=a/4294967296|0):(y=~(-a/4294967296),4294967295^(p=~(-a%4294967296))?p=p+1|0:(p=0,y=y+1|0)),a>=18446744073709552e3||a<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),function(S,T,A){A.buf[A.pos++]=127&S|128,S>>>=7,A.buf[A.pos++]=127&S|128,S>>>=7,A.buf[A.pos++]=127&S|128,S>>>=7,A.buf[A.pos++]=127&S|128,A.buf[A.pos]=127&(S>>>=7)}(p,0,h),function(S,T){var A=(7&S)<<4;T.buf[T.pos++]|=A|((S>>>=3)?128:0),S&&(T.buf[T.pos++]=127&S|((S>>>=7)?128:0),S&&(T.buf[T.pos++]=127&S|((S>>>=7)?128:0),S&&(T.buf[T.pos++]=127&S|((S>>>=7)?128:0),S&&(T.buf[T.pos++]=127&S|((S>>>=7)?128:0),S&&(T.buf[T.pos++]=127&S)))))}(y,h)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var a=this.pos;this.pos=function(p,y,S){for(var T,A,D=0;D<y.length;D++){if((T=y.charCodeAt(D))>55295&&T<57344){if(!A){T>56319||D+1===y.length?(p[S++]=239,p[S++]=191,p[S++]=189):A=T;continue}if(T<56320){p[S++]=239,p[S++]=191,p[S++]=189,A=T;continue}T=A-55296<<10|T-56320|65536,A=null}else A&&(p[S++]=239,p[S++]=191,p[S++]=189,A=null);T<128?p[S++]=T:(T<2048?p[S++]=T>>6|192:(T<65536?p[S++]=T>>12|224:(p[S++]=T>>18|240,p[S++]=T>>12&63|128),p[S++]=T>>6&63|128),p[S++]=63&T|128)}return S}(this.buf,c,this.pos);var h=this.pos-a;h>=128&&Uw(a,h,this),this.pos=a-1,this.writeVarint(h),this.pos+=h},writeFloat:function(c){this.realloc(4),zw(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),zw(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var a=c.length;this.writeVarint(a),this.realloc(a);for(var h=0;h<a;h++)this.buf[this.pos++]=c[h]},writeRawMessage:function(c,a){this.pos++;var h=this.pos;c(a,this);var p=this.pos-h;p>=128&&Uw(h,p,this),this.pos=h-1,this.writeVarint(p),this.pos+=p},writeMessage:function(c,a,h){this.writeTag(c,Ti.Bytes),this.writeRawMessage(a,h)},writePackedVarint:function(c,a){a.length&&this.writeMessage(c,JD,a)},writePackedSVarint:function(c,a){a.length&&this.writeMessage(c,QD,a)},writePackedBoolean:function(c,a){a.length&&this.writeMessage(c,nL,a)},writePackedFloat:function(c,a){a.length&&this.writeMessage(c,eL,a)},writePackedDouble:function(c,a){a.length&&this.writeMessage(c,tL,a)},writePackedFixed32:function(c,a){a.length&&this.writeMessage(c,iL,a)},writePackedSFixed32:function(c,a){a.length&&this.writeMessage(c,rL,a)},writePackedFixed64:function(c,a){a.length&&this.writeMessage(c,sL,a)},writePackedSFixed64:function(c,a){a.length&&this.writeMessage(c,aL,a)},writeBytesField:function(c,a){this.writeTag(c,Ti.Bytes),this.writeBytes(a)},writeFixed32Field:function(c,a){this.writeTag(c,Ti.Fixed32),this.writeFixed32(a)},writeSFixed32Field:function(c,a){this.writeTag(c,Ti.Fixed32),this.writeSFixed32(a)},writeFixed64Field:function(c,a){this.writeTag(c,Ti.Fixed64),this.writeFixed64(a)},writeSFixed64Field:function(c,a){this.writeTag(c,Ti.Fixed64),this.writeSFixed64(a)},writeVarintField:function(c,a){this.writeTag(c,Ti.Varint),this.writeVarint(a)},writeSVarintField:function(c,a){this.writeTag(c,Ti.Varint),this.writeSVarint(a)},writeStringField:function(c,a){this.writeTag(c,Ti.Bytes),this.writeString(a)},writeFloatField:function(c,a){this.writeTag(c,Ti.Fixed32),this.writeFloat(a)},writeDoubleField:function(c,a){this.writeTag(c,Ti.Fixed64),this.writeDouble(a)},writeBooleanField:function(c,a){this.writeVarintField(c,!!a)}};var Pl,By=m(Fw);function oL(c,a,h){c===1&&h.readMessage(lL,a)}function lL(c,a,h){if(c===3){const{id:p,bitmap:y,width:S,height:T,left:A,top:D,advance:N}=h.readMessage(cL,{});a.push({id:p,bitmap:new gf({width:S+6,height:T+6},y),metrics:{width:S,height:T,left:A,top:D,advance:N}})}}function cL(c,a,h){c===1?a.id=h.readVarint():c===2?a.bitmap=h.readBytes():c===3?a.width=h.readVarint():c===4?a.height=h.readVarint():c===5?a.left=h.readSVarint():c===6?a.top=h.readSVarint():c===7&&(a.advance=h.readVarint())}function Vw(c){let a=0,h=0;for(const T of c)a+=T.w*T.h,h=Math.max(h,T.w);c.sort((T,A)=>A.h-T.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),h),h:1/0}];let y=0,S=0;for(const T of c)for(let A=p.length-1;A>=0;A--){const D=p[A];if(!(T.w>D.w||T.h>D.h)){if(T.x=D.x,T.y=D.y,S=Math.max(S,T.y+T.h),y=Math.max(y,T.x+T.w),T.w===D.w&&T.h===D.h){const N=p.pop();A<p.length&&(p[A]=N)}else T.h===D.h?(D.x+=T.w,D.w-=T.w):T.w===D.w?(D.y+=T.h,D.h-=T.h):(p.push({x:D.x+T.w,y:D.y,w:D.w-T.w,h:T.h}),D.y+=T.h,D.h-=T.h);break}}return{w:y,h:S,fill:a/(y*S)||0}}class Ny{constructor(a,{pixelRatio:h,version:p,stretchX:y,stretchY:S,content:T}){this.paddedRect=a,this.pixelRatio=h,this.stretchX=y,this.stretchY=S,this.content=T,this.version=p}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Hw{constructor(a,h){const p={},y={};this.haveRenderCallbacks=[];const S=[];this.addImages(a,p,S),this.addImages(h,y,S);const{w:T,h:A}=Vw(S),D=new js({width:T||1,height:A||1});for(const N in a){const W=a[N],J=p[N].paddedRect;js.copy(W.data,D,{x:0,y:0},{x:J.x+1,y:J.y+1},W.data)}for(const N in h){const W=h[N],J=y[N].paddedRect,se=J.x+1,oe=J.y+1,ce=W.data.width,Te=W.data.height;js.copy(W.data,D,{x:0,y:0},{x:se,y:oe},W.data),js.copy(W.data,D,{x:0,y:Te-1},{x:se,y:oe-1},{width:ce,height:1}),js.copy(W.data,D,{x:0,y:0},{x:se,y:oe+Te},{width:ce,height:1}),js.copy(W.data,D,{x:ce-1,y:0},{x:se-1,y:oe},{width:1,height:Te}),js.copy(W.data,D,{x:0,y:0},{x:se+ce,y:oe},{width:1,height:Te})}this.image=D,this.iconPositions=p,this.patternPositions=y}addImages(a,h,p){for(const y in a){const S=a[y],T={x:0,y:0,w:S.data.width+2,h:S.data.height+2};p.push(T),h[y]=new Ny(T,S),S.hasRenderCallback&&this.haveRenderCallbacks.push(y)}}patchUpdatedImages(a,h){a.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in a.updatedImages)this.patchUpdatedImage(this.iconPositions[p],a.getImage(p),h),this.patchUpdatedImage(this.patternPositions[p],a.getImage(p),h)}patchUpdatedImage(a,h,p){if(!a||!h||a.version===h.version)return;a.version=h.version;const[y,S]=a.tl;p.update(h.data,void 0,{x:y,y:S})}}dn("ImagePosition",Ny),dn("ImageAtlas",Hw),l.WritingMode=void 0,(Pl=l.WritingMode||(l.WritingMode={}))[Pl.none=0]="none",Pl[Pl.horizontal=1]="horizontal",Pl[Pl.vertical=2]="vertical",Pl[Pl.horizontalOnly=3]="horizontalOnly";const hg=-17;class Tf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(a,h){const p=new Tf;return p.scale=a||1,p.fontStack=h,p}static forImage(a){const h=new Tf;return h.imageName=a,h}}class bd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,h){const p=new bd;for(let y=0;y<a.sections.length;y++){const S=a.sections[y];S.image?p.addImageSection(S):p.addTextSection(S,h)}return p}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSectionIndex(a){return this.sectionIndex[a]}getCharCode(a){return this.text.charCodeAt(a)}verticalizePunctuation(){this.text=function(a){let h="";for(let p=0;p<a.length;p++){const y=a.charCodeAt(p+1)||null,S=a.charCodeAt(p-1)||null;h+=y&&Zm(y)&&!Sf[a[p+1]]||S&&Zm(S)&&!Sf[a[p-1]]||!Sf[a[p]]?a[p]:Sf[a[p]]}return h}(this.text)}trim(){let a=0;for(let p=0;p<this.text.length&&pg[this.text.charCodeAt(p)];p++)a++;let h=this.text.length;for(let p=this.text.length-1;p>=0&&p>=a&&pg[this.text.charCodeAt(p)];p--)h--;this.text=this.text.substring(a,h),this.sectionIndex=this.sectionIndex.slice(a,h)}substring(a,h){const p=new bd;return p.text=this.text.substring(a,h),p.sectionIndex=this.sectionIndex.slice(a,h),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((a,h)=>Math.max(a,this.sections[h].scale),0)}addTextSection(a,h){this.text+=a.text,this.sections.push(Tf.forText(a.scale,a.fontStack||h));const p=this.sections.length-1;for(let y=0;y<a.text.length;++y)this.sectionIndex.push(p)}addImageSection(a){const h=a.image?a.image.name:"";if(h.length===0)return void j("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push(Tf.forImage(h)),this.sectionIndex.push(this.sections.length-1)):j("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function fg(c,a,h,p,y,S,T,A,D,N,W,J,se,oe,ce,Te){const we=bd.fromFeature(c,y);let je;J===l.WritingMode.vertical&&we.verticalizePunctuation();const{processBidirectionalText:Je,processStyledBidirectionalText:Ne}=Ms;if(Je&&we.sections.length===1){je=[];const Tt=Je(we.toString(),Uy(we,N,S,a,p,oe,ce));for(const cn of Tt){const gn=new bd;gn.text=cn,gn.sections=we.sections;for(let en=0;en<cn.length;en++)gn.sectionIndex.push(0);je.push(gn)}}else if(Ne){je=[];const Tt=Ne(we.text,we.sectionIndex,Uy(we,N,S,a,p,oe,ce));for(const cn of Tt){const gn=new bd;gn.text=cn[0],gn.sectionIndex=cn[1],gn.sections=we.sections,je.push(gn)}}else je=function(Tt,cn){const gn=[],en=Tt.text;let Kt=0;for(const Ht of cn)gn.push(Tt.substring(Kt,Ht)),Kt=Ht;return Kt<en.length&&gn.push(Tt.substring(Kt,en.length)),gn}(we,Uy(we,N,S,a,p,oe,ce));const rt=[],ct={positionedLines:rt,text:we.toString(),top:W[1],bottom:W[1],left:W[0],right:W[0],writingMode:J,iconsInText:!1,verticalizable:!1};return function(Tt,cn,gn,en,Kt,Ht,tn,Xt,Ft,Tn,yn,Zn){let Di=0,zi=hg,mr=0,Hs=0;const Dr=Xt==="right"?1:Xt==="left"?0:.5;let or=0;for(const lr of Kt){lr.trim();const Or=lr.getMaxScale(),Hr=(Or-1)*Cr,es={positionedGlyphs:[],lineOffset:0};Tt.positionedLines[or]=es;const ds=es.positionedGlyphs;let hs=0;if(!lr.length()){zi+=Ht,++or;continue}for(let Rr=0;Rr<lr.length();Rr++){const Kn=lr.getSection(Rr),ks=lr.getSectionIndex(Rr),Fr=lr.getCharCode(Rr);let Gr=0,fa=null,Fa=null,$a=null,Ko=Cr;const pa=!(Ft===l.WritingMode.horizontal||!yn&&!Yu(Fr)||yn&&(pg[Fr]||(wr=Fr,Jt.Arabic(wr)||Jt["Arabic Supplement"](wr)||Jt["Arabic Extended-A"](wr)||Jt["Arabic Presentation Forms-A"](wr)||Jt["Arabic Presentation Forms-B"](wr))));if(Kn.imageName){const Gs=en[Kn.imageName];if(!Gs)continue;$a=Kn.imageName,Tt.iconsInText=Tt.iconsInText||!0,Fa=Gs.paddedRect;const fs=Gs.displaySize;Kn.scale=Kn.scale*Cr/Zn,fa={width:fs[0],height:fs[1],left:1,top:-3,advance:pa?fs[1]:fs[0]},Gr=Hr+(Cr-fs[1]*Kn.scale),Ko=fa.advance;const Xo=pa?fs[0]*Kn.scale-Cr*Or:fs[1]*Kn.scale-Cr*Or;Xo>0&&Xo>hs&&(hs=Xo)}else{const Gs=gn[Kn.fontStack],fs=Gs&&Gs[Fr];if(fs&&fs.rect)Fa=fs.rect,fa=fs.metrics;else{const Xo=cn[Kn.fontStack],Af=Xo&&Xo[Fr];if(!Af)continue;fa=Af.metrics}Gr=(Or-Kn.scale)*Cr}pa?(Tt.verticalizable=!0,ds.push({glyph:Fr,imageName:$a,x:Di,y:zi+Gr,vertical:pa,scale:Kn.scale,fontStack:Kn.fontStack,sectionIndex:ks,metrics:fa,rect:Fa}),Di+=Ko*Kn.scale+Tn):(ds.push({glyph:Fr,imageName:$a,x:Di,y:zi+Gr,vertical:pa,scale:Kn.scale,fontStack:Kn.fontStack,sectionIndex:ks,metrics:fa,rect:Fa}),Di+=fa.advance*Kn.scale+Tn)}ds.length!==0&&(mr=Math.max(Di-Tn,mr),hL(ds,0,ds.length-1,Dr,hs)),Di=0;const Xi=Ht*Or+hs;es.lineOffset=Math.max(hs,Hr),zi+=Xi,Hs=Math.max(Xi,Hs),++or}var wr;const Lr=zi-hg,{horizontalAlign:Vr,verticalAlign:us}=jy(tn);(function(lr,Or,Hr,es,ds,hs,Xi,Rr,Kn){const ks=(Or-Hr)*ds;let Fr=0;Fr=hs!==Xi?-Rr*es-hg:(-es*Kn+.5)*Xi;for(const Gr of lr)for(const fa of Gr.positionedGlyphs)fa.x+=ks,fa.y+=Fr})(Tt.positionedLines,Dr,Vr,us,mr,Hs,Ht,Lr,Kt.length),Tt.top+=-us*Lr,Tt.bottom=Tt.top+Lr,Tt.left+=-Vr*mr,Tt.right=Tt.left+mr}(ct,a,h,p,je,T,A,D,J,N,se,Te),!function(Tt){for(const cn of Tt)if(cn.positionedGlyphs.length!==0)return!1;return!0}(rt)&&ct}const pg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},uL={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Gw(c,a,h,p,y,S){if(a.imageName){const T=p[a.imageName];return T?T.displaySize[0]*a.scale*Cr/S+y:0}{const T=h[a.fontStack],A=T&&T[c];return A?A.metrics.advance*a.scale+y:0}}function Ww(c,a,h,p){const y=Math.pow(c-a,2);return p?c<a?y/2:2*y:y+Math.abs(h)*h}function dL(c,a,h){let p=0;return c===10&&(p-=1e4),h&&(p+=150),c!==40&&c!==65288||(p+=50),a!==41&&a!==65289||(p+=50),p}function qw(c,a,h,p,y,S){let T=null,A=Ww(a,h,y,S);for(const D of p){const N=Ww(a-D.x,h,y,S)+D.badness;N<=A&&(T=D,A=N)}return{index:c,x:a,priorBreak:T,badness:A}}function Zw(c){return c?Zw(c.priorBreak).concat(c.index):[]}function Uy(c,a,h,p,y,S,T){if(S!=="point")return[];if(!c)return[];const A=[],D=function(se,oe,ce,Te,we,je){let Je=0;for(let Ne=0;Ne<se.length();Ne++){const rt=se.getSection(Ne);Je+=Gw(se.getCharCode(Ne),rt,Te,we,oe,je)}return Je/Math.max(1,Math.ceil(Je/ce))}(c,a,h,p,y,T),N=c.text.indexOf("")>=0;let W=0;for(let se=0;se<c.length();se++){const oe=c.getSection(se),ce=c.getCharCode(se);if(pg[ce]||(W+=Gw(ce,oe,p,y,a,T)),se<c.length()-1){const Te=!((J=ce)<11904||!(Jt["Bopomofo Extended"](J)||Jt.Bopomofo(J)||Jt["CJK Compatibility Forms"](J)||Jt["CJK Compatibility Ideographs"](J)||Jt["CJK Compatibility"](J)||Jt["CJK Radicals Supplement"](J)||Jt["CJK Strokes"](J)||Jt["CJK Symbols and Punctuation"](J)||Jt["CJK Unified Ideographs Extension A"](J)||Jt["CJK Unified Ideographs"](J)||Jt["Enclosed CJK Letters and Months"](J)||Jt["Halfwidth and Fullwidth Forms"](J)||Jt.Hiragana(J)||Jt["Ideographic Description Characters"](J)||Jt["Kangxi Radicals"](J)||Jt["Katakana Phonetic Extensions"](J)||Jt.Katakana(J)||Jt["Vertical Forms"](J)||Jt["Yi Radicals"](J)||Jt["Yi Syllables"](J)));(uL[ce]||Te||oe.imageName)&&A.push(qw(se+1,W,D,A,dL(ce,c.getCharCode(se+1),Te&&N),!1))}}var J;return Zw(qw(c.length(),W,D,A,0,!0))}function jy(c){let a=.5,h=.5;switch(c){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:a,verticalAlign:h}}function hL(c,a,h,p,y){if(!p&&!y)return;const S=c[h],T=(c[h].x+S.metrics.advance*S.scale)*p;for(let A=a;A<=h;A++)c[A].x-=T,c[A].y+=y}function fL(c,a,h){const{horizontalAlign:p,verticalAlign:y}=jy(h),S=a[0]-c.displaySize[0]*p,T=a[1]-c.displaySize[1]*y;return{image:c,top:T,bottom:T+c.displaySize[1],left:S,right:S+c.displaySize[0]}}function Kw(c,a,h,p,y,S){const T=c.image;let A;if(T.content){const we=T.content,je=T.pixelRatio||1;A=[we[0]/je,we[1]/je,T.displaySize[0]-we[2]/je,T.displaySize[1]-we[3]/je]}const D=a.left*S,N=a.right*S;let W,J,se,oe;h==="width"||h==="both"?(oe=y[0]+D-p[3],J=y[0]+N+p[1]):(oe=y[0]+(D+N-T.displaySize[0])/2,J=oe+T.displaySize[0]);const ce=a.top*S,Te=a.bottom*S;return h==="height"||h==="both"?(W=y[1]+ce-p[0],se=y[1]+Te+p[2]):(W=y[1]+(ce+Te-T.displaySize[1])/2,se=W+T.displaySize[1]),{image:T,top:W,right:J,bottom:se,left:oe,collisionPadding:A}}const Zo=128,Dl=32640;function Xw(c,a){const{expression:h}=a;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new Fi(c+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:p,interpolationType:y}=h;let S=0;for(;S<p.length&&p[S]<=c;)S++;S=Math.max(0,S-1);let T=S;for(;T<p.length&&p[T]<c+1;)T++;T=Math.min(p.length-1,T);const A=p[S],D=p[T];return h.kind==="composite"?{kind:"composite",minZoom:A,maxZoom:D,interpolationType:y}:{kind:"camera",minZoom:A,maxZoom:D,minSize:h.evaluate(new Fi(A)),maxSize:h.evaluate(new Fi(D)),interpolationType:y}}}function Vy(c,a,h){let p="never";const y=c.get(a);return y?p=y:c.get(h)&&(p="always"),p}const pL=kl.VectorTileFeature.types,mL=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function mg(c,a,h,p,y,S,T,A,D,N,W,J,se){const oe=A?Math.min(Dl,Math.round(A[0])):0,ce=A?Math.min(Dl,Math.round(A[1])):0;c.emplaceBack(a,h,Math.round(32*p),Math.round(32*y),S,T,(oe<<1)+(D?1:0),ce,16*N,16*W,256*J,256*se)}function Hy(c,a,h){c.emplaceBack(a.x,a.y,h),c.emplaceBack(a.x,a.y,h),c.emplaceBack(a.x,a.y,h),c.emplaceBack(a.x,a.y,h)}function gL(c){for(const a of c.sections)if(Km(a.text))return!0;return!1}class Gy{constructor(a){this.layoutVertexArray=new nt,this.indexArray=new Lt,this.programConfigurations=a,this.segments=new Zt,this.dynamicLayoutVertexArray=new _t,this.opacityVertexArray=new At,this.hasVisibleVertices=!1,this.placedSymbolArray=new P}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(a,h,p,y){this.isEmpty()||(p&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,qD.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,ZD.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,mL,!0),this.opacityVertexBuffer.itemSize=1),(p||y)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}dn("SymbolBuffers",Gy);class Wy{constructor(a,h,p){this.layoutVertexArray=new a,this.layoutAttributes=h,this.indexArray=new p,this.segments=new Zt,this.collisionVertexArray=new Bt}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,KD.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}dn("CollisionBuffers",Wy);class xd{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(T=>T.id),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ty([]),this.placementViewportMatrix=Ty([]);const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Xw(this.zoom,h["text-size"]),this.iconSizeData=Xw(this.zoom,h["icon-size"]);const p=this.layers[0].layout,y=p.get("symbol-sort-key"),S=p.get("symbol-z-order");this.canOverlap=Vy(p,"text-overlap","text-allow-overlap")!=="never"||Vy(p,"icon-overlap","icon-allow-overlap")!=="never"||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey=S!=="viewport-y"&&!y.isConstant(),this.sortFeaturesByY=(S==="viewport-y"||S==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,p.get("symbol-placement")==="point"&&(this.writingModes=p.get("text-writing-mode").map(T=>l.WritingMode[T])),this.stateDependentLayerIds=this.layers.filter(T=>T.isStateDependent()).map(T=>T.id),this.sourceID=a.sourceID}createArrays(){this.text=new Gy(new Oa(this.layers,this.zoom,a=>/^text/.test(a))),this.icon=new Gy(new Oa(this.layers,this.zoom,a=>/^icon/.test(a))),this.glyphOffsetArray=new B,this.lineVertexArray=new K,this.symbolInstances=new O}calculateGlyphDependencies(a,h,p,y,S){for(let T=0;T<a.length;T++)if(h[a.charCodeAt(T)]=!0,(p||y)&&S){const A=Sf[a.charAt(T)];A&&(h[A.charCodeAt(0)]=!0)}}populate(a,h,p){const y=this.layers[0],S=y.layout,T=S.get("text-font"),A=S.get("text-field"),D=S.get("icon-image"),N=(A.value.kind!=="constant"||A.value.value instanceof Yn&&!A.value.value.isEmpty()||A.value.value.toString().length>0)&&(T.value.kind!=="constant"||T.value.value.length>0),W=D.value.kind!=="constant"||!!D.value.value||Object.keys(D.parameters).length>0,J=S.get("symbol-sort-key");if(this.features=[],!N&&!W)return;const se=h.iconDependencies,oe=h.glyphDependencies,ce=h.availableImages,Te=new Fi(this.zoom);for(const{feature:we,id:je,index:Je,sourceLayerIndex:Ne}of a){const rt=y._featureFilter.needGeometry,ct=Hc(we,rt);if(!y._featureFilter.filter(Te,ct,p))continue;let Tt,cn;if(rt||(ct.geometry=Ra(we)),N){const en=y.getValueAndResolveTokens("text-field",ct,p,ce),Kt=Yn.factory(en);gL(Kt)&&(this.hasRTLText=!0),(!this.hasRTLText||rf()==="unavailable"||this.hasRTLText&&Ms.isParsed())&&(Tt=YD(Kt,y,ct))}if(W){const en=y.getValueAndResolveTokens("icon-image",ct,p,ce);cn=en instanceof ri?en:ri.fromString(en)}if(!Tt&&!cn)continue;const gn=this.sortFeaturesByKey?J.evaluate(ct,{},p):void 0;if(this.features.push({id:je,text:Tt,icon:cn,index:Je,sourceLayerIndex:Ne,geometry:ct.geometry,properties:we.properties,type:pL[we.type],sortKey:gn}),cn&&(se[cn.name]=!0),Tt){const en=T.evaluate(ct,{},p).join(","),Kt=S.get("text-rotation-alignment")!=="viewport"&&S.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.WritingMode.vertical)>=0;for(const Ht of Tt.sections)if(Ht.image)se[Ht.image.name]=!0;else{const tn=Xu(Tt.toString()),Xt=Ht.fontStack||en,Ft=oe[Xt]=oe[Xt]||{};this.calculateGlyphDependencies(Ht.text,Ft,Kt,this.allowVerticalPlacement,tn)}}}S.get("symbol-placement")==="line"&&(this.features=function(we){const je={},Je={},Ne=[];let rt=0;function ct(en){Ne.push(we[en]),rt++}function Tt(en,Kt,Ht){const tn=Je[en];return delete Je[en],Je[Kt]=tn,Ne[tn].geometry[0].pop(),Ne[tn].geometry[0]=Ne[tn].geometry[0].concat(Ht[0]),tn}function cn(en,Kt,Ht){const tn=je[Kt];return delete je[Kt],je[en]=tn,Ne[tn].geometry[0].shift(),Ne[tn].geometry[0]=Ht[0].concat(Ne[tn].geometry[0]),tn}function gn(en,Kt,Ht){const tn=Ht?Kt[0][Kt[0].length-1]:Kt[0][0];return`${en}:${tn.x}:${tn.y}`}for(let en=0;en<we.length;en++){const Kt=we[en],Ht=Kt.geometry,tn=Kt.text?Kt.text.toString():null;if(!tn){ct(en);continue}const Xt=gn(tn,Ht),Ft=gn(tn,Ht,!0);if(Xt in Je&&Ft in je&&Je[Xt]!==je[Ft]){const Tn=cn(Xt,Ft,Ht),yn=Tt(Xt,Ft,Ne[Tn].geometry);delete je[Xt],delete Je[Ft],Je[gn(tn,Ne[yn].geometry,!0)]=yn,Ne[Tn].geometry=null}else Xt in Je?Tt(Xt,Ft,Ht):Ft in je?cn(Xt,Ft,Ht):(ct(en),je[Xt]=rt-1,Je[Ft]=rt-1)}return Ne.filter(en=>en.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((we,je)=>we.sortKey-je.sortKey)}update(a,h,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,h,this.layers,p),this.icon.programConfigurations.updatePaintArrays(a,h,this.layers,p))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,h){const p=this.lineVertexArray.length;if(a.segment!==void 0){let y=a.dist(h[a.segment+1]),S=a.dist(h[a.segment]);const T={};for(let A=a.segment+1;A<h.length;A++)T[A]={x:h[A].x,y:h[A].y,tileUnitDistanceFromAnchor:y},A<h.length-1&&(y+=h[A+1].dist(h[A]));for(let A=a.segment||0;A>=0;A--)T[A]={x:h[A].x,y:h[A].y,tileUnitDistanceFromAnchor:S},A>0&&(S+=h[A-1].dist(h[A]));for(let A=0;A<h.length;A++){const D=T[A];this.lineVertexArray.emplaceBack(D.x,D.y,D.tileUnitDistanceFromAnchor)}}return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(a,h,p,y,S,T,A,D,N,W,J,se){const oe=a.indexArray,ce=a.layoutVertexArray,Te=a.segments.prepareSegment(4*h.length,ce,oe,this.canOverlap?T.sortKey:void 0),we=this.glyphOffsetArray.length,je=Te.vertexLength,Je=this.allowVerticalPlacement&&A===l.WritingMode.vertical?Math.PI/2:0,Ne=T.text&&T.text.sections;for(let rt=0;rt<h.length;rt++){const{tl:ct,tr:Tt,bl:cn,br:gn,tex:en,pixelOffsetTL:Kt,pixelOffsetBR:Ht,minFontScaleX:tn,minFontScaleY:Xt,glyphOffset:Ft,isSDF:Tn,sectionIndex:yn}=h[rt],Zn=Te.vertexLength,Di=Ft[1];mg(ce,D.x,D.y,ct.x,Di+ct.y,en.x,en.y,p,Tn,Kt.x,Kt.y,tn,Xt),mg(ce,D.x,D.y,Tt.x,Di+Tt.y,en.x+en.w,en.y,p,Tn,Ht.x,Kt.y,tn,Xt),mg(ce,D.x,D.y,cn.x,Di+cn.y,en.x,en.y+en.h,p,Tn,Kt.x,Ht.y,tn,Xt),mg(ce,D.x,D.y,gn.x,Di+gn.y,en.x+en.w,en.y+en.h,p,Tn,Ht.x,Ht.y,tn,Xt),Hy(a.dynamicLayoutVertexArray,D,Je),oe.emplaceBack(Zn,Zn+1,Zn+2),oe.emplaceBack(Zn+1,Zn+2,Zn+3),Te.vertexLength+=4,Te.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ft[0]),rt!==h.length-1&&yn===h[rt+1].sectionIndex||a.programConfigurations.populatePaintArrays(ce.length,T,T.index,{},se,Ne&&Ne[yn])}a.placedSymbolArray.emplaceBack(D.x,D.y,we,this.glyphOffsetArray.length-we,je,N,W,D.segment,p?p[0]:0,p?p[1]:0,y[0],y[1],A,0,!1,0,J)}_addCollisionDebugVertex(a,h,p,y,S,T){return h.emplaceBack(0,0),a.emplaceBack(p.x,p.y,y,S,Math.round(T.x),Math.round(T.y))}addCollisionDebugVertices(a,h,p,y,S,T,A){const D=S.segments.prepareSegment(4,S.layoutVertexArray,S.indexArray),N=D.vertexLength,W=S.layoutVertexArray,J=S.collisionVertexArray,se=A.anchorX,oe=A.anchorY;this._addCollisionDebugVertex(W,J,T,se,oe,new w(a,h)),this._addCollisionDebugVertex(W,J,T,se,oe,new w(p,h)),this._addCollisionDebugVertex(W,J,T,se,oe,new w(p,y)),this._addCollisionDebugVertex(W,J,T,se,oe,new w(a,y)),D.vertexLength+=4;const ce=S.indexArray;ce.emplaceBack(N,N+1),ce.emplaceBack(N+1,N+2),ce.emplaceBack(N+2,N+3),ce.emplaceBack(N+3,N),D.primitiveLength+=4}addDebugCollisionBoxes(a,h,p,y){for(let S=a;S<h;S++){const T=this.collisionBoxArray.get(S);this.addCollisionDebugVertices(T.x1,T.y1,T.x2,T.y2,y?this.textCollisionBox:this.iconCollisionBox,T.anchorPoint,p)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Wy(Rt,Rw.members,nn),this.iconCollisionBox=new Wy(Rt,Rw.members,nn);for(let a=0;a<this.symbolInstances.length;a++){const h=this.symbolInstances.get(a);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(a,h,p,y,S,T,A,D,N){const W={};for(let J=h;J<p;J++){const se=a.get(J);W.textBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},W.textFeatureIndex=se.featureIndex;break}for(let J=y;J<S;J++){const se=a.get(J);W.verticalTextBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},W.verticalTextFeatureIndex=se.featureIndex;break}for(let J=T;J<A;J++){const se=a.get(J);W.iconBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},W.iconFeatureIndex=se.featureIndex;break}for(let J=D;J<N;J++){const se=a.get(J);W.verticalIconBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},W.verticalIconFeatureIndex=se.featureIndex;break}return W}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const p=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(a,h){const p=a.placedSymbolArray.get(h),y=p.vertexStartIndex+4*p.numGlyphs;for(let S=p.vertexStartIndex;S<y;S+=4)a.indexArray.emplaceBack(S,S+1,S+2),a.indexArray.emplaceBack(S+1,S+2,S+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(a),p=Math.cos(a),y=[],S=[],T=[];for(let A=0;A<this.symbolInstances.length;++A){T.push(A);const D=this.symbolInstances.get(A);y.push(0|Math.round(h*D.anchorX+p*D.anchorY)),S.push(D.featureIndex)}return T.sort((A,D)=>y[A]-y[D]||S[D]-S[A]),T}addToSortKeyRanges(a,h){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===h?p.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const p=this.symbolInstances.get(h);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach((y,S,T)=>{y>=0&&T.indexOf(y)===S&&this.addIndicesForPlacedSymbol(this.text,y)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Yw,Jw;dn("SymbolBucket",xd,{omit:["layers","collisionBoxArray","features","compareText"]}),xd.MAX_GLYPHS=65535,xd.addDynamicAttributes=Hy;var qy={get paint(){return Jw=Jw||new Jr({"icon-opacity":new Pn(ge.paint_symbol["icon-opacity"]),"icon-color":new Pn(ge.paint_symbol["icon-color"]),"icon-halo-color":new Pn(ge.paint_symbol["icon-halo-color"]),"icon-halo-width":new Pn(ge.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Pn(ge.paint_symbol["icon-halo-blur"]),"icon-translate":new bn(ge.paint_symbol["icon-translate"]),"icon-translate-anchor":new bn(ge.paint_symbol["icon-translate-anchor"]),"text-opacity":new Pn(ge.paint_symbol["text-opacity"]),"text-color":new Pn(ge.paint_symbol["text-color"],{runtimeType:Yt,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new Pn(ge.paint_symbol["text-halo-color"]),"text-halo-width":new Pn(ge.paint_symbol["text-halo-width"]),"text-halo-blur":new Pn(ge.paint_symbol["text-halo-blur"]),"text-translate":new bn(ge.paint_symbol["text-translate"]),"text-translate-anchor":new bn(ge.paint_symbol["text-translate-anchor"])})},get layout(){return Yw=Yw||new Jr({"symbol-placement":new bn(ge.layout_symbol["symbol-placement"]),"symbol-spacing":new bn(ge.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new bn(ge.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Pn(ge.layout_symbol["symbol-sort-key"]),"symbol-z-order":new bn(ge.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new bn(ge.layout_symbol["icon-allow-overlap"]),"icon-overlap":new bn(ge.layout_symbol["icon-overlap"]),"icon-ignore-placement":new bn(ge.layout_symbol["icon-ignore-placement"]),"icon-optional":new bn(ge.layout_symbol["icon-optional"]),"icon-rotation-alignment":new bn(ge.layout_symbol["icon-rotation-alignment"]),"icon-size":new Pn(ge.layout_symbol["icon-size"]),"icon-text-fit":new bn(ge.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new bn(ge.layout_symbol["icon-text-fit-padding"]),"icon-image":new Pn(ge.layout_symbol["icon-image"]),"icon-rotate":new Pn(ge.layout_symbol["icon-rotate"]),"icon-padding":new Pn(ge.layout_symbol["icon-padding"]),"icon-keep-upright":new bn(ge.layout_symbol["icon-keep-upright"]),"icon-offset":new Pn(ge.layout_symbol["icon-offset"]),"icon-anchor":new Pn(ge.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new bn(ge.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new bn(ge.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new bn(ge.layout_symbol["text-rotation-alignment"]),"text-field":new Pn(ge.layout_symbol["text-field"]),"text-font":new Pn(ge.layout_symbol["text-font"]),"text-size":new Pn(ge.layout_symbol["text-size"]),"text-max-width":new Pn(ge.layout_symbol["text-max-width"]),"text-line-height":new bn(ge.layout_symbol["text-line-height"]),"text-letter-spacing":new Pn(ge.layout_symbol["text-letter-spacing"]),"text-justify":new Pn(ge.layout_symbol["text-justify"]),"text-radial-offset":new Pn(ge.layout_symbol["text-radial-offset"]),"text-variable-anchor":new bn(ge.layout_symbol["text-variable-anchor"]),"text-anchor":new Pn(ge.layout_symbol["text-anchor"]),"text-max-angle":new bn(ge.layout_symbol["text-max-angle"]),"text-writing-mode":new bn(ge.layout_symbol["text-writing-mode"]),"text-rotate":new Pn(ge.layout_symbol["text-rotate"]),"text-padding":new bn(ge.layout_symbol["text-padding"]),"text-keep-upright":new bn(ge.layout_symbol["text-keep-upright"]),"text-transform":new Pn(ge.layout_symbol["text-transform"]),"text-offset":new Pn(ge.layout_symbol["text-offset"]),"text-allow-overlap":new bn(ge.layout_symbol["text-allow-overlap"]),"text-overlap":new bn(ge.layout_symbol["text-overlap"]),"text-ignore-placement":new bn(ge.layout_symbol["text-ignore-placement"]),"text-optional":new bn(ge.layout_symbol["text-optional"])})}};class Qw{constructor(a){if(a.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=a.property.overrides?a.property.overrides.runtimeType:Qe,this.defaultValue=a}evaluate(a){if(a.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(a.formattedSection))return h.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}dn("FormatSectionOverride",Qw,{omit:["defaultValue"]});class gg extends ua{constructor(a){super(a,qy)}recalculate(a,h){if(super.recalculate(a,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const p=this.layout.get("text-writing-mode");if(p){const y=[];for(const S of p)y.indexOf(S)<0&&y.push(S);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(a,h,p,y){const S=this.layout.get(a).evaluate(h,{},p,y),T=this._unevaluatedLayout._values[a];return T.isDataDriven()||ju(T.value)||!S?S:function(A,D){return D.replace(/{([^{}]+)}/g,(N,W)=>W in A?String(A[W]):"")}(h.properties,S)}createBucket(a){return new xd(a)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const a of qy.paint.overridableProperties){if(!gg.hasPaintOverride(this.layout,a))continue;const h=this.paint.get(a),p=new Qw(h),y=new Gh(p,h.property.specification);let S=null;S=h.value.kind==="constant"||h.value.kind==="source"?new Wh("source",y):new Jn("composite",y,h.value.zoomStops),this.paint._values[a]=new ca(h.property,S,h.parameters)}}_handleOverridablePaintPropertyUpdate(a,h,p){return!(!this.layout||h.isDataDriven()||p.isDataDriven())&&gg.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,h){const p=a.get("text-field"),y=qy.paint.properties[h];let S=!1;const T=A=>{for(const D of A)if(y.overrides&&y.overrides.hasOverride(D))return void(S=!0)};if(p.value.kind==="constant"&&p.value.value instanceof Yn)T(p.value.value.sections);else if(p.value.kind==="source"){const A=N=>{S||(N instanceof fo&&Ci(N.value)===Cn?T(N.value.sections):N instanceof Nu?T(N.sections):N.eachChild(A))},D=p.value;D._styleExpression&&A(D._styleExpression.expression)}return S}}let eS;var vL={get paint(){return eS=eS||new Jr({"background-color":new bn(ge.paint_background["background-color"]),"background-pattern":new of(ge.paint_background["background-pattern"]),"background-opacity":new bn(ge.paint_background["background-opacity"])})}};let tS;var _L={get paint(){return tS=tS||new Jr({"raster-opacity":new bn(ge.paint_raster["raster-opacity"]),"raster-hue-rotate":new bn(ge.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new bn(ge.paint_raster["raster-brightness-min"]),"raster-brightness-max":new bn(ge.paint_raster["raster-brightness-max"]),"raster-saturation":new bn(ge.paint_raster["raster-saturation"]),"raster-contrast":new bn(ge.paint_raster["raster-contrast"]),"raster-resampling":new bn(ge.paint_raster["raster-resampling"]),"raster-fade-duration":new bn(ge.paint_raster["raster-fade-duration"])})}};class yL extends ua{constructor(a){super(a,{}),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=a}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const bL={circle:class extends ua{constructor(c){super(c,oD)}createBucket(c){return new xy(c)}queryRadius(c){const a=c;return pf("circle-radius",this,a)+pf("circle-stroke-width",this,a)+ig(this.paint.get("circle-translate"))}queryIntersectsFeature(c,a,h,p,y,S,T,A){const D=rg(c,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),S.angle,T),N=this.paint.get("circle-radius").evaluate(a,h)+this.paint.get("circle-stroke-width").evaluate(a,h),W=this.paint.get("circle-pitch-alignment")==="map",J=W?D:function(oe,ce){return oe.map(Te=>dw(Te,ce))}(D,A),se=W?N*T:N;for(const oe of p)for(const ce of oe){const Te=W?ce:dw(ce,A);let we=se;const je=sg([],[ce.x,ce.y,0,1],A);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?we*=je[3]/S.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(we*=S.cameraToCenterDistance/je[3]),iD(J,Te,we))return!0}return!1}},heatmap:class extends ua{createBucket(c){return new hw(c)}constructor(c){super(c,cD),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=mw({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends ua{constructor(c){super(c,uD)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends ua{constructor(c){super(c,ED)}recalculate(c,a){super.recalculate(c,a);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new Oy(c)}queryRadius(){return ig(this.paint.get("fill-translate"))}queryIntersectsFeature(c,a,h,p,y,S,T){return sw(rg(c,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),S.angle,T),p)}isTileClipped(){return!0}},"fill-extrusion":class extends ua{constructor(c){super(c,BD)}createBucket(c){return new Fy(c)}queryRadius(){return ig(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(c,a,h,p,y,S,T,A){const D=rg(c,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),S.angle,T),N=this.paint.get("fill-extrusion-height").evaluate(a,h),W=this.paint.get("fill-extrusion-base").evaluate(a,h),J=function(oe,ce,Te,we){const je=[];for(const Je of oe){const Ne=[Je.x,Je.y,0,1];sg(Ne,Ne,ce),je.push(new w(Ne[0]/Ne[3],Ne[1]/Ne[3]))}return je}(D,A),se=function(oe,ce,Te,we){const je=[],Je=[],Ne=we[8]*ce,rt=we[9]*ce,ct=we[10]*ce,Tt=we[11]*ce,cn=we[8]*Te,gn=we[9]*Te,en=we[10]*Te,Kt=we[11]*Te;for(const Ht of oe){const tn=[],Xt=[];for(const Ft of Ht){const Tn=Ft.x,yn=Ft.y,Zn=we[0]*Tn+we[4]*yn+we[12],Di=we[1]*Tn+we[5]*yn+we[13],zi=we[2]*Tn+we[6]*yn+we[14],mr=we[3]*Tn+we[7]*yn+we[15],Hs=zi+ct,Dr=mr+Tt,or=Zn+cn,wr=Di+gn,Lr=zi+en,Vr=mr+Kt,us=new w((Zn+Ne)/Dr,(Di+rt)/Dr);us.z=Hs/Dr,tn.push(us);const lr=new w(or/Vr,wr/Vr);lr.z=Lr/Vr,Xt.push(lr)}je.push(tn),Je.push(Xt)}return[je,Je]}(p,W,N,A);return function(oe,ce,Te){let we=1/0;sw(Te,ce)&&(we=Mw(Te,ce[0]));for(let je=0;je<ce.length;je++){const Je=ce[je],Ne=oe[je];for(let rt=0;rt<Je.length-1;rt++){const ct=Je[rt],Tt=[ct,Je[rt+1],Ne[rt+1],Ne[rt],ct];rw(Te,Tt)&&(we=Math.min(we,Mw(Te,Tt)))}}return we!==1/0&&we}(se[0],se[1],J)}},line:class extends ua{constructor(c){super(c,Lw),this.gradientVersion=0,ug||(ug=new WD(Lw.paint.properties["line-width"].specification),ug.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(c){c==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Cc,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(c,a){super.recalculate(c,a),this.paint._values["line-floorwidth"]=ug.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new $y(c)}queryRadius(c){const a=c,h=Ow(pf("line-width",this,a),pf("line-gap-width",this,a)),p=pf("line-offset",this,a);return h/2+Math.abs(p)+ig(this.paint.get("line-translate"))}queryIntersectsFeature(c,a,h,p,y,S,T){const A=rg(c,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),S.angle,T),D=T/2*Ow(this.paint.get("line-width").evaluate(a,h),this.paint.get("line-gap-width").evaluate(a,h)),N=this.paint.get("line-offset").evaluate(a,h);return N&&(p=function(W,J){const se=[];for(let oe=0;oe<W.length;oe++){const ce=W[oe],Te=[];for(let we=0;we<ce.length;we++){const je=ce[we-1],Je=ce[we],Ne=ce[we+1],rt=we===0?new w(0,0):Je.sub(je)._unit()._perp(),ct=we===ce.length-1?new w(0,0):Ne.sub(Je)._unit()._perp(),Tt=rt._add(ct)._unit(),cn=Tt.x*ct.x+Tt.y*ct.y;cn!==0&&Tt._mult(1/cn),Te.push(Tt._mult(J)._add(Je))}se.push(Te)}return se}(p,N*T)),function(W,J,se){for(let oe=0;oe<J.length;oe++){const ce=J[oe];if(W.length>=3){for(let Te=0;Te<ce.length;Te++)if(pd(W,ce[Te]))return!0}if(rD(W,ce,se))return!0}return!1}(A,p,D)}isTileClipped(){return!0}},symbol:gg,background:class extends ua{constructor(c){super(c,vL)}},raster:class extends ua{constructor(c){super(c,_L)}}};class xL{constructor(a){this._callback=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Zy=63710088e-1;class Ll{constructor(a,h){if(isNaN(a)||isNaN(h))throw new Error(`Invalid LngLat object: (${a}, ${h})`);if(this.lng=+a,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ll(U(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){const h=Math.PI/180,p=this.lat*h,y=a.lat*h,S=Math.sin(p)*Math.sin(y)+Math.cos(p)*Math.cos(y)*Math.cos((a.lng-this.lng)*h);return Zy*Math.acos(Math.min(S,1))}static convert(a){if(a instanceof Ll)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new Ll(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new Ll(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const nS=2*Math.PI*Zy;function iS(c){return nS*Math.cos(c*Math.PI/180)}function rS(c){return(180+c)/360}function sS(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function aS(c,a){return c/iS(a)}function Ky(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}class vg{constructor(a,h,p=0){this.x=+a,this.y=+h,this.z=+p}static fromLngLat(a,h=0){const p=Ll.convert(a);return new vg(rS(p.lng),sS(p.lat),aS(h,p.lat))}toLngLat(){return new Ll(360*this.x-180,Ky(this.y))}toAltitude(){return this.z*iS(Ky(this.y))}meterInMercatorCoordinateUnits(){return 1/nS*(a=Ky(this.y),1/Math.cos(a*Math.PI/180));var a}}function oS(c,a,h){var p=2*Math.PI*6378137/256/Math.pow(2,h);return[c*p-2*Math.PI*6378137/2,a*p-2*Math.PI*6378137/2]}class Xy{constructor(a,h,p){if(a<0||a>25||p<0||p>=Math.pow(2,a)||h<0||h>=Math.pow(2,a))throw new Error(`x=${h}, y=${p}, z=${a} outside of bounds. 0<=x<${Math.pow(2,a)}, 0<=y<${Math.pow(2,a)} 0<=z<=25 `);this.z=a,this.x=h,this.y=p,this.key=Ef(0,a,a,h,p)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,h,p){const y=(T=this.y,A=this.z,D=oS(256*(S=this.x),256*(T=Math.pow(2,A)-T-1),A),N=oS(256*(S+1),256*(T+1),A),D[0]+","+D[1]+","+N[0]+","+N[1]);var S,T,A,D,N;const W=function(J,se,oe){let ce,Te="";for(let we=J;we>0;we--)ce=1<<we-1,Te+=(se&ce?1:0)+(oe&ce?2:0);return Te}(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(p==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,W).replace(/{bbox-epsg-3857}/g,y)}isChildOf(a){const h=this.z-a.z;return h>0&&a.x===this.x>>h&&a.y===this.y>>h}getTilePoint(a){const h=Math.pow(2,this.z);return new w((a.x*h-this.x)*$i,(a.y*h-this.y)*$i)}toString(){return`${this.z}/${this.x}/${this.y}`}}class lS{constructor(a,h){this.wrap=a,this.canonical=h,this.key=Ef(a,h.z,h.z,h.x,h.y)}}class Vs{constructor(a,h,p,y,S){if(a<p)throw new Error(`overscaledZ should be >= z; overscaledZ = ${a}; z = ${p}`);this.overscaledZ=a,this.wrap=h,this.canonical=new Xy(p,+y,+S),this.key=Ef(h,a,p,y,S)}clone(){return new Vs(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-a;return a>this.canonical.z?new Vs(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Vs(a,this.wrap,a,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(a,h){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const p=this.canonical.z-a;return a>this.canonical.z?Ef(this.wrap*+h,a,this.canonical.z,this.canonical.x,this.canonical.y):Ef(this.wrap*+h,a,a,this.canonical.x>>p,this.canonical.y>>p)}isChildOf(a){if(a.wrap!==this.wrap)return!1;const h=this.canonical.z-a.canonical.z;return a.overscaledZ===0||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>h&&a.canonical.y===this.canonical.y>>h}children(a){if(this.overscaledZ>=a)return[new Vs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,p=2*this.canonical.x,y=2*this.canonical.y;return[new Vs(h,this.wrap,h,p,y),new Vs(h,this.wrap,h,p+1,y),new Vs(h,this.wrap,h,p,y+1),new Vs(h,this.wrap,h,p+1,y+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new Vs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new Vs(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new lS(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(a){return this.canonical.getTilePoint(new vg(a.x-this.wrap,a.y))}}function Ef(c,a,h,p,y){(c*=2)<0&&(c=-1*c-1);const S=1<<h;return(S*S*c+S*y+p).toString(36)+h.toString(36)+a.toString(36)}dn("CanonicalTileID",Xy),dn("OverscaledTileID",Vs,{omit:["posMatrix"]});class cS{constructor(a,h,p){if(this.uid=a,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(p&&p!=="mapbox"&&p!=="terrarium")return void j(`"${p}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=h.height;const y=this.dim=h.height-2;this.data=new Uint32Array(h.data.buffer),this.encoding=p||"mapbox";for(let S=0;S<y;S++)this.data[this._idx(-1,S)]=this.data[this._idx(0,S)],this.data[this._idx(y,S)]=this.data[this._idx(y-1,S)],this.data[this._idx(S,-1)]=this.data[this._idx(S,0)],this.data[this._idx(S,y)]=this.data[this._idx(S,y-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(y,-1)]=this.data[this._idx(y-1,0)],this.data[this._idx(-1,y)]=this.data[this._idx(0,y-1)],this.data[this._idx(y,y)]=this.data[this._idx(y-1,y-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let S=0;S<y;S++)for(let T=0;T<y;T++){const A=this.get(S,T);A>this.max&&(this.max=A),A<this.min&&(this.min=A)}}get(a,h){const p=new Uint8Array(this.data.buffer),y=4*this._idx(a,h);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(p[y],p[y+1],p[y+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(a,h){if(a<-1||a>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(a+1)}_unpackMapbox(a,h,p){return(256*a*256+256*h+p)/10-1e4}_unpackTerrarium(a,h,p){return 256*a+h+p/256-32768}getPixels(){return new js({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(a,h,p){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let y=h*this.dim,S=h*this.dim+this.dim,T=p*this.dim,A=p*this.dim+this.dim;switch(h){case-1:y=S-1;break;case 1:S=y+1}switch(p){case-1:T=A-1;break;case 1:A=T+1}const D=-h*this.dim,N=-p*this.dim;for(let W=T;W<A;W++)for(let J=y;J<S;J++)this.data[this._idx(J,W)]=a.data[this._idx(J+D,W+N)]}}dn("DEMData",cS);class uS{constructor(a){this._stringToNumber={},this._numberToString=[];for(let h=0;h<a.length;h++){const p=a[h];this._stringToNumber[p]=h,this._numberToString[h]=p}}encode(a){return this._stringToNumber[a]}decode(a){if(a>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${a} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[a]}}class dS{constructor(a,h,p,y,S){this.type="Feature",this._vectorTileFeature=a,a._z=h,a._x=p,a._y=y,this.properties=a.properties,this.id=S}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){const a={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&(a[h]=this[h]);return a}}class hS{constructor(a,h){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new Fc($i,16,0),this.grid3D=new Fc($i,16,0),this.featureIndexArray=new le,this.promoteId=h}insert(a,h,p,y,S,T){const A=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,y,S);const D=T?this.grid3D:this.grid;for(let N=0;N<h.length;N++){const W=h[N],J=[1/0,1/0,-1/0,-1/0];for(let se=0;se<W.length;se++){const oe=W[se];J[0]=Math.min(J[0],oe.x),J[1]=Math.min(J[1],oe.y),J[2]=Math.max(J[2],oe.x),J[3]=Math.max(J[3],oe.y)}J[0]<$i&&J[1]<$i&&J[2]>=0&&J[3]>=0&&D.insert(A,J[0],J[1],J[2],J[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new kl.VectorTile(new By(this.rawTileData)).layers,this.sourceLayerCoder=new uS(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(a,h,p,y){this.loadVTLayers();const S=a.params||{},T=$i/a.tileSize/a.scale,A=qh(S.filter),D=a.queryGeometry,N=a.queryPadding*T,W=pS(D),J=this.grid.query(W.minX-N,W.minY-N,W.maxX+N,W.maxY+N),se=pS(a.cameraQueryGeometry),oe=this.grid3D.query(se.minX-N,se.minY-N,se.maxX+N,se.maxY+N,(we,je,Je,Ne)=>function(rt,ct,Tt,cn,gn){for(const Kt of rt)if(ct<=Kt.x&&Tt<=Kt.y&&cn>=Kt.x&&gn>=Kt.y)return!0;const en=[new w(ct,Tt),new w(ct,gn),new w(cn,gn),new w(cn,Tt)];if(rt.length>2){for(const Kt of en)if(pd(rt,Kt))return!0}for(let Kt=0;Kt<rt.length-1;Kt++)if(aD(rt[Kt],rt[Kt+1],en))return!0;return!1}(a.cameraQueryGeometry,we-N,je-N,Je+N,Ne+N));for(const we of oe)J.push(we);J.sort(wL);const ce={};let Te;for(let we=0;we<J.length;we++){const je=J[we];if(je===Te)continue;Te=je;const Je=this.featureIndexArray.get(je);let Ne=null;this.loadMatchingFeature(ce,Je.bucketIndex,Je.sourceLayerIndex,Je.featureIndex,A,S.layers,S.availableImages,h,p,y,(rt,ct,Tt)=>(Ne||(Ne=Ra(rt)),ct.queryIntersectsFeature(D,rt,Tt,Ne,this.z,a.transform,T,a.pixelPosMatrix)))}return ce}loadMatchingFeature(a,h,p,y,S,T,A,D,N,W,J){const se=this.bucketLayerIDs[h];if(T&&!function(we,je){for(let Je=0;Je<we.length;Je++)if(je.indexOf(we[Je])>=0)return!0;return!1}(T,se))return;const oe=this.sourceLayerCoder.decode(p),ce=this.vtLayers[oe].feature(y);if(S.needGeometry){const we=Hc(ce,!0);if(!S.filter(new Fi(this.tileID.overscaledZ),we,this.tileID.canonical))return}else if(!S.filter(new Fi(this.tileID.overscaledZ),ce))return;const Te=this.getId(ce,oe);for(let we=0;we<se.length;we++){const je=se[we];if(T&&T.indexOf(je)<0)continue;const Je=D[je];if(!Je)continue;let Ne={};Te&&W&&(Ne=W.getState(Je.sourceLayer||"_geojsonTileLayer",Te));const rt=ee({},N[je]);rt.paint=fS(rt.paint,Je.paint,ce,Ne,A),rt.layout=fS(rt.layout,Je.layout,ce,Ne,A);const ct=!J||J(ce,Je,Ne);if(!ct)continue;const Tt=new dS(ce,this.z,this.x,this.y,Te);Tt.layer=rt;let cn=a[je];cn===void 0&&(cn=a[je]=[]),cn.push({featureIndex:y,feature:Tt,intersectionZ:ct})}}lookupSymbolFeatures(a,h,p,y,S,T,A,D){const N={};this.loadVTLayers();const W=qh(S);for(const J of a)this.loadMatchingFeature(N,p,y,J,W,T,A,D,h);return N}hasLayer(a){for(const h of this.bucketLayerIDs)for(const p of h)if(a===p)return!0;return!1}getId(a,h){let p=a.id;return this.promoteId&&(p=a.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof p=="boolean"&&(p=Number(p))),p}}function fS(c,a,h,p,y){return ae(c,(S,T)=>{const A=a instanceof id?a.get(T):null;return A&&A.evaluate?A.evaluate(h,p,y):A})}function pS(c){let a=1/0,h=1/0,p=-1/0,y=-1/0;for(const S of c)a=Math.min(a,S.x),h=Math.min(h,S.y),p=Math.max(p,S.x),y=Math.max(y,S.y);return{minX:a,minY:h,maxX:p,maxY:y}}function wL(c,a){return a-c}function mS(c,a,h,p,y){const S=[];for(let T=0;T<c.length;T++){const A=c[T];let D;for(let N=0;N<A.length-1;N++){let W=A[N],J=A[N+1];W.x<a&&J.x<a||(W.x<a?W=new w(a,W.y+(a-W.x)/(J.x-W.x)*(J.y-W.y))._round():J.x<a&&(J=new w(a,W.y+(a-W.x)/(J.x-W.x)*(J.y-W.y))._round()),W.y<h&&J.y<h||(W.y<h?W=new w(W.x+(h-W.y)/(J.y-W.y)*(J.x-W.x),h)._round():J.y<h&&(J=new w(W.x+(h-W.y)/(J.y-W.y)*(J.x-W.x),h)._round()),W.x>=p&&J.x>=p||(W.x>=p?W=new w(p,W.y+(p-W.x)/(J.x-W.x)*(J.y-W.y))._round():J.x>=p&&(J=new w(p,W.y+(p-W.x)/(J.x-W.x)*(J.y-W.y))._round()),W.y>=y&&J.y>=y||(W.y>=y?W=new w(W.x+(y-W.y)/(J.y-W.y)*(J.x-W.x),y)._round():J.y>=y&&(J=new w(W.x+(y-W.y)/(J.y-W.y)*(J.x-W.x),y)._round()),D&&W.equals(D[D.length-1])||(D=[W],S.push(D)),D.push(J)))))}}return S}dn("FeatureIndex",hS,{omit:["rawTileData","sourceLayerCoder"]});class Ol extends w{constructor(a,h,p,y){super(a,h),this.angle=p,y!==void 0&&(this.segment=y)}clone(){return new Ol(this.x,this.y,this.angle,this.segment)}}function gS(c,a,h,p,y){if(a.segment===void 0)return!0;let S=a,T=a.segment+1,A=0;for(;A>-h/2;){if(T--,T<0)return!1;A-=c[T].dist(S),S=c[T]}A+=c[T].dist(c[T+1]),T++;const D=[];let N=0;for(;A<h/2;){const W=c[T],J=c[T+1];if(!J)return!1;let se=c[T-1].angleTo(W)-W.angleTo(J);for(se=Math.abs((se+3*Math.PI)%(2*Math.PI)-Math.PI),D.push({distance:A,angleDelta:se}),N+=se;A-D[0].distance>p;)N-=D.shift().angleDelta;if(N>y)return!1;T++,A+=W.dist(J)}return!0}function vS(c){let a=0;for(let h=0;h<c.length-1;h++)a+=c[h].dist(c[h+1]);return a}function _S(c,a,h){return c?.6*a*h:0}function yS(c,a){return Math.max(c?c.right-c.left:0,a?a.right-a.left:0)}function SL(c,a,h,p,y,S){const T=_S(h,y,S),A=yS(h,p)*S;let D=0;const N=vS(c)/2;for(let W=0;W<c.length-1;W++){const J=c[W],se=c[W+1],oe=J.dist(se);if(D+oe>N){const ce=(N-D)/oe,Te=Xr.number(J.x,se.x,ce),we=Xr.number(J.y,se.y,ce),je=new Ol(Te,we,se.angleTo(J),W);return je._round(),!T||gS(c,je,A,T,a)?je:void 0}D+=oe}}function TL(c,a,h,p,y,S,T,A,D){const N=_S(p,S,T),W=yS(p,y),J=W*T,se=c[0].x===0||c[0].x===D||c[0].y===0||c[0].y===D;return a-J<a/4&&(a=J+a/4),bS(c,se?a/2*A%a:(W/2+2*S)*T*A%a,a,N,h,J,se,!1,D)}function bS(c,a,h,p,y,S,T,A,D){const N=S/2,W=vS(c);let J=0,se=a-h,oe=[];for(let ce=0;ce<c.length-1;ce++){const Te=c[ce],we=c[ce+1],je=Te.dist(we),Je=we.angleTo(Te);for(;se+h<J+je;){se+=h;const Ne=(se-J)/je,rt=Xr.number(Te.x,we.x,Ne),ct=Xr.number(Te.y,we.y,Ne);if(rt>=0&&rt<D&&ct>=0&&ct<D&&se-N>=0&&se+N<=W){const Tt=new Ol(rt,ct,Je,ce);Tt._round(),p&&!gS(c,Tt,S,p,y)||oe.push(Tt)}}J+=je}return A||oe.length||T||(oe=bS(c,J/2,h,p,y,S,T,!0,D)),oe}function xS(c,a,h,p){const y=[],S=c.image,T=S.pixelRatio,A=S.paddedRect.w-2,D=S.paddedRect.h-2,N=c.right-c.left,W=c.bottom-c.top,J=S.stretchX||[[0,A]],se=S.stretchY||[[0,D]],oe=(Ht,tn)=>Ht+tn[1]-tn[0],ce=J.reduce(oe,0),Te=se.reduce(oe,0),we=A-ce,je=D-Te;let Je=0,Ne=ce,rt=0,ct=Te,Tt=0,cn=we,gn=0,en=je;if(S.content&&p){const Ht=S.content;Je=_g(J,0,Ht[0]),rt=_g(se,0,Ht[1]),Ne=_g(J,Ht[0],Ht[2]),ct=_g(se,Ht[1],Ht[3]),Tt=Ht[0]-Je,gn=Ht[1]-rt,cn=Ht[2]-Ht[0]-Ne,en=Ht[3]-Ht[1]-ct}const Kt=(Ht,tn,Xt,Ft)=>{const Tn=yg(Ht.stretch-Je,Ne,N,c.left),yn=bg(Ht.fixed-Tt,cn,Ht.stretch,ce),Zn=yg(tn.stretch-rt,ct,W,c.top),Di=bg(tn.fixed-gn,en,tn.stretch,Te),zi=yg(Xt.stretch-Je,Ne,N,c.left),mr=bg(Xt.fixed-Tt,cn,Xt.stretch,ce),Hs=yg(Ft.stretch-rt,ct,W,c.top),Dr=bg(Ft.fixed-gn,en,Ft.stretch,Te),or=new w(Tn,Zn),wr=new w(zi,Zn),Lr=new w(zi,Hs),Vr=new w(Tn,Hs),us=new w(yn/T,Di/T),lr=new w(mr/T,Dr/T),Or=a*Math.PI/180;if(Or){const ds=Math.sin(Or),hs=Math.cos(Or),Xi=[hs,-ds,ds,hs];or._matMult(Xi),wr._matMult(Xi),Vr._matMult(Xi),Lr._matMult(Xi)}const Hr=Ht.stretch+Ht.fixed,es=tn.stretch+tn.fixed;return{tl:or,tr:wr,bl:Vr,br:Lr,tex:{x:S.paddedRect.x+1+Hr,y:S.paddedRect.y+1+es,w:Xt.stretch+Xt.fixed-Hr,h:Ft.stretch+Ft.fixed-es},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:us,pixelOffsetBR:lr,minFontScaleX:cn/T/N,minFontScaleY:en/T/W,isSDF:h}};if(p&&(S.stretchX||S.stretchY)){const Ht=wS(J,we,ce),tn=wS(se,je,Te);for(let Xt=0;Xt<Ht.length-1;Xt++){const Ft=Ht[Xt],Tn=Ht[Xt+1];for(let yn=0;yn<tn.length-1;yn++)y.push(Kt(Ft,tn[yn],Tn,tn[yn+1]))}}else y.push(Kt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:A+1},{fixed:0,stretch:D+1}));return y}function _g(c,a,h){let p=0;for(const y of c)p+=Math.max(a,Math.min(h,y[1]))-Math.max(a,Math.min(h,y[0]));return p}function wS(c,a,h){const p=[{fixed:-1,stretch:0}];for(const[y,S]of c){const T=p[p.length-1];p.push({fixed:y-T.stretch,stretch:T.stretch}),p.push({fixed:y-T.stretch,stretch:T.stretch+(S-y)})}return p.push({fixed:a+1,stretch:h}),p}function yg(c,a,h,p){return c/a*h+p}function bg(c,a,h,p){return c-a*h/p}dn("Anchor",Ol);class xg{constructor(a,h,p,y,S,T,A,D,N,W){if(this.boxStartIndex=a.length,N){let J=T.top,se=T.bottom;const oe=T.collisionPadding;oe&&(J-=oe[1],se+=oe[3]);let ce=se-J;ce>0&&(ce=Math.max(10,ce),this.circleDiameter=ce)}else{let J=T.top*A-D[0],se=T.bottom*A+D[2],oe=T.left*A-D[3],ce=T.right*A+D[1];const Te=T.collisionPadding;if(Te&&(oe-=Te[0]*A,J-=Te[1]*A,ce+=Te[2]*A,se+=Te[3]*A),W){const we=new w(oe,J),je=new w(ce,J),Je=new w(oe,se),Ne=new w(ce,se),rt=W*Math.PI/180;we._rotate(rt),je._rotate(rt),Je._rotate(rt),Ne._rotate(rt),oe=Math.min(we.x,je.x,Je.x,Ne.x),ce=Math.max(we.x,je.x,Je.x,Ne.x),J=Math.min(we.y,je.y,Je.y,Ne.y),se=Math.max(we.y,je.y,Je.y,Ne.y)}a.emplaceBack(h.x,h.y,oe,J,ce,se,p,y,S)}this.boxEndIndex=a.length}}class EL{constructor(a=[],h=CL){if(this.data=a,this.length=this.data.length,this.compare=h,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(a){this.data.push(a),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const a=this.data[0],h=this.data.pop();return this.length--,this.length>0&&(this.data[0]=h,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:h,compare:p}=this,y=h[a];for(;a>0;){const S=a-1>>1,T=h[S];if(p(y,T)>=0)break;h[a]=T,a=S}h[a]=y}_down(a){const{data:h,compare:p}=this,y=this.length>>1,S=h[a];for(;a<y;){let T=1+(a<<1),A=h[T];const D=T+1;if(D<this.length&&p(h[D],A)<0&&(T=D,A=h[D]),p(A,S)>=0)break;h[a]=A,a=T}h[a]=S}}function CL(c,a){return c<a?-1:c>a?1:0}function IL(c,a=1,h=!1){let p=1/0,y=1/0,S=-1/0,T=-1/0;const A=c[0];for(let oe=0;oe<A.length;oe++){const ce=A[oe];(!oe||ce.x<p)&&(p=ce.x),(!oe||ce.y<y)&&(y=ce.y),(!oe||ce.x>S)&&(S=ce.x),(!oe||ce.y>T)&&(T=ce.y)}const D=Math.min(S-p,T-y);let N=D/2;const W=new EL([],AL);if(D===0)return new w(p,y);for(let oe=p;oe<S;oe+=D)for(let ce=y;ce<T;ce+=D)W.push(new wd(oe+N,ce+N,N,c));let J=function(oe){let ce=0,Te=0,we=0;const je=oe[0];for(let Je=0,Ne=je.length,rt=Ne-1;Je<Ne;rt=Je++){const ct=je[Je],Tt=je[rt],cn=ct.x*Tt.y-Tt.x*ct.y;Te+=(ct.x+Tt.x)*cn,we+=(ct.y+Tt.y)*cn,ce+=3*cn}return new wd(Te/ce,we/ce,0,oe)}(c),se=W.length;for(;W.length;){const oe=W.pop();(oe.d>J.d||!J.d)&&(J=oe,h&&console.log("found best %d after %d probes",Math.round(1e4*oe.d)/1e4,se)),oe.max-J.d<=a||(N=oe.h/2,W.push(new wd(oe.p.x-N,oe.p.y-N,N,c)),W.push(new wd(oe.p.x+N,oe.p.y-N,N,c)),W.push(new wd(oe.p.x-N,oe.p.y+N,N,c)),W.push(new wd(oe.p.x+N,oe.p.y+N,N,c)),se+=4)}return h&&(console.log(`num probes: ${se}`),console.log(`best distance: ${J.d}`)),J.p}function AL(c,a){return a.max-c.max}function wd(c,a,h,p){this.p=new w(c,a),this.h=h,this.d=function(y,S){let T=!1,A=1/0;for(let D=0;D<S.length;D++){const N=S[D];for(let W=0,J=N.length,se=J-1;W<J;se=W++){const oe=N[W],ce=N[se];oe.y>y.y!=ce.y>y.y&&y.x<(ce.x-oe.x)*(y.y-oe.y)/(ce.y-oe.y)+oe.x&&(T=!T),A=Math.min(A,aw(y,oe,ce))}}return(T?1:-1)*Math.sqrt(A)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}const Yy=Number.POSITIVE_INFINITY;function SS(c,a){return a[1]!==Yy?function(h,p,y){let S=0,T=0;switch(p=Math.abs(p),y=Math.abs(y),h){case"top-right":case"top-left":case"top":T=y-7;break;case"bottom-right":case"bottom-left":case"bottom":T=7-y}switch(h){case"top-right":case"bottom-right":case"right":S=-p;break;case"top-left":case"bottom-left":case"left":S=p}return[S,T]}(c,a[0],a[1]):function(h,p){let y=0,S=0;p<0&&(p=0);const T=p/Math.sqrt(2);switch(h){case"top-right":case"top-left":S=T-7;break;case"bottom-right":case"bottom-left":S=7-T;break;case"bottom":S=7-p;break;case"top":S=p-7}switch(h){case"top-right":case"bottom-right":y=-T;break;case"top-left":case"bottom-left":y=T;break;case"left":y=p;break;case"right":y=-p}return[y,S]}(c,a[0])}function Jy(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ML(c,a,h,p,y,S,T,A,D,N,W){let J=S.textMaxSize.evaluate(a,{});J===void 0&&(J=T);const se=c.layers[0].layout,oe=se.get("icon-offset").evaluate(a,{},W),ce=ES(h.horizontal),Te=T/24,we=c.tilePixelRatio*Te,je=c.tilePixelRatio*J/24,Je=c.tilePixelRatio*A,Ne=c.tilePixelRatio*se.get("symbol-spacing"),rt=se.get("text-padding")*c.tilePixelRatio,ct=function(Ft,Tn,yn,Zn=1){const Di=Ft.get("icon-padding").evaluate(Tn,{},yn),zi=Di&&Di.values;return[zi[0]*Zn,zi[1]*Zn,zi[2]*Zn,zi[3]*Zn]}(se,a,W,c.tilePixelRatio),Tt=se.get("text-max-angle")/180*Math.PI,cn=se.get("text-rotation-alignment")!=="viewport"&&se.get("symbol-placement")!=="point",gn=se.get("icon-rotation-alignment")==="map"&&se.get("symbol-placement")!=="point",en=se.get("symbol-placement"),Kt=Ne/2,Ht=se.get("icon-text-fit");let tn;p&&Ht!=="none"&&(c.allowVerticalPlacement&&h.vertical&&(tn=Kw(p,h.vertical,Ht,se.get("icon-text-fit-padding"),oe,Te)),ce&&(p=Kw(p,ce,Ht,se.get("icon-text-fit-padding"),oe,Te)));const Xt=(Ft,Tn)=>{Tn.x<0||Tn.x>=$i||Tn.y<0||Tn.y>=$i||function(yn,Zn,Di,zi,mr,Hs,Dr,or,wr,Lr,Vr,us,lr,Or,Hr,es,ds,hs,Xi,Rr,Kn,ks,Fr,Gr,fa){const Fa=yn.addToLineVertexArray(Zn,Di);let $a,Ko,pa,Gs,fs=0,Xo=0,Af=0,MS=0,a0=-1,o0=-1;const Yo={};let kS=nr(""),l0=0,c0=0;if(or._unevaluatedLayout.getValue("text-radial-offset")===void 0?[l0,c0]=or.layout.get("text-offset").evaluate(Kn,{},Gr).map(ps=>ps*Cr):(l0=or.layout.get("text-radial-offset").evaluate(Kn,{},Gr)*Cr,c0=Yy),yn.allowVerticalPlacement&&zi.vertical){const ps=or.layout.get("text-rotate").evaluate(Kn,{},Gr)+90;pa=new xg(wr,Zn,Lr,Vr,us,zi.vertical,lr,Or,Hr,ps),Dr&&(Gs=new xg(wr,Zn,Lr,Vr,us,Dr,ds,hs,Hr,ps))}if(mr){const ps=or.layout.get("icon-rotate").evaluate(Kn,{}),vo=or.layout.get("icon-text-fit")!=="none",Mf=xS(mr,ps,Fr,vo),kf=Dr?xS(Dr,ps,Fr,vo):void 0;Ko=new xg(wr,Zn,Lr,Vr,us,mr,ds,hs,!1,ps),fs=4*Mf.length;const LS=yn.iconSizeData;let Wc=null;LS.kind==="source"?(Wc=[Zo*or.layout.get("icon-size").evaluate(Kn,{})],Wc[0]>Dl&&j(`${yn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):LS.kind==="composite"&&(Wc=[Zo*ks.compositeIconSizes[0].evaluate(Kn,{},Gr),Zo*ks.compositeIconSizes[1].evaluate(Kn,{},Gr)],(Wc[0]>Dl||Wc[1]>Dl)&&j(`${yn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),yn.addSymbols(yn.icon,Mf,Wc,Rr,Xi,Kn,l.WritingMode.none,Zn,Fa.lineStartIndex,Fa.lineLength,-1,Gr),a0=yn.icon.placedSymbolArray.length-1,kf&&(Xo=4*kf.length,yn.addSymbols(yn.icon,kf,Wc,Rr,Xi,Kn,l.WritingMode.vertical,Zn,Fa.lineStartIndex,Fa.lineLength,-1,Gr),o0=yn.icon.placedSymbolArray.length-1)}const PS=Object.keys(zi.horizontal);for(const ps of PS){const vo=zi.horizontal[ps];if(!$a){kS=nr(vo.text);const kf=or.layout.get("text-rotate").evaluate(Kn,{},Gr);$a=new xg(wr,Zn,Lr,Vr,us,vo,lr,Or,Hr,kf)}const Mf=vo.positionedLines.length===1;if(Af+=TS(yn,Zn,vo,Hs,or,Hr,Kn,es,Fa,zi.vertical?l.WritingMode.horizontal:l.WritingMode.horizontalOnly,Mf?PS:[ps],Yo,a0,ks,Gr),Mf)break}zi.vertical&&(MS+=TS(yn,Zn,zi.vertical,Hs,or,Hr,Kn,es,Fa,l.WritingMode.vertical,["vertical"],Yo,o0,ks,Gr));const DL=$a?$a.boxStartIndex:yn.collisionBoxArray.length,LL=$a?$a.boxEndIndex:yn.collisionBoxArray.length,OL=pa?pa.boxStartIndex:yn.collisionBoxArray.length,RL=pa?pa.boxEndIndex:yn.collisionBoxArray.length,FL=Ko?Ko.boxStartIndex:yn.collisionBoxArray.length,$L=Ko?Ko.boxEndIndex:yn.collisionBoxArray.length,zL=Gs?Gs.boxStartIndex:yn.collisionBoxArray.length,BL=Gs?Gs.boxEndIndex:yn.collisionBoxArray.length;let za=-1;const Sg=(ps,vo)=>ps&&ps.circleDiameter?Math.max(ps.circleDiameter,vo):vo;za=Sg($a,za),za=Sg(pa,za),za=Sg(Ko,za),za=Sg(Gs,za);const DS=za>-1?1:0;DS&&(za*=fa/Cr),yn.glyphOffsetArray.length>=xd.MAX_GLYPHS&&j("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Kn.sortKey!==void 0&&yn.addToSortKeyRanges(yn.symbolInstances.length,Kn.sortKey),yn.symbolInstances.emplaceBack(Zn.x,Zn.y,Yo.right>=0?Yo.right:-1,Yo.center>=0?Yo.center:-1,Yo.left>=0?Yo.left:-1,Yo.vertical||-1,a0,o0,kS,DL,LL,OL,RL,FL,$L,zL,BL,Lr,Af,MS,fs,Xo,DS,0,lr,l0,c0,za)}(c,Tn,Ft,h,p,y,tn,c.layers[0],c.collisionBoxArray,a.index,a.sourceLayerIndex,c.index,we,[rt,rt,rt,rt],cn,D,Je,ct,gn,oe,a,S,N,W,T)};if(en==="line")for(const Ft of mS(a.geometry,0,0,$i,$i)){const Tn=TL(Ft,Ne,Tt,h.vertical||ce,p,24,je,c.overscaling,$i);for(const yn of Tn)ce&&kL(c,ce.text,Kt,yn)||Xt(Ft,yn)}else if(en==="line-center"){for(const Ft of a.geometry)if(Ft.length>1){const Tn=SL(Ft,Tt,h.vertical||ce,p,24,je);Tn&&Xt(Ft,Tn)}}else if(a.type==="Polygon")for(const Ft of Py(a.geometry,0)){const Tn=IL(Ft,16);Xt(Ft[0],new Ol(Tn.x,Tn.y,0))}else if(a.type==="LineString")for(const Ft of a.geometry)Xt(Ft,new Ol(Ft[0].x,Ft[0].y,0));else if(a.type==="Point")for(const Ft of a.geometry)for(const Tn of Ft)Xt([Tn],new Ol(Tn.x,Tn.y,0))}function TS(c,a,h,p,y,S,T,A,D,N,W,J,se,oe,ce){const Te=function(Je,Ne,rt,ct,Tt,cn,gn,en){const Kt=ct.layout.get("text-rotate").evaluate(cn,{})*Math.PI/180,Ht=[];for(const tn of Ne.positionedLines)for(const Xt of tn.positionedGlyphs){if(!Xt.rect)continue;const Ft=Xt.rect||{};let Tn=4,yn=!0,Zn=1,Di=0;const zi=(Tt||en)&&Xt.vertical,mr=Xt.metrics.advance*Xt.scale/2;if(en&&Ne.verticalizable&&(Di=tn.lineOffset/2-(Xt.imageName?-(Cr-Xt.metrics.width*Xt.scale)/2:(Xt.scale-1)*Cr)),Xt.imageName){const Xi=gn[Xt.imageName];yn=Xi.sdf,Zn=Xi.pixelRatio,Tn=1/Zn}const Hs=Tt?[Xt.x+mr,Xt.y]:[0,0];let Dr=Tt?[0,0]:[Xt.x+mr+rt[0],Xt.y+rt[1]-Di],or=[0,0];zi&&(or=Dr,Dr=[0,0]);const wr=(Xt.metrics.left-Tn)*Xt.scale-mr+Dr[0],Lr=(-Xt.metrics.top-Tn)*Xt.scale+Dr[1],Vr=wr+Ft.w*Xt.scale/Zn,us=Lr+Ft.h*Xt.scale/Zn,lr=new w(wr,Lr),Or=new w(Vr,Lr),Hr=new w(wr,us),es=new w(Vr,us);if(zi){const Xi=new w(-mr,mr-hg),Rr=-Math.PI/2,Kn=12-mr,ks=new w(22-Kn,-(Xt.imageName?Kn:0)),Fr=new w(...or);lr._rotateAround(Rr,Xi)._add(ks)._add(Fr),Or._rotateAround(Rr,Xi)._add(ks)._add(Fr),Hr._rotateAround(Rr,Xi)._add(ks)._add(Fr),es._rotateAround(Rr,Xi)._add(ks)._add(Fr)}if(Kt){const Xi=Math.sin(Kt),Rr=Math.cos(Kt),Kn=[Rr,-Xi,Xi,Rr];lr._matMult(Kn),Or._matMult(Kn),Hr._matMult(Kn),es._matMult(Kn)}const ds=new w(0,0),hs=new w(0,0);Ht.push({tl:lr,tr:Or,bl:Hr,br:es,tex:Ft,writingMode:Ne.writingMode,glyphOffset:Hs,sectionIndex:Xt.sectionIndex,isSDF:yn,pixelOffsetTL:ds,pixelOffsetBR:hs,minFontScaleX:0,minFontScaleY:0})}return Ht}(0,h,A,y,S,T,p,c.allowVerticalPlacement),we=c.textSizeData;let je=null;we.kind==="source"?(je=[Zo*y.layout.get("text-size").evaluate(T,{})],je[0]>Dl&&j(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):we.kind==="composite"&&(je=[Zo*oe.compositeTextSizes[0].evaluate(T,{},ce),Zo*oe.compositeTextSizes[1].evaluate(T,{},ce)],(je[0]>Dl||je[1]>Dl)&&j(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),c.addSymbols(c.text,Te,je,A,S,T,N,a,D.lineStartIndex,D.lineLength,se,ce);for(const Je of W)J[Je]=c.text.placedSymbolArray.length-1;return 4*Te.length}function ES(c){for(const a in c)return c[a];return null}function kL(c,a,h,p){const y=c.compareText;if(a in y){const S=y[a];for(let T=S.length-1;T>=0;T--)if(p.dist(S[T])<h)return!0}else y[a]=[];return y[a].push(p),!1}const CS=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Qy{static from(a){if(!(a instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,p]=new Uint8Array(a,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");const y=p>>4;if(y!==1)throw new Error(`Got v${y} data when expected v1.`);const S=CS[15&p];if(!S)throw new Error("Unrecognized array type.");const[T]=new Uint16Array(a,2,1),[A]=new Uint32Array(a,4,1);return new Qy(A,T,S,a)}constructor(a,h=64,p=Float64Array,y){if(isNaN(a)||a<0)throw new Error(`Unpexpected numItems value: ${a}.`);this.numItems=+a,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=p,this.IndexArrayType=a<65536?Uint16Array:Uint32Array;const S=CS.indexOf(this.ArrayType),T=2*a*this.ArrayType.BYTES_PER_ELEMENT,A=a*this.IndexArrayType.BYTES_PER_ELEMENT,D=(8-A%8)%8;if(S<0)throw new Error(`Unexpected typed array class: ${p}.`);y&&y instanceof ArrayBuffer?(this.data=y,this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+A+D,2*a),this._pos=2*a,this._finished=!0):(this.data=new ArrayBuffer(8+T+A+D),this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+A+D,2*a),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+S]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=a)}add(a,h){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=a,this.coords[this._pos++]=h,p}finish(){const a=this._pos>>1;if(a!==this.numItems)throw new Error(`Added ${a} items when expected ${this.numItems}.`);return e0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(a,h,p,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:S,coords:T,nodeSize:A}=this,D=[0,S.length-1,0],N=[];for(;D.length;){const W=D.pop()||0,J=D.pop()||0,se=D.pop()||0;if(J-se<=A){for(let we=se;we<=J;we++){const je=T[2*we],Je=T[2*we+1];je>=a&&je<=p&&Je>=h&&Je<=y&&N.push(S[we])}continue}const oe=se+J>>1,ce=T[2*oe],Te=T[2*oe+1];ce>=a&&ce<=p&&Te>=h&&Te<=y&&N.push(S[oe]),(W===0?a<=ce:h<=Te)&&(D.push(se),D.push(oe-1),D.push(1-W)),(W===0?p>=ce:y>=Te)&&(D.push(oe+1),D.push(J),D.push(1-W))}return N}within(a,h,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:S,nodeSize:T}=this,A=[0,y.length-1,0],D=[],N=p*p;for(;A.length;){const W=A.pop()||0,J=A.pop()||0,se=A.pop()||0;if(J-se<=T){for(let we=se;we<=J;we++)AS(S[2*we],S[2*we+1],a,h)<=N&&D.push(y[we]);continue}const oe=se+J>>1,ce=S[2*oe],Te=S[2*oe+1];AS(ce,Te,a,h)<=N&&D.push(y[oe]),(W===0?a-p<=ce:h-p<=Te)&&(A.push(se),A.push(oe-1),A.push(1-W)),(W===0?a+p>=ce:h+p>=Te)&&(A.push(oe+1),A.push(J),A.push(1-W))}return D}}function e0(c,a,h,p,y,S){if(y-p<=h)return;const T=p+y>>1;IS(c,a,T,p,y,S),e0(c,a,h,p,T-1,1-S),e0(c,a,h,T+1,y,1-S)}function IS(c,a,h,p,y,S){for(;y>p;){if(y-p>600){const N=y-p+1,W=h-p+1,J=Math.log(N),se=.5*Math.exp(2*J/3),oe=.5*Math.sqrt(J*se*(N-se)/N)*(W-N/2<0?-1:1);IS(c,a,h,Math.max(p,Math.floor(h-W*se/N+oe)),Math.min(y,Math.floor(h+(N-W)*se/N+oe)),S)}const T=a[2*h+S];let A=p,D=y;for(Cf(c,a,p,h),a[2*y+S]>T&&Cf(c,a,p,y);A<D;){for(Cf(c,a,A,D),A++,D--;a[2*A+S]<T;)A++;for(;a[2*D+S]>T;)D--}a[2*p+S]===T?Cf(c,a,p,D):(D++,Cf(c,a,D,y)),D<=h&&(p=D+1),h<=D&&(y=D-1)}}function Cf(c,a,h,p){t0(c,h,p),t0(a,2*h,2*p),t0(a,2*h+1,2*p+1)}function t0(c,a,h){const p=c[a];c[a]=c[h],c[h]=p}function AS(c,a,h,p){const y=c-h,S=a-p;return y*y+S*S}var n0;l.PerformanceMarkers=void 0,(n0=l.PerformanceMarkers||(l.PerformanceMarkers={})).create="create",n0.load="load",n0.fullLoad="fullLoad";let wg=null,If=[];const i0=1e3/60,r0="loadTime",s0="fullLoadTime",PL={mark(c){performance.mark(c)},frame(c){const a=c;wg!=null&&If.push(a-wg),wg=a},clearMetrics(){wg=null,If=[],performance.clearMeasures(r0),performance.clearMeasures(s0);for(const c in l.PerformanceMarkers)performance.clearMarks(l.PerformanceMarkers[c])},getPerformanceMetrics(){performance.measure(r0,l.PerformanceMarkers.create,l.PerformanceMarkers.load),performance.measure(s0,l.PerformanceMarkers.create,l.PerformanceMarkers.fullLoad);const c=performance.getEntriesByName(r0)[0].duration,a=performance.getEntriesByName(s0)[0].duration,h=If.length,p=1/(If.reduce((S,T)=>S+T,0)/h/1e3),y=If.filter(S=>S>i0).reduce((S,T)=>S+(T-i0)/i0,0);return{loadTime:c,fullLoadTime:a,fps:p,percentDroppedFrames:y/(h+y)*100,totalFrames:h}}};l.AJAXError=tt,l.ARRAY_TYPE=md,l.Actor=class{constructor(c,a,h){this.target=c,this.parent=a,this.mapId=h,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Q(["receive","process"],this),this.invoker=new xL(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=X()?c:window}send(c,a,h,p,y=!1){const S=Math.round(1e18*Math.random()).toString(36).substring(0,10);h&&(this.callbacks[S]=h);const T=Ee(this.globalScope)?void 0:[];return this.target.postMessage({id:S,type:c,hasCallback:!!h,targetMapId:p,mustQueue:y,sourceMapId:this.mapId,data:$c(a,T)},T),{cancel:()=>{h&&delete this.callbacks[S],this.target.postMessage({id:S,type:"<cancel>",targetMapId:p,sourceMapId:this.mapId})}}}receive(c){const a=c.data,h=a.id;if(h&&(!a.targetMapId||this.mapId===a.targetMapId))if(a.type==="<cancel>"){delete this.tasks[h];const p=this.cancelCallbacks[h];delete this.cancelCallbacks[h],p&&p()}else X()||a.mustQueue?(this.tasks[h]=a,this.taskQueue.push(h),this.invoker.trigger()):this.processTask(h,a)}process(){if(!this.taskQueue.length)return;const c=this.taskQueue.shift(),a=this.tasks[c];delete this.tasks[c],this.taskQueue.length&&this.invoker.trigger(),a&&this.processTask(c,a)}processTask(c,a){if(a.type==="<response>"){const h=this.callbacks[c];delete this.callbacks[c],h&&(a.error?h(Da(a.error)):h(null,Da(a.data)))}else{let h=!1;const p=Ee(this.globalScope)?void 0:[],y=a.hasCallback?(A,D)=>{h=!0,delete this.cancelCallbacks[c],this.target.postMessage({id:c,type:"<response>",sourceMapId:this.mapId,error:A?$c(A):null,data:$c(D,p)},p)}:A=>{h=!0};let S=null;const T=Da(a.data);if(this.parent[a.type])S=this.parent[a.type](a.sourceMapId,T,y);else if(this.parent.getWorkerSource){const A=a.type.split(".");S=this.parent.getWorkerSource(a.sourceMapId,A[0],T.source)[A[1]](T,y)}else y(new Error(`Could not find function ${a.type}`));!h&&S&&S.cancel&&(this.cancelCallbacks[c]=S.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.AlphaImage=gf,l.CanonicalTileID=Xy,l.CollisionBoxArray=b,l.CollisionCircleLayoutArray=class extends ld{},l.Color=yt,l.DEMData=cS,l.DataConstantProperty=bn,l.DictionaryCoder=uS,l.EXTENT=$i,l.ErrorEvent=_e,l.EvaluationParameters=Fi,l.Event=qt,l.Evented=ke,l.FeatureIndex=hS,l.FillBucket=Oy,l.FillExtrusionBucket=Fy,l.GeoJSONFeature=dS,l.ImageAtlas=Hw,l.ImagePosition=Ny,l.KDBush=Qy,l.LineBucket=$y,l.LineStripIndexArray=class extends o{},l.LngLat=Ll,l.MercatorCoordinate=vg,l.ONE_EM=Cr,l.OverscaledTileID=Vs,l.PerformanceUtils=PL,l.Point=w,l.Pos3dArray=class extends sd{},l.PosArray=Se,l.Properties=Jr,l.Protobuf=By,l.QuadTriangleArray=class extends cd{},l.RGBAImage=js,l.RasterBoundsArray=class extends cf{},l.RequestPerformance=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},l.SegmentVector=Zt,l.SymbolBucket=xd,l.Transitionable=Jm,l.TriangleIndexArray=Lt,l.Uniform1f=ha,l.Uniform1i=class extends jr{constructor(c,a){super(c,a),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},l.Uniform2f=class extends jr{constructor(c,a){super(c,a),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},l.Uniform3f=class extends jr{constructor(c,a){super(c,a),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},l.Uniform4f=jc,l.UniformColor=Pr,l.UniformMatrix4f=class extends jr{constructor(c,a){super(c,a),this.current=br}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let a=1;a<16;a++)if(c[a]!==this.current[a]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},l.UnwrappedTileID=lS,l.ValidationError=vt,l.ZoomHistory=Wm,l.addDynamicAttributes=Hy,l.arrayBufferToImage=function(c,a){const h=new Image;h.onload=()=>{a(null,h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=Xe})},h.onerror=()=>a(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const p=new Blob([new Uint8Array(c)],{type:"image/png"});h.src=c.byteLength?URL.createObjectURL(p):Xe},l.arrayBufferToImageBitmap=function(c,a){const h=new Blob([new Uint8Array(c)],{type:"image/png"});createImageBitmap(h).then(p=>{a(null,p)}).catch(p=>{a(new Error(`Could not load image because of ${p.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},l.asyncAll=function(c,a,h){if(!c.length)return h(null,[]);let p=c.length;const y=new Array(c.length);let S=null;c.forEach((T,A)=>{a(T,(D,N)=>{D&&(S=D),y[A]=N,--p==0&&h(S,y)})})},l.bezier=L,l.bindAll=Q,l.clamp=F,l.clipLine=mS,l.clone=function(c){var a=new md(16);return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15],a},l.clone$1=te,l.collisionCircleLayout=XD,l.config=Ct,l.copy=function(c,a){return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c},l.create=function(){var c=new md(16);return md!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},l.createExpression=Bi,l.createFilter=qh,l.createLayout=ar,l.createStyleLayer=function(c){return c.type==="custom"?new yL(c):new bL[c.type](c)},l.deepEqual=function c(a,h){if(Array.isArray(a)){if(!Array.isArray(h)||a.length!==h.length)return!1;for(let p=0;p<a.length;p++)if(!c(a[p],h[p]))return!1;return!0}if(typeof a=="object"&&a!==null&&h!==null){if(typeof h!="object"||Object.keys(a).length!==Object.keys(h).length)return!1;for(const p in a)if(!c(a[p],h[p]))return!1;return!0}return a===h},l.derefLayers=function(c){c=c.slice();const a=Object.create(null);for(let h=0;h<c.length;h++)a[c[h].id]=c[h];for(let h=0;h<c.length;h++)"ref"in c[h]&&(c[h]=q(c[h],a[c[h].ref]));return c},l.diffStyles=function(c,a){if(!c)return[{command:Pe.setStyle,args:[a]}];let h=[];try{if(!fe(c.version,a.version))return[{command:Pe.setStyle,args:[a]}];fe(c.center,a.center)||h.push({command:Pe.setCenter,args:[a.center]}),fe(c.zoom,a.zoom)||h.push({command:Pe.setZoom,args:[a.zoom]}),fe(c.bearing,a.bearing)||h.push({command:Pe.setBearing,args:[a.bearing]}),fe(c.pitch,a.pitch)||h.push({command:Pe.setPitch,args:[a.pitch]}),fe(c.sprite,a.sprite)||h.push({command:Pe.setSprite,args:[a.sprite]}),fe(c.glyphs,a.glyphs)||h.push({command:Pe.setGlyphs,args:[a.glyphs]}),fe(c.transition,a.transition)||h.push({command:Pe.setTransition,args:[a.transition]}),fe(c.light,a.light)||h.push({command:Pe.setLight,args:[a.light]});const p={},y=[];(function(T,A,D,N){let W;for(W in A=A||{},T=T||{})Object.prototype.hasOwnProperty.call(T,W)&&(Object.prototype.hasOwnProperty.call(A,W)||pt(W,D,N));for(W in A)Object.prototype.hasOwnProperty.call(A,W)&&(Object.prototype.hasOwnProperty.call(T,W)?fe(T[W],A[W])||(T[W].type==="geojson"&&A[W].type==="geojson"&&zt(T,A,W)?D.push({command:Pe.setGeoJSONSourceData,args:[W,A[W].data]}):ht(W,A,D,N)):Ge(W,A,D))})(c.sources,a.sources,y,p);const S=[];c.layers&&c.layers.forEach(T=>{p[T.source]?h.push({command:Pe.removeLayer,args:[T.id]}):S.push(T)}),h=h.concat(y),function(T,A,D){A=A||[];const N=(T=T||[]).map(Gt),W=A.map(Gt),J=T.reduce(ln,{}),se=A.reduce(ln,{}),oe=N.slice(),ce=Object.create(null);let Te,we,je,Je,Ne,rt,ct;for(Te=0,we=0;Te<N.length;Te++)je=N[Te],Object.prototype.hasOwnProperty.call(se,je)?we++:(D.push({command:Pe.removeLayer,args:[je]}),oe.splice(oe.indexOf(je,we),1));for(Te=0,we=0;Te<W.length;Te++)je=W[W.length-1-Te],oe[oe.length-1-Te]!==je&&(Object.prototype.hasOwnProperty.call(J,je)?(D.push({command:Pe.removeLayer,args:[je]}),oe.splice(oe.lastIndexOf(je,oe.length-we),1)):we++,rt=oe[oe.length-Te],D.push({command:Pe.addLayer,args:[se[je],rt]}),oe.splice(oe.length-Te,0,je),ce[je]=!0);for(Te=0;Te<W.length;Te++)if(je=W[Te],Je=J[je],Ne=se[je],!ce[je]&&!fe(Je,Ne))if(fe(Je.source,Ne.source)&&fe(Je["source-layer"],Ne["source-layer"])&&fe(Je.type,Ne.type)){for(ct in Dt(Je.layout,Ne.layout,D,je,null,Pe.setLayoutProperty),Dt(Je.paint,Ne.paint,D,je,null,Pe.setPaintProperty),fe(Je.filter,Ne.filter)||D.push({command:Pe.setFilter,args:[je,Ne.filter]}),fe(Je.minzoom,Ne.minzoom)&&fe(Je.maxzoom,Ne.maxzoom)||D.push({command:Pe.setLayerZoomRange,args:[je,Ne.minzoom,Ne.maxzoom]}),Je)Object.prototype.hasOwnProperty.call(Je,ct)&&ct!=="layout"&&ct!=="paint"&&ct!=="filter"&&ct!=="metadata"&&ct!=="minzoom"&&ct!=="maxzoom"&&(ct.indexOf("paint.")===0?Dt(Je[ct],Ne[ct],D,je,ct.slice(6),Pe.setPaintProperty):fe(Je[ct],Ne[ct])||D.push({command:Pe.setLayerProperty,args:[je,ct,Ne[ct]]}));for(ct in Ne)Object.prototype.hasOwnProperty.call(Ne,ct)&&!Object.prototype.hasOwnProperty.call(Je,ct)&&ct!=="layout"&&ct!=="paint"&&ct!=="filter"&&ct!=="metadata"&&ct!=="minzoom"&&ct!=="maxzoom"&&(ct.indexOf("paint.")===0?Dt(Je[ct],Ne[ct],D,je,ct.slice(6),Pe.setPaintProperty):fe(Je[ct],Ne[ct])||D.push({command:Pe.setLayerProperty,args:[je,ct,Ne[ct]]}))}else D.push({command:Pe.removeLayer,args:[je]}),rt=oe[oe.lastIndexOf(je)+1],D.push({command:Pe.addLayer,args:[Ne,rt]})}(S,a.layers,h)}catch(p){console.warn("Unable to compute style diff:",p),h=[{command:Pe.setStyle,args:[a]}]}return h},l.dot=function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]*a[3]},l.earthRadius=Zy,l.ease=$,l.emitValidationErrors=Il,l.emptyStyle=function(){const c={},a=ge.$version;for(const h in ge.$root){const p=ge.$root[h];if(p.required){let y=null;y=h==="version"?a:p.type==="array"?[]:{},y!=null&&(c[h]=y)}}return c},l.equals=function(c,a){var h=c[0],p=c[1],y=c[2],S=c[3],T=c[4],A=c[5],D=c[6],N=c[7],W=c[8],J=c[9],se=c[10],oe=c[11],ce=c[12],Te=c[13],we=c[14],je=c[15],Je=a[0],Ne=a[1],rt=a[2],ct=a[3],Tt=a[4],cn=a[5],gn=a[6],en=a[7],Kt=a[8],Ht=a[9],tn=a[10],Xt=a[11],Ft=a[12],Tn=a[13],yn=a[14],Zn=a[15];return Math.abs(h-Je)<=Qr*Math.max(1,Math.abs(h),Math.abs(Je))&&Math.abs(p-Ne)<=Qr*Math.max(1,Math.abs(p),Math.abs(Ne))&&Math.abs(y-rt)<=Qr*Math.max(1,Math.abs(y),Math.abs(rt))&&Math.abs(S-ct)<=Qr*Math.max(1,Math.abs(S),Math.abs(ct))&&Math.abs(T-Tt)<=Qr*Math.max(1,Math.abs(T),Math.abs(Tt))&&Math.abs(A-cn)<=Qr*Math.max(1,Math.abs(A),Math.abs(cn))&&Math.abs(D-gn)<=Qr*Math.max(1,Math.abs(D),Math.abs(gn))&&Math.abs(N-en)<=Qr*Math.max(1,Math.abs(N),Math.abs(en))&&Math.abs(W-Kt)<=Qr*Math.max(1,Math.abs(W),Math.abs(Kt))&&Math.abs(J-Ht)<=Qr*Math.max(1,Math.abs(J),Math.abs(Ht))&&Math.abs(se-tn)<=Qr*Math.max(1,Math.abs(se),Math.abs(tn))&&Math.abs(oe-Xt)<=Qr*Math.max(1,Math.abs(oe),Math.abs(Xt))&&Math.abs(ce-Ft)<=Qr*Math.max(1,Math.abs(ce),Math.abs(Ft))&&Math.abs(Te-Tn)<=Qr*Math.max(1,Math.abs(Te),Math.abs(Tn))&&Math.abs(we-yn)<=Qr*Math.max(1,Math.abs(we),Math.abs(yn))&&Math.abs(je-Zn)<=Qr*Math.max(1,Math.abs(je),Math.abs(Zn))},l.evaluateSizeForFeature=function(c,{uSize:a,uSizeT:h},{lowerSize:p,upperSize:y}){return c.kind==="source"?p/Zo:c.kind==="composite"?Xr.number(p/Zo,y/Zo,h):a},l.evaluateSizeForZoom=function(c,a){let h=0,p=0;if(c.kind==="constant")p=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:y,minZoom:S,maxZoom:T}=c,A=y?F(os.interpolationFactor(y,a,S,T),0,1):0;c.kind==="camera"?p=Xr.number(c.minSize,c.maxSize,A):h=A}return{uSizeT:h,uSize:p}},l.evaluateVariableOffset=SS,l.evented=td,l.exported=$t,l.extend=ee,l.filterObject=be,l.findLineIntersection=function(c,a,h,p){const y=a.y-c.y,S=a.x-c.x,T=p.y-h.y,A=p.x-h.x,D=T*S-A*y;if(D===0)return null;const N=(A*(c.y-h.y)-T*(c.x-h.x))/D;return new w(c.x+N*S,c.y+N*y)},l.fromScaling=function(c,a){return c[0]=a[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=a[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=a[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},l.getAnchorAlignment=jy,l.getAnchorJustification=Jy,l.getArrayBuffer=ut,l.getDefaultExportFromCjs=m,l.getJSON=function(c,a){return Ke(ee(c,{type:"json"}),a)},l.getOverlapMode=Vy,l.getProtocolAction=dt,l.getRTLTextPluginStatus=rf,l.getReferrer=et,l.getVideo=function(c,a){const h=window.document.createElement("video");h.muted=!0,h.onloadstart=function(){a(null,h)};for(let p=0;p<c.length;p++){const y=window.document.createElement("source");Ot(c[p])||(h.crossOrigin="Anonymous"),y.src=c[p],h.appendChild(y)}return{cancel:()=>{}}},l.groupByLayout=function(c,a){const h={};for(let y=0;y<c.length;y++){const S=a&&a[c[y].id]||my(c[y]);a&&(a[c[y].id]=S);let T=h[S];T||(T=h[S]=[]),T.push(c[y])}const p=[];for(const y in h)p.push(h[y]);return p},l.identity=Ty,l.interpolate=Xr,l.invert=function(c,a){var h=a[0],p=a[1],y=a[2],S=a[3],T=a[4],A=a[5],D=a[6],N=a[7],W=a[8],J=a[9],se=a[10],oe=a[11],ce=a[12],Te=a[13],we=a[14],je=a[15],Je=h*A-p*T,Ne=h*D-y*T,rt=h*N-S*T,ct=p*D-y*A,Tt=p*N-S*A,cn=y*N-S*D,gn=W*Te-J*ce,en=W*we-se*ce,Kt=W*je-oe*ce,Ht=J*we-se*Te,tn=J*je-oe*Te,Xt=se*je-oe*we,Ft=Je*Xt-Ne*tn+rt*Ht+ct*Kt-Tt*en+cn*gn;return Ft?(c[0]=(A*Xt-D*tn+N*Ht)*(Ft=1/Ft),c[1]=(y*tn-p*Xt-S*Ht)*Ft,c[2]=(Te*cn-we*Tt+je*ct)*Ft,c[3]=(se*Tt-J*cn-oe*ct)*Ft,c[4]=(D*Kt-T*Xt-N*en)*Ft,c[5]=(h*Xt-y*Kt+S*en)*Ft,c[6]=(we*rt-ce*cn-je*Ne)*Ft,c[7]=(W*cn-se*rt+oe*Ne)*Ft,c[8]=(T*tn-A*Kt+N*gn)*Ft,c[9]=(p*Kt-h*tn-S*gn)*Ft,c[10]=(ce*Tt-Te*rt+je*Je)*Ft,c[11]=(J*rt-W*Tt-oe*Je)*Ft,c[12]=(A*en-T*Ht-D*gn)*Ft,c[13]=(h*Ht-p*en+y*gn)*Ft,c[14]=(Te*Ne-ce*ct-we*Je)*Ft,c[15]=(W*ct-J*Ne+se*Je)*Ft,c):null},l.isImageBitmap=Ce,l.isSafari=Ee,l.isWorker=X,l.keysDifference=function(c,a){const h=[];for(const p in c)p in a||h.push(p);return h},l.lazyLoadRTLTextPlugin=function(){Ms.isLoading()||Ms.isLoaded()||rf()!=="deferred"||Ym()},l.makeRequest=Ke,l.mapObject=ae,l.mercatorXfromLng=rS,l.mercatorYfromLat=sS,l.mercatorZfromAltitude=aS,l.mul=lD,l.mul$1=function(c,a,h){return c[0]=a[0]*h[0],c[1]=a[1]*h[1],c[2]=a[2]*h[2],c[3]=a[3]*h[3],c},l.multiply=uw,l.nextPowerOfTwo=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},l.operations=Pe,l.ortho=function(c,a,h,p,y,S,T){var A=1/(a-h),D=1/(p-y),N=1/(S-T);return c[0]=-2*A,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*D,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*N,c[11]=0,c[12]=(a+h)*A,c[13]=(y+p)*D,c[14]=(T+S)*N,c[15]=1,c},l.parseCacheControl=function(c){const a={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,p,y,S)=>{const T=y||S;return a[p]=!T||T.toLowerCase(),""}),a["max-age"]){const h=parseInt(a["max-age"],10);isNaN(h)?delete a["max-age"]:a["max-age"]=h}return a},l.parseGlyphPbf=function(c){return new By(c).readFields(oL,[])},l.pbf=Fw,l.performSymbolLayout=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=$i/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const a=c.bucket.layers[0].layout,h=c.bucket.layers[0]._unevaluatedLayout._values,p={layoutIconSize:h["icon-size"].possiblyEvaluate(new Fi(c.bucket.zoom+1),c.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new Fi(c.bucket.zoom+1),c.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new Fi(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:D,maxZoom:N}=c.bucket.textSizeData;p.compositeTextSizes=[h["text-size"].possiblyEvaluate(new Fi(D),c.canonical),h["text-size"].possiblyEvaluate(new Fi(N),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:D,maxZoom:N}=c.bucket.iconSizeData;p.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new Fi(D),c.canonical),h["icon-size"].possiblyEvaluate(new Fi(N),c.canonical)]}const y=a.get("text-line-height")*Cr,S=a.get("text-rotation-alignment")!=="viewport"&&a.get("symbol-placement")!=="point",T=a.get("text-keep-upright"),A=a.get("text-size");for(const D of c.bucket.features){const N=a.get("text-font").evaluate(D,{},c.canonical).join(","),W=A.evaluate(D,{},c.canonical),J=p.layoutTextSize.evaluate(D,{},c.canonical),se=p.layoutIconSize.evaluate(D,{},c.canonical),oe={horizontal:{},vertical:void 0},ce=D.text;let Te,we=[0,0];if(ce){const Ne=ce.toString(),rt=a.get("text-letter-spacing").evaluate(D,{},c.canonical)*Cr,ct=Qh(Ne)?rt:0,Tt=a.get("text-anchor").evaluate(D,{},c.canonical),cn=a.get("text-variable-anchor");if(!cn){const tn=a.get("text-radial-offset").evaluate(D,{},c.canonical);we=tn?SS(Tt,[tn*Cr,Yy]):a.get("text-offset").evaluate(D,{},c.canonical).map(Xt=>Xt*Cr)}let gn=S?"center":a.get("text-justify").evaluate(D,{},c.canonical);const en=a.get("symbol-placement"),Kt=en==="point"?a.get("text-max-width").evaluate(D,{},c.canonical)*Cr:0,Ht=()=>{c.bucket.allowVerticalPlacement&&Xu(Ne)&&(oe.vertical=fg(ce,c.glyphMap,c.glyphPositions,c.imagePositions,N,Kt,y,Tt,"left",ct,we,l.WritingMode.vertical,!0,en,J,W))};if(!S&&cn){const tn=gn==="auto"?cn.map(Ft=>Jy(Ft)):[gn];let Xt=!1;for(let Ft=0;Ft<tn.length;Ft++){const Tn=tn[Ft];if(!oe.horizontal[Tn])if(Xt)oe.horizontal[Tn]=oe.horizontal[0];else{const yn=fg(ce,c.glyphMap,c.glyphPositions,c.imagePositions,N,Kt,y,"center",Tn,ct,we,l.WritingMode.horizontal,!1,en,J,W);yn&&(oe.horizontal[Tn]=yn,Xt=yn.positionedLines.length===1)}}Ht()}else{gn==="auto"&&(gn=Jy(Tt));const tn=fg(ce,c.glyphMap,c.glyphPositions,c.imagePositions,N,Kt,y,Tt,gn,ct,we,l.WritingMode.horizontal,!1,en,J,W);tn&&(oe.horizontal[gn]=tn),Ht(),Xu(Ne)&&S&&T&&(oe.vertical=fg(ce,c.glyphMap,c.glyphPositions,c.imagePositions,N,Kt,y,Tt,gn,ct,we,l.WritingMode.vertical,!1,en,J,W))}}let je=!1;if(D.icon&&D.icon.name){const Ne=c.imageMap[D.icon.name];Ne&&(Te=fL(c.imagePositions[D.icon.name],a.get("icon-offset").evaluate(D,{},c.canonical),a.get("icon-anchor").evaluate(D,{},c.canonical)),je=!!Ne.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=je:c.bucket.sdfIcons!==je&&j("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ne.pixelRatio!==c.bucket.pixelRatio||a.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const Je=ES(oe.horizontal)||oe.vertical;c.bucket.iconsInText=!!Je&&Je.iconsInText,(Je||Te)&&ML(c.bucket,D,oe,Te,c.imageMap,p,J,se,we,je,c.canonical)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},l.perspective=function(c,a,h,p,y){var S,T=1/Math.tan(a/2);return c[0]=T/h,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=T,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,y!=null&&y!==1/0?(c[10]=(y+p)*(S=1/(p-y)),c[14]=2*y*p*S):(c[10]=-1,c[14]=-2*p),c},l.pick=function(c,a){const h={};for(let p=0;p<a.length;p++){const y=a[p];y in c&&(h[y]=c[y])}return h},l.plugin=Ms,l.pointGeometry=g,l.polygonIntersectsPolygon=rw,l.potpack=Vw,l.register=dn,l.registerForPluginStateChange=function(c){return c({pluginStatus:Yr,pluginURL:go}),td.on("pluginStateChange",c),c},l.renderColorRamp=mw,l.rotateX=function(c,a,h){var p=Math.sin(h),y=Math.cos(h),S=a[4],T=a[5],A=a[6],D=a[7],N=a[8],W=a[9],J=a[10],se=a[11];return a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]),c[4]=S*y+N*p,c[5]=T*y+W*p,c[6]=A*y+J*p,c[7]=D*y+se*p,c[8]=N*y-S*p,c[9]=W*y-T*p,c[10]=J*y-A*p,c[11]=se*y-D*p,c},l.rotateZ=function(c,a,h){var p=Math.sin(h),y=Math.cos(h),S=a[0],T=a[1],A=a[2],D=a[3],N=a[4],W=a[5],J=a[6],se=a[7];return a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]),c[0]=S*y+N*p,c[1]=T*y+W*p,c[2]=A*y+J*p,c[3]=D*y+se*p,c[4]=N*y-S*p,c[5]=W*y-T*p,c[6]=J*y-A*p,c[7]=se*y-D*p,c},l.sameOrigin=Ot,l.scale=function(c,a,h){var p=h[0],y=h[1],S=h[2];return c[0]=a[0]*p,c[1]=a[1]*p,c[2]=a[2]*p,c[3]=a[3]*p,c[4]=a[4]*y,c[5]=a[5]*y,c[6]=a[6]*y,c[7]=a[7]*y,c[8]=a[8]*S,c[9]=a[9]*S,c[10]=a[10]*S,c[11]=a[11]*S,c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c},l.setRTLTextPlugin=function(c,a,h=!1){if(Yr===ef||Yr===ed||Yr===tf)throw new Error("setRTLTextPlugin cannot be called multiple times.");go=$t.resolveURL(c),Yr=ef,zc=a,nf(),h||Ym()},l.sphericalToCartesian=function([c,a,h]){return a+=90,a*=Math.PI/180,h*=Math.PI/180,{x:c*Math.cos(a)*Math.sin(h),y:c*Math.sin(a)*Math.sin(h),z:c*Math.cos(h)}},l.toEvaluationFeature=Hc,l.transformMat4=sg,l.translate=function(c,a,h){var p,y,S,T,A,D,N,W,J,se,oe,ce,Te=h[0],we=h[1],je=h[2];return a===c?(c[12]=a[0]*Te+a[4]*we+a[8]*je+a[12],c[13]=a[1]*Te+a[5]*we+a[9]*je+a[13],c[14]=a[2]*Te+a[6]*we+a[10]*je+a[14],c[15]=a[3]*Te+a[7]*we+a[11]*je+a[15]):(y=a[1],S=a[2],T=a[3],A=a[4],D=a[5],N=a[6],W=a[7],J=a[8],se=a[9],oe=a[10],ce=a[11],c[0]=p=a[0],c[1]=y,c[2]=S,c[3]=T,c[4]=A,c[5]=D,c[6]=N,c[7]=W,c[8]=J,c[9]=se,c[10]=oe,c[11]=ce,c[12]=p*Te+A*we+J*je+a[12],c[13]=y*Te+D*we+se*je+a[13],c[14]=S*Te+N*we+oe*je+a[14],c[15]=T*Te+W*we+ce*je+a[15]),c},l.triggerPluginCompletionEvent=Xm,l.unicodeBlockLookup=Jt,l.uniqueId=function(){return V++},l.v8Spec=ge,l.validateCustomStyleLayer=function(c){const a=[],h=c.id;return h===void 0&&a.push({message:`layers.${h}: missing required property "id"`}),c.render===void 0&&a.push({message:`layers.${h}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&a.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),a},l.validateLight=gy,l.validateStyle=mo,l.vectorTile=kl,l.warnOnce=j,l.wrap=U}),u(["./shared"],function(l){class m{constructor(Y){this.keyCache={},Y&&this.replace(Y)}replace(Y){this._layerConfigs={},this._layers={},this.update(Y,[])}update(Y,re){for(const Ie of Y){this._layerConfigs[Ie.id]=Ie;const $e=this._layers[Ie.id]=l.createStyleLayer(Ie);$e._featureFilter=l.createFilter($e.filter),this.keyCache[Ie.id]&&delete this.keyCache[Ie.id]}for(const Ie of re)delete this.keyCache[Ie],delete this._layerConfigs[Ie],delete this._layers[Ie];this.familiesBySource={};const pe=l.groupByLayout(Object.values(this._layerConfigs),this.keyCache);for(const Ie of pe){const $e=Ie.map(bt=>this._layers[bt.id]),qe=$e[0];if(qe.visibility==="none")continue;const Ve=qe.source||"";let Le=this.familiesBySource[Ve];Le||(Le=this.familiesBySource[Ve]={});const Ze=qe.sourceLayer||"_geojsonTileLayer";let wt=Le[Ze];wt||(wt=Le[Ze]=[]),wt.push($e)}}}class g{constructor(Y){const re={},pe=[];for(const Ve in Y){const Le=Y[Ve],Ze=re[Ve]={};for(const wt in Le){const bt=Le[+wt];if(!bt||bt.bitmap.width===0||bt.bitmap.height===0)continue;const Et={x:0,y:0,w:bt.bitmap.width+2,h:bt.bitmap.height+2};pe.push(Et),Ze[wt]={rect:Et,metrics:bt.metrics}}}const{w:Ie,h:$e}=l.potpack(pe),qe=new l.AlphaImage({width:Ie||1,height:$e||1});for(const Ve in Y){const Le=Y[Ve];for(const Ze in Le){const wt=Le[+Ze];if(!wt||wt.bitmap.width===0||wt.bitmap.height===0)continue;const bt=re[Ve][Ze].rect;l.AlphaImage.copy(wt.bitmap,qe,{x:0,y:0},{x:bt.x+1,y:bt.y+1},wt.bitmap)}}this.image=qe,this.positions=re}}l.register("GlyphAtlas",g);class x{constructor(Y){this.tileID=new l.OverscaledTileID(Y.tileID.overscaledZ,Y.tileID.wrap,Y.tileID.canonical.z,Y.tileID.canonical.x,Y.tileID.canonical.y),this.uid=Y.uid,this.zoom=Y.zoom,this.pixelRatio=Y.pixelRatio,this.tileSize=Y.tileSize,this.source=Y.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Y.showCollisionBoxes,this.collectResourceTiming=!!Y.collectResourceTiming,this.returnDependencies=!!Y.returnDependencies,this.promoteId=Y.promoteId}parse(Y,re,pe,Ie,$e){this.status="parsing",this.data=Y,this.collisionBoxArray=new l.CollisionBoxArray;const qe=new l.DictionaryCoder(Object.keys(Y.layers).sort()),Ve=new l.FeatureIndex(this.tileID,this.promoteId);Ve.bucketLayerIDs=[];const Le={},Ze={featureIndex:Ve,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:pe},wt=re.familiesBySource[this.source];for(const $n in wt){const jt=Y.layers[$n];if(!jt)continue;jt.version===1&&l.warnOnce(`Vector tile source "${this.source}" layer "${$n}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const He=qe.encode($n),It=[];for(let gt=0;gt<jt.length;gt++){const ze=jt.feature(gt),yt=Ve.getId(ze,$n);It.push({feature:ze,id:yt,index:gt,sourceLayerIndex:He})}for(const gt of wt[$n]){const ze=gt[0];ze.source!==this.source&&l.warnOnce(`layer.source = ${ze.source} does not equal this.source = ${this.source}`),ze.minzoom&&this.zoom<Math.floor(ze.minzoom)||ze.maxzoom&&this.zoom>=ze.maxzoom||ze.visibility!=="none"&&(w(gt,this.zoom,pe),(Le[ze.id]=ze.createBucket({index:Ve.bucketLayerIDs.length,layers:gt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:He,sourceID:this.source})).populate(It,Ze,this.tileID.canonical),Ve.bucketLayerIDs.push(gt.map(yt=>yt.id)))}}let bt,Et,pn,wn;const un=l.mapObject(Ze.glyphDependencies,$n=>Object.keys($n).map(Number));Object.keys(un).length?Ie.send("getGlyphs",{uid:this.uid,stacks:un,source:this.source,tileID:this.tileID,type:"glyphs"},($n,jt)=>{bt||(bt=$n,Et=jt,Vn.call(this))}):Et={};const mn=Object.keys(Ze.iconDependencies);mn.length?Ie.send("getImages",{icons:mn,source:this.source,tileID:this.tileID,type:"icons"},($n,jt)=>{bt||(bt=$n,pn=jt,Vn.call(this))}):pn={};const En=Object.keys(Ze.patternDependencies);function Vn(){if(bt)return $e(bt);if(Et&&pn&&wn){const $n=new g(Et),jt=new l.ImageAtlas(pn,wn);for(const He in Le){const It=Le[He];It instanceof l.SymbolBucket?(w(It.layers,this.zoom,pe),l.performSymbolLayout({bucket:It,glyphMap:Et,glyphPositions:$n.positions,imageMap:pn,imagePositions:jt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):It.hasPattern&&(It instanceof l.LineBucket||It instanceof l.FillBucket||It instanceof l.FillExtrusionBucket)&&(w(It.layers,this.zoom,pe),It.addFeatures(Ze,this.tileID.canonical,jt.patternPositions))}this.status="done",$e(null,{buckets:Object.values(Le).filter(He=>!He.isEmpty()),featureIndex:Ve,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:$n.image,imageAtlas:jt,glyphMap:this.returnDependencies?Et:null,iconMap:this.returnDependencies?pn:null,glyphPositions:this.returnDependencies?$n.positions:null})}}En.length?Ie.send("getImages",{icons:En,source:this.source,tileID:this.tileID,type:"patterns"},($n,jt)=>{bt||(bt=$n,wn=jt,Vn.call(this))}):wn={},Vn.call(this)}}function w(de,Y,re){const pe=new l.EvaluationParameters(Y);for(const Ie of de)Ie.recalculate(pe,re)}function C(de,Y){const re=l.getArrayBuffer(de.request,(pe,Ie,$e,qe)=>{pe?Y(pe):Ie&&Y(null,{vectorTile:new l.vectorTile.VectorTile(new l.Protobuf(Ie)),rawData:Ie,cacheControl:$e,expires:qe})});return()=>{re.cancel(),Y()}}class I{constructor(Y,re,pe,Ie){this.actor=Y,this.layerIndex=re,this.availableImages=pe,this.loadVectorData=Ie||C,this.loading={},this.loaded={}}loadTile(Y,re){const pe=Y.uid;this.loading||(this.loading={});const Ie=!!(Y&&Y.request&&Y.request.collectResourceTiming)&&new l.RequestPerformance(Y.request),$e=this.loading[pe]=new x(Y);$e.abort=this.loadVectorData(Y,(qe,Ve)=>{if(delete this.loading[pe],qe||!Ve)return $e.status="done",this.loaded[pe]=$e,re(qe);const Le=Ve.rawData,Ze={};Ve.expires&&(Ze.expires=Ve.expires),Ve.cacheControl&&(Ze.cacheControl=Ve.cacheControl);const wt={};if(Ie){const bt=Ie.finish();bt&&(wt.resourceTiming=JSON.parse(JSON.stringify(bt)))}$e.vectorTile=Ve.vectorTile,$e.parse(Ve.vectorTile,this.layerIndex,this.availableImages,this.actor,(bt,Et)=>{if(bt||!Et)return re(bt);re(null,l.extend({rawTileData:Le.slice(0)},Et,Ze,wt))}),this.loaded=this.loaded||{},this.loaded[pe]=$e})}reloadTile(Y,re){const pe=this.loaded,Ie=Y.uid,$e=this;if(pe&&pe[Ie]){const qe=pe[Ie];qe.showCollisionBoxes=Y.showCollisionBoxes;const Ve=(Le,Ze)=>{const wt=qe.reloadCallback;wt&&(delete qe.reloadCallback,qe.parse(qe.vectorTile,$e.layerIndex,this.availableImages,$e.actor,wt)),re(Le,Ze)};qe.status==="parsing"?qe.reloadCallback=Ve:qe.status==="done"&&(qe.vectorTile?qe.parse(qe.vectorTile,this.layerIndex,this.availableImages,this.actor,Ve):Ve())}}abortTile(Y,re){const pe=this.loading,Ie=Y.uid;pe&&pe[Ie]&&pe[Ie].abort&&(pe[Ie].abort(),delete pe[Ie]),re()}removeTile(Y,re){const pe=this.loaded,Ie=Y.uid;pe&&pe[Ie]&&delete pe[Ie],re()}}class M{constructor(){this.loaded={}}loadTile(Y,re){const{uid:pe,encoding:Ie,rawImageData:$e}=Y,qe=l.isImageBitmap($e)?this.getImageData($e):$e,Ve=new l.DEMData(pe,qe,Ie);this.loaded=this.loaded||{},this.loaded[pe]=Ve,re(null,Ve)}getImageData(Y){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Y.width,Y.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Y.width,this.offscreenCanvas.height=Y.height,this.offscreenCanvasContext.drawImage(Y,0,0,Y.width,Y.height);const re=this.offscreenCanvasContext.getImageData(-1,-1,Y.width+2,Y.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:re.width,height:re.height},re.data)}removeTile(Y){const re=this.loaded,pe=Y.uid;re&&re[pe]&&delete re[pe]}}function L(de,Y){if(de.length!==0){$(de[0],Y);for(var re=1;re<de.length;re++)$(de[re],!Y)}}function $(de,Y){for(var re=0,pe=0,Ie=0,$e=de.length,qe=$e-1;Ie<$e;qe=Ie++){var Ve=(de[Ie][0]-de[qe][0])*(de[qe][1]+de[Ie][1]),Le=re+Ve;pe+=Math.abs(re)>=Math.abs(Ve)?re-Le+Ve:Ve-Le+re,re=Le}re+pe>=0!=!!Y&&de.reverse()}var F=l.getDefaultExportFromCjs(function de(Y,re){var pe,Ie=Y&&Y.type;if(Ie==="FeatureCollection")for(pe=0;pe<Y.features.length;pe++)de(Y.features[pe],re);else if(Ie==="GeometryCollection")for(pe=0;pe<Y.geometries.length;pe++)de(Y.geometries[pe],re);else if(Ie==="Feature")de(Y.geometry,re);else if(Ie==="Polygon")L(Y.coordinates,re);else if(Ie==="MultiPolygon")for(pe=0;pe<Y.coordinates.length;pe++)L(Y.coordinates[pe],re);return Y});const U=l.vectorTile.VectorTileFeature.prototype.toGeoJSON;var ee={exports:{}},V=l.pointGeometry,Q=l.vectorTile.VectorTileFeature,ae=be;function be(de,Y){this.options=Y||{},this.features=de,this.length=de.length}function te(de,Y){this.id=typeof de.id=="number"?de.id:void 0,this.type=de.type,this.rawGeometry=de.type===1?[de.geometry]:de.geometry,this.properties=de.tags,this.extent=Y||4096}be.prototype.feature=function(de){return new te(this.features[de],this.options.extent)},te.prototype.loadGeometry=function(){var de=this.rawGeometry;this.geometry=[];for(var Y=0;Y<de.length;Y++){for(var re=de[Y],pe=[],Ie=0;Ie<re.length;Ie++)pe.push(new V(re[Ie][0],re[Ie][1]));this.geometry.push(pe)}return this.geometry},te.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var de=this.geometry,Y=1/0,re=-1/0,pe=1/0,Ie=-1/0,$e=0;$e<de.length;$e++)for(var qe=de[$e],Ve=0;Ve<qe.length;Ve++){var Le=qe[Ve];Y=Math.min(Y,Le.x),re=Math.max(re,Le.x),pe=Math.min(pe,Le.y),Ie=Math.max(Ie,Le.y)}return[Y,pe,re,Ie]},te.prototype.toGeoJSON=Q.prototype.toGeoJSON;var G=l.pbf,j=ae;function z(de){var Y=new G;return function(re,pe){for(var Ie in re.layers)pe.writeMessage(3,ie,re.layers[Ie])}(de,Y),Y.finish()}function ie(de,Y){var re;Y.writeVarintField(15,de.version||1),Y.writeStringField(1,de.name||""),Y.writeVarintField(5,de.extent||4096);var pe={keys:[],values:[],keycache:{},valuecache:{}};for(re=0;re<de.length;re++)pe.feature=de.feature(re),Y.writeMessage(2,X,pe);var Ie=pe.keys;for(re=0;re<Ie.length;re++)Y.writeStringField(3,Ie[re]);var $e=pe.values;for(re=0;re<$e.length;re++)Y.writeMessage(4,at,$e[re])}function X(de,Y){var re=de.feature;re.id!==void 0&&Y.writeVarintField(1,re.id),Y.writeMessage(2,ne,de),Y.writeVarintField(3,re.type),Y.writeMessage(4,Xe,re)}function ne(de,Y){var re=de.feature,pe=de.keys,Ie=de.values,$e=de.keycache,qe=de.valuecache;for(var Ve in re.properties){var Le=re.properties[Ve],Ze=$e[Ve];if(Le!==null){Ze===void 0&&(pe.push(Ve),$e[Ve]=Ze=pe.length-1),Y.writeVarint(Ze);var wt=typeof Le;wt!=="string"&&wt!=="boolean"&&wt!=="number"&&(Le=JSON.stringify(Le));var bt=wt+":"+Le,Et=qe[bt];Et===void 0&&(Ie.push(Le),qe[bt]=Et=Ie.length-1),Y.writeVarint(Et)}}}function Ee(de,Y){return(Y<<3)+(7&de)}function Ce(de){return de<<1^de>>31}function Xe(de,Y){for(var re=de.loadGeometry(),pe=de.type,Ie=0,$e=0,qe=re.length,Ve=0;Ve<qe;Ve++){var Le=re[Ve],Ze=1;pe===1&&(Ze=Le.length),Y.writeVarint(Ee(1,Ze));for(var wt=pe===3?Le.length-1:Le.length,bt=0;bt<wt;bt++){bt===1&&pe!==1&&Y.writeVarint(Ee(2,wt-1));var Et=Le[bt].x-Ie,pn=Le[bt].y-$e;Y.writeVarint(Ce(Et)),Y.writeVarint(Ce(pn)),Ie+=Et,$e+=pn}pe===3&&Y.writeVarint(Ee(7,1))}}function at(de,Y){var re=typeof de;re==="string"?Y.writeStringField(1,de):re==="boolean"?Y.writeBooleanField(7,de):re==="number"&&(de%1!=0?Y.writeDoubleField(3,de):de<0?Y.writeSVarintField(6,de):Y.writeVarintField(5,de))}ee.exports=z,ee.exports.fromVectorTileJs=z,ee.exports.fromGeojsonVt=function(de,Y){Y=Y||{};var re={};for(var pe in de)re[pe]=new j(de[pe].features,Y),re[pe].name=pe,re[pe].version=Y.version,re[pe].extent=Y.extent;return z({layers:re})},ee.exports.GeoJSONWrapper=j;var it=l.getDefaultExportFromCjs(ee.exports);const $t={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:de=>de},Ct=Math.fround||(tt=new Float32Array(1),de=>(tt[0]=+de,tt[0]));var tt;class et{constructor(Y){this.options=Object.assign(Object.create($t),Y),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Y){const{log:re,minZoom:pe,maxZoom:Ie}=this.options;re&&console.time("total time");const $e=`prepare ${Y.length} points`;re&&console.time($e),this.points=Y;const qe=[];for(let Le=0;Le<Y.length;Le++){const Ze=Y[Le];if(!Ze.geometry)continue;const[wt,bt]=Ze.geometry.coordinates,Et=Ct(Ke(wt)),pn=Ct(ut(bt));qe.push(Et,pn,1/0,Le,-1,1),this.options.reduce&&qe.push(0)}let Ve=this.trees[Ie+1]=this._createTree(qe);re&&console.timeEnd($e);for(let Le=Ie;Le>=pe;Le--){const Ze=+Date.now();Ve=this.trees[Le]=this._createTree(this._cluster(Ve,Le)),re&&console.log("z%d: %d clusters in %dms",Le,Ve.numItems,+Date.now()-Ze)}return re&&console.timeEnd("total time"),this}getClusters(Y,re){let pe=((Y[0]+180)%360+360)%360-180;const Ie=Math.max(-90,Math.min(90,Y[1]));let $e=Y[2]===180?180:((Y[2]+180)%360+360)%360-180;const qe=Math.max(-90,Math.min(90,Y[3]));if(Y[2]-Y[0]>=360)pe=-180,$e=180;else if(pe>$e){const bt=this.getClusters([pe,Ie,180,qe],re),Et=this.getClusters([-180,Ie,$e,qe],re);return bt.concat(Et)}const Ve=this.trees[this._limitZoom(re)],Le=Ve.range(Ke(pe),ut(qe),Ke($e),ut(Ie)),Ze=Ve.data,wt=[];for(const bt of Le){const Et=this.stride*bt;wt.push(Ze[Et+5]>1?dt(Ze,Et,this.clusterProps):this.points[Ze[Et+3]])}return wt}getChildren(Y){const re=this._getOriginId(Y),pe=this._getOriginZoom(Y),Ie="No cluster with the specified id.",$e=this.trees[pe];if(!$e)throw new Error(Ie);const qe=$e.data;if(re*this.stride>=qe.length)throw new Error(Ie);const Ve=this.options.radius/(this.options.extent*Math.pow(2,pe-1)),Le=$e.within(qe[re*this.stride],qe[re*this.stride+1],Ve),Ze=[];for(const wt of Le){const bt=wt*this.stride;qe[bt+4]===Y&&Ze.push(qe[bt+5]>1?dt(qe,bt,this.clusterProps):this.points[qe[bt+3]])}if(Ze.length===0)throw new Error(Ie);return Ze}getLeaves(Y,re,pe){const Ie=[];return this._appendLeaves(Ie,Y,re=re||10,pe=pe||0,0),Ie}getTile(Y,re,pe){const Ie=this.trees[this._limitZoom(Y)],$e=Math.pow(2,Y),{extent:qe,radius:Ve}=this.options,Le=Ve/qe,Ze=(pe-Le)/$e,wt=(pe+1+Le)/$e,bt={features:[]};return this._addTileFeatures(Ie.range((re-Le)/$e,Ze,(re+1+Le)/$e,wt),Ie.data,re,pe,$e,bt),re===0&&this._addTileFeatures(Ie.range(1-Le/$e,Ze,1,wt),Ie.data,$e,pe,$e,bt),re===$e-1&&this._addTileFeatures(Ie.range(0,Ze,Le/$e,wt),Ie.data,-1,pe,$e,bt),bt.features.length?bt:null}getClusterExpansionZoom(Y){let re=this._getOriginZoom(Y)-1;for(;re<=this.options.maxZoom;){const pe=this.getChildren(Y);if(re++,pe.length!==1)break;Y=pe[0].properties.cluster_id}return re}_appendLeaves(Y,re,pe,Ie,$e){const qe=this.getChildren(re);for(const Ve of qe){const Le=Ve.properties;if(Le&&Le.cluster?$e+Le.point_count<=Ie?$e+=Le.point_count:$e=this._appendLeaves(Y,Le.cluster_id,pe,Ie,$e):$e<Ie?$e++:Y.push(Ve),Y.length===pe)break}return $e}_createTree(Y){const re=new l.KDBush(Y.length/this.stride|0,this.options.nodeSize,Float32Array);for(let pe=0;pe<Y.length;pe+=this.stride)re.add(Y[pe],Y[pe+1]);return re.finish(),re.data=Y,re}_addTileFeatures(Y,re,pe,Ie,$e,qe){for(const Ve of Y){const Le=Ve*this.stride,Ze=re[Le+5]>1;let wt,bt,Et;if(Ze)wt=Be(re,Le,this.clusterProps),bt=re[Le],Et=re[Le+1];else{const un=this.points[re[Le+3]];wt=un.properties;const[mn,En]=un.geometry.coordinates;bt=Ke(mn),Et=ut(En)}const pn={type:1,geometry:[[Math.round(this.options.extent*(bt*$e-pe)),Math.round(this.options.extent*(Et*$e-Ie))]],tags:wt};let wn;wn=Ze||this.options.generateId?re[Le+3]:this.points[re[Le+3]].id,wn!==void 0&&(pn.id=wn),qe.features.push(pn)}}_limitZoom(Y){return Math.max(this.options.minZoom,Math.min(Math.floor(+Y),this.options.maxZoom+1))}_cluster(Y,re){const{radius:pe,extent:Ie,reduce:$e,minPoints:qe}=this.options,Ve=pe/(Ie*Math.pow(2,re)),Le=Y.data,Ze=[],wt=this.stride;for(let bt=0;bt<Le.length;bt+=wt){if(Le[bt+2]<=re)continue;Le[bt+2]=re;const Et=Le[bt],pn=Le[bt+1],wn=Y.within(Le[bt],Le[bt+1],Ve),un=Le[bt+5];let mn=un;for(const En of wn){const Vn=En*wt;Le[Vn+2]>re&&(mn+=Le[Vn+5])}if(mn>un&&mn>=qe){let En,Vn=Et*un,$n=pn*un,jt=-1;const He=((bt/wt|0)<<5)+(re+1)+this.points.length;for(const It of wn){const gt=It*wt;if(Le[gt+2]<=re)continue;Le[gt+2]=re;const ze=Le[gt+5];Vn+=Le[gt]*ze,$n+=Le[gt+1]*ze,Le[gt+4]=He,$e&&(En||(En=this._map(Le,bt,!0),jt=this.clusterProps.length,this.clusterProps.push(En)),$e(En,this._map(Le,gt)))}Le[bt+4]=He,Ze.push(Vn/mn,$n/mn,1/0,He,-1,mn),$e&&Ze.push(jt)}else{for(let En=0;En<wt;En++)Ze.push(Le[bt+En]);if(mn>1)for(const En of wn){const Vn=En*wt;if(!(Le[Vn+2]<=re)){Le[Vn+2]=re;for(let $n=0;$n<wt;$n++)Ze.push(Le[Vn+$n])}}}}return Ze}_getOriginId(Y){return Y-this.points.length>>5}_getOriginZoom(Y){return(Y-this.points.length)%32}_map(Y,re,pe){if(Y[re+5]>1){const qe=this.clusterProps[Y[re+6]];return pe?Object.assign({},qe):qe}const Ie=this.points[Y[re+3]].properties,$e=this.options.map(Ie);return pe&&$e===Ie?Object.assign({},$e):$e}}function dt(de,Y,re){return{type:"Feature",id:de[Y+3],properties:Be(de,Y,re),geometry:{type:"Point",coordinates:[(pe=de[Y],360*(pe-.5)),Ot(de[Y+1])]}};var pe}function Be(de,Y,re){const pe=de[Y+5],Ie=pe>=1e4?`${Math.round(pe/1e3)}k`:pe>=1e3?Math.round(pe/100)/10+"k":pe,$e=de[Y+6],qe=$e===-1?{}:Object.assign({},re[$e]);return Object.assign(qe,{cluster:!0,cluster_id:de[Y+3],point_count:pe,point_count_abbreviated:Ie})}function Ke(de){return de/360+.5}function ut(de){const Y=Math.sin(de*Math.PI/180),re=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return re<0?0:re>1?1:re}function Ot(de){const Y=(180-360*de)*Math.PI/180;return 360*Math.atan(Math.exp(Y))/Math.PI-90}function Vt(de,Y,re,pe){for(var Ie,$e=pe,qe=re-Y>>1,Ve=re-Y,Le=de[Y],Ze=de[Y+1],wt=de[re],bt=de[re+1],Et=Y+3;Et<re;Et+=3){var pn=_n(de[Et],de[Et+1],Le,Ze,wt,bt);if(pn>$e)Ie=Et,$e=pn;else if(pn===$e){var wn=Math.abs(Et-qe);wn<Ve&&(Ie=Et,Ve=wn)}}$e>pe&&(Ie-Y>3&&Vt(de,Y,Ie,pe),de[Ie+2]=$e,re-Ie>3&&Vt(de,Ie,re,pe))}function _n(de,Y,re,pe,Ie,$e){var qe=Ie-re,Ve=$e-pe;if(qe!==0||Ve!==0){var Le=((de-re)*qe+(Y-pe)*Ve)/(qe*qe+Ve*Ve);Le>1?(re=Ie,pe=$e):Le>0&&(re+=qe*Le,pe+=Ve*Le)}return(qe=de-re)*qe+(Ve=Y-pe)*Ve}function qt(de,Y,re,pe){var Ie={id:de===void 0?null:de,type:Y,geometry:re,tags:pe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function($e){var qe=$e.geometry,Ve=$e.type;if(Ve==="Point"||Ve==="MultiPoint"||Ve==="LineString")_e($e,qe);else if(Ve==="Polygon"||Ve==="MultiLineString")for(var Le=0;Le<qe.length;Le++)_e($e,qe[Le]);else if(Ve==="MultiPolygon")for(Le=0;Le<qe.length;Le++)for(var Ze=0;Ze<qe[Le].length;Ze++)_e($e,qe[Le][Ze])}(Ie),Ie}function _e(de,Y){for(var re=0;re<Y.length;re+=3)de.minX=Math.min(de.minX,Y[re]),de.minY=Math.min(de.minY,Y[re+1]),de.maxX=Math.max(de.maxX,Y[re]),de.maxY=Math.max(de.maxY,Y[re+1])}function ke(de,Y,re,pe){if(Y.geometry){var Ie=Y.geometry.coordinates,$e=Y.geometry.type,qe=Math.pow(re.tolerance/((1<<re.maxZoom)*re.extent),2),Ve=[],Le=Y.id;if(re.promoteId?Le=Y.properties[re.promoteId]:re.generateId&&(Le=pe||0),$e==="Point")ge(Ie,Ve);else if($e==="MultiPoint")for(var Ze=0;Ze<Ie.length;Ze++)ge(Ie[Ze],Ve);else if($e==="LineString")ft(Ie,Ve,qe,!1);else if($e==="MultiLineString"){if(re.lineMetrics){for(Ze=0;Ze<Ie.length;Ze++)ft(Ie[Ze],Ve=[],qe,!1),de.push(qt(Le,"LineString",Ve,Y.properties));return}q(Ie,Ve,qe,!1)}else if($e==="Polygon")q(Ie,Ve,qe,!0);else{if($e!=="MultiPolygon"){if($e==="GeometryCollection"){for(Ze=0;Ze<Y.geometry.geometries.length;Ze++)ke(de,{id:Le,geometry:Y.geometry.geometries[Ze],properties:Y.properties},re,pe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ze=0;Ze<Ie.length;Ze++){var wt=[];q(Ie[Ze],wt,qe,!0),Ve.push(wt)}}de.push(qt(Le,$e,Ve,Y.properties))}}function ge(de,Y){Y.push(fe(de[0])),Y.push(Pe(de[1])),Y.push(0)}function ft(de,Y,re,pe){for(var Ie,$e,qe=0,Ve=0;Ve<de.length;Ve++){var Le=fe(de[Ve][0]),Ze=Pe(de[Ve][1]);Y.push(Le),Y.push(Ze),Y.push(0),Ve>0&&(qe+=pe?(Ie*Ze-Le*$e)/2:Math.sqrt(Math.pow(Le-Ie,2)+Math.pow(Ze-$e,2))),Ie=Le,$e=Ze}var wt=Y.length-3;Y[2]=1,Vt(Y,0,wt,re),Y[wt+2]=1,Y.size=Math.abs(qe),Y.start=0,Y.end=Y.size}function q(de,Y,re,pe){for(var Ie=0;Ie<de.length;Ie++){var $e=[];ft(de[Ie],$e,re,pe),Y.push($e)}}function fe(de){return de/360+.5}function Pe(de){var Y=Math.sin(de*Math.PI/180),re=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return re<0?0:re>1?1:re}function Ge(de,Y,re,pe,Ie,$e,qe,Ve){if(pe/=Y,$e>=(re/=Y)&&qe<pe)return de;if(qe<re||$e>=pe)return null;for(var Le=[],Ze=0;Ze<de.length;Ze++){var wt=de[Ze],bt=wt.geometry,Et=wt.type,pn=Ie===0?wt.minX:wt.minY,wn=Ie===0?wt.maxX:wt.maxY;if(pn>=re&&wn<pe)Le.push(wt);else if(!(wn<re||pn>=pe)){var un=[];if(Et==="Point"||Et==="MultiPoint")pt(bt,un,re,pe,Ie);else if(Et==="LineString")ht(bt,un,re,pe,Ie,!1,Ve.lineMetrics);else if(Et==="MultiLineString")Dt(bt,un,re,pe,Ie,!1);else if(Et==="Polygon")Dt(bt,un,re,pe,Ie,!0);else if(Et==="MultiPolygon")for(var mn=0;mn<bt.length;mn++){var En=[];Dt(bt[mn],En,re,pe,Ie,!0),En.length&&un.push(En)}if(un.length){if(Ve.lineMetrics&&Et==="LineString"){for(mn=0;mn<un.length;mn++)Le.push(qt(wt.id,Et,un[mn],wt.tags));continue}Et!=="LineString"&&Et!=="MultiLineString"||(un.length===1?(Et="LineString",un=un[0]):Et="MultiLineString"),Et!=="Point"&&Et!=="MultiPoint"||(Et=un.length===3?"Point":"MultiPoint"),Le.push(qt(wt.id,Et,un,wt.tags))}}}return Le.length?Le:null}function pt(de,Y,re,pe,Ie){for(var $e=0;$e<de.length;$e+=3){var qe=de[$e+Ie];qe>=re&&qe<=pe&&(Y.push(de[$e]),Y.push(de[$e+1]),Y.push(de[$e+2]))}}function ht(de,Y,re,pe,Ie,$e,qe){for(var Ve,Le,Ze=zt(de),wt=Ie===0?ln:vt,bt=de.start,Et=0;Et<de.length-3;Et+=3){var pn=de[Et],wn=de[Et+1],un=de[Et+2],mn=de[Et+3],En=de[Et+4],Vn=Ie===0?pn:wn,$n=Ie===0?mn:En,jt=!1;qe&&(Ve=Math.sqrt(Math.pow(pn-mn,2)+Math.pow(wn-En,2))),Vn<re?$n>re&&(Le=wt(Ze,pn,wn,mn,En,re),qe&&(Ze.start=bt+Ve*Le)):Vn>pe?$n<pe&&(Le=wt(Ze,pn,wn,mn,En,pe),qe&&(Ze.start=bt+Ve*Le)):Gt(Ze,pn,wn,un),$n<re&&Vn>=re&&(Le=wt(Ze,pn,wn,mn,En,re),jt=!0),$n>pe&&Vn<=pe&&(Le=wt(Ze,pn,wn,mn,En,pe),jt=!0),!$e&&jt&&(qe&&(Ze.end=bt+Ve*Le),Y.push(Ze),Ze=zt(de)),qe&&(bt+=Ve)}var He=de.length-3;pn=de[He],wn=de[He+1],un=de[He+2],(Vn=Ie===0?pn:wn)>=re&&Vn<=pe&&Gt(Ze,pn,wn,un),He=Ze.length-3,$e&&He>=3&&(Ze[He]!==Ze[0]||Ze[He+1]!==Ze[1])&&Gt(Ze,Ze[0],Ze[1],Ze[2]),Ze.length&&Y.push(Ze)}function zt(de){var Y=[];return Y.size=de.size,Y.start=de.start,Y.end=de.end,Y}function Dt(de,Y,re,pe,Ie,$e){for(var qe=0;qe<de.length;qe++)ht(de[qe],Y,re,pe,Ie,$e,!1)}function Gt(de,Y,re,pe){de.push(Y),de.push(re),de.push(pe)}function ln(de,Y,re,pe,Ie,$e){var qe=($e-Y)/(pe-Y);return de.push($e),de.push(re+(Ie-re)*qe),de.push(1),qe}function vt(de,Y,re,pe,Ie,$e){var qe=($e-re)/(Ie-re);return de.push(Y+(pe-Y)*qe),de.push($e),de.push(1),qe}function Rn(de,Y){for(var re=[],pe=0;pe<de.length;pe++){var Ie,$e=de[pe],qe=$e.type;if(qe==="Point"||qe==="MultiPoint"||qe==="LineString")Ie=Ln($e.geometry,Y);else if(qe==="MultiLineString"||qe==="Polygon"){Ie=[];for(var Ve=0;Ve<$e.geometry.length;Ve++)Ie.push(Ln($e.geometry[Ve],Y))}else if(qe==="MultiPolygon")for(Ie=[],Ve=0;Ve<$e.geometry.length;Ve++){for(var Le=[],Ze=0;Ze<$e.geometry[Ve].length;Ze++)Le.push(Ln($e.geometry[Ve][Ze],Y));Ie.push(Le)}re.push(qt($e.id,qe,Ie,$e.tags))}return re}function Ln(de,Y){var re=[];re.size=de.size,de.start!==void 0&&(re.start=de.start,re.end=de.end);for(var pe=0;pe<de.length;pe+=3)re.push(de[pe]+Y,de[pe+1],de[pe+2]);return re}function Ye(de,Y){if(de.transformed)return de;var re,pe,Ie,$e=1<<de.z,qe=de.x,Ve=de.y;for(re=0;re<de.features.length;re++){var Le=de.features[re],Ze=Le.geometry,wt=Le.type;if(Le.geometry=[],wt===1)for(pe=0;pe<Ze.length;pe+=2)Le.geometry.push(Qe(Ze[pe],Ze[pe+1],Y,$e,qe,Ve));else for(pe=0;pe<Ze.length;pe++){var bt=[];for(Ie=0;Ie<Ze[pe].length;Ie+=2)bt.push(Qe(Ze[pe][Ie],Ze[pe][Ie+1],Y,$e,qe,Ve));Le.geometry.push(bt)}}return de.transformed=!0,de}function Qe(de,Y,re,pe,Ie,$e){return[Math.round(re*(de*pe-Ie)),Math.round(re*(Y*pe-$e))]}function Re(de,Y,re,pe,Ie){for(var $e=Y===Ie.maxZoom?0:Ie.tolerance/((1<<Y)*Ie.extent),qe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:re,y:pe,z:Y,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ve=0;Ve<de.length;Ve++){qe.numFeatures++,mt(qe,de[Ve],$e,Ie);var Le=de[Ve].minX,Ze=de[Ve].minY,wt=de[Ve].maxX,bt=de[Ve].maxY;Le<qe.minX&&(qe.minX=Le),Ze<qe.minY&&(qe.minY=Ze),wt>qe.maxX&&(qe.maxX=wt),bt>qe.maxY&&(qe.maxY=bt)}return qe}function mt(de,Y,re,pe){var Ie=Y.geometry,$e=Y.type,qe=[];if($e==="Point"||$e==="MultiPoint")for(var Ve=0;Ve<Ie.length;Ve+=3)qe.push(Ie[Ve]),qe.push(Ie[Ve+1]),de.numPoints++,de.numSimplified++;else if($e==="LineString")St(qe,Ie,de,re,!1,!1);else if($e==="MultiLineString"||$e==="Polygon")for(Ve=0;Ve<Ie.length;Ve++)St(qe,Ie[Ve],de,re,$e==="Polygon",Ve===0);else if($e==="MultiPolygon")for(var Le=0;Le<Ie.length;Le++){var Ze=Ie[Le];for(Ve=0;Ve<Ze.length;Ve++)St(qe,Ze[Ve],de,re,!0,Ve===0)}if(qe.length){var wt=Y.tags||null;if($e==="LineString"&&pe.lineMetrics){for(var bt in wt={},Y.tags)wt[bt]=Y.tags[bt];wt.mapbox_clip_start=Ie.start/Ie.size,wt.mapbox_clip_end=Ie.end/Ie.size}var Et={geometry:qe,type:$e==="Polygon"||$e==="MultiPolygon"?3:$e==="LineString"||$e==="MultiLineString"?2:1,tags:wt};Y.id!==null&&(Et.id=Y.id),de.features.push(Et)}}function St(de,Y,re,pe,Ie,$e){var qe=pe*pe;if(pe>0&&Y.size<(Ie?qe:pe))re.numPoints+=Y.length/3;else{for(var Ve=[],Le=0;Le<Y.length;Le+=3)(pe===0||Y[Le+2]>qe)&&(re.numSimplified++,Ve.push(Y[Le]),Ve.push(Y[Le+1])),re.numPoints++;Ie&&function(Ze,wt){for(var bt=0,Et=0,pn=Ze.length,wn=pn-2;Et<pn;wn=Et,Et+=2)bt+=(Ze[Et]-Ze[wn])*(Ze[Et+1]+Ze[wn+1]);if(bt>0===wt)for(Et=0,pn=Ze.length;Et<pn/2;Et+=2){var un=Ze[Et],mn=Ze[Et+1];Ze[Et]=Ze[pn-2-Et],Ze[Et+1]=Ze[pn-1-Et],Ze[pn-2-Et]=un,Ze[pn-1-Et]=mn}}(Ve,$e),de.push(Ve)}}function Yt(de,Y){var re=(Y=this.options=function(Ie,$e){for(var qe in $e)Ie[qe]=$e[qe];return Ie}(Object.create(this.options),Y)).debug;if(re&&console.time("preprocess data"),Y.maxZoom<0||Y.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Y.promoteId&&Y.generateId)throw new Error("promoteId and generateId cannot be used together.");var pe=function(Ie,$e){var qe=[];if(Ie.type==="FeatureCollection")for(var Ve=0;Ve<Ie.features.length;Ve++)ke(qe,Ie.features[Ve],$e,Ve);else ke(qe,Ie.type==="Feature"?Ie:{geometry:Ie},$e);return qe}(de,Y);this.tiles={},this.tileCoords=[],re&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Y.indexMaxZoom,Y.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),pe=function(Ie,$e){var qe=$e.buffer/$e.extent,Ve=Ie,Le=Ge(Ie,1,-1-qe,qe,0,-1,2,$e),Ze=Ge(Ie,1,1-qe,2+qe,0,-1,2,$e);return(Le||Ze)&&(Ve=Ge(Ie,1,-qe,1+qe,0,-1,2,$e)||[],Le&&(Ve=Rn(Le,1).concat(Ve)),Ze&&(Ve=Ve.concat(Rn(Ze,-1)))),Ve}(pe,Y),pe.length&&this.splitTile(pe,0,0,0),re&&(pe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function an(de,Y,re){return 32*((1<<de)*re+Y)+de}function Pt(de,Y){return Y?de.properties[Y]:de.id}function qn(de,Y){if(de==null)return!0;if(de.type==="Feature")return Pt(de,Y)!=null;if(de.type==="FeatureCollection"){const re=new Set;for(const pe of de.features){const Ie=Pt(pe,Y);if(Ie==null||re.has(Ie))return!1;re.add(Ie)}return!0}return!1}function Cn(de,Y){const re=new Map;if(de!=null)if(de.type==="Feature")re.set(Pt(de,Y),de);else for(const pe of de.features)re.set(Pt(pe,Y),pe);return re}function Ut(de,Y){const re=de.tileID.canonical;if(!this._geoJSONIndex)return Y(null,null);const pe=this._geoJSONIndex.getTile(re.z,re.x,re.y);if(!pe)return Y(null,null);const Ie=new class{constructor(qe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=qe.length,this._features=qe}feature(qe){return new class{constructor(Ve){this._feature=Ve,this.extent=l.EXTENT,this.type=Ve.type,this.properties=Ve.tags,"id"in Ve&&!isNaN(Ve.id)&&(this.id=parseInt(Ve.id,10))}loadGeometry(){if(this._feature.type===1){const Ve=[];for(const Le of this._feature.geometry)Ve.push([new l.Point(Le[0],Le[1])]);return Ve}{const Ve=[];for(const Le of this._feature.geometry){const Ze=[];for(const wt of Le)Ze.push(new l.Point(wt[0],wt[1]));Ve.push(Ze)}return Ve}}toGeoJSON(Ve,Le,Ze){return U.call(this,Ve,Le,Ze)}}(this._features[qe])}}(pe.features);let $e=it(Ie);$e.byteOffset===0&&$e.byteLength===$e.buffer.byteLength||($e=new Uint8Array($e)),Y(null,{vectorTile:Ie,rawData:$e.buffer})}Yt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Yt.prototype.splitTile=function(de,Y,re,pe,Ie,$e,qe){for(var Ve=[de,Y,re,pe],Le=this.options,Ze=Le.debug;Ve.length;){pe=Ve.pop(),re=Ve.pop(),Y=Ve.pop(),de=Ve.pop();var wt=1<<Y,bt=an(Y,re,pe),Et=this.tiles[bt];if(!Et&&(Ze>1&&console.time("creation"),Et=this.tiles[bt]=Re(de,Y,re,pe,Le),this.tileCoords.push({z:Y,x:re,y:pe}),Ze)){Ze>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Y,re,pe,Et.numFeatures,Et.numPoints,Et.numSimplified),console.timeEnd("creation"));var pn="z"+Y;this.stats[pn]=(this.stats[pn]||0)+1,this.total++}if(Et.source=de,Ie){if(Y===Le.maxZoom||Y===Ie)continue;var wn=1<<Ie-Y;if(re!==Math.floor($e/wn)||pe!==Math.floor(qe/wn))continue}else if(Y===Le.indexMaxZoom||Et.numPoints<=Le.indexMaxPoints)continue;if(Et.source=null,de.length!==0){Ze>1&&console.time("clipping");var un,mn,En,Vn,$n,jt,He=.5*Le.buffer/Le.extent,It=.5-He,gt=.5+He,ze=1+He;un=mn=En=Vn=null,$n=Ge(de,wt,re-He,re+gt,0,Et.minX,Et.maxX,Le),jt=Ge(de,wt,re+It,re+ze,0,Et.minX,Et.maxX,Le),de=null,$n&&(un=Ge($n,wt,pe-He,pe+gt,1,Et.minY,Et.maxY,Le),mn=Ge($n,wt,pe+It,pe+ze,1,Et.minY,Et.maxY,Le),$n=null),jt&&(En=Ge(jt,wt,pe-He,pe+gt,1,Et.minY,Et.maxY,Le),Vn=Ge(jt,wt,pe+It,pe+ze,1,Et.minY,Et.maxY,Le),jt=null),Ze>1&&console.timeEnd("clipping"),Ve.push(un||[],Y+1,2*re,2*pe),Ve.push(mn||[],Y+1,2*re,2*pe+1),Ve.push(En||[],Y+1,2*re+1,2*pe),Ve.push(Vn||[],Y+1,2*re+1,2*pe+1)}}},Yt.prototype.getTile=function(de,Y,re){var pe=this.options,Ie=pe.extent,$e=pe.debug;if(de<0||de>24)return null;var qe=1<<de,Ve=an(de,Y=(Y%qe+qe)%qe,re);if(this.tiles[Ve])return Ye(this.tiles[Ve],Ie);$e>1&&console.log("drilling down to z%d-%d-%d",de,Y,re);for(var Le,Ze=de,wt=Y,bt=re;!Le&&Ze>0;)Ze--,wt=Math.floor(wt/2),bt=Math.floor(bt/2),Le=this.tiles[an(Ze,wt,bt)];return Le&&Le.source?($e>1&&console.log("found parent tile z%d-%d-%d",Ze,wt,bt),$e>1&&console.time("drilling down"),this.splitTile(Le.source,Ze,wt,bt,de,Y,re),$e>1&&console.timeEnd("drilling down"),this.tiles[Ve]?Ye(this.tiles[Ve],Ie):null):null};class vn extends I{constructor(Y,re,pe,Ie){super(Y,re,pe,Ut),this._dataUpdateable=new Map,this.loadGeoJSON=($e,qe)=>{const{promoteId:Ve}=$e;if($e.request)return l.getJSON($e.request,(Le,Ze,wt,bt)=>{this._dataUpdateable=qn(Ze,Ve)?Cn(Ze,Ve):void 0,qe(Le,Ze,wt,bt)});if(typeof $e.data=="string")try{const Le=JSON.parse($e.data);this._dataUpdateable=qn(Le,Ve)?Cn(Le,Ve):void 0,qe(null,Le)}catch{qe(new Error(`Input data given to '${$e.source}' is not a valid GeoJSON object.`))}else $e.dataDiff?this._dataUpdateable?(function(Le,Ze,wt){var bt,Et,pn,wn;if(Ze.removeAll&&Le.clear(),Ze.remove)for(const un of Ze.remove)Le.delete(un);if(Ze.add)for(const un of Ze.add){const mn=Pt(un,wt);mn!=null&&Le.set(mn,un)}if(Ze.update)for(const un of Ze.update){let mn=Le.get(un.id);if(mn==null)continue;const En=!un.removeAllProperties&&(((bt=un.removeProperties)===null||bt===void 0?void 0:bt.length)>0||((Et=un.addOrUpdateProperties)===null||Et===void 0?void 0:Et.length)>0);if((un.newGeometry||un.removeAllProperties||En)&&(mn={...mn},Le.set(un.id,mn),En&&(mn.properties={...mn.properties})),un.newGeometry&&(mn.geometry=un.newGeometry),un.removeAllProperties)mn.properties={};else if(((pn=un.removeProperties)===null||pn===void 0?void 0:pn.length)>0)for(const Vn of un.removeProperties)Object.prototype.hasOwnProperty.call(mn.properties,Vn)&&delete mn.properties[Vn];if(((wn=un.addOrUpdateProperties)===null||wn===void 0?void 0:wn.length)>0)for(const{key:Vn,value:$n}of un.addOrUpdateProperties)mn.properties[Vn]=$n}}(this._dataUpdateable,$e.dataDiff,Ve),qe(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):qe(new Error(`Cannot update existing geojson data in ${$e.source}`)):qe(new Error(`Input data given to '${$e.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},Ie&&(this.loadGeoJSON=Ie)}loadData(Y,re){var pe;(pe=this._pendingRequest)===null||pe===void 0||pe.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Ie=!!(Y&&Y.request&&Y.request.collectResourceTiming)&&new l.RequestPerformance(Y.request);this._pendingCallback=re,this._pendingRequest=this.loadGeoJSON(Y,($e,qe)=>{if(delete this._pendingCallback,delete this._pendingRequest,$e||!qe)return re($e);if(typeof qe!="object")return re(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`));{F(qe,!0);try{if(Y.filter){const Le=l.createExpression(Y.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Le.result==="error")throw new Error(Le.value.map(wt=>`${wt.key}: ${wt.message}`).join(", "));qe={type:"FeatureCollection",features:qe.features.filter(wt=>Le.value.evaluate({zoom:0},wt))}}this._geoJSONIndex=Y.cluster?new et(function({superclusterOptions:Le,clusterProperties:Ze}){if(!Ze||!Le)return Le;const wt={},bt={},Et={accumulated:null,zoom:0},pn={properties:null},wn=Object.keys(Ze);for(const un of wn){const[mn,En]=Ze[un],Vn=l.createExpression(En),$n=l.createExpression(typeof mn=="string"?[mn,["accumulated"],["get",un]]:mn);wt[un]=Vn.value,bt[un]=$n.value}return Le.map=un=>{pn.properties=un;const mn={};for(const En of wn)mn[En]=wt[En].evaluate(Et,pn);return mn},Le.reduce=(un,mn)=>{pn.properties=mn;for(const En of wn)Et.accumulated=un[En],un[En]=bt[En].evaluate(Et,pn)},Le}(Y)).load(qe.features):function(Le,Ze){return new Yt(Le,Ze)}(qe,Y.geojsonVtOptions)}catch(Le){return re(Le)}this.loaded={};const Ve={};if(Ie){const Le=Ie.finish();Le&&(Ve.resourceTiming={},Ve.resourceTiming[Y.source]=JSON.parse(JSON.stringify(Le)))}re(null,Ve)}})}reloadTile(Y,re){const pe=this.loaded;return pe&&pe[Y.uid]?super.reloadTile(Y,re):this.loadTile(Y,re)}removeSource(Y,re){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),re()}getClusterExpansionZoom(Y,re){try{re(null,this._geoJSONIndex.getClusterExpansionZoom(Y.clusterId))}catch(pe){re(pe)}}getClusterChildren(Y,re){try{re(null,this._geoJSONIndex.getChildren(Y.clusterId))}catch(pe){re(pe)}}getClusterLeaves(Y,re){try{re(null,this._geoJSONIndex.getLeaves(Y.clusterId,Y.limit,Y.offset))}catch(pe){re(pe)}}}class kn{constructor(Y){this.self=Y,this.actor=new l.Actor(Y,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:I,geojson:vn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(re,pe)=>{if(this.workerSourceTypes[re])throw new Error(`Worker source with name "${re}" already registered.`);this.workerSourceTypes[re]=pe},this.self.registerRTLTextPlugin=re=>{if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=re.applyArabicShaping,l.plugin.processBidirectionalText=re.processBidirectionalText,l.plugin.processStyledBidirectionalText=re.processStyledBidirectionalText}}setReferrer(Y,re){this.referrer=re}setImages(Y,re,pe){this.availableImages[Y]=re;for(const Ie in this.workerSources[Y]){const $e=this.workerSources[Y][Ie];for(const qe in $e)$e[qe].availableImages=re}pe()}setLayers(Y,re,pe){this.getLayerIndex(Y).replace(re),pe()}updateLayers(Y,re,pe){this.getLayerIndex(Y).update(re.layers,re.removedIds),pe()}loadTile(Y,re,pe){this.getWorkerSource(Y,re.type,re.source).loadTile(re,pe)}loadDEMTile(Y,re,pe){this.getDEMWorkerSource(Y,re.source).loadTile(re,pe)}reloadTile(Y,re,pe){this.getWorkerSource(Y,re.type,re.source).reloadTile(re,pe)}abortTile(Y,re,pe){this.getWorkerSource(Y,re.type,re.source).abortTile(re,pe)}removeTile(Y,re,pe){this.getWorkerSource(Y,re.type,re.source).removeTile(re,pe)}removeDEMTile(Y,re){this.getDEMWorkerSource(Y,re.source).removeTile(re)}removeSource(Y,re,pe){if(!this.workerSources[Y]||!this.workerSources[Y][re.type]||!this.workerSources[Y][re.type][re.source])return;const Ie=this.workerSources[Y][re.type][re.source];delete this.workerSources[Y][re.type][re.source],Ie.removeSource!==void 0?Ie.removeSource(re,pe):pe()}loadWorkerSource(Y,re,pe){try{this.self.importScripts(re.url),pe()}catch(Ie){pe(Ie.toString())}}syncRTLPluginState(Y,re,pe){try{l.plugin.setState(re);const Ie=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&Ie!=null){this.self.importScripts(Ie);const $e=l.plugin.isParsed();pe($e?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ie}`),$e)}}catch(Ie){pe(Ie.toString())}}getAvailableImages(Y){let re=this.availableImages[Y];return re||(re=[]),re}getLayerIndex(Y){let re=this.layerIndexes[Y];return re||(re=this.layerIndexes[Y]=new m),re}getWorkerSource(Y,re,pe){if(this.workerSources[Y]||(this.workerSources[Y]={}),this.workerSources[Y][re]||(this.workerSources[Y][re]={}),!this.workerSources[Y][re][pe]){const Ie={send:($e,qe,Ve)=>{this.actor.send($e,qe,Ve,Y)}};this.workerSources[Y][re][pe]=new this.workerSourceTypes[re](Ie,this.getLayerIndex(Y),this.getAvailableImages(Y))}return this.workerSources[Y][re][pe]}getDEMWorkerSource(Y,re){return this.demWorkerSources[Y]||(this.demWorkerSources[Y]={}),this.demWorkerSources[Y][re]||(this.demWorkerSources[Y][re]=new M),this.demWorkerSources[Y][re]}}return l.isWorker()&&(self.worker=new kn(self)),kn}),u(["./shared"],function(l){var m="3.0.1";class g{static testProp(o){if(!g.docStyle)return o[0];for(let f=0;f<o.length;f++)if(o[f]in g.docStyle)return o[f];return o[0]}static create(o,f,v){const b=window.document.createElement(o);return f!==void 0&&(b.className=f),v&&v.appendChild(b),b}static createNS(o,f){return window.document.createElementNS(o,f)}static disableDrag(){g.docStyle&&g.selectProp&&(g.userSelect=g.docStyle[g.selectProp],g.docStyle[g.selectProp]="none")}static enableDrag(){g.docStyle&&g.selectProp&&(g.docStyle[g.selectProp]=g.userSelect)}static setTransform(o,f){o.style[g.transformProp]=f}static addEventListener(o,f,v,b={}){o.addEventListener(f,v,"passive"in b?b:b.capture)}static removeEventListener(o,f,v,b={}){o.removeEventListener(f,v,"passive"in b?b:b.capture)}static suppressClickInternal(o){o.preventDefault(),o.stopPropagation(),window.removeEventListener("click",g.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",g.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",g.suppressClickInternal,!0)},0)}static mousePos(o,f){const v=o.getBoundingClientRect();return new l.Point(f.clientX-v.left-o.clientLeft,f.clientY-v.top-o.clientTop)}static touchPos(o,f){const v=o.getBoundingClientRect(),b=[];for(let E=0;E<f.length;E++)b.push(new l.Point(f[E].clientX-v.left-o.clientLeft,f[E].clientY-v.top-o.clientTop));return b}static mouseButton(o){return o.button}static remove(o){o.parentNode&&o.parentNode.removeChild(o)}}g.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,g.selectProp=g.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),g.transformProp=g.testProp(["transform","WebkitTransform"]);const x={supported:!1,testSupport:function(_){!I&&C&&(M?L(_):w=_)}};let w,C,I=!1,M=!1;function L(_){const o=_.createTexture();_.bindTexture(_.TEXTURE_2D,o);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,C),_.isContextLost())return;x.supported=!0}catch{}_.deleteTexture(o),I=!0}var $;typeof document<"u"&&(C=document.createElement("img"),C.onload=function(){w&&L(w),w=null,M=!0},C.onerror=function(){I=!0,w=null},C.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(_){let o,f,v,b;_.resetRequestQueue=()=>{o=[],f=0,v=0,b={}},_.addThrottleControl=B=>{const K=v++;return b[K]=B,K},_.removeThrottleControl=B=>{delete b[B],R()},_.getImage=(B,K,Z=!0)=>{x.supported&&(B.headers||(B.headers={}),B.headers.accept="image/webp,*/*");const le={requestParameters:B,supportImageRefresh:Z,callback:K,cancelled:!1,completed:!1,cancel:()=>{le.completed||le.cancelled||(le.cancelled=!0,le.innerRequest&&(le.innerRequest.cancel(),f--),R())}};return o.push(le),R(),le};const E=B=>{const{requestParameters:K,supportImageRefresh:Z,callback:le}=B;return l.extend(K,{type:"image"}),(Z!==!1||l.isWorker()||l.getProtocolAction(K.url)||K.headers&&!Object.keys(K.headers).reduce((Se,ve)=>Se&&ve==="accept",!0)?l.makeRequest:O)(K,(Se,ve,xe,De)=>{P(B,le,Se,ve,xe,De)})},P=(B,K,Z,le,Se,ve)=>{Z?K(Z):le instanceof HTMLImageElement||le instanceof ImageBitmap?K(null,le):le&&((xe,De)=>{typeof createImageBitmap=="function"?l.arrayBufferToImageBitmap(xe,De):l.arrayBufferToImage(xe,De)})(le,(xe,De)=>{xe!=null?K(xe):De!=null&&K(null,De,{cacheControl:Se,expires:ve})}),B.cancelled||(B.completed=!0,f--,R())},R=()=>{const B=(()=>{const K=Object.keys(b);let Z=!1;if(K.length>0){for(const le of K)if(Z=b[le](),Z)break}return Z})()?l.config.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.config.MAX_PARALLEL_IMAGE_REQUESTS;for(let K=f;K<B&&o.length>0;K++){const Z=o.shift();if(Z.cancelled){K--;continue}const le=E(Z);f++,Z.innerRequest=le}},O=(B,K)=>{const Z=new Image,le=B.url;let Se=!1;const ve=B.credentials;return ve&&ve==="include"?Z.crossOrigin="use-credentials":(ve&&ve==="same-origin"||!l.sameOrigin(le))&&(Z.crossOrigin="anonymous"),Z.fetchPriority="high",Z.onload=()=>{K(null,Z),Z.onerror=Z.onload=null},Z.onerror=()=>{Se||K(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),Z.onerror=Z.onload=null},Z.src=le,{cancel:()=>{Se=!0,Z.src=""}}}}($||($={})),$.resetRequestQueue();var F,U=$;(function(_){_.Glyphs="Glyphs",_.Image="Image",_.Source="Source",_.SpriteImage="SpriteImage",_.SpriteJSON="SpriteJSON",_.Style="Style",_.Tile="Tile",_.Unknown="Unknown"})(F||(F={}));class ee{constructor(o){this._transformRequestFn=o}transformRequest(o,f){return this._transformRequestFn&&this._transformRequestFn(o,f)||{url:o}}normalizeSpriteURL(o,f,v){const b=function(E){const P=E.match(V);if(!P)throw new Error(`Unable to parse URL "${E}"`);return{protocol:P[1],authority:P[2],path:P[3]||"/",params:P[4]?P[4].split("&"):[]}}(o);return b.path+=`${f}${v}`,function(E){const P=E.params.length?`?${E.params.join("&")}`:"";return`${E.protocol}://${E.authority}${E.path}${P}`}(b)}setTransformRequest(o){this._transformRequestFn=o}}const V=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Q(_){var o=new l.ARRAY_TYPE(3);return o[0]=_[0],o[1]=_[1],o[2]=_[2],o}var ae,be=function(_,o,f){return _[0]=o[0]-f[0],_[1]=o[1]-f[1],_[2]=o[2]-f[2],_};ae=new l.ARRAY_TYPE(3),l.ARRAY_TYPE!=Float32Array&&(ae[0]=0,ae[1]=0,ae[2]=0);var te=function(_){var o=_[0],f=_[1];return o*o+f*f};function G(_){const o=[];if(typeof _=="string")o.push({id:"default",url:_});else if(_&&_.length>0){const f=[];for(const{id:v,url:b}of _){const E=`${v}${b}`;f.indexOf(E)===-1&&(f.push(E),o.push({id:v,url:b}))}}return o}function j(_,o,f,v,b){if(v)return void _(v);if(b!==Object.values(o).length||b!==Object.values(f).length)return;const E={};for(const P in o){E[P]={};const R=l.exported.getImageCanvasContext(f[P]),O=o[P];for(const B in O){const{width:K,height:Z,x:le,y:Se,sdf:ve,pixelRatio:xe,stretchX:De,stretchY:Ue,content:st}=O[B];E[P][B]={data:null,pixelRatio:xe,sdf:ve,stretchX:De,stretchY:Ue,content:st,spriteData:{width:K,height:Z,x:le,y:Se,context:R}}}}_(null,E)}(function(){var _=new l.ARRAY_TYPE(2);l.ARRAY_TYPE!=Float32Array&&(_[0]=0,_[1]=0)})();class z{constructor(o,f,v,b){this.context=o,this.format=v,this.texture=o.gl.createTexture(),this.update(f,b)}update(o,f,v){const{width:b,height:E}=o,P=!(this.size&&this.size[0]===b&&this.size[1]===E||v),{context:R}=this,{gl:O}=R;if(this.useMipmap=!!(f&&f.useMipmap),O.bindTexture(O.TEXTURE_2D,this.texture),R.pixelStoreUnpackFlipY.set(!1),R.pixelStoreUnpack.set(1),R.pixelStoreUnpackPremultiplyAlpha.set(this.format===O.RGBA&&(!f||f.premultiply!==!1)),P)this.size=[b,E],o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||l.isImageBitmap(o)?O.texImage2D(O.TEXTURE_2D,0,this.format,this.format,O.UNSIGNED_BYTE,o):O.texImage2D(O.TEXTURE_2D,0,this.format,b,E,0,this.format,O.UNSIGNED_BYTE,o.data);else{const{x:B,y:K}=v||{x:0,y:0};o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||l.isImageBitmap(o)?O.texSubImage2D(O.TEXTURE_2D,0,B,K,O.RGBA,O.UNSIGNED_BYTE,o):O.texSubImage2D(O.TEXTURE_2D,0,B,K,b,E,O.RGBA,O.UNSIGNED_BYTE,o.data)}this.useMipmap&&this.isSizePowerOfTwo()&&O.generateMipmap(O.TEXTURE_2D)}bind(o,f,v){const{context:b}=this,{gl:E}=b;E.bindTexture(E.TEXTURE_2D,this.texture),v!==E.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(v=E.LINEAR),o!==this.filter&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,o),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,v||o),this.filter=o),f!==this.wrap&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,f),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,f),this.wrap=f)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}function ie(_){const{userImage:o}=_;return!!(o&&o.render&&o.render())&&(_.data.replace(new Uint8Array(o.data.buffer)),!0)}class X extends l.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(o){if(this.loaded!==o&&(this.loaded=o,o)){for(const{ids:f,callback:v}of this.requestors)this._notify(f,v);this.requestors=[]}}getImage(o){const f=this.images[o];if(f&&!f.data&&f.spriteData){const v=f.spriteData;f.data=new l.RGBAImage({width:v.width,height:v.height},v.context.getImageData(v.x,v.y,v.width,v.height).data),f.spriteData=null}return f}addImage(o,f){if(this.images[o])throw new Error(`Image id ${o} already exist, use updateImage instead`);this._validate(o,f)&&(this.images[o]=f)}_validate(o,f){let v=!0;const b=f.data||f.spriteData;return this._validateStretch(f.stretchX,b&&b.width)||(this.fire(new l.ErrorEvent(new Error(`Image "${o}" has invalid "stretchX" value`))),v=!1),this._validateStretch(f.stretchY,b&&b.height)||(this.fire(new l.ErrorEvent(new Error(`Image "${o}" has invalid "stretchY" value`))),v=!1),this._validateContent(f.content,f)||(this.fire(new l.ErrorEvent(new Error(`Image "${o}" has invalid "content" value`))),v=!1),v}_validateStretch(o,f){if(!o)return!0;let v=0;for(const b of o){if(b[0]<v||b[1]<b[0]||f<b[1])return!1;v=b[1]}return!0}_validateContent(o,f){if(!o)return!0;if(o.length!==4)return!1;const v=f.spriteData,b=v&&v.width||f.data.width,E=v&&v.height||f.data.height;return!(o[0]<0||b<o[0]||o[1]<0||E<o[1]||o[2]<0||b<o[2]||o[3]<0||E<o[3]||o[2]<o[0]||o[3]<o[1])}updateImage(o,f,v=!0){const b=this.getImage(o);if(v&&(b.data.width!==f.data.width||b.data.height!==f.data.height))throw new Error(`size mismatch between old image (${b.data.width}x${b.data.height}) and new image (${f.data.width}x${f.data.height}).`);f.version=b.version+1,this.images[o]=f,this.updatedImages[o]=!0}removeImage(o){const f=this.images[o];delete this.images[o],delete this.patterns[o],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(o,f){let v=!0;if(!this.isLoaded())for(const b of o)this.images[b]||(v=!1);this.isLoaded()||v?this._notify(o,f):this.requestors.push({ids:o,callback:f})}_notify(o,f){const v={};for(const b of o){let E=this.getImage(b);E||(this.fire(new l.Event("styleimagemissing",{id:b})),E=this.getImage(b)),E?v[b]={data:E.data.clone(),pixelRatio:E.pixelRatio,sdf:E.sdf,version:E.version,stretchX:E.stretchX,stretchY:E.stretchY,content:E.content,hasRenderCallback:!!(E.userImage&&E.userImage.render)}:l.warnOnce(`Image "${b}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}f(null,v)}getPixelSize(){const{width:o,height:f}=this.atlasImage;return{width:o,height:f}}getPattern(o){const f=this.patterns[o],v=this.getImage(o);if(!v)return null;if(f&&f.position.version===v.version)return f.position;if(f)f.position.version=v.version;else{const b={w:v.data.width+2,h:v.data.height+2,x:0,y:0},E=new l.ImagePosition(b,v);this.patterns[o]={bin:b,position:E}}return this._updatePatternAtlas(),this.patterns[o].position}bind(o){const f=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new z(o,this.atlasImage,f.RGBA),this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const o=[];for(const E in this.patterns)o.push(this.patterns[E].bin);const{w:f,h:v}=l.potpack(o),b=this.atlasImage;b.resize({width:f||1,height:v||1});for(const E in this.patterns){const{bin:P}=this.patterns[E],R=P.x+1,O=P.y+1,B=this.getImage(E).data,K=B.width,Z=B.height;l.RGBAImage.copy(B,b,{x:0,y:0},{x:R,y:O},{width:K,height:Z}),l.RGBAImage.copy(B,b,{x:0,y:Z-1},{x:R,y:O-1},{width:K,height:1}),l.RGBAImage.copy(B,b,{x:0,y:0},{x:R,y:O+Z},{width:K,height:1}),l.RGBAImage.copy(B,b,{x:K-1,y:0},{x:R-1,y:O},{width:1,height:Z}),l.RGBAImage.copy(B,b,{x:0,y:0},{x:R+K,y:O},{width:1,height:Z})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(o){for(const f of o){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const v=this.getImage(f);v||l.warnOnce(`Image with ID: "${f}" was not found`),ie(v)&&this.updateImage(f,v)}}}const ne=1e20;function Ee(_,o,f,v,b,E,P,R,O){for(let B=o;B<o+v;B++)Ce(_,f*E+B,E,b,P,R,O);for(let B=f;B<f+b;B++)Ce(_,B*E+o,1,v,P,R,O)}function Ce(_,o,f,v,b,E,P){E[0]=0,P[0]=-ne,P[1]=ne,b[0]=_[o];for(let R=1,O=0,B=0;R<v;R++){b[R]=_[o+R*f];const K=R*R;do{const Z=E[O];B=(b[R]-b[Z]+K-Z*Z)/(R-Z)/2}while(B<=P[O]&&--O>-1);O++,E[O]=R,P[O]=B,P[O+1]=ne}for(let R=0,O=0;R<v;R++){for(;P[O+1]<R;)O++;const B=E[O],K=R-B;_[o+R*f]=b[B]+K*K}}class Xe{constructor(o,f){this.requestManager=o,this.localIdeographFontFamily=f,this.entries={}}setURL(o){this.url=o}getGlyphs(o,f){const v=[];for(const b in o)for(const E of o[b])v.push({stack:b,id:E});l.asyncAll(v,({stack:b,id:E},P)=>{let R=this.entries[b];R||(R=this.entries[b]={glyphs:{},requests:{},ranges:{}});let O=R.glyphs[E];if(O!==void 0)return void P(null,{stack:b,id:E,glyph:O});if(O=this._tinySDF(R,b,E),O)return R.glyphs[E]=O,void P(null,{stack:b,id:E,glyph:O});const B=Math.floor(E/256);if(256*B>65535)return void P(new Error("glyphs > 65535 not supported"));if(R.ranges[B])return void P(null,{stack:b,id:E,glyph:O});if(!this.url)return void P(new Error("glyphsUrl is not set"));let K=R.requests[B];K||(K=R.requests[B]=[],Xe.loadGlyphRange(b,B,this.url,this.requestManager,(Z,le)=>{if(le){for(const Se in le)this._doesCharSupportLocalGlyph(+Se)||(R.glyphs[+Se]=le[+Se]);R.ranges[B]=!0}for(const Se of K)Se(Z,le);delete R.requests[B]})),K.push((Z,le)=>{Z?P(Z):le&&P(null,{stack:b,id:E,glyph:le[E]||null})})},(b,E)=>{if(b)f(b);else if(E){const P={};for(const{stack:R,id:O,glyph:B}of E)(P[R]||(P[R]={}))[O]=B&&{id:B.id,bitmap:B.bitmap.clone(),metrics:B.metrics};f(null,P)}})}_doesCharSupportLocalGlyph(o){return!!this.localIdeographFontFamily&&(l.unicodeBlockLookup["CJK Unified Ideographs"](o)||l.unicodeBlockLookup["Hangul Syllables"](o)||l.unicodeBlockLookup.Hiragana(o)||l.unicodeBlockLookup.Katakana(o))}_tinySDF(o,f,v){const b=this.localIdeographFontFamily;if(!b||!this._doesCharSupportLocalGlyph(v))return;let E=o.tinySDF;if(!E){let R="400";/bold/i.test(f)?R="900":/medium/i.test(f)?R="500":/light/i.test(f)&&(R="200"),E=o.tinySDF=new Xe.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:b,fontWeight:R})}const P=E.draw(String.fromCharCode(v));return{id:v,bitmap:new l.AlphaImage({width:P.width||30,height:P.height||30},P.data),metrics:{width:P.glyphWidth||24,height:P.glyphHeight||24,left:P.glyphLeft||0,top:P.glyphTop-27||-8,advance:P.glyphAdvance||24}}}}Xe.loadGlyphRange=function(_,o,f,v,b){const E=256*o,P=E+255,R=v.transformRequest(f.replace("{fontstack}",_).replace("{range}",`${E}-${P}`),F.Glyphs);l.getArrayBuffer(R,(O,B)=>{if(O)b(O);else if(B){const K={};for(const Z of l.parseGlyphPbf(B))K[Z.id]=Z;b(null,K)}})},Xe.TinySDF=class{constructor({fontSize:_=24,buffer:o=3,radius:f=8,cutoff:v=.25,fontFamily:b="sans-serif",fontWeight:E="normal",fontStyle:P="normal"}={}){this.buffer=o,this.cutoff=v,this.radius=f;const R=this.size=_+4*o,O=this._createCanvas(R),B=this.ctx=O.getContext("2d",{willReadFrequently:!0});B.font=`${P} ${E} ${_}px ${b}`,B.textBaseline="alphabetic",B.textAlign="left",B.fillStyle="black",this.gridOuter=new Float64Array(R*R),this.gridInner=new Float64Array(R*R),this.f=new Float64Array(R),this.z=new Float64Array(R+1),this.v=new Uint16Array(R)}_createCanvas(_){const o=document.createElement("canvas");return o.width=o.height=_,o}draw(_){const{width:o,actualBoundingBoxAscent:f,actualBoundingBoxDescent:v,actualBoundingBoxLeft:b,actualBoundingBoxRight:E}=this.ctx.measureText(_),P=Math.ceil(f),R=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(E-b))),O=Math.min(this.size-this.buffer,P+Math.ceil(v)),B=R+2*this.buffer,K=O+2*this.buffer,Z=Math.max(B*K,0),le=new Uint8ClampedArray(Z),Se={data:le,width:B,height:K,glyphWidth:R,glyphHeight:O,glyphTop:P,glyphLeft:0,glyphAdvance:o};if(R===0||O===0)return Se;const{ctx:ve,buffer:xe,gridInner:De,gridOuter:Ue}=this;ve.clearRect(xe,xe,R,O),ve.fillText(_,xe,xe+P);const st=ve.getImageData(xe,xe,R,O);Ue.fill(ne,0,Z),De.fill(0,0,Z);for(let Ae=0;Ae<O;Ae++)for(let nt=0;nt<R;nt++){const _t=st.data[4*(Ae*R+nt)+3]/255;if(_t===0)continue;const At=(Ae+xe)*B+nt+xe;if(_t===1)Ue[At]=0,De[At]=ne;else{const Rt=.5-_t;Ue[At]=Rt>0?Rt*Rt:0,De[At]=Rt<0?Rt*Rt:0}}Ee(Ue,0,0,B,K,B,this.f,this.v,this.z),Ee(De,xe,xe,R,O,B,this.f,this.v,this.z);for(let Ae=0;Ae<Z;Ae++){const nt=Math.sqrt(Ue[Ae])-Math.sqrt(De[Ae]);le[Ae]=Math.round(255-255*(nt/this.radius+this.cutoff))}return Se}};class at{constructor(){this.specification=l.v8Spec.light.position}possiblyEvaluate(o,f){return l.sphericalToCartesian(o.expression.evaluate(f))}interpolate(o,f,v){return{x:l.interpolate.number(o.x,f.x,v),y:l.interpolate.number(o.y,f.y,v),z:l.interpolate.number(o.z,f.z,v)}}}const it="-transition";let $t,Ct;class tt extends l.Evented{constructor(o){super(),$t=$t||new l.Properties({anchor:new l.DataConstantProperty(l.v8Spec.light.anchor),position:new at,color:new l.DataConstantProperty(l.v8Spec.light.color),intensity:new l.DataConstantProperty(l.v8Spec.light.intensity)}),this._transitionable=new l.Transitionable($t),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,f={}){if(!this._validate(l.validateLight,o,f))for(const v in o){const b=o[v];v.endsWith(it)?this._transitionable.setTransition(v.slice(0,-it.length),b):this._transitionable.setValue(v,b)}}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,f,v){return(!v||v.validate!==!1)&&l.emitValidationErrors(this,o.call(l.validateStyle,l.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:l.v8Spec})))}}class et{constructor(o,f){this.width=o,this.height=f,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(o,f){const v=o.join(",")+String(f);return this.dashEntry[v]||(this.dashEntry[v]=this.addDash(o,f)),this.dashEntry[v]}getDashRanges(o,f,v){const b=[];let E=o.length%2==1?-o[o.length-1]*v:0,P=o[0]*v,R=!0;b.push({left:E,right:P,isDash:R,zeroLength:o[0]===0});let O=o[0];for(let B=1;B<o.length;B++){R=!R;const K=o[B];E=O*v,O+=K,P=O*v,b.push({left:E,right:P,isDash:R,zeroLength:K===0})}return b}addRoundDash(o,f,v){const b=f/2;for(let E=-v;E<=v;E++){const P=this.width*(this.nextRow+v+E);let R=0,O=o[R];for(let B=0;B<this.width;B++){B/O.right>1&&(O=o[++R]);const K=Math.abs(B-O.left),Z=Math.abs(B-O.right),le=Math.min(K,Z);let Se;const ve=E/v*(b+1);if(O.isDash){const xe=b-Math.abs(ve);Se=Math.sqrt(le*le+xe*xe)}else Se=b-Math.sqrt(le*le+ve*ve);this.data[P+B]=Math.max(0,Math.min(255,Se+128))}}}addRegularDash(o){for(let R=o.length-1;R>=0;--R){const O=o[R],B=o[R+1];O.zeroLength?o.splice(R,1):B&&B.isDash===O.isDash&&(B.left=O.left,o.splice(R,1))}const f=o[0],v=o[o.length-1];f.isDash===v.isDash&&(f.left=v.left-this.width,v.right=f.right+this.width);const b=this.width*this.nextRow;let E=0,P=o[E];for(let R=0;R<this.width;R++){R/P.right>1&&(P=o[++E]);const O=Math.abs(R-P.left),B=Math.abs(R-P.right),K=Math.min(O,B);this.data[b+R]=Math.max(0,Math.min(255,(P.isDash?K:-K)+128))}}addDash(o,f){const v=f?7:0,b=2*v+1;if(this.nextRow+b>this.height)return l.warnOnce("LineAtlas out of space"),null;let E=0;for(let R=0;R<o.length;R++)E+=o[R];if(E!==0){const R=this.width/E,O=this.getDashRanges(o,this.width,R);f?this.addRoundDash(O,R,v):this.addRegularDash(O)}const P={y:(this.nextRow+v+.5)/this.height,height:2*v/this.height,width:E};return this.nextRow+=b,this.dirty=!0,P}bind(o){const f=o.gl;this.texture?(f.bindTexture(f.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,f.texSubImage2D(f.TEXTURE_2D,0,0,0,this.width,this.height,f.ALPHA,f.UNSIGNED_BYTE,this.data))):(this.texture=f.createTexture(),f.bindTexture(f.TEXTURE_2D,this.texture),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texImage2D(f.TEXTURE_2D,0,f.ALPHA,this.width,this.height,0,f.ALPHA,f.UNSIGNED_BYTE,this.data))}}class dt{constructor(o,f,v){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=v;const b=this.workerPool.acquire(v);for(let E=0;E<b.length;E++){const P=new dt.Actor(b[E],f,v);P.name=`Worker ${E}`,this.actors.push(P)}if(!this.actors.length)throw new Error("No actors found")}broadcast(o,f,v){l.asyncAll(this.actors,(b,E)=>{b.send(o,f,E)},v=v||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(o=!0){this.actors.forEach(f=>{f.remove()}),this.actors=[],o&&this.workerPool.release(this.id)}}function Be(_,o,f){const v=function(b,E){if(b)return f(b);if(E){const P=l.pick(l.extend(E,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);E.vector_layers&&(P.vectorLayers=E.vector_layers,P.vectorLayerIds=P.vectorLayers.map(R=>R.id)),f(null,P)}};return _.url?l.getJSON(o.transformRequest(_.url,F.Source),v):l.exported.frame(()=>v(null,_))}dt.Actor=l.Actor;class Ke{constructor(o,f){o&&(f?this.setSouthWest(o).setNorthEast(f):Array.isArray(o)&&(o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1])))}setNorthEast(o){return this._ne=o instanceof l.LngLat?new l.LngLat(o.lng,o.lat):l.LngLat.convert(o),this}setSouthWest(o){return this._sw=o instanceof l.LngLat?new l.LngLat(o.lng,o.lat):l.LngLat.convert(o),this}extend(o){const f=this._sw,v=this._ne;let b,E;if(o instanceof l.LngLat)b=o,E=o;else{if(!(o instanceof Ke))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(Ke.convert(o)):this.extend(l.LngLat.convert(o)):o&&("lng"in o||"lon"in o)&&"lat"in o?this.extend(l.LngLat.convert(o)):this;if(b=o._sw,E=o._ne,!b||!E)return this}return f||v?(f.lng=Math.min(b.lng,f.lng),f.lat=Math.min(b.lat,f.lat),v.lng=Math.max(E.lng,v.lng),v.lat=Math.max(E.lat,v.lat)):(this._sw=new l.LngLat(b.lng,b.lat),this._ne=new l.LngLat(E.lng,E.lat)),this}getCenter(){return new l.LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.LngLat(this.getWest(),this.getNorth())}getSouthEast(){return new l.LngLat(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:f,lat:v}=l.LngLat.convert(o);let b=this._sw.lng<=f&&f<=this._ne.lng;return this._sw.lng>this._ne.lng&&(b=this._sw.lng>=f&&f>=this._ne.lng),this._sw.lat<=v&&v<=this._ne.lat&&b}static convert(o){return o instanceof Ke?o:o&&new Ke(o)}static fromLngLat(o,f=0){const v=360*f/40075017,b=v/Math.cos(Math.PI/180*o.lat);return new Ke(new l.LngLat(o.lng-b,o.lat-v),new l.LngLat(o.lng+b,o.lat+v))}}class ut{constructor(o,f,v){this.bounds=Ke.convert(this.validateBounds(o)),this.minzoom=f||0,this.maxzoom=v||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const f=Math.pow(2,o.z),v=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*f),b=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*f),E=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*f),P=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*f);return o.x>=v&&o.x<E&&o.y>=b&&o.y<P}}class Ot extends l.Evented{constructor(o,f,v,b){if(super(),this.id=o,this.dispatcher=v,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(f,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},f),this._collectResourceTiming=f.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b)}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Be(this._options,this.map._requestManager,(o,f)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),o?this.fire(new l.ErrorEvent(o)):f&&(l.extend(this,f),f.bounds&&(this.tileBounds=new ut(f.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}setSourceProperty(o){this._tileJSONRequest&&this._tileJSONRequest.cancel(),o(),this.load()}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}loadTile(o,f){const v=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),b={request:this.map._requestManager.transformRequest(v,F.Tile),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function E(P,R){return delete o.request,o.aborted?f(null):P&&P.status!==404?f(P):(R&&R.resourceTiming&&(o.resourceTiming=R.resourceTiming),this.map._refreshExpiredTiles&&R&&o.setExpiryData(R),o.loadVectorData(R,this.map.painter),f(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}b.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired"?o.state==="loading"?o.reloadCallback=f:o.request=o.actor.send("reloadTile",b,E.bind(this)):(o.actor=this.dispatcher.getActor(),o.request=o.actor.send("loadTile",b,E.bind(this)))}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id},void 0)}unloadTile(o){o.unloadVectorData(),o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Vt extends l.Evented{constructor(o,f,v,b){super(),this.id=o,this.dispatcher=v,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},f),l.extend(this,l.pick(f,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Be(this._options,this.map._requestManager,(o,f)=>{this._tileJSONRequest=null,this._loaded=!0,o?this.fire(new l.ErrorEvent(o)):f&&(l.extend(this,f),f.bounds&&(this.tileBounds=new ut(f.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o,f){const v=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);o.request=U.getImage(this.map._requestManager.transformRequest(v,F.Tile),(b,E,P)=>{if(delete o.request,o.aborted)o.state="unloaded",f(null);else if(b)o.state="errored",f(b);else if(E){this.map._refreshExpiredTiles&&P&&o.setExpiryData(P);const R=this.map.painter.context,O=R.gl;o.texture=this.map.painter.getTileTexture(E.width),o.texture?o.texture.update(E,{useMipmap:!0}):(o.texture=new z(R,E,O.RGBA,{useMipmap:!0}),o.texture.bind(O.LINEAR,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),R.extTextureFilterAnisotropic&&O.texParameterf(O.TEXTURE_2D,R.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,R.extTextureFilterAnisotropicMax)),o.state="loaded",f(null)}},this.map._refreshExpiredTiles)}abortTile(o,f){o.request&&(o.request.cancel(),delete o.request),f()}unloadTile(o,f){o.texture&&this.map.painter.saveTileTexture(o.texture),f()}hasTransition(){return!1}}class _n extends Vt{constructor(o,f,v,b){super(o,f,v,b),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},f),this.encoding=f.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(o,f){const v=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function b(E,P){E&&(o.state="errored",f(E)),P&&(o.dem=P,o.needsHillshadePrepare=!0,o.needsTerrainPrepare=!0,o.state="loaded",f(null))}o.request=U.getImage(this.map._requestManager.transformRequest(v,F.Tile),function(E,P){if(delete o.request,o.aborted)o.state="unloaded",f(null);else if(E)o.state="errored",f(E);else if(P){this.map._refreshExpiredTiles&&o.setExpiryData(P),delete P.cacheControl,delete P.expires;const R=l.isImageBitmap(P)&&(Ct==null&&(Ct=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Ct)?P:l.exported.getImageData(P,1),O={uid:o.uid,coord:o.tileID,source:this.id,rawImageData:R,encoding:this.encoding};o.actor&&o.state!=="expired"||(o.actor=this.dispatcher.getActor(),o.actor.send("loadDEMTile",O,b.bind(this)))}}.bind(this),this.map._refreshExpiredTiles),o.neighboringTiles=this._getNeighboringTiles(o.tileID)}_getNeighboringTiles(o){const f=o.canonical,v=Math.pow(2,f.z),b=(f.x-1+v)%v,E=f.x===0?o.wrap-1:o.wrap,P=(f.x+1+v)%v,R=f.x+1===v?o.wrap+1:o.wrap,O={};return O[new l.OverscaledTileID(o.overscaledZ,E,f.z,b,f.y).key]={backfilled:!1},O[new l.OverscaledTileID(o.overscaledZ,R,f.z,P,f.y).key]={backfilled:!1},f.y>0&&(O[new l.OverscaledTileID(o.overscaledZ,E,f.z,b,f.y-1).key]={backfilled:!1},O[new l.OverscaledTileID(o.overscaledZ,o.wrap,f.z,f.x,f.y-1).key]={backfilled:!1},O[new l.OverscaledTileID(o.overscaledZ,R,f.z,P,f.y-1).key]={backfilled:!1}),f.y+1<v&&(O[new l.OverscaledTileID(o.overscaledZ,E,f.z,b,f.y+1).key]={backfilled:!1},O[new l.OverscaledTileID(o.overscaledZ,o.wrap,f.z,f.x,f.y+1).key]={backfilled:!1},O[new l.OverscaledTileID(o.overscaledZ,R,f.z,P,f.y+1).key]={backfilled:!1}),O}unloadTile(o){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&o.actor.send("removeDEMTile",{uid:o.uid,source:this.id})}}class qt extends l.Evented{constructor(o,f,v,b){super(),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=v.getActor(),this.setEventedParent(b),this._data=f.data,this._options=l.extend({},f),this._collectResourceTiming=f.collectResourceTiming,f.maxzoom!==void 0&&(this.maxzoom=f.maxzoom),f.type&&(this.type=f.type),f.attribution&&(this.attribution=f.attribution),this.promoteId=f.promoteId;const E=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:f.cluster||!1,geojsonVtOptions:{buffer:(f.buffer!==void 0?f.buffer:128)*E,tolerance:(f.tolerance!==void 0?f.tolerance:.375)*E,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:f.lineMetrics||!1,generateId:f.generateId||!1},superclusterOptions:{maxZoom:f.clusterMaxZoom!==void 0?f.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,f.clusterMinPoints||2),extent:l.EXTENT,radius:(f.clusterRadius||50)*E,log:!1,generateId:f.generateId||!1},clusterProperties:f.clusterProperties,filter:f.filter},f.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){this._updateWorkerData()}onAdd(o){this.map=o,this.load()}setData(o){return this._data=o,this._updateWorkerData(),this}updateData(o){return this._updateWorkerData(o),this}setClusterOptions(o){return this.workerOptions.cluster=o.cluster,o&&(o.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=o.clusterRadius),o.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=o.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(o,f){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:o,source:this.id},f),this}getClusterChildren(o,f){return this.actor.send("geojson.getClusterChildren",{clusterId:o,source:this.id},f),this}getClusterLeaves(o,f,v,b){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:o,limit:f,offset:v},b),this}_updateWorkerData(o){const f=l.extend({},this.workerOptions);o?f.dataDiff=o:typeof this._data=="string"?(f.request=this.map._requestManager.transformRequest(l.exported.resolveURL(this._data),F.Source),f.request.collectResourceTiming=this._collectResourceTiming):f.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,f,(v,b)=>{if(this._pendingLoads--,this._removed||b&&b.abandoned)return void this.fire(new l.Event("dataabort",{dataType:"source"}));let E=null;if(b&&b.resourceTiming&&b.resourceTiming[this.id]&&(E=b.resourceTiming[this.id].slice(0)),v)return void this.fire(new l.ErrorEvent(v));const P={dataType:"source"};this._collectResourceTiming&&E&&E.length>0&&l.extend(P,{resourceTiming:E}),this.fire(new l.Event("data",{...P,sourceDataType:"metadata"})),this.fire(new l.Event("data",{...P,sourceDataType:"content"}))})}loaded(){return this._pendingLoads===0}loadTile(o,f){const v=o.actor?"reloadTile":"loadTile";o.actor=this.actor;const b={type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};o.request=this.actor.send(v,b,(E,P)=>(delete o.request,o.unloadVectorData(),o.aborted?f(null):E?f(E):(o.loadVectorData(P,this.map.painter,v==="reloadTile"),f(null))))}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.aborted=!0}unloadTile(o){o.unloadVectorData(),this.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return l.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var _e=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ke extends l.Evented{constructor(o,f,v,b){super(),this.id=o,this.dispatcher=v,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(b),this.options=f}load(o,f){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=U.getImage(this.map._requestManager.transformRequest(this.url,F.Image),(v,b)=>{this._request=null,this._loaded=!0,v?this.fire(new l.ErrorEvent(v)):b&&(this.image=b,o&&(this.coordinates=o),f&&f(),this._finishLoading())})}loaded(){return this._loaded}updateImage(o){return o.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=o.url,this.load(o.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(o){this.coordinates=o;const f=o.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(b){let E=1/0,P=1/0,R=-1/0,O=-1/0;for(const le of b)E=Math.min(E,le.x),P=Math.min(P,le.y),R=Math.max(R,le.x),O=Math.max(O,le.y);const B=Math.max(R-E,O-P),K=Math.max(0,Math.floor(-Math.log(B)/Math.LN2)),Z=Math.pow(2,K);return new l.CanonicalTileID(K,Math.floor((E+R)/2*Z),Math.floor((P+O)/2*Z))}(f),this.minzoom=this.maxzoom=this.tileID.z;const v=f.map(b=>this.tileID.getTilePoint(b)._round());return this._boundsArray=new l.RasterBoundsArray,this._boundsArray.emplaceBack(v[0].x,v[0].y,0,0),this._boundsArray.emplaceBack(v[1].x,v[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(v[3].x,v[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(v[2].x,v[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const o=this.map.painter.context,f=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,_e.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new z(o,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let v=!1;for(const b in this.tiles){const E=this.tiles[b];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,v=!0)}v&&this.fire(new l.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(o,f){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},f(null)):(o.state="errored",f(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class ge extends ke{constructor(o,f,v,b){super(o,f,v,b),this.roundZoom=!0,this.type="video",this.options=f}load(){this._loaded=!1;const o=this.options;this.urls=[];for(const f of o.urls)this.urls.push(this.map._requestManager.transformRequest(f,F.Source).url);l.getVideo(this.urls,(f,v)=>{this._loaded=!0,f?this.fire(new l.ErrorEvent(f)):v&&(this.video=v,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(o){if(this.video){const f=this.video.seekable;o<f.start(0)||o>f.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${f.start(0)} and ${f.end(0)}-second mark.`))):this.video.currentTime=o}}getVideo(){return this.video}onAdd(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const o=this.map.painter.context,f=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,_e.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE),f.texSubImage2D(f.TEXTURE_2D,0,0,0,f.RGBA,f.UNSIGNED_BYTE,this.video)):(this.texture=new z(o,this.video,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let v=!1;for(const b in this.tiles){const E=this.tiles[b];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,v=!0)}v&&this.fire(new l.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ft extends ke{constructor(o,f,v,b){super(o,f,v,b),f.coordinates?Array.isArray(f.coordinates)&&f.coordinates.length===4&&!f.coordinates.some(E=>!Array.isArray(E)||E.length!==2||E.some(P=>typeof P!="number"))||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${o}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${o}`,null,'missing required property "coordinates"'))),f.animate&&typeof f.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${o}`,null,'optional "animate" property must be a boolean value'))),f.canvas?typeof f.canvas=="string"||f.canvas instanceof HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${o}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${o}`,null,'missing required property "canvas"'))),this.options=f,this.animate=f.animate===void 0||f.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const f=this.map.painter.context,v=f.gl;this.boundsBuffer||(this.boundsBuffer=f.createVertexBuffer(this._boundsArray,_e.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new z(f,this.canvas,v.RGBA,{premultiply:!0});let b=!1;for(const E in this.tiles){const P=this.tiles[E];P.state!=="loaded"&&(P.state="loaded",P.texture=this.texture,b=!0)}b&&this.fire(new l.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const o of[this.canvas.width,this.canvas.height])if(isNaN(o)||o<=0)return!0;return!1}}const q={vector:Ot,raster:Vt,"raster-dem":_n,geojson:qt,video:ge,image:ke,canvas:ft};function fe(_,o){const f=l.create();return l.translate(f,f,[1,1,0]),l.scale(f,f,[.5*_.width,.5*_.height,1]),l.multiply(f,f,_.calculatePosMatrix(o.toUnwrapped()))}function Pe(_,o,f,v,b,E){const P=function(Z,le,Se){if(Z)for(const ve of Z){const xe=le[ve];if(xe&&xe.source===Se&&xe.type==="fill-extrusion")return!0}else for(const ve in le){const xe=le[ve];if(xe.source===Se&&xe.type==="fill-extrusion")return!0}return!1}(b&&b.layers,o,_.id),R=E.maxPitchScaleFactor(),O=_.tilesIn(v,R,P);O.sort(Ge);const B=[];for(const Z of O)B.push({wrappedTileID:Z.tileID.wrapped().key,queryResults:Z.tile.queryRenderedFeatures(o,f,_._state,Z.queryGeometry,Z.cameraQueryGeometry,Z.scale,b,E,R,fe(_.transform,Z.tileID))});const K=function(Z){const le={},Se={};for(const ve of Z){const xe=ve.queryResults,De=ve.wrappedTileID,Ue=Se[De]=Se[De]||{};for(const st in xe){const Ae=xe[st],nt=Ue[st]=Ue[st]||{},_t=le[st]=le[st]||[];for(const At of Ae)nt[At.featureIndex]||(nt[At.featureIndex]=!0,_t.push(At))}}return le}(B);for(const Z in K)K[Z].forEach(le=>{const Se=le.feature,ve=_.getFeatureState(Se.layer["source-layer"],Se.id);Se.source=Se.layer.source,Se.layer["source-layer"]&&(Se.sourceLayer=Se.layer["source-layer"]),Se.state=ve});return K}function Ge(_,o){const f=_.tileID,v=o.tileID;return f.overscaledZ-v.overscaledZ||f.canonical.y-v.canonical.y||f.wrap-v.wrap||f.canonical.x-v.canonical.x}class pt{constructor(o,f){this.timeAdded=0,this.fadeEndTime=0,this.tileID=o,this.uid=l.uniqueId(),this.uses=0,this.tileSize=f,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(o){const f=o+this.timeAdded;f<this.fadeEndTime||(this.fadeEndTime=f)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(o){this.demTexture&&o.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(o,f,v){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(b,E){const P={};if(!E)return P;for(const R of b){const O=R.layerIds.map(B=>E.getLayer(B)).filter(Boolean);if(O.length!==0){R.layers=O,R.stateDependentLayerIds&&(R.stateDependentLayers=R.stateDependentLayerIds.map(B=>O.filter(K=>K.id===B)[0]));for(const B of O)P[B.id]=R}}return P}(o.buckets,f.style),this.hasSymbolBuckets=!1;for(const b in this.buckets){const E=this.buckets[b];if(E instanceof l.SymbolBucket){if(this.hasSymbolBuckets=!0,!v)break;E.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const b in this.buckets){const E=this.buckets[b];if(E instanceof l.SymbolBucket&&E.hasRTLText){this.hasRTLText=!0,l.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const b in this.buckets){const E=this.buckets[b];this.queryPadding=Math.max(this.queryPadding,f.style.getLayer(b).queryRadius(E))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage)}else this.collisionBoxArray=new l.CollisionBoxArray}unloadVectorData(){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(o){return this.buckets[o.id]}upload(o){for(const v in this.buckets){const b=this.buckets[v];b.uploadPending()&&b.upload(o)}const f=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new z(o,this.imageAtlas.image,f.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new z(o,this.glyphAtlasImage,f.ALPHA),this.glyphAtlasImage=null)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,f,v,b,E,P,R,O,B,K){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:b,cameraQueryGeometry:E,scale:P,tileSize:this.tileSize,pixelPosMatrix:K,transform:O,params:R,queryPadding:this.queryPadding*B},o,f,v):{}}querySourceFeatures(o,f){const v=this.latestFeatureIndex;if(!v||!v.rawTileData)return;const b=v.loadVTLayers(),E=f&&f.sourceLayer?f.sourceLayer:"",P=b._geojsonTileLayer||b[E];if(!P)return;const R=l.createFilter(f&&f.filter),{z:O,x:B,y:K}=this.tileID.canonical,Z={z:O,x:B,y:K};for(let le=0;le<P.length;le++){const Se=P.feature(le);if(R.needGeometry){const De=l.toEvaluationFeature(Se,!0);if(!R.filter(new l.EvaluationParameters(this.tileID.overscaledZ),De,this.tileID.canonical))continue}else if(!R.filter(new l.EvaluationParameters(this.tileID.overscaledZ),Se))continue;const ve=v.getId(Se,E),xe=new l.GeoJSONFeature(Se,O,B,K,ve);xe.tile=Z,o.push(xe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const f=this.expirationTime;if(o.cacheControl){const v=l.parseCacheControl(o.cacheControl);v["max-age"]&&(this.expirationTime=Date.now()+1e3*v["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const v=Date.now();let b=!1;if(this.expirationTime>v)b=!1;else if(f)if(this.expirationTime<f)b=!0;else{const E=this.expirationTime-f;E?this.expirationTime=v+Math.max(E,3e4):b=!0}else b=!0;b?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(o,f){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(o).length===0)return;const v=this.latestFeatureIndex.loadVTLayers();for(const b in this.buckets){if(!f.style.hasLayer(b))continue;const E=this.buckets[b],P=E.layers[0].sourceLayer||"_geojsonTileLayer",R=v[P],O=o[P];if(!R||!O||Object.keys(O).length===0)continue;E.update(O,R,this.imageAtlas&&this.imageAtlas.patternPositions||{});const B=f&&f.style&&f.style.getLayer(b);B&&(this.queryPadding=Math.max(this.queryPadding,B.queryRadius(E)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=l.exported.now()+o}setDependencies(o,f){const v={};for(const b of f)v[b]=!0;this.dependencies[o]=v}hasDependency(o,f){for(const v of o){const b=this.dependencies[v];if(b){for(const E of f)if(b[E])return!0}}return!1}}class ht{constructor(o,f){this.max=o,this.onRemove=f,this.reset()}reset(){for(const o in this.data)for(const f of this.data[o])f.timeout&&clearTimeout(f.timeout),this.onRemove(f.value);return this.data={},this.order=[],this}add(o,f,v){const b=o.wrapped().key;this.data[b]===void 0&&(this.data[b]=[]);const E={value:f,timeout:void 0};if(v!==void 0&&(E.timeout=setTimeout(()=>{this.remove(o,E)},v)),this.data[b].push(E),this.order.push(b),this.order.length>this.max){const P=this._getAndRemoveByKey(this.order[0]);P&&this.onRemove(P)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const f=this.data[o].shift();return f.timeout&&clearTimeout(f.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),f.value}getByKey(o){const f=this.data[o];return f?f[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,f){if(!this.has(o))return this;const v=o.wrapped().key,b=f===void 0?0:this.data[v].indexOf(f),E=this.data[v][b];return this.data[v].splice(b,1),E.timeout&&clearTimeout(E.timeout),this.data[v].length===0&&delete this.data[v],this.onRemove(E.value),this.order.splice(this.order.indexOf(v),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const f=this._getAndRemoveByKey(this.order[0]);f&&this.onRemove(f)}return this}filter(o){const f=[];for(const v in this.data)for(const b of this.data[v])o(b.value)||f.push(b);for(const v of f)this.remove(v.value.tileID,v)}}class zt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,f,v){const b=String(f);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][b]=this.stateChanges[o][b]||{},l.extend(this.stateChanges[o][b],v),this.deletedStates[o]===null){this.deletedStates[o]={};for(const E in this.state[o])E!==b&&(this.deletedStates[o][E]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][b]===null){this.deletedStates[o][b]={};for(const E in this.state[o][b])v[E]||(this.deletedStates[o][b][E]=null)}else for(const E in v)this.deletedStates[o]&&this.deletedStates[o][b]&&this.deletedStates[o][b][E]===null&&delete this.deletedStates[o][b][E]}removeFeatureState(o,f,v){if(this.deletedStates[o]===null)return;const b=String(f);if(this.deletedStates[o]=this.deletedStates[o]||{},v&&f!==void 0)this.deletedStates[o][b]!==null&&(this.deletedStates[o][b]=this.deletedStates[o][b]||{},this.deletedStates[o][b][v]=null);else if(f!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][b])for(v in this.deletedStates[o][b]={},this.stateChanges[o][b])this.deletedStates[o][b][v]=null;else this.deletedStates[o][b]=null;else this.deletedStates[o]=null}getState(o,f){const v=String(f),b=l.extend({},(this.state[o]||{})[v],(this.stateChanges[o]||{})[v]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){const E=this.deletedStates[o][f];if(E===null)return{};for(const P in E)delete b[P]}return b}initializeTileState(o,f){o.setFeatureState(this.state,f)}coalesceChanges(o,f){const v={};for(const b in this.stateChanges){this.state[b]=this.state[b]||{};const E={};for(const P in this.stateChanges[b])this.state[b][P]||(this.state[b][P]={}),l.extend(this.state[b][P],this.stateChanges[b][P]),E[P]=this.state[b][P];v[b]=E}for(const b in this.deletedStates){this.state[b]=this.state[b]||{};const E={};if(this.deletedStates[b]===null)for(const P in this.state[b])E[P]={},this.state[b][P]={};else for(const P in this.deletedStates[b]){if(this.deletedStates[b][P]===null)this.state[b][P]={};else for(const R of Object.keys(this.deletedStates[b][P]))delete this.state[b][P][R];E[P]=this.state[b][P]}v[b]=v[b]||{},l.extend(v[b],E)}if(this.stateChanges={},this.deletedStates={},Object.keys(v).length!==0)for(const b in o)o[b].setFeatureState(v,f)}}class Dt extends l.Evented{constructor(o,f,v){super(),this.id=o,this.dispatcher=v,this.on("data",b=>{b.dataType==="source"&&b.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&b.dataType==="source"&&b.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(b,E,P,R){const O=new q[E.type](b,E,P,R);if(O.id!==b)throw new Error(`Expected Source id to be ${b} instead of ${O.id}`);return l.bindAll(["load","abort","unload","serialize","prepare"],O),O}(o,f,v,this),this._tiles={},this._cache=new ht(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new zt,this._didEmitContent=!1,this._updated=!1}onAdd(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(o)}onRemove(o){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(o)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const o in this._tiles){const f=this._tiles[o];if(f.state!=="loaded"&&f.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(o,f){return this._source.loadTile(o,f)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o,()=>{})}_abortTile(o){this._source.abortTile&&this._source.abortTile(o,()=>{}),this._source.fire(new l.Event("dataabort",{tile:o,coord:o.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const f in this._tiles){const v=this._tiles[f];v.upload(o),v.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(o=>o.tileID).sort(Gt).map(o=>o.key)}getRenderableIds(o){const f=[];for(const v in this._tiles)this._isIdRenderable(v,o)&&f.push(this._tiles[v]);return o?f.sort((v,b)=>{const E=v.tileID,P=b.tileID,R=new l.Point(E.canonical.x,E.canonical.y)._rotate(this.transform.angle),O=new l.Point(P.canonical.x,P.canonical.y)._rotate(this.transform.angle);return E.overscaledZ-P.overscaledZ||O.y-R.y||O.x-R.x}).map(v=>v.tileID.key):f.map(v=>v.tileID).sort(Gt).map(v=>v.key)}hasRenderableParent(o){const f=this.findLoadedParent(o,0);return!!f&&this._isIdRenderable(f.tileID.key)}_isIdRenderable(o,f){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(f||!this._tiles[o].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")}}_reloadTile(o,f){const v=this._tiles[o];v&&(v.state!=="loading"&&(v.state=f),this._loadTile(v,this._tileLoaded.bind(this,v,o,f)))}_tileLoaded(o,f,v,b){if(b)return o.state="errored",void(b.status!==404?this._source.fire(new l.ErrorEvent(b,{tile:o})):this.update(this.transform,this.terrain));o.timeAdded=l.exported.now(),v==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(f,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),o.aborted||this._source.fire(new l.Event("data",{dataType:"source",tile:o,coord:o.tileID}))}_backfillDEM(o){const f=this.getRenderableIds();for(let b=0;b<f.length;b++){const E=f[b];if(o.neighboringTiles&&o.neighboringTiles[E]){const P=this.getTileByID(E);v(o,P),v(P,o)}}function v(b,E){b.needsHillshadePrepare=!0,b.needsTerrainPrepare=!0;let P=E.tileID.canonical.x-b.tileID.canonical.x;const R=E.tileID.canonical.y-b.tileID.canonical.y,O=Math.pow(2,b.tileID.canonical.z),B=E.tileID.key;P===0&&R===0||Math.abs(R)>1||(Math.abs(P)>1&&(Math.abs(P+O)===1?P+=O:Math.abs(P-O)===1&&(P-=O)),E.dem&&b.dem&&(b.dem.backfillBorder(E.dem,P,R),b.neighboringTiles&&b.neighboringTiles[B]&&(b.neighboringTiles[B].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,f,v,b){for(const E in this._tiles){let P=this._tiles[E];if(b[E]||!P.hasData()||P.tileID.overscaledZ<=f||P.tileID.overscaledZ>v)continue;let R=P.tileID;for(;P&&P.tileID.overscaledZ>f+1;){const B=P.tileID.scaledTo(P.tileID.overscaledZ-1);P=this._tiles[B.key],P&&P.hasData()&&(R=B)}let O=R;for(;O.overscaledZ>f;)if(O=O.scaledTo(O.overscaledZ-1),o[O.key]){b[R.key]=R;break}}}findLoadedParent(o,f){if(o.key in this._loadedParentTiles){const v=this._loadedParentTiles[o.key];return v&&v.tileID.overscaledZ>=f?v:null}for(let v=o.overscaledZ-1;v>=f;v--){const b=o.scaledTo(v),E=this._getLoadedTile(b);if(E)return E}}_getLoadedTile(o){const f=this._tiles[o.key];return f&&f.hasData()?f:this._cache.getByKey(o.wrapped().key)}updateCacheSize(o){const f=Math.ceil(o.width/this._source.tileSize)+1,v=Math.ceil(o.height/this._source.tileSize)+1,b=Math.floor(f*v*5),E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,b):b;this._cache.setMaxSize(E)}handleWrapJump(o){const f=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,f){const v={};for(const b in this._tiles){const E=this._tiles[b];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+f),v[E.tileID.key]=E}this._tiles=v;for(const b in this._timers)clearTimeout(this._timers[b]),delete this._timers[b];for(const b in this._tiles)this._setTileReloadTimer(b,this._tiles[b])}}update(o,f){if(this.transform=o,this.terrain=f,!this._sourceLoaded||this._paused)return;let v;this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?v=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(K=>new l.OverscaledTileID(K.canonical.z,K.wrap,K.canonical.z,K.canonical.x,K.canonical.y)):(v=o.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:f}),this._source.hasTile&&(v=v.filter(K=>this._source.hasTile(K)))):v=[];const b=o.coveringZoomLevel(this._source),E=Math.max(b-Dt.maxOverzooming,this._source.minzoom),P=Math.max(b+Dt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const K={};for(const Z of v)if(Z.canonical.z>this._source.minzoom){const le=Z.scaledTo(Z.canonical.z-1);K[le.key]=le;const Se=Z.scaledTo(Math.max(this._source.minzoom,Math.min(Z.canonical.z,5)));K[Se.key]=Se}v=v.concat(Object.values(K))}const R=v.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,R&&this.fire(new l.Event("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const O=this._updateRetainedTiles(v,b);if(ln(this._source.type)){const K={},Z={},le=Object.keys(O),Se=l.exported.now();for(const ve of le){const xe=O[ve],De=this._tiles[ve];if(!De||De.fadeEndTime!==0&&De.fadeEndTime<=Se)continue;const Ue=this.findLoadedParent(xe,E);Ue&&(this._addTile(Ue.tileID),K[Ue.tileID.key]=Ue.tileID),Z[ve]=xe}this._retainLoadedChildren(Z,b,P,O);for(const ve in K)O[ve]||(this._coveredTiles[ve]=!0,O[ve]=K[ve]);if(f){const ve={},xe={};for(const De of v)this._tiles[De.key].hasData()?ve[De.key]=De:xe[De.key]=De;for(const De in xe){const Ue=xe[De].children(this._source.maxzoom);this._tiles[Ue[0].key]&&this._tiles[Ue[1].key]&&this._tiles[Ue[2].key]&&this._tiles[Ue[3].key]&&(ve[Ue[0].key]=O[Ue[0].key]=Ue[0],ve[Ue[1].key]=O[Ue[1].key]=Ue[1],ve[Ue[2].key]=O[Ue[2].key]=Ue[2],ve[Ue[3].key]=O[Ue[3].key]=Ue[3],delete xe[De])}for(const De in xe){const Ue=this.findLoadedParent(xe[De],this._source.minzoom);if(Ue){ve[Ue.tileID.key]=O[Ue.tileID.key]=Ue.tileID;for(const st in ve)ve[st].isChildOf(Ue.tileID)&&delete ve[st]}}for(const De in this._tiles)ve[De]||(this._coveredTiles[De]=!0)}}for(const K in O)this._tiles[K].clearFadeHold();const B=l.keysDifference(this._tiles,O);for(const K of B){const Z=this._tiles[K];Z.hasSymbolBuckets&&!Z.holdingForFade()?Z.setHoldDuration(this.map._fadeDuration):Z.hasSymbolBuckets&&!Z.symbolFadeFinished()||this._removeTile(K)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)}_updateRetainedTiles(o,f){const v={},b={},E=Math.max(f-Dt.maxOverzooming,this._source.minzoom),P=Math.max(f+Dt.maxUnderzooming,this._source.minzoom),R={};for(const O of o){const B=this._addTile(O);v[O.key]=O,B.hasData()||f<this._source.maxzoom&&(R[O.key]=O)}this._retainLoadedChildren(R,f,P,v);for(const O of o){let B=this._tiles[O.key];if(B.hasData())continue;if(f+1>this._source.maxzoom){const Z=O.children(this._source.maxzoom)[0],le=this.getTile(Z);if(le&&le.hasData()){v[Z.key]=Z;continue}}else{const Z=O.children(this._source.maxzoom);if(v[Z[0].key]&&v[Z[1].key]&&v[Z[2].key]&&v[Z[3].key])continue}let K=B.wasRequested();for(let Z=O.overscaledZ-1;Z>=E;--Z){const le=O.scaledTo(Z);if(b[le.key])break;if(b[le.key]=!0,B=this.getTile(le),!B&&K&&(B=this._addTile(le)),B){const Se=B.hasData();if((K||Se)&&(v[le.key]=le),K=B.wasRequested(),Se)break}}}return v}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const f=[];let v,b=this._tiles[o].tileID;for(;b.overscaledZ>0;){if(b.key in this._loadedParentTiles){v=this._loadedParentTiles[b.key];break}f.push(b.key);const E=b.scaledTo(b.overscaledZ-1);if(v=this._getLoadedTile(E),v)break;b=E}for(const E of f)this._loadedParentTiles[E]=v}}_addTile(o){let f=this._tiles[o.key];if(f)return f;f=this._cache.getAndRemove(o),f&&(this._setTileReloadTimer(o.key,f),f.tileID=o,this._state.initializeTileState(f,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,f)));const v=f;return f||(f=new pt(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(f,this._tileLoaded.bind(this,f,o.key,f.state))),f.uses++,this._tiles[o.key]=f,v||this._source.fire(new l.Event("dataloading",{tile:f,coord:f.tileID,dataType:"source"})),f}_setTileReloadTimer(o,f){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const v=f.getExpiryTimeout();v&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},v))}_removeTile(o){const f=this._tiles[o];f&&(f.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),f.uses>0||(f.hasData()&&f.state!=="reloading"?this._cache.add(f.tileID,f,f.getExpiryTimeout()):(f.aborted=!0,this._abortTile(f),this._unloadTile(f))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(o);this._cache.reset()}tilesIn(o,f,v){const b=[],E=this.transform;if(!E)return b;const P=v?E.getCameraQueryGeometry(o):o,R=o.map(ve=>E.pointCoordinate(ve,this.terrain)),O=P.map(ve=>E.pointCoordinate(ve,this.terrain)),B=this.getIds();let K=1/0,Z=1/0,le=-1/0,Se=-1/0;for(const ve of O)K=Math.min(K,ve.x),Z=Math.min(Z,ve.y),le=Math.max(le,ve.x),Se=Math.max(Se,ve.y);for(let ve=0;ve<B.length;ve++){const xe=this._tiles[B[ve]];if(xe.holdingForFade())continue;const De=xe.tileID,Ue=Math.pow(2,E.zoom-xe.tileID.overscaledZ),st=f*xe.queryPadding*l.EXTENT/xe.tileSize/Ue,Ae=[De.getTilePoint(new l.MercatorCoordinate(K,Z)),De.getTilePoint(new l.MercatorCoordinate(le,Se))];if(Ae[0].x-st<l.EXTENT&&Ae[0].y-st<l.EXTENT&&Ae[1].x+st>=0&&Ae[1].y+st>=0){const nt=R.map(At=>De.getTilePoint(At)),_t=O.map(At=>De.getTilePoint(At));b.push({tile:xe,tileID:De,queryGeometry:nt,cameraQueryGeometry:_t,scale:Ue})}}return b}getVisibleCoordinates(o){const f=this.getRenderableIds(o).map(v=>this._tiles[v].tileID);for(const v of f)v.posMatrix=this.transform.calculatePosMatrix(v.toUnwrapped());return f}hasTransition(){if(this._source.hasTransition())return!0;if(ln(this._source.type)){const o=l.exported.now();for(const f in this._tiles)if(this._tiles[f].fadeEndTime>=o)return!0}return!1}setFeatureState(o,f,v){this._state.updateState(o=o||"_geojsonTileLayer",f,v)}removeFeatureState(o,f,v){this._state.removeFeatureState(o=o||"_geojsonTileLayer",f,v)}getFeatureState(o,f){return this._state.getState(o=o||"_geojsonTileLayer",f)}setDependencies(o,f,v){const b=this._tiles[o];b&&b.setDependencies(f,v)}reloadTilesForDependencies(o,f){for(const v in this._tiles)this._tiles[v].hasDependency(o,f)&&this._reloadTile(v,"reloading");this._cache.filter(v=>!v.hasDependency(o,f))}}function Gt(_,o){const f=Math.abs(2*_.wrap)-+(_.wrap<0),v=Math.abs(2*o.wrap)-+(o.wrap<0);return _.overscaledZ-o.overscaledZ||v-f||o.canonical.y-_.canonical.y||o.canonical.x-_.canonical.x}function ln(_){return _==="raster"||_==="image"||_==="video"}Dt.maxOverzooming=10,Dt.maxUnderzooming=3;const vt="mapboxgl_preloaded_worker_pool";class Rn{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<Rn.workerCount;)this.workers.push(new Worker(l.config.WORKER_URL));return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(f=>{f.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[vt]}numActive(){return Object.keys(this.active).length}}const Ln=Math.floor(l.exported.hardwareConcurrency/2);let Ye;function Qe(){return Ye||(Ye=new Rn),Ye}Rn.workerCount=l.isSafari(globalThis)?Math.max(Math.min(Ln,3),1):1;class Re{constructor(o,f){this.reset(o,f)}reset(o,f){this.points=o||[],this._distances=[0];for(let v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=l.clamp(o,0,1);let f=1,v=this._distances[f];const b=o*this.paddedLength+this.padding;for(;v<b&&f<this._distances.length;)v=this._distances[++f];const E=f-1,P=this._distances[E],R=v-P,O=R>0?(b-P)/R:0;return this.points[E].mult(1-O).add(this.points[f].mult(O))}}function mt(_,o){let f=!0;return _==="always"||_!=="never"&&o!=="never"||(f=!1),f}class St{constructor(o,f,v){const b=this.boxCells=[],E=this.circleCells=[];this.xCellCount=Math.ceil(o/v),this.yCellCount=Math.ceil(f/v);for(let P=0;P<this.xCellCount*this.yCellCount;P++)b.push([]),E.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=f,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,f,v,b,E){this._forEachCell(f,v,b,E,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(b),this.bboxes.push(E)}insertCircle(o,f,v,b){this._forEachCell(f-b,v-b,f+b,v+b,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(f),this.circles.push(v),this.circles.push(b)}_insertBoxCell(o,f,v,b,E,P){this.boxCells[E].push(P)}_insertCircleCell(o,f,v,b,E,P){this.circleCells[E].push(P)}_query(o,f,v,b,E,P,R){if(v<0||o>this.width||b<0||f>this.height)return[];const O=[];if(o<=0&&f<=0&&this.width<=v&&this.height<=b){if(E)return[{key:null,x1:o,y1:f,x2:v,y2:b}];for(let B=0;B<this.boxKeys.length;B++)O.push({key:this.boxKeys[B],x1:this.bboxes[4*B],y1:this.bboxes[4*B+1],x2:this.bboxes[4*B+2],y2:this.bboxes[4*B+3]});for(let B=0;B<this.circleKeys.length;B++){const K=this.circles[3*B],Z=this.circles[3*B+1],le=this.circles[3*B+2];O.push({key:this.circleKeys[B],x1:K-le,y1:Z-le,x2:K+le,y2:Z+le})}}else this._forEachCell(o,f,v,b,this._queryCell,O,{hitTest:E,overlapMode:P,seenUids:{box:{},circle:{}}},R);return O}query(o,f,v,b){return this._query(o,f,v,b,!1,null)}hitTest(o,f,v,b,E,P){return this._query(o,f,v,b,!0,E,P).length>0}hitTestCircle(o,f,v,b,E){const P=o-v,R=o+v,O=f-v,B=f+v;if(R<0||P>this.width||B<0||O>this.height)return!1;const K=[];return this._forEachCell(P,O,R,B,this._queryCellCircle,K,{hitTest:!0,overlapMode:b,circle:{x:o,y:f,radius:v},seenUids:{box:{},circle:{}}},E),K.length>0}_queryCell(o,f,v,b,E,P,R,O){const{seenUids:B,hitTest:K,overlapMode:Z}=R,le=this.boxCells[E];if(le!==null){const ve=this.bboxes;for(const xe of le)if(!B.box[xe]){B.box[xe]=!0;const De=4*xe,Ue=this.boxKeys[xe];if(o<=ve[De+2]&&f<=ve[De+3]&&v>=ve[De+0]&&b>=ve[De+1]&&(!O||O(Ue))&&(!K||!mt(Z,Ue.overlapMode))&&(P.push({key:Ue,x1:ve[De],y1:ve[De+1],x2:ve[De+2],y2:ve[De+3]}),K))return!0}}const Se=this.circleCells[E];if(Se!==null){const ve=this.circles;for(const xe of Se)if(!B.circle[xe]){B.circle[xe]=!0;const De=3*xe,Ue=this.circleKeys[xe];if(this._circleAndRectCollide(ve[De],ve[De+1],ve[De+2],o,f,v,b)&&(!O||O(Ue))&&(!K||!mt(Z,Ue.overlapMode))){const st=ve[De],Ae=ve[De+1],nt=ve[De+2];if(P.push({key:Ue,x1:st-nt,y1:Ae-nt,x2:st+nt,y2:Ae+nt}),K)return!0}}}return!1}_queryCellCircle(o,f,v,b,E,P,R,O){const{circle:B,seenUids:K,overlapMode:Z}=R,le=this.boxCells[E];if(le!==null){const ve=this.bboxes;for(const xe of le)if(!K.box[xe]){K.box[xe]=!0;const De=4*xe,Ue=this.boxKeys[xe];if(this._circleAndRectCollide(B.x,B.y,B.radius,ve[De+0],ve[De+1],ve[De+2],ve[De+3])&&(!O||O(Ue))&&!mt(Z,Ue.overlapMode))return P.push(!0),!0}}const Se=this.circleCells[E];if(Se!==null){const ve=this.circles;for(const xe of Se)if(!K.circle[xe]){K.circle[xe]=!0;const De=3*xe,Ue=this.circleKeys[xe];if(this._circlesCollide(ve[De],ve[De+1],ve[De+2],B.x,B.y,B.radius)&&(!O||O(Ue))&&!mt(Z,Ue.overlapMode))return P.push(!0),!0}}}_forEachCell(o,f,v,b,E,P,R,O){const B=this._convertToXCellCoord(o),K=this._convertToYCellCoord(f),Z=this._convertToXCellCoord(v),le=this._convertToYCellCoord(b);for(let Se=B;Se<=Z;Se++)for(let ve=K;ve<=le;ve++)if(E.call(this,o,f,v,b,this.xCellCount*ve+Se,P,R,O))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,f,v,b,E,P){const R=b-o,O=E-f,B=v+P;return B*B>R*R+O*O}_circleAndRectCollide(o,f,v,b,E,P,R){const O=(P-b)/2,B=Math.abs(o-(b+O));if(B>O+v)return!1;const K=(R-E)/2,Z=Math.abs(f-(E+K));if(Z>K+v)return!1;if(B<=O||Z<=K)return!0;const le=B-O,Se=Z-K;return le*le+Se*Se<=v*v}}function Yt(_,o,f,v,b){const E=l.create();return o?(l.scale(E,E,[1/b,1/b,1]),f||l.rotateZ(E,E,v.angle)):l.multiply(E,v.labelPlaneMatrix,_),E}function an(_,o,f,v,b){if(o){const E=l.clone(_);return l.scale(E,E,[b,b,1]),f||l.rotateZ(E,E,-v.angle),E}return v.glCoordMatrix}function Pt(_,o,f){let v;f?(v=[_.x,_.y,f(_.x,_.y),1],l.transformMat4(v,v,o)):(v=[_.x,_.y,0,1],Le(v,v,o));const b=v[3];return{point:new l.Point(v[0]/b,v[1]/b),signedDistanceFromCamera:b}}function qn(_,o){return .5+_/o*.5}function Cn(_,o){const f=_[0]/_[3],v=_[1]/_[3];return f>=-o[0]&&f<=o[0]&&v>=-o[1]&&v<=o[1]}function Ut(_,o,f,v,b,E,P,R,O,B){const K=v?_.textSizeData:_.iconSizeData,Z=l.evaluateSizeForZoom(K,f.transform.zoom),le=[256/f.width*2+1,256/f.height*2+1],Se=v?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;Se.clear();const ve=_.lineVertexArray,xe=v?_.text.placedSymbolArray:_.icon.placedSymbolArray,De=f.transform.width/f.transform.height;let Ue=!1;for(let st=0;st<xe.length;st++){const Ae=xe.get(st);if(Ae.hidden||Ae.writingMode===l.WritingMode.vertical&&!Ue){Ve(Ae.numGlyphs,Se);continue}let nt;if(Ue=!1,B?(nt=[Ae.anchorX,Ae.anchorY,B(Ae.anchorX,Ae.anchorY),1],l.transformMat4(nt,nt,o)):(nt=[Ae.anchorX,Ae.anchorY,0,1],Le(nt,nt,o)),!Cn(nt,le)){Ve(Ae.numGlyphs,Se);continue}const _t=qn(f.transform.cameraToCenterDistance,nt[3]),At=l.evaluateSizeForFeature(K,Z,Ae),Rt=P?At/_t:At*_t,Bt=new l.Point(Ae.anchorX,Ae.anchorY),Lt=Pt(Bt,b,B).point,nn={projections:{},offsets:{}},Sn=de(Ae,Rt,!1,R,o,b,E,_.glyphOffsetArray,ve,Se,Lt,Bt,nn,De,O,B);Ue=Sn.useVertical,(Sn.notEnoughRoom||Ue||Sn.needsFlipping&&de(Ae,Rt,!0,R,o,b,E,_.glyphOffsetArray,ve,Se,Lt,Bt,nn,De,O,B).notEnoughRoom)&&Ve(Ae.numGlyphs,Se)}v?_.text.dynamicLayoutVertexBuffer.updateData(Se):_.icon.dynamicLayoutVertexBuffer.updateData(Se)}function vn(_,o,f,v,b,E,P,R,O,B,K,Z,le){const Se=R.glyphStartIndex+R.numGlyphs,ve=R.lineStartIndex,xe=R.lineStartIndex+R.lineLength,De=o.getoffsetX(R.glyphStartIndex),Ue=o.getoffsetX(Se-1),st=$e(_*De,f,v,b,E,P,R.segment,ve,xe,O,B,K,Z,le);if(!st)return null;const Ae=$e(_*Ue,f,v,b,E,P,R.segment,ve,xe,O,B,K,Z,le);return Ae?{first:st,last:Ae}:null}function kn(_,o,f,v){return _===l.WritingMode.horizontal&&Math.abs(f.y-o.y)>Math.abs(f.x-o.x)*v?{useVertical:!0}:(_===l.WritingMode.vertical?o.y<f.y:o.x>f.x)?{needsFlipping:!0}:null}function de(_,o,f,v,b,E,P,R,O,B,K,Z,le,Se,ve,xe){const De=o/24,Ue=_.lineOffsetX*De,st=_.lineOffsetY*De;let Ae;if(_.numGlyphs>1){const nt=_.glyphStartIndex+_.numGlyphs,_t=_.lineStartIndex,At=_.lineStartIndex+_.lineLength,Rt=vn(De,R,Ue,st,f,K,Z,_,O,E,le,ve,xe);if(!Rt)return{notEnoughRoom:!0};const Bt=Pt(Rt.first.point,P,xe).point,Lt=Pt(Rt.last.point,P,xe).point;if(v&&!f){const nn=kn(_.writingMode,Bt,Lt,Se);if(nn)return nn}Ae=[Rt.first];for(let nn=_.glyphStartIndex+1;nn<nt-1;nn++)Ae.push($e(De*R.getoffsetX(nn),Ue,st,f,K,Z,_.segment,_t,At,O,E,le,ve,xe));Ae.push(Rt.last)}else{if(v&&!f){const _t=Pt(Z,b,xe).point,At=_.lineStartIndex+_.segment+1,Rt=new l.Point(O.getx(At),O.gety(At)),Bt=Pt(Rt,b,xe),Lt=Bt.signedDistanceFromCamera>0?Bt.point:Y(Z,Rt,_t,1,b,xe),nn=kn(_.writingMode,_t,Lt,Se);if(nn)return nn}const nt=$e(De*R.getoffsetX(_.glyphStartIndex),Ue,st,f,K,Z,_.segment,_.lineStartIndex,_.lineStartIndex+_.lineLength,O,E,le,ve,xe);if(!nt)return{notEnoughRoom:!0};Ae=[nt]}for(const nt of Ae)l.addDynamicAttributes(B,nt.point,nt.angle);return{}}function Y(_,o,f,v,b,E){const P=Pt(_.add(_.sub(o)._unit()),b,E).point,R=f.sub(P);return f.add(R._mult(v/R.mag()))}function re(_,o){const{projectionCache:f,lineVertexArray:v,labelPlaneMatrix:b,tileAnchorPoint:E,distanceFromAnchor:P,getElevation:R,previousVertex:O,direction:B,absOffsetX:K}=o;if(f.projections[_])return f.projections[_];const Z=new l.Point(v.getx(_),v.gety(_)),le=Pt(Z,b,R);if(le.signedDistanceFromCamera>0)return f.projections[_]=le.point,le.point;const Se=_-B;return Y(P===0?E:new l.Point(v.getx(Se),v.gety(Se)),Z,O,K-P+1,b,R)}function pe(_,o,f){return _._unit()._perp()._mult(o*f)}function Ie(_,o,f,v,b,E,P,R){const{projectionCache:O,direction:B}=R;if(O.offsets[_])return O.offsets[_];const K=f.add(o);if(_+B<v||_+B>=b)return O.offsets[_]=K,K;const Z=re(_+B,R),le=pe(Z.sub(f),P,B),Se=f.add(le),ve=Z.add(le);return O.offsets[_]=l.findLineIntersection(E,K,Se,ve)||K,O.offsets[_]}function $e(_,o,f,v,b,E,P,R,O,B,K,Z,le,Se){const ve=v?_-o:_+o;let xe=ve>0?1:-1,De=0;v&&(xe*=-1,De=Math.PI),xe<0&&(De+=Math.PI);let Ue,st,Ae=xe>0?R+P:R+P+1,nt=b,_t=b,At=0,Rt=0;const Bt=Math.abs(ve),Lt=[];let nn;for(;At+Rt<=Bt;){if(Ae+=xe,Ae<R||Ae>=O)return null;At+=Rt,_t=nt,st=Ue;const Zt={projectionCache:Z,lineVertexArray:B,labelPlaneMatrix:K,tileAnchorPoint:E,distanceFromAnchor:At,getElevation:Se,previousVertex:_t,direction:xe,absOffsetX:Bt};if(nt=re(Ae,Zt),f===0)Lt.push(_t),nn=nt.sub(_t);else{let On;const on=nt.sub(_t);On=on.mag()===0?pe(re(Ae+xe,Zt).sub(nt),f,xe):pe(on,f,xe),st||(st=_t.add(On)),Ue=Ie(Ae,On,nt,R,O,st,f,Zt),Lt.push(st),nn=Ue.sub(st)}Rt=nn.mag()}const Sn=nn._mult((Bt-At)/Rt)._add(st||_t),zn=De+Math.atan2(nt.y-_t.y,nt.x-_t.x);return Lt.push(Sn),{point:Sn,angle:le?zn:0,path:Lt}}const qe=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ve(_,o){for(let f=0;f<_;f++){const v=o.length;o.resize(v+4),o.float32.set(qe,3*v)}}function Le(_,o,f){const v=o[0],b=o[1];return _[0]=f[0]*v+f[4]*b+f[12],_[1]=f[1]*v+f[5]*b+f[13],_[3]=f[3]*v+f[7]*b+f[15],_}const Ze=100;class wt{constructor(o,f=new St(o.width+200,o.height+200,25),v=new St(o.width+200,o.height+200,25)){this.transform=o,this.grid=f,this.ignoredGrid=v,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+Ze,this.screenBottomBoundary=o.height+Ze,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(o,f,v,b,E,P){const R=this.projectAndGetPerspectiveRatio(b,o.anchorPointX,o.anchorPointY,P),O=v*R.perspectiveRatio,B=o.x1*O+R.point.x,K=o.y1*O+R.point.y,Z=o.x2*O+R.point.x,le=o.y2*O+R.point.y;return!this.isInsideGrid(B,K,Z,le)||f!=="always"&&this.grid.hitTest(B,K,Z,le,f,E)||R.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[B,K,Z,le],offscreen:this.isOffscreen(B,K,Z,le)}}placeCollisionCircles(o,f,v,b,E,P,R,O,B,K,Z,le,Se,ve){const xe=[],De=new l.Point(f.anchorX,f.anchorY),Ue=Pt(De,P,ve),st=qn(this.transform.cameraToCenterDistance,Ue.signedDistanceFromCamera),Ae=(K?E/st:E*st)/l.ONE_EM,nt=Pt(De,R,ve).point,_t=vn(Ae,b,f.lineOffsetX*Ae,f.lineOffsetY*Ae,!1,nt,De,f,v,R,{projections:{},offsets:{}},!1,ve);let At=!1,Rt=!1,Bt=!0;if(_t){const Lt=.5*le*st+Se,nn=new l.Point(-100,-100),Sn=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),zn=new Re,Zt=_t.first,On=_t.last;let on=[];for(let hi=Zt.path.length-1;hi>=1;hi--)on.push(Zt.path[hi]);for(let hi=1;hi<On.path.length;hi++)on.push(On.path[hi]);const di=2.5*Lt;if(O){const hi=on.map(Nn=>Pt(Nn,O,ve));on=hi.some(Nn=>Nn.signedDistanceFromCamera<=0)?[]:hi.map(Nn=>Nn.point)}let tr=[];if(on.length>0){const hi=on[0].clone(),Nn=on[0].clone();for(let Ki=1;Ki<on.length;Ki++)hi.x=Math.min(hi.x,on[Ki].x),hi.y=Math.min(hi.y,on[Ki].y),Nn.x=Math.max(Nn.x,on[Ki].x),Nn.y=Math.max(Nn.y,on[Ki].y);tr=hi.x>=nn.x&&Nn.x<=Sn.x&&hi.y>=nn.y&&Nn.y<=Sn.y?[on]:Nn.x<nn.x||hi.x>Sn.x||Nn.y<nn.y||hi.y>Sn.y?[]:l.clipLine([on],nn.x,nn.y,Sn.x,Sn.y)}for(const hi of tr){zn.reset(hi,.25*Lt);let Nn=0;Nn=zn.length<=.5*Lt?1:Math.ceil(zn.paddedLength/di)+1;for(let Ki=0;Ki<Nn;Ki++){const Ur=Ki/Math.max(Nn-1,1),nr=zn.lerp(Ur),yr=nr.x+Ze,ls=nr.y+Ze;xe.push(yr,ls,Lt,0);const Ns=yr-Lt,Us=ls-Lt,jr=yr+Lt,ha=ls+Lt;if(Bt=Bt&&this.isOffscreen(Ns,Us,jr,ha),Rt=Rt||this.isInsideGrid(Ns,Us,jr,ha),o!=="always"&&this.grid.hitTestCircle(yr,ls,Lt,o,Z)&&(At=!0,!B))return{circles:[],offscreen:!1,collisionDetected:At}}}}return{circles:!B&&At||!Rt||st<this.perspectiveRatioCutoff?[]:xe,offscreen:Bt,collisionDetected:At}}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const f=[];let v=1/0,b=1/0,E=-1/0,P=-1/0;for(const K of o){const Z=new l.Point(K.x+Ze,K.y+Ze);v=Math.min(v,Z.x),b=Math.min(b,Z.y),E=Math.max(E,Z.x),P=Math.max(P,Z.y),f.push(Z)}const R=this.grid.query(v,b,E,P).concat(this.ignoredGrid.query(v,b,E,P)),O={},B={};for(const K of R){const Z=K.key;if(O[Z.bucketInstanceId]===void 0&&(O[Z.bucketInstanceId]={}),O[Z.bucketInstanceId][Z.featureIndex])continue;const le=[new l.Point(K.x1,K.y1),new l.Point(K.x2,K.y1),new l.Point(K.x2,K.y2),new l.Point(K.x1,K.y2)];l.polygonIntersectsPolygon(f,le)&&(O[Z.bucketInstanceId][Z.featureIndex]=!0,B[Z.bucketInstanceId]===void 0&&(B[Z.bucketInstanceId]=[]),B[Z.bucketInstanceId].push(Z.featureIndex))}return B}insertCollisionBox(o,f,v,b,E,P){(v?this.ignoredGrid:this.grid).insert({bucketInstanceId:b,featureIndex:E,collisionGroupID:P,overlapMode:f},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,f,v,b,E,P){const R=v?this.ignoredGrid:this.grid,O={bucketInstanceId:b,featureIndex:E,collisionGroupID:P,overlapMode:f};for(let B=0;B<o.length;B+=4)R.insertCircle(O,o[B],o[B+1],o[B+2])}projectAndGetPerspectiveRatio(o,f,v,b){let E;return b?(E=[f,v,b(f,v),1],l.transformMat4(E,E,o)):(E=[f,v,0,1],Le(E,E,o)),{point:new l.Point((E[0]/E[3]+1)/2*this.transform.width+Ze,(-E[1]/E[3]+1)/2*this.transform.height+Ze),perspectiveRatio:.5+this.transform.cameraToCenterDistance/E[3]*.5}}isOffscreen(o,f,v,b){return v<Ze||o>=this.screenRightBoundary||b<Ze||f>this.screenBottomBoundary}isInsideGrid(o,f,v,b){return v>=0&&o<this.gridRightBoundary&&b>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const o=l.identity([]);return l.translate(o,o,[-100,-100,0]),o}}function bt(_,o,f){return o*(l.EXTENT/(_.tileSize*Math.pow(2,f-_.tileID.overscaledZ)))}class Et{constructor(o,f,v,b){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?f:-f))):b&&v?1:0,this.placed=v}isHidden(){return this.opacity===0&&!this.placed}}class pn{constructor(o,f,v,b,E){this.text=new Et(o?o.text:null,f,v,E),this.icon=new Et(o?o.icon:null,f,b,E)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class wn{constructor(o,f,v){this.text=o,this.icon=f,this.skipFade=v}}class un{constructor(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]}}class mn{constructor(o,f,v,b,E){this.bucketInstanceId=o,this.featureIndex=f,this.sourceLayerIndex=v,this.bucketIndex=b,this.tileID=E}}class En{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const f=++this.maxGroupID;this.collisionGroups[o]={ID:f,predicate:v=>v.collisionGroupID===f}}return this.collisionGroups[o]}}function Vn(_,o,f,v,b){const{horizontalAlign:E,verticalAlign:P}=l.getAnchorAlignment(_),R=-(E-.5)*o,O=-(P-.5)*f,B=l.evaluateVariableOffset(_,v);return new l.Point(R+B[0]*b,O+B[1]*b)}function $n(_,o,f,v,b,E){const{x1:P,x2:R,y1:O,y2:B,anchorPointX:K,anchorPointY:Z}=_,le=new l.Point(o,f);return v&&le._rotate(b?E:-E),{x1:P+le.x,y1:O+le.y,x2:R+le.x,y2:B+le.y,anchorPointX:K,anchorPointY:Z}}class jt{constructor(o,f,v,b,E){this.transform=o.clone(),this.terrain=f,this.collisionIndex=new wt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=v,this.retainedQueryData={},this.collisionGroups=new En(b),this.collisionCircleArrays={},this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(o,f,v,b){const E=v.getBucket(f),P=v.latestFeatureIndex;if(!E||!P||f.id!==E.layerIds[0])return;const R=v.collisionBoxArray,O=E.layers[0].layout,B=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),K=v.tileSize/l.EXTENT,Z=this.transform.calculatePosMatrix(v.tileID.toUnwrapped()),le=O.get("text-pitch-alignment")==="map",Se=O.get("text-rotation-alignment")==="map",ve=bt(v,1,this.transform.zoom),xe=Yt(Z,le,Se,this.transform,ve);let De=null;if(le){const st=an(Z,le,Se,this.transform,ve);De=l.multiply([],this.transform.labelPlaneMatrix,st)}this.retainedQueryData[E.bucketInstanceId]=new mn(E.bucketInstanceId,P,E.sourceLayerIndex,E.index,v.tileID);const Ue={bucket:E,layout:O,posMatrix:Z,textLabelPlaneMatrix:xe,labelToScreenMatrix:De,scale:B,textPixelRatio:K,holdingForFade:v.holdingForFade(),collisionBoxArray:R,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(E.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(E.sourceID)};if(b)for(const st of E.sortKeyRanges){const{sortKey:Ae,symbolInstanceStart:nt,symbolInstanceEnd:_t}=st;o.push({sortKey:Ae,symbolInstanceStart:nt,symbolInstanceEnd:_t,parameters:Ue})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:E.symbolInstances.length,parameters:Ue})}attemptAnchorPlacement(o,f,v,b,E,P,R,O,B,K,Z,le,Se,ve,xe,De){const Ue=[le.textOffset0,le.textOffset1],st=Vn(o,v,b,Ue,E),Ae=this.collisionIndex.placeCollisionBox($n(f,st.x,st.y,P,R,this.transform.angle),Z,O,B,K.predicate,De);if((!xe||this.collisionIndex.placeCollisionBox($n(xe,st.x,st.y,P,R,this.transform.angle),Z,O,B,K.predicate,De).box.length!==0)&&Ae.box.length>0){let nt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[le.crossTileID]&&this.prevPlacement.placements[le.crossTileID]&&this.prevPlacement.placements[le.crossTileID].text&&(nt=this.prevPlacement.variableOffsets[le.crossTileID].anchor),le.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[le.crossTileID]={textOffset:Ue,width:v,height:b,anchor:o,textBoxScale:E,prevAnchor:nt},this.markUsedJustification(Se,o,le,ve),Se.allowVerticalPlacement&&(this.markUsedOrientation(Se,ve,le),this.placedOrientations[le.crossTileID]=ve),{shift:st,placedGlyphBoxes:Ae}}}placeLayerBucketPart(o,f,v){const{bucket:b,layout:E,posMatrix:P,textLabelPlaneMatrix:R,labelToScreenMatrix:O,textPixelRatio:B,holdingForFade:K,collisionBoxArray:Z,partiallyEvaluatedTextSize:le,collisionGroup:Se}=o.parameters,ve=E.get("text-optional"),xe=E.get("icon-optional"),De=l.getOverlapMode(E,"text-overlap","text-allow-overlap"),Ue=De==="always",st=l.getOverlapMode(E,"icon-overlap","icon-allow-overlap"),Ae=st==="always",nt=E.get("text-rotation-alignment")==="map",_t=E.get("text-pitch-alignment")==="map",At=E.get("icon-text-fit")!=="none",Rt=E.get("symbol-z-order")==="viewport-y",Bt=Ue&&(Ae||!b.hasIconData()||xe),Lt=Ae&&(Ue||!b.hasTextData()||ve);!b.collisionArrays&&Z&&b.deserializeCollisionBoxes(Z);const nn=this.retainedQueryData[b.bucketInstanceId].tileID,Sn=this.terrain?(Zt,On)=>this.terrain.getElevation(nn,Zt,On):null,zn=(Zt,On)=>{if(f[Zt.crossTileID])return;if(K)return void(this.placements[Zt.crossTileID]=new wn(!1,!1,!1));let on=!1,di=!1,tr=!0,hi=null,Nn={box:null,offscreen:null},Ki={box:null,offscreen:null},Ur=null,nr=null,yr=null,ls=0,Ns=0,Us=0;On.textFeatureIndex?ls=On.textFeatureIndex:Zt.useRuntimeCollisionCircles&&(ls=Zt.featureIndex),On.verticalTextFeatureIndex&&(Ns=On.verticalTextFeatureIndex);const jr=On.textBox;if(jr){const Pr=pi=>{let fr=l.WritingMode.horizontal;if(b.allowVerticalPlacement&&!pi&&this.prevPlacement){const xr=this.prevPlacement.placedOrientations[Zt.crossTileID];xr&&(this.placedOrientations[Zt.crossTileID]=xr,fr=xr,this.markUsedOrientation(b,fr,Zt))}return fr},br=(pi,fr)=>{if(b.allowVerticalPlacement&&Zt.numVerticalGlyphVertices>0&&On.verticalTextBox){for(const xr of b.writingModes)if(xr===l.WritingMode.vertical?(Nn=fr(),Ki=Nn):Nn=pi(),Nn&&Nn.box&&Nn.box.length)break}else Nn=pi()};if(E.get("text-variable-anchor")){let pi=E.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Zt.crossTileID]){const vi=this.prevPlacement.variableOffsets[Zt.crossTileID];pi.indexOf(vi.anchor)>0&&(pi=pi.filter(pr=>pr!==vi.anchor),pi.unshift(vi.anchor))}const fr=(vi,pr,cs)=>{const fd=vi.x2-vi.x1,Oa=vi.y2-vi.y1,by=Zt.textBoxScale,tg=At&&st==="never"?pr:null;let $i={box:[],offscreen:!1};const ff=De!=="never"?2*pi.length:pi.length;for(let Vc=0;Vc<ff;++Vc){const Ra=this.attemptAnchorPlacement(pi[Vc%pi.length],vi,fd,Oa,by,nt,_t,B,P,Se,Vc>=pi.length?De:"never",Zt,b,cs,tg,Sn);if(Ra&&($i=Ra.placedGlyphBoxes,$i&&$i.box&&$i.box.length)){on=!0,hi=Ra.shift;break}}return $i};br(()=>fr(jr,On.iconBox,l.WritingMode.horizontal),()=>{const vi=On.verticalTextBox;return b.allowVerticalPlacement&&!(Nn&&Nn.box&&Nn.box.length)&&Zt.numVerticalGlyphVertices>0&&vi?fr(vi,On.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),Nn&&(on=Nn.box,tr=Nn.offscreen);const xr=Pr(Nn&&Nn.box);if(!on&&this.prevPlacement){const vi=this.prevPlacement.variableOffsets[Zt.crossTileID];vi&&(this.variableOffsets[Zt.crossTileID]=vi,this.markUsedJustification(b,vi.anchor,Zt,xr))}}else{const pi=(fr,xr)=>{const vi=this.collisionIndex.placeCollisionBox(fr,De,B,P,Se.predicate,Sn);return vi&&vi.box&&vi.box.length&&(this.markUsedOrientation(b,xr,Zt),this.placedOrientations[Zt.crossTileID]=xr),vi};br(()=>pi(jr,l.WritingMode.horizontal),()=>{const fr=On.verticalTextBox;return b.allowVerticalPlacement&&Zt.numVerticalGlyphVertices>0&&fr?pi(fr,l.WritingMode.vertical):{box:null,offscreen:null}}),Pr(Nn&&Nn.box&&Nn.box.length)}}if(Ur=Nn,on=Ur&&Ur.box&&Ur.box.length>0,tr=Ur&&Ur.offscreen,Zt.useRuntimeCollisionCircles){const Pr=b.text.placedSymbolArray.get(Zt.centerJustifiedTextSymbolIndex),br=l.evaluateSizeForFeature(b.textSizeData,le,Pr),pi=E.get("text-padding");nr=this.collisionIndex.placeCollisionCircles(De,Pr,b.lineVertexArray,b.glyphOffsetArray,br,P,R,O,v,_t,Se.predicate,Zt.collisionCircleDiameter,pi,Sn),nr.circles.length&&nr.collisionDetected&&!v&&l.warnOnce("Collisions detected, but collision boxes are not shown"),on=Ue||nr.circles.length>0&&!nr.collisionDetected,tr=tr&&nr.offscreen}if(On.iconFeatureIndex&&(Us=On.iconFeatureIndex),On.iconBox){const Pr=br=>{const pi=At&&hi?$n(br,hi.x,hi.y,nt,_t,this.transform.angle):br;return this.collisionIndex.placeCollisionBox(pi,st,B,P,Se.predicate,Sn)};Ki&&Ki.box&&Ki.box.length&&On.verticalIconBox?(yr=Pr(On.verticalIconBox),di=yr.box.length>0):(yr=Pr(On.iconBox),di=yr.box.length>0),tr=tr&&yr.offscreen}const ha=ve||Zt.numHorizontalGlyphVertices===0&&Zt.numVerticalGlyphVertices===0,jc=xe||Zt.numIconVertices===0;if(ha||jc?jc?ha||(di=di&&on):on=di&&on:di=on=di&&on,on&&Ur&&Ur.box&&this.collisionIndex.insertCollisionBox(Ur.box,De,E.get("text-ignore-placement"),b.bucketInstanceId,Ki&&Ki.box&&Ns?Ns:ls,Se.ID),di&&yr&&this.collisionIndex.insertCollisionBox(yr.box,st,E.get("icon-ignore-placement"),b.bucketInstanceId,Us,Se.ID),nr&&(on&&this.collisionIndex.insertCollisionCircles(nr.circles,De,E.get("text-ignore-placement"),b.bucketInstanceId,ls,Se.ID),v)){const Pr=b.bucketInstanceId;let br=this.collisionCircleArrays[Pr];br===void 0&&(br=this.collisionCircleArrays[Pr]=new un);for(let pi=0;pi<nr.circles.length;pi+=4)br.circles.push(nr.circles[pi+0]),br.circles.push(nr.circles[pi+1]),br.circles.push(nr.circles[pi+2]),br.circles.push(nr.collisionDetected?1:0)}if(Zt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(b.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Zt.crossTileID]=new wn(on||Bt,di||Lt,tr||b.justReloaded),f[Zt.crossTileID]=!0};if(Rt){if(o.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Zt=b.getSortedSymbolIndexes(this.transform.angle);for(let On=Zt.length-1;On>=0;--On){const on=Zt[On];zn(b.symbolInstances.get(on),b.collisionArrays[on])}}else for(let Zt=o.symbolInstanceStart;Zt<o.symbolInstanceEnd;Zt++)zn(b.symbolInstances.get(Zt),b.collisionArrays[Zt]);if(v&&b.bucketInstanceId in this.collisionCircleArrays){const Zt=this.collisionCircleArrays[b.bucketInstanceId];l.invert(Zt.invProjMatrix,P),Zt.viewportMatrix=this.collisionIndex.getViewportMatrix()}b.justReloaded=!1}markUsedJustification(o,f,v,b){let E;E=b===l.WritingMode.vertical?v.verticalPlacedTextSymbolIndex:{left:v.leftJustifiedTextSymbolIndex,center:v.centerJustifiedTextSymbolIndex,right:v.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(f)];const P=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex,v.verticalPlacedTextSymbolIndex];for(const R of P)R>=0&&(o.text.placedSymbolArray.get(R).crossTileID=E>=0&&R!==E?0:v.crossTileID)}markUsedOrientation(o,f,v){const b=f===l.WritingMode.horizontal||f===l.WritingMode.horizontalOnly?f:0,E=f===l.WritingMode.vertical?f:0,P=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex];for(const R of P)o.text.placedSymbolArray.get(R).placedOrientation=b;v.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(v.verticalPlacedTextSymbolIndex).placedOrientation=E)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let v=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const b=f?f.symbolFadeChange(o):1,E=f?f.opacities:{},P=f?f.variableOffsets:{},R=f?f.placedOrientations:{};for(const O in this.placements){const B=this.placements[O],K=E[O];K?(this.opacities[O]=new pn(K,b,B.text,B.icon),v=v||B.text!==K.text.placed||B.icon!==K.icon.placed):(this.opacities[O]=new pn(null,b,B.text,B.icon,B.skipFade),v=v||B.text||B.icon)}for(const O in E){const B=E[O];if(!this.opacities[O]){const K=new pn(B,b,!1,!1);K.isHidden()||(this.opacities[O]=K,v=v||B.text.placed||B.icon.placed)}}for(const O in P)this.variableOffsets[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.variableOffsets[O]=P[O]);for(const O in R)this.placedOrientations[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.placedOrientations[O]=R[O]);if(f&&f.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");v?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:o)}updateLayerOpacities(o,f){const v={};for(const b of f){const E=b.getBucket(o);E&&b.latestFeatureIndex&&o.id===E.layerIds[0]&&this.updateBucketOpacities(E,v,b.collisionBoxArray)}}updateBucketOpacities(o,f,v){o.hasTextData()&&(o.text.opacityVertexArray.clear(),o.text.hasVisibleVertices=!1),o.hasIconData()&&(o.icon.opacityVertexArray.clear(),o.icon.hasVisibleVertices=!1),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const b=o.layers[0].layout,E=new pn(null,0,!1,!1,!0),P=b.get("text-allow-overlap"),R=b.get("icon-allow-overlap"),O=b.get("text-variable-anchor"),B=b.get("text-rotation-alignment")==="map",K=b.get("text-pitch-alignment")==="map",Z=b.get("icon-text-fit")!=="none",le=new pn(null,0,P&&(R||!o.hasIconData()||b.get("icon-optional")),R&&(P||!o.hasTextData()||b.get("text-optional")),!0);!o.collisionArrays&&v&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(v);const Se=(ve,xe,De)=>{for(let Ue=0;Ue<xe/4;Ue++)ve.opacityVertexArray.emplaceBack(De);ve.hasVisibleVertices=ve.hasVisibleVertices||De!==ri};for(let ve=0;ve<o.symbolInstances.length;ve++){const xe=o.symbolInstances.get(ve),{numHorizontalGlyphVertices:De,numVerticalGlyphVertices:Ue,crossTileID:st}=xe;let Ae=this.opacities[st];f[st]?Ae=E:Ae||(Ae=le,this.opacities[st]=Ae),f[st]=!0;const nt=xe.numIconVertices>0,_t=this.placedOrientations[xe.crossTileID],At=_t===l.WritingMode.vertical,Rt=_t===l.WritingMode.horizontal||_t===l.WritingMode.horizontalOnly;if(De>0||Ue>0){const Bt=oi(Ae.text);Se(o.text,De,At?ri:Bt),Se(o.text,Ue,Rt?ri:Bt);const Lt=Ae.text.isHidden();[xe.rightJustifiedTextSymbolIndex,xe.centerJustifiedTextSymbolIndex,xe.leftJustifiedTextSymbolIndex].forEach(zn=>{zn>=0&&(o.text.placedSymbolArray.get(zn).hidden=Lt||At?1:0)}),xe.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(xe.verticalPlacedTextSymbolIndex).hidden=Lt||Rt?1:0);const nn=this.variableOffsets[xe.crossTileID];nn&&this.markUsedJustification(o,nn.anchor,xe,_t);const Sn=this.placedOrientations[xe.crossTileID];Sn&&(this.markUsedJustification(o,"left",xe,Sn),this.markUsedOrientation(o,Sn,xe))}if(nt){const Bt=oi(Ae.icon),Lt=!(Z&&xe.verticalPlacedIconSymbolIndex&&At);xe.placedIconSymbolIndex>=0&&(Se(o.icon,xe.numIconVertices,Lt?Bt:ri),o.icon.placedSymbolArray.get(xe.placedIconSymbolIndex).hidden=Ae.icon.isHidden()),xe.verticalPlacedIconSymbolIndex>=0&&(Se(o.icon,xe.numVerticalIconVertices,Lt?ri:Bt),o.icon.placedSymbolArray.get(xe.verticalPlacedIconSymbolIndex).hidden=Ae.icon.isHidden())}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const Bt=o.collisionArrays[ve];if(Bt){let Lt=new l.Point(0,0);if(Bt.textBox||Bt.verticalTextBox){let Sn=!0;if(O){const zn=this.variableOffsets[st];zn?(Lt=Vn(zn.anchor,zn.width,zn.height,zn.textOffset,zn.textBoxScale),B&&Lt._rotate(K?this.transform.angle:-this.transform.angle)):Sn=!1}Bt.textBox&&He(o.textCollisionBox.collisionVertexArray,Ae.text.placed,!Sn||At,Lt.x,Lt.y),Bt.verticalTextBox&&He(o.textCollisionBox.collisionVertexArray,Ae.text.placed,!Sn||Rt,Lt.x,Lt.y)}const nn=!!(!Rt&&Bt.verticalIconBox);Bt.iconBox&&He(o.iconCollisionBox.collisionVertexArray,Ae.icon.placed,nn,Z?Lt.x:0,Z?Lt.y:0),Bt.verticalIconBox&&He(o.iconCollisionBox.collisionVertexArray,Ae.icon.placed,!nn,Z?Lt.x:0,Z?Lt.y:0)}}}if(o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.text.opacityVertexArray.length!==o.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${o.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${o.text.layoutVertexArray.length}) / 4`);if(o.icon.opacityVertexArray.length!==o.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${o.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${o.icon.layoutVertexArray.length}) / 4`);if(o.bucketInstanceId in this.collisionCircleArrays){const ve=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=ve.invProjMatrix,o.placementViewportMatrix=ve.viewportMatrix,o.collisionCircleArray=ve.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,f){const v=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*v>o}setStale(){this.stale=!0}}function He(_,o,f,v,b){_.emplaceBack(o?1:0,f?1:0,v||0,b||0),_.emplaceBack(o?1:0,f?1:0,v||0,b||0),_.emplaceBack(o?1:0,f?1:0,v||0,b||0),_.emplaceBack(o?1:0,f?1:0,v||0,b||0)}const It=Math.pow(2,25),gt=Math.pow(2,24),ze=Math.pow(2,17),yt=Math.pow(2,16),Wt=Math.pow(2,9),In=Math.pow(2,8),Yn=Math.pow(2,1);function oi(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const o=_.placed?1:0,f=Math.floor(127*_.opacity);return f*It+o*gt+f*ze+o*yt+f*Wt+o*In+f*Yn+o}const ri=0;class uo{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&!o.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(o,f,v,b,E){const P=this._bucketParts;for(;this._currentTileIndex<o.length;)if(f.getBucketParts(P,b,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,E())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,P.sort((R,O)=>R.sortKey-O.sortKey));this._currentPartIndex<P.length;)if(f.placeLayerBucketPart(P[this._currentPartIndex],this._seenCrossTileIDs,v),this._currentPartIndex++,E())return!0;return!1}}class ji{constructor(o,f,v,b,E,P,R,O){this.placement=new jt(o,f,P,R,O),this._currentPlacementIndex=v.length-1,this._forceFullPlacement=b,this._showCollisionBoxes=E,this._done=!1}isDone(){return this._done}continuePlacement(o,f,v){const b=l.exported.now(),E=()=>!this._forceFullPlacement&&l.exported.now()-b>2;for(;this._currentPlacementIndex>=0;){const P=f[o[this._currentPlacementIndex]],R=this.placement.collisionIndex.transform.zoom;if(P.type==="symbol"&&(!P.minzoom||P.minzoom<=R)&&(!P.maxzoom||P.maxzoom>R)){if(this._inProgressLayer||(this._inProgressLayer=new uo(P)),this._inProgressLayer.continuePlacement(v[P.source],this.placement,this._showCollisionBoxes,P,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const Ci=512/l.EXTENT/2;class ho{constructor(o,f,v){this.tileID=o,this.bucketInstanceId=v,this._symbolsByKey={};const b=new Map;for(let E=0;E<f.length;E++){const P=f.get(E),R=P.key,O=b.get(R);O?O.push(P):b.set(R,[P])}for(const[E,P]of b){const R={positions:P.map(O=>({x:Math.floor(O.anchorX*Ci),y:Math.floor(O.anchorY*Ci)})),crossTileIDs:P.map(O=>O.crossTileID)};if(R.positions.length>128){const O=new l.KDBush(R.positions.length,16,Uint16Array);for(const{x:B,y:K}of R.positions)O.add(B,K);O.finish(),delete R.positions,R.index=O}this._symbolsByKey[E]=R}}getScaledCoordinates(o,f){const{x:v,y:b,z:E}=this.tileID.canonical,{x:P,y:R,z:O}=f.canonical,B=Ci/Math.pow(2,O-E),K=(R*l.EXTENT+o.anchorY)*B,Z=b*l.EXTENT*Ci;return{x:Math.floor((P*l.EXTENT+o.anchorX)*B-v*l.EXTENT*Ci),y:Math.floor(K-Z)}}findMatches(o,f,v){const b=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z);for(let E=0;E<o.length;E++){const P=o.get(E);if(P.crossTileID)continue;const R=this._symbolsByKey[P.key];if(!R)continue;const O=this.getScaledCoordinates(P,f);if(R.index){const B=R.index.range(O.x-b,O.y-b,O.x+b,O.y+b).sort();for(const K of B){const Z=R.crossTileIDs[K];if(!v[Z]){v[Z]=!0,P.crossTileID=Z;break}}}else if(R.positions)for(let B=0;B<R.positions.length;B++){const K=R.positions[B],Z=R.crossTileIDs[B];if(Math.abs(K.x-O.x)<=b&&Math.abs(K.y-O.y)<=b&&!v[Z]){v[Z]=!0,P.crossTileID=Z;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:o})=>o)}}class fo{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class _r{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const f=Math.round((o-this.lng)/360);if(f!==0)for(const v in this.indexes){const b=this.indexes[v],E={};for(const P in b){const R=b[P];R.tileID=R.tileID.unwrapTo(R.tileID.wrap+f),E[R.tileID.key]=R}this.indexes[v]=E}this.lng=o}addBucket(o,f,v){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let E=0;E<f.symbolInstances.length;E++)f.symbolInstances.get(E).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});const b=this.usedCrossTileIDs[o.overscaledZ];for(const E in this.indexes){const P=this.indexes[E];if(Number(E)>o.overscaledZ)for(const R in P){const O=P[R];O.tileID.isChildOf(o)&&O.findMatches(f.symbolInstances,o,b)}else{const R=P[o.scaledTo(Number(E)).key];R&&R.findMatches(f.symbolInstances,o,b)}}for(let E=0;E<f.symbolInstances.length;E++){const P=f.symbolInstances.get(E);P.crossTileID||(P.crossTileID=v.generate(),b[P.crossTileID]=!0)}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new ho(o,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(o,f){for(const v of f.getCrossTileIDsLists())for(const b of v)delete this.usedCrossTileIDs[o][b]}removeStaleBuckets(o){let f=!1;for(const v in this.indexes){const b=this.indexes[v];for(const E in b)o[b[E].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,b[E]),delete b[E],f=!0)}return f}}class wc{constructor(){this.layerIndexes={},this.crossTileIDs=new fo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,f,v){let b=this.layerIndexes[o.id];b===void 0&&(b=this.layerIndexes[o.id]=new _r);let E=!1;const P={};b.handleWrapJump(v);for(const R of f){const O=R.getBucket(o);O&&o.id===O.layerIds[0]&&(O.bucketInstanceId||(O.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket(R.tileID,O,this.crossTileIDs)&&(E=!0),P[O.bucketInstanceId]=!0)}return b.removeStaleBuckets(P)&&(E=!0),E}pruneUnusedLayers(o){const f={};o.forEach(v=>{f[v]=!0});for(const v in this.layerIndexes)f[v]||delete this.layerIndexes[v]}}const Zr=(_,o)=>l.emitValidationErrors(_,o&&o.filter(f=>f.identifier!=="source.canvas")),xm=l.pick(l.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),po=l.pick(l.operations,["setCenter","setZoom","setBearing","setPitch"]),ny=l.emptyStyle();class Bs extends l.Evented{constructor(o,f={}){super(),this.map=o,this.dispatcher=new dt(Qe(),this,o._getMapId()),this.imageManager=new X,this.imageManager.setEventedParent(this),this.glyphManager=new Xe(o._requestManager,f.localIdeographFontFamily),this.lineAtlas=new et(256,512),this.crossTileSymbolIndex=new wc,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());const v=this;this._rtlTextPluginCallback=Bs.registerForPluginStateChange(b=>{v.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:b.pluginStatus,pluginURL:b.pluginURL},(E,P)=>{if(l.triggerPluginCompletionEvent(E),P&&P.every(R=>R))for(const R in v.sourceCaches){const O=v.sourceCaches[R].getSource().type;O!=="vector"&&O!=="geojson"||v.sourceCaches[R].reload()}})}),this.on("data",b=>{if(b.dataType!=="source"||b.sourceDataType!=="metadata")return;const E=this.sourceCaches[b.sourceId];if(!E)return;const P=E.getSource();if(P&&P.vectorLayerIds)for(const R in this._layers){const O=this._layers[R];O.source===P.id&&this._validateLayer(O)}})}loadURL(o,f={},v){this.fire(new l.Event("dataloading",{dataType:"style"})),f.validate=typeof f.validate!="boolean"||f.validate;const b=this.map._requestManager.transformRequest(o,F.Style);this._request=l.getJSON(b,(E,P)=>{this._request=null,E?this.fire(new l.ErrorEvent(E)):P&&this._load(P,f,v)})}loadJSON(o,f={},v){this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.exported.frame(()=>{this._request=null,f.validate=f.validate!==!1,this._load(o,f,v)})}loadEmpty(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(ny,{validate:!1})}_load(o,f,v){const b=f.transformStyle?f.transformStyle(v,o):o;if(!f.validate||!Zr(this,l.validateStyle(b))){this._loaded=!0,this.stylesheet=b;for(const E in b.sources)this.addSource(E,b.sources[E],{validate:!1});b.sprite?this._loadSprite(b.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(b.glyphs),this._createLayers(),this.light=new tt(this.stylesheet.light),this.map.setTerrain(this.stylesheet.terrain),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}}_createLayers(){const o=l.derefLayers(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",o),this._order=o.map(f=>f.id),this._layers={},this._serializedLayers=null;for(const f of o){const v=l.createStyleLayer(f);v.setEventedParent(this,{layer:{id:f.id}}),this._layers[f.id]=v}}_loadSprite(o,f=!1,v){this.imageManager.setLoaded(!1),this._spriteRequest=function(b,E,P,R){const O=G(b),B=O.length,K=P>1?"@2x":"",Z={},le={},Se={};for(const{id:ve,url:xe}of O){const De=E.transformRequest(E.normalizeSpriteURL(xe,K,".json"),F.SpriteJSON),Ue=`${ve}_${De.url}`;Z[Ue]=l.getJSON(De,(nt,_t)=>{delete Z[Ue],le[ve]=_t,j(R,le,Se,nt,B)});const st=E.transformRequest(E.normalizeSpriteURL(xe,K,".png"),F.SpriteImage),Ae=`${ve}_${st.url}`;Z[Ae]=U.getImage(st,(nt,_t)=>{delete Z[Ae],Se[ve]=_t,j(R,le,Se,nt,B)})}return{cancel(){for(const ve of Object.values(Z))ve.cancel()}}}(o,this.map._requestManager,this.map.getPixelRatio(),(b,E)=>{if(this._spriteRequest=null,b)this.fire(new l.ErrorEvent(b));else if(E)for(const P in E){this._spritesImagesIds[P]=[];const R=this._spritesImagesIds[P]?this._spritesImagesIds[P].filter(O=>!(O in E)):[];for(const O of R)this.imageManager.removeImage(O),this._changedImages[O]=!0;for(const O in E[P]){const B=P==="default"?O:`${P}:${O}`;this._spritesImagesIds[P].push(B),B in this.imageManager.images?this.imageManager.updateImage(B,E[P][O],!1):this.imageManager.addImage(B,E[P][O]),f&&(this._changedImages[B]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),f&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"})),v&&v(b)})}_unloadSprite(){for(const o of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(o),this._changedImages[o]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}_validateLayer(o){const f=this.sourceCaches[o.source];if(!f)return;const v=o.sourceLayer;if(!v)return;const b=f.getSource();(b.type==="geojson"||b.vectorLayerIds&&b.vectorLayerIds.indexOf(v)===-1)&&this.fire(new l.ErrorEvent(new Error(`Source layer "${v}" does not exist on source "${b.id}" as specified by style layer "${o.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(o){const f=this._serializedAllLayers();if(!o||o.length===0)return Object.values(f);const v=[];for(const b of o)f[b]&&v.push(f[b]);return v}_serializedAllLayers(){let o=this._serializedLayers;if(o)return o;o=this._serializedLayers={};const f=Object.keys(this._layers);for(const v of f){const b=this._layers[v];b.type!=="custom"&&(o[v]=b.serialize())}return o}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const o in this.sourceCaches)if(this.sourceCaches[o].hasTransition())return!0;for(const o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(o){if(!this._loaded)return;const f=this._changed;if(this._changed){const b=Object.keys(this._updatedLayers),E=Object.keys(this._removedLayers);(b.length||E.length)&&this._updateWorkerLayers(b,E);for(const P in this._updatedSources){const R=this._updatedSources[P];if(R==="reload")this._reloadSource(P);else{if(R!=="clear")throw new Error(`Invalid action ${R}`);this._clearSource(P)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const P in this._updatedPaintProps)this._layers[P].updateTransitions(o);this.light.updateTransitions(o),this._resetUpdates()}const v={};for(const b in this.sourceCaches){const E=this.sourceCaches[b];v[b]=E.used,E.used=!1}for(const b of this._order){const E=this._layers[b];E.recalculate(o,this._availableImages),!E.isHidden(o.zoom)&&E.source&&(this.sourceCaches[E.source].used=!0)}for(const b in v){const E=this.sourceCaches[b];v[b]!==E.used&&E.fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:b}))}this.light.recalculate(o),this.z=o.zoom,f&&this.fire(new l.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=Object.keys(this._changedImages);if(o.length){for(const f in this.sourceCaches)this.sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(o,f){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(o),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(o,f={}){this._checkLoaded();const v=this.serialize();if(o=f.transformStyle?f.transformStyle(v,o):o,Zr(this,l.validateStyle(o)))return!1;(o=l.clone$1(o)).layers=l.derefLayers(o.layers);const b=l.diffStyles(v,o).filter(P=>!(P.command in po));if(b.length===0)return!1;const E=b.filter(P=>!(P.command in xm));if(E.length>0)throw new Error(`Unimplemented: ${E.map(P=>P.command).join(", ")}.`);for(const P of b)P.command!=="setTransition"&&this[P.command].apply(this,P.args);return this.stylesheet=o,!0}addImage(o,f){if(this.getImage(o))return this.fire(new l.ErrorEvent(new Error(`An image named "${o}" already exists.`)));this.imageManager.addImage(o,f),this._afterImageUpdated(o)}updateImage(o,f){this.imageManager.updateImage(o,f)}getImage(o){return this.imageManager.getImage(o)}removeImage(o){if(!this.getImage(o))return this.fire(new l.ErrorEvent(new Error(`An image named "${o}" does not exist.`)));this.imageManager.removeImage(o),this._afterImageUpdated(o)}_afterImageUpdated(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(o,f,v={}){if(this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error(`Source "${o}" already exists.`);if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(l.validateStyle.source,`sources.${o}`,f,null,v))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const b=this.sourceCaches[o]=new Dt(o,f,this.dispatcher);b.style=this,b.setEventedParent(this,()=>({isSourceLoaded:b.loaded(),source:b.serialize(),sourceId:o})),b.onAdd(this.map),this._changed=!0}removeSource(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===o)return this.fire(new l.ErrorEvent(new Error(`Source "${o}" cannot be removed while layer "${v}" is using it.`)));const f=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],f.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),f.setEventedParent(null),f.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(o,f){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error(`There is no source with this ID=${o}`);const v=this.sourceCaches[o].getSource();if(v.type!=="geojson")throw new Error(`geojsonSource.type is ${v.type}, which is !== 'geojson`);v.setData(f),this._changed=!0}getSource(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()}addLayer(o,f,v={}){this._checkLoaded();const b=o.id;if(this.getLayer(b))return void this.fire(new l.ErrorEvent(new Error(`Layer "${b}" already exists on this map.`)));let E;if(o.type==="custom"){if(Zr(this,l.validateCustomStyleLayer(o)))return;E=l.createStyleLayer(o)}else{if(typeof o.source=="object"&&(this.addSource(b,o.source),o=l.clone$1(o),o=l.extend(o,{source:b})),this._validate(l.validateStyle.layer,`layers.${b}`,o,{arrayIndex:-1},v))return;E=l.createStyleLayer(o),this._validateLayer(E),E.setEventedParent(this,{layer:{id:b}})}const P=f?this._order.indexOf(f):this._order.length;if(f&&P===-1)this.fire(new l.ErrorEvent(new Error(`Cannot add layer "${b}" before non-existing layer "${f}".`)));else{if(this._order.splice(P,0,b),this._layerOrderChanged=!0,this._layers[b]=E,this._removedLayers[b]&&E.source&&E.type!=="custom"){const R=this._removedLayers[b];delete this._removedLayers[b],R.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",this.sourceCaches[E.source].pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map)}}moveLayer(o,f){if(this._checkLoaded(),this._changed=!0,!this._layers[o])return void this.fire(new l.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be moved.`)));if(o===f)return;const v=this._order.indexOf(o);this._order.splice(v,1);const b=f?this._order.indexOf(f):this._order.length;f&&b===-1?this.fire(new l.ErrorEvent(new Error(`Cannot move layer "${o}" before non-existing layer "${f}".`))):(this._order.splice(b,0,o),this._layerOrderChanged=!0)}removeLayer(o){this._checkLoaded();const f=this._layers[o];if(!f)return void this.fire(new l.ErrorEvent(new Error(`Cannot remove non-existing layer "${o}".`)));f.setEventedParent(null);const v=this._order.indexOf(o);this._order.splice(v,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=f,delete this._layers[o],this._serializedLayers&&delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],f.onRemove&&f.onRemove(this.map)}getLayer(o){return this._layers[o]}hasLayer(o){return o in this._layers}setLayerZoomRange(o,f,v){this._checkLoaded();const b=this.getLayer(o);b?b.minzoom===f&&b.maxzoom===v||(f!=null&&(b.minzoom=f),v!=null&&(b.maxzoom=v),this._updateLayer(b)):this.fire(new l.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${o}".`)))}setFilter(o,f,v={}){this._checkLoaded();const b=this.getLayer(o);if(b){if(!l.deepEqual(b.filter,f))return f==null?(b.filter=void 0,void this._updateLayer(b)):void(this._validate(l.validateStyle.filter,`layers.${b.id}.filter`,f,null,v)||(b.filter=l.clone$1(f),this._updateLayer(b)))}else this.fire(new l.ErrorEvent(new Error(`Cannot filter non-existing layer "${o}".`)))}getFilter(o){return l.clone$1(this.getLayer(o).filter)}setLayoutProperty(o,f,v,b={}){this._checkLoaded();const E=this.getLayer(o);E?l.deepEqual(E.getLayoutProperty(f),v)||(E.setLayoutProperty(f,v,b),this._updateLayer(E)):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${o}".`)))}getLayoutProperty(o,f){const v=this.getLayer(o);if(v)return v.getLayoutProperty(f);this.fire(new l.ErrorEvent(new Error(`Cannot get style of non-existing layer "${o}".`)))}setPaintProperty(o,f,v,b={}){this._checkLoaded();const E=this.getLayer(o);E?l.deepEqual(E.getPaintProperty(f),v)||(E.setPaintProperty(f,v,b)&&this._updateLayer(E),this._changed=!0,this._updatedPaintProps[o]=!0):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${o}".`)))}getPaintProperty(o,f){return this.getLayer(o).getPaintProperty(f)}setFeatureState(o,f){this._checkLoaded();const v=o.source,b=o.sourceLayer,E=this.sourceCaches[v];if(E===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${v}' does not exist in the map's style.`)));const P=E.getSource().type;P==="geojson"&&b?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):P!=="vector"||b?(o.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),E.setFeatureState(b,o.id,f)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(o,f){this._checkLoaded();const v=o.source,b=this.sourceCaches[v];if(b===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${v}' does not exist in the map's style.`)));const E=b.getSource().type,P=E==="vector"?o.sourceLayer:void 0;E!=="vector"||P?f&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):b.removeFeatureState(P,o.id,f):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(o){this._checkLoaded();const f=o.source,v=o.sourceLayer,b=this.sourceCaches[f];if(b!==void 0)return b.getSource().type!=="vector"||v?(o.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),b.getFeatureState(v,o.id)):void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const o=l.mapObject(this.sourceCaches,b=>b.serialize()),f=this._serializeByIds(this._order),v=this.stylesheet;return l.filterObject({version:v.version,name:v.name,metadata:v.metadata,light:v.light,center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,sprite:v.sprite,glyphs:v.glyphs,transition:v.transition,sources:o,layers:f},b=>b!==void 0)}_updateLayer(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(o){const f=P=>this._layers[P].type==="fill-extrusion",v={},b=[];for(let P=this._order.length-1;P>=0;P--){const R=this._order[P];if(f(R)){v[R]=P;for(const O of o){const B=O[R];if(B)for(const K of B)b.push(K)}}}b.sort((P,R)=>R.intersectionZ-P.intersectionZ);const E=[];for(let P=this._order.length-1;P>=0;P--){const R=this._order[P];if(f(R))for(let O=b.length-1;O>=0;O--){const B=b[O].feature;if(v[B.layer.id]<P)break;E.push(B),b.pop()}else for(const O of o){const B=O[R];if(B)for(const K of B)E.push(K.feature)}}return E}queryRenderedFeatures(o,f,v){f&&f.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",f.filter,null,f);const b={};if(f&&f.layers){if(!Array.isArray(f.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const R of f.layers){const O=this._layers[R];if(!O)return this.fire(new l.ErrorEvent(new Error(`The layer '${R}' does not exist in the map's style and cannot be queried for features.`))),[];b[O.source]=!0}}const E=[];f.availableImages=this._availableImages;const P=this._serializedAllLayers();for(const R in this.sourceCaches)f.layers&&!b[R]||E.push(Pe(this.sourceCaches[R],this._layers,P,o,f,v));return this.placement&&E.push(function(R,O,B,K,Z,le,Se){const ve={},xe=le.queryRenderedSymbols(K),De=[];for(const Ue of Object.keys(xe).map(Number))De.push(Se[Ue]);De.sort(Ge);for(const Ue of De){const st=Ue.featureIndex.lookupSymbolFeatures(xe[Ue.bucketInstanceId],O,Ue.bucketIndex,Ue.sourceLayerIndex,Z.filter,Z.layers,Z.availableImages,R);for(const Ae in st){const nt=ve[Ae]=ve[Ae]||[],_t=st[Ae];_t.sort((At,Rt)=>{const Bt=Ue.featureSortOrder;if(Bt){const Lt=Bt.indexOf(At.featureIndex);return Bt.indexOf(Rt.featureIndex)-Lt}return Rt.featureIndex-At.featureIndex});for(const At of _t)nt.push(At)}}for(const Ue in ve)ve[Ue].forEach(st=>{const Ae=st.feature,nt=B[R[Ue].source].getFeatureState(Ae.layer["source-layer"],Ae.id);Ae.source=Ae.layer.source,Ae.layer["source-layer"]&&(Ae.sourceLayer=Ae.layer["source-layer"]),Ae.state=nt});return ve}(this._layers,P,this.sourceCaches,o,f,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(E)}querySourceFeatures(o,f){f&&f.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",f.filter,null,f);const v=this.sourceCaches[o];return v?function(b,E){const P=b.getRenderableIds().map(B=>b.getTileByID(B)),R=[],O={};for(let B=0;B<P.length;B++){const K=P[B],Z=K.tileID.canonical.key;O[Z]||(O[Z]=!0,K.querySourceFeatures(R,E))}return R}(v,f):[]}addSourceType(o,f,v){return Bs.getSourceType(o)?v(new Error(`A source type called "${o}" already exists.`)):(Bs.setSourceType(o,f),f.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:f.workerSourceURL},v):v(null,null))}getLight(){return this.light.getLight()}setLight(o,f={}){this._checkLoaded();const v=this.light.getLight();let b=!1;for(const P in o)if(!l.deepEqual(o[P],v[P])){b=!0;break}if(!b)return;const E={now:l.exported.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,f),this.light.updateTransitions(E)}_validate(o,f,v,b,E={}){return(!E||E.validate!==!1)&&Zr(this,o.call(l.validateStyle,l.extend({key:f,style:this.serialize(),value:v,styleSpec:l.v8Spec},b)))}_remove(o=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const f in this._layers)this._layers[f].setEventedParent(null);for(const f in this.sourceCaches){const v=this.sourceCaches[f];v.setEventedParent(null),v.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(o)}_clearSource(o){this.sourceCaches[o].clearTiles()}_reloadSource(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()}_updateSources(o){for(const f in this.sourceCaches)this.sourceCaches[f].update(o,this.map.terrain)}_generateCollisionBoxes(){for(const o in this.sourceCaches)this._reloadSource(o)}_updatePlacement(o,f,v,b,E=!1){let P=!1,R=!1;const O={};for(const B of this._order){const K=this._layers[B];if(K.type!=="symbol")continue;if(!O[K.source]){const le=this.sourceCaches[K.source];O[K.source]=le.getRenderableIds(!0).map(Se=>le.getTileByID(Se)).sort((Se,ve)=>ve.tileID.overscaledZ-Se.tileID.overscaledZ||(Se.tileID.isLessThan(ve.tileID)?-1:1))}const Z=this.crossTileSymbolIndex.addLayer(K,O[K.source],o.center.lng);P=P||Z}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((E=E||this._layerOrderChanged||v===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.exported.now(),o.zoom))&&(this.pauseablePlacement=new ji(o,this.map.terrain,this._order,E,f,v,b,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,O),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.exported.now()),R=!0),P&&this.pauseablePlacement.placement.setStale()),R||P)for(const B of this._order){const K=this._layers[B];K.type==="symbol"&&this.placement.updateLayerOpacities(K,O[K.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.exported.now())}_releaseSymbolFadeTiles(){for(const o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()}getImages(o,f,v){this.imageManager.getImages(f.icons,v),this._updateTilesForChangedImages();const b=this.sourceCaches[f.source];b&&b.setDependencies(f.tileID.key,f.type,f.icons)}getGlyphs(o,f,v){this.glyphManager.getGlyphs(f.stacks,v);const b=this.sourceCaches[f.source];b&&b.setDependencies(f.tileID.key,f.type,[""])}getResource(o,f,v){return l.makeRequest(f,v)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(o,f={}){this._checkLoaded(),o&&this._validate(l.validateStyle.glyphs,"glyphs",o,null,f)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=o,this.glyphManager.entries={},this.glyphManager.setURL(o))}addSprite(o,f,v={},b){this._checkLoaded();const E=[{id:o,url:f}],P=[...G(this.stylesheet.sprite),...E];this._validate(l.validateStyle.sprite,"sprite",P,null,v)||(this.stylesheet.sprite=P,this._loadSprite(E,!0,b))}removeSprite(o){this._checkLoaded();const f=G(this.stylesheet.sprite);if(f.find(v=>v.id===o)){if(this._spritesImagesIds[o])for(const v of this._spritesImagesIds[o])this.imageManager.removeImage(v),this._changedImages[v]=!0;f.splice(f.findIndex(v=>v.id===o),1),this.stylesheet.sprite=f.length>0?f:void 0,delete this._spritesImagesIds[o],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}else this.fire(new l.ErrorEvent(new Error(`Sprite "${o}" doesn't exists on this map.`)))}getSprite(){return G(this.stylesheet.sprite)}setSprite(o,f={},v){this._checkLoaded(),o&&this._validate(l.validateStyle.sprite,"sprite",o,null,f)||(this.stylesheet.sprite=o,o?this._loadSprite(o,!0,v):(this._unloadSprite(),v&&v(null)))}}Bs.getSourceType=function(_){return q[_]},Bs.setSourceType=function(_,o){q[_]=o},Bs.registerForPluginStateChange=l.registerForPluginStateChange;var yl=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),bl="in vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Cs={prelude:_i(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:_i(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:_i(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:_i(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:_i("void main() {fragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:_i(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:_i(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:_i("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:_i("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:_i("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:_i(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:_i(`in vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;out vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:_i(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:_i(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:_i(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:_i(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:_i(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));fragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:_i(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:_i(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:_i(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:_i(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:_i(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:_i(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:_i(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:_i(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:_i(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:_i("uniform sampler2D u_texture;in vec2 v_texture_pos;void main() {fragColor=texture(u_texture,v_texture_pos);}",bl),terrainDepth:_i("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}",bl),terrainCoords:_i("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",bl)};function _i(_,o){const f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=o.match(/(attribute|in) ([\w]+) ([\w]+)/g),b=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=E?E.concat(b):b,R={};return{fragmentSource:_=_.replace(f,(O,B,K,Z,le)=>(R[le]=!0,B==="define"?`
#ifndef HAS_UNIFORM_u_${le}
in ${K} ${Z} ${le};
#else
uniform ${K} ${Z} u_${le};
#endif
`:`
#ifdef HAS_UNIFORM_u_${le}
    ${K} ${Z} ${le} = u_${le};
#endif
`)),vertexSource:o=o.replace(f,(O,B,K,Z,le)=>{const Se=Z==="float"?"vec2":"vec4",ve=le.match(/color/)?"color":Se;return R[le]?B==="define"?`
#ifndef HAS_UNIFORM_u_${le}
uniform lowp float u_${le}_t;
in ${K} ${Se} a_${le};
out ${K} ${Z} ${le};
#else
uniform ${K} ${Z} u_${le};
#endif
`:ve==="vec4"?`
#ifndef HAS_UNIFORM_u_${le}
    ${le} = a_${le};
#else
    ${K} ${Z} ${le} = u_${le};
#endif
`:`
#ifndef HAS_UNIFORM_u_${le}
    ${le} = unpack_mix_${ve}(a_${le}, u_${le}_t);
#else
    ${K} ${Z} ${le} = u_${le};
#endif
`:B==="define"?`
#ifndef HAS_UNIFORM_u_${le}
uniform lowp float u_${le}_t;
in ${K} ${Se} a_${le};
#else
uniform ${K} ${Z} u_${le};
#endif
`:ve==="vec4"?`
#ifndef HAS_UNIFORM_u_${le}
    ${K} ${Z} ${le} = a_${le};
#else
    ${K} ${Z} ${le} = u_${le};
#endif
`:`
#ifndef HAS_UNIFORM_u_${le}
    ${K} ${Z} ${le} = unpack_mix_${ve}(a_${le}, u_${le}_t);
#else
    ${K} ${Z} ${le} = u_${le};
#endif
`}),staticAttributes:v,staticUniforms:P}}class Pu{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(o,f,v,b,E,P,R,O,B){this.context=o;let K=this.boundPaintVertexBuffers.length!==b.length;for(let Z=0;!K&&Z<b.length;Z++)this.boundPaintVertexBuffers[Z]!==b[Z]&&(K=!0);!this.vao||this.boundProgram!==f||this.boundLayoutVertexBuffer!==v||K||this.boundIndexBuffer!==E||this.boundVertexOffset!==P||this.boundDynamicVertexBuffer!==R||this.boundDynamicVertexBuffer2!==O||this.boundDynamicVertexBuffer3!==B?this.freshBind(f,v,b,E,P,R,O,B):(o.bindVertexArray.set(this.vao),R&&R.bind(),E&&E.dynamicDraw&&E.bind(),O&&O.bind(),B&&B.bind())}freshBind(o,f,v,b,E,P,R,O){const B=o.numAttributes,K=this.context,Z=K.gl;this.vao&&this.destroy(),this.vao=K.createVertexArray(),K.bindVertexArray.set(this.vao),this.boundProgram=o,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=b,this.boundVertexOffset=E,this.boundDynamicVertexBuffer=P,this.boundDynamicVertexBuffer2=R,this.boundDynamicVertexBuffer3=O,f.enableAttributes(Z,o);for(const le of v)le.enableAttributes(Z,o);P&&P.enableAttributes(Z,o),R&&R.enableAttributes(Z,o),O&&O.enableAttributes(Z,o),f.bind(),f.setVertexAttribPointers(Z,o,E);for(const le of v)le.bind(),le.setVertexAttribPointers(Z,o,E);P&&(P.bind(),P.setVertexAttribPointers(Z,o,E)),b&&b.bind(),R&&(R.bind(),R.setVertexAttribPointers(Z,o,E)),O&&(O.bind(),O.setVertexAttribPointers(Z,o,E)),K.currentNumAttributes=B}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function kh(_){const o=[];for(let f=0;f<_.length;f++){if(_[f]===null)continue;const v=_[f].split(" ");o.push(v.pop())}return o}class iy{constructor(o,f,v,b,E,P,R){const O=o.gl;this.program=O.createProgram();const B=kh(v.staticAttributes),K=b?b.getBinderAttributes():[],Z=B.concat(K),le=Cs.prelude.staticUniforms?kh(Cs.prelude.staticUniforms):[],Se=v.staticUniforms?kh(v.staticUniforms):[],ve=b?b.getBinderUniforms():[],xe=le.concat(Se).concat(ve),De=[];for(const Rt of xe)De.indexOf(Rt)<0&&De.push(Rt);const Ue=b?b.defines():[];P&&Ue.push("#define OVERDRAW_INSPECTOR;"),R&&Ue.push("#define TERRAIN3D;"),Ue.unshift("#version 300 es");const st=Ue.concat(Cs.prelude.fragmentSource,v.fragmentSource).join(`
`),Ae=Ue.concat(Cs.prelude.vertexSource,v.vertexSource).join(`
`),nt=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);O.shaderSource(nt,st),O.compileShader(nt),O.attachShader(this.program,nt);const _t=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);O.shaderSource(_t,Ae),O.compileShader(_t),O.attachShader(this.program,_t),this.attributes={};const At={};this.numAttributes=Z.length;for(let Rt=0;Rt<this.numAttributes;Rt++)Z[Rt]&&(O.bindAttribLocation(this.program,Rt,Z[Rt]),this.attributes[Z[Rt]]=Rt);O.linkProgram(this.program),O.deleteShader(_t),O.deleteShader(nt);for(let Rt=0;Rt<De.length;Rt++){const Bt=De[Rt];if(Bt&&!At[Bt]){const Lt=O.getUniformLocation(this.program,Bt);Lt&&(At[Bt]=Lt)}}this.fixedUniforms=E(o,At),this.terrainUniforms=((Rt,Bt)=>({u_depth:new l.Uniform1i(Rt,Bt.u_depth),u_terrain:new l.Uniform1i(Rt,Bt.u_terrain),u_terrain_dim:new l.Uniform1f(Rt,Bt.u_terrain_dim),u_terrain_matrix:new l.UniformMatrix4f(Rt,Bt.u_terrain_matrix),u_terrain_unpack:new l.Uniform4f(Rt,Bt.u_terrain_unpack),u_terrain_exaggeration:new l.Uniform1f(Rt,Bt.u_terrain_exaggeration)}))(o,At),this.binderUniforms=b?b.getUniforms(o,At):[]}draw(o,f,v,b,E,P,R,O,B,K,Z,le,Se,ve,xe,De,Ue,st){const Ae=o.gl;if(this.failedToCreate)return;if(o.program.set(this.program),o.setDepthMode(v),o.setStencilMode(b),o.setColorMode(E),o.setCullFace(P),O){o.activeTexture.set(Ae.TEXTURE2),Ae.bindTexture(Ae.TEXTURE_2D,O.depthTexture),o.activeTexture.set(Ae.TEXTURE3),Ae.bindTexture(Ae.TEXTURE_2D,O.texture);for(const _t in this.terrainUniforms)this.terrainUniforms[_t].set(O[_t])}for(const _t in this.fixedUniforms)this.fixedUniforms[_t].set(R[_t]);xe&&xe.setUniforms(o,this.binderUniforms,Se,{zoom:ve});let nt=0;switch(f){case Ae.LINES:nt=2;break;case Ae.TRIANGLES:nt=3;break;case Ae.LINE_STRIP:nt=1}for(const _t of le.get()){const At=_t.vaos||(_t.vaos={});(At[B]||(At[B]=new Pu)).bind(o,this,K,xe?xe.getPaintVertexBuffers():[],Z,_t.vertexOffset,De,Ue,st),Ae.drawElements(f,_t.primitiveLength*nt,Ae.UNSIGNED_SHORT,_t.primitiveOffset*nt*2)}}}function Du(_,o,f){const v=1/bt(f,1,o.transform.tileZoom),b=Math.pow(2,f.tileID.overscaledZ),E=f.tileSize*Math.pow(2,o.transform.tileZoom)/b,P=E*(f.tileID.canonical.x+f.tileID.wrap*b),R=E*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture.size,u_scale:[v,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[P>>16,R>>16],u_pixel_coord_lower:[65535&P,65535&R]}}const wm=(_,o,f,v)=>{const b=o.style.light,E=b.properties.get("position"),P=[E.x,E.y,E.z],R=function(){var B=new l.ARRAY_TYPE(9);return l.ARRAY_TYPE!=Float32Array&&(B[1]=0,B[2]=0,B[3]=0,B[5]=0,B[6]=0,B[7]=0),B[0]=1,B[4]=1,B[8]=1,B}();b.properties.get("anchor")==="viewport"&&function(B,K){var Z=Math.sin(K),le=Math.cos(K);B[0]=le,B[1]=Z,B[2]=0,B[3]=-Z,B[4]=le,B[5]=0,B[6]=0,B[7]=0,B[8]=1}(R,-o.transform.angle),function(B,K,Z){var le=K[0],Se=K[1],ve=K[2];B[0]=le*Z[0]+Se*Z[3]+ve*Z[6],B[1]=le*Z[1]+Se*Z[4]+ve*Z[7],B[2]=le*Z[2]+Se*Z[5]+ve*Z[8]}(P,P,R);const O=b.properties.get("color");return{u_matrix:_,u_lightpos:P,u_lightintensity:b.properties.get("intensity"),u_lightcolor:[O.r,O.g,O.b],u_vertical_gradient:+f,u_opacity:v}},Sm=(_,o,f,v,b,E,P)=>l.extend(wm(_,o,f,v),Du(E,o,P),{u_height_factor:-Math.pow(2,b.overscaledZ)/P.tileSize/8}),Tm=_=>({u_matrix:_}),Ph=(_,o,f,v)=>l.extend(Tm(_),Du(f,o,v)),ry=(_,o)=>({u_matrix:_,u_world:o}),Dh=(_,o,f,v,b)=>l.extend(Ph(_,o,f,v),{u_world:b}),Em=(_,o,f,v)=>{const b=_.transform;let E,P;if(v.paint.get("circle-pitch-alignment")==="map"){const R=bt(f,1,b.zoom);E=!0,P=[R,R]}else E=!1,P=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+(v.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(o.posMatrix,f,v.paint.get("circle-translate"),v.paint.get("circle-translate-anchor")),u_pitch_with_map:+E,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:P}},Cm=(_,o,f)=>{const v=bt(f,1,o.zoom),b=Math.pow(2,o.zoom-f.tileID.overscaledZ),E=f.tileID.overscaleFactor();return{u_matrix:_,u_camera_to_center_distance:o.cameraToCenterDistance,u_pixels_to_tile_units:v,u_extrude_scale:[o.pixelsToGLUnits[0]/(v*b),o.pixelsToGLUnits[1]/(v*b)],u_overscale_factor:E}},Lh=(_,o,f=1)=>({u_matrix:_,u_color:o,u_overlay:0,u_overlay_scale:f}),Oh=_=>({u_matrix:_}),No=(_,o,f,v)=>({u_matrix:_,u_extrude_scale:bt(o,1,f),u_intensity:v});function Lu(_,o){const f=Math.pow(2,o.canonical.z),v=o.canonical.y;return[new l.MercatorCoordinate(0,v/f).toLngLat().lat,new l.MercatorCoordinate(0,(v+1)/f).toLngLat().lat]}const Kr=(_,o,f,v)=>{const b=_.transform;return{u_matrix:Ec(_,o,f,v),u_ratio:1/bt(o,1,b.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},Ou=(_,o,f,v,b)=>l.extend(Kr(_,o,f,b),{u_image:0,u_image_height:v}),Ru=(_,o,f,v,b)=>{const E=_.transform,P=Tc(o,E);return{u_matrix:Ec(_,o,f,b),u_texsize:o.imageAtlasTexture.size,u_ratio:1/bt(o,1,E.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[P,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]]}},Sc=(_,o,f,v,b,E)=>{const P=_.lineAtlas,R=Tc(o,_.transform),O=f.layout.get("line-cap")==="round",B=P.getDash(v.from,O),K=P.getDash(v.to,O),Z=B.width*b.fromScale,le=K.width*b.toScale;return l.extend(Kr(_,o,f,E),{u_patternscale_a:[R/Z,-B.height/2],u_patternscale_b:[R/le,-K.height/2],u_sdfgamma:P.width/(256*Math.min(Z,le)*_.pixelRatio)/2,u_image:0,u_tex_y_a:B.y,u_tex_y_b:K.y,u_mix:b.t})};function Tc(_,o){return 1/bt(_,1,o.tileZoom)}function Ec(_,o,f,v){return _.translatePosMatrix(v?v.posMatrix:o.tileID.posMatrix,o,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}const Cc=(_,o,f,v,b)=>{return{u_matrix:_,u_tl_parent:o,u_scale_parent:f,u_buffer_scale:1,u_fade_t:v.mix,u_opacity:v.opacity*b.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:b.paint.get("raster-brightness-min"),u_brightness_high:b.paint.get("raster-brightness-max"),u_saturation_factor:(P=b.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(E=b.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:Ic(b.paint.get("raster-hue-rotate"))};var E,P};function Ic(_){_*=Math.PI/180;const o=Math.sin(_),f=Math.cos(_);return[(2*f+1)/3,(-Math.sqrt(3)*o-f+1)/3,(Math.sqrt(3)*o-f+1)/3]}const Ac=(_,o,f,v,b,E,P,R,O,B)=>{const K=b.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:K.cameraToCenterDistance,u_pitch:K.pitch/360*2*Math.PI,u_rotate_symbol:+f,u_aspect_ratio:K.width/K.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:P,u_coord_matrix:R,u_is_text:+O,u_pitch_with_map:+v,u_texsize:B,u_texture:0}},Xr=(_,o,f,v,b,E,P,R,O,B,K)=>{const Z=b.transform;return l.extend(Ac(_,o,f,v,b,E,P,R,O,B),{u_gamma_scale:v?Math.cos(Z._pitch)*Z.cameraToCenterDistance:1,u_device_pixel_ratio:b.pixelRatio,u_is_halo:+K})},os=(_,o,f,v,b,E,P,R,O,B)=>l.extend(Xr(_,o,f,v,b,E,P,R,!0,O,!0),{u_texsize_icon:B,u_texture_icon:1}),Rh=(_,o,f)=>({u_matrix:_,u_opacity:o,u_color:f}),Fu=(_,o,f,v,b,E)=>l.extend(function(P,R,O,B){const K=O.imageManager.getPattern(P.from.toString()),Z=O.imageManager.getPattern(P.to.toString()),{width:le,height:Se}=O.imageManager.getPixelSize(),ve=Math.pow(2,B.tileID.overscaledZ),xe=B.tileSize*Math.pow(2,O.transform.tileZoom)/ve,De=xe*(B.tileID.canonical.x+B.tileID.wrap*ve),Ue=xe*B.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:K.tl,u_pattern_br_a:K.br,u_pattern_tl_b:Z.tl,u_pattern_br_b:Z.br,u_texsize:[le,Se],u_mix:R.t,u_pattern_size_a:K.displaySize,u_pattern_size_b:Z.displaySize,u_scale_a:R.fromScale,u_scale_b:R.toScale,u_tile_units_to_pixels:1/bt(B,1,O.transform.tileZoom),u_pixel_coord_upper:[De>>16,Ue>>16],u_pixel_coord_lower:[65535&De,65535&Ue]}}(v,E,f,b),{u_matrix:_,u_opacity:o}),$u={fillExtrusion:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_lightpos:new l.Uniform3f(_,o.u_lightpos),u_lightintensity:new l.Uniform1f(_,o.u_lightintensity),u_lightcolor:new l.Uniform3f(_,o.u_lightcolor),u_vertical_gradient:new l.Uniform1f(_,o.u_vertical_gradient),u_opacity:new l.Uniform1f(_,o.u_opacity)}),fillExtrusionPattern:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_lightpos:new l.Uniform3f(_,o.u_lightpos),u_lightintensity:new l.Uniform1f(_,o.u_lightintensity),u_lightcolor:new l.Uniform3f(_,o.u_lightcolor),u_vertical_gradient:new l.Uniform1f(_,o.u_vertical_gradient),u_height_factor:new l.Uniform1f(_,o.u_height_factor),u_image:new l.Uniform1i(_,o.u_image),u_texsize:new l.Uniform2f(_,o.u_texsize),u_pixel_coord_upper:new l.Uniform2f(_,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(_,o.u_pixel_coord_lower),u_scale:new l.Uniform3f(_,o.u_scale),u_fade:new l.Uniform1f(_,o.u_fade),u_opacity:new l.Uniform1f(_,o.u_opacity)}),fill:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix)}),fillPattern:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_image:new l.Uniform1i(_,o.u_image),u_texsize:new l.Uniform2f(_,o.u_texsize),u_pixel_coord_upper:new l.Uniform2f(_,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(_,o.u_pixel_coord_lower),u_scale:new l.Uniform3f(_,o.u_scale),u_fade:new l.Uniform1f(_,o.u_fade)}),fillOutline:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_world:new l.Uniform2f(_,o.u_world)}),fillOutlinePattern:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_world:new l.Uniform2f(_,o.u_world),u_image:new l.Uniform1i(_,o.u_image),u_texsize:new l.Uniform2f(_,o.u_texsize),u_pixel_coord_upper:new l.Uniform2f(_,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(_,o.u_pixel_coord_lower),u_scale:new l.Uniform3f(_,o.u_scale),u_fade:new l.Uniform1f(_,o.u_fade)}),circle:(_,o)=>({u_camera_to_center_distance:new l.Uniform1f(_,o.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(_,o.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(_,o.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(_,o.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(_,o.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(_,o.u_matrix)}),collisionBox:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_camera_to_center_distance:new l.Uniform1f(_,o.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(_,o.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(_,o.u_extrude_scale),u_overscale_factor:new l.Uniform1f(_,o.u_overscale_factor)}),collisionCircle:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_inv_matrix:new l.UniformMatrix4f(_,o.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(_,o.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(_,o.u_viewport_size)}),debug:(_,o)=>({u_color:new l.UniformColor(_,o.u_color),u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_overlay:new l.Uniform1i(_,o.u_overlay),u_overlay_scale:new l.Uniform1f(_,o.u_overlay_scale)}),clippingMask:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix)}),heatmap:(_,o)=>({u_extrude_scale:new l.Uniform1f(_,o.u_extrude_scale),u_intensity:new l.Uniform1f(_,o.u_intensity),u_matrix:new l.UniformMatrix4f(_,o.u_matrix)}),heatmapTexture:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_world:new l.Uniform2f(_,o.u_world),u_image:new l.Uniform1i(_,o.u_image),u_color_ramp:new l.Uniform1i(_,o.u_color_ramp),u_opacity:new l.Uniform1f(_,o.u_opacity)}),hillshade:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_image:new l.Uniform1i(_,o.u_image),u_latrange:new l.Uniform2f(_,o.u_latrange),u_light:new l.Uniform2f(_,o.u_light),u_shadow:new l.UniformColor(_,o.u_shadow),u_highlight:new l.UniformColor(_,o.u_highlight),u_accent:new l.UniformColor(_,o.u_accent)}),hillshadePrepare:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_image:new l.Uniform1i(_,o.u_image),u_dimension:new l.Uniform2f(_,o.u_dimension),u_zoom:new l.Uniform1f(_,o.u_zoom),u_unpack:new l.Uniform4f(_,o.u_unpack)}),line:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_ratio:new l.Uniform1f(_,o.u_ratio),u_device_pixel_ratio:new l.Uniform1f(_,o.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(_,o.u_units_to_pixels)}),lineGradient:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_ratio:new l.Uniform1f(_,o.u_ratio),u_device_pixel_ratio:new l.Uniform1f(_,o.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(_,o.u_units_to_pixels),u_image:new l.Uniform1i(_,o.u_image),u_image_height:new l.Uniform1f(_,o.u_image_height)}),linePattern:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_texsize:new l.Uniform2f(_,o.u_texsize),u_ratio:new l.Uniform1f(_,o.u_ratio),u_device_pixel_ratio:new l.Uniform1f(_,o.u_device_pixel_ratio),u_image:new l.Uniform1i(_,o.u_image),u_units_to_pixels:new l.Uniform2f(_,o.u_units_to_pixels),u_scale:new l.Uniform3f(_,o.u_scale),u_fade:new l.Uniform1f(_,o.u_fade)}),lineSDF:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_ratio:new l.Uniform1f(_,o.u_ratio),u_device_pixel_ratio:new l.Uniform1f(_,o.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(_,o.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(_,o.u_patternscale_a),u_patternscale_b:new l.Uniform2f(_,o.u_patternscale_b),u_sdfgamma:new l.Uniform1f(_,o.u_sdfgamma),u_image:new l.Uniform1i(_,o.u_image),u_tex_y_a:new l.Uniform1f(_,o.u_tex_y_a),u_tex_y_b:new l.Uniform1f(_,o.u_tex_y_b),u_mix:new l.Uniform1f(_,o.u_mix)}),raster:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_tl_parent:new l.Uniform2f(_,o.u_tl_parent),u_scale_parent:new l.Uniform1f(_,o.u_scale_parent),u_buffer_scale:new l.Uniform1f(_,o.u_buffer_scale),u_fade_t:new l.Uniform1f(_,o.u_fade_t),u_opacity:new l.Uniform1f(_,o.u_opacity),u_image0:new l.Uniform1i(_,o.u_image0),u_image1:new l.Uniform1i(_,o.u_image1),u_brightness_low:new l.Uniform1f(_,o.u_brightness_low),u_brightness_high:new l.Uniform1f(_,o.u_brightness_high),u_saturation_factor:new l.Uniform1f(_,o.u_saturation_factor),u_contrast_factor:new l.Uniform1f(_,o.u_contrast_factor),u_spin_weights:new l.Uniform3f(_,o.u_spin_weights)}),symbolIcon:(_,o)=>({u_is_size_zoom_constant:new l.Uniform1i(_,o.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(_,o.u_is_size_feature_constant),u_size_t:new l.Uniform1f(_,o.u_size_t),u_size:new l.Uniform1f(_,o.u_size),u_camera_to_center_distance:new l.Uniform1f(_,o.u_camera_to_center_distance),u_pitch:new l.Uniform1f(_,o.u_pitch),u_rotate_symbol:new l.Uniform1i(_,o.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(_,o.u_aspect_ratio),u_fade_change:new l.Uniform1f(_,o.u_fade_change),u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(_,o.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(_,o.u_coord_matrix),u_is_text:new l.Uniform1i(_,o.u_is_text),u_pitch_with_map:new l.Uniform1i(_,o.u_pitch_with_map),u_texsize:new l.Uniform2f(_,o.u_texsize),u_texture:new l.Uniform1i(_,o.u_texture)}),symbolSDF:(_,o)=>({u_is_size_zoom_constant:new l.Uniform1i(_,o.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(_,o.u_is_size_feature_constant),u_size_t:new l.Uniform1f(_,o.u_size_t),u_size:new l.Uniform1f(_,o.u_size),u_camera_to_center_distance:new l.Uniform1f(_,o.u_camera_to_center_distance),u_pitch:new l.Uniform1f(_,o.u_pitch),u_rotate_symbol:new l.Uniform1i(_,o.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(_,o.u_aspect_ratio),u_fade_change:new l.Uniform1f(_,o.u_fade_change),u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(_,o.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(_,o.u_coord_matrix),u_is_text:new l.Uniform1i(_,o.u_is_text),u_pitch_with_map:new l.Uniform1i(_,o.u_pitch_with_map),u_texsize:new l.Uniform2f(_,o.u_texsize),u_texture:new l.Uniform1i(_,o.u_texture),u_gamma_scale:new l.Uniform1f(_,o.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(_,o.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(_,o.u_is_halo)}),symbolTextAndIcon:(_,o)=>({u_is_size_zoom_constant:new l.Uniform1i(_,o.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(_,o.u_is_size_feature_constant),u_size_t:new l.Uniform1f(_,o.u_size_t),u_size:new l.Uniform1f(_,o.u_size),u_camera_to_center_distance:new l.Uniform1f(_,o.u_camera_to_center_distance),u_pitch:new l.Uniform1f(_,o.u_pitch),u_rotate_symbol:new l.Uniform1i(_,o.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(_,o.u_aspect_ratio),u_fade_change:new l.Uniform1f(_,o.u_fade_change),u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(_,o.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(_,o.u_coord_matrix),u_is_text:new l.Uniform1i(_,o.u_is_text),u_pitch_with_map:new l.Uniform1i(_,o.u_pitch_with_map),u_texsize:new l.Uniform2f(_,o.u_texsize),u_texsize_icon:new l.Uniform2f(_,o.u_texsize_icon),u_texture:new l.Uniform1i(_,o.u_texture),u_texture_icon:new l.Uniform1i(_,o.u_texture_icon),u_gamma_scale:new l.Uniform1f(_,o.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(_,o.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(_,o.u_is_halo)}),background:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_opacity:new l.Uniform1f(_,o.u_opacity),u_color:new l.UniformColor(_,o.u_color)}),backgroundPattern:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_opacity:new l.Uniform1f(_,o.u_opacity),u_image:new l.Uniform1i(_,o.u_image),u_pattern_tl_a:new l.Uniform2f(_,o.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(_,o.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(_,o.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(_,o.u_pattern_br_b),u_texsize:new l.Uniform2f(_,o.u_texsize),u_mix:new l.Uniform1f(_,o.u_mix),u_pattern_size_a:new l.Uniform2f(_,o.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(_,o.u_pattern_size_b),u_scale_a:new l.Uniform1f(_,o.u_scale_a),u_scale_b:new l.Uniform1f(_,o.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(_,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(_,o.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(_,o.u_tile_units_to_pixels)}),terrain:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_texture:new l.Uniform1i(_,o.u_texture),u_ele_delta:new l.Uniform1f(_,o.u_ele_delta)}),terrainDepth:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_ele_delta:new l.Uniform1f(_,o.u_ele_delta)}),terrainCoords:(_,o)=>({u_matrix:new l.UniformMatrix4f(_,o.u_matrix),u_texture:new l.Uniform1i(_,o.u_texture),u_terrain_coords_id:new l.Uniform1f(_,o.u_terrain_coords_id),u_ele_delta:new l.Uniform1f(_,o.u_ele_delta)})};class Fh{constructor(o,f,v){this.context=o;const b=o.gl;this.buffer=b.createBuffer(),this.dynamicDraw=!!v,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){const f=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const $h={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class zu{constructor(o,f,v,b){this.length=f.length,this.attributes=v,this.itemSize=f.bytesPerElement,this.dynamicDraw=b,this.context=o;const E=o.gl;this.buffer=E.createBuffer(),o.bindVertexBuffer.set(this.buffer),E.bufferData(E.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){if(o.length!==this.length)throw new Error(`Length of new data is ${o.length}, which doesn't match current length of ${this.length}`);const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,f){for(let v=0;v<this.attributes.length;v++){const b=f.attributes[this.attributes[v].name];b!==void 0&&o.enableVertexAttribArray(b)}}setVertexAttribPointers(o,f,v){for(let b=0;b<this.attributes.length;b++){const E=this.attributes[b],P=f.attributes[E.name];P!==void 0&&o.vertexAttribPointer(P,E.components,o[$h[E.type]],!1,this.itemSize,E.offset+this.itemSize*(v||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ui{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class zh extends ui{getDefault(){return l.Color.transparent}set(o){const f=this.current;(o.r!==f.r||o.g!==f.g||o.b!==f.b||o.a!==f.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class Bu extends ui{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class Im extends ui{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class Am extends ui{getDefault(){return[!0,!0,!0,!0]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||o[2]!==f[2]||o[3]!==f[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class xl extends ui{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class sy extends ui{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class ay extends ui{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const f=this.current;(o.func!==f.func||o.ref!==f.ref||o.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class oy extends ui{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||o[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class ly extends ui{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=o,this.dirty=!1}}class cy extends ui{getDefault(){return[0,1]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class uy extends ui{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=o,this.dirty=!1}}class Bh extends ui{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class Nu extends ui{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.BLEND):f.disable(f.BLEND),this.current=o,this.dirty=!1}}class Nh extends ui{getDefault(){const o=this.gl;return[o.ONE,o.ZERO]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)}}class Uh extends ui{getDefault(){return l.Color.transparent}set(o){const f=this.current;(o.r!==f.r||o.g!==f.g||o.b!==f.b||o.a!==f.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class wl extends ui{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)}}class Mm extends ui{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=o,this.dirty=!1}}class km extends ui{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class jh extends ui{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}class Uo extends ui{getDefault(){return null}set(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)}}class Pm extends ui{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class Sl extends ui{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||o[2]!==f[2]||o[3]!==f[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Tl extends ui{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class Dm extends ui{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Vh extends ui{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class yi extends ui{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Uu extends ui{getDefault(){return null}set(o){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class dy extends ui{getDefault(){return null}set(o){(o!==this.current||this.dirty)&&(this.gl.bindVertexArray(o),this.current=o,this.dirty=!1)}}class Lm extends ui{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class Mc extends ui{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class hy extends ui{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class Hh extends ui{constructor(o,f){super(o),this.context=o,this.parent=f}getDefault(){return null}}class Om extends Hh{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class fy extends Hh{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Gh extends Hh{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class ju{constructor(o,f,v,b,E){this.context=o,this.width=f,this.height=v;const P=o.gl,R=this.framebuffer=P.createFramebuffer();if(this.colorAttachment=new Om(o,R),b)this.depthAttachment=E?new Gh(o,R):new fy(o,R);else if(E)throw new Error("Stencil cannot be setted without depth");if(P.checkFramebufferStatus(P.FRAMEBUFFER)!==P.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const o=this.context.gl,f=this.colorAttachment.get();if(f&&o.deleteTexture(f),this.depthAttachment){const v=this.depthAttachment.get();v&&o.deleteRenderbuffer(v)}o.deleteFramebuffer(this.framebuffer)}}class Bi{constructor(o,f,v){this.blendFunction=o,this.blendColor=f,this.mask=v}}Bi.Replace=[1,0],Bi.disabled=new Bi(Bi.Replace,l.Color.transparent,[!1,!1,!1,!1]),Bi.unblended=new Bi(Bi.Replace,l.Color.transparent,[!0,!0,!0,!0]),Bi.alphaBlended=new Bi([1,771],l.Color.transparent,[!0,!0,!0,!0]);class Wh{constructor(o){this.gl=o,this.clearColor=new zh(this),this.clearDepth=new Bu(this),this.clearStencil=new Im(this),this.colorMask=new Am(this),this.depthMask=new xl(this),this.stencilMask=new sy(this),this.stencilFunc=new ay(this),this.stencilOp=new oy(this),this.stencilTest=new ly(this),this.depthRange=new cy(this),this.depthTest=new uy(this),this.depthFunc=new Bh(this),this.blend=new Nu(this),this.blendFunc=new Nh(this),this.blendColor=new Uh(this),this.blendEquation=new wl(this),this.cullFace=new Mm(this),this.cullFaceSide=new km(this),this.frontFace=new jh(this),this.program=new Uo(this),this.activeTexture=new Pm(this),this.viewport=new Sl(this),this.bindFramebuffer=new Tl(this),this.bindRenderbuffer=new Dm(this),this.bindTexture=new Vh(this),this.bindVertexBuffer=new yi(this),this.bindElementBuffer=new Uu(this),this.bindVertexArray=new dy(this),this.pixelStoreUnpack=new Lm(this),this.pixelStoreUnpackPremultiplyAlpha=new Mc(this),this.pixelStoreUnpackFlipY=new hy(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),this.HALF_FLOAT=o.HALF_FLOAT,o.getExtension("EXT_color_buffer_half_float"),o.getExtension("EXT_color_buffer_float"),this.RGBA16F=o.RGBA16F,this.RGB16F=o.RGB16F}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,f){return new Fh(this,o,f)}createVertexBuffer(o,f,v){return new zu(this,o,f,v)}createRenderbuffer(o,f,v){const b=this.gl,E=b.createRenderbuffer();return this.bindRenderbuffer.set(E),b.renderbufferStorage(b.RENDERBUFFER,o,f,v),this.bindRenderbuffer.set(null),E}createFramebuffer(o,f,v,b){return new ju(this,o,f,v,b)}clear({color:o,depth:f,stencil:v}){const b=this.gl;let E=0;o&&(E|=b.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(E|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),v!==void 0&&(E|=b.STENCIL_BUFFER_BIT,this.clearStencil.set(v),this.stencilMask.set(255)),b.clear(E)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){l.deepEqual(o.blendFunction,Bi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)}createVertexArray(){return this.gl.createVertexArray()}deleteVertexArray(o){return this.gl.deleteVertexArray(o)}unbindVAO(){this.bindVertexArray.set(null)}}class Jn{constructor(o,f,v){this.func=o,this.mask=f,this.range=v}}Jn.ReadOnly=!1,Jn.ReadWrite=!0,Jn.disabled=new Jn(519,Jn.ReadOnly,[0,1]);const Vu=7680;class Mi{constructor(o,f,v,b,E,P){this.test=o,this.ref=f,this.mask=v,this.fail=b,this.depthFail=E,this.pass=P}}Mi.disabled=new Mi({func:519,mask:0},0,0,Vu,Vu,Vu);class Ii{constructor(o,f,v){this.enable=o,this.mode=f,this.frontFace=v}}let El;function Rm(_,o,f,v,b,E,P){const R=_.context,O=R.gl,B=_.useProgram("collisionBox"),K=[];let Z=0,le=0;for(let Ae=0;Ae<v.length;Ae++){const nt=v[Ae],_t=o.getTile(nt),At=_t.getBucket(f);if(!At)continue;let Rt=nt.posMatrix;b[0]===0&&b[1]===0||(Rt=_.translatePosMatrix(nt.posMatrix,_t,b,E));const Bt=P?At.textCollisionBox:At.iconCollisionBox,Lt=At.collisionCircleArray;if(Lt.length>0){const nn=l.create(),Sn=Rt;l.mul(nn,At.placementInvProjMatrix,_.transform.glCoordMatrix),l.mul(nn,nn,At.placementViewportMatrix),K.push({circleArray:Lt,circleOffset:le,transform:Sn,invTransform:nn,coord:nt}),Z+=Lt.length/4,le=Z}Bt&&B.draw(R,O.LINES,Jn.disabled,Mi.disabled,_.colorModeForRenderPass(),Ii.disabled,Cm(Rt,_.transform,_t),_.style.map.terrain&&_.style.map.terrain.getTerrainData(nt),f.id,Bt.layoutVertexBuffer,Bt.indexBuffer,Bt.segments,null,_.transform.zoom,null,null,Bt.collisionVertexBuffer)}if(!P||!K.length)return;const Se=_.useProgram("collisionCircle"),ve=new l.CollisionCircleLayoutArray;ve.resize(4*Z),ve._trim();let xe=0;for(const Ae of K)for(let nt=0;nt<Ae.circleArray.length/4;nt++){const _t=4*nt,At=Ae.circleArray[_t+0],Rt=Ae.circleArray[_t+1],Bt=Ae.circleArray[_t+2],Lt=Ae.circleArray[_t+3];ve.emplace(xe++,At,Rt,Bt,Lt,0),ve.emplace(xe++,At,Rt,Bt,Lt,1),ve.emplace(xe++,At,Rt,Bt,Lt,2),ve.emplace(xe++,At,Rt,Bt,Lt,3)}(!El||El.length<2*Z)&&(El=function(Ae){const nt=2*Ae,_t=new l.QuadTriangleArray;_t.resize(nt),_t._trim();for(let At=0;At<nt;At++){const Rt=6*At;_t.uint16[Rt+0]=4*At+0,_t.uint16[Rt+1]=4*At+1,_t.uint16[Rt+2]=4*At+2,_t.uint16[Rt+3]=4*At+2,_t.uint16[Rt+4]=4*At+3,_t.uint16[Rt+5]=4*At+0}return _t}(Z));const De=R.createIndexBuffer(El,!0),Ue=R.createVertexBuffer(ve,l.collisionCircleLayout.members,!0);for(const Ae of K){const nt={u_matrix:Ae.transform,u_inv_matrix:Ae.invTransform,u_camera_to_center_distance:(st=_.transform).cameraToCenterDistance,u_viewport_size:[st.width,st.height]};Se.draw(R,O.TRIANGLES,Jn.disabled,Mi.disabled,_.colorModeForRenderPass(),Ii.disabled,nt,_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ae.coord),f.id,Ue,De,l.SegmentVector.simpleSegment(0,2*Ae.circleOffset,Ae.circleArray.length,Ae.circleArray.length/2),null,_.transform.zoom,null,null,null)}var st;Ue.destroy(),De.destroy()}Ii.disabled=new Ii(!1,1029,2305),Ii.backCCW=new Ii(!0,1029,2305);const qh=l.identity(new Float32Array(16));function py(_,o,f,v,b,E){const{horizontalAlign:P,verticalAlign:R}=l.getAnchorAlignment(_),O=-(P-.5)*o,B=-(R-.5)*f,K=l.evaluateVariableOffset(_,v);return new l.Point((O/b+K[0])*E,(B/b+K[1])*E)}function Fm(_,o,f,v,b,E,P,R,O,B,K){const Z=_.text.placedSymbolArray,le=_.text.dynamicLayoutVertexArray,Se=_.icon.dynamicLayoutVertexArray,ve={};le.clear();for(let xe=0;xe<Z.length;xe++){const De=Z.get(xe),Ue=De.hidden||!De.crossTileID||_.allowVerticalPlacement&&!De.placedOrientation?null:v[De.crossTileID];if(Ue){const st=new l.Point(De.anchorX,De.anchorY),Ae=Pt(st,f?P:E,K),nt=qn(b.cameraToCenterDistance,Ae.signedDistanceFromCamera);let _t=l.evaluateSizeForFeature(_.textSizeData,O,De)*nt/l.ONE_EM;f&&(_t*=_.tilePixelRatio/R);const{width:At,height:Rt,anchor:Bt,textOffset:Lt,textBoxScale:nn}=Ue,Sn=py(Bt,At,Rt,Lt,nn,_t),zn=f?Pt(st.add(Sn),E,K).point:Ae.point.add(o?Sn.rotate(-b.angle):Sn),Zt=_.allowVerticalPlacement&&De.placedOrientation===l.WritingMode.vertical?Math.PI/2:0;for(let On=0;On<De.numGlyphs;On++)l.addDynamicAttributes(le,zn,Zt);B&&De.associatedIconIndex>=0&&(ve[De.associatedIconIndex]={shiftedAnchor:zn,angle:Zt})}else Ve(De.numGlyphs,le)}if(B){Se.clear();const xe=_.icon.placedSymbolArray;for(let De=0;De<xe.length;De++){const Ue=xe.get(De);if(Ue.hidden)Ve(Ue.numGlyphs,Se);else{const st=ve[De];if(st)for(let Ae=0;Ae<Ue.numGlyphs;Ae++)l.addDynamicAttributes(Se,st.shiftedAnchor,st.angle);else Ve(Ue.numGlyphs,Se)}}_.icon.dynamicLayoutVertexBuffer.updateData(Se)}_.text.dynamicLayoutVertexBuffer.updateData(le)}function Hu(_,o,f){return f.iconsInText&&o?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function Gu(_,o,f,v,b,E,P,R,O,B,K,Z){const le=_.context,Se=le.gl,ve=_.transform,xe=R==="map",De=O==="map",Ue=R!=="viewport"&&f.layout.get("symbol-placement")!=="point",st=xe&&!De&&!Ue,Ae=!f.layout.get("symbol-sort-key").isConstant();let nt=!1;const _t=_.depthModeForSublayer(0,Jn.ReadOnly),At=f.layout.get("text-variable-anchor"),Rt=[];for(const Bt of v){const Lt=o.getTile(Bt),nn=Lt.getBucket(f);if(!nn)continue;const Sn=b?nn.text:nn.icon;if(!Sn||!Sn.segments.get().length||!Sn.hasVisibleVertices)continue;const zn=Sn.programConfigurations.get(f.id),Zt=b||nn.sdfIcons,On=b?nn.textSizeData:nn.iconSizeData,on=De||ve.pitch!==0,di=_.useProgram(Hu(Zt,b,nn),zn),tr=l.evaluateSizeForZoom(On,ve.zoom),hi=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Bt);let Nn,Ki,Ur,nr,yr=[0,0],ls=null;if(b)Ki=Lt.glyphAtlasTexture,Ur=Se.LINEAR,Nn=Lt.glyphAtlasTexture.size,nn.iconsInText&&(yr=Lt.imageAtlasTexture.size,ls=Lt.imageAtlasTexture,nr=on||_.options.rotating||_.options.zooming||On.kind==="composite"||On.kind==="camera"?Se.LINEAR:Se.NEAREST);else{const pr=f.layout.get("icon-size").constantOr(0)!==1||nn.iconsNeedLinear;Ki=Lt.imageAtlasTexture,Ur=Zt||_.options.rotating||_.options.zooming||pr||on?Se.LINEAR:Se.NEAREST,Nn=Lt.imageAtlasTexture.size}const Ns=bt(Lt,1,_.transform.zoom),Us=Yt(Bt.posMatrix,De,xe,_.transform,Ns),jr=an(Bt.posMatrix,De,xe,_.transform,Ns),ha=At&&nn.hasTextData(),jc=f.layout.get("icon-text-fit")!=="none"&&ha&&nn.hasIconData();if(Ue){const pr=_.style.map.terrain?(fd,Oa)=>_.style.map.terrain.getElevation(Bt,fd,Oa):null,cs=f.layout.get("text-rotation-alignment")==="map";Ut(nn,Bt.posMatrix,_,b,Us,jr,De,B,cs,pr)}const Pr=_.translatePosMatrix(Bt.posMatrix,Lt,E,P),br=Ue||b&&At||jc?qh:Us,pi=_.translatePosMatrix(jr,Lt,E,P,!0),fr=Zt&&f.paint.get(b?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let xr;xr=Zt?nn.iconsInText?os(On.kind,tr,st,De,_,Pr,br,pi,Nn,yr):Xr(On.kind,tr,st,De,_,Pr,br,pi,b,Nn,!0):Ac(On.kind,tr,st,De,_,Pr,br,pi,b,Nn);const vi={program:di,buffers:Sn,uniformValues:xr,atlasTexture:Ki,atlasTextureIcon:ls,atlasInterpolation:Ur,atlasInterpolationIcon:nr,isSDF:Zt,hasHalo:fr};if(Ae&&nn.canOverlap){nt=!0;const pr=Sn.segments.get();for(const cs of pr)Rt.push({segments:new l.SegmentVector([cs]),sortKey:cs.sortKey,state:vi,terrainData:hi})}else Rt.push({segments:Sn.segments,sortKey:0,state:vi,terrainData:hi})}nt&&Rt.sort((Bt,Lt)=>Bt.sortKey-Lt.sortKey);for(const Bt of Rt){const Lt=Bt.state;if(le.activeTexture.set(Se.TEXTURE0),Lt.atlasTexture.bind(Lt.atlasInterpolation,Se.CLAMP_TO_EDGE),Lt.atlasTextureIcon&&(le.activeTexture.set(Se.TEXTURE1),Lt.atlasTextureIcon&&Lt.atlasTextureIcon.bind(Lt.atlasInterpolationIcon,Se.CLAMP_TO_EDGE)),Lt.isSDF){const nn=Lt.uniformValues;Lt.hasHalo&&(nn.u_is_halo=1,Zh(Lt.buffers,Bt.segments,f,_,Lt.program,_t,K,Z,nn,Bt.terrainData)),nn.u_is_halo=0}Zh(Lt.buffers,Bt.segments,f,_,Lt.program,_t,K,Z,Lt.uniformValues,Bt.terrainData)}}function Zh(_,o,f,v,b,E,P,R,O,B){const K=v.context;b.draw(K,K.gl.TRIANGLES,E,P,R,Ii.disabled,O,B,f.id,_.layoutVertexBuffer,_.indexBuffer,o,f.paint,v.transform.zoom,_.programConfigurations.get(f.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function Kh(_,o,f,v,b){if(!f||!v||!v.imageAtlas)return;const E=v.imageAtlas.patternPositions;let P=E[f.to.toString()],R=E[f.from.toString()];if(!P||!R){const O=b.getPaintProperty(o);P=E[O],R=E[O]}P&&R&&_.setConstantPatternPositions(P,R)}function kc(_,o,f,v,b,E,P){const R=_.context.gl,O="fill-pattern",B=f.paint.get(O),K=B&&B.constantOr(1),Z=f.getCrossfadeParameters();let le,Se,ve,xe,De;P?(Se=K&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",le=R.LINES):(Se=K?"fillPattern":"fill",le=R.TRIANGLES);const Ue=B.constantOr(null);for(const st of v){const Ae=o.getTile(st);if(K&&!Ae.patternsLoaded())continue;const nt=Ae.getBucket(f);if(!nt)continue;const _t=nt.programConfigurations.get(f.id),At=_.useProgram(Se,_t),Rt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(st);K&&(_.context.activeTexture.set(R.TEXTURE0),Ae.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),_t.updatePaintBuffers(Z)),Kh(_t,O,Ue,Ae,f);const Bt=Rt?st:null,Lt=_.translatePosMatrix(Bt?Bt.posMatrix:st.posMatrix,Ae,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(P){xe=nt.indexBuffer2,De=nt.segments2;const nn=[R.drawingBufferWidth,R.drawingBufferHeight];ve=Se==="fillOutlinePattern"&&K?Dh(Lt,_,Z,Ae,nn):ry(Lt,nn)}else xe=nt.indexBuffer,De=nt.segments,ve=K?Ph(Lt,_,Z,Ae):Tm(Lt);At.draw(_.context,le,b,_.stencilModeForClipping(st),E,Ii.disabled,ve,Rt,f.id,nt.layoutVertexBuffer,xe,De,f.paint,_.transform.zoom,_t)}}function Pc(_,o,f,v,b,E,P){const R=_.context,O=R.gl,B="fill-extrusion-pattern",K=f.paint.get(B),Z=K.constantOr(1),le=f.getCrossfadeParameters(),Se=f.paint.get("fill-extrusion-opacity"),ve=K.constantOr(null);for(const xe of v){const De=o.getTile(xe),Ue=De.getBucket(f);if(!Ue)continue;const st=_.style.map.terrain&&_.style.map.terrain.getTerrainData(xe),Ae=Ue.programConfigurations.get(f.id),nt=_.useProgram(Z?"fillExtrusionPattern":"fillExtrusion",Ae);Z&&(_.context.activeTexture.set(O.TEXTURE0),De.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),Ae.updatePaintBuffers(le)),Kh(Ae,B,ve,De,f);const _t=_.translatePosMatrix(xe.posMatrix,De,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),At=f.paint.get("fill-extrusion-vertical-gradient"),Rt=Z?Sm(_t,_,At,Se,xe,le,De):wm(_t,_,At,Se);nt.draw(R,R.gl.TRIANGLES,b,E,P,Ii.backCCW,Rt,st,f.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,f.paint,_.transform.zoom,Ae,_.style.map.terrain&&Ue.centroidVertexBuffer)}}function my(_,o,f,v,b,E,P){const R=_.context,O=R.gl,B=f.fbo;if(!B)return;const K=_.useProgram("hillshade"),Z=_.style.map.terrain&&_.style.map.terrain.getTerrainData(o);R.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,B.colorAttachment.get()),K.draw(R,O.TRIANGLES,b,E,P,Ii.disabled,((le,Se,ve,xe)=>{const De=ve.paint.get("hillshade-shadow-color"),Ue=ve.paint.get("hillshade-highlight-color"),st=ve.paint.get("hillshade-accent-color");let Ae=ve.paint.get("hillshade-illumination-direction")*(Math.PI/180);ve.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ae-=le.transform.angle);const nt=!le.options.moving;return{u_matrix:xe?xe.posMatrix:le.transform.calculatePosMatrix(Se.tileID.toUnwrapped(),nt),u_image:0,u_latrange:Lu(0,Se.tileID),u_light:[ve.paint.get("hillshade-exaggeration"),Ae],u_shadow:De,u_highlight:Ue,u_accent:st}})(_,f,v,Z?o:null),Z,v.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}function $m(_,o,f,v,b,E){const P=_.context,R=P.gl,O=o.dem;if(O&&O.data){const B=O.dim,K=O.stride,Z=O.getPixels();if(P.activeTexture.set(R.TEXTURE1),P.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||_.getTileTexture(K),o.demTexture){const Se=o.demTexture;Se.update(Z,{premultiply:!1}),Se.bind(R.NEAREST,R.CLAMP_TO_EDGE)}else o.demTexture=new z(P,Z,R.RGBA,{premultiply:!1}),o.demTexture.bind(R.NEAREST,R.CLAMP_TO_EDGE);P.activeTexture.set(R.TEXTURE0);let le=o.fbo;if(!le){const Se=new z(P,{width:B,height:B,data:null},R.RGBA);Se.bind(R.LINEAR,R.CLAMP_TO_EDGE),le=o.fbo=P.createFramebuffer(B,B,!0,!1),le.colorAttachment.set(Se.texture)}P.bindFramebuffer.set(le.framebuffer),P.viewport.set([0,0,B,B]),_.useProgram("hillshadePrepare").draw(P,R.TRIANGLES,v,b,E,Ii.disabled,((Se,ve)=>{const xe=ve.stride,De=l.create();return l.ortho(De,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(De,De,[0,-l.EXTENT,0]),{u_matrix:De,u_image:1,u_dimension:[xe,xe],u_zoom:Se.overscaledZ,u_unpack:ve.getUnpackVector()}})(o.tileID,O),null,f.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),o.needsHillshadePrepare=!1}}function er(_,o,f,v,b,E){const P=v.paint.get("raster-fade-duration");if(!E&&P>0){const R=l.exported.now(),O=(R-_.timeAdded)/P,B=o?(R-o.timeAdded)/P:-1,K=f.getSource(),Z=b.coveringZoomLevel({tileSize:K.tileSize,roundZoom:K.roundZoom}),le=!o||Math.abs(o.tileID.overscaledZ-Z)>Math.abs(_.tileID.overscaledZ-Z),Se=le&&_.refreshedUponExpiration?1:l.clamp(le?O:1-B,0,1);return _.refreshedUponExpiration&&O>=1&&(_.refreshedUponExpiration=!1),o?{opacity:1,mix:1-Se}:{opacity:Se,mix:0}}return{opacity:1,mix:0}}const jo=new l.Color(1,0,0,1),Is=new l.Color(0,1,0,1),zm=new l.Color(0,0,1,1),Xh=new l.Color(1,0,1,1),Bm=new l.Color(0,1,1,1);function Vo(_,o,f,v){Cl(_,0,o+f/2,_.transform.width,f,v)}function Dc(_,o,f,v){Cl(_,o-f/2,0,f,_.transform.height,v)}function Cl(_,o,f,v,b,E){const P=_.context,R=P.gl;R.enable(R.SCISSOR_TEST),R.scissor(o*_.pixelRatio,f*_.pixelRatio,v*_.pixelRatio,b*_.pixelRatio),P.clear({color:E}),R.disable(R.SCISSOR_TEST)}function Nm(_,o,f){const v=_.context,b=v.gl,E=f.posMatrix,P=_.useProgram("debug"),R=Jn.disabled,O=Mi.disabled,B=_.colorModeForRenderPass(),K="$debug",Z=_.style.map.terrain&&_.style.map.terrain.getTerrainData(f);v.activeTexture.set(b.TEXTURE0);const le=o.getTileByID(f.key).latestRawTileData,Se=Math.floor((le&&le.byteLength||0)/1024),ve=o.getTile(f).tileSize,xe=512/Math.min(ve,512)*(f.overscaledZ/_.transform.zoom)*.5;let De=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(De+=` => ${f.overscaledZ}`),function(Ue,st){Ue.initDebugOverlayCanvas();const Ae=Ue.debugOverlayCanvas,nt=Ue.context.gl,_t=Ue.debugOverlayCanvas.getContext("2d");_t.clearRect(0,0,Ae.width,Ae.height),_t.shadowColor="white",_t.shadowBlur=2,_t.lineWidth=1.5,_t.strokeStyle="white",_t.textBaseline="top",_t.font="bold 36px Open Sans, sans-serif",_t.fillText(st,5,5),_t.strokeText(st,5,5),Ue.debugOverlayTexture.update(Ae),Ue.debugOverlayTexture.bind(nt.LINEAR,nt.CLAMP_TO_EDGE)}(_,`${De} ${Se}kB`),P.draw(v,b.TRIANGLES,R,O,Bi.alphaBlended,Ii.disabled,Lh(E,l.Color.transparent,xe),null,K,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),P.draw(v,b.LINE_STRIP,R,O,B,Ii.disabled,Lh(E,l.Color.red),Z,K,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function Yh(_,o,f){const v=_.context,b=v.gl,E=_.colorModeForRenderPass(),P=new Jn(b.LEQUAL,Jn.ReadWrite,_.depthRangeFor3D),R=_.useProgram("terrain"),O=o.getTerrainMesh();v.bindFramebuffer.set(null),v.viewport.set([0,0,_.width,_.height]);for(const B of f){const K=_.renderToTexture.getTexture(B),Z=o.getTerrainData(B.tileID);v.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,K.texture);const le={u_matrix:_.transform.calculatePosMatrix(B.tileID.toUnwrapped()),u_texture:0,u_ele_delta:o.getMeshFrameDelta(_.transform.zoom)};R.draw(v,b.TRIANGLES,P,Mi.disabled,E,Ii.backCCW,le,Z,"terrain",O.vertexBuffer,O.indexBuffer,O.segments)}}const Jh={symbol:function(_,o,f,v,b){if(_.renderPass!=="translucent")return;const E=Mi.disabled,P=_.colorModeForRenderPass();f.layout.get("text-variable-anchor")&&function(R,O,B,K,Z,le,Se){const ve=O.transform,xe=Z==="map",De=le==="map";for(const Ue of R){const st=K.getTile(Ue),Ae=st.getBucket(B);if(!Ae||!Ae.text||!Ae.text.segments.get().length)continue;const nt=l.evaluateSizeForZoom(Ae.textSizeData,ve.zoom),_t=bt(st,1,O.transform.zoom),At=Yt(Ue.posMatrix,De,xe,O.transform,_t),Rt=B.layout.get("icon-text-fit")!=="none"&&Ae.hasIconData();if(nt){const Bt=Math.pow(2,ve.zoom-st.tileID.overscaledZ);Fm(Ae,xe,De,Se,ve,At,Ue.posMatrix,Bt,nt,Rt,O.style.map.terrain?(Lt,nn)=>O.style.map.terrain.getElevation(Ue,Lt,nn):null)}}}(v,_,f,o,f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),b),f.paint.get("icon-opacity").constantOr(1)!==0&&Gu(_,o,f,v,!1,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),f.layout.get("icon-rotation-alignment"),f.layout.get("icon-pitch-alignment"),f.layout.get("icon-keep-upright"),E,P),f.paint.get("text-opacity").constantOr(1)!==0&&Gu(_,o,f,v,!0,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),f.layout.get("text-keep-upright"),E,P),o.map.showCollisionBoxes&&(Rm(_,o,f,v,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),!0),Rm(_,o,f,v,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),!1))},circle:function(_,o,f,v){if(_.renderPass!=="translucent")return;const b=f.paint.get("circle-opacity"),E=f.paint.get("circle-stroke-width"),P=f.paint.get("circle-stroke-opacity"),R=!f.layout.get("circle-sort-key").isConstant();if(b.constantOr(1)===0&&(E.constantOr(1)===0||P.constantOr(1)===0))return;const O=_.context,B=O.gl,K=_.depthModeForSublayer(0,Jn.ReadOnly),Z=Mi.disabled,le=_.colorModeForRenderPass(),Se=[];for(let ve=0;ve<v.length;ve++){const xe=v[ve],De=o.getTile(xe),Ue=De.getBucket(f);if(!Ue)continue;const st=Ue.programConfigurations.get(f.id),Ae=_.useProgram("circle",st),nt=Ue.layoutVertexBuffer,_t=Ue.indexBuffer,At=_.style.map.terrain&&_.style.map.terrain.getTerrainData(xe),Rt={programConfiguration:st,program:Ae,layoutVertexBuffer:nt,indexBuffer:_t,uniformValues:Em(_,xe,De,f),terrainData:At};if(R){const Bt=Ue.segments.get();for(const Lt of Bt)Se.push({segments:new l.SegmentVector([Lt]),sortKey:Lt.sortKey,state:Rt})}else Se.push({segments:Ue.segments,sortKey:0,state:Rt})}R&&Se.sort((ve,xe)=>ve.sortKey-xe.sortKey);for(const ve of Se){const{programConfiguration:xe,program:De,layoutVertexBuffer:Ue,indexBuffer:st,uniformValues:Ae,terrainData:nt}=ve.state;De.draw(O,B.TRIANGLES,K,Z,le,Ii.disabled,Ae,nt,f.id,Ue,st,ve.segments,f.paint,_.transform.zoom,xe)}},heatmap:function(_,o,f,v){if(f.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const b=_.context,E=b.gl,P=Mi.disabled,R=new Bi([E.ONE,E.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(O,B,K){const Z=O.gl;O.activeTexture.set(Z.TEXTURE1),O.viewport.set([0,0,B.width/4,B.height/4]);let le=K.heatmapFbo;if(le)Z.bindTexture(Z.TEXTURE_2D,le.colorAttachment.get()),O.bindFramebuffer.set(le.framebuffer);else{const Se=Z.createTexture();Z.bindTexture(Z.TEXTURE_2D,Se),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_S,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_T,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MIN_FILTER,Z.LINEAR),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MAG_FILTER,Z.LINEAR),le=K.heatmapFbo=O.createFramebuffer(B.width/4,B.height/4,!1,!1),function(ve,xe,De,Ue){var st,Ae;const nt=ve.gl,_t=(st=ve.HALF_FLOAT)!==null&&st!==void 0?st:nt.UNSIGNED_BYTE,At=(Ae=ve.RGBA16F)!==null&&Ae!==void 0?Ae:nt.RGBA;nt.texImage2D(nt.TEXTURE_2D,0,At,xe.width/4,xe.height/4,0,nt.RGBA,_t,null),Ue.colorAttachment.set(De)}(O,B,Se,le)}})(b,_,f),b.clear({color:l.Color.transparent});for(let O=0;O<v.length;O++){const B=v[O];if(o.hasRenderableParent(B))continue;const K=o.getTile(B),Z=K.getBucket(f);if(!Z)continue;const le=Z.programConfigurations.get(f.id),Se=_.useProgram("heatmap",le),{zoom:ve}=_.transform;Se.draw(b,E.TRIANGLES,Jn.disabled,P,R,Ii.disabled,No(B.posMatrix,K,ve,f.paint.get("heatmap-intensity")),null,f.id,Z.layoutVertexBuffer,Z.indexBuffer,Z.segments,f.paint,_.transform.zoom,le)}b.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(b,E){const P=b.context,R=P.gl,O=E.heatmapFbo;if(!O)return;P.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,O.colorAttachment.get()),P.activeTexture.set(R.TEXTURE1);let B=E.colorRampTexture;B||(B=E.colorRampTexture=new z(P,E.colorRamp,R.RGBA)),B.bind(R.LINEAR,R.CLAMP_TO_EDGE),b.useProgram("heatmapTexture").draw(P,R.TRIANGLES,Jn.disabled,Mi.disabled,b.colorModeForRenderPass(),Ii.disabled,((K,Z,le,Se)=>{const ve=l.create();l.ortho(ve,0,K.width,K.height,0,0,1);const xe=K.context.gl;return{u_matrix:ve,u_world:[xe.drawingBufferWidth,xe.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Z.paint.get("heatmap-opacity")}})(b,E),null,E.id,b.viewportBuffer,b.quadTriangleIndexBuffer,b.viewportSegments,E.paint,b.transform.zoom)}(_,f))},line:function(_,o,f,v){if(_.renderPass!=="translucent")return;const b=f.paint.get("line-opacity"),E=f.paint.get("line-width");if(b.constantOr(1)===0||E.constantOr(1)===0)return;const P=_.depthModeForSublayer(0,Jn.ReadOnly),R=_.colorModeForRenderPass(),O=f.paint.get("line-dasharray"),B=f.paint.get("line-pattern"),K=B.constantOr(1),Z=f.paint.get("line-gradient"),le=f.getCrossfadeParameters(),Se=K?"linePattern":O?"lineSDF":Z?"lineGradient":"line",ve=_.context,xe=ve.gl;let De=!0;for(const Ue of v){const st=o.getTile(Ue);if(K&&!st.patternsLoaded())continue;const Ae=st.getBucket(f);if(!Ae)continue;const nt=Ae.programConfigurations.get(f.id),_t=_.context.program.get(),At=_.useProgram(Se,nt),Rt=De||At.program!==_t,Bt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ue),Lt=B.constantOr(null);if(Lt&&st.imageAtlas){const zn=st.imageAtlas,Zt=zn.patternPositions[Lt.to.toString()],On=zn.patternPositions[Lt.from.toString()];Zt&&On&&nt.setConstantPatternPositions(Zt,On)}const nn=Bt?Ue:null,Sn=K?Ru(_,st,f,le,nn):O?Sc(_,st,f,O,le,nn):Z?Ou(_,st,f,Ae.lineClipsArray.length,nn):Kr(_,st,f,nn);if(K)ve.activeTexture.set(xe.TEXTURE0),st.imageAtlasTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE),nt.updatePaintBuffers(le);else if(O&&(Rt||_.lineAtlas.dirty))ve.activeTexture.set(xe.TEXTURE0),_.lineAtlas.bind(ve);else if(Z){const zn=Ae.gradients[f.id];let Zt=zn.texture;if(f.gradientVersion!==zn.version){let On=256;if(f.stepInterpolant){const on=o.getSource().maxzoom,di=Ue.canonical.z===on?Math.ceil(1<<_.transform.maxZoom-Ue.canonical.z):1;On=l.clamp(l.nextPowerOfTwo(Ae.maxLineLength/l.EXTENT*1024*di),256,ve.maxTextureSize)}zn.gradient=l.renderColorRamp({expression:f.gradientExpression(),evaluationKey:"lineProgress",resolution:On,image:zn.gradient||void 0,clips:Ae.lineClipsArray}),zn.texture?zn.texture.update(zn.gradient):zn.texture=new z(ve,zn.gradient,xe.RGBA),zn.version=f.gradientVersion,Zt=zn.texture}ve.activeTexture.set(xe.TEXTURE0),Zt.bind(f.stepInterpolant?xe.NEAREST:xe.LINEAR,xe.CLAMP_TO_EDGE)}At.draw(ve,xe.TRIANGLES,P,_.stencilModeForClipping(Ue),R,Ii.disabled,Sn,Bt,f.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,f.paint,_.transform.zoom,nt,Ae.layoutVertexBuffer2),De=!1}},fill:function(_,o,f,v){const b=f.paint.get("fill-color"),E=f.paint.get("fill-opacity");if(E.constantOr(1)===0)return;const P=_.colorModeForRenderPass(),R=f.paint.get("fill-pattern"),O=_.opaquePassEnabledForLayer()&&!R.constantOr(1)&&b.constantOr(l.Color.transparent).a===1&&E.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===O){const B=_.depthModeForSublayer(1,_.renderPass==="opaque"?Jn.ReadWrite:Jn.ReadOnly);kc(_,o,f,v,B,P,!1)}if(_.renderPass==="translucent"&&f.paint.get("fill-antialias")){const B=_.depthModeForSublayer(f.getPaintProperty("fill-outline-color")?2:0,Jn.ReadOnly);kc(_,o,f,v,B,P,!0)}},"fill-extrusion":function(_,o,f,v){const b=f.paint.get("fill-extrusion-opacity");if(b!==0&&_.renderPass==="translucent"){const E=new Jn(_.context.gl.LEQUAL,Jn.ReadWrite,_.depthRangeFor3D);if(b!==1||f.paint.get("fill-extrusion-pattern").constantOr(1))Pc(_,o,f,v,E,Mi.disabled,Bi.disabled),Pc(_,o,f,v,E,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const P=_.colorModeForRenderPass();Pc(_,o,f,v,E,Mi.disabled,P)}}},hillshade:function(_,o,f,v){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const b=_.context,E=_.depthModeForSublayer(0,Jn.ReadOnly),P=_.colorModeForRenderPass(),[R,O]=_.renderPass==="translucent"?_.stencilConfigForOverlap(v):[{},v];for(const B of O){const K=o.getTile(B);K.needsHillshadePrepare!==void 0&&K.needsHillshadePrepare&&_.renderPass==="offscreen"?$m(_,K,f,E,Mi.disabled,P):_.renderPass==="translucent"&&my(_,B,K,f,E,R[B.overscaledZ],P)}b.viewport.set([0,0,_.width,_.height])},raster:function(_,o,f,v){if(_.renderPass!=="translucent"||f.paint.get("raster-opacity")===0||!v.length)return;const b=_.context,E=b.gl,P=o.getSource(),R=_.useProgram("raster"),O=_.colorModeForRenderPass(),[B,K]=P instanceof ke?[{},v]:_.stencilConfigForOverlap(v),Z=K[K.length-1].overscaledZ,le=!_.options.moving;for(const Se of K){const ve=_.depthModeForSublayer(Se.overscaledZ-Z,f.paint.get("raster-opacity")===1?Jn.ReadWrite:Jn.ReadOnly,E.LESS),xe=o.getTile(Se);xe.registerFadeDuration(f.paint.get("raster-fade-duration"));const De=o.findLoadedParent(Se,0),Ue=er(xe,De,o,f,_.transform,_.style.map.terrain);let st,Ae;const nt=f.paint.get("raster-resampling")==="nearest"?E.NEAREST:E.LINEAR;b.activeTexture.set(E.TEXTURE0),xe.texture.bind(nt,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),b.activeTexture.set(E.TEXTURE1),De?(De.texture.bind(nt,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),st=Math.pow(2,De.tileID.overscaledZ-xe.tileID.overscaledZ),Ae=[xe.tileID.canonical.x*st%1,xe.tileID.canonical.y*st%1]):xe.texture.bind(nt,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST);const _t=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Se),At=_t?Se:null,Rt=At?At.posMatrix:_.transform.calculatePosMatrix(Se.toUnwrapped(),le),Bt=Cc(Rt,Ae||[0,0],st||1,Ue,f);P instanceof ke?R.draw(b,E.TRIANGLES,ve,Mi.disabled,O,Ii.disabled,Bt,_t,f.id,P.boundsBuffer,_.quadTriangleIndexBuffer,P.boundsSegments):R.draw(b,E.TRIANGLES,ve,B[Se.overscaledZ],O,Ii.disabled,Bt,_t,f.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}},background:function(_,o,f,v){const b=f.paint.get("background-color"),E=f.paint.get("background-opacity");if(E===0)return;const P=_.context,R=P.gl,O=_.transform,B=O.tileSize,K=f.paint.get("background-pattern");if(_.isPatternMissing(K))return;const Z=!K&&b.a===1&&E===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==Z)return;const le=Mi.disabled,Se=_.depthModeForSublayer(0,Z==="opaque"?Jn.ReadWrite:Jn.ReadOnly),ve=_.colorModeForRenderPass(),xe=_.useProgram(K?"backgroundPattern":"background"),De=v||O.coveringTiles({tileSize:B,terrain:_.style.map.terrain});K&&(P.activeTexture.set(R.TEXTURE0),_.imageManager.bind(_.context));const Ue=f.getCrossfadeParameters();for(const st of De){const Ae=v?st.posMatrix:_.transform.calculatePosMatrix(st.toUnwrapped()),nt=K?Fu(Ae,E,_,K,{tileID:st,tileSize:B},Ue):Rh(Ae,E,b),_t=_.style.map.terrain&&_.style.map.terrain.getTerrainData(st);xe.draw(P,R.TRIANGLES,Se,le,ve,Ii.disabled,nt,_t,f.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}},debug:function(_,o,f){for(let v=0;v<f.length;v++)Nm(_,o,f[v])},custom:function(_,o,f){const v=_.context,b=f.implementation;if(_.renderPass==="offscreen"){const E=b.prerender;E&&(_.setCustomLayerDefaults(),v.setColorMode(_.colorModeForRenderPass()),E.call(b,v.gl,_.transform.customLayerMatrix()),v.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),v.setColorMode(_.colorModeForRenderPass()),v.setStencilMode(Mi.disabled);const E=b.renderingMode==="3d"?new Jn(_.context.gl.LEQUAL,Jn.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,Jn.ReadOnly);v.setDepthMode(E),b.render(v.gl,_.transform.customLayerMatrix()),v.setDirty(),_.setBaseState(),v.bindFramebuffer.set(null)}}};class Um{constructor(o,f){this.context=new Wh(o),this.transform=f,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.create(),renderTime:0},this.setup(),this.numSublayers=Dt.maxUnderzooming+Dt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new wc}resize(o,f,v){if(this.width=o*v,this.height=f*v,this.pixelRatio=v,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const b of this.style._order)this.style._layers[b].resize()}setup(){const o=this.context,f=new l.PosArray;f.emplaceBack(0,0),f.emplaceBack(l.EXTENT,0),f.emplaceBack(0,l.EXTENT),f.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=o.createVertexBuffer(f,yl.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);const v=new l.PosArray;v.emplaceBack(0,0),v.emplaceBack(l.EXTENT,0),v.emplaceBack(0,l.EXTENT),v.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=o.createVertexBuffer(v,yl.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);const b=new l.RasterBoundsArray;b.emplaceBack(0,0,0,0),b.emplaceBack(l.EXTENT,0,l.EXTENT,0),b.emplaceBack(0,l.EXTENT,0,l.EXTENT),b.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=o.createVertexBuffer(b,_e.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);const E=new l.PosArray;E.emplaceBack(0,0),E.emplaceBack(1,0),E.emplaceBack(0,1),E.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(E,yl.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);const P=new l.LineStripIndexArray;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(P);const R=new l.TriangleIndexArray;R.emplaceBack(0,1,2),R.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(R);const O=this.context.gl;this.stencilClearMode=new Mi({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO)}clearStencil(){const o=this.context,f=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const v=l.create();l.ortho(v,0,this.width,this.height,0,0,1),l.scale(v,v,[f.drawingBufferWidth,f.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(o,f.TRIANGLES,Jn.disabled,this.stencilClearMode,Bi.disabled,Ii.disabled,Oh(v),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(o,f){if(this.currentStencilSource===o.source||!o.isTileClipped()||!f||!f.length)return;this.currentStencilSource=o.source;const v=this.context,b=v.gl;this.nextStencilID+f.length>256&&this.clearStencil(),v.setColorMode(Bi.disabled),v.setDepthMode(Jn.disabled);const E=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const P of f){const R=this._tileClippingMaskIDs[P.key]=this.nextStencilID++,O=this.style.map.terrain&&this.style.map.terrain.getTerrainData(P);E.draw(v,b.TRIANGLES,Jn.disabled,new Mi({func:b.ALWAYS,mask:0},R,255,b.KEEP,b.KEEP,b.REPLACE),Bi.disabled,Ii.disabled,Oh(P.posMatrix),O,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,f=this.context.gl;return new Mi({func:f.NOTEQUAL,mask:255},o,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(o){const f=this.context.gl;return new Mi({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,f.KEEP,f.KEEP,f.REPLACE)}stencilConfigForOverlap(o){const f=this.context.gl,v=o.sort((P,R)=>R.overscaledZ-P.overscaledZ),b=v[v.length-1].overscaledZ,E=v[0].overscaledZ-b+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();const P={};for(let R=0;R<E;R++)P[R+b]=new Mi({func:f.GEQUAL,mask:255},R+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=E,[P,v]}return[{[b]:Mi.disabled},v]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new Bi([o.CONSTANT_COLOR,o.ONE],new l.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Bi.unblended:Bi.alphaBlended}depthModeForSublayer(o,f,v){if(!this.opaquePassEnabledForLayer())return Jn.disabled;const b=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new Jn(v||this.context.gl.LEQUAL,f,[b,b])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(o,f){this.style=o,this.options=f,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(l.exported.now()),this.imageManager.beginFrame();const v=this.style._order,b=this.style.sourceCaches,E={},P={},R={};for(const O in b){const B=b[O];B.used&&B.prepare(this.context),E[O]=B.getVisibleCoordinates(),P[O]=E[O].slice().reverse(),R[O]=B.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let O=0;O<v.length;O++)if(this.style._layers[v[O]].is3D()){this.opaquePassCutoff=O;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const O=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!l.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||O.length)&&(l.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(B,K){const Z=B.context,le=Z.gl,Se=Bi.unblended,ve=new Jn(le.LEQUAL,Jn.ReadWrite,[0,1]),xe=K.getTerrainMesh(),De=K.sourceCache.getRenderableTiles(),Ue=B.useProgram("terrainDepth");Z.bindFramebuffer.set(K.getFramebuffer("depth").framebuffer),Z.viewport.set([0,0,B.width/devicePixelRatio,B.height/devicePixelRatio]),Z.clear({color:l.Color.transparent,depth:1});for(const st of De){const Ae=K.getTerrainData(st.tileID),nt={u_matrix:B.transform.calculatePosMatrix(st.tileID.toUnwrapped()),u_ele_delta:K.getMeshFrameDelta(B.transform.zoom)};Ue.draw(Z,le.TRIANGLES,ve,Mi.disabled,Se,Ii.backCCW,nt,Ae,"terrain",xe.vertexBuffer,xe.indexBuffer,xe.segments)}Z.bindFramebuffer.set(null),Z.viewport.set([0,0,B.width,B.height])}(this,this.style.map.terrain),function(B,K){const Z=B.context,le=Z.gl,Se=Bi.unblended,ve=new Jn(le.LEQUAL,Jn.ReadWrite,[0,1]),xe=K.getTerrainMesh(),De=K.getCoordsTexture(),Ue=K.sourceCache.getRenderableTiles(),st=B.useProgram("terrainCoords");Z.bindFramebuffer.set(K.getFramebuffer("coords").framebuffer),Z.viewport.set([0,0,B.width/devicePixelRatio,B.height/devicePixelRatio]),Z.clear({color:l.Color.transparent,depth:1}),K.coordsIndex=[];for(const Ae of Ue){const nt=K.getTerrainData(Ae.tileID);Z.activeTexture.set(le.TEXTURE0),le.bindTexture(le.TEXTURE_2D,De.texture);const _t={u_matrix:B.transform.calculatePosMatrix(Ae.tileID.toUnwrapped()),u_terrain_coords_id:(255-K.coordsIndex.length)/255,u_texture:0,u_ele_delta:K.getMeshFrameDelta(B.transform.zoom)};st.draw(Z,le.TRIANGLES,ve,Mi.disabled,Se,Ii.backCCW,_t,nt,"terrain",xe.vertexBuffer,xe.indexBuffer,xe.segments),K.coordsIndex.push(Ae.tileID.key)}Z.bindFramebuffer.set(null),Z.viewport.set([0,0,B.width,B.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const O of v){const B=this.style._layers[O];if(!B.hasOffscreenPass()||B.isHidden(this.transform.zoom))continue;const K=P[B.source];(B.type==="custom"||K.length)&&this.renderLayer(this,b[B.source],B,K)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:f.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=f.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){const O=this.style._layers[v[this.currentLayer]],B=b[O.source],K=E[O.source];this._renderTileClippingMasks(O,K),this.renderLayer(this,B,O,K)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){const O=this.style._layers[v[this.currentLayer]],B=b[O.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(O))continue;const K=(O.type==="symbol"?R:P)[O.source];this._renderTileClippingMasks(O,E[O.source]),this.renderLayer(this,B,O,K)}if(this.options.showTileBoundaries){const O=function(B,K){let Z=null;const le=Object.values(B._layers).flatMap(De=>De.source&&!De.isHidden(K)?[B.sourceCaches[De.source]]:[]),Se=le.filter(De=>De.getSource().type==="vector"),ve=le.filter(De=>De.getSource().type!=="vector"),xe=De=>{(!Z||Z.getSource().maxzoom<De.getSource().maxzoom)&&(Z=De)};return Se.forEach(De=>xe(De)),Z||ve.forEach(De=>xe(De)),Z}(this.style,this.transform.zoom);O&&Jh.debug(this,O,O.getVisibleCoordinates())}this.options.showPadding&&function(O){const B=O.transform.padding;Vo(O,O.transform.height-(B.top||0),3,jo),Vo(O,B.bottom||0,3,Is),Dc(O,B.left||0,3,zm),Dc(O,O.transform.width-(B.right||0),3,Xh);const K=O.transform.centerPoint;(function(Z,le,Se,ve){Cl(Z,le-1,Se-10,2,20,ve),Cl(Z,le-10,Se-1,20,2,ve)})(O,K.x,O.transform.height-K.y,Bm)}(this),this.context.setDefault()}renderLayer(o,f,v,b){v.isHidden(this.transform.zoom)||(v.type==="background"||v.type==="custom"||(b||[]).length)&&(this.id=v.id,Jh[v.type](o,f,v,b,this.style.placement.variableOffsets))}translatePosMatrix(o,f,v,b,E){if(!v[0]&&!v[1])return o;const P=E?b==="map"?this.transform.angle:0:b==="viewport"?-this.transform.angle:0;if(P){const B=Math.sin(P),K=Math.cos(P);v=[v[0]*K-v[1]*B,v[0]*B+v[1]*K]}const R=[E?v[0]:bt(f,v[0],this.transform.zoom),E?v[1]:bt(f,v[1],this.transform.zoom),0],O=new Float32Array(16);return l.translate(O,o,R),O}saveTileTexture(o){const f=this._tileTextures[o.size[0]];f?f.push(o):this._tileTextures[o.size[0]]=[o]}getTileTexture(o){const f=this._tileTextures[o];return f&&f.length>0?f.pop():null}isPatternMissing(o){if(!o)return!1;if(!o.from||!o.to)return!0;const f=this.imageManager.getPattern(o.from.toString()),v=this.imageManager.getPattern(o.to.toString());return!f||!v}useProgram(o,f){this.cache=this.cache||{};const v=o+(f?f.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[v]||(this.cache[v]=new iy(this.context,o,Cs[o],f,$u[o],this._showOverdrawInspector,this.style.map.terrain)),this.cache[v]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new z(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Wu{constructor(o,f){this.points=o,this.planes=f}static fromInvProjectionMatrix(o,f,v){const b=Math.pow(2,v),E=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(R=>{const O=1/(R=l.transformMat4([],R,o))[3]/f*b;return l.mul$1(R,R,[O,O,1/R[3],O])}),P=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(R=>{const O=function(le,Se){var ve=Se[0],xe=Se[1],De=Se[2],Ue=ve*ve+xe*xe+De*De;return Ue>0&&(Ue=1/Math.sqrt(Ue)),le[0]=Se[0]*Ue,le[1]=Se[1]*Ue,le[2]=Se[2]*Ue,le}([],function(le,Se,ve){var xe=Se[0],De=Se[1],Ue=Se[2],st=ve[0],Ae=ve[1],nt=ve[2];return le[0]=De*nt-Ue*Ae,le[1]=Ue*st-xe*nt,le[2]=xe*Ae-De*st,le}([],be([],E[R[0]],E[R[1]]),be([],E[R[2]],E[R[1]]))),B=-((K=O)[0]*(Z=E[R[1]])[0]+K[1]*Z[1]+K[2]*Z[2]);var K,Z;return O.concat(B)});return new Wu(E,P)}}class aa{constructor(o,f){this.min=o,this.max=f,this.center=function(v,b,E){return v[0]=.5*b[0],v[1]=.5*b[1],v[2]=.5*b[2],v}([],function(v,b,E){return v[0]=b[0]+E[0],v[1]=b[1]+E[1],v[2]=b[2]+E[2],v}([],this.min,this.max))}quadrant(o){const f=[o%2==0,o<2],v=Q(this.min),b=Q(this.max);for(let E=0;E<f.length;E++)v[E]=f[E]?this.min[E]:this.center[E],b[E]=f[E]?this.center[E]:this.max[E];return b[2]=this.max[2],new aa(v,b)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}intersects(o){const f=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let v=!0;for(let b=0;b<o.planes.length;b++){const E=o.planes[b];let P=0;for(let R=0;R<f.length;R++)l.dot(E,f[R])>=0&&P++;if(P===0)return 0;P!==f.length&&(v=!1)}if(v)return 2;for(let b=0;b<3;b++){let E=Number.MAX_VALUE,P=-Number.MAX_VALUE;for(let R=0;R<o.points.length;R++){const O=o.points[R][b]-this.min[b];E=Math.min(E,O),P=Math.max(P,O)}if(P<0||E>this.max[b]-this.min[b])return 0}return 1}}class qu{constructor(o=0,f=0,v=0,b=0){if(isNaN(o)||o<0||isNaN(f)||f<0||isNaN(v)||v<0||isNaN(b)||b<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=f,this.left=v,this.right=b}interpolate(o,f,v){return f.top!=null&&o.top!=null&&(this.top=l.interpolate.number(o.top,f.top,v)),f.bottom!=null&&o.bottom!=null&&(this.bottom=l.interpolate.number(o.bottom,f.bottom,v)),f.left!=null&&o.left!=null&&(this.left=l.interpolate.number(o.left,f.left,v)),f.right!=null&&o.right!=null&&(this.right=l.interpolate.number(o.right,f.right,v)),this}getCenter(o,f){const v=l.clamp((this.left+o-this.right)/2,0,o),b=l.clamp((this.top+f-this.bottom)/2,0,f);return new l.Point(v,b)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new qu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Zu{constructor(o,f,v,b,E){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=E===void 0||!!E,this._minZoom=o||0,this._maxZoom=f||22,this._minPitch=v??0,this._maxPitch=b??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new qu,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const o=new Zu(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return o.apply(this),o}apply(o){this.tileSize=o.tileSize,this.latRange=o.latRange,this.width=o.width,this.height=o.height,this._center=o._center,this._elevation=o._elevation,this.zoom=o.zoom,this.angle=o.angle,this._fov=o._fov,this._pitch=o._pitch,this._unmodified=o._unmodified,this._edgeInsets=o._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(o){const f=-l.wrap(o,-180,180)*Math.PI/180;this.angle!==f&&(this._unmodified=!1,this.angle=f,this._calcMatrices(),this.rotationMatrix=function(){var v=new l.ARRAY_TYPE(4);return l.ARRAY_TYPE!=Float32Array&&(v[1]=0,v[2]=0),v[0]=1,v[3]=1,v}(),function(v,b,E){var P=b[0],R=b[1],O=b[2],B=b[3],K=Math.sin(E),Z=Math.cos(E);v[0]=P*Z+O*K,v[1]=R*Z+B*K,v[2]=P*-K+O*Z,v[3]=R*-K+B*Z}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(o){const f=l.clamp(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==f&&(this._unmodified=!1,this._pitch=f,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=o/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(o){const f=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==f&&(this._unmodified=!1,this._zoom=f,this.tileZoom=Math.max(0,Math.floor(f)),this.scale=this.zoomScale(f),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(o){o!==this._elevation&&(this._elevation=o,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,f,v){this._unmodified=!1,this._edgeInsets.interpolate(o,f,v),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){const f=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,f)}getVisibleUnwrappedCoordinates(o){const f=[new l.UnwrappedTileID(0,o)];if(this._renderWorldCopies){const v=this.pointCoordinate(new l.Point(0,0)),b=this.pointCoordinate(new l.Point(this.width,0)),E=this.pointCoordinate(new l.Point(this.width,this.height)),P=this.pointCoordinate(new l.Point(0,this.height)),R=Math.floor(Math.min(v.x,b.x,E.x,P.x)),O=Math.floor(Math.max(v.x,b.x,E.x,P.x)),B=1;for(let K=R-B;K<=O+B;K++)K!==0&&f.push(new l.UnwrappedTileID(K,o))}return f}coveringTiles(o){var f,v;let b=this.coveringZoomLevel(o);const E=b;if(o.minzoom!==void 0&&b<o.minzoom)return[];o.maxzoom!==void 0&&b>o.maxzoom&&(b=o.maxzoom);const P=this.pointCoordinate(this.getCameraPoint()),R=l.MercatorCoordinate.fromLngLat(this.center),O=Math.pow(2,b),B=[O*P.x,O*P.y,0],K=[O*R.x,O*R.y,0],Z=Wu.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,b);let le=o.minzoom||0;!o.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(le=b);const Se=o.terrain?2/Math.min(this.tileSize,o.tileSize)*this.tileSize:3,ve=Ae=>({aabb:new aa([Ae*O,0,0],[(Ae+1)*O,O,0]),zoom:0,x:0,y:0,wrap:Ae,fullyVisible:!1}),xe=[],De=[],Ue=b,st=o.reparseOverscaled?E:b;if(this._renderWorldCopies)for(let Ae=1;Ae<=3;Ae++)xe.push(ve(-Ae)),xe.push(ve(Ae));for(xe.push(ve(0));xe.length>0;){const Ae=xe.pop(),nt=Ae.x,_t=Ae.y;let At=Ae.fullyVisible;if(!At){const Sn=Ae.aabb.intersects(Z);if(Sn===0)continue;At=Sn===2}const Rt=o.terrain?B:K,Bt=Ae.aabb.distanceX(Rt),Lt=Ae.aabb.distanceY(Rt),nn=Math.max(Math.abs(Bt),Math.abs(Lt));if(Ae.zoom===Ue||nn>Se+(1<<Ue-Ae.zoom)-2&&Ae.zoom>=le){const Sn=Ue-Ae.zoom,zn=B[0]-.5-(nt<<Sn),Zt=B[1]-.5-(_t<<Sn);De.push({tileID:new l.OverscaledTileID(Ae.zoom===Ue?st:Ae.zoom,Ae.wrap,Ae.zoom,nt,_t),distanceSq:te([K[0]-.5-nt,K[1]-.5-_t]),tileDistanceToCamera:Math.sqrt(zn*zn+Zt*Zt)})}else for(let Sn=0;Sn<4;Sn++){const zn=(nt<<1)+Sn%2,Zt=(_t<<1)+(Sn>>1),On=Ae.zoom+1;let on=Ae.aabb.quadrant(Sn);if(o.terrain){const di=new l.OverscaledTileID(On,Ae.wrap,On,zn,Zt),tr=o.terrain.getMinMaxElevation(di),hi=(f=tr.minElevation)!==null&&f!==void 0?f:this.elevation,Nn=(v=tr.maxElevation)!==null&&v!==void 0?v:this.elevation;on=new aa([on.min[0],on.min[1],hi],[on.max[0],on.max[1],Nn])}xe.push({aabb:on,zoom:On,x:zn,y:Zt,wrap:Ae.wrap,fullyVisible:At})}}return De.sort((Ae,nt)=>Ae.distanceSq-nt.distanceSq).map(Ae=>Ae.tileID)}resize(o,f){this.width=o,this.height=f,this.pixelsToGLUnits=[2/o,-2/f],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){const f=l.clamp(o.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.Point(l.mercatorXfromLng(o.lng)*this.worldSize,l.mercatorYfromLat(f)*this.worldSize)}unproject(o){return new l.MercatorCoordinate(o.x/this.worldSize,o.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(o){this.freezeElevation||(this.elevation=o?this.getElevation(this._center,o):0)}getElevation(o,f){const v=l.MercatorCoordinate.fromLngLat(o.wrap()),b=(1<<this.tileZoom)*l.EXTENT,E=v.x*b,P=v.y*b,R=Math.floor(E/l.EXTENT),O=Math.floor(P/l.EXTENT),B=new l.OverscaledTileID(this.tileZoom,0,this.tileZoom,R,O);return f.getElevation(B,E%l.EXTENT,P%l.EXTENT,l.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(o){const f=this.pointLocation(this.centerPoint,o),v=this.getElevation(f,o);if(!(this.elevation-v))return;const b=this.getCameraPosition(),E=l.MercatorCoordinate.fromLngLat(b.lngLat,b.altitude),P=l.MercatorCoordinate.fromLngLat(f,v),R=E.x-P.x,O=E.y-P.y,B=E.z-P.z,K=Math.sqrt(R*R+O*O+B*B),Z=this.scaleZoom(this.cameraToCenterDistance/K/this.tileSize);this._elevation=v,this._center=f,this.zoom=Z}setLocationAtPoint(o,f){const v=this.pointCoordinate(f),b=this.pointCoordinate(this.centerPoint),E=this.locationCoordinate(o),P=new l.MercatorCoordinate(E.x-(v.x-b.x),E.y-(v.y-b.y));this.center=this.coordinateLocation(P),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(o,f){return f?this.coordinatePoint(this.locationCoordinate(o),this.getElevation(o,f),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(o))}pointLocation(o,f){return this.coordinateLocation(this.pointCoordinate(o,f))}locationCoordinate(o){return l.MercatorCoordinate.fromLngLat(o)}coordinateLocation(o){return o&&o.toLngLat()}pointCoordinate(o,f){if(f){const le=f.pointCoordinate(o);if(le!=null)return le}const v=[o.x,o.y,0,1],b=[o.x,o.y,1,1];l.transformMat4(v,v,this.pixelMatrixInverse),l.transformMat4(b,b,this.pixelMatrixInverse);const E=v[3],P=b[3],R=v[1]/E,O=b[1]/P,B=v[2]/E,K=b[2]/P,Z=B===K?0:(0-B)/(K-B);return new l.MercatorCoordinate(l.interpolate.number(v[0]/E,b[0]/P,Z)/this.worldSize,l.interpolate.number(R,O,Z)/this.worldSize)}coordinatePoint(o,f=0,v=this.pixelMatrix){const b=[o.x*this.worldSize,o.y*this.worldSize,f,1];return l.transformMat4(b,b,v),new l.Point(b[0]/b[3],b[1]/b[3])}getBounds(){const o=Math.max(0,this.height/2-this.getHorizon());return new Ke().extend(this.pointLocation(new l.Point(0,o))).extend(this.pointLocation(new l.Point(this.width,o))).extend(this.pointLocation(new l.Point(this.width,this.height))).extend(this.pointLocation(new l.Point(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Ke([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(o){o?(this.lngRange=[o.getWest(),o.getEast()],this.latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(o,f=!1){const v=o.key,b=f?this._alignedPosMatrixCache:this._posMatrixCache;if(b[v])return b[v];const E=o.canonical,P=this.worldSize/this.zoomScale(E.z),R=E.x+Math.pow(2,E.z)*o.wrap,O=l.identity(new Float64Array(16));return l.translate(O,O,[R*P,E.y*P,0]),l.scale(O,O,[P/l.EXTENT,P/l.EXTENT,1]),l.multiply(O,f?this.alignedProjMatrix:this.projMatrix,O),b[v]=new Float32Array(O),b[v]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let o,f,v,b,E=-90,P=90,R=-180,O=180;const B=this.size,K=this._unmodified;if(this.latRange){const Se=this.latRange;E=l.mercatorYfromLat(Se[1])*this.worldSize,P=l.mercatorYfromLat(Se[0])*this.worldSize,o=P-E<B.y?B.y/(P-E):0}if(this.lngRange){const Se=this.lngRange;R=l.wrap(l.mercatorXfromLng(Se[0])*this.worldSize,0,this.worldSize),O=l.wrap(l.mercatorXfromLng(Se[1])*this.worldSize,0,this.worldSize),O<R&&(O+=this.worldSize),f=O-R<B.x?B.x/(O-R):0}const Z=this.point,le=Math.max(f||0,o||0);if(le)return this.center=this.unproject(new l.Point(f?(O+R)/2:Z.x,o?(P+E)/2:Z.y)),this.zoom+=this.scaleZoom(le),this._unmodified=K,void(this._constraining=!1);if(this.latRange){const Se=Z.y,ve=B.y/2;Se-ve<E&&(b=E+ve),Se+ve>P&&(b=P-ve)}if(this.lngRange){const Se=(R+O)/2,ve=l.wrap(Z.x,Se-this.worldSize/2,Se+this.worldSize/2),xe=B.x/2;ve-xe<R&&(v=R+xe),ve+xe>O&&(v=O-xe)}v===void 0&&b===void 0||(this.center=this.unproject(new l.Point(v!==void 0?v:Z.x,b!==void 0?b:Z.y)).wrap()),this._unmodified=K,this._constraining=!1}_calcMatrices(){if(!this.height)return;const o=this.centerOffset,f=this.point.x,v=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let b=l.identity(new Float64Array(16));l.scale(b,b,[this.width/2,-this.height/2,1]),l.translate(b,b,[1,-1,0]),this.labelPlaneMatrix=b,b=l.identity(new Float64Array(16)),l.scale(b,b,[1,-1,1]),l.translate(b,b,[-1,-1,0]),l.scale(b,b,[2/this.width,2/this.height,1]),this.glCoordMatrix=b,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const E=this._elevation<0?this.cameraToCenterDistance:this.cameraToSeaLevelDistance,P=Math.PI/2+this._pitch,R=this._fov*(.5+o.y/this.height),O=Math.sin(R)*E/Math.sin(l.clamp(Math.PI-P-R,.01,Math.PI-.01)),B=this.getHorizon(),K=2*Math.atan(B/this.cameraToCenterDistance)*(.5+o.y/(2*B)),Z=Math.sin(K)*E/Math.sin(l.clamp(Math.PI-P-K,.01,Math.PI-.01)),le=Math.min(O,Z),Se=1.01*(Math.cos(Math.PI/2-this._pitch)*le+E),ve=this.height/50;b=new Float64Array(16),l.perspective(b,this._fov,this.width/this.height,ve,Se),b[8]=2*-o.x/this.width,b[9]=2*o.y/this.height,l.scale(b,b,[1,-1,1]),l.translate(b,b,[0,0,-this.cameraToCenterDistance]),l.rotateX(b,b,this._pitch),l.rotateZ(b,b,this.angle),l.translate(b,b,[-f,-v,0]),this.mercatorMatrix=l.scale([],b,[this.worldSize,this.worldSize,this.worldSize]),l.scale(b,b,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,b),l.translate(b,b,[0,0,-this.elevation]),this.projMatrix=b,this.invProjMatrix=l.invert([],b),this.pixelMatrix3D=l.multiply(new Float64Array(16),this.labelPlaneMatrix,b);const xe=this.width%2/2,De=this.height%2/2,Ue=Math.cos(this.angle),st=Math.sin(this.angle),Ae=f-Math.round(f)+Ue*xe+st*De,nt=v-Math.round(v)+Ue*De+st*xe,_t=new Float64Array(b);if(l.translate(_t,_t,[Ae>.5?Ae-1:Ae,nt>.5?nt-1:nt,0]),this.alignedProjMatrix=_t,b=l.invert(new Float64Array(16),this.pixelMatrix),!b)throw new Error("failed to invert matrix");this.pixelMatrixInverse=b,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const o=this.pointCoordinate(new l.Point(0,0)),f=[o.x*this.worldSize,o.y*this.worldSize,0,1];return l.transformMat4(f,f,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,o))}getCameraQueryGeometry(o){const f=this.getCameraPoint();if(o.length===1)return[o[0],f];{let v=f.x,b=f.y,E=f.x,P=f.y;for(const R of o)v=Math.min(v,R.x),b=Math.min(b,R.y),E=Math.max(E,R.x),P=Math.max(P,R.y);return[new l.Point(v,b),new l.Point(E,b),new l.Point(E,P),new l.Point(v,P),new l.Point(v,b)]}}}class jm{constructor(o){this._hashName=o&&encodeURIComponent(o),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(f,v){let b=!1,E=null;const P=()=>{E=null,b&&(f(),E=setTimeout(P,300),b=!1)};return()=>(b=!0,E||P(),E)}(this._updateHashUnthrottled.bind(this))}addTo(o){return this._map=o,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(o){const f=this._map.getCenter(),v=Math.round(100*this._map.getZoom())/100,b=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),E=Math.pow(10,b),P=Math.round(f.lng*E)/E,R=Math.round(f.lat*E)/E,O=this._map.getBearing(),B=this._map.getPitch();let K="";if(K+=o?`/${P}/${R}/${v}`:`${v}/${R}/${P}`,(O||B)&&(K+="/"+Math.round(10*O)/10),B&&(K+=`/${Math.round(B)}`),this._hashName){const Z=this._hashName;let le=!1;const Se=window.location.hash.slice(1).split("&").map(ve=>{const xe=ve.split("=")[0];return xe===Z?(le=!0,`${xe}=${K}`):ve}).filter(ve=>ve);return le||Se.push(`${Z}=${K}`),`#${Se.join("&")}`}return`#${K}`}_getCurrentHash(){const o=window.location.hash.replace("#","");if(this._hashName){let f;return o.split("&").map(v=>v.split("=")).forEach(v=>{v[0]===this._hashName&&(f=v)}),(f&&f[1]||"").split("/")}return o.split("/")}_onHashChange(){const o=this._getCurrentHash();if(o.length>=3&&!o.some(f=>isNaN(f))){const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:f,pitch:+(o[4]||0)}),!0}return!1}_updateHashUnthrottled(){const o=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,o)}catch{}}}const Lc={linearity:.3,easing:l.bezier(0,0,.3,1)},Vm=l.extend({deceleration:2500,maxSpeed:1400},Lc),Hm=l.extend({deceleration:20,maxSpeed:1400},Lc),Oc=l.extend({deceleration:1e3,maxSpeed:360},Lc),Gm=l.extend({deceleration:1e3,maxSpeed:90},Lc);class oa{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.exported.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,f=l.exported.now();for(;o.length>0&&f-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const f={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:E}of this._inertiaBuffer)f.zoom+=E.zoomDelta||0,f.bearing+=E.bearingDelta||0,f.pitch+=E.pitchDelta||0,E.panDelta&&f.pan._add(E.panDelta),E.around&&(f.around=E.around),E.pinchAround&&(f.pinchAround=E.pinchAround);const v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(f.pan.mag()){const E=Rc(f.pan.mag(),v,l.extend({},Vm,o||{}));b.offset=f.pan.mult(E.amount/f.pan.mag()),b.center=this._map.transform.center,As(b,E)}if(f.zoom){const E=Rc(f.zoom,v,Hm);b.zoom=this._map.transform.zoom+E.amount,As(b,E)}if(f.bearing){const E=Rc(f.bearing,v,Oc);b.bearing=this._map.transform.bearing+l.clamp(E.amount,-179,179),As(b,E)}if(f.pitch){const E=Rc(f.pitch,v,Gm);b.pitch=this._map.transform.pitch+E.amount,As(b,E)}if(b.zoom||b.bearing){const E=f.pinchAround===void 0?f.around:f.pinchAround;b.around=E?this._map.unproject(E):this._map.getCenter()}return this.clear(),l.extend(b,{noMoveStart:!0})}}function As(_,o){(!_.duration||_.duration<o.duration)&&(_.duration=o.duration,_.easing=o.easing)}function Rc(_,o,f){const{maxSpeed:v,linearity:b,deceleration:E}=f,P=l.clamp(_*b/(o/1e3),-v,v),R=Math.abs(P)/(E*b);return{easing:f.easing,duration:1e3*R,amount:P*(R/2)}}class sr extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,f,v,b={}){const E=g.mousePos(f.getCanvasContainer(),v),P=f.unproject(E);super(o,l.extend({point:E,lngLat:P,originalEvent:v},b)),this._defaultPrevented=!1,this.target=f}}class mo extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,f,v){const b=o==="touchend"?v.changedTouches:v.touches,E=g.touchPos(f.getCanvasContainer(),b),P=E.map(O=>f.unproject(O)),R=E.reduce((O,B,K,Z)=>O.add(B.div(Z.length)),new l.Point(0,0));super(o,{points:E,point:R,lngLats:P,lngLat:f.unproject(R),originalEvent:v}),this._defaultPrevented=!1}}class gy extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,f,v){super(o,{originalEvent:v}),this._defaultPrevented=!1}}class vy{constructor(o,f){this._map=o,this._clickTolerance=f.clickTolerance}reset(){delete this._mousedownPos}wheel(o){return this._firePreventable(new gy(o.type,this._map,o))}mousedown(o,f){return this._mousedownPos=f,this._firePreventable(new sr(o.type,this._map,o))}mouseup(o){this._map.fire(new sr(o.type,this._map,o))}click(o,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||this._map.fire(new sr(o.type,this._map,o))}dblclick(o){return this._firePreventable(new sr(o.type,this._map,o))}mouseover(o){this._map.fire(new sr(o.type,this._map,o))}mouseout(o){this._map.fire(new sr(o.type,this._map,o))}touchstart(o){return this._firePreventable(new mo(o.type,this._map,o))}touchmove(o){this._map.fire(new mo(o.type,this._map,o))}touchend(o){this._map.fire(new mo(o.type,this._map,o))}touchcancel(o){this._map.fire(new mo(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class _y{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(o){this._map.fire(new sr(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new sr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._ignoreContextMenu||this._map.fire(new sr(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Il{constructor(o){this._map=o}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(o){return this.transform.pointLocation(l.Point.convert(o),this._map.terrain)}}class Fc{constructor(o,f){this._map=o,this._tr=new Il(o),this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,f){this.isEnabled()&&o.shiftKey&&o.button===0&&(g.disableDrag(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(o,f){if(!this._active)return;const v=f;if(this._lastPos.equals(v)||!this._box&&v.dist(this._startPos)<this._clickTolerance)return;const b=this._startPos;this._lastPos=v,this._box||(this._box=g.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",o));const E=Math.min(b.x,v.x),P=Math.max(b.x,v.x),R=Math.min(b.y,v.y),O=Math.max(b.y,v.y);g.setTransform(this._box,`translate(${E}px,${R}px)`),this._box.style.width=P-E+"px",this._box.style.height=O-R+"px"}mouseupWindow(o,f){if(!this._active||o.button!==0)return;const v=this._startPos,b=f;if(this.reset(),g.suppressClick(),v.x!==b.x||v.y!==b.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:o})),{cameraAnimation:E=>E.fitScreenCoordinates(v,b,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",o)}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(g.remove(this._box),this._box=null),g.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(o,f){return this._map.fire(new l.Event(o,{originalEvent:f}))}}function la(_,o){if(_.length!==o.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${o.length}`);const f={};for(let v=0;v<_.length;v++)f[_[v].identifier]=o[v];return f}class dn{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(o,f,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=o.timeStamp),v.length===this.numTouches&&(this.centroid=function(b){const E=new l.Point(0,0);for(const P of b)E._add(P);return E.div(b.length)}(f),this.touches=la(v,f)))}touchmove(o,f,v){if(this.aborted||!this.centroid)return;const b=la(v,f);for(const E in this.touches){const P=b[E];(!P||P.dist(this.touches[E])>30)&&(this.aborted=!0)}}touchend(o,f,v){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),v.length===0){const b=!this.aborted&&this.centroid;if(this.reset(),b)return b}}}class Ku{constructor(o){this.singleTap=new dn(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(o,f,v){this.singleTap.touchstart(o,f,v)}touchmove(o,f,v){this.singleTap.touchmove(o,f,v)}touchend(o,f,v){const b=this.singleTap.touchend(o,f,v);if(b){const E=o.timeStamp-this.lastTime<500,P=!this.lastTap||this.lastTap.dist(b)<30;if(E&&P||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=b,this.count===this.numTaps)return this.reset(),b}}}class $c{constructor(o){this._tr=new Il(o),this._zoomIn=new Ku({numTouches:1,numTaps:2}),this._zoomOut=new Ku({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,f,v){this._zoomIn.touchstart(o,f,v),this._zoomOut.touchstart(o,f,v)}touchmove(o,f,v){this._zoomIn.touchmove(o,f,v),this._zoomOut.touchmove(o,f,v)}touchend(o,f,v){const b=this._zoomIn.touchend(o,f,v),E=this._zoomOut.touchend(o,f,v),P=this._tr;return b?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:R=>R.easeTo({duration:300,zoom:P.zoom+1,around:P.unproject(b)},{originalEvent:o})}):E?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:R=>R.easeTo({duration:300,zoom:P.zoom-1,around:P.unproject(E)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Da{constructor(o){this._enabled=!!o.enable,this._moveStateManager=o.moveStateManager,this._clickTolerance=o.clickTolerance||1,this._moveFunction=o.move,this._activateOnStart=!!o.activateOnStart,o.assignEvents(this),this.reset()}reset(o){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(o)}_move(...o){const f=this._moveFunction(...o);if(f.bearingDelta||f.pitchDelta||f.around||f.panDelta)return this._active=!0,f}dragStart(o,f){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(o)&&(this._moveStateManager.startMove(o),this._lastPoint=f.length?f[0]:f,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(o,f){if(!this.isEnabled())return;const v=this._lastPoint;if(!v)return;if(o.preventDefault(),!this._moveStateManager.isValidMoveEvent(o))return void this.reset(o);const b=f.length?f[0]:f;return!this._moved&&b.dist(v)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=b,this._move(v,b))}dragEnd(o){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(o)&&(this._moved&&g.suppressClick(),this.reset(o))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Wm={0:1,2:2};class Jt{constructor(o){this._correctEvent=o.checkCorrectEvent}startMove(o){const f=g.mouseButton(o);this._eventButton=f}endMove(o){delete this._eventButton}isValidStartEvent(o){return this._correctEvent(o)}isValidMoveEvent(o){return!function(f,v){const b=Wm[v];return f.buttons===void 0||(f.buttons&b)!==b}(o,this._eventButton)}isValidEndEvent(o){return g.mouseButton(o)===this._eventButton}}class Xu{constructor(){this._firstTouch=void 0}_isOneFingerTouch(o){return o.targetTouches.length===1}_isSameTouchEvent(o){return o.targetTouches[0].identifier===this._firstTouch}startMove(o){this._firstTouch=o.targetTouches[0].identifier}endMove(o){delete this._firstTouch}isValidStartEvent(o){return this._isOneFingerTouch(o)}isValidMoveEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}isValidEndEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}}const Qh=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=function(o){o.preventDefault()}},qm=({enable:_,clickTolerance:o,bearingDegreesPerPixelMoved:f=.8})=>{const v=new Jt({checkCorrectEvent:b=>g.mouseButton(b)===0&&b.ctrlKey||g.mouseButton(b)===2});return new Da({clickTolerance:o,move:(b,E)=>({bearingDelta:(E.x-b.x)*f}),moveStateManager:v,enable:_,assignEvents:Qh})},Yu=({enable:_,clickTolerance:o,pitchDegreesPerPixelMoved:f=-.5})=>{const v=new Jt({checkCorrectEvent:b=>g.mouseButton(b)===0&&b.ctrlKey||g.mouseButton(b)===2});return new Da({clickTolerance:o,move:(b,E)=>({pitchDelta:(E.y-b.y)*f}),moveStateManager:v,enable:_,assignEvents:Qh})};class Zm{constructor(o,f){this._minTouches=o.cooperativeGestures?2:1,this._clickTolerance=o.clickTolerance||1,this._map=f,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.Point(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(o,f,v){return this._calculateTransform(o,f,v)}touchmove(o,f,v){if(this._map._cooperativeGestures&&(this._minTouches===2&&v.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(o,!1,v.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(v.length<this._minTouches))return o.preventDefault(),this._calculateTransform(o,f,v)}touchend(o,f,v){this._calculateTransform(o,f,v),this._active&&v.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,f,v){v.length>0&&(this._active=!0);const b=la(v,f),E=new l.Point(0,0),P=new l.Point(0,0);let R=0;for(const B in b){const K=b[B],Z=this._touches[B];Z&&(E._add(K),P._add(K.sub(Z)),R++,b[B]=K)}if(this._touches=b,R<this._minTouches||!P.mag())return;const O=P.div(R);return this._sum._add(O),this._sum.mag()<this._clickTolerance?void 0:{around:E.div(R),panDelta:O}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ju{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(o){}_move(o,f,v){return{}}touchstart(o,f,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([f[0],f[1]]))}touchmove(o,f,v){if(!this._firstTwoTouches)return;o.preventDefault();const[b,E]=this._firstTwoTouches,P=Qu(v,f,b),R=Qu(v,f,E);if(!P||!R)return;const O=this._aroundCenter?null:P.add(R).div(2);return this._move([P,R],O,o)}touchend(o,f,v){if(!this._firstTwoTouches)return;const[b,E]=this._firstTwoTouches,P=Qu(v,f,b),R=Qu(v,f,E);P&&R||(this._active&&g.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Qu(_,o,f){for(let v=0;v<_.length;v++)if(_[v].identifier===f)return o[v]}function Km(_,o){return Math.log(_/o)/Math.LN2}class ef extends Ju{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,f){const v=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(Km(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Km(this._distance,v),pinchAround:f}}}function ed(_,o){return 180*_.angleWith(o)/Math.PI}class tf extends Ju{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,f){const v=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ed(this._vector,v),pinchAround:f}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const f=25/(Math.PI*this._minDiameter)*360,v=ed(o,this._startVector);return Math.abs(v)<f}}function zc(_){return Math.abs(_.y)>Math.abs(_.x)}class Yr extends Ju{constructor(o){super(),this._map=o}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(o,f,v){super.touchstart(o,f,v),this._currentTouchCount=v.length}_start(o){this._lastPoints=o,zc(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,f,v){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const b=o[0].sub(this._lastPoints[0]),E=o[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(b,E,v.timeStamp),this._valid?(this._lastPoints=o,this._active=!0,{pitchDelta:(b.y+E.y)/2*-.5}):void 0}gestureBeginsVertically(o,f,v){if(this._valid!==void 0)return this._valid;const b=o.mag()>=2,E=f.mag()>=2;if(!b&&!E)return;if(!b||!E)return this._firstMove===void 0&&(this._firstMove=v),v-this._firstMove<100&&void 0;const P=o.y>0==f.y>0;return zc(o)&&zc(f)&&P}}const go={panStep:100,bearingStep:15,pitchStep:10};class Xm{constructor(o){this._tr=new Il(o);const f=go;this._panStep=f.panStep,this._bearingStep=f.bearingStep,this._pitchStep=f.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let f=0,v=0,b=0,E=0,P=0;switch(o.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:o.shiftKey?v=-1:(o.preventDefault(),E=-1);break;case 39:o.shiftKey?v=1:(o.preventDefault(),E=1);break;case 38:o.shiftKey?b=1:(o.preventDefault(),P=-1);break;case 40:o.shiftKey?b=-1:(o.preventDefault(),P=1);break;default:return}return this._rotationDisabled&&(v=0,b=0),{cameraAnimation:R=>{const O=this._tr;R.easeTo({duration:300,easeId:"keyboardHandler",easing:nf,zoom:f?Math.round(O.zoom)+f*(o.shiftKey?2:1):O.zoom,bearing:O.bearing+v*this._bearingStep,pitch:O.pitch+b*this._pitchStep,offset:[-E*this._panStep,-P*this._panStep],center:O.center},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function nf(_){return _*(2-_)}const td=4.000244140625;class rf{constructor(o,f){this._map=o,this._tr=new Il(o),this._el=o.getCanvasContainer(),this._handler=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onTimeout"],this)}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=o&&o.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(o){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!o[this._map._metaKey])return;o.preventDefault()}let f=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const v=l.exported.now(),b=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,f!==0&&f%td==0?this._type="wheel":f!==0&&Math.abs(f)<4?this._type="trackpad":b>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(b*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),o.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=o,this._delta-=f,this._active||this._start(o)),o.preventDefault()}_onTimeout(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=g.mousePos(this._el,o),v=this._tr;this._around=l.LngLat.convert(this._aroundCenter?v.center:v.unproject(f)),this._aroundPoint=v.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._tr.transform;if(this._delta!==0){const R=this._type==="wheel"&&Math.abs(this._delta)>td?this._wheelZoomRate:this._defaultZoomRate;let O=2/(1+Math.exp(-Math.abs(this._delta*R)));this._delta<0&&O!==0&&(O=1/O);const B=typeof this._targetZoom=="number"?o.zoomScale(this._targetZoom):o.scale;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(B*O))),this._type==="wheel"&&(this._startZoom=o.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const f=typeof this._targetZoom=="number"?this._targetZoom:o.zoom,v=this._startZoom,b=this._easing;let E,P=!1;if(this._type==="wheel"&&v&&b){const R=Math.min((l.exported.now()-this._lastWheelEventTime)/200,1),O=b(R);E=l.interpolate.number(v,f,O),R<1?this._frameId||(this._frameId=!0):P=!0}else E=f,P=!0;return this._active=!0,P&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!P,zoomDelta:E-o.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let f=l.ease;if(this._prevEase){const v=this._prevEase,b=(l.exported.now()-v.start)/v.duration,E=v.easing(b+.01)-v.easing(b),P=.27/Math.sqrt(E*E+1e-4)*.01,R=Math.sqrt(.0729-P*P);f=l.bezier(P,R,.25,1)}return this._prevEase={start:l.exported.now(),duration:o,easing:f},f}reset(){this._active=!1}}class Ym{constructor(o,f){this._clickZoom=o,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ms{constructor(o){this._tr=new Il(o),this.reset()}reset(){this._active=!1}dblclick(o,f){return o.preventDefault(),{cameraAnimation:v=>{v.easeTo({duration:300,zoom:this._tr.zoom+(o.shiftKey?-1:1),around:this._tr.unproject(f)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fi{constructor(){this._tap=new Ku({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(o,f,v){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?v.length>0&&(this._swipePoint=f[0],this._swipeTouch=v[0].identifier):this._tap.touchstart(o,f,v))}touchmove(o,f,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;const b=f[0],E=b.y-this._swipePoint.y;return this._swipePoint=b,o.preventDefault(),this._active=!0,{zoomDelta:E/128}}}else this._tap.touchmove(o,f,v)}touchend(o,f,v){this._tapTime?this._swipePoint&&v.length===0&&this.reset():this._tap.touchend(o,f,v)&&(this._tapTime=o.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class nd{constructor(o,f,v){this._el=o,this._mousePan=f,this._touchPan=v}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class sf{constructor(o,f,v){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=f,this._mousePitch=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Jm{constructor(o,f,v,b){this._el=o,this._touchZoom=f,this._touchRotate=v,this._tapDragZoom=b,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Bc=_=>_.zoom||_.drag||_.pitch||_.rotate;class Qm extends l.Event{}function af(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class ca{constructor(o,f){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new oa(o),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(f),l.bindAll(["handleEvent","handleWindowEvent"],this);const v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[window,"blur",void 0]];for(const[b,E,P]of this._listeners)g.addEventListener(b,E,b===document?this.handleWindowEvent:this.handleEvent,P)}destroy(){for(const[o,f,v]of this._listeners)g.removeEventListener(o,f,o===document?this.handleWindowEvent:this.handleEvent,v)}_addDefaultHandlers(o){const f=this._map,v=f.getCanvasContainer();this._add("mapEvent",new vy(f,o));const b=f.boxZoom=new Fc(f,o);this._add("boxZoom",b);const E=new $c(f),P=new Ms(f);f.doubleClickZoom=new Ym(P,E),this._add("tapZoom",E),this._add("clickZoom",P);const R=new Fi;this._add("tapDragZoom",R);const O=f.touchPitch=new Yr(f);this._add("touchPitch",O);const B=qm(o),K=Yu(o);f.dragRotate=new sf(o,B,K),this._add("mouseRotate",B,["mousePitch"]),this._add("mousePitch",K,["mouseRotate"]);const Z=(({enable:Ue,clickTolerance:st})=>{const Ae=new Jt({checkCorrectEvent:nt=>g.mouseButton(nt)===0&&!nt.ctrlKey});return new Da({clickTolerance:st,move:(nt,_t)=>({around:_t,panDelta:_t.sub(nt)}),activateOnStart:!0,moveStateManager:Ae,enable:Ue,assignEvents:Qh})})(o),le=new Zm(o,f);f.dragPan=new nd(v,Z,le),this._add("mousePan",Z),this._add("touchPan",le,["touchZoom","touchRotate"]);const Se=new tf,ve=new ef;f.touchZoomRotate=new Jm(v,ve,Se,R),this._add("touchRotate",Se,["touchPan","touchZoom"]),this._add("touchZoom",ve,["touchPan","touchRotate"]);const xe=f.scrollZoom=new rf(f,this);this._add("scrollZoom",xe,["mousePan"]);const De=f.keyboard=new Xm(f);this._add("keyboard",De),this._add("blockableMapEvent",new _y(f));for(const Ue of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])o.interactive&&o[Ue]&&f[Ue].enable(o[Ue])}_add(o,f,v){this._handlers.push({handlerName:o,handler:f,allowed:v}),this._handlersById[o]=f}stop(o){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Bc(this._eventsInProgress)||this.isZooming()}_blockedByActive(o,f,v){for(const b in o)if(b!==v&&(!f||f.indexOf(b)<0))return!0;return!1}handleWindowEvent(o){this.handleEvent(o,`${o.type}Window`)}_getMapTouches(o){const f=[];for(const v of o)this._el.contains(v.target)&&f.push(v);return f}handleEvent(o,f){if(o.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const v=o.type==="renderFrame"?void 0:o,b={needsRenderFrame:!1},E={},P={},R=o.touches,O=R?this._getMapTouches(R):void 0,B=O?g.touchPos(this._el,O):g.mousePos(this._el,o);for(const{handlerName:le,handler:Se,allowed:ve}of this._handlers){if(!Se.isEnabled())continue;let xe;this._blockedByActive(P,ve,le)?Se.reset():Se[f||o.type]&&(xe=Se[f||o.type](o,B,O),this.mergeHandlerResult(b,E,xe,le,v),xe&&xe.needsRenderFrame&&this._triggerRenderFrame()),(xe||Se.isActive())&&(P[le]=Se)}const K={};for(const le in this._previousActiveHandlers)P[le]||(K[le]=v);this._previousActiveHandlers=P,(Object.keys(K).length||af(b))&&(this._changes.push([b,E,K]),this._triggerRenderFrame()),(Object.keys(P).length||af(b))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Z}=b;Z&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Z(this._map))}mergeHandlerResult(o,f,v,b,E){if(!v)return;l.extend(o,v);const P={handlerName:b,originalEvent:v.originalEvent||E};v.zoomDelta!==void 0&&(f.zoom=P),v.panDelta!==void 0&&(f.drag=P),v.pitchDelta!==void 0&&(f.pitch=P),v.bearingDelta!==void 0&&(f.rotate=P)}_applyChanges(){const o={},f={},v={};for(const[b,E,P]of this._changes)b.panDelta&&(o.panDelta=(o.panDelta||new l.Point(0,0))._add(b.panDelta)),b.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+b.pitchDelta),b.around!==void 0&&(o.around=b.around),b.pinchAround!==void 0&&(o.pinchAround=b.pinchAround),b.noInertia&&(o.noInertia=b.noInertia),l.extend(f,E),l.extend(v,P);this._updateMapTransform(o,f,v),this._changes=[]}_updateMapTransform(o,f,v){const b=this._map,E=b._getTransformForUpdate(),P=b.terrain;if(!(af(o)||P&&this._terrainMovement))return this._fireEvents(f,v,!0);let{panDelta:R,zoomDelta:O,bearingDelta:B,pitchDelta:K,around:Z,pinchAround:le}=o;le!==void 0&&(Z=le),b._stop(!0),Z=Z||b.transform.centerPoint;const Se=E.pointLocation(R?Z.sub(R):Z);B&&(E.bearing+=B),K&&(E.pitch+=K),O&&(E.zoom+=O),P?this._terrainMovement||!f.drag&&!f.zoom?f.drag&&this._terrainMovement?E.center=E.pointLocation(E.centerPoint.sub(R)):E.setLocationAtPoint(Se,Z):(this._terrainMovement=!0,E.freezeElevation=!0,E.setLocationAtPoint(Se,Z),this._map.once("moveend",()=>{E.freezeElevation=!1,this._terrainMovement=!1,E.recalculateZoom(b.terrain)})):E.setLocationAtPoint(Se,Z),b._applyUpdatedTransform(E),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(f,v,!0)}_fireEvents(o,f,v){const b=Bc(this._eventsInProgress),E=Bc(o),P={};for(const K in o){const{originalEvent:Z}=o[K];this._eventsInProgress[K]||(P[`${K}start`]=Z),this._eventsInProgress[K]=o[K]}!b&&E&&this._fireEvent("movestart",E.originalEvent);for(const K in P)this._fireEvent(K,P[K]);E&&this._fireEvent("move",E.originalEvent);for(const K in o){const{originalEvent:Z}=o[K];this._fireEvent(K,Z)}const R={};let O;for(const K in this._eventsInProgress){const{handlerName:Z,originalEvent:le}=this._eventsInProgress[K];this._handlersById[Z].isActive()||(delete this._eventsInProgress[K],O=f[Z]||le,R[`${K}end`]=O)}for(const K in R)this._fireEvent(K,R[K]);const B=Bc(this._eventsInProgress);if(v&&(b||E)&&!B){this._updatingCamera=!0;const K=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Z=le=>le!==0&&-this._bearingSnap<le&&le<this._bearingSnap;K?(Z(K.bearing||this._map.getBearing())&&(K.bearing=0),K.freezeElevation=!0,this._map.easeTo(K,{originalEvent:O})):(this._map.fire(new l.Event("moveend",{originalEvent:O})),Z(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(o,f){this._map.fire(new l.Event(o,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{delete this._frameId,this.handleEvent(new Qm("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const id={extend:(_,...o)=>l.extend(_,...o),run(_){_()},logToElement(_,o=!1,f="log"){const v=window.document.getElementById(f);v&&(o&&(v.innerHTML=""),v.innerHTML+=`<br>${_}`)}};class bn extends l.Evented{constructor(o,f){super(),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=f.bearingSnap,l.bindAll(["_renderFrameCallback"],this),this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(o,f){return this.jumpTo({center:o},f)}panBy(o,f,v){return o=l.Point.convert(o).mult(-1),this.panTo(this.transform.center,l.extend({offset:o},f),v)}panTo(o,f,v){return this.easeTo(l.extend({center:o},f),v)}getZoom(){return this.transform.zoom}setZoom(o,f){return this.jumpTo({zoom:o},f),this}zoomTo(o,f,v){return this.easeTo(l.extend({zoom:o},f),v)}zoomIn(o,f){return this.zoomTo(this.getZoom()+1,o,f),this}zoomOut(o,f){return this.zoomTo(this.getZoom()-1,o,f),this}getBearing(){return this.transform.bearing}setBearing(o,f){return this.jumpTo({bearing:o},f),this}getPadding(){return this.transform.padding}setPadding(o,f){return this.jumpTo({padding:o},f),this}rotateTo(o,f,v){return this.easeTo(l.extend({bearing:o},f),v)}resetNorth(o,f){return this.rotateTo(0,l.extend({duration:1e3},o),f),this}resetNorthPitch(o,f){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},o),f),this}snapToNorth(o,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,f):this}getPitch(){return this.transform.pitch}setPitch(o,f){return this.jumpTo({pitch:o},f),this}cameraForBounds(o,f){o=Ke.convert(o);const v=f&&f.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),v,f)}_cameraForBoxAndBearing(o,f,v,b){const E={top:0,bottom:0,right:0,left:0};if(typeof(b=l.extend({padding:E,offset:[0,0],maxZoom:this.transform.maxZoom},b)).padding=="number"){const _t=b.padding;b.padding={top:_t,bottom:_t,right:_t,left:_t}}b.padding=l.extend(E,b.padding);const P=this.transform,R=P.padding,O=P.project(l.LngLat.convert(o)),B=P.project(l.LngLat.convert(f)),K=O.rotate(-v*Math.PI/180),Z=B.rotate(-v*Math.PI/180),le=new l.Point(Math.max(K.x,Z.x),Math.max(K.y,Z.y)),Se=new l.Point(Math.min(K.x,Z.x),Math.min(K.y,Z.y)),ve=le.sub(Se),xe=(P.width-(R.left+R.right+b.padding.left+b.padding.right))/ve.x,De=(P.height-(R.top+R.bottom+b.padding.top+b.padding.bottom))/ve.y;if(De<0||xe<0)return void l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ue=Math.min(P.scaleZoom(P.scale*Math.min(xe,De)),b.maxZoom),st=l.Point.convert(b.offset),Ae=new l.Point((b.padding.left-b.padding.right)/2,(b.padding.top-b.padding.bottom)/2).rotate(v*Math.PI/180),nt=st.add(Ae).mult(P.scale/P.zoomScale(Ue));return{center:P.unproject(O.add(B).div(2).sub(nt)),zoom:Ue,bearing:v}}fitBounds(o,f,v){return this._fitInternal(this.cameraForBounds(o,f),f,v)}fitScreenCoordinates(o,f,v,b,E){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.Point.convert(o)),this.transform.pointLocation(l.Point.convert(f)),v,b),b,E)}_fitInternal(o,f,v){return o?(delete(f=l.extend(o,f)).padding,f.linear?this.easeTo(f,v):this.flyTo(f,v)):this}jumpTo(o,f){this.stop();const v=this._getTransformForUpdate();let b=!1,E=!1,P=!1;return"zoom"in o&&v.zoom!==+o.zoom&&(b=!0,v.zoom=+o.zoom),o.center!==void 0&&(v.center=l.LngLat.convert(o.center)),"bearing"in o&&v.bearing!==+o.bearing&&(E=!0,v.bearing=+o.bearing),"pitch"in o&&v.pitch!==+o.pitch&&(P=!0,v.pitch=+o.pitch),o.padding==null||v.isPaddingEqual(o.padding)||(v.padding=o.padding),this._applyUpdatedTransform(v),this.fire(new l.Event("movestart",f)).fire(new l.Event("move",f)),b&&this.fire(new l.Event("zoomstart",f)).fire(new l.Event("zoom",f)).fire(new l.Event("zoomend",f)),E&&this.fire(new l.Event("rotatestart",f)).fire(new l.Event("rotate",f)).fire(new l.Event("rotateend",f)),P&&this.fire(new l.Event("pitchstart",f)).fire(new l.Event("pitch",f)).fire(new l.Event("pitchend",f)),this.fire(new l.Event("moveend",f))}calculateCameraOptionsFromTo(o,f,v,b=0){const E=l.MercatorCoordinate.fromLngLat(o,f),P=l.MercatorCoordinate.fromLngLat(v,b),R=P.x-E.x,O=P.y-E.y,B=P.z-E.z,K=Math.hypot(R,O,B);if(K===0)throw new Error("Can't calculate camera options with same From and To");const Z=Math.hypot(R,O),le=this.transform.scaleZoom(this.transform.cameraToCenterDistance/K/this.transform.tileSize),Se=180*Math.atan2(R,-O)/Math.PI;let ve=180*Math.acos(Z/K)/Math.PI;return ve=B<0?90-ve:90+ve,{center:P.toLngLat(),zoom:le,pitch:ve,bearing:Se}}easeTo(o,f){this._stop(!1,o.easeId),((o=l.extend({offset:[0,0],duration:500,easing:l.ease},o)).animate===!1||!o.essential&&l.exported.prefersReducedMotion)&&(o.duration=0);const v=this._getTransformForUpdate(),b=this.getZoom(),E=this.getBearing(),P=this.getPitch(),R=this.getPadding(),O="zoom"in o?+o.zoom:b,B="bearing"in o?this._normalizeBearing(o.bearing,E):E,K="pitch"in o?+o.pitch:P,Z="padding"in o?o.padding:v.padding,le=l.Point.convert(o.offset);let Se=v.centerPoint.add(le);const ve=v.pointLocation(Se),xe=l.LngLat.convert(o.center||ve);this._normalizeCenter(xe);const De=v.project(ve),Ue=v.project(xe).sub(De),st=v.zoomScale(O-b);let Ae,nt;o.around&&(Ae=l.LngLat.convert(o.around),nt=v.locationPoint(Ae));const _t={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||O!==b,this._rotating=this._rotating||E!==B,this._pitching=this._pitching||K!==P,this._padding=!v.isPaddingEqual(Z),this._easeId=o.easeId,this._prepareEase(f,o.noMoveStart,_t),this.terrain&&this._prepareElevation(xe),this._ease(At=>{if(this._zooming&&(v.zoom=l.interpolate.number(b,O,At)),this._rotating&&(v.bearing=l.interpolate.number(E,B,At)),this._pitching&&(v.pitch=l.interpolate.number(P,K,At)),this._padding&&(v.interpolatePadding(R,Z,At),Se=v.centerPoint.add(le)),this.terrain&&!o.freezeElevation&&this._updateElevation(At),Ae)v.setLocationAtPoint(Ae,nt);else{const Rt=v.zoomScale(v.zoom-b),Bt=O>b?Math.min(2,st):Math.max(.5,st),Lt=Math.pow(Bt,1-At),nn=v.unproject(De.add(Ue.mult(At*Lt)).mult(Rt));v.setLocationAtPoint(v.renderWorldCopies?nn.wrap():nn,Se)}this._applyUpdatedTransform(v),this._fireMoveEvents(f)},At=>{this.terrain&&this._finalizeElevation(),this._afterEase(f,At)},o),this}_prepareEase(o,f,v={}){this._moving=!0,f||v.moving||this.fire(new l.Event("movestart",o)),this._zooming&&!v.zooming&&this.fire(new l.Event("zoomstart",o)),this._rotating&&!v.rotating&&this.fire(new l.Event("rotatestart",o)),this._pitching&&!v.pitching&&this.fire(new l.Event("pitchstart",o))}_prepareElevation(o){this._elevationCenter=o,this._elevationStart=this.transform.elevation,this._elevationTarget=this.transform.getElevation(o,this.terrain),this.transform.freezeElevation=!0}_updateElevation(o){const f=this.transform.getElevation(this._elevationCenter,this.terrain);if(o<1&&f!==this._elevationTarget){const v=this._elevationTarget-this._elevationStart;this._elevationStart+=o*(v-(f-(v*o+this._elevationStart))/(1-o)),this._elevationTarget=f}this.transform.elevation=l.interpolate.number(this._elevationStart,this._elevationTarget,o)}_finalizeElevation(){this.transform.freezeElevation=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(o){if(!this.transformCameraUpdate)return;const f=o.clone(),{center:v,zoom:b,pitch:E,bearing:P,elevation:R}=this.transformCameraUpdate(f);v&&(f.center=v),b!==void 0&&(f.zoom=b),E!==void 0&&(f.pitch=E),P!==void 0&&(f.bearing=P),R!==void 0&&(f.elevation=R),this.transform.apply(f)}_fireMoveEvents(o){this.fire(new l.Event("move",o)),this._zooming&&this.fire(new l.Event("zoom",o)),this._rotating&&this.fire(new l.Event("rotate",o)),this._pitching&&this.fire(new l.Event("pitch",o))}_afterEase(o,f){if(this._easeId&&f&&this._easeId===f)return;delete this._easeId;const v=this._zooming,b=this._rotating,E=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,v&&this.fire(new l.Event("zoomend",o)),b&&this.fire(new l.Event("rotateend",o)),E&&this.fire(new l.Event("pitchend",o)),this.fire(new l.Event("moveend",o))}flyTo(o,f){if(!o.essential&&l.exported.prefersReducedMotion){const on=l.pick(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(on,f)}this.stop(),o=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},o);const v=this._getTransformForUpdate(),b=this.getZoom(),E=this.getBearing(),P=this.getPitch(),R=this.getPadding(),O="zoom"in o?l.clamp(+o.zoom,v.minZoom,v.maxZoom):b,B="bearing"in o?this._normalizeBearing(o.bearing,E):E,K="pitch"in o?+o.pitch:P,Z="padding"in o?o.padding:v.padding,le=v.zoomScale(O-b),Se=l.Point.convert(o.offset);let ve=v.centerPoint.add(Se);const xe=v.pointLocation(ve),De=l.LngLat.convert(o.center||xe);this._normalizeCenter(De);const Ue=v.project(xe),st=v.project(De).sub(Ue);let Ae=o.curve;const nt=Math.max(v.width,v.height),_t=nt/le,At=st.mag();if("minZoom"in o){const on=l.clamp(Math.min(o.minZoom,b,O),v.minZoom,v.maxZoom),di=nt/v.zoomScale(on-b);Ae=Math.sqrt(di/At*2)}const Rt=Ae*Ae;function Bt(on){const di=(_t*_t-nt*nt+(on?-1:1)*Rt*Rt*At*At)/(2*(on?_t:nt)*Rt*At);return Math.log(Math.sqrt(di*di+1)-di)}function Lt(on){return(Math.exp(on)-Math.exp(-on))/2}function nn(on){return(Math.exp(on)+Math.exp(-on))/2}const Sn=Bt(0);let zn=function(on){return nn(Sn)/nn(Sn+Ae*on)},Zt=function(on){return nt*((nn(Sn)*(Lt(di=Sn+Ae*on)/nn(di))-Lt(Sn))/Rt)/At;var di},On=(Bt(1)-Sn)/Ae;if(Math.abs(At)<1e-6||!isFinite(On)){if(Math.abs(nt-_t)<1e-6)return this.easeTo(o,f);const on=_t<nt?-1:1;On=Math.abs(Math.log(_t/nt))/Ae,Zt=function(){return 0},zn=function(di){return Math.exp(on*Ae*di)}}return o.duration="duration"in o?+o.duration:1e3*On/("screenSpeed"in o?+o.screenSpeed/Ae:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=E!==B,this._pitching=K!==P,this._padding=!v.isPaddingEqual(Z),this._prepareEase(f,!1),this.terrain&&this._prepareElevation(De),this._ease(on=>{const di=on*On,tr=1/zn(di);v.zoom=on===1?O:b+v.scaleZoom(tr),this._rotating&&(v.bearing=l.interpolate.number(E,B,on)),this._pitching&&(v.pitch=l.interpolate.number(P,K,on)),this._padding&&(v.interpolatePadding(R,Z,on),ve=v.centerPoint.add(Se)),this.terrain&&!o.freezeElevation&&this._updateElevation(on);const hi=on===1?De:v.unproject(Ue.add(st.mult(Zt(di))).mult(tr));v.setLocationAtPoint(v.renderWorldCopies?hi.wrap():hi,ve),this._applyUpdatedTransform(v),this._fireMoveEvents(f)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(f)},o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(o,f){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const v=this._onEaseEnd;delete this._onEaseEnd,v.call(this,f)}if(!o){const v=this.handlers;v&&v.stop(!1)}return this}_ease(o,f,v){v.animate===!1||v.duration===0?(o(1),f()):(this._easeStart=l.exported.now(),this._easeOptions=v,this._onEaseFrame=o,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const o=Math.min((l.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(o,f){o=l.wrap(o,-180,180);const v=Math.abs(o-f);return Math.abs(o-360-f)<v&&(o-=360),Math.abs(o+360-f)<v&&(o+=360),o}_normalizeCenter(o){const f=this.transform;if(!f.renderWorldCopies||f.lngRange)return;const v=o.lng-f.center.lng;o.lng+=v>180?-360:v<-180?360:0}queryTerrainElevation(o){return this.terrain?this.transform.getElevation(l.LngLat.convert(o),this.terrain)-this.transform.elevation:null}}class Pn{constructor(o={}){this.options=o,l.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(o){return this._map=o,this._compact=this.options&&this.options.compact,this._container=g.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=g.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=g.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){g.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(o,f){const v=this._map._getUIString(`AttributionControl.${f}`);o.title=v,o.setAttribute("aria-label",v)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))}_updateData(o){!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"&&o.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(b=>typeof b!="string"?"":b)):typeof this.options.customAttribution=="string"&&o.push(this.options.customAttribution)),this._map.style.stylesheet){const b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}const f=this._map.style.sourceCaches;for(const b in f){const E=f[b];if(E.used||E.usedForTerrain){const P=E.getSource();P.attribution&&o.indexOf(P.attribution)<0&&o.push(P.attribution)}}o=o.filter(b=>String(b).trim()),o.sort((b,E)=>b.length-E.length),o=o.filter((b,E)=>{for(let P=E+1;P<o.length;P++)if(o[P].indexOf(b)>=0)return!1;return!0});const v=o.join(" | ");v!==this._attribHTML&&(this._attribHTML=v,o.length?(this._innerContainer.innerHTML=v,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")}}class Nc{constructor(o={}){this.options=o,l.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(o){this._map=o,this._compact=this.options&&this.options.compact,this._container=g.create("div","maplibregl-ctrl");const f=g.create("a","maplibregl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://maplibre.org/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){g.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const o=this._container.children;if(o.length){const f=o[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}}}class of{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const f=++this._id;return this._queue.push({callback:o,id:f,cancelled:!1}),f}remove(o){const f=this._currentlyRunning,v=f?this._queue.concat(f):this._queue;for(const b of v)if(b.id===o)return void(b.cancelled=!0)}run(o=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const f=this._currentlyRunning=this._queue;this._queue=[];for(const v of f)if(!v.cancelled&&(v.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const lf={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Jr=l.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class rd extends l.Evented{constructor(o){super(),this.sourceCache=o,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,o.usedForTerrain=!0,o.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(o,f){this.sourceCache.update(o,f),this._renderableTilesKeys=[];const v={};for(const b of o.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:f}))v[b.key]=!0,this._renderableTilesKeys.push(b.key),this._tiles[b.key]||(b.posMatrix=new Float64Array(16),l.ortho(b.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),this._tiles[b.key]=new pt(b,this.tileSize));for(const b in this._tiles)v[b]||delete this._tiles[b]}freeRtt(o){for(const f in this._tiles){const v=this._tiles[f];(!o||v.tileID.equals(o)||v.tileID.isChildOf(o)||o.isChildOf(v.tileID))&&(v.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(o=>this.getTileByID(o))}getTileByID(o){return this._tiles[o]}getTerrainCoords(o){const f={};for(const v of this._renderableTilesKeys){const b=this._tiles[v].tileID;if(b.canonical.equals(o.canonical)){const E=o.clone();E.posMatrix=new Float64Array(16),l.ortho(E.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),f[v]=E}else if(b.canonical.isChildOf(o.canonical)){const E=o.clone();E.posMatrix=new Float64Array(16);const P=b.canonical.z-o.canonical.z,R=b.canonical.x-(b.canonical.x>>P<<P),O=b.canonical.y-(b.canonical.y>>P<<P),B=l.EXTENT>>P;l.ortho(E.posMatrix,0,B,0,B,0,1),l.translate(E.posMatrix,E.posMatrix,[-R*B,-O*B,0]),f[v]=E}else if(o.canonical.isChildOf(b.canonical)){const E=o.clone();E.posMatrix=new Float64Array(16);const P=o.canonical.z-b.canonical.z,R=o.canonical.x-(o.canonical.x>>P<<P),O=o.canonical.y-(o.canonical.y>>P<<P),B=l.EXTENT>>P;l.ortho(E.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),l.translate(E.posMatrix,E.posMatrix,[R*B,O*B,0]),l.scale(E.posMatrix,E.posMatrix,[1/2**P,1/2**P,0]),f[v]=E}}return f}getSourceTile(o,f){const v=this.sourceCache._source;let b=o.overscaledZ-this.deltaZoom;if(b>v.maxzoom&&(b=v.maxzoom),b<v.minzoom)return null;this._sourceTileCache[o.key]||(this._sourceTileCache[o.key]=o.scaledTo(b).key);let E=this.sourceCache.getTileByID(this._sourceTileCache[o.key]);if((!E||!E.dem)&&f)for(;b>=v.minzoom&&(!E||!E.dem);)E=this.sourceCache.getTileByID(o.scaledTo(b--).key);return E}tilesAfterTime(o=Date.now()){return Object.values(this._tiles).filter(f=>f.timeAdded>=o)}}class ua{constructor(o,f,v){this.painter=o,this.sourceCache=new rd(f),this.options=v,this.exaggeration=typeof v.exaggeration=="number"?v.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(o,f,v,b=l.EXTENT){if(!(f>=0&&f<b&&v>=0&&v<b))return 0;let E=0;const P=this.getTerrainData(o);if(P.tile&&P.tile.dem){const R=function(ve,xe,De){var Ue=xe[0],st=xe[1];return ve[0]=De[0]*Ue+De[4]*st+De[12],ve[1]=De[1]*Ue+De[5]*st+De[13],ve}([],[f/b*l.EXTENT,v/b*l.EXTENT],P.u_terrain_matrix),O=[R[0]*P.tile.dem.dim,R[1]*P.tile.dem.dim],B=[Math.floor(O[0]),Math.floor(O[1])],K=P.tile.dem.get(B[0],B[1]),Z=P.tile.dem.get(B[0],B[1]+1),le=P.tile.dem.get(B[0]+1,B[1]),Se=P.tile.dem.get(B[0]+1,B[1]+1);E=l.interpolate.number(l.interpolate.number(K,Z,O[0]-B[0]),l.interpolate.number(le,Se,O[0]-B[0]),O[1]-B[1])}return E}getElevation(o,f,v,b=l.EXTENT){return this.getDEMElevation(o,f,v,b)*this.exaggeration}getTerrainData(o){if(!this._emptyDemTexture){const b=this.painter.context,E=new l.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new z(b,E,b.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new z(b,new l.RGBAImage({width:1,height:1}),b.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.identity([])}const f=this.sourceCache.getSourceTile(o,!0);if(f&&f.dem&&(!f.demTexture||f.needsTerrainPrepare)){const b=this.painter.context;f.demTexture=this.painter.getTileTexture(f.dem.stride),f.demTexture?f.demTexture.update(f.dem.getPixels(),{premultiply:!1}):f.demTexture=new z(b,f.dem.getPixels(),b.gl.RGBA,{premultiply:!1}),f.demTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),f.needsTerrainPrepare=!1}const v=f&&f+f.tileID.key+o.key;if(v&&!this._demMatrixCache[v]){const b=this.sourceCache.sourceCache._source.maxzoom;let E=o.canonical.z-f.tileID.canonical.z;o.overscaledZ>o.canonical.z&&(o.canonical.z>=b?E=o.canonical.z-b:l.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const P=o.canonical.x-(o.canonical.x>>E<<E),R=o.canonical.y-(o.canonical.y>>E<<E),O=l.fromScaling(new Float64Array(16),[1/(l.EXTENT<<E),1/(l.EXTENT<<E),0]);l.translate(O,O,[P*l.EXTENT,R*l.EXTENT,0]),this._demMatrixCache[o.key]={matrix:O,coord:o}}return{u_depth:2,u_terrain:3,u_terrain_dim:f&&f.dem&&f.dem.dim||1,u_terrain_matrix:v?this._demMatrixCache[o.key].matrix:this._emptyDemMatrix,u_terrain_unpack:f&&f.dem&&f.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(f&&f.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:f}}getFramebuffer(o){const f=this.painter,v=f.width/devicePixelRatio,b=f.height/devicePixelRatio;return!this._fbo||this._fbo.width===v&&this._fbo.height===b||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new z(f.context,{width:v,height:b,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new z(f.context,{width:v,height:b,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=f.context.createFramebuffer(v,b,!0,!1),this._fbo.depthAttachment.set(f.context.createRenderbuffer(f.context.gl.DEPTH_COMPONENT16,v,b))),this._fbo.colorAttachment.set(o==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const o=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const f=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let E=0,P=0;E<this._coordsTextureSize;E++)for(let R=0;R<this._coordsTextureSize;R++,P+=4)f[P+0]=255&R,f[P+1]=255&E,f[P+2]=R>>8<<4|E>>8,f[P+3]=0;const v=new l.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(f.buffer)),b=new z(o,v,o.gl.RGBA,{premultiply:!1});return b.bind(o.gl.NEAREST,o.gl.CLAMP_TO_EDGE),this._coordsTexture=b,b}pointCoordinate(o){const f=new Uint8Array(4),v=this.painter.context,b=v.gl;v.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),b.readPixels(o.x,this.painter.height/devicePixelRatio-o.y-1,1,1,b.RGBA,b.UNSIGNED_BYTE,f),v.bindFramebuffer.set(null);const E=f[0]+(f[2]>>4<<8),P=f[1]+((15&f[2])<<8),R=this.coordsIndex[255-f[3]],O=R&&this.sourceCache.getTileByID(R);if(!O)return null;const B=this._coordsTextureSize,K=(1<<O.tileID.canonical.z)*B;return new l.MercatorCoordinate((O.tileID.canonical.x*B+E)/K,(O.tileID.canonical.y*B+P)/K,this.getElevation(O.tileID,E,P,B))}getTerrainMesh(){if(this._mesh)return this._mesh;const o=this.painter.context,f=new l.Pos3dArray,v=new l.TriangleIndexArray,b=this.meshSize,E=l.EXTENT/b,P=b*b;for(let Z=0;Z<=b;Z++)for(let le=0;le<=b;le++)f.emplaceBack(le*E,Z*E,0);for(let Z=0;Z<P;Z+=b+1)for(let le=0;le<b;le++)v.emplaceBack(le+Z,b+le+Z+1,b+le+Z+2),v.emplaceBack(le+Z,b+le+Z+2,le+Z+1);const R=f.length,O=R+2*(b+1);for(const Z of[0,1])for(let le=0;le<=b;le++)for(const Se of[0,1])f.emplaceBack(le*E,Z*l.EXTENT,Se);for(let Z=0;Z<2*b;Z+=2)v.emplaceBack(O+Z,O+Z+1,O+Z+3),v.emplaceBack(O+Z,O+Z+3,O+Z+2),v.emplaceBack(R+Z,R+Z+3,R+Z+1),v.emplaceBack(R+Z,R+Z+2,R+Z+3);const B=f.length,K=B+2*(b+1);for(const Z of[0,1])for(let le=0;le<=b;le++)for(const Se of[0,1])f.emplaceBack(Z*l.EXTENT,le*E,Se);for(let Z=0;Z<2*b;Z+=2)v.emplaceBack(B+Z,B+Z+1,B+Z+3),v.emplaceBack(B+Z,B+Z+3,B+Z+2),v.emplaceBack(K+Z,K+Z+3,K+Z+1),v.emplaceBack(K+Z,K+Z+2,K+Z+3);return this._mesh={indexBuffer:o.createIndexBuffer(v),vertexBuffer:o.createVertexBuffer(f,Jr.members),segments:l.SegmentVector.simpleSegment(0,0,f.length,v.length)},this._mesh}getMeshFrameDelta(o){return 2*Math.PI*l.earthRadius/Math.pow(2,o)/5}getMinMaxElevation(o){const f=this.getTerrainData(o).tile,v={minElevation:null,maxElevation:null};return f&&f.dem&&(v.minElevation=f.dem.min*this.exaggeration,v.maxElevation=f.dem.max*this.exaggeration),v}}class yy{constructor(o,f,v){this._context=o,this._size=f,this._tileSize=v,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const o of this._objects)o.texture.destroy(),o.fbo.destroy()}_createObject(o){const f=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),v=new z(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return v.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),f.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),f.colorAttachment.set(v.texture),{id:o,fbo:f,texture:v,stamp:-1,inUse:!1}}getObjectForId(o){return this._objects[o]}useObject(o){o.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(f=>o.id!==f),this._recentlyUsed.push(o.id)}stampObject(o){o.stamp=++this._stamp}getOrCreateFreeObject(){for(const f of this._recentlyUsed)if(!this._objects[f].inUse)return this._objects[f];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const o=this._createObject(this._objects.length);return this._objects.push(o),o}freeObject(o){o.inUse=!1}freeAllObjects(){for(const o of this._objects)this.freeObject(o)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(o=>!o.inUse)===!1}}const La={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Zi{constructor(o,f){this.painter=o,this.terrain=f,this.pool=new yy(o.context,30,f.sourceCache.tileSize*f.qualityFactor)}destruct(){this.pool.destruct()}getTexture(o){return this.pool.getObjectForId(o.rtt[this._stacks.length-1].id).texture}prepareForRender(o,f){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=o._order.filter(v=>!o._layers[v].isHidden(f)),this._coordsDescendingInv={};for(const v in o.sourceCaches){this._coordsDescendingInv[v]={};const b=o.sourceCaches[v].getVisibleCoordinates();for(const E of b){const P=this.terrain.sourceCache.getTerrainCoords(E);for(const R in P)this._coordsDescendingInv[v][R]||(this._coordsDescendingInv[v][R]=[]),this._coordsDescendingInv[v][R].push(P[R])}}this._coordsDescendingInvStr={};for(const v of o._order){const b=o._layers[v],E=b.source;if(La[b.type]&&!this._coordsDescendingInvStr[E]){this._coordsDescendingInvStr[E]={};for(const P in this._coordsDescendingInv[E])this._coordsDescendingInvStr[E][P]=this._coordsDescendingInv[E][P].map(R=>R.key).sort().join()}}for(const v of this._renderableTiles)for(const b in this._coordsDescendingInvStr){const E=this._coordsDescendingInvStr[b][v.tileID.key];E&&E!==v.rttCoords[b]&&(v.rtt=[])}}renderLayer(o){if(o.isHidden(this.painter.transform.zoom))return!1;const f=o.type,v=this.painter,b=this._renderableLayerIds[this._renderableLayerIds.length-1]===o.id;if(La[f]&&(this._prevType&&La[this._prevType]||this._stacks.push([]),this._prevType=f,this._stacks[this._stacks.length-1].push(o.id),!b))return!0;if(La[this._prevType]||La[f]&&b){this._prevType=f;const E=this._stacks.length-1,P=this._stacks[E]||[];for(const R of this._renderableTiles){if(this.pool.isFull()&&(Yh(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(R),R.rtt[E]){const B=this.pool.getObjectForId(R.rtt[E].id);if(B.stamp===R.rtt[E].stamp){this.pool.useObject(B);continue}}const O=this.pool.getOrCreateFreeObject();this.pool.useObject(O),this.pool.stampObject(O),R.rtt[E]={id:O.id,stamp:O.stamp},v.context.bindFramebuffer.set(O.fbo.framebuffer),v.context.clear({color:l.Color.transparent,stencil:0}),v.currentStencilSource=void 0;for(let B=0;B<P.length;B++){const K=v.style._layers[P[B]],Z=K.source?this._coordsDescendingInv[K.source][R.tileID.key]:[R.tileID];v.context.viewport.set([0,0,O.fbo.width,O.fbo.height]),v._renderTileClippingMasks(K,Z),v.renderLayer(v,v.style.sourceCaches[K.source],K,Z),K.source&&(R.rttCoords[K.source]=this._coordsDescendingInvStr[K.source][R.tileID.key])}}return Yh(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),La[f]}return!1}}const ar=m,eg={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0},Al=_=>{_.touchstart=_.dragStart,_.touchmoveWindow=_.dragMove,_.touchend=_.dragEnd},sd={showCompass:!0,showZoom:!0,visualizePitch:!1};class cf{constructor(o,f,v=!1){this._clickTolerance=10;const b=o.dragRotate._mouseRotate.getClickTolerance(),E=o.dragRotate._mousePitch.getClickTolerance();this.element=f,this.mouseRotate=qm({clickTolerance:b,enable:!0}),this.touchRotate=(({enable:P,clickTolerance:R,bearingDegreesPerPixelMoved:O=.8})=>{const B=new Xu;return new Da({clickTolerance:R,move:(K,Z)=>({bearingDelta:(Z.x-K.x)*O}),moveStateManager:B,enable:P,assignEvents:Al})})({clickTolerance:b,enable:!0}),this.map=o,v&&(this.mousePitch=Yu({clickTolerance:E,enable:!0}),this.touchPitch=(({enable:P,clickTolerance:R,pitchDegreesPerPixelMoved:O=-.5})=>{const B=new Xu;return new Da({clickTolerance:R,move:(K,Z)=>({pitchDelta:(Z.y-K.y)*O}),moveStateManager:B,enable:P,assignEvents:Al})})({clickTolerance:E,enable:!0})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),g.addEventListener(f,"mousedown",this.mousedown),g.addEventListener(f,"touchstart",this.touchstart,{passive:!1}),g.addEventListener(f,"touchcancel",this.reset)}startMouse(o,f){this.mouseRotate.dragStart(o,f),this.mousePitch&&this.mousePitch.dragStart(o,f),g.disableDrag()}startTouch(o,f){this.touchRotate.dragStart(o,f),this.touchPitch&&this.touchPitch.dragStart(o,f),g.disableDrag()}moveMouse(o,f){const v=this.map,{bearingDelta:b}=this.mouseRotate.dragMove(o,f)||{};if(b&&v.setBearing(v.getBearing()+b),this.mousePitch){const{pitchDelta:E}=this.mousePitch.dragMove(o,f)||{};E&&v.setPitch(v.getPitch()+E)}}moveTouch(o,f){const v=this.map,{bearingDelta:b}=this.touchRotate.dragMove(o,f)||{};if(b&&v.setBearing(v.getBearing()+b),this.touchPitch){const{pitchDelta:E}=this.touchPitch.dragMove(o,f)||{};E&&v.setPitch(v.getPitch()+E)}}off(){const o=this.element;g.removeEventListener(o,"mousedown",this.mousedown),g.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),g.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.removeEventListener(window,"touchend",this.touchend),g.removeEventListener(o,"touchcancel",this.reset),this.offTemp()}offTemp(){g.enableDrag(),g.removeEventListener(window,"mousemove",this.mousemove),g.removeEventListener(window,"mouseup",this.mouseup),g.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.removeEventListener(window,"touchend",this.touchend)}mousedown(o){this.startMouse(l.extend({},o,{ctrlKey:!0,preventDefault:()=>o.preventDefault()}),g.mousePos(this.element,o)),g.addEventListener(window,"mousemove",this.mousemove),g.addEventListener(window,"mouseup",this.mouseup)}mousemove(o){this.moveMouse(o,g.mousePos(this.element,o))}mouseup(o){this.mouseRotate.dragEnd(o),this.mousePitch&&this.mousePitch.dragEnd(o),this.offTemp()}touchstart(o){o.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=g.touchPos(this.element,o.targetTouches)[0],this.startTouch(o,this._startPos),g.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.addEventListener(window,"touchend",this.touchend))}touchmove(o){o.targetTouches.length!==1?this.reset():(this._lastPos=g.touchPos(this.element,o.targetTouches)[0],this.moveTouch(o,this._lastPos))}touchend(o){o.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}let da;function ad(_,o,f){if(_=new l.LngLat(_.lng,_.lat),o){const v=new l.LngLat(_.lng-360,_.lat),b=new l.LngLat(_.lng+360,_.lat),E=f.locationPoint(_).distSqr(o);f.locationPoint(v).distSqr(o)<E?_=v:f.locationPoint(b).distSqr(o)<E&&(_=b)}for(;Math.abs(_.lng-f.center.lng)>180;){const v=f.locationPoint(_);if(v.x>=0&&v.y>=0&&v.x<=f.width&&v.y<=f.height)break;_.lng>f.center.lng?_.lng-=360:_.lng+=360}return _}const Ho={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function od(_,o,f){const v=_.classList;for(const b in Ho)v.remove(`maplibregl-${f}-anchor-${b}`);v.add(`maplibregl-${f}-anchor-${o}`)}class Uc extends l.Evented{constructor(o,f){if(super(),(o instanceof HTMLElement||f)&&(o=l.extend({element:o},f)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,o&&o.element)this._element=o.element,this._offset=l.Point.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=g.create("div"),this._element.setAttribute("aria-label","Map marker");const v=g.createNS("http://www.w3.org/2000/svg","svg"),b=41,E=27;v.setAttributeNS(null,"display","block"),v.setAttributeNS(null,"height",`${b}px`),v.setAttributeNS(null,"width",`${E}px`),v.setAttributeNS(null,"viewBox",`0 0 ${E} ${b}`);const P=g.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"stroke","none"),P.setAttributeNS(null,"stroke-width","1"),P.setAttributeNS(null,"fill","none"),P.setAttributeNS(null,"fill-rule","evenodd");const R=g.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"fill-rule","nonzero");const O=g.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"transform","translate(3.0, 29.0)"),O.setAttributeNS(null,"fill","#000000");const B=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const st of B){const Ae=g.createNS("http://www.w3.org/2000/svg","ellipse");Ae.setAttributeNS(null,"opacity","0.04"),Ae.setAttributeNS(null,"cx","10.5"),Ae.setAttributeNS(null,"cy","5.80029008"),Ae.setAttributeNS(null,"rx",st.rx),Ae.setAttributeNS(null,"ry",st.ry),O.appendChild(Ae)}const K=g.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"fill",this._color);const Z=g.createNS("http://www.w3.org/2000/svg","path");Z.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),K.appendChild(Z);const le=g.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"opacity","0.25"),le.setAttributeNS(null,"fill","#000000");const Se=g.createNS("http://www.w3.org/2000/svg","path");Se.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),le.appendChild(Se);const ve=g.createNS("http://www.w3.org/2000/svg","g");ve.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ve.setAttributeNS(null,"fill","#FFFFFF");const xe=g.createNS("http://www.w3.org/2000/svg","g");xe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const De=g.createNS("http://www.w3.org/2000/svg","circle");De.setAttributeNS(null,"fill","#000000"),De.setAttributeNS(null,"opacity","0.25"),De.setAttributeNS(null,"cx","5.5"),De.setAttributeNS(null,"cy","5.5"),De.setAttributeNS(null,"r","5.4999962");const Ue=g.createNS("http://www.w3.org/2000/svg","circle");Ue.setAttributeNS(null,"fill","#FFFFFF"),Ue.setAttributeNS(null,"cx","5.5"),Ue.setAttributeNS(null,"cy","5.5"),Ue.setAttributeNS(null,"r","5.4999962"),xe.appendChild(De),xe.appendChild(Ue),R.appendChild(O),R.appendChild(K),R.appendChild(le),R.appendChild(ve),R.appendChild(xe),v.appendChild(R),v.setAttributeNS(null,"height",b*this._scale+"px"),v.setAttributeNS(null,"width",E*this._scale+"px"),this._element.appendChild(v),this._offset=l.Point.convert(o&&o.offset||[0,-14])}this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",v=>{v.preventDefault()}),this._element.addEventListener("mousedown",v=>{v.preventDefault()}),od(this._element,this._anchor,"marker"),this._popup=null}addTo(o){return this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),g.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=l.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const b=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[b,-1*(38.1-13.5+b)],"bottom-right":[-b,-1*(38.1-13.5+b)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(o){const f=o.code,v=o.charCode||o.keyCode;f!=="Space"&&f!=="Enter"&&v!==32&&v!==13||this.togglePopup()}_onMapClick(o){const f=o.originalEvent.target,v=this._element;this._popup&&(f===v||v.contains(f))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const o=this._popup;return o?(o.isOpen()?o.remove():o.addTo(this._map),this):this}_update(o){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=ad(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let f="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?f=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(f=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let v="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?v="rotateX(0deg)":this._pitchAlignment==="map"&&(v=`rotateX(${this._map.getPitch()}deg)`),o&&o.type!=="moveend"||(this._pos=this._pos.round()),g.setTransform(this._element,`${Ho[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${v} ${f}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const b=this._map.unproject(this._pos),E=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=b.distanceTo(this._lngLat)>20*E?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(o){return this._offset=l.Point.convert(o),this._update(),this}_onMove(o){if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"}_addDragHandler(o){this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const uf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ml=0,Go=!1;const df={maxWidth:100,unit:"metric"};function ld(_,o,f){const v=f&&f.maxWidth||100,b=_._container.clientHeight/2,E=_.unproject([0,b]),P=_.unproject([v,b]),R=E.distanceTo(P);if(f&&f.unit==="imperial"){const O=3.2808*R;O>5280?Wo(o,v,O/5280,_._getUIString("ScaleControl.Miles")):Wo(o,v,O,_._getUIString("ScaleControl.Feet"))}else f&&f.unit==="nautical"?Wo(o,v,R/1852,_._getUIString("ScaleControl.NauticalMiles")):R>=1e3?Wo(o,v,R/1e3,_._getUIString("ScaleControl.Kilometers")):Wo(o,v,R,_._getUIString("ScaleControl.Meters"))}function Wo(_,o,f,v){const b=function(E){const P=Math.pow(10,`${Math.floor(E)}`.length-1);let R=E/P;return R=R>=10?10:R>=5?5:R>=3?3:R>=2?2:R>=1?1:function(O){const B=Math.pow(10,Math.ceil(-Math.log(O)/Math.LN10));return Math.round(O*B)/B}(R),P*R}(f);_.style.width=o*(b/f)+"px",_.innerHTML=`${b}&nbsp;${v}`}const cd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},hf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ud(_){if(_){if(typeof _=="number"){const o=Math.round(Math.sqrt(.5*Math.pow(_,2)));return{center:new l.Point(0,0),top:new l.Point(0,_),"top-left":new l.Point(o,o),"top-right":new l.Point(-o,o),bottom:new l.Point(0,-_),"bottom-left":new l.Point(o,-o),"bottom-right":new l.Point(-o,-o),left:new l.Point(_,0),right:new l.Point(-_,0)}}if(_ instanceof l.Point||Array.isArray(_)){const o=l.Point.convert(_);return{center:o,top:o,"top-left":o,"top-right":o,bottom:o,"bottom-left":o,"bottom-right":o,left:o,right:o}}return{center:l.Point.convert(_.center||[0,0]),top:l.Point.convert(_.top||[0,0]),"top-left":l.Point.convert(_["top-left"]||[0,0]),"top-right":l.Point.convert(_["top-right"]||[0,0]),bottom:l.Point.convert(_.bottom||[0,0]),"bottom-left":l.Point.convert(_["bottom-left"]||[0,0]),"bottom-right":l.Point.convert(_["bottom-right"]||[0,0]),left:l.Point.convert(_.left||[0,0]),right:l.Point.convert(_.right||[0,0])}}return ud(new l.Point(0,0))}const dd=m,hd={setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:class extends bn{constructor(_){var o;if(l.PerformanceUtils.mark(l.PerformanceMarkers.create),(_=l.extend({},eg,_)).minZoom!=null&&_.maxZoom!=null&&_.minZoom>_.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(_.minPitch!=null&&_.maxPitch!=null&&_.minPitch>_.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(_.minPitch!=null&&_.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(_.maxPitch!=null&&_.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Zu(_.minZoom,_.maxZoom,_.minPitch,_.maxPitch,_.renderWorldCopies),{bearingSnap:_.bearingSnap}),this._interactive=_.interactive,this._cooperativeGestures=_.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=_.maxTileCacheSize,this._failIfMajorPerformanceCaveat=_.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=_.preserveDrawingBuffer,this._antialias=_.antialias,this._trackResize=_.trackResize,this._bearingSnap=_.bearingSnap,this._refreshExpiredTiles=_.refreshExpiredTiles,this._fadeDuration=_.fadeDuration,this._crossSourceCollisions=_.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=_.collectResourceTiming,this._renderTaskQueue=new of,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},lf,_.locale),this._clickTolerance=_.clickTolerance,this._pixelRatio=(o=_.pixelRatio)!==null&&o!==void 0?o:devicePixelRatio,this.transformCameraUpdate=_.transformCameraUpdate,this._imageQueueHandle=U.addThrottleControl(()=>this.isMoving()),this._requestManager=new ee(_.transformRequest),typeof _.container=="string"){if(this._container=document.getElementById(_.container),!this._container)throw new Error(`Container '${_.container}' not found.`)}else{if(!(_.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_.container}if(_.maxBounds&&this.setMaxBounds(_.maxBounds),l.bindAll(["_onWindowOnline","_onMapScroll","_cooperativeGesturesOnWheel","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let f=!1;this._resizeObserver=new ResizeObserver(v=>{f?this._trackResize&&this.resize(v)._update():f=!0}),this._resizeObserver.observe(this._container)}this.handlers=new ca(this,_),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=_.hash&&new jm(typeof _.hash=="string"&&_.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch}),_.bounds&&(this.resize(),this.fitBounds(_.bounds,l.extend({},_.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=_.localIdeographFontFamily,this._validateStyle=_.validateStyle,_.style&&this.setStyle(_.style,{localIdeographFontFamily:_.localIdeographFontFamily}),_.attributionControl&&this.addControl(new Pn({customAttribution:_.customAttribution})),_.maplibreLogo&&this.addControl(new Nc,_.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",f=>{this._update(f.dataType==="style"),this.fire(new l.Event(`${f.dataType}data`,f))}),this.on("dataloading",f=>{this.fire(new l.Event(`${f.dataType}dataloading`,f))}),this.on("dataabort",f=>{this.fire(new l.Event("sourcedataabort",f))})}_getMapId(){return this._mapId}addControl(_,o){if(o===void 0&&(o=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=_.onAdd(this);this._controls.push(_);const v=this._controlPositions[o];return o.indexOf("bottom")!==-1?v.insertBefore(f,v.firstChild):v.appendChild(f),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(_);return o>-1&&this._controls.splice(o,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}calculateCameraOptionsFromTo(_,o,f,v){return v==null&&this.terrain&&(v=this.transform.getElevation(f,this.terrain)),super.calculateCameraOptionsFromTo(_,o,f,v)}resize(_){var o;const f=this._containerDimensions(),v=f[0],b=f[1];this._resizeCanvas(v,b,this.getPixelRatio()),this.transform.resize(v,b),(o=this._requestedCameraState)===null||o===void 0||o.resize(v,b),this.painter.resize(v,b,this.getPixelRatio());const E=!this._moving;return E&&(this.stop(),this.fire(new l.Event("movestart",_)).fire(new l.Event("move",_))),this.fire(new l.Event("resize",_)),E&&this.fire(new l.Event("moveend",_)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(_){const[o,f]=this._containerDimensions();this._pixelRatio=_,this._resizeCanvas(o,f,_),this.painter.resize(o,f,_)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(Ke.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(_){return this._cooperativeGestures=_,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(_){return this.transform.locationPoint(l.LngLat.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.pointLocation(l.Point.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,o,f){if(_==="mouseenter"||_==="mouseover"){let v=!1;return{layer:o,listener:f,delegates:{mousemove:E=>{const P=this.getLayer(o)?this.queryRenderedFeatures(E.point,{layers:[o]}):[];P.length?v||(v=!0,f.call(this,new sr(_,this,E.originalEvent,{features:P}))):v=!1},mouseout:()=>{v=!1}}}}if(_==="mouseleave"||_==="mouseout"){let v=!1;return{layer:o,listener:f,delegates:{mousemove:P=>{(this.getLayer(o)?this.queryRenderedFeatures(P.point,{layers:[o]}):[]).length?v=!0:v&&(v=!1,f.call(this,new sr(_,this,P.originalEvent)))},mouseout:P=>{v&&(v=!1,f.call(this,new sr(_,this,P.originalEvent)))}}}}{const v=b=>{const E=this.getLayer(o)?this.queryRenderedFeatures(b.point,{layers:[o]}):[];E.length&&(b.features=E,f.call(this,b),delete b.features)};return{layer:o,listener:f,delegates:{[_]:v}}}}on(_,o,f){if(f===void 0)return super.on(_,o);const v=this._createDelegatedListener(_,o,f);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(v);for(const b in v.delegates)this.on(b,v.delegates[b]);return this}once(_,o,f){if(f===void 0)return super.once(_,o);const v=this._createDelegatedListener(_,o,f);for(const b in v.delegates)this.once(b,v.delegates[b]);return this}off(_,o,f){return f===void 0?super.off(_,o):(this._delegatedListeners&&this._delegatedListeners[_]&&(v=>{const b=this._delegatedListeners[_];for(let E=0;E<b.length;E++){const P=b[E];if(P.layer===o&&P.listener===f){for(const R in P.delegates)this.off(R,P.delegates[R]);return b.splice(E,1),this}}})(),this)}queryRenderedFeatures(_,o){if(!this.style)return[];let f;const v=_ instanceof l.Point||Array.isArray(_),b=v?_:[[0,0],[this.transform.width,this.transform.height]];if(o=o||(v?{}:_)||{},b instanceof l.Point||typeof b[0]=="number")f=[l.Point.convert(b)];else{const E=l.Point.convert(b[0]),P=l.Point.convert(b[1]);f=[E,new l.Point(P.x,E.y),P,new l.Point(E.x,P.y),E]}return this.style.queryRenderedFeatures(f,o,this.transform)}querySourceFeatures(_,o){return this.style.querySourceFeatures(_,o)}setStyle(_,o){return(o=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},o)).diff!==!1&&o.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,o),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._updateStyle(_,o))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){const o=this._locale[_];if(o==null)throw new Error(`Missing UI string '${_}'`);return o}_updateStyle(_,o){if(o.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(_,o));const f=this.style&&o.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new Bs(this,o||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,o,f):this.style.loadJSON(_,o,f),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Bs(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,o){if(typeof _=="string"){const f=this._requestManager.transformRequest(_,F.Style);l.getJSON(f,(v,b)=>{v?this.fire(new l.ErrorEvent(v)):b&&this._updateDiff(b,o)})}else typeof _=="object"&&this._updateDiff(_,o)}_updateDiff(_,o){try{this.style.setState(_,o)&&this._update(!0)}catch(f){l.warnOnce(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(_,o)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")}addSource(_,o){return this._lazyInitEmptyStyle(),this.style.addSource(_,o),this._update(!0)}isSourceLoaded(_){const o=this.style&&this.style.sourceCaches[_];if(o!==void 0)return o.loaded();this.fire(new l.ErrorEvent(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){const o=this.style.sourceCaches[_.source];if(!o)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);for(const f in this.style._layers){const v=this.style._layers[f];v.type==="hillshade"&&v.source===_.source&&l.warnOnce("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ua(this.painter,o,_),this.painter.renderToTexture=new Zi(this.painter,this.terrain),this.transform.updateElevation(this.terrain),this._terrainDataCallback=f=>{f.dataType==="style"?this.terrain.sourceCache.freeRtt():f.dataType==="source"&&f.tile&&(f.sourceId===_.source&&this.transform.updateElevation(this.terrain),this.terrain.sourceCache.freeRtt(f.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.updateElevation(this.terrain);return this.fire(new l.Event("terrain",{terrain:_})),this}getTerrain(){return this.terrain&&this.terrain.options}areTilesLoaded(){const _=this.style&&this.style.sourceCaches;for(const o in _){const f=_[o]._tiles;for(const v in f){const b=f[v];if(b.state!=="loaded"&&b.state!=="errored")return!1}}return!0}addSourceType(_,o,f){return this._lazyInitEmptyStyle(),this.style.addSourceType(_,o,f)}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,o,{pixelRatio:f=1,sdf:v=!1,stretchX:b,stretchY:E,content:P}={}){if(this._lazyInitEmptyStyle(),o instanceof HTMLImageElement||l.isImageBitmap(o)){const{width:R,height:O,data:B}=l.exported.getImageData(o);this.style.addImage(_,{data:new l.RGBAImage({width:R,height:O},B),pixelRatio:f,stretchX:b,stretchY:E,content:P,sdf:v,version:0})}else{if(o.width===void 0||o.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:R,height:O,data:B}=o,K=o;this.style.addImage(_,{data:new l.RGBAImage({width:R,height:O},new Uint8Array(B)),pixelRatio:f,stretchX:b,stretchY:E,content:P,sdf:v,version:0,userImage:K}),K.onAdd&&K.onAdd(this,_)}}}updateImage(_,o){const f=this.style.getImage(_);if(!f)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const v=o instanceof HTMLImageElement||l.isImageBitmap(o)?l.exported.getImageData(o):o,{width:b,height:E,data:P}=v;if(b===void 0||E===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(b!==f.data.width||E!==f.data.height)return this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const R=!(o instanceof HTMLImageElement||l.isImageBitmap(o));f.data.replace(P,R),this.style.updateImage(_,f)}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_,o){U.getImage(this._requestManager.transformRequest(_,F.Image),o)}listImages(){return this.style.listImages()}addLayer(_,o){return this._lazyInitEmptyStyle(),this.style.addLayer(_,o),this._update(!0)}moveLayer(_,o){return this.style.moveLayer(_,o),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}setLayerZoomRange(_,o,f){return this.style.setLayerZoomRange(_,o,f),this._update(!0)}setFilter(_,o,f={}){return this.style.setFilter(_,o,f),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,o,f,v={}){return this.style.setPaintProperty(_,o,f,v),this._update(!0)}getPaintProperty(_,o){return this.style.getPaintProperty(_,o)}setLayoutProperty(_,o,f,v={}){return this.style.setLayoutProperty(_,o,f,v),this._update(!0)}getLayoutProperty(_,o){return this.style.getLayoutProperty(_,o)}setGlyphs(_,o={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,o),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,o,f={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,o,f,v=>{v||this._update(!0)}),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,o={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,o,f=>{f||this._update(!0)}),this}setLight(_,o={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,o),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(_,o){return this.style.setFeatureState(_,o),this._update()}removeFeatureState(_,o){return this.style.removeFeatureState(_,o),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,o=0;return this._container&&(_=this._container.clientWidth||400,o=this._container.clientHeight||300),[_,o]}_setupContainer(){const _=this._container;_.classList.add("maplibregl-map");const o=this._canvasContainer=g.create("div","maplibregl-canvas-container",_);this._interactive&&o.classList.add("maplibregl-interactive"),this._canvas=g.create("canvas","maplibregl-canvas",o),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const f=this._containerDimensions();this._resizeCanvas(f[0],f[1],this.getPixelRatio());const v=this._controlContainer=g.create("div","maplibregl-control-container",_),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(E=>{b[E]=g.create("div",`maplibregl-ctrl-${E} `,v)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_cooperativeGesturesOnWheel(_){this._onCooperativeGesture(_,_[this._metaKey],1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=g.create("div","maplibregl-cooperative-gesture-screen",this._container);let _=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(_=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${_}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){g.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(_,o,f){this._canvas.width=f*_,this._canvas.height=f*o,this._canvas.style.width=`${_}px`,this._canvas.style.height=`${o}px`}_setupPainter(){const _={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let o=null;this._canvas.addEventListener("webglcontextcreationerror",v=>{o={requestedAttributes:_},v&&(o.statusMessage=v.statusMessage,o.type=v.type)},{once:!0});const f=this._canvas.getContext("webgl2",_);if(!f){const v="Failed to initialize WebGL";throw o?(o.message=v,new Error(JSON.stringify(o))):new Error(v)}this.painter=new Um(f,this.transform),x.testSupport(f)}_contextLost(_){_.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:_}))}_contextRestored(_){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:_}))}_onMapScroll(_){if(_.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(_,o,f){return!o&&f<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){const o=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let f=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const b=this.transform.zoom,E=l.exported.now();this.style.zoomHistory.update(b,E);const P=new l.EvaluationParameters(b,{now:E,fadeDuration:o,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),R=P.crossFadingFactor();R===1&&R===this._crossFadingFactor||(f=!0,this._crossFadingFactor=R),this.style.update(P)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain&&this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.updateElevation(this.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,o,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:o,showPadding:this.showPadding}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.load),this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||f)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const v=this._sourcesDirty||this._styleDirty||this._placementDirty;return v||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.Event("idle")),!this._loaded||this._fullyLoaded||v||(this._fullyLoaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(const f of this._controls)f.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),U.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();const o=this.painter.context.gl.getExtension("WEBGL_lose_context");o&&o.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),g.remove(this._canvasContainer),g.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),l.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new l.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.exported.frame(_=>{l.PerformanceUtils.frame(_),this._frame=null,this._render(_)}))}_onWindowOnline(){this._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return ar}getCameraTargetElevation(){return this.transform.elevation}},NavigationControl:class{constructor(_){this.options=l.extend({},sd,_),this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",o=>this._map.zoomIn({},{originalEvent:o})),g.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",o=>this._map.zoomOut({},{originalEvent:o})),g.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass",o=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:o}):this._map.resetNorth({},{originalEvent:o})}),this._compassIcon=g.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const _=this._map.getZoom(),o=_===this._map.getMaxZoom(),f=_===this._map.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())}_rotateCompassArrow(){const _=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=_}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new cf(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){g.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,o){const f=g.create("button",_,this._container);return f.type="button",f.addEventListener("click",o),f}_setButtonTitle(_,o){const f=this._map._getUIString(`NavigationControl.${o}`);_.title=f,_.setAttribute("aria-label",f)}},GeolocateControl:class extends l.Evented{constructor(_){super(),this.options=l.extend({},uf,_),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(_){return this._map=_,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(o,f=!1){da===void 0||f?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(v=>{da=v.state!=="denied",o(da)}).catch(()=>{da=!!window.navigator.geolocation,o(da)}):(da=!!window.navigator.geolocation,o(da)):o(da)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),g.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ml=0,Go=!1}_isOutOfMapMaxBounds(_){const o=this._map.getMaxBounds(),f=_.coords;return o&&(f.longitude<o.getWest()||f.longitude>o.getEast()||f.latitude<o.getSouth()||f.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(_){if(this._map){if(this._isOutOfMapMaxBounds(_))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",_)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=_,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(_),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(_),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.Event("geolocate",_)),this._finish()}}_updateCamera(_){const o=new l.LngLat(_.coords.longitude,_.coords.latitude),f=_.coords.accuracy,v=this._map.getBearing(),b=l.extend({bearing:v},this.options.fitBoundsOptions),E=Ke.fromLngLat(o,f);this._map.fitBounds(E,b,{geolocateSource:!0})}_updateMarker(_){if(_){const o=new l.LngLat(_.coords.longitude,_.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=_.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const _=this._map.getBounds(),o=_.getSouthEast(),f=_.getNorthEast(),v=o.distanceTo(f),b=Math.ceil(this._accuracy/(v/this._map._container.clientHeight)*2);this._circleElement.style.width=`${b}px`,this._circleElement.style.height=`${b}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(_){if(this._map){if(this.options.trackUserLocation)if(_.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(_.code===3&&Go)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.Event("error",_)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(_){if(this._map){if(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=g.create("button","maplibregl-ctrl-geolocate",this._container),g.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",_===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=g.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Uc(this._dotElement),this._circleElement=g.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Uc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.Event("trackuserlocationend")))})}}trigger(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ml--,Go=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ml++,Ml>1?(_={maximumAge:6e5,timeout:0},Go=!0):(_=this.options.positionOptions,Go=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Pn,LogoControl:Nc,ScaleControl:class{constructor(_){this.options=l.extend({},df,_),l.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){ld(this._map,this._container,this.options)}onAdd(_){return this._map=_,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){g.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(_){this.options.unit=_,ld(this._map,this._container,this.options)}},FullscreenControl:class extends l.Evented{constructor(_={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){g.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const _=this._fullscreenButton=g.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);g.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.Event("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new l.Event("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},TerrainControl:class{constructor(_){this.options=_,l.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(_){return this._map=_,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=g.create("button","maplibregl-ctrl-terrain",this._container),g.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){g.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends l.Evented{constructor(_){super(),this.options=l.extend(Object.create(cd),_),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&g.remove(this._content),this._container&&(g.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=l.LngLat.convert(_),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const o=document.createDocumentFragment(),f=document.createElement("body");let v;for(f.innerHTML=_;v=f.firstChild,v;)o.appendChild(v);return this.setDOMContent(o)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=g.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){this._container&&this._container.classList.add(_)}removeClassName(_){this._container&&this._container.classList.remove(_)}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}_createCloseButton(){this.options.closeButton&&(this._closeButton=g.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(_){this._update(_.point)}_onMouseMove(_){this._update(_.point)}_onDrag(_){this._update(_.point)}_update(_){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=g.create("div","maplibregl-popup",this._map.getContainer()),this._tip=g.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(E=>this._container.classList.add(E)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ad(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!_))return;const o=this._pos=this._trackPointer&&_?_:this._map.project(this._lngLat);let f=this.options.anchor;const v=ud(this.options.offset);if(!f){const E=this._container.offsetWidth,P=this._container.offsetHeight;let R;R=o.y+v.bottom.y<P?["top"]:o.y>this._map.transform.height-P?["bottom"]:[],o.x<E/2?R.push("left"):o.x>this._map.transform.width-E/2&&R.push("right"),f=R.length===0?"bottom":R.join("-")}const b=o.add(v[f]).round();g.setTransform(this._container,`${Ho[f]} translate(${b.x}px,${b.y}px)`),od(this._container,f,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(hf);_&&_.focus()}_onClose(){this.remove()}},Marker:Uc,Style:Bs,LngLat:l.LngLat,LngLatBounds:Ke,Point:l.Point,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,AJAXError:l.AJAXError,config:l.config,CanvasSource:ft,GeoJSONSource:qt,ImageSource:ke,RasterDEMTileSource:_n,RasterTileSource:Vt,VectorTileSource:Ot,VideoSource:ge,prewarm:function(){Qe().acquire(vt)},clearPrewarmedResources:function(){const _=Ye;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(vt),Ye=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return dd},get workerCount(){return Rn.workerCount},set workerCount(_){Rn.workerCount=_},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(_){l.config.MAX_PARALLEL_IMAGE_REQUESTS=_},get workerUrl(){return l.config.WORKER_URL},set workerUrl(_){l.config.WORKER_URL=_},addProtocol(_,o){l.config.REGISTERED_PROTOCOLS[_]=o},removeProtocol(_){delete l.config.REGISTERED_PROTOCOLS[_]}};return id.extend(hd,{isSafari:l.isSafari,getPerformanceMetrics:l.PerformanceUtils.getPerformanceMetrics}),hd});var d=s;return d})})(fk);var Fd=fk.exports;const mk=Symbol("MapLibreGLMap"),P9=Symbol("MapLibreGLMarker"),D9=lt({__name:"Skeleton",props:{variant:{default:"rect"},width:{default:"100%"},height:{default:"1rem"}},setup(e){return nm(t=>({"367bb0d0":t.width,cc985cd6:t.height})),(t,i)=>(H(),me("div",{class:Dn(`skeleton skeleton--${t.variant} rounded-md animate-pulse bg-neutral-200 flex items-center justify-center`)},[Mn(t.$slots,"default",{},void 0,!0)],2))}});const ll=sn(D9,[["__scopeId","data-v-637a971d"]]),L9={class:"maplibre-map"},O9=["onClick"],R9={class:"hidden"},Bf="markers",Cd="unclustered-points",Id="clusters",WE="cluster-count",F9=lt({__name:"Map",props:{center:{},bounds:{default:void 0},zoom:{},apiKey:{},labelsClass:{default:""},mapStyle:{default:"light"},mapContainerClass:{default:""},fullscreenControl:{type:Boolean,default:!0},mapOptions:{default:()=>({})}},emits:["click","load"],setup(e,{emit:t}){const i=e,r=Fe(null),s=Fe(null),u=Br(new Map),d=Fe(!1),l={light:{label:"Light",name:"ArcGIS:LightGray",type:"style"},dark:{label:"Dark",name:"ArcGIS:DarkGray",type:"style"},satellite:{label:"Satellite",name:"ArcGIS:Imagery",type:"style"},streets:{label:"Street",name:"ArcGIS:Navigation",type:"style"}},m=Fe(i.mapStyle),g=V=>{const Q="https://basemaps-api.arcgis.com/arcgis/rest/services/styles",{name:ae,type:be,url:te}=l[V];return te||`${Q}/${ae}?type=${be}&token=${i.apiKey}`};function x(){if(!s.value)throw new Error("Cannot update style: no map");s.value.setStyle(g(m.value))}function w(){if(i.bounds){if(!s.value)throw new Error("Cannot update bounds: no map");s.value.fitBounds(i.bounds,{padding:64})}}function C({id:V,lng:Q,lat:ae}){return Array.from(u.values()).filter(te=>{var z;if(((z=te.properties)==null?void 0:z.id)===V)return!1;const G=Math.abs(te.geometry.coordinates[0]-Q),j=Math.abs(te.geometry.coordinates[1]-ae);return G<1e-4&&j<1e-4})}function I({id:V,lng:Q,lat:ae,...be}){const G=C({id:V,lng:Q,lat:ae}).length?[1e-4,0]:[0,0],j={type:"Feature",geometry:{type:"Point",coordinates:[Q,ae]},properties:{...be,id:V,offset:G}};return u.set(V,j),ee(),j}function M(V){u.delete(V),ee()}const L=new Map;function $(V,Q){L.set(V,Q)}function F(V){const Q=L.get(V);Q!=null&&Q.value&&(Q.value.innerHTML=""),L.delete(V)}function U(V){return Array.from(V.values()).map(be=>{var te;if(!((te=be.properties)!=null&&te.offset))throw new Error("No offset");return{...be,geometry:{...be.geometry,coordinates:[be.geometry.coordinates[0]+be.properties.offset[0],be.geometry.coordinates[1]+be.properties.offset[1]]}}})}function ee(){const V=s.value;if(!V)return;const Q=V.getSource("markers");Q==null||Q.setData({type:"FeatureCollection",features:U(u)})}return fn(m,x),fn([()=>i.bounds,s],w),fn([s,u,m],ee),Bn(()=>{if(!r.value)throw Error("Cannot create Map: container not defined:");const V=new Fd.Map({container:r.value,center:i.center?[i.center.lng,i.center.lat]:[0,0],style:g(m.value),zoom:i.zoom,bounds:i.bounds,...i.mapOptions});i.fullscreenControl&&V.addControl(new Fd.FullscreenControl({container:document.querySelector("body")})),V.addControl(new Fd.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0})).addControl(new Fd.ScaleControl({unit:"imperial"})).on("click",Q=>{if(!s.value)throw new Error("there was a click but no map");t("click",Q,s.value)}).on("click",Id,function(Q){var j;if(!s.value)throw new Error("there was a click on the map, but no map. How is that even possible?");const ae=s.value,be=ae.queryRenderedFeatures(Q.point,{layers:[Id]}),te=(j=be[0].properties)==null?void 0:j.cluster_id,G=ae.getSource(Bf);G==null||G.getClusterExpansionZoom(te,(z,ie)=>{var ne;if(z||ie===null)return;const X=(ne=be[0].geometry)==null?void 0:ne.coordinates;ae.easeTo({center:X,zoom:ie})})}).on("click",Cd,function(Q){var ie,X;if(!s.value)throw new Error("there was a click on the map, but no map. How is that even possible?");const ae=s.value,te=ae.queryRenderedFeatures(Q.point,{layers:[Cd]})[0],G=te.geometry.coordinates.slice();for(;Math.abs(Q.lngLat.lng-G[0])>180;)G[0]+=Q.lngLat.lng>G[0]?360:-360;const j=(ie=te.properties)==null?void 0:ie.id,z=(X=L.get(j))==null?void 0:X.value;if(!z){console.error(`no popup container for marker ${j}`);return}new Fd.Popup().setLngLat(G).setDOMContent(z).addTo(ae)}).on("mouseenter",Id,function(){V.getCanvas().style.cursor="pointer"}).on("mouseleave",Id,function(){V.getCanvas().style.cursor=""}).on("mouseenter",Cd,function(){V.getCanvas().style.cursor="pointer"}).on("mouseleave",Cd,function(){V.getCanvas().style.cursor=""}).on("styledata",()=>{if(!s.value)throw new Error("cannot emit styledata event: no map");const Q=s.value;Q.getSource(Bf)||Q.addSource(Bf,{type:"geojson",data:{type:"FeatureCollection",features:U(u)},cluster:!0,clusterMaxZoom:14,clusterRadius:50}),Q.getLayer(Id)||Q.addLayer({id:Id,type:"circle",source:Bf,filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#F54D94",5,"#F54D94"],"circle-radius":["step",["get","point_count"],20,10,30,100,40],"circle-stroke-width":8,"circle-stroke-color":"rgba(245, 77, 138, 0.25)"}}),Q.getLayer(WE)||Q.addLayer({id:WE,type:"symbol",source:Bf,layout:{"text-font":["Arial Bold"],"text-field":["get","point_count"],"text-offset":[0,.1]},paint:{"text-color":"white"}}),Q.getLayer(Cd)||Q.addLayer({id:Cd,type:"circle",source:"markers",filter:["!",["has","point_count"]],paint:{"circle-color":"#F54D94","circle-radius":8,"circle-stroke-width":1,"circle-stroke-color":"#fff"}})}).on("load",()=>{if(!s.value)throw new Error("cannot emit load event: no map");d.value=!0,t("load",s.value)}),s.value=V,k_(r,()=>{s.value&&s.value.resize()})}),Wi(()=>{s.value&&(s.value.remove(),s.value=null)}),Oi(mk,{createOrUpdateMarker:I,removeMarker:M,setMarkerPopupContainer:$,removeMarkerPopup:F}),(V,Q)=>(H(),me("div",L9,[ue("div",{class:Dn(["flex gap-4 sm:justify-end items-center mb-4",V.labelsClass])},[(H(),me(Nt,null,Fn(l,(ae,be)=>ue("button",{key:be,class:Dn(["text-sm",{"font-bold":be===m.value,"text-neutral-400":be!==m.value}]),onClick:te=>m.value=be},xt(ae.label),11,O9)),64))],2),ue("div",{ref_key:"mapContainerRef",ref:r,class:Dn(["map-container",V.mapContainerClass])},null,2),d.value?ot("",!0):(H(),We(ll,{key:0,class:"w-full h-[75vh]"})),ue("div",R9,[Mn(V.$slots,"default",{},void 0,!0)])]))}});const gk=sn(F9,[["__scopeId","data-v-05c7816d"]]),z1=Object.freeze(Object.defineProperty({__proto__:null,default:gk},Symbol.toStringTag,{value:"Module"})),$9={class:"map-marker"},z9=lt({__name:"MapMarker",props:{id:{},lng:{},lat:{}},setup(e){const t=e,i=wi(mk);fn([()=>t.lng,()=>t.lat],()=>{if(!i)throw new Error(`Cannot add marker ${t.id} for [${t.lng}, ${t.lat}]. Map context is null.`);i.createOrUpdateMarker({id:t.id,lng:t.lng,lat:t.lat})},{immediate:!0}),Wi(()=>{if(!i)throw new Error(`Cannot remove marker ${t.id} for [${t.lng}, ${t.lat}]. Map context is null.`);i.removeMarker(t.id)});function r(u){if(!i)throw new Error(`Cannot create popup for marker ${t.id} for [${t.lng}, ${t.lat}]. Map context is null.`);i.setMarkerPopupContainer(t.id,u)}function s(){if(!i)throw new Error(`Cannot remove popup for marker ${t.id} for [${t.lng}, ${t.lat}]. Map context is null.`);i.removeMarkerPopup(t.id)}return Oi(P9,{createPopup:r,removePopup:s}),(u,d)=>(H(),me("div",$9,[Mn(u.$slots,"default")]))}});var Ps=63710088e-1,B9={centimeters:Ps*100,centimetres:Ps*100,degrees:Ps/111325,feet:Ps*3.28084,inches:Ps*39.37,kilometers:Ps/1e3,kilometres:Ps/1e3,meters:Ps,metres:Ps,miles:Ps/1609.344,millimeters:Ps*1e3,millimetres:Ps*1e3,nauticalmiles:Ps/1852,radians:1,yards:Ps*1.0936};function vk(e,t,i){i===void 0&&(i={});var r={type:"Feature"};return(i.id===0||i.id)&&(r.id=i.id),i.bbox&&(r.bbox=i.bbox),r.properties=t||{},r.geometry=e,r}function N9(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ZE(e[0])||!ZE(e[1]))throw new Error("coordinates must contain numbers");var r={type:"Point",coordinates:e};return vk(r,t,i)}function U9(e,t,i){i===void 0&&(i={});for(var r=0,s=e;r<s.length;r++){var u=s[r];if(u.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var d=0;d<u[u.length-1].length;d++)if(u[u.length-1][d]!==u[0][d])throw new Error("First and last Position are not equivalent.")}var l={type:"Polygon",coordinates:e};return vk(l,t,i)}function j9(e,t){t===void 0&&(t="kilometers");var i=B9[t];if(!i)throw new Error(t+" units is invalid");return e/i}function qE(e){var t=e%(2*Math.PI);return t*180/Math.PI}function L0(e){var t=e%360;return t*Math.PI/180}function ZE(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function V9(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function H9(e,t,i,r){r===void 0&&(r={});var s=V9(e),u=L0(s[0]),d=L0(s[1]),l=L0(i),m=j9(t,r.units),g=Math.asin(Math.sin(d)*Math.cos(m)+Math.cos(d)*Math.sin(m)*Math.cos(l)),x=u+Math.atan2(Math.sin(l)*Math.sin(m)*Math.cos(d),Math.cos(m)-Math.sin(d)*Math.sin(g)),w=qE(x),C=qE(g);return N9([w,C],r.properties)}function G9(e,t,i){i===void 0&&(i={});for(var r=i.steps||64,s=i.properties?i.properties:!Array.isArray(e)&&e.type==="Feature"&&e.properties?e.properties:{},u=[],d=0;d<r;d++)u.push(H9(e,t,d*-360/r,i).geometry.coordinates);return u.push(u[0]),U9([u],s)}const W9={class:"flex items-baseline mt-2 text-sm gap-2"},q9={key:0,class:"text-xs text-red-700 mt-2"},Z9=lt({__name:"FilterByGlobalLocationRow",props:{rowIndex:{}},setup(e){const t=Nr(),i=Fe(null),r=Fe(!1),s=Oe(()=>!u.value||!d.value?null:{lng:u.value,lat:d.value}),u=Oe(()=>{var I;return parseFloat(((I=t.filterBy.globalLocation)==null?void 0:I.lng)??"")}),d=Oe(()=>{var I;return parseFloat(((I=t.filterBy.globalLocation)==null?void 0:I.lat)??"")}),l=Oe(()=>{var I;return parseFloat(((I=t.filterBy.globalLocation)==null?void 0:I.radius)??"")}),m=Oe(()=>{if(!u.value||!d.value||!l.value)return null;const I=[u.value,d.value];return G9(I,l.value,{steps:36,units:"miles"})}),g=Oe(()=>l.value>0);function x(I){r.value=!0,t.updateLocationFilter({radius:I})}function w(I){i.value=I,I.on("click",M=>{const L=M.lngLat;t.updateLocationFilter({lng:L.lng.toString(),lat:L.lat.toString()})}),I.getSource("radius-circle")||I.addSource("radius-circle",{type:"geojson",data:m.value}),I.getLayer("radius-circle")||I.addLayer({id:"radius-circle",type:"fill",source:"radius-circle",paint:{"fill-color":"#f03","fill-opacity":.2}})}function C(){const I=i.value,M=m.value;if(!I||!M||!I.loaded())return;const L=I.getSource("radius-circle");if(!L)throw new Error("Cannot render radius circle. Expected source to be defined.");if(!(L instanceof Fd.GeoJSONSource))throw new Error("Expected source to be a GeoJSONSource");L.setData(M)}return fn([u,d,l],()=>C()),(I,M)=>he(t).filterBy.globalLocation?(H(),We(U_,{key:0,rowIndex:I.rowIndex,label:"Any Location",onRemove:he(t).removeLocationFilter},{default:Me(()=>[ue("div",W9,[ue("span",null,xt(Math.abs(u.value).toFixed(4))+" "+xt(u.value>0?"E":"W"),1),ue("span",null,xt(Math.abs(d.value).toFixed(4))+" "+xt(d.value>0?"N":"S"),1)]),s.value?(H(),We(gk,{key:0,center:s.value,zoom:2,apiKey:he(ci).arcgis.apiKey,class:"my-2 border border-neutral-300 rounded-md",labelsClass:"hidden",mapContainerClass:"!h-[12rem] !min-h-[12rem]",fullscreenControl:!1,mapOptions:{attributionControl:!1},onLoad:w},{default:Me(()=>[u.value&&d.value?(H(),We(z9,{key:0,id:"search-by-location-map-marker",lng:u.value,lat:d.value},null,8,["lng","lat"])):ot("",!0)]),_:1},8,["center","apiKey"])):ot("",!0),ue("div",null,[ye(Ya,{id:"filter-by-global-location-radius",modelValue:he(t).filterBy.globalLocation.radius??"",type:"text",label:"Search Radius",labelClass:{"!text-red-700":r.value&&!g.value},inputClass:{"bg-white !border-neutral-200":!0,"border-red-600 text-red-700":r.value&&!g.value},"onUpdate:modelValue":x},{append:Me(()=>[ue("span",{class:Dn(["text-sm text-neutral-600 mr-2",{"!text-red-700":r.value&&!g.value}])},"miles",2)]),_:1},8,["modelValue","labelClass","inputClass"]),r.value&&!g.value?(H(),me("p",q9," Radius must be a number greater than 0. ")):ot("",!0)])]),_:1},8,["rowIndex","onRemove"])):ot("",!0)}}),K9=e=>(ro("data-v-0b78b9fe"),e=e(),so(),e),X9=K9(()=>ue("option",{value:""},"All",-1)),Y9=["value"],J9=lt({__name:"FilterByGlobalFileTypeRow",props:{rowIndex:{}},setup(e){const t=Nr(),r=[...[{label:"Image",value:"image"},{label:"Video",value:"movie"},{label:"Audio",value:"audio"},{label:"Doc",value:"office"},{label:"TXT",value:"txt"},{label:"PDF",value:"pdf"},{label:"PPT",value:"office"},{label:"3D (obj)",value:"zipobj"},{label:"3D (ply)",value:"ply"},{label:"DICOM",value:"zipmeddicom"},{label:"SCORM",value:"zipscorm"}]].sort((s,u)=>s.label.localeCompare(u.label));return(s,u)=>(H(),We(U_,{label:"File Type",rowIndex:s.rowIndex,onRemove:he(t).removeFileTypeFilter},{default:Me(()=>[he(t).filterBy.globalFileType?bs((H(),me("select",{key:0,"onUpdate:modelValue":u[0]||(u[0]=d=>he(t).filterBy.globalFileType.fileType=d),class:"rounded-md w-full text-sm"},[X9,(H(!0),me(Nt,null,Fn(he(r),d=>(H(),me("option",{key:d.label,value:d.value},xt(d.label),9,Y9))),128))],512)),[[wh,he(t).filterBy.globalFileType.fileType]]):ot("",!0)]),_:1},8,["rowIndex","onRemove"]))}});const Q9=sn(J9,[["__scopeId","data-v-0b78b9fe"]]),eH={class:"my-4"},tH={class:"flex justify-between"},nH={class:"flex items-baseline gap-2 mb-2"},iH=ue("h3",{class:"font-bold"},"Fields",-1),rH={key:0,class:"p-4 bg-transparent-black-50 rounded-md flex flex-col gap-4 sm:gap-2 mb-4"},sH={class:"flex justify-between items-baseline"},aH={class:"divide-y divide-neutral-200"},oH={class:"flex-1"},lH=lt({__name:"FilterByFieldsSection",setup(e){const t=Ai(),i=Nr(),r=Oe(()=>t.searchableFields.filter(d=>i.supportedSpecificFieldTypes.includes(d.type))),s=Oe(()=>{const{globalDateRangeAsFilter:d,globalLocationAsFilter:l,globalFileTypeAsFilter:m}=i;return[d,l,m].filter(g=>!!g)}),u=Oe(()=>[...i.specificFieldFilters,...s.value].sort((d,l)=>d.createdAt>l.createdAt?1:d.createdAt<l.createdAt?-1:0));return(d,l)=>(H(),me("section",eH,[ue("div",tH,[ue("header",nH,[iH,he(i).hasFieldFiltersApplied?(H(),We(si,{key:0,variant:"tertiary",onClick:he(i).clearSearchableFieldsFilters},{default:Me(()=>[Mt(" clear ")]),_:1},8,["onClick"])):ot("",!0)])]),he(i).hasFieldFiltersApplied?(H(),me("div",rH,[(H(!0),me(Nt,null,Fn(u.value,(m,g)=>(H(),me("div",{key:m.id},[m.fieldId===he(il).DATE_RANGE?(H(),We(k9,{key:0,rowIndex:g},null,8,["rowIndex"])):m.fieldId===he(il).LOCATION?(H(),We(Z9,{key:1,rowIndex:g},null,8,["rowIndex"])):m.fieldId===he(il).FILE_TYPE?(H(),We(Q9,{key:2,rowIndex:g},null,8,["rowIndex"])):(H(),We(A9,{key:3,filter:m,rowIndex:g},null,8,["filter","rowIndex"]))]))),128))])):ot("",!0),ue("div",sH,[r.value.length?(H(),We(hk,{key:0,label:"Add Field"},{default:Me(()=>[ue("div",aH,[ue("div",null,[(H(!0),me(Nt,null,Fn(r.value,m=>(H(),We(Yf,{key:m.id,class:"flex items-center justify-between cursor-pointer",onClick:g=>he(i).addSearchableFieldFilter(m.id)},{default:Me(()=>[ue("span",oH,xt(m.label),1)]),_:2},1032,["onClick"]))),128))]),ue("div",null,[ye(Yf,{class:"flex items-center cursor-pointer aria-disabled:opacity-25",disabled:he(i).hasDateRangeFilter,onClick:l[0]||(l[0]=m=>he(i).addDateRangeFilter())},{default:Me(()=>[Mt(" Any Date ")]),_:1},8,["disabled"]),ye(Yf,{class:"flex items-center cursor-pointer aria-disabled:opacity-25",disabled:he(i).hasLocationFilter,onClick:l[1]||(l[1]=m=>he(i).addLocationFilter())},{default:Me(()=>[Mt(" Any Location ")]),_:1},8,["disabled"]),ye(Yf,{class:"flex items-center cursor-pointer aria-disabled:opacity-25",disabled:he(i).hasFileTypeFilter,onClick:l[2]||(l[2]=m=>he(i).addFileTypeFilter())},{default:Me(()=>[Mt(" Any File Type ")]),_:1},8,["disabled"])])])]),_:1})):ot("",!0)])]))}}),cH={class:"inline-flex items-center gap-1.5"},uH={class:"sr-only"},dH=lt({__name:"Toggle",props:{modelValue:{type:Boolean},settingLabel:{},offLabel:{},onLabel:{},toggleClass:{},toggleOnClass:{},toggleOffClass:{},onLabelClass:{},offLabelClass:{}},emits:["update:modelValue"],setup(e){return(t,i)=>(H(),We(he(jj),null,{default:Me(()=>[ue("div",cH,[t.offLabel?(H(),We(he(EE),{key:0,class:Dn(t.offLabelClass)},{default:Me(()=>[Mt(xt(t.offLabel),1)]),_:1},8,["class"])):ot("",!0),ye(he(Vj),{modelValue:t.modelValue,class:Dn([t.modelValue?"bg-blue-600":"bg-neutral-200","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",t.toggleClass,t.modelValue?t.toggleOnClass:t.toggleOffClass]),"onUpdate:modelValue":i[0]||(i[0]=r=>t.$emit("update:modelValue",r))},{default:Me(()=>[ue("span",uH,xt(t.settingLabel),1),ue("span",{"aria-hidden":"true",class:Dn([t.modelValue?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"])},null,2)]),_:1},8,["modelValue","class"]),t.onLabel?(H(),We(he(EE),{key:1,class:Dn(t.onLabelClass)},{default:Me(()=>[Mt(xt(t.onLabel),1)]),_:1},8,["class"])):ot("",!0)])]),_:1}))}}),hH=["onSubmit"],fH={class:"p-2"},pH=ue("h1",{class:"sr-only"},"Advanced Search",-1),mH={class:"px-2"},gH=ue("h2",{class:"font-bold text-xs uppercase pb-2 border-b border-b-neutral-200"}," Filter By ",-1),vH={class:"max-h-[60vh] overflow-y-auto px-2"},_H={class:"flex bg-transparent-black-100 p-2 justify-between items-center gap-4"},yH=lt({__name:"AdvancedSearchForm",emits:["close","submit"],setup(e,{emit:t}){const i=Nr(),r=Ai(),s=Fe(null);fz(s,()=>{t("close")});function u(l){l.key==="Escape"&&t("close")}function d(l){l.preventDefault(),i.isValidSearch&&t("submit")}return Bn(()=>{document.addEventListener("keydown",u)}),Wi(()=>{document.removeEventListener("keydown",u)}),(l,m)=>{var g;return H(),me("form",{ref_key:"advancedSearchForm",ref:s,class:"bg-white rounded-3xl shadow-md",onSubmit:Mo(d,["prevent"])},[ue("div",fH,[pH,ye(dk,{class:"mb-4",onMoreOptionClick:m[0]||(m[0]=x=>l.$emit("close"))}),ue("div",mH,[gH,ue("div",vH,[ye(s9),ye(lH)])])]),ue("div",_H,[ue("div",null,[(g=he(r).currentUser)!=null&&g.isAdmin?(H(),We(dH,{key:0,modelValue:he(i).filterBy.includeHiddenAssets,"onUpdate:modelValue":m[1]||(m[1]=x=>he(i).filterBy.includeHiddenAssets=x),class:"ml-4",settingLabel:"Include Hidden Assets",onLabel:"Include Hidden",onLabelClass:"text-sm"},null,8,["modelValue"])):ot("",!0)]),ue("div",null,[ye(si,{variant:"tertiary",type:"button",onClick:he(i).clearAllFilters},{default:Me(()=>[Mt("Clear All")]),_:1},8,["onClick"]),ye(si,{variant:"primary",type:"submit",class:"!rounded-full",disabled:!he(i).isValidSearch},{default:Me(()=>[Mt(" Search ")]),_:1},8,["disabled"])])])],40,hH)}}}),bH={};function xH(e,t){return H(),We(Er,{enterActiveClass:"ease-inout duration-200",enterFromClass:"opacity-0",enterToClass:"opacity-100",leaveActiveClass:"ease-inout duration-300",leaveFromClass:"opacity-100",leaveToClass:"opacity-0"},{default:Me(()=>[Mn(e.$slots,"default")]),_:3})}const KE=sn(bH,[["render",xH]]),wH={class:"relative"},SH=["onSubmit"],TH={key:0,class:"fixed inset-0 bg-transparent-black-700 z-30"},EH=lt({__name:"SearchBar",setup(e){const t=Fe(null),i=Fe(!1),r=Nr(),s=$o();async function u(){i.value=!1;const g=await r.getSearchId();if(!g){s.push({name:"error",params:{errorCode:400}});return}s.push({name:"search",params:{searchId:g}})}function d(g){var x;t.value&&g.metaKey&&g.key==="k"&&(g.preventDefault(),(x=t.value.$el.querySelector("input"))==null||x.focus())}function l(g){var x;t.value&&g.key==="Escape"&&((x=t.value.$el.querySelector("input"))==null||x.blur())}document.addEventListener("keydown",d),document.addEventListener("keydown",l);const m=Eu();return fn(m,(g,x)=>{const w=g.name!==(x==null?void 0:x.name),C=!["search","asset"].includes(g.name);w&&C&&(r.query="",r.clearAllFilters())},{immediate:!0}),(g,x)=>(H(),me("div",wH,[ue("form",{class:"search-bar",onSubmit:Mo(u,["prevent"])},[ye(dk,{onMoreOptionClick:x[0]||(x[0]=w=>i.value=!0),onClearAllFilters:x[1]||(x[1]=()=>{i.value||u()})})],40,SH),ye(KE,null,{default:Me(()=>[i.value?(H(),We(yH,{key:0,isOpen:i.value,class:"fixed top-1 right-1 left-1 m-auto z-40 sm:absolute sm:!-top-2 sm:!-right-2 sm:!-left-2 advanced-search-form",onSubmit:u,onClose:x[2]||(x[2]=w=>i.value=!1)},null,8,["isOpen"])):ot("",!0)]),_:1}),ye(KE,null,{default:Me(()=>[i.value?(H(),me("div",TH)):ot("",!0)]),_:1})]))}});const CH=sn(EH,[["__scopeId","data-v-eaa63840"]]),IH={class:"flex gap-2 items-center"},AH=["src","alt"],MH={class:"app-header__wordmark font-bold text-lg hidden md:block"},kH=lt({__name:"AppLogoMark",setup(e){const t=Ai();return(i,r)=>(H(),me("div",IH,[he(t).instance.logoImg?(H(),me("img",{key:0,src:he(t).instance.logoImg.src,alt:he(t).instance.logoImg.alt,class:"app-header__logo-img h-8"},null,8,AH)):(H(),We(TN,{key:1,class:"h-full app-header__icon"})),ue("h1",MH,xt(he(t).instance.name),1)]))}}),PH={class:"avatar inline-flex justify-center items-center rounded-full w-6 h-6 border text-xs border-neutral-900 font-sans"},DH=lt({__name:"Avatar",props:{name:{}},setup(e){const t=e,i=Oe(()=>t.name.length?t.name[0].toUpperCase():"X");return(r,s)=>(H(),me("div",PH,xt(i.value),1))}}),LH={key:1},OH={class:"p-4 border-b border-neutral-300 text-xs flex items-center gap-1"},RH=ue("span",{class:"text-neutral-400"}," Signed in as ",-1),FH={class:"font-normal"},$H=lt({__name:"AuthDropDown",props:{currentUser:{},instance:{}},setup(e){const t=e,i=Eu(),r=WA(),s=Oe(()=>{var l;const d=((l=r.value)==null?void 0:l.href)??ci.instance.base.url;return encodeURIComponent(d)}),u=Oe(()=>t.currentUser?t.currentUser.displayName:"Login");return(d,l)=>(H(),We($1,{label:u.value,showChevron:!1},{label:Me(()=>[d.currentUser?(H(),We(DH,{key:0,name:d.currentUser.displayName},null,8,["name"])):(H(),me("span",LH,"Login"))]),default:Me(()=>[d.currentUser?(H(),me(Nt,{key:0},[ue("div",OH,[RH,ue("b",FH,xt(d.currentUser.displayName),1)]),d.currentUser.id?(H(),We(Nd,{key:0,href:`${he(ci).instance.base.url}/permissions/editUser/${d.currentUser.id}`},{default:Me(()=>[Mt(" Preferences ")]),_:1},8,["href"])):ot("",!0),ye(Nd,{to:"/logout"},{default:Me(()=>[Mt("Logout")]),_:1})],64)):(H(),me(Nt,{key:1},[d.instance.useCentralAuth&&d.instance.centralAuthLabel?(H(),We(Nd,{key:0,href:`${he(ci).instance.base.url}/loginManager/remoteLogin/?redirect=${s.value}`},{default:Me(()=>[Mt(xt(d.instance.centralAuthLabel)+" Login ",1)]),_:1},8,["href"])):ot("",!0),ye(Nd,{to:`/loginManager/localLogin/?redirect=${he(i).path}`},{default:Me(()=>[Mt(xt(d.instance.useCentralAuth?"Guest":"")+" Login ",1)]),_:1},8,["to"])],64))]),_:1},8,["label"]))}}),zH={class:"app-header flex flex-col gap-2"},BH={class:"flex justify-between items-center md:gap-8 px-4 py-2"},NH={class:"flex gap-2 items-center"},UH={class:"flex gap-2 items-center"},jH={class:"app-header__secondary-nav"},VH=lt({__name:"AppHeader",setup(e){const t=Ai(),i=Oe(()=>t.currentUser);return(r,s)=>(H(),me("header",zH,[ue("div",BH,[ue("div",NH,[ye(as,{to:"/",class:"app-header__logo-link hover:no-underline mr-4"},{default:Me(()=>[ye(kH)]),_:1})]),he(t).instance.userCanSearchAndBrowse?(H(),We(CH,{key:0,class:"flex-1 w-full max-w-2xl"})):ot("",!0),ue("div",UH,[ye($H,{currentUser:i.value,instance:he(t).instance},null,8,["currentUser","instance"]),ye(FV)])]),ue("div",jH,[Mn(r.$slots,"default",{},void 0,!0)])]))}});const _k=sn(VH,[["__scopeId","data-v-bd7ec3e4"]]);const HH={},GH={class:"skipnav shadow-md",href:"#main"};function WH(e,t){return H(),me("a",GH," Skip to content ")}const qH=sn(HH,[["render",WH],["__scopeId","data-v-641f0db6"]]),ZH={id:"top",class:"min-h-screen pt-18 flex flex-col"},KH={id:"main",class:"flex-1 flex flex-col",tabindex:"-1"},XH={href:"#top",class:"fixed bottom-2 right-2 w-10 h-10 flex items-center justify-center rounded-full hover:bg-blue-100 z-20"},YH=ue("span",{class:"sr-only"},"Top",-1),oo=lt({__name:"DefaultLayout",setup(e){const{y:t}=Nz(),i=Oe(()=>t.value>0);return(r,s)=>(H(),me("div",ZH,[ye(qH,{href:"#main"}),ye(_k,{class:"app-header top-0 w-full z-20 sticky left-0"}),ue("main",KH,[Mn(r.$slots,"default")]),ye(Er,{name:"fade"},{default:Me(()=>[bs(ue("a",XH,[ye(he(O_)),YH],512),[[Ca,i.value]])]),_:1})]))}});/*! @license DOMPurify 3.0.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.3/LICENSE */const{entries:yk,setPrototypeOf:XE,isFrozen:JH,getPrototypeOf:QH,getOwnPropertyDescriptor:eG}=Object;let{freeze:xs,seal:eo,create:tG}=Object,{apply:nx,construct:ix}=typeof Reflect<"u"&&Reflect;nx||(nx=function(t,i,r){return t.apply(i,r)});xs||(xs=function(t){return t});eo||(eo=function(t){return t});ix||(ix=function(t,i){return new t(...i)});const nG=Aa(Array.prototype.forEach),YE=Aa(Array.prototype.pop),Nf=Aa(Array.prototype.push),dv=Aa(String.prototype.toLowerCase),O0=Aa(String.prototype.toString),iG=Aa(String.prototype.match),Ba=Aa(String.prototype.replace),rG=Aa(String.prototype.indexOf),sG=Aa(String.prototype.trim),Ws=Aa(RegExp.prototype.test),Uf=aG(TypeError);function Aa(e){return function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];return nx(e,t,r)}}function aG(e){return function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return ix(e,i)}}function Qn(e,t,i){var r;i=(r=i)!==null&&r!==void 0?r:dv,XE&&XE(e,null);let s=t.length;for(;s--;){let u=t[s];if(typeof u=="string"){const d=i(u);d!==u&&(JH(t)||(t[s]=d),u=d)}e[u]=!0}return e}function Ad(e){const t=tG(null);for(const[i,r]of yk(e))t[i]=r;return t}function jg(e,t){for(;e!==null;){const r=eG(e,t);if(r){if(r.get)return Aa(r.get);if(typeof r.value=="function")return Aa(r.value)}e=QH(e)}function i(r){return console.warn("fallback value for",r),null}return i}const JE=xs(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),R0=xs(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),F0=xs(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),oG=xs(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),$0=xs(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),lG=xs(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),QE=xs(["#text"]),e2=xs(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),z0=xs(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),t2=xs(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Vg=xs(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),cG=eo(/\{\{[\w\W]*|[\w\W]*\}\}/gm),uG=eo(/<%[\w\W]*|[\w\W]*%>/gm),dG=eo(/\${[\w\W]*}/gm),hG=eo(/^data-[\-\w.\u00B7-\uFFFF]/),fG=eo(/^aria-[\-\w]+$/),bk=eo(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),pG=eo(/^(?:\w+script|data):/i),mG=eo(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),xk=eo(/^html$/i);var n2=Object.freeze({__proto__:null,MUSTACHE_EXPR:cG,ERB_EXPR:uG,TMPLIT_EXPR:dG,DATA_ATTR:hG,ARIA_ATTR:fG,IS_ALLOWED_URI:bk,IS_SCRIPT_OR_DATA:pG,ATTR_WHITESPACE:mG,DOCTYPE_NAME:xk});const gG=()=>typeof window>"u"?null:window,vG=function(t,i){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const s="data-tt-policy-suffix";i&&i.hasAttribute(s)&&(r=i.getAttribute(s));const u="dompurify"+(r?"#"+r:"");try{return t.createPolicy(u,{createHTML(d){return d},createScriptURL(d){return d}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function wk(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gG();const t=jt=>wk(jt);if(t.version="3.0.3",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;const i=e.document,r=i.currentScript;let{document:s}=e;const{DocumentFragment:u,HTMLTemplateElement:d,Node:l,Element:m,NodeFilter:g,NamedNodeMap:x=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:w,DOMParser:C,trustedTypes:I}=e,M=m.prototype,L=jg(M,"cloneNode"),$=jg(M,"nextSibling"),F=jg(M,"childNodes"),U=jg(M,"parentNode");if(typeof d=="function"){const jt=s.createElement("template");jt.content&&jt.content.ownerDocument&&(s=jt.content.ownerDocument)}let ee,V="";const{implementation:Q,createNodeIterator:ae,createDocumentFragment:be,getElementsByTagName:te}=s,{importNode:G}=i;let j={};t.isSupported=typeof yk=="function"&&typeof U=="function"&&Q&&Q.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:z,ERB_EXPR:ie,TMPLIT_EXPR:X,DATA_ATTR:ne,ARIA_ATTR:Ee,IS_SCRIPT_OR_DATA:Ce,ATTR_WHITESPACE:Xe}=n2;let{IS_ALLOWED_URI:at}=n2,it=null;const $t=Qn({},[...JE,...R0,...F0,...$0,...QE]);let Ct=null;const tt=Qn({},[...e2,...z0,...t2,...Vg]);let et=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),dt=null,Be=null,Ke=!0,ut=!0,Ot=!1,Vt=!0,_n=!1,qt=!1,_e=!1,ke=!1,ge=!1,ft=!1,q=!1,fe=!0,Pe=!1;const Ge="user-content-";let pt=!0,ht=!1,zt={},Dt=null;const Gt=Qn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ln=null;const vt=Qn({},["audio","video","img","source","image","track"]);let Rn=null;const Ln=Qn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ye="http://www.w3.org/1998/Math/MathML",Qe="http://www.w3.org/2000/svg",Re="http://www.w3.org/1999/xhtml";let mt=Re,St=!1,Yt=null;const an=Qn({},[Ye,Qe,Re],O0);let Pt;const qn=["application/xhtml+xml","text/html"],Cn="text/html";let Ut,vn=null;const kn=s.createElement("form"),de=function(He){return He instanceof RegExp||He instanceof Function},Y=function(He){if(!(vn&&vn===He)){if((!He||typeof He!="object")&&(He={}),He=Ad(He),Pt=qn.indexOf(He.PARSER_MEDIA_TYPE)===-1?Pt=Cn:Pt=He.PARSER_MEDIA_TYPE,Ut=Pt==="application/xhtml+xml"?O0:dv,it="ALLOWED_TAGS"in He?Qn({},He.ALLOWED_TAGS,Ut):$t,Ct="ALLOWED_ATTR"in He?Qn({},He.ALLOWED_ATTR,Ut):tt,Yt="ALLOWED_NAMESPACES"in He?Qn({},He.ALLOWED_NAMESPACES,O0):an,Rn="ADD_URI_SAFE_ATTR"in He?Qn(Ad(Ln),He.ADD_URI_SAFE_ATTR,Ut):Ln,ln="ADD_DATA_URI_TAGS"in He?Qn(Ad(vt),He.ADD_DATA_URI_TAGS,Ut):vt,Dt="FORBID_CONTENTS"in He?Qn({},He.FORBID_CONTENTS,Ut):Gt,dt="FORBID_TAGS"in He?Qn({},He.FORBID_TAGS,Ut):{},Be="FORBID_ATTR"in He?Qn({},He.FORBID_ATTR,Ut):{},zt="USE_PROFILES"in He?He.USE_PROFILES:!1,Ke=He.ALLOW_ARIA_ATTR!==!1,ut=He.ALLOW_DATA_ATTR!==!1,Ot=He.ALLOW_UNKNOWN_PROTOCOLS||!1,Vt=He.ALLOW_SELF_CLOSE_IN_ATTR!==!1,_n=He.SAFE_FOR_TEMPLATES||!1,qt=He.WHOLE_DOCUMENT||!1,ge=He.RETURN_DOM||!1,ft=He.RETURN_DOM_FRAGMENT||!1,q=He.RETURN_TRUSTED_TYPE||!1,ke=He.FORCE_BODY||!1,fe=He.SANITIZE_DOM!==!1,Pe=He.SANITIZE_NAMED_PROPS||!1,pt=He.KEEP_CONTENT!==!1,ht=He.IN_PLACE||!1,at=He.ALLOWED_URI_REGEXP||bk,mt=He.NAMESPACE||Re,et=He.CUSTOM_ELEMENT_HANDLING||{},He.CUSTOM_ELEMENT_HANDLING&&de(He.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(et.tagNameCheck=He.CUSTOM_ELEMENT_HANDLING.tagNameCheck),He.CUSTOM_ELEMENT_HANDLING&&de(He.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(et.attributeNameCheck=He.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),He.CUSTOM_ELEMENT_HANDLING&&typeof He.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(et.allowCustomizedBuiltInElements=He.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),_n&&(ut=!1),ft&&(ge=!0),zt&&(it=Qn({},[...QE]),Ct=[],zt.html===!0&&(Qn(it,JE),Qn(Ct,e2)),zt.svg===!0&&(Qn(it,R0),Qn(Ct,z0),Qn(Ct,Vg)),zt.svgFilters===!0&&(Qn(it,F0),Qn(Ct,z0),Qn(Ct,Vg)),zt.mathMl===!0&&(Qn(it,$0),Qn(Ct,t2),Qn(Ct,Vg))),He.ADD_TAGS&&(it===$t&&(it=Ad(it)),Qn(it,He.ADD_TAGS,Ut)),He.ADD_ATTR&&(Ct===tt&&(Ct=Ad(Ct)),Qn(Ct,He.ADD_ATTR,Ut)),He.ADD_URI_SAFE_ATTR&&Qn(Rn,He.ADD_URI_SAFE_ATTR,Ut),He.FORBID_CONTENTS&&(Dt===Gt&&(Dt=Ad(Dt)),Qn(Dt,He.FORBID_CONTENTS,Ut)),pt&&(it["#text"]=!0),qt&&Qn(it,["html","head","body"]),it.table&&(Qn(it,["tbody"]),delete dt.tbody),He.TRUSTED_TYPES_POLICY){if(typeof He.TRUSTED_TYPES_POLICY.createHTML!="function")throw Uf('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof He.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Uf('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ee=He.TRUSTED_TYPES_POLICY,V=ee.createHTML("")}else ee===void 0&&(ee=vG(I,r)),ee!==null&&typeof V=="string"&&(V=ee.createHTML(""));xs&&xs(He),vn=He}},re=Qn({},["mi","mo","mn","ms","mtext"]),pe=Qn({},["foreignobject","desc","title","annotation-xml"]),Ie=Qn({},["title","style","font","a","script"]),$e=Qn({},R0);Qn($e,F0),Qn($e,oG);const qe=Qn({},$0);Qn(qe,lG);const Ve=function(He){let It=U(He);(!It||!It.tagName)&&(It={namespaceURI:mt,tagName:"template"});const gt=dv(He.tagName),ze=dv(It.tagName);return Yt[He.namespaceURI]?He.namespaceURI===Qe?It.namespaceURI===Re?gt==="svg":It.namespaceURI===Ye?gt==="svg"&&(ze==="annotation-xml"||re[ze]):!!$e[gt]:He.namespaceURI===Ye?It.namespaceURI===Re?gt==="math":It.namespaceURI===Qe?gt==="math"&&pe[ze]:!!qe[gt]:He.namespaceURI===Re?It.namespaceURI===Qe&&!pe[ze]||It.namespaceURI===Ye&&!re[ze]?!1:!qe[gt]&&(Ie[gt]||!$e[gt]):!!(Pt==="application/xhtml+xml"&&Yt[He.namespaceURI]):!1},Le=function(He){Nf(t.removed,{element:He});try{He.parentNode.removeChild(He)}catch{He.remove()}},Ze=function(He,It){try{Nf(t.removed,{attribute:It.getAttributeNode(He),from:It})}catch{Nf(t.removed,{attribute:null,from:It})}if(It.removeAttribute(He),He==="is"&&!Ct[He])if(ge||ft)try{Le(It)}catch{}else try{It.setAttribute(He,"")}catch{}},wt=function(He){let It,gt;if(ke)He="<remove></remove>"+He;else{const Wt=iG(He,/^[\r\n\t ]+/);gt=Wt&&Wt[0]}Pt==="application/xhtml+xml"&&mt===Re&&(He='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+He+"</body></html>");const ze=ee?ee.createHTML(He):He;if(mt===Re)try{It=new C().parseFromString(ze,Pt)}catch{}if(!It||!It.documentElement){It=Q.createDocument(mt,"template",null);try{It.documentElement.innerHTML=St?V:ze}catch{}}const yt=It.body||It.documentElement;return He&&gt&&yt.insertBefore(s.createTextNode(gt),yt.childNodes[0]||null),mt===Re?te.call(It,qt?"html":"body")[0]:qt?It.documentElement:yt},bt=function(He){return ae.call(He.ownerDocument||He,He,g.SHOW_ELEMENT|g.SHOW_COMMENT|g.SHOW_TEXT,null,!1)},Et=function(He){return He instanceof w&&(typeof He.nodeName!="string"||typeof He.textContent!="string"||typeof He.removeChild!="function"||!(He.attributes instanceof x)||typeof He.removeAttribute!="function"||typeof He.setAttribute!="function"||typeof He.namespaceURI!="string"||typeof He.insertBefore!="function"||typeof He.hasChildNodes!="function")},pn=function(He){return typeof l=="object"?He instanceof l:He&&typeof He=="object"&&typeof He.nodeType=="number"&&typeof He.nodeName=="string"},wn=function(He,It,gt){j[He]&&nG(j[He],ze=>{ze.call(t,It,gt,vn)})},un=function(He){let It;if(wn("beforeSanitizeElements",He,null),Et(He))return Le(He),!0;const gt=Ut(He.nodeName);if(wn("uponSanitizeElement",He,{tagName:gt,allowedTags:it}),He.hasChildNodes()&&!pn(He.firstElementChild)&&(!pn(He.content)||!pn(He.content.firstElementChild))&&Ws(/<[/\w]/g,He.innerHTML)&&Ws(/<[/\w]/g,He.textContent))return Le(He),!0;if(!it[gt]||dt[gt]){if(!dt[gt]&&En(gt)&&(et.tagNameCheck instanceof RegExp&&Ws(et.tagNameCheck,gt)||et.tagNameCheck instanceof Function&&et.tagNameCheck(gt)))return!1;if(pt&&!Dt[gt]){const ze=U(He)||He.parentNode,yt=F(He)||He.childNodes;if(yt&&ze){const Wt=yt.length;for(let In=Wt-1;In>=0;--In)ze.insertBefore(L(yt[In],!0),$(He))}}return Le(He),!0}return He instanceof m&&!Ve(He)||(gt==="noscript"||gt==="noembed")&&Ws(/<\/no(script|embed)/i,He.innerHTML)?(Le(He),!0):(_n&&He.nodeType===3&&(It=He.textContent,It=Ba(It,z," "),It=Ba(It,ie," "),It=Ba(It,X," "),He.textContent!==It&&(Nf(t.removed,{element:He.cloneNode()}),He.textContent=It)),wn("afterSanitizeElements",He,null),!1)},mn=function(He,It,gt){if(fe&&(It==="id"||It==="name")&&(gt in s||gt in kn))return!1;if(!(ut&&!Be[It]&&Ws(ne,It))){if(!(Ke&&Ws(Ee,It))){if(!Ct[It]||Be[It]){if(!(En(He)&&(et.tagNameCheck instanceof RegExp&&Ws(et.tagNameCheck,He)||et.tagNameCheck instanceof Function&&et.tagNameCheck(He))&&(et.attributeNameCheck instanceof RegExp&&Ws(et.attributeNameCheck,It)||et.attributeNameCheck instanceof Function&&et.attributeNameCheck(It))||It==="is"&&et.allowCustomizedBuiltInElements&&(et.tagNameCheck instanceof RegExp&&Ws(et.tagNameCheck,gt)||et.tagNameCheck instanceof Function&&et.tagNameCheck(gt))))return!1}else if(!Rn[It]){if(!Ws(at,Ba(gt,Xe,""))){if(!((It==="src"||It==="xlink:href"||It==="href")&&He!=="script"&&rG(gt,"data:")===0&&ln[He])){if(!(Ot&&!Ws(Ce,Ba(gt,Xe,"")))){if(gt)return!1}}}}}}return!0},En=function(He){return He.indexOf("-")>0},Vn=function(He){let It,gt,ze,yt;wn("beforeSanitizeAttributes",He,null);const{attributes:Wt}=He;if(!Wt)return;const In={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ct};for(yt=Wt.length;yt--;){It=Wt[yt];const{name:Yn,namespaceURI:oi}=It;if(gt=Yn==="value"?It.value:sG(It.value),ze=Ut(Yn),In.attrName=ze,In.attrValue=gt,In.keepAttr=!0,In.forceKeepAttr=void 0,wn("uponSanitizeAttribute",He,In),gt=In.attrValue,In.forceKeepAttr||(Ze(Yn,He),!In.keepAttr))continue;if(!Vt&&Ws(/\/>/i,gt)){Ze(Yn,He);continue}_n&&(gt=Ba(gt,z," "),gt=Ba(gt,ie," "),gt=Ba(gt,X," "));const ri=Ut(He.nodeName);if(mn(ri,ze,gt)){if(Pe&&(ze==="id"||ze==="name")&&(Ze(Yn,He),gt=Ge+gt),ee&&typeof I=="object"&&typeof I.getAttributeType=="function"&&!oi)switch(I.getAttributeType(ri,ze)){case"TrustedHTML":{gt=ee.createHTML(gt);break}case"TrustedScriptURL":{gt=ee.createScriptURL(gt);break}}try{oi?He.setAttributeNS(oi,Yn,gt):He.setAttribute(Yn,gt),YE(t.removed)}catch{}}}wn("afterSanitizeAttributes",He,null)},$n=function jt(He){let It;const gt=bt(He);for(wn("beforeSanitizeShadowDOM",He,null);It=gt.nextNode();)wn("uponSanitizeShadowNode",It,null),!un(It)&&(It.content instanceof u&&jt(It.content),Vn(It));wn("afterSanitizeShadowDOM",He,null)};return t.sanitize=function(jt){let He=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},It,gt,ze,yt;if(St=!jt,St&&(jt="<!-->"),typeof jt!="string"&&!pn(jt))if(typeof jt.toString=="function"){if(jt=jt.toString(),typeof jt!="string")throw Uf("dirty is not a string, aborting")}else throw Uf("toString is not a function");if(!t.isSupported)return jt;if(_e||Y(He),t.removed=[],typeof jt=="string"&&(ht=!1),ht){if(jt.nodeName){const Yn=Ut(jt.nodeName);if(!it[Yn]||dt[Yn])throw Uf("root node is forbidden and cannot be sanitized in-place")}}else if(jt instanceof l)It=wt("<!---->"),gt=It.ownerDocument.importNode(jt,!0),gt.nodeType===1&&gt.nodeName==="BODY"||gt.nodeName==="HTML"?It=gt:It.appendChild(gt);else{if(!ge&&!_n&&!qt&&jt.indexOf("<")===-1)return ee&&q?ee.createHTML(jt):jt;if(It=wt(jt),!It)return ge?null:q?V:""}It&&ke&&Le(It.firstChild);const Wt=bt(ht?jt:It);for(;ze=Wt.nextNode();)un(ze)||(ze.content instanceof u&&$n(ze.content),Vn(ze));if(ht)return jt;if(ge){if(ft)for(yt=be.call(It.ownerDocument);It.firstChild;)yt.appendChild(It.firstChild);else yt=It;return(Ct.shadowroot||Ct.shadowrootmod)&&(yt=G.call(i,yt,!0)),yt}let In=qt?It.outerHTML:It.innerHTML;return qt&&it["!doctype"]&&It.ownerDocument&&It.ownerDocument.doctype&&It.ownerDocument.doctype.name&&Ws(xk,It.ownerDocument.doctype.name)&&(In="<!DOCTYPE "+It.ownerDocument.doctype.name+`>
`+In),_n&&(In=Ba(In,z," "),In=Ba(In,ie," "),In=Ba(In,X," ")),ee&&q?ee.createHTML(In):In},t.setConfig=function(jt){Y(jt),_e=!0},t.clearConfig=function(){vn=null,_e=!1},t.isValidAttribute=function(jt,He,It){vn||Y({});const gt=Ut(jt),ze=Ut(He);return mn(gt,ze,It)},t.addHook=function(jt,He){typeof He=="function"&&(j[jt]=j[jt]||[],Nf(j[jt],He))},t.removeHook=function(jt){if(j[jt])return YE(j[jt])},t.removeHooks=function(jt){j[jt]&&(j[jt]=[])},t.removeAllHooks=function(){j={}},t}var _G=wk();const yG=["innerHTML"],ch=lt({__name:"SanitizedHTML",props:{html:{},removeInlineStyles:{type:Boolean,default:!1}},setup(e){const t=e,i={FORBID_ATTR:t.removeInlineStyles?["style"]:[]},r=Oe(()=>_G.sanitize(t.html,i));return(s,u)=>(H(),me("div",{innerHTML:r.value},null,8,yG))}});function bG(e){const{overflowY:t,overflowX:i}=getComputedStyle(e);return!t.includes("hidden")&&!t.includes("visible")&&!i.includes("hidden")&&!i.includes("visible")&&e.scrollHeight>=e.clientHeight}function Sk(e){return!e||!(e instanceof HTMLElement)?document.body:bG(e)?e:Sk(e.parentNode)??document.body}const xG=["src","alt"],wG={key:1,class:"lazy-load-image__placeholder bg-neutral-200 border-neutral-300 text-neutral-400 absolute inset-0 z-10 flex items-center justify-center border"},SG=lt({__name:"LazyLoadImage",props:{src:{},alt:{}},setup(e){const t=Fe(null),i=Fe(!1),r=Fe(!1);function s(u,d){u.forEach(l=>{l.isIntersecting&&(i.value=!0,d.unobserve(l.target))})}return Bn(()=>{const u={root:Sk(t.value),rootMargin:"640px",threshold:0};$z(t,s,u)}),(u,d)=>(H(),me("div",{ref_key:"imgContainer",ref:t,class:"lazy-load-image relative"},[i.value?(H(),me("img",zr({key:0,class:["lazy-load-image__image bg-neutral-100 block transition-opacity opacity-0",{"opacity-100":r.value}],src:u.src,alt:u.alt??""},u.$attrs,{onLoad:d[0]||(d[0]=l=>r.value=!0)}),null,16,xG)):ot("",!0),r.value?ot("",!0):(H(),me("div",wG,[ye(C1)]))],512))}});const Au=sn(SG,[["__scopeId","data-v-83ff1a5e"]]),TG={key:0,class:"media-card flex flex-col overflow-hidden rounded-md shadow-sm max-w-xs group-hover:border-blue-700"},EG={class:"placeholder-image aspect-video flex items-center justify-center w-full overflow-hidden bg-transparent-black-200 p-4"},CG={class:"flex-1 p-4 flex justify-between items-center"},IG={class:"search-result-card__title font-bold leading-tight group-hover:text-blue-700 text-center"},AG=lt({__name:"FeaturedAssetCard",props:{assetId:{}},setup(e){const t=e,i=Fe(null);fn(()=>t.assetId,async()=>{i.value=await Wn.getAsset(t.assetId)},{immediate:!0});const r=Oe(()=>i.value?Tu(i.value):""),s=Oe(()=>{var d;const u=((d=i.value)==null?void 0:d.firstFileHandlerId)??null;return u?_c(u):null});return(u,d)=>(H(),We(as,{to:he(dl)(u.assetId),class:"group hover:no-underline relative"},{default:Me(()=>[ye(Er,{name:"fade"},{default:Me(()=>[i.value?(H(),me("article",TG,[ue("div",EG,[s.value?(H(),We(Au,{key:0,src:s.value,alt:r.value||"Untitled",loading:"lazy",class:"object-contain w-full h-full !bg-transparent"},null,8,["src","alt"])):(H(),We(he(Fp),{key:1}))]),ue("div",CG,[ue("h1",IG,[ye(ch,{html:r.value},null,8,["html"])]),ye(he(Cu),{class:"group-hover:text-blue-700"})])])):ot("",!0)]),_:1})]),_:1},8,["to"]))}});const MG=sn(AG,[["__scopeId","data-v-cf0ba366"]]),kG={class:"app-footer bg-transparent-black-100"},PG=lt({__name:"AppFooter",setup(e){const t=Ai();return(i,r)=>(H(),me("footer",kG,[he(t).customFooter?(H(),We(ch,{key:0,class:"flex flex-col max-w-screen-xl mx-auto p-4 lg:p-8",html:he(t).customFooter},null,8,["html"])):ot("",!0)]))}});const Tk=sn(PG,[["__scopeId","data-v-45761720"]]),Ek=e=>(ro("data-v-3806ef7d"),e=e(),so(),e),DG={class:"page-content-block col-span-2 p-4 lg:p-8"},LG={key:0,class:"featured-asset-block col-span-1 p-4 lg:p-8"},OG=Ek(()=>ue("h2",{class:"text-sm font-bold uppercase mb-2"},"Featured",-1)),RG={class:"mb-4"},FG=Ek(()=>ue("p",null," Your account does not have permission to search and browse assets. Please contact your administrator if you believe this is an error. ",-1)),$G=lt({__name:"HomePage",setup(e){const t=Fe(null),i=Ai(),r=Oe(()=>{var C;return((C=i.instance)==null?void 0:C.userCanSearchAndBrowse)??!1}),s=Oe(()=>i.isReady),u={title:"No Home Page",content:"<p>Update your instance to set a Home Page</p>"},d=Oe(()=>{var C;return((C=i.instance)==null?void 0:C.featuredAssetId)??null}),l=Oe(()=>{var C;return((C=i.instance)==null?void 0:C.featuredAssetText)??""}),m=Fe(null);function g(){var C;return(C=i.pages.find(I=>I.title==="Home Page"))==null?void 0:C.id}async function x(C){return C?Wn.getStaticPage(C):u}async function w(C){return C?Wn.getAsset(C):null}return fn(()=>i.fetchStatus,async()=>{if(i.fetchStatus!=="success"||!r.value)return;const C=g();t.value=await x(C),m.value=await w(d.value)},{immediate:!0}),(C,I)=>(H(),We(oo,null,{default:Me(()=>[s.value&&!r.value&&!he(i).isLoggedIn?(H(),We(hM,{key:0,class:"my-8 mx-4"})):ot("",!0),s.value&&r.value?(H(),me("div",{key:1,class:Dn(["home-page-content flex-1 md:grid max-w-screen-xl w-full mx-auto",{"md:grid-cols-2":!d.value,"md:grid-cols-3":d.value}])},[ue("article",DG,[ye(Er,{name:"fade"},{default:Me(()=>[t.value?(H(),We(ch,{key:0,html:t.value.content??"",class:"prose prose-neutral"},null,8,["html"])):ot("",!0)]),_:1})]),d.value?(H(),me("aside",LG,[OG,ue("div",RG,[ye(ch,{html:l.value},null,8,["html"])]),ye(MG,{assetId:d.value},null,8,["assetId"])])):ot("",!0)],2)):s.value&&!r.value&&he(i).isLoggedIn?(H(),We(cm,{key:2,title:"Nothing to See Here",class:"my-8 mx-4"},{default:Me(()=>[FG]),_:1})):ot("",!0),ye(Tk)]),_:1}))}});const zG=sn($G,[["__scopeId","data-v-3806ef7d"]]),BG={class:"h-screen flex flex-col"},NG={ref:"contentContainer",class:"flex-1 mt-18 md:mt-0 overflow-auto"},Ck=lt({__name:"NoScrollLayout",setup(e){return(t,i)=>(H(),me("div",BG,[ye(_k,{class:"top-0 w-full z-20 backdrop-blur-sm"},{default:Me(()=>[Mn(t.$slots,"secondaryAppHeader")]),_:3}),ue("div",NG,[Mn(t.$slots,"default")],512)]))}}),UG={class:"object-viewer relative flex flex-col"},jG=ue("h2",{class:"sr-only"},"Object Viewer",-1),VG=["src"],HG={key:1,class:"w-full h-full min-h-[20rem] bg-neutral-400 place-items-center p-8"},GG=ue("p",null,"No asset file found.",-1),WG={class:"text-sm"},Ik=lt({__name:"ObjectViewer",props:{fileHandlerId:{}},setup(e){return(t,i)=>(H(),me("section",UG,[jG,t.fileHandlerId?(H(),me("iframe",{key:0,class:"object-viewer__iframe w-full flex-1",src:`${he(ci).instance.base.url}/asset/getEmbed/${t.fileHandlerId}`,frameBorder:"0",allowfullscreen:"true"},null,8,VG)):(H(),me("div",HG,[GG,ue("code",WG,"FileHandlerId: "+xt(t.fileHandlerId??"null"),1)]))]))}}),qG=["title"],ZG=["innerHTML"],Ak=lt({__name:"PanelLabel",props:{label:{}},setup(e){return(t,i)=>(H(),me("h1",{class:"header-label font-bold relative text-left",title:t.label},[ue("span",{class:"min-w-0 block",innerHTML:t.label},null,8,ZG)],8,qG))}}),KG={class:"panel flex flex-col overflow-auto"},XG=["disabled"],YG={key:0},JG={class:"panel__header-utils"},QG={class:"panel__body flex flex-col gap-6 px-4 md:p-8 flex-1"},eW=lt({__name:"Panel",props:{label:{},isOpen:{type:Boolean,default:!0},showToggle:{type:Boolean,default:!0}},emits:["toggle"],setup(e){return(t,i)=>(H(),me("section",KG,[ue("header",{class:Dn(["panel__header flex items-center sticky top-0 left-0 justify-between z-10 backdrop-blur-[2px]",{"h-full":!t.isOpen}])},[ue("button",{disabled:!t.showToggle,class:"flex items-center p-4 leading-tight gap-4 flex-1",onClick:i[0]||(i[0]=r=>t.$emit("toggle"))},[t.showToggle?(H(),me("span",YG,[t.isOpen?(H(),We(Ch,{key:0,class:"w-5 h-5"})):ot("",!0),t.isOpen?ot("",!0):(H(),We(O_,{key:1,class:"w-5 h-5"}))])):ot("",!0),Mn(t.$slots,"header-label",{},()=>[ye(Ak,{label:t.label,isOpen:t.isOpen},null,8,["label","isOpen"])],!0)],8,XG),ue("div",JG,[Mn(t.$slots,"header-utils",{},void 0,!0)])],2),bs(ue("div",QG,[Mn(t.$slots,"default",{},void 0,!0)],512),[[Ca,t.isOpen]])]))}});const Mk=sn(eW,[["__scopeId","data-v-a57c7f16"]]),tW={class:"tuple__label"},nW={inheritAttrs:!1},iW=lt({...nW,__name:"Tuple",props:{label:{},variant:{default:"stacked"}},setup(e){return(t,i)=>(H(),me("div",{class:Dn(["tuple",{"w-full":t.variant==="stacked","inline-flex items-baseline gap-2":t.variant==="inline"}])},[ue("div",tW,[Mn(t.$slots,"label",{},()=>[ue("span",{class:Dn(["text-xs block uppercase leading-none mb-1 tracking-wide",{"font-bold":t.variant==="stacked","sr-only":t.variant==="value-only"}])},xt(t.label),3)],!0)]),ue("span",zr({class:"tuple__value block"},t.$attrs),[Mn(t.$slots,"default",{},()=>[Mt(" - ")],!0)],16)],2))}});const Js=sn(iW,[["__scopeId","data-v-304b7d45"]]),rW={key:0},sW=["href","onClick"],aW={key:1},fm=lt({__name:"ClickToSearchLink",props:{linkText:{},widget:{}},setup(e){const t=e,i=$o(),r=Nr(),s=Oe(()=>PA(t.linkText,t.widget));async function u(){r.reset();const d=await Wn.getSearchIdForClickToSearch(t.linkText,t.widget);i.push(`/search/s/${d}`)}return(d,l)=>t.widget.clickToSearch?(H(),me("span",rW,[ue("a",{href:s.value,class:"text-blue-600 hover:text-blue-700 hover:underline",onClick:Mo(u,["prevent"])},[Mn(d.$slots,"default",{isClickable:!0})],8,sW)])):(H(),me("span",aW,[Mn(d.$slots,"default",{isClickable:!1})]))}}),oW=["innerHTML"],lW=lt({__name:"TextWidget",props:{widget:{},contents:{}},setup(e){function t(i){return i.replace(/(<([^>]+)>)/gi,"")!=i?i:i.replace(/(https?:\/\/[a-zA-Z0-9\-_.:@!~*'();/?&=+$,%#]+)/g,'<a href="$1" target="_blank">$1</a>')}return(i,r)=>(H(),me("ul",null,[(H(!0),me(Nt,null,Fn(i.contents,(s,u)=>(H(),me("li",{key:u},[ye(fm,{widget:i.widget,linkText:s.fieldContents},{default:Me(()=>[ue("span",{innerHTML:t(s.fieldContents)},null,8,oW)]),_:2},1032,["widget","linkText"])]))),128))]))}}),cW=["innerHTML"],uW=lt({__name:"SelectItem",props:{selectValues:{},widget:{}},setup(e){const t=e,i=Oe(()=>typeof t.selectValues.fieldContents=="string"?[t.selectValues.fieldContents]:t.selectValues.fieldContents);function r(s){var u,d;return(u=t.widget.fieldData.selectGroup)!=null&&u.hasOwnProperty(s)?(d=t.widget.fieldData)==null?void 0:d.selectGroup[s]:s}return(s,u)=>(H(!0),me(Nt,null,Fn(i.value,(d,l)=>(H(),me("li",{key:l},[ye(fm,{widget:s.widget,linkText:r(d)},{default:Me(()=>[ue("div",{innerHTML:r(d)},null,8,cW)]),_:2},1032,["widget","linkText"])]))),128))}}),dW=lt({__name:"SelectWidget",props:{widget:{},contents:{}},setup(e){return(t,i)=>(H(),me("ul",null,[(H(!0),me(Nt,null,Fn(t.contents,(r,s)=>(H(),We(uW,{key:s,selectValues:r,widget:t.widget},null,8,["selectValues","widget"]))),128))]))}}),hW=lt({__name:"CheckBoxWidget",props:{widget:{},contents:{}},setup(e){return(t,i)=>(H(),me("ul",null,[(H(!0),me(Nt,null,Fn(t.contents,(r,s)=>(H(),me("li",{key:s},[r.fieldContents==!0?(H(),We(cM,{key:0})):(H(),We(J6,{key:1}))]))),128))]))}});/**
  shave - Shave is a javascript plugin that truncates multi-line text within a html element based on set max height
  @version v5.0.2
  @link https://github.com/yowainwright/shave#readme
  @author Jeff Wainwright <yowainwright@gmail.com> (jeffry.in)
  @license MIT
**/function i2(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),s,u=[],d;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)u.push(s.value)}catch(l){d={error:l}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(d)throw d.error}}return u}function r2(e,t,i){if(i||arguments.length===2)for(var r=0,s=t.length,u;r<s;r++)(u||!(r in t))&&(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return e.concat(u||Array.prototype.slice.call(t))}function fW(e){return typeof e=="string"?r2([],i2(document.querySelectorAll(e)),!1):"length"in e?r2([],i2(e),!1):[e]}function pW(e,t,i){if(i===void 0&&(i={}),typeof t>"u"||isNaN(t))throw Error("maxHeight is required");var r=fW(e);if(r.length)for(var s=i.character,u=s===void 0?"":s,d=i.classname,l=d===void 0?"js-shave":d,m=i.spaces,g=m===void 0?!0:m,x=i.charclassname,w=x===void 0?"js-shave-char":x,C=i.link,I=C===void 0?{}:C,M=typeof g=="boolean"?g:!0,L=I&&JSON.stringify(I)!=="{}"&&I.href,$=L?"a":"span",F=0;F<r.length;F+=1){var U=r[F],ee=U.style,V=U.querySelector("."+l),Q=U.textContent===void 0?"innerText":"textContent";V&&(U.removeChild(U.querySelector("."+w)),U[Q]=U[Q]);var ae=U[Q],be=M?ae.split(" "):ae;if(!(be.length<2)){var te=ee.height;ee.height="auto";var G=ee.maxHeight;if(ee.maxHeight="none",U.offsetHeight<=t){ee.height=te,ee.maxHeight=G;continue}var j=L&&I.textContent?I.textContent:u,z=document.createElement($),ie={className:w,textContent:j};for(var X in ie)z[X]=ie[X],z.textContent=u;if(L)for(var ne in I)z[ne]=I[ne];for(var Ee=be.length-1,Ce=0,Xe=void 0;Ce<Ee;)Xe=Ce+Ee+1>>1,U[Q]=M?be.slice(0,Xe).join(" "):be.slice(0,Xe),U.insertAdjacentElement("beforeend",z),U.offsetHeight>t?Ee=Xe-1:Ce=Xe;U[Q]=M?be.slice(0,Ee).join(" "):be.slice(0,Ee),U.insertAdjacentElement("beforeend",z);var at=M?" ".concat(be.slice(Ee).join(" ")):be.slice(Ee),it=document.createTextNode(at),$t=document.createElement("span");$t.classList.add(l),$t.style.display="none",$t.appendChild(it),U.insertAdjacentElement("beforeend",$t),ee.height=te,ee.maxHeight=G}}}const mW=["innerHTML"],gW=["innerHTML"],vW=lt({__name:"TextAreaItem",props:{fieldContents:{},widget:{},textTruncationHeight:{default:ci.instance.textAreaItem.defaultTextTruncationHeight}},setup(e){const t=e,i=Fe(!1),r=Fe(null),s=Fe(!1),u=jA(()=>{d()},50);function d(){r.value&&(pW([r.value],t.textTruncationHeight),s.value=r.value.querySelector(".js-shave")!==null)}return k_(r,u),Bn(()=>{d()}),(l,m)=>(H(),me(Nt,null,[i.value?ot("",!0):(H(),me("div",{key:0,ref_key:"truncateText",ref:r,innerHTML:l.fieldContents},null,8,mW)),i.value?(H(),me("div",{key:1,innerHTML:l.fieldContents},null,8,gW)):ot("",!0),s.value?(H(),me("button",{key:2,class:"flex items-center uppercase text-xs text-blue-600",onClick:m[0]||(m[0]=g=>i.value=!i.value)},[Mt(" Show "+xt(i.value?"Less":"More")+" ",1),i.value?(H(),We(O_,{key:0})):(H(),We(Ch,{key:1}))])):ot("",!0)],64))}}),_W={class:"text-area-widget flex flex-col gap-4"},yW=lt({__name:"TextAreaWidget",props:{widget:{},contents:{}},setup(e){return(t,i)=>(H(),me("ul",_W,[(H(!0),me(Nt,null,Fn(t.contents,(r,s)=>(H(),me("li",{key:s},[ye(vW,{widget:t.widget,fieldContents:r.fieldContents??""},null,8,["widget","fieldContents"])]))),128))]))}}),bW=lt({__name:"DateWidgetItem",props:{dateContent:{},widget:{}},setup(e){const t=e,i=Oe(()=>{let r="";return r+=t.dateContent.start.text,t.dateContent.range&&(r+=" - "+t.dateContent.end.text),r});return(r,s)=>(H(),We(fm,{widget:r.widget,linkText:i.value},{default:Me(()=>[r.dateContent.label?(H(),We(Js,{key:0,label:r.dateContent.label,variant:"inline"},{default:Me(()=>[Mt(xt(i.value),1)]),_:1},8,["label"])):(H(),me(Nt,{key:1},[Mt(xt(i.value),1)],64))]),_:1},8,["widget","linkText"]))}}),xW=lt({__name:"DateWidget",props:{widget:{},contents:{}},setup(e){return(t,i)=>(H(),me("ul",null,[(H(!0),me(Nt,null,Fn(t.contents,(r,s)=>(H(),me("li",{key:s},[ye(bW,{dateContent:r,widget:t.widget},null,8,["dateContent","widget"])]))),128))]))}}),kk=(e,t)=>{let i=[];for(const r in e)t||i.push(r),typeof e[r]=="object"&&(i=i.concat(kk(e[r],!t)));return i.flat()},wW=e=>e.filter((t,i,r)=>r.indexOf(t)===i),SW={key:0},TW=lt({__name:"MultiSelectItem",props:{widget:{},content:{}},setup(e){const t=e,i=Oe(()=>wW(kk(t.widget.fieldData,!1)).map(r)),r=u=>u.replace(/[^a-zA-Z0-9]+/,""),s=u=>{const d=[];for(const l of i.value)if(d.push(t.content.fieldContents[l]),l==u)return d.join(" : ");return d.join(" : ")};return(u,d)=>(H(),me("ul",null,[(H(!0),me(Nt,null,Fn(i.value,l=>(H(),me(Nt,{key:l},[u.content.fieldContents[l]?(H(),me("li",SW,[ye(fm,{widget:u.widget,linkText:s(l)},{default:Me(()=>[Mt(xt(u.content.fieldContents[l]),1)]),_:2},1032,["widget","linkText"])])):ot("",!0)],64))),128))]))}});const EW=sn(TW,[["__scopeId","data-v-34a7054d"]]),CW=lt({__name:"MultiSelectWidget",props:{widget:{},contents:{}},setup(e){return(t,i)=>(H(),me("ul",null,[(H(!0),me(Nt,null,Fn(t.contents,(r,s)=>(H(),me("li",{key:s},[ye(EW,{widget:t.widget,content:r},null,8,["widget","content"])]))),128))]))}}),IW={class:"modal-contents__header flex justify-between items-start p-4 md:p-8"},AW={class:"flex-1 font-bold text-2xl mr-12 flex items-center"},MW={class:"modal-contents__body flex-1 overflow-auto p-4 md:p-8"},kW={key:0,class:"modal-contents__footer"},PW=lt({__name:"Modal",props:{label:{default:""},isOpen:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:t}){const i=e,r=Fe();function s(u){i.isOpen&&u.keyCode===27&&t("close")}return Bn(()=>{document.addEventListener("keydown",s)}),Wi(()=>document.removeEventListener("keydown",s)),Oi(ck,Oe(()=>i.isOpen)),(u,d)=>(H(),We(tm,{to:"body"},[ue("div",{ref_key:"modal",ref:r,class:Dn({"modal flex bg-transparent-black-700 fixed inset-0 z-50 justify-center items-center p-4":u.isOpen,hidden:!u.isOpen}),onClick:d[1]||(d[1]=Mo(l=>u.$emit("close"),["self"]))},[ue("div",zr({class:"modal-contents shadow-lg relative rounded-2xl flex flex-col overflow-hidden max-w-[60rem] max-h-[90vh] m-auto w-full"},u.$attrs),[ye(fM,{class:"absolute right-4 top-4 md:top-8 md:right-8",onClick:d[0]||(d[0]=l=>u.$emit("close"))}),ue("header",IW,[ue("h2",AW,[Mn(u.$slots,"label",{},()=>[Mt(xt(u.label),1)],!0)])]),ue("div",MW,[Mn(u.$slots,"default",{},void 0,!0)]),u.$slots.footer?(H(),me("div",kW,[Mn(u.$slots,"footer",{},void 0,!0)])):ot("",!0)],16)],2)]))}});const bc=sn(PW,[["__scopeId","data-v-035831a8"]]),DW={class:"accordion w-full mt-2 overflow-hidden rounded"},LW=["label"],OW={class:"place-items-center flex p-4"},RW={key:0,class:"accordion__body flex flex-col gap-4 px-4 pt-2 pb-4 border-t"},FW=lt({__name:"Accordion",props:{label:{default:"-"}},emits:["toggle","open"],setup(e,{emit:t}){const i=Fe(!1);function r(){i.value=!i.value,t("toggle"),i.value&&t("open")}return(s,u)=>(H(),me("div",DW,[ue("button",{class:"accordion__header flex items-center justify-between w-full gap-2 border-none rounded-b-none",label:i.value?"close":"open",onClick:r},[Mn(s.$slots,"label",{},()=>[ue("span",{class:Dn(["flex-1 block p-4 text-left",{"font-bold ":i.value,"font-normal":!i.value}])},xt(s.label),3)],!0),ue("div",OW,[Mn(s.$slots,"label-icon",{},()=>[i.value?(H(),We(O_,{key:0,class:"w-5 h-5"})):(H(),We(Ch,{key:1,class:"w-5 h-5"}))],!0)])],8,LW),i.value?(H(),me("div",RW,[Mn(s.$slots,"default",{},void 0,!0)])):ot("",!0)]))}});const Pk=sn(FW,[["__scopeId","data-v-f0166094"]]),$W={key:0,class:"flex gap-6 p-4"},zW={key:1,class:"p-4"},BW={key:0,class:"w-min flex gap-4 my-4"},NW={class:"w-min flex gap-4 my-4"},UW=lt({__name:"LocationItem",props:{locationContent:{},widget:{}},setup(e){const t=e,i=nc(()=>qa(()=>Promise.resolve().then(()=>z1),void 0)),r=nc(()=>qa(()=>import("./MapMarker-21ad5ba2.js"),[])),s=Oe(()=>{var C,I;return((I=(C=t.locationContent.loc)==null?void 0:C.coordinates)==null?void 0:I[1])??0}),u=Oe(()=>{var C,I;return((I=(C=t.locationContent.loc)==null?void 0:C.coordinates)==null?void 0:I[0])??0}),d=Oe(()=>u.value?u.value.toFixed(4):"-"),l=Oe(()=>s.value?s.value.toFixed(4):"-"),m=Oe(()=>({lng:u.value,lat:s.value})),g=Oe(()=>(t.locationContent.locationLabel||t.locationContent.address)??null),x=Oe(()=>u.value!==0&&s.value!==0),w=Fe(!1);return(C,I)=>(H(),me(Nt,null,[ye(Pk,null,{label:Me(()=>[g.value?(H(),me("span",zW,xt(g.value),1)):(H(),me("div",$W,[ye(Js,{label:"Latitude",class:"w-auto",variant:"inline"},{default:Me(()=>[Mt(xt(l.value),1)]),_:1}),ye(Js,{label:"Longitude",class:"w-auto",variant:"inline"},{default:Me(()=>[Mt(xt(d.value),1)]),_:1})]))]),default:Me(()=>[g.value?(H(),me("div",BW,[ye(Js,{label:"Latitude",class:"w-auto"},{default:Me(()=>[Mt(xt(l.value),1)]),_:1}),ye(Js,{label:"Longitude",class:"w-auto"},{default:Me(()=>[Mt(xt(d.value),1)]),_:1})])):ot("",!0),x.value?(H(),We(si,{key:1,icon:"map",iconPosition:"start",onClick:I[0]||(I[0]=M=>w.value=!0)},{default:Me(()=>[Mt("Show Location")]),_:1})):ot("",!0)]),_:1}),ye(bc,{isOpen:w.value,label:g.value,onClose:I[1]||(I[1]=M=>w.value=!1)},{default:Me(()=>[ye(he(i),{center:m.value,zoom:10,mapStyle:"streets",apiKey:he(ci).arcgis.apiKey,class:"p-1 rounded",mapContainerClass:"!h-[50vh]"},{default:Me(()=>[ye(he(r),{id:`locationItem-${g.value}`,lng:m.value.lng,lat:m.value.lat},null,8,["id","lng","lat"])]),_:1},8,["center","apiKey"]),ue("div",NW,[ye(Js,{label:"Latitude",class:"w-auto"},{default:Me(()=>[Mt(xt(l.value),1)]),_:1}),ye(Js,{label:"Longitude",class:"w-auto"},{default:Me(()=>[Mt(xt(d.value),1)]),_:1})])]),_:1},8,["isOpen","label"])],64))}}),jW=lt({__name:"LocationWidget",props:{widget:{},contents:{}},setup(e){return(t,i)=>(H(),me("ul",null,[(H(!0),me(Nt,null,Fn(t.contents,(r,s)=>(H(),me("li",{key:s},[ye(UW,{widget:t.widget,locationContent:r},null,8,["widget","locationContent"])]))),128))]))}}),VW={class:"thumbnail-image__icon absolute z-10 bg-transparent-white-500 rounded-full w-12 h-12 flex justify-center items-center backdrop-blur-sm top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 scale-0 group-hover:scale-100 transition-all"},HW={key:0,class:"backdrop-blur-md bg-transparent-white-500 text-neutral-900 flex absolute bottom-1 right-1 z-10 rounded-full justify-center items-center p-1 w-6 h-6"},GW=lt({__name:"ThumbnailImage",props:{src:{},alt:{},href:{default:void 0},isActive:{type:Boolean,default:!1},fileType:{default:void 0}},setup(e){const t=e,i=["mp3","aiff","aif","m4a","wav","wave","wma"],r=["mov","mp4","m4v","mts","mkv","avi","mpeg","mpg","m2t","m2ts","dv","vob","mxf","wmv"],s=Oe(()=>t.fileType?r.includes(t.fileType.toLowerCase()):!1),u=Oe(()=>t.fileType?i.includes(t.fileType.toLowerCase()):!1);return(d,l)=>(H(),We(vc(d.href?"a":"div"),{href:d.href,class:Dn(["thumbnail-image block rounded overflow-hidden hover:shadow-md w-24 aspect-square relative border border-transparent-black-200 shadow-sm group transition-all",{"thumbnail-image--is-active ring ring-offset-1 ring-blue-600":d.isActive}])},{default:Me(()=>[ue("div",VW,[ye(he(Cu),{class:"text-neutral-900"})]),ye(Au,{src:d.src,alt:d.alt,class:"group-hover:scale-110 w-full h-full object-cover transition-all group-hover:opacity-100 opacity-80"},null,8,["src","alt"]),s.value||u.value?(H(),me("div",HW,[u.value?(H(),We(he(x6),{key:0})):ot("",!0),s.value?(H(),We(he(Q8),{key:1})):ot("",!0)])):ot("",!0),Mn(d.$slots,"default",{},void 0,!0)]),_:3},8,["href","class"]))}});const Dk=sn(GW,[["__scopeId","data-v-3d2093d4"]]),WW={class:"upload-widget flex gap-2 flex-wrap"},qW=["onClick"],ZW=lt({__name:"UploadWidget",props:{widget:{},contents:{}},setup(e){const t=Po(),i=r=>t.activeFileObjectId===r;return(r,s)=>(H(),me("div",WW,[(H(!0),me(Nt,null,Fn(r.contents,(u,d)=>(H(),me("button",{key:d,onClick:l=>he(t).activeFileObjectId=u.fileId},[ye(Dk,{src:`${he(ci).instance.base.url}/fileManager/tinyImageByFileId/${u.fileId}/true`,alt:u.fileDescription,isActive:i(u.fileId),iconOnHover:"arrow_forward",fileType:u.fileType},null,8,["src","alt","isActive","fileType"])],8,qW))),128))]))}}),KW=lt({__name:"Chip",props:{href:{default:void 0}},setup(e){return(t,i)=>(H(),We(vc(t.href?"a":"span"),{href:t.href,class:Dn(["chip inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-transparent-black-100 hover:no-underline no-underline text-neutral-700",{"chip--is-clickable border border-blue-700  bg-blue-100 text-blue-700 cursor-pointer hover:bg-blue-700 hover:text-white transition-colors ease-in-out":t.href}])},{default:Me(()=>[Mn(t.$slots,"default",{},void 0,!0)]),_:3},8,["href","class"]))}});const Gv=sn(KW,[["__scopeId","data-v-f8a00a29"]]),XW={class:"flex gap-2 flex-wrap"},YW=lt({__name:"TagWidget",props:{widget:{},contents:{}},setup(e){return(t,i)=>(H(),me("ul",null,[(H(!0),me(Nt,null,Fn(t.contents,(r,s)=>(H(),me("li",{key:s},[ue("ul",XW,[(H(!0),me(Nt,null,Fn(r.tags,(u,d)=>(H(),me("li",{key:d},[ye(fm,{linkText:u,widget:t.widget},{default:Me(({isClickable:l})=>[ye(Gv,{class:Dn({"chip--is-clickable border border-blue-700  bg-blue-100 text-blue-700 cursor-pointer hover:bg-blue-700 hover:text-white transition-colors ease-in-out":l})},{default:Me(()=>[Mt(xt(u),1)]),_:2},1032,["class"])]),_:2},1032,["linkText","widget"])]))),128))])]))),128))]))}});function j_(e){var t;return((t=e==null?void 0:e.relatedAssetTitle)==null?void 0:t[0])??"(No Title)"}const JW={class:"accordion-related-asset-widget-item w-full max-w-lg"},QW={key:0,class:"flex items-center flex-1 w-full gap-4 py-2 pl-2 pr-4"},eq=["src","alt"],tq=lt({__name:"AccordionRelatedAssetWidgetItem",props:{assetId:{},assetCache:{}},setup(e){const t=e,i=Oe(()=>j_(t.assetCache));return(r,s)=>{var u;return H(),me("div",JW,[ye(Pk,{label:i.value},eI({default:Me(()=>[ye(pm,{assetId:r.assetId},null,8,["assetId"]),Mn(r.$slots,"default")]),_:2},[(u=r.assetCache)!=null&&u.primaryHandler?{name:"label",fn:Me(()=>{var d;return[(d=r.assetCache)!=null&&d.primaryHandler?(H(),me("div",QW,[r.assetCache.primaryHandler?(H(),me("img",{key:0,src:he(kA)(r.assetCache.primaryHandler),alt:i.value,class:"aspect-square h-10 overflow-hidden rounded",loading:"lazy"},null,8,eq)):ot("",!0),ue("h3",null,xt(i.value),1)])):ot("",!0)]}),key:"0"}:void 0]),1032,["label"])])}}});function V_(e){const t=Fe(null),i=Fe(null),r=Oe(()=>t.value?Tu(t.value):"");async function s(){const{asset:u,template:d}=await Wn.getAssetWithTemplate(e.value);t.value=u,i.value=d}return fn(e,s,{immediate:!0}),{asset:t,template:i,title:r}}const nq={key:0,class:"collapsed-inline-related-asset-widget-item flex flex-col"},iq=lt({__name:"CollapsedInlineRelatedAssetWidgetItem",props:{assetId:{},assetCache:{}},setup(e){const t=e,i=Oe(()=>j_(t.assetCache)),r=Oe(()=>t.assetId),{asset:s}=V_(r);return(u,d)=>he(s)?(H(),me("section",nq,[ue("h3",null,xt(i.value),1),ye(pm,{assetId:u.assetId},null,8,["assetId"])])):ot("",!0)}});const rq=sn(iq,[["__scopeId","data-v-2189f96c"]]),sq={class:"thumbnail-image__icon bg-transparent-white-500 backdrop-blur-sm top-1/2 left-1/2 group-hover:scale-100 absolute z-10 flex items-center justify-center w-12 h-12 transition-all scale-0 -translate-x-1/2 -translate-y-1/2 rounded-full"},aq={class:"group-hover:scale-110 flex flex-col items-center justify-center transition-all"},oq={class:"whitespace-nowrap text-ellipsis max-w-full px-2 overflow-hidden text-xs"},lq=lt({__name:"ThumbnailGeneric",props:{isActive:{type:Boolean}},setup(e){return(t,i)=>(H(),me("div",{class:Dn(["thumbnail-generic aspect-square hover:shadow-md border-transparent-black-200 hover:opacity-100 group relative inline-flex flex-col items-center justify-center w-24 transition-all border rounded shadow-sm opacity-75",{"thumbnail-generic--is-active ring ring-offset-1 ring-blue-600":t.isActive}])},[ue("div",sq,[ye(Cu,{class:"text-neutral-900"})]),ue("div",aq,[ye(Fp,{class:"thumbnail-generic__icon"}),ue("div",oq,[Mn(t.$slots,"default",{},void 0,!0)])])],2))}});const cq=sn(lq,[["__scopeId","data-v-9378db69"]]),uq=lt({__name:"ThumbnailRelatedAssetWidgetItem",props:{assetId:{},assetCache:{}},setup(e){const t=e,i=Po(),r=Oe(()=>j_(t.assetCache)),s=Oe(()=>i.activeObjectId===t.assetId);return(u,d)=>{const l=y_("RouterLink");return H(),We(l,{title:r.value,class:"thumbnail-related-asset-widget-image inline-flex",to:`#${u.assetId}`},{default:Me(()=>[u.assetCache.primaryHandler?(H(),We(Dk,{key:0,src:he(kA)(u.assetCache.primaryHandler),alt:r.value,isActive:s.value,iconOnHover:"arrow_forward"},null,8,["src","alt","isActive"])):(H(),We(cq,{key:1,isActive:s.value},{default:Me(()=>[Mt(xt(r.value),1)]),_:1},8,["isActive"]))]),_:1},8,["title","to"])}}});const dq=sn(uq,[["__scopeId","data-v-93b639d6"]]),hq={class:"linked-related-asset-widget-item"},fq=lt({__name:"LinkedRelatedAssetWidgetItem",props:{assetId:{},assetCache:{}},setup(e){const t=e,i=Oe(()=>j_(t.assetCache)),r=Oe(()=>dl(t.assetId));return(s,u)=>(H(),me("div",hq,[ye(as,{to:r.value},{default:Me(()=>[Mt(xt(i.value),1)]),_:1},8,["to"])]))}}),Lk=lt({__name:"ArrowButton",setup(e){return(t,i)=>(H(),We(si,zr({class:"arrow-button !rounded-full !p-2 cursor-pointer",variant:"primary"},t.$attrs),{default:Me(()=>[Mn(t.$slots,"default"),ye(Cu)]),_:3},16))}}),pq={class:"related-asset-widget gap-2 flex flex-wrap w-full"},mq={class:"flex items-center justify-end gap-2"},gq=lt({__name:"RelatedAssetWidget",props:{widget:{},contents:{},asset:{}},setup(e){const t=e,i=Oe(()=>t.widget.fieldData.collapseNestedChildren?rq:t.widget.fieldData.thumbnailView?dq:t.widget.fieldData.nestData?tq:fq),r=Oe(()=>t.contents.filter(s=>!!s.targetAssetId));return(s,u)=>(H(),me("div",pq,[(H(!0),me(Nt,null,Fn(r.value,d=>{var l;return H(),We(vc(i.value),{key:d.targetAssetId,assetId:d.targetAssetId,assetCache:(l=s.asset.relatedAssetCache)==null?void 0:l[d.targetAssetId],label:d.label??""},{default:Me(()=>[ue("div",mq,[ye(Lk,{to:`/asset/viewAsset/${d.targetAssetId}`},null,8,["to"])])]),_:2},1032,["assetId","assetCache","label"])}),128))]))}}),vq=lt({__name:"Widget",props:{widget:{},asset:{}},setup(e){const t=e,i=Oe(()=>y1({asset:t.asset,widget:t.widget})),r={text:lW,select:dW,checkbox:hW,"text area":yW,date:xW,multiselect:CW,location:jW,upload:ZW,"tag list":YW,"related asset":gq};function s(u){return r[u]||null}return(u,d)=>(H(),We(Js,{label:u.widget.label},{default:Me(()=>[s(u.widget.type)?(H(),We(vc(s(u.widget.type)),{key:0,widget:u.widget,contents:i.value,asset:u.asset},null,8,["widget","contents","asset"])):ot("",!0)]),_:1},8,["label"]))}}),_q={key:0,class:"widget-list flex flex-col"},yq=lt({__name:"WidgetList",props:{assetId:{}},setup(e){const t=e,i=Oe(()=>t.assetId),{asset:r,template:s}=V_(i),u=Oe(()=>zF({asset:r.value,template:s.value}));return(d,l)=>(H(),We(Er,{name:"fade"},{default:Me(()=>[he(r)&&he(s)?(H(),me("div",_q,[(H(!0),me(Nt,null,Fn(u.value,m=>(H(),We(vq,{key:m.widgetId,widget:m,asset:he(r)},null,8,["widget","asset"]))),128))])):ot("",!0)]),_:1}))}});const pm=sn(yq,[["__scopeId","data-v-aa3a6e37"]]);function rx(e,t,i){var r,s,u,d,l;t==null&&(t=100);function m(){var x=Date.now()-d;x<t&&x>=0?r=setTimeout(m,t-x):(r=null,i||(l=e.apply(u,s),u=s=null))}var g=function(){u=this,s=arguments,d=Date.now();var x=i&&!r;return r||(r=setTimeout(m,t)),x&&(l=e.apply(u,s),u=s=null),l};return g.clear=function(){r&&(clearTimeout(r),r=null)},g.flush=function(){r&&(l=e.apply(u,s),u=s=null,clearTimeout(r),r=null)},g}rx.debounce=rx;var B0=rx;function bq(e,t,i){Gi(e)?fn(e,(r,s)=>{s==null||s.removeEventListener(t,i),r==null||r.addEventListener(t,i)}):Bn(()=>{e.addEventListener(t,i)}),ao(()=>{var r;(r=he(e))===null||r===void 0||r.removeEventListener(t,i)})}function xq(e,t){const i="pointerdown";return typeof window>"u"||!window?void 0:bq(window,i,s=>{const u=he(e);u&&(u===s.target||s.composedPath().includes(u)||t(s))})}function wq(e,t,i){let r=null;const s=Fe(!1);Bn(()=>{(e.content!==void 0||i.value)&&(s.value=!0),r=new MutationObserver(u),r.observe(t.value,{childList:!0,subtree:!0})}),ao(()=>r.disconnect()),fn(i,d=>{d?s.value=!0:s.value=!1});const u=()=>{e.content?s.value=!0:s.value=!1};return{hasContent:s}}function uh(e,t){var i=e.getBoundingClientRect(),r=1,s=1;return{width:i.width/r,height:i.height/s,top:i.top/s,right:i.right/r,bottom:i.bottom/s,left:i.left/r,x:i.left/r,y:i.top/s}}function lo(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function B1(e){var t=lo(e),i=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:i,scrollTop:r}}function Np(e){var t=lo(e).Element;return e instanceof t||e instanceof Element}function wa(e){var t=lo(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Ok(e){if(typeof ShadowRoot>"u")return!1;var t=lo(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Sq(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Tq(e){return e===lo(e)||!wa(e)?B1(e):Sq(e)}function Do(e){return e?(e.nodeName||"").toLowerCase():null}function xc(e){return((Np(e)?e.ownerDocument:e.document)||window.document).documentElement}function N1(e){return uh(xc(e)).left+B1(e).scrollLeft}function hl(e){return lo(e).getComputedStyle(e)}function U1(e){var t=hl(e),i=t.overflow,r=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+s+r)}function Eq(e){var t=e.getBoundingClientRect(),i=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return i!==1||r!==1}function Cq(e,t,i){i===void 0&&(i=!1);var r=wa(t);wa(t)&&Eq(t);var s=xc(t),u=uh(e),d={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!i)&&((Do(t)!=="body"||U1(s))&&(d=Tq(t)),wa(t)?(l=uh(t),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=N1(s))),{x:u.left+d.scrollLeft-l.x,y:u.top+d.scrollTop-l.y,width:u.width,height:u.height}}function j1(e){var t=uh(e),i=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:r}}function H_(e){return Do(e)==="html"?e:e.assignedSlot||e.parentNode||(Ok(e)?e.host:null)||xc(e)}function Rk(e){return["html","body","#document"].indexOf(Do(e))>=0?e.ownerDocument.body:wa(e)&&U1(e)?e:Rk(H_(e))}function _p(e,t){var i;t===void 0&&(t=[]);var r=Rk(e),s=r===((i=e.ownerDocument)==null?void 0:i.body),u=lo(r),d=s?[u].concat(u.visualViewport||[],U1(r)?r:[]):r,l=t.concat(d);return s?l:l.concat(_p(H_(d)))}function Iq(e){return["table","td","th"].indexOf(Do(e))>=0}function s2(e){return!wa(e)||hl(e).position==="fixed"?null:e.offsetParent}function Aq(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,i=navigator.userAgent.indexOf("Trident")!==-1;if(i&&wa(e)){var r=hl(e);if(r.position==="fixed")return null}for(var s=H_(e);wa(s)&&["html","body"].indexOf(Do(s))<0;){var u=hl(s);if(u.transform!=="none"||u.perspective!=="none"||u.contain==="paint"||["transform","perspective"].indexOf(u.willChange)!==-1||t&&u.willChange==="filter"||t&&u.filter&&u.filter!=="none")return s;s=s.parentNode}return null}function mm(e){for(var t=lo(e),i=s2(e);i&&Iq(i)&&hl(i).position==="static";)i=s2(i);return i&&(Do(i)==="html"||Do(i)==="body"&&hl(i).position==="static")?t:i||Aq(e)||t}var Sa="top",to="bottom",no="right",Ta="left",V1="auto",gm=[Sa,to,no,Ta],dh="start",Up="end",Mq="clippingParents",Fk="viewport",jf="popper",kq="reference",a2=gm.reduce(function(e,t){return e.concat([t+"-"+dh,t+"-"+Up])},[]),$k=[].concat(gm,[V1]).reduce(function(e,t){return e.concat([t,t+"-"+dh,t+"-"+Up])},[]),Pq="beforeRead",Dq="read",Lq="afterRead",Oq="beforeMain",Rq="main",Fq="afterMain",$q="beforeWrite",zq="write",Bq="afterWrite",Nq=[Pq,Dq,Lq,Oq,Rq,Fq,$q,zq,Bq];function Uq(e){var t=new Map,i=new Set,r=[];e.forEach(function(u){t.set(u.name,u)});function s(u){i.add(u.name);var d=[].concat(u.requires||[],u.requiresIfExists||[]);d.forEach(function(l){if(!i.has(l)){var m=t.get(l);m&&s(m)}}),r.push(u)}return e.forEach(function(u){i.has(u.name)||s(u)}),r}function jq(e){var t=Uq(e);return Nq.reduce(function(i,r){return i.concat(t.filter(function(s){return s.phase===r}))},[])}function Vq(e){var t;return function(){return t||(t=new Promise(function(i){Promise.resolve().then(function(){t=void 0,i(e())})})),t}}function Co(e){return e.split("-")[0]}function Hq(e){var t=e.reduce(function(i,r){var s=i[r.name];return i[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,i},{});return Object.keys(t).map(function(i){return t[i]})}function Gq(e){var t=lo(e),i=xc(e),r=t.visualViewport,s=i.clientWidth,u=i.clientHeight,d=0,l=0;return r&&(s=r.width,u=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(d=r.offsetLeft,l=r.offsetTop)),{width:s,height:u,x:d+N1(e),y:l}}var oc=Math.max,jp=Math.min,Hg=Math.round;function Wq(e){var t,i=xc(e),r=B1(e),s=(t=e.ownerDocument)==null?void 0:t.body,u=oc(i.scrollWidth,i.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),d=oc(i.scrollHeight,i.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),l=-r.scrollLeft+N1(e),m=-r.scrollTop;return hl(s||i).direction==="rtl"&&(l+=oc(i.clientWidth,s?s.clientWidth:0)-u),{width:u,height:d,x:l,y:m}}function zk(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&Ok(i)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function sx(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function qq(e){var t=uh(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function o2(e,t){return t===Fk?sx(Gq(e)):wa(t)?qq(t):sx(Wq(xc(e)))}function Zq(e){var t=_p(H_(e)),i=["absolute","fixed"].indexOf(hl(e).position)>=0,r=i&&wa(e)?mm(e):e;return Np(r)?t.filter(function(s){return Np(s)&&zk(s,r)&&Do(s)!=="body"}):[]}function Kq(e,t,i){var r=t==="clippingParents"?Zq(e):[].concat(t),s=[].concat(r,[i]),u=s[0],d=s.reduce(function(l,m){var g=o2(e,m);return l.top=oc(g.top,l.top),l.right=jp(g.right,l.right),l.bottom=jp(g.bottom,l.bottom),l.left=oc(g.left,l.left),l},o2(e,u));return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d}function hh(e){return e.split("-")[1]}function H1(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Bk(e){var t=e.reference,i=e.element,r=e.placement,s=r?Co(r):null,u=r?hh(r):null,d=t.x+t.width/2-i.width/2,l=t.y+t.height/2-i.height/2,m;switch(s){case Sa:m={x:d,y:t.y-i.height};break;case to:m={x:d,y:t.y+t.height};break;case no:m={x:t.x+t.width,y:l};break;case Ta:m={x:t.x-i.width,y:l};break;default:m={x:t.x,y:t.y}}var g=s?H1(s):null;if(g!=null){var x=g==="y"?"height":"width";switch(u){case dh:m[g]=m[g]-(t[x]/2-i[x]/2);break;case Up:m[g]=m[g]+(t[x]/2-i[x]/2);break}}return m}function Nk(){return{top:0,right:0,bottom:0,left:0}}function Uk(e){return Object.assign({},Nk(),e)}function jk(e,t){return t.reduce(function(i,r){return i[r]=e,i},{})}function G1(e,t){t===void 0&&(t={});var i=t,r=i.placement,s=r===void 0?e.placement:r,u=i.boundary,d=u===void 0?Mq:u,l=i.rootBoundary,m=l===void 0?Fk:l,g=i.elementContext,x=g===void 0?jf:g,w=i.altBoundary,C=w===void 0?!1:w,I=i.padding,M=I===void 0?0:I,L=Uk(typeof M!="number"?M:jk(M,gm)),$=x===jf?kq:jf,F=e.rects.popper,U=e.elements[C?$:x],ee=Kq(Np(U)?U:U.contextElement||xc(e.elements.popper),d,m),V=uh(e.elements.reference),Q=Bk({reference:V,element:F,strategy:"absolute",placement:s}),ae=sx(Object.assign({},F,Q)),be=x===jf?ae:V,te={top:ee.top-be.top+L.top,bottom:be.bottom-ee.bottom+L.bottom,left:ee.left-be.left+L.left,right:be.right-ee.right+L.right},G=e.modifiersData.offset;if(x===jf&&G){var j=G[s];Object.keys(te).forEach(function(z){var ie=[no,to].indexOf(z)>=0?1:-1,X=[Sa,to].indexOf(z)>=0?"y":"x";te[z]+=j[X]*ie})}return te}var l2={placement:"bottom",modifiers:[],strategy:"absolute"};function c2(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Xq(e){e===void 0&&(e={});var t=e,i=t.defaultModifiers,r=i===void 0?[]:i,s=t.defaultOptions,u=s===void 0?l2:s;return function(l,m,g){g===void 0&&(g=u);var x={placement:"bottom",orderedModifiers:[],options:Object.assign({},l2,u),modifiersData:{},elements:{reference:l,popper:m},attributes:{},styles:{}},w=[],C=!1,I={state:x,setOptions:function(F){var U=typeof F=="function"?F(x.options):F;L(),x.options=Object.assign({},u,x.options,U),x.scrollParents={reference:Np(l)?_p(l):l.contextElement?_p(l.contextElement):[],popper:_p(m)};var ee=jq(Hq([].concat(r,x.options.modifiers)));return x.orderedModifiers=ee.filter(function(V){return V.enabled}),M(),I.update()},forceUpdate:function(){if(!C){var F=x.elements,U=F.reference,ee=F.popper;if(c2(U,ee)){x.rects={reference:Cq(U,mm(ee),x.options.strategy==="fixed"),popper:j1(ee)},x.reset=!1,x.placement=x.options.placement,x.orderedModifiers.forEach(function(j){return x.modifiersData[j.name]=Object.assign({},j.data)});for(var V=0;V<x.orderedModifiers.length;V++){if(x.reset===!0){x.reset=!1,V=-1;continue}var Q=x.orderedModifiers[V],ae=Q.fn,be=Q.options,te=be===void 0?{}:be,G=Q.name;typeof ae=="function"&&(x=ae({state:x,options:te,name:G,instance:I})||x)}}}},update:Vq(function(){return new Promise(function($){I.forceUpdate(),$(x)})}),destroy:function(){L(),C=!0}};if(!c2(l,m))return I;I.setOptions(g).then(function($){!C&&g.onFirstUpdate&&g.onFirstUpdate($)});function M(){x.orderedModifiers.forEach(function($){var F=$.name,U=$.options,ee=U===void 0?{}:U,V=$.effect;if(typeof V=="function"){var Q=V({state:x,name:F,instance:I,options:ee}),ae=function(){};w.push(Q||ae)}})}function L(){w.forEach(function($){return $()}),w=[]}return I}}var Gg={passive:!0};function Yq(e){var t=e.state,i=e.instance,r=e.options,s=r.scroll,u=s===void 0?!0:s,d=r.resize,l=d===void 0?!0:d,m=lo(t.elements.popper),g=[].concat(t.scrollParents.reference,t.scrollParents.popper);return u&&g.forEach(function(x){x.addEventListener("scroll",i.update,Gg)}),l&&m.addEventListener("resize",i.update,Gg),function(){u&&g.forEach(function(x){x.removeEventListener("scroll",i.update,Gg)}),l&&m.removeEventListener("resize",i.update,Gg)}}var Jq={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Yq,data:{}};function Qq(e){var t=e.state,i=e.name;t.modifiersData[i]=Bk({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var eZ={name:"popperOffsets",enabled:!0,phase:"read",fn:Qq,data:{}},tZ={top:"auto",right:"auto",bottom:"auto",left:"auto"};function nZ(e){var t=e.x,i=e.y,r=window,s=r.devicePixelRatio||1;return{x:Hg(Hg(t*s)/s)||0,y:Hg(Hg(i*s)/s)||0}}function u2(e){var t,i=e.popper,r=e.popperRect,s=e.placement,u=e.variation,d=e.offsets,l=e.position,m=e.gpuAcceleration,g=e.adaptive,x=e.roundOffsets,w=x===!0?nZ(d):typeof x=="function"?x(d):d,C=w.x,I=C===void 0?0:C,M=w.y,L=M===void 0?0:M,$=d.hasOwnProperty("x"),F=d.hasOwnProperty("y"),U=Ta,ee=Sa,V=window;if(g){var Q=mm(i),ae="clientHeight",be="clientWidth";Q===lo(i)&&(Q=xc(i),hl(Q).position!=="static"&&l==="absolute"&&(ae="scrollHeight",be="scrollWidth")),Q=Q,(s===Sa||(s===Ta||s===no)&&u===Up)&&(ee=to,L-=Q[ae]-r.height,L*=m?1:-1),(s===Ta||(s===Sa||s===to)&&u===Up)&&(U=no,I-=Q[be]-r.width,I*=m?1:-1)}var te=Object.assign({position:l},g&&tZ);if(m){var G;return Object.assign({},te,(G={},G[ee]=F?"0":"",G[U]=$?"0":"",G.transform=(V.devicePixelRatio||1)<=1?"translate("+I+"px, "+L+"px)":"translate3d("+I+"px, "+L+"px, 0)",G))}return Object.assign({},te,(t={},t[ee]=F?L+"px":"",t[U]=$?I+"px":"",t.transform="",t))}function iZ(e){var t=e.state,i=e.options,r=i.gpuAcceleration,s=r===void 0?!0:r,u=i.adaptive,d=u===void 0?!0:u,l=i.roundOffsets,m=l===void 0?!0:l,g={placement:Co(t.placement),variation:hh(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,u2(Object.assign({},g,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:d,roundOffsets:m})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,u2(Object.assign({},g,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:m})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var rZ={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:iZ,data:{}};function sZ(e){var t=e.state;Object.keys(t.elements).forEach(function(i){var r=t.styles[i]||{},s=t.attributes[i]||{},u=t.elements[i];!wa(u)||!Do(u)||(Object.assign(u.style,r),Object.keys(s).forEach(function(d){var l=s[d];l===!1?u.removeAttribute(d):u.setAttribute(d,l===!0?"":l)}))})}function aZ(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(r){var s=t.elements[r],u=t.attributes[r]||{},d=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:i[r]),l=d.reduce(function(m,g){return m[g]="",m},{});!wa(s)||!Do(s)||(Object.assign(s.style,l),Object.keys(u).forEach(function(m){s.removeAttribute(m)}))})}}var oZ={name:"applyStyles",enabled:!0,phase:"write",fn:sZ,effect:aZ,requires:["computeStyles"]},lZ=[Jq,eZ,rZ,oZ],cZ=Xq({defaultModifiers:lZ});function uZ(e){return e==="x"?"y":"x"}function hv(e,t,i){return oc(e,jp(t,i))}function dZ(e){var t=e.state,i=e.options,r=e.name,s=i.mainAxis,u=s===void 0?!0:s,d=i.altAxis,l=d===void 0?!1:d,m=i.boundary,g=i.rootBoundary,x=i.altBoundary,w=i.padding,C=i.tether,I=C===void 0?!0:C,M=i.tetherOffset,L=M===void 0?0:M,$=G1(t,{boundary:m,rootBoundary:g,padding:w,altBoundary:x}),F=Co(t.placement),U=hh(t.placement),ee=!U,V=H1(F),Q=uZ(V),ae=t.modifiersData.popperOffsets,be=t.rects.reference,te=t.rects.popper,G=typeof L=="function"?L(Object.assign({},t.rects,{placement:t.placement})):L,j={x:0,y:0};if(ae){if(u||l){var z=V==="y"?Sa:Ta,ie=V==="y"?to:no,X=V==="y"?"height":"width",ne=ae[V],Ee=ae[V]+$[z],Ce=ae[V]-$[ie],Xe=I?-te[X]/2:0,at=U===dh?be[X]:te[X],it=U===dh?-te[X]:-be[X],$t=t.elements.arrow,Ct=I&&$t?j1($t):{width:0,height:0},tt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Nk(),et=tt[z],dt=tt[ie],Be=hv(0,be[X],Ct[X]),Ke=ee?be[X]/2-Xe-Be-et-G:at-Be-et-G,ut=ee?-be[X]/2+Xe+Be+dt+G:it+Be+dt+G,Ot=t.elements.arrow&&mm(t.elements.arrow),Vt=Ot?V==="y"?Ot.clientTop||0:Ot.clientLeft||0:0,_n=t.modifiersData.offset?t.modifiersData.offset[t.placement][V]:0,qt=ae[V]+Ke-_n-Vt,_e=ae[V]+ut-_n;if(u){var ke=hv(I?jp(Ee,qt):Ee,ne,I?oc(Ce,_e):Ce);ae[V]=ke,j[V]=ke-ne}if(l){var ge=V==="x"?Sa:Ta,ft=V==="x"?to:no,q=ae[Q],fe=q+$[ge],Pe=q-$[ft],Ge=hv(I?jp(fe,qt):fe,q,I?oc(Pe,_e):Pe);ae[Q]=Ge,j[Q]=Ge-q}}t.modifiersData[r]=j}}var hZ={name:"preventOverflow",enabled:!0,phase:"main",fn:dZ,requiresIfExists:["offset"]},fZ={left:"right",right:"left",bottom:"top",top:"bottom"};function fv(e){return e.replace(/left|right|bottom|top/g,function(t){return fZ[t]})}var pZ={start:"end",end:"start"};function d2(e){return e.replace(/start|end/g,function(t){return pZ[t]})}function mZ(e,t){t===void 0&&(t={});var i=t,r=i.placement,s=i.boundary,u=i.rootBoundary,d=i.padding,l=i.flipVariations,m=i.allowedAutoPlacements,g=m===void 0?$k:m,x=hh(r),w=x?l?a2:a2.filter(function(M){return hh(M)===x}):gm,C=w.filter(function(M){return g.indexOf(M)>=0});C.length===0&&(C=w);var I=C.reduce(function(M,L){return M[L]=G1(e,{placement:L,boundary:s,rootBoundary:u,padding:d})[Co(L)],M},{});return Object.keys(I).sort(function(M,L){return I[M]-I[L]})}function gZ(e){if(Co(e)===V1)return[];var t=fv(e);return[d2(e),t,d2(t)]}function vZ(e){var t=e.state,i=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var s=i.mainAxis,u=s===void 0?!0:s,d=i.altAxis,l=d===void 0?!0:d,m=i.fallbackPlacements,g=i.padding,x=i.boundary,w=i.rootBoundary,C=i.altBoundary,I=i.flipVariations,M=I===void 0?!0:I,L=i.allowedAutoPlacements,$=t.options.placement,F=Co($),U=F===$,ee=m||(U||!M?[fv($)]:gZ($)),V=[$].concat(ee).reduce(function(dt,Be){return dt.concat(Co(Be)===V1?mZ(t,{placement:Be,boundary:x,rootBoundary:w,padding:g,flipVariations:M,allowedAutoPlacements:L}):Be)},[]),Q=t.rects.reference,ae=t.rects.popper,be=new Map,te=!0,G=V[0],j=0;j<V.length;j++){var z=V[j],ie=Co(z),X=hh(z)===dh,ne=[Sa,to].indexOf(ie)>=0,Ee=ne?"width":"height",Ce=G1(t,{placement:z,boundary:x,rootBoundary:w,altBoundary:C,padding:g}),Xe=ne?X?no:Ta:X?to:Sa;Q[Ee]>ae[Ee]&&(Xe=fv(Xe));var at=fv(Xe),it=[];if(u&&it.push(Ce[ie]<=0),l&&it.push(Ce[Xe]<=0,Ce[at]<=0),it.every(function(dt){return dt})){G=z,te=!1;break}be.set(z,it)}if(te)for(var $t=M?3:1,Ct=function(Be){var Ke=V.find(function(ut){var Ot=be.get(ut);if(Ot)return Ot.slice(0,Be).every(function(Vt){return Vt})});if(Ke)return G=Ke,"break"},tt=$t;tt>0;tt--){var et=Ct(tt);if(et==="break")break}t.placement!==G&&(t.modifiersData[r]._skip=!0,t.placement=G,t.reset=!0)}}var _Z={name:"flip",enabled:!0,phase:"main",fn:vZ,requiresIfExists:["offset"],data:{_skip:!1}};function yZ(e,t,i){var r=Co(e),s=[Ta,Sa].indexOf(r)>=0?-1:1,u=typeof i=="function"?i(Object.assign({},t,{placement:e})):i,d=u[0],l=u[1];return d=d||0,l=(l||0)*s,[Ta,no].indexOf(r)>=0?{x:l,y:d}:{x:d,y:l}}function bZ(e){var t=e.state,i=e.options,r=e.name,s=i.offset,u=s===void 0?[0,0]:s,d=$k.reduce(function(x,w){return x[w]=yZ(w,t.rects,u),x},{}),l=d[t.placement],m=l.x,g=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=m,t.modifiersData.popperOffsets.y+=g),t.modifiersData[r]=d}var xZ={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:bZ},wZ=function(t,i){return t=typeof t=="function"?t(Object.assign({},i.rects,{placement:i.placement})):t,Uk(typeof t!="number"?t:jk(t,gm))};function SZ(e){var t,i=e.state,r=e.name,s=e.options,u=i.elements.arrow,d=i.modifiersData.popperOffsets,l=Co(i.placement),m=H1(l),g=[Ta,no].indexOf(l)>=0,x=g?"height":"width";if(!(!u||!d)){var w=wZ(s.padding,i),C=j1(u),I=m==="y"?Sa:Ta,M=m==="y"?to:no,L=i.rects.reference[x]+i.rects.reference[m]-d[m]-i.rects.popper[x],$=d[m]-i.rects.reference[m],F=mm(u),U=F?m==="y"?F.clientHeight||0:F.clientWidth||0:0,ee=L/2-$/2,V=w[I],Q=U-C[x]-w[M],ae=U/2-C[x]/2+ee,be=hv(V,ae,Q),te=m;i.modifiersData[r]=(t={},t[te]=be,t.centerOffset=be-ae,t)}}function TZ(e){var t=e.state,i=e.options,r=i.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||zk(t.elements.popper,s)&&(t.elements.arrow=s))}var EZ={name:"arrow",enabled:!0,phase:"main",fn:SZ,effect:TZ,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};const N0=e=>parseInt(e,10);function CZ({arrowPadding:e,emit:t,locked:i,offsetDistance:r,offsetSkid:s,placement:u,popperNode:d,triggerNode:l}){const m=Br({isOpen:!1,popperInstance:null}),g=L=>{var $;($=m.popperInstance)===null||$===void 0||$.setOptions(F=>({...F,modifiers:[...F.modifiers,{name:"eventListeners",enabled:L}]}))},x=()=>g(!0),w=()=>g(!1),C=()=>{m.isOpen&&(m.isOpen=!1,t("close:popper"))},I=()=>{m.isOpen||(m.isOpen=!0,t("open:popper"))};fn([()=>m.isOpen,u],async([L])=>{L?(await M(),x()):w()});const M=async()=>{await Ir(),m.popperInstance=cZ(l.value,d.value,{placement:u.value,modifiers:[hZ,_Z,{name:"flip",enabled:!i.value},EZ,{name:"arrow",options:{padding:N0(e.value)}},xZ,{name:"offset",options:{offset:[N0(s.value),N0(r.value)]}}]}),m.popperInstance.update()};return ao(()=>{var L;(L=m.popperInstance)===null||L===void 0||L.destroy()}),{...f_(m),open:I,close:C}}const IZ={id:"arrow","data-popper-arrow":""};function AZ(e,t){return H(),me("div",IZ)}function Vk(e,t){t===void 0&&(t={});var i=t.insertAt;if(!(!e||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",i==="top"&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}}var MZ=`
#arrow[data-v-20b7fd4a],
  #arrow[data-v-20b7fd4a]::before {
    transition: background 250ms ease-in-out;
    position: absolute;
    width: calc(10px - var(--popper-theme-border-width, 0px));
    height: calc(10px - var(--popper-theme-border-width, 0px));
    box-sizing: border-box;
    background: var(--popper-theme-background-color);
}
#arrow[data-v-20b7fd4a] {
    visibility: hidden;
}
#arrow[data-v-20b7fd4a]::before {
    visibility: visible;
    content: "";
    transform: rotate(45deg);
}

  /* Top arrow */
.popper[data-popper-placement^="top"] > #arrow[data-v-20b7fd4a] {
    bottom: -5px;
}
.popper[data-popper-placement^="top"] > #arrow[data-v-20b7fd4a]::before {
    border-right: var(--popper-theme-border-width)
      var(--popper-theme-border-style) var(--popper-theme-border-color);
    border-bottom: var(--popper-theme-border-width)
      var(--popper-theme-border-style) var(--popper-theme-border-color);
}

  /* Bottom arrow */
.popper[data-popper-placement^="bottom"] > #arrow[data-v-20b7fd4a] {
    top: -5px;
}
.popper[data-popper-placement^="bottom"] > #arrow[data-v-20b7fd4a]::before {
    border-left: var(--popper-theme-border-width)
      var(--popper-theme-border-style) var(--popper-theme-border-color);
    border-top: var(--popper-theme-border-width)
      var(--popper-theme-border-style) var(--popper-theme-border-color);
}

  /* Left arrow */
.popper[data-popper-placement^="left"] > #arrow[data-v-20b7fd4a] {
    right: -5px;
}
.popper[data-popper-placement^="left"] > #arrow[data-v-20b7fd4a]::before {
    border-right: var(--popper-theme-border-width)
      var(--popper-theme-border-style) var(--popper-theme-border-color);
    border-top: var(--popper-theme-border-width)
      var(--popper-theme-border-style) var(--popper-theme-border-color);
}

  /* Right arrow */
.popper[data-popper-placement^="right"] > #arrow[data-v-20b7fd4a] {
    left: -5px;
}
`;Vk(MZ);const W1={};W1.render=AZ;W1.__scopeId="data-v-20b7fd4a";var kZ=W1;const PZ=["onKeyup"];var Hk={props:{placement:{type:String,default:"bottom",validator:function(e){return["auto","auto-start","auto-end","top","top-start","top-end","bottom","bottom-start","bottom-end","right","right-start","right-end","left","left-start","left-end"].includes(e)}},disableClickAway:{type:Boolean,default:!1},offsetSkid:{type:String,default:"0"},offsetDistance:{type:String,default:"12"},hover:{type:Boolean,default:!1},show:{type:Boolean,default:null},disabled:{type:Boolean,default:!1},openDelay:{type:[Number,String],default:0},closeDelay:{type:[Number,String],default:0},zIndex:{type:[Number,String],default:9999},arrow:{type:Boolean,default:!1},arrowPadding:{type:String,default:"0"},interactive:{type:Boolean,default:!0},locked:{type:Boolean,default:!1},content:{type:String,default:null}},emits:["open:popper","close:popper"],setup(e,{emit:t}){const i=e;nm(at=>({c81fc0a4:e.zIndex}));const r=nI(),s=Fe(null),u=Fe(null),d=Fe(null),l=Fe(!1);Bn(()=>{const at=r.default();if(at&&at.length>1)return console.error(`[Popper]: The <Popper> component expects only one child element at its root. You passed ${at.length} child nodes.`)});const{arrowPadding:m,closeDelay:g,content:x,disableClickAway:w,disabled:C,interactive:I,locked:M,offsetDistance:L,offsetSkid:$,openDelay:F,placement:U,show:ee}=f_(i),{isOpen:V,open:Q,close:ae}=CZ({arrowPadding:m,emit:t,locked:M,offsetDistance:L,offsetSkid:$,placement:U,popperNode:u,triggerNode:d}),{hasContent:be}=wq(r,u,x),te=Oe(()=>ee.value!==null),G=Oe(()=>C.value||!be.value),j=Oe(()=>V.value&&!G.value),z=Oe(()=>!w.value&&!te.value),ie=Oe(()=>I.value?`border: ${L.value}px solid transparent; margin: -${L.value}px;`:null),X=B0.debounce(Q,F.value),ne=B0.debounce(ae,g.value),Ee=async()=>{G.value||te.value||(ne.clear(),X())},Ce=async()=>{te.value||(X.clear(),ne())},Xe=()=>{V.value?Ce():Ee()};return fn([be,C],([at,it])=>{V.value&&(!at||it)&&ae()}),fn(V,at=>{at?l.value=!0:B0.debounce(()=>{l.value=!1},200)}),Ar(()=>{te.value&&(ee.value?X():ne())}),Ar(()=>{z.value&&xq(s,Ce)}),(at,it)=>(H(),me("div",{class:"inline-block",style:xu(he(ie)),onMouseleave:it[2]||(it[2]=$t=>e.hover&&Ce()),ref:($t,Ct)=>{Ct.popperContainerNode=$t,s.value=$t}},[ue("div",{ref:($t,Ct)=>{Ct.triggerNode=$t,d.value=$t},onMouseover:it[0]||(it[0]=$t=>e.hover&&Ee()),onClick:Xe,onFocus:Ee,onKeyup:NI(Ce,["esc"])},[Mn(at.$slots,"default")],40,PZ),ye(Er,{name:"fade"},{default:Me(()=>[bs(ue("div",{onClick:it[1]||(it[1]=$t=>!he(I)&&Ce()),class:"popper",ref:($t,Ct)=>{Ct.popperNode=$t,u.value=$t}},[Mn(at.$slots,"content",{close:he(ae),isOpen:l.value},()=>[Mt(xt(he(x)),1)]),e.arrow?(H(),We(kZ,{key:0})):ot("",!0)],512),[[Ca,he(j)]])]),_:3})],36))}},DZ=`
.inline-block[data-v-5784ed69] {
    display: inline-block;
}
.popper[data-v-5784ed69] {
    transition: background 250ms ease-in-out;
    background: var(--popper-theme-background-color);
    padding: var(--popper-theme-padding);
    color: var(--popper-theme-text-color);
    border-radius: var(--popper-theme-border-radius);
    border-width: var(--popper-theme-border-width);
    border-style: var(--popper-theme-border-style);
    border-color: var(--popper-theme-border-color);
    box-shadow: var(--popper-theme-box-shadow);
    z-index: var(--c81fc0a4);
}
.popper[data-v-5784ed69]:hover,
  .popper:hover > #arrow[data-v-5784ed69]::before {
    background: var(--popper-theme-background-color-hover);
}
.inline-block[data-v-5784ed69] {
    display: inline-block;
}
.fade-enter-active[data-v-5784ed69],
  .fade-leave-active[data-v-5784ed69] {
    transition: opacity 0.2s ease;
}
.fade-enter-from[data-v-5784ed69],
  .fade-leave-to[data-v-5784ed69] {
    opacity: 0;
}
`;Vk(DZ);Hk.__scopeId="data-v-5784ed69";var LZ=(()=>{const e=Hk;return e.install=t=>{t.component("Popper",e)},e})();const OZ=lt({__name:"Popover",props:{hover:{type:Boolean,default:!0},arrow:{type:Boolean,default:!0},content:{default:void 0}},setup(e){return(t,i)=>(H(),We(he(LZ),{class:"popover",hover:t.hover,arrow:t.arrow},{content:Me(()=>[Mn(t.$slots,"content",{},()=>[ue("div",zr({class:"popover-content"},t.$attrs),xt(t.content),17)])]),default:Me(()=>[Mn(t.$slots,"default")]),_:3},8,["hover","arrow"]))}});const gc=lt({__name:"IconButton",props:{title:{},href:{default:void 0},to:{default:void 0},type:{default:"button"}},emits:["click"],setup(e){const t=e,i=$o(),r=Oe(()=>{if(t.href)return t.href;if(t.to&&s.value===rc)return i.resolve(t.to).href}),s=Oe(()=>t.href?"a":t.to?rc:"button");return(u,d)=>(H(),We(OZ,{content:u.title},{default:Me(()=>[(H(),We(vc(s.value),zr({href:r.value,type:u.type,to:s.value===he(rc)?u.to:void 0},u.$attrs,{class:"flex items-center justify-center aspect-square p-2 text-neutral-900 hover:text-blue-700 hover:bg-blue-50 border border-transparent hover:border-blue-600 rounded-md transition-colors duration-150",title:u.title,onClick:d[0]||(d[0]=l=>u.$emit("click",l))}),{default:Me(()=>[Mn(u.$slots,"default")]),_:3},16,["href","type","to","title"]))]),_:3},8,["content"]))}}),RZ=ue("span",{class:"sr-only"},"More Info",-1),FZ={key:0},$Z={key:0},zZ={key:1,class:"flex flex-col gap-6"},BZ={class:"bg-neutral-200 p-4 rounded-xl"},NZ=ue("h2",{class:"text-xl font-bold mt-6 border-t pt-6"},"EXIF Details",-1),UZ={key:2},Gk=lt({__name:"MoreFileInfoButton",props:{fileObjectId:{}},setup(e){const t=e,i=nc(()=>qa(()=>Promise.resolve().then(()=>z1),void 0)),r=nc(()=>qa(()=>import("./MapMarker-21ad5ba2.js"),[])),s=Fe(!1),u=Fe(void 0),d=Oe(()=>u.value!==void 0);async function l(){s.value=!s.value,u.value=void 0,u.value=await Wn.getFileMetaData(t.fileObjectId)}return(m,g)=>(H(),me(Nt,null,[ye(gc,{title:"More Info",onClick:l},{default:Me(()=>[ye(dM),RZ]),_:1}),ye(bc,{label:"File Info",isOpen:s.value,class:"max-w-4xl m-auto h-[75vh]",onClose:g[0]||(g[0]=x=>s.value=!1)},{default:Me(()=>[ye(Er,{name:"fade"},{default:Me(()=>{var x;return[d.value?(H(),me("div",FZ,[u.value?ot("",!0):(H(),me("span",$Z,"No meta data found.")),(x=u.value)!=null&&x.exif?(H(),me("section",zZ,[ye(Js,{label:"File Type"},{default:Me(()=>{var w,C;return[Mt(xt(((C=(w=u.value.exif)==null?void 0:w.File)==null?void 0:C.FileType)??"Unknown"),1)]}),_:1}),ye(Js,{label:"Original Name"},{default:Me(()=>[Mt(xt(u.value.sourcefile??"Unknown"),1)]),_:1}),ye(Js,{label:"File Size"},{default:Me(()=>{var w,C;return[Mt(xt(((C=(w=u.value.exif)==null?void 0:w.File)==null?void 0:C.FileSize)??"Unknown"),1)]}),_:1}),ye(Js,{label:"Image Size"},{default:Me(()=>[Mt(xt(u.value.width??"Unknown")+" x "+xt(u.value.height??"Unknonwn"),1)]),_:1}),u.value.coordinates?(H(),We(Js,{key:0,label:"Location"},{default:Me(()=>[ue("div",BZ,[ye(he(i),{center:{lng:u.value.coordinates[0],lat:u.value.coordinates[1]},zoom:10,mapStyle:"streets",apiKey:he(ci).arcgis.apiKey,mapContainerClass:"!h-[50vh]"},{default:Me(()=>[ye(he(r),{id:"more-info-location-map-marker",lng:u.value.coordinates[0],lat:u.value.coordinates[1]},null,8,["lng","lat"])]),_:1},8,["center","apiKey"])])]),_:1})):ot("",!0),NZ,ue("pre",null,xt(u.value.exif),1)])):(H(),me("section",UZ,[ue("pre",null,xt(u.value),1)]))])):ot("",!0)]}),_:1})]),_:1},8,["isOpen"])],64))}}),jZ=ue("span",{class:"sr-only"},"Download File",-1),VZ={key:0},HZ={key:0},GZ={key:1,class:"max-w-sm"},WZ=["href"],qZ={class:"flex justify-between"},ZZ={class:"group-hover:underline"},Wk=lt({__name:"DownloadFileButton",props:{fileObjectId:{},assetId:{}},setup(e){const t=e,i=Fe(!1),r=Fe(void 0),s=Oe(()=>r.value!==void 0);async function u(){i.value=!0,r.value=void 0,r.value=await Wn.getFileDownloadInfo(t.fileObjectId,t.assetId)}return(d,l)=>(H(),me(Nt,null,[ye(gc,{title:"Download File",onClick:u},{default:Me(()=>[ye(E1),jZ]),_:1}),ye(bc,{label:"File Downloads",isOpen:i.value,class:"max-w-sm",onClose:l[0]||(l[0]=m=>i.value=!1)},{default:Me(()=>[s.value?(H(),me("div",VZ,[r.value?(H(),me("ul",GZ,[(H(!0),me(Nt,null,Fn(r.value,m=>(H(),me(Nt,{key:m.filetype},[m.isReady||m.filetype==="original"?(H(),me("a",{key:0,href:m.url,class:"py-2 hover:bg-transparent-black-50 border-t last:border-b block hover:no-underline group"},[ue("li",qZ,[ue("span",ZZ,xt(m.filetype),1),ye(Gv,{class:"group-hover:bg-blue-100 group-hover:text-blue-600"},{default:Me(()=>[Mt(xt(m.extension),1)]),_:2},1024)])],8,WZ)):ot("",!0)],64))),128))])):(H(),me("span",HZ,"No Downloads available"))])):ot("",!0)]),_:1},8,["isOpen"])],64))}}),KZ={class:"flex justify-between items-baseline"},XZ={for:"share-embed",class:"block text-sm font-medium text-gray-700"},YZ={class:"mt-1 flex rounded-md shadow-sm relative"},JZ=["placeholder","value"],QZ=lt({__name:"TextArea",props:{label:{},value:{},placeholder:{default:""}},emits:["input"],setup(e){return(t,i)=>(H(),me("div",null,[ue("div",KZ,[Mn(t.$slots,"label",{},()=>[ue("label",XZ,xt(t.label),1)]),ue("div",null,[Mn(t.$slots,"corner")])]),ue("div",YZ,[ue("textarea",{id:"share-embed",name:"share-embed",class:"block w-full rounded border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 font-mono text-neutral-500 focus:text-neutral-900 h-24",placeholder:t.placeholder,value:t.value,onInput:i[0]||(i[0]=r=>t.$emit("input",r))},null,40,JZ)])]))}}),h2=lt({__name:"CopyableTextArea",props:{label:{},value:{},placeholder:{default:""}},setup(e){const i=Jd(e,"value"),{copy:r,copied:s}=xz({source:i,copiedDuring:3e3});return(u,d)=>(H(),We(QZ,{label:u.label,value:u.value,placeholder:u.placeholder},{corner:Me(()=>[ye(si,{icon:he(s)?"check":"content_copy",variant:"tertiary",onClick:d[0]||(d[0]=l=>he(r)())},{default:Me(()=>[Mt(xt(he(s)?"Copied":"Copy"),1)]),_:1},8,["icon"])]),_:1},8,["label","value","placeholder"]))}}),eK=ue("span",{class:"sr-only"},"Share",-1),tK={class:"flex flex-col gap-4"},qk=lt({__name:"ShareFileButton",props:{fileObjectId:{}},setup(e){const t=e,i=d=>d.replace(/\s+/g," ").trim(),r=Fe(!1),s=Oe(()=>`${ci.instance.base.url}/asset/getEmbed/${t.fileObjectId}/null/true`),u=Oe(()=>i(`
  <iframe width="560" height="480" src="${s.value}" frameborder="0" allowfullscreen></iframe>`));return(d,l)=>(H(),me(Nt,null,[ye(gc,{title:"Share",onClick:l[0]||(l[0]=m=>r.value=!r.value)},{default:Me(()=>[ye(S8),eK]),_:1}),ye(bc,{label:"Share",isOpen:r.value,class:"max-w-xl mx-auto",onClose:l[1]||(l[1]=m=>r.value=!1)},{default:Me(()=>[ue("div",tK,[ye(h2,{label:"Embed",value:u.value},null,8,["value"]),ye(h2,{label:"Link",value:s.value},null,8,["value"]),ye(si,{icon:"open_in_new",label:"Open in New Window",href:s.value,target:"_blank"},{default:Me(()=>[Mt("Open Viewer in New Window")]),_:1},8,["href"])])]),_:1},8,["isOpen"])],64))}}),nK=ue("span",{class:"sr-only"},"Clear",-1),iK={key:0,class:"text-xs text-red-600 mt-1"},q1=lt({__name:"DrawerTitleInput",props:{modelValue:{},label:{default:"Drawer Title"},labelHidden:{type:Boolean,default:!1},placeholder:{default:"New Drawer Title"},inputClass:{default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const i=e,r=Pa(),s=Oe(()=>i.modelValue.trim()),u=Oe(()=>i.modelValue.length>0),d=Oe(()=>!r.drawers.some(g=>g.title.trim()===s.value)),l=Oe(()=>u.value&&d.value);function m(){t("update:modelValue","")}return(g,x)=>(H(),me("div",null,[ye(Ya,{id:"new-drawer-title",label:g.label,modelValue:g.modelValue,labelHidden:g.labelHidden,placeholder:g.placeholder,inputClass:g.inputClass,"onUpdate:modelValue":x[0]||(x[0]=w=>t("update:modelValue",w))},{append:Me(()=>[g.modelValue.length?(H(),me("button",{key:0,type:"button",class:"text-transparent-black-500 hover:text-neutral-900 float-right",onClick:m},[nK,ye(he(om))])):ot("",!0)]),_:1},8,["label","modelValue","labelHidden","placeholder","inputClass"]),!l.value&&g.modelValue.length>0?(H(),me("p",iK," Drawer title must be unique. ")):ot("",!0)]))}});function rK(e){return/^(\d{1,2}:)?([0-5]?\d:)?[0-5]?\d$/.test(e)}function Gl(e){if(e===null)return"";if(Number.isNaN(e))throw new Error("Cannot convert seconds to time string: seconds is NaN");if(e>=60*60*24)throw new Error("Cannot convert seconds to time string: seconds larger than 1 day");return e<60*60?new Date(e*1e3).toISOString().slice(14,19):new Date(e*1e3).toISOString().slice(11,19)}function f2(e){if(!rK(e))return null;const t=e.split(":").reverse();let i=0;return t.forEach((r,s)=>{i+=Number.parseInt(r)*Math.pow(60,s)}),i}const ax={SET_PLAY_BOUNDS:"SET_PLAY_BOUNDS",GET_SCRUBBER_POSITION:"GET_SCRUBBER_POSITION",PAUSE_PLAYER:"PAUSE_PLAYER"},U0={MEDIAPLAYER_READY:"MEDIAPLAYER_READY",CURRENT_SCRUBBER_POSITION:"CURRENT_SCRUBBER_POSITION",SET_PLAY_BOUNDS_SUCCESS:"SET_PLAY_BOUNDS_SUCCESS",PAUSE_PLAYER_SUCCESS:"PAUSE_PLAYER_SUCCESS"},sK=(...e)=>console.log("[PARENT] ",...e);function Zk(e){const t=[];function i(s){var u,d;s.source===((u=e.value)==null?void 0:u.contentWindow)&&(d=s.data)!=null&&d.type&&(sK("message received:",s.data.type,s.data.payload??"",{event:s}),t.forEach(l=>l(s)))}const r=fn(e,()=>{e.value&&(window.addEventListener("message",i),r())});return ao(()=>{window.removeEventListener("message",i)}),{postMessage(s){var u,d;(d=(u=e.value)==null?void 0:u.contentWindow)==null||d.postMessage(s,"*")},addResponseHandler(s){t.push(s)},destroy(){window.removeEventListener("message",i)}}}const aK=["src"],Kk=lt({__name:"ExcerptableIframe",props:{fileObjectId:{},startTime:{},endTime:{}},emits:["ready","update:currentScrubberPosition"],setup(e,{emit:t}){const i=e,r=Fe(null),s=Fe(0),u=Zk(r);u.addResponseHandler(l=>{const{type:m}=l.data;if(m===U0.MEDIAPLAYER_READY)return u.postMessage({type:ax.SET_PLAY_BOUNDS,payload:{startTime:i.startTime,endTime:i.endTime}});if(m===U0.CURRENT_SCRUBBER_POSITION)return s.value=l.data.payload,t("update:currentScrubberPosition",l.data.payload);if(m===U0.SET_PLAY_BOUNDS_SUCCESS)return t("ready")});const d=wi(ck);return d&&fn(d,()=>{u.postMessage({type:ax.PAUSE_PLAYER})}),(l,m)=>(H(),me("iframe",{ref_key:"videoPlayerIframe",ref:r,src:`${he(ci).instance.base.url}/asset/getEmbed/${l.fileObjectId}`,frameBorder:"0",allowfullscreen:"true",class:"w-full aspect-video"},`
    <slot />
  `,8,aK))}}),oK={class:"text-sm rounded-md"},lK={class:"inline-flex gap-1 items-center"},cK=["checked"],uK={key:0,class:"excerpt-details flex flex-col gap-4 mt-2 border border-neutral-300 bg-neutral-100 p-4 rounded-md"},dK={class:"flex gap-4"},hK=lt({__name:"AddExcerptToDrawerSection",props:{isAddingExcerpt:{type:Boolean},startTime:{},endTime:{},excerptName:{},fileObjectId:{}},emits:["update:startTime","update:endTime","update:excerptName","update:isAddingExcerpt"],setup(e,{emit:t}){const i=e,r=Fe(Gl(i.startTime??0)),s=Fe(Gl(i.endTime??0)),u=Fe(0),d=Fe(!1),l=Fe(!1),m=Fe(!1);function g(){r.value=Gl(u.value),t("update:startTime",u.value)}function x(){s.value=Gl(u.value),t("update:endTime",u.value)}return(w,C)=>(H(),me("div",oK,[ue("label",lK,[ue("input",{checked:w.isAddingExcerpt,type:"checkbox","aria-label":"Add Excerpt",class:"text-sm rounded-sm",onChange:C[0]||(C[0]=I=>w.$emit("update:isAddingExcerpt",I.target.checked))},null,40,cK),Mt(" Add as Excerpt ")]),w.isAddingExcerpt?(H(),me("div",uK,[ye(Ya,{id:"excerpt-name",modelValue:w.excerptName,label:"Excerpt Name",placeholder:"Excerpt Name",class:"flex-1 text-sm",inputClass:["!bg-white border !border-neutral-300",{"!border !border-red-500":!w.excerptName&&m.value}],"onUpdate:modelValue":C[1]||(C[1]=I=>{m.value=!0,w.$emit("update:excerptName",I)}),onBlur:C[2]||(C[2]=I=>m.value=!0)},null,8,["modelValue","inputClass"]),ue("div",dK,[ye(Ya,{id:"excerpt__start-time",modelValue:r.value,"onUpdate:modelValue":[C[3]||(C[3]=I=>r.value=I),C[4]||(C[4]=I=>{d.value=!0,w.$emit("update:startTime",he(f2)(I)??0)})],label:"Start Time",placeholder:"00:00",type:"text",class:"flex-1 text-sm",inputClass:["!bg-white border !border-neutral-300",{"!border !border-red-500":d.value&&!r.value}],onBlur:C[5]||(C[5]=()=>{d.value=!0,r.value=he(Gl)(w.startTime??0)})},{append:Me(()=>[ye(si,{variant:"tertiary",class:"text-sm",onClick:g},{default:Me(()=>[Mt(" Set")]),_:1})]),_:1},8,["modelValue","inputClass"]),ye(Ya,{id:"excerpt__end-time",modelValue:s.value,"onUpdate:modelValue":[C[6]||(C[6]=I=>s.value=I),C[7]||(C[7]=I=>{l.value=!0,w.$emit("update:endTime",he(f2)(I)??0)})],label:"End Time",placeholder:"00:00",type:"text",class:"flex-1 text-sm",inputClass:["!bg-white border !border-neutral-300",{"!border !border-red-500":l.value&&!s.value}],onBlur:C[8]||(C[8]=()=>{l.value=!0,s.value=he(Gl)(w.endTime??0)})},{append:Me(()=>[ye(si,{variant:"tertiary",class:"text-sm",onClick:x},{default:Me(()=>[Mt(" Set ")]),_:1})]),_:1},8,["modelValue","inputClass"])]),ye(Kk,{fileObjectId:w.fileObjectId,class:"aspect-video rounded","onUpdate:currentScrubberPosition":C[9]||(C[9]=I=>u.value=I)},null,8,["fileObjectId"])])):ot("",!0)]))}}),fK=ue("span",{class:"sr-only"},"Add to Drawer",-1),pK={class:"flex items-start justify-between gap-2 flex-1"},mK=ue("legend",{class:"sr-only"},"Choose a drawer",-1),gK={class:"flex-1 flex flex-col gap-1"},vK=ue("label",{class:"text-xs uppercase font-medium"},"Existing Drawer",-1),_K=ue("option",{value:""},"-",-1),yK=["value"],bK=ue("p",{class:"mt-8 before:absolute before:top-1/2 before:-translate-y-1/2 before:block before:h-[1px] before:w-full before:left-0 before:bg-transparent-black-100 relative leading-none text-center text-sm"},[ue("span",{class:"bg-neutral-50 relative z-10 px-2"},"or")],-1),xK={key:0,class:"text-xs italic text-red-500 my-2"},wK={class:"p-4 bg-neutral-200"},SK={class:"flex justify-end gap-4"},TK=lt({__name:"AddToDrawerButton",props:{assetId:{}},setup(e){const t=e,i=Fe(!1),r=Fe(""),s=Fe(""),u=Fe("idle"),d=Fe(!1),l=Fe(!1),m=Fe(!1),g=Pa(),x=Po(),w=Br({fileHandlerId:x.activeFileObjectId,name:"",startTime:0,endTime:0}),C=Oe(()=>s.value.trim()&&!g.drawers.some(V=>V.title===s.value)),I=Oe(()=>(r.value||s.value.trim())&&!(r.value&&s.value.trim())),M=Oe(()=>w.startTime>=0&&w.endTime>=0&&w.name.trim()&&Math.abs(w.endTime-w.startTime)>=1),L=Oe(()=>I.value&&(!d.value||M.value));async function $(){const V=Number.parseInt(r.value),Q=s.value.trim();if(!t.assetId)throw new Error("Cannot add to drawer. No active asset.");if(!V&&!Q)throw new Error("Cannot add to drawer. No new or selected drawer.");if(V&&Q)throw new Error("Cannot add to existing and new drawer at the same time.");if(Q&&!C.value)throw new Error("Drawer name is invalid.");if(V&&isNaN(V))throw new Error("Cannot add to drawer. Drawer ID is not a number.");if(d.value&&!M.value)throw new Error("Cannot add excerpt. Excerpt is invalid.");if(d.value&&!w.fileHandlerId)throw new Error("Cannot add excerpt. No file handler ID.");i.value=!1,u.value="fetching";const ae=isNaN(V)?(await g.createDrawer(Q)).id:V;w.startTime>w.endTime&&([w.startTime,w.endTime]=[w.endTime,w.startTime]),await g.addAssetToDrawer(t.assetId,ae,d.value?w:null),F()}function F(){r.value="",s.value="",u.value="idle",d.value=!1,w.name="",w.startTime=0,w.endTime=0,w.fileHandlerId=x.activeFileObjectId,l.value=!1}const U=Fe(null),{postMessage:ee}=Zk(U);return Bn(()=>{U.value=document.querySelector(".object-viewer__iframe")}),fn([()=>x.activeFileObjectId,i],async()=>{if(!i.value)return;if(!x.activeFileObjectId){m.value=!1;return}w.fileHandlerId=x.activeFileObjectId;const V=await Wn.getFileMetaData(x.activeFileObjectId);m.value=!!(V!=null&&V.handlerType)&&["MovieHandler","AudioHandler"].includes(V.handlerType),m.value&&ee({type:ax.PAUSE_PLAYER})},{immediate:!0}),(V,Q)=>(H(),me(Nt,null,[ye(gc,zr({title:"Add to Drawer"},V.$attrs,{onClick:Q[0]||(Q[0]=ae=>i.value=!0)}),{default:Me(()=>[u.value==="fetching"?(H(),We(he(zo),{key:0})):(H(),We(he(aM),{key:1})),fK]),_:1},16),ye(bc,{type:"info",label:"Add to Drawer",isOpen:i.value,class:"max-w-xl",onClose:Q[10]||(Q[10]=ae=>i.value=!1)},{footer:Me(()=>[ue("footer",wK,[ue("div",SK,[ye(si,{variant:"tertiary",onClick:Q[9]||(Q[9]=ae=>i.value=!1)},{default:Me(()=>[Mt("Cancel")]),_:1}),ye(si,{class:"text-sm",disabled:!L.value,variant:"primary",onClick:$},{default:Me(()=>[Mt(" Add to Drawer ")]),_:1},8,["disabled"])])])]),default:Me(()=>[ue("div",null,[ue("fieldset",pK,[mK,ue("div",gK,[vK,bs(ue("select",{"onUpdate:modelValue":Q[1]||(Q[1]=ae=>r.value=ae),class:Dn(["border border-neutral-200 rounded w-full text-sm",{" !border-red-500 text-red-700":!I.value&&l.value}]),"on:update:modelValue":Q[2]||(Q[2]=ae=>l.value=!0)},[_K,(H(!0),me(Nt,null,Fn(he(g).drawers,ae=>(H(),me("option",{key:ae.id,value:ae.id},xt(ae.title),9,yK))),128))],34),[[wh,r.value]])]),bK,ye(q1,{modelValue:s.value,"onUpdate:modelValue":[Q[3]||(Q[3]=ae=>s.value=ae),Q[4]||(Q[4]=ae=>l.value=!0)],class:"flex-1",label:"New Drawer",inputClass:["bg-white placeholder-neutral-400 border !border-neutral-200 rounded",{"!border !border-red-500 !text-red-700":!I.value&&l.value}]},null,8,["modelValue","inputClass"])]),!I.value&&l.value?(H(),me("p",xK," Please select a drawer or enter a new drawer name. ")):ot("",!0),he(x).activeFileObjectId&&m.value?(H(),We(hK,{key:1,startTime:w.startTime,"onUpdate:startTime":Q[5]||(Q[5]=ae=>w.startTime=ae),endTime:w.endTime,"onUpdate:endTime":Q[6]||(Q[6]=ae=>w.endTime=ae),excerptName:w.name,"onUpdate:excerptName":Q[7]||(Q[7]=ae=>w.name=ae),"is-adding-excerpt":d.value,"onUpdate:isAddingExcerpt":Q[8]||(Q[8]=ae=>d.value=ae),fileObjectId:he(x).activeFileObjectId,class:"mt-4"},null,8,["startTime","endTime","excerptName","is-adding-excerpt","fileObjectId"])):ot("",!0)])]),_:1},8,["isOpen"])],64))}}),EK=ue("div",{class:"fixed inset-0 z-40 bg-black/70","aria-hidden":"true"},null,-1),CK={class:"fixed inset-0 z-50 flex items-center justify-center p-4"},IK={class:"flex justify-end mt-4 space-x-2"},Z1=lt({__name:"ConfirmModal",props:{isOpen:{type:Boolean},title:{},type:{default:"info"},confirmLabel:{default:"Confirm"},cancelLabel:{default:"Cancel"}},emits:["close","confirm"],setup(e,{emit:t}){const i=e,r=Fe(null),s=Oe(()=>i.type==="danger"?"danger":"primary");function u(){t("confirm"),t("close")}function d(){t("close")}return(l,m)=>(H(),We(he(UM),{show:l.isOpen,as:"template",class:"fixed inset-0 z-40"},{default:Me(()=>[ye(he(Cj),{as:"div",onClose:d},{default:Me(()=>[ye(he($v),{enter:"duration-300 ease-out",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"duration-200 ease-in",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{default:Me(()=>[EK]),_:1}),ue("div",CK,[ye(he($v),{enter:"duration-300 ease-out",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"duration-200 ease-in",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",as:"template"},{default:Me(()=>[ye(he(Ij),{class:"flex-1"},{default:Me(()=>[ye(cm,{title:l.title,type:l.type,isDismissable:"",onDismiss:d},{default:Me(()=>[Mn(l.$slots,"default"),ue("div",IK,[ye(si,{variant:"tertiary",onClick:d},{default:Me(()=>[Mt(xt(l.cancelLabel),1)]),_:1}),ye(si,{ref_key:"confirmButtonRef",ref:r,variant:s.value,onClick:u},{default:Me(()=>[Mt(xt(l.confirmLabel),1)]),_:1},8,["variant"])])]),_:3},8,["title","type"])]),_:3})]),_:3})])]),_:3})]),_:3},8,["show"]))}});function Xk(){const e=T0("returnURL",null),t=T0("elevatorPlugin",null),i=Oe(()=>!!t.value),r=T0("elevatorCallbackType",null);function s(){e.value=null,t.value=null,r.value=null}return{returnUrl:e,isInEmbedMode:i,elevatorPlugin:t,elevatorCallbackType:r,clear:s}}const AK={key:2},MK=["innerHTML"],kK={key:1},PK=["action"],DK=ue("input",{type:"hidden",name:"lti_version",value:"LTI-1p0"},null,-1),LK=ue("input",{type:"hidden",name:"lti_message_type",value:"ContentItemSelection"},null,-1),OK=["value"],RK=lt({__name:"AddToEmbeddedPluginButton",props:{fileHandlerId:{}},setup(e){const t=e,i=Po(),r=Bd(),{elevatorPlugin:s,elevatorCallbackType:u,returnUrl:d,clear:l}=Xk(),m=Fe(null),g=Fe(!1),x=Fe(null),w=Fe(!1),C=Fe("idle"),I=Fe("");Bn(async()=>{x.value=await Wn.getEmbedPluginInterstitial()}),window.addEventListener("beforeunload",()=>l());async function M(){if(C.value="loading",!x.value)throw C.value="error",new Error("Interstitial not loaded");if(x.value.haveInterstitial){g.value=!0;return}w.value=!0}function L(){g.value=!1,C.value="idle"}function $(){g.value=!1,w.value=!0}async function F(){if(!t.fileHandlerId)throw C.value="error",new Error("File handler ID not set");if(u.value==="lti"){const U=await Wn.postLtiPayload({fileObjectId:t.fileHandlerId,excerptId:"",returnUrl:d.value??""});I.value=JSON.stringify(U),Ir(()=>{if(!m.value)throw C.value="error",new Error("Return form not set");m.value.submit(),C.value="success",r.addToast({message:"Added to Canvas"})})}u.value==="JS"&&(window.opener.postMessage({pluginResponse:!0,fileObjectId:i.activeFileObjectId,objectId:i.activeObjectId,currentLink:window.location.href},"*"),C.value="success",r.addToast({message:"Added to WordPress"}),window.close())}return fn(w,F),(U,ee)=>(H(),me(Nt,null,[ye(gc,{title:`Add to ${he(s)||"Elevator Plugin"}`,onClick:M},{default:Me(()=>[C.value==="loading"?(H(),We(he(zo),{key:0})):(H(),me(Nt,{key:1},[he(s)==="Canvas"?(H(),We(he(JB),{key:0})):he(s)==="WordPress"?(H(),We(he(u6),{key:1})):(H(),me("span",AK,"+ "+xt(he(s)??"Elevator Plugin"),1))],64))]),_:1},8,["title"]),ye(Z1,{isOpen:g.value,title:`Add to ${he(s)}`,onClose:L,onConfirm:$},{default:Me(()=>{var V,Q;return[(V=x.value)!=null&&V.interstitialText?(H(),me("div",{key:0,innerHTML:(Q=x.value)==null?void 0:Q.interstitialText},null,8,MK)):(H(),me("p",kK,"Are you sure you want to add this to "+xt(he(s))+"?",1))]}),_:1},8,["isOpen","title"]),he(u)=="lti"?(H(),me("form",{key:0,ref_key:"returnForm",ref:m,action:he(d)??"",method:"POST"},[DK,LK,ue("input",{type:"hidden",name:"content_items",value:I.value},null,8,OK)],8,PK)):ot("",!0)],64))}}),FK={class:"object-toolbar"},$K={class:"flex justify-between items-center w-full px-4 py-2"},zK={class:"flex gap-1 items-center leading-none"},p2=lt({__name:"ActiveFileViewToolbar",props:{fileHandlerId:{},assetId:{}},setup(e){const t=Ai(),{isInEmbedMode:i}=Xk();return(r,s)=>{var u;return H(),me("div",FK,[ue("div",$K,[ue("div",zK,[r.fileHandlerId?(H(),We(Gk,{key:0,fileObjectId:r.fileHandlerId},null,8,["fileObjectId"])):ot("",!0),r.assetId&&r.fileHandlerId?(H(),We(Wk,{key:1,assetId:r.assetId,fileObjectId:r.fileHandlerId},null,8,["assetId","fileObjectId"])):ot("",!0),r.fileHandlerId?(H(),We(qk,{key:2,fileObjectId:r.fileHandlerId},null,8,["fileObjectId"])):ot("",!0),(u=he(t).currentUser)!=null&&u.canManageDrawers&&r.assetId?(H(),We(TK,{key:3,assetId:r.assetId},null,8,["assetId"])):ot("",!0),he(i)?(H(),We(RK,{key:4,fileHandlerId:r.fileHandlerId},null,8,["fileHandlerId"])):ot("",!0)])])])}}}),BK={class:"object-details"},NK={key:0,class:"h-full flex justify-end"},UK={key:1,class:"flex gap-2"},jK=lt({__name:"ObjectDetailsPanel",props:{assetId:{},objectId:{},fileHandlerId:{},isOpen:{type:Boolean,default:!1},showToggle:{type:Boolean,default:!0}},emits:["toggle"],setup(e){const t=e,i=Oe(()=>t.objectId?dl(t.objectId):null);return(r,s)=>(H(),me("div",BK,[r.objectId?(H(),We(Mk,{key:1,label:"Details",variant:"secondary",isOpen:r.isOpen,showToggle:r.showToggle,class:"h-full",onToggle:s[0]||(s[0]=u=>r.$emit("toggle"))},{"header-utils":Me(()=>[ye(p2,{fileHandlerId:r.fileHandlerId,assetId:r.objectId},null,8,["fileHandlerId","assetId"])]),default:Me(()=>[r.objectId?(H(),We(pm,{key:0,assetId:r.objectId},null,8,["assetId"])):ot("",!0),r.objectId?(H(),me("footer",UK,[i.value?(H(),We(Lk,{key:0,to:i.value},null,8,["to"])):ot("",!0)])):ot("",!0)]),_:1},8,["isOpen","showToggle"])):(H(),me("div",NK,[ye(p2,{fileHandlerId:r.fileHandlerId,assetId:r.assetId},null,8,["fileHandlerId","assetId"])]))]))}}),VK={class:"media-card flex flex-col overflow-hidden border rounded-md shadow-sm"},HK={class:"placeholder-image aspect-video overflow-hidden"},GK={class:"flex items-center justify-center w-full h-full media-card__image"},WK={class:"flex-1 p-4 media-card__body hover:no-underline"},qK=lt({__name:"MediaCard",props:{imgSrc:{},imgAlt:{}},setup(e){return(t,i)=>(H(),me("article",VK,[ue("div",HK,[ue("div",GK,[t.imgSrc?(H(),We(Au,{key:0,src:t.imgSrc,alt:t.imgAlt||"Untitled",loading:"lazy",class:"object-cover w-full h-full"},null,8,["src","alt"])):(H(),We(he(Fp),{key:1}))])]),ue("div",WK,[Mn(t.$slots,"default",{},void 0,!0)]),Mn(t.$slots,"footer",{},void 0,!0)]))}});const ZK=sn(qK,[["__scopeId","data-v-a8eaec7b"]]),KK=ue("span",{class:"sr-only"},"Remove",-1),XK=lt({__name:"RemoveFromDrawerButton",props:{drawerId:{},objectId:{},excerptId:{}},setup(e){const t=e,i=Pa(),r=Oe(()=>i.getDrawerById(t.drawerId)),s=Oe(()=>{var w,C,I;return(I=(C=(w=r.value)==null?void 0:w.contents)==null?void 0:C.matches)==null?void 0:I.find(M=>M.objectId===t.objectId)}),u=Oe(()=>{var w,C,I;return(I=(C=(w=r.value)==null?void 0:w.contents)==null?void 0:C.matches)==null?void 0:I.find(M=>M.excerptId===t.excerptId)}),d=Fe(!1),l=Oe(()=>{var C;const w=(C=s.value)==null?void 0:C.title;return w?Array.isArray(w)?ko(w[0]):ko(w):null}),m=Oe(()=>{var w;return((w=u.value)==null?void 0:w.excerptLabel)??null}),g=Oe(()=>{var w;return(w=r.value)==null?void 0:w.title});async function x(){if(t.excerptId)return i.removeExcerptFromDrawer({drawerId:t.drawerId,excerptId:t.excerptId});i.removeAssetFromDrawer({drawerId:t.drawerId,assetId:t.objectId})}return(w,C)=>(H(),me(Nt,null,[ue("button",zr({class:"bg-white w-6 h-6 text-neutral-500 inline-flex justify-center items-center rounded-full shadow-sm border border-neutral-200 hover:bg-neutral-900 hover:text-neutral-200 transition-all",title:"Remove"},w.$attrs,{onClick:C[0]||(C[0]=I=>d.value=!0)}),[KK,Mt("  ")],16),ye(Z1,{isOpen:d.value,title:"Remove from drawer",type:"danger",confirmLabel:"Remove",onClose:C[1]||(C[1]=I=>d.value=!1),onConfirm:x},{default:Me(()=>[Mt(" Are you sure you want to remove "),ue("b",null,xt(w.excerptId?m.value??"this excerpt":l.value??"this asset"),1),Mt(" from the drawer "),ue("b",null,xt(g.value),1),Mt("? ")]),_:1},8,["isOpen"])],64))}}),YK={class:"relative search-result-card rounded-lg"},JK={class:"absolute top-1 right-1 z-10 flex gap-1"},QK={class:"search-result-card__title font-bold leading-tight mb-2"},eX={key:0,class:"search-result-card__contents max-h-[15rem] overflow-y-auto overflow-x-hidden"},tX={class:"text-sm"},nX={class:"font-bold text-xs uppercase"},iX=lt({__name:"SearchResultCard",props:{searchMatch:{},drawerId:{},mediaCardClass:{}},setup(e){const t=e,i=Ai(),r=Oe(()=>{if(!t.searchMatch.excerpt)return null;if(!t.searchMatch.excerptId)throw new Error("Excerpt is missing excerptId");return`/asset/viewExcerpt/${t.searchMatch.excerptId}`}),s=Oe(()=>t.searchMatch.excerpt?t.searchMatch.excerptLabel:null),u=Oe(()=>dl(t.searchMatch.objectId)),d=Oe(()=>Array.isArray(t.searchMatch.title)?t.searchMatch.title.map(m=>ko(m)).join(","):t.searchMatch.title&&t.searchMatch.title.length>0?ko(t.searchMatch.title):"(no title)"),l=Oe(()=>{const{excerptAsset:m,primaryHandlerThumbnail2x:g}=t.searchMatch;return m?_c(m):g??null});return(m,g)=>{var x;return H(),me("div",YK,[m.drawerId&&((x=he(i).currentUser)!=null&&x.canManageDrawers)?(H(),We(XK,{key:0,class:"absolute top-0 right-0 -translate-y-1/2 translate-x-1/2 z-10 remove-from-drawer-btn",drawerId:m.drawerId,objectId:m.searchMatch.objectId,excerptId:m.searchMatch.excerptId??void 0},null,8,["drawerId","objectId","excerptId"])):ot("",!0),ye(as,{to:r.value??u.value,class:"rounded-md hover:no-underline"},{default:Me(()=>[ye(ZK,{imgSrc:l.value,imgAlt:d.value,class:Dn(["search-result-card flex w-full h-full relative transition-colors",m.mediaCardClass])},{default:Me(()=>{var w;return[ue("div",JK,[!m.searchMatch.excerpt&&m.searchMatch.fileAssets&&m.searchMatch.fileAssets>1?(H(),We(Gv,{key:0,class:"!bg-neutral-900 !text-neutral-200 border !border-neutral-900"},{default:Me(()=>[Mt(xt(m.searchMatch.fileAssets)+" files ",1)]),_:1})):ot("",!0),m.searchMatch.excerpt?(H(),We(Gv,{key:1,class:"!bg-neutral-50 !text-neutral-900 border !border-neutral-50"},{default:Me(()=>[Mt(" Excerpt ")]),_:1})):ot("",!0)]),ue("h1",QK,xt(s.value??d.value),1),(w=t.searchMatch)!=null&&w.entries?(H(),me("div",eX,[ue("dl",tX,[(H(!0),me(Nt,null,Fn(t.searchMatch.entries,(C,I)=>{var M;return H(),me("div",{key:I,class:"mb-2"},[ue("dt",nX,xt((C==null?void 0:C.label)??"Item"),1),ue("dd",null,xt((M=C.entries)==null?void 0:M.join(", ")),1)])}),128))])])):ot("",!0)]}),_:1},8,["imgSrc","imgAlt","class"])]),_:1},8,["to"])])}}});const Wv=sn(iX,[["__scopeId","data-v-3d015b38"]]);const rX={},sX={class:"more-like-this__count inline-flex items-center px-2 py-1 text-xs font-bold rounded-full"};function aX(e,t){return H(),me("span",sX,[Mn(e.$slots,"default",{},void 0,!0)])}const ox=sn(rX,[["render",aX],["__scopeId","data-v-67b76540"]]),oX=lt({__name:"ButtonWithCount",props:{count:{}},setup(e){return(t,i)=>(H(),We(si,null,{default:Me(()=>[Mn(t.$slots,"default"),ye(ox,null,{default:Me(()=>[Mt(xt(t.count),1)]),_:1})]),_:3}))}}),Yk=e=>(ro("data-v-23538bf6"),e=e(),so(),e),lX={key:0,class:"more-like-this"},cX={key:0,class:"pt-6 mt-6"},uX={class:"more-like-this__title flex flex-wrap items-center gap-2 mb-4 text-xl font-bold"},dX=Yk(()=>ue("span",null,"More Like This",-1)),hX=Yk(()=>ue("span",null,"More Like This",-1)),fX={class:"grid grid-cols-3 gap-2"},pX=lt({__name:"MoreLikeThis",props:{items:{},listContainerClass:{}},setup(e){const t=e,i=Oe(()=>t.items.slice(0,ci.instance.moreLikeThis.maxInlineResults)),r=Oe(()=>t.items.length-i.value.length),s=Fe(!1);return(u,d)=>u.items.length?(H(),me("section",lX,[i.value.length?(H(),me("div",cX,[ue("h3",uX,[dX,ye(ox,null,{default:Me(()=>[Mt(xt(u.items.length),1)]),_:1})]),ue("div",{class:Dn(["flex flex-col gap-2",u.listContainerClass])},[(H(!0),me(Nt,null,Fn(i.value,l=>(H(),We(Wv,{key:l.objectId,searchMatch:l},null,8,["searchMatch"]))),128))],2)])):ot("",!0),r.value?(H(),We(oX,{key:1,count:r.value,class:"my-4",onClick:d[0]||(d[0]=l=>s.value=!0)},{default:Me(()=>[Mt(xt(he(ci).instance.moreLikeThis.maxInlineResults?"Show More":"More Like This"),1)]),_:1},8,["count"])):ot("",!0),ye(bc,{label:"More Like This",isOpen:s.value,onClose:d[1]||(d[1]=l=>s.value=!1)},{label:Me(()=>[hX,ye(ox,{class:"ml-2"},{default:Me(()=>[Mt(xt(u.items.length),1)]),_:1})]),default:Me(()=>[ue("div",fX,[(H(!0),me(Nt,null,Fn(u.items,l=>(H(),We(Wv,{key:l.objectId,searchMatch:l},null,8,["searchMatch"]))),128))])]),_:1},8,["isOpen"])])):ot("",!0)}});const Jk=sn(pX,[["__scopeId","data-v-23538bf6"]]),mX={class:"asset-details"},gX=lt({__name:"AssetDetailsPanel",props:{assetId:{},isOpen:{type:Boolean,default:!0},showToggle:{type:Boolean,default:!0}},emits:["toggle"],setup(e){const t=e,i=Oe(()=>t.assetId),{asset:r}=V_(i),s=Fe([]);fn(i,async()=>{s.value=await Wn.getMoreLikeThis(i.value)},{immediate:!0});const u=Oe(()=>r.value?Tu(r.value):"");return(d,l)=>(H(),me("div",mX,[ye(Mk,{label:u.value,isOpen:d.isOpen,showToggle:d.showToggle,class:"h-full py-4 md:py-0",onToggle:l[0]||(l[0]=m=>d.$emit("toggle"))},{"header-label":Me(()=>[ye(Ak,{label:u.value||"(No Title)",class:Dn({"text-2xl":d.isOpen})},null,8,["label","class"])]),default:Me(()=>[d.assetId?(H(),We(pm,{key:0,assetId:d.assetId,class:"py-4 md:py-0"},null,8,["assetId"])):ot("",!0),d.assetId?(H(),We(Jk,{key:1,items:s.value},null,8,["items"])):ot("",!0)]),_:1},8,["label","isOpen","showToggle"])]))}}),vX={class:"asset-view h-full relative"},_X=lt({__name:"AssetView",props:{assetId:{},objectId:{}},setup(e){const t=Fe(!0),i=Fe(!1),r=Po(),s=gz("(min-width: 768px)");return(u,d)=>(H(),me("div",vX,[ye(Ik,{class:Dn(["asset-view__object-viewer h-[75vh] md:h-auto md:absolute md:top-0 border-t-0 border-b-asset-view",{"md:top-0 md:bottom-1/2 md:left-sm md:right-0 border-l-asset-view":t.value&&i.value,"md:top-0 md:bottom-16 md:left-sm md:right-0 border-l-asset-view":t.value&&!i.value,"md:top-0 md:bottom-16 md:left-0 md:right-sm border-r-asset-view":!t.value&&i.value,"md:top-0 md:bottom-16 md:left-0 md:right-0":!t.value&&!i.value}]),fileHandlerId:he(r).activeFileObjectId},null,8,["class","fileHandlerId"]),ye(gX,{class:Dn(["asset-view__asset-panel md:absolute",{"asset-view__asset-panel--open":t.value,"md:bottom-0 md:left-0 md:top-0 md:w-sm":t.value,"md:bottom-0 md:left-0 md:h-16 md:right-sm border-r-asset-view":!t.value&&i.value,"md:bottom-0 md:left-0 md:h-16 md:w-1/2":!t.value&&!i.value}]),showToggle:he(s),assetId:he(r).activeAssetId,isOpen:he(s)?t.value:!0,onToggle:d[0]||(d[0]=l=>t.value=!t.value)},null,8,["class","showToggle","assetId","isOpen"]),ye(jK,{class:Dn(["asset-view__details-panel md:absolute",{"asset-view__details-panel--open":i.value,"border-l-asset-view":!i.value,"md:bottom-0 md:right-0 md:h-16 md:left-sm":!i.value&&t.value,"md:bottom-0 md:right-0 md:h-1/2 md:left-sm border-l-asset-view":i.value&&t.value,"md:bottom-0 md:right-0 md:top-0 md:w-sm":i.value&&!t.value,"md:bottom-0 md:right-0 md:h-16 md:w-1/2":!i.value&&!t.value}]),showToggle:he(s),assetId:he(r).activeAssetId,objectId:he(r).activeObjectId,fileHandlerId:he(r).activeFileObjectId,isOpen:he(s)?i.value:!0,onToggle:d[1]||(d[1]=l=>i.value=!i.value)},null,8,["class","showToggle","assetId","objectId","fileHandlerId","isOpen"])]))}});const yX=sn(_X,[["__scopeId","data-v-df4920af"]]),bX={class:"h-full relative"},xX={class:"meta-data-only-view h-full sm:p-8"},wX={class:"meta-data-only-view__article m-auto sm:max-w-3xl h-full overflow-auto p-4 sm:p-12 rounded shadow sm:px-12"},SX={class:"text-3xl mb-12 sm:text-5xl font-bold py-8 after:content-[''] after:w-8 after:h-2 after:block relative after:absolute after:bottom-0 after:left-0"},TX=lt({__name:"MetaDataOnlyView",props:{assetId:{}},setup(e){const t=e,i=Oe(()=>t.assetId),{asset:r}=V_(i),s=Oe(()=>r.value?Tu(r.value):"Unknown"),u=Fe([]);return fn(i,async()=>{u.value=await Wn.getMoreLikeThis(i.value)},{immediate:!0}),(d,l)=>(H(),me("div",bX,[ue("div",xX,[ue("article",wX,[ue("h2",SX,xt(s.value||"(No Title)"),1),d.assetId?(H(),We(pm,{key:0,assetId:d.assetId},null,8,["assetId"])):ot("",!0),d.assetId?(H(),We(Jk,{key:1,items:u.value,listContainerClass:"sm:!grid sm:!grid-cols-2"},null,8,["items"])):ot("",!0)])])]))}});const EX=sn(TX,[["__scopeId","data-v-bbc41242"]]),Qk=(e="")=>{const t=Ai(),i=Fe(e),r=Oe(()=>i.value?`${i.value} | ${t.instance.name}`:t.instance.name);return Bz(r),i},CX={key:0,class:"justify-between items-center gap-4 grid grid-cols-3 px-4 py-1"},IX={class:"flex justify-start"},AX={class:"flex justify-center text-xs text-gray-500 leading-none p-2"},MX={class:"flex justify-end"},kX=5,PX=lt({__name:"PrevNextSearchResultNav",setup(e){const t=Po(),i=Nr(),r=Oe(()=>{const{activeAssetId:l}=t;if(!l)return null;const m=i.matches.findIndex(g=>g.objectId===l);return m===-1?null:m});function s(){return r.value!==null&&i.hasMoreResults&&i.matches.length-r.value<=kX}fn([()=>i.matches,r],()=>{s()&&i.loadMore()});const u=Oe(()=>{const l=r.value;return l===null||l<=0?null:i.matches[l-1].objectId}),d=Oe(()=>{var m;const l=r.value;return l===null||l+1>=i.matches.length||i.status=="fetching"?null:((m=i.matches[l+1])==null?void 0:m.objectId)??null});return(l,m)=>r.value!==null?(H(),me("nav",CX,[ue("div",IX,[u.value?(H(),We(si,{key:0,variant:"tertiary",to:he(dl)(u.value)},{default:Me(()=>[ye(he(oM),{class:"h-3 w-3"}),Mt(" Prev ")]),_:1},8,["to"])):ot("",!0)]),ue("div",AX,[ye(si,{to:{name:"search",params:{searchId:he(i).searchId},query:{objectId:he(t).activeAssetId,resultsView:he(i).resultsView}},variant:"tertiary"},{default:Me(()=>[Mt(xt(r.value+1)+" of "+xt(he(i).totalResults),1)]),_:1},8,["to"])]),ue("div",MX,[d.value?(H(),We(si,{key:0,variant:"tertiary",to:he(dl)(d.value),class:"!ml-0"},{default:Me(()=>[Mt(" Next "),ye(he(lM),{class:"h-3 w-3"})]),_:1},8,["to"])):ot("",!0)])])):ot("",!0)}});function m2(e){return e==" "||e==`
`||e=="\r"||e=="	"}function DX(e){return e=='"'||e=="'"}const Kd="<",G_=">",qv="&lt;",eP="&gt;";class Vp{constructor(t){this.options=t}consume(t,i){return t==Kd?(i(new LX(this.options)),""):t==G_&&this.options.encodePlaintextTagDelimiters?eP:t}}class LX{constructor(t){this.options=t,this.nameBuffer="",this.isClosingTag=!1}consume(t,i){if(this.nameBuffer.length==0){if(m2(t))return i(new Vp(this.options)),(this.options.encodePlaintextTagDelimiters?qv:"<")+t;if(t=="/")return this.isClosingTag=!0,""}return m2(t)?this.isNameBufferAnAllowedTag()?(i(new lx(0,this.options)),Kd+(this.isClosingTag?"/":"")+this.nameBuffer+t):(i(new lx(1,this.options)),this.options.tagReplacementText):t==Kd?(this.nameBuffer+=qv,""):t==G_?(i(new Vp(this.options)),this.isNameBufferAnAllowedTag()?Kd+(this.isClosingTag?"/":"")+this.nameBuffer+t:this.options.tagReplacementText):t=="-"&&this.nameBuffer=="!-"?(i(new RX(this.options)),""):(this.nameBuffer+=t,"")}isNameBufferAnAllowedTag(){const t=this.nameBuffer.toLowerCase();return this.options.allowedTags?this.options.allowedTags.has(t):this.options.disallowedTags?!this.options.disallowedTags.has(t):!1}}class lx{constructor(t,i){this.mode=t,this.options=i}consume(t,i){return t==G_?i(new Vp(this.options)):DX(t)&&i(new OX(this.mode,t,this.options)),this.mode==1?"":t==Kd?qv:t}}class OX{constructor(t,i,r){this.mode=t,this.quoteCharacter=i,this.options=r}consume(t,i){return t==this.quoteCharacter&&i(new lx(this.mode,this.options)),this.mode==1?"":t==Kd?qv:t==G_?eP:t}}class RX{constructor(t){this.options=t,this.consecutiveHyphens=0}consume(t,i){return t==">"&&this.consecutiveHyphens>=2?i(new Vp(this.options)):t=="-"?this.consecutiveHyphens++:this.consecutiveHyphens=0,""}}const FX={tagReplacementText:"",encodePlaintextTagDelimiters:!0};class $X{constructor(t={}){this.state=new Vp(Object.assign(Object.assign({},FX),t)),this.transitionFunction=(i=>{this.state=i}).bind(this)}consume(t){let i="";for(const r of t)i+=this.state.consume(r,this.transitionFunction);return i}}function zX(e,t={}){return new $X(t).consume(e)}const BX=lt({__name:"AssetViewPage",props:{assetId:{},objectId:{default:null}},setup(e){const t=e,i=Po(),r=Oe(()=>!i.activeFileObjectId),s=Fe(!1),u=Eu(),d=Oe(()=>{var g;return((g=u.hash)==null?void 0:g.substring(1))||t.objectId||null}),l=Qk();async function m(){s.value=!1;const g=await i.setActiveAsset(t.assetId,d.value);if(!g){l.value="Asset not found",s.value=!0;return}const x=Tu(g);l.value=zX(x),s.value=!0}return fn([()=>t.assetId,()=>{var g;return(g=u.params)==null?void 0:g.assetId}],m,{immediate:!0}),fn([()=>t.objectId,()=>u.hash],async()=>{await i.setActiveObject(d.value)}),OB(()=>{i.setActiveAsset(null)}),(g,x)=>(H(),We(Ck,{class:"overflow-x-hidden"},{secondaryAppHeader:Me(()=>[ye(PX)]),default:Me(()=>[s.value?(H(),me(Nt,{key:0},[r.value?(H(),We(EX,{key:0,assetId:he(i).activeAssetId},null,8,["assetId"])):(H(),We(yX,{key:1,assetId:he(i).activeAssetId,objectId:he(i).activeObjectId},null,8,["assetId","objectId"]))],64)):ot("",!0)]),_:1}))}}),NX={class:"collection-item p-4 rounded border transition-colors duration-150"},UX={class:"flex items-center gap-1"},jX={key:0},VX=lt({__name:"CollectionItem",props:{collection:{}},setup(e){const t=e,i=Oe(()=>{const s=t.collection.previewImageId;return s?_c(s):null}),r=Fe(!1);return(s,u)=>{const d=y_("CollectionItem",!0);return H(),me("div",NX,[ue("div",UX,[s.collection.children&&s.collection.children.length>0?(H(),me("button",{key:0,class:"p-2 -ml-2 rounded-full inline-flex items-center justify-center hover:bg-white transition-colors duration-150",onClick:u[0]||(u[0]=l=>r.value=!r.value)},[ye(he(Ch),{class:Dn(["transform w-4 h-4",{"-rotate-90":!r.value}])},null,8,["class"])])):ot("",!0),ye(as,{class:"flex gap-2 flex-1 items-center !no-underline h-full",to:`/collections/browseCollection/${s.collection.id}`},{default:Me(()=>[i.value?(H(),We(Au,{key:0,src:i.value,alt:s.collection.title,class:"w-6 h-6 object-cover rounded-md"},null,8,["src","alt"])):ot("",!0),ue("h2",{class:Dn({"font-bold":r.value})},xt(s.collection.title),3)]),_:1},8,["to"])]),s.collection.children?(H(),me("div",jX,[(H(!0),me(Nt,null,Fn(s.collection.children,l=>bs((H(),We(d,{key:l.id,collection:l,class:"!p-0 m-2 ml-8"},null,8,["collection"])),[[Ca,r.value]])),128))])):ot("",!0)])}}});const HX=sn(VX,[["__scopeId","data-v-6b255d03"]]),GX=e=>(ro("data-v-32792673"),e=e(),so(),e),WX={class:"collections-page p-8 px-4"},qX=GX(()=>ue("h1",{class:"text-4xl font-bold my-8"},"Collections",-1)),ZX=lt({__name:"AllCollectionsPage",setup(e){nm(d=>({"636638a2":s.value,"636d0b88":u.value}));const t=Ai(),i=Fe(null),r=Oe(()=>t.collections),s=Fe(1);k_(i,d=>{const[l]=d,{width:m}=l.contentRect;m<640&&(s.value=1),m<768&&(s.value=2),m<1024&&(s.value=3),m>=1024&&(s.value=4)});const u=Oe(()=>{const d=r.value.length;return Math.ceil(d/s.value)});return(d,l)=>(H(),We(oo,null,{default:Me(()=>[ue("div",WX,[qX,ue("div",{ref_key:"collectionGrid",ref:i,class:"grid"},[(H(!0),me(Nt,null,Fn(r.value,m=>(H(),We(HX,{key:m.id,collection:m},null,8,["collection"]))),128))],512)])]),_:1}))}});const KX=sn(ZX,[["__scopeId","data-v-32792673"]]),XX=lt({__name:"BrowseCollectionPage",props:{collectionId:{}},setup(e){const t=e,i=$o();return fn([()=>t.collectionId],async()=>{const r=await Wn.getSearchIdForCollection(t.collectionId);i.replace(`/search/s/${r}`)},{immediate:!0}),(r,s)=>(H(),We(oo))}}),YX={class:"pb-8 my-8"},JX={key:0,class:"text-4xl font-bold mt-4"},QX=lt({__name:"BrowseCollectionHeader",props:{collectionId:{}},setup(e){const t=e,i=Ai(),r=Fe(null);return fn([()=>t.collectionId,()=>i.isReady],async()=>{i.isReady&&(r.value=await i.getCollectionById(t.collectionId))},{immediate:!0}),(s,u)=>{var d,l,m;return H(),me("div",null,[ue("header",YX,[ye(as,{to:"/search/listCollections",class:"flex items-center gap-1"},{default:Me(()=>[ye(he(Cu),{class:"transform rotate-180 h-4 w-4"}),Mt(" Back to Collections ")]),_:1}),(d=r.value)!=null&&d.title?(H(),me("h2",JX," Browsing "+xt((l=r.value)==null?void 0:l.title),1)):ot("",!0),(m=r.value)!=null&&m.description?(H(),We(ch,{key:1,html:r.value.description,class:"prose max-w-screen-lg mt-2"},null,8,["html"])):ot("",!0),r.value?ot("",!0):(H(),We(ll,{key:2,class:"!w-1/2 !h-12 !my-8"}))])])}}}),eY={key:0},So=lt({__name:"Tab",props:{id:{},label:{}},setup(e){const t=e,i=wi(lk);return Bn(()=>{if(!i)throw new Error("TabsContext not found");i.addTab(t)}),Wi(()=>{if(!i)throw new Error("TabsContext not found");i.removeTab(t)}),(r,s)=>{var u;return(u=he(i))!=null&&u.isActiveTab(r.id)?(H(),me("div",eY,[Mn(r.$slots,"default")])):ot("",!0)}}}),tY=["onClick"],nY={class:"py-4"},tP=lt({__name:"Tabs",props:{labelsClass:{},activeTabId:{}},emits:["tabChange"],setup(e,{emit:t}){const i=e,r=Fe([]),s=m=>{r.value.push(m)},u=m=>{const g=r.value.findIndex(x=>x.id===m.id);g!==-1&&r.value.splice(g,1)},d=m=>{const g=r.value.find(x=>x.id===m);if(!g)throw new Error(`Tab with id ${m} not found`);t("tabChange",g)};return Oi(lk,{addTab:s,removeTab:u,setActiveTab:d,isActiveTab:m=>m===i.activeTabId}),(m,g)=>(H(),me("div",null,[ue("div",{class:Dn(["tabs flex",m.labelsClass])},[(H(!0),me(Nt,null,Fn(r.value,x=>(H(),me("button",{key:x.id,class:Dn(["tab-button px-4 py-2 text-sm border-b-2",{"border-transparent text-neutral-400":x.id!==m.activeTabId,"tab-button--is-active border-neutral-900 text-neutral-900 font-bold":x.id===m.activeTabId}]),onClick:w=>d(x.id)},xt(x.label),11,tY))),128))],2),ue("div",nY,[Mn(m.$slots,"default")])]))}}),iY={class:"card-skeleton flex flex-col overflow-hidden border rounded-md shadow-sm"},rY={class:"placeholder-image aspect-video flex items-center justify-center w-full overflow-hidden"},sY={class:"flex-1 p-4"},aY=lt({__name:"SkeletonCard",setup(e){return(t,i)=>(H(),me("article",iY,[ue("div",rY,[ye(ll,{width:"100%",height:"100%",class:"rounded-none"},{default:Me(()=>[ye(C1,{class:"opacity-25 w-8 h-8"})]),_:1})]),ue("div",sY,[ye(ll,{height:"1.5rem",width:"50%",class:"mb-4"}),(H(),me(Nt,null,Fn(3,r=>ye(ll,{key:r,class:"mb-2",height:"0.75rem"})),64))])]))}}),oY={class:"grid grid-cols-auto-md gap-4"},lY=lt({__name:"SearchResultsGrid",props:{totalResults:{default:void 0},matches:{},status:{},drawerId:{default:void 0}},emits:["loadMore"],setup(e,{emit:t}){const i=e,{arrivedState:r}=P_(window,{offset:{bottom:100}});fn(r,u=>{u.bottom&&s.value&&i.status!=="fetching"&&t("loadMore")},{immediate:!0});const s=Oe(()=>(i.totalResults??1/0)>i.matches.length);return(u,d)=>(H(),me("div",null,[ue("div",oY,[(H(!0),me(Nt,null,Fn(u.matches,l=>(H(),We(Wv,{id:`object-${l.objectId}`,key:l.objectId,searchMatch:l,showDetails:!1,drawerId:u.drawerId},null,8,["id","searchMatch","drawerId"]))),128)),(H(!0),me(Nt,null,Fn(Math.min(30,(u.totalResults??1/0)-u.matches.length),l=>bs((H(),We(aY,{key:l})),[[Ca,u.status==="fetching"]])),128))])]))}}),cY={key:1,class:"h-8 w-8 sm:h-16 sm:w-16"},uY={class:"flex-1"},dY={class:"font-bold text-md sm:text-lg leading-tight sm:mb-2 group-hover:text-blue-700 group-focus:text-blue-700"},hY={key:0,class:"inline-flex items-baseline gap-x-4 sm:gap-y-2 flex-wrap m-0"},fY={class:"text-xs uppercase"},pY={class:"text-sm"},mY={class:"not-sr-only hidden sm:inline-flex self-center rounded-full w-10 h-10 items-center justify-center group-hover:bg-blue-700 transition-all"},nP=lt({__name:"SearchResultRow",props:{searchMatch:{}},setup(e){const t=e,i=Oe(()=>Array.isArray(t.searchMatch.title)?t.searchMatch.title.map(ko).join(","):t.searchMatch.title&&t.searchMatch.title.length>0?ko(t.searchMatch.title):"(no title)"),r=Oe(()=>{const{primaryHandlerId:s}=t.searchMatch;return s?_c(s):null});return(s,u)=>(H(),We(as,{to:he(dl)(s.searchMatch.objectId),class:"group hover:no-underline relative text-inherit group focus:outline-blue-600 focus:outline-offset-2 focus-within:outline-solid search-result-row flex bg-white p-2 sm:p-4 gap-4 group-hover:bg-blue-50 transition-all rounded-md border-2 border-transparent hover:border-blue-600 group-focus:bg-blue-50 group-focus:border-blue-600 items-center"},{default:Me(()=>{var d;return[r.value?(H(),We(Au,{key:0,src:r.value,alt:i.value,class:"h-8 w-8 sm:h-16 sm:w-16 object-cover rounded-md overflow-hidden"},null,8,["src","alt"])):(H(),me("div",cY)),ue("div",uY,[ue("h1",dY,xt(i.value),1),(d=t.searchMatch)!=null&&d.entries?(H(),me("dl",hY,[(H(!0),me(Nt,null,Fn(t.searchMatch.entries,(l,m)=>{var g;return H(),me("div",{key:m,class:"inline-flex items-baseline gap-x-2 flex-wrap text-neutral-400 group-hover:text-blue-700 group-focus:text-blue-700"},[ue("dt",fY,xt((l==null?void 0:l.label)||"Item"),1),ue("dd",pY,xt((g=l.entries)==null?void 0:g.join(", ")),1)])}),128))])):ot("",!0)]),ue("div",mY,[ye(he(Cu),{class:"text-neutral-900 group-hover:text-white transition-all"})])]}),_:1},8,["to"]))}}),gY={class:"search-result-row flex bg-white p-2 sm:p-4 gap-4 rounded-md border-2 border-transparent"},vY={class:"flex-1"},_Y=lt({__name:"SkeletonResultRow",setup(e){return(t,i)=>(H(),me("div",gY,[ye(ll,{width:"4rem",height:"4rem"},{default:Me(()=>[ye(C1,{class:"opacity-25"})]),_:1}),ue("div",vY,[ye(ll,{width:"25%",height:"1.25rem",class:"mb-4"}),(H(),me(Nt,null,Fn(2,r=>ye(ll,{key:r,class:"my-2",height:"0.75rem",width:"50%"})),64))])]))}}),yY={class:"flex flex-col gap-1"},bY=lt({__name:"SearchResultsList",props:{totalResults:{},matches:{},status:{}},emits:["loadMore"],setup(e,{emit:t}){const i=e,{arrivedState:r}=P_(window,{offset:{bottom:100}});fn(r,u=>{u.bottom&&s.value&&i.status!=="fetching"&&t("loadMore")},{immediate:!0});const s=Oe(()=>(i.totalResults??1/0)>i.matches.length);return(u,d)=>(H(),me("div",null,[ue("div",yY,[(H(!0),me(Nt,null,Fn(u.matches,l=>(H(),We(nP,{id:`object-${l.objectId}`,key:l.objectId,searchMatch:l,showDetails:!1},null,8,["id","searchMatch"]))),128)),(H(!0),me(Nt,null,Fn(Math.min(30,(u.totalResults??1/0)-u.matches.length),l=>bs((H(),We(_Y,{key:l})),[[Ca,u.status==="fetching"]])),128))])]))}});const Lo=navigator?navigator.userAgent.toLowerCase():"no-user-agent-specified",fh=document?document.documentElement:null,xY=Lo?Lo.indexOf("phantom")!==-1:!1,vm=window&&"ActiveXObject"in window;vm&&Lo.match(/MSIE 9/i);const W_=Lo.indexOf("webkit")!==-1;Lo.indexOf("android");const wY=Lo.search("android [23]")!==-1,Mu=window?typeof window.orientation<"u":!1,SY=navigator&&window?navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&!window.PointerEvent:!1,TY=navigator&&window?window.PointerEvent&&navigator.pointerEnabled&&navigator.maxTouchPoints:SY,iP=window?window.opera:!1;Lo.indexOf("gecko");const ph=Lo.indexOf("gecko")!==-1&&!W_&&!iP&&!vm;Lo.indexOf("chrome");const EY=Lo.indexOf("edge/")!==-1;fh&&vm&&"transition"in fh.style;window&&"WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix;fh&&"MozPerspective"in fh.style;fh&&"OTransition"in fh.style;let g2=window?"devicePixelRatio"in window&&window.devicePixelRatio>1:!1;if(!g2&&window&&"matchMedia"in window){let e=window.matchMedia("(min-resolution:144dpi)");g2=e&&e.matches}const Io=window&&!window.L_NO_TOUCH&&!xY&&(TY||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);function CY(){var e=window.innerWidth,t=window.innerHeight,i="portrait";return e>t&&(i="landscape"),i}function _m(e){return typeof e=="string"?document.getElementById(e):e}function hn(e,t,i){var r=document.createElement(e);return r.className=t,i&&i.appendChild(r),r}function Jf(e,t){var i=hn("button",e,t);return i.type="button",i}function cx(e){for(var t={x:0,y:0};e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t.x+=e.offsetLeft,t.y+=e.offsetTop,e=e.offsetParent;return t}function rP(e){for(var t=document.documentElement.style,i=0;i<e.length;i++)if(e[i]in t)return e[i];return!1}rP(["transition","webkitTransition","OTransition","MozTransition","msTransition"]);rP(["transformProperty","WebkitTransform","OTransform","MozTransform","msTransform"]);function IY(e,t){return e.className.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)}function lc(e,t){IY(e,t)||(e.className+=(e.className?" ":"")+t)}function sP(e,t){e.className=e.className.replace(/(\S+)\s*/g,function(i,r){return r===t?"":i}).replace(/^\s+/,"")}class mi extends Error{constructor(t,i){super(),this.name="TLError",this.message=t||"error",this.message_key=this.message,this.detail=i||""}}const v2={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function aP(e){v2[e.toLowerCase()]&&(e=v2[e.toLowerCase()]);var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(r,s,u,d){return s+s+u+u+d+d});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null}function Pi(e,t){var i;for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}function AY(e){return e==null?!1:e==!0||String(e).toLowerCase()=="true"||Number(e)==1}function $d(e){for(var t=Array.prototype.slice.call(arguments,1),i=0,r=t.length,s;i<r;i++)s=t[i]||{},Pi(e,s);return e}const oP=[];function MY(e){oP.push(e)}function gi(e){oP.forEach(t=>{try{t(e)}catch(i){console&&console.log&&console.log("Error handling trace",i)}})}function Qo(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}const _2=function(){var e=0,t="_tl_id";return function(i){return i[t]=i[t]||++e,i[t]}}();function ia(e){return e&&typeof e.replace=="function"?e.replace(/^\s+|\s+$/g,""):""}function Ss(e,...t){for(let r of t)for(var i of Object.getOwnPropertyNames(r.prototype))e.prototype[i]=r.prototype[i]}function kY(e,t){if(t||(t=_u(6)),!(t in e))return t;var i=t.match(/^(.+)(-\d+)?$/)[1],r=[];for(let u in e)u.match(/^(.+?)(-\d+)?$/)[1]==i&&r.push(u);t=i+"-"+(r.length+1);for(var s=r.length;r.indexOf(t)!=-1;s++)t=i+"-"+s;return t}function PY(e){var t=[];if(Object.keys)t=Object.keys(e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);for(var r=0;r<t.length;r++){var s=t[r];if(e[s]!=null&&typeof e[s]!="string"||ia(e[s]).length!=0)return!1}return!0}function j0(e){e=ia(e),e=e.toLowerCase();for(var t="/_,:;",i="aaaaaeeeeeiiiiooooouuuunc------",r=0,s=t.length;r<s;r++)e=e.replace(new RegExp(t.charAt(r),"g"),i.charAt(r));return e=e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),e=e.replace(/^([0-9])/,"_$1"),e}function _u(e,t){var i=function(u){return Math.floor(Math.random()*u)},r=function(){var u="abcdefghijklmnopqurstuvwxyz";return u.substr(i(32),1)},s=function(u){for(var d="",l=0;l<u;l++)d+=r();return d};return t?t+"-"+s(e):"tl-"+s(e)}function DY(e,t,i){for(var r=0;r<e.length;r++)if(t<e[r])return e[r];return i||t}function LY(e,t,i){for(var r=e.length-1;r>=0;r--)if(t>e[r])return e[r];return i||t}function OY(e){return e==parseFloat(e)?!(e%2):void 0}function lP(e,t,i,r){for(var s=r||0,u=0;u<t.length;u++)t[u].data[i]==e&&(s=u);return s}function Xd(e){return e&&(e=e.replace(/<a\b[^>]*>/i,""),e=e.replace(/<\/a>/i,""),e)}function RY(e,t){e.data=$d({},e.data,t),e.data.unique_id===""&&(e.data.unique_id=_u(6))}function FY(e){return e.match(/<p>[\s\S]*?<\/p>/)?e:"<p>"+e+"</p>"}function mh(e){return e=e.replace(/(<[^>]*>)+/g,""),e.replace('"',"'")}function ux(e,t,i){var r=function(l,m,g){g||(g="");var x=30;return m&&m.length>x&&(m=m.substring(0,x)+""),g+"<a class='tl-makelink' href='"+l+"' onclick='void(0)'>"+m+"</a>"},s=/\b(?:https?|ftp):\/\/([a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|])/gim,u=/(^|[^\/>])(www\.[\S]+(\b|$))/gim,d=/([a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+)/gim;return e.replace(s,function(l,m,g,x){if(g>0){var w=x[g-1];if(w=='"'||w=="'"||w=="=")return l}return r(l,m)}).replace(u,function(l,m,g,x,w){return r("http://"+g,g,m)}).replace(d,function(l,m,g,x){return r("mailto:"+m,m)})}function q_(e){return e.replace(/(.*)www.dropbox.com\/(.*)/,"$1dl.dropboxusercontent.com/$2")}const ku={square:e=>{var t={w:0,h:0};return e.w>e.h&&e.h>0?(t.h=e.h,t.w=e.h):(t.w=e.w,t.h=e.w),t},r16_9:e=>e.w!==null&&e.w!==""?Math.round(e.w/16*9):e.h!==null&&e.h!==""?Math.round(e.h/9*16):0,r4_3:e=>{if(e.w!==null&&e.w!=="")return Math.round(e.w/4*3);if(e.h!==null&&e.h!=="")return Math.round(e.h/3*4)}};function $Y(e){var t,i=[],r,s;t=e.toString(),t.match("&#038;")?t=t.replace("&#038;","&"):t.match("&#38;")?t=t.replace("&#38;","&"):t.match("&amp;")&&(t=t.replace("&amp;","&")),s=t.slice(t.indexOf("?")+1).split("&");for(var u=0;u<s.length;u++)r=s[u].split("="),i.push(r[0]),i[r[0]]=r[1];return i}function zY(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i+"="+e[i]);return"?"+t.join("&")}function BY(e,t){if(typeof e<"u"){var i=0;for(var r in e){if(t===i)return e[r];i++}return""}else return""}let NY=function(e){var t=e||"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",i=t.length;return{encode:function(r){if(typeof r!="number"||r!==parseInt(r))throw'"encode" only accepts integers.';for(var s="";r;){var u=r%i;r=Math.floor(r/i),s=t[u].toString()+s}return s},decode:function(r){if(typeof r!="string")throw'"decode" only accepts strings.';for(var s=0;r;){var u=t.indexOf(r[0]);if(u<0)throw`"decode" can't find "`+r[0]+'" in the alphabet: "'+t+'"';var d=r.length-1;s+=u*Math.pow(i,d),r=r.substring(1)}return s}}}();function V0(e){if(typeof e=="string"){let s=e.match(/^\s*(\d+h)?(\d+m)?(\d+s)?\s*/i);if(s){var t=parseInt(s[1])||0,i=parseInt(s[2])||0,r=parseInt(s[3])||0;return r+i*60+t*60*60}}else if(typeof e=="number")return e;return 0}function UY(e){var t=new DOMParser().parseFromString(e,"text/html");return t.body.textContent||""}function jY(e){}function Z_(e){var t=new jY;return t.get(e)}function Hp(e){return e==1?1:1-Math.pow(2,-10*e)}function Ih(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}let Zv=function(){};Zv.extend=function(e){var t=function(){this.initialize&&this.initialize.apply(this,arguments)},i=function(){};i.prototype=this.prototype;var r=new i;r.constructor=t,t.prototype=r,t.superclass=this.prototype;for(var s in this)this.hasOwnProperty(s)&&s!=="prototype"&&s!=="superclass"&&(t[s]=this[s]);return e.statics&&($d(t,e.statics),delete e.statics),e.includes&&($d.apply(null,[r].concat(e.includes)),delete e.includes),e.options&&r.options&&(e.options=$d({},r.options,e.options)),$d(r,e),t.extend=Zv.extend,t.include=function(u){$d(this.prototype,u)},t};class Ts{on(t,i,r){if(!i)throw new mi("No callback function provided");var s=this._tl_events=this._tl_events||{};return s[t]=s[t]||[],s[t].push({action:i,context:r||this}),this}addEventListener(t,i,r){return this.on(t,i,r)}hasEventListeners(t){var i="_tl_events";return i in this&&t in this[i]&&this[i][t].length>0}removeEventListener(t,i,r){if(!this.hasEventListeners(t))return this;for(var s=0,u=this._tl_events,d=u[t].length;s<d;s++)if(u[t][s].action===i&&(!r||u[t][s].context===r))return u[t].splice(s,1),this;return this}off(t,i,r){return this.removeEventListener(t,i,r)}fire(t,i){if(!this.hasEventListeners(t))return this;for(var r=Pi({type:t,target:this},i),s=this._tl_events[t].slice(),u=0,d=s.length;u<d;u++)s[u].action?s[u].action.call(s[u].context||this,r):gi(`no action defined for ${t} listener`);return this}}function fl(e,t){return VY(e,t)}const VY=function(){var e=document,t=window,i=t.performance,r=i&&(i.now||i.webkitNow||i.msNow||i.mozNow),s=r?function(){return r.call(i)}:function(){return+new Date},u=e.documentElement,d=!1,l=1e3,m=/^rgb\(|#/,g=/^([+\-])=([\d\.]+)/,x=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,w=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,C=/scale\(((?:[+\-]=)?([\d\.]+))\)/,I=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,M=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,L={lineHeight:1,zoom:1,zIndex:1,opacity:1,transform:1},$=function(){var tt=e.createElement("a").style,et=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],dt;for(dt=0;dt<et.length;dt++)if(et[dt]in tt)return et[dt]}(),F=function(){return typeof e.createElement("a").style.opacity<"u"}(),U=e.defaultView&&e.defaultView.getComputedStyle?function(tt,et){et=et=="transform"?$:et,et=X(et);var dt=null,Be=e.defaultView.getComputedStyle(tt,"");return Be&&(dt=Be[et]),tt.style[et]||dt}:u.currentStyle?function(tt,et){if(et=X(et),et=="opacity"){var dt=100;try{dt=tt.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch{try{dt=tt.filters("alpha").opacity}catch{}}return dt/100}var Be=tt.currentStyle?tt.currentStyle[et]:null;return tt.style[et]||Be}:function(tt,et){return tt.style[X(et)]},ee=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||t.oRequestAnimationFrame||function(tt){t.setTimeout(function(){tt(+new Date)},17)}}(),V=[];ee(function(tt){d=tt>1e12!=s()>1e12});function Q(tt,et,dt){if(Array.prototype.indexOf)return tt.indexOf(et);for(dt=0;dt<tt.length;++dt)if(tt[dt]===et)return dt}function ae(tt){var et,dt=V.length;for(r&&tt>1e12&&(tt=s()),d&&(tt=s()),et=dt;et--;)V[et](tt);V.length&&ee(ae)}function be(tt){V.push(tt)===1&&ee(ae)}function te(tt){var et,dt=Q(V,tt);dt>=0&&(et=V.slice(dt+1),V.length=dt,V=V.concat(et))}function G(tt,et){var dt={},Be;return(Be=tt.match(w))&&(dt.rotate=$t(Be[1],et?et.rotate:null)),(Be=tt.match(C))&&(dt.scale=$t(Be[1],et?et.scale:null)),(Be=tt.match(I))&&(dt.skewx=$t(Be[1],et?et.skewx:null),dt.skewy=$t(Be[3],et?et.skewy:null)),(Be=tt.match(M))&&(dt.translatex=$t(Be[1],et?et.translatex:null),dt.translatey=$t(Be[3],et?et.translatey:null)),dt}function j(tt){var et="";return"rotate"in tt&&(et+="rotate("+tt.rotate+"deg) "),"scale"in tt&&(et+="scale("+tt.scale+") "),"translatex"in tt&&(et+="translate("+tt.translatex+"px,"+tt.translatey+"px) "),"skewx"in tt&&(et+="skew("+tt.skewx+"deg,"+tt.skewy+"deg)"),et}function z(tt,et,dt){return"#"+(1<<24|tt<<16|et<<8|dt).toString(16).slice(1)}function ie(tt){var et=tt.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return(et?z(et[1],et[2],et[3]):tt).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function X(tt){return tt.replace(/-(.)/g,function(et,dt){return dt.toUpperCase()})}function ne(tt){return typeof tt=="function"}function Ee(tt){return Math.sin(tt*Math.PI/2)}function Ce(tt,et,dt,Be,Ke,ut){Be=ne(Be)?Be:Ct.easings[Be]||Ee;var Ot=tt||l,Vt=this,_n=ut-Ke,qt=s(),_e=0,ke=0;function ge(ft){var q=ft-qt;if(q>Ot||_e)return ut=isFinite(ut)?ut:1,_e?ke&&et(ut):et(ut),te(ge),dt&&dt.apply(Vt);isFinite(ut)?et(_n*Be(q/Ot)+Ke):et(Be(q/Ot))}return be(ge),{stop:function(ft){_e=1,ke=ft,ft||(dt=null)}}}function Xe(tt,et){var dt=tt.length,Be=[],Ke,ut;for(Ke=0;Ke<dt;++Ke)Be[Ke]=[tt[Ke][0],tt[Ke][1]];for(ut=1;ut<dt;++ut)for(Ke=0;Ke<dt-ut;++Ke)Be[Ke][0]=(1-et)*Be[Ke][0]+et*Be[parseInt(Ke+1,10)][0],Be[Ke][1]=(1-et)*Be[Ke][1]+et*Be[parseInt(Ke+1,10)][1];return[Be[0][0],Be[0][1]]}function at(tt,et,dt){var Be=[],Ke,ut,Ot,Vt;for(Ke=0;Ke<6;Ke++)Ot=Math.min(15,parseInt(et.charAt(Ke),16)),Vt=Math.min(15,parseInt(dt.charAt(Ke),16)),ut=Math.floor((Vt-Ot)*tt+Ot),ut=ut>15?15:ut<0?0:ut,Be[Ke]=ut.toString(16);return"#"+Be.join("")}function it(tt,et,dt,Be,Ke,ut,Ot){if(Ke=="transform"){Ot={};for(var Vt in dt[ut][Ke])Ot[Vt]=Vt in Be[ut][Ke]?Math.round(((Be[ut][Ke][Vt]-dt[ut][Ke][Vt])*tt+dt[ut][Ke][Vt])*l)/l:dt[ut][Ke][Vt];return Ot}else return typeof dt[ut][Ke]=="string"?at(tt,dt[ut][Ke],Be[ut][Ke]):(Ot=Math.round(((Be[ut][Ke]-dt[ut][Ke])*tt+dt[ut][Ke])*l)/l,Ke in L||(Ot+=et[ut][Ke]||"px"),Ot)}function $t(tt,et,dt,Be,Ke){return(dt=g.exec(tt))?(Ke=parseFloat(dt[2]))&&et+(dt[1]=="+"?1:-1)*Ke:parseFloat(tt)}function Ct(tt,et){var dt=tt?dt=isFinite(tt.length)?tt:[tt]:[],Be,Ke=et.complete,ut=et.duration,Ot=et.easing,Vt=et.bezier,_n=[],qt=[],_e=[],ke=[],ge,ft;for(Vt&&(ge=et.left,ft=et.top,delete et.right,delete et.bottom,delete et.left,delete et.top),Be=dt.length;Be--;){if(_n[Be]={},qt[Be]={},_e[Be]={},Vt){var q=U(dt[Be],"left"),fe=U(dt[Be],"top"),Pe=[$t(ne(ge)?ge(dt[Be]):ge||0,parseFloat(q)),$t(ne(ft)?ft(dt[Be]):ft||0,parseFloat(fe))];ke[Be]=ne(Vt)?Vt(dt[Be],Pe):Vt,ke[Be].push(Pe),ke[Be].unshift([parseInt(q,10),parseInt(fe,10)])}for(var Ge in et){switch(Ge){case"complete":case"duration":case"easing":case"bezier":continue}var pt=U(dt[Be],Ge),ht,zt=ne(et[Ge])?et[Ge](dt[Be]):et[Ge];if(typeof zt=="string"&&m.test(zt)&&!m.test(pt)){delete et[Ge];continue}_n[Be][Ge]=Ge=="transform"?G(pt):typeof zt=="string"&&m.test(zt)?ie(pt).slice(1):parseFloat(pt),qt[Be][Ge]=Ge=="transform"?G(zt,_n[Be][Ge]):typeof zt=="string"&&zt.charAt(0)=="#"?ie(zt).slice(1):$t(zt,parseFloat(pt)),typeof zt=="string"&&(ht=zt.match(x))&&(_e[Be][Ge]=ht[1])}}return Ce.apply(dt,[ut,function(Dt,Gt,ln){for(Be=dt.length;Be--;){Vt&&(ln=Xe(ke[Be],Dt),dt[Be].style.left=ln[0]+"px",dt[Be].style.top=ln[1]+"px");for(var vt in et)Gt=it(Dt,_e,_n,qt,vt,Be),vt=="transform"?dt[Be].style[$]=j(Gt):vt=="opacity"&&!F?dt[Be].style.filter="alpha(opacity="+Gt*100+")":dt[Be].style[X(vt)]=Gt}},Ke,Ot])}return Ct.tween=Ce,Ct.getStyle=U,Ct.bezier=Xe,Ct.transform=$,Ct.parseTransform=G,Ct.formatTransform=j,Ct.easings={},Ct}();class ml{show(t){t||(this._el.container.style.display="block")}hide(t){this._el.container.style.display="none"}addTo(t){t.appendChild(this._el.container),this.onAdd()}removeFrom(t){t.removeChild(this._el.container),this.onRemove()}animatePosition(t,i){var r={duration:this.options.duration,easing:this.options.ease};for(var s in t)t.hasOwnProperty(s)&&(r[s]=t[s]+"px");this.animator&&this.animator.stop(),this.animator=fl(i,r)}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}setPosition(t,i){for(var r in t)t.hasOwnProperty(r)&&(i?i.style[r]=t[r]+"px":this._el.container.style[r]=t[r]+"px")}getPosition(){return cx(this._el.container)}}let HY=class{constructor(t,i,r){this._el={drag:t,move:t},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},r&&(this._el.move=r),this.options={enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:!1,right:!1},momentum_multiplier:2e3,duration:1e3,ease:Ih},this.animator=null,this.dragevent=this.mousedrag,Io&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},Pi(this.options,i)}enable(t){this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){ti.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),ti.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(t){this.options.constraint=t}_onDragStart(t){Io?t.originalEvent?(this.data.pagex.start=t.originalEvent.touches[0].screenX,this.data.pagey.start=t.originalEvent.touches[0].screenY):(this.data.pagex.start=t.targetTouches[0].screenX,this.data.pagey.start=t.targetTouches[0].screenY):(this.data.pagex.start=t.pageX,this.data.pagey.start=t.pageY),this.options.enable.x&&(this._el.move.style.left=this.data.pagex.start-this._el.move.offsetWidth/2+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.pagey.start-this._el.move.offsetHeight/2+"px"),this.data.pos.start=cx(this._el.drag),this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),ti.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),ti.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(t){this.data.sliding=!1,ti.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),ti.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(t){t.preventDefault(),this.data.sliding=!0,Io?t.originalEvent?(this.data.pagex.end=t.originalEvent.touches[0].screenX,this.data.pagey.end=t.originalEvent.touches[0].screenY):(this.data.pagex.end=t.targetTouches[0].screenX,this.data.pagey.end=t.targetTouches[0].screenY):(this.data.pagex.end=t.pageX,this.data.pagey.end=t.pageY),this.data.pos.end=cx(this._el.drag),this.data.new_pos.x=-(this.data.pagex.start-this.data.pagex.end-this.data.pos.start.x),this.data.new_pos.y=-(this.data.pagey.start-this.data.pagey.end-this.data.pos.start.y),this.options.enable.x&&(this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var t={x:0,y:0,time:0},i={x:0,y:0,time:0},r=!1;t.time=(new Date().getTime()-this.data.time.start)*10,i.time=(new Date().getTime()-this.data.time.start)*10,i.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),i.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),t.x=Math.round(i.x/i.time),t.y=Math.round(i.y/i.time),this.data.new_pos.x=Math.min(this.data.pos.end.x+t.x),this.data.new_pos.y=Math.min(this.data.pos.end.y+t.y),this.options.enable.x?this.data.new_pos.x<0&&(this.data.new_pos.x=0):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,i.time<3e3&&(r=!0),Math.abs(i.x)>1e4&&(this.data.direction="left",i.x>0&&(this.data.direction="right")),Math.abs(i.y)>1e4&&(this.data.direction="up",i.y>0&&(this.data.direction="down")),this._animateMomentum(),r&&this.fire("swipe_"+this.data.direction,this.data)}_animateMomentum(){var t={x:this.data.new_pos.x,y:this.data.new_pos.y},i={duration:this.options.duration,easing:Hp};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(t.y>this.options.constraint.bottom?t.y=this.options.constraint.bottom:t.y<this.options.constraint.top&&(t.y=this.options.constraint.top)),i.top=Math.floor(t.y)+"px"),this.options.enable.x&&((this.options.constraint.left||this.options.constraint.right)&&(t.x>this.options.constraint.left?t.x=this.options.constraint.left:t.x<this.options.constraint.right&&(t.x=this.options.constraint.right)),i.left=Math.floor(t.x)+"px"),this.animator=fl(this._el.move,i),this.fire("momentum",this.data)}};Ss(Ts);var ti={addListener:function(e,t,i,r){var s=_2(i),u="_tl_"+t+s;if(!e[u]){var d=function(g){return i.call(r||e,g||ti._getEvent())};if(Io&&t==="dblclick"&&this.addDoubleTapListener)this.addDoubleTapListener(e,d,s);else if("addEventListener"in e)if(t==="mousewheel")e.addEventListener("DOMMouseScroll",d,!1),e.addEventListener(t,d,!1);else if(t==="mouseenter"||t==="mouseleave"){var l=d,m=t==="mouseenter"?"mouseover":"mouseout";d=function(g){if(ti._checkMouse(e,g))return l(g)},e.addEventListener(m,d,!1)}else e.addEventListener(t,d,!1);else"attachEvent"in e&&e.attachEvent("on"+t,d);e[u]=d}},removeListener:function(e,t,i){var r=_2(i),s="_tl_"+t+r,u=e[s];u&&(Io&&t==="dblclick"&&this.removeDoubleTapListener?this.removeDoubleTapListener(e,r):"removeEventListener"in e?t==="mousewheel"?(e.removeEventListener("DOMMouseScroll",u,!1),e.removeEventListener(t,u,!1)):t==="mouseenter"||t==="mouseleave"?e.removeEventListener(t==="mouseenter"?"mouseover":"mouseout",u,!1):e.removeEventListener(t,u,!1):"detachEvent"in e&&e.detachEvent("on"+t,u),e[s]=null)},_checkMouse:function(e,t){var i=t.relatedTarget;if(!i)return!0;try{for(;i&&i!==e;)i=i.parentNode}catch{return!1}return i!==e},_getEvent:function(){var e=window.event;if(!e)for(var t=arguments.callee.caller;t&&(e=t.arguments[0],!(e&&window.Event===e.constructor));)t=t.caller;return e},stopPropagation:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},disableClickPropagation:function(e){ti.addListener(e,HY.START,ti.stopPropagation),ti.addListener(e,"click",ti.stopPropagation),ti.addListener(e,"dblclick",ti.stopPropagation)},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},stop:function(e){ti.preventDefault(e),ti.stopPropagation(e)},getWheelDelta:function(e){var t=0;return e.wheelDelta&&(t=e.wheelDelta/120),e.detail&&(t=-e.detail/3),t}},gl=function(){var e,t,i,r,s=[],u=s.slice,d=s.filter,l=window.document,m={},g={},x={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},w=/^\s*<(\w+|!)[^>]*>/,C=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,I=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,M=/^(?:body|html)$/i,L=/([A-Z])/g,$=["val","css","html","text","data","width","height","offset"],F=["after","prepend","before","append"],U=l.createElement("table"),ee=l.createElement("tr"),V={tr:l.createElement("tbody"),tbody:U,thead:U,tfoot:U,td:ee,th:ee,"*":l.createElement("div")},Q=/complete|loaded|interactive/,ae=/^[\w-]*$/,be={},te=be.toString,G={},j,z,ie=l.createElement("div"),X={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},ne=Array.isArray||function(q){return q instanceof Array};G.matches=function(q,fe){if(!fe||!q||q.nodeType!==1)return!1;var Pe=q.webkitMatchesSelector||q.mozMatchesSelector||q.oMatchesSelector||q.matchesSelector;if(Pe)return Pe.call(q,fe);var Ge,pt=q.parentNode,ht=!pt;return ht&&(pt=ie).appendChild(q),Ge=~G.qsa(pt,fe).indexOf(q),ht&&ie.removeChild(q),Ge};function Ee(q){return q==null?String(q):be[te.call(q)]||"object"}function Ce(q){return Ee(q)=="function"}function Xe(q){return q!=null&&q==q.window}function at(q){return q!=null&&q.nodeType==q.DOCUMENT_NODE}function it(q){return Ee(q)=="object"}function $t(q){return it(q)&&!Xe(q)&&Object.getPrototypeOf(q)==Object.prototype}function Ct(q){return typeof q.length=="number"}function tt(q){return d.call(q,function(fe){return fe!=null})}function et(q){return q.length>0?i.fn.concat.apply([],q):q}j=function(q){return q.replace(/-+(.)?/g,function(fe,Pe){return Pe?Pe.toUpperCase():""})};function dt(q){return q.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}z=function(q){return d.call(q,function(fe,Pe){return q.indexOf(fe)==Pe})};function Be(q){return q in g?g[q]:g[q]=new RegExp("(^|\\s)"+q+"(\\s|$)")}function Ke(q,fe){return typeof fe=="number"&&!x[dt(q)]?fe+"px":fe}function ut(q){var fe,Pe;return m[q]||(fe=l.createElement(q),l.body.appendChild(fe),Pe=getComputedStyle(fe,"").getPropertyValue("display"),fe.parentNode.removeChild(fe),Pe=="none"&&(Pe="block"),m[q]=Pe),m[q]}function Ot(q){return"children"in q?u.call(q.children):i.map(q.childNodes,function(fe){if(fe.nodeType==1)return fe})}G.fragment=function(q,fe,Pe){var Ge,pt,ht;return C.test(q)&&(Ge=i(l.createElement(RegExp.$1))),Ge||(q.replace&&(q=q.replace(I,"<$1></$2>")),fe===e&&(fe=w.test(q)&&RegExp.$1),fe in V||(fe="*"),ht=V[fe],ht.innerHTML=""+q,Ge=i.each(u.call(ht.childNodes),function(){ht.removeChild(this)})),$t(Pe)&&(pt=i(Ge),i.each(Pe,function(zt,Dt){$.indexOf(zt)>-1?pt[zt](Dt):pt.attr(zt,Dt)})),Ge},G.Z=function(q,fe){return q=q||[],q.__proto__=i.fn,q.selector=fe||"",q},G.isZ=function(q){return q instanceof G.Z},G.init=function(q,fe){var Pe;if(q)if(typeof q=="string")if(q=q.trim(),q[0]=="<"&&w.test(q))Pe=G.fragment(q,RegExp.$1,fe),q=null;else{if(fe!==e)return i(fe).find(q);Pe=G.qsa(l,q)}else{if(Ce(q))return i(l).ready(q);if(G.isZ(q))return q;if(ne(q))Pe=tt(q);else if(it(q))Pe=[q],q=null;else if(w.test(q))Pe=G.fragment(q.trim(),RegExp.$1,fe),q=null;else{if(fe!==e)return i(fe).find(q);Pe=G.qsa(l,q)}}else return G.Z();return G.Z(Pe,q)},i=function(q,fe){return G.init(q,fe)};function Vt(q,fe,Pe){for(t in fe)Pe&&($t(fe[t])||ne(fe[t]))?($t(fe[t])&&!$t(q[t])&&(q[t]={}),ne(fe[t])&&!ne(q[t])&&(q[t]=[]),Vt(q[t],fe[t],Pe)):fe[t]!==e&&(q[t]=fe[t])}i.extend=function(q){var fe,Pe=u.call(arguments,1);return typeof q=="boolean"&&(fe=q,q=Pe.shift()),Pe.forEach(function(Ge){Vt(q,Ge,fe)}),q},G.qsa=function(q,fe){var Pe,Ge=fe[0]=="#",pt=!Ge&&fe[0]==".",ht=Ge||pt?fe.slice(1):fe,zt=ae.test(ht);return at(q)&&zt&&Ge?(Pe=q.getElementById(ht))?[Pe]:[]:q.nodeType!==1&&q.nodeType!==9?[]:u.call(zt&&!Ge?pt?q.getElementsByClassName(ht):q.getElementsByTagName(fe):q.querySelectorAll(fe))};function _n(q,fe){return fe==null?i(q):i(q).filter(fe)}i.contains=function(q,fe){return q!==fe&&q.contains(fe)};function qt(q,fe,Pe,Ge){return Ce(fe)?fe.call(q,Pe,Ge):fe}function _e(q,fe,Pe){Pe==null?q.removeAttribute(fe):q.setAttribute(fe,Pe)}function ke(q,fe){var Pe=q.className,Ge=Pe&&Pe.baseVal!==e;if(fe===e)return Ge?Pe.baseVal:Pe;Ge?Pe.baseVal=fe:q.className=fe}function ge(q){var fe;try{return q&&(q=="true"||(q=="false"?!1:q=="null"?null:!/^0/.test(q)&&!isNaN(fe=Number(q))?fe:/^[\[\{]/.test(q)?i.parseJSON(q):q))}catch{return q}}i.type=Ee,i.isFunction=Ce,i.isWindow=Xe,i.isArray=ne,i.isPlainObject=$t,i.isEmptyObject=function(q){var fe;for(fe in q)return!1;return!0},i.inArray=function(q,fe,Pe){return s.indexOf.call(fe,q,Pe)},i.camelCase=j,i.trim=function(q){return q==null?"":String.prototype.trim.call(q)},i.uuid=0,i.support={},i.expr={},i.map=function(q,fe){var Pe,Ge=[],pt,ht;if(Ct(q))for(pt=0;pt<q.length;pt++)Pe=fe(q[pt],pt),Pe!=null&&Ge.push(Pe);else for(ht in q)Pe=fe(q[ht],ht),Pe!=null&&Ge.push(Pe);return et(Ge)},i.each=function(q,fe){var Pe,Ge;if(Ct(q)){for(Pe=0;Pe<q.length;Pe++)if(fe.call(q[Pe],Pe,q[Pe])===!1)return q}else for(Ge in q)if(fe.call(q[Ge],Ge,q[Ge])===!1)return q;return q},i.grep=function(q,fe){return d.call(q,fe)},window.JSON&&(i.parseJSON=JSON.parse),i.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(q,fe){be["[object "+fe+"]"]=fe.toLowerCase()}),i.fn={forEach:s.forEach,reduce:s.reduce,push:s.push,sort:s.sort,indexOf:s.indexOf,concat:s.concat,map:function(q){return i(i.map(this,function(fe,Pe){return q.call(fe,Pe,fe)}))},slice:function(){return i(u.apply(this,arguments))},ready:function(q){return Q.test(l.readyState)&&l.body?q(i):l.addEventListener("DOMContentLoaded",function(){q(i)},!1),this},get:function(q){return q===e?u.call(this):this[q>=0?q:q+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(q){return s.every.call(this,function(fe,Pe){return q.call(fe,Pe,fe)!==!1}),this},filter:function(q){return Ce(q)?this.not(this.not(q)):i(d.call(this,function(fe){return G.matches(fe,q)}))},add:function(q,fe){return i(z(this.concat(i(q,fe))))},is:function(q){return this.length>0&&G.matches(this[0],q)},not:function(q){var fe=[];if(Ce(q)&&q.call!==e)this.each(function(Ge){q.call(this,Ge)||fe.push(this)});else{var Pe=typeof q=="string"?this.filter(q):Ct(q)&&Ce(q.item)?u.call(q):i(q);this.forEach(function(Ge){Pe.indexOf(Ge)<0&&fe.push(Ge)})}return i(fe)},has:function(q){return this.filter(function(){return it(q)?i.contains(this,q):i(this).find(q).size()})},eq:function(q){return q===-1?this.slice(q):this.slice(q,+q+1)},first:function(){var q=this[0];return q&&!it(q)?q:i(q)},last:function(){var q=this[this.length-1];return q&&!it(q)?q:i(q)},find:function(q){var fe,Pe=this;return typeof q=="object"?fe=i(q).filter(function(){var Ge=this;return s.some.call(Pe,function(pt){return i.contains(pt,Ge)})}):this.length==1?fe=i(G.qsa(this[0],q)):fe=this.map(function(){return G.qsa(this,q)}),fe},closest:function(q,fe){var Pe=this[0],Ge=!1;for(typeof q=="object"&&(Ge=i(q));Pe&&!(Ge?Ge.indexOf(Pe)>=0:G.matches(Pe,q));)Pe=Pe!==fe&&!at(Pe)&&Pe.parentNode;return i(Pe)},parents:function(q){for(var fe=[],Pe=this;Pe.length>0;)Pe=i.map(Pe,function(Ge){if((Ge=Ge.parentNode)&&!at(Ge)&&fe.indexOf(Ge)<0)return fe.push(Ge),Ge});return _n(fe,q)},parent:function(q){return _n(z(this.pluck("parentNode")),q)},children:function(q){return _n(this.map(function(){return Ot(this)}),q)},contents:function(){return this.map(function(){return u.call(this.childNodes)})},siblings:function(q){return _n(this.map(function(fe,Pe){return d.call(Ot(Pe.parentNode),function(Ge){return Ge!==Pe})}),q)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(q){return i.map(this,function(fe){return fe[q]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=""),getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=ut(this.nodeName))})},replaceWith:function(q){return this.before(q).remove()},wrap:function(q){var fe=Ce(q);if(this[0]&&!fe)var Pe=i(q).get(0),Ge=Pe.parentNode||this.length>1;return this.each(function(pt){i(this).wrapAll(fe?q.call(this,pt):Ge?Pe.cloneNode(!0):Pe)})},wrapAll:function(q){if(this[0]){i(this[0]).before(q=i(q));for(var fe;(fe=q.children()).length;)q=fe.first();i(q).append(this)}return this},wrapInner:function(q){var fe=Ce(q);return this.each(function(Pe){var Ge=i(this),pt=Ge.contents(),ht=fe?q.call(this,Pe):q;pt.length?pt.wrapAll(ht):Ge.append(ht)})},unwrap:function(){return this.parent().each(function(){i(this).replaceWith(i(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(q){return this.each(function(){var fe=i(this);(q===e?fe.css("display")=="none":q)?fe.show():fe.hide()})},prev:function(q){return i(this.pluck("previousElementSibling")).filter(q||"*")},next:function(q){return i(this.pluck("nextElementSibling")).filter(q||"*")},html:function(q){return arguments.length===0?this.length>0?this[0].innerHTML:null:this.each(function(fe){var Pe=this.innerHTML;i(this).empty().append(qt(this,q,fe,Pe))})},text:function(q){return arguments.length===0?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=q===e?"":""+q})},attr:function(q,fe){var Pe;return typeof q=="string"&&fe===e?this.length==0||this[0].nodeType!==1?e:q=="value"&&this[0].nodeName=="INPUT"?this.val():!(Pe=this[0].getAttribute(q))&&q in this[0]?this[0][q]:Pe:this.each(function(Ge){if(this.nodeType===1)if(it(q))for(t in q)_e(this,t,q[t]);else _e(this,q,qt(this,fe,Ge,this.getAttribute(q)))})},removeAttr:function(q){return this.each(function(){this.nodeType===1&&_e(this,q)})},prop:function(q,fe){return q=X[q]||q,fe===e?this[0]&&this[0][q]:this.each(function(Pe){this[q]=qt(this,fe,Pe,this[q])})},data:function(q,fe){var Pe=this.attr("data-"+q.replace(L,"-$1").toLowerCase(),fe);return Pe!==null?ge(Pe):e},val:function(q){return arguments.length===0?this[0]&&(this[0].multiple?i(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(fe){this.value=qt(this,q,fe,this.value)})},offset:function(q){if(q)return this.each(function(Pe){var Ge=i(this),pt=qt(this,q,Pe,Ge.offset()),ht=Ge.offsetParent().offset(),zt={top:pt.top-ht.top,left:pt.left-ht.left};Ge.css("position")=="static"&&(zt.position="relative"),Ge.css(zt)});if(this.length==0)return null;var fe=this[0].getBoundingClientRect();return{left:fe.left+window.pageXOffset,top:fe.top+window.pageYOffset,width:Math.round(fe.width),height:Math.round(fe.height)}},css:function(q,fe){if(arguments.length<2){var Pe=this[0],Ge=getComputedStyle(Pe,"");if(!Pe)return;if(typeof q=="string")return Pe.style[j(q)]||Ge.getPropertyValue(q);if(ne(q)){var pt={};return i.each(ne(q)?q:[q],function(zt,Dt){pt[Dt]=Pe.style[j(Dt)]||Ge.getPropertyValue(Dt)}),pt}}var ht="";if(Ee(q)=="string")!fe&&fe!==0?this.each(function(){this.style.removeProperty(dt(q))}):ht=dt(q)+":"+Ke(q,fe);else for(t in q)!q[t]&&q[t]!==0?this.each(function(){this.style.removeProperty(dt(t))}):ht+=dt(t)+":"+Ke(t,q[t])+";";return this.each(function(){this.style.cssText+=";"+ht})},index:function(q){return q?this.indexOf(i(q)[0]):this.parent().children().indexOf(this[0])},hasClass:function(q){return q?s.some.call(this,function(fe){return this.test(ke(fe))},Be(q)):!1},addClass:function(q){return q?this.each(function(fe){r=[];var Pe=ke(this),Ge=qt(this,q,fe,Pe);Ge.split(/\s+/g).forEach(function(pt){i(this).hasClass(pt)||r.push(pt)},this),r.length&&ke(this,Pe+(Pe?" ":"")+r.join(" "))}):this},removeClass:function(q){return this.each(function(fe){if(q===e)return ke(this,"");r=ke(this),qt(this,q,fe,r).split(/\s+/g).forEach(function(Pe){r=r.replace(Be(Pe)," ")}),ke(this,r.trim())})},toggleClass:function(q,fe){return q?this.each(function(Pe){var Ge=i(this),pt=qt(this,q,Pe,ke(this));pt.split(/\s+/g).forEach(function(ht){(fe===e?!Ge.hasClass(ht):fe)?Ge.addClass(ht):Ge.removeClass(ht)})}):this},scrollTop:function(q){if(this.length){var fe="scrollTop"in this[0];return q===e?fe?this[0].scrollTop:this[0].pageYOffset:this.each(fe?function(){this.scrollTop=q}:function(){this.scrollTo(this.scrollX,q)})}},scrollLeft:function(q){if(this.length){var fe="scrollLeft"in this[0];return q===e?fe?this[0].scrollLeft:this[0].pageXOffset:this.each(fe?function(){this.scrollLeft=q}:function(){this.scrollTo(q,this.scrollY)})}},position:function(){if(this.length){var q=this[0],fe=this.offsetParent(),Pe=this.offset(),Ge=M.test(fe[0].nodeName)?{top:0,left:0}:fe.offset();return Pe.top-=parseFloat(i(q).css("margin-top"))||0,Pe.left-=parseFloat(i(q).css("margin-left"))||0,Ge.top+=parseFloat(i(fe[0]).css("border-top-width"))||0,Ge.left+=parseFloat(i(fe[0]).css("border-left-width"))||0,{top:Pe.top-Ge.top,left:Pe.left-Ge.left}}},offsetParent:function(){return this.map(function(){for(var q=this.offsetParent||l.body;q&&!M.test(q.nodeName)&&i(q).css("position")=="static";)q=q.offsetParent;return q})}},i.fn.detach=i.fn.remove,["width","height"].forEach(function(q){var fe=q.replace(/./,function(Pe){return Pe[0].toUpperCase()});i.fn[q]=function(Pe){var Ge,pt=this[0];return Pe===e?Xe(pt)?pt["inner"+fe]:at(pt)?pt.documentElement["scroll"+fe]:(Ge=this.offset())&&Ge[q]:this.each(function(ht){pt=i(this),pt.css(q,qt(this,Pe,ht,pt[q]()))})}});function ft(q,fe){fe(q);for(var Pe in q.childNodes)ft(q.childNodes[Pe],fe)}return F.forEach(function(q,fe){var Pe=fe%2;i.fn[q]=function(){var Ge,pt=i.map(arguments,function(Dt){return Ge=Ee(Dt),Ge=="object"||Ge=="array"||Dt==null?Dt:G.fragment(Dt)}),ht,zt=this.length>1;return pt.length<1?this:this.each(function(Dt,Gt){ht=Pe?Gt:Gt.parentNode,Gt=fe==0?Gt.nextSibling:fe==1?Gt.firstChild:fe==2?Gt:null,pt.forEach(function(ln){if(zt)ln=ln.cloneNode(!0);else if(!ht)return i(ln).remove();ft(ht.insertBefore(ln,Gt),function(vt){vt.nodeName!=null&&vt.nodeName.toUpperCase()==="SCRIPT"&&(!vt.type||vt.type==="text/javascript")&&!vt.src&&window.eval.call(window,vt.innerHTML)})})})},i.fn[Pe?q+"To":"insert"+(fe?"Before":"After")]=function(Ge){return i(Ge)[q](this),this}}),G.Z.prototype=i.fn,G.uniq=z,G.deserializeValue=ge,i.zepto=G,i}();window.Zepto=gl;window.$===void 0&&(window.$=gl);(function(e){e.zepto.qsa;var t=1,i,r=Array.prototype.slice,s=e.isFunction,u=function(G){return typeof G=="string"},d={},l={},m="onfocusin"in window,g={focus:"focusin",blur:"focusout"},x={mouseenter:"mouseover",mouseleave:"mouseout"};l.click=l.mousedown=l.mouseup=l.mousemove="MouseEvents";function w(G){return G._zid||(G._zid=t++)}function C(G,j,z,ie){if(j=I(j),j.ns)var X=M(j.ns);return(d[w(G)]||[]).filter(function(ne){return ne&&(!j.e||ne.e==j.e)&&(!j.ns||X.test(ne.ns))&&(!z||w(ne.fn)===w(z))&&(!ie||ne.sel==ie)})}function I(G){var j=(""+G).split(".");return{e:j[0],ns:j.slice(1).sort().join(" ")}}function M(G){return new RegExp("(?:^| )"+G.replace(" "," .* ?")+"(?: |$)")}function L(G,j){return G.del&&!m&&G.e in g||!!j}function $(G){return x[G]||m&&g[G]||G}function F(G,j,z,ie,X,ne,Ee){var Ce=w(G),Xe=d[Ce]||(d[Ce]=[]);j.split(/\s/).forEach(function(at){if(at=="ready")return e(document).ready(z);var it=I(at);it.fn=z,it.sel=X,it.e in x&&(z=function(Ct){var tt=Ct.relatedTarget;if(!tt||tt!==this&&!e.contains(this,tt))return it.fn.apply(this,arguments)}),it.del=ne;var $t=ne||z;it.proxy=function(Ct){if(Ct=be(Ct),!Ct.isImmediatePropagationStopped()){Ct.data=ie;var tt=$t.apply(G,Ct._args==i?[Ct]:[Ct].concat(Ct._args));return tt===!1&&(Ct.preventDefault(),Ct.stopPropagation()),tt}},it.i=Xe.length,Xe.push(it),"addEventListener"in G&&G.addEventListener($(it.e),it.proxy,L(it,Ee))})}function U(G,j,z,ie,X){var ne=w(G);(j||"").split(/\s/).forEach(function(Ee){C(G,Ee,z,ie).forEach(function(Ce){delete d[ne][Ce.i],"removeEventListener"in G&&G.removeEventListener($(Ce.e),Ce.proxy,L(Ce,X))})})}e.event={add:F,remove:U},e.proxy=function(G,j){if(s(G)){var z=function(){return G.apply(j,arguments)};return z._zid=w(G),z}else{if(u(j))return e.proxy(G[j],G);throw new TypeError("expected function")}},e.fn.bind=function(G,j,z){return this.on(G,j,z)},e.fn.unbind=function(G,j){return this.off(G,j)},e.fn.one=function(G,j,z,ie){return this.on(G,j,z,ie,1)};var ee=function(){return!0},V=function(){return!1},Q=/^([A-Z]|returnValue$|layer[XY]$)/,ae={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function be(G,j){return(j||!G.isDefaultPrevented)&&(j||(j=G),e.each(ae,function(z,ie){var X=j[z];G[z]=function(){return this[ie]=ee,X&&X.apply(j,arguments)},G[ie]=V}),(j.defaultPrevented!==i?j.defaultPrevented:"returnValue"in j?j.returnValue===!1:j.getPreventDefault&&j.getPreventDefault())&&(G.isDefaultPrevented=ee)),G}function te(G){var j,z={originalEvent:G};for(j in G)!Q.test(j)&&G[j]!==i&&(z[j]=G[j]);return be(z,G)}e.fn.delegate=function(G,j,z){return this.on(j,G,z)},e.fn.undelegate=function(G,j,z){return this.off(j,G,z)},e.fn.live=function(G,j){return e(document.body).delegate(this.selector,G,j),this},e.fn.die=function(G,j){return e(document.body).undelegate(this.selector,G,j),this},e.fn.on=function(G,j,z,ie,X){var ne,Ee,Ce=this;return G&&!u(G)?(e.each(G,function(Xe,at){Ce.on(Xe,j,z,at,X)}),Ce):(!u(j)&&!s(ie)&&ie!==!1&&(ie=z,z=j,j=i),(s(z)||z===!1)&&(ie=z,z=i),ie===!1&&(ie=V),Ce.each(function(Xe,at){X&&(ne=function(it){return U(at,it.type,ie),ie.apply(this,arguments)}),j&&(Ee=function(it){var $t,Ct=e(it.target).closest(j,at).get(0);if(Ct&&Ct!==at)return $t=e.extend(te(it),{currentTarget:Ct,liveFired:at}),(ne||ie).apply(Ct,[$t].concat(r.call(arguments,1)))}),F(at,G,ie,z,j,Ee||ne)}))},e.fn.off=function(G,j,z){var ie=this;return G&&!u(G)?(e.each(G,function(X,ne){ie.off(X,j,ne)}),ie):(!u(j)&&!s(z)&&z!==!1&&(z=j,j=i),z===!1&&(z=V),ie.each(function(){U(this,G,z,j)}))},e.fn.trigger=function(G,j){return G=u(G)||e.isPlainObject(G)?e.Event(G):be(G),G._args=j,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(G):e(this).triggerHandler(G,j)})},e.fn.triggerHandler=function(G,j){var z,ie;return this.each(function(X,ne){z=te(u(G)?e.Event(G):G),z._args=j,z.target=ne,e.each(C(ne,G.type||G),function(Ee,Ce){if(ie=Ce.proxy(z),z.isImmediatePropagationStopped())return!1})}),ie},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(G){e.fn[G]=function(j){return j?this.bind(G,j):this.trigger(G)}}),["focus","blur"].forEach(function(G){e.fn[G]=function(j){return j?this.bind(G,j):this.each(function(){try{this[G]()}catch{}}),this}}),e.Event=function(G,j){u(G)||(j=G,G=j.type);var z=document.createEvent(l[G]||"Events"),ie=!0;if(j)for(var X in j)X=="bubbles"?ie=!!j[X]:z[X]=j[X];return z.initEvent(G,ie,!0),be(z)}})(gl);(function(e){var t=0,i=window.document,r,s,u=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,d=/^(?:text|application)\/javascript/i,l=/^(?:text|application)\/xml/i,m="application/json",g="text/html",x=/^\s*$/;function w(j,z,ie){var X=e.Event(z);return e(j).trigger(X,ie),!X.isDefaultPrevented()}function C(j,z,ie,X){if(j.global)return w(z||i,ie,X)}e.active=0;function I(j){j.global&&e.active++===0&&C(j,null,"ajaxStart")}function M(j){j.global&&!--e.active&&C(j,null,"ajaxStop")}function L(j,z){var ie=z.context;if(z.beforeSend.call(ie,j,z)===!1||C(z,ie,"ajaxBeforeSend",[j,z])===!1)return!1;C(z,ie,"ajaxSend",[j,z])}function $(j,z,ie,X){var ne=ie.context,Ee="success";ie.success.call(ne,j,Ee,z),X&&X.resolveWith(ne,[j,Ee,z]),C(ie,ne,"ajaxSuccess",[z,ie,j]),U(Ee,z,ie)}function F(j,z,ie,X,ne){var Ee=X.context;X.error.call(Ee,ie,z,j),ne&&ne.rejectWith(Ee,[ie,z,j]),C(X,Ee,"ajaxError",[ie,X,j||z]),U(z,ie,X)}function U(j,z,ie){var X=ie.context;ie.complete.call(X,z,j),C(ie,X,"ajaxComplete",[z,ie]),M(ie)}function ee(){}e.ajaxJSONP=function(j,z){if(!("type"in j))return e.ajax(j);var ie=j.jsonpCallback,X=(e.isFunction(ie)?ie():ie)||"jsonp"+ ++t,ne=i.createElement("script"),Ee=window[X],Ce,Xe=function($t){e(ne).triggerHandler("error",$t||"abort")},at={abort:Xe},it;return z&&z.promise(at),e(ne).on("load error",function($t,Ct){clearTimeout(it),e(ne).off().remove(),$t.type=="error"||!Ce?F(null,Ct||"error",at,j,z):$(Ce[0],at,j,z),window[X]=Ee,Ce&&e.isFunction(Ee)&&Ee(Ce[0]),Ee=Ce=void 0}),L(at,j)===!1?(Xe("abort"),at):(window[X]=function(){Ce=arguments},ne.src=j.url.replace(/\?(.+)=\?/,"?$1="+X),i.head.appendChild(ne),j.timeout>0&&(it=setTimeout(function(){Xe("timeout")},j.timeout)),at)},e.ajaxSettings={type:"GET",beforeSend:ee,success:ee,error:ee,complete:ee,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:m,xml:"application/xml, text/xml",html:g,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0};function V(j){return j&&(j=j.split(";",2)[0]),j&&(j==g?"html":j==m?"json":d.test(j)?"script":l.test(j)&&"xml")||"text"}function Q(j,z){return z==""?j:(j+"&"+z).replace(/[&?]{1,2}/,"?")}function ae(j){j.processData&&j.data&&e.type(j.data)!="string"&&(j.data=e.param(j.data,j.traditional)),j.data&&(!j.type||j.type.toUpperCase()=="GET")&&(j.url=Q(j.url,j.data),j.data=void 0)}e.ajax=function(j){var z=e.extend({},j||{}),ie=e.Deferred&&e.Deferred();for(r in e.ajaxSettings)z[r]===void 0&&(z[r]=e.ajaxSettings[r]);I(z),z.crossDomain||(z.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(z.url)&&RegExp.$2!=window.location.host),z.url||(z.url=window.location.toString()),ae(z),z.cache===!1&&(z.url=Q(z.url,"_="+Date.now()));var X=z.dataType,ne=/\?.+=\?/.test(z.url);if(X=="jsonp"||ne)return ne||(z.url=Q(z.url,z.jsonp?z.jsonp+"=?":z.jsonp===!1?"":"callback=?")),e.ajaxJSONP(z,ie);var Ee=z.accepts[X],Ce={},Xe=function(et,dt){Ce[et.toLowerCase()]=[et,dt]},at=/^([\w-]+:)\/\//.test(z.url)?RegExp.$1:window.location.protocol,it=z.xhr(),$t=it.setRequestHeader,Ct;if(ie&&ie.promise(it),z.crossDomain||Xe("X-Requested-With","XMLHttpRequest"),Xe("Accept",Ee||"*/*"),(Ee=z.mimeType||Ee)&&(Ee.indexOf(",")>-1&&(Ee=Ee.split(",",2)[0]),it.overrideMimeType&&it.overrideMimeType(Ee)),(z.contentType||z.contentType!==!1&&z.data&&z.type.toUpperCase()!="GET")&&Xe("Content-Type",z.contentType||"application/x-www-form-urlencoded"),z.headers)for(s in z.headers)Xe(s,z.headers[s]);if(it.setRequestHeader=Xe,it.onreadystatechange=function(){if(it.readyState==4){it.onreadystatechange=ee,clearTimeout(Ct);var et,dt=!1;if(it.status>=200&&it.status<300||it.status==304||it.status==0&&at=="file:"){X=X||V(z.mimeType||it.getResponseHeader("content-type")),et=it.responseText;try{X=="script"?(0,eval)(et):X=="xml"?et=it.responseXML:X=="json"&&(et=x.test(et)?null:e.parseJSON(et))}catch(Be){dt=Be}dt?F(dt,"parsererror",it,z,ie):$(et,it,z,ie)}else F(it.statusText||null,it.status?"error":"abort",it,z,ie)}},L(it,z)===!1)return it.abort(),F(null,"abort",it,z,ie),it;if(z.xhrFields)for(s in z.xhrFields)it[s]=z.xhrFields[s];var tt="async"in z?z.async:!0;it.open(z.type,z.url,tt,z.username,z.password);for(s in Ce)$t.apply(it,Ce[s]);return z.timeout>0&&(Ct=setTimeout(function(){it.onreadystatechange=ee,it.abort(),F(null,"timeout",it,z,ie)},z.timeout)),it.send(z.data?z.data:null),it};function be(j,z,ie,X){var ne=!e.isFunction(z);return{url:j,data:ne?z:void 0,success:ne?e.isFunction(ie)?ie:void 0:z,dataType:ne&&X||ie}}e.get=function(j,z,ie,X){return e.ajax(be.apply(null,arguments))},e.post=function(j,z,ie,X){var ne=be.apply(null,arguments);return ne.type="POST",e.ajax(ne)},e.getJSON=function(j,z,ie){var X=be.apply(null,arguments);return X.dataType="json",e.ajax(X)},e.fetchJSON=function(j){var z=new XMLHttpRequest;return new Promise(function(ie,X){z.onreadystatechange=function(){try{if(z.readyState!==4)return;if(z.status>=200&&z.status<300){var ne=JSON.parse(z.responseText);ie(ne)}else X({status:z.status,statusText:z.statusText})}catch(Ee){X({status:400,statusText:`Error fetching JSON from ${j}: ${Ee}`})}},z.open("GET",j,!0),z.send()})},e.fn.load=function(j,z,ie){if(!this.length)return this;var X=this,ne=j.split(/\s/),Ee,Ce=be(j,z,ie),Xe=Ce.success;return ne.length>1&&(Ce.url=ne[0],Ee=ne[1]),Ce.success=function(at){X.html(Ee?e("<div>").html(at.replace(u,"")).find(Ee):at),Xe&&Xe.apply(X,arguments)},e.ajax(Ce),this};var te=encodeURIComponent;function G(j,z,ie,X){var ne,Ee=e.isArray(z),Ce=e.isPlainObject(z);e.each(z,function(Xe,at){ne=e.type(at),X&&(Xe=ie?X:X+"["+(Ce||ne=="object"||ne=="array"?Xe:"")+"]"),!X&&Ee?j.add(at.name,at.value):ne=="array"||!ie&&ne=="object"?G(j,at,ie,Xe):j.add(Xe,at)})}e.param=function(j,z){var ie=[];return ie.add=function(X,ne){this.push(te(X)+"="+te(ne))},G(ie,j,z),ie.join("&").replace(/%20/g,"+")}})(gl);(function(e){e.fn.serializeArray=function(){var t=[],i;return e([].slice.call(this.get(0).elements)).each(function(){i=e(this);var r=i.attr("type");this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&r!="submit"&&r!="reset"&&r!="button"&&(r!="radio"&&r!="checkbox"||this.checked)&&t.push({name:i.attr("name"),value:i.val()})}),t},e.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(i){t.push(encodeURIComponent(i.name)+"="+encodeURIComponent(i.value))}),t.join("&")},e.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var i=e.Event("submit");this.eq(0).trigger(i),i.isDefaultPrevented()||this.get(0).submit()}return this}})(gl);(function(e){"__proto__"in{}||e.extend(e.zepto,{Z:function(i,r){return i=i||[],e.extend(i,e.fn),i.selector=r||"",i.__Z=!0,i},isZ:function(i){return e.type(i)==="array"&&"__Z"in i}});try{getComputedStyle(void 0)}catch{var t=getComputedStyle;window.getComputedStyle=function(r,s){try{return t(r,s)}catch{return null}}}})(gl);const Kv=gl.getJSON,Ah=gl.ajax,K_=gl.fetchJSON,yo=[["millisecond",1,function(e){}],["second",1e3,function(e){e.setMilliseconds(0)}],["minute",1e3*60,function(e){e.setSeconds(0)}],["hour",1e3*60*60,function(e){e.setMinutes(0)}],["day",1e3*60*60*24,function(e){e.setHours(0)}],["month",1e3*60*60*24*30,function(e){e.setDate(1)}],["year",1e3*60*60*24*365,function(e){e.setMonth(0)}],["decade",1e3*60*60*24*365*10,function(e){var t=e.getFullYear();e.setFullYear(t-t%10)}],["century",1e3*60*60*24*365*100,function(e){var t=e.getFullYear();e.setFullYear(t-t%100)}],["millennium",1e3*60*60*24*365*1e3,function(e){var t=e.getFullYear();e.setFullYear(t-t%1e3)}]],Xc=["millisecond","second","minute","hour","day","month","year"],y2=/^([\+-]?\d+?)(-\d{2}?)?(-\d{2}?)?$/,GY=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,b2={base:{millisecond:"time_short",second:"time",minute:"time_no_seconds_small_date",hour:"time_no_seconds_small_date",day:"full",month:"month",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"},short:{millisecond:"time_short",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"}},X_=Zv.extend({initialize:function(e,t,i){typeof e=="number"?this.data={format:"yyyy mmmm",date_obj:new Date(e)}:Date==e.constructor?this.data={format:"yyyy mmmm",date_obj:e}:(this.data=JSON.parse(JSON.stringify(e)),this._createDateObj()),e.format&&!t&&(t=e.format),this._setFormat(t,i)},setDateFormat:function(e){this.data.format=e},getDisplayDate:function(e,t){if(this.data.display_date)return this.data.display_date;e||(e=Ea.fallback),e.constructor!=Ea&&(gi("First argument to getDisplayDate must be type Language"),e=Ea.fallback);var i=t||this.data.format;return e.formatDate(this.data.date_obj,i)},getMillisecond:function(){return this.getTime()},getTime:function(){return this.data.date_obj.getTime()},isBefore:function(e){if(!this.data.date_obj.constructor==e.data.date_obj.constructor)throw new mi("date_compare_err");return"isBefore"in this.data.date_obj?this.data.date_obj.isBefore(e.data.date_obj):this.data.date_obj<e.data.date_obj},isAfter:function(e){if(!this.data.date_obj.constructor==e.data.date_obj.constructor)throw new mi("date_compare_err");return"isAfter"in this.data.date_obj?this.data.date_obj.isAfter(e.data.date_obj):this.data.date_obj>e.data.date_obj},floor:function(e){for(var t=new Date(this.data.date_obj.getTime()),i=0;i<yo.length;i++)if(yo[i][2](t),yo[i][0]==e)return new X_(t);throw new mi("invalid_scale_err",e)},_getDateData:function(){var e={year:0,month:1,day:1,hour:0,minute:0,second:0,millisecond:0};Pi(e,this.data);for(var t in Xc){var i=ia(e[Xc[t]]);if(!i.match(/^-?\d*$/))throw new mi("invalid_date_err",Xc[t]+" = '"+e[Xc[t]]+"'");var r=parseInt(e[Xc[t]]);isNaN(r)&&(r=t==4||t==5?1:0),e[Xc[t]]=r}return e.month>0&&e.month<=12&&(e.month=e.month-1),e},_createDateObj:function(){var e=this._getDateData();this.data.date_obj=new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond),this.data.date_obj.getFullYear()!=e.year&&this.data.date_obj.setFullYear(e.year)},findBestFormat:function(e){for(var t=Xc,i=0;i<t.length;i++)if(this.data[t[i]])return e?e in b2||(e="short"):e="base",b2[e][t[i]];return""},_setFormat:function(e,t){e?this.data.format=e:this.data.format||(this.data.format=this.findBestFormat()),t?this.data.format_short=t:this.data.format_short||(this.data.format_short=this.findBestFormat(!0))},getFullYear:function(){return this.data.date_obj.getFullYear()}});function x2(e){if(e.match(y2)){var t=e.match(y2).slice(1),i={year:t[0].replace("+","")};return t[1]&&(i.month=t[1].replace("-","")),t[2]&&(i.day=t[2].replace("-","")),i}if(e.match(GY))return cls.parseISODate(e);if(e.match(/^\-?\d+$/))return{year:e};var r={};if(e.match(/\d+\/\d+\/\d+/)){var s=e.match(/\d+\/\d+\/\d+/)[0];e=ia(e.replace(s,""));var u=s.split("/");r.month=u[0],r.day=u[1],r.year=u[2]}if(e.match(/\d+\/\d+/)){var s=e.match(/\d+\/\d+/)[0];e=ia(e.replace(s,""));var u=s.split("/");r.month=u[0],r.year=u[1]}if(e.match(":")){var d=e.split(":");if(r.hour=d[0],r.minute=d[1],d[2]){let l=d[2].split(".");r.second=l[0],r.millisecond=l[1]}}return r}const Gp=Zv.extend({initialize:function(e){if(this.year=parseInt(e),isNaN(this.year))throw new mi("invalid_year_err",e)},isBefore:function(e){return this.year<e.year},isAfter:function(e){return this.year>e.year},getTime:function(){return this.year}}),dx=1e6,hx=dx*10,fx=hx*10,w2=fx*10;function Nl(e){return function(t){var i=t.getTime();return new Gp(Math.floor(i/e)*e)}}const pv=[["year",1,new Nl(1)],["decade",10,new Nl(10)],["century",100,new Nl(100)],["millennium",1e3,new Nl(1e3)],["age",dx,new Nl(dx)],["epoch",hx,new Nl(hx)],["era",fx,new Nl(fx)],["eon",w2,new Nl(w2)]],Y_=X_.extend({initialize:function(e,t,i){Gp==e.constructor?this.data={date_obj:e}:(this.data=JSON.parse(JSON.stringify(e)),this._createDateObj()),e.format&&!t&&(t=e.format),this._setFormat(t,i)},_createDateObj:function(){var e=this._getDateData();this.data.date_obj=new Gp(e.year)},floor:function(e){for(var t=0;t<pv.length;t++)if(pv[t][0]==e){var i=pv[t][2](this.data.date_obj);return new Y_(i)}throw new mi("invalid_scale_err",e)},getFullYear:function(){return this.data.date_obj.getTime()}}),S2=new RegExp(/\$\{(.+?)\}/g);class Ea{constructor(t,i){for(let u in Wl.en)this[u]=Wl.en[u];if(t&&typeof t=="string"&&t!="en"){var r=t;if(!(r in Wl)){console.log(`Expected language ${r} to be cached. Did you call the constructor directly?`);var s=cP(r,i);K_(s).then(u=>{Wl[r]=u}).catch(u=>{console.log(`Error loading language [${s}] ${u.statusText} [${u.status}]`)})}Pi(this,Wl[r])}}mergeData(t){for(k in Wl.en)t[k]&&(typeof this[k]=="object"?Pi(t[k],this[k]):this[k]=t[k])}formatBigYear(t,i){var r=t.year,s=this.bigdateformats[i]||this.bigdateformats.fallback;if(s){for(var u=0;u<s.length;u++){var d=s[u];if(Math.abs(r/d[0])>1)return T2(Math.abs(r/d[0]),d[1])}return r.toString()}else return gi("Language file dateformats missing cosmological. Falling back."),T2(r,i)}_(t,i){let r=this.messages[t]||Ea.fallback.messages[t]||t;if(r.match(S2)){if(!i)throw new mi("template_message_without_context");for(let s of r.matchAll(S2)){if(!(s[1]in i))throw new mi("template_message_without_context");r=r.replace(s[0],i[s[1]])}}return r}formatDate(t,i){return t.constructor==Date?this.formatJSDate(t,i):t.constructor==Gp?this.formatBigYear(t,i):t.data&&t.data.date_obj?this.formatDate(t.data.date_obj,i):(gi("Unfamiliar date presented for formatting"),t.toString())}formatJSDate(t,i){var r=this,s=function(V,Q){var ae=r.period_labels[V];if(ae)var V=Q<12?ae[0]:ae[1];return"<span class='tl-timeaxis-timesuffix'>"+V+"</span>"},u=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,d=/[^-+\dA-Z]/g;i||(i="full");var l=this.dateformats[i]||Ea.fallback.dateformats[i];l||(l=i);var m="get",g=t[m+"Date"](),x=t[m+"Day"](),w=t[m+"Month"](),C=t[m+"FullYear"](),I=t[m+"Hours"](),M=t[m+"Minutes"](),L=t[m+"Seconds"](),$=t[m+"Milliseconds"](),F=t.getTimezoneOffset(),U={d:g,dd:Qo(g),ddd:this.date.day_abbr[x],dddd:this.date.day[x],m:w+1,mm:Qo(w+1),mmm:this.date.month_abbr[w],mmmm:this.date.month[w],yy:String(C).slice(2),yyyy:C<0&&this.has_negative_year_modifier()?Math.abs(C):C,h:I%12||12,hh:Qo(I%12||12),H:I,HH:Qo(I),M,MM:Qo(M),s:L,ss:Qo(L),l:Qo($,3),L:Qo($>99?Math.round($/10):$),t:s("t",I),tt:s("tt",I),T:s("T",I),TT:s("TT",I),Z:(String(t).match(u)||[""]).pop().replace(d,""),o:(F>0?"-":"+")+Qo(Math.floor(Math.abs(F)/60)*100+Math.abs(F)%60,4),S:["th","st","nd","rd"][g%10>3?0:(g%100-g%10!=10)*g%10]},ee=l.replace(Ea.DATE_FORMAT_TOKENS,function(V){return V in U?U[V]:V.slice(1,V.length-1)});return this._applyEra(ee,C)}has_negative_year_modifier(){return!!(this.era_labels.negative_year.prefix||this.era_labels.negative_year.suffix)}_applyEra(t,i){var r=i<0?this.era_labels.negative_year:this.era_labels.positive_year,s="";return r.prefix&&(s+="<span>"+r.prefix+"</span> "),s+=t,r.suffix&&(s+=" <span>"+r.suffix+"</span>"),s}}async function WY(e,t){var i=cP(e,t);try{if(!Wl[e]){let r=await K_(i);Wl[e]=r}return new Ea(e,t)}catch(r){return console.log(`Error loading language [${i}] ${r.statusText}`),null}}function cP(e,t){if(/\.json$/.test(e))var i=e;else{var r="/locale/"+e+".json";/\/$/.test(t)&&(r=r.substr(1));var i=t+r}return i}function T2(e,t){if(t.match(/%(\.(\d+))?f/)){var i=t.match(/%(\.(\d+))?f/),r=i[0];return i[2]&&(e=e.toFixed(i[2])),t.replace(r,e)}return t}Ea.fallback={messages:{}};Ea.DATE_FORMAT_TOKENS=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g;var Wl={en:{name:"English (built-in)",lang:"en",api:{wikipedia:"en"},messages:{loading:"Loading",wikipedia:"From Wikipedia, the free encyclopedia",error:"Error",return_to_title:"Return to Title",go_to_end:"Go to the last slide",loading_content:"Loading Content",loading_timeline:"Loading Timeline... ",swipe_to_navigate:"Swipe to Navigate<br><span class='tl-button'>OK</span>",zoom_in:"Zoom in",zoom_out:"Zoom out",unknown_read_err:"An unexpected error occurred trying to read your spreadsheet data",invalid_url_err:"Unable to read Timeline data. Make sure your URL is for a Google Spreadsheet or a Timeline JSON file.",network_err:"Unable to read your Google Spreadsheet. Make sure you have published it to the web.",missing_start_date_err:"Missing start_date",invalid_start_time_without_date:"Invalid configuration: time cannot be used without date.",invalid_end_time_without_date:"Invalid configuration: end time cannot be used without end date.",date_compare_err:"Can't compare timeline date objects on different scales",invalid_scale_err:"Invalid scale",invalid_date_err:"Invalid date: month, day and year must be numbers.",invalid_separator_error:"Invalid time: misuse of : or . as separator.",invalid_hour_err:"Invalid time (hour)",invalid_minute_err:"Invalid time (minute)",invalid_second_err:"Invalid time (second)",invalid_fractional_err:"Invalid time (fractional seconds)",invalid_second_fractional_err:"Invalid time (seconds and fractional seconds)",invalid_year_err:"Invalid year",flickr_notfound_err:"Photo not found or private",flickr_invalidurl_err:"Invalid Flickr URL",imgur_invalidurl_err:"Invalid Imgur URL",twitter_load_err:"Unable to load Tweet",twitterembed_invalidurl_err:"Invalid Twitter Embed url",wikipedia_load_err:"Unable to load Wikipedia entry",wikipedia_image_load_err:"Unable to load Wikipedia image data",spotify_invalid_url:"Invalid Spotify URL",invalid_rgb_err:"Invalid RGB argument",time_scale_scale_err:"Don't know how to get date from time for scale",axis_helper_no_options_err:"Axis helper must be configured with options",axis_helper_scale_err:"No AxisHelper available for scale",invalid_integer_option:"Invalid option valuemust be a whole number.",instagram_bad_request:"Invalid or private Instagram URL",template_message_without_context:"Required variables not provided for template translation message",aria_label_timeline:"Timeline",aria_label_timeline_navigation:"Timeline navigation",aria_label_timeline_content:"Timeline content",aria_label_zoomin:"Show less than ${start} to ${end}",aria_label_zoomout:"Show more than ${start} to ${end}"},date:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],month_abbr:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_abbr:["Sun.","Mon.","Tues.","Wed.","Thurs.","Fri.","Sat."]},era_labels:{positive_year:{prefix:"",suffix:""},negative_year:{prefix:"",suffix:"BCE"}},period_labels:{t:["a","p"],tt:["am","pm"],T:["A","P"],TT:["AM","PM"]},dateformats:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time:"h:MM:ss TT' <small>'mmmm d',' yyyy'</small>'",time_short:"h:MM:ss TT",time_no_seconds_short:"h:MM TT",time_no_minutes_short:"h TT",time_no_seconds_small_date:"h:MM TT' <small>'mmmm d',' yyyy'</small>'",time_milliseconds:"l",full_long:"mmm d',' yyyy 'at' h:MM TT",full_long_small_date:"h:MM TT' <small>mmm d',' yyyy'</small>'"},bigdateformats:{fallback:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]],compact:[[1e9,"%.2f bya"],[1e6,"%.1f mya"],[1e3,"%.1f kya"],[1,"%f years ago"]],verbose:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]]}}};let K1=new Ea;Ea.fallback=K1;class vl{setLanguage(t){this.language=t}getLanguage(){if(this.language){if(typeof this.language=="object")return this.language;gi(`I18NMixins.getLanguage: this.language should be object, but is ${typeof this.language}`)}return K1}_(t,i){return this.getLanguage()._(t,i)}}class J_{constructor(t,i,r){r&&this.setLanguage(r),this._el={parent:{},container:{},message_container:{},loading_icon:{},message:{}},this.options={width:600,height:600,message_class:"tl-message",message_icon_class:"tl-loading-icon"},this.container=t,Pi(this.options,i),this._el.container=hn("div",this.options.message_class),t&&(t.appendChild(this._el.container),this._el.parent=t),this.animator={},this._initLayout(),this._initEvents()}updateMessage(t){t?this._el.message.innerHTML=t:this._el.message.innerHTML=this._("loading"),!this._el.parent.atributes&&this.container.attributes&&(this.container.appendChild(this._el.container),this._el.parent=this.container)}updateDisplay(t,i){}_onMouseClick(){this.fire("clicked",this.options)}_onRemove(){this._el.parent={}}_initLayout(){this._el.message_container=hn("div","tl-message-container",this._el.container),this._el.loading_icon=hn("div",this.options.message_icon_class,this._el.message_container),this._el.message=hn("div","tl-message-content",this._el.message_container),this.updateMessage()}_initEvents(){ti.addListener(this._el.container,"click",this._onMouseClick,this),ti.addListener(this,"removed",this._onRemove,this)}}Ss(J_,vl,Ts,ml);function Wg(e,i){var i=i||"start_date";e.sort(function(r,s){return r[i].isBefore(s[i])?-1:r[i].isAfter(s[i])?1:0})}function E2(e){var t={hour:null,minute:null,second:null,millisecond:null},i=null,r=e.match(/(\s*[AaPp]\.?[Mm]\.?\s*)$/);r&&(i=ia(r[0]),e=ia(e.substring(0,e.lastIndexOf(i))));var s=[],u=e.match(/^\s*(\d{1,2})(\d{2})\s*$/);if(u?s=u.slice(1):(s=e.split(":"),s.length==1&&(s=e.split("."))),s.length>4)throw new mi("invalid_separator_error");let d=s[0];if(t.hour=parseInt(d),i&&i.toLowerCase()[0]=="p"&&t.hour!=12?t.hour+=12:i&&i.toLowerCase()[0]=="a"&&t.hour==12&&(t.hour=0),isNaN(t.hour)||t.hour<0||t.hour>23)throw new mi("invalid_hour_err",d);if(s.length>1){let g=s[1];if(t.minute=parseInt(g),isNaN(t.minute))throw new mi("invalid_minute_err",g)}if(s.length>2){var l=s[2].split(/[\.,]/);if(s=l.concat(s.slice(3)),s.length>2)throw new mi("invalid_second_fractional_err");if(t.second=parseInt(s[0]),isNaN(t.second))throw new mi("invalid_second_err",s[0]);if(s.length==2){var m=parseInt(s[1]);if(isNaN(m))throw new mi("invalid_fractional_err",s[1]);t.millisecond=100*m}}return t}const qY=new RegExp("(^-?\\d+$|^$)");function C2(e){try{return Object.keys(e).forEach(t=>{let i=e[t];if(i&&i.match&&!i.match(qY))throw`invalid value ${i} for ${t}`}),!0}catch{return!1}}const I2={human:X_,cosmological:Y_};/*! @license DOMPurify 2.4.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.5/LICENSE */function Kl(e){"@babel/helpers - typeof";return Kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kl(e)}function px(e,t){return px=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},px(e,t)}function ZY(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function mv(e,t,i){return ZY()?mv=Reflect.construct:mv=function(s,u,d){var l=[null];l.push.apply(l,u);var m=Function.bind.apply(s,l),g=new m;return d&&px(g,d.prototype),g},mv.apply(null,arguments)}function Va(e){return KY(e)||XY(e)||YY(e)||JY()}function KY(e){if(Array.isArray(e))return mx(e)}function XY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function YY(e,t){if(e){if(typeof e=="string")return mx(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return mx(e,t)}}function mx(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function JY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var QY=Object.hasOwnProperty,A2=Object.setPrototypeOf,eJ=Object.isFrozen,tJ=Object.getPrototypeOf,nJ=Object.getOwnPropertyDescriptor,ws=Object.freeze,io=Object.seal,iJ=Object.create,uP=typeof Reflect<"u"&&Reflect,Xv=uP.apply,gx=uP.construct;Xv||(Xv=function(t,i,r){return t.apply(i,r)});ws||(ws=function(t){return t});io||(io=function(t){return t});gx||(gx=function(t,i){return mv(t,Va(i))});var rJ=Ma(Array.prototype.forEach),M2=Ma(Array.prototype.pop),Vf=Ma(Array.prototype.push),gv=Ma(String.prototype.toLowerCase),H0=Ma(String.prototype.toString),sJ=Ma(String.prototype.match),Na=Ma(String.prototype.replace),aJ=Ma(String.prototype.indexOf),oJ=Ma(String.prototype.trim),ms=Ma(RegExp.prototype.test),G0=lJ(TypeError);function Ma(e){return function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];return Xv(e,t,r)}}function lJ(e){return function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return gx(e,i)}}function ei(e,t,i){i=i||gv,A2&&A2(e,null);for(var r=t.length;r--;){var s=t[r];if(typeof s=="string"){var u=i(s);u!==s&&(eJ(t)||(t[r]=u),s=u)}e[s]=!0}return e}function Yc(e){var t=iJ(null),i;for(i in e)Xv(QY,e,[i])===!0&&(t[i]=e[i]);return t}function qg(e,t){for(;e!==null;){var i=nJ(e,t);if(i){if(i.get)return Ma(i.get);if(typeof i.value=="function")return Ma(i.value)}e=tJ(e)}function r(s){return console.warn("fallback value for",s),null}return r}var k2=ws(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),W0=ws(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),q0=ws(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),cJ=ws(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Z0=ws(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),uJ=ws(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),P2=ws(["#text"]),D2=ws(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),K0=ws(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),L2=ws(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Zg=ws(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),dJ=io(/\{\{[\w\W]*|[\w\W]*\}\}/gm),hJ=io(/<%[\w\W]*|[\w\W]*%>/gm),fJ=io(/\${[\w\W]*}/gm),pJ=io(/^data-[\-\w.\u00B7-\uFFFF]/),mJ=io(/^aria-[\-\w]+$/),gJ=io(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),vJ=io(/^(?:\w+script|data):/i),_J=io(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),yJ=io(/^html$/i),bJ=function(){return typeof window>"u"?null:window},xJ=function(t,i){if(Kl(t)!=="object"||typeof t.createPolicy!="function")return null;var r=null,s="data-tt-policy-suffix";i.currentScript&&i.currentScript.hasAttribute(s)&&(r=i.currentScript.getAttribute(s));var u="dompurify"+(r?"#"+r:"");try{return t.createPolicy(u,{createHTML:function(l){return l},createScriptURL:function(l){return l}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function dP(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:bJ(),t=function(ze){return dP(ze)};if(t.version="2.4.5",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;var i=e.document,r=e.document,s=e.DocumentFragment,u=e.HTMLTemplateElement,d=e.Node,l=e.Element,m=e.NodeFilter,g=e.NamedNodeMap,x=g===void 0?e.NamedNodeMap||e.MozNamedAttrMap:g,w=e.HTMLFormElement,C=e.DOMParser,I=e.trustedTypes,M=l.prototype,L=qg(M,"cloneNode"),$=qg(M,"nextSibling"),F=qg(M,"childNodes"),U=qg(M,"parentNode");if(typeof u=="function"){var ee=r.createElement("template");ee.content&&ee.content.ownerDocument&&(r=ee.content.ownerDocument)}var V=xJ(I,i),Q=V?V.createHTML(""):"",ae=r,be=ae.implementation,te=ae.createNodeIterator,G=ae.createDocumentFragment,j=ae.getElementsByTagName,z=i.importNode,ie={};try{ie=Yc(r).documentMode?r.documentMode:{}}catch{}var X={};t.isSupported=typeof U=="function"&&be&&typeof be.createHTMLDocument<"u"&&ie!==9;var ne=dJ,Ee=hJ,Ce=fJ,Xe=pJ,at=mJ,it=vJ,$t=_J,Ct=gJ,tt=null,et=ei({},[].concat(Va(k2),Va(W0),Va(q0),Va(Z0),Va(P2))),dt=null,Be=ei({},[].concat(Va(D2),Va(K0),Va(L2),Va(Zg))),Ke=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ut=null,Ot=null,Vt=!0,_n=!0,qt=!1,_e=!0,ke=!1,ge=!1,ft=!1,q=!1,fe=!1,Pe=!1,Ge=!1,pt=!0,ht=!1,zt="user-content-",Dt=!0,Gt=!1,ln={},vt=null,Rn=ei({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ln=null,Ye=ei({},["audio","video","img","source","image","track"]),Qe=null,Re=ei({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),mt="http://www.w3.org/1998/Math/MathML",St="http://www.w3.org/2000/svg",Yt="http://www.w3.org/1999/xhtml",an=Yt,Pt=!1,qn=null,Cn=ei({},[mt,St,Yt],H0),Ut,vn=["application/xhtml+xml","text/html"],kn="text/html",de,Y=null,re=r.createElement("form"),pe=function(ze){return ze instanceof RegExp||ze instanceof Function},Ie=function(ze){Y&&Y===ze||((!ze||Kl(ze)!=="object")&&(ze={}),ze=Yc(ze),Ut=vn.indexOf(ze.PARSER_MEDIA_TYPE)===-1?Ut=kn:Ut=ze.PARSER_MEDIA_TYPE,de=Ut==="application/xhtml+xml"?H0:gv,tt="ALLOWED_TAGS"in ze?ei({},ze.ALLOWED_TAGS,de):et,dt="ALLOWED_ATTR"in ze?ei({},ze.ALLOWED_ATTR,de):Be,qn="ALLOWED_NAMESPACES"in ze?ei({},ze.ALLOWED_NAMESPACES,H0):Cn,Qe="ADD_URI_SAFE_ATTR"in ze?ei(Yc(Re),ze.ADD_URI_SAFE_ATTR,de):Re,Ln="ADD_DATA_URI_TAGS"in ze?ei(Yc(Ye),ze.ADD_DATA_URI_TAGS,de):Ye,vt="FORBID_CONTENTS"in ze?ei({},ze.FORBID_CONTENTS,de):Rn,ut="FORBID_TAGS"in ze?ei({},ze.FORBID_TAGS,de):{},Ot="FORBID_ATTR"in ze?ei({},ze.FORBID_ATTR,de):{},ln="USE_PROFILES"in ze?ze.USE_PROFILES:!1,Vt=ze.ALLOW_ARIA_ATTR!==!1,_n=ze.ALLOW_DATA_ATTR!==!1,qt=ze.ALLOW_UNKNOWN_PROTOCOLS||!1,_e=ze.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ke=ze.SAFE_FOR_TEMPLATES||!1,ge=ze.WHOLE_DOCUMENT||!1,fe=ze.RETURN_DOM||!1,Pe=ze.RETURN_DOM_FRAGMENT||!1,Ge=ze.RETURN_TRUSTED_TYPE||!1,q=ze.FORCE_BODY||!1,pt=ze.SANITIZE_DOM!==!1,ht=ze.SANITIZE_NAMED_PROPS||!1,Dt=ze.KEEP_CONTENT!==!1,Gt=ze.IN_PLACE||!1,Ct=ze.ALLOWED_URI_REGEXP||Ct,an=ze.NAMESPACE||Yt,Ke=ze.CUSTOM_ELEMENT_HANDLING||{},ze.CUSTOM_ELEMENT_HANDLING&&pe(ze.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ke.tagNameCheck=ze.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ze.CUSTOM_ELEMENT_HANDLING&&pe(ze.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ke.attributeNameCheck=ze.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ze.CUSTOM_ELEMENT_HANDLING&&typeof ze.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ke.allowCustomizedBuiltInElements=ze.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ke&&(_n=!1),Pe&&(fe=!0),ln&&(tt=ei({},Va(P2)),dt=[],ln.html===!0&&(ei(tt,k2),ei(dt,D2)),ln.svg===!0&&(ei(tt,W0),ei(dt,K0),ei(dt,Zg)),ln.svgFilters===!0&&(ei(tt,q0),ei(dt,K0),ei(dt,Zg)),ln.mathMl===!0&&(ei(tt,Z0),ei(dt,L2),ei(dt,Zg))),ze.ADD_TAGS&&(tt===et&&(tt=Yc(tt)),ei(tt,ze.ADD_TAGS,de)),ze.ADD_ATTR&&(dt===Be&&(dt=Yc(dt)),ei(dt,ze.ADD_ATTR,de)),ze.ADD_URI_SAFE_ATTR&&ei(Qe,ze.ADD_URI_SAFE_ATTR,de),ze.FORBID_CONTENTS&&(vt===Rn&&(vt=Yc(vt)),ei(vt,ze.FORBID_CONTENTS,de)),Dt&&(tt["#text"]=!0),ge&&ei(tt,["html","head","body"]),tt.table&&(ei(tt,["tbody"]),delete ut.tbody),ws&&ws(ze),Y=ze)},$e=ei({},["mi","mo","mn","ms","mtext"]),qe=ei({},["foreignobject","desc","title","annotation-xml"]),Ve=ei({},["title","style","font","a","script"]),Le=ei({},W0);ei(Le,q0),ei(Le,cJ);var Ze=ei({},Z0);ei(Ze,uJ);var wt=function(ze){var yt=U(ze);(!yt||!yt.tagName)&&(yt={namespaceURI:an,tagName:"template"});var Wt=gv(ze.tagName),In=gv(yt.tagName);return qn[ze.namespaceURI]?ze.namespaceURI===St?yt.namespaceURI===Yt?Wt==="svg":yt.namespaceURI===mt?Wt==="svg"&&(In==="annotation-xml"||$e[In]):!!Le[Wt]:ze.namespaceURI===mt?yt.namespaceURI===Yt?Wt==="math":yt.namespaceURI===St?Wt==="math"&&qe[In]:!!Ze[Wt]:ze.namespaceURI===Yt?yt.namespaceURI===St&&!qe[In]||yt.namespaceURI===mt&&!$e[In]?!1:!Ze[Wt]&&(Ve[Wt]||!Le[Wt]):!!(Ut==="application/xhtml+xml"&&qn[ze.namespaceURI]):!1},bt=function(ze){Vf(t.removed,{element:ze});try{ze.parentNode.removeChild(ze)}catch{try{ze.outerHTML=Q}catch{ze.remove()}}},Et=function(ze,yt){try{Vf(t.removed,{attribute:yt.getAttributeNode(ze),from:yt})}catch{Vf(t.removed,{attribute:null,from:yt})}if(yt.removeAttribute(ze),ze==="is"&&!dt[ze])if(fe||Pe)try{bt(yt)}catch{}else try{yt.setAttribute(ze,"")}catch{}},pn=function(ze){var yt,Wt;if(q)ze="<remove></remove>"+ze;else{var In=sJ(ze,/^[\r\n\t ]+/);Wt=In&&In[0]}Ut==="application/xhtml+xml"&&an===Yt&&(ze='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ze+"</body></html>");var Yn=V?V.createHTML(ze):ze;if(an===Yt)try{yt=new C().parseFromString(Yn,Ut)}catch{}if(!yt||!yt.documentElement){yt=be.createDocument(an,"template",null);try{yt.documentElement.innerHTML=Pt?Q:Yn}catch{}}var oi=yt.body||yt.documentElement;return ze&&Wt&&oi.insertBefore(r.createTextNode(Wt),oi.childNodes[0]||null),an===Yt?j.call(yt,ge?"html":"body")[0]:ge?yt.documentElement:oi},wn=function(ze){return te.call(ze.ownerDocument||ze,ze,m.SHOW_ELEMENT|m.SHOW_COMMENT|m.SHOW_TEXT,null,!1)},un=function(ze){return ze instanceof w&&(typeof ze.nodeName!="string"||typeof ze.textContent!="string"||typeof ze.removeChild!="function"||!(ze.attributes instanceof x)||typeof ze.removeAttribute!="function"||typeof ze.setAttribute!="function"||typeof ze.namespaceURI!="string"||typeof ze.insertBefore!="function"||typeof ze.hasChildNodes!="function")},mn=function(ze){return Kl(d)==="object"?ze instanceof d:ze&&Kl(ze)==="object"&&typeof ze.nodeType=="number"&&typeof ze.nodeName=="string"},En=function(ze,yt,Wt){X[ze]&&rJ(X[ze],function(In){In.call(t,yt,Wt,Y)})},Vn=function(ze){var yt;if(En("beforeSanitizeElements",ze,null),un(ze)||ms(/[\u0080-\uFFFF]/,ze.nodeName))return bt(ze),!0;var Wt=de(ze.nodeName);if(En("uponSanitizeElement",ze,{tagName:Wt,allowedTags:tt}),ze.hasChildNodes()&&!mn(ze.firstElementChild)&&(!mn(ze.content)||!mn(ze.content.firstElementChild))&&ms(/<[/\w]/g,ze.innerHTML)&&ms(/<[/\w]/g,ze.textContent)||Wt==="select"&&ms(/<template/i,ze.innerHTML))return bt(ze),!0;if(!tt[Wt]||ut[Wt]){if(!ut[Wt]&&jt(Wt)&&(Ke.tagNameCheck instanceof RegExp&&ms(Ke.tagNameCheck,Wt)||Ke.tagNameCheck instanceof Function&&Ke.tagNameCheck(Wt)))return!1;if(Dt&&!vt[Wt]){var In=U(ze)||ze.parentNode,Yn=F(ze)||ze.childNodes;if(Yn&&In)for(var oi=Yn.length,ri=oi-1;ri>=0;--ri)In.insertBefore(L(Yn[ri],!0),$(ze))}return bt(ze),!0}return ze instanceof l&&!wt(ze)||(Wt==="noscript"||Wt==="noembed")&&ms(/<\/no(script|embed)/i,ze.innerHTML)?(bt(ze),!0):(ke&&ze.nodeType===3&&(yt=ze.textContent,yt=Na(yt,ne," "),yt=Na(yt,Ee," "),yt=Na(yt,Ce," "),ze.textContent!==yt&&(Vf(t.removed,{element:ze.cloneNode()}),ze.textContent=yt)),En("afterSanitizeElements",ze,null),!1)},$n=function(ze,yt,Wt){if(pt&&(yt==="id"||yt==="name")&&(Wt in r||Wt in re))return!1;if(!(_n&&!Ot[yt]&&ms(Xe,yt))){if(!(Vt&&ms(at,yt))){if(!dt[yt]||Ot[yt]){if(!(jt(ze)&&(Ke.tagNameCheck instanceof RegExp&&ms(Ke.tagNameCheck,ze)||Ke.tagNameCheck instanceof Function&&Ke.tagNameCheck(ze))&&(Ke.attributeNameCheck instanceof RegExp&&ms(Ke.attributeNameCheck,yt)||Ke.attributeNameCheck instanceof Function&&Ke.attributeNameCheck(yt))||yt==="is"&&Ke.allowCustomizedBuiltInElements&&(Ke.tagNameCheck instanceof RegExp&&ms(Ke.tagNameCheck,Wt)||Ke.tagNameCheck instanceof Function&&Ke.tagNameCheck(Wt))))return!1}else if(!Qe[yt]){if(!ms(Ct,Na(Wt,$t,""))){if(!((yt==="src"||yt==="xlink:href"||yt==="href")&&ze!=="script"&&aJ(Wt,"data:")===0&&Ln[ze])){if(!(qt&&!ms(it,Na(Wt,$t,"")))){if(Wt)return!1}}}}}}return!0},jt=function(ze){return ze.indexOf("-")>0},He=function(ze){var yt,Wt,In,Yn;En("beforeSanitizeAttributes",ze,null);var oi=ze.attributes;if(oi){var ri={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:dt};for(Yn=oi.length;Yn--;){yt=oi[Yn];var uo=yt,ji=uo.name,Ci=uo.namespaceURI;if(Wt=ji==="value"?yt.value:oJ(yt.value),In=de(ji),ri.attrName=In,ri.attrValue=Wt,ri.keepAttr=!0,ri.forceKeepAttr=void 0,En("uponSanitizeAttribute",ze,ri),Wt=ri.attrValue,!ri.forceKeepAttr&&(Et(ji,ze),!!ri.keepAttr)){if(!_e&&ms(/\/>/i,Wt)){Et(ji,ze);continue}ke&&(Wt=Na(Wt,ne," "),Wt=Na(Wt,Ee," "),Wt=Na(Wt,Ce," "));var ho=de(ze.nodeName);if($n(ho,In,Wt)){if(ht&&(In==="id"||In==="name")&&(Et(ji,ze),Wt=zt+Wt),V&&Kl(I)==="object"&&typeof I.getAttributeType=="function"&&!Ci)switch(I.getAttributeType(ho,In)){case"TrustedHTML":Wt=V.createHTML(Wt);break;case"TrustedScriptURL":Wt=V.createScriptURL(Wt);break}try{Ci?ze.setAttributeNS(Ci,ji,Wt):ze.setAttribute(ji,Wt),M2(t.removed)}catch{}}}}En("afterSanitizeAttributes",ze,null)}},It=function gt(ze){var yt,Wt=wn(ze);for(En("beforeSanitizeShadowDOM",ze,null);yt=Wt.nextNode();)En("uponSanitizeShadowNode",yt,null),!Vn(yt)&&(yt.content instanceof s&&gt(yt.content),He(yt));En("afterSanitizeShadowDOM",ze,null)};return t.sanitize=function(gt){var ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},yt,Wt,In,Yn,oi;if(Pt=!gt,Pt&&(gt="<!-->"),typeof gt!="string"&&!mn(gt)){if(typeof gt.toString!="function")throw G0("toString is not a function");if(gt=gt.toString(),typeof gt!="string")throw G0("dirty is not a string, aborting")}if(!t.isSupported){if(Kl(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof gt=="string")return e.toStaticHTML(gt);if(mn(gt))return e.toStaticHTML(gt.outerHTML)}return gt}if(ft||Ie(ze),t.removed=[],typeof gt=="string"&&(Gt=!1),Gt){if(gt.nodeName){var ri=de(gt.nodeName);if(!tt[ri]||ut[ri])throw G0("root node is forbidden and cannot be sanitized in-place")}}else if(gt instanceof d)yt=pn("<!---->"),Wt=yt.ownerDocument.importNode(gt,!0),Wt.nodeType===1&&Wt.nodeName==="BODY"||Wt.nodeName==="HTML"?yt=Wt:yt.appendChild(Wt);else{if(!fe&&!ke&&!ge&&gt.indexOf("<")===-1)return V&&Ge?V.createHTML(gt):gt;if(yt=pn(gt),!yt)return fe?null:Ge?Q:""}yt&&q&&bt(yt.firstChild);for(var uo=wn(Gt?gt:yt);In=uo.nextNode();)In.nodeType===3&&In===Yn||Vn(In)||(In.content instanceof s&&It(In.content),He(In),Yn=In);if(Yn=null,Gt)return gt;if(fe){if(Pe)for(oi=G.call(yt.ownerDocument);yt.firstChild;)oi.appendChild(yt.firstChild);else oi=yt;return(dt.shadowroot||dt.shadowrootmod)&&(oi=z.call(i,oi,!0)),oi}var ji=ge?yt.outerHTML:yt.innerHTML;return ge&&tt["!doctype"]&&yt.ownerDocument&&yt.ownerDocument.doctype&&yt.ownerDocument.doctype.name&&ms(yJ,yt.ownerDocument.doctype.name)&&(ji="<!DOCTYPE "+yt.ownerDocument.doctype.name+`>
`+ji),ke&&(ji=Na(ji,ne," "),ji=Na(ji,Ee," "),ji=Na(ji,Ce," ")),V&&Ge?V.createHTML(ji):ji},t.setConfig=function(gt){Ie(gt),ft=!0},t.clearConfig=function(){Y=null,ft=!1},t.isValidAttribute=function(gt,ze,yt){Y||Ie({});var Wt=de(gt),In=de(ze);return $n(Wt,In,yt)},t.addHook=function(gt,ze){typeof ze=="function"&&(X[gt]=X[gt]||[],Vf(X[gt],ze))},t.removeHook=function(gt){if(X[gt])return M2(X[gt])},t.removeHooks=function(gt){X[gt]&&(X[gt]=[])},t.removeAllHooks=function(){X={}},t}var Q_=dP();const wJ={text:["headline","text"],media:["caption","credit"]},SJ={start_date:["display_date"],end_date:["display_date"],slide:["display_date","group"],date:["display_date"]};Q_.addHook("afterSanitizeAttributes",function(e){if(e.nodeName=="A"&&"href"in e){"target"in e.attributes||e.setAttribute("target","_blank");let t=e.attributes.rel;t?t.value.indexOf("noopener")==-1&&e.setAttribute("rel",`noopener ${t.value}`):e.setAttribute("rel","noopener")}});function O2(e,t,i){Object.keys(i).forEach(r=>{var s=r=="slide"?e:e[r];s&&i[r].forEach(u=>{typeof s[u]<"u"&&(s[u]=t(s[u]))})})}function TJ(e){return Q_.sanitize(e,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder","target"]})}class su{constructor(t){if(this.title="",this.scale="",this.events=[],this.eras=[],this.event_dict={},this.messages={errors:[],warnings:[]},typeof t=="object"&&t.events){if(this.scale=t.scale,this.events=[],this._ensureValidScale(t.events),t.title){var i=this._assignID(t.title);this._tidyFields(t.title),this.title=t.title,this.event_dict[i]=this.title}for(var r=0;r<t.events.length;r++)try{this.addEvent(t.events[r],!0)}catch(s){this.logError(s)}t.eras&&t.eras.forEach((s,u)=>{try{this.addEra(s)}catch(d){this.logError("Era "+u+": "+d)}}),Wg(this.events),Wg(this.eras)}}logError(t){gi(`logError: ${t}`),this.messages.errors.push(t)}getErrors(t){return t?this.messages.errors.join(t):this.messages.errors}validate(){(typeof this.events>"u"||typeof this.events.length>"u"||this.events.length==0)&&this.logError("Timeline configuration has no events.");for(var t=0;t<this.eras.length;t++)if(typeof this.eras[t].start_date>"u"||typeof this.eras[t].end_date>"u"){var i;this.eras[t].headline?i=this.eras[t].headline:i="era "+(t+1),this.logError("All eras must have start and end dates. ["+i+"]")}}isValid(){return this.messages.errors.length==0}addEvent(t,i){var r=this._assignID(t);return typeof t.start_date>"u"?(gi("Missing start date, skipping event"),console.log(t),null):(this._processDates(t),this._tidyFields(t),this.events.push(t),this.event_dict[r]=t,i||Wg(this.events),r)}addEra(t){var i=this._assignID(t);if(typeof t.start_date>"u")throw new mi("missing_start_date_err",i);this._processDates(t),this._tidyFields(t),this.eras.push({start_date:t.start_date,end_date:t.end_date,headline:t.text.headline})}_assignID(t){var i=t.unique_id;return ia(i)||(i=t.text?j0(t.text.headline):null),t.unique_id=kY(this.event_dict,i),t.unique_id}_makeUniqueIdentifiers(t,i){for(var r=[t],s=0;s<i.length;s++)ia(i[s].unique_id)&&(i[s].unique_id=j0(i[s].unique_id),r.indexOf(i[s].unique_id)==-1?r.push(i[s].unique_id):i[s].unique_id="");if(r.length!=i.length+1){for(var s=0;s<i.length;s++)if(!i[s].unique_id){var u=i[s].text?j0(i[s].text.headline):null;u||(u=_u(6)),r.indexOf(u)!=-1&&(u=u+"-"+s),r.push(u),i[s].unique_id=u}}}_ensureValidScale(t){if(!this.scale){this.scale="human";for(var i=0;i<t.length;i++){if(t[i].scale=="cosmological"){this.scale="cosmological";break}if(t[i].start_date&&typeof t[i].start_date.year<"u"){var r=new Y_(t[i].start_date),s=r.data.date_obj.year;if(s<-271820||s>275759){this.scale="cosmological";break}}}gi(`Determining scale dynamically: ${this.scale}`)}var u=I2[this.scale];u||this.logError("Don't know how to process dates on scale "+this.scale)}_processDates(t){var i=I2[this.scale];if(!(t.start_date instanceof i)){var r=t.start_date;if(t.start_date=new i(r),typeof t.end_date<"u"&&!(t.end_date instanceof i)){var s=t.end_date,u=!0;for(let d in r)u=u&&r[d]==s[d];u?(gi("End date same as start date is redundant; dropping end date"),delete t.end_date):t.end_date=new i(s)}}}getEarliestDate(){var t=this.events[0].start_date;return this.eras&&this.eras.length>0&&this.eras[0].start_date.isBefore(t)?this.eras[0].start_date:t}getLatestDate(){for(var t=[],i=0;i<this.events.length;i++)this.events[i].end_date?t.push({date:this.events[i].end_date}):t.push({date:this.events[i].start_date});for(var i=0;i<this.eras.length;i++)this.eras[i].end_date?t.push({date:this.eras[i].end_date}):t.push({date:this.eras[i].start_date});return Wg(t,"date"),t.slice(-1)[0].date}_tidyFields(t){function i(r,s,u){u||(u=""),r.hasOwnProperty(s)||(r[s]=u)}t.group&&(t.group=ia(t.group)),t.text||(t.text={}),i(t.text,"text"),i(t.text,"headline"),O2(t,TJ,wJ),O2(t,UY,SJ)}}function EJ(e,t){return e==null?"":(t=t||`
`,e.charAt(e.length-t.length)!==t?e:e.substring(0,e.length-t.length))}async function CJ(e){return new Promise((t,i)=>{if(e.data){var r=hP(fP(e.data,e),e);r.useMemoryStore=!0,t(r)}else e.url&&window.fetch(e.url,{mode:"cors"}).then(function(s){if(s.status!=200){s.headers.get("content-type")=="application/json"?s.text().then(u=>{i(JSON.parse(u))}):i({status_code:s.status,message:`Error fetching CSV: [${s.status} ${s.statusText}]`});return}return s.text?s.text():s}).then(function(s){if(s){var u=MJ(s,e);u.useMemoryStore=!0,t(u)}}).catch(s=>{i({status_code:500,message:`Error fetching CSV: ${s}`})})})}function hP(e,t){return t=t||{},t.noHeaderRow!==!0&&e.length>0?{fields:e[0].map((i,r)=>i&&i.trim?i.trim():`untitled${r}`),records:e.slice(1)}:{records:e}}function IJ(e){var t={delimiter:",",doublequote:!0,lineterminator:`
`,quotechar:'"',skipinitialspace:!0,skipinitialrows:0};for(var i in e)i==="trim"?t.skipinitialspace=e.trim:t[i.toLowerCase()]=e[i];return t}function fP(e,t){(!t||t&&!t.lineterminator)&&(e=AJ(e,t));var i=IJ(t);e=EJ(e,i.lineterminator);var r="",s=!1,u=!1,d="",l=[],m=[],g,x;for(x=function(w){return u!==!0&&(w===""?w=null:i.skipinitialspace===!0&&(w=w.trim())),w},g=0;g<e.length;g+=1)r=e.charAt(g),s===!1&&(r===i.delimiter||r===i.lineterminator)?(d=x(d),l.push(d),r===i.lineterminator&&(m.push(l),l=[]),d="",u=!1):r!==i.quotechar?d+=r:s?e.charAt(g+1)===i.quotechar?(d+=i.quotechar,g+=1):s=!1:(s=!0,u=!0);return d=x(d),l.push(d),m.push(l),i.skipinitialrows&&(m=m.slice(i.skipinitialrows)),m}function AJ(e,t){return t&&!t.lineterminator?e.replace(/(\r\n|\n|\r)/gm,`
`):e}function MJ(e,t){let i=hP(fP(e,t)),r=[];return i.records.forEach(s=>{let u={};i.fields.forEach((d,l)=>u[d]=s[l]),r.push(u)}),r}function Md(e){if(e)return e.replace(/[\s,]+/g,"")}function kJ(e){let t={key:null,worksheet:0};var i=/\bkey=([-_A-Za-z0-9]+)&?/i,r=/docs.google.com\/spreadsheets(.*?)\/d\//;if(e.match(i))t.key=e.match(i)[1];else if(e.match(r)){var s=e.search(r)+e.match(r)[0].length,u=e.substr(s);t.key=u.split("/")[0],e.match(/\?gid=(\d+)/)&&(t.worksheet=e.match(/\?gid=(\d+)/)[1])}else e.match(/^\b[-_A-Za-z0-9]+$/)&&(t.key=e);return t.key?t:null}function PJ(e){return typeof e!="string"?"":e.match(/^(https?:)?\/\/?/)?{url:e}:{color:e}}function DJ(e){let t={};Object.keys(e).forEach(r=>{t[r]=ia(e[r])});var i={media:{caption:t["Media Caption"]||"",credit:t["Media Credit"]||"",url:t.Media||"",thumbnail:t["Media Thumbnail"]||""},text:{headline:t.Headline||"",text:t.Text||""},display_date:t["Display Date"]||"",group:t.Group||t.Tag||"",background:PJ(t.Background),type:t.Type||""};if(Object.keys(t).includes("Start Date")||Object.keys(t).includes("End Date"))t["Start Date"]&&(i.start_date=x2(t["Start Date"])),t["End Date"]&&(i.end_date=x2(t["End Date"]));else{if(t.Year&&(i.start_date={year:Md(t.Year),month:Md(t.Month)||"",day:Md(t.Day)||""}),t["End Year"]&&(i.end_date={year:Md(t["End Year"])||"",month:Md(t["End Month"])||"",day:Md(t["End Day"])||""}),t.Time)if(i.start_date)Pi(i.start_date,E2(t.Time));else throw new mi("invalid_start_time_without_date");if(t["End Time"])if(i.end_date)Pi(i.end_date,E2(t["End Time"]));else throw new mi("invalid_end_time_without_date");if(i.start_date&&!C2(i.start_date))throw new mi("invalid_date_err");if(i.end_date&&!C2(i.end_date))throw new mi("invalid_date_err")}return i}async function LJ(e,t){let i=[];e=OJ(e),await CJ({url:`${t}${e}`}).then(s=>{i=s}).catch(s=>{throw s.proxy_err_code=="response_not_csv"?new mi("Timeline could not read the data for your timeline. Make sure you have published it to the web."):new mi(s.message)});let r={events:[],errors:[],warnings:[],eras:[]};return i.forEach((s,u)=>{try{if(!PY(s)){let d=DJ(s);$J(d,r)}}catch(d){if(d.constructor==mi)r.errors.push(d);else{d.message&&(d=d.message);let l=s.Headline||u;r.errors.push(d+`[${l}]`)}}}),r}function OJ(e){if(e=e.trim(),e.match(/^[a-zA-Z0-9-_]+$/))return`https://docs.google.com/spreadsheets/d/${e}/pub?output=csv`;if(e.startsWith("https://docs.google.com/spreadsheets/")){if(e.match(/\/pub\?output=csv$/))return e;let t=new URL(e),i=new URLSearchParams(t.search);i.set("output","csv"),i.get("gid")&&i.set("single","true"),t.search=`?${i.toString()}`;let r=t.pathname.substr(0,t.pathname.lastIndexOf("/"));return t.pathname=`${r}/pub`,t.toString()}throw new mi("invalid_url_err",e)}async function RJ(e,t){if(!t.sheets_proxy)throw new mi("Proxy option must be set to read data from Google");var i=await LJ(e,t.sheets_proxy);if(i)return i}async function FJ(e,t){let i=null,r={};if(typeof t=="function"?i=t:typeof t=="object"&&(r=t,i=t.callback,typeof r.callback=="function"&&(i=r.callback)),!i)throw new mi("Second argument to makeConfig must be either a function or an object which includes a 'callback' property with a 'function' type value");var s,u,d=kJ(e);if(d){try{u=await RJ(e,r)}catch(m){s=new su,m.name=="NetworkError"?s.logError(new mi("network_err")):m.name=="TLError"?s.logError(m):s.logError(new mi("unknown_read_err",m.name)),i(s);return}if(s=new su(u),u.errors)for(var l=0;l<u.errors.length;l++)s.logError(u.errors[l]);i(s)}else Ah({url:e,dataType:"json",success:function(m){try{s=new su(m)}catch(g){s=new su,s.logError(g)}i(s)},error:function(m,g,x){if(s=new su,g=="parsererror")var x=new mi("invalid_url_err");else var x=new mi("unknown_read_err",g);s.logError(x),i(s)}})}function $J(e,t){var i="event";typeof e.type<"u"&&(i=e.type,delete e.type),i=="title"?t.title?(t.warnings.push("Multiple title slides detected."),t.events.push(e)):t.title=e:i=="era"?t.eras.push(e):t.events.push(e)}class zJ{constructor(t){if(t)this.scale=t.scale,this.minor=t.minor,this.major=t.major;else throw new mi("axis_helper_no_options_err")}getPixelsPerTick(t){return t*this.minor.factor}getMajorTicks(t){return this._getTicks(t,this.major)}getMinorTicks(t){return this._getTicks(t,this.minor)}_getTicks(t,i){for(var r=t._scaled_padding*i.factor,s=t._earliest-r,u=t._latest+r,d=[],l=s;l<u;l+=i.factor)d.push(t.getDateFromTime(l).floor(i.name));return{name:i.name,ticks:d}}}var vx={},pP=function(e,t){vx[e]=[];for(var i=0;i<t.length-1;i++){var r=t[i],s=t[i+1];vx[e].push(new zJ({scale:r[3],minor:{name:r[0],factor:r[1]},major:{name:s[0],factor:s[1]}}))}};pP("human",yo);pP("cosmological",pv);function BJ(e,t){typeof t!="number"&&(t=100);var i=e.getScale(),r=vx[i];if(!r)throw new mi("axis_helper_scale_err",i);for(var s=null,u=0;u<r.length;u++){var d=r[u],l=d.getPixelsPerTick(e._pixels_per_milli);if(l>t){if(s==null)return d;var m=Math.abs(t-l),g=Math.abs(t-l);return m<g?d:s}s=d}return r[r.length-1]}const NJ={millisecond:"time_milliseconds",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"compact",epoch:"compact",era:"compact",eon:"compact",eon2:"compact"};class R2{constructor(t,i){var r=t.events;this._scale=t.scale,i=Pi({display_width:500,screen_multiplier:3,max_rows:null},i),this._display_width=i.display_width,this._screen_multiplier=i.screen_multiplier,this._pixel_width=this._screen_multiplier*this._display_width,this._group_labels=void 0,this._positions=[],this._pixels_per_milli=0,this._earliest=t.getEarliestDate().getTime(),this._latest=t.getLatestDate().getTime(),this._span_in_millis=this._latest-this._earliest,this._span_in_millis<=0&&(this._span_in_millis=this._computeDefaultSpan(t)),this._average=this._span_in_millis/r.length,this._pixels_per_milli=this.getPixelWidth()/this._span_in_millis,this._axis_helper=BJ(this),this._scaled_padding=1/this.getPixelsPerTick()*(this._display_width/2),this._computePositionInfo(r,i.max_rows)}_computeDefaultSpan(t){if(t.scale=="human"){for(var i={},r=0;r<t.events.length;r++){var s=t.events[r].start_date.findBestFormat();i[s]=i[s]?i[s]+1:1}for(var r=yo.length-1;r>=0;r--)if(i.hasOwnProperty(yo[r][0])){var u=yo[yo.length-1];return yo[r+1]&&(u=yo[r+1]),u[1]}return 365*24*60*60*1e3}return 2e5}getGroupLabels(){return this._group_labels||[]}getScale(){return this._scale}getNumberOfRows(){return this._number_of_rows}getPixelWidth(){return this._pixel_width}getPosition(t){return(t-this._earliest)*this._pixels_per_milli}getPositionInfo(t){return this._positions[t]}getPixelsPerTick(){return this._axis_helper.getPixelsPerTick(this._pixels_per_milli)}getTicks(){return{major:this._axis_helper.getMajorTicks(this),minor:this._axis_helper.getMinorTicks(this)}}getDateFromTime(t){if(this._scale=="human")return new X_(t);if(this._scale=="cosmological")return new Y_(new Gp(t));throw new mi("time_scale_scale_err",this._scale)}getMajorScale(){return this._axis_helper.major.name}getMinorScale(){return this._axis_helper.minor.name}_assessGroups(t){for(var i=[],r=!1,s=0;s<t.length;s++)t[s].group&&(i.indexOf(t[s].group)<0?i.push(t[s].group):r=!0);return i.length&&r&&i.push(""),i}_computeRowInfo(t,i){for(var r=[],s=0,u=0;u<t.length;u++){var d=t[u],l=[];delete d.row;for(var m=0;m<r.length;m++)if(l.push(r[m].end-d.start),l[m]<=0){d.row=m,r[m]=d;break}if(typeof d.row>"u")if(i===null)d.row=r.length,r.push(d);else if(i>0)d.row=r.length,r.push(d),i--;else{var g=Math.min.apply(null,l),x=l.indexOf(g);d.row=x,d.end>r[x].end&&(r[x]=d),s++}}return{n_rows:r.length,n_overlaps:s}}_computePositionInfo(t,i,r){r=r||100;for(var s=[],u=!1,d=0;d<t.length;d++){var l={start:this.getPosition(t[d].start_date.getTime())};if(this._positions.push(l),typeof t[d].end_date<"u"){var m=this.getPosition(t[d].end_date.getTime());l.width=m-l.start,l.width>r?l.end=l.start+l.width:l.end=l.start+r}else l.width=r,l.end=l.start+r;t[d].group?s.indexOf(t[d].group)<0&&s.push(t[d].group):u=!0}if(s.length){u&&s.push("");for(var x=[],d=0;d<s.length;d++)x[d]={label:s[d],idx:d,positions:[],n_rows:1,n_overlaps:0};for(var d=0;d<this._positions.length;d++){var l=this._positions[d];l.group=s.indexOf(t[d].group||""),l.row=0;for(var w=x[l.group],C=w.positions.length-1;C>=0;C--)w.positions[C].end>l.start&&w.n_overlaps++;w.positions.push(l)}for(var I=s.length;;){var M=Math.max(0,i-I);if(!M||(x.sort(function(U,ee){return U.n_overlaps>ee.n_overlaps?-1:U.n_overlaps<ee.n_overlaps?1:U.idx-ee.idx}),!x[0].n_overlaps))break;for(var I=0,d=0;d<x.length;d++){var w=x[d];if(w.n_overlaps&&M){var L=this._computeRowInfo(w.positions,w.n_rows+1);w.n_rows=L.n_rows,w.n_overlaps=L.n_overlaps,M--}I+=w.n_rows}}this._number_of_rows=I,this._group_labels=[],x.sort(function(F,U){return F.idx-U.idx});for(var d=0,$=0;d<x.length;d++){this._group_labels.push({label:x[d].label,rows:x[d].n_rows});for(var C=0;C<x[d].positions.length;C++){var l=x[d].positions[C];l.row+=$}$+=x[d].n_rows}}else{var g=this._computeRowInfo(this._positions,i);this._number_of_rows=g.n_rows}}getAxisTickDateFormat(t){return this._scale=="cosmological"?"compact":NJ[t]}}class mP{constructor(t){this._el={parent:{},container:{},message:{}},this.options={width:600,height:600},this.data={label:"",rows:1},this._el.container=hn("div","tl-timegroup"),Pi(this.data,t),this.animator={},this._initLayout(),this._initEvents()}updateDisplay(t,i){}setRowPosition(t,i){this.options.height=i*this.data.rows,this.setPosition({top:t}),this._el.container.style.height=this.options.height+"px"}setAlternateRowColor(t,i){var r="tl-timegroup";t&&(r+=" tl-timegroup-alternate"),i&&(r+=" tl-timegroup-hidden"),this._el.container.className=r}_onMouseClick(){this.fire("clicked",this.options)}_initLayout(){this._el.message=hn("div","tl-timegroup-message",this._el.container),this._el.message.innerHTML=this.data.label}_initEvents(){ti.addListener(this._el.container,"click",this._onMouseClick,this)}_updateDisplay(t,i,r){}}Ss(mP,Ts,ml);class gP{constructor(t,i,r,s){this.start_date=t,this.end_date=i,this.headline=r,this._el={container:{},background:{},content_container:{},content:{},text:{}},this._text={},this._state={loaded:!1},this.options={duration:1e3,ease:Z_,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,Pi(this.options,s),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(t){}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}updateDisplay(t,i){this._updateDisplay(t,i)}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.start_date.getTime()}getEndTime(){return this.end_date?this.end_date.getTime():!1}setHeight(t){var i=12,r=1;this._el.content_container.style.height=t+"px",this._el.content.className="tl-timeera-content",W_?(r=Math.floor(t/(i+2)),r<1&&(r=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=r):(r=t/i,r>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=r*i+"px")}setWidth(t){this.end_date&&(this._el.container.style.width=t+"px",t>this.options.marker_width_min?(this._el.content_container.style.width=t+"px",this._el.content_container.className="tl-timeera-content-container tl-timeera-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timeera-content-container"))}setClass(t){this._el.container.className=t}setRowPosition(t,i){this.setPosition({top:t}),i<56&&sP(this._el.content_container,"tl-timeera-content-container-small")}setColor(t){this._el.container.className="tl-timeera tl-timeera-color"+t}_initLayout(){this._el.container=hn("div","tl-timeera"),this.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timeera tl-timeera-with-end"),this._el.content_container=hn("div","tl-timeera-content-container",this._el.container),this._el.background=hn("div","tl-timeera-background",this._el.content_container),this._el.content=hn("div","tl-timeera-content",this._el.content_container),this._el.text=hn("div","tl-timeera-text",this._el.content),this._text=hn("h2","tl-headline",this._el.text),this.headline&&this.headline!=""&&(this._text.innerHTML=Xd(this.headline)),this.onLoaded()}_initEvents(){}_updateDisplay(t,i,r){t&&(this.options.width=t),i&&(this.options.height=i)}}Ss(gP,Ts,ml);function UJ(e){const t=e.getBoundingClientRect();return t.left>=0&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}class vP{constructor(t,i,r){r&&this.setLanguage(r),this._el={container:{},content_container:{},major:{},minor:{}},this._text={},this._state={loaded:!1},this.data={},this.options={duration:1e3,ease:Z_,width:600,height:600},this.active=!1,this.animator={},this.axis_helper={},this.minor_ticks=[],this.major_ticks=[],typeof t=="object"?this._el.container=t:this._el.container=_m(t),Pi(this.options,i),this._initLayout(),this._initEvents()}show(){}hide(){}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}updateDisplay(t,i){this._updateDisplay(t,i)}getLeft(){return this._el.container.style.left.slice(0,-2)}drawTicks(t,i){var r=t.getTicks();this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor",this._el.major.style.opacity=0,this._el.minor.style.opacity=0,this.major_ticks=this._createTickElements(r.major.ticks,this._el.major,t.getAxisTickDateFormat(r.major.name)),this.minor_ticks=this._createTickElements(r.minor.ticks,this._el.minor,t.getAxisTickDateFormat(r.minor.name),r.major.ticks),this.positionTicks(t,i,!0),this._el.major.className="tl-timeaxis-major tl-animate-opacity tl-timeaxis-animate-opacity",this._el.minor.className="tl-timeaxis-minor tl-animate-opacity tl-timeaxis-animate-opacity",this._el.major.style.opacity=1,this._el.minor.style.opacity=1}_createTickElements(t,i,r,s){i.innerHTML="";var u={},d=new Date(-1,13,-30);if(u[d.getTime()]=!0,s)for(var l=0;l<s.length;l++)u[s[l].getTime()]=!0;for(var m=[],l=0;l<t.length;l++){var g=t[l];if(!(g.getTime()in u)){var x=hn("div","tl-timeaxis-tick",i),w=hn("span","tl-timeaxis-tick-text tl-animate-opacity",x);let I=g.getDisplayDate(this.getLanguage(),r);w.innerHTML=I,m.push({tick:x,tick_text:w,display_date:I,date:g})}}return m}positionTicks(t,i,r){r?(this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor"):(this._el.major.className="tl-timeaxis-major tl-timeaxis-animate",this._el.minor.className="tl-timeaxis-minor tl-timeaxis-animate"),this._positionTickArray(this.major_ticks,t,i),this._positionTickArray(this.minor_ticks,t,i)}_positionTickArray(t,i,r){if(t[1]&&t[0]){var s=i.getPosition(t[1].date.getMillisecond())-i.getPosition(t[0].date.getMillisecond()),u=1;s<r&&(u=Math.round(r/i.getPixelsPerTick()));for(var d=1,l=0;l<t.length;l++){var m=t[l];m.tick.style.left=i.getPosition(m.date.getMillisecond())+"px",m.tick_text.innerHTML=m.display_date,u>1?d>=u?(d=1,m.tick_text.style.opacity=1,m.tick.className="tl-timeaxis-tick"):(d++,m.tick_text.style.opacity=0,m.tick.className="tl-timeaxis-tick tl-timeaxis-tick-hidden"):(m.tick_text.style.opacity=1,m.tick.className="tl-timeaxis-tick")}}}getVisibleTicks(){return{major:this._getVisibleTickArray(this.major_ticks),minor:this._getVisibleTickArray(this.minor_ticks)}}_getVisibleTickArray(t){return t.filter(({tick:i})=>UJ(i))}_initLayout(){this._el.content_container=hn("div","tl-timeaxis-content-container",this._el.container),this._el.major=hn("div","tl-timeaxis-major",this._el.content_container),this._el.minor=hn("div","tl-timeaxis-minor",this._el.content_container),this.onLoaded()}_initEvents(){}_updateDisplay(t,i,r){t&&(this.options.width=t),i&&(this.options.height=i)}}Ss(vP,Ts,ml,vl);class _P{constructor(t,i,r){this._el={container:{},content_container:{},content:{},headline_container:{},headline:{},date:{}},this.options={title:!1},this.data={unique_id:"",headline:"headline",text:"text"},RY(this,t),Pi(this.options,i),this._el.container=hn("div","tl-text"),this._el.container.id=this.data.unique_id,this._initLayout(),r&&r.appendChild(this._el.container)}show(){}hide(){}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}headlineHeight(){return this._el.headline.offsetHeight+40}addDateText(t){this._el.date.innerHTML=t}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){if(this._el.content_container=hn("div","tl-text-content-container",this._el.container),this._el.headline_container=hn("div","tl-text-headline-container",this._el.content_container),this.data.headline!=""){var t="tl-headline";this.options.title&&(t="tl-headline tl-headline-title"),this._el.headline=hn("h2",t,this._el.headline_container),this._el.headline.innerHTML=this.data.headline}if(this._el.date=hn("h3","tl-headline-date",this._el.headline_container),this.data.text!=""){var i="";i+=FY(this.options.autolink==!0?ux(this.data.text):this.data.text),this._el.content=hn("div","tl-text-content",this._el.content_container),this._el.content.innerHTML=i}this.onLoaded()}}Ss(_P,Ts);class qi{constructor(t,i,r){r&&this.setLanguage(r),this._el={container:{},content_container:{},content:{},content_item:{},content_link:{},caption:null,credit:null,parent:{},link:null},this.player=null,this.timer=null,this.load_timer=null,this.message=null,this.media_id=null,this._state={loaded:!1,show_meta:!1,media_loaded:!1},this.data={unique_id:null,url:null,credit:null,caption:null,credit_alternate:null,caption_alternate:null,link:null,link_target:null},this.options={api_key_flickr:"bd3a7c45ddd52f3101825d41563a6125",api_key_googlemaps:"AIzaSyB9dW8e_iRrATFa8g24qB6BDBGdkrLDZYI",api_key_embedly:"",credit_height:0,caption_height:0,background:0},this.animator={},Pi(this.options,i),Pi(this.data,t),this.options.background||(this._el.container=hn("div","tl-media"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._initLayout())}loadMedia(){var t=this;if(!this._state.loaded)try{this.load_timer=setTimeout(function(){t.loadingMessage(),t._loadMedia(),t._updateDisplay()},1200)}catch(i){gi("Error loading media for ",this._media),gi(i)}}_updateMessage(t){this.message&&this.message.updateMessage(t)}loadingMessage(){this._updateMessage(this._("loading")+" "+this.options.media_name)}errorMessage(t){t?t=this._("error")+": "+t:t=this._("error"),this._updateMessage(t)}updateMediaDisplay(t){this._state.loaded&&!this.options.background&&(Mu?this._el.content_item.style.maxHeight=this.options.height/2+"px":this._el.content_item.style.maxHeight=this.options.height-this.options.credit_height-this.options.caption_height-30+"px",this._el.container.style.maxWidth=this.options.width+"px",ph&&this._el.content_item.offsetWidth>this._el.content_item.offsetHeight,this._updateMediaDisplay(t),this._state.media_loaded&&(this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")))}_loadMedia(){this.onLoaded()}_updateMediaDisplay(t){ph&&(this._el.content_item.style.maxWidth=this.options.width+"px",this._el.content_item.style.width="auto")}_getMeta(){}_getImageURL(t,i){return""}show(){}hide(){}addTo(t){t.appendChild(this._el.container),this.onAdd()}removeFrom(t){t.removeChild(this._el.container),this.onRemove()}getImageURL(t,i){return this._getImageURL(t,i)}updateDisplay(t,i,r){this._updateDisplay(t,i,r)}stopMedia(){try{this._stopMedia()}catch(t){gi(`stopMedia() exception: ${t}`)}}loadErrorDisplay(t){try{this._el.content.removeChild(this._el.content_item)}catch{}this._el.content_item=hn("div","tl-media-item tl-media-loaderror",this._el.content),this._el.content_item.innerHTML="<div class='tl-icon-"+this.options.media_type+"'></div><p>"+t+"</p>",this.onLoaded(!0)}onLoaded(t){this._state.loaded=!0,this.fire("loaded",this.data),this.message&&this.message.hide(),t||this.options.background||this.showMeta(),this.updateDisplay()}onMediaLoaded(t){this._state.media_loaded=!0,this.fire("media_loaded",this.data),this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")}showMeta(t,i){this._state.show_meta=!0,this.data.credit&&this.data.credit!=""&&(this._el.credit=hn("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.options.autolink==!0?ux(this.data.credit):this.data.credit,this.options.credit_height=this._el.credit.offsetHeight),this.data.caption&&this.data.caption!=""&&(this._el.caption=hn("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.options.autolink==!0?ux(this.data.caption):this.data.caption,this.options.caption_height=this._el.caption.offsetHeight),(!this.data.caption||!this.data.credit)&&this.getMeta()}getMeta(){this._getMeta()}updateMeta(){!this.data.credit&&this.data.credit_alternate&&(this._el.credit=hn("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.data.credit_alternate,this.options.credit_height=this._el.credit.offsetHeight),!this.data.caption&&this.data.caption_alternate&&(this._el.caption=hn("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.data.caption_alternate,this.options.caption_height=this._el.caption.offsetHeight),this.updateDisplay()}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){this.message=new J_(this._el.container,this.options,this.getLanguage()),this._el.content_container=hn("div","tl-media-content-container",this._el.container),this.data.link&&this.data.link!=""?(this._el.link=hn("a","tl-media-link",this._el.content_container),this._el.link.href=this.data.link,this.data.link_target&&this.data.link_target!=""?this._el.link.target=this.data.link_target:this._el.link.target="_blank",this._el.link.target=="_blank"&&this._el.link.setAttribute("rel","noopener"),this._el.content=hn("div","tl-media-content",this._el.link)):this._el.content=hn("div","tl-media-content",this._el.content_container)}_updateDisplay(t,i,r){t&&(this.options.width=t),i&&(this.options.height=i),r&&(this.options.layout=r),this._el.credit&&(this.options.credit_height=this._el.credit.offsetHeight),this._el.caption&&(this.options.caption_height=this._el.caption.offsetHeight+5),this.updateMediaDisplay(this.options.layout)}domCreate(...t){return hn(...t)}_stopMedia(){}}Ss(qi,Ts,vl);let F2=class extends qi{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var t=this,i="tl-media-item tl-media-image tl-media-shadow";(this.data.url.match(/.png(\?.*)?$/)||this.data.url.match(/.svg(\?.*)?$/))&&(i="tl-media-item tl-media-image"),this._el.content_item=this.domCreate("img",i,this._el.content),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=mh(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=mh(this.data.caption)),this._el.content_item.addEventListener("load",function(r){t.onMediaLoaded()}),this._el.content_item.src=this.getImageURL()}getImageURL(t,i){return q_(this.data.url)}_updateMediaDisplay(t){ph&&(this._el.content_item.style.width="auto")}};class jJ{constructor(t){this.doc=t,this.pending={},this.queue={css:[],js:[]},this.styleSheets=t.styleSheets,this.env=this.getEnv(),this.head=this.doc.head||this.doc.getElementsByTagName("head")[0],this.pollCount=0}createNode(t,i){var r=this.doc.createElement(t),s;for(s in i)i.hasOwnProperty(s)&&r.setAttribute(s,i[s]);return r}finish(t){var i=this.pending[t],r,s;i&&(r=i.callback,s=i.urls,s.shift(),this.pollCount=0,s.length||(r&&r.call(i.context,i.obj),this.pending[t]=null,this.queue[t].length&&this.load(t)))}getEnv(){var t=navigator.userAgent,i={async:this.doc.createElement("script").async===!0};return(i.webkit=/AppleWebKit\//.test(t))||(i.ie=/MSIE/.test(t))||(i.opera=/Opera/.test(t))||(i.gecko=/Gecko\//.test(t))||(i.unknown=!0),i}load(t,i,r,s,u){var d=function(){this.finish(t)}.bind(this),l=t==="css",m=[],g,x,w,C,I,M;if(i)if(i=typeof i=="string"?[i]:i.concat(),l||this.env.async||this.env.gecko||this.env.opera)this.queue[t].push({urls:i,callback:r,obj:s,context:u});else for(g=0,x=i.length;g<x;++g)this.queue[t].push({urls:[i[g]],callback:g===x-1?r:null,obj:s,context:u});if(!(this.pending[t]||!(C=this.pending[t]=this.queue[t].shift()))){for(I=C.urls,g=0,x=I.length;g<x;++g)M=I[g],l?w=this.env.gecko?this.createNode("style"):this.createNode("link",{href:M,rel:"stylesheet"}):(w=this.createNode("script",{src:M}),w.async=!1),w.className="lazyload",w.setAttribute("charset","utf-8"),this.env.ie&&!l?w.onreadystatechange=function(){/loaded|complete/.test(w.readyState)&&(w.onreadystatechange=null,d())}:l&&(this.env.gecko||this.env.webkit)?this.env.webkit?(C.urls[g]=w.href,this.pollWebKit()):(w.innerHTML='@import "'+M+'";',this.pollGecko(w)):w.onload=w.onerror=d,m.push(w);for(g=0,x=m.length;g<x;++g)this.head.appendChild(m[g])}}pollGecko(t){var i;try{i=!!t.sheet.cssRules}catch{if(this.pollCount+=1,this.pollCount<200){var r=this;setTimeout(function(){r.pollGecko(t)},50)}else i&&this.finish("css");return}this.finish("css")}pollWebKit(){var t=this.pending.css,i;if(t){for(i=this.styleSheets.length;--i>=0;)if(this.styleSheets[i].href===t.urls[0]){this.finish("css");break}this.pollCount+=1,t&&(this.pollCount<200?setTimeout(this.pollWebKit.bind(this),50):this.finish("css"))}}css(t,i,r,s){this.load("css",t,i,r,s)}js(t,i,r,s){this.load("js",t,i,r,s)}}function Mh(e,t,i,r){yP.js(e,t,i,r)}function X0(e,t,i,r){yP.css(e,t,i,r)}let yP=new jJ(document);class VJ extends qi{_loadMedia(){var t=this,i;this.youtube_loaded=!1,this._el.content_item=this.domCreate("div","tl-media-item tl-media-youtube tl-media-shadow",this._el.content),this._el.content_item.id=_u(7),i=$Y(this.data.url),this.media_id={},this.data.url.match("v=")?this.media_id.id=i.v:this.data.url.match("/embed/")?this.media_id.id=this.data.url.split("embed/")[1].split(/[?&]/)[0]:this.data.url.match(/v\/|v=|youtu\.be\//)?this.media_id.id=this.data.url.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0]:gi("YOUTUBE IN URL BUT NOT A VALID VIDEO"),this.data.url.match("start=")?this.media_id.start=V0(this.data.url.split("start=")[1]):this.data.url.match("t=")&&(this.media_id.start=V0(this.data.url.split("t=")[1])),this.data.url.match("end=")&&(this.media_id.end=V0(this.data.url.split("end=")[1])),this.media_id.hd=typeof i.hd<"u",Mh("https://www.youtube.com/iframe_api",function(){t.createMedia()})}_updateMediaDisplay(){this._el.content_item.style.height=ku.r16_9({w:this.options.width})+"px",this._el.content_item.style.width=this.options.width+"px"}_stopMedia(){if(this.youtube_loaded)try{this.player.getPlayerState()==YT.PlayerState.PLAYING&&this.player.pauseVideo()}catch(t){gi(t)}}createMedia(){var t=this;clearTimeout(this.timer),typeof YT<"u"&&typeof YT.Player<"u"?this.player=new YT.Player(this._el.content_item.id,{playerVars:{enablejsapi:1,color:"white",controls:1,start:this.media_id.start,end:this.media_id.end,fs:1},videoId:this.media_id.id,events:{onReady:function(){t.onPlayerReady(),t.onLoaded()},onStateChange:t.onStateChange}}):this.timer=setTimeout(function(){t.createMedia()},1e3)}onPlayerReady(t){this.youtube_loaded=!0,this._el.content_item=document.getElementById(this._el.content_item.id),this.onMediaLoaded()}onStateChange(t){t.data==YT.PlayerState.ENDED&&(t.target.seekTo(0),t.target.pauseVideo())}}class HJ extends qi{_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-map tl-media-shadow",this._el.content),this.media_id=this.data.url,this.mapframe=this.domCreate("iframe","",this._el.content_item),this.mapframe.width="100%",this.mapframe.height="100%",this.mapframe.frameBorder="0",this.mapframe.src=this.makeGoogleMapsEmbedURL(this.media_id,this.options.api_key_googlemaps),this.onLoaded()}_updateMediaDisplay(){if(this._state.loaded){var t=ku.square({w:this._el.content_item.offsetWidth});this._el.content_item.style.height=t.h+"px"}}makeGoogleMapsEmbedURL(t,i){var r=!1;function s(w){function C(L,$){if(L.slice(-1)=="z")$.zoom=L;else if(L.slice(-1)=="m")$.zoom=14,$.maptype="satellite";else if(L.slice(-1)=="t"){if(r=!0,M=="place")var F=w.match(x.place)[3]+","+w.match(x.place)[4];else{var F=$.center;delete $.center}$={},$.location=F,streetview_params=L.split(",");for(let ee in u.streetview){var U=parseInt(ee)+1;u.streetview[ee]=="pitch"&&streetview_params[U]=="90t"?$[u.streetview[ee]]=0:$[u.streetview[ee]]=streetview_params[U].slice(0,-1)}}return $}function I(L,$){var F={},U=$[1],ee=$[$.length-1];for(let Q in u[L]){var V=parseInt(Q)+2;u[L][Q]=="center"?F[u[L][Q]]=$[V]+","+$[++V]:F[u[L][Q]]=$[V]}return F=C(ee,F),F.key=i,r==!0&&(L="streetview"),U+"/embed/v1/"+L+zY(F)}let M="view";return w.match(x.place)?M="place":w.match(x.directions)?M="directions":w.match(x.search)&&(M="search"),I(M,w.match(x[M]))}var u={view:["center"],place:["q","center"],directions:["origin","destination","center"],search:["q","center"],streetview:["fov","heading","pitch"]},d=/(https:\/\/.+google.+?\/maps)/,l=/@([-\d.]+),([-\d.]+)/,m=/([\w\W]+)/,g=/,((?:[-\d.]+[zmayht],?)*)/,x={view:new RegExp(d.source+"/"+l.source+g.source),place:new RegExp(d.source+"/place/"+m.source+"/"+l.source+g.source),directions:new RegExp(d.source+"/dir/"+m.source+"/"+m.source+"/"+l.source+g.source),search:new RegExp(d.source+"/search/"+m.source+"/"+l.source+g.source)};return s(t)}}class GJ extends qi{constructor(t,i,r){super(t,i,r),this.blockquote=Q_.sanitize(this.data.url)}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-blockquote",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this._el.content_item.innerHTML=this.blockquote,this.onLoaded()}updateMediaDisplay(){}}class WJ extends qi{_loadMedia(){var t,i,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-wikipedia",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.media_id=this.data.url.split("wiki/")[1].split("#")[0].replace("_"," "),this.media_id=this.media_id.replace(" ","%20"),i=this.data.url.split("//")[1].split(".wikipedia")[0],t="https://"+i+".wikipedia.org/w/api.php?action=query&prop=extracts|pageimages&redirects=&titles="+this.media_id+"&exintro=1&format=json&callback=?",Ah({type:"GET",url:t,dataType:"json",success:function(s){r.createMedia(s)},error:function(s,u){var d="";d+=r._("wikipedia_load_err")+"<br/>"+r.media_id+"<br/>"+u,r.loadErrorDisplay(d)}})}createMedia(t){var i="";if(t.query){var r="",i={entry:{},title:"",text:"",extract:"",paragraphs:1,page_image:"",text_array:[]};i.entry=BY(t.query.pages,0),i.extract=i.entry.extract,i.title=i.entry.title,i.page_image=i.entry.thumbnail,i.extract.match("<p>")?i.text_array=i.extract.split("<p>"):i.text_array.push(i.extract);for(var s=0;s<i.text_array.length;s++)s+1<=i.paragraphs&&s+1<i.text_array.length&&(i.text+="<p>"+i.text_array[s+1]);r+="<span class='tl-icon-wikipedia'></span>",r+="<div class='tl-wikipedia-title'><h4><a href='"+this.data.url+"' target='_blank' rel='noopener'>"+i.title+"</a></h4>",r+="<span class='tl-wikipedia-source'>"+this._("wikipedia")+"</span></div>",i.page_image,r+=i.text,i.extract.match("REDIRECT")||(this._el.content_item.innerHTML=r,this.onLoaded())}}updateMediaDisplay(){}}function qJ(e){if(e.match(/^.+#\/media\/.+/))return`File:${e.split("#")[1].split(":")[1]}`;if(e.match(/^.*commons.wikimedia.org\/wiki\/File:.+/)){let t=e.split("/");return t[t.length-1]}return null}function ZJ(e){let t={};if(e.query&&e.query.pages){let i=Object.keys(e.query.pages);t.page_id=i[0];let r=e.query.pages[t.page_id];t.url=r.imageinfo[0].thumburl,r.entityterms&&r.entityterms.label&&(t.label=r.entityterms.label[0])}return t}class $2 extends qi{_loadMedia(){var t,i=this.options.width||1e3,r=this.getLanguage().lang.toLowerCase(),s=this;try{this.establishMediaID(),t=`https://commons.wikimedia.org/w/api.php?action=query&titles=${this.media_id}&prop=imageinfo|entityterms&iiprop=url&&iiurlwidth=${i}&format=json&origin=*&wbetlanguage=${r}`,Kv(t,function(u){let d=ZJ(u);d.url?(s.base_image_url=d.url,s.page_id=d.page_id,!s.data.alt&&d.label&&(s.data.alt=d.label),s.options.background||s.createMedia(),s.onLoaded()):s.loadErrorDisplay(s._("wikipedia_image_load_err"))})}catch(u){s.loadErrorDisplay(s._(u.message_key))}}establishMediaID(){let t=qJ(this.data.url);if(t)this.media_id=t;else throw new mi("Invalid Wikipedia Image URL")}createMedia(){var t=this;if(this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-wikipedia-image tl-media-shadow",this._el.content),this.data.alt)this._el.content_item.alt=this.data.alt;else if(this.page_id){let i=`M${this.page_id}`,r=`https://commons.wikimedia.org/w/api.php?action=wbgetentities&format=json&ids=${i}&format=json&origin=*`;K_(r).then(s=>{if(s.entities&&s.entities[i]){let u=s.entities[i].labels,d=t.getLanguage().lang.toLowerCase(),l=null;u[d]?l=u[d]:d.length>2&&u[d.substr(0,2)]?l=u[d.substr(0,2)]:u.en&&(l=u.en),l?(console.log(`wikibase_id: ${t.media_id} alt ${l.value}`),t.data.alt=l.value,t._el.content_item.alt=t.data.alt):console.log(`wikibase_id: ${t.media_id} ain't got no alt`)}})}this.data.title&&(this._el.content_item.title=this.data.title),this._el.content_item.addEventListener("load",function(i){t.onMediaLoaded()}),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}_getImageURL(t,i){if(t&&this.base_image_url){let r=this.base_image_url.match(/(\/\d+px-)/);if(r)return this.base_image_url.replace(r[1],`/${t}px-`)}return this.base_image_url}}class KJ extends qi{_loadMedia(){var t,i=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-soundcloud tl-media-shadow",this._el.content),this.media_id=this.data.url,t="https://soundcloud.com/oembed?url="+this.media_id+"&format=js&callback=?",Kv(t,function(r){Mh("https://w.soundcloud.com/player/api.js",function(){i.createMedia(r)})})}createMedia(t){this._el.content_item.innerHTML=t.html,self.widget=SC.Widget(this._el.content_item.querySelector("iframe")),this.soundCloudCreated=!0,this.onLoaded()}_stopMedia(){this.soundCloudCreated&&self.widget.pause()}}class XJ extends qi{_loadMedia(){var t,i=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vimeo tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/video\/|\/\/vimeo\.com\//)[1].split(/[?&]/)[0];var r=null;this.data.url.match(/#t=([^&]+).*/)&&(r=this.data.url.match(/#t=([^&]+).*/)[1]),t="https://player.vimeo.com/video/"+this.media_id+"?api=1&title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff",r&&(t=t+="&amp;#t="+r),this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(s){i.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=t,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=ku.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player&&this.player.contentWindow&&this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(t){gi(t)}}}class YJ extends qi{_loadMedia(){var t;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-dailymotion",this._el.content),this.data.url.indexOf("dai.ly/")!=-1?this.media_id=this.data.url.substr(this.data.url.indexOf("dai.ly/")+7):this.data.url.match("video")?this.media_id=this.data.url.split("video/")[1].split(/[?&]/)[0]:this.media_id=this.data.url.split("embed/")[1].split(/[?&]/)[0],this.media_id.indexOf("_")!=-1&&(this.media_id=this.media_id.split("_")[0]),t="https://www.dailymotion.com/embed/video/"+this.media_id+"?api=postMessage",this._el.content_item.innerHTML="<iframe autostart='false' frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._state.loaded&&(this._el.content_item.style.height=ku.r16_9({w:this._el.content_item.offsetWidth})+"px")}_stopMedia(){this._state.loaded&&this._el.content_item.querySelector("iframe").contentWindow.postMessage('{"command":"pause","parameters":[]}',"*")}}class JJ extends qi{_loadMedia(){var t;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vine tl-media-shadow",this._el.content),this.media_id=this.data.url.split("vine.co/v/")[1],t="https://vine.co/v/"+this.media_id+"/embed/simple",this._el.content_item.innerHTML="<iframe frameborder='0' width='100%' height='100%' src='"+t+"'></iframe><script async src='https://platform.vine.co/static/scripts/embed.js' charset='utf-8'><\/script>",this.onLoaded()}_updateMediaDisplay(){var t=ku.square({w:this._el.content_item.offsetWidth,h:this.options.height});this._el.content_item.style.height=t.h+"px"}_stopMedia(){this._el.content_item.querySelector("iframe").contentWindow.postMessage("pause","*")}}class QJ extends qi{_loadMedia(){var t,i=this;if(this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.data.url.match("^(https?:)?/*(www.)?twitter.com"))this.data.url.match("status/")?this.media_id=this.data.url.split("status/")[1]:this.data.url.match("statuses/")?this.media_id=this.data.url.split("statuses/")[1]:this.media_id="";else if(this.data.url.match(`<blockquote class=['"]twitter-tweet['"]`)){var r=this.data.url.match(/(status|statuses)\/(\d+)/);if(r&&r.length>2)this.media_id=r[2];else{i.loadErrorDisplay(i._("twitterembed_invalidurl_err"));return}}t="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",Ah({type:"GET",url:t,dataType:"json",success:function(s){i.createMedia(s)},error:function(s,u){var d="";d+=i._("twitter_load_err")+"<br/>"+i.media_id+"<br/>"+u,i.loadErrorDisplay(d)}})}createMedia(t){var i="",r="",s="",u="",d="",l="",m=this;r=t.html.split("</p>&mdash;")[0]+"</p></blockquote>",s=t.author_url.split("twitter.com/")[1],u=t.html.split("</p>&mdash;")[1].split('<a href="')[1],d=u.split('">')[0],l=u.split('">')[1].split("</a>")[0],r=r.replace(/<a href/ig,'<a target="_blank" rel="noopener" href'),r.includes("pic.twitter.com")?(Mh("https://platform.twitter.com/widgets.js",function(){twttr.widgets.createTweet(m.media_id,m._el.content_item,{conversation:"none",linkColor:"#cc0000",theme:"light"})}),this.onLoaded()):(i+=r,i+="<div class='vcard'>",i+="<a href='"+d+"' class='twitter-date' rel='noopener' target='_blank'>"+l+"</a>",i+="<img src='' class='tl-media-item tl-media-image'></a>",i+="<div class='author'>",i+="<a class='screen-name url' href='"+t.author_url+"' rel='noopener' target='_blank'>",i+="<span class='avatar'></span>",i+="<span class='fn'>"+t.author_name+" <span class='tl-icon-twitter'></span></span>",i+="<span class='nickname'>@"+s+"<span class='thumbnail-inline'></span></span>",i+="</a>",i+="</div>",i+="</div>",this._el.content_item.innerHTML=i,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class eQ extends qi{_loadMedia(){var t,i=this;this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text";var r=this.data.url.match(/(status|statuses)\/(\d+)/);if(r&&r.length>2)this.media_id=r[2];else{i.loadErrorDisplay(i._("twitterembed_invalidurl_err"));return}t="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",window.twttr=function(s,u,d){var l,m=s.getElementsByTagName(u)[0],g=window.twttr||{};return s.getElementById(d)||(l=s.createElement(u),l.id=d,l.src="https://platform.twitter.com/widgets.js",m.parentNode.insertBefore(l,m),g._e=[],g.ready=function(x){g._e.push(x)}),g}(document,"script","twitter-wjs"),Ah({type:"GET",url:t,dataType:"json",success(s){i.createMedia(s)},error:function(s,u){var d="";d+=i._("twitter_load_err")+"<br/>"+i.media_id+"<br/>"+u,i.loadErrorDisplay(d)}})}createMedia(t){var i="",r="",s="",u="",d="",l="";r=t.html.split("</p>&mdash;")[0]+"</p></blockquote>",s=t.author_url.split("twitter.com/")[1],u=t.html.split("</p>&mdash;")[1].split('<a href="')[1],d=u.split('">')[0],l=u.split('">')[1].split("</a>")[0],r=r.replace(/<a href/ig,'<a target="_blank" rel="noopener" href');let m=this.media_id;r.includes("pic.twitter.com")?(twttr.ready(function(g){i=document.getElementsByClassName("tl-media-twitter")[0];var x=String(m);twttr.widgets.createTweet(x,i,{conversation:"none",linkColor:"#cc0000",theme:"light"}).then(function(w){this.onLoaded()})}),this._el.content_item.innerHTML=i,this.onLoaded()):(i+=r,i+="<div class='vcard'>",i+="<a href='"+d+"' class='twitter-date' rel='noopener' target='_blank'>"+l+"</a>",i+="<div class='author'>",i+="<a class='screen-name url' href='"+t.author_url+"' rel='noopener' target='_blank'>",i+="<span class='avatar'></span>",i+="<span class='fn'>"+t.author_name+" <span class='tl-icon-twitter'></span></span>",i+="<span class='nickname'>@"+s+"<span class='thumbnail-inline'></span></span>",i+="</a>",i+="</div>",i+="</div>",this._el.content_item.innerHTML=i,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class z2 extends qi{_loadMedia(){var t,i=this;try{this.establishMediaID(),t="https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",Kv(t,function(r){r.stat=="ok"?(i.sizes=r.sizes.size,i.options.background||i.createMedia(),i.onLoaded()):i.loadErrorDisplay(i._("flickr_notfound_err"))})}catch(r){i.loadErrorDisplay(i._(r.message_key))}}establishMediaID(){if(this.data.url.match(/flic.kr\/.+/i)){var t=this.data.url.split("/").slice(-1)[0];this.media_id=NY.decode(t)}else{var i="flickr.com/photos/",r=this.data.url.indexOf(i);if(r==-1)throw new mi("flickr_invalidurl_err");var s=r+i.length;this.media_id=this.data.url.substr(s).split("/")[1]}}createMedia(){var t=this;this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-flickr tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=mh(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=mh(this.data.caption)),this._el.content_item.addEventListener("load",function(i){t.onMediaLoaded()}),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}getImageURL(t,i){for(var r=this.size_label(i),s=this.sizes[this.sizes.length-2].source,u=0;u<this.sizes.length;u++)this.sizes[u].label==r&&(s=this.sizes[u].source);return s}_getMeta(){var t=this,i;i="https://api.flickr.com/services/rest/?method=flickr.photos.getInfo&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",Kv(i,function(r){t.data.credit_alternate="<a href='"+t.data.url+"' target='_blank' rel='noopener'>"+r.photo.owner.realname+"</a>",t.data.caption_alternate=r.photo.title._content+" "+r.photo.description._content,t.updateMeta()})}size_label(t){var i="";return t<=75?t<=0?i="Large":i="Thumbnail":t<=180?i="Small":t<=240?i="Small 320":t<=375?i="Medium":t<=480?i="Medium 640":(t<=600,i="Large"),i}}class tQ extends qi{_loadMedia(){var t=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-documentcloud tl-media-shadow",this._el.content),this._el.content_item.id=_u(7),this.data.url.match(/\.html$/)?this.data.url=this._transformURL(this.data.url):this.data.url.match(/.(json|js)$/)||gi("DOCUMENT CLOUD IN URL BUT INVALID SUFFIX"),Mh(["https://assets.documentcloud.org/viewer/loader.js","https://assets.documentcloud.org/viewer/viewer.js"],function(){t.createMedia()})}_transformURL(t){return t.replace(/(.*)\.html$/,"$1.js")}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}createMedia(){DV.load(this.data.url,{container:"#"+this._el.content_item.id,showSidebar:!1}),this.onLoaded()}}const nQ="830b21071290df4f81a35c56abbea096",iQ="704270473831239",rQ=`${iQ}|${nQ}`,B2=`https://graph.facebook.com/v8.0/instagram_oembed?access_token=${rQ}&fields=html,thumbnail_url,author_name&url=`;function sQ(e){this.oembed_response=e,this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-instagram tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=mh(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=mh(this.data.caption)),this._el.content_item.addEventListener("load",function(t){this.onMediaLoaded()}.bind(this)),this._el.content_item.src=e.thumbnail_url,this.onLoaded()}function aQ(e){let t=`${e.statusText} [${e.status}]`;e.status==400&&(t=this._("instagram_bad_request")),this.loadErrorDisplay(t)}class oQ extends qi{_loadMedia(){this.media_id=this.data.url.split("/p/")[1].split("/")[0],this.options.background||this.createMedia()}createMedia(){this.oembed_response=null;let t=`${B2}${this.data.url}`;try{Ah({url:t,dataType:"json",success:sQ,error:aQ,context:this})}catch(i){console.log(`Instagram: error fetching ${t}`),console.log(i);debugger}}getImageURL(){if(this.oembed_response&&this.oembed_response.thumbnail_url)return this.oembed_response.thumbnail_url;K_(`${B2}${this.data.url}`).then(t=>t.thumbnail_url).catch(t=>{gi(`Instagram getImageURL Error: ${t.status} ${t.statusText}`)})}_getMeta(){this.oembed_response&&this.oembed_response.author_name&&(this.data.credit_alternate=`Instagram: <a href="https://instagram.com/${this.oembed_response.author_name}" target="_blank">@${this.oembed_response.author_name}</a>`),this.updateMeta()}sizes(t){var i="";return t<=150?i="t":t<=306?i="m":i="l",i}}class lQ extends qi{_loadMedia(){this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-profile tl-media-shadow",this._el.content),this._el.content_item.src=this.data.url,this.onLoaded()}_updateMediaDisplay(t){ph&&(this._el.content_item.style.maxWidth=this.options.width/2-40+"px")}}class cQ extends qi{_loadMedia(){var t;if(this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this.data.url.match(/open\?id=([^&]+)/)){var i=this.data.url.match(/open\?id=([^&]+)/)[1];t="https://drive.google.com/file/d/"+i+"/preview"}else if(this.data.url.match(/file\/d\/([^/]*)\/?/)){var i=this.data.url.match(/file\/d\/([^/]*)\/?/)[1];t="https://drive.google.com/file/d/"+i+"/preview"}else t=this.data.url;this._el.content_item.innerHTML="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}function uQ(e){return e.match(/^spotify:/)?e:(e=new URL(e),`spotify${e.pathname.replace(/\/$/,"").replace(/\//g,":")}`)}class dQ extends qi{_loadMedia(){var t;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-spotify",this._el.content),this.media_id=uQ(this.data.url),this.media_id?(t="https://embed.spotify.com/?uri="+this.media_id+"&theme=white&view=coverart",this.player=this.domCreate("iframe","tl-media-shadow",this._el.content_item),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=t,this.onLoaded()):this.loadErrorDisplay(this._("spotify_invalid_url"))}_updateMediaDisplay(t){var i=this.options.height,r=0,s=0;Mu?i=this.options.height/2:i=this.options.height-this.options.credit_height-this.options.caption_height-30,this._el.content_item.style.maxHeight="none",gi(i),gi(this.options.width),i>this.options.width?(gi("height is greater"),r=this.options.width+80+"px",s=this.options.width+"px"):(gi("width is greater"),gi(this.options.width),r=i+"px",s=i-80+"px"),this.player.style.width=s,this.player.style.height=r,this._el.credit&&(this._el.credit.style.width=s),this._el.caption&&(this._el.caption.style.width=s)}_stopMedia(){}}class hQ extends qi{constructor(t,i,r){super(t,i,r),this.iframe=Q_.sanitize(this.data.url,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder"]})}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this._el.content_item.innerHTML=this.iframe,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class fQ extends qi{_loadMedia(){try{var t=this;if(this.data.url.match(`<blockquote class=['"]imgur-embed-pub['"]`)){var i=this.data.url.match(/(imgur\.com)\/(\w+)/);this.media_id=i[2],this.data.url="http://imgur.com/gallery/"+this.media_id}else this.data.url&&(this.media_id=this.data.url.split("/").slice(-1)[0]);Mh(["https://s.imgur.com/min/embed.js"],function(){t.createMedia()})}catch{this.loadErrorDisplay(this._("imgur_invalidurl_err"))}}createMedia(){var t=this,i="https://api.imgur.com/oembed.json?url="+this.data.url;this._el.content_item=this.domCreate("div","tl-media-item tl-media-image tl-media-imgur",this._el.content),Ah({type:"GET",url:i,dataType:"json",success:function(r){try{t._el.content_item.innerHTML=r.html,setInterval(function(){document.querySelector("blockquote.imgur-embed-pub")==null?clearInterval():(imgurEmbed.createIframe(),document.getElementById("imageElement").removeAttribute("style"),document.getElementById("image").removeAttribute("style"))},2e3)}catch{gi("Error processing imgur ajax response")}},error:function(r,s,u){s=="parsererror"?t.loadErrorDisplay(t._("imgur_invalidurl_err")):t.loadErrorDisplay(t._("unknown_read_err",s))}}),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.width=this.options.width+"px",this._el.content_item.style.height=ku.r16_9({w:this.options.width})+"px"}}class pQ extends qi{_loadMedia(){var t=q_(this.data.url);this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content);var i="";vm||EY||t.match(/dl.dropboxusercontent.com/)?i="<iframe class='doc' frameborder='0' width='100%' height='100%' src='//docs.google.com/viewer?url="+t+"&amp;embedded=true'></iframe>":i="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this._el.content_item.innerHTML=i,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class mQ extends qi{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var t=q_(this.data.url),i=this,i=this,r="tl-media-item tl-media-audio tl-media-shadow";this._el.content_item=this.domCreate("audio",r,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){i.onMediaLoaded()}),this._el.source_item.src=t,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 audio with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(t){ph&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(t,i){var r=t.match(i),s="audio/";switch(r[1]){case"mp3":s+="mpeg";break;case"wav":s+="wav";break;case"m4a":s+="mp4";break;default:s="audio";break}return s}}class gQ extends qi{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var t=q_(this.data.url),i=this,i=this,r="tl-media-item tl-media-video tl-media-shadow";this._el.content_item=this.domCreate("video",r,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){i.onMediaLoaded()}),this._el.source_item.src=t,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 video with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(t){ph&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(t,i){var r=t.match(i),s="video/";switch(r[1]){case"mp4":s+="mp4";break;case"webm":s+="webm";break;default:s="video";break}return s}}class vQ extends qi{_loadMedia(){var t,i=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-wistia tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/https?:\/\/(.+)?(wistia\.com|wi\.st)\/medias\/(.*)/)[3],gi(`Wistia: media_id: ${this.media_id}`),t="https://fast.wistia.com/embed/iframe/"+this.media_id+"?version=v1&controlsVisibleOnLoad=true&playerColor=aae3d8",this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(r){i.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=t,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=ku.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(t){gi(t)}}}function Yv(e,t){var i={},r=[{type:"youtube",name:"YouTube",match_str:"^(https?:)?/*(www.|m.)?youtube|youtu.be",cls:VJ},{type:"vimeo",name:"Vimeo",match_str:"^(https?:)?/*(player.)?vimeo.com",cls:XJ},{type:"dailymotion",name:"DailyMotion",match_str:"^(https?:)?/*(www.)?(dailymotion.com|dai.ly)",cls:YJ},{type:"vine",name:"Vine",match_str:"^(https?:)?/*(www.)?vine.co",cls:JJ},{type:"soundcloud",name:"SoundCloud",match_str:"^(https?:)?/*(player.)?soundcloud.com",cls:KJ},{type:"twitter",name:"Twitter",match_str:"^(https?:)?/*(www.)?twitter.com",cls:QJ},{type:"twitterembed",name:"TwitterEmbed",match_str:`<blockquote class=['"]twitter-tweet['"]`,cls:eQ},{type:"googlemaps",name:"Google Map",match_str:/google.+?\/maps\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/search\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/place\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/dir\/([\w\W]+)\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)/,cls:HJ},{type:"flickr",name:"Flickr",match_str:"^(https?:)?/*(www.)?flickr.com/photos",cls:z2},{type:"flickr",name:"Flickr",match_str:"^(https?://)?flic.kr/.*",cls:z2},{type:"instagram",name:"Instagram",match_str:/^(https?:)?\/*(www.)?(instagr.am|^(https?:)?\/*(www.)?instagram.com)\/p\//,cls:oQ},{type:"profile",name:"Profile",match_str:/^(https?:)?\/*(www.)?instagr.am\/[a-zA-Z0-9]{2,}|^(https?:)?\/*(www.)?instagram.com\/[a-zA-Z0-9]{2,}/,cls:lQ},{type:"documentcloud",name:"Document Cloud",match_str:/documentcloud.org\//,cls:tQ},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://.+.wiki[mp]edia.org.+#/media/.+.(jpg|jpeg|png|gif|svg|webp)",cls:$2},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://commons.wikimedia.org/wiki/File:.+.(jpg|jpeg|png|gif|svg|webp)",cls:$2},{type:"wikipedia",name:"Wikipedia",match_str:"^(https?:)?/.+.wikipedia.org",cls:WJ},{type:"image",name:"Image",match_str:/(jpg|jpeg|png|gif|svg|webp)(\?.*)?$/i,cls:F2},{type:"imgur",name:"Imgur",match_str:/^.*imgur.com\/.+$|<blockquote class=['\"]imgur-embed-pub['\"]/i,cls:fQ},{type:"googledocs",name:"Google Doc",match_str:"^(https?:)?/*[^.]*.google.com/[^/]*/d/[^/]*/[^/]*?usp=shar.*|^(https?:)?/*drive.google.com/open?id=[^&]*&authuser=0|^(https?:)?//*drive.google.com/open\\?id=[^&]*|^(https?:)?/*[^.]*.googledrive.com/host/[^/]*/",cls:cQ},{type:"pdf",name:"PDF",match_str:/^.*\.pdf(\?.*)?(\#.*)?/,cls:pQ},{type:"spotify",name:"spotify",match_str:"spotify",cls:dQ},{type:"iframe",name:"iFrame",match_str:"iframe",cls:hQ},{type:"blockquote",name:"Quote",match_str:"blockquote",cls:GJ},{type:"video",name:"Video",match_str:/(mp4|webm)(\?.*)?$/i,cls:gQ},{type:"wistia",name:"Wistia",match_str:/https?:\/\/(.+)?(wistia\.com|wi\.st)\/.*/i,cls:vQ},{type:"audio",name:"Audio",match_str:/(mp3|wav|m4a)(\?.*)?$/i,cls:mQ},{type:"imageblank",name:"Imageblank",match_str:"",cls:F2}];if(t){if(e instanceof Array)return!1;for(var s=0;s<r.length;s++)switch(r[s].type){case"flickr":case"image":case"instagram":if(e.url.match(r[s].match_str))return i=r[s],i;break}}else for(var s=0;s<r.length;s++)if(e.url.match(r[s].match_str))return r[s];return!1}class bP{constructor(t,i){this._el={container:{},content_container:{},media_container:{},timespan:{},line_left:{},line_right:{},content:{},text:{},media:{}},this._text={},this._state={loaded:!1},this.data={unique_id:"",background:null,date:{year:0,month:0,day:0,hour:0,minute:0,second:0,millisecond:0,thumbnail:"",format:""},text:{headline:"",text:""},media:null},this.options={duration:1e3,ease:Z_,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,this.ariaLabel="",Pi(this.options,i),Pi(this.data,t),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(t){this.active=t,this.active&&this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end tl-timemarker-active":this.active?this._el.container.className="tl-timemarker tl-timemarker-active":this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end":this._el.container.className="tl-timemarker",this._el.container.ariaLabel=this.ariaLabel,this.active?this._el.container.ariaLabel+=", shown":this._el.container.ariaLabel+=", press space to show"}setFocus(t={preventScroll:!0}){this._el.container.focus(t)}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}updateDisplay(t,i){this._updateDisplay(t,i)}loadMedia(){this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0)}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.data.start_date.getTime()}getEndTime(){return this.data.end_date?this.data.end_date.getTime():!1}setHeight(t){var i=12,r=1;this._el.content_container.style.height=t+"px",this._el.timespan_content.style.height=t+"px",t<=30?this._el.content.className="tl-timemarker-content tl-timemarker-content-small":this._el.content.className="tl-timemarker-content",t<=56?lc(this._el.content_container,"tl-timemarker-content-container-small"):sP(this._el.content_container,"tl-timemarker-content-container-small"),W_?(r=Math.floor(t/(i+2)),r<1&&(r=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=r):(r=t/i,r>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=r*i+"px")}setWidth(t){this.data.end_date&&(this._el.container.style.width=t+"px",t>this.options.marker_width_min?(this._el.content_container.style.width=t+"px",this._el.content_container.className="tl-timemarker-content-container tl-timemarker-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timemarker-content-container"))}setClass(t){this._el.container.className=t}setRowPosition(t,i){this.setPosition({top:t}),this._el.timespan.style.height=i+"px"}getFormattedDate(){if(ia(this.data.display_date).length>0)return this.data.display_date;let t="";return this.data.end_date&&(t=" to "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(t=(t?"from ":"")+this.data.start_date.getDisplayDate(this.getLanguage())+t),t}_onMarkerClick(t){this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerKeydown(t){/Space|Enter/.test(t.code)&&this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerBlur(t){this.fire("markerblur",{unique_id:this.data.unique_id})}_initLayout(){if(this._el.container=hn("div","tl-timemarker"),this._el.container.setAttribute("tabindex","-1"),this.data.unique_id&&(this._el.container.id=this.data.unique_id+"-marker"),this.data.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timemarker tl-timemarker-with-end"),this._el.timespan=hn("div","tl-timemarker-timespan",this._el.container),this._el.timespan_content=hn("div","tl-timemarker-timespan-content",this._el.timespan),this._el.content_container=hn("div","tl-timemarker-content-container",this._el.container),this._el.content=hn("div","tl-timemarker-content",this._el.content_container),this._el.line_left=hn("div","tl-timemarker-line-left",this._el.timespan),this._el.line_right=hn("div","tl-timemarker-line-right",this._el.timespan),this.data.media){this._el.media_container=hn("div","tl-timemarker-media-container",this._el.content);var t={url:this.data.media.thumbnail},i=this.data.media.thumbnail?Yv(t,!0):null;if(i){var r=new i.cls(t);r.on("loaded",function(){this._el.media=hn("img","tl-timemarker-media",this._el.media_container),this._el.media.src=r.getImageURL()}.bind(this)),r.loadMedia()}else{var s=Yv(this.data.media).type;this._el.media=hn("span","tl-icon-"+s,this._el.media_container)}}this._el.text=hn("div","tl-timemarker-text",this._el.content),this._text=hn("h2","tl-headline",this._el.text),this.data.text.headline&&this.data.text.headline!=""?this._text.innerHTML=Xd(this.data.text.headline):this.data.text.text&&this.data.text.text!=""?this._text.innerHTML=Xd(this.data.text.text):this.data.media&&this.data.media.caption&&this.data.media.caption!=""&&(this._text.innerHTML=Xd(this.data.media.caption));const u=this.getFormattedDate();this.ariaLabel=`${this._text.innerHTML}, ${u}`,this.onLoaded()}_initEvents(){ti.addListener(this._el.container,"click",this._onMarkerClick,this),ti.addListener(this._el.container,"keydown",this._onMarkerKeydown,this),ti.addListener(this._el.container,"blur",this._onMarkerBlur,this)}_updateDisplay(t,i,r){t&&(this.options.width=t),i&&(this.options.height=i)}}Ss(bP,vl,Ts,ml);class X1{constructor(t,i,r){this._el={drag:t,move:t},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},i&&(this._el.move=i),this.options={snap:!1,enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:0,right:!1},momentum_multiplier:2e3,duration:1e3,ease:Ih},this.animator=null,this.dragevent=this.mousedrag,Io&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},Pi(this.options,r)}enable(t){ti.addListener(this._el.drag,this.dragevent.down,this._onDragStart,this),ti.addListener(this._el.drag,this.dragevent.up,this._onDragEnd,this),this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){ti.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),ti.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(t){this.options.constraint=t}_onDragStart(t){this.animator&&this.animator.stop(),Io?t.originalEvent?(this.data.pagex.start=t.originalEvent.touches[0].screenX,this.data.pagey.start=t.originalEvent.touches[0].screenY):(this.data.pagex.start=t.targetTouches[0].screenX,this.data.pagey.start=t.targetTouches[0].screenY):(this.data.pagex.start=t.pageX,this.data.pagey.start=t.pageY),this.options.enable.x,this.options.enable.y,this.data.pos.start={x:this._el.move.offsetLeft,y:this._el.move.offsetTop},this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),ti.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),ti.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(t){this.data.sliding=!1,ti.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),ti.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(t){var i={x:0,y:0};this.data.sliding=!0,Io?t.originalEvent?(this.data.pagex.end=t.originalEvent.touches[0].screenX,this.data.pagey.end=t.originalEvent.touches[0].screenY):(this.data.pagex.end=t.targetTouches[0].screenX,this.data.pagey.end=t.targetTouches[0].screenY):(this.data.pagex.end=t.pageX,this.data.pagey.end=t.pageY),i.x=this.data.pagex.start-this.data.pagex.end,i.y=this.data.pagey.start-this.data.pagey.end,this.data.pos.end={x:this._el.drag.offsetLeft,y:this._el.drag.offsetTop},this.data.new_pos.x=-(i.x-this.data.pos.start.x),this.data.new_pos.y=-(i.y-this.data.pos.start.y),this.options.enable.x&&Math.abs(i.x)>Math.abs(i.y)&&(t.preventDefault(),this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&Math.abs(i.y)>Math.abs(i.y)&&(t.preventDefault(),this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var t={x:0,y:0,time:0},i={x:0,y:0,time:0},r={x:!1,y:!1},s=!1;this.data.direction=null,t.time=(new Date().getTime()-this.data.time.start)*10,i.time=(new Date().getTime()-this.data.time.start)*10,i.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),i.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),t.x=Math.round(i.x/i.time),t.y=Math.round(i.y/i.time),this.data.new_pos.x=Math.min(this.data.new_pos.x+t.x),this.data.new_pos.y=Math.min(this.data.new_pos.y+t.y),this.options.enable.x?this.options.constraint.left&&this.data.new_pos.x>this.options.constraint.left&&(this.data.new_pos.x=this.options.constraint.left):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,i.time<2e3&&(s=!0),this.options.enable.x&&this.options.enable.y?Math.abs(i.x)>Math.abs(i.y)?r.x=!0:r.y=!0:this.options.enable.x?Math.abs(i.x)>Math.abs(i.y)&&(r.x=!0):Math.abs(i.y)>Math.abs(i.x)&&(r.y=!0),r.x&&(Math.abs(i.x)>this._el.drag.offsetWidth/2&&(s=!0),Math.abs(i.x)>1e4&&(this.data.direction="left",i.x>0&&(this.data.direction="right"))),r.y&&(Math.abs(i.y)>this._el.drag.offsetHeight/2&&(s=!0),Math.abs(i.y)>1e4&&(this.data.direction="up",i.y>0&&(this.data.direction="down"))),i.time<1e3||this._animateMomentum(),s&&this.data.direction?this.fire("swipe_"+this.data.direction,this.data):this.data.direction?this.fire("swipe_nodirection",this.data):this.options.snap&&(this.animator.stop(),this.animator=fl(this._el.move,{top:this.data.pos.start.y,left:this.data.pos.start.x,duration:this.options.duration,easing:Hp}))}_animateMomentum(){var t={x:this.data.new_pos.x,y:this.data.new_pos.y},i={duration:this.options.duration,easing:Hp};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(t.y>this.options.constraint.bottom?t.y=this.options.constraint.bottom:t.y<this.options.constraint.top&&(t.y=this.options.constraint.top)),i.top=Math.floor(t.y)+"px"),this.options.enable.x&&(this.options.constraint.left&&t.x>=this.options.constraint.left&&(t.x=this.options.constraint.left),this.options.constraint.right&&t.x<this.options.constraint.right&&(t.x=this.options.constraint.right),i.left=Math.floor(t.x)+"px"),this.animator=fl(this._el.move,i),this.fire("momentum",this.data)}}Ss(X1,Ts);class xP{constructor(t,i,r,s){this.language=s,this._el={parent:{},container:{},slider:{},slider_background:{},line:{},marker_container_mask:{},marker_container:{},marker_item_container:{},timeaxis:{},timeaxis_background:{}},this.collapsed=!1,typeof t=="object"?this._el.container=t:this._el.container=_m(t),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","application"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline_navigation")),this._el.container.setAttribute("aria-description",'Navigate between markers with arrow keys. Press "Home" for the first and "End" for the last markers'),this.config=i,this.options={width:600,height:600,duration:1e3,ease:Ih,has_groups:!1,optimal_tick_width:50,scale_factor:2,marker_padding:5,timenav_height_min:150,marker_height_min:30,marker_width_min:100,zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89]},this.animator=null,this.ready=!1,this._markers=[],this._eras=[],this.has_eras=!1,this._groups=[],this._calculated_row_height=100,this.current_id="",this.current_focused_id="",this.timescale={},this.timeaxis={},this.max_rows=6,this.animate_css=!1,this._swipable,Pi(this.options,r)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this._onLoaded()}positionMarkers(t){for(var i=0;i<this._markers.length;i++){var r=this.timescale.getPositionInfo(i);t?this._markers[i].setClass("tl-timemarker tl-timemarker-fast"):this._markers[i].setClass("tl-timemarker"),this._markers[i].setPosition({left:r.start}),this._markers[i].setWidth(r.width)}}updateDisplay(t,i,r){let s=!1;t&&(this.options.width==0&&t>0&&(s=!0),this.options.width=t),i&&i!=this.options.height&&(this.options.height=i,this.timescale=this._getTimeScale()),this._assignRowsToMarkers(),this._el.slider_background.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._el.slider_background.style.left=-(this.options.width/2)+"px",this._el.slider.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._swipable.updateConstraint({top:!1,bottom:!1,left:this.options.width/2,right:-(this.timescale.getPixelWidth()-this.options.width/2)}),s&&this._drawTimeline(),this.goToId(this.current_id,!0)}_getTimeScale(){var t=0;try{t=parseInt(this.options.marker_height_min)}catch{gi("Invalid value for marker_height_min option."),t=30}return t==0&&(gi("marker_height_min option must not be zero."),t=30),this.max_rows=Math.round((this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding)/t),this.max_rows<1&&(this.max_rows=1),new R2(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows})}_updateTimeScale(t){this.options.scale_factor=t,this._updateDrawTimeline()}zoomIn(){var t=DY(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(t)}zoomOut(){var t=LY(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(t)}setZoom(t){var i=this.options.zoom_sequence[t];typeof i=="number"?this.setZoomFactor(i):console.warn("Invalid zoom level. Please use an index number between 0 and "+(this.options.zoom_sequence.length-1))}setZoomFactor(t){t<=this.options.zoom_sequence[0]?this.fire("zoomtoggle",{zoom:"out",show:!1}):this.fire("zoomtoggle",{zoom:"out",show:!0}),t>=this.options.zoom_sequence[this.options.zoom_sequence.length-1]?this.fire("zoomtoggle",{zoom:"in",show:!1}):this.fire("zoomtoggle",{zoom:"in",show:!0}),t==0&&(console.warn("Zoom factor must be greater than zero. Using 0.1"),t=.1),this.options.scale_factor=t,this.goToId(this.current_id,!this._updateDrawTimeline(!0),!0)}_createGroups(){this._groups=[];var t=this.timescale.getGroupLabels();if(t){this.options.has_groups=!0;for(var i=0;i<t.length;i++)this._createGroup(t[i])}}_createGroup(t){var i=new mP(t);this._addGroup(i),this._groups.push(i)}_addGroup(t){t.addTo(this._el.container)}_positionGroups(){if(this.options.has_groups){var t=this.options.height-this._el.timeaxis_background.offsetHeight,i=Math.floor(t/this.timescale.getNumberOfRows()-this.options.marker_padding);this.timescale.getGroupLabels();for(var r=0,s=0;r<this._groups.length;r++){var u=Math.floor(s*(i+this.options.marker_padding)),d=!1;u>t-this.options.marker_padding&&(d=!0),this._groups[r].setRowPosition(u,this._calculated_row_height+this.options.marker_padding/2),this._groups[r].setAlternateRowColor(OY(r),d),s+=this._groups[r].data.rows}}}_addMarker(t){t.addTo(this._el.marker_item_container),t.on("markerclick",this._onMarkerClick,this),t.on("added",this._onMarkerAdded,this)}_createMarker(t,i){var r=new bP(t,this.options);this._addMarker(r),i<0?this._markers.push(r):this._markers.splice(i,0,r)}_createMarkers(t){for(var i=0;i<t.length;i++)this._createMarker(t[i],-1)}_removeMarker(t){t.removeFrom(this._el.marker_item_container)}_destroyMarker(t){this._removeMarker(this._markers[t]),this._markers.splice(t,1)}_calculateMarkerHeight(t){return t/this.timescale.getNumberOfRows()-this.options.marker_padding}_calculateRowHeight(t){return t/this.timescale.getNumberOfRows()}_calculateAvailableHeight(){return this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding}_calculateMinimumTimeNavHeight(){return this.timescale.getNumberOfRows()*this.options.marker_height_min+this._el.timeaxis_background.offsetHeight+this.options.marker_padding}getMinimumHeight(){return this._calculateMinimumTimeNavHeight()}_assignRowsToMarkers(){var t=this._calculateAvailableHeight(),i=this._calculateMarkerHeight(t);this._positionGroups(),this._calculated_row_height=this._calculateRowHeight(t);for(var r=0;r<this._markers.length;r++){this._markers[r].setHeight(i);var s=this.timescale.getPositionInfo(r).row,u=Math.floor(s*(i+this.options.marker_padding))+this.options.marker_padding,d=t-u+this.options.marker_padding;this._markers[r].setRowPosition(u,d)}}_resetMarkersActive(){for(var t=0;t<this._markers.length;t++)this._markers[t].setActive(!1)}_resetMarkersBlurListeners(){for(var t=0;t<this._markers.length;t++)this._markers[t].off("markerblur",this._onMarkerBlur,this)}_findMarkerIndex(t){var i=-1;return(typeof t=="string"||t instanceof String)&&(i=lP(t,this._markers,"unique_id",i)),i}_createEras(t){for(var i=0;i<t.length;i++){var r=t[i],s=new gP(r.start_date,r.end_date,r.headline,this.options);this._eras.push(s),s.addTo(this._el.marker_item_container),s.on("added",this._onEraAdded,this)}}_positionEras(t){for(var i=0,r=0;r<this._eras.length;r++){var s={start:0,end:0,width:0};s.start=this.timescale.getPosition(this._eras[r].start_date.getTime()),s.end=this.timescale.getPosition(this._eras[r].end_date.getTime()),s.width=s.end-s.start,t?this._eras[r].setClass("tl-timeera tl-timeera-fast"):this._eras[r].setClass("tl-timeera"),this._eras[r].setPosition({left:s.start}),this._eras[r].setWidth(s.width),i++,i>5&&(i=0),this._eras[r].setColor(i)}}createMarker(t,i){this._createMarker(t,i)}createMarkers(t){this._createMarkers(t)}destroyMarker(t){this._destroyMarker(t)}destroyMarkerId(t){this.destroyMarker(this._findMarkerIndex(t))}goTo(t,i,r){var s=this.options.ease,u=this.options.duration,d=t<0?0:t;this._resetMarkersActive(),t>=0&&t<this._markers.length&&this._markers[t].setActive(!0),this.animateMovement(d,i,r,u,s),t>=0&&t<this._markers.length?this.current_id=this.current_focused_id=this._markers[t].data.unique_id:this.current_id=this.current_focused_id="",this._setLabelWithCurrentMarker()}goToId(t,i,r){this.goTo(this._findMarkerIndex(t),i,r)}focusOn(t,i,r){const s=this.options.ease,u=this.options.duration,d=t<0?0:t;this.animateMovement(d,i,r,u,s),this._resetMarkersBlurListeners(),t>=0&&t<this._markers.length&&(this._markers[t].setFocus(),this.current_focused_id=this._markers[t].data.unique_id,this._markers[t].on("markerblur",this._onMarkerBlur,this))}focusNext(){const t=this._findMarkerIndex(this.current_focused_id);t+1<this._markers.length?this.focusOn(t+1):this.focusOn(t)}focusPrevious(){const t=this._findMarkerIndex(this.current_focused_id);t-1>=0?this.focusOn(t-1):this.focusOn(t)}animateMovement(t,i,r,s,u){this.animator&&this.animator.stop(),i?(this._el.slider.className="tl-timenav-slider",this._el.slider.style.left=-this._markers[t].getLeft()+this.options.width/2+"px"):r?(this._el.slider.className="tl-timenav-slider tl-timenav-slider-animate",this.animate_css=!0,this._el.slider.style.left=-this._markers[t].getLeft()+this.options.width/2+"px"):(this._el.slider.className="tl-timenav-slider",this.animator=fl(this._el.slider,{left:-this._markers[t].getLeft()+this.options.width/2+"px",duration:s,easing:u})),t>=0&&t<this._markers.length?this.current_id=this._markers[t].data.unique_id:this.current_id="",this._dispatchVisibleTicksChange()}goToId(t,i,r){this.goTo(this._findMarkerIndex(t),i,r)}_dispatchVisibleTicksChange(){this.ticks_change_timeout&&(clearTimeout(this.ticks_change_timeout),this.ticks_change_timeout=null),this.ticks_change_timeout=setTimeout(()=>{const t=this.timeaxis.getVisibleTicks();this.fire("visible_ticks_change",{visible_ticks:t})},this.options.duration)}_onLoaded(){this.ready=!0,this.fire("loaded",this.config)}_onMarkerAdded(t){this.fire("dateAdded",this.config)}_onEraAdded(t){this.fire("eraAdded",this.config)}_onMarkerRemoved(t){this.fire("dateRemoved",this.config)}_onMarkerClick(t){this.goToId(t.unique_id),this.fire("change",{unique_id:t.unique_id})}_onMarkerBlur(t){this.current_focused_id!==this.current_id&&this.focusOn(this._findMarkerIndex(this.current_id))}_onMouseScroll(t){var i=0,r=0,s={right:-(this.timescale.getPixelWidth()-this.options.width/2),left:this.options.width/2};t||(t=window.event),t.originalEvent&&(t=t.originalEvent),typeof t.wheelDeltaX<"u"&&(i=t.wheelDeltaY/6,Math.abs(t.wheelDeltaX)>Math.abs(t.wheelDeltaY)?i=t.wheelDeltaX/6:i=0),i&&(t.preventDefault&&t.preventDefault(),t.returnValue=!1),r=parseInt(this._el.slider.style.left.replace("px",""))+i,r>s.left?r=s.left:r<s.right&&(r=s.right),this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1),this._el.slider.style.left=r+"px"}_onDragMove(t){this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1)}_onKeydown(t){switch(ti.stopPropagation(t),t.key){case"ArrowUp":case"ArrowRight":{this.focusNext();break}case"ArrowDown":case"ArrowLeft":{this.focusPrevious();break}case"Home":{this.focusOn(0);break}case"End":{this.focusOn(this._markers.length-1);break}}}_drawTimeline(t){this.timescale=this._getTimeScale(),this.timeaxis.drawTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(t),this._assignRowsToMarkers(),this._createGroups(),this._positionGroups(),this.has_eras&&this._positionEras(t)}_updateDrawTimeline(t){var i=!1;if(t){var r=new R2(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows});this.timescale.getMajorScale()==r.getMajorScale()&&this.timescale.getMinorScale()==r.getMinorScale()&&(i=!0)}else i=!0;return i?(this.timescale=this._getTimeScale(),this.timeaxis.positionTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(),this._assignRowsToMarkers(),this._positionGroups(),this.has_eras&&this._positionEras(),this.updateDisplay()):this._drawTimeline(!0),i}_setLabelWithCurrentMarker(){const t=this._markers[this._findMarkerIndex(this.current_focused_id)],i=t&&t.ariaLabel?`, ${t.ariaLabel}, shown`:"";this._el.container.setAttribute("aria-label",`Timeline navigation ${i}`)}_initLayout(){this._el.line=hn("div","tl-timenav-line",this._el.container),this._el.slider=hn("div","tl-timenav-slider",this._el.container),this._el.slider_background=hn("div","tl-timenav-slider-background",this._el.slider),this._el.marker_container_mask=hn("div","tl-timenav-container-mask",this._el.slider),this._el.marker_container=hn("div","tl-timenav-container",this._el.marker_container_mask),this._el.marker_item_container=hn("div","tl-timenav-item-container",this._el.marker_container),this._el.timeaxis=hn("div","tl-timeaxis",this._el.slider),this._el.timeaxis_background=hn("div","tl-timeaxis-background",this._el.container),this.timeaxis=new vP(this._el.timeaxis,this.options,this.language),this._swipable=new X1(this._el.slider_background,this._el.slider,{enable:{x:!0,y:!1},constraint:{top:!1,bottom:!1,left:this.options.width/2,right:!1},snap:!1}),this._swipable.enable()}_initEvents(){this._swipable.on("dragmove",this._onDragMove,this),ti.addListener(this._el.container,"mousewheel",this._onMouseScroll,this),ti.addListener(this._el.container,"DOMMouseScroll",this._onMouseScroll,this),ti.addListener(this._el.container,"keydown",this._onKeydown,this)}_initData(){this._createMarkers(this.config.events),this.config.eras&&this.config.eras.length>0&&(this.has_eras=!0,this._createEras(this.config.eras)),this._drawTimeline()}}Ss(xP,Ts,ml,vl);var Y0=function(){function e(t,i){for(var r=0;r<i.length;r++){var s=i[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();function J0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(function(){if(typeof window>"u")return;var e=Array.prototype.slice,t=Element.prototype.matches||Element.prototype.msMatchesSelector,i=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","details","summary","iframe","object","embed","[contenteditable]"].join(","),r=function(){function g(x,w){J0(this,g),this._inertManager=w,this._rootElement=x,this._managedNodes=new Set,this._rootElement.hasAttribute("aria-hidden")?this._savedAriaHidden=this._rootElement.getAttribute("aria-hidden"):this._savedAriaHidden=null,this._rootElement.setAttribute("aria-hidden","true"),this._makeSubtreeUnfocusable(this._rootElement),this._observer=new MutationObserver(this._onMutation.bind(this)),this._observer.observe(this._rootElement,{attributes:!0,childList:!0,subtree:!0})}return Y0(g,[{key:"destructor",value:function(){this._observer.disconnect(),this._rootElement&&(this._savedAriaHidden!==null?this._rootElement.setAttribute("aria-hidden",this._savedAriaHidden):this._rootElement.removeAttribute("aria-hidden")),this._managedNodes.forEach(function(w){this._unmanageNode(w.node)},this),this._observer=null,this._rootElement=null,this._managedNodes=null,this._inertManager=null}},{key:"_makeSubtreeUnfocusable",value:function(w){var C=this;d(w,function($){return C._visitNode($)});var I=document.activeElement;if(!document.body.contains(w)){for(var M=w,L=void 0;M;){if(M.nodeType===Node.DOCUMENT_FRAGMENT_NODE){L=M;break}M=M.parentNode}L&&(I=L.activeElement)}w.contains(I)&&(I.blur(),I===document.activeElement&&document.body.focus())}},{key:"_visitNode",value:function(w){if(w.nodeType===Node.ELEMENT_NODE){var C=w;C!==this._rootElement&&C.hasAttribute("inert")&&this._adoptInertRoot(C),(t.call(C,i)||C.hasAttribute("tabindex"))&&this._manageNode(C)}}},{key:"_manageNode",value:function(w){var C=this._inertManager.register(w,this);this._managedNodes.add(C)}},{key:"_unmanageNode",value:function(w){var C=this._inertManager.deregister(w,this);C&&this._managedNodes.delete(C)}},{key:"_unmanageSubtree",value:function(w){var C=this;d(w,function(I){return C._unmanageNode(I)})}},{key:"_adoptInertRoot",value:function(w){var C=this._inertManager.getInertRoot(w);C||(this._inertManager.setInert(w,!0),C=this._inertManager.getInertRoot(w)),C.managedNodes.forEach(function(I){this._manageNode(I.node)},this)}},{key:"_onMutation",value:function(w,C){w.forEach(function(I){var M=I.target;if(I.type==="childList")e.call(I.addedNodes).forEach(function($){this._makeSubtreeUnfocusable($)},this),e.call(I.removedNodes).forEach(function($){this._unmanageSubtree($)},this);else if(I.type==="attributes"){if(I.attributeName==="tabindex")this._manageNode(M);else if(M!==this._rootElement&&I.attributeName==="inert"&&M.hasAttribute("inert")){this._adoptInertRoot(M);var L=this._inertManager.getInertRoot(M);this._managedNodes.forEach(function($){M.contains($.node)&&L._manageNode($.node)})}}},this)}},{key:"managedNodes",get:function(){return new Set(this._managedNodes)}},{key:"hasSavedAriaHidden",get:function(){return this._savedAriaHidden!==null}},{key:"savedAriaHidden",set:function(w){this._savedAriaHidden=w},get:function(){return this._savedAriaHidden}}]),g}(),s=function(){function g(x,w){J0(this,g),this._node=x,this._overrodeFocusMethod=!1,this._inertRoots=new Set([w]),this._savedTabIndex=null,this._destroyed=!1,this.ensureUntabbable()}return Y0(g,[{key:"destructor",value:function(){if(this._throwIfDestroyed(),this._node&&this._node.nodeType===Node.ELEMENT_NODE){var w=this._node;this._savedTabIndex!==null?w.setAttribute("tabindex",this._savedTabIndex):w.removeAttribute("tabindex"),this._overrodeFocusMethod&&delete w.focus}this._node=null,this._inertRoots=null,this._destroyed=!0}},{key:"_throwIfDestroyed",value:function(){if(this.destroyed)throw new Error("Trying to access destroyed InertNode")}},{key:"ensureUntabbable",value:function(){if(this.node.nodeType===Node.ELEMENT_NODE){var w=this.node;if(t.call(w,i)){if(w.tabIndex===-1&&this.hasSavedTabIndex)return;w.hasAttribute("tabindex")&&(this._savedTabIndex=w.tabIndex),w.setAttribute("tabindex","-1"),w.nodeType===Node.ELEMENT_NODE&&(w.focus=function(){},this._overrodeFocusMethod=!0)}else w.hasAttribute("tabindex")&&(this._savedTabIndex=w.tabIndex,w.removeAttribute("tabindex"))}}},{key:"addInertRoot",value:function(w){this._throwIfDestroyed(),this._inertRoots.add(w)}},{key:"removeInertRoot",value:function(w){this._throwIfDestroyed(),this._inertRoots.delete(w),this._inertRoots.size===0&&this.destructor()}},{key:"destroyed",get:function(){return this._destroyed}},{key:"hasSavedTabIndex",get:function(){return this._savedTabIndex!==null}},{key:"node",get:function(){return this._throwIfDestroyed(),this._node}},{key:"savedTabIndex",set:function(w){this._throwIfDestroyed(),this._savedTabIndex=w},get:function(){return this._throwIfDestroyed(),this._savedTabIndex}}]),g}(),u=function(){function g(x){if(J0(this,g),!x)throw new Error("Missing required argument; InertManager needs to wrap a document.");this._document=x,this._managedNodes=new Map,this._inertRoots=new Map,this._observer=new MutationObserver(this._watchForInert.bind(this)),l(x.head||x.body||x.documentElement),x.readyState==="loading"?x.addEventListener("DOMContentLoaded",this._onDocumentLoaded.bind(this)):this._onDocumentLoaded()}return Y0(g,[{key:"setInert",value:function(w,C){if(C){if(this._inertRoots.has(w))return;var I=new r(w,this);if(w.setAttribute("inert",""),this._inertRoots.set(w,I),!this._document.body.contains(w))for(var M=w.parentNode;M;)M.nodeType===11&&l(M),M=M.parentNode}else{if(!this._inertRoots.has(w))return;var L=this._inertRoots.get(w);L.destructor(),this._inertRoots.delete(w),w.removeAttribute("inert")}}},{key:"getInertRoot",value:function(w){return this._inertRoots.get(w)}},{key:"register",value:function(w,C){var I=this._managedNodes.get(w);return I!==void 0?I.addInertRoot(C):I=new s(w,C),this._managedNodes.set(w,I),I}},{key:"deregister",value:function(w,C){var I=this._managedNodes.get(w);return I?(I.removeInertRoot(C),I.destroyed&&this._managedNodes.delete(w),I):null}},{key:"_onDocumentLoaded",value:function(){var w=e.call(this._document.querySelectorAll("[inert]"));w.forEach(function(C){this.setInert(C,!0)},this),this._observer.observe(this._document.body||this._document.documentElement,{attributes:!0,subtree:!0,childList:!0})}},{key:"_watchForInert",value:function(w,C){var I=this;w.forEach(function(M){switch(M.type){case"childList":e.call(M.addedNodes).forEach(function(F){if(F.nodeType===Node.ELEMENT_NODE){var U=e.call(F.querySelectorAll("[inert]"));t.call(F,"[inert]")&&U.unshift(F),U.forEach(function(ee){this.setInert(ee,!0)},I)}},I);break;case"attributes":if(M.attributeName!=="inert")return;var L=M.target,$=L.hasAttribute("inert");I.setInert(L,$);break}},this)}}]),g}();function d(g,x,w){if(g.nodeType==Node.ELEMENT_NODE){var C=g;x&&x(C);var I=C.shadowRoot;if(I){d(I,x);return}if(C.localName=="content"){for(var M=C,L=M.getDistributedNodes?M.getDistributedNodes():[],$=0;$<L.length;$++)d(L[$],x);return}if(C.localName=="slot"){for(var F=C,U=F.assignedNodes?F.assignedNodes({flatten:!0}):[],ee=0;ee<U.length;ee++)d(U[ee],x);return}}for(var V=g.firstChild;V!=null;)d(V,x),V=V.nextSibling}function l(g){if(!g.querySelector("style#inert-style, link#inert-style")){var x=document.createElement("style");x.setAttribute("id","inert-style"),x.textContent=`
[inert] {
  pointer-events: none;
  cursor: default;
}

[inert], [inert] * {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
`,g.appendChild(x)}}if(!HTMLElement.prototype.hasOwnProperty("inert")){var m=new u(document);Object.defineProperty(HTMLElement.prototype,"inert",{enumerable:!0,get:function(){return this.hasAttribute("inert")},set:function(x){m.setInert(this,x)}})}})();class wP{constructor(t,i,r,s){s&&this.setLanguage(s),this._el={container:{},scroll_container:{},background:{},content_container:{},content:{}},this._media=null,this._mediaclass={},this._text={},this._background_media=null,this._state={loaded:!1},this.has={headline:!1,text:!1,media:!1,title:!1,background:{image:!1,color:!1,color_value:""}},this.has.title=r,this.data={unique_id:null,background:null,start_date:null,end_date:null,location:null,text:null,media:null,autolink:!0},this.options={duration:1e3,slide_padding_lr:40,ease:Z_,width:600,height:600,skinny_size:650,media_name:""},this.active=!1,this.animator={},Pi(this.options,i),Pi(this.data,t),this._initLayout(),this._initEvents()}show(){this.animator=fl(this._el.slider_container,{left:-(this._el.container.offsetWidth*n)+"px",duration:this.options.duration,easing:this.options.ease})}hide(){}setActive(t){this.active=t,this.active?(this.data.background&&this.fire("background_change",this.has.background),this._setInteractive(!0),this.loadMedia()):(this.stopMedia(),this._setInteractive(!1))}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}updateDisplay(t,i,r){var s,u=this.options.slide_padding_lr,d=this.options.slide_padding_lr;t?this.options.width=t:this.options.width=this._el.container.offsetWidth,s=this.options.width-this.options.slide_padding_lr*2,Mu&&this.options.width<=this.options.skinny_size?(u=0,d=0,s=this.options.width):r=="landscape"||this.options.width<=this.options.skinny_size&&(u=50,d=50,s=this.options.width-u-d),this._el.content.style.paddingLeft=u+"px",this._el.content.style.paddingRight=d+"px",this._el.content.style.width=s+"px",i?this.options.height=i:this.options.height=this._el.container.offsetHeight,this._media&&(!this.has.text&&this.has.headline?this._media.updateDisplay(s,this.options.height-this._text.headlineHeight(),r):!this.has.text&&!this.has.headline?this._media.updateDisplay(s,this.options.height,r):this.options.width<=this.options.skinny_size?this._media.updateDisplay(s,this.options.height,r):this._media.updateDisplay(s/2,this.options.height,r)),this._updateBackgroundDisplay()}loadMedia(){var t=this;this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0),this._background_media&&!this._background_media._state.loaded&&(this._background_media.on("loaded",function(){t._updateBackgroundDisplay()}),this._background_media.loadMedia())}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getBackground(){return this.has.background}scrollToTop(){this._el.container.scrollTop=0}getFormattedDate(){if(ia(this.data.display_date).length>0)return this.data.display_date;var t="";return this.has.title||(this.data.end_date&&(t=" &mdash; "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(t=this.data.start_date.getDisplayDate(this.getLanguage())+t)),t}_initLayout(){if(this._el.container=hn("div","tl-slide"),this.has.title&&(this._el.container.className="tl-slide tl-slide-titleslide"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._el.scroll_container=hn("div","tl-slide-scrollable-container",this._el.container),this._el.content_container=hn("div","tl-slide-content-container",this._el.scroll_container),this._el.content=hn("div","tl-slide-content",this._el.content_container),this._el.background=hn("div","tl-slide-background",this._el.container),this.data.background){if(this.data.background.url){var t=Yv(this.data.background,!0);t&&(this._background_media=new t.cls(this.data.background,{background:1}),this.has.background.image=!0,this._el.container.className+=" tl-full-image-background",this.has.background.color_value="#000",this._el.background.style.display="block"),this.data.background.alt&&(this._el.background.setAttribute("role","img"),this._el.background.setAttribute("aria-label",this.data.background.alt))}this.data.background.color&&(this.has.background.color=!0,this._el.container.className+=" tl-full-color-background",this.has.background.color_value=this.data.background.color),this.data.background.text_background&&(this._el.container.className+=" tl-text-background")}this.data.media&&this.data.media.url&&this.data.media.url!=""&&(this.has.media=!0),this.data.text&&this.data.text.text&&(this.has.text=!0),this.data.text&&this.data.text.headline&&(this.has.headline=!0),this.has.media&&(this.data.media.mediatype=Yv(this.data.media),this.options.media_name=this.data.media.mediatype.name,this.options.media_type=this.data.media.mediatype.type,this.options.autolink=this.data.autolink,this._media=new this.data.media.mediatype.cls(this.data.media,this.options,this.getLanguage())),(this.has.text||this.has.headline)&&(this._text=new _P(this.data.text,{title:this.has.title,language:this.getLanguage(),autolink:this.data.autolink}),this._text.addDateText(this.getFormattedDate())),!this.has.text&&!this.has.headline&&this.has.media?(lc(this._el.container,"tl-slide-media-only"),this._media.addTo(this._el.content)):this.has.headline&&this.has.media&&!this.has.text?(lc(this._el.container,"tl-slide-media-only"),this._text.addTo(this._el.content),this._media.addTo(this._el.content)):this.has.text&&this.has.media?(this._text.addTo(this._el.content),this._media.addTo(this._el.content)):(this.has.text||this.has.headline)&&(lc(this._el.container,"tl-slide-text-only"),this._text.addTo(this._el.content)),this.onLoaded()}_initEvents(){}_updateBackgroundDisplay(){this._background_media&&this._background_media._state.loaded&&(this._el.background.style.backgroundImage="url('"+this._background_media.getImageURL(this.options.width,this.options.height)+"')")}_setInteractive(t){t?this._el.container.removeAttribute("inert"):this._el.container.setAttribute("inert",!0)}}Ss(wP,vl,Ts,ml);class _x{constructor(t,i,r){this._el={container:{},content_container:{},icon:{},title:{},description:{}},this.mediatype={},this.data={title:"Navigation",description:"Description",date:"Date"},this.options={direction:"previous"},this.animator=null,Pi(this.options,i),Pi(this.data,t),this._el.container=Jf("tl-slidenav-"+this.options.direction),Mu&&this._el.container.setAttribute("ontouchstart"," "),this._initLayout(),this._initEvents(),r&&r.appendChild(this._el.container)}update(t){var i={title:"",description:"",date:t.getFormattedDate()};t.data.text&&t.data.text.headline&&(i.title=t.data.text.headline),this._update(i)}setColor(t){t?this._el.content_container.className="tl-slidenav-content-container tl-slidenav-inverted":this._el.content_container.className="tl-slidenav-content-container"}_onMouseClick(){this.fire("clicked",this.options)}_update(t){this.data=Pi(this.data,t);const i=Xd(this.data.title);this._el.title.innerHTML=i;const r=Xd(this.data.date);this._el.description.innerHTML=r,this._el.container.setAttribute("aria-label",`${this.options.direction}, ${i}, ${r}`)}_initLayout(){this._el.content_container=hn("div","tl-slidenav-content-container",this._el.container),this._el.icon=hn("div","tl-slidenav-icon",this._el.content_container),this._el.title=hn("div","tl-slidenav-title",this._el.content_container),this._el.description=hn("div","tl-slidenav-description",this._el.content_container),this._el.icon.innerHTML="&nbsp;",this._update()}_initEvents(){ti.addListener(this._el.container,"click",this._onMouseClick,this)}}Ss(_x,ml,Ts);class SP{constructor(t,i,r,s){s&&this.setLanguage(s),this._el={container:{},background:{},slider_container_mask:{},slider_container:{},slider_item_container:{}},this._nav={},this._nav.previous={},this._nav.next={},this.slide_spacing=0,this._slides=[],this._swipable,this.preloadTimer,this._message,this.current_id="",this.data={},this.options={id:"",layout:"portrait",width:600,height:600,default_bg_color:{r:255,g:255,b:255},slide_padding_lr:40,start_at_slide:1,slide_default_fade:"0%",duration:1e3,ease:Ih,dragging:!0,trackResize:!0},typeof t=="object"?(this._el.container=t,this.options.id=_u(6,"tl")):(this.options.id=t,this._el.container=_m(t)),this._el.container.id||(this._el.container.id=this.options.id),this.animator=null,Pi(this.options,r),Pi(this.data,i)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this.goTo(this.options.start_at_slide),this._onLoaded()}_addSlide(t){t.addTo(this._el.slider_item_container),t.on("added",this._onSlideAdded,this),t.on("background_change",this._onBackgroundChange,this)}_createSlide(t,i,r){var s=new wP(t,this.options,i,this.getLanguage());this._addSlide(s),r<0?this._slides.push(s):this._slides.splice(r,0,s)}_createSlides(t){for(var i=0;i<t.length;i++)t[i].unique_id==""&&(t[i].unique_id=_u(6,"tl-slide")),this._createSlide(t[i],!1,-1)}_removeSlide(t){t.removeFrom(this._el.slider_item_container),t.off("added",this._onSlideRemoved,this),t.off("background_change",this._onBackgroundChange)}_destroySlide(t){this._removeSlide(this._slides[t]),this._slides.splice(t,1)}_findSlideIndex(t){var i=t;return(typeof t=="string"||t instanceof String)&&(i=lP(t,this._slides,"unique_id")),i}updateDisplay(t,i,r,s){var u,d;typeof s>"u"?d=this.options.layout:d=s,this.options.layout=d,t?this.options.width=t:this.options.width=this._el.container.offsetWidth,i?this.options.height=i:this.options.height=this._el.container.offsetHeight,this.slide_spacing=this.options.width*2,u=this.options.height/2,this._nav.next.setPosition({top:u}),this._nav.previous.setPosition({top:u});for(var l=0;l<this._slides.length;l++)this._slides[l].updateDisplay(this.options.width,this.options.height,d),this._slides[l].setPosition({left:this.slide_spacing*l,top:0});this.goToId(this.current_id,!0,!0)}createSlide(t,i){this._createSlide(t,!1,i)}createSlides(t){this._createSlides(t)}destroySlide(t){this._destroySlide(t)}destroySlideId(t){this.destroySlide(this._findSlideIndex(t))}goTo(t,i,r){t=parseInt(t),isNaN(t)&&(t=0);var s=this;this.changeBackground({color_value:"",image:!1}),this.preloadTimer&&clearTimeout(this.preloadTimer);for(var u=0;u<this._slides.length;u++)this._slides[u].setActive(!1);t<this._slides.length&&t>=0&&(this.current_id=this._slides[t].data.unique_id,this.animator&&this.animator.stop(),this._swipable&&this._swipable.stopMomentum(),i?(this._el.slider_container.style.left=-(this.slide_spacing*t)+"px",this._onSlideChange(r)):this.animator=fl(this._el.slider_container,{left:-(this.slide_spacing*t)+"px",duration:this.options.duration,easing:this.options.ease,complete:this._onSlideChange(r)}),this._slides[t].setActive(!0),this._slides[t+1]?(this.showNav(this._nav.next,!0),this._nav.next.update(this._slides[t+1])):this.showNav(this._nav.next,!1),this._slides[t-1]?(this.showNav(this._nav.previous,!0),this._nav.previous.update(this._slides[t-1])):this.showNav(this._nav.previous,!1),this.preloadTimer=setTimeout(function(){s.preloadSlides(t)},this.options.duration))}goToId(t,i,r){this.goTo(this._findSlideIndex(t),i,r)}preloadSlides(t){this._slides[t+1]&&(this._slides[t+1].loadMedia(),this._slides[t+1].scrollToTop()),this._slides[t+2]&&(this._slides[t+2].loadMedia(),this._slides[t+2].scrollToTop()),this._slides[t-1]&&(this._slides[t-1].loadMedia(),this._slides[t-1].scrollToTop()),this._slides[t-2]&&(this._slides[t-2].loadMedia(),this._slides[t-2].scrollToTop())}next(){var t=this._findSlideIndex(this.current_id);t+1<this._slides.length?this.goTo(t+1):this.goTo(t)}previous(){var t=this._findSlideIndex(this.current_id);t-1>=0?this.goTo(t-1):this.goTo(t)}showNav(t,i){this.options.width<=500&&Mu?t.hide():i?t.show():t.hide()}changeBackground(t){var i={r:256,g:256,b:256};t.color_value&&t.color_value!=""?(i=aP(t.color_value),i||(gi("Invalid color value "+t.color_value),i=this.options.default_bg_color)):(i=this.options.default_bg_color,t.color_value="rgb("+i.r+" , "+i.g+", "+i.b+")"),i.r+""+i.g+i.b,this._el.background.style.backgroundImage="none",t.color_value?this._el.background.style.backgroundColor=t.color_value:this._el.background.style.backgroundColor="transparent",i.r<255||i.g<255||i.b<255||t.image?(this._nav.next.setColor(!0),this._nav.previous.setColor(!0)):(this._nav.next.setColor(!1),this._nav.previous.setColor(!1))}_updateDrawSlides(){for(var t=this.options.layout,i=0;i<this._slides.length;i++)this._slides[i].updateDisplay(this.options.width,this.options.height,t),this._slides[i].setPosition({left:this.slide_spacing*i,top:0});this.goToId(this.current_id,!0,!1)}_initLayout(){lc(this._el.container,"tl-storyslider"),this._nav.previous=new _x({title:"Previous",description:"description"},{direction:"previous"},this._el.container),this._nav.next=new _x({title:"Next",description:"description"},{direction:"next"},this._el.container),this._el.slider_container_mask=hn("div","tl-slider-container-mask",this._el.container),this._el.background=hn("div","tl-slider-background tl-animate",this._el.container),this._el.slider_container=hn("div","tl-slider-container tlanimate",this._el.slider_container_mask),this._el.slider_item_container=hn("div","tl-slider-item-container",this._el.slider_container),this._el.slider_container.setAttribute("aria-live","polite"),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this._el.slider_container.style.left="0px",Io&&(this._swipable=new X1(this._el.slider_container_mask,this._el.slider_container,{enable:{x:!0,y:!1},snap:!0}),this._swipable.enable(),this._message=new J_(this._el.container,{message_class:"tl-message-full",message_icon_class:"tl-icon-swipe-left"},this.getLanguage()),this._message.updateMessage(this._("swipe_to_navigate")),this._message.addTo(this._el.container))}_initEvents(){this._nav.next.on("clicked",this._onNavigation,this),this._nav.previous.on("clicked",this._onNavigation,this),this._message&&this._message.on("clicked",this._onMessageClick,this),this._swipable&&(this._swipable.on("swipe_left",this._onNavigation,this),this._swipable.on("swipe_right",this._onNavigation,this),this._swipable.on("swipe_nodirection",this._onSwipeNoDirection,this))}_initData(){this.data.title&&this._createSlide(this.data.title,!0,-1),this._createSlides(this.data.events)}_onBackgroundChange(t){var i=this._findSlideIndex(this.current_id),r=this._slides[i].getBackground();this.changeBackground(t),this.fire("colorchange",r)}_onMessageClick(t){this._message.hide()}_onSwipeNoDirection(t){this.goToId(this.current_id)}_onNavigation(t){t.direction=="next"||t.direction=="left"?this.next():(t.direction=="previous"||t.direction=="right")&&this.previous(),this.fire("nav_"+t.direction,this.data)}_onSlideAdded(t){gi("slideadded"),this.fire("slideAdded",this.data)}_onSlideRemoved(t){this.fire("slideRemoved",this.data)}_onSlideChange(t){t||this.fire("change",{unique_id:this.current_id})}_onMouseClick(t){}_fireMouseEvent(t){if(this._loaded){var i=t.type;i=i==="mouseenter"?"mouseover":i==="mouseleave"?"mouseout":i,this.hasEventListeners(i)&&(i==="contextmenu"&&ti.preventDefault(t),this.fire(i,{latlng:"something",layerPoint:"something else"}))}}_onLoaded(){this.fire("loaded",this.data)}}Ss(SP,vl,Ts);class TP{constructor(t,i,r,s){this._el={parent:{},container:{},button_forwardtoend:{},button_backtostart:{},button_zoomin:{},button_zoomout:{},arrow:{},line:{},coverbar:{},grip:{}},this.collapsed=!1,typeof t=="object"?this._el.container=t:this._el.container=_m(t),i&&(this._el.parent=i),this.data={visible_ticks_dates:{}},this.options={width:600,height:600,duration:1e3,ease:Ih,menubar_default_y:0},this.animator={},this.setLanguage(s),Pi(this.options,r),this._initLayout(),this._initEvents()}show(t){this.options.duration}hide(t){}toogleZoomIn(t){t?this._el.button_zoomin.removeAttribute("disabled"):this._el.button_zoomin.setAttribute("disabled",!0)}toogleZoomOut(t){t?this._el.button_zoomout.removeAttribute("disabled"):this._el.button_zoomout.setAttribute("disabled",!0)}changeVisibleTicks(t){const i=t.minor;if(!i.length){this.data.visible_ticks_dates={};return}const s=i[0].date.getFullYear(),d=i[i.length-1].date.getFullYear();this.data.visible_ticks_dates={start:s,end:d},this._updateZoomAriaLabels()}setSticky(t){this.options.menubar_default_y=t}setColor(t){t?this._el.container.className="tl-menubar tl-menubar-inverted":this._el.container.className="tl-menubar"}updateDisplay(t,i,r,s){this._updateDisplay(t,i,r,s)}_onButtonZoomIn(t){this.fire("zoom_in",t)}_onButtonZoomOut(t){this.fire("zoom_out",t)}_onButtonForwardToEnd(t){this.fire("forward_to_end",t)}_onButtonBackToStart(t){this.fire("back_to_start",t)}_initLayout(){this._el.button_zoomin=Jf("tl-menubar-button",this._el.container),this._el.button_zoomout=Jf("tl-menubar-button",this._el.container),this._el.button_forwardtoend=Jf("tl-menubar-button",this._el.container),this._el.button_backtostart=Jf("tl-menubar-button",this._el.container),Mu&&this._el.container.setAttribute("ontouchstart"," "),this._el.button_backtostart.innerHTML="<span class='tl-icon-goback'></span>",this._el.button_backtostart.setAttribute("aria-label",this._("return_to_title")),this._el.button_forwardtoend.innerHTML="<span class='tl-icon-goend'></span>",this._el.button_forwardtoend.setAttribute("aria-label",this._("go_to_end")),this._el.button_zoomin.innerHTML="<span class='tl-icon-zoom-in'></span>",this._el.button_zoomin.setAttribute("aria-label",this._("zoom_in")),this._el.button_zoomout.innerHTML="<span class='tl-icon-zoom-out'></span>",this._el.button_zoomout.setAttribute("aria-label",this._("zoom_out"))}_initEvents(){ti.addListener(this._el.button_forwardtoend,"click",this._onButtonForwardToEnd,this),ti.addListener(this._el.button_backtostart,"click",this._onButtonBackToStart,this),ti.addListener(this._el.button_zoomin,"click",this._onButtonZoomIn,this),ti.addListener(this._el.button_zoomout,"click",this._onButtonZoomOut,this)}_updateDisplay(t,i,r){t&&(this.options.width=t),i&&(this.options.height=i)}_updateZoomAriaLabels(){Object.keys(this.data.visible_ticks_dates).length==0?(this._el.button_zoomin.setAttribute("aria-description",""),this._el.button_zoomout.setAttribute("aria-description","")):(this._el.button_zoomin.setAttribute("aria-description",this._("aria_label_zoomin",this.data.visible_ticks_dates)),this._el.button_zoomout.setAttribute("aria-description",this._("aria_label_zoomout",this.data.visible_ticks_dates)))}}Ss(TP,ml,Ts,vl);let yx=null;if(document){let e=document.getElementsByTagName("script");e&&e.length>0&&(yx=e[e.length-1].src)}function _Q(e){return function(t){if(e.config){var i=t.key,r=e._getSlideIndex(self.current_id),s=e.config.events.length-1,u=e.config.title?s+1:s,d=0;i=="ArrowLeft"?r!=d&&e.goToPrev():i=="ArrowRight"&&r!=u&&e.goToNext()}}}class EP{constructor(t,i,r){if(r||(r={}),this.ready=!1,this._el={container:_m(t),storyslider:{},timenav:{},menubar:{}},r.lang&&!r.language&&(r.language=r.lang),this.language=K1,this._storyslider={},this._timenav={},this._menubar={},this._loaded={storyslider:!1,timenav:!1},this.config=null,this.options={script_path:"https://cdn.knightlab.com/libs/timeline3/latest/js/",height:this._el.container.offsetHeight,width:this._el.container.offsetWidth,debug:!1,font:"default",is_embed:!1,is_full_embed:!1,hash_bookmark:!1,default_bg_color:{r:255,g:255,b:255},scale_factor:2,layout:"landscape",timenav_position:"bottom",optimal_tick_width:60,base_class:"tl-timeline",timenav_height:null,timenav_height_percentage:25,timenav_mobile_height_percentage:40,timenav_height_min:175,marker_height_min:30,marker_width_min:100,marker_padding:5,start_at_slide:0,start_at_end:!1,menubar_height:0,skinny_size:650,medium_size:800,use_bc:!1,duration:1e3,ease:Ih,dragging:!0,trackResize:!0,map_type:"stamen:toner-lite",slide_padding_lr:100,slide_default_fade:"0%",zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89],language:"en",ga_property_id:null,track_events:["back_to_start","nav_next","nav_previous","zoom_in","zoom_out"],theme:null,sheets_proxy:"https://sheets-proxy.knightlab.com/proxy/",soundcite:!1},this.animator_timenav=null,this.animator_storyslider=null,this.animator_menubar=null,this.message=new J_(this._el.container,{message_class:"tl-message-full"}),typeof r.default_bg_color=="string"){var s=aP(r.default_bg_color);s?r.default_bg_color=s:(delete r.default_bg_color,gi("Invalid default background color. Ignoring."))}Pi(this.options,r),this.options.script_path||(this.options.script_path=this.determineScriptPath()),r.soundcite&&this.on("ready",()=>{gi("Loading Soundcite resources "),X0("https://cdn.knightlab.com/libs/soundcite/latest/css/player.css"),Mh("https://cdn.knightlab.com/libs/soundcite/latest/js/soundcite.min.js")}),this._loadStyles(),document.addEventListener("keydown",_Q(this)),window.addEventListener("resize",function(u){this.updateDisplay()}.bind(this)),this.options.debug&&MY(console.log),lc(this._el.container,"tl-timeline"),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","region"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline")),this.options.is_embed&&lc(this._el.container,"tl-timeline-embed"),this.options.is_full_embed&&lc(this._el.container,"tl-timeline-full-embed"),this._loadLanguage(i)}_loadStyles(){let t=null,i=null;if(this.options.font&&(this.options.font.indexOf("http")==0||this.options.font.match(/\.css$/)))t=this.options.font;else if(this.options.font){let r="../css/fonts/font."+this.options.font.toLowerCase()+".css";t=new URL(r,this.options.script_path).toString()}if(t&&X0(t),this.options.theme&&(this.options.theme.indexOf("http")==0||this.options.theme.match(/\.css$/)))i=this.options.theme;else if(this.options.theme){let r="../css/themes/timeline.theme."+this.options.theme.toLowerCase()+".css";i=new URL(r,this.options.script_path).toString()}i&&X0(i)}_loadLanguage(t){try{var i=this.options.language,r=this.options.script_path;WY(i,r).then(s=>{s?(this.language=s,this.message.setLanguage(this.language),this.showMessage(this._("loading_timeline"))):this.showMessage(`Error loading ${i}`),this._initData(t)})}catch(s){this.showMessage(this._translateError(s))}}_initData(t){typeof t=="string"?FJ(t,{callback:function(i){this.setConfig(i)}.bind(this),sheets_proxy:this.options.sheets_proxy}):su==t.constructor?this.setConfig(t):this.setConfig(new su(t))}_translateError(t){return t.hasOwnProperty("stack")&&gi(t.stack),t.message_key?this._(t.message_key)+(t.detail?" ["+t.detail+"]":""):t}showMessage(t){this.message?this.message.updateMessage(t):(gi("No message display available."),gi(t))}determineScriptPath(){let t=null;if(yx)t=yx;else{let i=document.getElementById("timeline-script-tag");i&&(t=i.src)}if(!t){let i=document.getElementsByTagName("script");for(let r=i.length-1;r>=0;r--)if(i[r].src){t=i[r].src;break}}return t?t.substr(0,t.lastIndexOf("/")+1):""}setConfig(t){if(this.config=t,this.config.isValid()&&(this.config.validate(),this._validateOptions()),this.config.isValid())try{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",this._onDataLoaded.bind(this)):this._onDataLoaded()}catch(u){this.showMessage("<strong>"+this._("error")+":</strong> "+this._translateError(u))}else{for(var i=[],r=0,s=this.config.getErrors();r<s.length;r++)i.push(this._translateError(s[r]));this.showMessage("<strong>"+this._("error")+":</strong> "+i.join("<br>"))}}_onDataLoaded(){this.fire("dataloaded"),this._initLayout(),this._initEvents(),this._initAnalytics(),this.message&&this.message.hide();let t=(r,s)=>{r.reduce((u,d)=>u||d.isIntersecting,!1)&&this.updateDisplay()};new IntersectionObserver(t.bind(this)).observe(this._el.container),this.ready=!0,this.fire("ready")}_initLayout(){this.message.removeFrom(this._el.container),this._el.container.innerHTML="",this.options.timenav_position=="top"?(this._el.timenav=hn("div","tl-timenav",this._el.container),this._el.menubar=hn("div","tl-menubar",this._el.container),this._el.storyslider=hn("div","tl-storyslider",this._el.container)):(this._el.storyslider=hn("div","tl-storyslider",this._el.container),this._el.timenav=hn("div","tl-timenav",this._el.container),this._el.menubar=hn("div","tl-menubar",this._el.container)),this._el.attribution=hn("div","tl-attribution",this._el.container),this._el.attribution.innerHTML="<a href='https://timeline.knightlab.com' target='_blank' rel='noopener'><span class='tl-knightlab-logo'></span>TimelineJS</a>",this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.timenav_height=this._calculateTimeNavHeight(this.options.timenav_height),this._timenav=new xP(this._el.timenav,this.config,this.options,this.language),this._timenav.on("loaded",this._onTimeNavLoaded,this),this._timenav.options.height=this.options.timenav_height,this._timenav.init(),this.options.initial_zoom&&this.setZoom(this.options.initial_zoom),this._storyslider=new SP(this._el.storyslider,this.config,this.options,this.language),this._el.storyslider.setAttribute("role","group"),this._el.storyslider.setAttribute("aria-label",this._("aria_label_timeline_content")),this._storyslider.on("loaded",this._onStorySliderLoaded,this),this._storyslider.init(),this._menubar=new TP(this._el.menubar,this._el.container,this.options,this.getLanguage()),this.options.layout=="portrait"?this.options.storyslider_height=this.options.height-this.options.timenav_height-1:this.options.storyslider_height=this.options.height-1,this._updateDisplay(this._timenav.options.height,!0,2e3)}_initEvents(){this._timenav.on("change",this._onTimeNavChange,this),this._timenav.on("zoomtoggle",this._onZoomToggle,this),this._timenav.on("visible_ticks_change",this._onVisibleTicksChange,this),this._storyslider.on("change",this._onSlideChange,this),this._storyslider.on("colorchange",this._onColorChange,this),this._storyslider.on("nav_next",this._onStorySliderNext,this),this._storyslider.on("nav_previous",this._onStorySliderPrevious,this),this._menubar.on("zoom_in",this._onZoomIn,this),this._menubar.on("zoom_out",this._onZoomOut,this),this._menubar.on("forward_to_end",this._onForwardToEnd,this),this._menubar.on("back_to_start",this._onBackToStart,this)}_onColorChange(t){this.fire("color_change",{unique_id:this.current_id},this)}_onSlideChange(t){this.current_id!=t.unique_id&&(this.current_id=t.unique_id,this._timenav.goToId(this.current_id),this._onChange(t))}_onTimeNavChange(t){this.current_id!=t.unique_id&&(this.current_id=t.unique_id,this._storyslider.goToId(this.current_id),this._onChange(t))}_onZoomToggle(t){t.zoom=="in"?this._menubar.toogleZoomIn(t.show):t.zoom=="out"&&this._menubar.toogleZoomOut(t.show)}_onChange(t){this.fire("change",{unique_id:this.current_id},this),this.options.hash_bookmark&&this.current_id&&this._updateHashBookmark(this.current_id)}_onVisibleTicksChange(t){this._menubar.changeVisibleTicks(t.visible_ticks)}_onForwardToEnd(t){this.goToEnd(),this.fire("forward_to_end",{unique_id:this.current_id},this)}_onBackToStart(t){this.goToStart(),this.fire("back_to_start",{unique_id:this.current_id},this)}_onZoomIn(t){this._timenav.zoomIn(),this.fire("zoom_in",{zoom_level:this._timenav.options.scale_factor},this)}_onZoomOut(t){this._timenav.zoomOut(),this.fire("zoom_out",{zoom_level:this._timenav.options.scale_factor},this)}_onTimeNavLoaded(){this._loaded.timenav=!0,this._onLoaded()}_onStorySliderLoaded(){this._loaded.storyslider=!0,this._onLoaded()}_onStorySliderNext(t){this.fire("nav_next",t)}_onStorySliderPrevious(t){this.fire("nav_previous",t)}_updateDisplay(t,i,r){var s=this.options.duration,u=this.options.base_class,d=0;r&&(s=r),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.width<=this.options.skinny_size?(u+=" tl-skinny",this.options.layout="portrait"):this.options.width<=this.options.medium_size?(u+=" tl-medium",this.options.layout="landscape"):this.options.layout="landscape",Io&&(this.options.layout=CY()),Mu?(u+=" tl-mobile",this.options.timenav_height=this._calculateTimeNavHeight(t,this.options.timenav_mobile_height_percentage)):this.options.timenav_height=this._calculateTimeNavHeight(t),this.options.layout=="portrait"?u+=" tl-layout-portrait":u+=" tl-layout-landscape",this.options.storyslider_height=this.options.height-this.options.timenav_height,this.options.timenav_position=="top"?d=Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-39/2:d=Math.round(this.options.storyslider_height+1+Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-35/2),i?(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this.animator_storyslider&&this.animator_storyslider.stop(),this.animator_storyslider=fl(this._el.storyslider,{height:this.options.storyslider_height+"px",duration:s/2,easing:Hp}),this.animator_menubar&&this.animator_menubar.stop(),this.animator_menubar=fl(this._el.menubar,{top:d+"px",duration:s/2,easing:Hp})):(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this._el.storyslider.style.height=this.options.storyslider_height+"px",this._el.menubar.style.top=d+"px"),this.message&&this.message.updateDisplay(this.options.width,this.options.height),this._timenav.updateDisplay(this.options.width,this.options.timenav_height,i),this._storyslider.updateDisplay(this.options.width,this.options.storyslider_height,i,this.options.layout),this.language.direction=="rtl"&&(u+=" tl-rtl"),this._el.container.className=u}_calculateTimeNavHeight(t,i){var r=0;return t?r=t:(this.options.timenav_height_percentage||i)&&(i?r=Math.round(this.options.height/100*i):r=Math.round(this.options.height/100*this.options.timenav_height_percentage)),this._timenav.ready&&this.options.timenav_height_min<this._timenav.getMinimumHeight()&&(this.options.timenav_height_min=this._timenav.getMinimumHeight()),r<this.options.timenav_height_min&&(r=this.options.timenav_height_min),r=r-this.options.marker_padding*2,r}_validateOptions(){for(var t=["timenav_height","timenav_height_min","marker_height_min","marker_width_min","marker_padding","start_at_slide","slide_padding_lr"],i=0;i<t.length;i++){var r=t[i],s=this.options[r];let u=!0;typeof s=="number"?u=s==parseInt(s):typeof s=="string"&&(u=s.match(/^\s*(\-?\d+)?\s*$/)),u||this.config.logError({message_key:"invalid_integer_option",detail:r})}}_getSlideIndex(t){if(this.config){if(this.config.title&&this.config.title.unique_id==t)return 0;for(var i=0;i<this.config.events.length;i++)if(t==this.config.events[i].unique_id)return this.config.title?i+1:i}return-1}_getEventIndex(t){for(var i=0;i<this.config.events.length;i++)if(t==this.config.events[i].unique_id)return i;return-1}_onLoaded(){if(this._loaded.storyslider&&this._loaded.timenav&&(this.fire("loaded",this.config),AY(this.options.start_at_end)||this.options.start_at_slide>this.config.events.length?this.goToEnd():this.goTo(this.options.start_at_slide),this.options.hash_bookmark)){window.location.hash!=""?this.goToId(window.location.hash.replace("#event-","")):this._updateHashBookmark(this.current_id);let t=this;window.addEventListener("hashchange",function(){window.location.hash.indexOf("#event-")==0&&t.goToId(window.location.hash.replace("#event-",""))},!1)}}_updateHashBookmark(t){if(t){var i="#event-"+t.toString();window.history.replaceState(null,"Browsing TimelineJS",i),this.fire("hash_updated",{unique_id:this.current_id,hashbookmark:"#event-"+t.toString()},this)}}zoomIn(){this._timenav.zoomIn()}zoomOut(){this._timenav.zoomOut()}setZoom(t){this._timenav.setZoom(t)}goToId(t){this.current_id!=t&&(this.current_id=t,this._timenav.goToId(this.current_id),this._storyslider.goToId(this.current_id,!1,!0),this.fire("change",{unique_id:this.current_id},this))}goTo(t){if(!(t<0))try{this.config.title?t===0?this.goToId(this.config.title.unique_id):this.goToId(this.config.events[t-1].unique_id):this.goToId(this.config.events[t].unique_id)}catch{return}}goToStart(){this.goTo(0)}goToEnd(){var t=this.config.events.length-1;this.goTo(this.config.title?t+1:t)}goToPrev(){this.goTo(this._getSlideIndex(this.current_id)-1),this.focusContainer()}goToNext(){this.goTo(this._getSlideIndex(this.current_id)+1),this.focusContainer()}add(t){var i=this.config.addEvent(t),r=this._getEventIndex(i),s=this.config.events[r];this._storyslider.createSlide(s,this.config.title?r+1:r),this._storyslider._updateDrawSlides(),this._timenav.createMarker(s,r),this._timenav._updateDrawTimeline(!1),this.fire("added",{unique_id:i})}remove(t){if(t>=0&&t<this.config.events.length){this.config.events[t].unique_id==this.current_id&&(t<this.config.events.length-1?this.goTo(t+1):this.goTo(t-1));var i=this.config.events.splice(t,1);delete this.config.event_dict[i[0].unique_id],this._storyslider.destroySlide(this.config.title?t+1:t),this._storyslider._updateDrawSlides(),this._timenav.destroyMarker(t),this._timenav._updateDrawTimeline(!1),this.fire("removed",{unique_id:i[0].unique_id})}}removeId(t){this.remove(this._getEventIndex(t))}getData(t){if(this.config.title){if(t==0)return this.config.title;if(t>0&&t<=this.config.events.length)return this.config.events[t-1]}else if(t>=0&&t<this.config.events.length)return this.config.events[t];return null}getDataById(t){return this.getData(this._getSlideIndex(t))}getSlide(t){return t>=0&&t<this._storyslider._slides.length?this._storyslider._slides[t]:null}getSlideById(t){return this.getSlide(this._getSlideIndex(t))}getCurrentSlide(){return this.getSlideById(this.current_id)}updateDisplay(){this.ready?this._updateDisplay():gi("updateDisplay called but timeline is not in ready state")}focusContainer(){this._el.container.focus()}_initGoogleAnalytics(){(function(t,i,r,s,u,d,l){t.GoogleAnalyticsObject=u,t[u]=t[u]||function(){(t[u].q=t[u].q||[]).push(arguments)},t[u].l=1*new Date,d=i.createElement(r),l=i.getElementsByTagName(r)[0],d.async=1,d.src=s,l.parentNode.insertBefore(d,l)})(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create",this.options.ga_property_id,"auto"),ga("set","anonymizeIp",!0)}_initAnalytics(){if(this.options.ga_property_id!==null){this._initGoogleAnalytics(),ga("send","pageview");var t=this.options.track_events;for(let r=0;r<t.length;r++){var i=t[r];this.addEventListener(i,function(s){ga("send","event",s.type,"clicked")})}}}}Ss(EP,vl,Ts);function yQ(e){return{display_date:e.toLocaleDateString("en-US",{timeZone:"UTC",day:"2-digit",month:"2-digit",year:"numeric"}),year:e.getUTCFullYear(),month:e.getUTCMonth()+1,day:e.getUTCDate()}}function N2(e){const t=typeof e=="string"?Number.parseInt(e):e,i=new Date(t*1e3);return yQ(i)}function bQ(e){const t=r=>`<li>${r}</li>`,i=r=>{var s;return`<div class="previewEntry"><strong>${r.label}:</strong><ul>${((s=r.entries)==null?void 0:s.map(t).join(""))??""}</ul></div>`};return e.map(i).join("")}function xQ(e){var l,m;if(!((l=e.dates)!=null&&l.length))return null;const t=e.dates[0].dateAsset[0],i=N2(t.start.numeric),r=(m=t.end)!=null&&m.numeric?N2(t.end.numeric):void 0,s=`<a href="/defaultinstance/asset/viewAsset/${e.objectId}">${e.title}</a>`,u=e.entries?bQ(e.entries):"",d=e.primaryHandlerThumbnail2x?{thumbnail:e.primaryHandlerThumbnail2x,url:e.primaryHandlerThumbnail2x}:void 0;return{start_date:i,...r&&{end_date:r},text:{headline:s,text:u},media:d}}function wQ(e){return e.map(xQ).filter(t=>t!==null)}const CP=e=>(ro("data-v-c023243c"),e=e(),so(),e),SQ={class:"search-results-timeline"},TQ={key:0,class:"flex flex-col items-center justify-center py-16 gap-4"},EQ=CP(()=>ue("h2",{class:"text-2xl font-medium"},"No Timeline Events",-1)),CQ=CP(()=>ue("p",null,"The loaded results don't have dates, so we can't make a timeline.",-1)),IQ=lt({__name:"SearchResultsTimeline",props:{totalResults:{},matches:{},status:{}},emits:["loadMore"],setup(e){const t=e,i=Fe([]),r=Fe(null),s=Fe(null);function u(d){const l=d.cloneNode(!0);return d.parentNode.replaceChild(l,d),l}return Bn(()=>{i.value=wQ(t.matches),i.value.length&&(r.value=new EP("timeline-embed",{events:i.value},{timenav_position:"bottom",timenav_height_percentage:50,start_at_end:!0}))}),Wi(()=>{s.value&&(s.value.innerHTML="",u(s.value))}),(d,l)=>(H(),me("div",SQ,[i.value.length?ot("",!0):(H(),me("div",TQ,[EQ,CQ,d.matches.length<d.totalResults?(H(),We(si,{key:0,onClick:l[0]||(l[0]=m=>d.$emit("loadMore"))},{default:Me(()=>[Mt(" Load More "),d.status==="fetching"?(H(),We(zo,{key:0,class:"w-4 h-4 ml-2"})):ot("",!0)]),_:1})):ot("",!0)])),ue("div",{id:"timeline-embed",ref_key:"timelineEmbed",ref:s},null,512)]))}});const IP=sn(IQ,[["__scopeId","data-v-c023243c"]]);function AQ(e){return e.locations?e.locations.flatMap(t=>t.entries?t.entries.map(i=>i.loc?{lng:i.loc.coordinates[0],lat:i.loc.coordinates[1]}:null):[]).filter(t=>t!==null):[]}const Kg=e=>(t,i)=>e(t,i),MQ=e=>{const t=e.map(u=>u.lng).reduce(Kg(Math.min),1/0),i=e.map(cv("lat")).reduce(Kg(Math.min),1/0),r=e.map(cv("lng")).reduce(Kg(Math.max),-1/0),s=e.map(cv("lat")).reduce(Kg(Math.max),-1/0);return[[t,i],[r,s]]};function kQ(e){const[[t,i],[r,s]]=e;return{lng:(t+r)/2,lat:(i+s)/2}}const PQ={class:"search-results-map mb-16"},DQ={key:0,class:"flex flex-col items-center justify-center py-16 gap-4"},LQ=ue("h2",{class:"text-2xl font-medium"},"No Locations",-1),OQ=ue("p",null,"The loaded results don't have locations, so we can't make a map.",-1),RQ={class:"my-2"},FQ={key:0,class:"inline-flex items-baseline flex-wrap m-0"},$Q={class:"text-xs uppercase"},zQ={class:"text-sm"},AP=lt({__name:"SearchResultsMap",props:{totalResults:{},matches:{},status:{}},emits:["loadMore"],setup(e){const t=e,i=nc(()=>qa(()=>Promise.resolve().then(()=>z1),void 0)),r=nc(()=>qa(()=>import("./MapMarker-21ad5ba2.js"),[])),s=nc(()=>qa(()=>import("./MapPopup-20d9cedc.js"),["assets/MapPopup-20d9cedc.js","assets/MapPopup-56628758.css"]));function u(g){return typeof g.title=="string"?g.title:Array.isArray(g.title)&&g.title.length>0?g.title[0]:"(No Title)"}const d=Oe(()=>t.matches.reduce((g,x)=>{if(!x.primaryHandlerId)return g;const w=dl(x.objectId),C=_c(x.primaryHandlerId),I=u(x),L=AQ(x).map($=>({id:`${x.objectId}-${$.lng}-${$.lat}`,assetUrl:w,title:I,imgSrc:C,entries:x.entries??[],...$}));return g.concat(L)},[])),l=Oe(()=>{const g=d.value.map(x=>({lng:x.lng,lat:x.lat}));return MQ(g)}),m=Oe(()=>kQ(l.value));return(g,x)=>(H(),me("div",PQ,[d.value.length?ot("",!0):(H(),me("div",DQ,[LQ,OQ,g.matches.length<(g.totalResults??1/0)?(H(),We(si,{key:0,onClick:x[0]||(x[0]=w=>g.$emit("loadMore"))},{default:Me(()=>[Mt(" Load More "),g.status==="fetching"?(H(),We(zo,{key:0,class:"w-4 h-4 ml-2"})):ot("",!0)]),_:1})):ot("",!0)])),d.value.length>0?(H(),We(he(i),{key:1,zoom:10,mapStyle:"light",apiKey:he(ci).arcgis.apiKey,bounds:l.value,center:m.value,mapContainerClass:"!h-[50vh]"},{default:Me(()=>[(H(!0),me(Nt,null,Fn(d.value,w=>(H(),We(he(r),{id:w.id,key:w.id,lng:w.lng,lat:w.lat},{default:Me(()=>[ye(he(s),null,{default:Me(()=>[ye(as,{to:w.assetUrl},{default:Me(()=>[w.imgSrc?(H(),We(Au,{key:0,src:w.imgSrc,alt:w.title,class:"h-8 w-8 sm:h-16 sm:w-16 object-cover rounded-md overflow-hidden border"},null,8,["src","alt"])):ot("",!0)]),_:2},1032,["to"]),ue("h1",RQ,[ye(as,{to:w.assetUrl},{default:Me(()=>[Mt(xt(w.title),1)]),_:2},1032,["to"])]),w.entries?(H(),me("dl",FQ,[(H(!0),me(Nt,null,Fn(w.entries,(C,I)=>{var M;return H(),me("div",{key:I,class:"inline-flex items-baseline gap-x-2 flex-wrap text-neutral-400 group-hover:text-blue-700 group-focus:text-blue-700"},[ue("dt",$Q,xt((C==null?void 0:C.label)||"Item"),1),ue("dd",zQ,xt((M=C.entries)==null?void 0:M.join(", ")),1)])}),128))])):ot("",!0)]),_:2},1024)]),_:2},1032,["id","lng","lat"]))),128))]),_:1},8,["apiKey","bounds","center"])):ot("",!0)]))}});function U2(e){return e!==null&&typeof e=="object"&&"constructor"in e&&e.constructor===Object}function Y1(e={},t={}){Object.keys(t).forEach(i=>{typeof e[i]>"u"?e[i]=t[i]:U2(t[i])&&U2(e[i])&&Object.keys(t[i]).length>0&&Y1(e[i],t[i])})}const MP={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function co(){const e=typeof document<"u"?document:{};return Y1(e,MP),e}const BQ={document:MP,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(e){return typeof setTimeout>"u"?(e(),null):setTimeout(e,0)},cancelAnimationFrame(e){typeof setTimeout>"u"||clearTimeout(e)}};function Es(){const e=typeof window<"u"?window:{};return Y1(e,BQ),e}function NQ(e){const t=e;Object.keys(t).forEach(i=>{try{t[i]=null}catch{}try{delete t[i]}catch{}})}function Jv(e,t=0){return setTimeout(e,t)}function Qv(){return Date.now()}function UQ(e){const t=Es();let i;return t.getComputedStyle&&(i=t.getComputedStyle(e,null)),!i&&e.currentStyle&&(i=e.currentStyle),i||(i=e.style),i}function jQ(e,t="x"){const i=Es();let r,s,u;const d=UQ(e);return i.WebKitCSSMatrix?(s=d.transform||d.webkitTransform,s.split(",").length>6&&(s=s.split(", ").map(l=>l.replace(",",".")).join(", ")),u=new i.WebKitCSSMatrix(s==="none"?"":s)):(u=d.MozTransform||d.OTransform||d.MsTransform||d.msTransform||d.transform||d.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=u.toString().split(",")),t==="x"&&(i.WebKitCSSMatrix?s=u.m41:r.length===16?s=parseFloat(r[12]):s=parseFloat(r[4])),t==="y"&&(i.WebKitCSSMatrix?s=u.m42:r.length===16?s=parseFloat(r[13]):s=parseFloat(r[5])),s||0}function Qf(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function VQ(e){return typeof window<"u"&&typeof window.HTMLElement<"u"?e instanceof HTMLElement:e&&(e.nodeType===1||e.nodeType===11)}function Xs(...e){const t=Object(e[0]),i=["__proto__","constructor","prototype"];for(let r=1;r<e.length;r+=1){const s=e[r];if(s!=null&&!VQ(s)){const u=Object.keys(Object(s)).filter(d=>i.indexOf(d)<0);for(let d=0,l=u.length;d<l;d+=1){const m=u[d],g=Object.getOwnPropertyDescriptor(s,m);g!==void 0&&g.enumerable&&(Qf(t[m])&&Qf(s[m])?s[m].__swiper__?t[m]=s[m]:Xs(t[m],s[m]):!Qf(t[m])&&Qf(s[m])?(t[m]={},s[m].__swiper__?t[m]=s[m]:Xs(t[m],s[m])):t[m]=s[m])}}}return t}function Xg(e,t,i){e.style.setProperty(t,i)}function kP({swiper:e,targetPosition:t,side:i}){const r=Es(),s=-e.translate;let u=null,d;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const m=t>s?"next":"prev",g=(w,C)=>m==="next"&&w>=C||m==="prev"&&w<=C,x=()=>{d=new Date().getTime(),u===null&&(u=d);const w=Math.max(Math.min((d-u)/l,1),0),C=.5-Math.cos(w*Math.PI)/2;let I=s+C*(t-s);if(g(I,t)&&(I=t),e.wrapperEl.scrollTo({[i]:I}),g(I,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:I})}),r.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=r.requestAnimationFrame(x)};x()}function Za(e,t=""){return[...e.children].filter(i=>i.matches(t))}function ey(e,t=[]){const i=document.createElement(e);return i.classList.add(...Array.isArray(t)?t:[t]),i}function PP(e){const t=Es(),i=co(),r=e.getBoundingClientRect(),s=i.body,u=e.clientTop||s.clientTop||0,d=e.clientLeft||s.clientLeft||0,l=e===t?t.scrollY:e.scrollTop,m=e===t?t.scrollX:e.scrollLeft;return{top:r.top+l-u,left:r.left+m-d}}function HQ(e,t){const i=[];for(;e.previousElementSibling;){const r=e.previousElementSibling;t?r.matches(t)&&i.push(r):i.push(r),e=r}return i}function GQ(e,t){const i=[];for(;e.nextElementSibling;){const r=e.nextElementSibling;t?r.matches(t)&&i.push(r):i.push(r),e=r}return i}function Jl(e,t){return Es().getComputedStyle(e,null).getPropertyValue(t)}function bx(e){let t=e,i;if(t){for(i=0;(t=t.previousSibling)!==null;)t.nodeType===1&&(i+=1);return i}}function xx(e,t){const i=[];let r=e.parentElement;for(;r;)t?r.matches(t)&&i.push(r):i.push(r),r=r.parentElement;return i}function j2(e,t,i){const r=Es();return i?e[t==="width"?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-left":"margin-bottom")):e.offsetWidth}let Q0;function WQ(){const e=Es(),t=co();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}function DP(){return Q0||(Q0=WQ()),Q0}let eb;function qQ({userAgent:e}={}){const t=DP(),i=Es(),r=i.navigator.platform,s=e||i.navigator.userAgent,u={ios:!1,android:!1},d=i.screen.width,l=i.screen.height,m=s.match(/(Android);?[\s\/]+([\d.]+)?/);let g=s.match(/(iPad).*OS\s([\d_]+)/);const x=s.match(/(iPod)(.*OS\s([\d_]+))?/),w=!g&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),C=r==="Win32";let I=r==="MacIntel";const M=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!g&&I&&t.touch&&M.indexOf(`${d}x${l}`)>=0&&(g=s.match(/(Version)\/([\d.]+)/),g||(g=[0,1,"13_0_0"]),I=!1),m&&!C&&(u.os="android",u.android=!0),(g||w||x)&&(u.os="ios",u.ios=!0),u}function ZQ(e={}){return eb||(eb=qQ(e)),eb}let tb;function KQ(){const e=Es();let t=!1;function i(){const r=e.navigator.userAgent.toLowerCase();return r.indexOf("safari")>=0&&r.indexOf("chrome")<0&&r.indexOf("android")<0}if(i()){const r=String(e.navigator.userAgent);if(r.includes("Version/")){const[s,u]=r.split("Version/")[1].split(" ")[0].split(".").map(d=>Number(d));t=s<16||s===16&&u<2}}return{isSafari:t||i(),needPerspectiveFix:t,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}function XQ(){return tb||(tb=KQ()),tb}function YQ({swiper:e,on:t,emit:i}){const r=Es();let s=null,u=null;const d=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(s=new ResizeObserver(x=>{u=r.requestAnimationFrame(()=>{const{width:w,height:C}=e;let I=w,M=C;x.forEach(({contentBoxSize:L,contentRect:$,target:F})=>{F&&F!==e.el||(I=$?$.width:(L[0]||L).inlineSize,M=$?$.height:(L[0]||L).blockSize)}),(I!==w||M!==C)&&d()})}),s.observe(e.el))},m=()=>{u&&r.cancelAnimationFrame(u),s&&s.unobserve&&e.el&&(s.unobserve(e.el),s=null)},g=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof r.ResizeObserver<"u"){l();return}r.addEventListener("resize",d),r.addEventListener("orientationchange",g)}),t("destroy",()=>{m(),r.removeEventListener("resize",d),r.removeEventListener("orientationchange",g)})}function JQ({swiper:e,extendParams:t,on:i,emit:r}){const s=[],u=Es(),d=(g,x={})=>{const w=u.MutationObserver||u.WebkitMutationObserver,C=new w(I=>{if(e.__preventObserver__)return;if(I.length===1){r("observerUpdate",I[0]);return}const M=function(){r("observerUpdate",I[0])};u.requestAnimationFrame?u.requestAnimationFrame(M):u.setTimeout(M,0)});C.observe(g,{attributes:typeof x.attributes>"u"?!0:x.attributes,childList:typeof x.childList>"u"?!0:x.childList,characterData:typeof x.characterData>"u"?!0:x.characterData}),s.push(C)},l=()=>{if(e.params.observer){if(e.params.observeParents){const g=xx(e.el);for(let x=0;x<g.length;x+=1)d(g[x])}d(e.el,{childList:e.params.observeSlideChildren}),d(e.wrapperEl,{attributes:!1})}},m=()=>{s.forEach(g=>{g.disconnect()}),s.splice(0,s.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",l),i("destroy",m)}const QQ={on(e,t,i){const r=this;if(!r.eventsListeners||r.destroyed||typeof t!="function")return r;const s=i?"unshift":"push";return e.split(" ").forEach(u=>{r.eventsListeners[u]||(r.eventsListeners[u]=[]),r.eventsListeners[u][s](t)}),r},once(e,t,i){const r=this;if(!r.eventsListeners||r.destroyed||typeof t!="function")return r;function s(...u){r.off(e,s),s.__emitterProxy&&delete s.__emitterProxy,t.apply(r,u)}return s.__emitterProxy=t,r.on(e,s,i)},onAny(e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const r=t?"unshift":"push";return i.eventsAnyListeners.indexOf(e)<0&&i.eventsAnyListeners[r](e),i},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsAnyListeners)return t;const i=t.eventsAnyListeners.indexOf(e);return i>=0&&t.eventsAnyListeners.splice(i,1),t},off(e,t){const i=this;return!i.eventsListeners||i.destroyed||!i.eventsListeners||e.split(" ").forEach(r=>{typeof t>"u"?i.eventsListeners[r]=[]:i.eventsListeners[r]&&i.eventsListeners[r].forEach((s,u)=>{(s===t||s.__emitterProxy&&s.__emitterProxy===t)&&i.eventsListeners[r].splice(u,1)})}),i},emit(...e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsListeners)return t;let i,r,s;return typeof e[0]=="string"||Array.isArray(e[0])?(i=e[0],r=e.slice(1,e.length),s=t):(i=e[0].events,r=e[0].data,s=e[0].context||t),r.unshift(s),(Array.isArray(i)?i:i.split(" ")).forEach(d=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(l=>{l.apply(s,[d,...r])}),t.eventsListeners&&t.eventsListeners[d]&&t.eventsListeners[d].forEach(l=>{l.apply(s,r)})}),t}};function eee(){const e=this;let t,i;const r=e.el;typeof e.params.width<"u"&&e.params.width!==null?t=e.params.width:t=r.clientWidth,typeof e.params.height<"u"&&e.params.height!==null?i=e.params.height:i=r.clientHeight,!(t===0&&e.isHorizontal()||i===0&&e.isVertical())&&(t=t-parseInt(Jl(r,"padding-left")||0,10)-parseInt(Jl(r,"padding-right")||0,10),i=i-parseInt(Jl(r,"padding-top")||0,10)-parseInt(Jl(r,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(i)&&(i=0),Object.assign(e,{width:t,height:i,size:e.isHorizontal()?t:i}))}function tee(){const e=this;function t(z){return e.isHorizontal()?z:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[z]}function i(z,ie){return parseFloat(z.getPropertyValue(t(ie))||0)}const r=e.params,{wrapperEl:s,slidesEl:u,size:d,rtlTranslate:l,wrongRTL:m}=e,g=e.virtual&&r.virtual.enabled,x=g?e.virtual.slides.length:e.slides.length,w=Za(u,`.${e.params.slideClass}, swiper-slide`),C=g?e.virtual.slides.length:w.length;let I=[];const M=[],L=[];let $=r.slidesOffsetBefore;typeof $=="function"&&($=r.slidesOffsetBefore.call(e));let F=r.slidesOffsetAfter;typeof F=="function"&&(F=r.slidesOffsetAfter.call(e));const U=e.snapGrid.length,ee=e.slidesGrid.length;let V=r.spaceBetween,Q=-$,ae=0,be=0;if(typeof d>"u")return;typeof V=="string"&&V.indexOf("%")>=0?V=parseFloat(V.replace("%",""))/100*d:typeof V=="string"&&(V=parseFloat(V)),e.virtualSize=-V,w.forEach(z=>{l?z.style.marginLeft="":z.style.marginRight="",z.style.marginBottom="",z.style.marginTop=""}),r.centeredSlides&&r.cssMode&&(Xg(s,"--swiper-centered-offset-before",""),Xg(s,"--swiper-centered-offset-after",""));const te=r.grid&&r.grid.rows>1&&e.grid;te&&e.grid.initSlides(C);let G;const j=r.slidesPerView==="auto"&&r.breakpoints&&Object.keys(r.breakpoints).filter(z=>typeof r.breakpoints[z].slidesPerView<"u").length>0;for(let z=0;z<C;z+=1){G=0;let ie;if(w[z]&&(ie=w[z]),te&&e.grid.updateSlide(z,ie,C,t),!(w[z]&&Jl(ie,"display")==="none")){if(r.slidesPerView==="auto"){j&&(w[z].style[t("width")]="");const X=getComputedStyle(ie),ne=ie.style.transform,Ee=ie.style.webkitTransform;if(ne&&(ie.style.transform="none"),Ee&&(ie.style.webkitTransform="none"),r.roundLengths)G=e.isHorizontal()?j2(ie,"width",!0):j2(ie,"height",!0);else{const Ce=i(X,"width"),Xe=i(X,"padding-left"),at=i(X,"padding-right"),it=i(X,"margin-left"),$t=i(X,"margin-right"),Ct=X.getPropertyValue("box-sizing");if(Ct&&Ct==="border-box")G=Ce+it+$t;else{const{clientWidth:tt,offsetWidth:et}=ie;G=Ce+Xe+at+it+$t+(et-tt)}}ne&&(ie.style.transform=ne),Ee&&(ie.style.webkitTransform=Ee),r.roundLengths&&(G=Math.floor(G))}else G=(d-(r.slidesPerView-1)*V)/r.slidesPerView,r.roundLengths&&(G=Math.floor(G)),w[z]&&(w[z].style[t("width")]=`${G}px`);w[z]&&(w[z].swiperSlideSize=G),L.push(G),r.centeredSlides?(Q=Q+G/2+ae/2+V,ae===0&&z!==0&&(Q=Q-d/2-V),z===0&&(Q=Q-d/2-V),Math.abs(Q)<1/1e3&&(Q=0),r.roundLengths&&(Q=Math.floor(Q)),be%r.slidesPerGroup===0&&I.push(Q),M.push(Q)):(r.roundLengths&&(Q=Math.floor(Q)),(be-Math.min(e.params.slidesPerGroupSkip,be))%e.params.slidesPerGroup===0&&I.push(Q),M.push(Q),Q=Q+G+V),e.virtualSize+=G+V,ae=G,be+=1}}if(e.virtualSize=Math.max(e.virtualSize,d)+F,l&&m&&(r.effect==="slide"||r.effect==="coverflow")&&(s.style.width=`${e.virtualSize+V}px`),r.setWrapperSize&&(s.style[t("width")]=`${e.virtualSize+V}px`),te&&e.grid.updateWrapperSize(G,I,t),!r.centeredSlides){const z=[];for(let ie=0;ie<I.length;ie+=1){let X=I[ie];r.roundLengths&&(X=Math.floor(X)),I[ie]<=e.virtualSize-d&&z.push(X)}I=z,Math.floor(e.virtualSize-d)-Math.floor(I[I.length-1])>1&&I.push(e.virtualSize-d)}if(g&&r.loop){const z=L[0]+V;if(r.slidesPerGroup>1){const ie=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/r.slidesPerGroup),X=z*r.slidesPerGroup;for(let ne=0;ne<ie;ne+=1)I.push(I[I.length-1]+X)}for(let ie=0;ie<e.virtual.slidesBefore+e.virtual.slidesAfter;ie+=1)r.slidesPerGroup===1&&I.push(I[I.length-1]+z),M.push(M[M.length-1]+z),e.virtualSize+=z}if(I.length===0&&(I=[0]),V!==0){const z=e.isHorizontal()&&l?"marginLeft":t("marginRight");w.filter((ie,X)=>!r.cssMode||r.loop?!0:X!==w.length-1).forEach(ie=>{ie.style[z]=`${V}px`})}if(r.centeredSlides&&r.centeredSlidesBounds){let z=0;L.forEach(X=>{z+=X+(V||0)}),z-=V;const ie=z-d;I=I.map(X=>X<0?-$:X>ie?ie+F:X)}if(r.centerInsufficientSlides){let z=0;if(L.forEach(ie=>{z+=ie+(V||0)}),z-=V,z<d){const ie=(d-z)/2;I.forEach((X,ne)=>{I[ne]=X-ie}),M.forEach((X,ne)=>{M[ne]=X+ie})}}if(Object.assign(e,{slides:w,snapGrid:I,slidesGrid:M,slidesSizesGrid:L}),r.centeredSlides&&r.cssMode&&!r.centeredSlidesBounds){Xg(s,"--swiper-centered-offset-before",`${-I[0]}px`),Xg(s,"--swiper-centered-offset-after",`${e.size/2-L[L.length-1]/2}px`);const z=-e.snapGrid[0],ie=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(X=>X+z),e.slidesGrid=e.slidesGrid.map(X=>X+ie)}if(C!==x&&e.emit("slidesLengthChange"),I.length!==U&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),M.length!==ee&&e.emit("slidesGridLengthChange"),r.watchSlidesProgress&&e.updateSlidesOffset(),!g&&!r.cssMode&&(r.effect==="slide"||r.effect==="fade")){const z=`${r.containerModifierClass}backface-hidden`,ie=e.el.classList.contains(z);C<=r.maxBackfaceHiddenSlides?ie||e.el.classList.add(z):ie&&e.el.classList.remove(z)}}function nee(e){const t=this,i=[],r=t.virtual&&t.params.virtual.enabled;let s=0,u;typeof e=="number"?t.setTransition(e):e===!0&&t.setTransition(t.params.speed);const d=l=>r?t.slides[t.getSlideIndexByData(l)]:t.slides[l];if(t.params.slidesPerView!=="auto"&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach(l=>{i.push(l)});else for(u=0;u<Math.ceil(t.params.slidesPerView);u+=1){const l=t.activeIndex+u;if(l>t.slides.length&&!r)break;i.push(d(l))}else i.push(d(t.activeIndex));for(u=0;u<i.length;u+=1)if(typeof i[u]<"u"){const l=i[u].offsetHeight;s=l>s?l:s}(s||s===0)&&(t.wrapperEl.style.height=`${s}px`)}function iee(){const e=this,t=e.slides,i=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let r=0;r<t.length;r+=1)t[r].swiperSlideOffset=(e.isHorizontal()?t[r].offsetLeft:t[r].offsetTop)-i-e.cssOverflowAdjustment()}function ree(e=this&&this.translate||0){const t=this,i=t.params,{slides:r,rtlTranslate:s,snapGrid:u}=t;if(r.length===0)return;typeof r[0].swiperSlideOffset>"u"&&t.updateSlidesOffset();let d=-e;s&&(d=e),r.forEach(m=>{m.classList.remove(i.slideVisibleClass)}),t.visibleSlidesIndexes=[],t.visibleSlides=[];let l=i.spaceBetween;typeof l=="string"&&l.indexOf("%")>=0?l=parseFloat(l.replace("%",""))/100*t.size:typeof l=="string"&&(l=parseFloat(l));for(let m=0;m<r.length;m+=1){const g=r[m];let x=g.swiperSlideOffset;i.cssMode&&i.centeredSlides&&(x-=r[0].swiperSlideOffset);const w=(d+(i.centeredSlides?t.minTranslate():0)-x)/(g.swiperSlideSize+l),C=(d-u[0]+(i.centeredSlides?t.minTranslate():0)-x)/(g.swiperSlideSize+l),I=-(d-x),M=I+t.slidesSizesGrid[m];(I>=0&&I<t.size-1||M>1&&M<=t.size||I<=0&&M>=t.size)&&(t.visibleSlides.push(g),t.visibleSlidesIndexes.push(m),r[m].classList.add(i.slideVisibleClass)),g.progress=s?-w:w,g.originalProgress=s?-C:C}}function see(e){const t=this;if(typeof e>"u"){const x=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*x||0}const i=t.params,r=t.maxTranslate()-t.minTranslate();let{progress:s,isBeginning:u,isEnd:d,progressLoop:l}=t;const m=u,g=d;if(r===0)s=0,u=!0,d=!0;else{s=(e-t.minTranslate())/r;const x=Math.abs(e-t.minTranslate())<1,w=Math.abs(e-t.maxTranslate())<1;u=x||s<=0,d=w||s>=1,x&&(s=0),w&&(s=1)}if(i.loop){const x=t.getSlideIndexByData(0),w=t.getSlideIndexByData(t.slides.length-1),C=t.slidesGrid[x],I=t.slidesGrid[w],M=t.slidesGrid[t.slidesGrid.length-1],L=Math.abs(e);L>=C?l=(L-C)/M:l=(L+M-I)/M,l>1&&(l-=1)}Object.assign(t,{progress:s,progressLoop:l,isBeginning:u,isEnd:d}),(i.watchSlidesProgress||i.centeredSlides&&i.autoHeight)&&t.updateSlidesProgress(e),u&&!m&&t.emit("reachBeginning toEdge"),d&&!g&&t.emit("reachEnd toEdge"),(m&&!u||g&&!d)&&t.emit("fromEdge"),t.emit("progress",s)}function aee(){const e=this,{slides:t,params:i,slidesEl:r,activeIndex:s}=e,u=e.virtual&&i.virtual.enabled,d=m=>Za(r,`.${i.slideClass}${m}, swiper-slide${m}`)[0];t.forEach(m=>{m.classList.remove(i.slideActiveClass,i.slideNextClass,i.slidePrevClass)});let l;if(u)if(i.loop){let m=s-e.virtual.slidesBefore;m<0&&(m=e.virtual.slides.length+m),m>=e.virtual.slides.length&&(m-=e.virtual.slides.length),l=d(`[data-swiper-slide-index="${m}"]`)}else l=d(`[data-swiper-slide-index="${s}"]`);else l=t[s];if(l){l.classList.add(i.slideActiveClass);let m=GQ(l,`.${i.slideClass}, swiper-slide`)[0];i.loop&&!m&&(m=t[0]),m&&m.classList.add(i.slideNextClass);let g=HQ(l,`.${i.slideClass}, swiper-slide`)[0];i.loop&&!g===0&&(g=t[t.length-1]),g&&g.classList.add(i.slidePrevClass)}e.emitSlidesClasses()}const vv=(e,t)=>{if(!e||e.destroyed||!e.params)return;const i=()=>e.isElement?"swiper-slide":`.${e.params.slideClass}`,r=t.closest(i());if(r){const s=r.querySelector(`.${e.params.lazyPreloaderClass}`);s&&s.remove()}},V2=(e,t)=>{if(!e.slides[t])return;const i=e.slides[t].querySelector('[loading="lazy"]');i&&i.removeAttribute("loading")},wx=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const i=e.slides.length;if(!i||!t||t<0)return;t=Math.min(t,i);const r=e.params.slidesPerView==="auto"?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),s=e.activeIndex,u=s+r-1;if(e.params.rewind)for(let d=s-t;d<=u+t;d+=1){const l=(d%i+i)%i;l!==s&&l>u&&V2(e,l)}else for(let d=Math.max(u-t,0);d<=Math.min(u+t,i-1);d+=1)d!==s&&d>u&&V2(e,d)};function oee(e){const{slidesGrid:t,params:i}=e,r=e.rtlTranslate?e.translate:-e.translate;let s;for(let u=0;u<t.length;u+=1)typeof t[u+1]<"u"?r>=t[u]&&r<t[u+1]-(t[u+1]-t[u])/2?s=u:r>=t[u]&&r<t[u+1]&&(s=u+1):r>=t[u]&&(s=u);return i.normalizeSlideIndex&&(s<0||typeof s>"u")&&(s=0),s}function lee(e){const t=this,i=t.rtlTranslate?t.translate:-t.translate,{snapGrid:r,params:s,activeIndex:u,realIndex:d,snapIndex:l}=t;let m=e,g;const x=C=>{let I=C-t.virtual.slidesBefore;return I<0&&(I=t.virtual.slides.length+I),I>=t.virtual.slides.length&&(I-=t.virtual.slides.length),I};if(typeof m>"u"&&(m=oee(t)),r.indexOf(i)>=0)g=r.indexOf(i);else{const C=Math.min(s.slidesPerGroupSkip,m);g=C+Math.floor((m-C)/s.slidesPerGroup)}if(g>=r.length&&(g=r.length-1),m===u){g!==l&&(t.snapIndex=g,t.emit("snapIndexChange")),t.params.loop&&t.virtual&&t.params.virtual.enabled&&(t.realIndex=x(m));return}let w;t.virtual&&s.virtual.enabled&&s.loop?w=x(m):t.slides[m]?w=parseInt(t.slides[m].getAttribute("data-swiper-slide-index")||m,10):w=m,Object.assign(t,{previousSnapIndex:l,snapIndex:g,previousRealIndex:d,realIndex:w,previousIndex:u,activeIndex:m}),t.initialized&&wx(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),d!==w&&t.emit("realIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&t.emit("slideChange")}function cee(e){const t=this,i=t.params,r=e.closest(`.${i.slideClass}, swiper-slide`);let s=!1,u;if(r){for(let d=0;d<t.slides.length;d+=1)if(t.slides[d]===r){s=!0,u=d;break}}if(r&&s)t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=u;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}i.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}const uee={updateSize:eee,updateSlides:tee,updateAutoHeight:nee,updateSlidesOffset:iee,updateSlidesProgress:ree,updateProgress:see,updateSlidesClasses:aee,updateActiveIndex:lee,updateClickedSlide:cee};function dee(e=this.isHorizontal()?"x":"y"){const t=this,{params:i,rtlTranslate:r,translate:s,wrapperEl:u}=t;if(i.virtualTranslate)return r?-s:s;if(i.cssMode)return s;let d=jQ(u,e);return d+=t.cssOverflowAdjustment(),r&&(d=-d),d||0}function hee(e,t){const i=this,{rtlTranslate:r,params:s,wrapperEl:u,progress:d}=i;let l=0,m=0;const g=0;i.isHorizontal()?l=r?-e:e:m=e,s.roundLengths&&(l=Math.floor(l),m=Math.floor(m)),i.previousTranslate=i.translate,i.translate=i.isHorizontal()?l:m,s.cssMode?u[i.isHorizontal()?"scrollLeft":"scrollTop"]=i.isHorizontal()?-l:-m:s.virtualTranslate||(i.isHorizontal()?l-=i.cssOverflowAdjustment():m-=i.cssOverflowAdjustment(),u.style.transform=`translate3d(${l}px, ${m}px, ${g}px)`);let x;const w=i.maxTranslate()-i.minTranslate();w===0?x=0:x=(e-i.minTranslate())/w,x!==d&&i.updateProgress(e),i.emit("setTranslate",i.translate,t)}function fee(){return-this.snapGrid[0]}function pee(){return-this.snapGrid[this.snapGrid.length-1]}function mee(e=0,t=this.params.speed,i=!0,r=!0,s){const u=this,{params:d,wrapperEl:l}=u;if(u.animating&&d.preventInteractionOnTransition)return!1;const m=u.minTranslate(),g=u.maxTranslate();let x;if(r&&e>m?x=m:r&&e<g?x=g:x=e,u.updateProgress(x),d.cssMode){const w=u.isHorizontal();if(t===0)l[w?"scrollLeft":"scrollTop"]=-x;else{if(!u.support.smoothScroll)return kP({swiper:u,targetPosition:-x,side:w?"left":"top"}),!0;l.scrollTo({[w?"left":"top"]:-x,behavior:"smooth"})}return!0}return t===0?(u.setTransition(0),u.setTranslate(x),i&&(u.emit("beforeTransitionStart",t,s),u.emit("transitionEnd"))):(u.setTransition(t),u.setTranslate(x),i&&(u.emit("beforeTransitionStart",t,s),u.emit("transitionStart")),u.animating||(u.animating=!0,u.onTranslateToWrapperTransitionEnd||(u.onTranslateToWrapperTransitionEnd=function(C){!u||u.destroyed||C.target===this&&(u.wrapperEl.removeEventListener("transitionend",u.onTranslateToWrapperTransitionEnd),u.onTranslateToWrapperTransitionEnd=null,delete u.onTranslateToWrapperTransitionEnd,i&&u.emit("transitionEnd"))}),u.wrapperEl.addEventListener("transitionend",u.onTranslateToWrapperTransitionEnd))),!0}const gee={getTranslate:dee,setTranslate:hee,minTranslate:fee,maxTranslate:pee,translateTo:mee};function vee(e,t){const i=this;i.params.cssMode||(i.wrapperEl.style.transitionDuration=`${e}ms`),i.emit("setTransition",e,t)}function LP({swiper:e,runCallbacks:t,direction:i,step:r}){const{activeIndex:s,previousIndex:u}=e;let d=i;if(d||(s>u?d="next":s<u?d="prev":d="reset"),e.emit(`transition${r}`),t&&s!==u){if(d==="reset"){e.emit(`slideResetTransition${r}`);return}e.emit(`slideChangeTransition${r}`),d==="next"?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`)}}function _ee(e=!0,t){const i=this,{params:r}=i;r.cssMode||(r.autoHeight&&i.updateAutoHeight(),LP({swiper:i,runCallbacks:e,direction:t,step:"Start"}))}function yee(e=!0,t){const i=this,{params:r}=i;i.animating=!1,!r.cssMode&&(i.setTransition(0),LP({swiper:i,runCallbacks:e,direction:t,step:"End"}))}const bee={setTransition:vee,transitionStart:_ee,transitionEnd:yee};function xee(e=0,t=this.params.speed,i=!0,r,s){typeof e=="string"&&(e=parseInt(e,10));const u=this;let d=e;d<0&&(d=0);const{params:l,snapGrid:m,slidesGrid:g,previousIndex:x,activeIndex:w,rtlTranslate:C,wrapperEl:I,enabled:M}=u;if(u.animating&&l.preventInteractionOnTransition||!M&&!r&&!s)return!1;const L=Math.min(u.params.slidesPerGroupSkip,d);let $=L+Math.floor((d-L)/u.params.slidesPerGroup);$>=m.length&&($=m.length-1);const F=-m[$];if(l.normalizeSlideIndex)for(let ee=0;ee<g.length;ee+=1){const V=-Math.floor(F*100),Q=Math.floor(g[ee]*100),ae=Math.floor(g[ee+1]*100);typeof g[ee+1]<"u"?V>=Q&&V<ae-(ae-Q)/2?d=ee:V>=Q&&V<ae&&(d=ee+1):V>=Q&&(d=ee)}if(u.initialized&&d!==w&&(!u.allowSlideNext&&F<u.translate&&F<u.minTranslate()||!u.allowSlidePrev&&F>u.translate&&F>u.maxTranslate()&&(w||0)!==d))return!1;d!==(x||0)&&i&&u.emit("beforeSlideChangeStart"),u.updateProgress(F);let U;if(d>w?U="next":d<w?U="prev":U="reset",C&&-F===u.translate||!C&&F===u.translate)return u.updateActiveIndex(d),l.autoHeight&&u.updateAutoHeight(),u.updateSlidesClasses(),l.effect!=="slide"&&u.setTranslate(F),U!=="reset"&&(u.transitionStart(i,U),u.transitionEnd(i,U)),!1;if(l.cssMode){const ee=u.isHorizontal(),V=C?F:-F;if(t===0){const Q=u.virtual&&u.params.virtual.enabled;Q&&(u.wrapperEl.style.scrollSnapType="none",u._immediateVirtual=!0),Q&&!u._cssModeVirtualInitialSet&&u.params.initialSlide>0?(u._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{I[ee?"scrollLeft":"scrollTop"]=V})):I[ee?"scrollLeft":"scrollTop"]=V,Q&&requestAnimationFrame(()=>{u.wrapperEl.style.scrollSnapType="",u._immediateVirtual=!1})}else{if(!u.support.smoothScroll)return kP({swiper:u,targetPosition:V,side:ee?"left":"top"}),!0;I.scrollTo({[ee?"left":"top"]:V,behavior:"smooth"})}return!0}return u.setTransition(t),u.setTranslate(F),u.updateActiveIndex(d),u.updateSlidesClasses(),u.emit("beforeTransitionStart",t,r),u.transitionStart(i,U),t===0?u.transitionEnd(i,U):u.animating||(u.animating=!0,u.onSlideToWrapperTransitionEnd||(u.onSlideToWrapperTransitionEnd=function(V){!u||u.destroyed||V.target===this&&(u.wrapperEl.removeEventListener("transitionend",u.onSlideToWrapperTransitionEnd),u.onSlideToWrapperTransitionEnd=null,delete u.onSlideToWrapperTransitionEnd,u.transitionEnd(i,U))}),u.wrapperEl.addEventListener("transitionend",u.onSlideToWrapperTransitionEnd)),!0}function wee(e=0,t=this.params.speed,i=!0,r){typeof e=="string"&&(e=parseInt(e,10));const s=this;let u=e;return s.params.loop&&(s.virtual&&s.params.virtual.enabled?u=u+s.virtual.slidesBefore:u=s.getSlideIndexByData(u)),s.slideTo(u,t,i,r)}function See(e=this.params.speed,t=!0,i){const r=this,{enabled:s,params:u,animating:d}=r;if(!s)return r;let l=u.slidesPerGroup;u.slidesPerView==="auto"&&u.slidesPerGroup===1&&u.slidesPerGroupAuto&&(l=Math.max(r.slidesPerViewDynamic("current",!0),1));const m=r.activeIndex<u.slidesPerGroupSkip?1:l,g=r.virtual&&u.virtual.enabled;if(u.loop){if(d&&!g&&u.loopPreventsSliding)return!1;r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft}return u.rewind&&r.isEnd?r.slideTo(0,e,t,i):r.slideTo(r.activeIndex+m,e,t,i)}function Tee(e=this.params.speed,t=!0,i){const r=this,{params:s,snapGrid:u,slidesGrid:d,rtlTranslate:l,enabled:m,animating:g}=r;if(!m)return r;const x=r.virtual&&s.virtual.enabled;if(s.loop){if(g&&!x&&s.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}const w=l?r.translate:-r.translate;function C(F){return F<0?-Math.floor(Math.abs(F)):Math.floor(F)}const I=C(w),M=u.map(F=>C(F));let L=u[M.indexOf(I)-1];if(typeof L>"u"&&s.cssMode){let F;u.forEach((U,ee)=>{I>=U&&(F=ee)}),typeof F<"u"&&(L=u[F>0?F-1:F])}let $=0;if(typeof L<"u"&&($=d.indexOf(L),$<0&&($=r.activeIndex-1),s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&($=$-r.slidesPerViewDynamic("previous",!0)+1,$=Math.max($,0))),s.rewind&&r.isBeginning){const F=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(F,e,t,i)}return r.slideTo($,e,t,i)}function Eee(e=this.params.speed,t=!0,i){const r=this;return r.slideTo(r.activeIndex,e,t,i)}function Cee(e=this.params.speed,t=!0,i,r=.5){const s=this;let u=s.activeIndex;const d=Math.min(s.params.slidesPerGroupSkip,u),l=d+Math.floor((u-d)/s.params.slidesPerGroup),m=s.rtlTranslate?s.translate:-s.translate;if(m>=s.snapGrid[l]){const g=s.snapGrid[l],x=s.snapGrid[l+1];m-g>(x-g)*r&&(u+=s.params.slidesPerGroup)}else{const g=s.snapGrid[l-1],x=s.snapGrid[l];m-g<=(x-g)*r&&(u-=s.params.slidesPerGroup)}return u=Math.max(u,0),u=Math.min(u,s.slidesGrid.length-1),s.slideTo(u,e,t,i)}function Iee(){const e=this,{params:t,slidesEl:i}=e,r=t.slidesPerView==="auto"?e.slidesPerViewDynamic():t.slidesPerView;let s=e.clickedIndex,u;const d=e.isElement?"swiper-slide":`.${t.slideClass}`;if(t.loop){if(e.animating)return;u=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?s<e.loopedSlides-r/2||s>e.slides.length-e.loopedSlides+r/2?(e.loopFix(),s=e.getSlideIndex(Za(i,`${d}[data-swiper-slide-index="${u}"]`)[0]),Jv(()=>{e.slideTo(s)})):e.slideTo(s):s>e.slides.length-r?(e.loopFix(),s=e.getSlideIndex(Za(i,`${d}[data-swiper-slide-index="${u}"]`)[0]),Jv(()=>{e.slideTo(s)})):e.slideTo(s)}else e.slideTo(s)}const Aee={slideTo:xee,slideToLoop:wee,slideNext:See,slidePrev:Tee,slideReset:Eee,slideToClosest:Cee,slideToClickedSlide:Iee};function Mee(e){const t=this,{params:i,slidesEl:r}=t;if(!i.loop||t.virtual&&t.params.virtual.enabled)return;Za(r,`.${i.slideClass}, swiper-slide`).forEach((u,d)=>{u.setAttribute("data-swiper-slide-index",d)}),t.loopFix({slideRealIndex:e,direction:i.centeredSlides?void 0:"next"})}function kee({slideRealIndex:e,slideTo:t=!0,direction:i,setTranslate:r,activeSlideIndex:s,byController:u,byMousewheel:d}={}){const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:m,allowSlidePrev:g,allowSlideNext:x,slidesEl:w,params:C}=l;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&C.virtual.enabled){t&&(!C.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):C.centeredSlides&&l.snapIndex<C.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=g,l.allowSlideNext=x,l.emit("loopFix");return}const I=C.slidesPerView==="auto"?l.slidesPerViewDynamic():Math.ceil(parseFloat(C.slidesPerView,10));let M=C.loopedSlides||I;M%C.slidesPerGroup!==0&&(M+=C.slidesPerGroup-M%C.slidesPerGroup),l.loopedSlides=M;const L=[],$=[];let F=l.activeIndex;typeof s>"u"?s=l.getSlideIndex(l.slides.filter(ae=>ae.classList.contains(C.slideActiveClass))[0]):F=s;const U=i==="next"||!i,ee=i==="prev"||!i;let V=0,Q=0;if(s<M){V=Math.max(M-s,C.slidesPerGroup);for(let ae=0;ae<M-s;ae+=1){const be=ae-Math.floor(ae/m.length)*m.length;L.push(m.length-be-1)}}else if(s>l.slides.length-M*2){Q=Math.max(s-(l.slides.length-M*2),C.slidesPerGroup);for(let ae=0;ae<Q;ae+=1){const be=ae-Math.floor(ae/m.length)*m.length;$.push(be)}}if(ee&&L.forEach(ae=>{l.slides[ae].swiperLoopMoveDOM=!0,w.prepend(l.slides[ae]),l.slides[ae].swiperLoopMoveDOM=!1}),U&&$.forEach(ae=>{l.slides[ae].swiperLoopMoveDOM=!0,w.append(l.slides[ae]),l.slides[ae].swiperLoopMoveDOM=!1}),l.recalcSlides(),C.slidesPerView==="auto"&&l.updateSlides(),C.watchSlidesProgress&&l.updateSlidesOffset(),t){if(L.length>0&&ee)if(typeof e>"u"){const ae=l.slidesGrid[F],te=l.slidesGrid[F+V]-ae;d?l.setTranslate(l.translate-te):(l.slideTo(F+V,0,!1,!0),r&&(l.touches[l.isHorizontal()?"startX":"startY"]+=te))}else r&&l.slideToLoop(e,0,!1,!0);else if($.length>0&&U)if(typeof e>"u"){const ae=l.slidesGrid[F],te=l.slidesGrid[F-Q]-ae;d?l.setTranslate(l.translate-te):(l.slideTo(F-Q,0,!1,!0),r&&(l.touches[l.isHorizontal()?"startX":"startY"]+=te))}else l.slideToLoop(e,0,!1,!0)}if(l.allowSlidePrev=g,l.allowSlideNext=x,l.controller&&l.controller.control&&!u){const ae={slideRealIndex:e,slideTo:!1,direction:i,setTranslate:r,activeSlideIndex:s,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(be=>{!be.destroyed&&be.params.loop&&be.loopFix(ae)}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix(ae)}l.emit("loopFix")}function Pee(){const e=this,{params:t,slidesEl:i}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const r=[];e.slides.forEach(s=>{const u=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;r[u]=s}),e.slides.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),r.forEach(s=>{i.append(s)}),e.recalcSlides(),e.slideTo(e.realIndex,0)}const Dee={loopCreate:Mee,loopFix:kee,loopDestroy:Pee};function Lee(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const i=t.params.touchEventsTarget==="container"?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),i.style.cursor="move",i.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1})}function Oee(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e[e.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1}))}const Ree={setGrabCursor:Lee,unsetGrabCursor:Oee};function Fee(e,t=this){function i(r){if(!r||r===co()||r===Es())return null;r.assignedSlot&&(r=r.assignedSlot);const s=r.closest(e);return!s&&!r.getRootNode?null:s||i(r.getRootNode().host)}return i(t)}function $ee(e){const t=this,i=co(),r=Es(),s=t.touchEventsData;s.evCache.push(e);const{params:u,touches:d,enabled:l}=t;if(!l||!u.simulateTouch&&e.pointerType==="mouse"||t.animating&&u.preventInteractionOnTransition)return;!t.animating&&u.cssMode&&u.loop&&t.loopFix();let m=e;m.originalEvent&&(m=m.originalEvent);let g=m.target;if(u.touchEventsTarget==="wrapper"&&!t.wrapperEl.contains(g)||"which"in m&&m.which===3||"button"in m&&m.button>0||s.isTouched&&s.isMoved)return;const x=!!u.noSwipingClass&&u.noSwipingClass!=="",w=e.composedPath?e.composedPath():e.path;x&&m.target&&m.target.shadowRoot&&w&&(g=w[0]);const C=u.noSwipingSelector?u.noSwipingSelector:`.${u.noSwipingClass}`,I=!!(m.target&&m.target.shadowRoot);if(u.noSwiping&&(I?Fee(C,g):g.closest(C))){t.allowClick=!0;return}if(u.swipeHandler&&!g.closest(u.swipeHandler))return;d.currentX=m.pageX,d.currentY=m.pageY;const M=d.currentX,L=d.currentY,$=u.edgeSwipeDetection||u.iOSEdgeSwipeDetection,F=u.edgeSwipeThreshold||u.iOSEdgeSwipeThreshold;if($&&(M<=F||M>=r.innerWidth-F))if($==="prevent")e.preventDefault();else return;Object.assign(s,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),d.startX=M,d.startY=L,s.touchStartTime=Qv(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,u.threshold>0&&(s.allowThresholdMove=!1);let U=!0;g.matches(s.focusableElements)&&(U=!1,g.nodeName==="SELECT"&&(s.isTouched=!1)),i.activeElement&&i.activeElement.matches(s.focusableElements)&&i.activeElement!==g&&i.activeElement.blur();const ee=U&&t.allowTouchMove&&u.touchStartPreventDefault;(u.touchStartForcePreventDefault||ee)&&!g.isContentEditable&&m.preventDefault(),t.params.freeMode&&t.params.freeMode.enabled&&t.freeMode&&t.animating&&!u.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",m)}function zee(e){const t=co(),i=this,r=i.touchEventsData,{params:s,touches:u,rtlTranslate:d,enabled:l}=i;if(!l||!s.simulateTouch&&e.pointerType==="mouse")return;let m=e;if(m.originalEvent&&(m=m.originalEvent),!r.isTouched){r.startMoving&&r.isScrolling&&i.emit("touchMoveOpposite",m);return}const g=r.evCache.findIndex(ae=>ae.pointerId===m.pointerId);g>=0&&(r.evCache[g]=m);const x=r.evCache.length>1?r.evCache[0]:m,w=x.pageX,C=x.pageY;if(m.preventedByNestedSwiper){u.startX=w,u.startY=C;return}if(!i.allowTouchMove){m.target.matches(r.focusableElements)||(i.allowClick=!1),r.isTouched&&(Object.assign(u,{startX:w,startY:C,prevX:i.touches.currentX,prevY:i.touches.currentY,currentX:w,currentY:C}),r.touchStartTime=Qv());return}if(s.touchReleaseOnEdges&&!s.loop){if(i.isVertical()){if(C<u.startY&&i.translate<=i.maxTranslate()||C>u.startY&&i.translate>=i.minTranslate()){r.isTouched=!1,r.isMoved=!1;return}}else if(w<u.startX&&i.translate<=i.maxTranslate()||w>u.startX&&i.translate>=i.minTranslate())return}if(t.activeElement&&m.target===t.activeElement&&m.target.matches(r.focusableElements)){r.isMoved=!0,i.allowClick=!1;return}if(r.allowTouchCallbacks&&i.emit("touchMove",m),m.targetTouches&&m.targetTouches.length>1)return;u.currentX=w,u.currentY=C;const I=u.currentX-u.startX,M=u.currentY-u.startY;if(i.params.threshold&&Math.sqrt(I**2+M**2)<i.params.threshold)return;if(typeof r.isScrolling>"u"){let ae;i.isHorizontal()&&u.currentY===u.startY||i.isVertical()&&u.currentX===u.startX?r.isScrolling=!1:I*I+M*M>=25&&(ae=Math.atan2(Math.abs(M),Math.abs(I))*180/Math.PI,r.isScrolling=i.isHorizontal()?ae>s.touchAngle:90-ae>s.touchAngle)}if(r.isScrolling&&i.emit("touchMoveOpposite",m),typeof r.startMoving>"u"&&(u.currentX!==u.startX||u.currentY!==u.startY)&&(r.startMoving=!0),r.isScrolling||i.zoom&&i.params.zoom&&i.params.zoom.enabled&&r.evCache.length>1){r.isTouched=!1;return}if(!r.startMoving)return;i.allowClick=!1,!s.cssMode&&m.cancelable&&m.preventDefault(),s.touchMoveStopPropagation&&!s.nested&&m.stopPropagation();let L=i.isHorizontal()?I:M,$=i.isHorizontal()?u.currentX-u.previousX:u.currentY-u.previousY;s.oneWayMovement&&(L=Math.abs(L)*(d?1:-1),$=Math.abs($)*(d?1:-1)),u.diff=L,L*=s.touchRatio,d&&(L=-L,$=-$);const F=i.touchesDirection;i.swipeDirection=L>0?"prev":"next",i.touchesDirection=$>0?"prev":"next";const U=i.params.loop&&!s.cssMode;if(!r.isMoved){if(U&&i.loopFix({direction:i.swipeDirection}),r.startTranslate=i.getTranslate(),i.setTransition(0),i.animating){const ae=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});i.wrapperEl.dispatchEvent(ae)}r.allowMomentumBounce=!1,s.grabCursor&&(i.allowSlideNext===!0||i.allowSlidePrev===!0)&&i.setGrabCursor(!0),i.emit("sliderFirstMove",m)}let ee;r.isMoved&&F!==i.touchesDirection&&U&&Math.abs(L)>=1&&(i.loopFix({direction:i.swipeDirection,setTranslate:!0}),ee=!0),i.emit("sliderMove",m),r.isMoved=!0,r.currentTranslate=L+r.startTranslate;let V=!0,Q=s.resistanceRatio;if(s.touchReleaseOnEdges&&(Q=0),L>0?(U&&!ee&&r.currentTranslate>(s.centeredSlides?i.minTranslate()-i.size/2:i.minTranslate())&&i.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>i.minTranslate()&&(V=!1,s.resistance&&(r.currentTranslate=i.minTranslate()-1+(-i.minTranslate()+r.startTranslate+L)**Q))):L<0&&(U&&!ee&&r.currentTranslate<(s.centeredSlides?i.maxTranslate()+i.size/2:i.maxTranslate())&&i.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:i.slides.length-(s.slidesPerView==="auto"?i.slidesPerViewDynamic():Math.ceil(parseFloat(s.slidesPerView,10)))}),r.currentTranslate<i.maxTranslate()&&(V=!1,s.resistance&&(r.currentTranslate=i.maxTranslate()+1-(i.maxTranslate()-r.startTranslate-L)**Q))),V&&(m.preventedByNestedSwiper=!0),!i.allowSlideNext&&i.swipeDirection==="next"&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!i.allowSlidePrev&&i.swipeDirection==="prev"&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),!i.allowSlidePrev&&!i.allowSlideNext&&(r.currentTranslate=r.startTranslate),s.threshold>0)if(Math.abs(L)>s.threshold||r.allowThresholdMove){if(!r.allowThresholdMove){r.allowThresholdMove=!0,u.startX=u.currentX,u.startY=u.currentY,r.currentTranslate=r.startTranslate,u.diff=i.isHorizontal()?u.currentX-u.startX:u.currentY-u.startY;return}}else{r.currentTranslate=r.startTranslate;return}!s.followFinger||s.cssMode||((s.freeMode&&s.freeMode.enabled&&i.freeMode||s.watchSlidesProgress)&&(i.updateActiveIndex(),i.updateSlidesClasses()),i.params.freeMode&&s.freeMode.enabled&&i.freeMode&&i.freeMode.onTouchMove(),i.updateProgress(r.currentTranslate),i.setTranslate(r.currentTranslate))}function Bee(e){const t=this,i=t.touchEventsData,r=i.evCache.findIndex(ee=>ee.pointerId===e.pointerId);if(r>=0&&i.evCache.splice(r,1),["pointercancel","pointerout","pointerleave"].includes(e.type)&&!(e.type==="pointercancel"&&(t.browser.isSafari||t.browser.isWebView)))return;const{params:s,touches:u,rtlTranslate:d,slidesGrid:l,enabled:m}=t;if(!m||!s.simulateTouch&&e.pointerType==="mouse")return;let g=e;if(g.originalEvent&&(g=g.originalEvent),i.allowTouchCallbacks&&t.emit("touchEnd",g),i.allowTouchCallbacks=!1,!i.isTouched){i.isMoved&&s.grabCursor&&t.setGrabCursor(!1),i.isMoved=!1,i.startMoving=!1;return}s.grabCursor&&i.isMoved&&i.isTouched&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!1);const x=Qv(),w=x-i.touchStartTime;if(t.allowClick){const ee=g.path||g.composedPath&&g.composedPath();t.updateClickedSlide(ee&&ee[0]||g.target),t.emit("tap click",g),w<300&&x-i.lastClickTime<300&&t.emit("doubleTap doubleClick",g)}if(i.lastClickTime=Qv(),Jv(()=>{t.destroyed||(t.allowClick=!0)}),!i.isTouched||!i.isMoved||!t.swipeDirection||u.diff===0||i.currentTranslate===i.startTranslate){i.isTouched=!1,i.isMoved=!1,i.startMoving=!1;return}i.isTouched=!1,i.isMoved=!1,i.startMoving=!1;let C;if(s.followFinger?C=d?t.translate:-t.translate:C=-i.currentTranslate,s.cssMode)return;if(t.params.freeMode&&s.freeMode.enabled){t.freeMode.onTouchEnd({currentPos:C});return}let I=0,M=t.slidesSizesGrid[0];for(let ee=0;ee<l.length;ee+=ee<s.slidesPerGroupSkip?1:s.slidesPerGroup){const V=ee<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;typeof l[ee+V]<"u"?C>=l[ee]&&C<l[ee+V]&&(I=ee,M=l[ee+V]-l[ee]):C>=l[ee]&&(I=ee,M=l[l.length-1]-l[l.length-2])}let L=null,$=null;s.rewind&&(t.isBeginning?$=t.params.virtual&&t.params.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(L=0));const F=(C-l[I])/M,U=I<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;if(w>s.longSwipesMs){if(!s.longSwipes){t.slideTo(t.activeIndex);return}t.swipeDirection==="next"&&(F>=s.longSwipesRatio?t.slideTo(s.rewind&&t.isEnd?L:I+U):t.slideTo(I)),t.swipeDirection==="prev"&&(F>1-s.longSwipesRatio?t.slideTo(I+U):$!==null&&F<0&&Math.abs(F)>s.longSwipesRatio?t.slideTo($):t.slideTo(I))}else{if(!s.shortSwipes){t.slideTo(t.activeIndex);return}t.navigation&&(g.target===t.navigation.nextEl||g.target===t.navigation.prevEl)?g.target===t.navigation.nextEl?t.slideTo(I+U):t.slideTo(I):(t.swipeDirection==="next"&&t.slideTo(L!==null?L:I+U),t.swipeDirection==="prev"&&t.slideTo($!==null?$:I))}}function H2(){const e=this,{params:t,el:i}=e;if(i&&i.offsetWidth===0)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:s,snapGrid:u}=e,d=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const l=d&&t.loop;(t.slidesPerView==="auto"||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides&&!l?e.slideTo(e.slides.length-1,0,!1,!0):e.params.loop&&!d?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout(()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()},500)),e.allowSlidePrev=s,e.allowSlideNext=r,e.params.watchOverflow&&u!==e.snapGrid&&e.checkOverflow()}function Nee(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function Uee(){const e=this,{wrapperEl:t,rtlTranslate:i,enabled:r}=e;if(!r)return;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,e.translate===0&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();let s;const u=e.maxTranslate()-e.minTranslate();u===0?s=0:s=(e.translate-e.minTranslate())/u,s!==e.progress&&e.updateProgress(i?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function jee(e){const t=this;vv(t,e.target),!(t.params.cssMode||t.params.slidesPerView!=="auto"&&!t.params.autoHeight)&&t.update()}let G2=!1;function Vee(){}const OP=(e,t)=>{const i=co(),{params:r,el:s,wrapperEl:u,device:d}=e,l=!!r.nested,m=t==="on"?"addEventListener":"removeEventListener",g=t;s[m]("pointerdown",e.onTouchStart,{passive:!1}),i[m]("pointermove",e.onTouchMove,{passive:!1,capture:l}),i[m]("pointerup",e.onTouchEnd,{passive:!0}),i[m]("pointercancel",e.onTouchEnd,{passive:!0}),i[m]("pointerout",e.onTouchEnd,{passive:!0}),i[m]("pointerleave",e.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&s[m]("click",e.onClick,!0),r.cssMode&&u[m]("scroll",e.onScroll),r.updateOnWindowResize?e[g](d.ios||d.android?"resize orientationchange observerUpdate":"resize observerUpdate",H2,!0):e[g]("observerUpdate",H2,!0),s[m]("load",e.onLoad,{capture:!0})};function Hee(){const e=this,t=co(),{params:i}=e;e.onTouchStart=$ee.bind(e),e.onTouchMove=zee.bind(e),e.onTouchEnd=Bee.bind(e),i.cssMode&&(e.onScroll=Uee.bind(e)),e.onClick=Nee.bind(e),e.onLoad=jee.bind(e),G2||(t.addEventListener("touchstart",Vee),G2=!0),OP(e,"on")}function Gee(){OP(this,"off")}const Wee={attachEvents:Hee,detachEvents:Gee},W2=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;function qee(){const e=this,{realIndex:t,initialized:i,params:r,el:s}=e,u=r.breakpoints;if(!u||u&&Object.keys(u).length===0)return;const d=e.getBreakpoint(u,e.params.breakpointsBase,e.el);if(!d||e.currentBreakpoint===d)return;const m=(d in u?u[d]:void 0)||e.originalParams,g=W2(e,r),x=W2(e,m),w=r.enabled;g&&!x?(s.classList.remove(`${r.containerModifierClass}grid`,`${r.containerModifierClass}grid-column`),e.emitContainerClasses()):!g&&x&&(s.classList.add(`${r.containerModifierClass}grid`),(m.grid.fill&&m.grid.fill==="column"||!m.grid.fill&&r.grid.fill==="column")&&s.classList.add(`${r.containerModifierClass}grid-column`),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(L=>{const $=r[L]&&r[L].enabled,F=m[L]&&m[L].enabled;$&&!F&&e[L].disable(),!$&&F&&e[L].enable()});const C=m.direction&&m.direction!==r.direction,I=r.loop&&(m.slidesPerView!==r.slidesPerView||C);C&&i&&e.changeDirection(),Xs(e.params,m);const M=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),w&&!M?e.disable():!w&&M&&e.enable(),e.currentBreakpoint=d,e.emit("_beforeBreakpoint",m),I&&i&&(e.loopDestroy(),e.loopCreate(t),e.updateSlides()),e.emit("breakpoint",m)}function Zee(e,t="window",i){if(!e||t==="container"&&!i)return;let r=!1;const s=Es(),u=t==="window"?s.innerHeight:i.clientHeight,d=Object.keys(e).map(l=>{if(typeof l=="string"&&l.indexOf("@")===0){const m=parseFloat(l.substr(1));return{value:u*m,point:l}}return{value:l,point:l}});d.sort((l,m)=>parseInt(l.value,10)-parseInt(m.value,10));for(let l=0;l<d.length;l+=1){const{point:m,value:g}=d[l];t==="window"?s.matchMedia(`(min-width: ${g}px)`).matches&&(r=m):g<=i.clientWidth&&(r=m)}return r||"max"}const Kee={setBreakpoint:qee,getBreakpoint:Zee};function Xee(e,t){const i=[];return e.forEach(r=>{typeof r=="object"?Object.keys(r).forEach(s=>{r[s]&&i.push(t+s)}):typeof r=="string"&&i.push(t+r)}),i}function Yee(){const e=this,{classNames:t,params:i,rtl:r,el:s,device:u}=e,d=Xee(["initialized",i.direction,{"free-mode":e.params.freeMode&&i.freeMode.enabled},{autoheight:i.autoHeight},{rtl:r},{grid:i.grid&&i.grid.rows>1},{"grid-column":i.grid&&i.grid.rows>1&&i.grid.fill==="column"},{android:u.android},{ios:u.ios},{"css-mode":i.cssMode},{centered:i.cssMode&&i.centeredSlides},{"watch-progress":i.watchSlidesProgress}],i.containerModifierClass);t.push(...d),s.classList.add(...t),e.emitContainerClasses()}function Jee(){const e=this,{el:t,classNames:i}=e;t.classList.remove(...i),e.emitContainerClasses()}const Qee={addClasses:Yee,removeClasses:Jee};function ete(){const e=this,{isLocked:t,params:i}=e,{slidesOffsetBefore:r}=i;if(r){const s=e.slides.length-1,u=e.slidesGrid[s]+e.slidesSizesGrid[s]+r*2;e.isLocked=e.size>u}else e.isLocked=e.snapGrid.length===1;i.allowSlideNext===!0&&(e.allowSlideNext=!e.isLocked),i.allowSlidePrev===!0&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}const tte={checkOverflow:ete},q2={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function nte(e,t){return function(r={}){const s=Object.keys(r)[0],u=r[s];if(typeof u!="object"||u===null){Xs(t,r);return}if(["navigation","pagination","scrollbar"].indexOf(s)>=0&&e[s]===!0&&(e[s]={auto:!0}),!(s in e&&"enabled"in u)){Xs(t,r);return}e[s]===!0&&(e[s]={enabled:!0}),typeof e[s]=="object"&&!("enabled"in e[s])&&(e[s].enabled=!0),e[s]||(e[s]={enabled:!1}),Xs(t,r)}}const nb={eventsEmitter:QQ,update:uee,translate:gee,transition:bee,slide:Aee,loop:Dee,grabCursor:Ree,events:Wee,breakpoints:Kee,checkOverflow:tte,classes:Qee},ib={};let Wp=class tl{constructor(...t){let i,r;t.length===1&&t[0].constructor&&Object.prototype.toString.call(t[0]).slice(8,-1)==="Object"?r=t[0]:[i,r]=t,r||(r={}),r=Xs({},r),i&&!r.el&&(r.el=i);const s=co();if(r.el&&typeof r.el=="string"&&s.querySelectorAll(r.el).length>1){const m=[];return s.querySelectorAll(r.el).forEach(g=>{const x=Xs({},r,{el:g});m.push(new tl(x))}),m}const u=this;u.__swiper__=!0,u.support=DP(),u.device=ZQ({userAgent:r.userAgent}),u.browser=XQ(),u.eventsListeners={},u.eventsAnyListeners=[],u.modules=[...u.__modules__],r.modules&&Array.isArray(r.modules)&&u.modules.push(...r.modules);const d={};u.modules.forEach(m=>{m({params:r,swiper:u,extendParams:nte(r,d),on:u.on.bind(u),once:u.once.bind(u),off:u.off.bind(u),emit:u.emit.bind(u)})});const l=Xs({},q2,d);return u.params=Xs({},l,ib,r),u.originalParams=Xs({},u.params),u.passedParams=Xs({},r),u.params&&u.params.on&&Object.keys(u.params.on).forEach(m=>{u.on(m,u.params.on[m])}),u.params&&u.params.onAny&&u.onAny(u.params.onAny),Object.assign(u,{enabled:u.params.enabled,el:i,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return u.params.direction==="horizontal"},isVertical(){return u.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:u.params.allowSlideNext,allowSlidePrev:u.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:u.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:u.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),u.emit("_swiper"),u.params.init&&u.init(),u}getSlideIndex(t){const{slidesEl:i,params:r}=this,s=Za(i,`.${r.slideClass}, swiper-slide`),u=bx(s[0]);return bx(t)-u}getSlideIndexByData(t){return this.getSlideIndex(this.slides.filter(i=>i.getAttribute("data-swiper-slide-index")*1===t)[0])}recalcSlides(){const t=this,{slidesEl:i,params:r}=t;t.slides=Za(i,`.${r.slideClass}, swiper-slide`)}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;t.enabled&&(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,i){const r=this;t=Math.min(Math.max(t,0),1);const s=r.minTranslate(),d=(r.maxTranslate()-s)*t+s;r.translateTo(d,typeof i>"u"?0:i),r.updateActiveIndex(),r.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const i=t.el.className.split(" ").filter(r=>r.indexOf("swiper")===0||r.indexOf(t.params.containerModifierClass)===0);t.emit("_containerClasses",i.join(" "))}getSlideClasses(t){const i=this;return i.destroyed?"":t.className.split(" ").filter(r=>r.indexOf("swiper-slide")===0||r.indexOf(i.params.slideClass)===0).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const i=[];t.slides.forEach(r=>{const s=t.getSlideClasses(r);i.push({slideEl:r,classNames:s}),t.emit("_slideClass",r,s)}),t.emit("_slideClasses",i)}slidesPerViewDynamic(t="current",i=!1){const r=this,{params:s,slides:u,slidesGrid:d,slidesSizesGrid:l,size:m,activeIndex:g}=r;let x=1;if(s.centeredSlides){let w=u[g].swiperSlideSize,C;for(let I=g+1;I<u.length;I+=1)u[I]&&!C&&(w+=u[I].swiperSlideSize,x+=1,w>m&&(C=!0));for(let I=g-1;I>=0;I-=1)u[I]&&!C&&(w+=u[I].swiperSlideSize,x+=1,w>m&&(C=!0))}else if(t==="current")for(let w=g+1;w<u.length;w+=1)(i?d[w]+l[w]-d[g]<m:d[w]-d[g]<m)&&(x+=1);else for(let w=g-1;w>=0;w-=1)d[g]-d[w]<m&&(x+=1);return x}update(){const t=this;if(!t||t.destroyed)return;const{snapGrid:i,params:r}=t;r.breakpoints&&t.setBreakpoint(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach(d=>{d.complete&&vv(t,d)}),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses();function s(){const d=t.rtlTranslate?t.translate*-1:t.translate,l=Math.min(Math.max(d,t.maxTranslate()),t.minTranslate());t.setTranslate(l),t.updateActiveIndex(),t.updateSlidesClasses()}let u;if(t.params.freeMode&&t.params.freeMode.enabled)s(),t.params.autoHeight&&t.updateAutoHeight();else{if((t.params.slidesPerView==="auto"||t.params.slidesPerView>1)&&t.isEnd&&!t.params.centeredSlides){const d=t.virtual&&t.params.virtual.enabled?t.virtual.slides:t.slides;u=t.slideTo(d.length-1,0,!1,!0)}else u=t.slideTo(t.activeIndex,0,!1,!0);u||s()}r.watchOverflow&&i!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,i=!0){const r=this,s=r.params.direction;return t||(t=s==="horizontal"?"vertical":"horizontal"),t===s||t!=="horizontal"&&t!=="vertical"||(r.el.classList.remove(`${r.params.containerModifierClass}${s}`),r.el.classList.add(`${r.params.containerModifierClass}${t}`),r.emitContainerClasses(),r.params.direction=t,r.slides.forEach(u=>{t==="vertical"?u.style.width="":u.style.height=""}),r.emit("changeDirection"),i&&r.update()),r}changeLanguageDirection(t){const i=this;i.rtl&&t==="rtl"||!i.rtl&&t==="ltr"||(i.rtl=t==="rtl",i.rtlTranslate=i.params.direction==="horizontal"&&i.rtl,i.rtl?(i.el.classList.add(`${i.params.containerModifierClass}rtl`),i.el.dir="rtl"):(i.el.classList.remove(`${i.params.containerModifierClass}rtl`),i.el.dir="ltr"),i.update())}mount(t){const i=this;if(i.mounted)return!0;let r=t||i.params.el;if(typeof r=="string"&&(r=document.querySelector(r)),!r)return!1;r.swiper=i,r.shadowEl&&(i.isElement=!0);const s=()=>`.${(i.params.wrapperClass||"").trim().split(" ").join(".")}`;let d=(()=>r&&r.shadowRoot&&r.shadowRoot.querySelector?r.shadowRoot.querySelector(s()):Za(r,s())[0])();return!d&&i.params.createElements&&(d=ey("div",i.params.wrapperClass),r.append(d),Za(r,`.${i.params.slideClass}`).forEach(l=>{d.append(l)})),Object.assign(i,{el:r,wrapperEl:d,slidesEl:i.isElement?r:d,mounted:!0,rtl:r.dir.toLowerCase()==="rtl"||Jl(r,"direction")==="rtl",rtlTranslate:i.params.direction==="horizontal"&&(r.dir.toLowerCase()==="rtl"||Jl(r,"direction")==="rtl"),wrongRTL:Jl(d,"display")==="-webkit-box"}),!0}init(t){const i=this;return i.initialized||i.mount(t)===!1||(i.emit("beforeInit"),i.params.breakpoints&&i.setBreakpoint(),i.addClasses(),i.updateSize(),i.updateSlides(),i.params.watchOverflow&&i.checkOverflow(),i.params.grabCursor&&i.enabled&&i.setGrabCursor(),i.params.loop&&i.virtual&&i.params.virtual.enabled?i.slideTo(i.params.initialSlide+i.virtual.slidesBefore,0,i.params.runCallbacksOnInit,!1,!0):i.slideTo(i.params.initialSlide,0,i.params.runCallbacksOnInit,!1,!0),i.params.loop&&i.loopCreate(),i.attachEvents(),[...i.el.querySelectorAll('[loading="lazy"]')].forEach(s=>{s.complete?vv(i,s):s.addEventListener("load",u=>{vv(i,u.target)})}),wx(i),i.initialized=!0,wx(i),i.emit("init"),i.emit("afterInit")),i}destroy(t=!0,i=!0){const r=this,{params:s,el:u,wrapperEl:d,slides:l}=r;return typeof r.params>"u"||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),s.loop&&r.loopDestroy(),i&&(r.removeClasses(),u.removeAttribute("style"),d.removeAttribute("style"),l&&l.length&&l.forEach(m=>{m.classList.remove(s.slideVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass),m.removeAttribute("style"),m.removeAttribute("data-swiper-slide-index")})),r.emit("destroy"),Object.keys(r.eventsListeners).forEach(m=>{r.off(m)}),t!==!1&&(r.el.swiper=null,NQ(r)),r.destroyed=!0),null}static extendDefaults(t){Xs(ib,t)}static get extendedDefaults(){return ib}static get defaults(){return q2}static installModule(t){tl.prototype.__modules__||(tl.prototype.__modules__=[]);const i=tl.prototype.__modules__;typeof t=="function"&&i.indexOf(t)<0&&i.push(t)}static use(t){return Array.isArray(t)?(t.forEach(i=>tl.installModule(i)),tl):(tl.installModule(t),tl)}};Object.keys(nb).forEach(e=>{Object.keys(nb[e]).forEach(t=>{Wp.prototype[t]=nb[e][t]})});Wp.use([YQ,JQ]);function ite({swiper:e,extendParams:t,on:i,emit:r}){const s=co(),u=Es();e.keyboard={enabled:!1},t({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}});function d(g){if(!e.enabled)return;const{rtlTranslate:x}=e;let w=g;w.originalEvent&&(w=w.originalEvent);const C=w.keyCode||w.charCode,I=e.params.keyboard.pageUpDown,M=I&&C===33,L=I&&C===34,$=C===37,F=C===39,U=C===38,ee=C===40;if(!e.allowSlideNext&&(e.isHorizontal()&&F||e.isVertical()&&ee||L)||!e.allowSlidePrev&&(e.isHorizontal()&&$||e.isVertical()&&U||M))return!1;if(!(w.shiftKey||w.altKey||w.ctrlKey||w.metaKey)&&!(s.activeElement&&s.activeElement.nodeName&&(s.activeElement.nodeName.toLowerCase()==="input"||s.activeElement.nodeName.toLowerCase()==="textarea"))){if(e.params.keyboard.onlyInViewport&&(M||L||$||F||U||ee)){let V=!1;if(xx(e.el,`.${e.params.slideClass}, swiper-slide`).length>0&&xx(e.el,`.${e.params.slideActiveClass}`).length===0)return;const Q=e.el,ae=Q.clientWidth,be=Q.clientHeight,te=u.innerWidth,G=u.innerHeight,j=PP(Q);x&&(j.left-=Q.scrollLeft);const z=[[j.left,j.top],[j.left+ae,j.top],[j.left,j.top+be],[j.left+ae,j.top+be]];for(let ie=0;ie<z.length;ie+=1){const X=z[ie];if(X[0]>=0&&X[0]<=te&&X[1]>=0&&X[1]<=G){if(X[0]===0&&X[1]===0)continue;V=!0}}if(!V)return}e.isHorizontal()?((M||L||$||F)&&(w.preventDefault?w.preventDefault():w.returnValue=!1),((L||F)&&!x||(M||$)&&x)&&e.slideNext(),((M||$)&&!x||(L||F)&&x)&&e.slidePrev()):((M||L||U||ee)&&(w.preventDefault?w.preventDefault():w.returnValue=!1),(L||ee)&&e.slideNext(),(M||U)&&e.slidePrev()),r("keyPress",C)}}function l(){e.keyboard.enabled||(s.addEventListener("keydown",d),e.keyboard.enabled=!0)}function m(){e.keyboard.enabled&&(s.removeEventListener("keydown",d),e.keyboard.enabled=!1)}i("init",()=>{e.params.keyboard.enabled&&l()}),i("destroy",()=>{e.keyboard.enabled&&m()}),Object.assign(e.keyboard,{enable:l,disable:m})}function RP(e,t,i,r){return e.params.createElements&&Object.keys(r).forEach(s=>{if(!i[s]&&i.auto===!0){let u=Za(e.el,`.${r[s]}`)[0];u||(u=ey("div",r[s]),u.className=r[s],e.el.append(u)),i[s]=u,t[s]=u}}),i}function rte({swiper:e,extendParams:t,on:i,emit:r}){t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};const s=M=>(Array.isArray(M)||(M=[M].filter(L=>!!L)),M);function u(M){let L;return M&&typeof M=="string"&&e.isElement&&(L=e.el.shadowRoot.querySelector(M),L)?L:(M&&(typeof M=="string"&&(L=[...document.querySelectorAll(M)]),e.params.uniqueNavElements&&typeof M=="string"&&L.length>1&&e.el.querySelectorAll(M).length===1&&(L=e.el.querySelector(M))),M&&!L?M:L)}function d(M,L){const $=e.params.navigation;M=s(M),M.forEach(F=>{F&&(F.classList[L?"add":"remove"](...$.disabledClass.split(" ")),F.tagName==="BUTTON"&&(F.disabled=L),e.params.watchOverflow&&e.enabled&&F.classList[e.isLocked?"add":"remove"]($.lockClass))})}function l(){const{nextEl:M,prevEl:L}=e.navigation;if(e.params.loop){d(L,!1),d(M,!1);return}d(L,e.isBeginning&&!e.params.rewind),d(M,e.isEnd&&!e.params.rewind)}function m(M){M.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),r("navigationPrev"))}function g(M){M.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),r("navigationNext"))}function x(){const M=e.params.navigation;if(e.params.navigation=RP(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(M.nextEl||M.prevEl))return;let L=u(M.nextEl),$=u(M.prevEl);Object.assign(e.navigation,{nextEl:L,prevEl:$}),L=s(L),$=s($);const F=(U,ee)=>{U&&U.addEventListener("click",ee==="next"?g:m),!e.enabled&&U&&U.classList.add(...M.lockClass.split(" "))};L.forEach(U=>F(U,"next")),$.forEach(U=>F(U,"prev"))}function w(){let{nextEl:M,prevEl:L}=e.navigation;M=s(M),L=s(L);const $=(F,U)=>{F.removeEventListener("click",U==="next"?g:m),F.classList.remove(...e.params.navigation.disabledClass.split(" "))};M.forEach(F=>$(F,"next")),L.forEach(F=>$(F,"prev"))}i("init",()=>{e.params.navigation.enabled===!1?I():(x(),l())}),i("toEdge fromEdge lock unlock",()=>{l()}),i("destroy",()=>{w()}),i("enable disable",()=>{let{nextEl:M,prevEl:L}=e.navigation;M=s(M),L=s(L),[...M,...L].filter($=>!!$).forEach($=>$.classList[e.enabled?"remove":"add"](e.params.navigation.lockClass))}),i("click",(M,L)=>{let{nextEl:$,prevEl:F}=e.navigation;$=s($),F=s(F);const U=L.target;if(e.params.navigation.hideOnClick&&!F.includes(U)&&!$.includes(U)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===U||e.pagination.el.contains(U)))return;let ee;$.length?ee=$[0].classList.contains(e.params.navigation.hiddenClass):F.length&&(ee=F[0].classList.contains(e.params.navigation.hiddenClass)),r(ee===!0?"navigationShow":"navigationHide"),[...$,...F].filter(V=>!!V).forEach(V=>V.classList.toggle(e.params.navigation.hiddenClass))}});const C=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),x(),l()},I=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),w()};Object.assign(e.navigation,{enable:C,disable:I,update:l,init:x,destroy:w})}function rb(e=""){return`.${e.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function Z2({swiper:e,extendParams:t,on:i,emit:r}){const s=co();let u=!1,d=null,l=null,m,g,x,w;t({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),e.scrollbar={el:null,dragEl:null};function C(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:z,rtlTranslate:ie}=e,{dragEl:X,el:ne}=z,Ee=e.params.scrollbar,Ce=e.params.loop?e.progressLoop:e.progress;let Xe=g,at=(x-g)*Ce;ie?(at=-at,at>0?(Xe=g-at,at=0):-at+g>x&&(Xe=x+at)):at<0?(Xe=g+at,at=0):at+g>x&&(Xe=x-at),e.isHorizontal()?(X.style.transform=`translate3d(${at}px, 0, 0)`,X.style.width=`${Xe}px`):(X.style.transform=`translate3d(0px, ${at}px, 0)`,X.style.height=`${Xe}px`),Ee.hide&&(clearTimeout(d),ne.style.opacity=1,d=setTimeout(()=>{ne.style.opacity=0,ne.style.transitionDuration="400ms"},1e3))}function I(z){!e.params.scrollbar.el||!e.scrollbar.el||(e.scrollbar.dragEl.style.transitionDuration=`${z}ms`)}function M(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:z}=e,{dragEl:ie,el:X}=z;ie.style.width="",ie.style.height="",x=e.isHorizontal()?X.offsetWidth:X.offsetHeight,w=e.size/(e.virtualSize+e.params.slidesOffsetBefore-(e.params.centeredSlides?e.snapGrid[0]:0)),e.params.scrollbar.dragSize==="auto"?g=x*w:g=parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?ie.style.width=`${g}px`:ie.style.height=`${g}px`,w>=1?X.style.display="none":X.style.display="",e.params.scrollbar.hide&&(X.style.opacity=0),e.params.watchOverflow&&e.enabled&&z.el.classList[e.isLocked?"add":"remove"](e.params.scrollbar.lockClass)}function L(z){return e.isHorizontal()?z.clientX:z.clientY}function $(z){const{scrollbar:ie,rtlTranslate:X}=e,{el:ne}=ie;let Ee;Ee=(L(z)-PP(ne)[e.isHorizontal()?"left":"top"]-(m!==null?m:g/2))/(x-g),Ee=Math.max(Math.min(Ee,1),0),X&&(Ee=1-Ee);const Ce=e.minTranslate()+(e.maxTranslate()-e.minTranslate())*Ee;e.updateProgress(Ce),e.setTranslate(Ce),e.updateActiveIndex(),e.updateSlidesClasses()}function F(z){const ie=e.params.scrollbar,{scrollbar:X,wrapperEl:ne}=e,{el:Ee,dragEl:Ce}=X;u=!0,m=z.target===Ce?L(z)-z.target.getBoundingClientRect()[e.isHorizontal()?"left":"top"]:null,z.preventDefault(),z.stopPropagation(),ne.style.transitionDuration="100ms",Ce.style.transitionDuration="100ms",$(z),clearTimeout(l),Ee.style.transitionDuration="0ms",ie.hide&&(Ee.style.opacity=1),e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="none"),r("scrollbarDragStart",z)}function U(z){const{scrollbar:ie,wrapperEl:X}=e,{el:ne,dragEl:Ee}=ie;u&&(z.preventDefault?z.preventDefault():z.returnValue=!1,$(z),X.style.transitionDuration="0ms",ne.style.transitionDuration="0ms",Ee.style.transitionDuration="0ms",r("scrollbarDragMove",z))}function ee(z){const ie=e.params.scrollbar,{scrollbar:X,wrapperEl:ne}=e,{el:Ee}=X;u&&(u=!1,e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="",ne.style.transitionDuration=""),ie.hide&&(clearTimeout(l),l=Jv(()=>{Ee.style.opacity=0,Ee.style.transitionDuration="400ms"},1e3)),r("scrollbarDragEnd",z),ie.snapOnRelease&&e.slideToClosest())}function V(z){const{scrollbar:ie,params:X}=e,ne=ie.el;if(!ne)return;const Ee=ne,Ce=X.passiveListeners?{passive:!1,capture:!1}:!1,Xe=X.passiveListeners?{passive:!0,capture:!1}:!1;if(!Ee)return;const at=z==="on"?"addEventListener":"removeEventListener";Ee[at]("pointerdown",F,Ce),s[at]("pointermove",U,Ce),s[at]("pointerup",ee,Xe)}function Q(){!e.params.scrollbar.el||!e.scrollbar.el||V("on")}function ae(){!e.params.scrollbar.el||!e.scrollbar.el||V("off")}function be(){const{scrollbar:z,el:ie}=e;e.params.scrollbar=RP(e,e.originalParams.scrollbar,e.params.scrollbar,{el:"swiper-scrollbar"});const X=e.params.scrollbar;if(!X.el)return;let ne;typeof X.el=="string"&&e.isElement&&(ne=e.el.shadowRoot.querySelector(X.el)),!ne&&typeof X.el=="string"?ne=s.querySelectorAll(X.el):ne||(ne=X.el),e.params.uniqueNavElements&&typeof X.el=="string"&&ne.length>1&&ie.querySelectorAll(X.el).length===1&&(ne=ie.querySelector(X.el)),ne.length>0&&(ne=ne[0]),ne.classList.add(e.isHorizontal()?X.horizontalClass:X.verticalClass);let Ee;ne&&(Ee=ne.querySelector(`.${e.params.scrollbar.dragClass}`),Ee||(Ee=ey("div",e.params.scrollbar.dragClass),ne.append(Ee))),Object.assign(z,{el:ne,dragEl:Ee}),X.draggable&&Q(),ne&&ne.classList[e.enabled?"remove":"add"](e.params.scrollbar.lockClass)}function te(){const z=e.params.scrollbar,ie=e.scrollbar.el;ie&&ie.classList.remove(e.isHorizontal()?z.horizontalClass:z.verticalClass),ae()}i("init",()=>{e.params.scrollbar.enabled===!1?j():(be(),M(),C())}),i("update resize observerUpdate lock unlock",()=>{M()}),i("setTranslate",()=>{C()}),i("setTransition",(z,ie)=>{I(ie)}),i("enable disable",()=>{const{el:z}=e.scrollbar;z&&z.classList[e.enabled?"remove":"add"](e.params.scrollbar.lockClass)}),i("destroy",()=>{te()});const G=()=>{e.el.classList.remove(e.params.scrollbar.scrollbarDisabledClass),e.scrollbar.el&&e.scrollbar.el.classList.remove(e.params.scrollbar.scrollbarDisabledClass),be(),M(),C()},j=()=>{e.el.classList.add(e.params.scrollbar.scrollbarDisabledClass),e.scrollbar.el&&e.scrollbar.el.classList.add(e.params.scrollbar.scrollbarDisabledClass),te()};Object.assign(e.scrollbar,{enable:G,disable:j,updateSize:M,setTranslate:C,init:be,destroy:te})}function ste({swiper:e,extendParams:t,on:i}){t({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}}),e.a11y={clicked:!1};let r=null;function s(X){const ne=r;ne.length!==0&&(ne.innerHTML="",ne.innerHTML=X)}const u=X=>(Array.isArray(X)||(X=[X].filter(ne=>!!ne)),X);function d(X=16){const ne=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(X).replace(/x/g,ne)}function l(X){X=u(X),X.forEach(ne=>{ne.setAttribute("tabIndex","0")})}function m(X){X=u(X),X.forEach(ne=>{ne.setAttribute("tabIndex","-1")})}function g(X,ne){X=u(X),X.forEach(Ee=>{Ee.setAttribute("role",ne)})}function x(X,ne){X=u(X),X.forEach(Ee=>{Ee.setAttribute("aria-roledescription",ne)})}function w(X,ne){X=u(X),X.forEach(Ee=>{Ee.setAttribute("aria-controls",ne)})}function C(X,ne){X=u(X),X.forEach(Ee=>{Ee.setAttribute("aria-label",ne)})}function I(X,ne){X=u(X),X.forEach(Ee=>{Ee.setAttribute("id",ne)})}function M(X,ne){X=u(X),X.forEach(Ee=>{Ee.setAttribute("aria-live",ne)})}function L(X){X=u(X),X.forEach(ne=>{ne.setAttribute("aria-disabled",!0)})}function $(X){X=u(X),X.forEach(ne=>{ne.setAttribute("aria-disabled",!1)})}function F(X){if(X.keyCode!==13&&X.keyCode!==32)return;const ne=e.params.a11y,Ee=X.target;e.pagination&&e.pagination.el&&(Ee===e.pagination.el||e.pagination.el.contains(X.target))&&!X.target.matches(rb(e.params.pagination.bulletClass))||(e.navigation&&e.navigation.nextEl&&Ee===e.navigation.nextEl&&(e.isEnd&&!e.params.loop||e.slideNext(),e.isEnd?s(ne.lastSlideMessage):s(ne.nextSlideMessage)),e.navigation&&e.navigation.prevEl&&Ee===e.navigation.prevEl&&(e.isBeginning&&!e.params.loop||e.slidePrev(),e.isBeginning?s(ne.firstSlideMessage):s(ne.prevSlideMessage)),e.pagination&&Ee.matches(rb(e.params.pagination.bulletClass))&&Ee.click())}function U(){if(e.params.loop||e.params.rewind||!e.navigation)return;const{nextEl:X,prevEl:ne}=e.navigation;ne&&(e.isBeginning?(L(ne),m(ne)):($(ne),l(ne))),X&&(e.isEnd?(L(X),m(X)):($(X),l(X)))}function ee(){return e.pagination&&e.pagination.bullets&&e.pagination.bullets.length}function V(){return ee()&&e.params.pagination.clickable}function Q(){const X=e.params.a11y;ee()&&e.pagination.bullets.forEach(ne=>{e.params.pagination.clickable&&(l(ne),e.params.pagination.renderBullet||(g(ne,"button"),C(ne,X.paginationBulletMessage.replace(/\{\{index\}\}/,bx(ne)+1)))),ne.matches(rb(e.params.pagination.bulletActiveClass))?ne.setAttribute("aria-current","true"):ne.removeAttribute("aria-current")})}const ae=(X,ne,Ee)=>{l(X),X.tagName!=="BUTTON"&&(g(X,"button"),X.addEventListener("keydown",F)),C(X,Ee),w(X,ne)},be=()=>{e.a11y.clicked=!0},te=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.destroyed||(e.a11y.clicked=!1)})})},G=X=>{if(e.a11y.clicked)return;const ne=X.target.closest(`.${e.params.slideClass}, swiper-slide`);if(!ne||!e.slides.includes(ne))return;const Ee=e.slides.indexOf(ne)===e.activeIndex,Ce=e.params.watchSlidesProgress&&e.visibleSlides&&e.visibleSlides.includes(ne);Ee||Ce||X.sourceCapabilities&&X.sourceCapabilities.firesTouchEvents||(e.isHorizontal()?e.el.scrollLeft=0:e.el.scrollTop=0,e.slideTo(e.slides.indexOf(ne),0))},j=()=>{const X=e.params.a11y;X.itemRoleDescriptionMessage&&x(e.slides,X.itemRoleDescriptionMessage),X.slideRole&&g(e.slides,X.slideRole);const ne=e.slides.length;X.slideLabelMessage&&e.slides.forEach((Ee,Ce)=>{const Xe=e.params.loop?parseInt(Ee.getAttribute("data-swiper-slide-index"),10):Ce,at=X.slideLabelMessage.replace(/\{\{index\}\}/,Xe+1).replace(/\{\{slidesLength\}\}/,ne);C(Ee,at)})},z=()=>{const X=e.params.a11y;e.isElement?e.el.shadowEl.append(r):e.el.append(r);const ne=e.el;X.containerRoleDescriptionMessage&&x(ne,X.containerRoleDescriptionMessage),X.containerMessage&&C(ne,X.containerMessage);const Ee=e.wrapperEl,Ce=X.id||Ee.getAttribute("id")||`swiper-wrapper-${d(16)}`,Xe=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite";I(Ee,Ce),M(Ee,Xe),j();let{nextEl:at,prevEl:it}=e.navigation?e.navigation:{};at=u(at),it=u(it),at&&at.forEach($t=>ae($t,Ce,X.nextSlideMessage)),it&&it.forEach($t=>ae($t,Ce,X.prevSlideMessage)),V()&&(Array.isArray(e.pagination.el)?e.pagination.el:[e.pagination.el]).forEach(Ct=>{Ct.addEventListener("keydown",F)}),e.el.addEventListener("focus",G,!0),e.el.addEventListener("pointerdown",be,!0),e.el.addEventListener("pointerup",te,!0)};function ie(){r&&r.remove();let{nextEl:X,prevEl:ne}=e.navigation?e.navigation:{};X=u(X),ne=u(ne),X&&X.forEach(Ee=>Ee.removeEventListener("keydown",F)),ne&&ne.forEach(Ee=>Ee.removeEventListener("keydown",F)),V()&&(Array.isArray(e.pagination.el)?e.pagination.el:[e.pagination.el]).forEach(Ce=>{Ce.removeEventListener("keydown",F)}),e.el.removeEventListener("focus",G,!0),e.el.removeEventListener("pointerdown",be,!0),e.el.removeEventListener("pointerup",te,!0)}i("beforeInit",()=>{r=ey("span",e.params.a11y.notificationClass),r.setAttribute("aria-live","assertive"),r.setAttribute("aria-atomic","true")}),i("afterInit",()=>{e.params.a11y.enabled&&z()}),i("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{e.params.a11y.enabled&&j()}),i("fromEdge toEdge afterInit lock unlock",()=>{e.params.a11y.enabled&&U()}),i("paginationUpdate",()=>{e.params.a11y.enabled&&Q()}),i("destroy",()=>{e.params.a11y.enabled&&ie()})}function K2({swiper:e,extendParams:t,on:i}){t({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let r=!1,s=!1;e.thumbs={swiper:null};function u(){const m=e.thumbs.swiper;if(!m||m.destroyed)return;const g=m.clickedIndex,x=m.clickedSlide;if(x&&x.classList.contains(e.params.thumbs.slideThumbActiveClass)||typeof g>"u"||g===null)return;let w;m.params.loop?w=parseInt(m.clickedSlide.getAttribute("data-swiper-slide-index"),10):w=g,e.params.loop?e.slideToLoop(w):e.slideTo(w)}function d(){const{thumbs:m}=e.params;if(r)return!1;r=!0;const g=e.constructor;if(m.swiper instanceof g)e.thumbs.swiper=m.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update();else if(Qf(m.swiper)){const x=Object.assign({},m.swiper);Object.assign(x,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new g(x),s=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",u),!0}function l(m){const g=e.thumbs.swiper;if(!g||g.destroyed)return;const x=g.params.slidesPerView==="auto"?g.slidesPerViewDynamic():g.params.slidesPerView;let w=1;const C=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(w=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(w=1),w=Math.floor(w),g.slides.forEach(L=>L.classList.remove(C)),g.params.loop||g.params.virtual&&g.params.virtual.enabled)for(let L=0;L<w;L+=1)Za(g.slidesEl,`[data-swiper-slide-index="${e.realIndex+L}"]`).forEach($=>{$.classList.add(C)});else for(let L=0;L<w;L+=1)g.slides[e.realIndex+L]&&g.slides[e.realIndex+L].classList.add(C);const I=e.params.thumbs.autoScrollOffset,M=I&&!g.params.loop;if(e.realIndex!==g.realIndex||M){const L=g.activeIndex;let $,F;if(g.params.loop){const U=g.slides.filter(ee=>ee.getAttribute("data-swiper-slide-index")===`${e.realIndex}`)[0];$=g.slides.indexOf(U),F=e.activeIndex>e.previousIndex?"next":"prev"}else $=e.realIndex,F=$>e.previousIndex?"next":"prev";M&&($+=F==="next"?I:-1*I),g.visibleSlidesIndexes&&g.visibleSlidesIndexes.indexOf($)<0&&(g.params.centeredSlides?$>L?$=$-Math.floor(x/2)+1:$=$+Math.floor(x/2)-1:$>L&&g.params.slidesPerGroup,g.slideTo($,m?0:void 0))}}i("beforeInit",()=>{const{thumbs:m}=e.params;if(!(!m||!m.swiper))if(typeof m.swiper=="string"||m.swiper instanceof HTMLElement){const g=co(),x=()=>{const C=typeof m.swiper=="string"?g.querySelector(m.swiper):m.swiper;if(C&&C.swiper)m.swiper=C.swiper,d(),l(!0);else if(C){const I=M=>{m.swiper=M.detail[0],C.removeEventListener("init",I),d(),l(!0),m.swiper.update(),e.update()};C.addEventListener("init",I)}return C},w=()=>{if(e.destroyed)return;x()||requestAnimationFrame(w)};requestAnimationFrame(w)}else d(),l(!0)}),i("slideChange update resize observerUpdate",()=>{l()}),i("setTransition",(m,g)=>{const x=e.thumbs.swiper;!x||x.destroyed||x.setTransition(g)}),i("beforeDestroy",()=>{const m=e.thumbs.swiper;!m||m.destroyed||s&&m.destroy()}),Object.assign(e.thumbs,{init:d,update:l})}function yu(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function Ql(e,t){const i=["__proto__","constructor","prototype"];Object.keys(t).filter(r=>i.indexOf(r)<0).forEach(r=>{typeof e[r]>"u"?e[r]=t[r]:yu(t[r])&&yu(e[r])&&Object.keys(t[r]).length>0?t[r].__swiper__?e[r]=t[r]:Ql(e[r],t[r]):e[r]=t[r]})}function FP(e={}){return e.navigation&&typeof e.navigation.nextEl>"u"&&typeof e.navigation.prevEl>"u"}function $P(e={}){return e.pagination&&typeof e.pagination.el>"u"}function zP(e={}){return e.scrollbar&&typeof e.scrollbar.el>"u"}function BP(e=""){const t=e.split(" ").map(r=>r.trim()).filter(r=>!!r),i=[];return t.forEach(r=>{i.indexOf(r)<0&&i.push(r)}),i.join(" ")}function ate(e=""){return e?e.includes("swiper-wrapper")?e:`swiper-wrapper ${e}`:"swiper-wrapper"}const NP=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopedSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideNextClass","slidePrevClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function X2(e={},t=!0){const i={on:{}},r={},s={};Ql(i,Wp.defaults),Ql(i,Wp.extendedDefaults),i._emitClasses=!0,i.init=!1;const u={},d=NP.map(m=>m.replace(/_/,"")),l=Object.assign({},e);return Object.keys(l).forEach(m=>{typeof e[m]>"u"||(d.indexOf(m)>=0?yu(e[m])?(i[m]={},s[m]={},Ql(i[m],e[m]),Ql(s[m],e[m])):(i[m]=e[m],s[m]=e[m]):m.search(/on[A-Z]/)===0&&typeof e[m]=="function"?t?r[`${m[2].toLowerCase()}${m.substr(3)}`]=e[m]:i.on[`${m[2].toLowerCase()}${m.substr(3)}`]=e[m]:u[m]=e[m])}),["navigation","pagination","scrollbar"].forEach(m=>{i[m]===!0&&(i[m]={}),i[m]===!1&&delete i[m]}),{params:i,passedParams:s,rest:u,events:r}}function ote({el:e,nextEl:t,prevEl:i,paginationEl:r,scrollbarEl:s,swiper:u},d){FP(d)&&t&&i&&(u.params.navigation.nextEl=t,u.originalParams.navigation.nextEl=t,u.params.navigation.prevEl=i,u.originalParams.navigation.prevEl=i),$P(d)&&r&&(u.params.pagination.el=r,u.originalParams.pagination.el=r),zP(d)&&s&&(u.params.scrollbar.el=s,u.originalParams.scrollbar.el=s),u.init(e)}function lte(e,t,i,r,s){const u=[];if(!t)return u;const d=m=>{u.indexOf(m)<0&&u.push(m)};if(i&&r){const m=r.map(s),g=i.map(s);m.join("")!==g.join("")&&d("children"),r.length!==i.length&&d("children")}return NP.filter(m=>m[0]==="_").map(m=>m.replace(/_/,"")).forEach(m=>{if(m in e&&m in t)if(yu(e[m])&&yu(t[m])){const g=Object.keys(e[m]),x=Object.keys(t[m]);g.length!==x.length?d(m):(g.forEach(w=>{e[m][w]!==t[m][w]&&d(m)}),x.forEach(w=>{e[m][w]!==t[m][w]&&d(m)}))}else e[m]!==t[m]&&d(m)}),u}function sb(e,t,i){e===void 0&&(e={});const r=[],s={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},u=(d,l)=>{Array.isArray(d)&&d.forEach(m=>{const g=typeof m.type=="symbol";l==="default"&&(l="container-end"),g&&m.children?u(m.children,l):m.type&&(m.type.name==="SwiperSlide"||m.type.name==="AsyncComponentWrapper")?r.push(m):s[l]&&s[l].push(m)})};return Object.keys(e).forEach(d=>{if(typeof e[d]!="function")return;const l=e[d]();u(l,d)}),i.value=t.value,t.value=r,{slides:r,slots:s}}function cte({swiper:e,slides:t,passedParams:i,changedParams:r,nextEl:s,prevEl:u,scrollbarEl:d,paginationEl:l}){const m=r.filter(te=>te!=="children"&&te!=="direction"&&te!=="wrapperClass"),{params:g,pagination:x,navigation:w,scrollbar:C,virtual:I,thumbs:M}=e;let L,$,F,U,ee,V,Q,ae;r.includes("thumbs")&&i.thumbs&&i.thumbs.swiper&&g.thumbs&&!g.thumbs.swiper&&(L=!0),r.includes("controller")&&i.controller&&i.controller.control&&g.controller&&!g.controller.control&&($=!0),r.includes("pagination")&&i.pagination&&(i.pagination.el||l)&&(g.pagination||g.pagination===!1)&&x&&!x.el&&(F=!0),r.includes("scrollbar")&&i.scrollbar&&(i.scrollbar.el||d)&&(g.scrollbar||g.scrollbar===!1)&&C&&!C.el&&(U=!0),r.includes("navigation")&&i.navigation&&(i.navigation.prevEl||u)&&(i.navigation.nextEl||s)&&(g.navigation||g.navigation===!1)&&w&&!w.prevEl&&!w.nextEl&&(ee=!0);const be=te=>{e[te]&&(e[te].destroy(),te==="navigation"?(e.isElement&&(e[te].prevEl.remove(),e[te].nextEl.remove()),g[te].prevEl=void 0,g[te].nextEl=void 0,e[te].prevEl=void 0,e[te].nextEl=void 0):(e.isElement&&e[te].el.remove(),g[te].el=void 0,e[te].el=void 0))};r.includes("loop")&&e.isElement&&(g.loop&&!i.loop?V=!0:!g.loop&&i.loop?Q=!0:ae=!0),m.forEach(te=>{if(yu(g[te])&&yu(i[te]))Ql(g[te],i[te]),(te==="navigation"||te==="pagination"||te==="scrollbar")&&"enabled"in i[te]&&!i[te].enabled&&be(te);else{const G=i[te];(G===!0||G===!1)&&(te==="navigation"||te==="pagination"||te==="scrollbar")?G===!1&&be(te):g[te]=i[te]}}),m.includes("controller")&&!$&&e.controller&&e.controller.control&&g.controller&&g.controller.control&&(e.controller.control=g.controller.control),r.includes("children")&&t&&I&&g.virtual.enabled&&(I.slides=t,I.update(!0)),r.includes("children")&&t&&g.loop&&(ae=!0),L&&M.init()&&M.update(!0),$&&(e.controller.control=g.controller.control),F&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),e.el.shadowEl.appendChild(l)),l&&(g.pagination.el=l),x.init(),x.render(),x.update()),U&&(e.isElement&&(!d||typeof d=="string")&&(d=document.createElement("div"),d.classList.add("swiper-scrollbar"),e.el.shadowEl.appendChild(d)),d&&(g.scrollbar.el=d),C.init(),C.updateSize(),C.setTranslate()),ee&&(e.isElement&&((!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-next"),e.el.shadowEl.appendChild(s)),(!u||typeof u=="string")&&(u=document.createElement("div"),u.classList.add("swiper-button-prev"),e.el.shadowEl.appendChild(u))),s&&(g.navigation.nextEl=s),u&&(g.navigation.prevEl=u),w.init(),w.update()),r.includes("allowSlideNext")&&(e.allowSlideNext=i.allowSlideNext),r.includes("allowSlidePrev")&&(e.allowSlidePrev=i.allowSlidePrev),r.includes("direction")&&e.changeDirection(i.direction,!1),(V||ae)&&e.loopDestroy(),(Q||ae)&&e.loopCreate(),e.update()}function ute(e,t,i){if(!i)return null;const r=x=>{let w=x;return x<0?w=t.length+x:w>=t.length&&(w=w-t.length),w},s=e.value.isHorizontal()?{[e.value.rtlTranslate?"right":"left"]:`${i.offset}px`}:{top:`${i.offset}px`},{from:u,to:d}=i,l=e.value.params.loop?-t.length:0,m=e.value.params.loop?t.length*2:t.length,g=[];for(let x=l;x<m;x+=1)x>=u&&x<=d&&g.push(t[r(x)]);return g.map(x=>(x.props||(x.props={}),x.props.style||(x.props.style={}),x.props.swiperRef=e,x.props.style=s,ni(x.type,{...x.props},x.children)))}const dte=e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())},Y2={name:"Swiper",props:{tag:{type:String,default:"div"},wrapperTag:{type:String,default:"div"},modules:{type:Array,default:void 0},init:{type:Boolean,default:void 0},direction:{type:String,default:void 0},oneWayMovement:{type:Boolean,default:void 0},touchEventsTarget:{type:String,default:void 0},initialSlide:{type:Number,default:void 0},speed:{type:Number,default:void 0},cssMode:{type:Boolean,default:void 0},updateOnWindowResize:{type:Boolean,default:void 0},resizeObserver:{type:Boolean,default:void 0},nested:{type:Boolean,default:void 0},focusableElements:{type:String,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},preventInteractionOnTransition:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},edgeSwipeDetection:{type:[Boolean,String],default:void 0},edgeSwipeThreshold:{type:Number,default:void 0},autoHeight:{type:Boolean,default:void 0},setWrapperSize:{type:Boolean,default:void 0},virtualTranslate:{type:Boolean,default:void 0},effect:{type:String,default:void 0},breakpoints:{type:Object,default:void 0},spaceBetween:{type:[Number,String],default:void 0},slidesPerView:{type:[Number,String],default:void 0},maxBackfaceHiddenSlides:{type:Number,default:void 0},slidesPerGroup:{type:Number,default:void 0},slidesPerGroupSkip:{type:Number,default:void 0},slidesPerGroupAuto:{type:Boolean,default:void 0},centeredSlides:{type:Boolean,default:void 0},centeredSlidesBounds:{type:Boolean,default:void 0},slidesOffsetBefore:{type:Number,default:void 0},slidesOffsetAfter:{type:Number,default:void 0},normalizeSlideIndex:{type:Boolean,default:void 0},centerInsufficientSlides:{type:Boolean,default:void 0},watchOverflow:{type:Boolean,default:void 0},roundLengths:{type:Boolean,default:void 0},touchRatio:{type:Number,default:void 0},touchAngle:{type:Number,default:void 0},simulateTouch:{type:Boolean,default:void 0},shortSwipes:{type:Boolean,default:void 0},longSwipes:{type:Boolean,default:void 0},longSwipesRatio:{type:Number,default:void 0},longSwipesMs:{type:Number,default:void 0},followFinger:{type:Boolean,default:void 0},allowTouchMove:{type:Boolean,default:void 0},threshold:{type:Number,default:void 0},touchMoveStopPropagation:{type:Boolean,default:void 0},touchStartPreventDefault:{type:Boolean,default:void 0},touchStartForcePreventDefault:{type:Boolean,default:void 0},touchReleaseOnEdges:{type:Boolean,default:void 0},uniqueNavElements:{type:Boolean,default:void 0},resistance:{type:Boolean,default:void 0},resistanceRatio:{type:Number,default:void 0},watchSlidesProgress:{type:Boolean,default:void 0},grabCursor:{type:Boolean,default:void 0},preventClicks:{type:Boolean,default:void 0},preventClicksPropagation:{type:Boolean,default:void 0},slideToClickedSlide:{type:Boolean,default:void 0},loop:{type:Boolean,default:void 0},loopedSlides:{type:Number,default:void 0},loopPreventsSliding:{type:Boolean,default:void 0},rewind:{type:Boolean,default:void 0},allowSlidePrev:{type:Boolean,default:void 0},allowSlideNext:{type:Boolean,default:void 0},swipeHandler:{type:Boolean,default:void 0},noSwiping:{type:Boolean,default:void 0},noSwipingClass:{type:String,default:void 0},noSwipingSelector:{type:String,default:void 0},passiveListeners:{type:Boolean,default:void 0},containerModifierClass:{type:String,default:void 0},slideClass:{type:String,default:void 0},slideActiveClass:{type:String,default:void 0},slideVisibleClass:{type:String,default:void 0},slideNextClass:{type:String,default:void 0},slidePrevClass:{type:String,default:void 0},wrapperClass:{type:String,default:void 0},lazyPreloaderClass:{type:String,default:void 0},lazyPreloadPrevNext:{type:Number,default:void 0},runCallbacksOnInit:{type:Boolean,default:void 0},observer:{type:Boolean,default:void 0},observeParents:{type:Boolean,default:void 0},observeSlideChildren:{type:Boolean,default:void 0},a11y:{type:[Boolean,Object],default:void 0},autoplay:{type:[Boolean,Object],default:void 0},controller:{type:Object,default:void 0},coverflowEffect:{type:Object,default:void 0},cubeEffect:{type:Object,default:void 0},fadeEffect:{type:Object,default:void 0},flipEffect:{type:Object,default:void 0},creativeEffect:{type:Object,default:void 0},cardsEffect:{type:Object,default:void 0},hashNavigation:{type:[Boolean,Object],default:void 0},history:{type:[Boolean,Object],default:void 0},keyboard:{type:[Boolean,Object],default:void 0},mousewheel:{type:[Boolean,Object],default:void 0},navigation:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:void 0},parallax:{type:[Boolean,Object],default:void 0},scrollbar:{type:[Boolean,Object],default:void 0},thumbs:{type:Object,default:void 0},virtual:{type:[Boolean,Object],default:void 0},zoom:{type:[Boolean,Object],default:void 0},grid:{type:[Object],default:void 0},freeMode:{type:[Boolean,Object],default:void 0},enabled:{type:Boolean,default:void 0}},emits:["_beforeBreakpoint","_containerClasses","_slideClass","_slideClasses","_swiper","_freeModeNoMomentumRelease","activeIndexChange","afterInit","autoplay","autoplayStart","autoplayStop","autoplayPause","autoplayResume","autoplayTimeLeft","beforeDestroy","beforeInit","beforeLoopFix","beforeResize","beforeSlideChangeStart","beforeTransitionStart","breakpoint","changeDirection","click","disable","doubleTap","doubleClick","destroy","enable","fromEdge","hashChange","hashSet","init","keyPress","lock","loopFix","momentumBounce","navigationHide","navigationShow","navigationPrev","navigationNext","observerUpdate","orientationchange","paginationHide","paginationRender","paginationShow","paginationUpdate","progress","reachBeginning","reachEnd","realIndexChange","resize","scroll","scrollbarDragEnd","scrollbarDragMove","scrollbarDragStart","setTransition","setTranslate","slideChange","slideChangeTransitionEnd","slideChangeTransitionStart","slideNextTransitionEnd","slideNextTransitionStart","slidePrevTransitionEnd","slidePrevTransitionStart","slideResetTransitionStart","slideResetTransitionEnd","sliderMove","sliderFirstMove","slidesLengthChange","slidesGridLengthChange","snapGridLengthChange","snapIndexChange","swiper","tap","toEdge","touchEnd","touchMove","touchMoveOpposite","touchStart","transitionEnd","transitionStart","unlock","update","virtualUpdate","zoomChange"],setup(e,t){let{slots:i,emit:r}=t;const{tag:s,wrapperTag:u}=e,d=Fe("swiper"),l=Fe(null),m=Fe(!1),g=Fe(!1),x=Fe(null),w=Fe(null),C=Fe(null),I={value:[]},M={value:[]},L=Fe(null),$=Fe(null),F=Fe(null),U=Fe(null),{params:ee,passedParams:V}=X2(e,!1);sb(i,I,M),C.value=V,M.value=I.value;const Q=()=>{sb(i,I,M),m.value=!0};ee.onAny=function(te){for(var G=arguments.length,j=new Array(G>1?G-1:0),z=1;z<G;z++)j[z-1]=arguments[z];r(te,...j)},Object.assign(ee.on,{_beforeBreakpoint:Q,_containerClasses(te,G){d.value=G}});const ae={...ee};if(delete ae.wrapperClass,w.value=new Wp(ae),w.value.virtual&&w.value.params.virtual.enabled){w.value.virtual.slides=I.value;const te={cache:!1,slides:I.value,renderExternal:G=>{l.value=G},renderExternalUpdate:!1};Ql(w.value.params.virtual,te),Ql(w.value.originalParams.virtual,te)}xh(()=>{!g.value&&w.value&&(w.value.emitSlidesClasses(),g.value=!0);const{passedParams:te}=X2(e,!1),G=lte(te,C.value,I.value,M.value,j=>j.props&&j.props.key);C.value=te,(G.length||m.value)&&w.value&&!w.value.destroyed&&cte({swiper:w.value,slides:I.value,passedParams:te,changedParams:G,nextEl:L.value,prevEl:$.value,scrollbarEl:U.value,paginationEl:F.value}),m.value=!1}),Oi("swiper",w),fn(l,()=>{Ir(()=>{dte(w.value)})}),Bn(()=>{x.value&&(ote({el:x.value,nextEl:L.value,prevEl:$.value,paginationEl:F.value,scrollbarEl:U.value,swiper:w.value},ee),r("swiper",w.value))}),ao(()=>{w.value&&!w.value.destroyed&&w.value.destroy(!0,!1)});function be(te){return ee.virtual?ute(w,te,l.value):(te.forEach((G,j)=>{G.props||(G.props={}),G.props.swiperRef=w,G.props.swiperSlideIndex=j}),te)}return()=>{const{slides:te,slots:G}=sb(i,I,M);return ni(s,{ref:x,class:BP(d.value)},[G["container-start"],ni(u,{class:ate(ee.wrapperClass)},[G["wrapper-start"],be(te),G["wrapper-end"]]),FP(e)&&[ni("div",{ref:$,class:"swiper-button-prev"}),ni("div",{ref:L,class:"swiper-button-next"})],zP(e)&&ni("div",{ref:U,class:"swiper-scrollbar"}),$P(e)&&ni("div",{ref:F,class:"swiper-pagination"}),G["container-end"]])}}},J2={name:"SwiperSlide",props:{tag:{type:String,default:"div"},swiperRef:{type:Object,required:!1},swiperSlideIndex:{type:Number,default:void 0,required:!1},zoom:{type:Boolean,default:void 0,required:!1},lazy:{type:Boolean,default:!1,required:!1},virtualIndex:{type:[String,Number],default:void 0}},setup(e,t){let{slots:i}=t,r=!1;const{swiperRef:s}=e,u=Fe(null),d=Fe("swiper-slide"),l=Fe(!1);function m(w,C,I){C===u.value&&(d.value=I)}Bn(()=>{!s||!s.value||(s.value.on("_slideClass",m),r=!0)}),Xx(()=>{r||!s||!s.value||(s.value.on("_slideClass",m),r=!0)}),xh(()=>{!u.value||!s||!s.value||(typeof e.swiperSlideIndex<"u"&&(u.value.swiperSlideIndex=e.swiperSlideIndex),s.value.destroyed&&d.value!=="swiper-slide"&&(d.value="swiper-slide"))}),ao(()=>{!s||!s.value||s.value.off("_slideClass",m)});const g=Oe(()=>({isActive:d.value.indexOf("swiper-slide-active")>=0,isVisible:d.value.indexOf("swiper-slide-visible")>=0,isPrev:d.value.indexOf("swiper-slide-prev")>=0,isNext:d.value.indexOf("swiper-slide-next")>=0}));Oi("swiperSlide",g);const x=()=>{l.value=!0};return()=>ni(e.tag,{class:BP(`${d.value}`),ref:u,"data-swiper-slide-index":typeof e.virtualIndex>"u"&&s&&s.value&&s.value.params.loop?e.swiperSlideIndex:e.virtualIndex,onLoadCapture:x},e.zoom?ni("div",{class:"swiper-zoom-container","data-swiper-zoom":typeof e.zoom=="number"?e.zoom:void 0},[i.default&&i.default(g.value),e.lazy&&!l.value&&ni("div",{class:"swiper-lazy-preloader"})]):[i.default&&i.default(g.value),e.lazy&&!l.value&&ni("div",{class:"swiper-lazy-preloader"})])}},Sx=e=>{var t;return Array.isArray(e.title)?e.title.map(ko).join(", "):(t=e.title)!=null&&t.length?ko(e.title):"(No Title)"},hte=e=>{const{primaryHandlerId:t}=e;return t?_c(t):null},fte=e=>({id:e.objectId,objectId:e.objectId,primaryHandlerId:e.primaryHandlerId??null,title:Sx(e),thumb:{src:hte(e),alt:Sx(e)}});function pte(e){const{fileAssets:t,objectId:i}=e,r=[];if(!t)return r;const s=t-1;for(let u=0;u<s;u++){const d={id:`${i}-placeholder-${u}`,objectId:void 0,title:void 0,primaryHandlerId:void 0,thumb:{src:void 0,alt:void 0},isChildSlide:!0,isPlaceholder:!0,parentObjectId:i,parentTitle:Sx(e),childIndex:u,totalChildren:s};r.push(d)}return r}function mte(e){const{id:t,relatedAssetTitle:i,primaryHandler:r}=e,s=Array.isArray(i)?i[0]:i??"No Title";return{id:`${t}-related-asset`,objectId:t,title:s,primaryHandlerId:r,thumb:{src:r?_c(r):null,alt:s}}}function gte({fileId:e,parentObjectId:t,parentTitle:i}){return{id:`${t}-file-${e}`,objectId:t,title:i,primaryHandlerId:e,thumb:{src:e?_c(e):null,alt:i}}}function vte(e){const t=[],i=r=>r&&typeof r=="object"&&r.fileId;return Object.values(e).forEach(r=>{Array.isArray(r)&&r.forEach(s=>{i(s)&&t.push(s)})}),t}function _te(e){return Object.entries((e==null?void 0:e.relatedAssets)??{}).map(([t,i])=>({...i,id:t}))}async function yte(e){const t=await Wn.getAsset(e);if(!t)throw new Error("Asset not found. Cannot fetch child slides.");const i=vte(t),r=_te(t);return[...i.filter(u=>!u.isPrimary).map(u=>({fileId:u.fileId,parentObjectId:e,parentTitle:Tu(t)})).map(gte),...r.map(mte)]}function bte(e){const t=Br([]);function i(r){const s=fte(r);t.push(s);const u=pte(r);t.push(...u),yte(r.objectId).then(d=>{u.forEach((l,m)=>{const g=d[m];if(!g)throw new Error("Child slide not found, cannot replace placeholder. There may be a mismatch between the number of placeholders and the number of child slides.");const x=t.findIndex(w=>w.id===l.id);t[x]=g})})}return e.forEach(r=>{i(r)}),{slides:t,createSlidesForMatch:i}}const xte=ue("span",{class:"sr-only"},"Toggle fullscreen",-1),wte={class:"not-sr-only hidden md:inline-block"},Ste=lt({__name:"FullscreenButton",props:{isFullscreen:{type:Boolean}},emits:["click"],setup(e){return(t,i)=>(H(),me("button",{class:Dn(["inline-flex gap-1 p-2 md:px-4 items-center justify-center rounded-md text-xs uppercase tracking-wide whitespace-nowrap group transition-all",{" text-neutral-900 bg-transparent-black-100 hover:bg-blue-600 hover:text-blue-100":!t.isFullscreen,"bg-transparent-white-300 text-neutral-500 hover:bg-blue-600 hover:text-blue-100":t.isFullscreen}]),onClick:i[0]||(i[0]=r=>t.$emit("click",r))},[t.isFullscreen?(H(),We(he(kN),{key:1,class:"fill-neutral-500 group-hover:fill-neutral-100 transition-all"})):(H(),We(he(KN),{key:0,class:"fill-neutral-900 group-hover:fill-neutral-200 transition-all"})),xte,ue("span",wte,xt(t.isFullscreen?"Exit":"")+" Fullscreen",1)],2))}});const Tte={class:"font-bold"},Ete={class:"w-full h-full border"},Cte={key:1,class:"w-full h-full flex items-center justify-center -mt-12"},Ite={class:"border border-neutral-400 aspect-video flex items-center justify-center w-full relative"},Ate={key:0,class:"absolute bottom-0 left-0 w-6 h-6 text-xs z-10 flex items-center justify-center bg-transparent-white-800 text-neutral-900"},Mte={class:"flex flex-col items-center justify-center text-xs text-center px-4 py-2"},UP=lt({__name:"SearchResultsGallery",props:{totalResults:{},matches:{},status:{}},emits:["loadMore"],setup(e,{emit:t}){const i=e,r=[rte,Z2,ste,K2,ite],s=Fe(null),u=Fe(null),d=Fe(null),{isFullscreen:l,toggle:m}=zz(d),{slides:g,createSlidesForMatch:x}=bte([]),w=Fe(0),C=Oe(()=>g[w.value]),I=F=>{s.value=F},M=F=>{u.value=F},L=F=>{w.value=F.activeIndex,s.value&&s.value.slideTo(F.activeIndex)},$=F=>{var U;w.value=F.activeIndex,(U=u.value)==null||U.slideTo(F.activeIndex)};return fn(()=>[...i.matches??[]],(F,U)=>{if(!F)return;nF(F,U??[]).forEach(x)},{immediate:!0}),fn(w,()=>{if(!i.matches||i.status==="fetching")return;const F=i.matches.length<i.totalResults,U=w.value>=g.length-10;F&&U&&t("loadMore")}),(F,U)=>(H(),me("div",{ref_key:"galleryEl",ref:d,class:Dn(["search-results-gallery",{"h-screen flex flex-col items-center justify-center":he(l)}])},[u.value?(H(),me("div",{key:0,class:Dn(["flex items-center justify-between w-full gap-4",{"p-4":he(l),"py-2":!he(l)}])},[ue("h2",Tte,[C.value.objectId?(H(),We(as,{key:0,to:he(dl)(C.value.objectId),class:Dn(["transition-colors hover:text-blue-600 !no-underline",{"text-neutral-300 text-4xl ":he(l),"text-xl text-blue-700 ":!he(l)}])},{default:Me(()=>[Mt(xt(C.value.title),1)]),_:1},8,["to","class"])):ot("",!0)]),ye(Ste,{isFullscreen:he(l),onClick:he(m)},null,8,["isFullscreen","onClick"])],2)):ot("",!0),ye(he(Y2),{class:"main-swiper flex-1",modules:r,slidesPerView:1,spaceBetween:50,thumbs:{swiper:s.value},keyboard:{enabled:!0,onlyInViewport:!1},onSwiper:M,onSlideChange:L},{default:Me(()=>[(H(!0),me(Nt,null,Fn(he(g),ee=>(H(),We(he(J2),{key:ee.id},{default:Me(({isActive:V,isPrev:Q,isNext:ae})=>[ue("div",Ete,[ee.primaryHandlerId&&(V||Q||ae)?(H(),We(Ik,{key:0,class:"border w-full h-full",fileHandlerId:ee.primaryHandlerId},null,8,["fileHandlerId"])):(H(),me("div",Cte,[ye(Fp)]))])]),_:2},1024))),128))]),_:1},8,["thumbs"]),ye(he(Y2),{class:"thumbs-swiper w-full",modules:[he(K2),he(Z2)],watchSlidesProgress:!0,slidesPerView:10,centeredSlides:!0,scrollbar:{draggable:!0,dragSize:32},spaceBetween:4,onSwiper:I,onTouchEnd:$,onScrollbarDragEnd:$},{default:Me(()=>[(H(!0),me(Nt,null,Fn(he(g),(ee,V)=>(H(),We(he(J2),{key:ee.id},{default:Me(()=>[ue("div",Ite,[V!==w.value?(H(),me("div",Ate,xt(V+1),1)):ot("",!0),ee.thumb.src?(H(),We(Au,{key:1,src:ee.thumb.src,alt:ee.thumb.alt??"Loading...",class:"swiper-lazy object-cover w-full h-full"},null,8,["src","alt"])):(H(),We(Fp,{key:2}))])]),_:2},1024))),128))]),_:1},8,["modules"]),u.value?(H(),me("div",{key:1,class:Dn(["flex items-center justify-center mb-1 relative py-4",{"text-neutral-50":he(l),"text-neutral-900":!he(l)}])},[ye(si,{variant:"tertiary",class:Dn(["!m-0 bg-transparent hover:!bg-transparent-white-500",{"opacity-30":w.value===0}]),onClick:U[0]||(U[0]=ee=>u.value.slidePrev())},{default:Me(()=>[ye(he(oM),{class:Dn({"text-neutral-50":he(l),"text-neutral-900":!he(l)})},null,8,["class"])]),_:1},8,["class"]),ue("div",Mte,xt(w.value+1),1),ye(si,{variant:"tertiary",class:"!m-0 bg-transparent hover:!bg-transparent-white-500",onClick:U[1]||(U[1]=ee=>u.value.slideNext())},{default:Me(()=>[ye(he(lM),{class:Dn({"text-neutral-50 ":he(l),"text-neutral-900":!he(l)})},null,8,["class"])]),_:1})],2)):ot("",!0)],2))}});const kte={class:"results-count"},Pte={key:0,class:"flex gap-2 items-baseline"},Dte={class:"text-sm text-neutral-500"},Lte={key:1,class:"text-sm text-neutral-500"},Tx=lt({__name:"ResultsCount",props:{showingCount:{},total:{},fetchStatus:{}},emits:["loadMore","loadAll"],setup(e,{emit:t}){const i=e;function r(){if(i.fetchStatus!=="fetching"){if(i.total-i.showingCount<1e3){t("loadAll");return}t("loadMore")}}return(s,u)=>(H(),me("div",kte,[s.total>0?(H(),me("div",Pte,[ue("p",Dte,[ue("b",null,xt(s.showingCount),1),Mt(" of "),ue("b",null,xt(s.total),1),Mt(" results ")]),s.showingCount<s.total?(H(),We(si,{key:0,variant:"tertiary",onClick:r},{default:Me(()=>[Mn(s.$slots,"loadMoreButtonLabel",{},()=>[Mt(" Load "+xt(s.total-s.showingCount<1e3?"All":"More"),1)]),bs(ye(zo,{class:"w-3 h-3 text-blue-600 ml-1"},null,512),[[Ca,s.fetchStatus==="fetching"]])]),_:3})):ot("",!0)])):ot("",!0),s.fetchStatus!=="fetching"&&s.total===0?(H(),me("p",Lte," No results found. ")):ot("",!0)]))}}),Ote={class:"flex items-baseline gap-2"},Rte=ue("label",{for:"location",class:"sr-only"},"Sort",-1),Fte=["value"],$te=["value","disabled"],zte=lt({__name:"SearchResultsSortSelect",props:{sortOptions:{},selectedSortOption:{},searchQuery:{}},emits:["sortOptionChange"],setup(e,{emit:t}){function i(r){const s=r.target.value??null;t("sortOptionChange",s)}return(r,s)=>(H(),me("div",Ote,[Rte,ue("select",{id:"sort",name:"sort",class:"block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-neutral-900 ring-1 ring-inset ring-neutral-300 focus:ring-2 focus:ring-indigo-600 text-sm sm:leading-6 max-w-full bg-transparent-white-800",value:r.selectedSortOption,onChange:i},[(H(!0),me(Nt,null,Fn(r.sortOptions,(u,d)=>(H(),me("option",{key:d,value:d,disabled:d==he(_s).BEST_MATCH&&!r.searchQuery},xt(u),9,$te))),128))],40,Fte)]))}}),Bte=ue("p",{class:"mb-2"},"Something went wrong loading these search results.",-1),Nte=ue("span",{class:"uppercase text-xs mr-4"},"Search Text",-1),Ute=ue("span",{class:"uppercase text-xs mr-4"},"Sort Type",-1),jte=ue("p",{class:"mt-2"},[Mt(" Try reloading, and if the problem persists, please contact "),ue("a",{href:"mailto:latistecharch@umn.edu"},"latistecharch@umn.edu"),Mt(" for help. ")],-1),Vte=lt({__name:"SearchErrorNotification",setup(e){const t=Nr();return(i,r)=>(H(),We(cm,{type:"danger",title:"Error"},{default:Me(()=>{var s;return[Bte,ue("div",null,[Nte,ue("q",null,xt(((s=he(t).searchEntry)==null?void 0:s.searchText)??he(t).query),1)]),ue("div",null,[Ute,ue("q",null,xt(he(t).sort??"Default"),1)]),jte]}),_:1}))}}),Hte=ue("span",{class:"sr-only"}," Add Search Results ",-1),Gte={class:"flex-1 flex gap-4 items-center"},Wte=ue("label",{class:"sr-only"},"Add to Drawer",-1),qte=ue("option",{disabled:"",value:""},"-- Select a Drawer --",-1),Zte=["value"],Kte=ue("p",{class:"my-4 before:absolute before:top-1/2 before:-translate-y-1/2 before:block before:h-[1px] before:w-full before:left-0 before:bg-transparent-black-100 relative leading-none text-center"},[ue("span",{class:"bg-neutral-50 relative z-10 px-2"},"or")],-1),Xte=["onSubmit"],Yte=lt({__name:"AddSearchResultsToDrawerButton",setup(e){const t=Fe(!1),i=Fe(""),r=Fe(""),s=Fe("idle"),u=Pa(),d=Nr(),l=Oe(()=>r.value.trim()&&!u.drawers.some(x=>x.title===r.value));async function m(x){const w=typeof x=="string"?Number.parseInt(x):x;if(isNaN(w))throw new Error("Cannot add to drawer. Drawer ID is not a number.");t.value=!1,s.value="fetching";const C=d.matches.map(I=>I.objectId);await u.addAssetListToDrawer(C,w),s.value="idle",r.value=""}async function g(){if(!l.value)throw new Error(`Cannot create drawer. Drawer name '${r.value}' is invalid'.`);s.value="fetching",t.value=!1;const x=await u.createDrawer(r.value);m(x.id)}return(x,w)=>(H(),me(Nt,null,[ye(gc,zr({title:"Add Search Results to Drawer"},x.$attrs,{disabled:he(d).matches.length===0,onClick:w[0]||(w[0]=C=>t.value=!0)}),{default:Me(()=>[s.value==="fetching"?(H(),We(he(zo),{key:0})):(H(),We(he(aM),{key:1})),Hte]),_:1},16,["disabled"]),ye(bc,{type:"info",label:"Add Search Results to Drawer",isOpen:t.value,class:"max-w-lg",onClose:w[4]||(w[4]=C=>t.value=!1)},{default:Me(()=>[ue("div",null,[ue("form",{class:"flex items-center justify-between gap-2",onSubmit:w[2]||(w[2]=Mo(C=>m(i.value),["prevent"]))},[ue("div",Gte,[Wte,bs(ue("select",{"onUpdate:modelValue":w[1]||(w[1]=C=>i.value=C),class:Dn(["border border-neutral-200 rounded w-full text-sm",{"text-neutral-400":!i.value}])},[qte,(H(!0),me(Nt,null,Fn(he(u).drawers,C=>(H(),me("option",{key:C.id,value:C.id},xt(C.title),9,Zte))),128))],2),[[wh,i.value]])]),ye(si,{class:"text-sm",type:"submit",disabled:!i.value},{default:Me(()=>[Mt(" Add to Drawer ")]),_:1},8,["disabled"])],32),Kte,ue("form",{class:"flex items-center justify-between gap-2",onSubmit:Mo(g,["prevent"])},[ye(q1,{modelValue:r.value,"onUpdate:modelValue":w[3]||(w[3]=C=>r.value=C),class:"flex-1 border border-neutral-200 rounded",inputClass:"bg-white placeholder-neutral-400",labelHidden:!0},null,8,["modelValue"]),ye(si,{type:"submit",class:"text-sm",disabled:!l.value},{default:Me(()=>[Mt(" Create Drawer ")]),_:1},8,["disabled"])],40,Xte)])]),_:1},8,["isOpen"])],64))}}),Jte={class:"px-4"},Qte={class:"flex justify-between items-center my-8"},ene={key:1,class:"text-4xl font-bold"},tne={key:0},nne={key:1},ine={key:3,class:"flex items-center p-1 bg-white rounded-md"},rne={class:"sm:flex justify-between items-baseline bg-transparent-black-50 rounded-md mb-4"},sne=lt({__name:"SearchResultsPage",props:{searchId:{},objectId:{default:null},resultsView:{default:void 0}},setup(e){const t=e,i=Ai(),r=Nr(),s=Eu(),u=$o(),d=Oe(()=>{var C;return((C=r.searchEntry)==null?void 0:C.searchText)??r.query}),l=Fe(!1);r.onBeforeNewSearch(()=>{l.value=!1}),r.onAfterNewSearch(()=>{l.value=!0}),fn(()=>t.searchId,()=>r.search(t.searchId),{immediate:!0});const m=C=>tx.includes(C.id);function g(C){if(!m(C))throw new Error(`Invalid tab id: ${C.id}`);r.setResultsView(C.id),u.replace({query:{...s.query,resultsView:C.id}})}async function x(C){await r.setSortOption(C),u.push({name:"search",params:{searchId:r.searchId},query:{...s.query,sort:C}})}function w(C){const I=s.query.sort;return C===""&&(!I||I===_s.BEST_MATCH)?_s.TITLE:I||_s.BEST_MATCH}return Bn(()=>{var I;const C=t.resultsView||r.resultsView||"grid";r.sort=w(((I=r.searchEntry)==null?void 0:I.searchText)??r.query),r.setResultsView(C),u.replace({query:{...s.query,resultsView:C}})}),fn([()=>t.objectId,()=>r.status],([C,I])=>{!C||I==="fetching"||Ir(()=>{const M=document.getElementById(`object-${C}`);M&&M.scrollIntoView({block:"center"})})},{immediate:!0}),(C,I)=>(H(),We(oo,{class:"search-results-page"},{default:Me(()=>{var M;return[ue("div",Jte,[he(r).status==="error"?(H(),We(Vte,{key:0})):(H(),me(Nt,{key:1},[ue("div",Qte,[he(r).browsingCollectionId?(H(),We(QX,{key:0,collectionId:he(r).browsingCollectionId},null,8,["collectionId"])):he(r).isReady?(H(),me("h2",ene,[d.value?(H(),me("q",tne,xt(d.value),1)):(H(),me("span",nne,"Search Results"))])):(H(),We(ll,{key:2,class:"!w-1/2 !h-12"})),he(r).isReady&&((M=he(i).currentUser)!=null&&M.canManageDrawers)?(H(),me("div",ine,[ye(Yte)])):ot("",!0)]),ye(tP,{labelsClass:"sticky top-14 z-20 search-results-page__tabs -mx-4 px-4 border-b border-neutral-200 pt-4",activeTabId:he(r).resultsView,onTabChange:g},{default:Me(()=>{var L;return[ue("div",rne,[ye(Tx,{class:"mb-2 sm:mb-0 p-2",fetchStatus:he(r).status,showingCount:he(r).matches.length,total:he(r).totalResults??0,onLoadMore:he(r).loadMore,onLoadAll:I[0]||(I[0]=$=>he(r).loadMore({loadAll:!0}))},null,8,["fetchStatus","showingCount","total","onLoadMore"]),["map","timeline"].includes(he(r).resultsView)?ot("",!0):(H(),We(zte,{key:0,class:"p-2",sortOptions:he(r).sortOptions,selectedSortOption:he(r).sort,searchQuery:((L=he(r).searchEntry)==null?void 0:L.searchText)??he(r).query,onSortOptionChange:x},null,8,["sortOptions","selectedSortOption","searchQuery"]))]),ye(So,{id:"grid",label:"Grid"},{default:Me(()=>{var $;return[ye(lY,{totalResults:he(r).totalResults,matches:he(r).matches,status:he(r).status,showAddToDrawerButton:($=he(i).currentUser)==null?void 0:$.canManageDrawers,onLoadMore:I[1]||(I[1]=()=>he(r).loadMore())},null,8,["totalResults","matches","status","showAddToDrawerButton"])]}),_:1}),ye(So,{id:"list",label:"List"},{default:Me(()=>[ye(bY,{totalResults:he(r).totalResults,matches:he(r).matches,status:he(r).status,onLoadMore:I[2]||(I[2]=()=>he(r).loadMore())},null,8,["totalResults","matches","status"])]),_:1}),ye(So,{id:"timeline",label:"Timeline"},{default:Me(()=>[he(r).totalResults&&he(r).status==="success"?(H(),We(IP,{key:0,totalResults:he(r).totalResults,matches:he(r).matches,status:he(r).status,onLoadMore:I[3]||(I[3]=()=>he(r).loadMore())},null,8,["totalResults","matches","status"])):ot("",!0)]),_:1}),ye(So,{id:"map",label:"Map"},{default:Me(()=>[he(r).isReady?(H(),We(AP,{key:0,totalResults:he(r).totalResults,matches:he(r).matches,status:he(r).status,onLoadMore:I[4]||(I[4]=()=>he(r).loadMore())},null,8,["totalResults","matches","status"])):ot("",!0)]),_:1}),ye(So,{id:"gallery",label:"Gallery"},{default:Me(()=>[l.value?(H(),We(UP,{key:0,totalResults:he(r).totalResults??1/0,matches:he(r).matches,status:he(r).status,onLoadMore:I[5]||(I[5]=()=>he(r).loadMore())},null,8,["totalResults","matches","status"])):ot("",!0)]),_:1}),["grid","list"].includes(he(r).resultsView)&&(he(r).totalResults??0)>6?(H(),We(Tx,{key:0,class:"mt-4",fetchStatus:he(r).status,showingCount:he(r).matches.length,total:he(r).totalResults??0,onLoadMore:he(r).loadMore,onLoadAll:I[6]||(I[6]=$=>he(r).loadMore({loadAll:!0}))},null,8,["fetchStatus","showingCount","total","onLoadMore"])):ot("",!0)]}),_:1},8,["activeTabId"])],64))])]}),_:1}))}});function jP(){const e=Z3();if(!e)throw new Error("Cannot reset all stores. Pinia not found.");e._s.forEach(t=>t.$reset())}const ane=e=>(ro("data-v-a2825c4e"),e=e(),so(),e),one={class:"px-4"},lne=ane(()=>ue("header",{class:"font-bold text-center mb-8 pb-4 border-b border-neutral-900"},[ue("h2",{class:"text-2xl capitalize"},"Login")],-1)),cne=["onSubmit"],une={key:0,class:"text-red-500 text-sm italic mb-6 capitalize bg-red-50 p-2 rounded-md border border-red-200 text-center"},dne={class:"flex flex-col gap-6 mb-12"},hne={key:0,class:"text-red-500 text-sm italic mt-2"},fne={class:"border-none",type:"button"},pne={key:0,class:"text-red-600 text-sm italic mt-2"},mne={key:1,class:"text-center mt-4 text-sm"},gne=["href"],vne=lt({__name:"LocalLoginPage",props:{redirectURL:{default:ci.instance.base.path}},setup(e){const t=e,i=Fe(""),r=Fe(""),s=Fe(!1),u=Fe(!1),d=Br({username:"",password:"",form:""}),l=Fe(!1),m=Ai(),g=Pa(),x=$o(),w=async()=>{if(d.username="",d.password="",l.value=!1,i.value||(d.username="Username required"),r.value||(d.password="Password required"),!i.value||!r.value)return;u.value=!0;const{status:I,message:M}=await Wn.loginAsGuest({username:i.value,password:r.value});if(r.value="",u.value=!1,I==="error"){d.form=M,l.value=!0;return}I==="success"&&(d.form="",Wn.clearCache(),jP(),await m.init(),await g.init(),x.push(t.redirectURL))},C=Oe(()=>encodeURIComponent(t.redirectURL));return Bn(()=>{m.isLoggedIn&&x.push(t.redirectURL)}),(I,M)=>(H(),We(oo,null,{default:Me(()=>[ue("div",one,[ue("section",{class:Dn(["max-w-md border border-neutral-900 rounded-lg mx-auto my-12 p-8",{"has-form-error":l.value}])},[lne,ue("form",{onSubmit:Mo(w,["prevent"])},[d.form?(H(),me("p",une,xt(d.form),1)):ot("",!0),ue("div",dne,[ue("div",null,[ye(Ya,{id:"username",modelValue:i.value,"onUpdate:modelValue":M[0]||(M[0]=L=>i.value=L),label:"Username",inputClass:{"!border-red-500 !bg-red-50":!!d.username},type:"string","aria-required":"true"},null,8,["modelValue","inputClass"]),d.username?(H(),me("p",hne,xt(d.username),1)):ot("",!0)]),ue("div",null,[ye(Ya,{id:"password",modelValue:r.value,"onUpdate:modelValue":M[3]||(M[3]=L=>r.value=L),label:"Password",inputClass:{"!border-red-500 !bg-red-50":!!d.password},type:s.value?"text":"password","aria-required":"true"},{append:Me(()=>[ue("button",fne,[s.value?(H(),We(he($N),{key:1,onClick:M[2]||(M[2]=L=>s.value=!1)})):(H(),We(he(VN),{key:0,onClick:M[1]||(M[1]=L=>s.value=!0)}))])]),_:1},8,["modelValue","inputClass","type"]),d.password?(H(),me("p",pne,xt(d.password),1)):ot("",!0)])]),ye(si,{variant:"primary",type:"submit",class:Dn(["w-full",{"cursor-not-allowed opacity-50 !border-neutral-300":!i.value||!r.value}]),disabled:!i.value||!r.value},{default:Me(()=>[Mt(" Login "),u.value?(H(),We(he(zo),{key:0,class:"animate-spin ml-2 h-4 w-4"})):ot("",!0)]),_:1},8,["class","disabled"]),he(m).instance.useCentralAuth&&he(m).instance.centralAuthLabel?(H(),me("div",mne,[ue("a",{href:`${he(ci).instance.base.url}/loginManager/remoteLogin/?redirect=${C.value}`}," Sign In with "+xt(he(m).instance.centralAuthLabel)+" Login ",9,gne)])):ot("",!0)],40,cne)],2)])]),_:1}))}});const _ne=sn(vne,[["__scopeId","data-v-a2825c4e"]]),yne={key:0,class:"static-page__content p-4 lg:p-8 mx-auto flex-1 w-full max-w-screen-xl"},bne={class:"prose prose-neutral"},xne={class:"text-4xl font-bold"},wne=lt({__name:"StaticContentPage",props:{pageId:{}},setup(e){const t=e,i=Fe(null);return fn(()=>t.pageId,async()=>{i.value=await Wn.getStaticPage(t.pageId)},{immediate:!0}),(r,s)=>(H(),We(oo,null,{default:Me(()=>[i.value?(H(),me("div",yne,[ue("div",bne,[ue("h1",xne,xt(i.value.title||"No Title"),1),ye(ch,{html:i.value.content??"",class:"w-full"},null,8,["html"])])])):ot("",!0),ye(Tk)]),_:1}))}});const Sne=sn(wne,[["__scopeId","data-v-5f71e5b2"]]),Tne={class:"p-8"},Ene={class:"text-8xl font-bold text-neutral-200"},Cne={class:"text-4xl mb-8"},Ine={class:"my-4"},Q2=lt({__name:"ErrorPage",props:{errorCode:{default:404}},setup(e){const t=e,i={400:{message:"Bad Request",detailedMessage:"We couldn't understand your request."},404:{message:"Page not found",detailedMessage:"We couldn't find this page."},500:{message:"Internal Server Error",detailedMessage:"Something went wrong on our end."}};function r(u){var d;return((d=i[u])==null?void 0:d.message)||"Unknown Error"}function s(u){var d;return((d=i[u])==null?void 0:d.detailedMessage)||"Something went wrong."}return Qk(r(t.errorCode)),(u,d)=>(H(),We(oo,null,{default:Me(()=>[ue("div",Tne,[ue("h1",Ene,xt(u.errorCode),1),ue("h2",Cne,xt(r(u.errorCode)),1),ue("p",Ine,xt(s(u.errorCode)),1),ye(si,{href:he(ci).instance.base.url,icon:"home",iconPosition:"start"},{default:Me(()=>[Mt(" Go Home ")]),_:1},8,["href"])])]),_:1}))}}),Ane=ue("span",{class:"sr-only"},"Delete drawer",-1),Mne=lt({__name:"DeleteDrawerButton",props:{drawer:{}},setup(e){const t=e,i=Pa(),r=Fe(!1);async function s(){i.deleteDrawer(t.drawer.id)}return(u,d)=>(H(),me(Nt,null,[ue("button",zr({class:"px-2 py-4 inline-flex items-center justify-center text-transparent-black-400 hover:text-neutral-900",type:"button"},u.$attrs,{onClick:d[0]||(d[0]=l=>r.value=!0)}),[Ane,ye(he(om),{class:"!w-5 !h-5"})],16),ye(Z1,{isOpen:r.value,title:"Delete Drawer",type:"danger",confirmLabel:"Delete",onClose:d[1]||(d[1]=l=>r.value=!1),onConfirm:s},{default:Me(()=>[ue("p",null,[Mt(" Are you sure you want to delete drawer "),ue("b",null,xt(u.drawer.title),1),Mt("? This action cannot be undone. ")])]),_:1},8,["isOpen"])],64))}}),kne=["onSubmit"],Pne={class:"flex justify-end gap-2 items-center"},Dne=lt({__name:"CreateDrawerButton",setup(e){const t=Fe(!1),i=Fe(""),r=Fe(!1),s=Pa(),u=Oe(()=>i.value.trim()),d=Oe(()=>i.value.length>0),l=Oe(()=>!s.drawers.some(C=>C.title.trim()===u.value)),m=Oe(()=>d.value&&l.value);function g(){s.createDrawer(u.value),t.value=!1,x()}function x(){i.value="",r.value=!1}function w(){t.value=!1,x()}return(C,I)=>(H(),me(Nt,null,[ye(si,{onClick:I[0]||(I[0]=M=>t.value=!0)},{default:Me(()=>[Mt("Create Drawer")]),_:1}),ye(bc,{isOpen:t.value,label:"Create Drawer",class:"max-w-lg mx-auto m-4",onClose:w},{default:Me(()=>[ue("form",{class:"flex flex-col gap-6",onSubmit:Mo(g,["prevent"])},[ye(q1,{modelValue:i.value,"onUpdate:modelValue":I[1]||(I[1]=M=>i.value=M)},null,8,["modelValue"]),ue("div",Pne,[ye(si,{variant:"tertiary",onClick:w},{default:Me(()=>[Mt("Cancel")]),_:1}),ye(si,{type:"submit",variant:"primary",disabled:!m.value},{default:Me(()=>[Mt(" Create ")]),_:1},8,["disabled"])])],40,kne)]),_:1},8,["isOpen"])],64))}}),Lne=e=>(ro("data-v-b6643f72"),e=e(),so(),e),One={class:"p-8 px-4"},Rne=Lne(()=>ue("h1",{class:"text-4xl font-bold my-8"},"Drawers",-1)),Fne={key:0,class:"mb-4"},$ne={key:"no-drawers"},zne={class:"transition-colors duration-150"},Bne=lt({__name:"AllDrawersPage",setup(e){nm(m=>({"4ff35b63":i.value,"4ffa2e49":l.value}));const t=Fe(null),i=Fe(1),r=Ai(),s=Pa(),u=Oe(()=>r.currentUser),d=Oe(()=>[...s.drawers].sort((m,g)=>m.title.localeCompare(g.title)));k_(t,m=>{const[g]=m,{width:x}=g.contentRect;x<640&&(i.value=1),x<768&&(i.value=2),x<1024&&(i.value=3),x>=1024&&(i.value=4)});const l=Oe(()=>Math.ceil(d.value.length/i.value));return(m,g)=>(H(),We(oo,null,{default:Me(()=>{var x;return[ue("div",One,[Rne,(x=u.value)!=null&&x.canManageDrawers?(H(),me("nav",Fne,[ye(Dne)])):ot("",!0),ue("div",{ref_key:"gridContainer",ref:t,class:"grid grid-cols-2 gap-2"},[ye(s1,{name:"fade"},{default:Me(()=>[he(s).isReady&&!d.value.length?(H(),me("p",$ne," No drawers. ")):ot("",!0),(H(!0),me(Nt,null,Fn(d.value,w=>{var C;return H(),me("article",{key:w.id,class:"relative drawer-list-item rounded group transition-colors duration-150"},[(C=u.value)!=null&&C.canManageDrawers?(H(),We(Mne,{key:0,drawer:w,class:"float-right"},null,8,["drawer"])):ot("",!0),ye(as,{class:"p-4 block hover:no-underline w-full h-full",to:`/drawers/viewDrawer/${w.id}`},{default:Me(()=>[ue("h2",zne,xt(w.title),1)]),_:2},1032,["to"])])}),128))]),_:1})],512)])]}),_:1}))}});const Nne=sn(Bne,[["__scopeId","data-v-b6643f72"]]);var VP={exports:{}};const Une=AA(W3);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function eC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),i.push.apply(i,r)}return i}function Oo(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?eC(Object(i),!0).forEach(function(r){jne(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):eC(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}function _v(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_v=function(t){return typeof t}:_v=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_v(e)}function jne(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ka(){return ka=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},ka.apply(this,arguments)}function Vne(e,t){if(e==null)return{};var i={},r=Object.keys(e),s,u;for(u=0;u<r.length;u++)s=r[u],!(t.indexOf(s)>=0)&&(i[s]=e[s]);return i}function Hne(e,t){if(e==null)return{};var i=Vne(e,t),r,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(s=0;s<u.length;s++)r=u[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Gne(e){return Wne(e)||qne(e)||Zne(e)||Kne()}function Wne(e){if(Array.isArray(e))return Ex(e)}function qne(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Zne(e,t){if(e){if(typeof e=="string")return Ex(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ex(e,t)}}function Ex(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function Kne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Xne="1.14.0";function cl(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var _l=cl(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ym=cl(/Edge/i),tC=cl(/firefox/i),yp=cl(/safari/i)&&!cl(/chrome/i)&&!cl(/android/i),HP=cl(/iP(ad|od|hone)/i),Yne=cl(/chrome/i)&&cl(/android/i),GP={capture:!1,passive:!1};function fi(e,t,i){e.addEventListener(t,i,!_l&&GP)}function ai(e,t,i){e.removeEventListener(t,i,!_l&&GP)}function e_(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function Jne(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Ha(e,t,i,r){if(e){i=i||document;do{if(t!=null&&(t[0]===">"?e.parentNode===i&&e_(e,t):e_(e,t))||r&&e===i)return e;if(e===i)break}while(e=Jne(e))}return null}var nC=/\s+/g;function rr(e,t,i){if(e&&t)if(e.classList)e.classList[i?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(nC," ").replace(" "+t+" "," ");e.className=(r+(i?" "+t:"")).replace(nC," ")}}function An(e,t,i){var r=e&&e.style;if(r){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),t===void 0?i:i[t];!(t in r)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),r[t]=i+(typeof i=="string"?"":"px")}}function du(e,t){var i="";if(typeof e=="string")i=e;else do{var r=An(e,"transform");r&&r!=="none"&&(i=r+" "+i)}while(!t&&(e=e.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(i)}function WP(e,t,i){if(e){var r=e.getElementsByTagName(t),s=0,u=r.length;if(i)for(;s<u;s++)i(r[s],s);return r}return[]}function Ao(){var e=document.scrollingElement;return e||document.documentElement}function Ji(e,t,i,r,s){if(!(!e.getBoundingClientRect&&e!==window)){var u,d,l,m,g,x,w;if(e!==window&&e.parentNode&&e!==Ao()?(u=e.getBoundingClientRect(),d=u.top,l=u.left,m=u.bottom,g=u.right,x=u.height,w=u.width):(d=0,l=0,m=window.innerHeight,g=window.innerWidth,x=window.innerHeight,w=window.innerWidth),(t||i)&&e!==window&&(s=s||e.parentNode,!_l))do if(s&&s.getBoundingClientRect&&(An(s,"transform")!=="none"||i&&An(s,"position")!=="static")){var C=s.getBoundingClientRect();d-=C.top+parseInt(An(s,"border-top-width")),l-=C.left+parseInt(An(s,"border-left-width")),m=d+u.height,g=l+u.width;break}while(s=s.parentNode);if(r&&e!==window){var I=du(s||e),M=I&&I.a,L=I&&I.d;I&&(d/=L,l/=M,w/=M,x/=L,m=d+x,g=l+w)}return{top:d,left:l,bottom:m,right:g,width:w,height:x}}}function iC(e,t,i){for(var r=ec(e,!0),s=Ji(e)[t];r;){var u=Ji(r)[i],d=void 0;if(i==="top"||i==="left"?d=s>=u:d=s<=u,!d)return r;if(r===Ao())break;r=ec(r,!1)}return!1}function gh(e,t,i,r){for(var s=0,u=0,d=e.children;u<d.length;){if(d[u].style.display!=="none"&&d[u]!==Un.ghost&&(r||d[u]!==Un.dragged)&&Ha(d[u],i.draggable,e,!1)){if(s===t)return d[u];s++}u++}return null}function J1(e,t){for(var i=e.lastElementChild;i&&(i===Un.ghost||An(i,"display")==="none"||t&&!e_(i,t));)i=i.previousElementSibling;return i||null}function dr(e,t){var i=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==Un.clone&&(!t||e_(e,t))&&i++;return i}function rC(e){var t=0,i=0,r=Ao();if(e)do{var s=du(e),u=s.a,d=s.d;t+=e.scrollLeft*u,i+=e.scrollTop*d}while(e!==r&&(e=e.parentNode));return[t,i]}function Qne(e,t){for(var i in e)if(e.hasOwnProperty(i)){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[i][r])return Number(i)}return-1}function ec(e,t){if(!e||!e.getBoundingClientRect)return Ao();var i=e,r=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var s=An(i);if(i.clientWidth<i.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return Ao();if(r||t)return i;r=!0}}while(i=i.parentNode);return Ao()}function eie(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function ab(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var bp;function qP(e,t){return function(){if(!bp){var i=arguments,r=this;i.length===1?e.call(r,i[0]):e.apply(r,i),bp=setTimeout(function(){bp=void 0},t)}}}function tie(){clearTimeout(bp),bp=void 0}function ZP(e,t,i){e.scrollLeft+=t,e.scrollTop+=i}function Q1(e){var t=window.Polymer,i=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):i?i(e).clone(!0)[0]:e.cloneNode(!0)}function sC(e,t){An(e,"position","absolute"),An(e,"top",t.top),An(e,"left",t.left),An(e,"width",t.width),An(e,"height",t.height)}function ob(e){An(e,"position",""),An(e,"top",""),An(e,"left",""),An(e,"width",""),An(e,"height","")}var is="Sortable"+new Date().getTime();function nie(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(s){if(!(An(s,"display")==="none"||s===Un.ghost)){e.push({target:s,rect:Ji(s)});var u=Oo({},e[e.length-1].rect);if(s.thisAnimationDuration){var d=du(s,!0);d&&(u.top-=d.f,u.left-=d.e)}s.fromRect=u}})}},addAnimationState:function(r){e.push(r)},removeAnimationState:function(r){e.splice(Qne(e,{target:r}),1)},animateAll:function(r){var s=this;if(!this.options.animation){clearTimeout(t),typeof r=="function"&&r();return}var u=!1,d=0;e.forEach(function(l){var m=0,g=l.target,x=g.fromRect,w=Ji(g),C=g.prevFromRect,I=g.prevToRect,M=l.rect,L=du(g,!0);L&&(w.top-=L.f,w.left-=L.e),g.toRect=w,g.thisAnimationDuration&&ab(C,w)&&!ab(x,w)&&(M.top-w.top)/(M.left-w.left)===(x.top-w.top)/(x.left-w.left)&&(m=rie(M,C,I,s.options)),ab(w,x)||(g.prevFromRect=x,g.prevToRect=w,m||(m=s.options.animation),s.animate(g,M,w,m)),m&&(u=!0,d=Math.max(d,m),clearTimeout(g.animationResetTimer),g.animationResetTimer=setTimeout(function(){g.animationTime=0,g.prevFromRect=null,g.fromRect=null,g.prevToRect=null,g.thisAnimationDuration=null},m),g.thisAnimationDuration=m)}),clearTimeout(t),u?t=setTimeout(function(){typeof r=="function"&&r()},d):typeof r=="function"&&r(),e=[]},animate:function(r,s,u,d){if(d){An(r,"transition",""),An(r,"transform","");var l=du(this.el),m=l&&l.a,g=l&&l.d,x=(s.left-u.left)/(m||1),w=(s.top-u.top)/(g||1);r.animatingX=!!x,r.animatingY=!!w,An(r,"transform","translate3d("+x+"px,"+w+"px,0)"),this.forRepaintDummy=iie(r),An(r,"transition","transform "+d+"ms"+(this.options.easing?" "+this.options.easing:"")),An(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){An(r,"transition",""),An(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},d)}}}}function iie(e){return e.offsetWidth}function rie(e,t,i,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))*r.animation}var kd=[],lb={initializeByDefault:!0},bm={mount:function(t){for(var i in lb)lb.hasOwnProperty(i)&&!(i in t)&&(t[i]=lb[i]);kd.forEach(function(r){if(r.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),kd.push(t)},pluginEvent:function(t,i,r){var s=this;this.eventCanceled=!1,r.cancel=function(){s.eventCanceled=!0};var u=t+"Global";kd.forEach(function(d){i[d.pluginName]&&(i[d.pluginName][u]&&i[d.pluginName][u](Oo({sortable:i},r)),i.options[d.pluginName]&&i[d.pluginName][t]&&i[d.pluginName][t](Oo({sortable:i},r)))})},initializePlugins:function(t,i,r,s){kd.forEach(function(l){var m=l.pluginName;if(!(!t.options[m]&&!l.initializeByDefault)){var g=new l(t,i,t.options);g.sortable=t,g.options=t.options,t[m]=g,ka(r,g.defaults)}});for(var u in t.options)if(t.options.hasOwnProperty(u)){var d=this.modifyOption(t,u,t.options[u]);typeof d<"u"&&(t.options[u]=d)}},getEventProperties:function(t,i){var r={};return kd.forEach(function(s){typeof s.eventProperties=="function"&&ka(r,s.eventProperties.call(i[s.pluginName],t))}),r},modifyOption:function(t,i,r){var s;return kd.forEach(function(u){t[u.pluginName]&&u.optionListeners&&typeof u.optionListeners[i]=="function"&&(s=u.optionListeners[i].call(t[u.pluginName],r))}),s}};function ep(e){var t=e.sortable,i=e.rootEl,r=e.name,s=e.targetEl,u=e.cloneEl,d=e.toEl,l=e.fromEl,m=e.oldIndex,g=e.newIndex,x=e.oldDraggableIndex,w=e.newDraggableIndex,C=e.originalEvent,I=e.putSortable,M=e.extraEventProperties;if(t=t||i&&i[is],!!t){var L,$=t.options,F="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!_l&&!ym?L=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(L=document.createEvent("Event"),L.initEvent(r,!0,!0)),L.to=d||i,L.from=l||i,L.item=s||i,L.clone=u,L.oldIndex=m,L.newIndex=g,L.oldDraggableIndex=x,L.newDraggableIndex=w,L.originalEvent=C,L.pullMode=I?I.lastPutMode:void 0;var U=Oo(Oo({},M),bm.getEventProperties(r,t));for(var ee in U)L[ee]=U[ee];i&&i.dispatchEvent(L),$[F]&&$[F].call(t,L)}}var sie=["evt"],Ds=function(t,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=r.evt,u=Hne(r,sie);bm.pluginEvent.bind(Un)(t,i,Oo({dragEl:rn,parentEl:cr,ghostEl:Xn,rootEl:Yi,nextEl:tu,lastDownEl:yv,cloneEl:ur,cloneHidden:Xl,dragStarted:tp,putSortable:Wr,activeSortable:Un.active,originalEvent:s,oldIndex:Ud,oldDraggableIndex:xp,newIndex:Zs,newDraggableIndex:ql,hideGhostForTarget:JP,unhideGhostForTarget:QP,cloneNowHidden:function(){Xl=!0},cloneNowShown:function(){Xl=!1},dispatchSortableEvent:function(l){vs({sortable:i,name:l,originalEvent:s})}},u))};function vs(e){ep(Oo({putSortable:Wr,cloneEl:ur,targetEl:rn,rootEl:Yi,oldIndex:Ud,oldDraggableIndex:xp,newIndex:Zs,newDraggableIndex:ql},e))}var rn,cr,Xn,Yi,tu,yv,ur,Xl,Ud,Zs,xp,ql,Yg,Wr,zd=!1,t_=!1,n_=[],Jc,Ua,cb,ub,aC,oC,tp,Pd,wp,Sp=!1,Jg=!1,bv,ts,db=[],Cx=!1,i_=[],ty=typeof document<"u",Qg=HP,lC=ym||_l?"cssFloat":"float",aie=ty&&!Yne&&!HP&&"draggable"in document.createElement("div"),KP=function(){if(ty){if(_l)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),XP=function(t,i){var r=An(t),s=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),u=gh(t,0,i),d=gh(t,1,i),l=u&&An(u),m=d&&An(d),g=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Ji(u).width,x=m&&parseInt(m.marginLeft)+parseInt(m.marginRight)+Ji(d).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(u&&l.float&&l.float!=="none"){var w=l.float==="left"?"left":"right";return d&&(m.clear==="both"||m.clear===w)?"vertical":"horizontal"}return u&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||g>=s&&r[lC]==="none"||d&&r[lC]==="none"&&g+x>s)?"vertical":"horizontal"},oie=function(t,i,r){var s=r?t.left:t.top,u=r?t.right:t.bottom,d=r?t.width:t.height,l=r?i.left:i.top,m=r?i.right:i.bottom,g=r?i.width:i.height;return s===l||u===m||s+d/2===l+g/2},lie=function(t,i){var r;return n_.some(function(s){var u=s[is].options.emptyInsertThreshold;if(!(!u||J1(s))){var d=Ji(s),l=t>=d.left-u&&t<=d.right+u,m=i>=d.top-u&&i<=d.bottom+u;if(l&&m)return r=s}}),r},YP=function(t){function i(u,d){return function(l,m,g,x){var w=l.options.group.name&&m.options.group.name&&l.options.group.name===m.options.group.name;if(u==null&&(d||w))return!0;if(u==null||u===!1)return!1;if(d&&u==="clone")return u;if(typeof u=="function")return i(u(l,m,g,x),d)(l,m,g,x);var C=(d?l:m).options.group.name;return u===!0||typeof u=="string"&&u===C||u.join&&u.indexOf(C)>-1}}var r={},s=t.group;(!s||_v(s)!="object")&&(s={name:s}),r.name=s.name,r.checkPull=i(s.pull,!0),r.checkPut=i(s.put),r.revertClone=s.revertClone,t.group=r},JP=function(){!KP&&Xn&&An(Xn,"display","none")},QP=function(){!KP&&Xn&&An(Xn,"display","")};ty&&document.addEventListener("click",function(e){if(t_)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),t_=!1,!1},!0);var Qc=function(t){if(rn){t=t.touches?t.touches[0]:t;var i=lie(t.clientX,t.clientY);if(i){var r={};for(var s in t)t.hasOwnProperty(s)&&(r[s]=t[s]);r.target=r.rootEl=i,r.preventDefault=void 0,r.stopPropagation=void 0,i[is]._onDragOver(r)}}},cie=function(t){rn&&rn.parentNode[is]._isOutsideThisEl(t.target)};function Un(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=ka({},t),e[is]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return XP(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(d,l){d.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Un.supportPointer!==!1&&"PointerEvent"in window&&!yp,emptyInsertThreshold:5};bm.initializePlugins(this,e,i);for(var r in i)!(r in t)&&(t[r]=i[r]);YP(t);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=t.forceFallback?!1:aie,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?fi(e,"pointerdown",this._onTapStart):(fi(e,"mousedown",this._onTapStart),fi(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(fi(e,"dragover",this),fi(e,"dragenter",this)),n_.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),ka(this,nie())}Un.prototype={constructor:Un,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Pd=null)},_getDirection:function(t,i){return typeof this.options.direction=="function"?this.options.direction.call(this,t,i,rn):this.options.direction},_onTapStart:function(t){if(t.cancelable){var i=this,r=this.el,s=this.options,u=s.preventOnFilter,d=t.type,l=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,m=(l||t).target,g=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||m,x=s.filter;if(vie(r),!rn&&!(/mousedown|pointerdown/.test(d)&&t.button!==0||s.disabled)&&!g.isContentEditable&&!(!this.nativeDraggable&&yp&&m&&m.tagName.toUpperCase()==="SELECT")&&(m=Ha(m,s.draggable,r,!1),!(m&&m.animated)&&yv!==m)){if(Ud=dr(m),xp=dr(m,s.draggable),typeof x=="function"){if(x.call(this,t,m,this)){vs({sortable:i,rootEl:g,name:"filter",targetEl:m,toEl:r,fromEl:r}),Ds("filter",i,{evt:t}),u&&t.cancelable&&t.preventDefault();return}}else if(x&&(x=x.split(",").some(function(w){if(w=Ha(g,w.trim(),r,!1),w)return vs({sortable:i,rootEl:w,name:"filter",targetEl:m,fromEl:r,toEl:r}),Ds("filter",i,{evt:t}),!0}),x)){u&&t.cancelable&&t.preventDefault();return}s.handle&&!Ha(g,s.handle,r,!1)||this._prepareDragStart(t,l,m)}}},_prepareDragStart:function(t,i,r){var s=this,u=s.el,d=s.options,l=u.ownerDocument,m;if(r&&!rn&&r.parentNode===u){var g=Ji(r);if(Yi=u,rn=r,cr=rn.parentNode,tu=rn.nextSibling,yv=r,Yg=d.group,Un.dragged=rn,Jc={target:rn,clientX:(i||t).clientX,clientY:(i||t).clientY},aC=Jc.clientX-g.left,oC=Jc.clientY-g.top,this._lastX=(i||t).clientX,this._lastY=(i||t).clientY,rn.style["will-change"]="all",m=function(){if(Ds("delayEnded",s,{evt:t}),Un.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!tC&&s.nativeDraggable&&(rn.draggable=!0),s._triggerDragStart(t,i),vs({sortable:s,name:"choose",originalEvent:t}),rr(rn,d.chosenClass,!0)},d.ignore.split(",").forEach(function(x){WP(rn,x.trim(),hb)}),fi(l,"dragover",Qc),fi(l,"mousemove",Qc),fi(l,"touchmove",Qc),fi(l,"mouseup",s._onDrop),fi(l,"touchend",s._onDrop),fi(l,"touchcancel",s._onDrop),tC&&this.nativeDraggable&&(this.options.touchStartThreshold=4,rn.draggable=!0),Ds("delayStart",this,{evt:t}),d.delay&&(!d.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(ym||_l))){if(Un.eventCanceled){this._onDrop();return}fi(l,"mouseup",s._disableDelayedDrag),fi(l,"touchend",s._disableDelayedDrag),fi(l,"touchcancel",s._disableDelayedDrag),fi(l,"mousemove",s._delayedDragTouchMoveHandler),fi(l,"touchmove",s._delayedDragTouchMoveHandler),d.supportPointer&&fi(l,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(m,d.delay)}else m()}},_delayedDragTouchMoveHandler:function(t){var i=t.touches?t.touches[0]:t;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){rn&&hb(rn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;ai(t,"mouseup",this._disableDelayedDrag),ai(t,"touchend",this._disableDelayedDrag),ai(t,"touchcancel",this._disableDelayedDrag),ai(t,"mousemove",this._delayedDragTouchMoveHandler),ai(t,"touchmove",this._delayedDragTouchMoveHandler),ai(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,i){i=i||t.pointerType=="touch"&&t,!this.nativeDraggable||i?this.options.supportPointer?fi(document,"pointermove",this._onTouchMove):i?fi(document,"touchmove",this._onTouchMove):fi(document,"mousemove",this._onTouchMove):(fi(rn,"dragend",this),fi(Yi,"dragstart",this._onDragStart));try{document.selection?xv(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,i){if(zd=!1,Yi&&rn){Ds("dragStarted",this,{evt:i}),this.nativeDraggable&&fi(document,"dragover",cie);var r=this.options;!t&&rr(rn,r.dragClass,!1),rr(rn,r.ghostClass,!0),Un.active=this,t&&this._appendGhost(),vs({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(Ua){this._lastX=Ua.clientX,this._lastY=Ua.clientY,JP();for(var t=document.elementFromPoint(Ua.clientX,Ua.clientY),i=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Ua.clientX,Ua.clientY),t!==i);)i=t;if(rn.parentNode[is]._isOutsideThisEl(t),i)do{if(i[is]){var r=void 0;if(r=i[is]._onDragOver({clientX:Ua.clientX,clientY:Ua.clientY,target:t,rootEl:i}),r&&!this.options.dragoverBubble)break}t=i}while(i=i.parentNode);QP()}},_onTouchMove:function(t){if(Jc){var i=this.options,r=i.fallbackTolerance,s=i.fallbackOffset,u=t.touches?t.touches[0]:t,d=Xn&&du(Xn,!0),l=Xn&&d&&d.a,m=Xn&&d&&d.d,g=Qg&&ts&&rC(ts),x=(u.clientX-Jc.clientX+s.x)/(l||1)+(g?g[0]-db[0]:0)/(l||1),w=(u.clientY-Jc.clientY+s.y)/(m||1)+(g?g[1]-db[1]:0)/(m||1);if(!Un.active&&!zd){if(r&&Math.max(Math.abs(u.clientX-this._lastX),Math.abs(u.clientY-this._lastY))<r)return;this._onDragStart(t,!0)}if(Xn){d?(d.e+=x-(cb||0),d.f+=w-(ub||0)):d={a:1,b:0,c:0,d:1,e:x,f:w};var C="matrix(".concat(d.a,",").concat(d.b,",").concat(d.c,",").concat(d.d,",").concat(d.e,",").concat(d.f,")");An(Xn,"webkitTransform",C),An(Xn,"mozTransform",C),An(Xn,"msTransform",C),An(Xn,"transform",C),cb=x,ub=w,Ua=u}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Xn){var t=this.options.fallbackOnBody?document.body:Yi,i=Ji(rn,!0,Qg,!0,t),r=this.options;if(Qg){for(ts=t;An(ts,"position")==="static"&&An(ts,"transform")==="none"&&ts!==document;)ts=ts.parentNode;ts!==document.body&&ts!==document.documentElement?(ts===document&&(ts=Ao()),i.top+=ts.scrollTop,i.left+=ts.scrollLeft):ts=Ao(),db=rC(ts)}Xn=rn.cloneNode(!0),rr(Xn,r.ghostClass,!1),rr(Xn,r.fallbackClass,!0),rr(Xn,r.dragClass,!0),An(Xn,"transition",""),An(Xn,"transform",""),An(Xn,"box-sizing","border-box"),An(Xn,"margin",0),An(Xn,"top",i.top),An(Xn,"left",i.left),An(Xn,"width",i.width),An(Xn,"height",i.height),An(Xn,"opacity","0.8"),An(Xn,"position",Qg?"absolute":"fixed"),An(Xn,"zIndex","100000"),An(Xn,"pointerEvents","none"),Un.ghost=Xn,t.appendChild(Xn),An(Xn,"transform-origin",aC/parseInt(Xn.style.width)*100+"% "+oC/parseInt(Xn.style.height)*100+"%")}},_onDragStart:function(t,i){var r=this,s=t.dataTransfer,u=r.options;if(Ds("dragStart",this,{evt:t}),Un.eventCanceled){this._onDrop();return}Ds("setupClone",this),Un.eventCanceled||(ur=Q1(rn),ur.draggable=!1,ur.style["will-change"]="",this._hideClone(),rr(ur,this.options.chosenClass,!1),Un.clone=ur),r.cloneId=xv(function(){Ds("clone",r),!Un.eventCanceled&&(r.options.removeCloneOnHide||Yi.insertBefore(ur,rn),r._hideClone(),vs({sortable:r,name:"clone"}))}),!i&&rr(rn,u.dragClass,!0),i?(t_=!0,r._loopId=setInterval(r._emulateDragOver,50)):(ai(document,"mouseup",r._onDrop),ai(document,"touchend",r._onDrop),ai(document,"touchcancel",r._onDrop),s&&(s.effectAllowed="move",u.setData&&u.setData.call(r,s,rn)),fi(document,"drop",r),An(rn,"transform","translateZ(0)")),zd=!0,r._dragStartId=xv(r._dragStarted.bind(r,i,t)),fi(document,"selectstart",r),tp=!0,yp&&An(document.body,"user-select","none")},_onDragOver:function(t){var i=this.el,r=t.target,s,u,d,l=this.options,m=l.group,g=Un.active,x=Yg===m,w=l.sort,C=Wr||g,I,M=this,L=!1;if(Cx)return;function $(at,it){Ds(at,M,Oo({evt:t,isOwner:x,axis:I?"vertical":"horizontal",revert:d,dragRect:s,targetRect:u,canSort:w,fromSortable:C,target:r,completed:U,onMove:function(Ct,tt){return ev(Yi,i,rn,s,Ct,Ji(Ct),t,tt)},changed:ee},it))}function F(){$("dragOverAnimationCapture"),M.captureAnimationState(),M!==C&&C.captureAnimationState()}function U(at){return $("dragOverCompleted",{insertion:at}),at&&(x?g._hideClone():g._showClone(M),M!==C&&(rr(rn,Wr?Wr.options.ghostClass:g.options.ghostClass,!1),rr(rn,l.ghostClass,!0)),Wr!==M&&M!==Un.active?Wr=M:M===Un.active&&Wr&&(Wr=null),C===M&&(M._ignoreWhileAnimating=r),M.animateAll(function(){$("dragOverAnimationComplete"),M._ignoreWhileAnimating=null}),M!==C&&(C.animateAll(),C._ignoreWhileAnimating=null)),(r===rn&&!rn.animated||r===i&&!r.animated)&&(Pd=null),!l.dragoverBubble&&!t.rootEl&&r!==document&&(rn.parentNode[is]._isOutsideThisEl(t.target),!at&&Qc(t)),!l.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),L=!0}function ee(){Zs=dr(rn),ql=dr(rn,l.draggable),vs({sortable:M,name:"change",toEl:i,newIndex:Zs,newDraggableIndex:ql,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),r=Ha(r,l.draggable,i,!0),$("dragOver"),Un.eventCanceled)return L;if(rn.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||M._ignoreWhileAnimating===r)return U(!1);if(t_=!1,g&&!l.disabled&&(x?w||(d=cr!==Yi):Wr===this||(this.lastPutMode=Yg.checkPull(this,g,rn,t))&&m.checkPut(this,g,rn,t))){if(I=this._getDirection(t,r)==="vertical",s=Ji(rn),$("dragOverValid"),Un.eventCanceled)return L;if(d)return cr=Yi,F(),this._hideClone(),$("revert"),Un.eventCanceled||(tu?Yi.insertBefore(rn,tu):Yi.appendChild(rn)),U(!0);var V=J1(i,l.draggable);if(!V||fie(t,I,this)&&!V.animated){if(V===rn)return U(!1);if(V&&i===t.target&&(r=V),r&&(u=Ji(r)),ev(Yi,i,rn,s,r,u,t,!!r)!==!1)return F(),i.appendChild(rn),cr=i,ee(),U(!0)}else if(V&&hie(t,I,this)){var Q=gh(i,0,l,!0);if(Q===rn)return U(!1);if(r=Q,u=Ji(r),ev(Yi,i,rn,s,r,u,t,!1)!==!1)return F(),i.insertBefore(rn,Q),cr=i,ee(),U(!0)}else if(r.parentNode===i){u=Ji(r);var ae=0,be,te=rn.parentNode!==i,G=!oie(rn.animated&&rn.toRect||s,r.animated&&r.toRect||u,I),j=I?"top":"left",z=iC(r,"top","top")||iC(rn,"top","top"),ie=z?z.scrollTop:void 0;Pd!==r&&(be=u[j],Sp=!1,Jg=!G&&l.invertSwap||te),ae=pie(t,r,u,I,G?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,Jg,Pd===r);var X;if(ae!==0){var ne=dr(rn);do ne-=ae,X=cr.children[ne];while(X&&(An(X,"display")==="none"||X===Xn))}if(ae===0||X===r)return U(!1);Pd=r,wp=ae;var Ee=r.nextElementSibling,Ce=!1;Ce=ae===1;var Xe=ev(Yi,i,rn,s,r,u,t,Ce);if(Xe!==!1)return(Xe===1||Xe===-1)&&(Ce=Xe===1),Cx=!0,setTimeout(die,30),F(),Ce&&!Ee?i.appendChild(rn):r.parentNode.insertBefore(rn,Ce?Ee:r),z&&ZP(z,0,ie-z.scrollTop),cr=rn.parentNode,be!==void 0&&!Jg&&(bv=Math.abs(be-Ji(r)[j])),ee(),U(!0)}if(i.contains(rn))return U(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ai(document,"mousemove",this._onTouchMove),ai(document,"touchmove",this._onTouchMove),ai(document,"pointermove",this._onTouchMove),ai(document,"dragover",Qc),ai(document,"mousemove",Qc),ai(document,"touchmove",Qc)},_offUpEvents:function(){var t=this.el.ownerDocument;ai(t,"mouseup",this._onDrop),ai(t,"touchend",this._onDrop),ai(t,"pointerup",this._onDrop),ai(t,"touchcancel",this._onDrop),ai(document,"selectstart",this)},_onDrop:function(t){var i=this.el,r=this.options;if(Zs=dr(rn),ql=dr(rn,r.draggable),Ds("drop",this,{evt:t}),cr=rn&&rn.parentNode,Zs=dr(rn),ql=dr(rn,r.draggable),Un.eventCanceled){this._nulling();return}zd=!1,Jg=!1,Sp=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ix(this.cloneId),Ix(this._dragStartId),this.nativeDraggable&&(ai(document,"drop",this),ai(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),yp&&An(document.body,"user-select",""),An(rn,"transform",""),t&&(tp&&(t.cancelable&&t.preventDefault(),!r.dropBubble&&t.stopPropagation()),Xn&&Xn.parentNode&&Xn.parentNode.removeChild(Xn),(Yi===cr||Wr&&Wr.lastPutMode!=="clone")&&ur&&ur.parentNode&&ur.parentNode.removeChild(ur),rn&&(this.nativeDraggable&&ai(rn,"dragend",this),hb(rn),rn.style["will-change"]="",tp&&!zd&&rr(rn,Wr?Wr.options.ghostClass:this.options.ghostClass,!1),rr(rn,this.options.chosenClass,!1),vs({sortable:this,name:"unchoose",toEl:cr,newIndex:null,newDraggableIndex:null,originalEvent:t}),Yi!==cr?(Zs>=0&&(vs({rootEl:cr,name:"add",toEl:cr,fromEl:Yi,originalEvent:t}),vs({sortable:this,name:"remove",toEl:cr,originalEvent:t}),vs({rootEl:cr,name:"sort",toEl:cr,fromEl:Yi,originalEvent:t}),vs({sortable:this,name:"sort",toEl:cr,originalEvent:t})),Wr&&Wr.save()):Zs!==Ud&&Zs>=0&&(vs({sortable:this,name:"update",toEl:cr,originalEvent:t}),vs({sortable:this,name:"sort",toEl:cr,originalEvent:t})),Un.active&&((Zs==null||Zs===-1)&&(Zs=Ud,ql=xp),vs({sortable:this,name:"end",toEl:cr,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Ds("nulling",this),Yi=rn=cr=Xn=tu=ur=yv=Xl=Jc=Ua=tp=Zs=ql=Ud=xp=Pd=wp=Wr=Yg=Un.dragged=Un.ghost=Un.clone=Un.active=null,i_.forEach(function(t){t.checked=!0}),i_.length=cb=ub=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":rn&&(this._onDragOver(t),uie(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],i,r=this.el.children,s=0,u=r.length,d=this.options;s<u;s++)i=r[s],Ha(i,d.draggable,this.el,!1)&&t.push(i.getAttribute(d.dataIdAttr)||gie(i));return t},sort:function(t,i){var r={},s=this.el;this.toArray().forEach(function(u,d){var l=s.children[d];Ha(l,this.options.draggable,s,!1)&&(r[u]=l)},this),i&&this.captureAnimationState(),t.forEach(function(u){r[u]&&(s.removeChild(r[u]),s.appendChild(r[u]))}),i&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,i){return Ha(t,i||this.options.draggable,this.el,!1)},option:function(t,i){var r=this.options;if(i===void 0)return r[t];var s=bm.modifyOption(this,t,i);typeof s<"u"?r[t]=s:r[t]=i,t==="group"&&YP(r)},destroy:function(){Ds("destroy",this);var t=this.el;t[is]=null,ai(t,"mousedown",this._onTapStart),ai(t,"touchstart",this._onTapStart),ai(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(ai(t,"dragover",this),ai(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),n_.splice(n_.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Xl){if(Ds("hideClone",this),Un.eventCanceled)return;An(ur,"display","none"),this.options.removeCloneOnHide&&ur.parentNode&&ur.parentNode.removeChild(ur),Xl=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Xl){if(Ds("showClone",this),Un.eventCanceled)return;rn.parentNode==Yi&&!this.options.group.revertClone?Yi.insertBefore(ur,rn):tu?Yi.insertBefore(ur,tu):Yi.appendChild(ur),this.options.group.revertClone&&this.animate(rn,ur),An(ur,"display",""),Xl=!1}}};function uie(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function ev(e,t,i,r,s,u,d,l){var m,g=e[is],x=g.options.onMove,w;return window.CustomEvent&&!_l&&!ym?m=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent("move",!0,!0)),m.to=t,m.from=e,m.dragged=i,m.draggedRect=r,m.related=s||t,m.relatedRect=u||Ji(t),m.willInsertAfter=l,m.originalEvent=d,e.dispatchEvent(m),x&&(w=x.call(g,m,d)),w}function hb(e){e.draggable=!1}function die(){Cx=!1}function hie(e,t,i){var r=Ji(gh(i.el,0,i.options,!0)),s=10;return t?e.clientX<r.left-s||e.clientY<r.top&&e.clientX<r.right:e.clientY<r.top-s||e.clientY<r.bottom&&e.clientX<r.left}function fie(e,t,i){var r=Ji(J1(i.el,i.options.draggable)),s=10;return t?e.clientX>r.right+s||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+s}function pie(e,t,i,r,s,u,d,l){var m=r?e.clientY:e.clientX,g=r?i.height:i.width,x=r?i.top:i.left,w=r?i.bottom:i.right,C=!1;if(!d){if(l&&bv<g*s){if(!Sp&&(wp===1?m>x+g*u/2:m<w-g*u/2)&&(Sp=!0),Sp)C=!0;else if(wp===1?m<x+bv:m>w-bv)return-wp}else if(m>x+g*(1-s)/2&&m<w-g*(1-s)/2)return mie(t)}return C=C||d,C&&(m<x+g*u/2||m>w-g*u/2)?m>x+g/2?1:-1:0}function mie(e){return dr(rn)<dr(e)?1:-1}function gie(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,r=0;i--;)r+=t.charCodeAt(i);return r.toString(36)}function vie(e){i_.length=0;for(var t=e.getElementsByTagName("input"),i=t.length;i--;){var r=t[i];r.checked&&i_.push(r)}}function xv(e){return setTimeout(e,0)}function Ix(e){return clearTimeout(e)}ty&&fi(document,"touchmove",function(e){(Un.active||zd)&&e.cancelable&&e.preventDefault()});Un.utils={on:fi,off:ai,css:An,find:WP,is:function(t,i){return!!Ha(t,i,t,!1)},extend:eie,throttle:qP,closest:Ha,toggleClass:rr,clone:Q1,index:dr,nextTick:xv,cancelNextTick:Ix,detectDirection:XP,getChild:gh};Un.get=function(e){return e[is]};Un.mount=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t[0].constructor===Array&&(t=t[0]),t.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Un.utils=Oo(Oo({},Un.utils),r.utils)),bm.mount(r)})};Un.create=function(e,t){return new Un(e,t)};Un.version=Xne;var Sr=[],np,Ax,Mx=!1,fb,pb,r_,ip;function _ie(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(i){var r=i.originalEvent;this.sortable.nativeDraggable?fi(document,"dragover",this._handleAutoScroll):this.options.supportPointer?fi(document,"pointermove",this._handleFallbackAutoScroll):r.touches?fi(document,"touchmove",this._handleFallbackAutoScroll):fi(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var r=i.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?ai(document,"dragover",this._handleAutoScroll):(ai(document,"pointermove",this._handleFallbackAutoScroll),ai(document,"touchmove",this._handleFallbackAutoScroll),ai(document,"mousemove",this._handleFallbackAutoScroll)),cC(),wv(),tie()},nulling:function(){r_=Ax=np=Mx=ip=fb=pb=null,Sr.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,r){var s=this,u=(i.touches?i.touches[0]:i).clientX,d=(i.touches?i.touches[0]:i).clientY,l=document.elementFromPoint(u,d);if(r_=i,r||this.options.forceAutoScrollFallback||ym||_l||yp){mb(i,this.options,l,r);var m=ec(l,!0);Mx&&(!ip||u!==fb||d!==pb)&&(ip&&cC(),ip=setInterval(function(){var g=ec(document.elementFromPoint(u,d),!0);g!==m&&(m=g,wv()),mb(i,s.options,g,r)},10),fb=u,pb=d)}else{if(!this.options.bubbleScroll||ec(l,!0)===Ao()){wv();return}mb(i,this.options,ec(l,!1),!1)}}},ka(e,{pluginName:"scroll",initializeByDefault:!0})}function wv(){Sr.forEach(function(e){clearInterval(e.pid)}),Sr=[]}function cC(){clearInterval(ip)}var mb=qP(function(e,t,i,r){if(t.scroll){var s=(e.touches?e.touches[0]:e).clientX,u=(e.touches?e.touches[0]:e).clientY,d=t.scrollSensitivity,l=t.scrollSpeed,m=Ao(),g=!1,x;Ax!==i&&(Ax=i,wv(),np=t.scroll,x=t.scrollFn,np===!0&&(np=ec(i,!0)));var w=0,C=np;do{var I=C,M=Ji(I),L=M.top,$=M.bottom,F=M.left,U=M.right,ee=M.width,V=M.height,Q=void 0,ae=void 0,be=I.scrollWidth,te=I.scrollHeight,G=An(I),j=I.scrollLeft,z=I.scrollTop;I===m?(Q=ee<be&&(G.overflowX==="auto"||G.overflowX==="scroll"||G.overflowX==="visible"),ae=V<te&&(G.overflowY==="auto"||G.overflowY==="scroll"||G.overflowY==="visible")):(Q=ee<be&&(G.overflowX==="auto"||G.overflowX==="scroll"),ae=V<te&&(G.overflowY==="auto"||G.overflowY==="scroll"));var ie=Q&&(Math.abs(U-s)<=d&&j+ee<be)-(Math.abs(F-s)<=d&&!!j),X=ae&&(Math.abs($-u)<=d&&z+V<te)-(Math.abs(L-u)<=d&&!!z);if(!Sr[w])for(var ne=0;ne<=w;ne++)Sr[ne]||(Sr[ne]={});(Sr[w].vx!=ie||Sr[w].vy!=X||Sr[w].el!==I)&&(Sr[w].el=I,Sr[w].vx=ie,Sr[w].vy=X,clearInterval(Sr[w].pid),(ie!=0||X!=0)&&(g=!0,Sr[w].pid=setInterval(function(){r&&this.layer===0&&Un.active._onTouchMove(r_);var Ee=Sr[this.layer].vy?Sr[this.layer].vy*l:0,Ce=Sr[this.layer].vx?Sr[this.layer].vx*l:0;typeof x=="function"&&x.call(Un.dragged.parentNode[is],Ce,Ee,e,r_,Sr[this.layer].el)!=="continue"||ZP(Sr[this.layer].el,Ce,Ee)}.bind({layer:w}),24))),w++}while(t.bubbleScroll&&C!==m&&(C=ec(C,!1)));Mx=g}},30),eD=function(t){var i=t.originalEvent,r=t.putSortable,s=t.dragEl,u=t.activeSortable,d=t.dispatchSortableEvent,l=t.hideGhostForTarget,m=t.unhideGhostForTarget;if(i){var g=r||u;l();var x=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,w=document.elementFromPoint(x.clientX,x.clientY);m(),g&&!g.el.contains(w)&&(d("spill"),this.onSpill({dragEl:s,putSortable:r}))}};function ew(){}ew.prototype={startIndex:null,dragStart:function(t){var i=t.oldDraggableIndex;this.startIndex=i},onSpill:function(t){var i=t.dragEl,r=t.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var s=gh(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(i,s):this.sortable.el.appendChild(i),this.sortable.animateAll(),r&&r.animateAll()},drop:eD};ka(ew,{pluginName:"revertOnSpill"});function tw(){}tw.prototype={onSpill:function(t){var i=t.dragEl,r=t.putSortable,s=r||this.sortable;s.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),s.animateAll()},drop:eD};ka(tw,{pluginName:"removeOnSpill"});var va;function yie(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(i){var r=i.dragEl;va=r},dragOverValid:function(i){var r=i.completed,s=i.target,u=i.onMove,d=i.activeSortable,l=i.changed,m=i.cancel;if(d.options.swap){var g=this.sortable.el,x=this.options;if(s&&s!==g){var w=va;u(s)!==!1?(rr(s,x.swapClass,!0),va=s):va=null,w&&w!==va&&rr(w,x.swapClass,!1)}l(),r(!0),m()}},drop:function(i){var r=i.activeSortable,s=i.putSortable,u=i.dragEl,d=s||this.sortable,l=this.options;va&&rr(va,l.swapClass,!1),va&&(l.swap||s&&s.options.swap)&&u!==va&&(d.captureAnimationState(),d!==r&&r.captureAnimationState(),bie(u,va),d.animateAll(),d!==r&&r.animateAll())},nulling:function(){va=null}},ka(e,{pluginName:"swap",eventProperties:function(){return{swapItem:va}}})}function bie(e,t){var i=e.parentNode,r=t.parentNode,s,u;!i||!r||i.isEqualNode(t)||r.isEqualNode(e)||(s=dr(e),u=dr(t),i.isEqualNode(r)&&s<u&&u++,i.insertBefore(t,i.children[s]),r.insertBefore(e,r.children[u]))}var Hn=[],qs=[],Hf,ja,Gf=!1,Ls=!1,Dd=!1,Ni,Wf,tv;function xie(){function e(t){for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));t.options.supportPointer?fi(document,"pointerup",this._deselectMultiDrag):(fi(document,"mouseup",this._deselectMultiDrag),fi(document,"touchend",this._deselectMultiDrag)),fi(document,"keydown",this._checkKeyDown),fi(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(s,u){var d="";Hn.length&&ja===t?Hn.forEach(function(l,m){d+=(m?", ":"")+l.textContent}):d=u.textContent,s.setData("Text",d)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(i){var r=i.dragEl;Ni=r},delayEnded:function(){this.isMultiDrag=~Hn.indexOf(Ni)},setupClone:function(i){var r=i.sortable,s=i.cancel;if(this.isMultiDrag){for(var u=0;u<Hn.length;u++)qs.push(Q1(Hn[u])),qs[u].sortableIndex=Hn[u].sortableIndex,qs[u].draggable=!1,qs[u].style["will-change"]="",rr(qs[u],this.options.selectedClass,!1),Hn[u]===Ni&&rr(qs[u],this.options.chosenClass,!1);r._hideClone(),s()}},clone:function(i){var r=i.sortable,s=i.rootEl,u=i.dispatchSortableEvent,d=i.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Hn.length&&ja===r&&(uC(!0,s),u("clone"),d()))},showClone:function(i){var r=i.cloneNowShown,s=i.rootEl,u=i.cancel;this.isMultiDrag&&(uC(!1,s),qs.forEach(function(d){An(d,"display","")}),r(),tv=!1,u())},hideClone:function(i){var r=this;i.sortable;var s=i.cloneNowHidden,u=i.cancel;this.isMultiDrag&&(qs.forEach(function(d){An(d,"display","none"),r.options.removeCloneOnHide&&d.parentNode&&d.parentNode.removeChild(d)}),s(),tv=!0,u())},dragStartGlobal:function(i){i.sortable,!this.isMultiDrag&&ja&&ja.multiDrag._deselectMultiDrag(),Hn.forEach(function(r){r.sortableIndex=dr(r)}),Hn=Hn.sort(function(r,s){return r.sortableIndex-s.sortableIndex}),Dd=!0},dragStarted:function(i){var r=this,s=i.sortable;if(this.isMultiDrag){if(this.options.sort&&(s.captureAnimationState(),this.options.animation)){Hn.forEach(function(d){d!==Ni&&An(d,"position","absolute")});var u=Ji(Ni,!1,!0,!0);Hn.forEach(function(d){d!==Ni&&sC(d,u)}),Ls=!0,Gf=!0}s.animateAll(function(){Ls=!1,Gf=!1,r.options.animation&&Hn.forEach(function(d){ob(d)}),r.options.sort&&nv()})}},dragOver:function(i){var r=i.target,s=i.completed,u=i.cancel;Ls&&~Hn.indexOf(r)&&(s(!1),u())},revert:function(i){var r=i.fromSortable,s=i.rootEl,u=i.sortable,d=i.dragRect;Hn.length>1&&(Hn.forEach(function(l){u.addAnimationState({target:l,rect:Ls?Ji(l):d}),ob(l),l.fromRect=d,r.removeAnimationState(l)}),Ls=!1,wie(!this.options.removeCloneOnHide,s))},dragOverCompleted:function(i){var r=i.sortable,s=i.isOwner,u=i.insertion,d=i.activeSortable,l=i.parentEl,m=i.putSortable,g=this.options;if(u){if(s&&d._hideClone(),Gf=!1,g.animation&&Hn.length>1&&(Ls||!s&&!d.options.sort&&!m)){var x=Ji(Ni,!1,!0,!0);Hn.forEach(function(C){C!==Ni&&(sC(C,x),l.appendChild(C))}),Ls=!0}if(!s)if(Ls||nv(),Hn.length>1){var w=tv;d._showClone(r),d.options.animation&&!tv&&w&&qs.forEach(function(C){d.addAnimationState({target:C,rect:Wf}),C.fromRect=Wf,C.thisAnimationDuration=null})}else d._showClone(r)}},dragOverAnimationCapture:function(i){var r=i.dragRect,s=i.isOwner,u=i.activeSortable;if(Hn.forEach(function(l){l.thisAnimationDuration=null}),u.options.animation&&!s&&u.multiDrag.isMultiDrag){Wf=ka({},r);var d=du(Ni,!0);Wf.top-=d.f,Wf.left-=d.e}},dragOverAnimationComplete:function(){Ls&&(Ls=!1,nv())},drop:function(i){var r=i.originalEvent,s=i.rootEl,u=i.parentEl,d=i.sortable,l=i.dispatchSortableEvent,m=i.oldIndex,g=i.putSortable,x=g||this.sortable;if(r){var w=this.options,C=u.children;if(!Dd)if(w.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),rr(Ni,w.selectedClass,!~Hn.indexOf(Ni)),~Hn.indexOf(Ni))Hn.splice(Hn.indexOf(Ni),1),Hf=null,ep({sortable:d,rootEl:s,name:"deselect",targetEl:Ni,originalEvt:r});else{if(Hn.push(Ni),ep({sortable:d,rootEl:s,name:"select",targetEl:Ni,originalEvt:r}),r.shiftKey&&Hf&&d.el.contains(Hf)){var I=dr(Hf),M=dr(Ni);if(~I&&~M&&I!==M){var L,$;for(M>I?($=I,L=M):($=M,L=I+1);$<L;$++)~Hn.indexOf(C[$])||(rr(C[$],w.selectedClass,!0),Hn.push(C[$]),ep({sortable:d,rootEl:s,name:"select",targetEl:C[$],originalEvt:r}))}}else Hf=Ni;ja=x}if(Dd&&this.isMultiDrag){if(Ls=!1,(u[is].options.sort||u!==s)&&Hn.length>1){var F=Ji(Ni),U=dr(Ni,":not(."+this.options.selectedClass+")");if(!Gf&&w.animation&&(Ni.thisAnimationDuration=null),x.captureAnimationState(),!Gf&&(w.animation&&(Ni.fromRect=F,Hn.forEach(function(V){if(V.thisAnimationDuration=null,V!==Ni){var Q=Ls?Ji(V):F;V.fromRect=Q,x.addAnimationState({target:V,rect:Q})}})),nv(),Hn.forEach(function(V){C[U]?u.insertBefore(V,C[U]):u.appendChild(V),U++}),m===dr(Ni))){var ee=!1;Hn.forEach(function(V){if(V.sortableIndex!==dr(V)){ee=!0;return}}),ee&&l("update")}Hn.forEach(function(V){ob(V)}),x.animateAll()}ja=x}(s===u||g&&g.lastPutMode!=="clone")&&qs.forEach(function(V){V.parentNode&&V.parentNode.removeChild(V)})}},nullingGlobal:function(){this.isMultiDrag=Dd=!1,qs.length=0},destroyGlobal:function(){this._deselectMultiDrag(),ai(document,"pointerup",this._deselectMultiDrag),ai(document,"mouseup",this._deselectMultiDrag),ai(document,"touchend",this._deselectMultiDrag),ai(document,"keydown",this._checkKeyDown),ai(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(i){if(!(typeof Dd<"u"&&Dd)&&ja===this.sortable&&!(i&&Ha(i.target,this.options.draggable,this.sortable.el,!1))&&!(i&&i.button!==0))for(;Hn.length;){var r=Hn[0];rr(r,this.options.selectedClass,!1),Hn.shift(),ep({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r,originalEvt:i})}},_checkKeyDown:function(i){i.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(i){i.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},ka(e,{pluginName:"multiDrag",utils:{select:function(i){var r=i.parentNode[is];!r||!r.options.multiDrag||~Hn.indexOf(i)||(ja&&ja!==r&&(ja.multiDrag._deselectMultiDrag(),ja=r),rr(i,r.options.selectedClass,!0),Hn.push(i))},deselect:function(i){var r=i.parentNode[is],s=Hn.indexOf(i);!r||!r.options.multiDrag||!~s||(rr(i,r.options.selectedClass,!1),Hn.splice(s,1))}},eventProperties:function(){var i=this,r=[],s=[];return Hn.forEach(function(u){r.push({multiDragElement:u,index:u.sortableIndex});var d;Ls&&u!==Ni?d=-1:Ls?d=dr(u,":not(."+i.options.selectedClass+")"):d=dr(u),s.push({multiDragElement:u,index:d})}),{items:Gne(Hn),clones:[].concat(qs),oldIndicies:r,newIndicies:s}},optionListeners:{multiDragKey:function(i){return i=i.toLowerCase(),i==="ctrl"?i="Control":i.length>1&&(i=i.charAt(0).toUpperCase()+i.substr(1)),i}}})}function wie(e,t){Hn.forEach(function(i,r){var s=t.children[i.sortableIndex+(e?Number(r):0)];s?t.insertBefore(i,s):t.appendChild(i)})}function uC(e,t){qs.forEach(function(i,r){var s=t.children[i.sortableIndex+(e?Number(r):0)];s?t.insertBefore(i,s):t.appendChild(i)})}function nv(){Hn.forEach(function(e){e!==Ni&&e.parentNode&&e.parentNode.removeChild(e)})}Un.mount(new _ie);Un.mount(tw,ew);const Sie=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:xie,Sortable:Un,Swap:yie,default:Un},Symbol.toStringTag,{value:"Module"})),Tie=AA(Sie);(function(e,t){(function(r,s){e.exports=s(Une,Tie)})(typeof self<"u"?self:CA,function(i,r){return function(s){var u={};function d(l){if(u[l])return u[l].exports;var m=u[l]={i:l,l:!1,exports:{}};return s[l].call(m.exports,m,m.exports,d),m.l=!0,m.exports}return d.m=s,d.c=u,d.d=function(l,m,g){d.o(l,m)||Object.defineProperty(l,m,{enumerable:!0,get:g})},d.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},d.t=function(l,m){if(m&1&&(l=d(l)),m&8||m&4&&typeof l=="object"&&l&&l.__esModule)return l;var g=Object.create(null);if(d.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:l}),m&2&&typeof l!="string")for(var x in l)d.d(g,x,function(w){return l[w]}.bind(null,x));return g},d.n=function(l){var m=l&&l.__esModule?function(){return l.default}:function(){return l};return d.d(m,"a",m),m},d.o=function(l,m){return Object.prototype.hasOwnProperty.call(l,m)},d.p="",d(d.s="fb15")}({"00ee":function(s,u,d){var l=d("b622"),m=l("toStringTag"),g={};g[m]="z",s.exports=String(g)==="[object z]"},"0366":function(s,u,d){var l=d("1c0b");s.exports=function(m,g,x){if(l(m),g===void 0)return m;switch(x){case 0:return function(){return m.call(g)};case 1:return function(w){return m.call(g,w)};case 2:return function(w,C){return m.call(g,w,C)};case 3:return function(w,C,I){return m.call(g,w,C,I)}}return function(){return m.apply(g,arguments)}}},"057f":function(s,u,d){var l=d("fc6a"),m=d("241c").f,g={}.toString,x=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],w=function(C){try{return m(C)}catch{return x.slice()}};s.exports.f=function(I){return x&&g.call(I)=="[object Window]"?w(I):m(l(I))}},"06cf":function(s,u,d){var l=d("83ab"),m=d("d1e7"),g=d("5c6c"),x=d("fc6a"),w=d("c04e"),C=d("5135"),I=d("0cfb"),M=Object.getOwnPropertyDescriptor;u.f=l?M:function($,F){if($=x($),F=w(F,!0),I)try{return M($,F)}catch{}if(C($,F))return g(!m.f.call($,F),$[F])}},"0cfb":function(s,u,d){var l=d("83ab"),m=d("d039"),g=d("cc12");s.exports=!l&&!m(function(){return Object.defineProperty(g("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(s,u,d){var l=d("23e7"),m=d("d58f").left,g=d("a640"),x=d("ae40"),w=g("reduce"),C=x("reduce",{1:0});l({target:"Array",proto:!0,forced:!w||!C},{reduce:function(M){return m(this,M,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(s,u,d){var l=d("c6b6"),m=d("9263");s.exports=function(g,x){var w=g.exec;if(typeof w=="function"){var C=w.call(g,x);if(typeof C!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return C}if(l(g)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return m.call(g,x)}},"159b":function(s,u,d){var l=d("da84"),m=d("fdbc"),g=d("17c2"),x=d("9112");for(var w in m){var C=l[w],I=C&&C.prototype;if(I&&I.forEach!==g)try{x(I,"forEach",g)}catch{I.forEach=g}}},"17c2":function(s,u,d){var l=d("b727").forEach,m=d("a640"),g=d("ae40"),x=m("forEach"),w=g("forEach");s.exports=!x||!w?function(I){return l(this,I,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(s,u,d){var l=d("d066");s.exports=l("document","documentElement")},"1c0b":function(s,u){s.exports=function(d){if(typeof d!="function")throw TypeError(String(d)+" is not a function");return d}},"1c7e":function(s,u,d){var l=d("b622"),m=l("iterator"),g=!1;try{var x=0,w={next:function(){return{done:!!x++}},return:function(){g=!0}};w[m]=function(){return this},Array.from(w,function(){throw 2})}catch{}s.exports=function(C,I){if(!I&&!g)return!1;var M=!1;try{var L={};L[m]=function(){return{next:function(){return{done:M=!0}}}},C(L)}catch{}return M}},"1d80":function(s,u){s.exports=function(d){if(d==null)throw TypeError("Can't call method on "+d);return d}},"1dde":function(s,u,d){var l=d("d039"),m=d("b622"),g=d("2d00"),x=m("species");s.exports=function(w){return g>=51||!l(function(){var C=[],I=C.constructor={};return I[x]=function(){return{foo:1}},C[w](Boolean).foo!==1})}},"23cb":function(s,u,d){var l=d("a691"),m=Math.max,g=Math.min;s.exports=function(x,w){var C=l(x);return C<0?m(C+w,0):g(C,w)}},"23e7":function(s,u,d){var l=d("da84"),m=d("06cf").f,g=d("9112"),x=d("6eeb"),w=d("ce4e"),C=d("e893"),I=d("94ca");s.exports=function(M,L){var $=M.target,F=M.global,U=M.stat,ee,V,Q,ae,be,te;if(F?V=l:U?V=l[$]||w($,{}):V=(l[$]||{}).prototype,V)for(Q in L){if(be=L[Q],M.noTargetGet?(te=m(V,Q),ae=te&&te.value):ae=V[Q],ee=I(F?Q:$+(U?".":"#")+Q,M.forced),!ee&&ae!==void 0){if(typeof be==typeof ae)continue;C(be,ae)}(M.sham||ae&&ae.sham)&&g(be,"sham",!0),x(V,Q,be,M)}}},"241c":function(s,u,d){var l=d("ca84"),m=d("7839"),g=m.concat("length","prototype");u.f=Object.getOwnPropertyNames||function(w){return l(w,g)}},"25f0":function(s,u,d){var l=d("6eeb"),m=d("825a"),g=d("d039"),x=d("ad6d"),w="toString",C=RegExp.prototype,I=C[w],M=g(function(){return I.call({source:"a",flags:"b"})!="/a/b"}),L=I.name!=w;(M||L)&&l(RegExp.prototype,w,function(){var F=m(this),U=String(F.source),ee=F.flags,V=String(ee===void 0&&F instanceof RegExp&&!("flags"in C)?x.call(F):ee);return"/"+U+"/"+V},{unsafe:!0})},"2ca0":function(s,u,d){var l=d("23e7"),m=d("06cf").f,g=d("50c4"),x=d("5a34"),w=d("1d80"),C=d("ab13"),I=d("c430"),M="".startsWith,L=Math.min,$=C("startsWith"),F=!I&&!$&&!!function(){var U=m(String.prototype,"startsWith");return U&&!U.writable}();l({target:"String",proto:!0,forced:!F&&!$},{startsWith:function(ee){var V=String(w(this));x(ee);var Q=g(L(arguments.length>1?arguments[1]:void 0,V.length)),ae=String(ee);return M?M.call(V,ae,Q):V.slice(Q,Q+ae.length)===ae}})},"2d00":function(s,u,d){var l=d("da84"),m=d("342f"),g=l.process,x=g&&g.versions,w=x&&x.v8,C,I;w?(C=w.split("."),I=C[0]+C[1]):m&&(C=m.match(/Edge\/(\d+)/),(!C||C[1]>=74)&&(C=m.match(/Chrome\/(\d+)/),C&&(I=C[1]))),s.exports=I&&+I},"342f":function(s,u,d){var l=d("d066");s.exports=l("navigator","userAgent")||""},"35a1":function(s,u,d){var l=d("f5df"),m=d("3f8c"),g=d("b622"),x=g("iterator");s.exports=function(w){if(w!=null)return w[x]||w["@@iterator"]||m[l(w)]}},"37e8":function(s,u,d){var l=d("83ab"),m=d("9bf2"),g=d("825a"),x=d("df75");s.exports=l?Object.defineProperties:function(C,I){g(C);for(var M=x(I),L=M.length,$=0,F;L>$;)m.f(C,F=M[$++],I[F]);return C}},"3bbe":function(s,u,d){var l=d("861d");s.exports=function(m){if(!l(m)&&m!==null)throw TypeError("Can't set "+String(m)+" as a prototype");return m}},"3ca3":function(s,u,d){var l=d("6547").charAt,m=d("69f3"),g=d("7dd0"),x="String Iterator",w=m.set,C=m.getterFor(x);g(String,"String",function(I){w(this,{type:x,string:String(I),index:0})},function(){var M=C(this),L=M.string,$=M.index,F;return $>=L.length?{value:void 0,done:!0}:(F=l(L,$),M.index+=F.length,{value:F,done:!1})})},"3f8c":function(s,u){s.exports={}},4160:function(s,u,d){var l=d("23e7"),m=d("17c2");l({target:"Array",proto:!0,forced:[].forEach!=m},{forEach:m})},"428f":function(s,u,d){var l=d("da84");s.exports=l},"44ad":function(s,u,d){var l=d("d039"),m=d("c6b6"),g="".split;s.exports=l(function(){return!Object("z").propertyIsEnumerable(0)})?function(x){return m(x)=="String"?g.call(x,""):Object(x)}:Object},"44d2":function(s,u,d){var l=d("b622"),m=d("7c73"),g=d("9bf2"),x=l("unscopables"),w=Array.prototype;w[x]==null&&g.f(w,x,{configurable:!0,value:m(null)}),s.exports=function(C){w[x][C]=!0}},"44e7":function(s,u,d){var l=d("861d"),m=d("c6b6"),g=d("b622"),x=g("match");s.exports=function(w){var C;return l(w)&&((C=w[x])!==void 0?!!C:m(w)=="RegExp")}},4930:function(s,u,d){var l=d("d039");s.exports=!!Object.getOwnPropertySymbols&&!l(function(){return!String(Symbol())})},"4d64":function(s,u,d){var l=d("fc6a"),m=d("50c4"),g=d("23cb"),x=function(w){return function(C,I,M){var L=l(C),$=m(L.length),F=g(M,$),U;if(w&&I!=I){for(;$>F;)if(U=L[F++],U!=U)return!0}else for(;$>F;F++)if((w||F in L)&&L[F]===I)return w||F||0;return!w&&-1}};s.exports={includes:x(!0),indexOf:x(!1)}},"4de4":function(s,u,d){var l=d("23e7"),m=d("b727").filter,g=d("1dde"),x=d("ae40"),w=g("filter"),C=x("filter");l({target:"Array",proto:!0,forced:!w||!C},{filter:function(M){return m(this,M,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(s,u,d){var l=d("0366"),m=d("7b0b"),g=d("9bdd"),x=d("e95a"),w=d("50c4"),C=d("8418"),I=d("35a1");s.exports=function(L){var $=m(L),F=typeof this=="function"?this:Array,U=arguments.length,ee=U>1?arguments[1]:void 0,V=ee!==void 0,Q=I($),ae=0,be,te,G,j,z,ie;if(V&&(ee=l(ee,U>2?arguments[2]:void 0,2)),Q!=null&&!(F==Array&&x(Q)))for(j=Q.call($),z=j.next,te=new F;!(G=z.call(j)).done;ae++)ie=V?g(j,ee,[G.value,ae],!0):G.value,C(te,ae,ie);else for(be=w($.length),te=new F(be);be>ae;ae++)ie=V?ee($[ae],ae):$[ae],C(te,ae,ie);return te.length=ae,te}},"4fad":function(s,u,d){var l=d("23e7"),m=d("6f53").entries;l({target:"Object",stat:!0},{entries:function(x){return m(x)}})},"50c4":function(s,u,d){var l=d("a691"),m=Math.min;s.exports=function(g){return g>0?m(l(g),9007199254740991):0}},5135:function(s,u){var d={}.hasOwnProperty;s.exports=function(l,m){return d.call(l,m)}},5319:function(s,u,d){var l=d("d784"),m=d("825a"),g=d("7b0b"),x=d("50c4"),w=d("a691"),C=d("1d80"),I=d("8aa5"),M=d("14c3"),L=Math.max,$=Math.min,F=Math.floor,U=/\$([$&'`]|\d\d?|<[^>]*>)/g,ee=/\$([$&'`]|\d\d?)/g,V=function(Q){return Q===void 0?Q:String(Q)};l("replace",2,function(Q,ae,be,te){var G=te.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,j=te.REPLACE_KEEPS_$0,z=G?"$":"$0";return[function(ne,Ee){var Ce=C(this),Xe=ne==null?void 0:ne[Q];return Xe!==void 0?Xe.call(ne,Ce,Ee):ae.call(String(Ce),ne,Ee)},function(X,ne){if(!G&&j||typeof ne=="string"&&ne.indexOf(z)===-1){var Ee=be(ae,X,this,ne);if(Ee.done)return Ee.value}var Ce=m(X),Xe=String(this),at=typeof ne=="function";at||(ne=String(ne));var it=Ce.global;if(it){var $t=Ce.unicode;Ce.lastIndex=0}for(var Ct=[];;){var tt=M(Ce,Xe);if(tt===null||(Ct.push(tt),!it))break;var et=String(tt[0]);et===""&&(Ce.lastIndex=I(Xe,x(Ce.lastIndex),$t))}for(var dt="",Be=0,Ke=0;Ke<Ct.length;Ke++){tt=Ct[Ke];for(var ut=String(tt[0]),Ot=L($(w(tt.index),Xe.length),0),Vt=[],_n=1;_n<tt.length;_n++)Vt.push(V(tt[_n]));var qt=tt.groups;if(at){var _e=[ut].concat(Vt,Ot,Xe);qt!==void 0&&_e.push(qt);var ke=String(ne.apply(void 0,_e))}else ke=ie(ut,Xe,Ot,Vt,qt,ne);Ot>=Be&&(dt+=Xe.slice(Be,Ot)+ke,Be=Ot+ut.length)}return dt+Xe.slice(Be)}];function ie(X,ne,Ee,Ce,Xe,at){var it=Ee+X.length,$t=Ce.length,Ct=ee;return Xe!==void 0&&(Xe=g(Xe),Ct=U),ae.call(at,Ct,function(tt,et){var dt;switch(et.charAt(0)){case"$":return"$";case"&":return X;case"`":return ne.slice(0,Ee);case"'":return ne.slice(it);case"<":dt=Xe[et.slice(1,-1)];break;default:var Be=+et;if(Be===0)return tt;if(Be>$t){var Ke=F(Be/10);return Ke===0?tt:Ke<=$t?Ce[Ke-1]===void 0?et.charAt(1):Ce[Ke-1]+et.charAt(1):tt}dt=Ce[Be-1]}return dt===void 0?"":dt})}})},5692:function(s,u,d){var l=d("c430"),m=d("c6cd");(s.exports=function(g,x){return m[g]||(m[g]=x!==void 0?x:{})})("versions",[]).push({version:"3.6.5",mode:l?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(s,u,d){var l=d("d066"),m=d("241c"),g=d("7418"),x=d("825a");s.exports=l("Reflect","ownKeys")||function(C){var I=m.f(x(C)),M=g.f;return M?I.concat(M(C)):I}},"5a34":function(s,u,d){var l=d("44e7");s.exports=function(m){if(l(m))throw TypeError("The method doesn't accept regular expressions");return m}},"5c6c":function(s,u){s.exports=function(d,l){return{enumerable:!(d&1),configurable:!(d&2),writable:!(d&4),value:l}}},"5db7":function(s,u,d){var l=d("23e7"),m=d("a2bf"),g=d("7b0b"),x=d("50c4"),w=d("1c0b"),C=d("65f0");l({target:"Array",proto:!0},{flatMap:function(M){var L=g(this),$=x(L.length),F;return w(M),F=C(L,0),F.length=m(F,L,L,$,0,1,M,arguments.length>1?arguments[1]:void 0),F}})},6547:function(s,u,d){var l=d("a691"),m=d("1d80"),g=function(x){return function(w,C){var I=String(m(w)),M=l(C),L=I.length,$,F;return M<0||M>=L?x?"":void 0:($=I.charCodeAt(M),$<55296||$>56319||M+1===L||(F=I.charCodeAt(M+1))<56320||F>57343?x?I.charAt(M):$:x?I.slice(M,M+2):($-55296<<10)+(F-56320)+65536)}};s.exports={codeAt:g(!1),charAt:g(!0)}},"65f0":function(s,u,d){var l=d("861d"),m=d("e8b5"),g=d("b622"),x=g("species");s.exports=function(w,C){var I;return m(w)&&(I=w.constructor,typeof I=="function"&&(I===Array||m(I.prototype))?I=void 0:l(I)&&(I=I[x],I===null&&(I=void 0))),new(I===void 0?Array:I)(C===0?0:C)}},"69f3":function(s,u,d){var l=d("7f9a"),m=d("da84"),g=d("861d"),x=d("9112"),w=d("5135"),C=d("f772"),I=d("d012"),M=m.WeakMap,L,$,F,U=function(G){return F(G)?$(G):L(G,{})},ee=function(G){return function(j){var z;if(!g(j)||(z=$(j)).type!==G)throw TypeError("Incompatible receiver, "+G+" required");return z}};if(l){var V=new M,Q=V.get,ae=V.has,be=V.set;L=function(G,j){return be.call(V,G,j),j},$=function(G){return Q.call(V,G)||{}},F=function(G){return ae.call(V,G)}}else{var te=C("state");I[te]=!0,L=function(G,j){return x(G,te,j),j},$=function(G){return w(G,te)?G[te]:{}},F=function(G){return w(G,te)}}s.exports={set:L,get:$,has:F,enforce:U,getterFor:ee}},"6eeb":function(s,u,d){var l=d("da84"),m=d("9112"),g=d("5135"),x=d("ce4e"),w=d("8925"),C=d("69f3"),I=C.get,M=C.enforce,L=String(String).split("String");(s.exports=function($,F,U,ee){var V=ee?!!ee.unsafe:!1,Q=ee?!!ee.enumerable:!1,ae=ee?!!ee.noTargetGet:!1;if(typeof U=="function"&&(typeof F=="string"&&!g(U,"name")&&m(U,"name",F),M(U).source=L.join(typeof F=="string"?F:"")),$===l){Q?$[F]=U:x(F,U);return}else V?!ae&&$[F]&&(Q=!0):delete $[F];Q?$[F]=U:m($,F,U)})(Function.prototype,"toString",function(){return typeof this=="function"&&I(this).source||w(this)})},"6f53":function(s,u,d){var l=d("83ab"),m=d("df75"),g=d("fc6a"),x=d("d1e7").f,w=function(C){return function(I){for(var M=g(I),L=m(M),$=L.length,F=0,U=[],ee;$>F;)ee=L[F++],(!l||x.call(M,ee))&&U.push(C?[ee,M[ee]]:M[ee]);return U}};s.exports={entries:w(!0),values:w(!1)}},"73d9":function(s,u,d){var l=d("44d2");l("flatMap")},7418:function(s,u){u.f=Object.getOwnPropertySymbols},"746f":function(s,u,d){var l=d("428f"),m=d("5135"),g=d("e538"),x=d("9bf2").f;s.exports=function(w){var C=l.Symbol||(l.Symbol={});m(C,w)||x(C,w,{value:g.f(w)})}},7839:function(s,u){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(s,u,d){var l=d("1d80");s.exports=function(m){return Object(l(m))}},"7c73":function(s,u,d){var l=d("825a"),m=d("37e8"),g=d("7839"),x=d("d012"),w=d("1be4"),C=d("cc12"),I=d("f772"),M=">",L="<",$="prototype",F="script",U=I("IE_PROTO"),ee=function(){},V=function(G){return L+F+M+G+L+"/"+F+M},Q=function(G){G.write(V("")),G.close();var j=G.parentWindow.Object;return G=null,j},ae=function(){var G=C("iframe"),j="java"+F+":",z;return G.style.display="none",w.appendChild(G),G.src=String(j),z=G.contentWindow.document,z.open(),z.write(V("document.F=Object")),z.close(),z.F},be,te=function(){try{be=document.domain&&new ActiveXObject("htmlfile")}catch{}te=be?Q(be):ae();for(var G=g.length;G--;)delete te[$][g[G]];return te()};x[U]=!0,s.exports=Object.create||function(j,z){var ie;return j!==null?(ee[$]=l(j),ie=new ee,ee[$]=null,ie[U]=j):ie=te(),z===void 0?ie:m(ie,z)}},"7dd0":function(s,u,d){var l=d("23e7"),m=d("9ed3"),g=d("e163"),x=d("d2bb"),w=d("d44e"),C=d("9112"),I=d("6eeb"),M=d("b622"),L=d("c430"),$=d("3f8c"),F=d("ae93"),U=F.IteratorPrototype,ee=F.BUGGY_SAFARI_ITERATORS,V=M("iterator"),Q="keys",ae="values",be="entries",te=function(){return this};s.exports=function(G,j,z,ie,X,ne,Ee){m(z,j,ie);var Ce=function(Ke){if(Ke===X&&Ct)return Ct;if(!ee&&Ke in it)return it[Ke];switch(Ke){case Q:return function(){return new z(this,Ke)};case ae:return function(){return new z(this,Ke)};case be:return function(){return new z(this,Ke)}}return function(){return new z(this)}},Xe=j+" Iterator",at=!1,it=G.prototype,$t=it[V]||it["@@iterator"]||X&&it[X],Ct=!ee&&$t||Ce(X),tt=j=="Array"&&it.entries||$t,et,dt,Be;if(tt&&(et=g(tt.call(new G)),U!==Object.prototype&&et.next&&(!L&&g(et)!==U&&(x?x(et,U):typeof et[V]!="function"&&C(et,V,te)),w(et,Xe,!0,!0),L&&($[Xe]=te))),X==ae&&$t&&$t.name!==ae&&(at=!0,Ct=function(){return $t.call(this)}),(!L||Ee)&&it[V]!==Ct&&C(it,V,Ct),$[j]=Ct,X)if(dt={values:Ce(ae),keys:ne?Ct:Ce(Q),entries:Ce(be)},Ee)for(Be in dt)(ee||at||!(Be in it))&&I(it,Be,dt[Be]);else l({target:j,proto:!0,forced:ee||at},dt);return dt}},"7f9a":function(s,u,d){var l=d("da84"),m=d("8925"),g=l.WeakMap;s.exports=typeof g=="function"&&/native code/.test(m(g))},"825a":function(s,u,d){var l=d("861d");s.exports=function(m){if(!l(m))throw TypeError(String(m)+" is not an object");return m}},"83ab":function(s,u,d){var l=d("d039");s.exports=!l(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(s,u,d){var l=d("c04e"),m=d("9bf2"),g=d("5c6c");s.exports=function(x,w,C){var I=l(w);I in x?m.f(x,I,g(0,C)):x[I]=C}},"861d":function(s,u){s.exports=function(d){return typeof d=="object"?d!==null:typeof d=="function"}},8875:function(s,u,d){var l,m,g;(function(x,w){m=[],l=w,g=typeof l=="function"?l.apply(u,m):l,g!==void 0&&(s.exports=g)})(typeof self<"u"?self:this,function(){function x(){var w=Object.getOwnPropertyDescriptor(document,"currentScript");if(!w&&"currentScript"in document&&document.currentScript||w&&w.get!==x&&document.currentScript)return document.currentScript;try{throw new Error}catch(be){var C=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,I=/@([^@]*):(\d+):(\d+)\s*$/ig,M=C.exec(be.stack)||I.exec(be.stack),L=M&&M[1]||!1,$=M&&M[2]||!1,F=document.location.href.replace(document.location.hash,""),U,ee,V,Q=document.getElementsByTagName("script");L===F&&(U=document.documentElement.outerHTML,ee=new RegExp("(?:[^\\n]+?\\n){0,"+($-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),V=U.replace(ee,"$1").trim());for(var ae=0;ae<Q.length;ae++)if(Q[ae].readyState==="interactive"||Q[ae].src===L||L===F&&Q[ae].innerHTML&&Q[ae].innerHTML.trim()===V)return Q[ae];return null}}return x})},8925:function(s,u,d){var l=d("c6cd"),m=Function.toString;typeof l.inspectSource!="function"&&(l.inspectSource=function(g){return m.call(g)}),s.exports=l.inspectSource},"8aa5":function(s,u,d){var l=d("6547").charAt;s.exports=function(m,g,x){return g+(x?l(m,g).length:1)}},"8bbf":function(s,u){s.exports=i},"90e3":function(s,u){var d=0,l=Math.random();s.exports=function(m){return"Symbol("+String(m===void 0?"":m)+")_"+(++d+l).toString(36)}},9112:function(s,u,d){var l=d("83ab"),m=d("9bf2"),g=d("5c6c");s.exports=l?function(x,w,C){return m.f(x,w,g(1,C))}:function(x,w,C){return x[w]=C,x}},9263:function(s,u,d){var l=d("ad6d"),m=d("9f7f"),g=RegExp.prototype.exec,x=String.prototype.replace,w=g,C=function(){var $=/a/,F=/b*/g;return g.call($,"a"),g.call(F,"a"),$.lastIndex!==0||F.lastIndex!==0}(),I=m.UNSUPPORTED_Y||m.BROKEN_CARET,M=/()??/.exec("")[1]!==void 0,L=C||M||I;L&&(w=function(F){var U=this,ee,V,Q,ae,be=I&&U.sticky,te=l.call(U),G=U.source,j=0,z=F;return be&&(te=te.replace("y",""),te.indexOf("g")===-1&&(te+="g"),z=String(F).slice(U.lastIndex),U.lastIndex>0&&(!U.multiline||U.multiline&&F[U.lastIndex-1]!==`
`)&&(G="(?: "+G+")",z=" "+z,j++),V=new RegExp("^(?:"+G+")",te)),M&&(V=new RegExp("^"+G+"$(?!\\s)",te)),C&&(ee=U.lastIndex),Q=g.call(be?V:U,z),be?Q?(Q.input=Q.input.slice(j),Q[0]=Q[0].slice(j),Q.index=U.lastIndex,U.lastIndex+=Q[0].length):U.lastIndex=0:C&&Q&&(U.lastIndex=U.global?Q.index+Q[0].length:ee),M&&Q&&Q.length>1&&x.call(Q[0],V,function(){for(ae=1;ae<arguments.length-2;ae++)arguments[ae]===void 0&&(Q[ae]=void 0)}),Q}),s.exports=w},"94ca":function(s,u,d){var l=d("d039"),m=/#|\.prototype\./,g=function(M,L){var $=w[x(M)];return $==I?!0:$==C?!1:typeof L=="function"?l(L):!!L},x=g.normalize=function(M){return String(M).replace(m,".").toLowerCase()},w=g.data={},C=g.NATIVE="N",I=g.POLYFILL="P";s.exports=g},"99af":function(s,u,d){var l=d("23e7"),m=d("d039"),g=d("e8b5"),x=d("861d"),w=d("7b0b"),C=d("50c4"),I=d("8418"),M=d("65f0"),L=d("1dde"),$=d("b622"),F=d("2d00"),U=$("isConcatSpreadable"),ee=9007199254740991,V="Maximum allowed index exceeded",Q=F>=51||!m(function(){var G=[];return G[U]=!1,G.concat()[0]!==G}),ae=L("concat"),be=function(G){if(!x(G))return!1;var j=G[U];return j!==void 0?!!j:g(G)},te=!Q||!ae;l({target:"Array",proto:!0,forced:te},{concat:function(j){var z=w(this),ie=M(z,0),X=0,ne,Ee,Ce,Xe,at;for(ne=-1,Ce=arguments.length;ne<Ce;ne++)if(at=ne===-1?z:arguments[ne],be(at)){if(Xe=C(at.length),X+Xe>ee)throw TypeError(V);for(Ee=0;Ee<Xe;Ee++,X++)Ee in at&&I(ie,X,at[Ee])}else{if(X>=ee)throw TypeError(V);I(ie,X++,at)}return ie.length=X,ie}})},"9bdd":function(s,u,d){var l=d("825a");s.exports=function(m,g,x,w){try{return w?g(l(x)[0],x[1]):g(x)}catch(I){var C=m.return;throw C!==void 0&&l(C.call(m)),I}}},"9bf2":function(s,u,d){var l=d("83ab"),m=d("0cfb"),g=d("825a"),x=d("c04e"),w=Object.defineProperty;u.f=l?w:function(I,M,L){if(g(I),M=x(M,!0),g(L),m)try{return w(I,M,L)}catch{}if("get"in L||"set"in L)throw TypeError("Accessors not supported");return"value"in L&&(I[M]=L.value),I}},"9ed3":function(s,u,d){var l=d("ae93").IteratorPrototype,m=d("7c73"),g=d("5c6c"),x=d("d44e"),w=d("3f8c"),C=function(){return this};s.exports=function(I,M,L){var $=M+" Iterator";return I.prototype=m(l,{next:g(1,L)}),x(I,$,!1,!0),w[$]=C,I}},"9f7f":function(s,u,d){var l=d("d039");function m(g,x){return RegExp(g,x)}u.UNSUPPORTED_Y=l(function(){var g=m("a","y");return g.lastIndex=2,g.exec("abcd")!=null}),u.BROKEN_CARET=l(function(){var g=m("^r","gy");return g.lastIndex=2,g.exec("str")!=null})},a2bf:function(s,u,d){var l=d("e8b5"),m=d("50c4"),g=d("0366"),x=function(w,C,I,M,L,$,F,U){for(var ee=L,V=0,Q=F?g(F,U,3):!1,ae;V<M;){if(V in I){if(ae=Q?Q(I[V],V,C):I[V],$>0&&l(ae))ee=x(w,C,ae,m(ae.length),ee,$-1)-1;else{if(ee>=9007199254740991)throw TypeError("Exceed the acceptable array length");w[ee]=ae}ee++}V++}return ee};s.exports=x},a352:function(s,u){s.exports=r},a434:function(s,u,d){var l=d("23e7"),m=d("23cb"),g=d("a691"),x=d("50c4"),w=d("7b0b"),C=d("65f0"),I=d("8418"),M=d("1dde"),L=d("ae40"),$=M("splice"),F=L("splice",{ACCESSORS:!0,0:0,1:2}),U=Math.max,ee=Math.min,V=9007199254740991,Q="Maximum allowed length exceeded";l({target:"Array",proto:!0,forced:!$||!F},{splice:function(be,te){var G=w(this),j=x(G.length),z=m(be,j),ie=arguments.length,X,ne,Ee,Ce,Xe,at;if(ie===0?X=ne=0:ie===1?(X=0,ne=j-z):(X=ie-2,ne=ee(U(g(te),0),j-z)),j+X-ne>V)throw TypeError(Q);for(Ee=C(G,ne),Ce=0;Ce<ne;Ce++)Xe=z+Ce,Xe in G&&I(Ee,Ce,G[Xe]);if(Ee.length=ne,X<ne){for(Ce=z;Ce<j-ne;Ce++)Xe=Ce+ne,at=Ce+X,Xe in G?G[at]=G[Xe]:delete G[at];for(Ce=j;Ce>j-ne+X;Ce--)delete G[Ce-1]}else if(X>ne)for(Ce=j-ne;Ce>z;Ce--)Xe=Ce+ne-1,at=Ce+X-1,Xe in G?G[at]=G[Xe]:delete G[at];for(Ce=0;Ce<X;Ce++)G[Ce+z]=arguments[Ce+2];return G.length=j-ne+X,Ee}})},a4d3:function(s,u,d){var l=d("23e7"),m=d("da84"),g=d("d066"),x=d("c430"),w=d("83ab"),C=d("4930"),I=d("fdbf"),M=d("d039"),L=d("5135"),$=d("e8b5"),F=d("861d"),U=d("825a"),ee=d("7b0b"),V=d("fc6a"),Q=d("c04e"),ae=d("5c6c"),be=d("7c73"),te=d("df75"),G=d("241c"),j=d("057f"),z=d("7418"),ie=d("06cf"),X=d("9bf2"),ne=d("d1e7"),Ee=d("9112"),Ce=d("6eeb"),Xe=d("5692"),at=d("f772"),it=d("d012"),$t=d("90e3"),Ct=d("b622"),tt=d("e538"),et=d("746f"),dt=d("d44e"),Be=d("69f3"),Ke=d("b727").forEach,ut=at("hidden"),Ot="Symbol",Vt="prototype",_n=Ct("toPrimitive"),qt=Be.set,_e=Be.getterFor(Ot),ke=Object[Vt],ge=m.Symbol,ft=g("JSON","stringify"),q=ie.f,fe=X.f,Pe=j.f,Ge=ne.f,pt=Xe("symbols"),ht=Xe("op-symbols"),zt=Xe("string-to-symbol-registry"),Dt=Xe("symbol-to-string-registry"),Gt=Xe("wks"),ln=m.QObject,vt=!ln||!ln[Vt]||!ln[Vt].findChild,Rn=w&&M(function(){return be(fe({},"a",{get:function(){return fe(this,"a",{value:7}).a}})).a!=7})?function(Cn,Ut,vn){var kn=q(ke,Ut);kn&&delete ke[Ut],fe(Cn,Ut,vn),kn&&Cn!==ke&&fe(ke,Ut,kn)}:fe,Ln=function(Cn,Ut){var vn=pt[Cn]=be(ge[Vt]);return qt(vn,{type:Ot,tag:Cn,description:Ut}),w||(vn.description=Ut),vn},Ye=I?function(Cn){return typeof Cn=="symbol"}:function(Cn){return Object(Cn)instanceof ge},Qe=function(Ut,vn,kn){Ut===ke&&Qe(ht,vn,kn),U(Ut);var de=Q(vn,!0);return U(kn),L(pt,de)?(kn.enumerable?(L(Ut,ut)&&Ut[ut][de]&&(Ut[ut][de]=!1),kn=be(kn,{enumerable:ae(0,!1)})):(L(Ut,ut)||fe(Ut,ut,ae(1,{})),Ut[ut][de]=!0),Rn(Ut,de,kn)):fe(Ut,de,kn)},Re=function(Ut,vn){U(Ut);var kn=V(vn),de=te(kn).concat(Pt(kn));return Ke(de,function(Y){(!w||St.call(kn,Y))&&Qe(Ut,Y,kn[Y])}),Ut},mt=function(Ut,vn){return vn===void 0?be(Ut):Re(be(Ut),vn)},St=function(Ut){var vn=Q(Ut,!0),kn=Ge.call(this,vn);return this===ke&&L(pt,vn)&&!L(ht,vn)?!1:kn||!L(this,vn)||!L(pt,vn)||L(this,ut)&&this[ut][vn]?kn:!0},Yt=function(Ut,vn){var kn=V(Ut),de=Q(vn,!0);if(!(kn===ke&&L(pt,de)&&!L(ht,de))){var Y=q(kn,de);return Y&&L(pt,de)&&!(L(kn,ut)&&kn[ut][de])&&(Y.enumerable=!0),Y}},an=function(Ut){var vn=Pe(V(Ut)),kn=[];return Ke(vn,function(de){!L(pt,de)&&!L(it,de)&&kn.push(de)}),kn},Pt=function(Ut){var vn=Ut===ke,kn=Pe(vn?ht:V(Ut)),de=[];return Ke(kn,function(Y){L(pt,Y)&&(!vn||L(ke,Y))&&de.push(pt[Y])}),de};if(C||(ge=function(){if(this instanceof ge)throw TypeError("Symbol is not a constructor");var Ut=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),vn=$t(Ut),kn=function(de){this===ke&&kn.call(ht,de),L(this,ut)&&L(this[ut],vn)&&(this[ut][vn]=!1),Rn(this,vn,ae(1,de))};return w&&vt&&Rn(ke,vn,{configurable:!0,set:kn}),Ln(vn,Ut)},Ce(ge[Vt],"toString",function(){return _e(this).tag}),Ce(ge,"withoutSetter",function(Cn){return Ln($t(Cn),Cn)}),ne.f=St,X.f=Qe,ie.f=Yt,G.f=j.f=an,z.f=Pt,tt.f=function(Cn){return Ln(Ct(Cn),Cn)},w&&(fe(ge[Vt],"description",{configurable:!0,get:function(){return _e(this).description}}),x||Ce(ke,"propertyIsEnumerable",St,{unsafe:!0}))),l({global:!0,wrap:!0,forced:!C,sham:!C},{Symbol:ge}),Ke(te(Gt),function(Cn){et(Cn)}),l({target:Ot,stat:!0,forced:!C},{for:function(Cn){var Ut=String(Cn);if(L(zt,Ut))return zt[Ut];var vn=ge(Ut);return zt[Ut]=vn,Dt[vn]=Ut,vn},keyFor:function(Ut){if(!Ye(Ut))throw TypeError(Ut+" is not a symbol");if(L(Dt,Ut))return Dt[Ut]},useSetter:function(){vt=!0},useSimple:function(){vt=!1}}),l({target:"Object",stat:!0,forced:!C,sham:!w},{create:mt,defineProperty:Qe,defineProperties:Re,getOwnPropertyDescriptor:Yt}),l({target:"Object",stat:!0,forced:!C},{getOwnPropertyNames:an,getOwnPropertySymbols:Pt}),l({target:"Object",stat:!0,forced:M(function(){z.f(1)})},{getOwnPropertySymbols:function(Ut){return z.f(ee(Ut))}}),ft){var qn=!C||M(function(){var Cn=ge();return ft([Cn])!="[null]"||ft({a:Cn})!="{}"||ft(Object(Cn))!="{}"});l({target:"JSON",stat:!0,forced:qn},{stringify:function(Ut,vn,kn){for(var de=[Ut],Y=1,re;arguments.length>Y;)de.push(arguments[Y++]);if(re=vn,!(!F(vn)&&Ut===void 0||Ye(Ut)))return $(vn)||(vn=function(pe,Ie){if(typeof re=="function"&&(Ie=re.call(this,pe,Ie)),!Ye(Ie))return Ie}),de[1]=vn,ft.apply(null,de)}})}ge[Vt][_n]||Ee(ge[Vt],_n,ge[Vt].valueOf),dt(ge,Ot),it[ut]=!0},a630:function(s,u,d){var l=d("23e7"),m=d("4df4"),g=d("1c7e"),x=!g(function(w){Array.from(w)});l({target:"Array",stat:!0,forced:x},{from:m})},a640:function(s,u,d){var l=d("d039");s.exports=function(m,g){var x=[][m];return!!x&&l(function(){x.call(null,g||function(){throw 1},1)})}},a691:function(s,u){var d=Math.ceil,l=Math.floor;s.exports=function(m){return isNaN(m=+m)?0:(m>0?l:d)(m)}},ab13:function(s,u,d){var l=d("b622"),m=l("match");s.exports=function(g){var x=/./;try{"/./"[g](x)}catch{try{return x[m]=!1,"/./"[g](x)}catch{}}return!1}},ac1f:function(s,u,d){var l=d("23e7"),m=d("9263");l({target:"RegExp",proto:!0,forced:/./.exec!==m},{exec:m})},ad6d:function(s,u,d){var l=d("825a");s.exports=function(){var m=l(this),g="";return m.global&&(g+="g"),m.ignoreCase&&(g+="i"),m.multiline&&(g+="m"),m.dotAll&&(g+="s"),m.unicode&&(g+="u"),m.sticky&&(g+="y"),g}},ae40:function(s,u,d){var l=d("83ab"),m=d("d039"),g=d("5135"),x=Object.defineProperty,w={},C=function(I){throw I};s.exports=function(I,M){if(g(w,I))return w[I];M||(M={});var L=[][I],$=g(M,"ACCESSORS")?M.ACCESSORS:!1,F=g(M,0)?M[0]:C,U=g(M,1)?M[1]:void 0;return w[I]=!!L&&!m(function(){if($&&!l)return!0;var ee={length:-1};$?x(ee,1,{enumerable:!0,get:C}):ee[1]=1,L.call(ee,F,U)})}},ae93:function(s,u,d){var l=d("e163"),m=d("9112"),g=d("5135"),x=d("b622"),w=d("c430"),C=x("iterator"),I=!1,M=function(){return this},L,$,F;[].keys&&(F=[].keys(),"next"in F?($=l(l(F)),$!==Object.prototype&&(L=$)):I=!0),L==null&&(L={}),!w&&!g(L,C)&&m(L,C,M),s.exports={IteratorPrototype:L,BUGGY_SAFARI_ITERATORS:I}},b041:function(s,u,d){var l=d("00ee"),m=d("f5df");s.exports=l?{}.toString:function(){return"[object "+m(this)+"]"}},b0c0:function(s,u,d){var l=d("83ab"),m=d("9bf2").f,g=Function.prototype,x=g.toString,w=/^\s*function ([^ (]*)/,C="name";l&&!(C in g)&&m(g,C,{configurable:!0,get:function(){try{return x.call(this).match(w)[1]}catch{return""}}})},b622:function(s,u,d){var l=d("da84"),m=d("5692"),g=d("5135"),x=d("90e3"),w=d("4930"),C=d("fdbf"),I=m("wks"),M=l.Symbol,L=C?M:M&&M.withoutSetter||x;s.exports=function($){return g(I,$)||(w&&g(M,$)?I[$]=M[$]:I[$]=L("Symbol."+$)),I[$]}},b64b:function(s,u,d){var l=d("23e7"),m=d("7b0b"),g=d("df75"),x=d("d039"),w=x(function(){g(1)});l({target:"Object",stat:!0,forced:w},{keys:function(I){return g(m(I))}})},b727:function(s,u,d){var l=d("0366"),m=d("44ad"),g=d("7b0b"),x=d("50c4"),w=d("65f0"),C=[].push,I=function(M){var L=M==1,$=M==2,F=M==3,U=M==4,ee=M==6,V=M==5||ee;return function(Q,ae,be,te){for(var G=g(Q),j=m(G),z=l(ae,be,3),ie=x(j.length),X=0,ne=te||w,Ee=L?ne(Q,ie):$?ne(Q,0):void 0,Ce,Xe;ie>X;X++)if((V||X in j)&&(Ce=j[X],Xe=z(Ce,X,G),M)){if(L)Ee[X]=Xe;else if(Xe)switch(M){case 3:return!0;case 5:return Ce;case 6:return X;case 2:C.call(Ee,Ce)}else if(U)return!1}return ee?-1:F||U?U:Ee}};s.exports={forEach:I(0),map:I(1),filter:I(2),some:I(3),every:I(4),find:I(5),findIndex:I(6)}},c04e:function(s,u,d){var l=d("861d");s.exports=function(m,g){if(!l(m))return m;var x,w;if(g&&typeof(x=m.toString)=="function"&&!l(w=x.call(m))||typeof(x=m.valueOf)=="function"&&!l(w=x.call(m))||!g&&typeof(x=m.toString)=="function"&&!l(w=x.call(m)))return w;throw TypeError("Can't convert object to primitive value")}},c430:function(s,u){s.exports=!1},c6b6:function(s,u){var d={}.toString;s.exports=function(l){return d.call(l).slice(8,-1)}},c6cd:function(s,u,d){var l=d("da84"),m=d("ce4e"),g="__core-js_shared__",x=l[g]||m(g,{});s.exports=x},c740:function(s,u,d){var l=d("23e7"),m=d("b727").findIndex,g=d("44d2"),x=d("ae40"),w="findIndex",C=!0,I=x(w);w in[]&&Array(1)[w](function(){C=!1}),l({target:"Array",proto:!0,forced:C||!I},{findIndex:function(L){return m(this,L,arguments.length>1?arguments[1]:void 0)}}),g(w)},c8ba:function(s,u){var d;d=function(){return this}();try{d=d||new Function("return this")()}catch{typeof window=="object"&&(d=window)}s.exports=d},c975:function(s,u,d){var l=d("23e7"),m=d("4d64").indexOf,g=d("a640"),x=d("ae40"),w=[].indexOf,C=!!w&&1/[1].indexOf(1,-0)<0,I=g("indexOf"),M=x("indexOf",{ACCESSORS:!0,1:0});l({target:"Array",proto:!0,forced:C||!I||!M},{indexOf:function($){return C?w.apply(this,arguments)||0:m(this,$,arguments.length>1?arguments[1]:void 0)}})},ca84:function(s,u,d){var l=d("5135"),m=d("fc6a"),g=d("4d64").indexOf,x=d("d012");s.exports=function(w,C){var I=m(w),M=0,L=[],$;for($ in I)!l(x,$)&&l(I,$)&&L.push($);for(;C.length>M;)l(I,$=C[M++])&&(~g(L,$)||L.push($));return L}},caad:function(s,u,d){var l=d("23e7"),m=d("4d64").includes,g=d("44d2"),x=d("ae40"),w=x("indexOf",{ACCESSORS:!0,1:0});l({target:"Array",proto:!0,forced:!w},{includes:function(I){return m(this,I,arguments.length>1?arguments[1]:void 0)}}),g("includes")},cc12:function(s,u,d){var l=d("da84"),m=d("861d"),g=l.document,x=m(g)&&m(g.createElement);s.exports=function(w){return x?g.createElement(w):{}}},ce4e:function(s,u,d){var l=d("da84"),m=d("9112");s.exports=function(g,x){try{m(l,g,x)}catch{l[g]=x}return x}},d012:function(s,u){s.exports={}},d039:function(s,u){s.exports=function(d){try{return!!d()}catch{return!0}}},d066:function(s,u,d){var l=d("428f"),m=d("da84"),g=function(x){return typeof x=="function"?x:void 0};s.exports=function(x,w){return arguments.length<2?g(l[x])||g(m[x]):l[x]&&l[x][w]||m[x]&&m[x][w]}},d1e7:function(s,u,d){var l={}.propertyIsEnumerable,m=Object.getOwnPropertyDescriptor,g=m&&!l.call({1:2},1);u.f=g?function(w){var C=m(this,w);return!!C&&C.enumerable}:l},d28b:function(s,u,d){var l=d("746f");l("iterator")},d2bb:function(s,u,d){var l=d("825a"),m=d("3bbe");s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var g=!1,x={},w;try{w=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,w.call(x,[]),g=x instanceof Array}catch{}return function(I,M){return l(I),m(M),g?w.call(I,M):I.__proto__=M,I}}():void 0)},d3b7:function(s,u,d){var l=d("00ee"),m=d("6eeb"),g=d("b041");l||m(Object.prototype,"toString",g,{unsafe:!0})},d44e:function(s,u,d){var l=d("9bf2").f,m=d("5135"),g=d("b622"),x=g("toStringTag");s.exports=function(w,C,I){w&&!m(w=I?w:w.prototype,x)&&l(w,x,{configurable:!0,value:C})}},d58f:function(s,u,d){var l=d("1c0b"),m=d("7b0b"),g=d("44ad"),x=d("50c4"),w=function(C){return function(I,M,L,$){l(M);var F=m(I),U=g(F),ee=x(F.length),V=C?ee-1:0,Q=C?-1:1;if(L<2)for(;;){if(V in U){$=U[V],V+=Q;break}if(V+=Q,C?V<0:ee<=V)throw TypeError("Reduce of empty array with no initial value")}for(;C?V>=0:ee>V;V+=Q)V in U&&($=M($,U[V],V,F));return $}};s.exports={left:w(!1),right:w(!0)}},d784:function(s,u,d){d("ac1f");var l=d("6eeb"),m=d("d039"),g=d("b622"),x=d("9263"),w=d("9112"),C=g("species"),I=!m(function(){var U=/./;return U.exec=function(){var ee=[];return ee.groups={a:"7"},ee},"".replace(U,"$<a>")!=="7"}),M=function(){return"a".replace(/./,"$0")==="$0"}(),L=g("replace"),$=function(){return/./[L]?/./[L]("a","$0")==="":!1}(),F=!m(function(){var U=/(?:)/,ee=U.exec;U.exec=function(){return ee.apply(this,arguments)};var V="ab".split(U);return V.length!==2||V[0]!=="a"||V[1]!=="b"});s.exports=function(U,ee,V,Q){var ae=g(U),be=!m(function(){var X={};return X[ae]=function(){return 7},""[U](X)!=7}),te=be&&!m(function(){var X=!1,ne=/a/;return U==="split"&&(ne={},ne.constructor={},ne.constructor[C]=function(){return ne},ne.flags="",ne[ae]=/./[ae]),ne.exec=function(){return X=!0,null},ne[ae](""),!X});if(!be||!te||U==="replace"&&!(I&&M&&!$)||U==="split"&&!F){var G=/./[ae],j=V(ae,""[U],function(X,ne,Ee,Ce,Xe){return ne.exec===x?be&&!Xe?{done:!0,value:G.call(ne,Ee,Ce)}:{done:!0,value:X.call(Ee,ne,Ce)}:{done:!1}},{REPLACE_KEEPS_$0:M,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:$}),z=j[0],ie=j[1];l(String.prototype,U,z),l(RegExp.prototype,ae,ee==2?function(X,ne){return ie.call(X,this,ne)}:function(X){return ie.call(X,this)})}Q&&w(RegExp.prototype[ae],"sham",!0)}},d81d:function(s,u,d){var l=d("23e7"),m=d("b727").map,g=d("1dde"),x=d("ae40"),w=g("map"),C=x("map");l({target:"Array",proto:!0,forced:!w||!C},{map:function(M){return m(this,M,arguments.length>1?arguments[1]:void 0)}})},da84:function(s,u,d){(function(l){var m=function(g){return g&&g.Math==Math&&g};s.exports=m(typeof globalThis=="object"&&globalThis)||m(typeof window=="object"&&window)||m(typeof self=="object"&&self)||m(typeof l=="object"&&l)||Function("return this")()}).call(this,d("c8ba"))},dbb4:function(s,u,d){var l=d("23e7"),m=d("83ab"),g=d("56ef"),x=d("fc6a"),w=d("06cf"),C=d("8418");l({target:"Object",stat:!0,sham:!m},{getOwnPropertyDescriptors:function(M){for(var L=x(M),$=w.f,F=g(L),U={},ee=0,V,Q;F.length>ee;)Q=$(L,V=F[ee++]),Q!==void 0&&C(U,V,Q);return U}})},dbf1:function(s,u,d){(function(l){d.d(u,"a",function(){return g});function m(){return typeof window<"u"?window.console:l.console}var g=m()}).call(this,d("c8ba"))},ddb0:function(s,u,d){var l=d("da84"),m=d("fdbc"),g=d("e260"),x=d("9112"),w=d("b622"),C=w("iterator"),I=w("toStringTag"),M=g.values;for(var L in m){var $=l[L],F=$&&$.prototype;if(F){if(F[C]!==M)try{x(F,C,M)}catch{F[C]=M}if(F[I]||x(F,I,L),m[L]){for(var U in g)if(F[U]!==g[U])try{x(F,U,g[U])}catch{F[U]=g[U]}}}}},df75:function(s,u,d){var l=d("ca84"),m=d("7839");s.exports=Object.keys||function(x){return l(x,m)}},e01a:function(s,u,d){var l=d("23e7"),m=d("83ab"),g=d("da84"),x=d("5135"),w=d("861d"),C=d("9bf2").f,I=d("e893"),M=g.Symbol;if(m&&typeof M=="function"&&(!("description"in M.prototype)||M().description!==void 0)){var L={},$=function(){var ae=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),be=this instanceof $?new M(ae):ae===void 0?M():M(ae);return ae===""&&(L[be]=!0),be};I($,M);var F=$.prototype=M.prototype;F.constructor=$;var U=F.toString,ee=String(M("test"))=="Symbol(test)",V=/^Symbol\((.*)\)[^)]+$/;C(F,"description",{configurable:!0,get:function(){var ae=w(this)?this.valueOf():this,be=U.call(ae);if(x(L,ae))return"";var te=ee?be.slice(7,-1):be.replace(V,"$1");return te===""?void 0:te}}),l({global:!0,forced:!0},{Symbol:$})}},e163:function(s,u,d){var l=d("5135"),m=d("7b0b"),g=d("f772"),x=d("e177"),w=g("IE_PROTO"),C=Object.prototype;s.exports=x?Object.getPrototypeOf:function(I){return I=m(I),l(I,w)?I[w]:typeof I.constructor=="function"&&I instanceof I.constructor?I.constructor.prototype:I instanceof Object?C:null}},e177:function(s,u,d){var l=d("d039");s.exports=!l(function(){function m(){}return m.prototype.constructor=null,Object.getPrototypeOf(new m)!==m.prototype})},e260:function(s,u,d){var l=d("fc6a"),m=d("44d2"),g=d("3f8c"),x=d("69f3"),w=d("7dd0"),C="Array Iterator",I=x.set,M=x.getterFor(C);s.exports=w(Array,"Array",function(L,$){I(this,{type:C,target:l(L),index:0,kind:$})},function(){var L=M(this),$=L.target,F=L.kind,U=L.index++;return!$||U>=$.length?(L.target=void 0,{value:void 0,done:!0}):F=="keys"?{value:U,done:!1}:F=="values"?{value:$[U],done:!1}:{value:[U,$[U]],done:!1}},"values"),g.Arguments=g.Array,m("keys"),m("values"),m("entries")},e439:function(s,u,d){var l=d("23e7"),m=d("d039"),g=d("fc6a"),x=d("06cf").f,w=d("83ab"),C=m(function(){x(1)}),I=!w||C;l({target:"Object",stat:!0,forced:I,sham:!w},{getOwnPropertyDescriptor:function(L,$){return x(g(L),$)}})},e538:function(s,u,d){var l=d("b622");u.f=l},e893:function(s,u,d){var l=d("5135"),m=d("56ef"),g=d("06cf"),x=d("9bf2");s.exports=function(w,C){for(var I=m(C),M=x.f,L=g.f,$=0;$<I.length;$++){var F=I[$];l(w,F)||M(w,F,L(C,F))}}},e8b5:function(s,u,d){var l=d("c6b6");s.exports=Array.isArray||function(g){return l(g)=="Array"}},e95a:function(s,u,d){var l=d("b622"),m=d("3f8c"),g=l("iterator"),x=Array.prototype;s.exports=function(w){return w!==void 0&&(m.Array===w||x[g]===w)}},f5df:function(s,u,d){var l=d("00ee"),m=d("c6b6"),g=d("b622"),x=g("toStringTag"),w=m(function(){return arguments}())=="Arguments",C=function(I,M){try{return I[M]}catch{}};s.exports=l?m:function(I){var M,L,$;return I===void 0?"Undefined":I===null?"Null":typeof(L=C(M=Object(I),x))=="string"?L:w?m(M):($=m(M))=="Object"&&typeof M.callee=="function"?"Arguments":$}},f772:function(s,u,d){var l=d("5692"),m=d("90e3"),g=l("keys");s.exports=function(x){return g[x]||(g[x]=m(x))}},fb15:function(s,u,d){if(d.r(u),typeof window<"u"){var l=window.document.currentScript;{var m=d("8875");l=m(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:m})}var g=l&&l.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);g&&(d.p=g[1])}d("99af"),d("4de4"),d("4160"),d("c975"),d("d81d"),d("a434"),d("159b"),d("a4d3"),d("e439"),d("dbb4"),d("b64b");function x(Ye,Qe,Re){return Qe in Ye?Object.defineProperty(Ye,Qe,{value:Re,enumerable:!0,configurable:!0,writable:!0}):Ye[Qe]=Re,Ye}function w(Ye,Qe){var Re=Object.keys(Ye);if(Object.getOwnPropertySymbols){var mt=Object.getOwnPropertySymbols(Ye);Qe&&(mt=mt.filter(function(St){return Object.getOwnPropertyDescriptor(Ye,St).enumerable})),Re.push.apply(Re,mt)}return Re}function C(Ye){for(var Qe=1;Qe<arguments.length;Qe++){var Re=arguments[Qe]!=null?arguments[Qe]:{};Qe%2?w(Object(Re),!0).forEach(function(mt){x(Ye,mt,Re[mt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ye,Object.getOwnPropertyDescriptors(Re)):w(Object(Re)).forEach(function(mt){Object.defineProperty(Ye,mt,Object.getOwnPropertyDescriptor(Re,mt))})}return Ye}function I(Ye){if(Array.isArray(Ye))return Ye}d("e01a"),d("d28b"),d("e260"),d("d3b7"),d("3ca3"),d("ddb0");function M(Ye,Qe){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Ye)))){var Re=[],mt=!0,St=!1,Yt=void 0;try{for(var an=Ye[Symbol.iterator](),Pt;!(mt=(Pt=an.next()).done)&&(Re.push(Pt.value),!(Qe&&Re.length===Qe));mt=!0);}catch(qn){St=!0,Yt=qn}finally{try{!mt&&an.return!=null&&an.return()}finally{if(St)throw Yt}}return Re}}d("a630"),d("fb6a"),d("b0c0"),d("25f0");function L(Ye,Qe){(Qe==null||Qe>Ye.length)&&(Qe=Ye.length);for(var Re=0,mt=new Array(Qe);Re<Qe;Re++)mt[Re]=Ye[Re];return mt}function $(Ye,Qe){if(Ye){if(typeof Ye=="string")return L(Ye,Qe);var Re=Object.prototype.toString.call(Ye).slice(8,-1);if(Re==="Object"&&Ye.constructor&&(Re=Ye.constructor.name),Re==="Map"||Re==="Set")return Array.from(Ye);if(Re==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Re))return L(Ye,Qe)}}function F(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U(Ye,Qe){return I(Ye)||M(Ye,Qe)||$(Ye,Qe)||F()}function ee(Ye){if(Array.isArray(Ye))return L(Ye)}function V(Ye){if(typeof Symbol<"u"&&Symbol.iterator in Object(Ye))return Array.from(Ye)}function Q(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ae(Ye){return ee(Ye)||V(Ye)||$(Ye)||Q()}var be=d("a352"),te=d.n(be);function G(Ye){Ye.parentElement!==null&&Ye.parentElement.removeChild(Ye)}function j(Ye,Qe,Re){var mt=Re===0?Ye.children[0]:Ye.children[Re-1].nextSibling;Ye.insertBefore(Qe,mt)}var z=d("dbf1");d("13d5"),d("4fad"),d("ac1f"),d("5319");function ie(Ye){var Qe=Object.create(null);return function(mt){var St=Qe[mt];return St||(Qe[mt]=Ye(mt))}}var X=/-(\w)/g,ne=ie(function(Ye){return Ye.replace(X,function(Qe,Re){return Re.toUpperCase()})});d("5db7"),d("73d9");var Ee=["Start","Add","Remove","Update","End"],Ce=["Choose","Unchoose","Sort","Filter","Clone"],Xe=["Move"],at=[Xe,Ee,Ce].flatMap(function(Ye){return Ye}).map(function(Ye){return"on".concat(Ye)}),it={manage:Xe,manageAndEmit:Ee,emit:Ce};function $t(Ye){return at.indexOf(Ye)!==-1}d("caad"),d("2ca0");var Ct=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function tt(Ye){return Ct.includes(Ye)}function et(Ye){return["transition-group","TransitionGroup"].includes(Ye)}function dt(Ye){return["id","class","role","style"].includes(Ye)||Ye.startsWith("data-")||Ye.startsWith("aria-")||Ye.startsWith("on")}function Be(Ye){return Ye.reduce(function(Qe,Re){var mt=U(Re,2),St=mt[0],Yt=mt[1];return Qe[St]=Yt,Qe},{})}function Ke(Ye){var Qe=Ye.$attrs,Re=Ye.componentData,mt=Re===void 0?{}:Re,St=Be(Object.entries(Qe).filter(function(Yt){var an=U(Yt,2),Pt=an[0];return an[1],dt(Pt)}));return C(C({},St),mt)}function ut(Ye){var Qe=Ye.$attrs,Re=Ye.callBackBuilder,mt=Be(Ot(Qe));Object.entries(Re).forEach(function(Yt){var an=U(Yt,2),Pt=an[0],qn=an[1];it[Pt].forEach(function(Cn){mt["on".concat(Cn)]=qn(Cn)})});var St="[data-draggable]".concat(mt.draggable||"");return C(C({},mt),{},{draggable:St})}function Ot(Ye){return Object.entries(Ye).filter(function(Qe){var Re=U(Qe,2),mt=Re[0];return Re[1],!dt(mt)}).map(function(Qe){var Re=U(Qe,2),mt=Re[0],St=Re[1];return[ne(mt),St]}).filter(function(Qe){var Re=U(Qe,2),mt=Re[0];return Re[1],!$t(mt)})}d("c740");function Vt(Ye,Qe){if(!(Ye instanceof Qe))throw new TypeError("Cannot call a class as a function")}function _n(Ye,Qe){for(var Re=0;Re<Qe.length;Re++){var mt=Qe[Re];mt.enumerable=mt.enumerable||!1,mt.configurable=!0,"value"in mt&&(mt.writable=!0),Object.defineProperty(Ye,mt.key,mt)}}function qt(Ye,Qe,Re){return Qe&&_n(Ye.prototype,Qe),Re&&_n(Ye,Re),Ye}var _e=function(Qe){var Re=Qe.el;return Re},ke=function(Qe,Re){return Qe.__draggable_context=Re},ge=function(Qe){return Qe.__draggable_context},ft=function(){function Ye(Qe){var Re=Qe.nodes,mt=Re.header,St=Re.default,Yt=Re.footer,an=Qe.root,Pt=Qe.realList;Vt(this,Ye),this.defaultNodes=St,this.children=[].concat(ae(mt),ae(St),ae(Yt)),this.externalComponent=an.externalComponent,this.rootTransition=an.transition,this.tag=an.tag,this.realList=Pt}return qt(Ye,[{key:"render",value:function(Re,mt){var St=this.tag,Yt=this.children,an=this._isRootComponent,Pt=an?{default:function(){return Yt}}:Yt;return Re(St,mt,Pt)}},{key:"updated",value:function(){var Re=this.defaultNodes,mt=this.realList;Re.forEach(function(St,Yt){ke(_e(St),{element:mt[Yt],index:Yt})})}},{key:"getUnderlyingVm",value:function(Re){return ge(Re)}},{key:"getVmIndexFromDomIndex",value:function(Re,mt){var St=this.defaultNodes,Yt=St.length,an=mt.children,Pt=an.item(Re);if(Pt===null)return Yt;var qn=ge(Pt);if(qn)return qn.index;if(Yt===0)return 0;var Cn=_e(St[0]),Ut=ae(an).findIndex(function(vn){return vn===Cn});return Re<Ut?0:Yt}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),Ye}(),q=d("8bbf");function fe(Ye,Qe){var Re=Ye[Qe];return Re?Re():[]}function Pe(Ye){var Qe=Ye.$slots,Re=Ye.realList,mt=Ye.getKey,St=Re||[],Yt=["header","footer"].map(function(vn){return fe(Qe,vn)}),an=U(Yt,2),Pt=an[0],qn=an[1],Cn=Qe.item;if(!Cn)throw new Error("draggable element must have an item slot");var Ut=St.flatMap(function(vn,kn){return Cn({element:vn,index:kn}).map(function(de){return de.key=mt(vn),de.props=C(C({},de.props||{}),{},{"data-draggable":!0}),de})});if(Ut.length!==St.length)throw new Error("Item slot must have only one child");return{header:Pt,footer:qn,default:Ut}}function Ge(Ye){var Qe=et(Ye),Re=!tt(Ye)&&!Qe;return{transition:Qe,externalComponent:Re,tag:Re?Object(q.resolveComponent)(Ye):Qe?q.TransitionGroup:Ye}}function pt(Ye){var Qe=Ye.$slots,Re=Ye.tag,mt=Ye.realList,St=Ye.getKey,Yt=Pe({$slots:Qe,realList:mt,getKey:St}),an=Ge(Re);return new ft({nodes:Yt,root:an,realList:mt})}function ht(Ye,Qe){var Re=this;Object(q.nextTick)(function(){return Re.$emit(Ye.toLowerCase(),Qe)})}function zt(Ye){var Qe=this;return function(Re,mt){if(Qe.realList!==null)return Qe["onDrag".concat(Ye)](Re,mt)}}function Dt(Ye){var Qe=this,Re=zt.call(this,Ye);return function(mt,St){Re.call(Qe,mt,St),ht.call(Qe,Ye,mt)}}var Gt=null,ln={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(Qe){return Qe}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},vt=["update:modelValue","change"].concat(ae([].concat(ae(it.manageAndEmit),ae(it.emit)).map(function(Ye){return Ye.toLowerCase()}))),Rn=Object(q.defineComponent)({name:"draggable",inheritAttrs:!1,props:ln,emits:vt,data:function(){return{error:!1}},render:function(){try{this.error=!1;var Qe=this.$slots,Re=this.$attrs,mt=this.tag,St=this.componentData,Yt=this.realList,an=this.getKey,Pt=pt({$slots:Qe,tag:mt,realList:Yt,getKey:an});this.componentStructure=Pt;var qn=Ke({$attrs:Re,componentData:St});return Pt.render(q.h,qn)}catch(Cn){return this.error=!0,Object(q.h)("pre",{style:{color:"red"}},Cn.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&z.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var Qe=this;if(!this.error){var Re=this.$attrs,mt=this.$el,St=this.componentStructure;St.updated();var Yt=ut({$attrs:Re,callBackBuilder:{manageAndEmit:function(qn){return Dt.call(Qe,qn)},emit:function(qn){return ht.bind(Qe,qn)},manage:function(qn){return zt.call(Qe,qn)}}}),an=mt.nodeType===1?mt:mt.parentElement;this._sortable=new te.a(an,Yt),this.targetDomElement=an,an.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var Qe=this.list;return Qe||this.modelValue},getKey:function(){var Qe=this.itemKey;return typeof Qe=="function"?Qe:function(Re){return Re[Qe]}}},watch:{$attrs:{handler:function(Qe){var Re=this._sortable;Re&&Ot(Qe).forEach(function(mt){var St=U(mt,2),Yt=St[0],an=St[1];Re.option(Yt,an)})},deep:!0}},methods:{getUnderlyingVm:function(Qe){return this.componentStructure.getUnderlyingVm(Qe)||null},getUnderlyingPotencialDraggableComponent:function(Qe){return Qe.__draggable_component__},emitChanges:function(Qe){var Re=this;Object(q.nextTick)(function(){return Re.$emit("change",Qe)})},alterList:function(Qe){if(this.list){Qe(this.list);return}var Re=ae(this.modelValue);Qe(Re),this.$emit("update:modelValue",Re)},spliceList:function(){var Qe=arguments,Re=function(St){return St.splice.apply(St,ae(Qe))};this.alterList(Re)},updatePosition:function(Qe,Re){var mt=function(Yt){return Yt.splice(Re,0,Yt.splice(Qe,1)[0])};this.alterList(mt)},getRelatedContextFromMoveEvent:function(Qe){var Re=Qe.to,mt=Qe.related,St=this.getUnderlyingPotencialDraggableComponent(Re);if(!St)return{component:St};var Yt=St.realList,an={list:Yt,component:St};if(Re!==mt&&Yt){var Pt=St.getUnderlyingVm(mt)||{};return C(C({},Pt),an)}return an},getVmIndexFromDomIndex:function(Qe){return this.componentStructure.getVmIndexFromDomIndex(Qe,this.targetDomElement)},onDragStart:function(Qe){this.context=this.getUnderlyingVm(Qe.item),Qe.item._underlying_vm_=this.clone(this.context.element),Gt=Qe.item},onDragAdd:function(Qe){var Re=Qe.item._underlying_vm_;if(Re!==void 0){G(Qe.item);var mt=this.getVmIndexFromDomIndex(Qe.newIndex);this.spliceList(mt,0,Re);var St={element:Re,newIndex:mt};this.emitChanges({added:St})}},onDragRemove:function(Qe){if(j(this.$el,Qe.item,Qe.oldIndex),Qe.pullMode==="clone"){G(Qe.clone);return}var Re=this.context,mt=Re.index,St=Re.element;this.spliceList(mt,1);var Yt={element:St,oldIndex:mt};this.emitChanges({removed:Yt})},onDragUpdate:function(Qe){G(Qe.item),j(Qe.from,Qe.item,Qe.oldIndex);var Re=this.context.index,mt=this.getVmIndexFromDomIndex(Qe.newIndex);this.updatePosition(Re,mt);var St={element:this.context.element,oldIndex:Re,newIndex:mt};this.emitChanges({moved:St})},computeFutureIndex:function(Qe,Re){if(!Qe.element)return 0;var mt=ae(Re.to.children).filter(function(Pt){return Pt.style.display!=="none"}),St=mt.indexOf(Re.related),Yt=Qe.component.getVmIndexFromDomIndex(St),an=mt.indexOf(Gt)!==-1;return an||!Re.willInsertAfter?Yt:Yt+1},onDragMove:function(Qe,Re){var mt=this.move,St=this.realList;if(!mt||!St)return!0;var Yt=this.getRelatedContextFromMoveEvent(Qe),an=this.computeFutureIndex(Yt,Qe),Pt=C(C({},this.context),{},{futureIndex:an}),qn=C(C({},Qe),{},{relatedContext:Yt,draggedContext:Pt});return mt(qn,Re)},onDragEnd:function(){Gt=null}}}),Ln=Rn;u.default=Ln},fb6a:function(s,u,d){var l=d("23e7"),m=d("861d"),g=d("e8b5"),x=d("23cb"),w=d("50c4"),C=d("fc6a"),I=d("8418"),M=d("b622"),L=d("1dde"),$=d("ae40"),F=L("slice"),U=$("slice",{ACCESSORS:!0,0:0,1:2}),ee=M("species"),V=[].slice,Q=Math.max;l({target:"Array",proto:!0,forced:!F||!U},{slice:function(be,te){var G=C(this),j=w(G.length),z=x(be,j),ie=x(te===void 0?j:te,j),X,ne,Ee;if(g(G)&&(X=G.constructor,typeof X=="function"&&(X===Array||g(X.prototype))?X=void 0:m(X)&&(X=X[ee],X===null&&(X=void 0)),X===Array||X===void 0))return V.call(G,z,ie);for(ne=new(X===void 0?Array:X)(Q(ie-z,0)),Ee=0;z<ie;z++,Ee++)z in G&&I(ne,Ee,G[z]);return ne.length=Ee,ne}})},fc6a:function(s,u,d){var l=d("44ad"),m=d("1d80");s.exports=function(g){return l(m(g))}},fdbc:function(s,u){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(s,u,d){var l=d("4930");s.exports=l&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(VP);var Eie=VP.exports;const tD=IA(Eie),Cie={class:"drawer-items-grid"},Iie={class:"item-container relative rounded flex items-start group shadow-sm"},Aie={key:0,class:"drag-handle cursor-move h-full py-1 rounded-l border border-r-0 group-hover:bg-blue-600 group-hover:border-blue-600 group-hover:text-blue-100 transition-colors"},Mie=lt({__name:"DrawerItemsGrid",props:{totalResults:{default:void 0},matches:{},status:{},drawerId:{default:void 0},isDraggable:{type:Boolean,default:!1}},emits:["loadMore","dragEnd"],setup(e,{emit:t}){const i=e,r=Fe(i.matches);fn(()=>i.matches,d=>{r.value=d});const{arrivedState:s}=P_(window,{offset:{bottom:100}});fn(s,d=>{d.bottom&&u.value&&i.status!=="fetching"&&t("loadMore")},{immediate:!0});const u=Oe(()=>(i.totalResults??1/0)>i.matches.length);return(d,l)=>(H(),me("div",Cie,[ye(he(tD),{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=m=>r.value=m),class:"grid grid-cols-auto-md gap-4",itemKey:m=>m.excerptId?`${m.objectId}-${m.excerptId}`:`${m.objectId}`,handle:".drag-handle",ghostClass:"draggable-ghost",dragClass:"is-dragging",disabled:!d.isDraggable,onEnd:l[1]||(l[1]=m=>t("dragEnd",r.value))},{item:Me(({element:m})=>[ue("div",Iie,[d.isDraggable?(H(),me("div",Aie,[ye(he(uM))])):ot("",!0),ye(Wv,{id:`object-${m.objectId}`,searchMatch:m,showDetails:!1,drawerId:d.drawerId,class:"search-result-card h-full flex-1 !rounded-l-none",mediaCardClass:["group-hover:bg-blue-50 group-hover:border-blue-600 group-hover:!text-blue-600",d.isDraggable?"rounded-l-none !border-l-0 shadow-none":""]},null,8,["id","searchMatch","drawerId","mediaCardClass"])])]),_:1},8,["modelValue","itemKey","disabled"])]))}});const kie=sn(Mie,[["__scopeId","data-v-168550da"]]),Pie={class:"item-container relative rounded flex group shadow-sm"},Die={key:0,class:"drag-handle cursor-move py-1 rounded-l group-hover:bg-blue-600 group-hover:border-blue-600 group-hover:text-blue-100 transition-colors bg-white"},Lie=lt({__name:"DrawerItemsList",props:{totalResults:{default:void 0},matches:{},status:{},isDraggable:{type:Boolean,default:!1}},emits:["loadMore","dragEnd"],setup(e,{emit:t}){const i=e,r=Fe(i.matches);fn(()=>i.matches,d=>{r.value=d});const{arrivedState:s}=P_(window,{offset:{bottom:100}});fn(s,d=>{d.bottom&&u.value&&i.status!=="fetching"&&t("loadMore")},{immediate:!0});const u=Oe(()=>(i.totalResults??1/0)>i.matches.length);return(d,l)=>(H(),me("div",null,[ye(he(tD),{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=m=>r.value=m),class:"flex flex-col gap-2",itemKey:"objectId",handle:".drag-handle",ghostClass:"draggable-ghost",dragClass:"is-dragging",disabled:!d.isDraggable,onEnd:l[1]||(l[1]=m=>t("dragEnd",r.value))},{item:Me(({element:m})=>[ue("div",Pie,[d.isDraggable?(H(),me("div",Die,[ye(he(uM))])):ot("",!0),(H(),We(nP,{id:`object-${m.objectId}`,key:m.objectId,searchMatch:m,showDetails:!1,class:Dn(["search-result-row flex-1",{"rounded-l-none border-l-none":d.isDraggable}])},null,8,["id","searchMatch","class"]))])]),_:1},8,["modelValue","disabled"])]))}});const Oie=sn(Lie,[["__scopeId","data-v-22d39cd1"]]),Rie={class:"px-4"},Fie={class:"my-8 flex flex-wrap items-center"},$ie={class:"text-4xl font-bold flex-grow"},zie={key:0,class:"flex items-center gap-2 bg-white p-1 rounded-md"},Bie=ue("span",{class:"sr-only"},"Edit Permissions",-1),Nie=ue("span",{class:"sr-only"},"Download Drawer",-1),Uie={class:"bg-transparent-black-50 rounded-md mb-4 sm:flex justify-between items-center p-2"},jie={key:1,class:"flex items-center gap-2 text-neutral-500 text-sm"},Vie={class:"flex items-baseline gap-2"},Hie=ue("label",{for:"location",class:"sr-only"},"Sort",-1),Gie=["value"],Wie=["value"],qie=lt({__name:"DrawerViewPage",props:{drawerId:{},resultsView:{default:"grid"}},setup(e){const t=e,i=ci.instance.base.url,r=Ai(),u=(te=>tx.includes(te))(t.resultsView)?t.resultsView:"grid",d=Fe(u),l=Fe("idle"),m=Pa(),g=$o(),x=Eu(),w=Oe(()=>m.getDrawerById(t.drawerId)),C={[_s.TITLE]:"Default Title",[_s.CUSTOM]:"Custom"},I=Fe(_s.TITLE),M=Oe(()=>{var te;return(te=m.drawerRecords[t.drawerId])==null?void 0:te.title}),L=te=>tx.includes(te.id);function $(te){if(!L(te))throw new Error(`Invalid tab id: ${te.id}`);d.value=te.id,g.replace({query:{...x.query,resultsView:te.id}})}function F(te){m.setDrawerItems(t.drawerId,te)}function U(){console.log("load more")}function ee(){console.log("load all")}const V=te=>typeof te=="string"&&te in C;function Q(te){const G=te.target.value;if(!V(G))throw new Error(`Invalid sort option: ${G}`);I.value=G,ae(G),m.setDrawerSortBy(t.drawerId,G)}function ae(te){g.replace({query:{...x.query,sort:te}})}const be=sm();return Bn(async()=>{l.value="fetching";const te=await m.refreshDrawer(t.drawerId);if(!(te!=null&&te.contents))return l.value="error",be.setError(new Error("Couldn't find drawer content."));if(!x.query.sort||!V(x.query.sort)){I.value=te.contents.sortBy??_s.TITLE,ae(I.value),l.value="success";return}if(x.query.sort===te.contents.sortBy){I.value=x.query.sort,l.value="success";return}I.value=x.query.sort,await m.setDrawerSortBy(t.drawerId,x.query.sort),l.value="success"}),(te,G)=>(H(),We(oo,{class:"drawer-view-page"},{default:Me(()=>{var j;return[ue("div",Rie,[ye(as,{to:"/drawers/listDrawers",class:"flex items-center gap-1 mb-4 hover:no-underline mt-8"},{default:Me(()=>[ye(he(Cu),{class:"transform rotate-180 h-4 w-4"}),Mt(" Back to Drawers ")]),_:1}),ue("header",Fie,[ue("h2",$ie,xt(M.value),1),(j=he(r).currentUser)!=null&&j.canManageDrawers?(H(),me("div",zie,[ye(gc,{href:`${he(i)}/permissions/edit/drawer/${te.drawerId}`,title:"Edit Permissions"},{default:Me(()=>[ye(he(U8),{class:"!w-5 !h-5"}),Bie]),_:1},8,["href"]),ye(gc,{title:"Download Drawer",to:`/drawers/downloadDrawer/${te.drawerId}`},{default:Me(()=>[ye(he(E1),{class:"!w-5 !h-5"}),Nie]),_:1},8,["to"])])):ot("",!0)]),w.value?(H(),We(tP,{key:0,labelsClass:"drawer-view-page__tabs sticky top-14 z-20  -mx-4 px-4 border-b border-neutral-200 pt-4",activeTabId:d.value,onTabChange:$},{default:Me(()=>[ue("div",Uie,[ue("div",null,[w.value.contents?(H(),We(Tx,{key:0,class:"mb-2 sm:mb-0",total:w.value.contents.totalResults,fetchStatus:l.value,showingCount:w.value.contents.matches.length,onLoadMore:U,onLoadAll:ee},null,8,["total","fetchStatus","showingCount"])):(H(),me("div",jie,[ye(zo,{class:"animate-spin h-5 w-5"}),Mt(" Loading... ")]))]),ue("div",Vie,[Hie,ue("select",{id:"sort",name:"sort",class:"block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-neutral-900 ring-1 ring-inset ring-neutral-300 focus:ring-2 focus:ring-indigo-600 text-sm sm:leading-6 max-w-full bg-transparent-white-800",value:I.value,onChange:Q},[(H(),me(Nt,null,Fn(C,(z,ie)=>ue("option",{key:ie,value:ie},xt(z),9,Wie)),64))],40,Gie)])]),ye(So,{id:"grid",label:"Grid"},{default:Me(()=>[ye(Er,{name:"fade"},{default:Me(()=>{var z;return[w.value.contents?(H(),We(kie,{key:0,totalResults:w.value.contents.totalResults,matches:w.value.contents.matches,status:l.value,drawerId:te.drawerId,isDraggable:I.value===he(_s).CUSTOM&&((z=he(r).currentUser)==null?void 0:z.canManageDrawers),onDragEnd:F},null,8,["totalResults","matches","status","drawerId","isDraggable"])):ot("",!0)]}),_:1})]),_:1}),ye(So,{id:"list",label:"List"},{default:Me(()=>[ye(Er,{name:"fade"},{default:Me(()=>{var z;return[w.value.contents?(H(),We(Oie,{key:0,totalResults:w.value.contents.totalResults,matches:w.value.contents.matches,status:l.value,drawerId:te.drawerId,isDraggable:I.value===he(_s).CUSTOM&&((z=he(r).currentUser)==null?void 0:z.canManageDrawers),onDragEnd:F},null,8,["totalResults","matches","status","drawerId","isDraggable"])):ot("",!0)]}),_:1})]),_:1}),ye(So,{id:"timeline",label:"Timeline"},{default:Me(()=>[ye(Er,{name:"fade"},{default:Me(()=>[w.value.contents?(H(),We(IP,{key:0,totalResults:w.value.contents.totalResults,matches:w.value.contents.matches,status:l.value},null,8,["totalResults","matches","status"])):ot("",!0)]),_:1})]),_:1}),ye(So,{id:"map",label:"Map"},{default:Me(()=>[ye(Er,{name:"fade"},{default:Me(()=>[w.value.contents?(H(),We(AP,{key:0,totalResults:w.value.contents.totalResults,matches:w.value.contents.matches,status:l.value},null,8,["totalResults","matches","status"])):ot("",!0)]),_:1})]),_:1}),ye(So,{id:"gallery",label:"Gallery"},{default:Me(()=>[ye(Er,{name:"fade"},{default:Me(()=>[w.value.contents?(H(),We(UP,{key:0,totalResults:w.value.contents.totalResults,matches:w.value.contents.matches,status:l.value},null,8,["totalResults","matches","status"])):ot("",!0)]),_:1})]),_:1})]),_:1},8,["activeTabId"])):ot("",!0)])]}),_:1}))}});const nw=e=>(ro("data-v-92e8dc65"),e=e(),so(),e),Zie={class:"max-w-lg mx-auto mt-12"},Kie=nw(()=>ue("h1",{class:"text-4xl font-bold mb-8"},"Add Asset",-1)),Xie=["action"],Yie=nw(()=>ue("label",{for:"templateId"},"Choose a template ",-1)),Jie=nw(()=>ue("option",{value:"",disabled:"",selected:""},"--",-1)),Qie=["value"],ere=lt({__name:"CreateAssetPage",setup(e){const t=ci.instance.base.url,i=Ai(),r=Fe("");return(s,u)=>(H(),We(oo,null,{default:Me(()=>[ue("div",Zie,[Kie,ue("form",{action:`${he(t)}/assetManager/addAsset`,method:"POST",class:"flex flex-col gap-4"},[Yie,bs(ue("select",{id:"templateId","onUpdate:modelValue":u[0]||(u[0]=d=>r.value=d),name:"templateId",class:"rounded-md",required:""},[Jie,(H(!0),me(Nt,null,Fn(he(i).instance.templates,d=>(H(),me("option",{key:d.id,value:d.id},xt(d.name),9,Qie))),128))],512),[[wh,r.value]]),ye(si,{type:"submit",variant:"primary",class:"block my-4 w-full",disabled:!r.value},{default:Me(()=>[Mt("Add Asset")]),_:1},8,["disabled"])],8,Xie)])]),_:1}))}});const tre=sn(ere,[["__scopeId","data-v-92e8dc65"]]),nre={class:"max-w-md mx-auto py-8 px-4 text-center"},ire=ue("h1",{class:"text-2xl my-8"},"Your Download is Ready",-1),rre={class:"flex flex-col items-center justify-center"},sre=ue("h1",{class:"text-3xl my-6"},"Working on it!",-1),are=ue("p",null," We're getting your drawer ready. We'll send you an email when your link is all set. ",-1),ore=lt({__name:"DownloadDrawerPage",props:{drawerId:{}},setup(e){const t=e,i=Fe(!1),r=Pa(),s=Fe(null),u=Ai(),d=$o();return Bn(async()=>{s.value=await r.downloadDrawer(t.drawerId),i.value=!0}),RB(()=>{var l;if(!((l=u.currentUser)!=null&&l.canManageDrawers)){d.push(`/drawers/viewDrawer/${t.drawerId}`);return}}),(l,m)=>(H(),We(oo,null,{default:Me(()=>{var g;return[ue("div",nre,[i.value?((g=s.value)==null?void 0:g.status)==="completed"?(H(),me(Nt,{key:1},[ire,ue("p",rre,[ye(si,{variant:"primary",href:s.value.url},{default:Me(()=>[ye(he(E1),{class:"!w-5 !h-5 mr-2"}),Mt(" Download ")]),_:1},8,["href"]),ye(si,{variant:"tertiary",to:`/drawers/viewDrawer/${l.drawerId}`,class:"my-6"},{default:Me(()=>[Mt("  Back to Drawer ")]),_:1},8,["to"])])],64)):(H(),me(Nt,{key:2},[sre,are,ye(si,{to:`/drawers/viewDrawer/${l.drawerId}`,class:"my-6"},{default:Me(()=>[Mt("  Back to Drawer ")]),_:1},8,["to"])],64)):(H(),We(he(zo),{key:0,class:"!w-5 !h-5 animate-spin"}))])]}),_:1}))}}),lre=lt({__name:"LogoutPage",setup(e){const t=Ai(),i=Pa(),r=$o();return Bn(async()=>{await Wn.logout(),Wn.clearCache(),jP(),t.init(),i.init(),r.push("/")}),()=>{}}}),cre={key:0,class:"p-4 lg:p-8 mx-auto flex-1 w-full max-w-screen-xl"},ure={class:"flex justify-between items-baseline my-4 flex-wrap"},dre={class:"text-4xl font-bold flex-1"},hre={class:"flex justify-between p-1 items-center flex-wrap"},fre={class:"inline-flex gap-2 items-center"},pre=ue("span",{class:"font-bold text-xs uppercase"},"Time",-1),mre={class:"text-sm"},gre=lt({__name:"ExcerptViewPage",props:{excerptId:{}},setup(e){const t=e,i=Fe(null);return Bn(async()=>{i.value=await Wn.getExcerpt(t.excerptId)}),(r,s)=>(H(),We(Ck,null,{default:Me(()=>[ye(Er,{name:"fade"},{default:Me(()=>[i.value?(H(),me("div",cre,[ue("header",ure,[ue("h1",dre,xt(i.value.label||`Excerpt ${i.value.id}`),1),ye(si,{variant:"tertiary",to:`/asset/viewAsset/${i.value.assetId}`},{default:Me(()=>[Mt("View Asset")]),_:1},8,["to"])]),ye(Kk,{fileObjectId:i.value.fileObjectId,startTime:i.value.startTime,endTime:i.value.endTime},null,8,["fileObjectId","startTime","endTime"]),ue("div",hre,[ue("div",fre,[pre,ue("span",mre,xt(he(Gl)(i.value.startTime))+" - "+xt(he(Gl)(i.value.endTime)),1)]),ue("div",null,[ye(Gk,{fileObjectId:i.value.fileObjectId},null,8,["fileObjectId"]),ye(Wk,{assetId:i.value.assetId,fileObjectId:i.value.fileObjectId},null,8,["assetId","fileObjectId"]),ye(qk,{fileObjectId:i.value.fileObjectId},null,8,["fileObjectId"])])])])):ot("",!0)]),_:1})]),_:1}))}});function Ld(e){return typeof e=="string"?Number.parseInt(e):null}const iw=jB({history:rB(ci.instance.base.path),scrollBehavior(e,t,i){if(i)return i;const r=e.hash?document.getElementById(e.hash.substring(1)):null;return r?{el:r,behavior:"smooth",top:100}:{top:0}},routes:[{name:"home",path:"/",component:zG},{name:"asset",path:"/asset/viewAsset/:assetId",component:BX,props:e=>{var t;return{assetId:e.params.assetId,objectId:(t=e.hash)==null?void 0:t.substring(1)}}},{name:"viewExcerpt",path:"/asset/viewExcerpt/:excerptId",component:gre,props:e=>({excerptId:Ld(e.params.excerptId)})},{name:"addAsset",path:"/asset/create",component:tre},{name:"listCollections",path:"/search/listCollections",alias:"/collections",component:KX},{name:"browseCollection",path:"/collections/browseCollection/:collectionId",alias:"/collections/:collectionId",component:XX,props:e=>({collectionId:Ld(e.params.collectionId)})},{name:"allDrawersPage",path:"/drawers/listDrawers",component:Nne},{name:"viewDrawerPage",path:"/drawers/viewDrawer/:drawerId",component:qie,props:e=>({drawerId:Ld(e.params.drawerId),resultsView:e.query.resultsView??null})},{name:"downloadDrawerPage",path:"/drawers/downloadDrawer/:drawerId",component:ore,props:e=>({drawerId:Ld(e.params.drawerId)})},{name:"search",path:"/search/s/:searchId",component:sne,props:e=>({searchId:e.params.searchId,objectId:e.query.objectId??null,resultsView:e.query.resultsView??null})},{name:"localLogin",path:"/loginManager/localLogin",component:_ne,props:e=>({redirectURL:e.query.redirect??null})},{name:"logout",path:"/logout",component:lre},{name:"staticContentPage",path:"/page/view/:pageId",component:Sne,props:e=>({pageId:Ld(e.params.pageId)})},{name:"error",path:"/error/:errorCode",component:Q2,props:e=>({errorCode:Ld(e.params.errorCode)})},{name:"catchall",path:"/:pathMatch(.*)",component:Q2,props:()=>({errorCode:404})}]});iw.onError(e=>{sm().setError(e)});iw.beforeResolve((e,t,i)=>{sm().clearError();const s=e.path.replace(/\/\//g,"/");s!==e.path&&i(s),i()});const vre=GI(kU),nD=K3();nD.use(PU);vre.use(iw).use(nD).mount("#app");export{P9 as M,z9 as _,Wi as a,H as b,me as c,lt as d,Mn as e,wi as i,Bn as o,Fe as r};
//# sourceMappingURL=main-bf072d50.js.map
