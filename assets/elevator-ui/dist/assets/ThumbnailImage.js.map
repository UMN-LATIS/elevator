{"version":3,"file":"ThumbnailImage.js","sources":["../../src/icons/ChevronLeftIcon.vue","../../src/icons/ChevronRightIcon.vue","../../src/components/PrevNextSearchResultNav/PrevNextSearchResultNav.vue"],"sourcesContent":["<template>\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    stroke-width=\"1.5\"\n    stroke=\"currentColor\"\n    class=\"w-5 h-5\"\n  >\n    <path\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n      d=\"M15.75 19.5L8.25 12l7.5-7.5\"\n    />\n  </svg>\n</template>\n<script setup lang=\"ts\"></script>\n<style scoped></style>\n","<template>\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    stroke-width=\"1.5\"\n    stroke=\"currentColor\"\n    class=\"w-5 h-5\"\n  >\n    <path\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n      d=\"M8.25 4.5l7.5 7.5-7.5 7.5\"\n    />\n  </svg>\n</template>\n<script setup lang=\"ts\"></script>\n<style scoped></style>\n","<template>\n  <nav\n    v-if=\"currentAssetIndex !== null\"\n    class=\"justify-between py-2 px-4 items-center gap-4 grid grid-cols-3\"\n  >\n    <div class=\"flex justify-start\">\n      <Button\n        v-if=\"previousAssetId\"\n        variant=\"tertiary\"\n        :to=\"getAssetUrl(previousAssetId)\"\n      >\n        <ChevronLeftIcon class=\"h-3 w-3\" />\n        Prev\n      </Button>\n    </div>\n\n    <div class=\"flex justify-center text-xs text-gray-500 leading-none p-2\">\n      <Button\n        :to=\"`/search/s/${searchStore.searchId}#object-${assetStore.activeAssetId}`\"\n        variant=\"tertiary\"\n      >\n        {{ currentAssetIndex + 1 }} of {{ searchStore.totalResults }}\n      </Button>\n    </div>\n\n    <div class=\"flex justify-end\">\n      <Button\n        v-if=\"nextAssetId\"\n        variant=\"tertiary\"\n        :to=\"getAssetUrl(nextAssetId)\"\n        class=\"!ml-0\"\n      >\n        Next\n        <ChevronRightIcon class=\"h-3 w-3\" />\n      </Button>\n    </div>\n  </nav>\n</template>\n<script setup lang=\"ts\">\nimport { computed, watch } from \"vue\";\nimport Button from \"@/components/Button/Button.vue\";\nimport { ChevronRightIcon, ChevronLeftIcon } from \"@/icons\";\nimport { useAssetStore } from \"@/stores/assetStore\";\nimport { useSearchStore } from \"@/stores/searchStore\";\nimport { getAssetUrl } from \"@/helpers/displayUtils\";\n\nconst assetStore = useAssetStore();\nconst searchStore = useSearchStore();\nconst currentAssetIndex = computed((): number | null => {\n  const { activeAssetId } = assetStore;\n  if (!activeAssetId) return null;\n  const index = searchStore.matches.findIndex(\n    (match) => match.objectId === activeAssetId\n  );\n  return index === -1 ? null : index;\n});\n\nconst LOAD_MORE_THRESHOLD = 5;\n\nfunction shouldLoadMoreResults() {\n  return (\n    currentAssetIndex.value !== null &&\n    searchStore.hasMoreResults &&\n    searchStore.matches.length - currentAssetIndex.value <= LOAD_MORE_THRESHOLD\n  );\n}\n\nwatch([() => searchStore.matches, currentAssetIndex], () => {\n  if (shouldLoadMoreResults()) {\n    searchStore.loadMore();\n  }\n});\n\nconst previousAssetId = computed(() => {\n  const currentIndex = currentAssetIndex.value;\n  if (currentIndex === null || currentIndex <= 0) {\n    return null;\n  }\n  return searchStore.matches[currentIndex - 1].objectId;\n});\n\nconst nextAssetId = computed(() => {\n  const currentIndex = currentAssetIndex.value;\n  if (\n    currentIndex === null || // no asset is active\n    currentIndex + 1 >= searchStore.matches.length || // end of results\n    searchStore.status == \"fetching\" // still loading more results\n  ) {\n    return null;\n  }\n\n  return searchStore.matches[currentIndex + 1]?.objectId ?? null;\n});\n</script>\n<style scoped></style>\n"],"names":["_hoisted_1","_hoisted_2","_createElementVNode","_hoisted_3","_sfc_render","_ctx","_cache","assetStore","useAssetStore","searchStore","useSearchStore","currentAssetIndex","computed","activeAssetId","index","match","LOAD_MORE_THRESHOLD","shouldLoadMoreResults","watch","previousAssetId","currentIndex","nextAssetId","_b","_a"],"mappings":"qSAEIA,EAAkC,CAClC,MAAW,6BACX,KAAA,OACA,QAAA,YACA,eAAqB,MACrB,OAAe,gCAGbC,EAAsBC,EAAA,OAAA,CACtB,yBACA,kBAA+B,kDAC/BC,EAAA,IAZJ,SAAAC,EAAAC,EAAAC,EAAA,sICCEN,EAAkC,CAClC,MAAW,6BACX,KAAA,OACA,QAAA,YACA,eAAqB,MACrB,OAAe,gCAGbC,EAAsBC,EAAA,OAAA,CACtB,yBACA,kBAA6B,gDAC7BC,EAAA,IAZJ,SAAAC,EAAAC,EAAAC,EAAA,gaC6CF,MAAMC,EAAaC,IACbC,EAAcC,IACdC,EAAoBC,EAAS,IAAqB,CAChD,KAAA,CAAE,cAAAC,CAAkB,EAAAN,EAC1B,GAAI,CAACM,EAAsB,OAAA,KACrB,MAAAC,EAAQL,EAAY,QAAQ,UAC/BM,GAAUA,EAAM,WAAaF,CAAA,EAEzB,OAAAC,IAAU,GAAK,KAAOA,CAAA,CAC9B,EAEKE,EAAsB,EAE5B,SAASC,GAAwB,CAE7B,OAAAN,EAAkB,QAAU,MAC5BF,EAAY,gBACZA,EAAY,QAAQ,OAASE,EAAkB,OAASK,CAE5D,CAEAE,EAAM,CAAC,IAAMT,EAAY,QAASE,CAAiB,EAAG,IAAM,CACtDM,KACFR,EAAY,SAAS,CACvB,CACD,EAEK,MAAAU,EAAkBP,EAAS,IAAM,CACrC,MAAMQ,EAAeT,EAAkB,MACnC,OAAAS,IAAiB,MAAQA,GAAgB,EACpC,KAEFX,EAAY,QAAQW,EAAe,GAAG,QAAA,CAC9C,EAEKC,EAAcT,EAAS,IAAM,SACjC,MAAMQ,EAAeT,EAAkB,MAErC,OAAAS,IAAiB,MACjBA,EAAe,GAAKX,EAAY,QAAQ,QACxCA,EAAY,QAAU,WAEf,MAGFa,GAAAC,EAAAd,EAAY,QAAQW,EAAe,KAAnC,YAAAG,EAAuC,WAAvC,KAAAD,EAAmD,IAAA,CAC3D"}