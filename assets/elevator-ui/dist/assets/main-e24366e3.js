var jO=Object.defineProperty;var VO=(e,t,i)=>t in e?jO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var Wg=(e,t,i)=>(VO(e,typeof t!="symbol"?t+"":t,i),i);/**
* @vue/shared v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function P_(e,t){const i=new Set(e.split(","));return t?r=>i.has(r.toLowerCase()):r=>i.has(r)}const Mi={},ah=[],Ds=()=>{},UO=()=>!1,dm=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),n1=e=>e.startsWith("onUpdate:"),ir=Object.assign,i1=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},HO=Object.prototype.hasOwnProperty,Si=(e,t)=>HO.call(e,t),kn=Array.isArray,oh=e=>Fh(e)==="[object Map]",Hu=e=>Fh(e)==="[object Set]",wT=e=>Fh(e)==="[object Date]",GO=e=>Fh(e)==="[object RegExp]",Bn=e=>typeof e=="function",rr=e=>typeof e=="string",Pc=e=>typeof e=="symbol",Ri=e=>e!==null&&typeof e=="object",r1=e=>(Ri(e)||Bn(e))&&Bn(e.then)&&Bn(e.catch),QC=Object.prototype.toString,Fh=e=>QC.call(e),WO=e=>Fh(e).slice(8,-1),eI=e=>Fh(e)==="[object Object]",s1=e=>rr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Tp=P_(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),D_=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},qO=/-(\w)/g,Ls=D_(e=>e.replace(qO,(t,i)=>i?i.toUpperCase():"")),ZO=/\B([A-Z])/g,ha=D_(e=>e.replace(ZO,"-$1").toLowerCase()),hm=D_(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ep=D_(e=>e?`on${hm(e)}`:""),uo=(e,t)=>!Object.is(e,t),lh=(e,t)=>{for(let i=0;i<e.length;i++)e[i](t)},qv=(e,t,i)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:i})},Vp=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Zv=e=>{const t=rr(e)?Number(e):NaN;return isNaN(t)?e:t};let ST;const tI=()=>ST||(ST=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),KO="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error",XO=P_(KO);function Gu(e){if(kn(e)){const t={};for(let i=0;i<e.length;i++){const r=e[i],s=rr(r)?eR(r):Gu(r);if(s)for(const c in s)t[c]=s[c]}return t}else if(rr(e)||Ri(e))return e}const YO=/;(?![^(]*\))/g,JO=/:([^]+)/,QO=/\/\*[^]*?\*\//g;function eR(e){const t={};return e.replace(QO,"").split(YO).forEach(i=>{if(i){const r=i.split(JO);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Mn(e){let t="";if(rr(e))t=e;else if(kn(e))for(let i=0;i<e.length;i++){const r=Mn(e[i]);r&&(t+=r+" ")}else if(Ri(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}function tR(e){if(!e)return null;let{class:t,style:i}=e;return t&&!rr(t)&&(e.class=Mn(t)),i&&(e.style=Gu(i)),e}const nR="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",iR=P_(nR);function nI(e){return!!e||e===""}function rR(e,t){if(e.length!==t.length)return!1;let i=!0;for(let r=0;i&&r<e.length;r++)i=El(e[r],t[r]);return i}function El(e,t){if(e===t)return!0;let i=wT(e),r=wT(t);if(i||r)return i&&r?e.getTime()===t.getTime():!1;if(i=Pc(e),r=Pc(t),i||r)return e===t;if(i=kn(e),r=kn(t),i||r)return i&&r?rR(e,t):!1;if(i=Ri(e),r=Ri(t),i||r){if(!i||!r)return!1;const s=Object.keys(e).length,c=Object.keys(t).length;if(s!==c)return!1;for(const d in e){const l=e.hasOwnProperty(d),m=t.hasOwnProperty(d);if(l&&!m||!l&&m||!El(e[d],t[d]))return!1}}return String(e)===String(t)}function L_(e,t){return e.findIndex(i=>El(i,t))}const xt=e=>rr(e)?e:e==null?"":kn(e)||Ri(e)&&(e.toString===QC||!Bn(e.toString))?JSON.stringify(e,iI,2):String(e),iI=(e,t)=>t&&t.__v_isRef?iI(e,t.value):oh(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[r,s],c)=>(i[P0(r,c)+" =>"]=s,i),{})}:Hu(t)?{[`Set(${t.size})`]:[...t.values()].map(i=>P0(i))}:Pc(t)?P0(t):Ri(t)&&!kn(t)&&!eI(t)?String(t):t,P0=(e,t="")=>{var i;return Pc(e)?`Symbol(${(i=e.description)!=null?i:t})`:e};/**
* @vue/reactivity v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ca;class a1{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ca,!t&&ca&&(this.index=(ca.scopes||(ca.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const i=ca;try{return ca=this,t()}finally{ca=i}}}on(){ca=this}off(){ca=this.parent}stop(t){if(this._active){let i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].stop();for(i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.scopes)for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function o1(e){return new a1(e)}function rI(e,t=ca){t&&t.active&&t.effects.push(e)}function fm(){return ca}function pm(e){ca&&ca.cleanups.push(e)}let Au;class gh{constructor(t,i,r,s){this.fn=t,this.trigger=i,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=2,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,rI(this,s)}get dirty(){if(this._dirtyLevel===1){Wu();for(let t=0;t<this._depsLength;t++){const i=this.deps[t];if(i.computed&&(sR(i.computed),this._dirtyLevel>=2))break}this._dirtyLevel<2&&(this._dirtyLevel=0),qu()}return this._dirtyLevel>=2}set dirty(t){this._dirtyLevel=t?2:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=Cc,i=Au;try{return Cc=!0,Au=this,this._runnings++,TT(this),this.fn()}finally{ET(this),this._runnings--,Au=i,Cc=t}}stop(){var t;this.active&&(TT(this),ET(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function sR(e){return e.value}function TT(e){e._trackId++,e._depsLength=0}function ET(e){if(e.deps&&e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)sI(e.deps[t],e);e.deps.length=e._depsLength}}function sI(e,t){const i=e.get(t);i!==void 0&&t._trackId!==i&&(e.delete(t),e.size===0&&e.cleanup())}function aR(e,t){e.effect instanceof gh&&(e=e.effect.fn);const i=new gh(e,Ds,()=>{i.dirty&&i.run()});t&&(ir(i,t),t.scope&&rI(i,t.scope)),(!t||!t.lazy)&&i.run();const r=i.run.bind(i);return r.effect=i,r}function oR(e){e.effect.stop()}let Cc=!0,Nb=0;const aI=[];function Wu(){aI.push(Cc),Cc=!1}function qu(){const e=aI.pop();Cc=e===void 0?!0:e}function l1(){Nb++}function c1(){for(Nb--;!Nb&&Bb.length;)Bb.shift()()}function oI(e,t,i){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const r=e.deps[e._depsLength];r!==t?(r&&sI(r,e),e.deps[e._depsLength++]=t):e._depsLength++}}const Bb=[];function lI(e,t,i){l1();for(const r of e.keys())if(r._dirtyLevel<t&&e.get(r)===r._trackId){const s=r._dirtyLevel;r._dirtyLevel=t,s===0&&(r._shouldSchedule=!0,r.trigger())}cI(e),c1()}function cI(e){for(const t of e.keys())t.scheduler&&t._shouldSchedule&&(!t._runnings||t.allowRecurse)&&e.get(t)===t._trackId&&(t._shouldSchedule=!1,Bb.push(t.scheduler))}const uI=(e,t)=>{const i=new Map;return i.cleanup=e,i.computed=t,i},Kv=new WeakMap,Mu=Symbol(""),jb=Symbol("");function ea(e,t,i){if(Cc&&Au){let r=Kv.get(e);r||Kv.set(e,r=new Map);let s=r.get(i);s||r.set(i,s=uI(()=>r.delete(i))),oI(Au,s)}}function xl(e,t,i,r,s,c){const d=Kv.get(e);if(!d)return;let l=[];if(t==="clear")l=[...d.values()];else if(i==="length"&&kn(e)){const m=Number(r);d.forEach((g,y)=>{(y==="length"||!Pc(y)&&y>=m)&&l.push(g)})}else switch(i!==void 0&&l.push(d.get(i)),t){case"add":kn(e)?s1(i)&&l.push(d.get("length")):(l.push(d.get(Mu)),oh(e)&&l.push(d.get(jb)));break;case"delete":kn(e)||(l.push(d.get(Mu)),oh(e)&&l.push(d.get(jb)));break;case"set":oh(e)&&l.push(d.get(Mu));break}l1();for(const m of l)m&&lI(m,2);c1()}function lR(e,t){var i;return(i=Kv.get(e))==null?void 0:i.get(t)}const cR=P_("__proto__,__v_isRef,__isVue"),dI=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Pc)),CT=uR();function uR(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...i){const r=di(this);for(let c=0,d=this.length;c<d;c++)ea(r,"get",c+"");const s=r[t](...i);return s===-1||s===!1?r[t](...i.map(di)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...i){Wu(),l1();const r=di(this)[t].apply(this,i);return c1(),qu(),r}}),e}function dR(e){const t=di(this);return ea(t,"has",e),t.hasOwnProperty(e)}class hI{constructor(t=!1,i=!1){this._isReadonly=t,this._shallow=i}get(t,i,r){const s=this._isReadonly,c=this._shallow;if(i==="__v_isReactive")return!s;if(i==="__v_isReadonly")return s;if(i==="__v_isShallow")return c;if(i==="__v_raw")return r===(s?c?_I:vI:c?gI:mI).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const d=kn(t);if(!s){if(d&&Si(CT,i))return Reflect.get(CT,i,r);if(i==="hasOwnProperty")return dR}const l=Reflect.get(t,i,r);return(Pc(i)?dI.has(i):cR(i))||(s||ea(t,"get",i),c)?l:cr(l)?d&&s1(i)?l:l.value:Ri(l)?s?Zu(l):es(l):l}}class fI extends hI{constructor(t=!1){super(!1,t)}set(t,i,r,s){let c=t[i];if(!this._shallow){const m=Ou(c);if(!Up(r)&&!Ou(r)&&(c=di(c),r=di(r)),!kn(t)&&cr(c)&&!cr(r))return m?!1:(c.value=r,!0)}const d=kn(t)&&s1(i)?Number(i)<t.length:Si(t,i),l=Reflect.set(t,i,r,s);return t===di(s)&&(d?uo(r,c)&&xl(t,"set",i,r):xl(t,"add",i,r)),l}deleteProperty(t,i){const r=Si(t,i);t[i];const s=Reflect.deleteProperty(t,i);return s&&r&&xl(t,"delete",i,void 0),s}has(t,i){const r=Reflect.has(t,i);return(!Pc(i)||!dI.has(i))&&ea(t,"has",i),r}ownKeys(t){return ea(t,"iterate",kn(t)?"length":Mu),Reflect.ownKeys(t)}}class pI extends hI{constructor(t=!1){super(!0,t)}set(t,i){return!0}deleteProperty(t,i){return!0}}const hR=new fI,fR=new pI,pR=new fI(!0),mR=new pI(!0),u1=e=>e,O_=e=>Reflect.getPrototypeOf(e);function qg(e,t,i=!1,r=!1){e=e.__v_raw;const s=di(e),c=di(t);i||(uo(t,c)&&ea(s,"get",t),ea(s,"get",c));const{has:d}=O_(s),l=r?u1:i?f1:Hp;if(d.call(s,t))return l(e.get(t));if(d.call(s,c))return l(e.get(c));e!==s&&e.get(t)}function Zg(e,t=!1){const i=this.__v_raw,r=di(i),s=di(e);return t||(uo(e,s)&&ea(r,"has",e),ea(r,"has",s)),e===s?i.has(e):i.has(e)||i.has(s)}function Kg(e,t=!1){return e=e.__v_raw,!t&&ea(di(e),"iterate",Mu),Reflect.get(e,"size",e)}function IT(e){e=di(e);const t=di(this);return O_(t).has.call(t,e)||(t.add(e),xl(t,"add",e,e)),this}function AT(e,t){t=di(t);const i=di(this),{has:r,get:s}=O_(i);let c=r.call(i,e);c||(e=di(e),c=r.call(i,e));const d=s.call(i,e);return i.set(e,t),c?uo(t,d)&&xl(i,"set",e,t):xl(i,"add",e,t),this}function MT(e){const t=di(this),{has:i,get:r}=O_(t);let s=i.call(t,e);s||(e=di(e),s=i.call(t,e)),r&&r.call(t,e);const c=t.delete(e);return s&&xl(t,"delete",e,void 0),c}function kT(){const e=di(this),t=e.size!==0,i=e.clear();return t&&xl(e,"clear",void 0,void 0),i}function Xg(e,t){return function(r,s){const c=this,d=c.__v_raw,l=di(d),m=t?u1:e?f1:Hp;return!e&&ea(l,"iterate",Mu),d.forEach((g,y)=>r.call(s,m(g),m(y),c))}}function Yg(e,t,i){return function(...r){const s=this.__v_raw,c=di(s),d=oh(c),l=e==="entries"||e===Symbol.iterator&&d,m=e==="keys"&&d,g=s[e](...r),y=i?u1:t?f1:Hp;return!t&&ea(c,"iterate",m?jb:Mu),{next(){const{value:x,done:C}=g.next();return C?{value:x,done:C}:{value:l?[y(x[0]),y(x[1])]:y(x),done:C}},[Symbol.iterator](){return this}}}}function ic(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function gR(){const e={get(c){return qg(this,c)},get size(){return Kg(this)},has:Zg,add:IT,set:AT,delete:MT,clear:kT,forEach:Xg(!1,!1)},t={get(c){return qg(this,c,!1,!0)},get size(){return Kg(this)},has:Zg,add:IT,set:AT,delete:MT,clear:kT,forEach:Xg(!1,!0)},i={get(c){return qg(this,c,!0)},get size(){return Kg(this,!0)},has(c){return Zg.call(this,c,!0)},add:ic("add"),set:ic("set"),delete:ic("delete"),clear:ic("clear"),forEach:Xg(!0,!1)},r={get(c){return qg(this,c,!0,!0)},get size(){return Kg(this,!0)},has(c){return Zg.call(this,c,!0)},add:ic("add"),set:ic("set"),delete:ic("delete"),clear:ic("clear"),forEach:Xg(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(c=>{e[c]=Yg(c,!1,!1),i[c]=Yg(c,!0,!1),t[c]=Yg(c,!1,!0),r[c]=Yg(c,!0,!0)}),[e,i,t,r]}const[vR,_R,yR,bR]=gR();function R_(e,t){const i=t?e?bR:yR:e?_R:vR;return(r,s,c)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(Si(i,s)&&s in r?i:r,s,c)}const xR={get:R_(!1,!1)},wR={get:R_(!1,!0)},SR={get:R_(!0,!1)},TR={get:R_(!0,!0)},mI=new WeakMap,gI=new WeakMap,vI=new WeakMap,_I=new WeakMap;function ER(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function CR(e){return e.__v_skip||!Object.isExtensible(e)?0:ER(WO(e))}function es(e){return Ou(e)?e:F_(e,!1,hR,xR,mI)}function d1(e){return F_(e,!1,pR,wR,gI)}function Zu(e){return F_(e,!0,fR,SR,vI)}function yu(e){return F_(e,!0,mR,TR,_I)}function F_(e,t,i,r,s){if(!Ri(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const c=s.get(e);if(c)return c;const d=CR(e);if(d===0)return e;const l=new Proxy(e,d===2?r:i);return s.set(e,l),l}function $o(e){return Ou(e)?$o(e.__v_raw):!!(e&&e.__v_isReactive)}function Ou(e){return!!(e&&e.__v_isReadonly)}function Up(e){return!!(e&&e.__v_isShallow)}function h1(e){return $o(e)||Ou(e)}function di(e){const t=e&&e.__v_raw;return t?di(t):e}function mm(e){return qv(e,"__v_skip",!0),e}const Hp=e=>Ri(e)?es(e):e,f1=e=>Ri(e)?Zu(e):e;class yI{constructor(t,i,r,s){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new gh(()=>t(this._value),()=>ch(this,1),()=>this.dep&&cI(this.dep)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const t=di(this);return(!t._cacheable||t.effect.dirty)&&uo(t._value,t._value=t.effect.run())&&ch(t,2),p1(t),t.effect._dirtyLevel>=1&&ch(t,1),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function IR(e,t,i=!1){let r,s;const c=Bn(e);return c?(r=e,s=Ds):(r=e.get,s=e.set),new yI(r,s,c||!s,i)}function p1(e){Cc&&Au&&(e=di(e),oI(Au,e.dep||(e.dep=uI(()=>e.dep=void 0,e instanceof yI?e:void 0))))}function ch(e,t=2,i){e=di(e);const r=e.dep;r&&lI(r,t)}function cr(e){return!!(e&&e.__v_isRef===!0)}function Fe(e){return bI(e,!1)}function $h(e){return bI(e,!0)}function bI(e,t){return cr(e)?e:new AR(e,t)}class AR{constructor(t,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?t:di(t),this._value=i?t:Hp(t)}get value(){return p1(this),this._value}set value(t){const i=this.__v_isShallow||Up(t)||Ou(t);t=i?t:di(t),uo(t,this._rawValue)&&(this._rawValue=t,this._value=i?t:Hp(t),ch(this,2))}}function MR(e){ch(e,2)}function le(e){return cr(e)?e.value:e}function kR(e){return Bn(e)?e():le(e)}const PR={get:(e,t,i)=>le(Reflect.get(e,t,i)),set:(e,t,i,r)=>{const s=e[t];return cr(s)&&!cr(i)?(s.value=i,!0):Reflect.set(e,t,i,r)}};function m1(e){return $o(e)?e:new Proxy(e,PR)}class DR{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:i,set:r}=t(()=>p1(this),()=>ch(this));this._get=i,this._set=r}get value(){return this._get()}set value(t){this._set(t)}}function g1(e){return new DR(e)}function $_(e){const t=kn(e)?new Array(e.length):{};for(const i in e)t[i]=xI(e,i);return t}class LR{constructor(t,i,r){this._object=t,this._key=i,this._defaultValue=r,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return lR(di(this._object),this._key)}}class OR{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function vh(e,t,i){return cr(e)?e:Bn(e)?new OR(e):Ri(e)&&arguments.length>1?xI(e,t,i):Fe(e)}function xI(e,t,i){const r=e[t];return cr(r)?r:new LR(e,t,i)}const RR={GET:"get",HAS:"has",ITERATE:"iterate"},FR={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"};/**
* @vue/runtime-core v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function $R(e,t){}const zR={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",WATCH_GETTER:2,2:"WATCH_GETTER",WATCH_CALLBACK:3,3:"WATCH_CALLBACK",WATCH_CLEANUP:4,4:"WATCH_CLEANUP",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER"},NR={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://github.com/vuejs/core ."};function wl(e,t,i,r){let s;try{s=r?e(...r):e()}catch(c){Ku(c,t,i)}return s}function pa(e,t,i,r){if(Bn(e)){const c=wl(e,t,i,r);return c&&r1(c)&&c.catch(d=>{Ku(d,t,i)}),c}const s=[];for(let c=0;c<e.length;c++)s.push(pa(e[c],t,i,r));return s}function Ku(e,t,i,r=!0){const s=t?t.vnode:null;if(t){let c=t.parent;const d=t.proxy,l=`https://vuejs.org/error-reference/#runtime-${i}`;for(;c;){const g=c.ec;if(g){for(let y=0;y<g.length;y++)if(g[y](e,d,l)===!1)return}c=c.parent}const m=t.appContext.config.errorHandler;if(m){wl(m,null,10,[e,d,l]);return}}BR(e,i,s,r)}function BR(e,t,i,r=!0){console.error(e)}let Gp=!1,Vb=!1;const fs=[];let Lo=0;const uh=[];let dc=null,wu=0;const wI=Promise.resolve();let v1=null;function Ir(e){const t=v1||wI;return e?t.then(this?e.bind(this):e):t}function jR(e){let t=Lo+1,i=fs.length;for(;t<i;){const r=t+i>>>1,s=fs[r],c=Wp(s);c<e||c===e&&s.pre?t=r+1:i=r}return t}function z_(e){(!fs.length||!fs.includes(e,Gp&&e.allowRecurse?Lo+1:Lo))&&(e.id==null?fs.push(e):fs.splice(jR(e.id),0,e),SI())}function SI(){!Gp&&!Vb&&(Vb=!0,v1=wI.then(TI))}function VR(e){const t=fs.indexOf(e);t>Lo&&fs.splice(t,1)}function Xv(e){kn(e)?uh.push(...e):(!dc||!dc.includes(e,e.allowRecurse?wu+1:wu))&&uh.push(e),SI()}function PT(e,t,i=Gp?Lo+1:0){for(;i<fs.length;i++){const r=fs[i];if(r&&r.pre){if(e&&r.id!==e.uid)continue;fs.splice(i,1),i--,r()}}}function Yv(e){if(uh.length){const t=[...new Set(uh)].sort((i,r)=>Wp(i)-Wp(r));if(uh.length=0,dc){dc.push(...t);return}for(dc=t,wu=0;wu<dc.length;wu++)dc[wu]();dc=null,wu=0}}const Wp=e=>e.id==null?1/0:e.id,UR=(e,t)=>{const i=Wp(e)-Wp(t);if(i===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return i};function TI(e){Vb=!1,Gp=!0,fs.sort(UR);const t=Ds;try{for(Lo=0;Lo<fs.length;Lo++){const i=fs[Lo];i&&i.active!==!1&&wl(i,null,14)}}finally{Lo=0,fs.length=0,Yv(),Gp=!1,v1=null,(fs.length||uh.length)&&TI()}}let Jd,Jg=[];function EI(e,t){var i,r;Jd=e,Jd?(Jd.enabled=!0,Jg.forEach(({event:s,args:c})=>Jd.emit(s,...c)),Jg=[]):typeof window<"u"&&window.HTMLElement&&!((r=(i=window.navigator)==null?void 0:i.userAgent)!=null&&r.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(c=>{EI(c,t)}),setTimeout(()=>{Jd||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Jg=[])},3e3)):Jg=[]}function HR(e,t,...i){if(e.isUnmounted)return;const r=e.vnode.props||Mi;let s=i;const c=t.startsWith("update:"),d=c&&t.slice(7);if(d&&d in r){const y=`${d==="modelValue"?"model":d}Modifiers`,{number:x,trim:C}=r[y]||Mi;C&&(s=i.map(I=>rr(I)?I.trim():I)),x&&(s=i.map(Vp))}let l,m=r[l=Ep(t)]||r[l=Ep(Ls(t))];!m&&c&&(m=r[l=Ep(ha(t))]),m&&pa(m,e,6,s);const g=r[l+"Once"];if(g){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,pa(g,e,6,s)}}function CI(e,t,i=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const c=e.emits;let d={},l=!1;if(!Bn(e)){const m=g=>{const y=CI(g,t,!0);y&&(l=!0,ir(d,y))};!i&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}return!c&&!l?(Ri(e)&&r.set(e,null),null):(kn(c)?c.forEach(m=>d[m]=null):ir(d,c),Ri(e)&&r.set(e,d),d)}function N_(e,t){return!e||!dm(t)?!1:(t=t.slice(2).replace(/Once$/,""),Si(e,t[0].toLowerCase()+t.slice(1))||Si(e,ha(t))||Si(e,t))}let Mr=null,B_=null;function qp(e){const t=Mr;return Mr=e,B_=e&&e.type.__scopeId||null,t}function ja(e){B_=e}function Va(){B_=null}const GR=e=>Ce;function Ce(e,t=Mr,i){if(!t||e._n)return e;const r=(...s)=>{r._d&&Xb(-1);const c=qp(t);let d;try{d=e(...s)}finally{qp(c),r._d&&Xb(1)}return d};return r._n=!0,r._c=!0,r._d=!0,r}function Mv(e){const{type:t,vnode:i,proxy:r,withProxy:s,props:c,propsOptions:[d],slots:l,attrs:m,emit:g,render:y,renderCache:x,data:C,setupState:I,ctx:A,inheritAttrs:O}=e;let F,z;const U=qp(e);try{if(i.shapeFlag&4){const q=s||r,ee=q;F=da(y.call(ee,q,x,c,I,C,A)),z=m}else{const q=t;F=da(q.length>1?q(c,{attrs:m,slots:l,emit:g}):q(c,null)),z=t.props?m:qR(m)}}catch(q){Ap.length=0,Ku(q,e,1),F=_e(gs)}let H=F;if(z&&O!==!1){const q=Object.keys(z),{shapeFlag:ee}=H;q.length&&ee&7&&(d&&q.some(n1)&&(z=ZR(z,d)),H=va(H,z))}return i.dirs&&(H=va(H),H.dirs=H.dirs?H.dirs.concat(i.dirs):i.dirs),i.transition&&(H.transition=i.transition),F=H,qp(U),F}function WR(e,t=!0){let i;for(let r=0;r<e.length;r++){const s=e[r];if(Dc(s)){if(s.type!==gs||s.children==="v-if"){if(i)return;i=s}}else return}return i}const qR=e=>{let t;for(const i in e)(i==="class"||i==="style"||dm(i))&&((t||(t={}))[i]=e[i]);return t},ZR=(e,t)=>{const i={};for(const r in e)(!n1(r)||!(r.slice(9)in t))&&(i[r]=e[r]);return i};function KR(e,t,i){const{props:r,children:s,component:c}=e,{props:d,children:l,patchFlag:m}=t,g=c.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&m>=0){if(m&1024)return!0;if(m&16)return r?DT(r,d,g):!!d;if(m&8){const y=t.dynamicProps;for(let x=0;x<y.length;x++){const C=y[x];if(d[C]!==r[C]&&!N_(g,C))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===d?!1:r?d?DT(r,d,g):!0:!!d;return!1}function DT(e,t,i){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const c=r[s];if(t[c]!==e[c]&&!N_(i,c))return!0}return!1}function _1({vnode:e,parent:t},i){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=i,t=t.parent;else break}}const y1="components",XR="directives";function j_(e,t){return b1(y1,e,!0,t)||e}const II=Symbol.for("v-ndc");function zc(e){return rr(e)?b1(y1,e,!1)||e:e||II}function YR(e){return b1(XR,e)}function b1(e,t,i=!0,r=!1){const s=Mr||Fr;if(s){const c=s.type;if(e===y1){const l=tx(c,!1);if(l&&(l===t||l===Ls(t)||l===hm(Ls(t))))return c}const d=LT(s[e]||c[e],t)||LT(s.appContext[e],t);return!d&&r?c:d}}function LT(e,t){return e&&(e[t]||e[Ls(t)]||e[hm(Ls(t))])}const AI=e=>e.__isSuspense;let Ub=0;const JR={name:"Suspense",__isSuspense:!0,process(e,t,i,r,s,c,d,l,m,g){if(e==null)e3(t,i,r,s,c,d,l,m,g);else{if(c&&c.deps>0){t.suspense=e.suspense;return}t3(e,t,i,r,s,d,l,m,g)}},hydrate:n3,create:x1,normalize:i3},QR=JR;function Zp(e,t){const i=e.props&&e.props[t];Bn(i)&&i()}function e3(e,t,i,r,s,c,d,l,m){const{p:g,o:{createElement:y}}=m,x=y("div"),C=e.suspense=x1(e,s,r,t,x,i,c,d,l,m);g(null,C.pendingBranch=e.ssContent,x,null,r,C,c,d),C.deps>0?(Zp(e,"onPending"),Zp(e,"onFallback"),g(null,e.ssFallback,t,i,r,null,c,d),dh(C,e.ssFallback)):C.resolve(!1,!0)}function t3(e,t,i,r,s,c,d,l,{p:m,um:g,o:{createElement:y}}){const x=t.suspense=e.suspense;x.vnode=t,t.el=e.el;const C=t.ssContent,I=t.ssFallback,{activeBranch:A,pendingBranch:O,isInFallback:F,isHydrating:z}=x;if(O)x.pendingBranch=C,ao(C,O)?(m(O,C,x.hiddenContainer,null,s,x,c,d,l),x.deps<=0?x.resolve():F&&(z||(m(A,I,i,r,s,null,c,d,l),dh(x,I)))):(x.pendingId=Ub++,z?(x.isHydrating=!1,x.activeBranch=O):g(O,s,x),x.deps=0,x.effects.length=0,x.hiddenContainer=y("div"),F?(m(null,C,x.hiddenContainer,null,s,x,c,d,l),x.deps<=0?x.resolve():(m(A,I,i,r,s,null,c,d,l),dh(x,I))):A&&ao(C,A)?(m(A,C,i,r,s,x,c,d,l),x.resolve(!0)):(m(null,C,x.hiddenContainer,null,s,x,c,d,l),x.deps<=0&&x.resolve()));else if(A&&ao(C,A))m(A,C,i,r,s,x,c,d,l),dh(x,C);else if(Zp(t,"onPending"),x.pendingBranch=C,C.shapeFlag&512?x.pendingId=C.component.suspenseId:x.pendingId=Ub++,m(null,C,x.hiddenContainer,null,s,x,c,d,l),x.deps<=0)x.resolve();else{const{timeout:U,pendingId:H}=x;U>0?setTimeout(()=>{x.pendingId===H&&x.fallback(I)},U):U===0&&x.fallback(I)}}function x1(e,t,i,r,s,c,d,l,m,g,y=!1){const{p:x,m:C,um:I,n:A,o:{parentNode:O,remove:F}}=g;let z;const U=r3(e);U&&t!=null&&t.pendingBranch&&(z=t.pendingId,t.deps++);const H=e.props?Zv(e.props.timeout):void 0,q=c,ee={vnode:e,parent:t,parentComponent:i,namespace:d,container:r,hiddenContainer:s,deps:0,pendingId:Ub++,timeout:typeof H=="number"?H:-1,activeBranch:null,pendingBranch:null,isInFallback:!y,isHydrating:y,isUnmounted:!1,effects:[],resolve(Q=!1,ve=!1){const{vnode:se,activeBranch:K,pendingBranch:J,pendingId:W,effects:te,parentComponent:j,container:re}=ee;let Te=!1;ee.isHydrating?ee.isHydrating=!1:Q||(Te=K&&J.transition&&J.transition.mode==="out-in",Te&&(K.transition.afterLeave=()=>{W===ee.pendingId&&(C(J,re,c===q?A(K):c,0),Xv(te))}),K&&(O(K.el)!==ee.hiddenContainer&&(c=A(K)),I(K,j,ee,!0)),Te||C(J,re,c,0)),dh(ee,J),ee.pendingBranch=null,ee.isInFallback=!1;let ye=ee.parent,Ve=!1;for(;ye;){if(ye.pendingBranch){ye.effects.push(...te),Ve=!0;break}ye=ye.parent}!Ve&&!Te&&Xv(te),ee.effects=[],U&&t&&t.pendingBranch&&z===t.pendingId&&(t.deps--,t.deps===0&&!ve&&t.resolve()),Zp(se,"onResolve")},fallback(Q){if(!ee.pendingBranch)return;const{vnode:ve,activeBranch:se,parentComponent:K,container:J,namespace:W}=ee;Zp(ve,"onFallback");const te=A(se),j=()=>{ee.isInFallback&&(x(null,Q,J,te,K,null,W,l,m),dh(ee,Q))},re=Q.transition&&Q.transition.mode==="out-in";re&&(se.transition.afterLeave=j),ee.isInFallback=!0,I(se,K,null,!0),re||j()},move(Q,ve,se){ee.activeBranch&&C(ee.activeBranch,Q,ve,se),ee.container=Q},next(){return ee.activeBranch&&A(ee.activeBranch)},registerDep(Q,ve){const se=!!ee.pendingBranch;se&&ee.deps++;const K=Q.vnode.el;Q.asyncDep.catch(J=>{Ku(J,Q,0)}).then(J=>{if(Q.isUnmounted||ee.isUnmounted||ee.pendingId!==Q.suspenseId)return;Q.asyncResolved=!0;const{vnode:W}=Q;Qb(Q,J,!1),K&&(W.el=K);const te=!K&&Q.subTree.el;ve(Q,W,O(K||Q.subTree.el),K?null:A(Q.subTree),ee,d,m),te&&F(te),_1(Q,W.el),se&&--ee.deps===0&&ee.resolve()})},unmount(Q,ve){ee.isUnmounted=!0,ee.activeBranch&&I(ee.activeBranch,i,Q,ve),ee.pendingBranch&&I(ee.pendingBranch,i,Q,ve)}};return ee}function n3(e,t,i,r,s,c,d,l,m){const g=t.suspense=x1(t,r,i,e.parentNode,document.createElement("div"),null,s,c,d,l,!0),y=m(e,g.pendingBranch=t.ssContent,i,g,c,d);return g.deps===0&&g.resolve(!1,!0),y}function i3(e){const{shapeFlag:t,children:i}=e,r=t&32;e.ssContent=OT(r?i.default:i),e.ssFallback=r?OT(i.fallback):_e(gs)}function OT(e){let t;if(Bn(e)){const i=$u&&e._c;i&&(e._d=!1,B()),e=e(),i&&(e._d=!0,t=Xs,aA())}return kn(e)&&(e=WR(e)),e=da(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(i=>i!==e)),e}function MI(e,t){t&&t.pendingBranch?kn(e)?t.effects.push(...e):t.effects.push(e):Xv(e)}function dh(e,t){e.activeBranch=t;const{vnode:i,parentComponent:r}=e;let s=t.el;for(;!s&&t.component;)t=t.component.subTree,s=t.el;i.el=s,r&&r.subTree===i&&(r.vnode.el=s,_1(r,s))}function r3(e){var t;return((t=e.props)==null?void 0:t.suspensible)!=null&&e.props.suspensible!==!1}const kI=Symbol.for("v-scx"),PI=()=>yi(kI);function $r(e,t){return gm(e,null,t)}function DI(e,t){return gm(e,null,{flush:"post"})}function LI(e,t){return gm(e,null,{flush:"sync"})}const Qg={};function pn(e,t,i){return gm(e,t,i)}function gm(e,t,{immediate:i,deep:r,flush:s,once:c,onTrack:d,onTrigger:l}=Mi){if(t&&c){const Q=t;t=(...ve)=>{Q(...ve),ee()}}const m=Fr,g=Q=>r===!0?Q:Cu(Q,r===!1?1:void 0);let y,x=!1,C=!1;if(cr(e)?(y=()=>e.value,x=Up(e)):$o(e)?(y=()=>g(e),x=!0):kn(e)?(C=!0,x=e.some(Q=>$o(Q)||Up(Q)),y=()=>e.map(Q=>{if(cr(Q))return Q.value;if($o(Q))return g(Q);if(Bn(Q))return wl(Q,m,2)})):Bn(e)?t?y=()=>wl(e,m,2):y=()=>(I&&I(),pa(e,m,3,[A])):y=Ds,t&&r){const Q=y;y=()=>Cu(Q())}let I,A=Q=>{I=H.onStop=()=>{wl(Q,m,4),I=H.onStop=void 0}},O;if(ym)if(A=Ds,t?i&&pa(t,m,3,[y(),C?[]:void 0,A]):y(),s==="sync"){const Q=PI();O=Q.__watcherHandles||(Q.__watcherHandles=[])}else return Ds;let F=C?new Array(e.length).fill(Qg):Qg;const z=()=>{if(!(!H.active||!H.dirty))if(t){const Q=H.run();(r||x||(C?Q.some((ve,se)=>uo(ve,F[se])):uo(Q,F)))&&(I&&I(),pa(t,m,3,[Q,F===Qg?void 0:C&&F[0]===Qg?[]:F,A]),F=Q)}else H.run()};z.allowRecurse=!!t;let U;s==="sync"?U=z:s==="post"?U=()=>Jr(z,m&&m.suspense):(z.pre=!0,m&&(z.id=m.uid),U=()=>z_(z));const H=new gh(y,Ds,U),q=fm(),ee=()=>{H.stop(),q&&i1(q.effects,H)};return t?i?z():F=H.run():s==="post"?Jr(H.run.bind(H),m&&m.suspense):H.run(),O&&O.push(ee),ee}function s3(e,t,i){const r=this.proxy,s=rr(e)?e.includes(".")?OI(r,e):()=>r[e]:e.bind(r,r);let c;Bn(t)?c=t:(c=t.handler,i=t);const d=zu(this),l=gm(s,c.bind(r),i);return d(),l}function OI(e,t){const i=t.split(".");return()=>{let r=e;for(let s=0;s<i.length&&r;s++)r=r[i[s]];return r}}function Cu(e,t,i=0,r){if(!Ri(e)||e.__v_skip)return e;if(t&&t>0){if(i>=t)return e;i++}if(r=r||new Set,r.has(e))return e;if(r.add(e),cr(e))Cu(e.value,t,i,r);else if(kn(e))for(let s=0;s<e.length;s++)Cu(e[s],t,i,r);else if(Hu(e)||oh(e))e.forEach(s=>{Cu(s,t,i,r)});else if(eI(e))for(const s in e)Cu(e[s],t,i,r);return e}function vs(e,t){if(Mr===null)return e;const i=G_(Mr)||Mr.proxy,r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[c,d,l,m=Mi]=t[s];c&&(Bn(c)&&(c={mounted:c,updated:c}),c.deep&&Cu(d),r.push({dir:c,instance:i,value:d,oldValue:void 0,arg:l,modifiers:m}))}return e}function Po(e,t,i,r){const s=e.dirs,c=t&&t.dirs;for(let d=0;d<s.length;d++){const l=s[d];c&&(l.oldValue=c[d].value);let m=l.dir[r];m&&(Wu(),pa(m,i,8,[e.el,l,e,t]),qu())}}const hc=Symbol("_leaveCb"),ev=Symbol("_enterCb");function w1(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Fn(()=>{e.isMounted=!0}),ta(()=>{e.isUnmounting=!0}),e}const Ma=[Function,Array],S1={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ma,onEnter:Ma,onAfterEnter:Ma,onEnterCancelled:Ma,onBeforeLeave:Ma,onLeave:Ma,onAfterLeave:Ma,onLeaveCancelled:Ma,onBeforeAppear:Ma,onAppear:Ma,onAfterAppear:Ma,onAppearCancelled:Ma},a3={name:"BaseTransition",props:S1,setup(e,{slots:t}){const i=Ua(),r=w1();let s;return()=>{const c=t.default&&V_(t.default(),!0);if(!c||!c.length)return;let d=c[0];if(c.length>1){for(const O of c)if(O.type!==gs){d=O;break}}const l=di(e),{mode:m}=l;if(r.isLeaving)return D0(d);const g=RT(d);if(!g)return D0(d);const y=_h(g,l,r,i);Ru(g,y);const x=i.subTree,C=x&&RT(x);let I=!1;const{getTransitionKey:A}=g.type;if(A){const O=A();s===void 0?s=O:O!==s&&(s=O,I=!0)}if(C&&C.type!==gs&&(!ao(g,C)||I)){const O=_h(C,l,r,i);if(Ru(C,O),m==="out-in")return r.isLeaving=!0,O.afterLeave=()=>{r.isLeaving=!1,i.update.active!==!1&&(i.effect.dirty=!0,i.update())},D0(d);m==="in-out"&&g.type!==gs&&(O.delayLeave=(F,z,U)=>{const H=FI(r,C);H[String(C.key)]=C,F[hc]=()=>{z(),F[hc]=void 0,delete y.delayedLeave},y.delayedLeave=U})}return d}}},RI=a3;function FI(e,t){const{leavingVNodes:i}=e;let r=i.get(t.type);return r||(r=Object.create(null),i.set(t.type,r)),r}function _h(e,t,i,r){const{appear:s,mode:c,persisted:d=!1,onBeforeEnter:l,onEnter:m,onAfterEnter:g,onEnterCancelled:y,onBeforeLeave:x,onLeave:C,onAfterLeave:I,onLeaveCancelled:A,onBeforeAppear:O,onAppear:F,onAfterAppear:z,onAppearCancelled:U}=t,H=String(e.key),q=FI(i,e),ee=(se,K)=>{se&&pa(se,r,9,K)},Q=(se,K)=>{const J=K[1];ee(se,K),kn(se)?se.every(W=>W.length<=1)&&J():se.length<=1&&J()},ve={mode:c,persisted:d,beforeEnter(se){let K=l;if(!i.isMounted)if(s)K=O||l;else return;se[hc]&&se[hc](!0);const J=q[H];J&&ao(e,J)&&J.el[hc]&&J.el[hc](),ee(K,[se])},enter(se){let K=m,J=g,W=y;if(!i.isMounted)if(s)K=F||m,J=z||g,W=U||y;else return;let te=!1;const j=se[ev]=re=>{te||(te=!0,re?ee(W,[se]):ee(J,[se]),ve.delayedLeave&&ve.delayedLeave(),se[ev]=void 0)};K?Q(K,[se,j]):j()},leave(se,K){const J=String(e.key);if(se[ev]&&se[ev](!0),i.isUnmounting)return K();ee(x,[se]);let W=!1;const te=se[hc]=j=>{W||(W=!0,K(),j?ee(A,[se]):ee(I,[se]),se[hc]=void 0,q[J]===e&&delete q[J])};q[J]=e,C?Q(C,[se,te]):te()},clone(se){return _h(se,t,i,r)}};return ve}function D0(e){if(vm(e))return e=va(e),e.children=null,e}function RT(e){return vm(e)?e.children?e.children[0]:void 0:e}function Ru(e,t){e.shapeFlag&6&&e.component?Ru(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function V_(e,t=!1,i){let r=[],s=0;for(let c=0;c<e.length;c++){let d=e[c];const l=i==null?d.key:String(i)+String(d.key!=null?d.key:c);d.type===Ut?(d.patchFlag&128&&s++,r=r.concat(V_(d.children,t,l))):(t||d.type!==gs)&&r.push(l!=null?va(d,{key:l}):d)}if(s>1)for(let c=0;c<r.length;c++)r[c].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function lt(e,t){return Bn(e)?(()=>ir({name:e.name},t,{setup:e}))():e}const ku=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function Ic(e){Bn(e)&&(e={loader:e});const{loader:t,loadingComponent:i,errorComponent:r,delay:s=200,timeout:c,suspensible:d=!0,onError:l}=e;let m=null,g,y=0;const x=()=>(y++,m=null,C()),C=()=>{let I;return m||(I=m=t().catch(A=>{if(A=A instanceof Error?A:new Error(String(A)),l)return new Promise((O,F)=>{l(A,()=>O(x()),()=>F(A),y+1)});throw A}).then(A=>I!==m&&m?m:(A&&(A.__esModule||A[Symbol.toStringTag]==="Module")&&(A=A.default),g=A,A)))};return lt({name:"AsyncComponentWrapper",__asyncLoader:C,get __asyncResolved(){return g},setup(){const I=Fr;if(g)return()=>L0(g,I);const A=U=>{m=null,Ku(U,I,13,!r)};if(d&&I.suspense||ym)return C().then(U=>()=>L0(U,I)).catch(U=>(A(U),()=>r?_e(r,{error:U}):null));const O=Fe(!1),F=Fe(),z=Fe(!!s);return s&&setTimeout(()=>{z.value=!1},s),c!=null&&setTimeout(()=>{if(!O.value&&!F.value){const U=new Error(`Async component timed out after ${c}ms.`);A(U),F.value=U}},c),C().then(()=>{O.value=!0,I.parent&&vm(I.parent.vnode)&&(I.parent.effect.dirty=!0,z_(I.parent.update))}).catch(U=>{A(U),F.value=U}),()=>{if(O.value&&g)return L0(g,I);if(F.value&&r)return _e(r,{error:F.value});if(i&&!z.value)return _e(i)}}})}function L0(e,t){const{ref:i,props:r,children:s,ce:c}=t.vnode,d=_e(e,r,s);return d.ref=i,d.ce=c,delete t.vnode.ce,d}const vm=e=>e.type.__isKeepAlive,o3={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const i=Ua(),r=i.ctx;if(!r.renderer)return()=>{const U=t.default&&t.default();return U&&U.length===1?U[0]:U};const s=new Map,c=new Set;let d=null;const l=i.suspense,{renderer:{p:m,m:g,um:y,o:{createElement:x}}}=r,C=x("div");r.activate=(U,H,q,ee,Q)=>{const ve=U.component;g(U,H,q,0,l),m(ve.vnode,U,H,q,ve,l,ee,U.slotScopeIds,Q),Jr(()=>{ve.isDeactivated=!1,ve.a&&lh(ve.a);const se=U.props&&U.props.onVnodeMounted;se&&Ks(se,ve.parent,U)},l)},r.deactivate=U=>{const H=U.component;g(U,C,null,1,l),Jr(()=>{H.da&&lh(H.da);const q=U.props&&U.props.onVnodeUnmounted;q&&Ks(q,H.parent,U),H.isDeactivated=!0},l)};function I(U){O0(U),y(U,i,l,!0)}function A(U){s.forEach((H,q)=>{const ee=tx(H.type);ee&&(!U||!U(ee))&&O(q)})}function O(U){const H=s.get(U);!d||!ao(H,d)?I(H):d&&O0(d),s.delete(U),c.delete(U)}pn(()=>[e.include,e.exclude],([U,H])=>{U&&A(q=>pp(U,q)),H&&A(q=>!pp(H,q))},{flush:"post",deep:!0});let F=null;const z=()=>{F!=null&&s.set(F,R0(i.subTree))};return Fn(z),zh(z),ta(()=>{s.forEach(U=>{const{subTree:H,suspense:q}=i,ee=R0(H);if(U.type===ee.type&&U.key===ee.key){O0(ee);const Q=ee.component.da;Q&&Jr(Q,q);return}I(U)})}),()=>{if(F=null,!t.default)return null;const U=t.default(),H=U[0];if(U.length>1)return d=null,U;if(!Dc(H)||!(H.shapeFlag&4)&&!(H.shapeFlag&128))return d=null,H;let q=R0(H);const ee=q.type,Q=tx(ku(q)?q.type.__asyncResolved||{}:ee),{include:ve,exclude:se,max:K}=e;if(ve&&(!Q||!pp(ve,Q))||se&&Q&&pp(se,Q))return d=q,H;const J=q.key==null?ee:q.key,W=s.get(J);return q.el&&(q=va(q),H.shapeFlag&128&&(H.ssContent=q)),F=J,W?(q.el=W.el,q.component=W.component,q.transition&&Ru(q,q.transition),q.shapeFlag|=512,c.delete(J),c.add(J)):(c.add(J),K&&c.size>parseInt(K,10)&&O(c.values().next().value)),q.shapeFlag|=256,d=q,AI(H.type)?H:q}}},l3=o3;function pp(e,t){return kn(e)?e.some(i=>pp(i,t)):rr(e)?e.split(",").includes(t):GO(e)?e.test(t):!1}function T1(e,t){$I(e,"a",t)}function E1(e,t){$I(e,"da",t)}function $I(e,t,i=Fr){const r=e.__wdc||(e.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(U_(t,r,i),i){let s=i.parent;for(;s&&s.parent;)vm(s.parent.vnode)&&c3(r,t,i,s),s=s.parent}}function c3(e,t,i,r){const s=U_(t,e,r,!0);Hi(()=>{i1(r[t],s)},i)}function O0(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function R0(e){return e.shapeFlag&128?e.ssContent:e}function U_(e,t,i=Fr,r=!1){if(i){const s=i[e]||(i[e]=[]),c=t.__weh||(t.__weh=(...d)=>{if(i.isUnmounted)return;Wu();const l=zu(i),m=pa(t,i,e,d);return l(),qu(),m});return r?s.unshift(c):s.push(c),c}}const Pl=e=>(t,i=Fr)=>(!ym||e==="sp")&&U_(e,(...r)=>t(...r),i),zI=Pl("bm"),Fn=Pl("m"),C1=Pl("bu"),zh=Pl("u"),ta=Pl("bum"),Hi=Pl("um"),NI=Pl("sp"),BI=Pl("rtg"),jI=Pl("rtc");function VI(e,t=Fr){U_("ec",e,t)}function $n(e,t,i,r){let s;const c=i&&i[r];if(kn(e)||rr(e)){s=new Array(e.length);for(let d=0,l=e.length;d<l;d++)s[d]=t(e[d],d,void 0,c&&c[d])}else if(typeof e=="number"){s=new Array(e);for(let d=0;d<e;d++)s[d]=t(d+1,d,void 0,c&&c[d])}else if(Ri(e))if(e[Symbol.iterator])s=Array.from(e,(d,l)=>t(d,l,void 0,c&&c[l]));else{const d=Object.keys(e);s=new Array(d.length);for(let l=0,m=d.length;l<m;l++){const g=d[l];s[l]=t(e[g],g,l,c&&c[l])}}else s=[];return i&&(i[r]=s),s}function UI(e,t){for(let i=0;i<t.length;i++){const r=t[i];if(kn(r))for(let s=0;s<r.length;s++)e[r[s].name]=r[s].fn;else r&&(e[r.name]=r.key?(...s)=>{const c=r.fn(...s);return c&&(c.key=r.key),c}:r.fn)}return e}function En(e,t,i={},r,s){if(Mr.isCE||Mr.parent&&ku(Mr.parent)&&Mr.parent.isCE)return t!=="default"&&(i.name=t),_e("slot",i,r&&r());let c=e[t];c&&c._c&&(c._d=!1),B();const d=c&&HI(c(i)),l=ze(Ut,{key:i.key||d&&d.key||`_${t}`},d||(r?r():[]),d&&e._===1?64:-2);return!s&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),c&&c._c&&(c._d=!0),l}function HI(e){return e.some(t=>Dc(t)?!(t.type===gs||t.type===Ut&&!HI(t.children)):!0)?e:null}function u3(e,t){const i={};for(const r in e)i[t&&/[A-Z]/.test(r)?`on:${r}`:Ep(r)]=e[r];return i}const Hb=e=>e?hA(e)?G_(e)||e.proxy:Hb(e.parent):null,Cp=ir(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Hb(e.parent),$root:e=>Hb(e.root),$emit:e=>e.emit,$options:e=>I1(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,z_(e.update)}),$nextTick:e=>e.n||(e.n=Ir.bind(e.proxy)),$watch:e=>s3.bind(e)}),F0=(e,t)=>e!==Mi&&!e.__isScriptSetup&&Si(e,t),Gb={get({_:e},t){const{ctx:i,setupState:r,data:s,props:c,accessCache:d,type:l,appContext:m}=e;let g;if(t[0]!=="$"){const I=d[t];if(I!==void 0)switch(I){case 1:return r[t];case 2:return s[t];case 4:return i[t];case 3:return c[t]}else{if(F0(r,t))return d[t]=1,r[t];if(s!==Mi&&Si(s,t))return d[t]=2,s[t];if((g=e.propsOptions[0])&&Si(g,t))return d[t]=3,c[t];if(i!==Mi&&Si(i,t))return d[t]=4,i[t];Wb&&(d[t]=0)}}const y=Cp[t];let x,C;if(y)return t==="$attrs"&&ea(e,"get",t),y(e);if((x=l.__cssModules)&&(x=x[t]))return x;if(i!==Mi&&Si(i,t))return d[t]=4,i[t];if(C=m.config.globalProperties,Si(C,t))return C[t]},set({_:e},t,i){const{data:r,setupState:s,ctx:c}=e;return F0(s,t)?(s[t]=i,!0):r!==Mi&&Si(r,t)?(r[t]=i,!0):Si(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(c[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:r,appContext:s,propsOptions:c}},d){let l;return!!i[d]||e!==Mi&&Si(e,d)||F0(t,d)||(l=c[0])&&Si(l,d)||Si(r,d)||Si(Cp,d)||Si(s.config.globalProperties,d)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:Si(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}},d3=ir({},Gb,{get(e,t){if(t!==Symbol.unscopables)return Gb.get(e,t,e)},has(e,t){return t[0]!=="_"&&!XO(t)}});function h3(){return null}function f3(){return null}function p3(e){}function m3(e){}function g3(){return null}function v3(){}function _3(e,t){return null}function GI(){return WI().slots}function y3(){return WI().attrs}function WI(){const e=Ua();return e.setupContext||(e.setupContext=mA(e))}function Kp(e){return kn(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}function b3(e,t){const i=Kp(e);for(const r in t){if(r.startsWith("__skip"))continue;let s=i[r];s?kn(s)||Bn(s)?s=i[r]={type:s,default:t[r]}:s.default=t[r]:s===null&&(s=i[r]={default:t[r]}),s&&t[`__skip_${r}`]&&(s.skipFactory=!0)}return i}function x3(e,t){return!e||!t?e||t:kn(e)&&kn(t)?e.concat(t):ir({},Kp(e),Kp(t))}function w3(e,t){const i={};for(const r in e)t.includes(r)||Object.defineProperty(i,r,{enumerable:!0,get:()=>e[r]});return i}function S3(e){const t=Ua();let i=e();return Jb(),r1(i)&&(i=i.catch(r=>{throw zu(t),r})),[i,()=>zu(t)]}let Wb=!0;function T3(e){const t=I1(e),i=e.proxy,r=e.ctx;Wb=!1,t.beforeCreate&&FT(t.beforeCreate,e,"bc");const{data:s,computed:c,methods:d,watch:l,provide:m,inject:g,created:y,beforeMount:x,mounted:C,beforeUpdate:I,updated:A,activated:O,deactivated:F,beforeDestroy:z,beforeUnmount:U,destroyed:H,unmounted:q,render:ee,renderTracked:Q,renderTriggered:ve,errorCaptured:se,serverPrefetch:K,expose:J,inheritAttrs:W,components:te,directives:j,filters:re}=t;if(g&&E3(g,r,null),d)for(const Ve in d){const Ue=d[Ve];Bn(Ue)&&(r[Ve]=Ue.bind(i))}if(s){const Ve=s.call(i,i);Ri(Ve)&&(e.data=es(Ve))}if(Wb=!0,c)for(const Ve in c){const Ue=c[Ve],Qe=Bn(Ue)?Ue.bind(i,i):Bn(Ue.get)?Ue.get.bind(i,i):Ds,It=!Bn(Ue)&&Bn(Ue.set)?Ue.set.bind(i):Ds,vt=De({get:Qe,set:It});Object.defineProperty(r,Ve,{enumerable:!0,configurable:!0,get:()=>vt.value,set:it=>vt.value=it})}if(l)for(const Ve in l)qI(l[Ve],r,i,Ve);if(m){const Ve=Bn(m)?m.call(i):m;Reflect.ownKeys(Ve).forEach(Ue=>{ki(Ue,Ve[Ue])})}y&&FT(y,e,"c");function ye(Ve,Ue){kn(Ue)?Ue.forEach(Qe=>Ve(Qe.bind(i))):Ue&&Ve(Ue.bind(i))}if(ye(zI,x),ye(Fn,C),ye(C1,I),ye(zh,A),ye(T1,O),ye(E1,F),ye(VI,se),ye(jI,Q),ye(BI,ve),ye(ta,U),ye(Hi,q),ye(NI,K),kn(J))if(J.length){const Ve=e.exposed||(e.exposed={});J.forEach(Ue=>{Object.defineProperty(Ve,Ue,{get:()=>i[Ue],set:Qe=>i[Ue]=Qe})})}else e.exposed||(e.exposed={});ee&&e.render===Ds&&(e.render=ee),W!=null&&(e.inheritAttrs=W),te&&(e.components=te),j&&(e.directives=j)}function E3(e,t,i=Ds){kn(e)&&(e=qb(e));for(const r in e){const s=e[r];let c;Ri(s)?"default"in s?c=yi(s.from||r,s.default,!0):c=yi(s.from||r):c=yi(s),cr(c)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>c.value,set:d=>c.value=d}):t[r]=c}}function FT(e,t,i){pa(kn(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,i)}function qI(e,t,i,r){const s=r.includes(".")?OI(i,r):()=>i[r];if(rr(e)){const c=t[e];Bn(c)&&pn(s,c)}else if(Bn(e))pn(s,e.bind(i));else if(Ri(e))if(kn(e))e.forEach(c=>qI(c,t,i,r));else{const c=Bn(e.handler)?e.handler.bind(i):t[e.handler];Bn(c)&&pn(s,c,e)}}function I1(e){const t=e.type,{mixins:i,extends:r}=t,{mixins:s,optionsCache:c,config:{optionMergeStrategies:d}}=e.appContext,l=c.get(t);let m;return l?m=l:!s.length&&!i&&!r?m=t:(m={},s.length&&s.forEach(g=>Jv(m,g,d,!0)),Jv(m,t,d)),Ri(t)&&c.set(t,m),m}function Jv(e,t,i,r=!1){const{mixins:s,extends:c}=t;c&&Jv(e,c,i,!0),s&&s.forEach(d=>Jv(e,d,i,!0));for(const d in t)if(!(r&&d==="expose")){const l=C3[d]||i&&i[d];e[d]=l?l(e[d],t[d]):t[d]}return e}const C3={data:$T,props:zT,emits:zT,methods:mp,computed:mp,beforeCreate:Ms,created:Ms,beforeMount:Ms,mounted:Ms,beforeUpdate:Ms,updated:Ms,beforeDestroy:Ms,beforeUnmount:Ms,destroyed:Ms,unmounted:Ms,activated:Ms,deactivated:Ms,errorCaptured:Ms,serverPrefetch:Ms,components:mp,directives:mp,watch:A3,provide:$T,inject:I3};function $T(e,t){return t?e?function(){return ir(Bn(e)?e.call(this,this):e,Bn(t)?t.call(this,this):t)}:t:e}function I3(e,t){return mp(qb(e),qb(t))}function qb(e){if(kn(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function Ms(e,t){return e?[...new Set([].concat(e,t))]:t}function mp(e,t){return e?ir(Object.create(null),e,t):t}function zT(e,t){return e?kn(e)&&kn(t)?[...new Set([...e,...t])]:ir(Object.create(null),Kp(e),Kp(t??{})):t}function A3(e,t){if(!e)return t;if(!t)return e;const i=ir(Object.create(null),e);for(const r in t)i[r]=Ms(e[r],t[r]);return i}function ZI(){return{app:null,config:{isNativeTag:UO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let M3=0;function k3(e,t){return function(r,s=null){Bn(r)||(r=ir({},r)),s!=null&&!Ri(s)&&(s=null);const c=ZI(),d=new WeakSet;let l=!1;const m=c.app={_uid:M3++,_component:r,_props:s,_container:null,_context:c,_instance:null,version:vA,get config(){return c.config},set config(g){},use(g,...y){return d.has(g)||(g&&Bn(g.install)?(d.add(g),g.install(m,...y)):Bn(g)&&(d.add(g),g(m,...y))),m},mixin(g){return c.mixins.includes(g)||c.mixins.push(g),m},component(g,y){return y?(c.components[g]=y,m):c.components[g]},directive(g,y){return y?(c.directives[g]=y,m):c.directives[g]},mount(g,y,x){if(!l){const C=_e(r,s);return C.appContext=c,x===!0?x="svg":x===!1&&(x=void 0),y&&t?t(C,g):e(C,g,x),l=!0,m._container=g,g.__vue_app__=m,G_(C.component)||C.component.proxy}},unmount(){l&&(e(null,m._container),delete m._container.__vue_app__)},provide(g,y){return c.provides[g]=y,m},runWithContext(g){Xp=m;try{return g()}finally{Xp=null}}};return m}}let Xp=null;function ki(e,t){if(Fr){let i=Fr.provides;const r=Fr.parent&&Fr.parent.provides;r===i&&(i=Fr.provides=Object.create(r)),i[e]=t}}function yi(e,t,i=!1){const r=Fr||Mr;if(r||Xp){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Xp._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return i&&Bn(t)?t.call(r&&r.proxy):t}}function A1(){return!!(Fr||Mr||Xp)}function P3(e,t,i,r=!1){const s={},c={};qv(c,H_,1),e.propsDefaults=Object.create(null),KI(e,t,s,c);for(const d in e.propsOptions[0])d in s||(s[d]=void 0);i?e.props=r?s:d1(s):e.type.props?e.props=s:e.props=c,e.attrs=c}function D3(e,t,i,r){const{props:s,attrs:c,vnode:{patchFlag:d}}=e,l=di(s),[m]=e.propsOptions;let g=!1;if((r||d>0)&&!(d&16)){if(d&8){const y=e.vnode.dynamicProps;for(let x=0;x<y.length;x++){let C=y[x];if(N_(e.emitsOptions,C))continue;const I=t[C];if(m)if(Si(c,C))I!==c[C]&&(c[C]=I,g=!0);else{const A=Ls(C);s[A]=Zb(m,l,A,I,e,!1)}else I!==c[C]&&(c[C]=I,g=!0)}}}else{KI(e,t,s,c)&&(g=!0);let y;for(const x in l)(!t||!Si(t,x)&&((y=ha(x))===x||!Si(t,y)))&&(m?i&&(i[x]!==void 0||i[y]!==void 0)&&(s[x]=Zb(m,l,x,void 0,e,!0)):delete s[x]);if(c!==l)for(const x in c)(!t||!Si(t,x))&&(delete c[x],g=!0)}g&&xl(e,"set","$attrs")}function KI(e,t,i,r){const[s,c]=e.propsOptions;let d=!1,l;if(t)for(let m in t){if(Tp(m))continue;const g=t[m];let y;s&&Si(s,y=Ls(m))?!c||!c.includes(y)?i[y]=g:(l||(l={}))[y]=g:N_(e.emitsOptions,m)||(!(m in r)||g!==r[m])&&(r[m]=g,d=!0)}if(c){const m=di(i),g=l||Mi;for(let y=0;y<c.length;y++){const x=c[y];i[x]=Zb(s,m,x,g[x],e,!Si(g,x))}}return d}function Zb(e,t,i,r,s,c){const d=e[i];if(d!=null){const l=Si(d,"default");if(l&&r===void 0){const m=d.default;if(d.type!==Function&&!d.skipFactory&&Bn(m)){const{propsDefaults:g}=s;if(i in g)r=g[i];else{const y=zu(s);r=g[i]=m.call(null,t),y()}}else r=m}d[0]&&(c&&!l?r=!1:d[1]&&(r===""||r===ha(i))&&(r=!0))}return r}function XI(e,t,i=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const c=e.props,d={},l=[];let m=!1;if(!Bn(e)){const y=x=>{m=!0;const[C,I]=XI(x,t,!0);ir(d,C),I&&l.push(...I)};!i&&t.mixins.length&&t.mixins.forEach(y),e.extends&&y(e.extends),e.mixins&&e.mixins.forEach(y)}if(!c&&!m)return Ri(e)&&r.set(e,ah),ah;if(kn(c))for(let y=0;y<c.length;y++){const x=Ls(c[y]);NT(x)&&(d[x]=Mi)}else if(c)for(const y in c){const x=Ls(y);if(NT(x)){const C=c[y],I=d[x]=kn(C)||Bn(C)?{type:C}:ir({},C);if(I){const A=VT(Boolean,I.type),O=VT(String,I.type);I[0]=A>-1,I[1]=O<0||A<O,(A>-1||Si(I,"default"))&&l.push(x)}}}const g=[d,l];return Ri(e)&&r.set(e,g),g}function NT(e){return e[0]!=="$"}function BT(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function jT(e,t){return BT(e)===BT(t)}function VT(e,t){return kn(t)?t.findIndex(i=>jT(i,e)):Bn(t)&&jT(t,e)?0:-1}const YI=e=>e[0]==="_"||e==="$stable",M1=e=>kn(e)?e.map(da):[da(e)],L3=(e,t,i)=>{if(t._n)return t;const r=Ce((...s)=>M1(t(...s)),i);return r._c=!1,r},JI=(e,t,i)=>{const r=e._ctx;for(const s in e){if(YI(s))continue;const c=e[s];if(Bn(c))t[s]=L3(s,c,r);else if(c!=null){const d=M1(c);t[s]=()=>d}}},QI=(e,t)=>{const i=M1(t);e.slots.default=()=>i},O3=(e,t)=>{if(e.vnode.shapeFlag&32){const i=t._;i?(e.slots=di(t),qv(t,"_",i)):JI(t,e.slots={})}else e.slots={},t&&QI(e,t);qv(e.slots,H_,1)},R3=(e,t,i)=>{const{vnode:r,slots:s}=e;let c=!0,d=Mi;if(r.shapeFlag&32){const l=t._;l?i&&l===1?c=!1:(ir(s,t),!i&&l===1&&delete s._):(c=!t.$stable,JI(t,s)),d=t}else t&&(QI(e,t),d={default:1});if(c)for(const l in s)!YI(l)&&d[l]==null&&delete s[l]};function Qv(e,t,i,r,s=!1){if(kn(e)){e.forEach((C,I)=>Qv(C,t&&(kn(t)?t[I]:t),i,r,s));return}if(ku(r)&&!s)return;const c=r.shapeFlag&4?G_(r.component)||r.component.proxy:r.el,d=s?null:c,{i:l,r:m}=e,g=t&&t.r,y=l.refs===Mi?l.refs={}:l.refs,x=l.setupState;if(g!=null&&g!==m&&(rr(g)?(y[g]=null,Si(x,g)&&(x[g]=null)):cr(g)&&(g.value=null)),Bn(m))wl(m,l,12,[d,y]);else{const C=rr(m),I=cr(m),A=e.f;if(C||I){const O=()=>{if(A){const F=C?Si(x,m)?x[m]:y[m]:m.value;s?kn(F)&&i1(F,c):kn(F)?F.includes(c)||F.push(c):C?(y[m]=[c],Si(x,m)&&(x[m]=y[m])):(m.value=[c],e.k&&(y[e.k]=m.value))}else C?(y[m]=d,Si(x,m)&&(x[m]=d)):I&&(m.value=d,e.k&&(y[e.k]=d))};s||A?O():(O.id=-1,Jr(O,i))}}}let rc=!1;const F3=e=>e.namespaceURI.includes("svg")&&e.tagName!=="foreignObject",$3=e=>e.namespaceURI.includes("MathML"),tv=e=>{if(F3(e))return"svg";if($3(e))return"mathml"},nv=e=>e.nodeType===8;function z3(e){const{mt:t,p:i,o:{patchProp:r,createText:s,nextSibling:c,parentNode:d,remove:l,insert:m,createComment:g}}=e,y=(H,q)=>{if(!q.hasChildNodes()){i(null,H,q),Yv(),q._vnode=H;return}rc=!1,x(q.firstChild,H,null,null,null),Yv(),q._vnode=H,rc&&console.error("Hydration completed but contains mismatches.")},x=(H,q,ee,Q,ve,se=!1)=>{const K=nv(H)&&H.data==="[",J=()=>O(H,q,ee,Q,ve,K),{type:W,ref:te,shapeFlag:j,patchFlag:re}=q;let Te=H.nodeType;q.el=H,re===-2&&(se=!1,q.dynamicChildren=null);let ye=null;switch(W){case Fu:Te!==3?q.children===""?(m(q.el=s(""),d(H),H),ye=H):ye=J():(H.data!==q.children&&(rc=!0,H.data=q.children),ye=c(H));break;case gs:U(H)?(ye=c(H),z(q.el=H.content.firstChild,H,ee)):Te!==8||K?ye=J():ye=c(H);break;case Pu:if(K&&(H=c(H),Te=H.nodeType),Te===1||Te===3){ye=H;const Ve=!q.children.length;for(let Ue=0;Ue<q.staticCount;Ue++)Ve&&(q.children+=ye.nodeType===1?ye.outerHTML:ye.data),Ue===q.staticCount-1&&(q.anchor=ye),ye=c(ye);return K?c(ye):ye}else J();break;case Ut:K?ye=A(H,q,ee,Q,ve,se):ye=J();break;default:if(j&1)(Te!==1||q.type.toLowerCase()!==H.tagName.toLowerCase())&&!U(H)?ye=J():ye=C(H,q,ee,Q,ve,se);else if(j&6){q.slotScopeIds=ve;const Ve=d(H);if(K?ye=F(H):nv(H)&&H.data==="teleport start"?ye=F(H,H.data,"teleport end"):ye=c(H),t(q,Ve,null,ee,Q,tv(Ve),se),ku(q)){let Ue;K?(Ue=_e(Ut),Ue.anchor=ye?ye.previousSibling:Ve.lastChild):Ue=H.nodeType===3?Ot(""):_e("div"),Ue.el=H,q.component.subTree=Ue}}else j&64?Te!==8?ye=J():ye=q.type.hydrate(H,q,ee,Q,ve,se,e,I):j&128&&(ye=q.type.hydrate(H,q,ee,Q,tv(d(H)),ve,se,e,x))}return te!=null&&Qv(te,null,Q,q),ye},C=(H,q,ee,Q,ve,se)=>{se=se||!!q.dynamicChildren;const{type:K,props:J,patchFlag:W,shapeFlag:te,dirs:j,transition:re}=q,Te=K==="input"||K==="option";if(Te||W!==-1){j&&Po(q,null,ee,"created");let ye=!1;if(U(H)){ye=iA(Q,re)&&ee&&ee.vnode.props&&ee.vnode.props.appear;const Ue=H.content.firstChild;ye&&re.beforeEnter(Ue),z(Ue,H,ee),q.el=H=Ue}if(te&16&&!(J&&(J.innerHTML||J.textContent))){let Ue=I(H.firstChild,q,H,ee,Q,ve,se);for(;Ue;){rc=!0;const Qe=Ue;Ue=Ue.nextSibling,l(Qe)}}else te&8&&H.textContent!==q.children&&(rc=!0,H.textContent=q.children);if(J)if(Te||!se||W&48)for(const Ue in J)(Te&&(Ue.endsWith("value")||Ue==="indeterminate")||dm(Ue)&&!Tp(Ue)||Ue[0]===".")&&r(H,Ue,null,J[Ue],void 0,void 0,ee);else J.onClick&&r(H,"onClick",null,J.onClick,void 0,void 0,ee);let Ve;(Ve=J&&J.onVnodeBeforeMount)&&Ks(Ve,ee,q),j&&Po(q,null,ee,"beforeMount"),((Ve=J&&J.onVnodeMounted)||j||ye)&&MI(()=>{Ve&&Ks(Ve,ee,q),ye&&re.enter(H),j&&Po(q,null,ee,"mounted")},Q)}return H.nextSibling},I=(H,q,ee,Q,ve,se,K)=>{K=K||!!q.dynamicChildren;const J=q.children,W=J.length;for(let te=0;te<W;te++){const j=K?J[te]:J[te]=da(J[te]);if(H)H=x(H,j,Q,ve,se,K);else{if(j.type===Fu&&!j.children)continue;rc=!0,i(null,j,ee,null,Q,ve,tv(ee),se)}}return H},A=(H,q,ee,Q,ve,se)=>{const{slotScopeIds:K}=q;K&&(ve=ve?ve.concat(K):K);const J=d(H),W=I(c(H),q,J,ee,Q,ve,se);return W&&nv(W)&&W.data==="]"?c(q.anchor=W):(rc=!0,m(q.anchor=g("]"),J,W),W)},O=(H,q,ee,Q,ve,se)=>{if(rc=!0,q.el=null,se){const W=F(H);for(;;){const te=c(H);if(te&&te!==W)l(te);else break}}const K=c(H),J=d(H);return l(H),i(null,q,J,K,ee,Q,tv(J),ve),K},F=(H,q="[",ee="]")=>{let Q=0;for(;H;)if(H=c(H),H&&nv(H)&&(H.data===q&&Q++,H.data===ee)){if(Q===0)return c(H);Q--}return H},z=(H,q,ee)=>{const Q=q.parentNode;Q&&Q.replaceChild(H,q);let ve=ee;for(;ve;)ve.vnode.el===q&&(ve.vnode.el=ve.subTree.el=H),ve=ve.parent},U=H=>H.nodeType===1&&H.tagName.toLowerCase()==="template";return[y,x]}const Jr=MI;function eA(e){return nA(e)}function tA(e){return nA(e,z3)}function nA(e,t){const i=tI();i.__VUE__=!0;const{insert:r,remove:s,patchProp:c,createElement:d,createText:l,createComment:m,setText:g,setElementText:y,parentNode:x,nextSibling:C,setScopeId:I=Ds,insertStaticContent:A}=e,O=(me,Ie,at,Z=null,he=null,$e=null,et=void 0,Se=null,mt=!!Ie.dynamicChildren)=>{if(me===Ie)return;me&&!ao(me,Ie)&&(Z=Xe(me),it(me,he,$e,!0),me=null),Ie.patchFlag===-2&&(mt=!1,Ie.dynamicChildren=null);const{type:gt,ref:At,shapeFlag:Ft}=Ie;switch(gt){case Fu:F(me,Ie,at,Z);break;case gs:z(me,Ie,at,Z);break;case Pu:me==null&&U(Ie,at,Z,et);break;case Ut:te(me,Ie,at,Z,he,$e,et,Se,mt);break;default:Ft&1?ee(me,Ie,at,Z,he,$e,et,Se,mt):Ft&6?j(me,Ie,at,Z,he,$e,et,Se,mt):(Ft&64||Ft&128)&&gt.process(me,Ie,at,Z,he,$e,et,Se,mt,Nt)}At!=null&&he&&Qv(At,me&&me.ref,$e,Ie||me,!Ie)},F=(me,Ie,at,Z)=>{if(me==null)r(Ie.el=l(Ie.children),at,Z);else{const he=Ie.el=me.el;Ie.children!==me.children&&g(he,Ie.children)}},z=(me,Ie,at,Z)=>{me==null?r(Ie.el=m(Ie.children||""),at,Z):Ie.el=me.el},U=(me,Ie,at,Z)=>{[me.el,me.anchor]=A(me.children,Ie,at,Z,me.el,me.anchor)},H=({el:me,anchor:Ie},at,Z)=>{let he;for(;me&&me!==Ie;)he=C(me),r(me,at,Z),me=he;r(Ie,at,Z)},q=({el:me,anchor:Ie})=>{let at;for(;me&&me!==Ie;)at=C(me),s(me),me=at;s(Ie)},ee=(me,Ie,at,Z,he,$e,et,Se,mt)=>{Ie.type==="svg"?et="svg":Ie.type==="math"&&(et="mathml"),me==null?Q(Ie,at,Z,he,$e,et,Se,mt):K(me,Ie,he,$e,et,Se,mt)},Q=(me,Ie,at,Z,he,$e,et,Se)=>{let mt,gt;const{props:At,shapeFlag:Ft,transition:Kt,dirs:an}=me;if(mt=me.el=d(me.type,$e,At&&At.is,At),Ft&8?y(mt,me.children):Ft&16&&se(me.children,mt,null,Z,he,$0(me,$e),et,Se),an&&Po(me,null,Z,"created"),ve(mt,me,me.scopeId,et,Z),At){for(const jn in At)jn!=="value"&&!Tp(jn)&&c(mt,jn,null,At[jn],$e,me.children,Z,he,wt);"value"in At&&c(mt,"value",null,At.value,$e),(gt=At.onVnodeBeforeMount)&&Ks(gt,Z,me)}an&&Po(me,null,Z,"beforeMount");const Pn=iA(he,Kt);Pn&&Kt.beforeEnter(mt),r(mt,Ie,at),((gt=At&&At.onVnodeMounted)||Pn||an)&&Jr(()=>{gt&&Ks(gt,Z,me),Pn&&Kt.enter(mt),an&&Po(me,null,Z,"mounted")},he)},ve=(me,Ie,at,Z,he)=>{if(at&&I(me,at),Z)for(let $e=0;$e<Z.length;$e++)I(me,Z[$e]);if(he){let $e=he.subTree;if(Ie===$e){const et=he.vnode;ve(me,et,et.scopeId,et.slotScopeIds,he.parent)}}},se=(me,Ie,at,Z,he,$e,et,Se,mt=0)=>{for(let gt=mt;gt<me.length;gt++){const At=me[gt]=Se?fc(me[gt]):da(me[gt]);O(null,At,Ie,at,Z,he,$e,et,Se)}},K=(me,Ie,at,Z,he,$e,et)=>{const Se=Ie.el=me.el;let{patchFlag:mt,dynamicChildren:gt,dirs:At}=Ie;mt|=me.patchFlag&16;const Ft=me.props||Mi,Kt=Ie.props||Mi;let an;if(at&&hu(at,!1),(an=Kt.onVnodeBeforeUpdate)&&Ks(an,at,Ie,me),At&&Po(Ie,me,at,"beforeUpdate"),at&&hu(at,!0),gt?J(me.dynamicChildren,gt,Se,at,Z,$0(Ie,he),$e):et||Ue(me,Ie,Se,null,at,Z,$0(Ie,he),$e,!1),mt>0){if(mt&16)W(Se,Ie,Ft,Kt,at,Z,he);else if(mt&2&&Ft.class!==Kt.class&&c(Se,"class",null,Kt.class,he),mt&4&&c(Se,"style",Ft.style,Kt.style,he),mt&8){const Pn=Ie.dynamicProps;for(let jn=0;jn<Pn.length;jn++){const tt=Pn[jn],nt=Ft[tt],ut=Kt[tt];(ut!==nt||tt==="value")&&c(Se,tt,nt,ut,he,me.children,at,Z,wt)}}mt&1&&me.children!==Ie.children&&y(Se,Ie.children)}else!et&&gt==null&&W(Se,Ie,Ft,Kt,at,Z,he);((an=Kt.onVnodeUpdated)||At)&&Jr(()=>{an&&Ks(an,at,Ie,me),At&&Po(Ie,me,at,"updated")},Z)},J=(me,Ie,at,Z,he,$e,et)=>{for(let Se=0;Se<Ie.length;Se++){const mt=me[Se],gt=Ie[Se],At=mt.el&&(mt.type===Ut||!ao(mt,gt)||mt.shapeFlag&70)?x(mt.el):at;O(mt,gt,At,null,Z,he,$e,et,!0)}},W=(me,Ie,at,Z,he,$e,et)=>{if(at!==Z){if(at!==Mi)for(const Se in at)!Tp(Se)&&!(Se in Z)&&c(me,Se,at[Se],null,et,Ie.children,he,$e,wt);for(const Se in Z){if(Tp(Se))continue;const mt=Z[Se],gt=at[Se];mt!==gt&&Se!=="value"&&c(me,Se,gt,mt,et,Ie.children,he,$e,wt)}"value"in Z&&c(me,"value",at.value,Z.value,et)}},te=(me,Ie,at,Z,he,$e,et,Se,mt)=>{const gt=Ie.el=me?me.el:l(""),At=Ie.anchor=me?me.anchor:l("");let{patchFlag:Ft,dynamicChildren:Kt,slotScopeIds:an}=Ie;an&&(Se=Se?Se.concat(an):an),me==null?(r(gt,at,Z),r(At,at,Z),se(Ie.children||[],at,At,he,$e,et,Se,mt)):Ft>0&&Ft&64&&Kt&&me.dynamicChildren?(J(me.dynamicChildren,Kt,at,he,$e,et,Se),(Ie.key!=null||he&&Ie===he.subTree)&&k1(me,Ie,!0)):Ue(me,Ie,at,At,he,$e,et,Se,mt)},j=(me,Ie,at,Z,he,$e,et,Se,mt)=>{Ie.slotScopeIds=Se,me==null?Ie.shapeFlag&512?he.ctx.activate(Ie,at,Z,et,mt):re(Ie,at,Z,he,$e,et,mt):Te(me,Ie,mt)},re=(me,Ie,at,Z,he,$e,et)=>{const Se=me.component=dA(me,Z,he);if(vm(me)&&(Se.ctx.renderer=Nt),fA(Se),Se.asyncDep){if(he&&he.registerDep(Se,ye),!me.el){const mt=Se.subTree=_e(gs);z(null,mt,Ie,at)}}else ye(Se,me,Ie,at,he,$e,et)},Te=(me,Ie,at)=>{const Z=Ie.component=me.component;if(KR(me,Ie,at))if(Z.asyncDep&&!Z.asyncResolved){Ve(Z,Ie,at);return}else Z.next=Ie,VR(Z.update),Z.effect.dirty=!0,Z.update();else Ie.el=me.el,Z.vnode=Ie},ye=(me,Ie,at,Z,he,$e,et)=>{const Se=()=>{if(me.isMounted){let{next:At,bu:Ft,u:Kt,parent:an,vnode:Pn}=me;{const qe=rA(me);if(qe){At&&(At.el=Pn.el,Ve(me,At,et)),qe.asyncDep.then(()=>{me.isUnmounted||Se()});return}}let jn=At,tt;hu(me,!1),At?(At.el=Pn.el,Ve(me,At,et)):At=Pn,Ft&&lh(Ft),(tt=At.props&&At.props.onVnodeBeforeUpdate)&&Ks(tt,an,At,Pn),hu(me,!0);const nt=Mv(me),ut=me.subTree;me.subTree=nt,O(ut,nt,x(ut.el),Xe(ut),me,he,$e),At.el=nt.el,jn===null&&_1(me,nt.el),Kt&&Jr(Kt,he),(tt=At.props&&At.props.onVnodeUpdated)&&Jr(()=>Ks(tt,an,At,Pn),he)}else{let At;const{el:Ft,props:Kt}=Ie,{bm:an,m:Pn,parent:jn}=me,tt=ku(Ie);if(hu(me,!1),an&&lh(an),!tt&&(At=Kt&&Kt.onVnodeBeforeMount)&&Ks(At,jn,Ie),hu(me,!0),Ft&&Sn){const nt=()=>{me.subTree=Mv(me),Sn(Ft,me.subTree,me,he,null)};tt?Ie.type.__asyncLoader().then(()=>!me.isUnmounted&&nt()):nt()}else{const nt=me.subTree=Mv(me);O(null,nt,at,Z,me,he,$e),Ie.el=nt.el}if(Pn&&Jr(Pn,he),!tt&&(At=Kt&&Kt.onVnodeMounted)){const nt=Ie;Jr(()=>Ks(At,jn,nt),he)}(Ie.shapeFlag&256||jn&&ku(jn.vnode)&&jn.vnode.shapeFlag&256)&&me.a&&Jr(me.a,he),me.isMounted=!0,Ie=at=Z=null}},mt=me.effect=new gh(Se,Ds,()=>z_(gt),me.scope),gt=me.update=()=>{mt.dirty&&mt.run()};gt.id=me.uid,hu(me,!0),gt()},Ve=(me,Ie,at)=>{Ie.component=me;const Z=me.vnode.props;me.vnode=Ie,me.next=null,D3(me,Ie.props,Z,at),R3(me,Ie.children,at),Wu(),PT(me),qu()},Ue=(me,Ie,at,Z,he,$e,et,Se,mt=!1)=>{const gt=me&&me.children,At=me?me.shapeFlag:0,Ft=Ie.children,{patchFlag:Kt,shapeFlag:an}=Ie;if(Kt>0){if(Kt&128){It(gt,Ft,at,Z,he,$e,et,Se,mt);return}else if(Kt&256){Qe(gt,Ft,at,Z,he,$e,et,Se,mt);return}}an&8?(At&16&&wt(gt,he,$e),Ft!==gt&&y(at,Ft)):At&16?an&16?It(gt,Ft,at,Z,he,$e,et,Se,mt):wt(gt,he,$e,!0):(At&8&&y(at,""),an&16&&se(Ft,at,Z,he,$e,et,Se,mt))},Qe=(me,Ie,at,Z,he,$e,et,Se,mt)=>{me=me||ah,Ie=Ie||ah;const gt=me.length,At=Ie.length,Ft=Math.min(gt,At);let Kt;for(Kt=0;Kt<Ft;Kt++){const an=Ie[Kt]=mt?fc(Ie[Kt]):da(Ie[Kt]);O(me[Kt],an,at,null,he,$e,et,Se,mt)}gt>At?wt(me,he,$e,!0,!1,Ft):se(Ie,at,Z,he,$e,et,Se,mt,Ft)},It=(me,Ie,at,Z,he,$e,et,Se,mt)=>{let gt=0;const At=Ie.length;let Ft=me.length-1,Kt=At-1;for(;gt<=Ft&&gt<=Kt;){const an=me[gt],Pn=Ie[gt]=mt?fc(Ie[gt]):da(Ie[gt]);if(ao(an,Pn))O(an,Pn,at,null,he,$e,et,Se,mt);else break;gt++}for(;gt<=Ft&&gt<=Kt;){const an=me[Ft],Pn=Ie[Kt]=mt?fc(Ie[Kt]):da(Ie[Kt]);if(ao(an,Pn))O(an,Pn,at,null,he,$e,et,Se,mt);else break;Ft--,Kt--}if(gt>Ft){if(gt<=Kt){const an=Kt+1,Pn=an<At?Ie[an].el:Z;for(;gt<=Kt;)O(null,Ie[gt]=mt?fc(Ie[gt]):da(Ie[gt]),at,Pn,he,$e,et,Se,mt),gt++}}else if(gt>Kt)for(;gt<=Ft;)it(me[gt],he,$e,!0),gt++;else{const an=gt,Pn=gt,jn=new Map;for(gt=Pn;gt<=Kt;gt++){const xn=Ie[gt]=mt?fc(Ie[gt]):da(Ie[gt]);xn.key!=null&&jn.set(xn.key,gt)}let tt,nt=0;const ut=Kt-Pn+1;let qe=!1,Qt=0;const Zt=new Array(ut);for(gt=0;gt<ut;gt++)Zt[gt]=0;for(gt=an;gt<=Ft;gt++){const xn=me[gt];if(nt>=ut){it(xn,he,$e,!0);continue}let Mt;if(xn.key!=null)Mt=jn.get(xn.key);else for(tt=Pn;tt<=Kt;tt++)if(Zt[tt-Pn]===0&&ao(xn,Ie[tt])){Mt=tt;break}Mt===void 0?it(xn,he,$e,!0):(Zt[Mt-Pn]=gt+1,Mt>=Qt?Qt=Mt:qe=!0,O(xn,Ie[Mt],at,null,he,$e,et,Se,mt),nt++)}const Cn=qe?N3(Zt):ah;for(tt=Cn.length-1,gt=ut-1;gt>=0;gt--){const xn=Pn+gt,Mt=Ie[xn],Ht=xn+1<At?Ie[xn+1].el:Z;Zt[gt]===0?O(null,Mt,at,Ht,he,$e,et,Se,mt):qe&&(tt<0||gt!==Cn[tt]?vt(Mt,at,Ht,2):tt--)}}},vt=(me,Ie,at,Z,he=null)=>{const{el:$e,type:et,transition:Se,children:mt,shapeFlag:gt}=me;if(gt&6){vt(me.component.subTree,Ie,at,Z);return}if(gt&128){me.suspense.move(Ie,at,Z);return}if(gt&64){et.move(me,Ie,at,Nt);return}if(et===Ut){r($e,Ie,at);for(let Ft=0;Ft<mt.length;Ft++)vt(mt[Ft],Ie,at,Z);r(me.anchor,Ie,at);return}if(et===Pu){H(me,Ie,at);return}if(Z!==2&&gt&1&&Se)if(Z===0)Se.beforeEnter($e),r($e,Ie,at),Jr(()=>Se.enter($e),he);else{const{leave:Ft,delayLeave:Kt,afterLeave:an}=Se,Pn=()=>r($e,Ie,at),jn=()=>{Ft($e,()=>{Pn(),an&&an()})};Kt?Kt($e,Pn,jn):jn()}else r($e,Ie,at)},it=(me,Ie,at,Z=!1,he=!1)=>{const{type:$e,props:et,ref:Se,children:mt,dynamicChildren:gt,shapeFlag:At,patchFlag:Ft,dirs:Kt}=me;if(Se!=null&&Qv(Se,null,at,me,!0),At&256){Ie.ctx.deactivate(me);return}const an=At&1&&Kt,Pn=!ku(me);let jn;if(Pn&&(jn=et&&et.onVnodeBeforeUnmount)&&Ks(jn,Ie,me),At&6)Ct(me.component,at,Z);else{if(At&128){me.suspense.unmount(at,Z);return}an&&Po(me,null,Ie,"beforeUnmount"),At&64?me.type.remove(me,Ie,at,he,Nt,Z):gt&&($e!==Ut||Ft>0&&Ft&64)?wt(gt,Ie,at,!1,!0):($e===Ut&&Ft&384||!he&&At&16)&&wt(mt,Ie,at),Z&&Ge(me)}(Pn&&(jn=et&&et.onVnodeUnmounted)||an)&&Jr(()=>{jn&&Ks(jn,Ie,me),an&&Po(me,null,Ie,"unmounted")},at)},Ge=me=>{const{type:Ie,el:at,anchor:Z,transition:he}=me;if(Ie===Ut){ot(at,Z);return}if(Ie===Pu){q(me);return}const $e=()=>{s(at),he&&!he.persisted&&he.afterLeave&&he.afterLeave()};if(me.shapeFlag&1&&he&&!he.persisted){const{leave:et,delayLeave:Se}=he,mt=()=>et(at,$e);Se?Se(me.el,$e,mt):mt()}else $e()},ot=(me,Ie)=>{let at;for(;me!==Ie;)at=C(me),s(me),me=at;s(Ie)},Ct=(me,Ie,at)=>{const{bum:Z,scope:he,update:$e,subTree:et,um:Se}=me;Z&&lh(Z),he.stop(),$e&&($e.active=!1,it(et,me,Ie,at)),Se&&Jr(Se,Ie),Jr(()=>{me.isUnmounted=!0},Ie),Ie&&Ie.pendingBranch&&!Ie.isUnmounted&&me.asyncDep&&!me.asyncResolved&&me.suspenseId===Ie.pendingId&&(Ie.deps--,Ie.deps===0&&Ie.resolve())},wt=(me,Ie,at,Z=!1,he=!1,$e=0)=>{for(let et=$e;et<me.length;et++)it(me[et],Ie,at,Z,he)},Xe=me=>me.shapeFlag&6?Xe(me.component.subTree):me.shapeFlag&128?me.suspense.next():C(me.anchor||me.el);let Dt=!1;const Tt=(me,Ie,at)=>{me==null?Ie._vnode&&it(Ie._vnode,null,null,!0):O(Ie._vnode||null,me,Ie,null,null,null,at),Dt||(Dt=!0,PT(),Yv(),Dt=!1),Ie._vnode=me},Nt={p:O,um:it,m:vt,r:Ge,mt:re,mc:se,pc:Ue,pbc:J,n:Xe,o:e};let dn,Sn;return t&&([dn,Sn]=t(Nt)),{render:Tt,hydrate:dn,createApp:k3(Tt,dn)}}function $0({type:e,props:t},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function hu({effect:e,update:t},i){e.allowRecurse=t.allowRecurse=i}function iA(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function k1(e,t,i=!1){const r=e.children,s=t.children;if(kn(r)&&kn(s))for(let c=0;c<r.length;c++){const d=r[c];let l=s[c];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[c]=fc(s[c]),l.el=d.el),i||k1(d,l)),l.type===Fu&&(l.el=d.el)}}function N3(e){const t=e.slice(),i=[0];let r,s,c,d,l;const m=e.length;for(r=0;r<m;r++){const g=e[r];if(g!==0){if(s=i[i.length-1],e[s]<g){t[r]=s,i.push(r);continue}for(c=0,d=i.length-1;c<d;)l=c+d>>1,e[i[l]]<g?c=l+1:d=l;g<e[i[c]]&&(c>0&&(t[r]=i[c-1]),i[c]=r)}}for(c=i.length,d=i[c-1];c-- >0;)i[c]=d,d=t[d];return i}function rA(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:rA(t)}const B3=e=>e.__isTeleport,Ip=e=>e&&(e.disabled||e.disabled===""),UT=e=>typeof SVGElement<"u"&&e instanceof SVGElement,HT=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Kb=(e,t)=>{const i=e&&e.to;return rr(i)?t?t(i):null:i},j3={name:"Teleport",__isTeleport:!0,process(e,t,i,r,s,c,d,l,m,g){const{mc:y,pc:x,pbc:C,o:{insert:I,querySelector:A,createText:O,createComment:F}}=g,z=Ip(t.props);let{shapeFlag:U,children:H,dynamicChildren:q}=t;if(e==null){const ee=t.el=O(""),Q=t.anchor=O("");I(ee,i,r),I(Q,i,r);const ve=t.target=Kb(t.props,A),se=t.targetAnchor=O("");ve&&(I(se,ve),d==="svg"||UT(ve)?d="svg":(d==="mathml"||HT(ve))&&(d="mathml"));const K=(J,W)=>{U&16&&y(H,J,W,s,c,d,l,m)};z?K(i,Q):ve&&K(ve,se)}else{t.el=e.el;const ee=t.anchor=e.anchor,Q=t.target=e.target,ve=t.targetAnchor=e.targetAnchor,se=Ip(e.props),K=se?i:Q,J=se?ee:ve;if(d==="svg"||UT(Q)?d="svg":(d==="mathml"||HT(Q))&&(d="mathml"),q?(C(e.dynamicChildren,q,K,s,c,d,l),k1(e,t,!0)):m||x(e,t,K,J,s,c,d,l,!1),z)se?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):iv(t,i,ee,g,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const W=t.target=Kb(t.props,A);W&&iv(t,W,null,g,0)}else se&&iv(t,Q,ve,g,1)}sA(t)},remove(e,t,i,r,{um:s,o:{remove:c}},d){const{shapeFlag:l,children:m,anchor:g,targetAnchor:y,target:x,props:C}=e;if(x&&c(y),d&&c(g),l&16){const I=d||!Ip(C);for(let A=0;A<m.length;A++){const O=m[A];s(O,t,i,I,!!O.dynamicChildren)}}},move:iv,hydrate:V3};function iv(e,t,i,{o:{insert:r},m:s},c=2){c===0&&r(e.targetAnchor,t,i);const{el:d,anchor:l,shapeFlag:m,children:g,props:y}=e,x=c===2;if(x&&r(d,t,i),(!x||Ip(y))&&m&16)for(let C=0;C<g.length;C++)s(g[C],t,i,2);x&&r(l,t,i)}function V3(e,t,i,r,s,c,{o:{nextSibling:d,parentNode:l,querySelector:m}},g){const y=t.target=Kb(t.props,m);if(y){const x=y._lpa||y.firstChild;if(t.shapeFlag&16)if(Ip(t.props))t.anchor=g(d(e),t,l(e),i,r,s,c),t.targetAnchor=x;else{t.anchor=d(e);let C=x;for(;C;)if(C=d(C),C&&C.nodeType===8&&C.data==="teleport anchor"){t.targetAnchor=C,y._lpa=t.targetAnchor&&d(t.targetAnchor);break}g(x,t,y,i,r,s,c)}sA(t)}return t.anchor&&d(t.anchor)}const _m=j3;function sA(e){const t=e.ctx;if(t&&t.ut){let i=e.children[0].el;for(;i&&i!==e.targetAnchor;)i.nodeType===1&&i.setAttribute("data-v-owner",t.uid),i=i.nextSibling;t.ut()}}const Ut=Symbol.for("v-fgt"),Fu=Symbol.for("v-txt"),gs=Symbol.for("v-cmt"),Pu=Symbol.for("v-stc"),Ap=[];let Xs=null;function B(e=!1){Ap.push(Xs=e?null:[])}function aA(){Ap.pop(),Xs=Ap[Ap.length-1]||null}let $u=1;function Xb(e){$u+=e}function oA(e){return e.dynamicChildren=$u>0?Xs||ah:null,aA(),$u>0&&Xs&&Xs.push(e),e}function fe(e,t,i,r,s,c){return oA(ue(e,t,i,r,s,c,!0))}function ze(e,t,i,r,s){return oA(_e(e,t,i,r,s,!0))}function Dc(e){return e?e.__v_isVNode===!0:!1}function ao(e,t){return e.type===t.type&&e.key===t.key}function U3(e){}const H_="__vInternal",lA=({key:e})=>e??null,kv=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?rr(e)||cr(e)||Bn(e)?{i:Mr,r:e,k:t,f:!!i}:e:null);function ue(e,t=null,i=null,r=0,s=null,c=e===Ut?0:1,d=!1,l=!1){const m={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&lA(t),ref:t&&kv(t),scopeId:B_,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:c,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Mr};return l?(P1(m,i),c&128&&e.normalize(m)):i&&(m.shapeFlag|=rr(i)?8:16),$u>0&&!d&&Xs&&(m.patchFlag>0||c&6)&&m.patchFlag!==32&&Xs.push(m),m}const _e=H3;function H3(e,t=null,i=null,r=0,s=null,c=!1){if((!e||e===II)&&(e=gs),Dc(e)){const l=va(e,t,!0);return i&&P1(l,i),$u>0&&!c&&Xs&&(l.shapeFlag&6?Xs[Xs.indexOf(e)]=l:Xs.push(l)),l.patchFlag|=-2,l}if(Y3(e)&&(e=e.__vccOpts),t){t=cA(t);let{class:l,style:m}=t;l&&!rr(l)&&(t.class=Mn(l)),Ri(m)&&(h1(m)&&!kn(m)&&(m=ir({},m)),t.style=Gu(m))}const d=rr(e)?1:AI(e)?128:B3(e)?64:Ri(e)?4:Bn(e)?2:0;return ue(e,t,i,r,s,d,c,!0)}function cA(e){return e?h1(e)||H_ in e?ir({},e):e:null}function va(e,t,i=!1){const{props:r,ref:s,patchFlag:c,children:d}=e,l=t?Hr(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&lA(l),ref:t&&t.ref?i&&s?kn(s)?s.concat(kv(t)):[s,kv(t)]:kv(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:d,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ut?c===-1?16:c|16:c,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&va(e.ssContent),ssFallback:e.ssFallback&&va(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Ot(e=" ",t=0){return _e(Fu,null,e,t)}function uA(e,t){const i=_e(Pu,null,e);return i.staticCount=t,i}function st(e="",t=!1){return t?(B(),ze(gs,null,e)):_e(gs,null,e)}function da(e){return e==null||typeof e=="boolean"?_e(gs):kn(e)?_e(Ut,null,e.slice()):typeof e=="object"?fc(e):_e(Fu,null,String(e))}function fc(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:va(e)}function P1(e,t){let i=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(kn(t))i=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),P1(e,s()),s._c&&(s._d=!0));return}else{i=32;const s=t._;!s&&!(H_ in t)?t._ctx=Mr:s===3&&Mr&&(Mr.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Bn(t)?(t={default:t,_ctx:Mr},i=32):(t=String(t),r&64?(i=16,t=[Ot(t)]):i=8);e.children=t,e.shapeFlag|=i}function Hr(...e){const t={};for(let i=0;i<e.length;i++){const r=e[i];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=Mn([t.class,r.class]));else if(s==="style")t.style=Gu([t.style,r.style]);else if(dm(s)){const c=t[s],d=r[s];d&&c!==d&&!(kn(c)&&c.includes(d))&&(t[s]=c?[].concat(c,d):d)}else s!==""&&(t[s]=r[s])}return t}function Ks(e,t,i,r=null){pa(e,t,7,[i,r])}const G3=ZI();let W3=0;function dA(e,t,i){const r=e.type,s=(t?t.appContext:e.appContext)||G3,c={uid:W3++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new a1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:XI(r,s),emitsOptions:CI(r,s),emit:null,emitted:null,propsDefaults:Mi,inheritAttrs:r.inheritAttrs,ctx:Mi,data:Mi,props:Mi,attrs:Mi,slots:Mi,refs:Mi,setupState:Mi,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return c.ctx={_:c},c.root=t?t.root:c,c.emit=HR.bind(null,c),e.ce&&e.ce(c),c}let Fr=null;const Ua=()=>Fr||Mr;let e_,Yb;{const e=tI(),t=(i,r)=>{let s;return(s=e[i])||(s=e[i]=[]),s.push(r),c=>{s.length>1?s.forEach(d=>d(c)):s[0](c)}};e_=t("__VUE_INSTANCE_SETTERS__",i=>Fr=i),Yb=t("__VUE_SSR_SETTERS__",i=>ym=i)}const zu=e=>{const t=Fr;return e_(e),e.scope.on(),()=>{e.scope.off(),e_(t)}},Jb=()=>{Fr&&Fr.scope.off(),e_(null)};function hA(e){return e.vnode.shapeFlag&4}let ym=!1;function fA(e,t=!1){t&&Yb(t);const{props:i,children:r}=e.vnode,s=hA(e);P3(e,i,s,t),O3(e,r);const c=s?q3(e,t):void 0;return t&&Yb(!1),c}function q3(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=mm(new Proxy(e.ctx,Gb));const{setup:r}=i;if(r){const s=e.setupContext=r.length>1?mA(e):null,c=zu(e);Wu();const d=wl(r,e,0,[e.props,s]);if(qu(),c(),r1(d)){if(d.then(Jb,Jb),t)return d.then(l=>{Qb(e,l,t)}).catch(l=>{Ku(l,e,0)});e.asyncDep=d}else Qb(e,d,t)}else pA(e,t)}function Qb(e,t,i){Bn(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ri(t)&&(e.setupState=m1(t)),pA(e,i)}let t_,ex;function Z3(e){t_=e,ex=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,d3))}}const K3=()=>!t_;function pA(e,t,i){const r=e.type;if(!e.render){if(!t&&t_&&!r.render){const s=r.template||I1(e).template;if(s){const{isCustomElement:c,compilerOptions:d}=e.appContext.config,{delimiters:l,compilerOptions:m}=r,g=ir(ir({isCustomElement:c,delimiters:l},d),m);r.render=t_(s,g)}}e.render=r.render||Ds,ex&&ex(e)}{const s=zu(e);Wu();try{T3(e)}finally{qu(),s()}}}function X3(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,i){return ea(e,"get","$attrs"),t[i]}}))}function mA(e){const t=i=>{e.exposed=i||{}};return{get attrs(){return X3(e)},slots:e.slots,emit:e.emit,expose:t}}function G_(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(m1(mm(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in Cp)return Cp[i](e)},has(t,i){return i in t||i in Cp}}))}function tx(e,t=!0){return Bn(e)?e.displayName||e.name:e.name||t&&e.__name}function Y3(e){return Bn(e)&&"__vccOpts"in e}const De=(e,t)=>IR(e,t,ym);function J3(e,t,i=Mi){const r=Ua(),s=Ls(t),c=ha(t),d=g1((m,g)=>{let y;return LI(()=>{const x=e[t];uo(y,x)&&(y=x,g())}),{get(){return m(),i.get?i.get(y):y},set(x){const C=r.vnode.props;!(C&&(t in C||s in C||c in C)&&(`onUpdate:${t}`in C||`onUpdate:${s}`in C||`onUpdate:${c}`in C))&&uo(x,y)&&(y=x,g()),r.emit(`update:${t}`,i.set?i.set(x):x)}}}),l=t==="modelValue"?"modelModifiers":`${t}Modifiers`;return d[Symbol.iterator]=()=>{let m=0;return{next(){return m<2?{value:m++?e[l]||{}:d,done:!1}:{done:!0}}}},d}function Jn(e,t,i){const r=arguments.length;return r===2?Ri(t)&&!kn(t)?Dc(t)?_e(e,null,[t]):_e(e,t):_e(e,null,t):(r>3?i=Array.prototype.slice.call(arguments,2):r===3&&Dc(i)&&(i=[i]),_e(e,t,i))}function Q3(){}function eF(e,t,i,r){const s=i[r];if(s&&gA(s,e))return s;const c=t();return c.memo=e.slice(),i[r]=c}function gA(e,t){const i=e.memo;if(i.length!=t.length)return!1;for(let r=0;r<i.length;r++)if(uo(i[r],t[r]))return!1;return $u>0&&Xs&&Xs.push(e),!0}const vA="3.4.15",tF=Ds,nF=NR,iF=Jd,rF=EI,sF={createComponentInstance:dA,setupComponent:fA,renderComponentRoot:Mv,setCurrentRenderingInstance:qp,isVNode:Dc,normalizeVNode:da},aF=sF,oF=null,lF=null,cF=null;/**
* @vue/runtime-dom v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const uF="http://www.w3.org/2000/svg",dF="http://www.w3.org/1998/Math/MathML",pc=typeof document<"u"?document:null,GT=pc&&pc.createElement("template"),hF={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,r)=>{const s=t==="svg"?pc.createElementNS(uF,e):t==="mathml"?pc.createElementNS(dF,e):pc.createElement(e,i?{is:i}:void 0);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>pc.createTextNode(e),createComment:e=>pc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>pc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,r,s,c){const d=i?i.previousSibling:t.lastChild;if(s&&(s===c||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),i),!(s===c||!(s=s.nextSibling)););else{GT.innerHTML=r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e;const l=GT.content;if(r==="svg"||r==="mathml"){const m=l.firstChild;for(;m.firstChild;)l.appendChild(m.firstChild);l.removeChild(m)}t.insertBefore(l,i)}return[d?d.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},sc="transition",Yf="animation",yh=Symbol("_vtc"),Cr=(e,{slots:t})=>Jn(RI,yA(e),t);Cr.displayName="Transition";const _A={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},fF=Cr.props=ir({},S1,_A),fu=(e,t=[])=>{kn(e)?e.forEach(i=>i(...t)):e&&e(...t)},WT=e=>e?kn(e)?e.some(t=>t.length>1):e.length>1:!1;function yA(e){const t={};for(const te in e)te in _A||(t[te]=e[te]);if(e.css===!1)return t;const{name:i="v",type:r,duration:s,enterFromClass:c=`${i}-enter-from`,enterActiveClass:d=`${i}-enter-active`,enterToClass:l=`${i}-enter-to`,appearFromClass:m=c,appearActiveClass:g=d,appearToClass:y=l,leaveFromClass:x=`${i}-leave-from`,leaveActiveClass:C=`${i}-leave-active`,leaveToClass:I=`${i}-leave-to`}=e,A=pF(s),O=A&&A[0],F=A&&A[1],{onBeforeEnter:z,onEnter:U,onEnterCancelled:H,onLeave:q,onLeaveCancelled:ee,onBeforeAppear:Q=z,onAppear:ve=U,onAppearCancelled:se=H}=t,K=(te,j,re)=>{cc(te,j?y:l),cc(te,j?g:d),re&&re()},J=(te,j)=>{te._isLeaving=!1,cc(te,x),cc(te,I),cc(te,C),j&&j()},W=te=>(j,re)=>{const Te=te?ve:U,ye=()=>K(j,te,re);fu(Te,[j,ye]),qT(()=>{cc(j,te?m:c),vl(j,te?y:l),WT(Te)||ZT(j,r,O,ye)})};return ir(t,{onBeforeEnter(te){fu(z,[te]),vl(te,c),vl(te,d)},onBeforeAppear(te){fu(Q,[te]),vl(te,m),vl(te,g)},onEnter:W(!1),onAppear:W(!0),onLeave(te,j){te._isLeaving=!0;const re=()=>J(te,j);vl(te,x),xA(),vl(te,C),qT(()=>{te._isLeaving&&(cc(te,x),vl(te,I),WT(q)||ZT(te,r,F,re))}),fu(q,[te,re])},onEnterCancelled(te){K(te,!1),fu(H,[te])},onAppearCancelled(te){K(te,!0),fu(se,[te])},onLeaveCancelled(te){J(te),fu(ee,[te])}})}function pF(e){if(e==null)return null;if(Ri(e))return[z0(e.enter),z0(e.leave)];{const t=z0(e);return[t,t]}}function z0(e){return Zv(e)}function vl(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.add(i)),(e[yh]||(e[yh]=new Set)).add(t)}function cc(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const i=e[yh];i&&(i.delete(t),i.size||(e[yh]=void 0))}function qT(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let mF=0;function ZT(e,t,i,r){const s=e._endId=++mF,c=()=>{s===e._endId&&r()};if(i)return setTimeout(c,i);const{type:d,timeout:l,propCount:m}=bA(e,t);if(!d)return r();const g=d+"end";let y=0;const x=()=>{e.removeEventListener(g,C),c()},C=I=>{I.target===e&&++y>=m&&x()};setTimeout(()=>{y<m&&x()},l+1),e.addEventListener(g,C)}function bA(e,t){const i=window.getComputedStyle(e),r=A=>(i[A]||"").split(", "),s=r(`${sc}Delay`),c=r(`${sc}Duration`),d=KT(s,c),l=r(`${Yf}Delay`),m=r(`${Yf}Duration`),g=KT(l,m);let y=null,x=0,C=0;t===sc?d>0&&(y=sc,x=d,C=c.length):t===Yf?g>0&&(y=Yf,x=g,C=m.length):(x=Math.max(d,g),y=x>0?d>g?sc:Yf:null,C=y?y===sc?c.length:m.length:0);const I=y===sc&&/\b(transform|all)(,|$)/.test(r(`${sc}Property`).toString());return{type:y,timeout:x,propCount:C,hasTransform:I}}function KT(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((i,r)=>XT(i)+XT(e[r])))}function XT(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function xA(){return document.body.offsetHeight}function gF(e,t,i){const r=e[yh];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const D1=Symbol("_vod"),_a={beforeMount(e,{value:t},{transition:i}){e[D1]=e.style.display==="none"?"":e.style.display,i&&t?i.beforeEnter(e):Jf(e,t)},mounted(e,{value:t},{transition:i}){i&&t&&i.enter(e)},updated(e,{value:t,oldValue:i},{transition:r}){!t!=!i&&(r?t?(r.beforeEnter(e),Jf(e,!0),r.enter(e)):r.leave(e,()=>{Jf(e,!1)}):Jf(e,t))},beforeUnmount(e,{value:t}){Jf(e,t)}};function Jf(e,t){e.style.display=t?e[D1]:"none"}function vF(){_a.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const wA=Symbol("");function bm(e){const t=Ua();if(!t)return;const i=t.ut=(s=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(c=>ix(c,s))},r=()=>{const s=e(t.proxy);nx(t.subTree,s),i(s)};DI(r),Fn(()=>{const s=new MutationObserver(r);s.observe(t.subTree.el.parentNode,{childList:!0}),Hi(()=>s.disconnect())})}function nx(e,t){if(e.shapeFlag&128){const i=e.suspense;e=i.activeBranch,i.pendingBranch&&!i.isHydrating&&i.effects.push(()=>{nx(i.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)ix(e.el,t);else if(e.type===Ut)e.children.forEach(i=>nx(i,t));else if(e.type===Pu){let{el:i,anchor:r}=e;for(;i&&(ix(i,t),i!==r);)i=i.nextSibling}}function ix(e,t){if(e.nodeType===1){const i=e.style;let r="";for(const s in t)i.setProperty(`--${s}`,t[s]),r+=`--${s}: ${t[s]};`;i[wA]=r}}function _F(e,t,i){const r=e.style,s=r.display,c=rr(i);if(i&&!c){if(t&&!rr(t))for(const d in t)i[d]==null&&rx(r,d,"");for(const d in i)rx(r,d,i[d])}else if(c){if(t!==i){const d=r[wA];d&&(i+=";"+d),r.cssText=i}}else t&&e.removeAttribute("style");D1 in e&&(r.display=s)}const JT=/\s*!important$/;function rx(e,t,i){if(kn(i))i.forEach(r=>rx(e,t,r));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const r=yF(e,t);JT.test(i)?e.setProperty(ha(r),i.replace(JT,""),"important"):e[r]=i}}const QT=["Webkit","Moz","ms"],N0={};function yF(e,t){const i=N0[t];if(i)return i;let r=Ls(t);if(r!=="filter"&&r in e)return N0[t]=r;r=hm(r);for(let s=0;s<QT.length;s++){const c=QT[s]+r;if(c in e)return N0[t]=c}return t}const eE="http://www.w3.org/1999/xlink";function bF(e,t,i,r,s){if(r&&t.startsWith("xlink:"))i==null?e.removeAttributeNS(eE,t.slice(6,t.length)):e.setAttributeNS(eE,t,i);else{const c=iR(t);i==null||c&&!nI(i)?e.removeAttribute(t):e.setAttribute(t,c?"":i)}}function xF(e,t,i,r,s,c,d){if(t==="innerHTML"||t==="textContent"){r&&d(r,s,c),e[t]=i??"";return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){e._value=i;const g=l==="OPTION"?e.getAttribute("value"):e.value,y=i??"";g!==y&&(e.value=y),i==null&&e.removeAttribute(t);return}let m=!1;if(i===""||i==null){const g=typeof e[t];g==="boolean"?i=nI(i):i==null&&g==="string"?(i="",m=!0):g==="number"&&(i=0,m=!0)}try{e[t]=i}catch{}m&&e.removeAttribute(t)}function bl(e,t,i,r){e.addEventListener(t,i,r)}function wF(e,t,i,r){e.removeEventListener(t,i,r)}const tE=Symbol("_vei");function SF(e,t,i,r,s=null){const c=e[tE]||(e[tE]={}),d=c[t];if(r&&d)d.value=r;else{const[l,m]=TF(t);if(r){const g=c[t]=IF(r,s);bl(e,l,g,m)}else d&&(wF(e,l,d,m),c[t]=void 0)}}const nE=/(?:Once|Passive|Capture)$/;function TF(e){let t;if(nE.test(e)){t={};let r;for(;r=e.match(nE);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ha(e.slice(2)),t]}let B0=0;const EF=Promise.resolve(),CF=()=>B0||(EF.then(()=>B0=0),B0=Date.now());function IF(e,t){const i=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=i.attached)return;pa(AF(r,i.value),t,5,[r])};return i.value=e,i.attached=CF(),i}function AF(e,t){if(kn(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const iE=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,MF=(e,t,i,r,s,c,d,l,m)=>{const g=s==="svg";t==="class"?gF(e,r,g):t==="style"?_F(e,i,r):dm(t)?n1(t)||SF(e,t,i,r,d):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):kF(e,t,r,g))?xF(e,t,r,c,d,l,m):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),bF(e,t,r,g))};function kF(e,t,i,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&iE(t)&&Bn(i));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return iE(t)&&rr(i)?!1:t in e}/*! #__NO_SIDE_EFFECTS__ */function SA(e,t){const i=lt(e);class r extends W_{constructor(c){super(i,c,t)}}return r.def=i,r}/*! #__NO_SIDE_EFFECTS__ */const PF=e=>SA(e,OA),DF=typeof HTMLElement<"u"?HTMLElement:class{};class W_ extends DF{constructor(t,i={},r){super(),this._def=t,this._props=i,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this._ob=null,this.shadowRoot&&r?r(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,this._ob&&(this._ob.disconnect(),this._ob=null),Ir(()=>{this._connected||(sx(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const s of r)this._setAttr(s.attributeName)}),this._ob.observe(this,{attributes:!0});const t=(r,s=!1)=>{const{props:c,styles:d}=r;let l;if(c&&!kn(c))for(const m in c){const g=c[m];(g===Number||g&&g.type===Number)&&(m in this._props&&(this._props[m]=Zv(this._props[m])),(l||(l=Object.create(null)))[Ls(m)]=!0)}this._numberProps=l,s&&this._resolveProps(r),this._applyStyles(d),this._update()},i=this._def.__asyncLoader;i?i().then(r=>t(r,!0)):t(this._def)}_resolveProps(t){const{props:i}=t,r=kn(i)?i:Object.keys(i||{});for(const s of Object.keys(this))s[0]!=="_"&&r.includes(s)&&this._setProp(s,this[s],!0,!1);for(const s of r.map(Ls))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(c){this._setProp(s,c)}})}_setAttr(t){let i=this.getAttribute(t);const r=Ls(t);this._numberProps&&this._numberProps[r]&&(i=Zv(i)),this._setProp(r,i,!1)}_getProp(t){return this._props[t]}_setProp(t,i,r=!0,s=!0){i!==this._props[t]&&(this._props[t]=i,s&&this._instance&&this._update(),r&&(i===!0?this.setAttribute(ha(t),""):typeof i=="string"||typeof i=="number"?this.setAttribute(ha(t),i+""):i||this.removeAttribute(ha(t))))}_update(){sx(this._createVNode(),this.shadowRoot)}_createVNode(){const t=_e(this._def,ir({},this._props));return this._instance||(t.ce=i=>{this._instance=i,i.isCE=!0;const r=(c,d)=>{this.dispatchEvent(new CustomEvent(c,{detail:d}))};i.emit=(c,...d)=>{r(c,d),ha(c)!==c&&r(ha(c),d)};let s=this;for(;s=s&&(s.parentNode||s.host);)if(s instanceof W_){i.parent=s._instance,i.provides=s._instance.provides;break}}),t}_applyStyles(t){t&&t.forEach(i=>{const r=document.createElement("style");r.textContent=i,this.shadowRoot.appendChild(r)})}}function LF(e="$style"){{const t=Ua();if(!t)return Mi;const i=t.type.__cssModules;if(!i)return Mi;const r=i[e];return r||Mi}}const TA=new WeakMap,EA=new WeakMap,n_=Symbol("_moveCb"),rE=Symbol("_enterCb"),CA={name:"TransitionGroup",props:ir({},fF,{tag:String,moveClass:String}),setup(e,{slots:t}){const i=Ua(),r=w1();let s,c;return zh(()=>{if(!s.length)return;const d=e.moveClass||`${e.name||"v"}-move`;if(!zF(s[0].el,i.vnode.el,d))return;s.forEach(RF),s.forEach(FF);const l=s.filter($F);xA(),l.forEach(m=>{const g=m.el,y=g.style;vl(g,d),y.transform=y.webkitTransform=y.transitionDuration="";const x=g[n_]=C=>{C&&C.target!==g||(!C||/transform$/.test(C.propertyName))&&(g.removeEventListener("transitionend",x),g[n_]=null,cc(g,d))};g.addEventListener("transitionend",x)})}),()=>{const d=di(e),l=yA(d);let m=d.tag||Ut;s=c,c=t.default?V_(t.default()):[];for(let g=0;g<c.length;g++){const y=c[g];y.key!=null&&Ru(y,_h(y,l,r,i))}if(s)for(let g=0;g<s.length;g++){const y=s[g];Ru(y,_h(y,l,r,i)),TA.set(y,y.el.getBoundingClientRect())}return _e(m,null,c)}}},OF=e=>delete e.mode;CA.props;const L1=CA;function RF(e){const t=e.el;t[n_]&&t[n_](),t[rE]&&t[rE]()}function FF(e){EA.set(e,e.el.getBoundingClientRect())}function $F(e){const t=TA.get(e),i=EA.get(e),r=t.left-i.left,s=t.top-i.top;if(r||s){const c=e.el.style;return c.transform=c.webkitTransform=`translate(${r}px,${s}px)`,c.transitionDuration="0s",e}}function zF(e,t,i){const r=e.cloneNode(),s=e[yh];s&&s.forEach(l=>{l.split(/\s+/).forEach(m=>m&&r.classList.remove(m))}),i.split(/\s+/).forEach(l=>l&&r.classList.add(l)),r.style.display="none";const c=t.nodeType===1?t:t.parentNode;c.appendChild(r);const{hasTransform:d}=bA(r);return c.removeChild(r),d}const Lc=e=>{const t=e.props["onUpdate:modelValue"]||!1;return kn(t)?i=>lh(t,i):t};function NF(e){e.target.composing=!0}function sE(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Pa=Symbol("_assign"),i_={created(e,{modifiers:{lazy:t,trim:i,number:r}},s){e[Pa]=Lc(s);const c=r||s.props&&s.props.type==="number";bl(e,t?"change":"input",d=>{if(d.target.composing)return;let l=e.value;i&&(l=l.trim()),c&&(l=Vp(l)),e[Pa](l)}),i&&bl(e,"change",()=>{e.value=e.value.trim()}),t||(bl(e,"compositionstart",NF),bl(e,"compositionend",sE),bl(e,"change",sE))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:i,trim:r,number:s}},c){if(e[Pa]=Lc(c),e.composing)return;const d=s||e.type==="number"?Vp(e.value):e.value,l=t??"";d!==l&&(document.activeElement===e&&e.type!=="range"&&(i||r&&e.value.trim()===l)||(e.value=l))}},O1={deep:!0,created(e,t,i){e[Pa]=Lc(i),bl(e,"change",()=>{const r=e._modelValue,s=bh(e),c=e.checked,d=e[Pa];if(kn(r)){const l=L_(r,s),m=l!==-1;if(c&&!m)d(r.concat(s));else if(!c&&m){const g=[...r];g.splice(l,1),d(g)}}else if(Hu(r)){const l=new Set(r);c?l.add(s):l.delete(s),d(l)}else d(IA(e,c))})},mounted:aE,beforeUpdate(e,t,i){e[Pa]=Lc(i),aE(e,t,i)}};function aE(e,{value:t,oldValue:i},r){e._modelValue=t,kn(t)?e.checked=L_(t,r.props.value)>-1:Hu(t)?e.checked=t.has(r.props.value):t!==i&&(e.checked=El(t,IA(e,!0)))}const R1={created(e,{value:t},i){e.checked=El(t,i.props.value),e[Pa]=Lc(i),bl(e,"change",()=>{e[Pa](bh(e))})},beforeUpdate(e,{value:t,oldValue:i},r){e[Pa]=Lc(r),t!==i&&(e.checked=El(t,r.props.value))}},Nh={deep:!0,created(e,{value:t,modifiers:{number:i}},r){const s=Hu(t);bl(e,"change",()=>{const c=Array.prototype.filter.call(e.options,d=>d.selected).map(d=>i?Vp(bh(d)):bh(d));e[Pa](e.multiple?s?new Set(c):c:c[0]),e._assigning=!0,Ir(()=>{e._assigning=!1})}),e[Pa]=Lc(r)},mounted(e,{value:t,oldValue:i,modifiers:{number:r}}){oE(e,t,i,r)},beforeUpdate(e,t,i){e[Pa]=Lc(i)},updated(e,{value:t,oldValue:i,modifiers:{number:r}}){e._assigning||oE(e,t,i,r)}};function oE(e,t,i,r){const s=e.multiple,c=kn(t);if(!(s&&!c&&!Hu(t))&&!(c&&El(t,i))){for(let d=0,l=e.options.length;d<l;d++){const m=e.options[d],g=bh(m);if(s)if(c){const y=typeof g;y==="string"||y==="number"?m.selected=t.includes(r?Vp(g):g):m.selected=L_(t,g)>-1}else m.selected=t.has(g);else if(El(bh(m),t)){e.selectedIndex!==d&&(e.selectedIndex=d);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function bh(e){return"_value"in e?e._value:e.value}function IA(e,t){const i=t?"_trueValue":"_falseValue";return i in e?e[i]:t}const AA={created(e,t,i){rv(e,t,i,null,"created")},mounted(e,t,i){rv(e,t,i,null,"mounted")},beforeUpdate(e,t,i,r){rv(e,t,i,r,"beforeUpdate")},updated(e,t,i,r){rv(e,t,i,r,"updated")}};function MA(e,t){switch(e){case"SELECT":return Nh;case"TEXTAREA":return i_;default:switch(t){case"checkbox":return O1;case"radio":return R1;default:return i_}}}function rv(e,t,i,r,s){const d=MA(e.tagName,i.props&&i.props.type)[s];d&&d(e,t,i,r)}function BF(){i_.getSSRProps=({value:e})=>({value:e}),R1.getSSRProps=({value:e},t)=>{if(t.props&&El(t.props.value,e))return{checked:!0}},O1.getSSRProps=({value:e},t)=>{if(kn(e)){if(t.props&&L_(e,t.props.value)>-1)return{checked:!0}}else if(Hu(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},AA.getSSRProps=(e,t)=>{if(typeof t.type!="string")return;const i=MA(t.type.toUpperCase(),t.props&&t.props.type);if(i.getSSRProps)return i.getSSRProps(e,t)}}const jF=["ctrl","shift","alt","meta"],VF={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>jF.some(i=>e[`${i}Key`]&&!t.includes(i))},Uo=(e,t)=>{const i=e._withMods||(e._withMods={}),r=t.join(".");return i[r]||(i[r]=(s,...c)=>{for(let d=0;d<t.length;d++){const l=VF[t[d]];if(l&&l(s,t))return}return e(s,...c)})},UF={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},kA=(e,t)=>{const i=e._withKeys||(e._withKeys={}),r=t.join(".");return i[r]||(i[r]=s=>{if(!("key"in s))return;const c=ha(s.key);if(t.some(d=>d===c||UF[d]===c))return e(s)})},PA=ir({patchProp:MF},hF);let Mp,lE=!1;function DA(){return Mp||(Mp=eA(PA))}function LA(){return Mp=lE?Mp:tA(PA),lE=!0,Mp}const sx=(...e)=>{DA().render(...e)},OA=(...e)=>{LA().hydrate(...e)},RA=(...e)=>{const t=DA().createApp(...e),{mount:i}=t;return t.mount=r=>{const s=$A(r);if(!s)return;const c=t._component;!Bn(c)&&!c.render&&!c.template&&(c.template=s.innerHTML),s.innerHTML="";const d=i(s,!1,FA(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),d},t},HF=(...e)=>{const t=LA().createApp(...e),{mount:i}=t;return t.mount=r=>{const s=$A(r);if(s)return i(s,!0,FA(s))},t};function FA(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function $A(e){return rr(e)?document.querySelector(e):e}let cE=!1;const GF=()=>{cE||(cE=!0,BF(),vF())};/**
* vue v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const WF=()=>{},qF=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:RI,BaseTransitionPropsValidators:S1,Comment:gs,DeprecationTypes:cF,EffectScope:a1,ErrorCodes:zR,ErrorTypeStrings:nF,Fragment:Ut,KeepAlive:l3,ReactiveEffect:gh,Static:Pu,Suspense:QR,Teleport:_m,Text:Fu,TrackOpTypes:RR,Transition:Cr,TransitionGroup:L1,TriggerOpTypes:FR,VueElement:W_,assertNumber:$R,callWithAsyncErrorHandling:pa,callWithErrorHandling:wl,camelize:Ls,capitalize:hm,cloneVNode:va,compatUtils:lF,compile:WF,computed:De,createApp:RA,createBlock:ze,createCommentVNode:st,createElementBlock:fe,createElementVNode:ue,createHydrationRenderer:tA,createPropsRestProxy:w3,createRenderer:eA,createSSRApp:HF,createSlots:UI,createStaticVNode:uA,createTextVNode:Ot,createVNode:_e,customRef:g1,defineAsyncComponent:Ic,defineComponent:lt,defineCustomElement:SA,defineEmits:f3,defineExpose:p3,defineModel:v3,defineOptions:m3,defineProps:h3,defineSSRCustomElement:PF,defineSlots:g3,devtools:iF,effect:aR,effectScope:o1,getCurrentInstance:Ua,getCurrentScope:fm,getTransitionRawChildren:V_,guardReactiveProps:cA,h:Jn,handleError:Ku,hasInjectionContext:A1,hydrate:OA,initCustomFormatter:Q3,initDirectivesForSSR:GF,inject:yi,isMemoSame:gA,isProxy:h1,isReactive:$o,isReadonly:Ou,isRef:cr,isRuntimeOnly:K3,isShallow:Up,isVNode:Dc,markRaw:mm,mergeDefaults:b3,mergeModels:x3,mergeProps:Hr,nextTick:Ir,normalizeClass:Mn,normalizeProps:tR,normalizeStyle:Gu,onActivated:T1,onBeforeMount:zI,onBeforeUnmount:ta,onBeforeUpdate:C1,onDeactivated:E1,onErrorCaptured:VI,onMounted:Fn,onRenderTracked:jI,onRenderTriggered:BI,onScopeDispose:pm,onServerPrefetch:NI,onUnmounted:Hi,onUpdated:zh,openBlock:B,popScopeId:Va,provide:ki,proxyRefs:m1,pushScopeId:ja,queuePostFlushCb:Xv,reactive:es,readonly:Zu,ref:Fe,registerRuntimeCompiler:Z3,render:sx,renderList:$n,renderSlot:En,resolveComponent:j_,resolveDirective:YR,resolveDynamicComponent:zc,resolveFilter:oF,resolveTransitionHooks:_h,setBlockTracking:Xb,setDevtoolsHook:rF,setTransitionHooks:Ru,shallowReactive:d1,shallowReadonly:yu,shallowRef:$h,ssrContextKey:kI,ssrUtils:aF,stop:oR,toDisplayString:xt,toHandlerKey:Ep,toHandlers:u3,toRaw:di,toRef:vh,toRefs:$_,toValue:kR,transformVNodeArgs:U3,triggerRef:MR,unref:le,useAttrs:y3,useCssModule:LF,useCssVars:bm,useModel:J3,useSSRContext:PI,useSlots:GI,useTransitionState:w1,vModelCheckbox:O1,vModelDynamic:AA,vModelRadio:R1,vModelSelect:Nh,vModelText:i_,vShow:_a,version:vA,warn:tF,watch:pn,watchEffect:$r,watchPostEffect:DI,watchSyncEffect:LI,withAsyncContext:S3,withCtx:Ce,withDefaults:_3,withDirectives:vs,withKeys:kA,withMemo:eF,withModifiers:Uo,withScopeId:GR},Symbol.toStringTag,{value:"Module"}));var ZF=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let F1;const q_=e=>F1=e,KF=()=>A1()&&yi($1)||F1,$1=Symbol();function ax(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var kp;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(kp||(kp={}));function XF(){const e=o1(!0),t=e.run(()=>Fe({}));let i=[],r=[];const s=mm({install(c){q_(s),s._a=c,c.provide($1,s),c.config.globalProperties.$pinia=s,r.forEach(d=>i.push(d)),r=[]},use(c){return!this._a&&!ZF?r.push(c):i.push(c),this},_p:i,_a:null,_e:e,_s:new Map,state:t});return s}const zA=()=>{};function uE(e,t,i,r=zA){e.push(t);const s=()=>{const c=e.indexOf(t);c>-1&&(e.splice(c,1),r())};return!i&&fm()&&pm(s),s}function Vd(e,...t){e.slice().forEach(i=>{i(...t)})}const YF=e=>e();function ox(e,t){e instanceof Map&&t instanceof Map&&t.forEach((i,r)=>e.set(r,i)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const i in t){if(!t.hasOwnProperty(i))continue;const r=t[i],s=e[i];ax(s)&&ax(r)&&e.hasOwnProperty(i)&&!cr(r)&&!$o(r)?e[i]=ox(s,r):e[i]=r}return e}const JF=Symbol();function QF(e){return!ax(e)||!e.hasOwnProperty(JF)}const{assign:uc}=Object;function e5(e){return!!(cr(e)&&e.effect)}function t5(e,t,i,r){const{state:s,actions:c,getters:d}=t,l=i.state.value[e];let m;function g(){l||(i.state.value[e]=s?s():{});const y=$_(i.state.value[e]);return uc(y,c,Object.keys(d||{}).reduce((x,C)=>(x[C]=mm(De(()=>{q_(i);const I=i._s.get(e);return d[C].call(I,I)})),x),{}))}return m=NA(e,g,t,i,r,!0),m}function NA(e,t,i={},r,s,c){let d;const l=uc({actions:{}},i),m={deep:!0};let g,y,x=[],C=[],I;const A=r.state.value[e];!c&&!A&&(r.state.value[e]={}),Fe({});let O;function F(se){let K;g=y=!1,typeof se=="function"?(se(r.state.value[e]),K={type:kp.patchFunction,storeId:e,events:I}):(ox(r.state.value[e],se),K={type:kp.patchObject,payload:se,storeId:e,events:I});const J=O=Symbol();Ir().then(()=>{O===J&&(g=!0)}),y=!0,Vd(x,K,r.state.value[e])}const z=c?function(){const{state:K}=i,J=K?K():{};this.$patch(W=>{uc(W,J)})}:zA;function U(){d.stop(),x=[],C=[],r._s.delete(e)}function H(se,K){return function(){q_(r);const J=Array.from(arguments),W=[],te=[];function j(ye){W.push(ye)}function re(ye){te.push(ye)}Vd(C,{args:J,name:se,store:ee,after:j,onError:re});let Te;try{Te=K.apply(this&&this.$id===e?this:ee,J)}catch(ye){throw Vd(te,ye),ye}return Te instanceof Promise?Te.then(ye=>(Vd(W,ye),ye)).catch(ye=>(Vd(te,ye),Promise.reject(ye))):(Vd(W,Te),Te)}}const q={_p:r,$id:e,$onAction:uE.bind(null,C),$patch:F,$reset:z,$subscribe(se,K={}){const J=uE(x,se,K.detached,()=>W()),W=d.run(()=>pn(()=>r.state.value[e],te=>{(K.flush==="sync"?y:g)&&se({storeId:e,type:kp.direct,events:I},te)},uc({},m,K)));return J},$dispose:U},ee=es(q);r._s.set(e,ee);const ve=(r._a&&r._a.runWithContext||YF)(()=>r._e.run(()=>(d=o1()).run(t)));for(const se in ve){const K=ve[se];if(cr(K)&&!e5(K)||$o(K))c||(A&&QF(K)&&(cr(K)?K.value=A[se]:ox(K,A[se])),r.state.value[e][se]=K);else if(typeof K=="function"){const J=H(se,K);ve[se]=J,l.actions[se]=K}}return uc(ee,ve),uc(di(ee),ve),Object.defineProperty(ee,"$state",{get:()=>r.state.value[e],set:se=>{F(K=>{uc(K,se)})}}),r._p.forEach(se=>{uc(ee,d.run(()=>se({store:ee,app:r._a,pinia:r,options:l})))}),A&&c&&i.hydrate&&i.hydrate(ee.$state,A),g=!0,y=!0,ee}function Bh(e,t,i){let r,s;const c=typeof t=="function";typeof e=="string"?(r=e,s=c?i:t):(s=e,r=e.id);function d(l,m){const g=A1();return l=l||(g?yi($1,null):null),l&&q_(l),l=F1,l._s.has(r)||(c?NA(r,t,s,l):t5(r,s,l)),l._s.get(r)}return d.$id=r,d}function dE(e){{e=di(e);const t={};for(const i in e){const r=e[i];(cr(r)||$o(r))&&(t[i]=vh(e,i))}return t}}function BA(e,t){return function(){return e.apply(t,arguments)}}const{toString:n5}=Object.prototype,{getPrototypeOf:z1}=Object,Z_=(e=>t=>{const i=n5.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Yo=e=>(e=e.toLowerCase(),t=>Z_(t)===e),K_=e=>t=>typeof t===e,{isArray:jh}=Array,Yp=K_("undefined");function i5(e){return e!==null&&!Yp(e)&&e.constructor!==null&&!Yp(e.constructor)&&Da(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const jA=Yo("ArrayBuffer");function r5(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&jA(e.buffer),t}const s5=K_("string"),Da=K_("function"),VA=K_("number"),X_=e=>e!==null&&typeof e=="object",a5=e=>e===!0||e===!1,Pv=e=>{if(Z_(e)!=="object")return!1;const t=z1(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},o5=Yo("Date"),l5=Yo("File"),c5=Yo("Blob"),u5=Yo("FileList"),d5=e=>X_(e)&&Da(e.pipe),h5=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Da(e.append)&&((t=Z_(e))==="formdata"||t==="object"&&Da(e.toString)&&e.toString()==="[object FormData]"))},f5=Yo("URLSearchParams"),p5=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xm(e,t,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),jh(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{const c=i?Object.getOwnPropertyNames(e):Object.keys(e),d=c.length;let l;for(r=0;r<d;r++)l=c[r],t.call(null,e[l],l,e)}}function UA(e,t){t=t.toLowerCase();const i=Object.keys(e);let r=i.length,s;for(;r-- >0;)if(s=i[r],t===s.toLowerCase())return s;return null}const HA=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),GA=e=>!Yp(e)&&e!==HA;function lx(){const{caseless:e}=GA(this)&&this||{},t={},i=(r,s)=>{const c=e&&UA(t,s)||s;Pv(t[c])&&Pv(r)?t[c]=lx(t[c],r):Pv(r)?t[c]=lx({},r):jh(r)?t[c]=r.slice():t[c]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&xm(arguments[r],i);return t}const m5=(e,t,i,{allOwnKeys:r}={})=>(xm(t,(s,c)=>{i&&Da(s)?e[c]=BA(s,i):e[c]=s},{allOwnKeys:r}),e),g5=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),v5=(e,t,i,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},_5=(e,t,i,r)=>{let s,c,d;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),c=s.length;c-- >0;)d=s[c],(!r||r(d,e,t))&&!l[d]&&(t[d]=e[d],l[d]=!0);e=i!==!1&&z1(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},y5=(e,t,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=t.length;const r=e.indexOf(t,i);return r!==-1&&r===i},b5=e=>{if(!e)return null;if(jh(e))return e;let t=e.length;if(!VA(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},x5=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&z1(Uint8Array)),w5=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=r.next())&&!s.done;){const c=s.value;t.call(e,c[0],c[1])}},S5=(e,t)=>{let i;const r=[];for(;(i=e.exec(t))!==null;)r.push(i);return r},T5=Yo("HTMLFormElement"),E5=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,r,s){return r.toUpperCase()+s}),hE=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),C5=Yo("RegExp"),WA=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),r={};xm(i,(s,c)=>{let d;(d=t(s,c,e))!==!1&&(r[c]=d||s)}),Object.defineProperties(e,r)},I5=e=>{WA(e,(t,i)=>{if(Da(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const r=e[i];if(Da(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},A5=(e,t)=>{const i={},r=s=>{s.forEach(c=>{i[c]=!0})};return jh(e)?r(e):r(String(e).split(t)),i},M5=()=>{},k5=(e,t)=>(e=+e,Number.isFinite(e)?e:t),j0="abcdefghijklmnopqrstuvwxyz",fE="0123456789",qA={DIGIT:fE,ALPHA:j0,ALPHA_DIGIT:j0+j0.toUpperCase()+fE},P5=(e=16,t=qA.ALPHA_DIGIT)=>{let i="";const{length:r}=t;for(;e--;)i+=t[Math.random()*r|0];return i};function D5(e){return!!(e&&Da(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const L5=e=>{const t=new Array(10),i=(r,s)=>{if(X_(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[s]=r;const c=jh(r)?[]:{};return xm(r,(d,l)=>{const m=i(d,s+1);!Yp(m)&&(c[l]=m)}),t[s]=void 0,c}}return r};return i(e,0)},O5=Yo("AsyncFunction"),R5=e=>e&&(X_(e)||Da(e))&&Da(e.then)&&Da(e.catch),$t={isArray:jh,isArrayBuffer:jA,isBuffer:i5,isFormData:h5,isArrayBufferView:r5,isString:s5,isNumber:VA,isBoolean:a5,isObject:X_,isPlainObject:Pv,isUndefined:Yp,isDate:o5,isFile:l5,isBlob:c5,isRegExp:C5,isFunction:Da,isStream:d5,isURLSearchParams:f5,isTypedArray:x5,isFileList:u5,forEach:xm,merge:lx,extend:m5,trim:p5,stripBOM:g5,inherits:v5,toFlatObject:_5,kindOf:Z_,kindOfTest:Yo,endsWith:y5,toArray:b5,forEachEntry:w5,matchAll:S5,isHTMLForm:T5,hasOwnProperty:hE,hasOwnProp:hE,reduceDescriptors:WA,freezeMethods:I5,toObjectSet:A5,toCamelCase:E5,noop:M5,toFiniteNumber:k5,findKey:UA,global:HA,isContextDefined:GA,ALPHABET:qA,generateString:P5,isSpecCompliantForm:D5,toJSONObject:L5,isAsyncFn:O5,isThenable:R5};function xi(e,t,i,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),r&&(this.request=r),s&&(this.response=s)}$t.inherits(xi,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$t.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const ZA=xi.prototype,KA={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{KA[e]={value:e}});Object.defineProperties(xi,KA);Object.defineProperty(ZA,"isAxiosError",{value:!0});xi.from=(e,t,i,r,s,c)=>{const d=Object.create(ZA);return $t.toFlatObject(e,d,function(m){return m!==Error.prototype},l=>l!=="isAxiosError"),xi.call(d,e.message,t,i,r,s),d.cause=e,d.name=e.name,c&&Object.assign(d,c),d};const F5=null;function cx(e){return $t.isPlainObject(e)||$t.isArray(e)}function XA(e){return $t.endsWith(e,"[]")?e.slice(0,-2):e}function pE(e,t,i){return e?e.concat(t).map(function(s,c){return s=XA(s),!i&&c?"["+s+"]":s}).join(i?".":""):t}function $5(e){return $t.isArray(e)&&!e.some(cx)}const z5=$t.toFlatObject($t,{},null,function(t){return/^is[A-Z]/.test(t)});function Y_(e,t,i){if(!$t.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,i=$t.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(O,F){return!$t.isUndefined(F[O])});const r=i.metaTokens,s=i.visitor||y,c=i.dots,d=i.indexes,m=(i.Blob||typeof Blob<"u"&&Blob)&&$t.isSpecCompliantForm(t);if(!$t.isFunction(s))throw new TypeError("visitor must be a function");function g(A){if(A===null)return"";if($t.isDate(A))return A.toISOString();if(!m&&$t.isBlob(A))throw new xi("Blob is not supported. Use a Buffer instead.");return $t.isArrayBuffer(A)||$t.isTypedArray(A)?m&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function y(A,O,F){let z=A;if(A&&!F&&typeof A=="object"){if($t.endsWith(O,"{}"))O=r?O:O.slice(0,-2),A=JSON.stringify(A);else if($t.isArray(A)&&$5(A)||($t.isFileList(A)||$t.endsWith(O,"[]"))&&(z=$t.toArray(A)))return O=XA(O),z.forEach(function(H,q){!($t.isUndefined(H)||H===null)&&t.append(d===!0?pE([O],q,c):d===null?O:O+"[]",g(H))}),!1}return cx(A)?!0:(t.append(pE(F,O,c),g(A)),!1)}const x=[],C=Object.assign(z5,{defaultVisitor:y,convertValue:g,isVisitable:cx});function I(A,O){if(!$t.isUndefined(A)){if(x.indexOf(A)!==-1)throw Error("Circular reference detected in "+O.join("."));x.push(A),$t.forEach(A,function(z,U){(!($t.isUndefined(z)||z===null)&&s.call(t,z,$t.isString(U)?U.trim():U,O,C))===!0&&I(z,O?O.concat(U):[U])}),x.pop()}}if(!$t.isObject(e))throw new TypeError("data must be an object");return I(e),t}function mE(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function N1(e,t){this._pairs=[],e&&Y_(e,this,t)}const YA=N1.prototype;YA.append=function(t,i){this._pairs.push([t,i])};YA.toString=function(t){const i=t?function(r){return t.call(this,r,mE)}:mE;return this._pairs.map(function(s){return i(s[0])+"="+i(s[1])},"").join("&")};function N5(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function JA(e,t,i){if(!t)return e;const r=i&&i.encode||N5,s=i&&i.serialize;let c;if(s?c=s(t,i):c=$t.isURLSearchParams(t)?t.toString():new N1(t,i).toString(r),c){const d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+c}return e}class B5{constructor(){this.handlers=[]}use(t,i,r){return this.handlers.push({fulfilled:t,rejected:i,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){$t.forEach(this.handlers,function(r){r!==null&&t(r)})}}const gE=B5,QA={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},j5=typeof URLSearchParams<"u"?URLSearchParams:N1,V5=typeof FormData<"u"?FormData:null,U5=typeof Blob<"u"?Blob:null,H5={isBrowser:!0,classes:{URLSearchParams:j5,FormData:V5,Blob:U5},protocols:["http","https","file","blob","url","data"]},eM=typeof window<"u"&&typeof document<"u",G5=(e=>eM&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),W5=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),q5=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:eM,hasStandardBrowserEnv:G5,hasStandardBrowserWebWorkerEnv:W5},Symbol.toStringTag,{value:"Module"})),Fo={...q5,...H5};function Z5(e,t){return Y_(e,new Fo.classes.URLSearchParams,Object.assign({visitor:function(i,r,s,c){return Fo.isNode&&$t.isBuffer(i)?(this.append(r,i.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)}},t))}function K5(e){return $t.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function X5(e){const t={},i=Object.keys(e);let r;const s=i.length;let c;for(r=0;r<s;r++)c=i[r],t[c]=e[c];return t}function tM(e){function t(i,r,s,c){let d=i[c++];if(d==="__proto__")return!0;const l=Number.isFinite(+d),m=c>=i.length;return d=!d&&$t.isArray(s)?s.length:d,m?($t.hasOwnProp(s,d)?s[d]=[s[d],r]:s[d]=r,!l):((!s[d]||!$t.isObject(s[d]))&&(s[d]=[]),t(i,r,s[d],c)&&$t.isArray(s[d])&&(s[d]=X5(s[d])),!l)}if($t.isFormData(e)&&$t.isFunction(e.entries)){const i={};return $t.forEachEntry(e,(r,s)=>{t(K5(r),s,i,0)}),i}return null}function Y5(e,t,i){if($t.isString(e))try{return(t||JSON.parse)(e),$t.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(i||JSON.stringify)(e)}const B1={transitional:QA,adapter:["xhr","http"],transformRequest:[function(t,i){const r=i.getContentType()||"",s=r.indexOf("application/json")>-1,c=$t.isObject(t);if(c&&$t.isHTMLForm(t)&&(t=new FormData(t)),$t.isFormData(t))return s&&s?JSON.stringify(tM(t)):t;if($t.isArrayBuffer(t)||$t.isBuffer(t)||$t.isStream(t)||$t.isFile(t)||$t.isBlob(t))return t;if($t.isArrayBufferView(t))return t.buffer;if($t.isURLSearchParams(t))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(c){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Z5(t,this.formSerializer).toString();if((l=$t.isFileList(t))||r.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Y_(l?{"files[]":t}:t,m&&new m,this.formSerializer)}}return c||s?(i.setContentType("application/json",!1),Y5(t)):t}],transformResponse:[function(t){const i=this.transitional||B1.transitional,r=i&&i.forcedJSONParsing,s=this.responseType==="json";if(t&&$t.isString(t)&&(r&&!this.responseType||s)){const d=!(i&&i.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(l){if(d)throw l.name==="SyntaxError"?xi.from(l,xi.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Fo.classes.FormData,Blob:Fo.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$t.forEach(["delete","get","head","post","put","patch"],e=>{B1.headers[e]={}});const j1=B1,J5=$t.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Q5=e=>{const t={};let i,r,s;return e&&e.split(`
`).forEach(function(d){s=d.indexOf(":"),i=d.substring(0,s).trim().toLowerCase(),r=d.substring(s+1).trim(),!(!i||t[i]&&J5[i])&&(i==="set-cookie"?t[i]?t[i].push(r):t[i]=[r]:t[i]=t[i]?t[i]+", "+r:r)}),t},vE=Symbol("internals");function Qf(e){return e&&String(e).trim().toLowerCase()}function Dv(e){return e===!1||e==null?e:$t.isArray(e)?e.map(Dv):String(e)}function e4(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=i.exec(e);)t[r[1]]=r[2];return t}const t4=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function V0(e,t,i,r,s){if($t.isFunction(r))return r.call(this,t,i);if(s&&(t=i),!!$t.isString(t)){if($t.isString(r))return t.indexOf(r)!==-1;if($t.isRegExp(r))return r.test(t)}}function n4(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,i,r)=>i.toUpperCase()+r)}function i4(e,t){const i=$t.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+i,{value:function(s,c,d){return this[r].call(this,t,s,c,d)},configurable:!0})})}class J_{constructor(t){t&&this.set(t)}set(t,i,r){const s=this;function c(l,m,g){const y=Qf(m);if(!y)throw new Error("header name must be a non-empty string");const x=$t.findKey(s,y);(!x||s[x]===void 0||g===!0||g===void 0&&s[x]!==!1)&&(s[x||m]=Dv(l))}const d=(l,m)=>$t.forEach(l,(g,y)=>c(g,y,m));return $t.isPlainObject(t)||t instanceof this.constructor?d(t,i):$t.isString(t)&&(t=t.trim())&&!t4(t)?d(Q5(t),i):t!=null&&c(i,t,r),this}get(t,i){if(t=Qf(t),t){const r=$t.findKey(this,t);if(r){const s=this[r];if(!i)return s;if(i===!0)return e4(s);if($t.isFunction(i))return i.call(this,s,r);if($t.isRegExp(i))return i.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,i){if(t=Qf(t),t){const r=$t.findKey(this,t);return!!(r&&this[r]!==void 0&&(!i||V0(this,this[r],r,i)))}return!1}delete(t,i){const r=this;let s=!1;function c(d){if(d=Qf(d),d){const l=$t.findKey(r,d);l&&(!i||V0(r,r[l],l,i))&&(delete r[l],s=!0)}}return $t.isArray(t)?t.forEach(c):c(t),s}clear(t){const i=Object.keys(this);let r=i.length,s=!1;for(;r--;){const c=i[r];(!t||V0(this,this[c],c,t,!0))&&(delete this[c],s=!0)}return s}normalize(t){const i=this,r={};return $t.forEach(this,(s,c)=>{const d=$t.findKey(r,c);if(d){i[d]=Dv(s),delete i[c];return}const l=t?n4(c):String(c).trim();l!==c&&delete i[c],i[l]=Dv(s),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const i=Object.create(null);return $t.forEach(this,(r,s)=>{r!=null&&r!==!1&&(i[s]=t&&$t.isArray(r)?r.join(", "):r)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,i])=>t+": "+i).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...i){const r=new this(t);return i.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[vE]=this[vE]={accessors:{}}).accessors,s=this.prototype;function c(d){const l=Qf(d);r[l]||(i4(s,d),r[l]=!0)}return $t.isArray(t)?t.forEach(c):c(t),this}}J_.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$t.reduceDescriptors(J_.prototype,({value:e},t)=>{let i=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[i]=r}}});$t.freezeMethods(J_);const Sl=J_;function U0(e,t){const i=this||j1,r=t||i,s=Sl.from(r.headers);let c=r.data;return $t.forEach(e,function(l){c=l.call(i,c,s.normalize(),t?t.status:void 0)}),s.normalize(),c}function nM(e){return!!(e&&e.__CANCEL__)}function wm(e,t,i){xi.call(this,e??"canceled",xi.ERR_CANCELED,t,i),this.name="CanceledError"}$t.inherits(wm,xi,{__CANCEL__:!0});function r4(e,t,i){const r=i.config.validateStatus;!i.status||!r||r(i.status)?e(i):t(new xi("Request failed with status code "+i.status,[xi.ERR_BAD_REQUEST,xi.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}const s4=Fo.hasStandardBrowserEnv?{write(e,t,i,r,s,c){const d=[e+"="+encodeURIComponent(t)];$t.isNumber(i)&&d.push("expires="+new Date(i).toGMTString()),$t.isString(r)&&d.push("path="+r),$t.isString(s)&&d.push("domain="+s),c===!0&&d.push("secure"),document.cookie=d.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function a4(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function o4(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function iM(e,t){return e&&!a4(t)?o4(e,t):t}const l4=Fo.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");let r;function s(c){let d=c;return t&&(i.setAttribute("href",d),d=i.href),i.setAttribute("href",d),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return r=s(window.location.href),function(d){const l=$t.isString(d)?s(d):d;return l.protocol===r.protocol&&l.host===r.host}}():function(){return function(){return!0}}();function c4(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function u4(e,t){e=e||10;const i=new Array(e),r=new Array(e);let s=0,c=0,d;return t=t!==void 0?t:1e3,function(m){const g=Date.now(),y=r[c];d||(d=g),i[s]=m,r[s]=g;let x=c,C=0;for(;x!==s;)C+=i[x++],x=x%e;if(s=(s+1)%e,s===c&&(c=(c+1)%e),g-d<t)return;const I=y&&g-y;return I?Math.round(C*1e3/I):void 0}}function _E(e,t){let i=0;const r=u4(50,250);return s=>{const c=s.loaded,d=s.lengthComputable?s.total:void 0,l=c-i,m=r(l),g=c<=d;i=c;const y={loaded:c,total:d,progress:d?c/d:void 0,bytes:l,rate:m||void 0,estimated:m&&d&&g?(d-c)/m:void 0,event:s};y[t?"download":"upload"]=!0,e(y)}}const d4=typeof XMLHttpRequest<"u",h4=d4&&function(e){return new Promise(function(i,r){let s=e.data;const c=Sl.from(e.headers).normalize();let{responseType:d,withXSRFToken:l}=e,m;function g(){e.cancelToken&&e.cancelToken.unsubscribe(m),e.signal&&e.signal.removeEventListener("abort",m)}let y;if($t.isFormData(s)){if(Fo.hasStandardBrowserEnv||Fo.hasStandardBrowserWebWorkerEnv)c.setContentType(!1);else if((y=c.getContentType())!==!1){const[O,...F]=y?y.split(";").map(z=>z.trim()).filter(Boolean):[];c.setContentType([O||"multipart/form-data",...F].join("; "))}}let x=new XMLHttpRequest;if(e.auth){const O=e.auth.username||"",F=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";c.set("Authorization","Basic "+btoa(O+":"+F))}const C=iM(e.baseURL,e.url);x.open(e.method.toUpperCase(),JA(C,e.params,e.paramsSerializer),!0),x.timeout=e.timeout;function I(){if(!x)return;const O=Sl.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),z={data:!d||d==="text"||d==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:O,config:e,request:x};r4(function(H){i(H),g()},function(H){r(H),g()},z),x=null}if("onloadend"in x?x.onloadend=I:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(I)},x.onabort=function(){x&&(r(new xi("Request aborted",xi.ECONNABORTED,e,x)),x=null)},x.onerror=function(){r(new xi("Network Error",xi.ERR_NETWORK,e,x)),x=null},x.ontimeout=function(){let F=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const z=e.transitional||QA;e.timeoutErrorMessage&&(F=e.timeoutErrorMessage),r(new xi(F,z.clarifyTimeoutError?xi.ETIMEDOUT:xi.ECONNABORTED,e,x)),x=null},Fo.hasStandardBrowserEnv&&(l&&$t.isFunction(l)&&(l=l(e)),l||l!==!1&&l4(C))){const O=e.xsrfHeaderName&&e.xsrfCookieName&&s4.read(e.xsrfCookieName);O&&c.set(e.xsrfHeaderName,O)}s===void 0&&c.setContentType(null),"setRequestHeader"in x&&$t.forEach(c.toJSON(),function(F,z){x.setRequestHeader(z,F)}),$t.isUndefined(e.withCredentials)||(x.withCredentials=!!e.withCredentials),d&&d!=="json"&&(x.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&x.addEventListener("progress",_E(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&x.upload&&x.upload.addEventListener("progress",_E(e.onUploadProgress)),(e.cancelToken||e.signal)&&(m=O=>{x&&(r(!O||O.type?new wm(null,e,x):O),x.abort(),x=null)},e.cancelToken&&e.cancelToken.subscribe(m),e.signal&&(e.signal.aborted?m():e.signal.addEventListener("abort",m)));const A=c4(C);if(A&&Fo.protocols.indexOf(A)===-1){r(new xi("Unsupported protocol "+A+":",xi.ERR_BAD_REQUEST,e));return}x.send(s||null)})},ux={http:F5,xhr:h4};$t.forEach(ux,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const yE=e=>`- ${e}`,f4=e=>$t.isFunction(e)||e===null||e===!1,rM={getAdapter:e=>{e=$t.isArray(e)?e:[e];const{length:t}=e;let i,r;const s={};for(let c=0;c<t;c++){i=e[c];let d;if(r=i,!f4(i)&&(r=ux[(d=String(i)).toLowerCase()],r===void 0))throw new xi(`Unknown adapter '${d}'`);if(r)break;s[d||"#"+c]=r}if(!r){const c=Object.entries(s).map(([l,m])=>`adapter ${l} `+(m===!1?"is not supported by the environment":"is not available in the build"));let d=t?c.length>1?`since :
`+c.map(yE).join(`
`):" "+yE(c[0]):"as no adapter specified";throw new xi("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return r},adapters:ux};function H0(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new wm(null,e)}function bE(e){return H0(e),e.headers=Sl.from(e.headers),e.data=U0.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),rM.getAdapter(e.adapter||j1.adapter)(e).then(function(r){return H0(e),r.data=U0.call(e,e.transformResponse,r),r.headers=Sl.from(r.headers),r},function(r){return nM(r)||(H0(e),r&&r.response&&(r.response.data=U0.call(e,e.transformResponse,r.response),r.response.headers=Sl.from(r.response.headers))),Promise.reject(r)})}const xE=e=>e instanceof Sl?e.toJSON():e;function xh(e,t){t=t||{};const i={};function r(g,y,x){return $t.isPlainObject(g)&&$t.isPlainObject(y)?$t.merge.call({caseless:x},g,y):$t.isPlainObject(y)?$t.merge({},y):$t.isArray(y)?y.slice():y}function s(g,y,x){if($t.isUndefined(y)){if(!$t.isUndefined(g))return r(void 0,g,x)}else return r(g,y,x)}function c(g,y){if(!$t.isUndefined(y))return r(void 0,y)}function d(g,y){if($t.isUndefined(y)){if(!$t.isUndefined(g))return r(void 0,g)}else return r(void 0,y)}function l(g,y,x){if(x in t)return r(g,y);if(x in e)return r(void 0,g)}const m={url:c,method:c,data:c,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:l,headers:(g,y)=>s(xE(g),xE(y),!0)};return $t.forEach(Object.keys(Object.assign({},e,t)),function(y){const x=m[y]||s,C=x(e[y],t[y],y);$t.isUndefined(C)&&x!==l||(i[y]=C)}),i}const sM="1.6.5",V1={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{V1[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const wE={};V1.transitional=function(t,i,r){function s(c,d){return"[Axios v"+sM+"] Transitional option '"+c+"'"+d+(r?". "+r:"")}return(c,d,l)=>{if(t===!1)throw new xi(s(d," has been removed"+(i?" in "+i:"")),xi.ERR_DEPRECATED);return i&&!wE[d]&&(wE[d]=!0,console.warn(s(d," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(c,d,l):!0}};function p4(e,t,i){if(typeof e!="object")throw new xi("options must be an object",xi.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const c=r[s],d=t[c];if(d){const l=e[c],m=l===void 0||d(l,c,e);if(m!==!0)throw new xi("option "+c+" must be "+m,xi.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new xi("Unknown option "+c,xi.ERR_BAD_OPTION)}}const dx={assertOptions:p4,validators:V1},ac=dx.validators;class r_{constructor(t){this.defaults=t,this.interceptors={request:new gE,response:new gE}}request(t,i){typeof t=="string"?(i=i||{},i.url=t):i=t||{},i=xh(this.defaults,i);const{transitional:r,paramsSerializer:s,headers:c}=i;r!==void 0&&dx.assertOptions(r,{silentJSONParsing:ac.transitional(ac.boolean),forcedJSONParsing:ac.transitional(ac.boolean),clarifyTimeoutError:ac.transitional(ac.boolean)},!1),s!=null&&($t.isFunction(s)?i.paramsSerializer={serialize:s}:dx.assertOptions(s,{encode:ac.function,serialize:ac.function},!0)),i.method=(i.method||this.defaults.method||"get").toLowerCase();let d=c&&$t.merge(c.common,c[i.method]);c&&$t.forEach(["delete","get","head","post","put","patch","common"],A=>{delete c[A]}),i.headers=Sl.concat(d,c);const l=[];let m=!0;this.interceptors.request.forEach(function(O){typeof O.runWhen=="function"&&O.runWhen(i)===!1||(m=m&&O.synchronous,l.unshift(O.fulfilled,O.rejected))});const g=[];this.interceptors.response.forEach(function(O){g.push(O.fulfilled,O.rejected)});let y,x=0,C;if(!m){const A=[bE.bind(this),void 0];for(A.unshift.apply(A,l),A.push.apply(A,g),C=A.length,y=Promise.resolve(i);x<C;)y=y.then(A[x++],A[x++]);return y}C=l.length;let I=i;for(x=0;x<C;){const A=l[x++],O=l[x++];try{I=A(I)}catch(F){O.call(this,F);break}}try{y=bE.call(this,I)}catch(A){return Promise.reject(A)}for(x=0,C=g.length;x<C;)y=y.then(g[x++],g[x++]);return y}getUri(t){t=xh(this.defaults,t);const i=iM(t.baseURL,t.url);return JA(i,t.params,t.paramsSerializer)}}$t.forEach(["delete","get","head","options"],function(t){r_.prototype[t]=function(i,r){return this.request(xh(r||{},{method:t,url:i,data:(r||{}).data}))}});$t.forEach(["post","put","patch"],function(t){function i(r){return function(c,d,l){return this.request(xh(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:c,data:d}))}}r_.prototype[t]=i(),r_.prototype[t+"Form"]=i(!0)});const Lv=r_;class U1{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(c){i=c});const r=this;this.promise.then(s=>{if(!r._listeners)return;let c=r._listeners.length;for(;c-- >0;)r._listeners[c](s);r._listeners=null}),this.promise.then=s=>{let c;const d=new Promise(l=>{r.subscribe(l),c=l}).then(s);return d.cancel=function(){r.unsubscribe(c)},d},t(function(c,d,l){r.reason||(r.reason=new wm(c,d,l),i(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const i=this._listeners.indexOf(t);i!==-1&&this._listeners.splice(i,1)}static source(){let t;return{token:new U1(function(s){t=s}),cancel:t}}}const m4=U1;function g4(e){return function(i){return e.apply(null,i)}}function v4(e){return $t.isObject(e)&&e.isAxiosError===!0}const hx={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(hx).forEach(([e,t])=>{hx[t]=e});const _4=hx;function aM(e){const t=new Lv(e),i=BA(Lv.prototype.request,t);return $t.extend(i,Lv.prototype,t,{allOwnKeys:!0}),$t.extend(i,t,null,{allOwnKeys:!0}),i.create=function(s){return aM(xh(e,s))},i}const kr=aM(j1);kr.Axios=Lv;kr.CanceledError=wm;kr.CancelToken=m4;kr.isCancel=nM;kr.VERSION=sM;kr.toFormData=Y_;kr.AxiosError=xi;kr.Cancel=kr.CanceledError;kr.all=function(t){return Promise.all(t)};kr.spread=g4;kr.isAxiosError=v4;kr.mergeConfig=xh;kr.AxiosHeaders=Sl;kr.formToJSON=e=>tM($t.isHTMLForm(e)?new FormData(e):e);kr.getAdapter=rM.getAdapter;kr.HttpStatusCode=_4;kr.default=kr;const wi=kr;function Ki(e){return e!=null&&typeof e=="object"&&e["@@functional/placeholder"]===!0}function ms(e){return function t(i){return arguments.length===0||Ki(i)?t:e.apply(this,arguments)}}function mr(e){return function t(i,r){switch(arguments.length){case 0:return t;case 1:return Ki(i)?t:ms(function(s){return e(i,s)});default:return Ki(i)&&Ki(r)?t:Ki(i)?ms(function(s){return e(s,r)}):Ki(r)?ms(function(s){return e(i,s)}):e(i,r)}}}function H1(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(i){return t.apply(this,arguments)};case 2:return function(i,r){return t.apply(this,arguments)};case 3:return function(i,r,s){return t.apply(this,arguments)};case 4:return function(i,r,s,c){return t.apply(this,arguments)};case 5:return function(i,r,s,c,d){return t.apply(this,arguments)};case 6:return function(i,r,s,c,d,l){return t.apply(this,arguments)};case 7:return function(i,r,s,c,d,l,m){return t.apply(this,arguments)};case 8:return function(i,r,s,c,d,l,m,g){return t.apply(this,arguments)};case 9:return function(i,r,s,c,d,l,m,g,y){return t.apply(this,arguments)};case 10:return function(i,r,s,c,d,l,m,g,y,x){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function oM(e,t,i){return function(){for(var r=[],s=0,c=e,d=0,l=!1;d<t.length||s<arguments.length;){var m;d<t.length&&(!Ki(t[d])||s>=arguments.length)?m=t[d]:(m=arguments[s],s+=1),r[d]=m,Ki(m)?l=!0:c-=1,d+=1}return!l&&c<=0?i.apply(this,r):H1(Math.max(0,c),oM(e,r,i))}}var y4=mr(function(t,i){return t===1?ms(i):H1(t,oM(t,[],i))});const lM=y4;function b4(e){return function t(i,r,s){switch(arguments.length){case 0:return t;case 1:return Ki(i)?t:mr(function(c,d){return e(i,c,d)});case 2:return Ki(i)&&Ki(r)?t:Ki(i)?mr(function(c,d){return e(c,r,d)}):Ki(r)?mr(function(c,d){return e(i,c,d)}):ms(function(c){return e(i,r,c)});default:return Ki(i)&&Ki(r)&&Ki(s)?t:Ki(i)&&Ki(r)?mr(function(c,d){return e(c,d,s)}):Ki(i)&&Ki(s)?mr(function(c,d){return e(c,r,d)}):Ki(r)&&Ki(s)?mr(function(c,d){return e(i,c,d)}):Ki(i)?ms(function(c){return e(c,r,s)}):Ki(r)?ms(function(c){return e(i,c,s)}):Ki(s)?ms(function(c){return e(i,r,c)}):e(i,r,s)}}}const cM=Array.isArray||function(t){return t!=null&&t.length>=0&&Object.prototype.toString.call(t)==="[object Array]"};function x4(e){return e!=null&&typeof e["@@transducer/step"]=="function"}function G1(e,t,i){return function(){if(arguments.length===0)return i();var r=arguments[arguments.length-1];if(!cM(r)){for(var s=0;s<e.length;){if(typeof r[e[s]]=="function")return r[e[s]].apply(r,Array.prototype.slice.call(arguments,0,-1));s+=1}if(x4(r)){var c=t.apply(null,Array.prototype.slice.call(arguments,0,-1));return c(r)}}return i.apply(this,arguments)}}const wh={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}};function SE(e){for(var t=[],i;!(i=e.next()).done;)t.push(i.value);return t}function TE(e,t,i){for(var r=0,s=i.length;r<s;){if(e(t,i[r]))return!0;r+=1}return!1}function w4(e){var t=String(e).match(/^function (\w*)/);return t==null?"":t[1]}function s_(e,t){return Object.prototype.hasOwnProperty.call(t,e)}function S4(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}const G0=typeof Object.is=="function"?Object.is:S4;var EE=Object.prototype.toString,T4=function(){return EE.call(arguments)==="[object Arguments]"?function(t){return EE.call(t)==="[object Arguments]"}:function(t){return s_("callee",t)}}();const E4=T4;var C4=!{toString:null}.propertyIsEnumerable("toString"),CE=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],IE=function(){return arguments.propertyIsEnumerable("length")}(),I4=function(t,i){for(var r=0;r<t.length;){if(t[r]===i)return!0;r+=1}return!1},A4=ms(typeof Object.keys=="function"&&!IE?function(t){return Object(t)!==t?[]:Object.keys(t)}:function(t){if(Object(t)!==t)return[];var i,r,s=[],c=IE&&E4(t);for(i in t)s_(i,t)&&(!c||i!=="length")&&(s[s.length]=i);if(C4)for(r=CE.length-1;r>=0;)i=CE[r],s_(i,t)&&!I4(s,i)&&(s[s.length]=i),r-=1;return s});const Sh=A4;var M4=ms(function(t){return t===null?"Null":t===void 0?"Undefined":Object.prototype.toString.call(t).slice(8,-1)});const fx=M4;function AE(e,t,i,r){var s=SE(e),c=SE(t);function d(l,m){return W1(l,m,i.slice(),r.slice())}return!TE(function(l,m){return!TE(d,m,l)},c,s)}function W1(e,t,i,r){if(G0(e,t))return!0;var s=fx(e);if(s!==fx(t))return!1;if(typeof e["fantasy-land/equals"]=="function"||typeof t["fantasy-land/equals"]=="function")return typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t)&&typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e);if(typeof e.equals=="function"||typeof t.equals=="function")return typeof e.equals=="function"&&e.equals(t)&&typeof t.equals=="function"&&t.equals(e);switch(s){case"Arguments":case"Array":case"Object":if(typeof e.constructor=="function"&&w4(e.constructor)==="Promise")return e===t;break;case"Boolean":case"Number":case"String":if(!(typeof e==typeof t&&G0(e.valueOf(),t.valueOf())))return!1;break;case"Date":if(!G0(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(!(e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.sticky===t.sticky&&e.unicode===t.unicode))return!1;break}for(var c=i.length-1;c>=0;){if(i[c]===e)return r[c]===t;c-=1}switch(s){case"Map":return e.size!==t.size?!1:AE(e.entries(),t.entries(),i.concat([e]),r.concat([t]));case"Set":return e.size!==t.size?!1:AE(e.values(),t.values(),i.concat([e]),r.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var d=Sh(e);if(d.length!==Sh(t).length)return!1;var l=i.concat([e]),m=r.concat([t]);for(c=d.length-1;c>=0;){var g=d[c];if(!(s_(g,t)&&W1(t[g],e[g],l,m)))return!1;c-=1}return!0}var k4=mr(function(t,i){return W1(t,i,[],[])});const P4=k4;function D4(e,t,i){var r,s;if(typeof e.indexOf=="function")switch(typeof t){case"number":if(t===0){for(r=1/t;i<e.length;){if(s=e[i],s===0&&1/s===r)return i;i+=1}return-1}else if(t!==t){for(;i<e.length;){if(s=e[i],typeof s=="number"&&s!==s)return i;i+=1}return-1}return e.indexOf(t,i);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,i);case"object":if(t===null)return e.indexOf(t,i)}for(;i<e.length;){if(P4(e[i],t))return i;i+=1}return-1}function px(e,t){return D4(t,e,0)>=0}function Pp(e,t){for(var i=0,r=t.length,s=Array(r);i<r;)s[i]=e(t[i]),i+=1;return s}function W0(e){var t=e.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+t.replace(/"/g,'\\"')+'"'}var ep=function(t){return(t<10?"0":"")+t},L4=typeof Date.prototype.toISOString=="function"?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+ep(t.getUTCMonth()+1)+"-"+ep(t.getUTCDate())+"T"+ep(t.getUTCHours())+":"+ep(t.getUTCMinutes())+":"+ep(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};const O4=L4;function R4(e){return function(){return!e.apply(this,arguments)}}function uM(e,t,i){for(var r=0,s=i.length;r<s;)t=e(t,i[r]),r+=1;return t}function F4(e,t){for(var i=0,r=t.length,s=[];i<r;)e(t[i])&&(s[s.length]=t[i]),i+=1;return s}function $4(e){return Object.prototype.toString.call(e)==="[object Object]"}var z4=function(){function e(t,i){this.xf=i,this.f=t}return e.prototype["@@transducer/init"]=wh.init,e.prototype["@@transducer/result"]=wh.result,e.prototype["@@transducer/step"]=function(t,i){return this.f(i)?this.xf["@@transducer/step"](t,i):t},e}();function N4(e){return function(t){return new z4(e,t)}}var B4=mr(G1(["fantasy-land/filter","filter"],N4,function(e,t){return $4(t)?uM(function(i,r){return e(t[r])&&(i[r]=t[r]),i},{},Sh(t)):F4(e,t)}));const dM=B4;var j4=mr(function(t,i){return dM(R4(t),i)});const hM=j4;function fM(e,t){var i=function(d){var l=t.concat([e]);return px(d,l)?"<Circular>":fM(d,l)},r=function(c,d){return Pp(function(l){return W0(l)+": "+i(c[l])},d.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+Pp(i,e).join(", ")+"))";case"[object Array]":return"["+Pp(i,e).concat(r(e,hM(function(c){return/^\d+$/.test(c)},Sh(e)))).join(", ")+"]";case"[object Boolean]":return typeof e=="object"?"new Boolean("+i(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?i(NaN):W0(O4(e)))+")";case"[object Map]":return"new Map("+i(Array.from(e))+")";case"[object Null]":return"null";case"[object Number]":return typeof e=="object"?"new Number("+i(e.valueOf())+")":1/e===-1/0?"-0":e.toString(10);case"[object Set]":return"new Set("+i(Array.from(e).sort())+")";case"[object String]":return typeof e=="object"?"new String("+i(e.valueOf())+")":W0(e);case"[object Undefined]":return"undefined";default:if(typeof e.toString=="function"){var s=e.toString();if(s!=="[object Object]")return s}return"{"+r(e,Sh(e)).join(", ")+"}"}}var V4=ms(function(t){return fM(t,[])});const ME=V4;var U4=mr(function(t,i){if(t===i)return i;function r(m,g){if(m>g!=g>m)return g>m?g:m}var s=r(t,i);if(s!==void 0)return s;var c=r(typeof t,typeof i);if(c!==void 0)return c===typeof t?t:i;var d=ME(t),l=r(d,ME(i));return l!==void 0&&l===d?t:i});const H4=U4;var G4=function(){function e(t,i){this.xf=i,this.f=t}return e.prototype["@@transducer/init"]=wh.init,e.prototype["@@transducer/result"]=wh.result,e.prototype["@@transducer/step"]=function(t,i){return this.xf["@@transducer/step"](t,this.f(i))},e}(),W4=function(t){return function(i){return new G4(t,i)}};const q4=W4;var Z4=mr(G1(["fantasy-land/map","map"],q4,function(t,i){switch(Object.prototype.toString.call(i)){case"[object Function]":return lM(i.length,function(){return t.call(this,i.apply(this,arguments))});case"[object Object]":return uM(function(r,s){return r[s]=t(i[s]),r},{},Sh(i));default:return Pp(t,i)}}));const K4=Z4,pM=Number.isInteger||function(t){return t<<0===t};function mM(e){return Object.prototype.toString.call(e)==="[object String]"}var X4=mr(function(t,i){var r=t<0?i.length+t:t;return mM(i)?i.charAt(r):i[r]});const gM=X4;var Y4=mr(function(t,i){if(i!=null)return pM(t)?gM(t,i):i[t]});const Ov=Y4;var J4=mr(function(t,i){return K4(Ov(t),i)});const Q4=J4;var e$=ms(function(t){return cM(t)?!0:!t||typeof t!="object"||mM(t)?!1:t.length===0?!0:t.length>0?t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1):!1});const t$=e$;var kE=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function n$(e,t,i){return function(s,c,d){if(t$(d))return e(s,c,d);if(d==null)return c;if(typeof d["fantasy-land/reduce"]=="function")return t(s,c,d,"fantasy-land/reduce");if(d[kE]!=null)return i(s,c,d[kE]());if(typeof d.next=="function")return i(s,c,d);if(typeof d.reduce=="function")return t(s,c,d,"reduce");throw new TypeError("reduce: list must be array or iterable")}}function i$(e,t,i){for(var r=0,s=i.length;r<s;){if(t=e["@@transducer/step"](t,i[r]),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r+=1}return e["@@transducer/result"](t)}var r$=mr(function(t,i){return H1(t.length,function(){return t.apply(i,arguments)})});const s$=r$;function a$(e,t,i){for(var r=i.next();!r.done;){if(t=e["@@transducer/step"](t,r.value),t&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r=i.next()}return e["@@transducer/result"](t)}function o$(e,t,i,r){return e["@@transducer/result"](i[r](s$(e["@@transducer/step"],e),t))}var l$=n$(i$,o$,a$);const c$=l$;var u$=function(){function e(t){this.f=t}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(t){return t},e.prototype["@@transducer/step"]=function(t,i){return this.f(t,i)},e}();function d$(e){return new u$(e)}var h$=b4(function(e,t,i){return c$(typeof e=="function"?d$(e):e,t,i)});const f$=h$;function p$(e){return new RegExp(e.source,e.flags?e.flags:(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":"")+(e.dotAll?"s":""))}function vM(e,t,i){if(i||(i=new g$),m$(e))return e;var r=function(c){var d=i.get(e);if(d)return d;i.set(e,c);for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&(c[l]=t?vM(e[l],!0,i):e[l]);return c};switch(fx(e)){case"Object":return r(Object.create(Object.getPrototypeOf(e)));case"Array":return r([]);case"Date":return new Date(e.valueOf());case"RegExp":return p$(e);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return e.slice();default:return e}}function m$(e){var t=typeof e;return e==null||t!="object"&&t!="function"}var g$=function(){function e(){this.map={},this.length=0}return e.prototype.set=function(t,i){const r=this.hash(t);let s=this.map[r];s||(this.map[r]=s=[]),s.push([t,i]),this.length+=1},e.prototype.hash=function(t){let i=[];for(var r in t)i.push(Object.prototype.toString.call(t[r]));return i.join()},e.prototype.get=function(t){if(this.length<=180){for(const s in this.map){const c=this.map[s];for(let d=0;d<c.length;d+=1){const l=c[d];if(l[0]===t)return l[1]}}return}const i=this.hash(t),r=this.map[i];if(r)for(let s=0;s<r.length;s+=1){const c=r[s];if(c[0]===t)return c[1]}},e}(),v$=ms(function(t){return t!=null&&typeof t.clone=="function"?t.clone():vM(t,!0)});const PE=v$;function _$(e){return e}var y$=ms(_$);const b$=y$;var x$=mr(function(t,i){return lM(f$(H4,0,Q4("length",i)),function(){var r=arguments,s=this;return t.apply(s,Pp(function(c){return c.apply(s,r)},i))})});const w$=x$;var S$=function(){function e(){this._nativeSet=typeof Set=="function"?new Set:null,this._items={}}return e.prototype.add=function(t){return!DE(t,!0,this)},e.prototype.has=function(t){return DE(t,!1,this)},e}();function DE(e,t,i){var r=typeof e,s,c;switch(r){case"string":case"number":return e===0&&1/e===-1/0?i._items["-0"]?!0:(t&&(i._items["-0"]=!0),!1):i._nativeSet!==null?t?(s=i._nativeSet.size,i._nativeSet.add(e),c=i._nativeSet.size,c===s):i._nativeSet.has(e):r in i._items?e in i._items[r]?!0:(t&&(i._items[r][e]=!0),!1):(t&&(i._items[r]={},i._items[r][e]=!0),!1);case"boolean":if(r in i._items){var d=e?1:0;return i._items[r][d]?!0:(t&&(i._items[r][d]=!0),!1)}else return t&&(i._items[r]=e?[!1,!0]:[!0,!1]),!1;case"function":return i._nativeSet!==null?t?(s=i._nativeSet.size,i._nativeSet.add(e),c=i._nativeSet.size,c===s):i._nativeSet.has(e):r in i._items?px(e,i._items[r])?!0:(t&&i._items[r].push(e),!1):(t&&(i._items[r]=[e]),!1);case"undefined":return i._items[r]?!0:(t&&(i._items[r]=!0),!1);case"object":if(e===null)return i._items.null?!0:(t&&(i._items.null=!0),!1);default:return r=Object.prototype.toString.call(e),r in i._items?px(e,i._items[r])?!0:(t&&i._items[r].push(e),!1):(t&&(i._items[r]=[e]),!1)}}const q1=S$;var T$=mr(function(t,i){for(var r=[],s=0,c=t.length,d=i.length,l=new q1,m=0;m<d;m+=1)l.add(i[m]);for(;s<c;)l.add(t[s])&&(r[r.length]=t[s]),s+=1;return r});const E$=T$;var C$=function(){function e(t,i){this.xf=i,this.f=t,this.set=new q1}return e.prototype["@@transducer/init"]=wh.init,e.prototype["@@transducer/result"]=wh.result,e.prototype["@@transducer/step"]=function(t,i){return this.set.add(this.f(i))?this.xf["@@transducer/step"](t,i):t},e}();function I$(e){return function(t){return new C$(e,t)}}var A$=mr(G1([],I$,function(e,t){for(var i=new q1,r=[],s=0,c,d;s<t.length;)d=t[s],c=e(d),i.add(c)&&r.push(d),s+=1;return r}));const M$=A$;var k$=M$(b$);const P$=k$;var D$=ms(function(t){return w$(function(){return Array.prototype.slice.call(arguments,0)},t)});const L$=D$;var O$=mr(function(t,i){return t.map(function(r){for(var s=i,c=0,d;c<r.length;){if(s==null)return;d=r[c],s=pM(d)?gM(d,s):s[d],c+=1}return s})});const R$=O$;var F$=mr(function(t,i){return R$([t],i)[0]});const $$=F$;var z$=mr(function(t,i){for(var r={},s={},c=0,d=t.length;c<d;)s[t[c]]=1,c+=1;for(var l in i)s.hasOwnProperty(l)||(r[l]=i[l]);return r});const _M=z$;var N$=L$([dM,hM]);const B$=N$;var yM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bM(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function xM(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(i,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),i}var j$=function(t){return V$(t)&&!U$(t)};function V$(e){return!!e&&typeof e=="object"}function U$(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||W$(e)}var H$=typeof Symbol=="function"&&Symbol.for,G$=H$?Symbol.for("react.element"):60103;function W$(e){return e.$$typeof===G$}function q$(e){return Array.isArray(e)?[]:{}}function Jp(e,t){return t.clone!==!1&&t.isMergeableObject(e)?Th(q$(e),e,t):e}function Z$(e,t,i){return e.concat(t).map(function(r){return Jp(r,i)})}function K$(e,t){if(!t.customMerge)return Th;var i=t.customMerge(e);return typeof i=="function"?i:Th}function X$(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function LE(e){return Object.keys(e).concat(X$(e))}function wM(e,t){try{return t in e}catch{return!1}}function Y$(e,t){return wM(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function J$(e,t,i){var r={};return i.isMergeableObject(e)&&LE(e).forEach(function(s){r[s]=Jp(e[s],i)}),LE(t).forEach(function(s){Y$(e,s)||(wM(e,s)&&i.isMergeableObject(t[s])?r[s]=K$(s,i)(e[s],t[s],i):r[s]=Jp(t[s],i))}),r}function Th(e,t,i){i=i||{},i.arrayMerge=i.arrayMerge||Z$,i.isMergeableObject=i.isMergeableObject||j$,i.cloneUnlessOtherwiseSpecified=Jp;var r=Array.isArray(t),s=Array.isArray(e),c=r===s;return c?r?i.arrayMerge(e,t,i):J$(e,t,i):Jp(t,i)}Th.all=function(t,i){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(r,s){return Th(r,s,i)},{})};var Q$=Th,ez=Q$;const tz=bM(ez);var XC,YC;const nz={instance:{base:{origin:{}.VITE_BASE_ORIGIN??"https://localhost",path:{}.VITE_BASE_PATH??"/",url:{}.VITE_BASE_URL??"https://localhost/"},theming:{availableThemes:((XC={}.VITE_AVAILABLE_THEMES)==null?void 0:XC.split(","))??["light"],enabled:((YC={}.VITE_THEME_ENABLED)==null?void 0:YC.toLowerCase())==="true",defaultTheme:{}.VITE_DEFAULT_THEME??"light"},moreLikeThis:{maxInlineResults:3},textAreaItem:{defaultTextTruncationHeight:72}},arcgis:{apiKey:{}.VITE_ARCGIS_API_KEY??"PLEASE_SET_MAPBOX_ACCESS_TOKEN"},routes:{home:{redirect:{}.VITE_ROUTES_HOME_REDIRECT??null}},mode:"production"},iz=(e,t)=>t;var JC;const Zn=tz(nz,((JC=window==null?void 0:window.Elevator)==null?void 0:JC.config)??{},{arrayMerge:iz});Zn.instance.theming.availableThemes=P$(Zn.instance.theming.availableThemes);const rz=e=>{const t=e.split(".");return t[t.length-1]};class hh extends Error{constructor(i,r,s){super(i);Wg(this,"name","ApiError");Wg(this,"statusCode");Wg(this,"data");this.statusCode=r,this.data=s,this.stack=new Error(i).stack}}const Sm=Bh("errorStore",{state:()=>({error:null}),actions:{setError(e){this.error=e},clearError(){this.error=null}}});function sz(e,t){return e.widgetArray.find(i=>i.fieldTitle===t)??null}const SM=e=>`${Zn.instance.base.url}/fileManager/tinyImageByFileId/${e}/true`,Nc=e=>`${Zn.instance.base.url}/fileManager/previewImageByFileId/${e}/true`,Cl=e=>`/asset/viewAsset/${e}`;function Z1({asset:e,widget:t}){const i=e[t.fieldTitle];if(!i)return null;const[r,s]=B$(c=>!!c.isPrimary,i);return[...r,...s]}function az({widget:e,template:t,asset:i}){if(!i||!t||!i.titleObject)return!1;const r=sz(t,i.titleObject),s=Z1({asset:i,widget:e});return!!r&&e.type==="text"&&e.fieldTitle===r.fieldTitle&&(s==null?void 0:s.length)===1}function oz({asset:e,widget:t}){const i=Z1({asset:e,widget:t});return i!=null}function lz({asset:e,template:t}){if(!(t&&e))return[];const i=t.widgetArray.filter(r=>r.display).filter(r=>oz({asset:e,widget:r}));return i.length<2?i:i.filter(r=>!az({widget:r,template:t,asset:e})).sort((r,s)=>r.viewOrder-s.viewOrder)}function Xu(e){var i;const t=((i=e==null?void 0:e.title)==null?void 0:i[0])??"(No Title)";return ho(t)}function ho(e){return new DOMParser().parseFromString(e,"text/html").body.textContent||""}function TM(e,t){const i=e.trim().replace("?","").replace("...","");return t.clickToSearchType===0?Zn.instance.base.url+"/search/querySearch/"+encodeURIComponent(ho(i)):Zn.instance.base.url+"/search/scopedQuerySearch/"+t.fieldTitle+"/"+encodeURIComponent(i)}const Ti=Zn.instance.base.url;wi.defaults.withCredentials=!0;wi.interceptors.response.use(void 0,async e=>{const t=e.config,i=Sm();let r;if(e.response){const s=e.response.data??{},c=(s==null?void 0:s.message)??e.message,d=e.response.status;r=new hh(c,d,s)}else r=new hh(e.message,0);return t.skipErrorNotifications||i.setError(r),Promise.reject(r)});async function EM(e){return(await wi.get(`${Ti}/asset/viewAsset/${e}/true`)).data??null}async function cz(e){return(await wi.get(`${Ti}/assetManager/getTemplate/${e}`)).data??null}async function uz(e){const t=new FormData;return t.append("suppressRecent","true"),t.append("searchRelated","true"),t.append("searchQuery",JSON.stringify({searchText:e})),(await wi.post(`${Ti}/search/searchResults`,t)).data.matches.filter(r=>r.objectId!==e)}async function dz(e){return(await wi.get(`${Ti}/collections/collectionHeader/${e}/true`)).data.collectionDescription??null}async function hz(e){const t=await wi.get(`${Ti}/fileManager/getMetadataForObject/${e}`);return _M(["bulkMetadata"],t.data)}async function fz(e,t){const i=await wi.get(`${Ti}/asset/getEmbedAsJson/${e}/${t??""}`);return Object.entries(i.data).map(([r,s])=>({filetype:r,isReady:s.ready,url:r==="original"?`${Ti}/fileManager/getOriginal/${e}`:`${Ti}/fileManager/getDerivativeById/${e}/${r}`,originalFilename:s.originalFilename,extension:rz(s.originalFilename)}))}async function pz(){return wi.get(`${Ti}/home/interstitial`)}async function mz(e){const t=new URLSearchParams;return t.append("searchText",""),t.append("collectionId",String(e)),t.append("storeOnly","true"),(await wi.post(`${Ti}/search/searchResults`,t)).data.searchId}async function gz(e,t){const i=TM(e,t);return(await wi.get(`${i}/true`)).data.searchId}async function vz(e){return(await wi.get(`${Ti}/page/view/${e}/true`)).data}async function _z(){return(await wi.get(`${Ti}/home/getInstanceNav`)).data}async function yz({fileObjectId:e,excerptId:t,launchId:i}){const r=new FormData;return r.append("object",e),r.append("excerptId",t),(await wi.post(`${Ti}/api/v1/lti/ltiPayload`,r)).data}async function bz({fileObjectId:e,excerptId:t,launchId:i,userId:r}){const s=new FormData;return s.append("object",e),s.append("excerptId",t),s.append("launchId",i),s.append("userId",r),(await wi.post(`${Ti}/api/v1/lti13/ltiPayload`,s)).data}async function xz(e,t={}){const{collection:i,...r}=t,s={searchText:e,...r};i&&(s.collection=i.map(String)),t.sort&&(s.sort=t.sort);const c=new URLSearchParams;return c.append("searchQuery",JSON.stringify(s)),c.append("storeOnly","true"),(await wi.post(`${Ti}/search/searchResults`,c)).data.searchId}async function wz(e,t={}){const r={...{page:0,loadAll:!1},...t};return(await wi.get(`${Ti}/search/searchResults/${e}/${r.page}/${r.loadAll}`)).data}async function Sz(e){return(await wi.get(`${Ti}/assetManager/deleteAsset/${e}`)).data}async function Tz({username:e,password:t}){const i=new FormData;i.append("username",e),i.append("password",t);try{return(await wi.post(`${Ti}/loginManager/localLoginAsync`,i,{skipErrorNotifications:!0})).data}catch(r){if(r instanceof hh&&r.statusCode===401)return{status:"error",message:r.message};throw r}}async function Ez(e){const t=new FormData;return t.append("fieldTitle",e.id),t.append("template",String(e.template)),(await wi.post(`${Ti}/search/getFieldInfo`,t)).data}async function Cz(){return(await wi.get(`${Ti}/drawers/listDrawers/true`)).data}async function Iz(e){return(await wi.get(`${Ti}/drawers/getDrawer/${e}`)).data}async function Az(e,t={}){const i=new FormData;return i.append("drawerTitle",e),(await wi.post(`${Ti}/drawers/addDrawer`,i,t)).data}async function Mz(e,t={}){return(await wi.post(`${Ti}/drawers/delete/${e}/true`,void 0,t)).data}async function kz(e,t,i){const r=new FormData;return r.append("objectId",e),r.append("drawerList",String(t)),i&&(r.append("label",i.name),r.append("startTime",String(i.startTime)),r.append("endTime",String(i.endTime)),r.append("fileHandlerId",i.fileHandlerId)),(await wi.post(`${Ti}/drawers/addToDrawer/true`,r)).data}async function Pz(e,t){const i=new FormData;return i.append("objectArray",JSON.stringify(e)),i.append("drawerList",String(t)),(await wi.post(`${Ti}/drawers/addToDrawer/true`,i)).data}async function CM({drawerId:e,excerptId:t}){return(await wi.post(`${Ti}/drawers/removeExcerpt/${e}/${t}/true`)).data}async function Dz({assetId:e,drawerId:t,excerptId:i}){return i?CM({drawerId:t,excerptId:i}):(await wi.post(`${Ti}/drawers/removeFromDrawer/${t}/${e}/true`)).data}async function Lz(e,t){return(await wi.post(`${Ti}/drawers/setSortOrder/${e}/${t}`)).data}async function Oz(e,t){const i=new FormData;return i.append("orderArray",JSON.stringify(t)),(await wi.post(`${Ti}/drawers/setCustomOrder/${e}`,i)).data}async function Rz(e){return(await wi.post(`${Ti}/drawers/downloadDrawer/${e}/true`)).data}async function Fz(){return(await wi.post(`${Ti}/loginManager/logout`)).data}async function $z(e){return(await wi.get(`${Ti}/asset/viewExcerpt/${e}/true/true`)).data}async function zz(e){const t=new FormData;return t.append("searchTerm",e),(await wi.post(`${Ti}/search/getSuggestion`,t)).data}function IM(){return{assets:new Map,templates:new Map,excerpts:new Map,moreLikeThisMatches:new Map,fileMetaData:new Map,fileDownloadResponses:new Map,paginatedSearchResults:new Map,collectionDescriptions:new Map,collectionSearchIds:new Map,staticPages:new Map,searchableFieldDetails:new Map,drawerDetails:new Map,listOfDrawers:null}}let si=IM();function Nz(){si=IM()}async function Bz(e){if(!e)return null;const t=si.assets.get(e)||await EM(e);return si.assets.set(e,t),t}async function jz(e){if(!e)return{asset:null,template:null};const t=si.assets.get(e)||await EM(e);if(si.assets.set(e,t),!t)return{asset:null,template:null};const i=String(t.templateId),r=si.templates.get(i)||await cz(i);return si.templates.set(i,r),{asset:t,template:r}}async function Vz(e){const t=si.collectionDescriptions.get(e)||await dz(e);return si.collectionDescriptions.set(e,t),t}async function Uz(e){if(!e)return[];const t=si.moreLikeThisMatches.get(e)||await uz(e);return si.moreLikeThisMatches.set(e,t),t}async function Hz(e){if(!e)return null;const t=si.fileMetaData.get(e)||await hz(e);return si.fileMetaData.set(e,t),t}async function Gz(e,t){if(!e)return null;const i=`${e}.${t}`,r=si.fileDownloadResponses.get(i)||await fz(e,t);return si.fileDownloadResponses.set(i,r),r}async function Wz(){return(await pz()).data}async function qz(e){const t=si.collectionSearchIds.get(e)||await mz(e);return si.collectionSearchIds.set(e,t),t}async function Zz(e,t={}){const r={...{page:0,loadAll:!1},...t},s=si.paginatedSearchResults.get(e);if(s&&s[r.page])return s[r.page];const c=await wz(e,r);return si.paginatedSearchResults.set(e,{...s||{},[r.page]:c}),c}async function Kz(e){const t=si.staticPages.get(e)||await vz(e);return si.staticPages.set(e,t),t}async function K1(e){const t=`${e.id}-${e.template}`;if(si.searchableFieldDetails.has(t))return si.searchableFieldDetails.get(t)??null;const i=await Ez(e);return si.searchableFieldDetails.set(t,i),i}async function Xz(e){const t=await K1(e);return(t==null?void 0:t.values)??[]}async function Yz(e){const t=await K1(e);return(t==null?void 0:t.values)??{boolean_true:"checked",boolean_false:"unchecked"}}async function Jz(e){const t=await K1(e);return(t==null?void 0:t.rawContent)??{}}async function Qz({refresh:e=!1}={}){if(si.listOfDrawers&&!e)return si.listOfDrawers;const t=await Cz();return si.listOfDrawers=Object.entries(t).map(([i,r])=>({id:Number.parseInt(i),...r})).sort((i,r)=>i.title.localeCompare(r.title)),si.listOfDrawers}async function eN(e){const t=si.drawerDetails.get(e)??await Iz(e);si.drawerDetails.set(e,t);const{drawerId:i,drawerTitle:r,...s}=t;return{id:i,title:r,contents:s}}async function tN(e,t,i){const r=await kz(e,t,i);return si.drawerDetails.delete(t),r}async function nN(e,t){const i=await Pz(e,t);return si.drawerDetails.delete(t),i}async function iN({excerptId:e,drawerId:t}){const i=await CM({drawerId:t,excerptId:e});return si.drawerDetails.delete(t),i}async function rN({assetId:e,drawerId:t}){const i=await Dz({drawerId:t,assetId:e});return si.drawerDetails.delete(t),i}async function sN(e,t={}){const i=await Az(e,t);return si.listOfDrawers=null,i}async function aN(e,t={}){const i=await Mz(e,t);return si.listOfDrawers=null,i}async function oN(e,t){const i=await Lz(e,t);return si.drawerDetails.delete(e),i}async function lN(e,t){const i=await Oz(e,t);return si.drawerDetails.delete(e),i}async function cN(e){const t=si.excerpts.get(e)??await $z(e);return si.excerpts.set(e,t),t}const Un={getAsset:Bz,getAssetWithTemplate:jz,getCollectionDescription:Vz,getMoreLikeThis:Uz,getFileMetaData:Hz,getFileDownloadInfo:Gz,getEmbedPluginInterstitial:Wz,getExcerpt:cN,postLtiPayload:yz,postLtiPayload13:bz,fetchInstanceNav:_z,getSearchId:xz,getSearchIdForCollection:qz,getSearchIdForClickToSearch:gz,getSearchResultsById:Zz,getStaticPage:Kz,deleteAsset:Sz,loginAsGuest:Tz,logout:Fz,getSearchableSelectFieldValues:Xz,getSearchableCheckboxFieldValues:Yz,getSearchableMultiSelectFieldValues:Jz,getDrawers:Qz,getDrawer:eN,createDrawer:sN,deleteDrawer:aN,addAssetToDrawer:tN,addAssetListToDrawer:nN,removeAssetFromDrawer:rN,removeExcerptFromDrawer:iN,setDrawerSortBy:oN,setCustomDrawerOrder:lN,startDrawerDownload:Rz,clearCache:Nz,getDidYouMeanSuggestions:zz};function uN(e){if(!e)return null;const{userId:t,userDisplayName:i,userCanCreateDrawers:r,userCanManageAssets:s,userIsAdmin:c,userIsSuperAdmin:d}=e;return t?{id:t,displayName:i??"Elevator User",isAdmin:c,isSuperAdmin:d,canManageAssets:s,canManageDrawers:r}:null}function dN(e){const{instanceName:t,instanceId:i,instanceHasLogo:r,instanceShowCollectionInSearchResults:s,instanceShowTemplateInSearchResults:c,contact:d,useCentralAuth:l,centralAuthLabel:m,featuredAssetId:g,featuredAssetText:y,userCanSearchAndBrowse:x,templates:C}=e,I=r?{src:`${Zn.instance.base.origin}/assets/instanceAssets/${i}.png`,alt:`${t} logo`}:null,A=Object.entries(C).map(([O,F])=>({id:Number.parseInt(O),name:F})).filter(({name:O})=>typeof O=="string").sort((O,F)=>O.name.localeCompare(F.name));return{id:i,name:t??"Elevator",logoImg:I,useCentralAuth:l,centralAuthLabel:m,contact:d,featuredAssetId:g,featuredAssetText:y,userCanSearchAndBrowse:x,templates:A,showCollectionInSearchResults:s,showTemplateInSearchResults:c}}function AM(e,t=null){return{...e,parentId:t,previewImageId:e.previewImageId||null,children:e.children?e.children.map(i=>AM(i,e.id)):[]}}function hN(e,t=null){return e.map(i=>AM(i,t))}function MM(e){return e?e.reduce((t,i)=>({...t,[i.id]:i,...MM(i.children)}),{}):{}}function kM(e){return[...e.map(i=>_M(["children"],i)),...e.flatMap(i=>{const s=(i.children??[]).map(c=>({...c,title:`${i.title} › ${c.title}`}));return kM(s)})]}const fN=()=>({fetchStatus:Fe("idle"),currentUser:Fe(null),pages:Fe([]),collections:Fe([]),searchableFields:Fe([]),instance:Fe({id:null,name:"Elevator",logoImg:null,contact:null,useCentralAuth:!1,centralAuthLabel:"Central Auth",featuredAssetId:null,featuredAssetText:null,userCanSearchAndBrowse:!1,templates:[],showCollectionInSearchResults:!0,showTemplateInSearchResults:!0}),customHeaderMode:Fe(0),customHeader:Fe(null),customFooter:Fe(null)}),PM=e=>({isLoggedIn:De(()=>!!e.currentUser.value),isReady:De(()=>e.fetchStatus.value==="success"),collectionIndex:De(()=>MM(e.collections.value)),flatCollections:De(()=>kM(e.collections.value)),async getCollectionById(t){const r=PM(e).collectionIndex.value[t];if(!r)return null;try{const s=await Un.getCollectionDescription(t);return{...r,description:s}}catch(s){return console.error(s),null}},getSearchableField(t){return e.searchableFields.value.find(i=>i.id===t)??null}}),DM=e=>({async refresh(){if(e.fetchStatus.value!=="fetching"){e.fetchStatus.value="fetching";try{const t=await Un.fetchInstanceNav();e.currentUser.value=uN(t),e.pages.value=t.pages,e.instance.value=dN(t),e.collections.value=hN(t.collections),e.customHeaderMode.value=t.customHeaderMode,e.customHeader.value=t.customHeader,e.customFooter.value=t.customFooter,e.searchableFields.value=Object.entries(t.sortableFields).map(([i,r])=>({...r,id:i})),e.fetchStatus.value="success"}catch(t){console.error(t),e.fetchStatus.value="error"}}},async init(){if(!["fetching","success","error"].includes(e.fetchStatus.value))return DM(e).refresh()}}),bi=Bh("instance",()=>{const e=fN(),t=PM(e),i=DM(e);return{...e,...t,...i}}),ih=Bh("toastStore",{state:()=>({toasts:[]}),actions:{addToast(e){const t=crypto.randomUUID();this.toasts.push({...e,id:t,duration:e.duration??3e3})},dismissToast(e){const t=this.toasts.findIndex(i=>i.id===e);t!==-1&&this.toasts.splice(t,1)}}}),Ho=Bh("asset2",{state:()=>({activeAssetId:null,activeObjectId:null,activeFileObjectId:null}),actions:{async setActiveAsset(e,t){const{asset:i}=await Un.getAssetWithTemplate(e);return i?(this.activeAssetId=e,t?this.setActiveObject(t):(this.activeObjectId=(i==null?void 0:i.firstObjectId)??null,this.activeFileObjectId=(i==null?void 0:i.firstFileHandlerId)??null,i)):(this.activeAssetId=null,this.activeObjectId=null,this.activeFileObjectId=null,null)},async setActiveObject(e){const{asset:t}=await Un.getAssetWithTemplate(e);return this.activeObjectId=t?e:null,this.activeFileObjectId=(t==null?void 0:t.firstFileHandlerId)??null,t},async getAsset(e){const{asset:t}=await Un.getAssetWithTemplate(e);return t},async getAssetTitle(e){const t=await this.getAsset(e);return t?Xu(t):null}}}),pN=(e,t)=>e.length===t.length&&e.every((i,r)=>i===t[r]),Ha=Bh("drawer",{state:()=>({drawerRecords:{},isReady:!1}),getters:{drawers(e){return Object.values(e.drawerRecords)},getDrawerById(e){return t=>e.drawerRecords[t]}},actions:{async refresh(){const e=await Un.getDrawers({refresh:!0});this.drawerRecords=e.reduce((t,i)=>(t[i.id]=i,t),{})},async init(){await this.refresh(),this.isReady=!0},async createDrawer(e){const t=await Un.createDrawer(e),i={id:t.drawerId,title:t.drawerTitle};return this.drawerRecords[t.drawerId]=i,i},async deleteDrawer(e){try{delete this.drawerRecords[e],await Un.deleteDrawer(e,{skipErrorNotifications:!0})}catch{console.log(`Failed to delete drawer: ${e}. Refreshing the drawer list.`),await this.refresh()}},async addAssetToDrawer(e,t,i){await Un.addAssetToDrawer(e,t,i);const r=Ho(),s=ih(),c=this.drawerRecords[t].title,d=(i==null?void 0:i.name)??await r.getAssetTitle(e);s.addToast({message:`'${d??"Asset"}' added to drawer '${c}'.`,url:`/drawers/viewDrawer/${t}`,urlText:"View drawer"}),this.drawerRecords[t].contents=void 0},async addAssetListToDrawer(e,t){await Un.addAssetListToDrawer(e,t);const i=ih(),r=this.drawerRecords[t].title;i.addToast({message:`${e.length} assets added to drawer '${r}'.`,url:`/drawers/viewDrawer/${t}`,urlText:"View drawer"}),this.drawerRecords[t].contents=void 0},async refreshDrawer(e){const t=await Un.getDrawer(e);return this.drawerRecords[e]=t,t},async setDrawerSortBy(e,t){return this.drawerRecords[e].contents=void 0,await Un.setDrawerSortBy(e,t),this.refreshDrawer(e)},async downloadDrawer(e){return Un.startDrawerDownload(e)},async setDrawerItems(e,t){const i=this.drawerRecords[e];if(!i.contents)throw new Error("Cannot set drawer items: drawer contents not found");const r=i.contents.matches.map(c=>c.objectId),s=t.map(c=>c.objectId);pN(r,s)||(i.contents.matches=t,Un.setCustomDrawerOrder(e,s))},async removeExcerptFromDrawer({drawerId:e,excerptId:t}){const i=this.drawerRecords[e];if(!i.contents)throw new Error("Cannot remove excerpt from drawer: drawer contents not found");const r=i.contents.matches.findIndex(d=>d.excerptId===t),s=i.contents.matches[r];i.contents.matches.splice(r,1),await Un.removeExcerptFromDrawer({drawerId:e,excerptId:t}),ih().addToast({message:`Excerpt '${s.excerptLabel}' removed from drawer '${i.title}'.`,url:`/drawers/viewDrawer/${e}`,urlText:"View drawer"})},async removeAssetFromDrawer({assetId:e,drawerId:t}){const i=Ho(),r=ih(),s=this.drawerRecords[t].title,c=await i.getAssetTitle(e);if(!e)throw new Error("Cannot remove asset from drawer: no assetId provided");if(!t)throw new Error("Cannot remove asset from drawer: no drawerId provided");const d=this.drawerRecords[t];if(!d.contents)throw new Error("Cannot remove asset from drawer: drawer contents not found");d.contents.matches=d.contents.matches.filter(l=>l.objectId!==e),await Un.removeAssetFromDrawer({assetId:e,drawerId:t}),r.addToast({message:`Removed '${c}' from drawer '${s}'.`})}}}),mN="modulepreload",gN=function(e){return"/assets/elevator-ui/dist/"+e},OE={},oo=function(t,i,r){if(!i||i.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(i.map(c=>{if(c=gN(c),c in OE)return;OE[c]=!0;const d=c.endsWith(".css"),l=d?'[rel="stylesheet"]':"";if(!!r)for(let y=s.length-1;y>=0;y--){const x=s[y];if(x.href===c&&(!d||x.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${l}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":mN,d||(g.as="script",g.crossOrigin=""),g.href=c,document.head.appendChild(g),d)return new Promise((y,x)=>{g.addEventListener("load",y),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})})).then(()=>t()).catch(c=>{const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c})},vN=(e,t)=>{const i=e[t];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((r,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+t)))})};function Bc(e){return fm()?(pm(e),!0):!1}function Qr(e){return typeof e=="function"?e():le(e)}const Tm=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const _N=e=>e!=null,yN=Object.prototype.toString,bN=e=>yN.call(e)==="[object Object]",Js=()=>{},xN=wN();function wN(){var e,t;return Tm&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function X1(e,t){function i(...r){return new Promise((s,c)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(s).catch(c)})}return i}const LM=e=>e();function SN(e,t={}){let i,r,s=Js;const c=l=>{clearTimeout(l),s(),s=Js};return l=>{const m=Qr(e),g=Qr(t.maxWait);return i&&c(i),m<=0||g!==void 0&&g<=0?(r&&(c(r),r=null),Promise.resolve(l())):new Promise((y,x)=>{s=t.rejectOnCancel?x:y,g&&!r&&(r=setTimeout(()=>{i&&c(i),r=null,y(l())},g)),i=setTimeout(()=>{r&&c(r),r=null,y(l())},m)})}}function TN(e,t=!0,i=!0,r=!1){let s=0,c,d=!0,l=Js,m;const g=()=>{c&&(clearTimeout(c),c=void 0,l(),l=Js)};return x=>{const C=Qr(e),I=Date.now()-s,A=()=>m=x();return g(),C<=0?(s=Date.now(),A()):(I>C&&(i||!d)?(s=Date.now(),A()):t&&(m=new Promise((O,F)=>{l=r?F:O,c=setTimeout(()=>{s=Date.now(),d=!0,O(A()),g()},Math.max(0,C-I))})),!i&&!c&&(c=setTimeout(()=>d=!0,C)),d=!1,m)}}function EN(e=LM){const t=Fe(!0);function i(){t.value=!1}function r(){t.value=!0}const s=(...c)=>{t.value&&e(...c)};return{isActive:Zu(t),pause:i,resume:r,eventFilter:s}}function CN(e){let t;function i(){return t||(t=e()),t}return i.reset=async()=>{const r=t;t=void 0,r&&await r},i}function IN(e){return Object.entries(e)}function OM(e){return e||Ua()}function AN(...e){if(e.length!==1)return vh(...e);const t=e[0];return typeof t=="function"?Zu(g1(()=>({get:t,set:Js}))):Fe(t)}function RM(e,t=200,i={}){return X1(SN(t,i),e)}function MN(e,t=200,i=!1,r=!0,s=!1){return X1(TN(t,i,r,s),e)}function kN(e,t,i={}){const{eventFilter:r=LM,...s}=i;return pn(e,X1(r,t),s)}function PN(e,t,i={}){const{eventFilter:r,...s}=i,{eventFilter:c,pause:d,resume:l,isActive:m}=EN(r);return{stop:kN(e,t,{...s,eventFilter:c}),pause:d,resume:l,isActive:m}}function DN(e,t){OM(t)&&ta(e,t)}function FM(e,t=!0,i){OM()?Fn(e,i):t?e():Ir(e)}function LN(e,t,i={}){const{immediate:r=!0}=i,s=Fe(!1);let c=null;function d(){c&&(clearTimeout(c),c=null)}function l(){s.value=!1,d()}function m(...g){d(),s.value=!0,c=setTimeout(()=>{s.value=!1,c=null,e(...g)},Qr(t))}return r&&(s.value=!0,Tm&&m()),Bc(l),{isPending:Zu(s),start:m,stop:l}}function Ys(e){var t;const i=Qr(e);return(t=i==null?void 0:i.$el)!=null?t:i}const ya=Tm?window:void 0,$M=Tm?window.document:void 0,zM=Tm?window.navigator:void 0;function Qs(...e){let t,i,r,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([i,r,s]=e,t=ya):[t,i,r,s]=e,!t)return Js;Array.isArray(i)||(i=[i]),Array.isArray(r)||(r=[r]);const c=[],d=()=>{c.forEach(y=>y()),c.length=0},l=(y,x,C,I)=>(y.addEventListener(x,C,I),()=>y.removeEventListener(x,C,I)),m=pn(()=>[Ys(t),Qr(s)],([y,x])=>{if(d(),!y)return;const C=bN(x)?{...x}:x;c.push(...i.flatMap(I=>r.map(A=>l(y,I,A,C))))},{immediate:!0,flush:"post"}),g=()=>{m(),d()};return Bc(g),g}let RE=!1;function ON(e,t,i={}){const{window:r=ya,ignore:s=[],capture:c=!0,detectIframe:d=!1}=i;if(!r)return Js;xN&&!RE&&(RE=!0,Array.from(r.document.body.children).forEach(C=>C.addEventListener("click",Js)),r.document.documentElement.addEventListener("click",Js));let l=!0;const m=C=>s.some(I=>{if(typeof I=="string")return Array.from(r.document.querySelectorAll(I)).some(A=>A===C.target||C.composedPath().includes(A));{const A=Ys(I);return A&&(C.target===A||C.composedPath().includes(A))}}),y=[Qs(r,"click",C=>{const I=Ys(e);if(!(!I||I===C.target||C.composedPath().includes(I))){if(C.detail===0&&(l=!m(C)),!l){l=!0;return}t(C)}},{passive:!0,capture:c}),Qs(r,"pointerdown",C=>{const I=Ys(e);l=!m(C)&&!!(I&&!C.composedPath().includes(I))},{passive:!0}),d&&Qs(r,"blur",C=>{setTimeout(()=>{var I;const A=Ys(e);((I=r.document.activeElement)==null?void 0:I.tagName)==="IFRAME"&&!(A!=null&&A.contains(r.document.activeElement))&&t(C)},0)})].filter(Boolean);return()=>y.forEach(C=>C())}function RN(){const e=Fe(!1);return Ua()&&Fn(()=>{e.value=!0}),e}function Yu(e){const t=RN();return De(()=>(t.value,!!e()))}function FN(e,t={}){const{immediate:i=!0,fpsLimit:r=void 0,window:s=ya}=t,c=Fe(!1),d=r?1e3/r:null;let l=0,m=null;function g(C){if(!c.value||!s)return;const I=C-(l||C);if(d&&I<d){m=s.requestAnimationFrame(g);return}e({delta:I,timestamp:C}),l=C,m=s.requestAnimationFrame(g)}function y(){!c.value&&s&&(c.value=!0,m=s.requestAnimationFrame(g))}function x(){c.value=!1,m!=null&&s&&(s.cancelAnimationFrame(m),m=null)}return i&&y(),Bc(x),{isActive:Zu(c),pause:x,resume:y}}function $N(e,t={}){const{window:i=ya}=t,r=Yu(()=>i&&"matchMedia"in i&&typeof i.matchMedia=="function");let s;const c=Fe(!1),d=g=>{c.value=g.matches},l=()=>{s&&("removeEventListener"in s?s.removeEventListener("change",d):s.removeListener(d))},m=$r(()=>{r.value&&(l(),s=i.matchMedia(Qr(e)),"addEventListener"in s?s.addEventListener("change",d):s.addListener(d),c.value=s.matches)});return Bc(()=>{m(),l(),s=void 0}),c}const FE=["hash","host","hostname","href","pathname","port","protocol","search"];function NM(e={}){const{window:t=ya}=e,i=Object.fromEntries(FE.map(c=>[c,Fe()]));for(const[c,d]of IN(i))pn(d,l=>{!(t!=null&&t.location)||t.location[c]===l||(t.location[c]=l)});const r=c=>{var d;const{state:l,length:m}=(t==null?void 0:t.history)||{},{origin:g}=(t==null?void 0:t.location)||{};for(const y of FE)i[y].value=(d=t==null?void 0:t.location)==null?void 0:d[y];return es({trigger:c,state:l,length:m,origin:g,...i})},s=Fe(r("load"));return t&&(Qs(t,"popstate",()=>s.value=r("popstate"),{passive:!0}),Qs(t,"hashchange",()=>s.value=r("hashchange"),{passive:!0})),s}function $E(e,t={}){const{controls:i=!1,navigator:r=zM}=t,s=Yu(()=>r&&"permissions"in r);let c;const d=typeof e=="string"?{name:e}:e,l=Fe(),m=()=>{c&&(l.value=c.state)},g=CN(async()=>{if(s.value){if(!c)try{c=await r.permissions.query(d),Qs(c,"change",m),m()}catch{l.value="prompt"}return c}});return g(),i?{state:l,isSupported:s,query:g}:l}function zN(e={}){const{navigator:t=zM,read:i=!1,source:r,copiedDuring:s=1500,legacy:c=!1}=e,d=Yu(()=>t&&"clipboard"in t),l=$E("clipboard-read"),m=$E("clipboard-write"),g=De(()=>d.value||c),y=Fe(""),x=Fe(!1),C=LN(()=>x.value=!1,s);function I(){d.value&&l.value!=="denied"?t.clipboard.readText().then(z=>{y.value=z}):y.value=F()}g.value&&i&&Qs(["copy","cut"],I);async function A(z=Qr(r)){g.value&&z!=null&&(d.value&&m.value!=="denied"?await t.clipboard.writeText(z):O(z),y.value=z,x.value=!0,C.start())}function O(z){const U=document.createElement("textarea");U.value=z??"",U.style.position="absolute",U.style.opacity="0",document.body.appendChild(U),U.select(),document.execCommand("copy"),U.remove()}function F(){var z,U,H;return(H=(U=(z=document==null?void 0:document.getSelection)==null?void 0:z.call(document))==null?void 0:U.toString())!=null?H:""}return{isSupported:g,text:y,copied:x,copy:A}}const sv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},av="__vueuse_ssr_handlers__",NN=BN();function BN(){return av in sv||(sv[av]=sv[av]||{}),sv[av]}function jN(e,t){return NN[e]||t}function VN(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const UN={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},zE="vueuse-storage";function BM(e,t,i,r={}){var s;const{flush:c="pre",deep:d=!0,listenToStorageChanges:l=!0,writeDefaults:m=!0,mergeDefaults:g=!1,shallow:y,window:x=ya,eventFilter:C,onError:I=K=>{console.error(K)},initOnMounted:A}=r,O=(y?$h:Fe)(typeof t=="function"?t():t);if(!i)try{i=jN("getDefaultStorage",()=>{var K;return(K=ya)==null?void 0:K.localStorage})()}catch(K){I(K)}if(!i)return O;const F=Qr(t),z=VN(F),U=(s=r.serializer)!=null?s:UN[z],{pause:H,resume:q}=PN(O,()=>ee(O.value),{flush:c,deep:d,eventFilter:C});return x&&l&&FM(()=>{Qs(x,"storage",se),Qs(x,zE,ve),A&&se()}),A||se(),O;function ee(K){try{if(K==null)i.removeItem(e);else{const J=U.write(K),W=i.getItem(e);W!==J&&(i.setItem(e,J),x&&x.dispatchEvent(new CustomEvent(zE,{detail:{key:e,oldValue:W,newValue:J,storageArea:i}})))}}catch(J){I(J)}}function Q(K){const J=K?K.newValue:i.getItem(e);if(J==null)return m&&F!=null&&i.setItem(e,U.write(F)),F;if(!K&&g){const W=U.read(J);return typeof g=="function"?g(W,F):z==="object"&&!Array.isArray(W)?{...F,...W}:W}else return typeof J!="string"?J:U.read(J)}function ve(K){se(K.detail)}function se(K){if(!(K&&K.storageArea!==i)){if(K&&K.key==null){O.value=F;return}if(!(K&&K.key!==e)){H();try{(K==null?void 0:K.newValue)!==U.write(O.value)&&(O.value=Q(K))}catch(J){I(J)}finally{K?Ir(q):q()}}}}}function HN(e,t,i={}){const{window:r=ya,...s}=i;let c;const d=Yu(()=>r&&"MutationObserver"in r),l=()=>{c&&(c.disconnect(),c=void 0)},m=pn(()=>Ys(e),x=>{l(),d.value&&r&&x&&(c=new MutationObserver(t),c.observe(x,s))},{immediate:!0}),g=()=>c==null?void 0:c.takeRecords(),y=()=>{l(),m()};return Bc(y),{isSupported:d,stop:y,takeRecords:g}}function Q_(e,t,i={}){const{window:r=ya,...s}=i;let c;const d=Yu(()=>r&&"ResizeObserver"in r),l=()=>{c&&(c.disconnect(),c=void 0)},m=De(()=>Array.isArray(e)?e.map(x=>Ys(x)):[Ys(e)]),g=pn(m,x=>{if(l(),d.value&&r){c=new ResizeObserver(t);for(const C of x)C&&c.observe(C,s)}},{immediate:!0,flush:"post",deep:!0}),y=()=>{l(),g()};return Bc(y),{isSupported:d,stop:y}}function GN(e,t,i={}){const{root:r,rootMargin:s="0px",threshold:c=.1,window:d=ya,immediate:l=!0}=i,m=Yu(()=>d&&"IntersectionObserver"in d),g=De(()=>{const A=Qr(e);return(Array.isArray(A)?A:[A]).map(Ys).filter(_N)});let y=Js;const x=Fe(l),C=m.value?pn(()=>[g.value,Ys(r),x.value],([A,O])=>{if(y(),!x.value||!A.length)return;const F=new IntersectionObserver(t,{root:Ys(O),rootMargin:s,threshold:c});A.forEach(z=>z&&F.observe(z)),y=()=>{F.disconnect(),y=Js}},{immediate:l,flush:"post"}):Js,I=()=>{y(),C(),x.value=!1};return Bc(I),{isSupported:m,isActive:x,pause(){y(),x.value=!1},resume(){x.value=!0},stop:I}}const NE=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function WN(e,t={}){const{document:i=$M,autoExit:r=!1}=t,s=De(()=>{var z;return(z=Ys(e))!=null?z:i==null?void 0:i.querySelector("html")}),c=Fe(!1),d=De(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(z=>i&&z in i||s.value&&z in s.value)),l=De(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(z=>i&&z in i||s.value&&z in s.value)),m=De(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(z=>i&&z in i||s.value&&z in s.value)),g=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(z=>i&&z in i),y=Yu(()=>s.value&&i&&d.value!==void 0&&l.value!==void 0&&m.value!==void 0),x=()=>g?(i==null?void 0:i[g])===s.value:!1,C=()=>{if(m.value){if(i&&i[m.value]!=null)return i[m.value];{const z=s.value;if((z==null?void 0:z[m.value])!=null)return!!z[m.value]}}return!1};async function I(){if(!(!y.value||!c.value)){if(l.value)if((i==null?void 0:i[l.value])!=null)await i[l.value]();else{const z=s.value;(z==null?void 0:z[l.value])!=null&&await z[l.value]()}c.value=!1}}async function A(){if(!y.value||c.value)return;C()&&await I();const z=s.value;d.value&&(z==null?void 0:z[d.value])!=null&&(await z[d.value](),c.value=!0)}async function O(){await(c.value?I():A())}const F=()=>{const z=C();(!z||z&&x())&&(c.value=z)};return Qs(i,NE,F,!1),Qs(()=>Ys(s),NE,F,!1),r&&Bc(I),{isSupported:y,isFullscreen:c,enter:A,exit:I,toggle:O}}const BE=1;function ey(e,t={}){const{throttle:i=0,idle:r=200,onStop:s=Js,onScroll:c=Js,offset:d={left:0,right:0,top:0,bottom:0},eventListenerOptions:l={capture:!1,passive:!0},behavior:m="auto",window:g=ya}=t,y=Fe(0),x=Fe(0),C=De({get(){return y.value},set(Q){A(Q,void 0)}}),I=De({get(){return x.value},set(Q){A(void 0,Q)}});function A(Q,ve){var se,K,J;if(!g)return;const W=Qr(e);W&&((J=W instanceof Document?g.document.body:W)==null||J.scrollTo({top:(se=Qr(ve))!=null?se:I.value,left:(K=Qr(Q))!=null?K:C.value,behavior:Qr(m)}))}const O=Fe(!1),F=es({left:!0,right:!1,top:!0,bottom:!1}),z=es({left:!1,right:!1,top:!1,bottom:!1}),U=Q=>{O.value&&(O.value=!1,z.left=!1,z.right=!1,z.top=!1,z.bottom=!1,s(Q))},H=RM(U,i+r),q=Q=>{var ve;if(!g)return;const se=Q.document?Q.document.documentElement:(ve=Q.documentElement)!=null?ve:Q,{display:K,flexDirection:J}=getComputedStyle(se),W=se.scrollLeft;z.left=W<y.value,z.right=W>y.value;const te=Math.abs(W)<=0+(d.left||0),j=Math.abs(W)+se.clientWidth>=se.scrollWidth-(d.right||0)-BE;K==="flex"&&J==="row-reverse"?(F.left=j,F.right=te):(F.left=te,F.right=j),y.value=W;let re=se.scrollTop;Q===g.document&&!re&&(re=g.document.body.scrollTop),z.top=re<x.value,z.bottom=re>x.value;const Te=Math.abs(re)<=0+(d.top||0),ye=Math.abs(re)+se.clientHeight>=se.scrollHeight-(d.bottom||0)-BE;K==="flex"&&J==="column-reverse"?(F.top=ye,F.bottom=Te):(F.top=Te,F.bottom=ye),x.value=re},ee=Q=>{var ve;if(!g)return;const se=(ve=Q.target.documentElement)!=null?ve:Q.target;q(se),O.value=!0,H(Q),c(Q)};return Qs(e,"scroll",i?MN(ee,i,!0,!1):ee,l),FM(()=>{const Q=Qr(e);Q&&q(Q)}),Qs(e,"scrollend",U,l),{x:C,y:I,isScrolling:O,arrivedState:F,directions:z,measure(){const Q=Qr(e);g&&Q&&q(Q)}}}function Ud(e,t,i={}){const{window:r=ya}=i;return BM(e,t,r==null?void 0:r.sessionStorage,i)}function qN(e=null,t={}){var i,r,s;const{document:c=$M,restoreOnUnmount:d=x=>x}=t,l=(i=c==null?void 0:c.title)!=null?i:"",m=AN((r=e??(c==null?void 0:c.title))!=null?r:null),g=e&&typeof e=="function";function y(x){if(!("titleTemplate"in t))return x;const C=t.titleTemplate||"%s";return typeof C=="function"?C(x):Qr(C).replace(/%s/g,x)}return pn(m,(x,C)=>{x!==C&&c&&(c.title=y(typeof x=="string"?x:""))},{immediate:!0}),t.observe&&!t.titleTemplate&&c&&!g&&HN((s=c.head)==null?void 0:s.querySelector("title"),()=>{c&&c.title!==m.value&&(m.value=y(c.title))},{childList:!0}),DN(()=>{if(d){const x=d(l,m.value||"");x!=null&&c&&(c.title=x)}}),m}function ZN(e={}){const{window:t=ya,behavior:i="auto"}=e;if(!t)return{x:Fe(0),y:Fe(0)};const r=Fe(t.scrollX),s=Fe(t.scrollY),c=De({get(){return r.value},set(l){scrollTo({left:l,behavior:i})}}),d=De({get(){return s.value},set(l){scrollTo({top:l,behavior:i})}});return Qs(t,"scroll",()=>{r.value=t.scrollX,s.value=t.scrollY},{capture:!1,passive:!0}),{x:c,y:d}}function jM(){const{availableThemes:e,defaultTheme:t}=Zn.instance.theming,{url:i}=Zn.instance.base,r=Zn.instance.theming.enabled,s=BM(`theme-${i}`,t);return pn(s,async()=>{e.includes(s.value)||(s.value=t),document.documentElement.setAttribute("data-theme",s.value),s.value!=="light"&&vN(Object.assign({"../css/themes/dark.css":()=>oo(()=>Promise.resolve({}),["assets/dark-5d0f38c8.css"]),"../css/themes/default.css":()=>oo(()=>Promise.resolve({}),["assets/default-a3e57f3c.css"]),"../css/themes/folwell.css":()=>oo(()=>Promise.resolve({}),["assets/folwell-3ae01df2.css"]),"../css/themes/hotdog.css":()=>oo(()=>Promise.resolve({}),["assets/hotdog-45a905bf.css"])}),`../css/themes/${s.value}.css`).catch(c=>{console.error(`Failed to load theme css for ${s.value}. falling back to light theme.`,c)})},{immediate:!0}),{activeTheme:s,availableThemes:e,isEnabled:r,setTheme(c){s.value=c}}}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Qd=typeof window<"u";function KN(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Ai=Object.assign;function q0(e,t){const i={};for(const r in t){const s=t[r];i[r]=fo(s)?s.map(e):e(s)}return i}const Dp=()=>{},fo=Array.isArray,XN=/\/$/,YN=e=>e.replace(XN,"");function Z0(e,t,i="/"){let r,s={},c="",d="";const l=t.indexOf("#");let m=t.indexOf("?");return l<m&&l>=0&&(m=-1),m>-1&&(r=t.slice(0,m),c=t.slice(m+1,l>-1?l:t.length),s=e(c)),l>-1&&(r=r||t.slice(0,l),d=t.slice(l,t.length)),r=tB(r??t,i),{fullPath:r+(c&&"?")+c+d,path:r,query:s,hash:d}}function JN(e,t){const i=t.query?e(t.query):"";return t.path+(i&&"?")+i+(t.hash||"")}function jE(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function QN(e,t,i){const r=t.matched.length-1,s=i.matched.length-1;return r>-1&&r===s&&Eh(t.matched[r],i.matched[s])&&VM(t.params,i.params)&&e(t.query)===e(i.query)&&t.hash===i.hash}function Eh(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function VM(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!eB(e[i],t[i]))return!1;return!0}function eB(e,t){return fo(e)?VE(e,t):fo(t)?VE(t,e):e===t}function VE(e,t){return fo(t)?e.length===t.length&&e.every((i,r)=>i===t[r]):e.length===1&&e[0]===t}function tB(e,t){if(e.startsWith("/"))return e;if(!e)return t;const i=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let c=i.length-1,d,l;for(d=0;d<r.length;d++)if(l=r[d],l!==".")if(l==="..")c>1&&c--;else break;return i.slice(0,c).join("/")+"/"+r.slice(d-(d===r.length?1:0)).join("/")}var Qp;(function(e){e.pop="pop",e.push="push"})(Qp||(Qp={}));var Lp;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Lp||(Lp={}));function nB(e){if(!e)if(Qd){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),YN(e)}const iB=/^[^#]+#/;function rB(e,t){return e.replace(iB,"#")+t}function sB(e,t){const i=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-i.left-(t.left||0),top:r.top-i.top-(t.top||0)}}const ty=()=>({left:window.pageXOffset,top:window.pageYOffset});function aB(e){let t;if("el"in e){const i=e.el,r=typeof i=="string"&&i.startsWith("#"),s=typeof i=="string"?r?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!s)return;t=sB(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function UE(e,t){return(history.state?history.state.position-t:-1)+e}const mx=new Map;function oB(e,t){mx.set(e,t)}function lB(e){const t=mx.get(e);return mx.delete(e),t}let cB=()=>location.protocol+"//"+location.host;function UM(e,t){const{pathname:i,search:r,hash:s}=t,c=e.indexOf("#");if(c>-1){let l=s.includes(e.slice(c))?e.slice(c).length:1,m=s.slice(l);return m[0]!=="/"&&(m="/"+m),jE(m,"")}return jE(i,e)+r+s}function uB(e,t,i,r){let s=[],c=[],d=null;const l=({state:C})=>{const I=UM(e,location),A=i.value,O=t.value;let F=0;if(C){if(i.value=I,t.value=C,d&&d===A){d=null;return}F=O?C.position-O.position:0}else r(I);s.forEach(z=>{z(i.value,A,{delta:F,type:Qp.pop,direction:F?F>0?Lp.forward:Lp.back:Lp.unknown})})};function m(){d=i.value}function g(C){s.push(C);const I=()=>{const A=s.indexOf(C);A>-1&&s.splice(A,1)};return c.push(I),I}function y(){const{history:C}=window;C.state&&C.replaceState(Ai({},C.state,{scroll:ty()}),"")}function x(){for(const C of c)C();c=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",y)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",y,{passive:!0}),{pauseListeners:m,listen:g,destroy:x}}function HE(e,t,i,r=!1,s=!1){return{back:e,current:t,forward:i,replaced:r,position:window.history.length,scroll:s?ty():null}}function dB(e){const{history:t,location:i}=window,r={value:UM(e,i)},s={value:t.state};s.value||c(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function c(m,g,y){const x=e.indexOf("#"),C=x>-1?(i.host&&document.querySelector("base")?e:e.slice(x))+m:cB()+e+m;try{t[y?"replaceState":"pushState"](g,"",C),s.value=g}catch(I){console.error(I),i[y?"replace":"assign"](C)}}function d(m,g){const y=Ai({},t.state,HE(s.value.back,m,s.value.forward,!0),g,{position:s.value.position});c(m,y,!0),r.value=m}function l(m,g){const y=Ai({},s.value,t.state,{forward:m,scroll:ty()});c(y.current,y,!0);const x=Ai({},HE(r.value,m,null),{position:y.position+1},g);c(m,x,!1),r.value=m}return{location:r,state:s,push:l,replace:d}}function hB(e){e=nB(e);const t=dB(e),i=uB(e,t.state,t.location,t.replace);function r(c,d=!0){d||i.pauseListeners(),history.go(c)}const s=Ai({location:"",base:e,go:r,createHref:rB.bind(null,e)},t,i);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function fB(e){return typeof e=="string"||e&&typeof e=="object"}function HM(e){return typeof e=="string"||typeof e=="symbol"}const oc={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},GM=Symbol("");var GE;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(GE||(GE={}));function Ch(e,t){return Ai(new Error,{type:e,[GM]:!0},t)}function ml(e,t){return e instanceof Error&&GM in e&&(t==null||!!(e.type&t))}const WE="[^/]+?",pB={sensitive:!1,strict:!1,start:!0,end:!0},mB=/[.+*?^${}()[\]/\\]/g;function gB(e,t){const i=Ai({},pB,t),r=[];let s=i.start?"^":"";const c=[];for(const g of e){const y=g.length?[]:[90];i.strict&&!g.length&&(s+="/");for(let x=0;x<g.length;x++){const C=g[x];let I=40+(i.sensitive?.25:0);if(C.type===0)x||(s+="/"),s+=C.value.replace(mB,"\\$&"),I+=40;else if(C.type===1){const{value:A,repeatable:O,optional:F,regexp:z}=C;c.push({name:A,repeatable:O,optional:F});const U=z||WE;if(U!==WE){I+=10;try{new RegExp(`(${U})`)}catch(q){throw new Error(`Invalid custom RegExp for param "${A}" (${U}): `+q.message)}}let H=O?`((?:${U})(?:/(?:${U}))*)`:`(${U})`;x||(H=F&&g.length<2?`(?:/${H})`:"/"+H),F&&(H+="?"),s+=H,I+=20,F&&(I+=-8),O&&(I+=-20),U===".*"&&(I+=-50)}y.push(I)}r.push(y)}if(i.strict&&i.end){const g=r.length-1;r[g][r[g].length-1]+=.7000000000000001}i.strict||(s+="/?"),i.end?s+="$":i.strict&&(s+="(?:/|$)");const d=new RegExp(s,i.sensitive?"":"i");function l(g){const y=g.match(d),x={};if(!y)return null;for(let C=1;C<y.length;C++){const I=y[C]||"",A=c[C-1];x[A.name]=I&&A.repeatable?I.split("/"):I}return x}function m(g){let y="",x=!1;for(const C of e){(!x||!y.endsWith("/"))&&(y+="/"),x=!1;for(const I of C)if(I.type===0)y+=I.value;else if(I.type===1){const{value:A,repeatable:O,optional:F}=I,z=A in g?g[A]:"";if(fo(z)&&!O)throw new Error(`Provided param "${A}" is an array but it is not repeatable (* or + modifiers)`);const U=fo(z)?z.join("/"):z;if(!U)if(F)C.length<2&&(y.endsWith("/")?y=y.slice(0,-1):x=!0);else throw new Error(`Missing required param "${A}"`);y+=U}}return y||"/"}return{re:d,score:r,keys:c,parse:l,stringify:m}}function vB(e,t){let i=0;for(;i<e.length&&i<t.length;){const r=t[i]-e[i];if(r)return r;i++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function _B(e,t){let i=0;const r=e.score,s=t.score;for(;i<r.length&&i<s.length;){const c=vB(r[i],s[i]);if(c)return c;i++}if(Math.abs(s.length-r.length)===1){if(qE(r))return 1;if(qE(s))return-1}return s.length-r.length}function qE(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const yB={type:0,value:""},bB=/[a-zA-Z0-9_]/;function xB(e){if(!e)return[[]];if(e==="/")return[[yB]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(I){throw new Error(`ERR (${i})/"${g}": ${I}`)}let i=0,r=i;const s=[];let c;function d(){c&&s.push(c),c=[]}let l=0,m,g="",y="";function x(){g&&(i===0?c.push({type:0,value:g}):i===1||i===2||i===3?(c.length>1&&(m==="*"||m==="+")&&t(`A repeatable param (${g}) must be alone in its segment. eg: '/:ids+.`),c.push({type:1,value:g,regexp:y,repeatable:m==="*"||m==="+",optional:m==="*"||m==="?"})):t("Invalid state to consume buffer"),g="")}function C(){g+=m}for(;l<e.length;){if(m=e[l++],m==="\\"&&i!==2){r=i,i=4;continue}switch(i){case 0:m==="/"?(g&&x(),d()):m===":"?(x(),i=1):C();break;case 4:C(),i=r;break;case 1:m==="("?i=2:bB.test(m)?C():(x(),i=0,m!=="*"&&m!=="?"&&m!=="+"&&l--);break;case 2:m===")"?y[y.length-1]=="\\"?y=y.slice(0,-1)+m:i=3:y+=m;break;case 3:x(),i=0,m!=="*"&&m!=="?"&&m!=="+"&&l--,y="";break;default:t("Unknown state");break}}return i===2&&t(`Unfinished custom RegExp for param "${g}"`),x(),d(),s}function wB(e,t,i){const r=gB(xB(e.path),i),s=Ai(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function SB(e,t){const i=[],r=new Map;t=XE({strict:!1,end:!0,sensitive:!1},t);function s(y){return r.get(y)}function c(y,x,C){const I=!C,A=TB(y);A.aliasOf=C&&C.record;const O=XE(t,y),F=[A];if("alias"in y){const H=typeof y.alias=="string"?[y.alias]:y.alias;for(const q of H)F.push(Ai({},A,{components:C?C.record.components:A.components,path:q,aliasOf:C?C.record:A}))}let z,U;for(const H of F){const{path:q}=H;if(x&&q[0]!=="/"){const ee=x.record.path,Q=ee[ee.length-1]==="/"?"":"/";H.path=x.record.path+(q&&Q+q)}if(z=wB(H,x,O),C?C.alias.push(z):(U=U||z,U!==z&&U.alias.push(z),I&&y.name&&!KE(z)&&d(y.name)),A.children){const ee=A.children;for(let Q=0;Q<ee.length;Q++)c(ee[Q],z,C&&C.children[Q])}C=C||z,(z.record.components&&Object.keys(z.record.components).length||z.record.name||z.record.redirect)&&m(z)}return U?()=>{d(U)}:Dp}function d(y){if(HM(y)){const x=r.get(y);x&&(r.delete(y),i.splice(i.indexOf(x),1),x.children.forEach(d),x.alias.forEach(d))}else{const x=i.indexOf(y);x>-1&&(i.splice(x,1),y.record.name&&r.delete(y.record.name),y.children.forEach(d),y.alias.forEach(d))}}function l(){return i}function m(y){let x=0;for(;x<i.length&&_B(y,i[x])>=0&&(y.record.path!==i[x].record.path||!WM(y,i[x]));)x++;i.splice(x,0,y),y.record.name&&!KE(y)&&r.set(y.record.name,y)}function g(y,x){let C,I={},A,O;if("name"in y&&y.name){if(C=r.get(y.name),!C)throw Ch(1,{location:y});O=C.record.name,I=Ai(ZE(x.params,C.keys.filter(U=>!U.optional).map(U=>U.name)),y.params&&ZE(y.params,C.keys.map(U=>U.name))),A=C.stringify(I)}else if("path"in y)A=y.path,C=i.find(U=>U.re.test(A)),C&&(I=C.parse(A),O=C.record.name);else{if(C=x.name?r.get(x.name):i.find(U=>U.re.test(x.path)),!C)throw Ch(1,{location:y,currentLocation:x});O=C.record.name,I=Ai({},x.params,y.params),A=C.stringify(I)}const F=[];let z=C;for(;z;)F.unshift(z.record),z=z.parent;return{name:O,path:A,params:I,matched:F,meta:CB(F)}}return e.forEach(y=>c(y)),{addRoute:c,resolve:g,removeRoute:d,getRoutes:l,getRecordMatcher:s}}function ZE(e,t){const i={};for(const r of t)r in e&&(i[r]=e[r]);return i}function TB(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:EB(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function EB(e){const t={},i=e.props||!1;if("component"in e)t.default=i;else for(const r in e.components)t[r]=typeof i=="object"?i[r]:i;return t}function KE(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function CB(e){return e.reduce((t,i)=>Ai(t,i.meta),{})}function XE(e,t){const i={};for(const r in e)i[r]=r in t?t[r]:e[r];return i}function WM(e,t){return t.children.some(i=>i===e||WM(e,i))}const qM=/#/g,IB=/&/g,AB=/\//g,MB=/=/g,kB=/\?/g,ZM=/\+/g,PB=/%5B/g,DB=/%5D/g,KM=/%5E/g,LB=/%60/g,XM=/%7B/g,OB=/%7C/g,YM=/%7D/g,RB=/%20/g;function Y1(e){return encodeURI(""+e).replace(OB,"|").replace(PB,"[").replace(DB,"]")}function FB(e){return Y1(e).replace(XM,"{").replace(YM,"}").replace(KM,"^")}function gx(e){return Y1(e).replace(ZM,"%2B").replace(RB,"+").replace(qM,"%23").replace(IB,"%26").replace(LB,"`").replace(XM,"{").replace(YM,"}").replace(KM,"^")}function $B(e){return gx(e).replace(MB,"%3D")}function zB(e){return Y1(e).replace(qM,"%23").replace(kB,"%3F")}function NB(e){return e==null?"":zB(e).replace(AB,"%2F")}function a_(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function BB(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const c=r[s].replace(ZM," "),d=c.indexOf("="),l=a_(d<0?c:c.slice(0,d)),m=d<0?null:a_(c.slice(d+1));if(l in t){let g=t[l];fo(g)||(g=t[l]=[g]),g.push(m)}else t[l]=m}return t}function YE(e){let t="";for(let i in e){const r=e[i];if(i=$B(i),r==null){r!==void 0&&(t+=(t.length?"&":"")+i);continue}(fo(r)?r.map(c=>c&&gx(c)):[r&&gx(r)]).forEach(c=>{c!==void 0&&(t+=(t.length?"&":"")+i,c!=null&&(t+="="+c))})}return t}function jB(e){const t={};for(const i in e){const r=e[i];r!==void 0&&(t[i]=fo(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const J1=Symbol(""),JE=Symbol(""),ny=Symbol(""),Q1=Symbol(""),vx=Symbol("");function tp(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function i(){e=[]}return{add:t,list:()=>e.slice(),reset:i}}function JM(e,t,i){const r=()=>{e[t].delete(i)};Hi(r),E1(r),T1(()=>{e[t].add(i)}),e[t].add(i)}function VB(e){const t=yi(J1,{}).value;t&&JM(t,"leaveGuards",e)}function UB(e){const t=yi(J1,{}).value;t&&JM(t,"updateGuards",e)}function mc(e,t,i,r,s){const c=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((d,l)=>{const m=x=>{x===!1?l(Ch(4,{from:i,to:t})):x instanceof Error?l(x):fB(x)?l(Ch(2,{from:t,to:x})):(c&&r.enterCallbacks[s]===c&&typeof x=="function"&&c.push(x),d())},g=e.call(r&&r.instances[s],t,i,m);let y=Promise.resolve(g);e.length<3&&(y=y.then(m)),y.catch(x=>l(x))})}function K0(e,t,i,r){const s=[];for(const c of e)for(const d in c.components){let l=c.components[d];if(!(t!=="beforeRouteEnter"&&!c.instances[d]))if(HB(l)){const g=(l.__vccOpts||l)[t];g&&s.push(mc(g,i,r,c,d))}else{let m=l();s.push(()=>m.then(g=>{if(!g)return Promise.reject(new Error(`Couldn't resolve component "${d}" at "${c.path}"`));const y=KN(g)?g.default:g;c.components[d]=y;const C=(y.__vccOpts||y)[t];return C&&mc(C,i,r,c,d)()}))}}return s}function HB(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function QE(e){const t=yi(ny),i=yi(Q1),r=De(()=>t.resolve(le(e.to))),s=De(()=>{const{matched:m}=r.value,{length:g}=m,y=m[g-1],x=i.matched;if(!y||!x.length)return-1;const C=x.findIndex(Eh.bind(null,y));if(C>-1)return C;const I=e2(m[g-2]);return g>1&&e2(y)===I&&x[x.length-1].path!==I?x.findIndex(Eh.bind(null,m[g-2])):C}),c=De(()=>s.value>-1&&qB(i.params,r.value.params)),d=De(()=>s.value>-1&&s.value===i.matched.length-1&&VM(i.params,r.value.params));function l(m={}){return WB(m)?t[le(e.replace)?"replace":"push"](le(e.to)).catch(Dp):Promise.resolve()}return{route:r,href:De(()=>r.value.href),isActive:c,isExactActive:d,navigate:l}}const GB=lt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:QE,setup(e,{slots:t}){const i=es(QE(e)),{options:r}=yi(ny),s=De(()=>({[t2(e.activeClass,r.linkActiveClass,"router-link-active")]:i.isActive,[t2(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const c=t.default&&t.default(i);return e.custom?c:Jn("a",{"aria-current":i.isExactActive?e.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:s.value},c)}}}),Ac=GB;function WB(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function qB(e,t){for(const i in t){const r=t[i],s=e[i];if(typeof r=="string"){if(r!==s)return!1}else if(!fo(s)||s.length!==r.length||r.some((c,d)=>c!==s[d]))return!1}return!0}function e2(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const t2=(e,t,i)=>e??t??i,ZB=lt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:i}){const r=yi(vx),s=De(()=>e.route||r.value),c=yi(JE,0),d=De(()=>{let g=le(c);const{matched:y}=s.value;let x;for(;(x=y[g])&&!x.components;)g++;return g}),l=De(()=>s.value.matched[d.value]);ki(JE,De(()=>d.value+1)),ki(J1,l),ki(vx,s);const m=Fe();return pn(()=>[m.value,l.value,e.name],([g,y,x],[C,I,A])=>{y&&(y.instances[x]=g,I&&I!==y&&g&&g===C&&(y.leaveGuards.size||(y.leaveGuards=I.leaveGuards),y.updateGuards.size||(y.updateGuards=I.updateGuards))),g&&y&&(!I||!Eh(y,I)||!C)&&(y.enterCallbacks[x]||[]).forEach(O=>O(g))},{flush:"post"}),()=>{const g=s.value,y=e.name,x=l.value,C=x&&x.components[y];if(!C)return n2(i.default,{Component:C,route:g});const I=x.props[y],A=I?I===!0?g.params:typeof I=="function"?I(g):I:null,F=Jn(C,Ai({},A,t,{onVnodeUnmounted:z=>{z.component.isUnmounted&&(x.instances[y]=null)},ref:m}));return n2(i.default,{Component:F,route:g})||F}}});function n2(e,t){if(!e)return null;const i=e(t);return i.length===1?i[0]:i}const KB=ZB;function XB(e){const t=SB(e.routes,e),i=e.parseQuery||BB,r=e.stringifyQuery||YE,s=e.history,c=tp(),d=tp(),l=tp(),m=$h(oc);let g=oc;Qd&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const y=q0.bind(null,Xe=>""+Xe),x=q0.bind(null,NB),C=q0.bind(null,a_);function I(Xe,Dt){let Tt,Nt;return HM(Xe)?(Tt=t.getRecordMatcher(Xe),Nt=Dt):Nt=Xe,t.addRoute(Nt,Tt)}function A(Xe){const Dt=t.getRecordMatcher(Xe);Dt&&t.removeRoute(Dt)}function O(){return t.getRoutes().map(Xe=>Xe.record)}function F(Xe){return!!t.getRecordMatcher(Xe)}function z(Xe,Dt){if(Dt=Ai({},Dt||m.value),typeof Xe=="string"){const Ie=Z0(i,Xe,Dt.path),at=t.resolve({path:Ie.path},Dt),Z=s.createHref(Ie.fullPath);return Ai(Ie,at,{params:C(at.params),hash:a_(Ie.hash),redirectedFrom:void 0,href:Z})}let Tt;if("path"in Xe)Tt=Ai({},Xe,{path:Z0(i,Xe.path,Dt.path).path});else{const Ie=Ai({},Xe.params);for(const at in Ie)Ie[at]==null&&delete Ie[at];Tt=Ai({},Xe,{params:x(Ie)}),Dt.params=x(Dt.params)}const Nt=t.resolve(Tt,Dt),dn=Xe.hash||"";Nt.params=y(C(Nt.params));const Sn=JN(r,Ai({},Xe,{hash:FB(dn),path:Nt.path})),me=s.createHref(Sn);return Ai({fullPath:Sn,hash:dn,query:r===YE?jB(Xe.query):Xe.query||{}},Nt,{redirectedFrom:void 0,href:me})}function U(Xe){return typeof Xe=="string"?Z0(i,Xe,m.value.path):Ai({},Xe)}function H(Xe,Dt){if(g!==Xe)return Ch(8,{from:Dt,to:Xe})}function q(Xe){return ve(Xe)}function ee(Xe){return q(Ai(U(Xe),{replace:!0}))}function Q(Xe){const Dt=Xe.matched[Xe.matched.length-1];if(Dt&&Dt.redirect){const{redirect:Tt}=Dt;let Nt=typeof Tt=="function"?Tt(Xe):Tt;return typeof Nt=="string"&&(Nt=Nt.includes("?")||Nt.includes("#")?Nt=U(Nt):{path:Nt},Nt.params={}),Ai({query:Xe.query,hash:Xe.hash,params:"path"in Nt?{}:Xe.params},Nt)}}function ve(Xe,Dt){const Tt=g=z(Xe),Nt=m.value,dn=Xe.state,Sn=Xe.force,me=Xe.replace===!0,Ie=Q(Tt);if(Ie)return ve(Ai(U(Ie),{state:typeof Ie=="object"?Ai({},dn,Ie.state):dn,force:Sn,replace:me}),Dt||Tt);const at=Tt;at.redirectedFrom=Dt;let Z;return!Sn&&QN(r,Nt,Tt)&&(Z=Ch(16,{to:at,from:Nt}),vt(Nt,Nt,!0,!1)),(Z?Promise.resolve(Z):J(at,Nt)).catch(he=>ml(he)?ml(he,2)?he:It(he):Ue(he,at,Nt)).then(he=>{if(he){if(ml(he,2))return ve(Ai({replace:me},U(he.to),{state:typeof he.to=="object"?Ai({},dn,he.to.state):dn,force:Sn}),Dt||at)}else he=te(at,Nt,!0,me,dn);return W(at,Nt,he),he})}function se(Xe,Dt){const Tt=H(Xe,Dt);return Tt?Promise.reject(Tt):Promise.resolve()}function K(Xe){const Dt=ot.values().next().value;return Dt&&typeof Dt.runWithContext=="function"?Dt.runWithContext(Xe):Xe()}function J(Xe,Dt){let Tt;const[Nt,dn,Sn]=YB(Xe,Dt);Tt=K0(Nt.reverse(),"beforeRouteLeave",Xe,Dt);for(const Ie of Nt)Ie.leaveGuards.forEach(at=>{Tt.push(mc(at,Xe,Dt))});const me=se.bind(null,Xe,Dt);return Tt.push(me),wt(Tt).then(()=>{Tt=[];for(const Ie of c.list())Tt.push(mc(Ie,Xe,Dt));return Tt.push(me),wt(Tt)}).then(()=>{Tt=K0(dn,"beforeRouteUpdate",Xe,Dt);for(const Ie of dn)Ie.updateGuards.forEach(at=>{Tt.push(mc(at,Xe,Dt))});return Tt.push(me),wt(Tt)}).then(()=>{Tt=[];for(const Ie of Sn)if(Ie.beforeEnter)if(fo(Ie.beforeEnter))for(const at of Ie.beforeEnter)Tt.push(mc(at,Xe,Dt));else Tt.push(mc(Ie.beforeEnter,Xe,Dt));return Tt.push(me),wt(Tt)}).then(()=>(Xe.matched.forEach(Ie=>Ie.enterCallbacks={}),Tt=K0(Sn,"beforeRouteEnter",Xe,Dt),Tt.push(me),wt(Tt))).then(()=>{Tt=[];for(const Ie of d.list())Tt.push(mc(Ie,Xe,Dt));return Tt.push(me),wt(Tt)}).catch(Ie=>ml(Ie,8)?Ie:Promise.reject(Ie))}function W(Xe,Dt,Tt){l.list().forEach(Nt=>K(()=>Nt(Xe,Dt,Tt)))}function te(Xe,Dt,Tt,Nt,dn){const Sn=H(Xe,Dt);if(Sn)return Sn;const me=Dt===oc,Ie=Qd?history.state:{};Tt&&(Nt||me?s.replace(Xe.fullPath,Ai({scroll:me&&Ie&&Ie.scroll},dn)):s.push(Xe.fullPath,dn)),m.value=Xe,vt(Xe,Dt,Tt,me),It()}let j;function re(){j||(j=s.listen((Xe,Dt,Tt)=>{if(!Ct.listening)return;const Nt=z(Xe),dn=Q(Nt);if(dn){ve(Ai(dn,{replace:!0}),Nt).catch(Dp);return}g=Nt;const Sn=m.value;Qd&&oB(UE(Sn.fullPath,Tt.delta),ty()),J(Nt,Sn).catch(me=>ml(me,12)?me:ml(me,2)?(ve(me.to,Nt).then(Ie=>{ml(Ie,20)&&!Tt.delta&&Tt.type===Qp.pop&&s.go(-1,!1)}).catch(Dp),Promise.reject()):(Tt.delta&&s.go(-Tt.delta,!1),Ue(me,Nt,Sn))).then(me=>{me=me||te(Nt,Sn,!1),me&&(Tt.delta&&!ml(me,8)?s.go(-Tt.delta,!1):Tt.type===Qp.pop&&ml(me,20)&&s.go(-1,!1)),W(Nt,Sn,me)}).catch(Dp)}))}let Te=tp(),ye=tp(),Ve;function Ue(Xe,Dt,Tt){It(Xe);const Nt=ye.list();return Nt.length?Nt.forEach(dn=>dn(Xe,Dt,Tt)):console.error(Xe),Promise.reject(Xe)}function Qe(){return Ve&&m.value!==oc?Promise.resolve():new Promise((Xe,Dt)=>{Te.add([Xe,Dt])})}function It(Xe){return Ve||(Ve=!Xe,re(),Te.list().forEach(([Dt,Tt])=>Xe?Tt(Xe):Dt()),Te.reset()),Xe}function vt(Xe,Dt,Tt,Nt){const{scrollBehavior:dn}=e;if(!Qd||!dn)return Promise.resolve();const Sn=!Tt&&lB(UE(Xe.fullPath,0))||(Nt||!Tt)&&history.state&&history.state.scroll||null;return Ir().then(()=>dn(Xe,Dt,Sn)).then(me=>me&&aB(me)).catch(me=>Ue(me,Xe,Dt))}const it=Xe=>s.go(Xe);let Ge;const ot=new Set,Ct={currentRoute:m,listening:!0,addRoute:I,removeRoute:A,hasRoute:F,getRoutes:O,resolve:z,options:e,push:q,replace:ee,go:it,back:()=>it(-1),forward:()=>it(1),beforeEach:c.add,beforeResolve:d.add,afterEach:l.add,onError:ye.add,isReady:Qe,install(Xe){const Dt=this;Xe.component("RouterLink",Ac),Xe.component("RouterView",KB),Xe.config.globalProperties.$router=Dt,Object.defineProperty(Xe.config.globalProperties,"$route",{enumerable:!0,get:()=>le(m)}),Qd&&!Ge&&m.value===oc&&(Ge=!0,q(s.location).catch(dn=>{}));const Tt={};for(const dn in oc)Object.defineProperty(Tt,dn,{get:()=>m.value[dn],enumerable:!0});Xe.provide(ny,Dt),Xe.provide(Q1,d1(Tt)),Xe.provide(vx,m);const Nt=Xe.unmount;ot.add(Xe),Xe.unmount=function(){ot.delete(Xe),ot.size<1&&(g=oc,j&&j(),j=null,m.value=oc,Ge=!1,Ve=!1),Nt()}}};function wt(Xe){return Xe.reduce((Dt,Tt)=>Dt.then(()=>K(Tt)),Promise.resolve())}return Ct}function YB(e,t){const i=[],r=[],s=[],c=Math.max(t.matched.length,e.matched.length);for(let d=0;d<c;d++){const l=t.matched[d];l&&(e.matched.find(g=>Eh(g,l))?r.push(l):i.push(l));const m=e.matched[d];m&&(t.matched.find(g=>Eh(g,m))||s.push(m))}return[i,r,s]}function _o(){return yi(ny)}function Ju(){return yi(Q1)}const JB=lt({__name:"Button",props:{href:{default:void 0},to:{default:void 0},variant:{default:"secondary"},type:{default:"button"}},setup(e){const t=e,i=_o(),r=De(()=>{if(t.href)return t.href;if(t.to&&s.value===Ac)return i.resolve(t.to).href}),s=De(()=>t.href?"a":t.to?Ac:"button");return(c,d)=>(B(),ze(zc(s.value),Hr({class:["button inline-flex items-center gap-1 no-underline hover:no-underline rounded justify-center leading-none transition-colors ease-in-out group cursor-pointer",{"button--primary px-4 py-3":c.variant==="primary","button--secondary px-4 py-3":c.variant==="secondary","button--tertiary text-xs uppercase font-medium p-2":c.variant==="tertiary","button--primary px-4 py-3 !bg-red-500 !border-red-500 text-red-100 hover:!bg-red-600 hover:!border-red-600":c.variant==="danger"}]},c.$attrs,{to:s.value===le(Ac)?c.to:void 0,href:r.value,type:s.value==="button"?c.type:void 0}),{default:Ce(()=>[En(c.$slots,"default",{},void 0,!0)]),_:3},16,["class","to","href","type"]))}});const ln=(e,t)=>{const i=e.__vccOpts||e;for(const[r,s]of t)i[r]=s;return i},oi=ln(JB,[["__scopeId","data-v-b3ce31e8"]]),QB={},e6={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t6=ue("rect",{width:"24",height:"24"},null,-1),n6=ue("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.6851 2.08796C10.1881 2.15475 9.69495 2.25958 9.21002 2.40246C9.27467 2.86436 9.45238 3.29954 9.72326 3.67131C9.98279 3.10488 10.3065 2.57399 10.6851 2.08796ZM9.02399 7.62422C8.84315 7.4298 8.58509 7.30818 8.29862 7.30818C7.75161 7.30818 7.30818 7.75162 7.30818 8.29862C7.30818 8.84563 7.75161 9.28907 8.29862 9.28907C8.68939 9.28907 9.02729 9.06277 9.18845 8.73408C9.10859 8.3727 9.05316 8.00214 9.02399 7.62422ZM20.122 14.3679C20.7663 14.0946 21.3673 13.7392 21.912 13.3149C21.8453 13.8119 21.7404 14.3051 21.5975 14.79C21.0717 14.79 20.5612 14.6416 20.122 14.3679ZM15.2627 14.8108C15.6235 14.8907 15.9934 14.9463 16.3707 14.9756C16.5654 15.1565 16.6872 15.4147 16.6872 15.7014C16.6872 16.2484 16.2437 16.6918 15.6967 16.6918C15.1497 16.6918 14.7063 16.2484 14.7063 15.7014C14.7063 15.31 14.9332 14.9717 15.2627 14.8108ZM6.92688 6.92688C7.41013 6.44895 7.70231 5.81105 7.74854 5.13295C7.79477 4.45486 7.59189 3.7832 7.17798 3.2441C5.52305 4.15964 4.15964 5.52305 3.2441 7.17798C3.7832 7.59189 4.45485 7.79478 5.13295 7.74854C5.81105 7.70231 6.44895 7.41013 6.92688 6.92688ZM4.82509 12C4.82315 11.3217 4.57738 10.6667 4.13263 10.1545C3.68788 9.64228 3.07381 9.30708 2.40245 9.21002C1.86585 11.0313 1.86585 12.9687 2.40245 14.79C3.07381 14.6929 3.68788 14.3577 4.13263 13.8455C4.57738 13.3333 4.82315 12.6783 4.82509 12ZM7.75457 12C7.75457 12.547 7.31114 12.9904 6.76413 12.9904C6.21712 12.9904 5.77369 12.547 5.77369 12C5.77369 11.453 6.21712 11.0096 6.76413 11.0096C7.31114 11.0096 7.75457 11.453 7.75457 12ZM9.28906 15.7014C9.28906 16.2484 8.84563 16.6918 8.29862 16.6918C7.75161 16.6918 7.30818 16.2484 7.30818 15.7014C7.30818 15.1544 7.75161 14.7109 8.29862 14.7109C8.84563 14.7109 9.28906 15.1544 9.28906 15.7014ZM11.4497 16.4123C11.6126 16.3035 11.8041 16.2454 12 16.2454C12.2627 16.2454 12.5146 16.3498 12.7003 16.5355C12.8861 16.7213 12.9904 16.9732 12.9904 17.2359C12.9904 17.4318 12.9324 17.6233 12.8235 17.7861C12.7147 17.949 12.56 18.076 12.379 18.1509C12.198 18.2259 11.9989 18.2455 11.8068 18.2073C11.6146 18.1691 11.4382 18.0747 11.2997 17.9362C11.1611 17.7977 11.0668 17.6212 11.0286 17.4291C10.9904 17.237 11.01 17.0378 11.0849 16.8568C11.1599 16.6759 11.2869 16.5212 11.4497 16.4123ZM10.1545 19.8674C10.6667 19.4226 11.3217 19.1769 12 19.1749C12.6783 19.1769 13.3333 19.4226 13.8455 19.8674C14.3577 20.3121 14.6929 20.9262 14.79 21.5975C12.9687 22.1342 11.0313 22.1342 9.21002 21.5975C9.30708 20.9262 9.64228 20.3121 10.1545 19.8674ZM6.92688 17.0731C6.44895 16.5899 5.81105 16.2977 5.13295 16.2515C4.45486 16.2052 3.7832 16.4081 3.2441 16.822C4.15964 18.477 5.52305 19.8404 7.17798 20.7559C7.59189 20.2168 7.79477 19.5451 7.74854 18.867C7.70231 18.189 7.41013 17.5511 6.92688 17.0731ZM17.0731 17.0731C16.5899 17.5511 16.2977 18.189 16.2515 18.867C16.2052 19.5451 16.4081 20.2168 16.822 20.7559C18.477 19.8404 19.8404 18.477 20.7559 16.822C20.2168 16.4081 19.5451 16.2052 18.867 16.2515C18.189 16.2977 17.5511 16.5899 17.0731 17.0731Z",fill:"black"},null,-1),i6=ue("path",{d:"M17 0.333334C13.318 0.333334 10.3333 3.318 10.3333 7C10.3333 10.682 13.318 13.6667 17 13.6667C20.682 13.6667 23.6667 10.682 23.6667 7C23.6667 3.318 20.682 0.333334 17 0.333334ZM20.3333 7.66667H17.6667V10.3333H16.3333V7.66667H13.6667V6.33333H16.3333V3.66667H17.6667V6.33333H20.3333V7.66667Z",fill:"black"},null,-1),r6=[t6,n6,i6];function s6(e,t){return B(),fe("svg",e6,r6)}const a6=ln(QB,[["render",s6]]),o6={},l6={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c6=uA('<g clip-path="url(#clip0_906_7883)"><rect width="24" height="24"></rect><path fill-rule="evenodd" clip-rule="evenodd" d="M9.58152 4H6.5C5.50544 4 4.55161 4.39509 3.84835 5.09835C3.14509 5.80161 2.75 6.75544 2.75 7.75V17.75C2.75 18.7446 3.14509 19.6984 3.84835 20.4017C4.55161 21.1049 5.50544 21.5 6.5 21.5H16.5C17.4946 21.5 18.4484 21.1049 19.1517 20.4017C19.8549 19.6984 20.25 18.7446 20.25 17.75V14.3123C19.8496 14.4905 19.4319 14.6368 19 14.748V17.75C19 18.413 18.7366 19.0489 18.2678 19.5178C17.7989 19.9866 17.163 20.25 16.5 20.25H6.5C5.83696 20.25 5.20107 19.9866 4.73223 19.5178C4.26339 19.0489 4 18.413 4 17.75V14H7.80125C7.94747 14.8753 8.39938 15.6704 9.07662 16.2439C9.75387 16.8174 10.6126 17.1321 11.5 17.1321C12.3874 17.1321 13.2461 16.8174 13.9234 16.2439C14.4019 15.8387 14.7679 15.3228 14.9931 14.7462C14.5843 14.6406 14.1881 14.5034 13.8073 14.3375C13.6829 14.6357 13.5007 14.9099 13.2678 15.1428C12.7989 15.6116 12.163 15.875 11.5 15.875C10.837 15.875 10.2011 15.6116 9.73223 15.1428C9.26339 14.6739 9 14.038 9 13.375C9 13.2092 8.93415 13.0503 8.81694 12.9331C8.69973 12.8158 8.54076 12.75 8.375 12.75H4V9H9.25204C9.14776 8.59486 9.07442 8.17731 9.03469 7.75H4C4 7.08696 4.26339 6.45107 4.73223 5.98223C5.20107 5.51339 5.83696 5.25 6.5 5.25L9.2067 5.18534C9.30131 4.77738 9.42714 4.38138 9.58152 4Z" fill="currentColor"></path><path d="M17 0.333334C13.318 0.333334 10.3333 3.318 10.3333 7C10.3333 10.682 13.318 13.6667 17 13.6667C20.682 13.6667 23.6667 10.682 23.6667 7C23.6667 3.318 20.682 0.333334 17 0.333334ZM20.3333 7.66667H17.6667V10.3333H16.3333V7.66667H13.6667V6.33333H16.3333V3.66667H17.6667V6.33333H20.3333V7.66667Z" fill="currentColor"></path></g><defs><clipPath id="clip0_906_7883"><rect width="24" height="24" fill="white"></rect></clipPath></defs>',2),u6=[c6];function d6(e,t){return B(),fe("svg",l6,u6)}const QM=ln(o6,[["render",d6]]),h6={},f6={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},p6=ue("rect",{width:"24",height:"24"},null,-1),m6=ue("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.3333 7C10.3333 3.318 13.318 0.333334 17 0.333334C20.682 0.333334 23.6667 3.318 23.6667 7C23.6667 10.682 20.682 13.6667 17 13.6667C13.318 13.6667 10.3333 10.682 10.3333 7ZM17.6667 7.66667H20.3333V6.33333H17.6667V3.66667H16.3333V6.33333H13.6667V7.66667H16.3333V10.3333H17.6667V7.66667ZM2 12C2 6.93506 5.79394 2.732 10.6866 2.08606C10.403 2.44989 10.1502 2.83888 9.93202 3.24912C7.66725 3.78259 5.73276 5.17312 4.48 7.06C4.69 7.07 4.89 7.07 5.06 7.07C6 7.07 7.46 6.96 7.46 6.96C7.95 6.93 8 7.64 7.52 7.7C7.52 7.7 7.03 7.76 6.49 7.78L9.76 17.53L11.3762 12.6897C11.5742 12.8854 11.7823 13.0709 11.9998 13.2452L9.46 20.62C10.27 20.86 11.12 20.99 12 20.99C13.05 20.99 14.05 20.81 14.98 20.47C14.9667 20.45 14.9533 20.4211 14.94 20.3922C14.9333 20.3778 14.9267 20.3633 14.92 20.35L12.4527 13.5828C13.3833 14.2269 14.4571 14.6787 15.6167 14.8808L16.48 17.46L17.2189 14.9971C17.5525 14.9881 17.881 14.9587 18.2032 14.9101L16.52 19.77C18.5451 18.5927 20.0306 16.6712 20.6601 14.4149C20.6921 14.2999 20.7218 14.1846 20.7492 14.0689C21.1601 13.8505 21.5496 13.5974 21.9139 13.3134C21.268 18.2061 17.0649 22 12 22C6.49 22 2 17.51 2 12ZM3.01 12C3.01 10.7 3.29 9.46 3.79 8.34L8.08 20.09C5.08 18.63 3.01 15.56 3.01 12Z",fill:"black"},null,-1),g6=[p6,m6];function v6(e,t){return B(),fe("svg",f6,g6)}const _6=ln(h6,[["render",v6]]),y6={},b6={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},x6=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"},null,-1),w6=[x6];function S6(e,t){return B(),fe("svg",b6,w6)}const Qu=ln(y6,[["render",S6]]),T6={},E6={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},C6=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"},null,-1),I6=[C6];function A6(e,t){return B(),fe("svg",E6,I6)}const M6=ln(T6,[["render",A6]]),k6={},P6={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},D6=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"},null,-1),L6=[D6];function O6(e,t){return B(),fe("svg",P6,L6)}const Vh=ln(k6,[["render",O6]]),R6={},F6={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},$6=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"},null,-1),z6=[$6];function N6(e,t){return B(),fe("svg",F6,z6)}const iy=ln(R6,[["render",N6]]),B6={},j6={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},V6=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5L8.25 12l7.5-7.5"},null,-1),U6=[V6];function H6(e,t){return B(),fe("svg",j6,U6)}const ek=ln(B6,[["render",H6]]),G6={},W6={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},q6=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"},null,-1),Z6=[q6];function K6(e,t){return B(),fe("svg",W6,Z6)}const tk=ln(G6,[["render",K6]]),X6={},Y6={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},J6=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),Q6=[J6];function e8(e,t){return B(),fe("svg",Y6,Q6)}const nk=ln(X6,[["render",e8]]),t8={},n8={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg"},i8=ue("circle",{cx:"12",cy:"12",r:"9"},null,-1),r8=[i8];function s8(e,t){return B(),fe("svg",n8,r8)}const a8=ln(t8,[["render",s8]]),o8={},l8={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},c8=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),u8=[c8];function d8(e,t){return B(),fe("svg",l8,u8)}const Em=ln(o8,[["render",d8]]),h8={},f8={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},p8=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"},null,-1),m8=[p8];function g8(e,t){return B(),fe("svg",f8,m8)}const em=ln(h8,[["render",g8]]),v8={},_8={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},y8=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"},null,-1),b8=[y8];function x8(e,t){return B(),fe("svg",_8,b8)}const ew=ln(v8,[["render",x8]]),w8={},S8={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},T8=ue("path",{fill:"currentColor",d:"M7 19v-2h2v2H7m4 0v-2h2v2h-2m4 0v-2h2v2h-2m-8-4v-2h2v2H7m4 0v-2h2v2h-2m4 0v-2h2v2h-2m-8-4V9h2v2H7m4 0V9h2v2h-2m4 0V9h2v2h-2M7 7V5h2v2H7m4 0V5h2v2h-2m4 0V5h2v2h-2Z"},null,-1),E8=[T8];function C8(e,t){return B(),fe("svg",S8,E8)}const ik=ln(w8,[["render",C8]]),I8={},A8={width:"9",height:"31",viewBox:"0 0 9 31",fill:"none",xmlns:"http://www.w3.org/2000/svg"},M8=ue("path",{d:"M8.96268 2.86638L6.49786 0.5L4.03304 2.90298V8.47338L0 12.2597V30.5H8.96275V12.2597L9 8.43678L8.96268 2.86638ZM3.80904 26.4223H1.9418V23.182H3.80904V26.4223ZM3.80904 16.8834H1.9418V13.6431H3.80904V16.8834ZM7.24496 21.5799H5.37772V18.3396H7.24496V21.5799ZM7.24496 16.8834H5.37772V13.6431H7.24496V16.8834ZM5.639 5.85182V3.99509L6.46058 3.19412L7.28217 3.99509V5.88836L5.63893 5.88811L5.639 5.85182Z",fill:"currentColor"},null,-1),k8=[M8];function P8(e,t){return B(),fe("svg",A8,k8)}const D8=ln(I8,[["render",P8]]),L8={},O8={xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 96 960 960",width:"48",class:"w-5 h-5"},R8=ue("path",{d:"M333 856V723H200v-60h193v193h-60Zm234 0V663h193v60H627v133h-60ZM200 489v-60h133V296h60v193H200Zm367 0V296h60v133h133v60H567Z"},null,-1),F8=[R8];function $8(e,t){return B(),fe("svg",O8,F8)}const z8=ln(L8,[["render",$8]]),N8={},B8={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},j8=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"},null,-1),V8=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),U8=[j8,V8];function H8(e,t){return B(),fe("svg",B8,U8)}const G8=ln(N8,[["render",H8]]),W8={},q8={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},Z8=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"},null,-1),K8=[Z8];function X8(e,t){return B(),fe("svg",q8,K8)}const Y8=ln(W8,[["render",X8]]),J8={},Q8={xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 96 960 960",width:"48",class:"w-5 h-5"},ej=ue("path",{d:"M200 856V663h60v133h133v60H200Zm0-367V296h193v60H260v133h-60Zm367 367v-60h133V663h60v193H567Zm133-367V356H567v-60h193v193h-60Z"},null,-1),tj=[ej];function nj(e,t){return B(),fe("svg",Q8,tj)}const ij=ln(J8,[["render",nj]]),rj={},sj={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},aj=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"},null,-1),oj=[aj];function lj(e,t){return B(),fe("svg",sj,oj)}const tw=ln(rj,[["render",lj]]),cj={},uj={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},dj=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"},null,-1),hj=[dj];function fj(e,t){return B(),fe("svg",uj,hj)}const rk=ln(cj,[["render",fj]]),pj={},mj={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-6 h-6"},gj=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"},null,-1),vj=[gj];function _j(e,t){return B(),fe("svg",mj,vj)}const yj=ln(pj,[["render",_j]]),bj={},xj={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},wj=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"},null,-1),Sj=[wj];function Tj(e,t){return B(),fe("svg",xj,Sj)}const Ej=ln(bj,[["render",Tj]]),Cj={},Ij={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},Aj=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 103.935 2.186 2.25 2.25 0 00-3.935-2.186zm0-12.814a2.25 2.25 0 103.933-2.185 2.25 2.25 0 00-3.933 2.185z"},null,-1),Mj=[Aj];function kj(e,t){return B(),fe("svg",Ij,Mj)}const Pj=ln(Cj,[["render",kj]]),Dj={},Lj={class:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Oj=ue("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),Rj=ue("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),Fj=[Oj,Rj];function $j(e,t){return B(),fe("svg",Lj,Fj)}const Jo=ln(Dj,[["render",$j]]),zj={},Nj={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},Bj=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.098 19.902a3.75 3.75 0 005.304 0l6.401-6.402M6.75 21A3.75 3.75 0 013 17.25V4.125C3 3.504 3.504 3 4.125 3h5.25c.621 0 1.125.504 1.125 1.125v4.072M6.75 21a3.75 3.75 0 003.75-3.75V8.197M6.75 21h13.125c.621 0 1.125-.504 1.125-1.125v-5.25c0-.621-.504-1.125-1.125-1.125h-4.072M10.5 8.197l2.88-2.88c.438-.439 1.15-.439 1.59 0l3.712 3.713c.44.44.44 1.152 0 1.59l-2.879 2.88M6.75 17.25h.008v.008H6.75v-.008z"},null,-1),jj=[Bj];function Vj(e,t){return B(),fe("svg",Nj,jj)}const Uj=ln(zj,[["render",Vj]]),Hj={},Gj={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},Wj=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"},null,-1),qj=[Wj];function Zj(e,t){return B(),fe("svg",Gj,qj)}const Kj=ln(Hj,[["render",Zj]]),Xj={},Yj={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},Jj=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z"},null,-1),Qj=[Jj];function eV(e,t){return B(),fe("svg",Yj,Qj)}const tV=ln(Xj,[["render",eV]]),nV={},iV={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},rV=ue("path",{"stroke-linecap":"round",d:"M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 002.25 7.5v9a2.25 2.25 0 002.25 2.25z"},null,-1),sV=[rV];function aV(e,t){return B(),fe("svg",iV,sV)}const oV=ln(nV,[["render",aV]]),lV={},cV={class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},uV=ue("path",{"fill-rule":"evenodd",d:"M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"},null,-1),dV=[uV];function hV(e,t){return B(),fe("svg",cV,dV)}const fV=ln(lV,[["render",hV]]),pV={},mV={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},gV=ue("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1),vV=[gV];function _V(e,t){return B(),fe("svg",mV,vV)}const Cm=ln(pV,[["render",_V]]),yV=e=>(ja("data-v-59dc0ca4"),e=e(),Va(),e),bV={class:"notification rounded-md max-w-lg mx-auto overflow-hidden relative"},xV=yV(()=>ue("span",{class:"sr-only"},"Close",-1)),wV={class:"notification__icon rounded-full p-2 -mt-1"},SV={class:"flex-1"},TV={class:"notification__title text-sm font-bold uppercase pr-6"},EV={class:"notification__contents mt-2 text-sm"},CV=lt({__name:"Notification",props:{title:{default:"Heads Up"},type:{default:"info"},isDismissable:{type:Boolean,default:!1}},emits:["dismiss"],setup(e){return(t,i)=>(B(),fe("div",bV,[t.isDismissable?(B(),fe("button",{key:0,class:"absolute top-0 right-0 p-4",onClick:i[0]||(i[0]=r=>t.$emit("dismiss"))},[xV,_e(Cm)])):st("",!0),ue("div",{class:Mn(["flex gap-4 p-4 border-l-8 items-start",{"notification--info border-l-blue-600":t.type==="info","notification--warning border-l-yellow-300":t.type==="warning","notification--error border-l-red-400":t.type==="danger","notification--success border-l-green-400":t.type==="success"}])},[ue("div",wV,[t.type==="warning"?(B(),ze(le(fV),{key:0})):st("",!0),t.type==="info"?(B(),ze(le(rk),{key:1})):st("",!0),t.type==="success"?(B(),ze(le(nk),{key:2})):st("",!0),t.type==="danger"?(B(),ze(le(Em),{key:3})):st("",!0)]),ue("div",SV,[ue("h3",TV,xt(t.title),1),ue("div",EV,[En(t.$slots,"default",{},void 0,!0)])])],2)]))}});const Im=ln(CV,[["__scopeId","data-v-59dc0ca4"]]),IV=ue("p",null,"This site requires you to sign in to search or access assets.",-1),AV={class:"flex gap-2 mt-2"},sk=lt({__name:"SignInRequiredNotice",setup(e){const t=bi(),i=De(()=>t.instance),r=NM(),s=De(()=>{var d;const c=((d=r.value)==null?void 0:d.href)??Zn.instance.base.url;return encodeURIComponent(c)});return(c,d)=>(B(),ze(Im,{type:"warning",title:"Sign In Required",class:"ome-page__sign-in-required-notice my-4"},{default:Ce(()=>[IV,ue("div",AV,[_e(oi,{to:`/loginManager/localLogin/?redirect=${c.$route.path}`,variant:"tertiary"},{default:Ce(()=>[Ot(xt(i.value.useCentralAuth?"Guest":"")+" Login ",1)]),_:1},8,["to"]),i.value.useCentralAuth?(B(),ze(oi,{key:0,href:`${le(Zn).instance.base.url}/loginManager/remoteLogin/?redirect=${s.value}`,variant:"tertiary"},{default:Ce(()=>[Ot(xt(i.value.centralAuthLabel)+" Login ",1)]),_:1},8,["href"])):st("",!0)])]),_:1}))}}),MV={class:"error-modal"},kV={key:0,class:"fixed inset-0 z-40 bg-transparent-black-700 flex items-center justify-center"},PV={class:"mt-1"},LV=lt({__name:"ErrorModal",setup(e){const t=Zn.instance.base.url,i=Sm(),r=bi(),s=De(()=>i.error),c=De(()=>s.value instanceof hh?s.value.statusCode===0?"Connection Error":`Error: ${s.value.statusCode}`:"Error"),d=De(()=>!r.isLoggedIn&&s.value instanceof hh&&s.value.statusCode===401),l={0:"There was a problem connecting to the server. If the problem persists, please contact support.",401:"You do not have permission to access this.",403:"You do not have permission to access this.",404:"We couldn't find this. Please check your link and try again.",400:"There was a problem with your request. Please check your input and try again.",500:"There was a problem on our end. Please contact support if the problem persists."},m=De(()=>{var y;if(!(s.value instanceof hh))return((y=s.value)==null?void 0:y.message)||"An unknown error occurred.";const g=s.value.statusCode;return g in l?l[g]:g>=400&&g<500?l[400]:g>=500&&g<600?l[500]:s.value.message});return(g,y)=>(B(),fe("div",MV,[_e(Cr,{name:"fade"},{default:Ce(()=>[s.value?(B(),fe("div",kV,[d.value?(B(),ze(sk,{key:0})):(B(),ze(Im,{key:1,title:c.value,message:s.value.name,type:"danger",isDismissable:!0,class:"w-full max-w-md border-none max-h-[80vh] !overflow-auto",onDismiss:y[0]||(y[0]=x=>le(i).clearError())},{default:Ce(()=>[ue("p",null,xt(m.value),1),ue("div",PV,[_e(oi,{href:le(t),variant:"tertiary"},{default:Ce(()=>[Ot("Go Home")]),_:1},8,["href"])])]),_:1},8,["title","message"]))])):st("",!0)]),_:1})]))}}),OV=["href"],ts=lt({__name:"Link",props:{to:{default:void 0},href:{default:"#"}},setup(e){return(t,i)=>t.to?(B(),ze(le(Ac),{key:0,to:t.to},{default:Ce(()=>[En(t.$slots,"default")]),_:3},8,["to"])):(B(),fe("a",{key:1,href:t.href},[En(t.$slots,"default")],8,OV))}}),RV=ue("span",{class:"sr-only"},"Close",-1),FV={key:0,class:"mt-1 flex justify-end"},$V=lt({__name:"Toast",props:{toast:{}},emits:["dismiss"],setup(e,{emit:t}){const i=e,r=t,s=Fe(0),c=Fe(!1),d=i.toast.duration??3e3,l=De(()=>s.value/d*100);function m(){c.value=!1;let g=Date.now();FN(()=>{const y=Date.now()-g;c.value||(s.value+=y),s.value>=d&&r("dismiss",i.toast.id),g=Date.now()})}return Fn(()=>{m()}),(g,y)=>(B(),fe("div",{key:g.toast.id,class:"toast-root__toast pointer-events-auto shadow-md bg-neutral-900 text-neutral-200 p-4 rounded-md relative overflow-hidden",onMouseenter:y[2]||(y[2]=x=>c.value=!0),onMouseleave:y[3]||(y[3]=x=>c.value=!1)},[ue("button",{class:"float-right",onClick:y[0]||(y[0]=x=>g.$emit("dismiss",g.toast.id))},[RV,_e(le(Cm))]),ue("div",{class:"timer absolute top-0 left-0 w-full h-1 bg-neutral-600 transform",style:Gu({transform:`translateX(-${l.value}%)`})},null,4),ue("p",null,xt(g.toast.message),1),g.toast.url?(B(),fe("p",FV,[_e(ts,{to:g.toast.url,class:"uppercase text-xs py-1 px-2 bg-transparent-white-200 text-neutral-400 hover:no-underline hover:text-neutral-900 hover:bg-neutral-200 rounded-md",onClick:y[1]||(y[1]=x=>g.$emit("dismiss",g.toast.id))},{default:Ce(()=>[Ot(xt(g.toast.urlText||"View"),1)]),_:1},8,["to"])])):st("",!0)],32))}}),zV={class:"toast-root fixed top-12 right-0 z-50 p-4 w-full max-w-sm pointer-events-none flex flex-col items-end gap-1"},NV=lt({__name:"ToastRoot",setup(e){const t=ih();return(i,r)=>(B(),fe("div",zV,[_e(L1,{name:"fade"},{default:Ce(()=>[(B(!0),fe(Ut,null,$n(le(t).toasts,s=>(B(),ze($V,{key:s.id,toast:s,class:"w-full pointer-events-auto shadow-md",onDismiss:c=>le(t).dismissToast(s.id)},null,8,["toast","onDismiss"]))),128))]),_:1})]))}}),BV=lt({__name:"App",setup(e){const t=bi(),i=Ha();return Fn(()=>{console.log("app mounted"),t.init(),i.init(),jM()}),(r,s)=>{const c=j_("RouterView");return B(),fe("div",null,[(B(),ze(_m,{to:"body"},[_e(LV),_e(NV)])),le(t).isReady&&le(i).isReady?(B(),ze(c,{key:0})):st("",!0)])}}});function jV({store:e}){const t=PE(e.$state);e.$reset=()=>e.$patch(PE(t))}const VV=ue("span",{class:"sr-only"},"Close",-1),ak=lt({__name:"XButton",emits:["click"],setup(e){return(t,i)=>(B(),fe("button",{class:"x-button inline-flex bg-transparent-black-50 text-neutral-700 w-8 h-8 rounded-full leading-none items-center justify-center transition ease-in-out hover:bg-transparent-black-900 hover:text-white",onClick:i[0]||(i[0]=r=>t.$emit("click"))},[_e(Cm),VV]))}}),UV={},HV={width:"41",height:"25",viewBox:"0 0 41 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"umn-logo text-umn-maroon"},GV=ue("path",{d:"M38.4331 18.4558L31.2458 6.55112H33.229V0.343018H21.2666V6.54412H23.2497L20.5 11.0916L17.7573 6.54412H19.7334V0.343018H7.77101V6.54412H9.74717L2.5669 18.4558H0V24.6569H12.2015V18.4558H10.0074L13.7487 12.2547L15.1974 14.6581H13.805V20.8592H27.181V14.6581H25.7885L27.2443 12.2547L30.9856 18.4558H28.7985V24.6569H41V18.4558H38.4331Z",fill:"currentColor"},null,-1),WV=[GV];function qV(e,t){return B(),fe("svg",HV,WV)}const ZV=ln(UV,[["render",qV]]);function KV(e,t,i){let r=Fe(i==null?void 0:i.value),s=De(()=>e.value!==void 0);return[De(()=>s.value?e.value:r.value),function(c){return s.value||(r.value=c),t==null?void 0:t(c)}]}let XV=0;function YV(){return++XV}function Go(){return YV()}function Hn(e){var t;if(e==null||e.value==null)return null;let i=(t=e.value.$el)!=null?t:e.value;return i instanceof Node?i:null}function ba(e,t,...i){if(e in t){let s=t[e];return typeof s=="function"?s(...i):s}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,ba),r}var JV=Object.defineProperty,QV=(e,t,i)=>t in e?JV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,i2=(e,t,i)=>(QV(e,typeof t!="symbol"?t+"":t,i),i);let eU=class{constructor(){i2(this,"current",this.detect()),i2(this,"currentId",0)}set(t){this.current!==t&&(this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},Am=new eU;function jc(e){if(Am.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(e!=null&&e.hasOwnProperty("value")){let t=Hn(e);if(t)return t.ownerDocument}return document}let _x=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Oo=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(Oo||{}),ok=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(ok||{}),tU=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(tU||{});function lk(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(_x)).sort((t,i)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(i.tabIndex||Number.MAX_SAFE_INTEGER)))}var nw=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(nw||{});function iw(e,t=0){var i;return e===((i=jc(e))==null?void 0:i.body)?!1:ba(t,{0(){return e.matches(_x)},1(){let r=e;for(;r!==null;){if(r.matches(_x))return!0;r=r.parentElement}return!1}})}function ck(e){let t=jc(e);Ir(()=>{t&&!iw(t.activeElement,0)&&Mc(e)})}var nU=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(nU||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Mc(e){e==null||e.focus({preventScroll:!0})}let iU=["textarea","input"].join(",");function rU(e){var t,i;return(i=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,iU))!=null?i:!1}function uk(e,t=i=>i){return e.slice().sort((i,r)=>{let s=t(i),c=t(r);if(s===null||c===null)return 0;let d=s.compareDocumentPosition(c);return d&Node.DOCUMENT_POSITION_FOLLOWING?-1:d&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function sU(e,t){return Op(lk(),t,{relativeTo:e})}function Op(e,t,{sorted:i=!0,relativeTo:r=null,skipElements:s=[]}={}){var c;let d=(c=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e==null?void 0:e.ownerDocument)!=null?c:document,l=Array.isArray(e)?i?uk(e):e:lk(e);s.length>0&&l.length>1&&(l=l.filter(A=>!s.includes(A))),r=r??d.activeElement;let m=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),g=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,l.indexOf(r))-1;if(t&4)return Math.max(0,l.indexOf(r))+1;if(t&8)return l.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),y=t&32?{preventScroll:!0}:{},x=0,C=l.length,I;do{if(x>=C||x+C<=0)return 0;let A=g+x;if(t&16)A=(A+C)%C;else{if(A<0)return 3;if(A>=C)return 1}I=l[A],I==null||I.focus(y),x+=m}while(I!==d.activeElement);return t&6&&rU(I)&&I.select(),2}function dk(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function aU(){return/Android/gi.test(window.navigator.userAgent)}function oU(){return dk()||aU()}function ov(e,t,i){Am.isServer||$r(r=>{document.addEventListener(e,t,i),r(()=>document.removeEventListener(e,t,i))})}function hk(e,t,i){Am.isServer||$r(r=>{window.addEventListener(e,t,i),r(()=>window.removeEventListener(e,t,i))})}function fk(e,t,i=De(()=>!0)){function r(c,d){if(!i.value||c.defaultPrevented)return;let l=d(c);if(l===null||!l.getRootNode().contains(l))return;let m=function g(y){return typeof y=="function"?g(y()):Array.isArray(y)||y instanceof Set?y:[y]}(e);for(let g of m){if(g===null)continue;let y=g instanceof HTMLElement?g:Hn(g);if(y!=null&&y.contains(l)||c.composed&&c.composedPath().includes(y))return}return!iw(l,nw.Loose)&&l.tabIndex!==-1&&c.preventDefault(),t(c,l)}let s=Fe(null);ov("pointerdown",c=>{var d,l;i.value&&(s.value=((l=(d=c.composedPath)==null?void 0:d.call(c))==null?void 0:l[0])||c.target)},!0),ov("mousedown",c=>{var d,l;i.value&&(s.value=((l=(d=c.composedPath)==null?void 0:d.call(c))==null?void 0:l[0])||c.target)},!0),ov("click",c=>{oU()||s.value&&(r(c,()=>s.value),s.value=null)},!0),ov("touchend",c=>r(c,()=>c.target instanceof HTMLElement?c.target:null),!0),hk("blur",c=>r(c,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function r2(e,t){if(e)return e;let i=t??"button";if(typeof i=="string"&&i.toLowerCase()==="button")return"button"}function rw(e,t){let i=Fe(r2(e.value.type,e.value.as));return Fn(()=>{i.value=r2(e.value.type,e.value.as)}),$r(()=>{var r;i.value||Hn(t)&&Hn(t)instanceof HTMLButtonElement&&!((r=Hn(t))!=null&&r.hasAttribute("type"))&&(i.value="button")}),i}function s2(e){return[e.screenX,e.screenY]}function lU(){let e=Fe([-1,-1]);return{wasMoved(t){let i=s2(t);return e.value[0]===i[0]&&e.value[1]===i[1]?!1:(e.value=i,!0)},update(t){e.value=s2(t)}}}function cU({container:e,accept:t,walk:i,enabled:r}){$r(()=>{let s=e.value;if(!s||r!==void 0&&!r.value)return;let c=jc(e);if(!c)return;let d=Object.assign(m=>t(m),{acceptNode:t}),l=c.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,d,!1);for(;l.nextNode();)i(l.currentNode)})}var Oc=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Oc||{}),wc=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(wc||{});function zr({visible:e=!0,features:t=0,ourProps:i,theirProps:r,...s}){var c;let d=mk(r,i),l=Object.assign(s,{props:d});if(e||t&2&&d.static)return X0(l);if(t&1){let m=(c=d.unmount)==null||c?0:1;return ba(m,{0(){return null},1(){return X0({...s,props:{...d,hidden:!0,style:{display:"none"}}})}})}return X0(l)}function X0({props:e,attrs:t,slots:i,slot:r,name:s}){var c,d;let{as:l,...m}=sw(e,["unmount","static"]),g=(c=i.default)==null?void 0:c.call(i,r),y={};if(r){let x=!1,C=[];for(let[I,A]of Object.entries(r))typeof A=="boolean"&&(x=!0),A===!0&&C.push(I);x&&(y["data-headlessui-state"]=C.join(" "))}if(l==="template"){if(g=pk(g??[]),Object.keys(m).length>0||Object.keys(t).length>0){let[x,...C]=g??[];if(!dU(x)||C.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${s} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(m).concat(Object.keys(t)).map(O=>O.trim()).filter((O,F,z)=>z.indexOf(O)===F).sort((O,F)=>O.localeCompare(F)).map(O=>`  - ${O}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(O=>`  - ${O}`).join(`
`)].join(`
`));let I=mk((d=x.props)!=null?d:{},m,y),A=va(x,I,!0);for(let O in I)O.startsWith("on")&&(A.props||(A.props={}),A.props[O]=I[O]);return A}return Array.isArray(g)&&g.length===1?g[0]:g}return Jn(l,Object.assign({},m,y),{default:()=>g})}function pk(e){return e.flatMap(t=>t.type===Ut?pk(t.children):[t])}function mk(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},i={};for(let r of e)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(i[s]!=null||(i[s]=[]),i[s].push(r[s])):t[s]=r[s];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(i).map(r=>[r,void 0])));for(let r in i)Object.assign(t,{[r](s,...c){let d=i[r];for(let l of d){if(s instanceof Event&&s.defaultPrevented)return;l(s,...c)}}});return t}function uU(e){let t=Object.assign({},e);for(let i in t)t[i]===void 0&&delete t[i];return t}function sw(e,t=[]){let i=Object.assign({},e);for(let r of t)r in i&&delete i[r];return i}function dU(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}var tm=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(tm||{});let o_=lt({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(e,{slots:t,attrs:i}){return()=>{var r;let{features:s,...c}=e,d={"aria-hidden":(s&2)===2?!0:(r=c["aria-hidden"])!=null?r:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return zr({ourProps:d,theirProps:c,slot:{},attrs:i,slots:t,name:"Hidden"})}}}),gk=Symbol("Context");var Er=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Er||{});function hU(){return Mm()!==null}function Mm(){return yi(gk,null)}function aw(e){ki(gk,e)}var Xi=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Xi||{});function fU(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Su=[];fU(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&Su[0]!==t.target&&(Su.unshift(t.target),Su=Su.filter(i=>i!=null&&i.isConnected),Su.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function pU(e){throw new Error("Unexpected object: "+e)}var fa=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(fa||{});function mU(e,t){let i=t.resolveItems();if(i.length<=0)return null;let r=t.resolveActiveIndex(),s=r??-1;switch(e.focus){case 0:{for(let c=0;c<i.length;++c)if(!t.resolveDisabled(i[c],c,i))return c;return r}case 1:{s===-1&&(s=i.length);for(let c=s-1;c>=0;--c)if(!t.resolveDisabled(i[c],c,i))return c;return r}case 2:{for(let c=s+1;c<i.length;++c)if(!t.resolveDisabled(i[c],c,i))return c;return r}case 3:{for(let c=i.length-1;c>=0;--c)if(!t.resolveDisabled(i[c],c,i))return c;return r}case 4:{for(let c=0;c<i.length;++c)if(t.resolveId(i[c],c,i)===e.id)return c;return r}case 5:return null;default:pU(e)}}function ow(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function km(){let e=[],t={addEventListener(i,r,s,c){return i.addEventListener(r,s,c),t.add(()=>i.removeEventListener(r,s,c))},requestAnimationFrame(...i){let r=requestAnimationFrame(...i);t.add(()=>cancelAnimationFrame(r))},nextFrame(...i){t.requestAnimationFrame(()=>{t.requestAnimationFrame(...i)})},setTimeout(...i){let r=setTimeout(...i);t.add(()=>clearTimeout(r))},microTask(...i){let r={current:!0};return ow(()=>{r.current&&i[0]()}),t.add(()=>{r.current=!1})},style(i,r,s){let c=i.style.getPropertyValue(r);return Object.assign(i.style,{[r]:s}),this.add(()=>{Object.assign(i.style,{[r]:c})})},group(i){let r=km();return i(r),this.add(()=>r.dispose())},add(i){return e.push(i),()=>{let r=e.indexOf(i);if(r>=0)for(let s of e.splice(r,1))s()}},dispose(){for(let i of e.splice(0))i()}};return t}function gU(e){var t,i;let r=(t=e==null?void 0:e.form)!=null?t:e.closest("form");if(r){for(let s of r.elements)if(s!==e&&(s.tagName==="INPUT"&&s.type==="submit"||s.tagName==="BUTTON"&&s.type==="submit"||s.nodeName==="INPUT"&&s.type==="image")){s.click();return}(i=r.requestSubmit)==null||i.call(r)}}function vk(e,t,i,r){Am.isServer||$r(s=>{e=e??window,e.addEventListener(t,i,r),s(()=>e.removeEventListener(t,i,r))})}var gp=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(gp||{});function vU(){let e=Fe(0);return hk("keydown",t=>{t.key==="Tab"&&(e.value=t.shiftKey?1:0)}),e}function _k(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let i of e.value){let r=Hn(i);r instanceof HTMLElement&&t.add(r)}return t}var yk=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(yk||{});let np=Object.assign(lt({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:Fe(new Set)}},inheritAttrs:!1,setup(e,{attrs:t,slots:i,expose:r}){let s=Fe(null);r({el:s,$el:s});let c=De(()=>jc(s)),d=Fe(!1);Fn(()=>d.value=!0),Hi(()=>d.value=!1),yU({ownerDocument:c},De(()=>d.value&&!!(e.features&16)));let l=bU({ownerDocument:c,container:s,initialFocus:De(()=>e.initialFocus)},De(()=>d.value&&!!(e.features&2)));xU({ownerDocument:c,container:s,containers:e.containers,previousActiveElement:l},De(()=>d.value&&!!(e.features&8)));let m=vU();function g(I){let A=Hn(s);A&&(O=>O())(()=>{ba(m.value,{[gp.Forwards]:()=>{Op(A,Oo.First,{skipElements:[I.relatedTarget]})},[gp.Backwards]:()=>{Op(A,Oo.Last,{skipElements:[I.relatedTarget]})}})})}let y=Fe(!1);function x(I){I.key==="Tab"&&(y.value=!0,requestAnimationFrame(()=>{y.value=!1}))}function C(I){if(!d.value)return;let A=_k(e.containers);Hn(s)instanceof HTMLElement&&A.add(Hn(s));let O=I.relatedTarget;O instanceof HTMLElement&&O.dataset.headlessuiFocusGuard!=="true"&&(bk(A,O)||(y.value?Op(Hn(s),ba(m.value,{[gp.Forwards]:()=>Oo.Next,[gp.Backwards]:()=>Oo.Previous})|Oo.WrapAround,{relativeTo:I.target}):I.target instanceof HTMLElement&&Mc(I.target)))}return()=>{let I={},A={ref:s,onKeydown:x,onFocusout:C},{features:O,initialFocus:F,containers:z,...U}=e;return Jn(Ut,[!!(O&4)&&Jn(o_,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:g,features:tm.Focusable}),zr({ourProps:A,theirProps:{...t,...U},slot:I,attrs:t,slots:i,name:"FocusTrap"}),!!(O&4)&&Jn(o_,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:g,features:tm.Focusable})])}}}),{features:yk});function _U(e){let t=Fe(Su.slice());return pn([e],([i],[r])=>{r===!0&&i===!1?ow(()=>{t.value.splice(0)}):r===!1&&i===!0&&(t.value=Su.slice())},{flush:"post"}),()=>{var i;return(i=t.value.find(r=>r!=null&&r.isConnected))!=null?i:null}}function yU({ownerDocument:e},t){let i=_U(t);Fn(()=>{$r(()=>{var r,s;t.value||((r=e.value)==null?void 0:r.activeElement)===((s=e.value)==null?void 0:s.body)&&Mc(i())},{flush:"post"})}),Hi(()=>{t.value&&Mc(i())})}function bU({ownerDocument:e,container:t,initialFocus:i},r){let s=Fe(null),c=Fe(!1);return Fn(()=>c.value=!0),Hi(()=>c.value=!1),Fn(()=>{pn([t,i,r],(d,l)=>{if(d.every((g,y)=>(l==null?void 0:l[y])===g)||!r.value)return;let m=Hn(t);m&&ow(()=>{var g,y;if(!c.value)return;let x=Hn(i),C=(g=e.value)==null?void 0:g.activeElement;if(x){if(x===C){s.value=C;return}}else if(m.contains(C)){s.value=C;return}x?Mc(x):Op(m,Oo.First|Oo.NoScroll)===ok.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),s.value=(y=e.value)==null?void 0:y.activeElement})},{immediate:!0,flush:"post"})}),s}function xU({ownerDocument:e,container:t,containers:i,previousActiveElement:r},s){var c;vk((c=e.value)==null?void 0:c.defaultView,"focus",d=>{if(!s.value)return;let l=_k(i);Hn(t)instanceof HTMLElement&&l.add(Hn(t));let m=r.value;if(!m)return;let g=d.target;g&&g instanceof HTMLElement?bk(l,g)?(r.value=g,Mc(g)):(d.preventDefault(),d.stopPropagation(),Mc(m)):Mc(r.value)},!0)}function bk(e,t){for(let i of e)if(i.contains(t))return!0;return!1}function wU(e){let t=$h(e.getSnapshot());return Hi(e.subscribe(()=>{t.value=e.getSnapshot()})),t}function SU(e,t){let i=e(),r=new Set;return{getSnapshot(){return i},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...c){let d=t[s].call(i,...c);d&&(i=d,r.forEach(l=>l()))}}}function TU(){let e;return{before({doc:t}){var i;let r=t.documentElement;e=((i=t.defaultView)!=null?i:window).innerWidth-r.clientWidth},after({doc:t,d:i}){let r=t.documentElement,s=r.clientWidth-r.offsetWidth,c=e-s;i.style(r,"paddingRight",`${c}px`)}}}function EU(){return dk()?{before({doc:e,d:t,meta:i}){function r(s){return i.containers.flatMap(c=>c()).some(c=>c.contains(s))}t.microTask(()=>{var s;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=km();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let c=(s=window.scrollY)!=null?s:window.pageYOffset,d=null;t.addEventListener(e,"click",l=>{if(l.target instanceof HTMLElement)try{let m=l.target.closest("a");if(!m)return;let{hash:g}=new URL(m.href),y=e.querySelector(g);y&&!r(y)&&(d=y)}catch{}},!0),t.addEventListener(e,"touchstart",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let m=l.target;for(;m.parentElement&&r(m.parentElement);)m=m.parentElement;t.style(m,"overscrollBehavior","contain")}else t.style(l.target,"touchAction","none")}),t.addEventListener(e,"touchmove",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let m=l.target;for(;m.parentElement&&m.dataset.headlessuiPortal!==""&&!(m.scrollHeight>m.clientHeight||m.scrollWidth>m.clientWidth);)m=m.parentElement;m.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()},{passive:!1}),t.add(()=>{var l;let m=(l=window.scrollY)!=null?l:window.pageYOffset;c!==m&&window.scrollTo(0,c),d&&d.isConnected&&(d.scrollIntoView({block:"nearest"}),d=null)})})}}:{}}function CU(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function IU(e){let t={};for(let i of e)Object.assign(t,i(t));return t}let Iu=SU(()=>new Map,{PUSH(e,t){var i;let r=(i=this.get(e))!=null?i:{doc:e,count:0,d:km(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let i=this.get(e);return i&&(i.count--,i.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:i}){let r={doc:e,d:t,meta:IU(i)},s=[EU(),TU(),CU()];s.forEach(({before:c})=>c==null?void 0:c(r)),s.forEach(({after:c})=>c==null?void 0:c(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Iu.subscribe(()=>{let e=Iu.getSnapshot(),t=new Map;for(let[i]of e)t.set(i,i.documentElement.style.overflow);for(let i of e.values()){let r=t.get(i.doc)==="hidden",s=i.count!==0;(s&&!r||!s&&r)&&Iu.dispatch(i.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",i),i.count===0&&Iu.dispatch("TEARDOWN",i)}});function AU(e,t,i){let r=wU(Iu),s=De(()=>{let c=e.value?r.value.get(e.value):void 0;return c?c.count>0:!1});return pn([e,t],([c,d],[l],m)=>{if(!c||!d)return;Iu.dispatch("PUSH",c,i);let g=!1;m(()=>{g||(Iu.dispatch("POP",l??c,i),g=!0)})},{immediate:!0}),s}let Y0=new Map,ip=new Map;function a2(e,t=Fe(!0)){$r(i=>{var r;if(!t.value)return;let s=Hn(e);if(!s)return;i(function(){var d;if(!s)return;let l=(d=ip.get(s))!=null?d:1;if(l===1?ip.delete(s):ip.set(s,l-1),l!==1)return;let m=Y0.get(s);m&&(m["aria-hidden"]===null?s.removeAttribute("aria-hidden"):s.setAttribute("aria-hidden",m["aria-hidden"]),s.inert=m.inert,Y0.delete(s))});let c=(r=ip.get(s))!=null?r:0;ip.set(s,c+1),c===0&&(Y0.set(s,{"aria-hidden":s.getAttribute("aria-hidden"),inert:s.inert}),s.setAttribute("aria-hidden","true"),s.inert=!0)})}function MU({defaultContainers:e=[],portals:t,mainTreeNodeRef:i}={}){let r=Fe(null),s=jc(r);function c(){var d,l,m;let g=[];for(let y of e)y!==null&&(y instanceof HTMLElement?g.push(y):"value"in y&&y.value instanceof HTMLElement&&g.push(y.value));if(t!=null&&t.value)for(let y of t.value)g.push(y);for(let y of(d=s==null?void 0:s.querySelectorAll("html > *, body > *"))!=null?d:[])y!==document.body&&y!==document.head&&y instanceof HTMLElement&&y.id!=="headlessui-portal-root"&&(y.contains(Hn(r))||y.contains((m=(l=Hn(r))==null?void 0:l.getRootNode())==null?void 0:m.host)||g.some(x=>y.contains(x))||g.push(y));return g}return{resolveContainers:c,contains(d){return c().some(l=>l.contains(d))},mainTreeNodeRef:r,MainTreeNode(){return i!=null?null:Jn(o_,{features:tm.Hidden,ref:r})}}}let xk=Symbol("ForcePortalRootContext");function kU(){return yi(xk,!1)}let o2=lt({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup(e,{slots:t,attrs:i}){return ki(xk,e.force),()=>{let{force:r,...s}=e;return zr({theirProps:s,ourProps:{},slot:{},slots:t,attrs:i,name:"ForcePortalRoot"})}}}),wk=Symbol("StackContext");var yx=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(yx||{});function PU(){return yi(wk,()=>{})}function DU({type:e,enabled:t,element:i,onUpdate:r}){let s=PU();function c(...d){r==null||r(...d),s(...d)}Fn(()=>{pn(t,(d,l)=>{d?c(0,e,i):l===!0&&c(1,e,i)},{immediate:!0,flush:"sync"})}),Hi(()=>{t.value&&c(1,e,i)}),ki(wk,c)}let LU=Symbol("DescriptionContext");function Sk({slot:e=Fe({}),name:t="Description",props:i={}}={}){let r=Fe([]);function s(c){return r.value.push(c),()=>{let d=r.value.indexOf(c);d!==-1&&r.value.splice(d,1)}}return ki(LU,{register:s,slot:e,name:t,props:i}),De(()=>r.value.length>0?r.value.join(" "):void 0)}function OU(e){let t=jc(e);if(!t){if(e===null)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${e}`)}let i=t.getElementById("headlessui-portal-root");if(i)return i;let r=t.createElement("div");return r.setAttribute("id","headlessui-portal-root"),t.body.appendChild(r)}let Tk=lt({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:i}){let r=Fe(null),s=De(()=>jc(r)),c=kU(),d=yi(Ek,null),l=Fe(c===!0||d==null?OU(r.value):d.resolveTarget()),m=Fe(!1);Fn(()=>{m.value=!0}),$r(()=>{c||d!=null&&(l.value=d.resolveTarget())});let g=yi(bx,null),y=!1,x=Ua();return pn(r,()=>{if(y||!g)return;let C=Hn(r);C&&(Hi(g.register(C),x),y=!0)}),Hi(()=>{var C,I;let A=(C=s.value)==null?void 0:C.getElementById("headlessui-portal-root");A&&l.value===A&&l.value.children.length<=0&&((I=l.value.parentElement)==null||I.removeChild(l.value))}),()=>{if(!m.value||l.value===null)return null;let C={ref:r,"data-headlessui-portal":""};return Jn(_m,{to:l.value},zr({ourProps:C,theirProps:e,slot:{},attrs:i,slots:t,name:"Portal"}))}}}),bx=Symbol("PortalParentContext");function RU(){let e=yi(bx,null),t=Fe([]);function i(c){return t.value.push(c),e&&e.register(c),()=>r(c)}function r(c){let d=t.value.indexOf(c);d!==-1&&t.value.splice(d,1),e&&e.unregister(c)}let s={register:i,unregister:r,portals:t};return[t,lt({name:"PortalWrapper",setup(c,{slots:d}){return ki(bx,s),()=>{var l;return(l=d.default)==null?void 0:l.call(d)}}})]}let Ek=Symbol("PortalGroupContext"),FU=lt({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(e,{attrs:t,slots:i}){let r=es({resolveTarget(){return e.target}});return ki(Ek,r),()=>{let{target:s,...c}=e;return zr({theirProps:c,ourProps:{},slot:{},attrs:t,slots:i,name:"PortalGroup"})}}});var $U=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))($U||{});let xx=Symbol("DialogContext");function Ck(e){let t=yi(xx,null);if(t===null){let i=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,Ck),i}return t}let lv="DC8F892D-2EBD-447C-A4C8-A03058436FF4",zU=lt({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:lv},initialFocus:{type:Object,default:null},id:{type:String,default:()=>`headlessui-dialog-${Go()}`},role:{type:String,default:"dialog"}},emits:{close:e=>!0},setup(e,{emit:t,attrs:i,slots:r,expose:s}){var c;let d=Fe(!1);Fn(()=>{d.value=!0});let l=!1,m=De(()=>e.role==="dialog"||e.role==="alertdialog"?e.role:(l||(l=!0,console.warn(`Invalid role [${m}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")),g=Fe(0),y=Mm(),x=De(()=>e.open===lv&&y!==null?(y.value&Er.Open)===Er.Open:e.open),C=Fe(null),I=De(()=>jc(C));if(s({el:C,$el:C}),!(e.open!==lv||y!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof x.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${x.value===lv?void 0:e.open}`);let A=De(()=>d.value&&x.value?0:1),O=De(()=>A.value===0),F=De(()=>g.value>1),z=yi(xx,null)!==null,[U,H]=RU(),{resolveContainers:q,mainTreeNodeRef:ee,MainTreeNode:Q}=MU({portals:U,defaultContainers:[De(()=>{var Qe;return(Qe=Te.panelRef.value)!=null?Qe:C.value})]}),ve=De(()=>F.value?"parent":"leaf"),se=De(()=>y!==null?(y.value&Er.Closing)===Er.Closing:!1),K=De(()=>z||se.value?!1:O.value),J=De(()=>{var Qe,It,vt;return(vt=Array.from((It=(Qe=I.value)==null?void 0:Qe.querySelectorAll("body > *"))!=null?It:[]).find(it=>it.id==="headlessui-portal-root"?!1:it.contains(Hn(ee))&&it instanceof HTMLElement))!=null?vt:null});a2(J,K);let W=De(()=>F.value?!0:O.value),te=De(()=>{var Qe,It,vt;return(vt=Array.from((It=(Qe=I.value)==null?void 0:Qe.querySelectorAll("[data-headlessui-portal]"))!=null?It:[]).find(it=>it.contains(Hn(ee))&&it instanceof HTMLElement))!=null?vt:null});a2(te,W),DU({type:"Dialog",enabled:De(()=>A.value===0),element:C,onUpdate:(Qe,It)=>{if(It==="Dialog")return ba(Qe,{[yx.Add]:()=>g.value+=1,[yx.Remove]:()=>g.value-=1})}});let j=Sk({name:"DialogDescription",slot:De(()=>({open:x.value}))}),re=Fe(null),Te={titleId:re,panelRef:Fe(null),dialogState:A,setTitleId(Qe){re.value!==Qe&&(re.value=Qe)},close(){t("close",!1)}};ki(xx,Te);let ye=De(()=>!(!O.value||F.value));fk(q,(Qe,It)=>{Te.close(),Ir(()=>It==null?void 0:It.focus())},ye);let Ve=De(()=>!(F.value||A.value!==0));vk((c=I.value)==null?void 0:c.defaultView,"keydown",Qe=>{Ve.value&&(Qe.defaultPrevented||Qe.key===Xi.Escape&&(Qe.preventDefault(),Qe.stopPropagation(),Te.close()))});let Ue=De(()=>!(se.value||A.value!==0||z));return AU(I,Ue,Qe=>{var It;return{containers:[...(It=Qe.containers)!=null?It:[],q]}}),$r(Qe=>{if(A.value!==0)return;let It=Hn(C);if(!It)return;let vt=new ResizeObserver(it=>{for(let Ge of it){let ot=Ge.target.getBoundingClientRect();ot.x===0&&ot.y===0&&ot.width===0&&ot.height===0&&Te.close()}});vt.observe(It),Qe(()=>vt.disconnect())}),()=>{let{id:Qe,open:It,initialFocus:vt,...it}=e,Ge={...i,ref:C,id:Qe,role:m.value,"aria-modal":A.value===0?!0:void 0,"aria-labelledby":re.value,"aria-describedby":j.value},ot={open:A.value===0};return Jn(o2,{force:!0},()=>[Jn(Tk,()=>Jn(FU,{target:C.value},()=>Jn(o2,{force:!1},()=>Jn(np,{initialFocus:vt,containers:q,features:O.value?ba(ve.value,{parent:np.features.RestoreFocus,leaf:np.features.All&~np.features.FocusLock}):np.features.None},()=>Jn(H,{},()=>zr({ourProps:Ge,theirProps:{...it,...i},slot:ot,attrs:i,slots:r,visible:A.value===0,features:Oc.RenderStrategy|Oc.Static,name:"Dialog"})))))),Jn(Q)])}}}),NU=lt({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:()=>`headlessui-dialog-panel-${Go()}`}},setup(e,{attrs:t,slots:i,expose:r}){let s=Ck("DialogPanel");r({el:s.panelRef,$el:s.panelRef});function c(d){d.stopPropagation()}return()=>{let{id:d,...l}=e,m={id:d,ref:s.panelRef,onClick:c};return zr({ourProps:m,theirProps:l,slot:{open:s.dialogState.value===0},attrs:t,slots:i,name:"DialogPanel"})}}});var BU=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(BU||{});let Ik=Symbol("DisclosureContext");function lw(e){let t=yi(Ik,null);if(t===null){let i=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,lw),i}return t}let Ak=Symbol("DisclosurePanelContext");function jU(){return yi(Ak,null)}let VU=lt({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(e,{slots:t,attrs:i}){let r=Fe(e.defaultOpen?0:1),s=Fe(null),c=Fe(null),d={buttonId:Fe(`headlessui-disclosure-button-${Go()}`),panelId:Fe(`headlessui-disclosure-panel-${Go()}`),disclosureState:r,panel:s,button:c,toggleDisclosure(){r.value=ba(r.value,{0:1,1:0})},closeDisclosure(){r.value!==1&&(r.value=1)},close(l){d.closeDisclosure();let m=(()=>l?l instanceof HTMLElement?l:l.value instanceof HTMLElement?Hn(l):Hn(d.button):Hn(d.button))();m==null||m.focus()}};return ki(Ik,d),aw(De(()=>ba(r.value,{0:Er.Open,1:Er.Closed}))),()=>{let{defaultOpen:l,...m}=e,g={open:r.value===0,close:d.close};return zr({theirProps:m,ourProps:{},slot:g,slots:t,attrs:i,name:"Disclosure"})}}}),UU=lt({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{attrs:t,slots:i,expose:r}){let s=lw("DisclosureButton"),c=jU(),d=De(()=>c===null?!1:c.value===s.panelId.value);Fn(()=>{d.value||e.id!==null&&(s.buttonId.value=e.id)}),Hi(()=>{d.value||(s.buttonId.value=null)});let l=Fe(null);r({el:l,$el:l}),d.value||$r(()=>{s.button.value=l.value});let m=rw(De(()=>({as:e.as,type:t.type})),l);function g(){var C;e.disabled||(d.value?(s.toggleDisclosure(),(C=Hn(s.button))==null||C.focus()):s.toggleDisclosure())}function y(C){var I;if(!e.disabled)if(d.value)switch(C.key){case Xi.Space:case Xi.Enter:C.preventDefault(),C.stopPropagation(),s.toggleDisclosure(),(I=Hn(s.button))==null||I.focus();break}else switch(C.key){case Xi.Space:case Xi.Enter:C.preventDefault(),C.stopPropagation(),s.toggleDisclosure();break}}function x(C){switch(C.key){case Xi.Space:C.preventDefault();break}}return()=>{var C;let I={open:s.disclosureState.value===0},{id:A,...O}=e,F=d.value?{ref:l,type:m.value,onClick:g,onKeydown:y}:{id:(C=s.buttonId.value)!=null?C:A,ref:l,type:m.value,"aria-expanded":s.disclosureState.value===0,"aria-controls":s.disclosureState.value===0||Hn(s.panel)?s.panelId.value:void 0,disabled:e.disabled?!0:void 0,onClick:g,onKeydown:y,onKeyup:x};return zr({ourProps:F,theirProps:O,slot:I,attrs:t,slots:i,name:"DisclosureButton"})}}}),HU=lt({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:t,slots:i,expose:r}){let s=lw("DisclosurePanel");Fn(()=>{e.id!==null&&(s.panelId.value=e.id)}),Hi(()=>{s.panelId.value=null}),r({el:s.panel,$el:s.panel}),ki(Ak,s.panelId);let c=Mm(),d=De(()=>c!==null?(c.value&Er.Open)===Er.Open:s.disclosureState.value===0);return()=>{var l;let m={open:s.disclosureState.value===0,close:s.close},{id:g,...y}=e,x={id:(l=s.panelId.value)!=null?l:g,ref:s.panel};return zr({ourProps:x,theirProps:y,slot:m,attrs:t,slots:i,features:Oc.RenderStrategy|Oc.Static,visible:d.value,name:"DisclosurePanel"})}}}),l2=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function c2(e){var t,i;let r=(t=e.innerText)!=null?t:"",s=e.cloneNode(!0);if(!(s instanceof HTMLElement))return r;let c=!1;for(let l of s.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))l.remove(),c=!0;let d=c?(i=s.innerText)!=null?i:"":r;return l2.test(d)&&(d=d.replace(l2,"")),d}function GU(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let i=e.getAttribute("aria-labelledby");if(i){let r=i.split(" ").map(s=>{let c=document.getElementById(s);if(c){let d=c.getAttribute("aria-label");return typeof d=="string"?d.trim():c2(c).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return c2(e).trim()}function WU(e){let t=Fe(""),i=Fe("");return()=>{let r=Hn(e);if(!r)return"";let s=r.innerText;if(t.value===s)return i.value;let c=GU(r).trim().toLowerCase();return t.value=s,i.value=c,c}}var qU=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(qU||{}),ZU=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(ZU||{});function KU(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let Mk=Symbol("MenuContext");function ry(e){let t=yi(Mk,null);if(t===null){let i=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,ry),i}return t}let XU=lt({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:i}){let r=Fe(1),s=Fe(null),c=Fe(null),d=Fe([]),l=Fe(""),m=Fe(null),g=Fe(1);function y(C=I=>I){let I=m.value!==null?d.value[m.value]:null,A=uk(C(d.value.slice()),F=>Hn(F.dataRef.domRef)),O=I?A.indexOf(I):null;return O===-1&&(O=null),{items:A,activeItemIndex:O}}let x={menuState:r,buttonRef:s,itemsRef:c,items:d,searchQuery:l,activeItemIndex:m,activationTrigger:g,closeMenu:()=>{r.value=1,m.value=null},openMenu:()=>r.value=0,goToItem(C,I,A){let O=y(),F=mU(C===fa.Specific?{focus:fa.Specific,id:I}:{focus:C},{resolveItems:()=>O.items,resolveActiveIndex:()=>O.activeItemIndex,resolveId:z=>z.id,resolveDisabled:z=>z.dataRef.disabled});l.value="",m.value=F,g.value=A??1,d.value=O.items},search(C){let I=l.value!==""?0:1;l.value+=C.toLowerCase();let A=(m.value!==null?d.value.slice(m.value+I).concat(d.value.slice(0,m.value+I)):d.value).find(F=>F.dataRef.textValue.startsWith(l.value)&&!F.dataRef.disabled),O=A?d.value.indexOf(A):-1;O===-1||O===m.value||(m.value=O,g.value=1)},clearSearch(){l.value=""},registerItem(C,I){let A=y(O=>[...O,{id:C,dataRef:I}]);d.value=A.items,m.value=A.activeItemIndex,g.value=1},unregisterItem(C){let I=y(A=>{let O=A.findIndex(F=>F.id===C);return O!==-1&&A.splice(O,1),A});d.value=I.items,m.value=I.activeItemIndex,g.value=1}};return fk([s,c],(C,I)=>{var A;x.closeMenu(),iw(I,nw.Loose)||(C.preventDefault(),(A=Hn(s))==null||A.focus())},De(()=>r.value===0)),ki(Mk,x),aw(De(()=>ba(r.value,{0:Er.Open,1:Er.Closed}))),()=>{let C={open:r.value===0,close:x.closeMenu};return zr({ourProps:{},theirProps:e,slot:C,slots:t,attrs:i,name:"Menu"})}}}),YU=lt({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-menu-button-${Go()}`}},setup(e,{attrs:t,slots:i,expose:r}){let s=ry("MenuButton");r({el:s.buttonRef,$el:s.buttonRef});function c(g){switch(g.key){case Xi.Space:case Xi.Enter:case Xi.ArrowDown:g.preventDefault(),g.stopPropagation(),s.openMenu(),Ir(()=>{var y;(y=Hn(s.itemsRef))==null||y.focus({preventScroll:!0}),s.goToItem(fa.First)});break;case Xi.ArrowUp:g.preventDefault(),g.stopPropagation(),s.openMenu(),Ir(()=>{var y;(y=Hn(s.itemsRef))==null||y.focus({preventScroll:!0}),s.goToItem(fa.Last)});break}}function d(g){switch(g.key){case Xi.Space:g.preventDefault();break}}function l(g){e.disabled||(s.menuState.value===0?(s.closeMenu(),Ir(()=>{var y;return(y=Hn(s.buttonRef))==null?void 0:y.focus({preventScroll:!0})})):(g.preventDefault(),s.openMenu(),KU(()=>{var y;return(y=Hn(s.itemsRef))==null?void 0:y.focus({preventScroll:!0})})))}let m=rw(De(()=>({as:e.as,type:t.type})),s.buttonRef);return()=>{var g;let y={open:s.menuState.value===0},{id:x,...C}=e,I={ref:s.buttonRef,id:x,type:m.value,"aria-haspopup":"menu","aria-controls":(g=Hn(s.itemsRef))==null?void 0:g.id,"aria-expanded":s.menuState.value===0,onKeydown:c,onKeyup:d,onClick:l};return zr({ourProps:I,theirProps:C,slot:y,attrs:t,slots:i,name:"MenuButton"})}}}),JU=lt({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${Go()}`}},setup(e,{attrs:t,slots:i,expose:r}){let s=ry("MenuItems"),c=Fe(null);r({el:s.itemsRef,$el:s.itemsRef}),cU({container:De(()=>Hn(s.itemsRef)),enabled:De(()=>s.menuState.value===0),accept(y){return y.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:y.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(y){y.setAttribute("role","none")}});function d(y){var x;switch(c.value&&clearTimeout(c.value),y.key){case Xi.Space:if(s.searchQuery.value!=="")return y.preventDefault(),y.stopPropagation(),s.search(y.key);case Xi.Enter:if(y.preventDefault(),y.stopPropagation(),s.activeItemIndex.value!==null){let C=s.items.value[s.activeItemIndex.value];(x=Hn(C.dataRef.domRef))==null||x.click()}s.closeMenu(),ck(Hn(s.buttonRef));break;case Xi.ArrowDown:return y.preventDefault(),y.stopPropagation(),s.goToItem(fa.Next);case Xi.ArrowUp:return y.preventDefault(),y.stopPropagation(),s.goToItem(fa.Previous);case Xi.Home:case Xi.PageUp:return y.preventDefault(),y.stopPropagation(),s.goToItem(fa.First);case Xi.End:case Xi.PageDown:return y.preventDefault(),y.stopPropagation(),s.goToItem(fa.Last);case Xi.Escape:y.preventDefault(),y.stopPropagation(),s.closeMenu(),Ir(()=>{var C;return(C=Hn(s.buttonRef))==null?void 0:C.focus({preventScroll:!0})});break;case Xi.Tab:y.preventDefault(),y.stopPropagation(),s.closeMenu(),Ir(()=>sU(Hn(s.buttonRef),y.shiftKey?Oo.Previous:Oo.Next));break;default:y.key.length===1&&(s.search(y.key),c.value=setTimeout(()=>s.clearSearch(),350));break}}function l(y){switch(y.key){case Xi.Space:y.preventDefault();break}}let m=Mm(),g=De(()=>m!==null?(m.value&Er.Open)===Er.Open:s.menuState.value===0);return()=>{var y,x;let C={open:s.menuState.value===0},{id:I,...A}=e,O={"aria-activedescendant":s.activeItemIndex.value===null||(y=s.items.value[s.activeItemIndex.value])==null?void 0:y.id,"aria-labelledby":(x=Hn(s.buttonRef))==null?void 0:x.id,id:I,onKeydown:d,onKeyup:l,role:"menu",tabIndex:0,ref:s.itemsRef};return zr({ourProps:O,theirProps:A,slot:C,attrs:t,slots:i,features:Oc.RenderStrategy|Oc.Static,visible:g.value,name:"MenuItems"})}}}),QU=lt({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${Go()}`}},setup(e,{slots:t,attrs:i,expose:r}){let s=ry("MenuItem"),c=Fe(null);r({el:c,$el:c});let d=De(()=>s.activeItemIndex.value!==null?s.items.value[s.activeItemIndex.value].id===e.id:!1),l=WU(c),m=De(()=>({disabled:e.disabled,get textValue(){return l()},domRef:c}));Fn(()=>s.registerItem(e.id,m)),Hi(()=>s.unregisterItem(e.id)),$r(()=>{s.menuState.value===0&&d.value&&s.activationTrigger.value!==0&&Ir(()=>{var O,F;return(F=(O=Hn(c))==null?void 0:O.scrollIntoView)==null?void 0:F.call(O,{block:"nearest"})})});function g(O){if(e.disabled)return O.preventDefault();s.closeMenu(),ck(Hn(s.buttonRef))}function y(){if(e.disabled)return s.goToItem(fa.Nothing);s.goToItem(fa.Specific,e.id)}let x=lU();function C(O){x.update(O)}function I(O){x.wasMoved(O)&&(e.disabled||d.value||s.goToItem(fa.Specific,e.id,0))}function A(O){x.wasMoved(O)&&(e.disabled||d.value&&s.goToItem(fa.Nothing))}return()=>{let{disabled:O}=e,F={active:d.value,disabled:O,close:s.closeMenu},{id:z,...U}=e;return zr({ourProps:{id:z,ref:c,role:"menuitem",tabIndex:O===!0?void 0:-1,"aria-disabled":O===!0?!0:void 0,disabled:void 0,onClick:g,onFocus:y,onPointerenter:C,onMouseenter:C,onPointermove:I,onMousemove:I,onPointerleave:A,onMouseleave:A},theirProps:{...i,...U},slot:F,attrs:i,slots:t,name:"MenuItem"})}}}),kk=Symbol("LabelContext");function Pk(){let e=yi(kk,null);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Pk),t}return e}function e7({slot:e={},name:t="Label",props:i={}}={}){let r=Fe([]);function s(c){return r.value.push(c),()=>{let d=r.value.indexOf(c);d!==-1&&r.value.splice(d,1)}}return ki(kk,{register:s,slot:e,name:t,props:i}),De(()=>r.value.length>0?r.value.join(" "):void 0)}let t7=lt({name:"Label",props:{as:{type:[Object,String],default:"label"},passive:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-label-${Go()}`}},setup(e,{slots:t,attrs:i}){let r=Pk();return Fn(()=>Hi(r.register(e.id))),()=>{let{name:s="Label",slot:c={},props:d={}}=r,{id:l,passive:m,...g}=e,y={...Object.entries(d).reduce((x,[C,I])=>Object.assign(x,{[C]:le(I)}),{}),id:l};return m&&(delete y.onClick,delete y.htmlFor,delete g.onClick),zr({ourProps:y,theirProps:g,slot:c,attrs:i,slots:t,name:s})}}}),Dk=Symbol("GroupContext"),n7=lt({name:"SwitchGroup",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:i}){let r=Fe(null),s=e7({name:"SwitchLabel",props:{htmlFor:De(()=>{var d;return(d=r.value)==null?void 0:d.id}),onClick(d){r.value&&(d.currentTarget.tagName==="LABEL"&&d.preventDefault(),r.value.click(),r.value.focus({preventScroll:!0}))}}}),c=Sk({name:"SwitchDescription"});return ki(Dk,{switchRef:r,labelledby:s,describedby:c}),()=>zr({theirProps:e,ourProps:{},slot:{},slots:t,attrs:i,name:"SwitchGroup"})}}),i7=lt({name:"Switch",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:()=>`headlessui-switch-${Go()}`}},inheritAttrs:!1,setup(e,{emit:t,attrs:i,slots:r,expose:s}){let c=yi(Dk,null),[d,l]=KV(De(()=>e.modelValue),F=>t("update:modelValue",F),De(()=>e.defaultChecked));function m(){l(!d.value)}let g=Fe(null),y=c===null?g:c.switchRef,x=rw(De(()=>({as:e.as,type:i.type})),y);s({el:y,$el:y});function C(F){F.preventDefault(),m()}function I(F){F.key===Xi.Space?(F.preventDefault(),m()):F.key===Xi.Enter&&gU(F.currentTarget)}function A(F){F.preventDefault()}let O=De(()=>{var F,z;return(z=(F=Hn(y))==null?void 0:F.closest)==null?void 0:z.call(F,"form")});return Fn(()=>{pn([O],()=>{if(!O.value||e.defaultChecked===void 0)return;function F(){l(e.defaultChecked)}return O.value.addEventListener("reset",F),()=>{var z;(z=O.value)==null||z.removeEventListener("reset",F)}},{immediate:!0})}),()=>{let{id:F,name:z,value:U,form:H,...q}=e,ee={checked:d.value},Q={id:F,ref:y,role:"switch",type:x.value,tabIndex:0,"aria-checked":d.value,"aria-labelledby":c==null?void 0:c.labelledby.value,"aria-describedby":c==null?void 0:c.describedby.value,onClick:C,onKeyup:I,onKeypress:A};return Jn(Ut,[z!=null&&d.value!=null?Jn(o_,uU({features:tm.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:d.value,form:H,name:z,value:U})):null,zr({ourProps:Q,theirProps:{...i,...sw(q,["modelValue","defaultChecked"])},slot:ee,attrs:i,slots:r,name:"Switch"})])}}}),u2=t7;function r7(e){let t={called:!1};return(...i)=>{if(!t.called)return t.called=!0,e(...i)}}function J0(e,...t){e&&t.length>0&&e.classList.add(...t)}function cv(e,...t){e&&t.length>0&&e.classList.remove(...t)}var wx=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(wx||{});function s7(e,t){let i=km();if(!e)return i.dispose;let{transitionDuration:r,transitionDelay:s}=getComputedStyle(e),[c,d]=[r,s].map(l=>{let[m=0]=l.split(",").filter(Boolean).map(g=>g.includes("ms")?parseFloat(g):parseFloat(g)*1e3).sort((g,y)=>y-g);return m});return c!==0?i.setTimeout(()=>t("finished"),c+d):t("finished"),i.add(()=>t("cancelled")),i.dispose}function d2(e,t,i,r,s,c){let d=km(),l=c!==void 0?r7(c):()=>{};return cv(e,...s),J0(e,...t,...i),d.nextFrame(()=>{cv(e,...i),J0(e,...r),d.add(s7(e,m=>(cv(e,...r,...t),J0(e,...s),l(m))))}),d.add(()=>cv(e,...t,...i,...r,...s)),d.add(()=>l("cancelled")),d.dispose}function pu(e=""){return e.split(/\s+/).filter(t=>t.length>1)}let cw=Symbol("TransitionContext");var a7=(e=>(e.Visible="visible",e.Hidden="hidden",e))(a7||{});function o7(){return yi(cw,null)!==null}function l7(){let e=yi(cw,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function c7(){let e=yi(uw,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let uw=Symbol("NestingContext");function sy(e){return"children"in e?sy(e.children):e.value.filter(({state:t})=>t==="visible").length>0}function Lk(e){let t=Fe([]),i=Fe(!1);Fn(()=>i.value=!0),Hi(()=>i.value=!1);function r(c,d=wc.Hidden){let l=t.value.findIndex(({id:m})=>m===c);l!==-1&&(ba(d,{[wc.Unmount](){t.value.splice(l,1)},[wc.Hidden](){t.value[l].state="hidden"}}),!sy(t)&&i.value&&(e==null||e()))}function s(c){let d=t.value.find(({id:l})=>l===c);return d?d.state!=="visible"&&(d.state="visible"):t.value.push({id:c,state:"visible"}),()=>r(c,wc.Unmount)}return{children:t,register:s,unregister:r}}let Ok=Oc.RenderStrategy,l_=lt({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:i,slots:r,expose:s}){let c=Fe(0);function d(){c.value|=Er.Opening,t("beforeEnter")}function l(){c.value&=~Er.Opening,t("afterEnter")}function m(){c.value|=Er.Closing,t("beforeLeave")}function g(){c.value&=~Er.Closing,t("afterLeave")}if(!o7()&&hU())return()=>Jn(Rk,{...e,onBeforeEnter:d,onAfterEnter:l,onBeforeLeave:m,onAfterLeave:g},r);let y=Fe(null),x=De(()=>e.unmount?wc.Unmount:wc.Hidden);s({el:y,$el:y});let{show:C,appear:I}=l7(),{register:A,unregister:O}=c7(),F=Fe(C.value?"visible":"hidden"),z={value:!0},U=Go(),H={value:!1},q=Lk(()=>{!H.value&&F.value!=="hidden"&&(F.value="hidden",O(U),g())});Fn(()=>{let j=A(U);Hi(j)}),$r(()=>{if(x.value===wc.Hidden&&U){if(C.value&&F.value!=="visible"){F.value="visible";return}ba(F.value,{hidden:()=>O(U),visible:()=>A(U)})}});let ee=pu(e.enter),Q=pu(e.enterFrom),ve=pu(e.enterTo),se=pu(e.entered),K=pu(e.leave),J=pu(e.leaveFrom),W=pu(e.leaveTo);Fn(()=>{$r(()=>{if(F.value==="visible"){let j=Hn(y);if(j instanceof Comment&&j.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function te(j){let re=z.value&&!I.value,Te=Hn(y);!Te||!(Te instanceof HTMLElement)||re||(H.value=!0,C.value&&d(),C.value||m(),j(C.value?d2(Te,ee,Q,ve,se,ye=>{H.value=!1,ye===wx.Finished&&l()}):d2(Te,K,J,W,se,ye=>{H.value=!1,ye===wx.Finished&&(sy(q)||(F.value="hidden",O(U),g()))})))}return Fn(()=>{pn([C],(j,re,Te)=>{te(Te),z.value=!1},{immediate:!0})}),ki(uw,q),aw(De(()=>ba(F.value,{visible:Er.Open,hidden:Er.Closed})|c.value)),()=>{let{appear:j,show:re,enter:Te,enterFrom:ye,enterTo:Ve,entered:Ue,leave:Qe,leaveFrom:It,leaveTo:vt,...it}=e,Ge={ref:y},ot={...it,...I.value&&C.value&&Am.isServer?{class:Mn([i.class,it.class,...ee,...Q])}:{}};return zr({theirProps:ot,ourProps:Ge,slot:{},slots:r,attrs:i,features:Ok,visible:F.value==="visible",name:"TransitionChild"})}}}),u7=l_,Rk=lt({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:i,slots:r}){let s=Mm(),c=De(()=>e.show===null&&s!==null?(s.value&Er.Open)===Er.Open:e.show);$r(()=>{if(![!0,!1].includes(c.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let d=Fe(c.value?"visible":"hidden"),l=Lk(()=>{d.value="hidden"}),m=Fe(!0),g={show:c,appear:De(()=>e.appear||!m.value)};return Fn(()=>{$r(()=>{m.value=!1,c.value?d.value="visible":sy(l)||(d.value="hidden")})}),ki(uw,l),ki(cw,g),()=>{let y=sw(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),x={unmount:e.unmount};return zr({ourProps:{...x,as:"template"},theirProps:{},slot:{},slots:{...r,default:()=>[Jn(u7,{onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave"),...i,...x,...y},r.default)]},attrs:{},features:Ok,visible:d.value==="visible",name:"Transition"})}}});const Fk=["top","right","bottom","left"],h2=["start","end"],f2=Fk.reduce((e,t)=>e.concat(t,t+"-"+h2[0],t+"-"+h2[1]),[]),Ih=Math.min,Du=Math.max,c_=Math.round,uv=Math.floor,Rc=e=>({x:e,y:e}),d7={left:"right",right:"left",bottom:"top",top:"bottom"},h7={start:"end",end:"start"};function Sx(e,t,i){return Du(e,Ih(t,i))}function ed(e,t){return typeof e=="function"?e(t):e}function Il(e){return e.split("-")[0]}function zo(e){return e.split("-")[1]}function $k(e){return e==="x"?"y":"x"}function dw(e){return e==="y"?"height":"width"}function ay(e){return["top","bottom"].includes(Il(e))?"y":"x"}function hw(e){return $k(ay(e))}function zk(e,t,i){i===void 0&&(i=!1);const r=zo(e),s=hw(e),c=dw(s);let d=s==="x"?r===(i?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[c]>t.floating[c]&&(d=d_(d)),[d,d_(d)]}function f7(e){const t=d_(e);return[u_(e),t,u_(t)]}function u_(e){return e.replace(/start|end/g,t=>h7[t])}function p7(e,t,i){const r=["left","right"],s=["right","left"],c=["top","bottom"],d=["bottom","top"];switch(e){case"top":case"bottom":return i?t?s:r:t?r:s;case"left":case"right":return t?c:d;default:return[]}}function m7(e,t,i,r){const s=zo(e);let c=p7(Il(e),i==="start",r);return s&&(c=c.map(d=>d+"-"+s),t&&(c=c.concat(c.map(u_)))),c}function d_(e){return e.replace(/left|right|bottom|top/g,t=>d7[t])}function g7(e){return{top:0,right:0,bottom:0,left:0,...e}}function Nk(e){return typeof e!="number"?g7(e):{top:e,right:e,bottom:e,left:e}}function h_(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function p2(e,t,i){let{reference:r,floating:s}=e;const c=ay(t),d=hw(t),l=dw(d),m=Il(t),g=c==="y",y=r.x+r.width/2-s.width/2,x=r.y+r.height/2-s.height/2,C=r[l]/2-s[l]/2;let I;switch(m){case"top":I={x:y,y:r.y-s.height};break;case"bottom":I={x:y,y:r.y+r.height};break;case"right":I={x:r.x+r.width,y:x};break;case"left":I={x:r.x-s.width,y:x};break;default:I={x:r.x,y:r.y}}switch(zo(t)){case"start":I[d]-=C*(i&&g?-1:1);break;case"end":I[d]+=C*(i&&g?-1:1);break}return I}const v7=async(e,t,i)=>{const{placement:r="bottom",strategy:s="absolute",middleware:c=[],platform:d}=i,l=c.filter(Boolean),m=await(d.isRTL==null?void 0:d.isRTL(t));let g=await d.getElementRects({reference:e,floating:t,strategy:s}),{x:y,y:x}=p2(g,r,m),C=r,I={},A=0;for(let O=0;O<l.length;O++){const{name:F,fn:z}=l[O],{x:U,y:H,data:q,reset:ee}=await z({x:y,y:x,initialPlacement:r,placement:C,strategy:s,middlewareData:I,rects:g,platform:d,elements:{reference:e,floating:t}});if(y=U??y,x=H??x,I={...I,[F]:{...I[F],...q}},ee&&A<=50){A++,typeof ee=="object"&&(ee.placement&&(C=ee.placement),ee.rects&&(g=ee.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:s}):ee.rects),{x:y,y:x}=p2(g,C,m)),O=-1;continue}}return{x:y,y:x,placement:C,strategy:s,middlewareData:I}};async function nm(e,t){var i;t===void 0&&(t={});const{x:r,y:s,platform:c,rects:d,elements:l,strategy:m}=e,{boundary:g="clippingAncestors",rootBoundary:y="viewport",elementContext:x="floating",altBoundary:C=!1,padding:I=0}=ed(t,e),A=Nk(I),F=l[C?x==="floating"?"reference":"floating":x],z=h_(await c.getClippingRect({element:(i=await(c.isElement==null?void 0:c.isElement(F)))==null||i?F:F.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(l.floating)),boundary:g,rootBoundary:y,strategy:m})),U=x==="floating"?{...d.floating,x:r,y:s}:d.reference,H=await(c.getOffsetParent==null?void 0:c.getOffsetParent(l.floating)),q=await(c.isElement==null?void 0:c.isElement(H))?await(c.getScale==null?void 0:c.getScale(H))||{x:1,y:1}:{x:1,y:1},ee=h_(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({rect:U,offsetParent:H,strategy:m}):U);return{top:(z.top-ee.top+A.top)/q.y,bottom:(ee.bottom-z.bottom+A.bottom)/q.y,left:(z.left-ee.left+A.left)/q.x,right:(ee.right-z.right+A.right)/q.x}}const _7=e=>({name:"arrow",options:e,async fn(t){const{x:i,y:r,placement:s,rects:c,platform:d,elements:l,middlewareData:m}=t,{element:g,padding:y=0}=ed(e,t)||{};if(g==null)return{};const x=Nk(y),C={x:i,y:r},I=hw(s),A=dw(I),O=await d.getDimensions(g),F=I==="y",z=F?"top":"left",U=F?"bottom":"right",H=F?"clientHeight":"clientWidth",q=c.reference[A]+c.reference[I]-C[I]-c.floating[A],ee=C[I]-c.reference[I],Q=await(d.getOffsetParent==null?void 0:d.getOffsetParent(g));let ve=Q?Q[H]:0;(!ve||!await(d.isElement==null?void 0:d.isElement(Q)))&&(ve=l.floating[H]||c.floating[A]);const se=q/2-ee/2,K=ve/2-O[A]/2-1,J=Ih(x[z],K),W=Ih(x[U],K),te=J,j=ve-O[A]-W,re=ve/2-O[A]/2+se,Te=Sx(te,re,j),ye=!m.arrow&&zo(s)!=null&&re!=Te&&c.reference[A]/2-(re<te?J:W)-O[A]/2<0,Ve=ye?re<te?re-te:re-j:0;return{[I]:C[I]+Ve,data:{[I]:Te,centerOffset:re-Te-Ve,...ye&&{alignmentOffset:Ve}},reset:ye}}});function y7(e,t,i){return(e?[...i.filter(s=>zo(s)===e),...i.filter(s=>zo(s)!==e)]:i.filter(s=>Il(s)===s)).filter(s=>e?zo(s)===e||(t?u_(s)!==s:!1):!0)}const b7=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var i,r,s;const{rects:c,middlewareData:d,placement:l,platform:m,elements:g}=t,{crossAxis:y=!1,alignment:x,allowedPlacements:C=f2,autoAlignment:I=!0,...A}=ed(e,t),O=x!==void 0||C===f2?y7(x||null,I,C):C,F=await nm(t,A),z=((i=d.autoPlacement)==null?void 0:i.index)||0,U=O[z];if(U==null)return{};const H=zk(U,c,await(m.isRTL==null?void 0:m.isRTL(g.floating)));if(l!==U)return{reset:{placement:O[0]}};const q=[F[Il(U)],F[H[0]],F[H[1]]],ee=[...((r=d.autoPlacement)==null?void 0:r.overflows)||[],{placement:U,overflows:q}],Q=O[z+1];if(Q)return{data:{index:z+1,overflows:ee},reset:{placement:Q}};const ve=ee.map(J=>{const W=zo(J.placement);return[J.placement,W&&y?J.overflows.slice(0,2).reduce((te,j)=>te+j,0):J.overflows[0],J.overflows]}).sort((J,W)=>J[1]-W[1]),K=((s=ve.filter(J=>J[2].slice(0,zo(J[0])?2:3).every(W=>W<=0))[0])==null?void 0:s[0])||ve[0][0];return K!==l?{data:{index:z+1,overflows:ee},reset:{placement:K}}:{}}}},x7=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var i,r;const{placement:s,middlewareData:c,rects:d,initialPlacement:l,platform:m,elements:g}=t,{mainAxis:y=!0,crossAxis:x=!0,fallbackPlacements:C,fallbackStrategy:I="bestFit",fallbackAxisSideDirection:A="none",flipAlignment:O=!0,...F}=ed(e,t);if((i=c.arrow)!=null&&i.alignmentOffset)return{};const z=Il(s),U=Il(l)===l,H=await(m.isRTL==null?void 0:m.isRTL(g.floating)),q=C||(U||!O?[d_(l)]:f7(l));!C&&A!=="none"&&q.push(...m7(l,O,A,H));const ee=[l,...q],Q=await nm(t,F),ve=[];let se=((r=c.flip)==null?void 0:r.overflows)||[];if(y&&ve.push(Q[z]),x){const te=zk(s,d,H);ve.push(Q[te[0]],Q[te[1]])}if(se=[...se,{placement:s,overflows:ve}],!ve.every(te=>te<=0)){var K,J;const te=(((K=c.flip)==null?void 0:K.index)||0)+1,j=ee[te];if(j)return{data:{index:te,overflows:se},reset:{placement:j}};let re=(J=se.filter(Te=>Te.overflows[0]<=0).sort((Te,ye)=>Te.overflows[1]-ye.overflows[1])[0])==null?void 0:J.placement;if(!re)switch(I){case"bestFit":{var W;const Te=(W=se.map(ye=>[ye.placement,ye.overflows.filter(Ve=>Ve>0).reduce((Ve,Ue)=>Ve+Ue,0)]).sort((ye,Ve)=>ye[1]-Ve[1])[0])==null?void 0:W[0];Te&&(re=Te);break}case"initialPlacement":re=l;break}if(s!==re)return{reset:{placement:re}}}return{}}}};function m2(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function g2(e){return Fk.some(t=>e[t]>=0)}const w7=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:i}=t,{strategy:r="referenceHidden",...s}=ed(e,t);switch(r){case"referenceHidden":{const c=await nm(t,{...s,elementContext:"reference"}),d=m2(c,i.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:g2(d)}}}case"escaped":{const c=await nm(t,{...s,altBoundary:!0}),d=m2(c,i.floating);return{data:{escapedOffsets:d,escaped:g2(d)}}}default:return{}}}}};async function S7(e,t){const{placement:i,platform:r,elements:s}=e,c=await(r.isRTL==null?void 0:r.isRTL(s.floating)),d=Il(i),l=zo(i),m=ay(i)==="y",g=["left","top"].includes(d)?-1:1,y=c&&m?-1:1,x=ed(t,e);let{mainAxis:C,crossAxis:I,alignmentAxis:A}=typeof x=="number"?{mainAxis:x,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...x};return l&&typeof A=="number"&&(I=l==="end"?A*-1:A),m?{x:I*y,y:C*g}:{x:C*g,y:I*y}}const T7=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var i,r;const{x:s,y:c,placement:d,middlewareData:l}=t,m=await S7(t,e);return d===((i=l.offset)==null?void 0:i.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+m.x,y:c+m.y,data:{...m,placement:d}}}}},E7=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:i,y:r,placement:s}=t,{mainAxis:c=!0,crossAxis:d=!1,limiter:l={fn:F=>{let{x:z,y:U}=F;return{x:z,y:U}}},...m}=ed(e,t),g={x:i,y:r},y=await nm(t,m),x=ay(Il(s)),C=$k(x);let I=g[C],A=g[x];if(c){const F=C==="y"?"top":"left",z=C==="y"?"bottom":"right",U=I+y[F],H=I-y[z];I=Sx(U,I,H)}if(d){const F=x==="y"?"top":"left",z=x==="y"?"bottom":"right",U=A+y[F],H=A-y[z];A=Sx(U,A,H)}const O=l.fn({...t,[C]:I,[x]:A});return{...O,data:{x:O.x-i,y:O.y-r}}}}};function Fc(e){return Bk(e)?(e.nodeName||"").toLowerCase():"#document"}function ma(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Dl(e){var t;return(t=(Bk(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Bk(e){return e instanceof Node||e instanceof ma(e).Node}function Al(e){return e instanceof Element||e instanceof ma(e).Element}function Wo(e){return e instanceof HTMLElement||e instanceof ma(e).HTMLElement}function v2(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ma(e).ShadowRoot}function Pm(e){const{overflow:t,overflowX:i,overflowY:r,display:s}=$a(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+i)&&!["inline","contents"].includes(s)}function C7(e){return["table","td","th"].includes(Fc(e))}function fw(e){const t=pw(),i=$a(e);return i.transform!=="none"||i.perspective!=="none"||(i.containerType?i.containerType!=="normal":!1)||!t&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!t&&(i.filter?i.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(i.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(i.contain||"").includes(r))}function I7(e){let t=Ah(e);for(;Wo(t)&&!oy(t);){if(fw(t))return t;t=Ah(t)}return null}function pw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function oy(e){return["html","body","#document"].includes(Fc(e))}function $a(e){return ma(e).getComputedStyle(e)}function ly(e){return Al(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Ah(e){if(Fc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||v2(e)&&e.host||Dl(e);return v2(t)?t.host:t}function jk(e){const t=Ah(e);return oy(t)?e.ownerDocument?e.ownerDocument.body:e.body:Wo(t)&&Pm(t)?t:jk(t)}function im(e,t,i){var r;t===void 0&&(t=[]),i===void 0&&(i=!0);const s=jk(e),c=s===((r=e.ownerDocument)==null?void 0:r.body),d=ma(s);return c?t.concat(d,d.visualViewport||[],Pm(s)?s:[],d.frameElement&&i?im(d.frameElement):[]):t.concat(s,im(s,[],i))}function Vk(e){const t=$a(e);let i=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Wo(e),c=s?e.offsetWidth:i,d=s?e.offsetHeight:r,l=c_(i)!==c||c_(r)!==d;return l&&(i=c,r=d),{width:i,height:r,$:l}}function mw(e){return Al(e)?e:e.contextElement}function fh(e){const t=mw(e);if(!Wo(t))return Rc(1);const i=t.getBoundingClientRect(),{width:r,height:s,$:c}=Vk(t);let d=(c?c_(i.width):i.width)/r,l=(c?c_(i.height):i.height)/s;return(!d||!Number.isFinite(d))&&(d=1),(!l||!Number.isFinite(l))&&(l=1),{x:d,y:l}}const A7=Rc(0);function Uk(e){const t=ma(e);return!pw()||!t.visualViewport?A7:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function M7(e,t,i){return t===void 0&&(t=!1),!i||t&&i!==ma(e)?!1:t}function Nu(e,t,i,r){t===void 0&&(t=!1),i===void 0&&(i=!1);const s=e.getBoundingClientRect(),c=mw(e);let d=Rc(1);t&&(r?Al(r)&&(d=fh(r)):d=fh(e));const l=M7(c,i,r)?Uk(c):Rc(0);let m=(s.left+l.x)/d.x,g=(s.top+l.y)/d.y,y=s.width/d.x,x=s.height/d.y;if(c){const C=ma(c),I=r&&Al(r)?ma(r):r;let A=C.frameElement;for(;A&&r&&I!==C;){const O=fh(A),F=A.getBoundingClientRect(),z=$a(A),U=F.left+(A.clientLeft+parseFloat(z.paddingLeft))*O.x,H=F.top+(A.clientTop+parseFloat(z.paddingTop))*O.y;m*=O.x,g*=O.y,y*=O.x,x*=O.y,m+=U,g+=H,A=ma(A).frameElement}}return h_({width:y,height:x,x:m,y:g})}function k7(e){let{rect:t,offsetParent:i,strategy:r}=e;const s=Wo(i),c=Dl(i);if(i===c)return t;let d={scrollLeft:0,scrollTop:0},l=Rc(1);const m=Rc(0);if((s||!s&&r!=="fixed")&&((Fc(i)!=="body"||Pm(c))&&(d=ly(i)),Wo(i))){const g=Nu(i);l=fh(i),m.x=g.x+i.clientLeft,m.y=g.y+i.clientTop}return{width:t.width*l.x,height:t.height*l.y,x:t.x*l.x-d.scrollLeft*l.x+m.x,y:t.y*l.y-d.scrollTop*l.y+m.y}}function P7(e){return Array.from(e.getClientRects())}function Hk(e){return Nu(Dl(e)).left+ly(e).scrollLeft}function D7(e){const t=Dl(e),i=ly(e),r=e.ownerDocument.body,s=Du(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),c=Du(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let d=-i.scrollLeft+Hk(e);const l=-i.scrollTop;return $a(r).direction==="rtl"&&(d+=Du(t.clientWidth,r.clientWidth)-s),{width:s,height:c,x:d,y:l}}function L7(e,t){const i=ma(e),r=Dl(e),s=i.visualViewport;let c=r.clientWidth,d=r.clientHeight,l=0,m=0;if(s){c=s.width,d=s.height;const g=pw();(!g||g&&t==="fixed")&&(l=s.offsetLeft,m=s.offsetTop)}return{width:c,height:d,x:l,y:m}}function O7(e,t){const i=Nu(e,!0,t==="fixed"),r=i.top+e.clientTop,s=i.left+e.clientLeft,c=Wo(e)?fh(e):Rc(1),d=e.clientWidth*c.x,l=e.clientHeight*c.y,m=s*c.x,g=r*c.y;return{width:d,height:l,x:m,y:g}}function _2(e,t,i){let r;if(t==="viewport")r=L7(e,i);else if(t==="document")r=D7(Dl(e));else if(Al(t))r=O7(t,i);else{const s=Uk(e);r={...t,x:t.x-s.x,y:t.y-s.y}}return h_(r)}function Gk(e,t){const i=Ah(e);return i===t||!Al(i)||oy(i)?!1:$a(i).position==="fixed"||Gk(i,t)}function R7(e,t){const i=t.get(e);if(i)return i;let r=im(e,[],!1).filter(l=>Al(l)&&Fc(l)!=="body"),s=null;const c=$a(e).position==="fixed";let d=c?Ah(e):e;for(;Al(d)&&!oy(d);){const l=$a(d),m=fw(d);!m&&l.position==="fixed"&&(s=null),(c?!m&&!s:!m&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Pm(d)&&!m&&Gk(e,d))?r=r.filter(y=>y!==d):s=l,d=Ah(d)}return t.set(e,r),r}function F7(e){let{element:t,boundary:i,rootBoundary:r,strategy:s}=e;const d=[...i==="clippingAncestors"?R7(t,this._c):[].concat(i),r],l=d[0],m=d.reduce((g,y)=>{const x=_2(t,y,s);return g.top=Du(x.top,g.top),g.right=Ih(x.right,g.right),g.bottom=Ih(x.bottom,g.bottom),g.left=Du(x.left,g.left),g},_2(t,l,s));return{width:m.right-m.left,height:m.bottom-m.top,x:m.left,y:m.top}}function $7(e){const{width:t,height:i}=Vk(e);return{width:t,height:i}}function z7(e,t,i){const r=Wo(t),s=Dl(t),c=i==="fixed",d=Nu(e,!0,c,t);let l={scrollLeft:0,scrollTop:0};const m=Rc(0);if(r||!r&&!c)if((Fc(t)!=="body"||Pm(s))&&(l=ly(t)),r){const g=Nu(t,!0,c,t);m.x=g.x+t.clientLeft,m.y=g.y+t.clientTop}else s&&(m.x=Hk(s));return{x:d.left+l.scrollLeft-m.x,y:d.top+l.scrollTop-m.y,width:d.width,height:d.height}}function y2(e,t){return!Wo(e)||$a(e).position==="fixed"?null:t?t(e):e.offsetParent}function Wk(e,t){const i=ma(e);if(!Wo(e))return i;let r=y2(e,t);for(;r&&C7(r)&&$a(r).position==="static";)r=y2(r,t);return r&&(Fc(r)==="html"||Fc(r)==="body"&&$a(r).position==="static"&&!fw(r))?i:r||I7(e)||i}const N7=async function(e){let{reference:t,floating:i,strategy:r}=e;const s=this.getOffsetParent||Wk,c=this.getDimensions;return{reference:z7(t,await s(i),r),floating:{x:0,y:0,...await c(i)}}};function B7(e){return $a(e).direction==="rtl"}const j7={convertOffsetParentRelativeRectToViewportRelativeRect:k7,getDocumentElement:Dl,getClippingRect:F7,getOffsetParent:Wk,getElementRects:N7,getClientRects:P7,getDimensions:$7,getScale:fh,isElement:Al,isRTL:B7};function V7(e,t){let i=null,r;const s=Dl(e);function c(){clearTimeout(r),i&&i.disconnect(),i=null}function d(l,m){l===void 0&&(l=!1),m===void 0&&(m=1),c();const{left:g,top:y,width:x,height:C}=e.getBoundingClientRect();if(l||t(),!x||!C)return;const I=uv(y),A=uv(s.clientWidth-(g+x)),O=uv(s.clientHeight-(y+C)),F=uv(g),U={rootMargin:-I+"px "+-A+"px "+-O+"px "+-F+"px",threshold:Du(0,Ih(1,m))||1};let H=!0;function q(ee){const Q=ee[0].intersectionRatio;if(Q!==m){if(!H)return d();Q?d(!1,Q):r=setTimeout(()=>{d(!1,1e-7)},100)}H=!1}try{i=new IntersectionObserver(q,{...U,root:s.ownerDocument})}catch{i=new IntersectionObserver(q,U)}i.observe(e)}return d(!0),c}function U7(e,t,i,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:c=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:m=!1}=r,g=mw(e),y=s||c?[...g?im(g):[],...im(t)]:[];y.forEach(z=>{s&&z.addEventListener("scroll",i,{passive:!0}),c&&z.addEventListener("resize",i)});const x=g&&l?V7(g,i):null;let C=-1,I=null;d&&(I=new ResizeObserver(z=>{let[U]=z;U&&U.target===g&&I&&(I.unobserve(t),cancelAnimationFrame(C),C=requestAnimationFrame(()=>{I&&I.observe(t)})),i()}),g&&!m&&I.observe(g),I.observe(t));let A,O=m?Nu(e):null;m&&F();function F(){const z=Nu(e);O&&(z.x!==O.x||z.y!==O.y||z.width!==O.width||z.height!==O.height)&&i(),O=z,A=requestAnimationFrame(F)}return i(),()=>{y.forEach(z=>{s&&z.removeEventListener("scroll",i),c&&z.removeEventListener("resize",i)}),x&&x(),I&&I.disconnect(),I=null,m&&cancelAnimationFrame(A)}}const H7=b7,G7=E7,W7=x7,q7=w7,Z7=_7,K7=(e,t,i)=>{const r=new Map,s={platform:j7,...i},c={...s.platform,_c:r};return v7(e,t,{...s,platform:c})};function Tx(e){var t;return(t=e==null?void 0:e.$el)!=null?t:e}function X7(e){return{name:"arrow",options:e,fn(t){const i=Tx(le(e.element));return i==null?{}:Z7({element:i,padding:e.padding}).fn(t)}}}function Y7(e,t,i){i===void 0&&(i={});const r=i.whileElementsMounted,s=De(()=>{var ee;return(ee=le(i.open))!=null?ee:!0}),c=De(()=>le(i.middleware)),d=De(()=>{var ee;return(ee=le(i.placement))!=null?ee:"bottom"}),l=De(()=>{var ee;return(ee=le(i.strategy))!=null?ee:"absolute"}),m=De(()=>Tx(e.value)),g=De(()=>Tx(t.value)),y=Fe(null),x=Fe(null),C=Fe(l.value),I=Fe(d.value),A=$h({}),O=Fe(!1);let F;function z(){m.value==null||g.value==null||K7(m.value,g.value,{middleware:c.value,placement:d.value,strategy:l.value}).then(ee=>{y.value=ee.x,x.value=ee.y,C.value=ee.strategy,I.value=ee.placement,A.value=ee.middlewareData,O.value=!0})}function U(){typeof F=="function"&&(F(),F=void 0)}function H(){if(U(),r===void 0){z();return}if(m.value!=null&&g.value!=null){F=r(m.value,g.value,z);return}}function q(){s.value||(O.value=!1)}return pn([c,d,l],z,{flush:"sync"}),pn([m,g],H,{flush:"sync"}),pn(s,q,{flush:"sync"}),fm()&&pm(U),{x:yu(y),y:yu(x),strategy:yu(C),placement:yu(I),middlewareData:yu(A),isPositioned:yu(O),update:z}}var J7=Object.defineProperty,Q7=(e,t,i)=>t in e?J7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,e9=(e,t,i)=>(Q7(e,typeof t!="symbol"?t+"":t,i),i);function Ex(e){return e==null||e.value==null?null:e.value instanceof Node?e.value:"$el"in e.value&&e.value.$el?Ex(Fe(e.value.$el)):"getBoundingClientRect"in e.value?e.value:null}class t9{constructor(){e9(this,"current",this.detect())}set(t){this.current!==t&&(this.current=t)}reset(){this.set(this.detect())}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}}const qk=new t9;function Zk(e){return e.reduce((t,i)=>i.type===Ut?t.concat(Zk(i.children)):t.concat(i),[])}function b2(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}function x2(e){return e=le(e),e&&(e==null?void 0:e.nodeType)!==Node.COMMENT_NODE}function n9(e,t,i,r,s){pn([()=>s.offset,()=>s.flip,()=>s.shift,()=>s.autoPlacement,()=>s.arrow,()=>s.hide,()=>s.middleware],()=>{const c=[];(typeof s.offset=="number"||typeof s.offset=="object"||typeof s.offset=="function")&&c.push(T7(s.offset)),(s.flip===!0||typeof s.flip=="number"||typeof s.flip=="object")&&c.push(W7({padding:typeof s.flip=="number"?s.flip:void 0,...typeof s.flip=="object"?s.flip:{}})),(s.shift===!0||typeof s.shift=="number"||typeof s.shift=="object")&&c.push(G7({padding:typeof s.shift=="number"?s.shift:void 0,...typeof s.shift=="object"?s.shift:{}})),(s.autoPlacement===!0||typeof s.autoPlacement=="object")&&c.push(H7(typeof s.autoPlacement=="object"?s.autoPlacement:void 0)),(s.arrow===!0||typeof s.arrow=="number")&&c.push(X7({element:r,padding:s.arrow===!0?0:s.arrow})),c.push(...typeof s.middleware=="function"?s.middleware({referenceEl:t,floatingEl:i}):s.middleware||[]),(s.hide===!0||typeof s.hide=="object")&&c.push(q7(typeof s.hide=="object"?s.hide:void 0)),e.value=c},{immediate:!0})}function i9(e,t,i){let r=()=>{};Fn(()=>{if(e&&qk.isClient&&typeof ResizeObserver<"u"&&t.value&&t.value instanceof Element){const s=new ResizeObserver(([c])=>{i.value=c.borderBoxSize.reduce((d,{inlineSize:l})=>d+l,0)});s.observe(t.value),r=()=>{s.disconnect(),i.value=null}}}),ta(()=>{r()})}const r9=e=>{switch(e){case"top":return"origin-bottom";case"bottom":return"origin-top";case"left":return"origin-right";case"right":return"origin-left";case"top-start":case"right-end":return"origin-bottom-left";case"top-end":case"left-end":return"origin-bottom-right";case"right-start":case"bottom-start":return"origin-top-left";case"left-start":case"bottom-end":return"origin-top-right";default:return""}};function s9(e,t){const i=De(()=>{if(typeof e.originClass=="function")return e.originClass(t.value);if(typeof e.originClass=="string")return e.originClass;if(e.tailwindcssOriginClass)return r9(t.value)}),r=De(()=>e.enter||i.value?`${e.enter||""} ${i.value||""}`:void 0),s=De(()=>e.leave||i.value?`${e.leave||""} ${i.value||""}`:void 0);return{originClassRef:i,enterActiveClassRef:r,leaveActiveClassRef:s}}const a9=Symbol("ReferenceContext"),o9=Symbol("FloatingContext"),l9=Symbol("ArrowContext"),tn={as:{type:[String,Function],default:"template"},floatingAs:{type:[String,Function],default:"div"},show:{type:Boolean,default:null},placement:{type:String,default:"bottom-start"},strategy:{type:String,default:"absolute"},offset:[Number,Function,Object],shift:{type:[Boolean,Number,Object],default:!1},flip:{type:[Boolean,Number,Object],default:!1},arrow:{type:[Boolean,Number],default:!1},autoPlacement:{type:[Boolean,Object],default:!1},hide:{type:[Boolean,Object],default:!1},autoUpdate:{type:[Boolean,Object],default:!0},zIndex:{type:[Number,String],default:9999},transitionName:String,transitionType:String,enter:String,enterFrom:String,enterTo:String,leave:String,leaveFrom:String,leaveTo:String,originClass:[String,Function],tailwindcssOriginClass:{type:Boolean,default:!1},portal:{type:Boolean,default:!1},transform:{type:Boolean,default:!0},adaptiveWidth:{type:Boolean,default:!1},composable:{type:Boolean,default:!1},dialog:{type:Boolean,default:!1},middleware:{type:[Array,Function],default:()=>[]}};function c9(e,t,i,r){const{referenceRef:s}=r,c=t,d=Hr(i,{ref:s}),l=va(e,c.as==="template"?d:{});return c.as==="template"?l:typeof c.as=="string"?Jn(c.as,d,[l]):Jn(c.as,d,()=>[l])}function u9(e,t,i,r){const{floatingRef:s,props:c,mounted:d,show:l,x:m,y:g,placement:y,strategy:x,referenceElWidth:C,updateFloating:I}=r,A=Hr({...c,as:c.floatingAs},t),{enterActiveClassRef:O,leaveActiveClassRef:F}=s9(A,y),z={enterActiveClass:O.value,enterFromClass:A.enterFrom,enterToClass:A.enterTo,leaveActiveClass:F.value,leaveFromClass:A.leaveFrom,leaveToClass:A.leaveTo},U={name:A.transitionName,type:A.transitionType,appear:!0,...A.transitionName?{}:z,onBeforeEnter(){l.value=!0},onAfterLeave(){l.value=!1}},H={enter:O.value,enterFrom:A.enterFrom,enterTo:A.enterTo,leave:F.value,leaveFrom:A.leaveFrom,leaveTo:A.leaveTo,onBeforeEnter:U.onBeforeEnter,onAfterLeave:U.onAfterLeave},q={style:{...!A.dialog&&A.transform?{position:x.value,zIndex:A.zIndex,top:"0px",left:"0px",right:"auto",bottom:"auto",transform:`translate(${Math.round(m.value||0)}px,${Math.round(g.value||0)}px)`}:{position:x.value,zIndex:A.zIndex,top:`${g.value||0}px`,left:`${m.value||0}px`},width:A.adaptiveWidth&&typeof C.value=="number"?`${C.value}px`:void 0}};function ee(se){return A.portal?Jn(Tk,()=>se):se}function Q(se){const K=Hr(q,i,A.dialog?{}:{ref:s});return A.as==="template"?se:typeof A.as=="string"?Jn(A.as,K,se):Jn(A.as,K,()=>se)}function ve(){function se(){var K;const J=A.as==="template"?Hr(q,i,A.dialog?{}:{ref:s}):null,W=va(e,J);return((K=W.props)==null?void 0:K.unmount)===!1?(I(),W):typeof A.show!="boolean"||A.show?W:st()}return qk.isServer?d.value&&A.show?se():st():A.transitionChild?Jn(l_,{key:`placement-${y.value}`,...A.dialog?{ref:s}:{},as:"template",...H},se):Jn(Cr,{...A.dialog?{ref:s}:{},...U},se)}return ee(Q(ve()))}function d9(e,t,i,r,s){const c=Fe(!1),d=vh(r,"placement"),l=vh(r,"strategy"),m=$h({}),g=Fe(null),y=Fe(void 0),x=Fe(void 0),C=De(()=>Ex(t)),I=De(()=>Ex(i)),A=De(()=>x2(C)&&x2(I)),{x:O,y:F,placement:z,strategy:U,middlewareData:H,update:q}=Y7(C,I,{placement:d,strategy:l,middleware:m,whileElementsMounted:()=>{}}),ee=Fe(null);Fn(()=>{c.value=!0}),pn(e,(W,te)=>{W&&!te?s("show"):!W&&te&&s("hide")},{immediate:!0});function Q(){A.value&&(q(),s("update"))}pn([d,l,m],Q,{flush:"sync"}),n9(m,C,I,g,r),pn(H,()=>{const W=H.value.arrow;y.value=W==null?void 0:W.x,x.value=W==null?void 0:W.y}),i9(r.adaptiveWidth,C,ee),pn(e,async(W,te,j)=>{if(await Ir(),e.value&&A.value&&r.autoUpdate){const re=U7(C.value,I.value,Q,typeof r.autoUpdate=="object"?r.autoUpdate:void 0);j(re)}},{flush:"post",immediate:!0});const ve=Fe(!0);pn(C,()=>{!(C.value instanceof Element)&&A.value&&ve.value&&(ve.value=!1,window.requestAnimationFrame(()=>{ve.value=!0,Q()}))},{flush:"sync"});const se={referenceRef:t,placement:z},K={floatingRef:i,props:r,mounted:c,show:e,x:O,y:F,placement:z,strategy:U,referenceElWidth:ee,updateFloating:Q},J={ref:g,placement:z,x:y,y:x};return ki(l9,J),{referenceApi:se,floatingApi:K,arrowApi:J,x:O,y:F,placement:z,strategy:U,referenceEl:C,floatingEl:I,middlewareData:H,update:Q}}const h9={name:"Float",inheritAttrs:!1,props:tn,emits:["show","hide","update"],setup(e,{emit:t,slots:i,attrs:r}){const s=Fe(e.show??!1),c=Fe(null),d=Fe(null),{referenceApi:l,floatingApi:m,placement:g}=d9(s,c,d,e,t);function y(C){return e.as==="template"?C:typeof e.as=="string"?Jn(e.as,r,C):Jn(e.as,r,()=>C)}const x={placement:g.value};return e.composable||e.dialog?(ki(a9,l),ki(o9,m),()=>{if(i.default)return y(i.default(x))}):()=>{if(!i.default)return;const[C,I]=Zk(i.default(x)).filter(b2);if(!b2(C))return;const A=c9(C,{as:"template"},{},l),O=u9(I,{as:e.floatingAs},{},m);return y([A,O])}}};tn.as;tn.floatingAs,tn.transitionName,tn.transitionType,tn.enter,tn.enterFrom,tn.enterTo,tn.leave,tn.leaveFrom,tn.leaveTo,tn.originClass,tn.tailwindcssOriginClass;({...tn.as});tn.as,tn.show,tn.placement,tn.strategy,tn.offset,tn.shift,tn.flip,tn.arrow,tn.autoPlacement,tn.hide,tn.autoUpdate,tn.zIndex,tn.transitionName,tn.transitionType,tn.enter,tn.enterFrom,tn.enterTo,tn.leave,tn.leaveFrom,tn.leaveTo,tn.originClass,tn.tailwindcssOriginClass,tn.portal,tn.transform,tn.middleware;tn.as,tn.placement,tn.strategy,tn.offset,tn.shift,{...tn.flip},tn.arrow,tn.autoPlacement,tn.hide,tn.autoUpdate,tn.zIndex,tn.transitionName,tn.transitionType,tn.enter,tn.enterFrom,tn.enterTo,tn.leave,tn.leaveFrom,tn.leaveTo,tn.originClass,tn.tailwindcssOriginClass,tn.transform,tn.middleware;tn.as,tn.placement,tn.strategy,tn.offset,tn.shift,tn.flip,tn.arrow,tn.autoPlacement,tn.hide,tn.autoUpdate,tn.zIndex,tn.transitionName,tn.transitionType,tn.enter,tn.enterFrom,tn.enterTo,tn.leave,tn.leaveFrom,tn.leaveTo,tn.originClass,tn.tailwindcssOriginClass,tn.transform,tn.middleware;const f9={class:"py-1"},gw=lt({__name:"DropDown",props:{label:{},alignment:{default:"right"},showChevron:{type:Boolean,default:!0},labelClass:{default:""},chevronClass:{}},setup(e){return(t,i)=>(B(),ze(le(XU),{as:"div",class:"dropdown inline-block text-left"},{default:Ce(()=>[_e(le(h9),{placement:t.alignment==="left"?"bottom-start":"bottom-end",shift:"",flip:"",zIndex:"99",offset:4,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",tailwindcssOriginClass:""},{default:Ce(()=>[_e(le(YU),{class:Mn(["inline-flex w-full justify-center rounded-md items-center focus:outline-none focus:ring-2 p-2 placeholder:focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-gray-100",t.labelClass])},{default:Ce(()=>[En(t.$slots,"label",{},()=>[Ot(xt(t.label),1)]),t.showChevron?(B(),ze(Vh,{key:0,class:Mn(["xl:block m-1",t.chevronClass]),"aria-hidden":"true"},null,8,["class"])):st("",!0)]),_:3},8,["class"]),_e(le(JU),{class:"w-64 divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none max-h-[50vh] overflow-y-auto"},{default:Ce(()=>[En(t.$slots,"header"),ue("div",f9,[En(t.$slots,"default")]),En(t.$slots,"footer")]),_:3})]),_:3},8,["placement"])]),_:3}))}}),p9=lt({__name:"DropDownItem",props:{href:{},to:{},current:{type:Boolean}},setup(e){return(t,i)=>(B(),ze(le(QU),{class:"dropdown__dropdown-item"},{default:Ce(({active:r})=>[(B(),ze(zc(t.$attrs.disabled?"span":ts),{class:Mn(["block px-4 py-2 text-sm !no-underline",{"bg-blue-50 !text-blue-900":r,"text-gray-700":!r,"font-bold border-l-2 border-neutral-900 bg-transparent-black-100":t.current}]),href:t.href,to:t.to},{default:Ce(()=>[En(t.$slots,"default",{},void 0,!0)]),_:2},1032,["class","href","to"]))]),_:3}))}});const rh=ln(p9,[["__scopeId","data-v-f5c648fa"]]),m9=lt({__name:"ThemeSelector",setup(e){const{activeTheme:t,availableThemes:i,setTheme:r,isEnabled:s}=jM();function c(d){return d.charAt(0).toUpperCase()+d.slice(1)}return(d,l)=>vs((B(),ze(gw,{label:"Select Theme",showChevron:!1,class:"theme-selector"},{label:Ce(()=>[_e(Uj)]),default:Ce(()=>[(B(!0),fe(Ut,null,$n(le(i),m=>(B(),ze(rh,{key:m,current:le(t)===m,onClick:g=>le(r)(m)},{default:Ce(()=>[Ot(xt(c(m)),1)]),_:2},1032,["current","onClick"]))),128))]),_:1},512)),[[_a,le(s)&&le(i).length>1]])}}),g9=e=>(ja("data-v-73b8c317"),e=e(),Va(),e),v9={class:"app-menu flex flex-col w-[90vw] sm:w-md sm:px-8 sm:py-4 p-4 h-full relative"},_9={class:"app-menu__header flex mt-4 pt-6 pb-2 justify-between items-center"},y9={class:"md:text-xl text-lg font-bold"},b9={class:"flex items-center"},x9={class:"app-menu__items flex-1 py-4 border-y border-neutral-600 overflow-auto"},w9={class:"app-menu__footer pt-4 flex flex-col items-center text-sm"},S9=g9(()=>ue("p",null,[Ot(" Powered by "),ue("a",{href:"https://umn-latis.github.io/elevator/"},"Elevator")],-1)),T9={href:"https://umn.edu"},E9=lt({__name:"AppMenuPure",props:{instance:{},currentUser:{}},emits:["close"],setup(e){return(t,i)=>(B(),fe("nav",v9,[_e(ak,{class:"absolute right-4 top-4",onClick:i[0]||(i[0]=r=>t.$emit("close"))}),ue("header",_9,[_e(ts,{to:"/"},{default:Ce(()=>[ue("h1",y9,xt(t.instance.name),1)]),_:1}),ue("div",b9,[_e(m9)])]),ue("div",x9,[En(t.$slots,"default",{},void 0,!0)]),ue("footer",w9,[S9,ue("p",null,[Ot(" Made by "),ue("a",T9,[_e(ZV,{class:"inline-block w-6"})])])])]))}});const C9=ln(E9,[["__scopeId","data-v-73b8c317"]]),I9=lt({__name:"AppMenuItem",props:{href:{default:void 0},to:{default:void 0},isCurrentPage:{type:Boolean,default:!1}},setup(e){return(t,i)=>(B(),ze(ts,{href:t.href,to:t.to,class:Mn(["app-menu-item group w-full flex items-center pl-2 py-2 font-medium my-1 hover:no-underline focus:outline-none focus:ring-2 focus:ring-indigo-500 hover:bg-blue-100 hover:text-neutral-900",{"is-current-page":t.isCurrentPage}])},{default:Ce(()=>[En(t.$slots,"default",{},void 0,!0)]),_:3},8,["href","to","class"]))}});const Tr=ln(I9,[["__scopeId","data-v-22b8d060"]]),A9={class:"expandable-nav-section"},M9={class:"flex-1"},k9=lt({__name:"AppMenuGroup",props:{label:{}},setup(e){return(t,i)=>(B(),fe("div",A9,[_e(le(VU),{as:"div",class:"space-y-1"},{default:Ce(({open:r})=>[_e(le(UU),{class:"group w-full flex items-center pl-2 pr-1 py-2 text-left font-medium focus:outline-none focus:ring-2 focus:ring-indigo-500 my-1 hover:bg-blue-100 hover:text-neutral-900"},{default:Ce(()=>[ue("span",M9,xt(t.label),1),_e(Vh,{class:Mn(["w-5 h-5 text-neutral-400 group-hover:text-neutral-500 transform ease-in-out duration-150",{" -rotate-90":!r}])},null,8,["class"])]),_:2},1024),_e(le(HU),{class:"space-y-1 pl-8"},{default:Ce(()=>[En(t.$slots,"default",{},void 0,!0)]),_:3})]),_:3})]))}});const cy=ln(k9,[["__scopeId","data-v-93c4a54d"]]),P9={key:0},D9=lt({__name:"PagesNavSection",props:{pages:{}},setup(e){const t=e;function i(m){return`${Zn.instance.base.path}/page/view/${m.id}`===window.location.pathname}function r(m){return{id:m.id,name:m.title,isCurrentPage:i(m),href:`/page/view/${m.id}`}}function s(m){return m.map(g=>{const y=r(g);return!g.children||g.children.length===0?y:{...y,children:[y,...g.children.map(r)]}})}const c=Fe([]),d=Ju();function l(m){return m.filter(g=>g.includeInNav)}return pn([()=>t.pages,()=>d.path],()=>{const m=l(t.pages);c.value=s(m)},{immediate:!0}),(m,g)=>(B(!0),fe(Ut,null,$n(c.value,y=>(B(),fe(Ut,{key:y.id},[y.children?(B(),ze(cy,{key:1,label:y.name},{default:Ce(()=>[(B(!0),fe(Ut,null,$n(y.children,x=>(B(),ze(Tr,{key:x.name,to:x.href??"#",isCurrentPage:x.isCurrentPage},{default:Ce(()=>[Ot(xt(x.name),1)]),_:2},1032,["to","isCurrentPage"]))),128))]),_:2},1032,["label"])):(B(),fe("div",P9,[_e(Tr,{to:y.href??"#",isCurrentPage:y.isCurrentPage},{default:Ce(()=>[Ot(xt(y.name),1)]),_:2},1032,["to","isCurrentPage"])]))],64))),128))}}),L9={},O9={class:"my-2 border-neutral-500 max-w-xs"};function R9(e,t){return B(),fe("hr",O9)}const Kk=ln(L9,[["render",R9]]),F9=lt({__name:"EditNavSection",props:{currentUser:{},instance:{},assetId:{}},setup(e){const t=Zn.instance.base.url,i=e;async function r(){if(!i.assetId)throw new Error("assetId is null. Cannot delete asset.");if(confirm("Are you sure you want to delete this asset and all derivatives"))try{await Un.deleteAsset(i.assetId),window.location.href=`${t}/assetManager/userAssets`}catch(s){console.error(s),alert("Error deleting asset.")}}return(s,c)=>{var d;return(d=s.currentUser)!=null&&d.canManageAssets?(B(),ze(cy,{key:0,label:"Manage Assets"},{default:Ce(()=>[_e(Tr,{href:`${le(t)}/assetManager/userAssets/`},{default:Ce(()=>[Ot(" All My Assets ")]),_:1},8,["href"]),_e(Tr,{to:"/asset/create"},{default:Ce(()=>[Ot("Add Asset")]),_:1}),s.assetId?(B(),fe(Ut,{key:0},[_e(Tr,{href:`${le(t)}/assetManager/editAsset/${s.assetId}`},{default:Ce(()=>[Ot(" Edit Asset ")]),_:1},8,["href"]),_e(Tr,{onClick:r},{default:Ce(()=>[Ot(" Delete Asset ")]),_:1}),_e(Tr,{href:`${le(t)}/assetManager/restoreAsset/${s.assetId}`},{default:Ce(()=>[Ot(" Restore Asset ")]),_:1},8,["href"]),_e(Kk)],64)):st("",!0)]),_:1})):st("",!0)}}});const $9=lt({__name:"AdminNavSection",props:{instance:{},currentUser:{}},setup(e){const t=Zn.instance.base.url;return(i,r)=>(B(),ze(cy,{label:"Admin"},{default:Ce(()=>[_e(Tr,{href:`${le(t)}/instances/edit/${i.instance.id}`},{default:Ce(()=>[Ot(" Instance Settings ")]),_:1},8,["href"]),_e(Tr,{href:`${le(t)}/permissions/edit/instance/${i.instance.id}`},{default:Ce(()=>[Ot(" Instance Permissions ")]),_:1},8,["href"]),_e(Tr,{href:`${le(t)}/instances/customPages`},{default:Ce(()=>[Ot(" Instance Pages ")]),_:1},8,["href"]),_e(Tr,{href:`${le(t)}/reports`},{default:Ce(()=>[Ot(" Reports ")]),_:1},8,["href"]),_e(Tr,{href:`${le(t)}/templates`},{default:Ce(()=>[Ot(" Edit Templates ")]),_:1},8,["href"]),_e(Tr,{href:`${le(t)}/collectionManager`},{default:Ce(()=>[Ot(" Edit Collections ")]),_:1},8,["href"]),_e(Tr,{href:`${le(t)}/assetManager/importFromCSV`},{default:Ce(()=>[Ot(" Import from CSV ")]),_:1},8,["href"]),_e(Tr,{href:`${le(t)}/assetManager/exportCSV`},{default:Ce(()=>[Ot(" Export to CSV ")]),_:1},8,["href"]),i.currentUser.isSuperAdmin?(B(),fe(Ut,{key:0},[_e(Kk),_e(Tr,{href:`${le(t)}/admin`},{default:Ce(()=>[Ot(" Super Admin 🦸‍♀️ ")]),_:1},8,["href"]),_e(Tr,{href:`${le(t)}/admin/logs`},{default:Ce(()=>[Ot(" Logs ")]),_:1},8,["href"])],64)):st("",!0)]),_:1}))}}),z9=lt({__name:"HelpNavSection",props:{instance:{}},setup(e){return(t,i)=>(B(),ze(cy,{label:"Help"},{default:Ce(()=>[_e(Tr,{href:"http://umn-latis.github.io/elevator/"},{default:Ce(()=>[Ot(" Documentation ")]),_:1}),t.instance.contact?(B(),ze(Tr,{key:0,href:t.instance.contact},{default:Ce(()=>[Ot(" Contact ")]),_:1},8,["href"])):st("",!0)]),_:1}))}}),N9={class:"app-menu h-full"},B9=lt({__name:"AppMenu",emits:["close"],setup(e,{emit:t}){const i=t,r=bi(),s=Ho(),{currentUser:c,instance:d,pages:l}=dE(r),{activeAssetId:m}=dE(s),g=Ju();return pn(()=>g.path,()=>i("close")),(y,x)=>(B(),fe("div",N9,[_e(C9,{instance:le(r).instance,currentUser:le(r).currentUser,onClose:x[0]||(x[0]=C=>y.$emit("close"))},{default:Ce(()=>{var C,I;return[le(r).instance.userCanSearchAndBrowse?(B(),fe(Ut,{key:0},[_e(D9,{pages:le(l)},null,8,["pages"]),le(c)||le(r).collections.length?(B(),ze(Tr,{key:0,to:"/search/listCollections"},{default:Ce(()=>[Ot(" Collections ")]),_:1})):st("",!0),le(c)?(B(),ze(Tr,{key:1,to:"/drawers/listDrawers"},{default:Ce(()=>[Ot(" Drawers ")]),_:1})):st("",!0),(C=le(c))!=null&&C.canManageAssets?(B(),ze(F9,{key:2,currentUser:le(c),instance:le(d),assetId:le(m)},null,8,["currentUser","instance","assetId"])):st("",!0),(I=le(c))!=null&&I.isAdmin?(B(),ze($9,{key:3,currentUser:le(c),instance:le(d)},null,8,["currentUser","instance"])):st("",!0)],64)):st("",!0),_e(z9,{instance:le(d)},null,8,["instance"])]}),_:1},8,["instance","currentUser"])]))}});const j9=ln(B9,[["__scopeId","data-v-1270cead"]]);/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Xk=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],f_=Xk.join(","),Yk=typeof Element>"u",Bu=Yk?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,p_=!Yk&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},m_=function e(t,i){var r;i===void 0&&(i=!0);var s=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),c=s===""||s==="true",d=c||i&&t&&e(t.parentNode);return d},V9=function(t){var i,r=t==null||(i=t.getAttribute)===null||i===void 0?void 0:i.call(t,"contenteditable");return r===""||r==="true"},Jk=function(t,i,r){if(m_(t))return[];var s=Array.prototype.slice.apply(t.querySelectorAll(f_));return i&&Bu.call(t,f_)&&s.unshift(t),s=s.filter(r),s},Qk=function e(t,i,r){for(var s=[],c=Array.from(t);c.length;){var d=c.shift();if(!m_(d,!1))if(d.tagName==="SLOT"){var l=d.assignedElements(),m=l.length?l:d.children,g=e(m,!0,r);r.flatten?s.push.apply(s,g):s.push({scopeParent:d,candidates:g})}else{var y=Bu.call(d,f_);y&&r.filter(d)&&(i||!t.includes(d))&&s.push(d);var x=d.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(d),C=!m_(x,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(d));if(x&&C){var I=e(x===!0?d.children:x.children,!0,r);r.flatten?s.push.apply(s,I):s.push({scopeParent:d,candidates:I})}else c.unshift.apply(c,d.children)}}return s},eP=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},Tu=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||V9(t))&&!eP(t)?0:t.tabIndex},U9=function(t,i){var r=Tu(t);return r<0&&i&&!eP(t)?0:r},H9=function(t,i){return t.tabIndex===i.tabIndex?t.documentOrder-i.documentOrder:t.tabIndex-i.tabIndex},tP=function(t){return t.tagName==="INPUT"},G9=function(t){return tP(t)&&t.type==="hidden"},W9=function(t){var i=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return i},q9=function(t,i){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===i)return t[r]},Z9=function(t){if(!t.name)return!0;var i=t.form||p_(t),r=function(l){return i.querySelectorAll('input[type="radio"][name="'+l+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(t.name));else try{s=r(t.name)}catch(d){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",d.message),!1}var c=q9(s,t.form);return!c||c===t},K9=function(t){return tP(t)&&t.type==="radio"},X9=function(t){return K9(t)&&!Z9(t)},Y9=function(t){var i,r=t&&p_(t),s=(i=r)===null||i===void 0?void 0:i.host,c=!1;if(r&&r!==t){var d,l,m;for(c=!!((d=s)!==null&&d!==void 0&&(l=d.ownerDocument)!==null&&l!==void 0&&l.contains(s)||t!=null&&(m=t.ownerDocument)!==null&&m!==void 0&&m.contains(t));!c&&s;){var g,y,x;r=p_(s),s=(g=r)===null||g===void 0?void 0:g.host,c=!!((y=s)!==null&&y!==void 0&&(x=y.ownerDocument)!==null&&x!==void 0&&x.contains(s))}}return c},w2=function(t){var i=t.getBoundingClientRect(),r=i.width,s=i.height;return r===0&&s===0},J9=function(t,i){var r=i.displayCheck,s=i.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var c=Bu.call(t,"details>summary:first-of-type"),d=c?t.parentElement:t;if(Bu.call(d,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var l=t;t;){var m=t.parentElement,g=p_(t);if(m&&!m.shadowRoot&&s(m)===!0)return w2(t);t.assignedSlot?t=t.assignedSlot:!m&&g!==t.ownerDocument?t=g.host:t=m}t=l}if(Y9(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return w2(t);return!1},Q9=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var i=t.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var s=i.children.item(r);if(s.tagName==="LEGEND")return Bu.call(i,"fieldset[disabled] *")?!0:!s.contains(t)}return!0}i=i.parentElement}return!1},g_=function(t,i){return!(i.disabled||m_(i)||G9(i)||J9(i,t)||W9(i)||Q9(i))},Cx=function(t,i){return!(X9(i)||Tu(i)<0||!g_(t,i))},eH=function(t){var i=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},tH=function e(t){var i=[],r=[];return t.forEach(function(s,c){var d=!!s.scopeParent,l=d?s.scopeParent:s,m=U9(l,d),g=d?e(s.candidates):l;m===0?d?i.push.apply(i,g):i.push(l):r.push({documentOrder:c,tabIndex:m,item:s,isScope:d,content:g})}),r.sort(H9).reduce(function(s,c){return c.isScope?s.push.apply(s,c.content):s.push(c.content),s},[]).concat(i)},nH=function(t,i){i=i||{};var r;return i.getShadowRoot?r=Qk([t],i.includeContainer,{filter:Cx.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:eH}):r=Jk(t,i.includeContainer,Cx.bind(null,i)),tH(r)},iH=function(t,i){i=i||{};var r;return i.getShadowRoot?r=Qk([t],i.includeContainer,{filter:g_.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=Jk(t,i.includeContainer,g_.bind(null,i)),r},Hd=function(t,i){if(i=i||{},!t)throw new Error("No node provided");return Bu.call(t,f_)===!1?!1:Cx(i,t)},rH=Xk.concat("iframe").join(","),Q0=function(t,i){if(i=i||{},!t)throw new Error("No node provided");return Bu.call(t,rH)===!1?!1:g_(i,t)};/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function S2(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),i.push.apply(i,r)}return i}function T2(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?S2(Object(i),!0).forEach(function(r){sH(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):S2(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}function sH(e,t,i){return t=oH(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function aH(e,t){if(typeof e!="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oH(e){var t=aH(e,"string");return typeof t=="symbol"?t:String(t)}var E2={activateTrap:function(t,i){if(t.length>0){var r=t[t.length-1];r!==i&&r.pause()}var s=t.indexOf(i);s===-1||t.splice(s,1),t.push(i)},deactivateTrap:function(t,i){var r=t.indexOf(i);r!==-1&&t.splice(r,1),t.length>0&&t[t.length-1].unpause()}},lH=function(t){return t.tagName&&t.tagName.toLowerCase()==="input"&&typeof t.select=="function"},cH=function(t){return(t==null?void 0:t.key)==="Escape"||(t==null?void 0:t.key)==="Esc"||(t==null?void 0:t.keyCode)===27},Rp=function(t){return(t==null?void 0:t.key)==="Tab"||(t==null?void 0:t.keyCode)===9},uH=function(t){return Rp(t)&&!t.shiftKey},dH=function(t){return Rp(t)&&t.shiftKey},C2=function(t){return setTimeout(t,0)},I2=function(t,i){var r=-1;return t.every(function(s,c){return i(s)?(r=c,!1):!0}),r},rp=function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];return typeof t=="function"?t.apply(void 0,r):t},dv=function(t){return t.target.shadowRoot&&typeof t.composedPath=="function"?t.composedPath()[0]:t.target},hH=[],fH=function(t,i){var r=(i==null?void 0:i.document)||document,s=(i==null?void 0:i.trapStack)||hH,c=T2({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:uH,isKeyBackward:dH},i),d={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},l,m=function(te,j,re){return te&&te[j]!==void 0?te[j]:c[re||j]},g=function(te,j){var re=typeof(j==null?void 0:j.composedPath)=="function"?j.composedPath():void 0;return d.containerGroups.findIndex(function(Te){var ye=Te.container,Ve=Te.tabbableNodes;return ye.contains(te)||(re==null?void 0:re.includes(ye))||Ve.find(function(Ue){return Ue===te})})},y=function(te){var j=c[te];if(typeof j=="function"){for(var re=arguments.length,Te=new Array(re>1?re-1:0),ye=1;ye<re;ye++)Te[ye-1]=arguments[ye];j=j.apply(void 0,Te)}if(j===!0&&(j=void 0),!j){if(j===void 0||j===!1)return j;throw new Error("`".concat(te,"` was specified but was not a node, or did not return a node"))}var Ve=j;if(typeof j=="string"&&(Ve=r.querySelector(j),!Ve))throw new Error("`".concat(te,"` as selector refers to no known node"));return Ve},x=function(){var te=y("initialFocus");if(te===!1)return!1;if(te===void 0||!Q0(te,c.tabbableOptions))if(g(r.activeElement)>=0)te=r.activeElement;else{var j=d.tabbableGroups[0],re=j&&j.firstTabbableNode;te=re||y("fallbackFocus")}if(!te)throw new Error("Your focus-trap needs to have at least one focusable element");return te},C=function(){if(d.containerGroups=d.containers.map(function(te){var j=nH(te,c.tabbableOptions),re=iH(te,c.tabbableOptions),Te=j.length>0?j[0]:void 0,ye=j.length>0?j[j.length-1]:void 0,Ve=re.find(function(It){return Hd(It)}),Ue=re.slice().reverse().find(function(It){return Hd(It)}),Qe=!!j.find(function(It){return Tu(It)>0});return{container:te,tabbableNodes:j,focusableNodes:re,posTabIndexesFound:Qe,firstTabbableNode:Te,lastTabbableNode:ye,firstDomTabbableNode:Ve,lastDomTabbableNode:Ue,nextTabbableNode:function(vt){var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Ge=j.indexOf(vt);return Ge<0?it?re.slice(re.indexOf(vt)+1).find(function(ot){return Hd(ot)}):re.slice(0,re.indexOf(vt)).reverse().find(function(ot){return Hd(ot)}):j[Ge+(it?1:-1)]}}}),d.tabbableGroups=d.containerGroups.filter(function(te){return te.tabbableNodes.length>0}),d.tabbableGroups.length<=0&&!y("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(d.containerGroups.find(function(te){return te.posTabIndexesFound})&&d.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},I=function W(te){var j=te.activeElement;if(j)return j.shadowRoot&&j.shadowRoot.activeElement!==null?W(j.shadowRoot):j},A=function W(te){if(te!==!1&&te!==I(document)){if(!te||!te.focus){W(x());return}te.focus({preventScroll:!!c.preventScroll}),d.mostRecentlyFocusedNode=te,lH(te)&&te.select()}},O=function(te){var j=y("setReturnFocus",te);return j||(j===!1?!1:te)},F=function(te){var j=te.target,re=te.event,Te=te.isBackward,ye=Te===void 0?!1:Te;j=j||dv(re),C();var Ve=null;if(d.tabbableGroups.length>0){var Ue=g(j,re),Qe=Ue>=0?d.containerGroups[Ue]:void 0;if(Ue<0)ye?Ve=d.tabbableGroups[d.tabbableGroups.length-1].lastTabbableNode:Ve=d.tabbableGroups[0].firstTabbableNode;else if(ye){var It=I2(d.tabbableGroups,function(wt){var Xe=wt.firstTabbableNode;return j===Xe});if(It<0&&(Qe.container===j||Q0(j,c.tabbableOptions)&&!Hd(j,c.tabbableOptions)&&!Qe.nextTabbableNode(j,!1))&&(It=Ue),It>=0){var vt=It===0?d.tabbableGroups.length-1:It-1,it=d.tabbableGroups[vt];Ve=Tu(j)>=0?it.lastTabbableNode:it.lastDomTabbableNode}else Rp(re)||(Ve=Qe.nextTabbableNode(j,!1))}else{var Ge=I2(d.tabbableGroups,function(wt){var Xe=wt.lastTabbableNode;return j===Xe});if(Ge<0&&(Qe.container===j||Q0(j,c.tabbableOptions)&&!Hd(j,c.tabbableOptions)&&!Qe.nextTabbableNode(j))&&(Ge=Ue),Ge>=0){var ot=Ge===d.tabbableGroups.length-1?0:Ge+1,Ct=d.tabbableGroups[ot];Ve=Tu(j)>=0?Ct.firstTabbableNode:Ct.firstDomTabbableNode}else Rp(re)||(Ve=Qe.nextTabbableNode(j))}}else Ve=y("fallbackFocus");return Ve},z=function(te){var j=dv(te);if(!(g(j,te)>=0)){if(rp(c.clickOutsideDeactivates,te)){l.deactivate({returnFocus:c.returnFocusOnDeactivate});return}rp(c.allowOutsideClick,te)||te.preventDefault()}},U=function(te){var j=dv(te),re=g(j,te)>=0;if(re||j instanceof Document)re&&(d.mostRecentlyFocusedNode=j);else{te.stopImmediatePropagation();var Te,ye=!0;if(d.mostRecentlyFocusedNode)if(Tu(d.mostRecentlyFocusedNode)>0){var Ve=g(d.mostRecentlyFocusedNode),Ue=d.containerGroups[Ve].tabbableNodes;if(Ue.length>0){var Qe=Ue.findIndex(function(It){return It===d.mostRecentlyFocusedNode});Qe>=0&&(c.isKeyForward(d.recentNavEvent)?Qe+1<Ue.length&&(Te=Ue[Qe+1],ye=!1):Qe-1>=0&&(Te=Ue[Qe-1],ye=!1))}}else d.containerGroups.some(function(It){return It.tabbableNodes.some(function(vt){return Tu(vt)>0})})||(ye=!1);else ye=!1;ye&&(Te=F({target:d.mostRecentlyFocusedNode,isBackward:c.isKeyBackward(d.recentNavEvent)})),A(Te||d.mostRecentlyFocusedNode||x())}d.recentNavEvent=void 0},H=function(te){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;d.recentNavEvent=te;var re=F({event:te,isBackward:j});re&&(Rp(te)&&te.preventDefault(),A(re))},q=function(te){if(cH(te)&&rp(c.escapeDeactivates,te)!==!1){te.preventDefault(),l.deactivate();return}(c.isKeyForward(te)||c.isKeyBackward(te))&&H(te,c.isKeyBackward(te))},ee=function(te){var j=dv(te);g(j,te)>=0||rp(c.clickOutsideDeactivates,te)||rp(c.allowOutsideClick,te)||(te.preventDefault(),te.stopImmediatePropagation())},Q=function(){if(d.active)return E2.activateTrap(s,l),d.delayInitialFocusTimer=c.delayInitialFocus?C2(function(){A(x())}):A(x()),r.addEventListener("focusin",U,!0),r.addEventListener("mousedown",z,{capture:!0,passive:!1}),r.addEventListener("touchstart",z,{capture:!0,passive:!1}),r.addEventListener("click",ee,{capture:!0,passive:!1}),r.addEventListener("keydown",q,{capture:!0,passive:!1}),l},ve=function(){if(d.active)return r.removeEventListener("focusin",U,!0),r.removeEventListener("mousedown",z,!0),r.removeEventListener("touchstart",z,!0),r.removeEventListener("click",ee,!0),r.removeEventListener("keydown",q,!0),l},se=function(te){var j=te.some(function(re){var Te=Array.from(re.removedNodes);return Te.some(function(ye){return ye===d.mostRecentlyFocusedNode})});j&&A(x())},K=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(se):void 0,J=function(){K&&(K.disconnect(),d.active&&!d.paused&&d.containers.map(function(te){K.observe(te,{subtree:!0,childList:!0})}))};return l={get active(){return d.active},get paused(){return d.paused},activate:function(te){if(d.active)return this;var j=m(te,"onActivate"),re=m(te,"onPostActivate"),Te=m(te,"checkCanFocusTrap");Te||C(),d.active=!0,d.paused=!1,d.nodeFocusedBeforeActivation=r.activeElement,j==null||j();var ye=function(){Te&&C(),Q(),J(),re==null||re()};return Te?(Te(d.containers.concat()).then(ye,ye),this):(ye(),this)},deactivate:function(te){if(!d.active)return this;var j=T2({onDeactivate:c.onDeactivate,onPostDeactivate:c.onPostDeactivate,checkCanReturnFocus:c.checkCanReturnFocus},te);clearTimeout(d.delayInitialFocusTimer),d.delayInitialFocusTimer=void 0,ve(),d.active=!1,d.paused=!1,J(),E2.deactivateTrap(s,l);var re=m(j,"onDeactivate"),Te=m(j,"onPostDeactivate"),ye=m(j,"checkCanReturnFocus"),Ve=m(j,"returnFocus","returnFocusOnDeactivate");re==null||re();var Ue=function(){C2(function(){Ve&&A(O(d.nodeFocusedBeforeActivation)),Te==null||Te()})};return Ve&&ye?(ye(O(d.nodeFocusedBeforeActivation)).then(Ue,Ue),this):(Ue(),this)},pause:function(te){if(d.paused||!d.active)return this;var j=m(te,"onPause"),re=m(te,"onPostPause");return d.paused=!0,j==null||j(),ve(),J(),re==null||re(),this},unpause:function(te){if(!d.paused||!d.active)return this;var j=m(te,"onUnpause"),re=m(te,"onPostUnpause");return d.paused=!1,j==null||j(),C(),Q(),J(),re==null||re(),this},updateContainerElements:function(te){var j=[].concat(te).filter(Boolean);return d.containers=j.map(function(re){return typeof re=="string"?r.querySelector(re):re}),d.active&&C(),J(),this}},l.updateContainerElements(t),l};const pH=lt({name:"UseFocusTrap",props:["as","options"],setup(e,{slots:t}){let i;const r=Fe(),s=()=>i&&i.activate(),c=()=>i&&i.deactivate();return pn(()=>Ys(r),d=>{d&&(i=fH(d,e.options||{}),s())},{flush:"post"}),pm(()=>c()),()=>{if(t.default)return Jn(e.as||"div",{ref:r},t.default())}}}),mH={class:"overflow-hidden fixed inset-0 pointer-events-none z-30"},gH=lt({__name:"AppMenuButton",setup(e){const t=Fe(!1),i=Fe(null);function r(){var c;t.value=!1,(c=i.value)==null||c.focus()}function s(c){t.value&&c.key==="Escape"&&r()}return Fn(()=>{document.addEventListener("keydown",s)}),Hi(()=>document.removeEventListener("keydown",s)),(c,d)=>(B(),fe(Ut,null,[ue("button",{ref_key:"buttonRef",ref:i,class:"app-menu-button p-2 rounded-full",tabindex:"0",onClick:d[0]||(d[0]=l=>t.value=!t.value)},[_e(yj)],512),(B(),ze(_m,{to:"body"},[t.value?(B(),ze(le(pH),{key:0},{default:Ce(()=>[ue("div",mH,[_e(Cr,{name:"fade"},{default:Ce(()=>[vs(ue("div",{class:"fixed inset-0 transition-opacity z-20 bg-black opacity-50 pointer-events-auto",onClick:Uo(r,["self"])},null,512),[[_a,t.value]])]),_:1}),_e(Cr,{name:"slide-right"},{default:Ce(()=>[vs(_e(j9,{class:"absolute right-0 top-0 bottom-0 z-30 transition-transform transform-gpu pointer-events-auto",onClose:r},null,512),[[_a,t.value]])]),_:1})])]),_:1})):st("",!0)]))],64))}});const vH=ln(gH,[["__scopeId","data-v-f780fd62"]]),nP=Symbol("Tabs"),iP=Symbol(),Ix=["grid","list","timeline","map","gallery"],Ps={BEST_MATCH:0,TITLE:"title.raw",LAST_MODIFIED_DESC:"lastModified.desc",LAST_MODIFIED_ASC:"lastModified.asc",CUSTOM:"custom"},yl={DATE_RANGE:"GLOBAL_DATE_RANGE",LOCATION:"GLOBAL_LOCATION",FILE_TYPE:"GLOBAL_FILE_TYPE"},hv={BOTTOM:0,TOP:1};function A2(e){if(!e)return null;const t=Date.parse(e+" UTC");if(!isNaN(t))return(t/1e3).toString();if(e.toLowerCase().indexOf("bc")!=-1){e=e.replace(/,/g,"");const i=/[0-9]+/g,r=e.match(i);if(r&&r.length>0){let s=parseInt(r[0]);return e.toLowerCase().indexOf("century")!=-1&&(s=s*100),(-1*s*31556900-1970*31556900).toString()}}return null}const _H={[Ps.BEST_MATCH]:"Best Match",[Ps.TITLE]:"Default Title",[Ps.LAST_MODIFIED_ASC]:"Modified Date (oldest to newest)",[Ps.LAST_MODIFIED_DESC]:"Modified Date (newest to oldest)"},yH=()=>({searchId:Fe(void 0),status:Fe("idle"),query:Fe(""),filterBy:es({collectionIds:[],specificFieldsMap:new Map,searchableFieldsOperator:"AND",globalDateRange:null,globalLocation:null,globalFileType:null,includeHiddenAssets:!1}),matches:Fe([]),totalResults:Fe(void 0),currentPage:Fe(0),searchEntry:Fe(null),resultsView:Fe("grid"),sortOptions:Fe(_H),sort:Fe(Ps.BEST_MATCH),beforeNewSearchHandlers:[],afterNewSearchHandlers:[]}),yc=e=>({isReady:De(()=>e.status.value==="success"),isValidSearch:De(()=>{if(e.filterBy.globalLocation){const t=parseFloat(e.filterBy.globalLocation.radius);if(isNaN(t)||t<=0)return!1}return!0}),hasMoreResults:De(()=>e.matches.value.length<(e.totalResults.value??0)),hasDateRangeFilter:De(()=>e.filterBy.globalDateRange!==null),hasLocationFilter:De(()=>e.filterBy.globalLocation!==null),hasFileTypeFilter:De(()=>e.filterBy.globalFileType!==null),filteredByCount:De(()=>e.filterBy.collectionIds.length+e.filterBy.specificFieldsMap.size+(e.filterBy.globalDateRange?1:0)+(e.filterBy.globalLocation?1:0)+(e.filterBy.includeHiddenAssets?1:0)+(e.filterBy.globalFileType?1:0)),specificFieldFilterCount:De(()=>e.filterBy.specificFieldsMap.size),globalFieldFilterCount:De(()=>(e.filterBy.globalDateRange?1:0)+(e.filterBy.globalLocation?1:0)+(e.filterBy.globalFileType?1:0)),totalFieldFilterCount:De(()=>yc(e).specificFieldFilterCount.value+yc(e).globalFieldFilterCount.value),hasFieldFiltersApplied:De(()=>yc(e).totalFieldFilterCount.value>0),globalDateRangeAsFilter:De(()=>{var t,i;return e.filterBy.globalDateRange?{id:yl.DATE_RANGE,fieldId:yl.DATE_RANGE,value:JSON.stringify([((t=e.filterBy.globalDateRange)==null?void 0:t.startDate)??null,((i=e.filterBy.globalDateRange)==null?void 0:i.endDate)??null]),isFuzzy:!1,createdAt:e.filterBy.globalDateRange.createdAt}:null}),globalLocationAsFilter:De(()=>e.filterBy.globalLocation?{id:yl.LOCATION,fieldId:yl.LOCATION,value:JSON.stringify({lng:e.filterBy.globalLocation.lng,lat:e.filterBy.globalLocation.lat}),isFuzzy:!1,createdAt:e.filterBy.globalLocation.createdAt}:null),globalFileTypeAsFilter:De(()=>e.filterBy.globalFileType?{id:yl.FILE_TYPE,fieldId:yl.FILE_TYPE,value:e.filterBy.globalFileType.fileType,isFuzzy:!1,createdAt:e.filterBy.globalFileType.createdAt}:null),hasFiltersApplied:De(()=>yc(e).filteredByCount.value>0),searchRequestOptions:De(()=>{var c,d,l,m,g,y;const i=Array.from(e.filterBy.specificFieldsMap.values()).map(x=>({field:x.fieldId,text:x.value,fuzzy:x.isFuzzy})),r=((c=e.filterBy.globalDateRange)==null?void 0:c.startDate.toString())??"",s=((d=e.filterBy.globalDateRange)==null?void 0:d.endDate.toString())??"";return{sort:e.sort.value,collection:e.filterBy.collectionIds.length?e.filterBy.collectionIds:void 0,combineSpecificSearches:e.filterBy.searchableFieldsOperator,specificFieldSearch:i,startDateText:r,startDate:A2(r)??"",endDateText:s,endDate:A2(s)??"",longitude:((l=e.filterBy.globalLocation)==null?void 0:l.lng)??"",latitude:((m=e.filterBy.globalLocation)==null?void 0:m.lat)??"",distance:((g=e.filterBy.globalLocation)==null?void 0:g.radius)??"",fileTypesSearch:(y=e.filterBy.globalFileType)==null?void 0:y.fileType,showHidden:e.filterBy.includeHiddenAssets?"on":void 0}}),specificFieldFilters:De(()=>Array.from(e.filterBy.specificFieldsMap.values())),isBrowsingCollection:De(()=>{var t,i,r,s;return((t=e.searchEntry.value)==null?void 0:t.searchText)===""&&((r=(i=e.searchEntry.value)==null?void 0:i.collection)==null?void 0:r.length)===1&&(((s=e.searchEntry.value)==null?void 0:s.specificFieldSearch)??[]).length===0}),browsingCollectionId:De(()=>{var i,r;if(!yc(e).isBrowsingCollection.value)return null;const t=(r=(i=e.searchEntry.value)==null?void 0:i.collection)==null?void 0:r[0];return t?Number.parseInt(t):null}),supportedSpecificFieldTypes:De(()=>["text","select","checkbox","date","tag list","text area","multiselect"]),currentSearchTerm:De(()=>{var t;return((t=e.searchEntry.value)==null?void 0:t.searchText)??""})}),rP=e=>({async setSortOption(t){return e.sort.value=t,e.searchId.value=await this.getSearchId(),this.search(e.searchId.value)},addCollectionIdFilter(t){e.filterBy.collectionIds.push(t)},removeCollectionIdFilter(t){const i=e.filterBy.collectionIds.indexOf(t);if(i<0)throw new Error(`Cannot remove collection id ${t} from searchStore. ID is not in filterBy.collectionIds`);e.filterBy.collectionIds.splice(i,1)},clearCollectionIdFilters(){e.filterBy.collectionIds=[]},addDateRangeFilter(){e.filterBy.globalDateRange={startDate:"",endDate:"",createdAt:new Date().toISOString()}},removeDateRangeFilter(){e.filterBy.globalDateRange=null},addLocationFilter(){e.filterBy.globalLocation={lng:"-93.2277",lat:"44.9740",radius:"500",createdAt:new Date().toISOString()}},removeLocationFilter(){e.filterBy.globalLocation=null},updateLocationFilter(t){const i=e.filterBy.globalLocation;if(!i)throw new Error("Cannot update location filter. No location filter exists.");e.filterBy.globalLocation={...i,...t}},addFileTypeFilter(){e.filterBy.globalFileType={fileType:"",createdAt:new Date().toISOString()}},updateFileTypeFilter(t){const i=e.filterBy.globalFileType;if(!i)throw new Error("Cannot update file type filter. No file type filter exists.");e.filterBy.globalFileType={...i,fileType:t}},removeFileTypeFilter(){e.filterBy.globalFileType=null},getSearchableFieldFilter(t){return e.filterBy.specificFieldsMap.get(t)??null},updateSearchableFieldFilter(t,i){const r=this.getSearchableFieldFilter(t);if(!r)throw new Error(`cannot update filter with id ${t}. No such filter exists.`);if(i.id)throw new Error(`cannot update filter with id ${t}. Cannot update the id of a filter.`);e.filterBy.specificFieldsMap.set(t,{...r,...i})},async addSearchableFieldFilter(t,i){const s=bi().getSearchableField(t);if(!s)throw new Error(`Cannot add searchable field filter for field ${t}: no such field exists`);const c={fieldId:t,value:"",isFuzzy:!1,id:crypto.randomUUID(),createdAt:new Date().toISOString(),...i};s.type==="checkbox"&&(c.value="boolean_true"),e.filterBy.specificFieldsMap.set(c.id,c)},removeSearchableFieldFilter(t){e.filterBy.specificFieldsMap.delete(t)},updateSearchableFieldFilterValue(t,i){const r=e.filterBy.specificFieldsMap.get(t);if(!r)throw new Error(`Cannot update value of searchable field filter ${t}: no such filter found`);r.value=i},clearSearchableFieldsFilters(){e.filterBy.specificFieldsMap.clear(),e.filterBy.searchableFieldsOperator="AND",e.filterBy.globalDateRange=null,e.filterBy.globalLocation=null,e.filterBy.globalFileType=null},updateFilterFieldId(t,i){const r=bi(),s=e.filterBy.specificFieldsMap.get(t);if(!s)throw new Error(`Cannot update searchable field filter. No filter exists with id: ${t}`);if(s.fieldId===i)return;const c=r.getSearchableField(i);if(!c)throw new Error(`Cannot update searchable field filter. No field is found with id ${i}.`);const d={...s,fieldId:c.id};e.filterBy.specificFieldsMap.set(t,d)},updateSearchableFieldsOperator(t){const i=["AND","OR"];if(!i.includes(t))throw new Error(`Cannot update searchable fields operator. ${t} is not in ${i.join(", ")}`);e.filterBy.searchableFieldsOperator=t},updateSearchableFieldFilterIsFuzzy(t,i){const r=e.filterBy.specificFieldsMap.get(t);if(!r)throw new Error(`Cannot update isFuzzy of searchable field filter ${t}: no such filter found`);r.isFuzzy=i},clearQuery(){e.query.value=""},clearAllFilters(){this.clearCollectionIdFilters(),this.clearSearchableFieldsFilters(),e.filterBy.searchableFieldsOperator="AND",e.filterBy.includeHiddenAssets=!1},reset(){this.clearAllFilters(),this.clearQuery()},async getSearchId(){return Un.getSearchId(e.query.value,yc(e).searchRequestOptions.value).catch(t=>{throw new Error(`Cannot getSearchId for query: ${e.query}: ${t}`)})},_clearSearchResults(){e.matches.value=[],e.totalResults.value=void 0,e.currentPage.value=0,e.searchEntry.value=null},_updateStoreWithSearchResultResponse(t){var r,s,c,d,l,m;const i=bi();e.searchEntry.value=t.searchEntry,e.totalResults.value=t.totalResults,e.matches.value=t.matches,e.status.value="success",e.sortOptions.value=t.sortableWidgets,e.filterBy.searchableFieldsOperator=t.searchEntry.combineSpecificSearches,e.filterBy.collectionIds=((r=t.searchEntry.collection)==null?void 0:r.map(g=>Number.parseInt(g)))??[],t.searchEntry.specificFieldSearch&&(e.filterBy.specificFieldsMap.clear(),(s=t.searchEntry.specificFieldSearch)==null||s.forEach(g=>{if(!i.getSearchableField(g.field)){console.log("skipping search entry field",g.field);return}console.log("adding search entry field",g.field),rP(e).addSearchableFieldFilter(g.field,{value:g.text,isFuzzy:g.fuzzy})})),t.searchEntry.startDateText||t.searchEntry.endDateText?e.filterBy.globalDateRange={startDate:((c=t.searchEntry)==null?void 0:c.startDateText)??"",endDate:((d=t.searchEntry)==null?void 0:d.endDateText)??"",createdAt:new Date().toISOString()}:e.filterBy.globalDateRange=null,t.searchEntry.longitude&&t.searchEntry.latitude&&t.searchEntry.distance?e.filterBy.globalLocation={lng:t.searchEntry.longitude,lat:t.searchEntry.latitude,radius:t.searchEntry.distance,createdAt:new Date().toISOString()}:e.filterBy.globalLocation=null,(l=t.searchEntry)!=null&&l.fileTypesSearch?e.filterBy.globalFileType={fileType:t.searchEntry.fileTypesSearch,createdAt:new Date().toISOString()}:e.filterBy.globalFileType=null,e.filterBy.includeHiddenAssets=!!t.searchEntry.showHidden,e.query.value=e.query.value||((m=t.searchEntry)==null?void 0:m.searchText)||""},async search(t,i={}){const s={...{loadAll:!1,page:0},...i};e.beforeNewSearchHandlers.forEach(c=>c()),e.status.value="fetching",e.searchId.value=t,this._clearSearchResults();try{const c=await Un.getSearchResultsById(e.searchId.value,s);this._updateStoreWithSearchResultResponse(c)}catch(c){console.error(c),e.status.value="error"}finally{e.afterNewSearchHandlers.forEach(c=>c(e))}return e.searchId.value},onBeforeNewSearch(t){e.beforeNewSearchHandlers.push(t)},onAfterNewSearch(t){e.afterNewSearchHandlers.push(t)},async loadMore({loadAll:t}={loadAll:!1}){if(!e.searchId.value)throw new Error("No search id found. Cannot load more.");if(!yc(e).hasMoreResults.value){console.error("cannot load more results, already at the end");return}e.status.value="fetching";const i=e.currentPage.value;try{e.currentPage.value=i+1;const r=await Un.getSearchResultsById(e.searchId.value,{page:e.currentPage.value,loadAll:t});e.matches.value.push(...r.matches),e.searchEntry.value=r.searchEntry,e.status.value="success"}catch(r){e.status.value="error",e.currentPage.value=i,console.error(r)}},setResultsView(t){e.resultsView.value=t}}),Pr=Bh("search",()=>{const e=yH(),t=yc(e),i=rP(e);return{...t,...i,...e}}),bH={class:"input-group"},xH=["for"],wH={key:0,class:"text-red-600"},SH={class:"relative rounded-md"},TH={key:0,class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},EH=["id","type","name","value","required"],CH={key:1,class:"absolute inset-y-0 right-0 flex items-center pr-1"},co=lt({__name:"InputGroup",props:{id:{},label:{},labelHidden:{type:Boolean,default:!1},modelValue:{},type:{default:"text"},inputClass:{default:()=>({})},labelClass:{default:()=>({})},required:{type:Boolean,default:!1}},emits:["focus","blur","update:modelValue"],setup(e){return(t,i)=>(B(),fe("div",bH,[ue("label",{for:t.id,class:Mn(["block text-xs font-medium text-neutral-700 uppercase mb-1",[{"sr-only":t.labelHidden},t.labelClass]])},[Ot(xt(t.label)+" ",1),t.required?(B(),fe("span",wH,"*")):st("",!0)],10,xH),ue("div",SH,[t.$slots.prepend?(B(),fe("div",TH,[En(t.$slots,"prepend")])):st("",!0),ue("input",Hr({id:t.id,type:t.type,name:t.id,value:t.modelValue,class:["block w-full rounded-md border border-transparent focus-visible:ring-blue-600 focus-visible:ring-offset-2 focus-visible:ring-2 sm:text-sm py-2 bg-transparent-black-100 placeholder-transparent-black-400 px-4",[{"pl-10":t.$slots.prepend,"pr-10":t.$slots.append},t.inputClass]],required:t.required},t.$attrs,{onFocus:i[0]||(i[0]=r=>t.$emit("focus",r)),onBlur:i[1]||(i[1]=r=>t.$emit("blur",r)),onInput:i[2]||(i[2]=r=>t.$emit("update:modelValue",r.target.value))}),null,16,EH),t.$slots.append?(B(),fe("div",CH,[En(t.$slots,"append")])):st("",!0)])]))}});function IH(e,t,i){return i?e===1?t:i:e===1?t:`${t}s`}const AH={class:"flex gap-1 items-center"},MH=ue("span",{class:"sr-only"},"Clear Search",-1),kH=ue("span",{class:"sr-only"},"Advanced Search",-1),PH={key:2,class:"inline-flex"},DH=ue("span",{class:"sr-only"},"Clear All Filters",-1),LH={class:"inline-flex items-center justify-center bg-transparent-black-100 w-8 h-8 text-sm rounded-full text-neutral-900 gap-1 hover:bg-neutral-900 hover:text-neutral-200 transition:ease-in-out duration-150",type:"submit"},OH=ue("span",{class:"sr-only"},"Search",-1),sP=lt({__name:"SearchTextInputGroup",emits:["moreOptionClick","clearAllFilters"],setup(e,{emit:t}){const i=t,r=Fe(null),s=Fe(!1),c=Pr();function d(g){var y;r.value&&g.metaKey&&g.key==="k"&&(g.preventDefault(),(y=r.value.$el.querySelector("input"))==null||y.focus())}function l(g){var y;r.value&&g.key==="Escape"&&((y=r.value.$el.querySelector("input"))==null||y.blur())}function m(){c.clearAllFilters(),i("clearAllFilters")}return Fn(()=>{document.addEventListener("keydown",d),document.addEventListener("keydown",l)}),Hi(()=>{document.removeEventListener("keydown",d),document.removeEventListener("keydown",l)}),(g,y)=>(B(),ze(co,{class:"search-bar__search-text-input-group",id:"search",ref_key:"inputGroup",ref:r,modelValue:le(c).query,"onUpdate:modelValue":y[3]||(y[3]=x=>le(c).query=x),label:"Search",inputmode:"search",labelHidden:!0,placeholder:"Search",inputClass:"!rounded-full",onFocus:y[4]||(y[4]=x=>s.value=!0),onBlur:y[5]||(y[5]=x=>s.value=!1)},{append:Ce(()=>[ue("div",AH,[le(c).query.length?(B(),fe("button",{key:0,type:"button",class:"text-transparent-black-500 hover:text-neutral-900",onClick:y[0]||(y[0]=x=>le(c).query="")},[MH,_e(le(Em))])):st("",!0),le(c).hasFiltersApplied?st("",!0):(B(),fe("button",{key:1,type:"button",class:"w-8 h-8 inline-flex items-center justify-center rounded-full",onClick:y[1]||(y[1]=x=>g.$emit("moreOptionClick"))},[kH,_e(le(tV),{class:"h-4 w-4","aria-hidden":"true"})])),le(c).hasFiltersApplied?(B(),fe("div",PH,[ue("button",{type:"button",class:"inline-flex items-center justify-center rounded-l-full bg-neutral-900 text-neutral-300 text-xs py-1 px-2 border-r border-neutral-600",onClick:y[2]||(y[2]=x=>g.$emit("moreOptionClick"))},xt(le(c).filteredByCount)+" "+xt(le(IH)(le(c).filteredByCount,"filter")),1),ue("button",{type:"button",class:"inline-flex items-center justify-center rounded-r-full bg-neutral-900 text-neutral-300 text-xs py-1 px-2",onClick:m},[DH,_e(Cm,{class:"!h-3 !w-3","aria-hidden":"true"})])])):st("",!0),ue("button",LH,[le(c).status==="fetching"?(B(),ze(le(Jo),{key:0,class:"h-4 w-4","aria-hidden":"true"})):(B(),ze(le(Ej),{key:1,class:"h-4 w-4","aria-hidden":"true"})),OH])])]),_:1},8,["modelValue"]))}}),aP=lt({__name:"AdvSearchDropDown",props:{label:{}},setup(e){return(t,i)=>(B(),ze(gw,{label:t.label,class:"rounded-md text-sm bg-transparent-black-100",labelClass:"justify-between p-2 py-1",chevronClass:"!w-4 !h-4",alignment:"left"},{default:Ce(()=>[En(t.$slots,"default")]),_:3},8,["label"]))}}),vp=lt({__name:"AdvSearchDropDownItem",setup(e){return(t,i)=>(B(),ze(rh,{class:"!whitespace-nowrap overflow-ellipsis overflow-x-hidden"},{default:Ce(()=>[En(t.$slots,"default")]),_:3}))}}),RH={class:"my-4"},FH={class:"flex items-baseline gap-2"},$H=ue("h3",{class:"font-bold"},"Collections",-1),zH=ue("p",{class:"text-neutral-400 text-xs mb-2 italic"},' To limit your search to specific collections, choose "Add Collection" below. ',-1),NH={key:0,class:"flex flex-wrap gap-2 bg-transparent-black-50 p-4 mb-4 rounded-md"},BH=["onClick"],jH=lt({__name:"FilterByCollectionsSection",setup(e){const t=bi(),i=Pr(),r=De(()=>t.flatCollections.filter(d=>i.filterBy.collectionIds.includes(d.id)).sort((d,l)=>d.title.localeCompare(l.title))),s=De(()=>t.flatCollections.filter(d=>!i.filterBy.collectionIds.includes(d.id)).sort((d,l)=>d.title.localeCompare(l.title)));function c(d){const l=d.split(" › ");if(l.length===1)return d;const m="-".repeat(l.length-1),g=l[l.length-1];return`${m} ${g}`}return(d,l)=>(B(),fe("section",RH,[ue("header",FH,[$H,r.value.length?(B(),ze(oi,{key:0,variant:"tertiary",onClick:l[0]||(l[0]=m=>le(i).clearCollectionIdFilters())},{default:Ce(()=>[Ot(" clear ")]),_:1})):st("",!0)]),zH,r.value.length?(B(),fe("ul",NH,[(B(!0),fe(Ut,null,$n(r.value,m=>(B(),fe("li",{key:m.id,class:"text-xs bg-white rounded-md border border-neutral-800 inline-flex items-center text-neutral-900 px-2 py-1"},[Ot(xt(m.title)+" ",1),ue("button",{class:"ml-2 h-full flex items-center justify-center",onClick:g=>le(i).removeCollectionIdFilter(m.id)},[_e(le(Cm),{class:"!h-3 !w-3"})],8,BH)]))),128))])):st("",!0),s.value.length?(B(),ze(aP,{key:1,label:"Add Collection"},{default:Ce(()=>[(B(!0),fe(Ut,null,$n(s.value,m=>(B(),ze(vp,{key:m.id,class:"!whitespace-nowrap overflow-ellipsis overflow-x-hidden",title:c(m.title),onClick:g=>le(i).addCollectionIdFilter(m.id)},{default:Ce(()=>[Ot(xt(c(m.title)),1)]),_:2},1032,["title","onClick"]))),128))]),_:1})):st("",!0)]))}}),VH=["value"],UH=["value"],HH=lt({__name:"SelectFieldOptions",props:{filter:{}},setup(e){const t=e,i=Fe(t.filter.value),r=Fe([t.filter.value]),s=Pr(),c=bi(),d=De(()=>c.getSearchableField(t.filter.fieldId));function l(m){const g=m.target;s.updateSearchableFieldFilterValue(t.filter.id,g.value)}return pn([d],async()=>{if(!d.value)throw new Error(`Could not find searchable field with id ${t.filter.fieldId}`);r.value=await Un.getSearchableSelectFieldValues(d.value),r.value.includes(t.filter.value)||(s.updateSearchableFieldFilterValue(t.filter.id,r.value[0]),i.value=r.value[0])},{immediate:!0}),(m,g)=>(B(),fe("select",{value:i.value,class:"rounded-md w-full border-neutral-200",onChange:l},[(B(!0),fe(Ut,null,$n(r.value,y=>(B(),fe("option",{key:y,value:y},xt(y===""?"-":y),9,UH))),128))],40,VH))}}),GH=["value"],WH={value:"boolean_true"},qH={value:"boolean_false"},ZH=lt({__name:"CheckboxFieldOptions",props:{filter:{}},setup(e){const t=e,i=Fe(t.filter.value),r=Fe("Checked"),s=Fe("Unchecked"),c=Pr(),d=bi(),l=De(()=>d.getSearchableField(t.filter.fieldId));function m(g){const y=g.target;c.updateSearchableFieldFilterValue(t.filter.id,y.value)}return pn([l],async()=>{if(!l.value)throw new Error(`Could not find searchable field with id ${t.filter.fieldId}`);const g=await Un.getSearchableCheckboxFieldValues(l.value);r.value=g.boolean_true,s.value=g.boolean_false,i.value=t.filter.value??"boolean_true",c.updateSearchableFieldFilterValue(t.filter.id,i.value)},{immediate:!0}),(g,y)=>(B(),fe("select",{value:i.value,class:"rounded-md border-neutral-200",onChange:m},[ue("option",WH,xt(r.value),1),ue("option",qH,xt(s.value),1)],40,GH))}}),KH={class:"cascade-select flex flex-col gap-4"},XH=["value","onChange"],YH={key:0,value:"",disabled:""},JH=["value"],QH=lt({__name:"CascadeSelect",props:{options:{},selectClass:{},labelClass:{},initialSelectedValues:{}},emits:["change"],setup(e,{emit:t}){const i=e,r=t,s=es([...c()]);function c(){var x;if(!((x=i.initialSelectedValues)!=null&&x.length))return[{label:d(i.options),options:l(i.options),value:""}];const y=[];return i.initialSelectedValues.forEach(C=>{const I=m(y,C);I&&y.push(I)}),y}function d(y){return Object.keys(y)[0]}function l(y){const x=y[d(y)];return Array.isArray(x)?x:Object.keys(x)}function m(y,x="",C=i.options){const I=[];y.forEach(z=>{I.push(z.label),I.push(z.value)});const A=$$(I,C);if(!A)return null;const O=d(A),F=l(A);return x!==""&&!F.includes(x)&&console.error(`Cannot create next selected: initial value ${x} is not in the options ${F}`),{label:O,options:F,value:x}}function g(y,x){if(s[y].value=x,s.splice(y+1),!x)return;const C=m(s,"");if(!C){r("change",s.map(I=>I.value));return}s.push(C),r("change",s.map(I=>I.value))}return pn(()=>i.options,()=>{s.splice(0,s.length,...c())}),(y,x)=>(B(),fe("div",KH,[(B(!0),fe(Ut,null,$n(s,(C,I)=>(B(),fe("div",{key:I,class:"flex flex-col gap-1"},[ue("label",{class:Mn(["uppercase text-xs font-medium tracking-wider",y.labelClass])},xt(C.label),3),ue("select",{class:Mn(["rounded-md",y.selectClass]),style:{width:"100%"},value:C.value,onChange:A=>g(I,A.target.value)},[C.options.includes("")?st("",!0):(B(),fe("option",YH," Select a "+xt(C.label),1)),(B(!0),fe(Ut,null,$n(C.options.sort(),A=>(B(),fe("option",{key:A,value:A},xt(A===""?"-":A),9,JH))),128))],42,XH)]))),128))]))}}),eG=lt({__name:"MultiSelectFieldOptions",props:{filter:{}},setup(e){const t=e,i=Pr(),r=bi(),s=De(()=>r.getSearchableField(t.filter.fieldId)),c=Fe(null);function d(l){i.updateSearchableFieldFilterValue(t.filter.id,l.join(","))}return pn([s],async()=>{if(!s.value)throw new Error(`Could not find searchable field with id ${t.filter.fieldId}`);c.value=await Un.getSearchableMultiSelectFieldValues(s.value)},{immediate:!0}),(l,m)=>(B(),fe("div",null,[c.value?(B(),ze(QH,{key:0,options:c.value,initialSelectedValues:t.filter.value.split(","),class:"!gap-1",labelClass:"sr-only",selectClass:"text-sm border-neutral-200",onChange:d},null,8,["options","initialSelectedValues"])):st("",!0)]))}}),tG={class:"filter-row__name text-sm"},nG={class:"p-2"},iG={class:"filter-row__value text-sm"},rG={class:"filter-row__is-fuzzy"},sG=lt({__name:"BaseFilterRow",props:{label:{},rowIndex:{}},emits:["remove"],setup(e){const t=Pr(),i=De(()=>t.filterBy.searchableFieldsOperator);function r(){const c=t.filterBy.searchableFieldsOperator==="AND"?"OR":"AND";t.updateSearchableFieldsOperator(c)}return(s,c)=>(B(),fe("div",{class:Mn(["filter-row",{"filter-row--is-only-row":le(t).totalFieldFilterCount===1,"filter-row--is-first-row":s.rowIndex===0}])},[_e(oi,{class:"text-xs filter-row__operator",variant:"tertiary",type:"button",onClick:r},{default:Ce(()=>[Ot(xt(i.value),1)]),_:1}),ue("div",tG,[En(s.$slots,"label",{},()=>[ue("p",nG,xt(s.label),1)],!0)]),ue("div",iG,[En(s.$slots,"default",{},void 0,!0)]),ue("div",rG,[En(s.$slots,"fuzzy",{},void 0,!0)]),ue("button",{class:"filter-row__remove py-2 self-start w-full flex items-center justify-center",type:"button",onClick:c[0]||(c[0]=d=>s.$emit("remove"))},[_e(le(Em),{class:"!w-5 !h-5"})])],2))}});const uy=ln(sG,[["__scopeId","data-v-b24af0ec"]]),aG=["value"],oG=["value"],lG=["checked"],cG=ue("span",{"aria-label":"Fuzzy Search"},"Fuzzy",-1),uG=lt({__name:"FilterBySpecificFieldsRow",props:{filter:{},rowIndex:{}},setup(e){const t=e,i=bi(),r=Pr(),s=De(()=>{const y=i.getSearchableField(t.filter.fieldId);if(!y)throw new Error(`Could not find searchable field with id ${t.filter.fieldId}`);return y}),c=De(()=>i.searchableFields.filter(y=>r.supportedSpecificFieldTypes.includes(y.type)));function d(y){const x=t.filter.fieldId,C=y.target.value;if(C===x)return;r.updateFilterFieldId(t.filter.id,C);const I=i.getSearchableField(x),A=i.getSearchableField(C);(I==null?void 0:I.type)==="text"&&(A==null?void 0:A.type)==="text"||r.updateSearchableFieldFilterValue(t.filter.id,"")}function l(y){r.updateSearchableFieldFilterValue(t.filter.id,y)}function m(y){r.updateSearchableFieldFilterIsFuzzy(t.filter.id,y.target.checked)}function g(){r.removeSearchableFieldFilter(t.filter.id)}return(y,x)=>(B(),ze(uy,{rowIndex:y.rowIndex,onRemove:g},{label:Ce(()=>[ue("select",{class:"rounded-md text-sm filter-row__name w-full border-neutral-200 bg-transparent",value:s.value.id,onChange:d},[(B(!0),fe(Ut,null,$n(c.value,C=>(B(),fe("option",{key:C.id,value:C.id},xt(C.label),9,oG))),128))],40,aG)]),fuzzy:Ce(()=>[ue("label",{class:Mn(["text-xs font-bold uppercase text-center cursor-pointer leading-none block",{"text-blue-600":y.filter.isFuzzy,"text-neutral-300":!y.filter.isFuzzy}])},[ue("input",{class:"sr-only",type:"checkbox",checked:y.filter.isFuzzy,onChange:m},null,40,lG),cG],2)]),default:Ce(()=>[["text","date","text area"].includes(s.value.type)?(B(),ze(co,{key:0,id:y.filter.id,class:"text-sm",inputClass:"!bg-white !border !border-neutral-200 placeholder:capitalize",label:s.value.label,modelValue:y.filter.value,labelHidden:!0,placeholder:s.value.label,"onUpdate:modelValue":l},null,8,["id","label","modelValue","placeholder"])):st("",!0),["select","tag list"].includes(s.value.type)?(B(),ze(HH,{key:1,class:"w-full text-sm",filter:y.filter},null,8,["filter"])):st("",!0),s.value.type==="checkbox"?(B(),ze(ZH,{key:2,class:"w-full text-sm",filter:y.filter},null,8,["filter"])):st("",!0),s.value.type==="multiselect"?(B(),ze(eG,{key:3,class:"w-full text-sm",filter:y.filter},null,8,["filter"])):st("",!0)]),_:1},8,["rowIndex"]))}}),dG={class:"flex flex-col lg:flex-row gap-1"},hG=lt({__name:"FilterByGlobalDateRow",props:{rowIndex:{}},setup(e){const t=Pr();return(i,r)=>(B(),ze(uy,{label:"Any Date",rowIndex:i.rowIndex,onRemove:le(t).removeDateRangeFilter},{default:Ce(()=>[ue("div",dG,[le(t).filterBy.globalDateRange?(B(),ze(co,{key:0,id:"filter-by-date-range-start-date",modelValue:le(t).filterBy.globalDateRange.startDate,"onUpdate:modelValue":r[0]||(r[0]=s=>le(t).filterBy.globalDateRange.startDate=s),class:"text-sm",inputClass:"!bg-white !border !border-neutral-200",label:"Start Date",labelHidden:!0,placeholder:"Start Date"},null,8,["modelValue"])):st("",!0),le(t).filterBy.globalDateRange?(B(),ze(co,{key:1,id:"filter-by-date-range-end-date",modelValue:le(t).filterBy.globalDateRange.endDate,"onUpdate:modelValue":r[1]||(r[1]=s=>le(t).filterBy.globalDateRange.endDate=s),class:"text-sm",inputClass:"!bg-white !border !border-neutral-200",label:"End Date",labelHidden:!0,placeholder:"End Date"},null,8,["modelValue"])):st("",!0)])]),_:1},8,["rowIndex","onRemove"]))}});var oP={exports:{}};(function(e,t){(function(i,r){e.exports=r()})(yM,function(){var i,r,s;function c(l,m){if(!i)i=m;else if(!r)r=m;else{var g="var sharedChunk = {}; ("+i+")(sharedChunk); ("+r+")(sharedChunk);",y={};i(y),s=m(y),typeof window<"u"&&(s.workerUrl=window.URL.createObjectURL(new Blob([g],{type:"text/javascript"})))}}c(["exports"],function(l){function m(u,a,h,p){return new(h||(h=Promise))(function(_,S){function E($){try{L(p.next($))}catch(V){S(V)}}function M($){try{L(p.throw($))}catch(V){S(V)}}function L($){var V;$.done?_($.value):(V=$.value,V instanceof h?V:new h(function(Y){Y(V)})).then(E,M)}L((p=p.apply(u,a||[])).next())})}function g(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}typeof SuppressedError=="function"&&SuppressedError;var y=x;function x(u,a){this.x=u,this.y=a}x.prototype={clone:function(){return new x(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,a){return this.clone()._rotateAround(u,a)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var a=u.x-this.x,h=u.y-this.y;return a*a+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,a){return Math.atan2(this.x*a-this.y*u,this.x*u+this.y*a)},_matMult:function(u){var a=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=a,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var a=Math.cos(u),h=Math.sin(u),p=h*this.x+a*this.y;return this.x=a*this.x-h*this.y,this.y=p,this},_rotateAround:function(u,a){var h=Math.cos(u),p=Math.sin(u),_=a.y+p*(this.x-a.x)+h*(this.y-a.y);return this.x=a.x+h*(this.x-a.x)-p*(this.y-a.y),this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},x.convert=function(u){return u instanceof x?u:Array.isArray(u)?new x(u[0],u[1]):u};var C=g(y),I=A;function A(u,a,h,p){this.cx=3*u,this.bx=3*(h-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(p-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=a,this.p2x=h,this.p2y=p}A.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,a){if(a===void 0&&(a=1e-6),u<0)return 0;if(u>1)return 1;for(var h=u,p=0;p<8;p++){var _=this.sampleCurveX(h)-u;if(Math.abs(_)<a)return h;var S=this.sampleCurveDerivativeX(h);if(Math.abs(S)<1e-6)break;h-=_/S}var E=0,M=1;for(h=u,p=0;p<20&&(_=this.sampleCurveX(h),!(Math.abs(_-u)<a));p++)u>_?E=h:M=h,h=.5*(M-E)+E;return h},solve:function(u,a){return this.sampleCurveY(this.solveCurveX(u,a))}};var O=g(I);let F,z;function U(){return F==null&&(F=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),F}function H(){if(z==null&&(z=!1,U())){const a=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(a){for(let p=0;p<5*5;p++){const _=4*p;a.fillStyle=`rgb(${_},${_+1},${_+2})`,a.fillRect(p%5,Math.floor(p/5),1,1)}const h=a.getImageData(0,0,5,5).data;for(let p=0;p<5*5*4;p++)if(p%4!=3&&h[p]!==p){z=!0;break}}}return z||!1}function q(u,a,h,p){const _=new O(u,a,h,p);return function(S){return _.solve(S)}}const ee=q(.25,.1,.25,1);function Q(u,a,h){return Math.min(h,Math.max(a,u))}function ve(u,a,h){const p=h-a,_=((u-a)%p+p)%p+a;return _===a?h:_}function se(u,...a){for(const h of a)for(const p in h)u[p]=h[p];return u}let K=1;function J(u,a,h){const p={};for(const _ in u)p[_]=a.call(h||this,u[_],_,u);return p}function W(u,a,h){const p={};for(const _ in u)a.call(h||this,u[_],_,u)&&(p[_]=u[_]);return p}function te(u){return Array.isArray(u)?u.map(te):typeof u=="object"&&u?J(u,te):u}const j={};function re(u){j[u]||(typeof console<"u"&&console.warn(u),j[u]=!0)}function Te(u,a,h){return(h.y-u.y)*(a.x-u.x)>(a.y-u.y)*(h.x-u.x)}function ye(u){let a=0;for(let h,p,_=0,S=u.length,E=S-1;_<S;E=_++)h=u[_],p=u[E],a+=(p.x-h.x)*(h.y+p.y);return a}function Ve(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Ue=null;function Qe(u){return typeof ImageBitmap<"u"&&u instanceof ImageBitmap}const It="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function vt(u,a,h,p,_){return m(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const S=new VideoFrame(u,{timestamp:0});try{const E=S==null?void 0:S.format;if(!E||!E.startsWith("BGR")&&!E.startsWith("RGB"))throw new Error(`Unrecognized format ${E}`);const M=E.startsWith("BGR"),L=new Uint8ClampedArray(p*_*4);if(yield S.copyTo(L,function($,V,Y,ie,ce){const de=4*Math.max(-V,0),be=(Math.max(0,Y)-Y)*ie*4+de,Pe=4*ie,Re=Math.max(0,V),Je=Math.max(0,Y);return{rect:{x:Re,y:Je,width:Math.min($.width,V+ie)-Re,height:Math.min($.height,Y+ce)-Je},layout:[{offset:be,stride:Pe}]}}(u,a,h,p,_)),M)for(let $=0;$<L.length;$+=4){const V=L[$];L[$]=L[$+2],L[$+2]=V}return L}finally{S.close()}})}let it,Ge,ot,Ct;const wt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(u){const a=requestAnimationFrame(u);return{cancel:()=>cancelAnimationFrame(a)}},getImageData(u,a=0){return this.getImageCanvasContext(u).getImageData(-a,-a,u.width+2*a,u.height+2*a)},getImageCanvasContext(u){const a=window.document.createElement("canvas"),h=a.getContext("2d",{willReadFrequently:!0});if(!h)throw new Error("failed to create canvas 2d context");return a.width=u.width,a.height=u.height,h.drawImage(u,0,0,u.width,u.height),h},resolveURL:u=>(ot||(ot=document.createElement("a")),ot.href=u,ot.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Ct==null&&(Ct=matchMedia("(prefers-reduced-motion: reduce)")),Ct.matches)}},Xe={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Dt extends Error{constructor(a,h,p,_){super(`AJAXError: ${h} (${a}): ${p}`),this.status=a,this.statusText=h,this.url=p,this.body=_}}const Tt=Ve()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Nt=u=>Xe.REGISTERED_PROTOCOLS[u.substring(0,u.indexOf("://"))];function dn(u,a){const h=new AbortController,p=new Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,cache:u.cache,referrer:Tt(),signal:h.signal});let _=!1,S=!1;return u.type==="json"&&p.headers.set("Accept","application/json"),S||fetch(p).then(E=>E.ok?(M=>{(u.type==="arrayBuffer"||u.type==="image"?M.arrayBuffer():u.type==="json"?M.json():M.text()).then(L=>{S||(_=!0,a(null,L,M.headers.get("Cache-Control"),M.headers.get("Expires")))}).catch(L=>{S||a(new Error(L.message))})})(E):E.blob().then(M=>a(new Dt(E.status,E.statusText,u.url,M)))).catch(E=>{E.code!==20&&a(new Error(E.message))}),{cancel:()=>{S=!0,_||h.abort()}}}const Sn=function(u,a){if(/:\/\//.test(u.url)&&!/^https?:|^file:/.test(u.url)){if(Ve()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",u,a);if(!Ve())return(Nt(u.url)||dn)(u,a)}if(!(/^file:/.test(h=u.url)||/^file:/.test(Tt())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return dn(u,a);if(Ve()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",u,a,void 0,!0)}var h;return function(p,_){const S=new XMLHttpRequest;S.open(p.method||"GET",p.url,!0),p.type!=="arrayBuffer"&&p.type!=="image"||(S.responseType="arraybuffer");for(const E in p.headers)S.setRequestHeader(E,p.headers[E]);return p.type==="json"&&(S.responseType="text",S.setRequestHeader("Accept","application/json")),S.withCredentials=p.credentials==="include",S.onerror=()=>{_(new Error(S.statusText))},S.onload=()=>{if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let E=S.response;if(p.type==="json")try{E=JSON.parse(S.response)}catch(M){return _(M)}_(null,E,S.getResponseHeader("Cache-Control"),S.getResponseHeader("Expires"))}else{const E=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});_(new Dt(S.status,S.statusText,p.url,E))}},S.send(p.body),{cancel:()=>S.abort()}}(u,a)},me=function(u,a){return Sn(se(u,{type:"arrayBuffer"}),a)};function Ie(u){if(!u||u.indexOf("://")<=0||u.indexOf("data:image/")===0||u.indexOf("blob:")===0)return!0;const a=new URL(u),h=window.location;return a.protocol===h.protocol&&a.host===h.host}function at(u,a,h){h[u]&&h[u].indexOf(a)!==-1||(h[u]=h[u]||[],h[u].push(a))}function Z(u,a,h){if(h&&h[u]){const p=h[u].indexOf(a);p!==-1&&h[u].splice(p,1)}}class he{constructor(a,h={}){se(this,h),this.type=a}}class $e extends he{constructor(a,h={}){super("error",se({error:a},h))}}class et{on(a,h){return this._listeners=this._listeners||{},at(a,h,this._listeners),this}off(a,h){return Z(a,h,this._listeners),Z(a,h,this._oneTimeListeners),this}once(a,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},at(a,h,this._oneTimeListeners),this):new Promise(p=>this.once(a,p))}fire(a,h){typeof a=="string"&&(a=new he(a,h||{}));const p=a.type;if(this.listens(p)){a.target=this;const _=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const M of _)M.call(this,a);const S=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const M of S)Z(p,M,this._oneTimeListeners),M.call(this,a);const E=this._eventedParent;E&&(se(a,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),E.fire(a))}else a instanceof $e&&console.error(a.error);return this}listens(a){return this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a)}setEventedParent(a,h){return this._eventedParent=a,this._eventedParentData=h,this}}var Se={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const mt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function gt(u,a){const h={};for(const p in u)p!=="ref"&&(h[p]=u[p]);return mt.forEach(p=>{p in a&&(h[p]=a[p])}),h}function At(u,a){if(Array.isArray(u)){if(!Array.isArray(a)||u.length!==a.length)return!1;for(let h=0;h<u.length;h++)if(!At(u[h],a[h]))return!1;return!0}if(typeof u=="object"&&u!==null&&a!==null){if(typeof a!="object"||Object.keys(u).length!==Object.keys(a).length)return!1;for(const h in u)if(!At(u[h],a[h]))return!1;return!0}return u===a}const Ft={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Kt(u,a,h){h.push({command:Ft.addSource,args:[u,a[u]]})}function an(u,a,h){a.push({command:Ft.removeSource,args:[u]}),h[u]=!0}function Pn(u,a,h,p){an(u,h,p),Kt(u,a,h)}function jn(u,a,h){let p;for(p in u[h])if(Object.prototype.hasOwnProperty.call(u[h],p)&&p!=="data"&&!At(u[h][p],a[h][p]))return!1;for(p in a[h])if(Object.prototype.hasOwnProperty.call(a[h],p)&&p!=="data"&&!At(u[h][p],a[h][p]))return!1;return!0}function tt(u,a,h,p,_,S){let E;for(E in a=a||{},u=u||{})Object.prototype.hasOwnProperty.call(u,E)&&(At(u[E],a[E])||h.push({command:S,args:[p,E,a[E],_]}));for(E in a)Object.prototype.hasOwnProperty.call(a,E)&&!Object.prototype.hasOwnProperty.call(u,E)&&(At(u[E],a[E])||h.push({command:S,args:[p,E,a[E],_]}))}function nt(u){return u.id}function ut(u,a){return u[a.id]=a,u}class qe{constructor(a,h,p,_){this.message=(a?`${a}: `:"")+p,_&&(this.identifier=_),h!=null&&h.__line__&&(this.line=h.__line__)}}function Qt(u,...a){for(const h of a)for(const p in h)u[p]=h[p];return u}class Zt extends Error{constructor(a,h){super(h),this.message=h,this.key=a}}class Cn{constructor(a,h=[]){this.parent=a,this.bindings={};for(const[p,_]of h)this.bindings[p]=_}concat(a){return new Cn(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}const xn={kind:"null"},Mt={kind:"number"},Ht={kind:"string"},_t={kind:"boolean"},cn={kind:"color"},zn={kind:"object"},Vt={kind:"value"},li={kind:"collator"},Ee={kind:"formatted"},ne={kind:"padding"},ae={kind:"resolvedImage"},pe={kind:"variableAnchorOffsetCollection"};function Ae(u,a){return{kind:"array",itemType:u,N:a}}function ke(u){if(u.kind==="array"){const a=ke(u.itemType);return typeof u.N=="number"?`array<${a}, ${u.N}>`:u.itemType.kind==="value"?"array":`array<${a}>`}return u.kind}const Ke=[xn,Mt,Ht,_t,cn,Ee,zn,Ae(Vt),ne,ae,pe];function Be(u,a){if(a.kind==="error")return null;if(u.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!Be(u.itemType,a.itemType))&&(typeof u.N!="number"||u.N===a.N))return null}else{if(u.kind===a.kind)return null;if(u.kind==="value"){for(const h of Ke)if(!Be(h,a))return null}}return`Expected ${ke(u)} but found ${ke(a)} instead.`}function Oe(u,a){return a.some(h=>h.kind===u.kind)}function He(u,a){return a.some(h=>h==="null"?u===null:h==="array"?Array.isArray(u):h==="object"?u&&!Array.isArray(u)&&typeof u=="object":h===typeof u)}function yt(u,a){return u.kind==="array"&&a.kind==="array"?u.itemType.kind===a.itemType.kind&&typeof u.N=="number":u.kind===a.kind}const Et=.96422,St=.82521,yn=4/29,In=6/29,nn=3*In*In,bn=In*In*In,Rn=Math.PI/180,Wt=180/Math.PI;function We(u){return(u%=360)<0&&(u+=360),u}function kt([u,a,h,p]){let _,S;const E=Ne((.2225045*(u=ft(u))+.7168786*(a=ft(a))+.0606169*(h=ft(h)))/1);u===a&&a===h?_=S=E:(_=Ne((.4360747*u+.3850649*a+.1430804*h)/Et),S=Ne((.0139322*u+.0971045*a+.7141733*h)/St));const M=116*E-16;return[M<0?0:M,500*(_-E),200*(E-S),p]}function ft(u){return u<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function Ne(u){return u>bn?Math.pow(u,1/3):u/nn+yn}function bt([u,a,h,p]){let _=(u+16)/116,S=isNaN(a)?_:_+a/500,E=isNaN(h)?_:_-h/200;return _=1*Tn(_),S=Et*Tn(S),E=St*Tn(E),[zt(3.1338561*S-1.6168667*_-.4906146*E),zt(-.9787684*S+1.9161415*_+.033454*E),zt(.0719453*S-.2289914*_+1.4052427*E),p]}function zt(u){return(u=u<=.00304?12.92*u:1.055*Math.pow(u,1/2.4)-.055)<0?0:u>1?1:u}function Tn(u){return u>In?u*u*u:nn*(u-yn)}function ci(u){return parseInt(u.padEnd(2,u),16)/255}function Fi(u,a){return Qn(a?u/100:u,0,1)}function Qn(u,a,h){return Math.min(Math.max(a,u),h)}function ns(u){return!u.some(Number.isNaN)}const Gi={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class hi{constructor(a,h,p,_=1,S=!0){this.r=a,this.g=h,this.b=p,this.a=_,S||(this.r*=_,this.g*=_,this.b*=_,_||this.overwriteGetter("rgb",[a,h,p,_]))}static parse(a){if(a instanceof hi)return a;if(typeof a!="string")return;const h=function(p){if((p=p.toLowerCase().trim())==="transparent")return[0,0,0,0];const _=Gi[p];if(_){const[E,M,L]=_;return[E/255,M/255,L/255,1]}if(p.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(p)){const E=p.length<6?1:2;let M=1;return[ci(p.slice(M,M+=E)),ci(p.slice(M,M+=E)),ci(p.slice(M,M+=E)),ci(p.slice(M,M+E)||"ff")]}if(p.startsWith("rgb")){const E=p.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(E){const[M,L,$,V,Y,ie,ce,de,be,Pe,Re,Je]=E,je=[V||" ",ce||" ",Pe].join("");if(je==="  "||je==="  /"||je===",,"||je===",,,"){const rt=[$,ie,be].join(""),dt=rt==="%%%"?100:rt===""?255:0;if(dt){const Lt=[Qn(+L/dt,0,1),Qn(+Y/dt,0,1),Qn(+de/dt,0,1),Re?Fi(+Re,Je):1];if(ns(Lt))return Lt}}return}}const S=p.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(S){const[E,M,L,$,V,Y,ie,ce,de]=S,be=[L||" ",V||" ",ie].join("");if(be==="  "||be==="  /"||be===",,"||be===",,,"){const Pe=[+M,Qn(+$,0,100),Qn(+Y,0,100),ce?Fi(+ce,de):1];if(ns(Pe))return function([Re,Je,je,rt]){function dt(Lt){const sn=(Lt+Re/30)%12,gn=Je*Math.min(je,1-je);return je-gn*Math.max(-1,Math.min(sn-3,9-sn,1))}return Re=We(Re),Je/=100,je/=100,[dt(0),dt(8),dt(4),rt]}(Pe)}}}(a);return h?new hi(...h,!1):void 0}get rgb(){const{r:a,g:h,b:p,a:_}=this,S=_||1/0;return this.overwriteGetter("rgb",[a/S,h/S,p/S,_])}get hcl(){return this.overwriteGetter("hcl",function(a){const[h,p,_,S]=kt(a),E=Math.sqrt(p*p+_*_);return[Math.round(1e4*E)?We(Math.atan2(_,p)*Wt):NaN,E,h,S]}(this.rgb))}get lab(){return this.overwriteGetter("lab",kt(this.rgb))}overwriteGetter(a,h){return Object.defineProperty(this,a,{value:h}),h}toString(){const[a,h,p,_]=this.rgb;return`rgba(${[a,h,p].map(S=>Math.round(255*S)).join(",")},${_})`}}hi.black=new hi(0,0,0,1),hi.white=new hi(1,1,1,1),hi.transparent=new hi(0,0,0,0),hi.red=new hi(1,0,0,1);class zl{constructor(a,h,p){this.sensitivity=a?h?"variant":"case":h?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,h){return this.collator.compare(a,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Hc{constructor(a,h,p,_,S){this.text=a,this.image=h,this.scale=p,this.fontStack=_,this.textColor=S}}class Nr{constructor(a){this.sections=a}static fromString(a){return new Nr([new Hc(a,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(a=>a.text.length!==0||a.image&&a.image.name.length!==0)}static factory(a){return a instanceof Nr?a:Nr.fromString(a)}toString(){return this.sections.length===0?"":this.sections.map(a=>a.text).join("")}}class _s{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof _s)return a;if(typeof a=="number")return new _s([a,a,a,a]);if(Array.isArray(a)&&!(a.length<1||a.length>4)){for(const h of a)if(typeof h!="number")return;switch(a.length){case 1:a=[a[0],a[0],a[0],a[0]];break;case 2:a=[a[0],a[1],a[0],a[1]];break;case 3:a=[a[0],a[1],a[2],a[1]]}return new _s(a)}}toString(){return JSON.stringify(this.values)}}const Ey=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Ns{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof Ns)return a;if(Array.isArray(a)&&!(a.length<1)&&a.length%2==0){for(let h=0;h<a.length;h+=2){const p=a[h],_=a[h+1];if(typeof p!="string"||!Ey.has(p)||!Array.isArray(_)||_.length!==2||typeof _[0]!="number"||typeof _[1]!="number")return}return new Ns(a)}}toString(){return JSON.stringify(this.values)}}class Dr{constructor(a){this.name=a.name,this.available=a.available}toString(){return this.name}static fromString(a){return a?new Dr({name:a,available:!1}):null}}function rd(u,a,h,p){return typeof u=="number"&&u>=0&&u<=255&&typeof a=="number"&&a>=0&&a<=255&&typeof h=="number"&&h>=0&&h<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:`Invalid rgba value [${[u,a,h,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof p=="number"?[u,a,h,p]:[u,a,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Nl(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof hi||u instanceof zl||u instanceof Nr||u instanceof _s||u instanceof Ns||u instanceof Dr)return!0;if(Array.isArray(u)){for(const a of u)if(!Nl(a))return!1;return!0}if(typeof u=="object"){for(const a in u)if(!Nl(u[a]))return!1;return!0}return!1}function Ni(u){if(u===null)return xn;if(typeof u=="string")return Ht;if(typeof u=="boolean")return _t;if(typeof u=="number")return Mt;if(u instanceof hi)return cn;if(u instanceof zl)return li;if(u instanceof Nr)return Ee;if(u instanceof _s)return ne;if(u instanceof Ns)return pe;if(u instanceof Dr)return ae;if(Array.isArray(u)){const a=u.length;let h;for(const p of u){const _=Ni(p);if(h){if(h===_)continue;h=Vt;break}h=_}return Ae(h||Vt,a)}return zn}function pi(u){const a=typeof u;return u===null?"":a==="string"||a==="number"||a==="boolean"?String(u):u instanceof hi||u instanceof Nr||u instanceof _s||u instanceof Ns||u instanceof Dr?u.toString():JSON.stringify(u)}class Qo{constructor(a,h){this.type=a,this.value=h}static parse(a,h){if(a.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!Nl(a[1]))return h.error("invalid value");const p=a[1];let _=Ni(p);const S=h.expectedType;return _.kind!=="array"||_.N!==0||!S||S.kind!=="array"||typeof S.N=="number"&&S.N!==0||(_=S),new Qo(_,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Wi{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}}const sd={string:Ht,number:Mt,boolean:_t,object:zn};class Bs{constructor(a,h){this.type=a,this.args=h}static parse(a,h){if(a.length<2)return h.error("Expected at least one argument.");let p,_=1;const S=a[0];if(S==="array"){let M,L;if(a.length>2){const $=a[1];if(typeof $!="string"||!($ in sd)||$==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);M=sd[$],_++}else M=Vt;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return h.error('The length argument to "array" must be a positive integer literal',2);L=a[2],_++}p=Ae(M,L)}else{if(!sd[S])throw new Error(`Types doesn't contain name = ${S}`);p=sd[S]}const E=[];for(;_<a.length;_++){const M=h.parse(a[_],_,Vt);if(!M)return null;E.push(M)}return new Bs(p,E)}evaluate(a){for(let h=0;h<this.args.length;h++){const p=this.args[h].evaluate(a);if(!Be(this.type,Ni(p)))return p;if(h===this.args.length-1)throw new Wi(`Expected value to be of type ${ke(this.type)}, but found ${ke(Ni(p))} instead.`)}throw new Error}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}const Gh={"to-boolean":_t,"to-color":cn,"to-number":Mt,"to-string":Ht};class wo{constructor(a,h){this.type=a,this.args=h}static parse(a,h){if(a.length<2)return h.error("Expected at least one argument.");const p=a[0];if(!Gh[p])throw new Error(`Can't parse ${p} as it is not part of the known types`);if((p==="to-boolean"||p==="to-string")&&a.length!==2)return h.error("Expected one argument.");const _=Gh[p],S=[];for(let E=1;E<a.length;E++){const M=h.parse(a[E],E,Vt);if(!M)return null;S.push(M)}return new wo(_,S)}evaluate(a){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(a);case"color":{let h,p;for(const _ of this.args){if(h=_.evaluate(a),p=null,h instanceof hi)return h;if(typeof h=="string"){const S=a.parseColor(h);if(S)return S}else if(Array.isArray(h)&&(p=h.length<3||h.length>4?`Invalid rbga value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:rd(h[0],h[1],h[2],h[3]),!p))return new hi(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new Wi(p||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"padding":{let h;for(const p of this.args){h=p.evaluate(a);const _=_s.parse(h);if(_)return _}throw new Wi(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"variableAnchorOffsetCollection":{let h;for(const p of this.args){h=p.evaluate(a);const _=Ns.parse(h);if(_)return _}throw new Wi(`Could not parse variableAnchorOffsetCollection from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"number":{let h=null;for(const p of this.args){if(h=p.evaluate(a),h===null)return 0;const _=Number(h);if(!isNaN(_))return _}throw new Wi(`Could not convert ${JSON.stringify(h)} to number.`)}case"formatted":return Nr.fromString(pi(this.args[0].evaluate(a)));case"resolvedImage":return Dr.fromString(pi(this.args[0].evaluate(a)));default:return pi(this.args[0].evaluate(a))}}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}const Bm=["Unknown","Point","LineString","Polygon"];class Wh{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Bm[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(a){let h=this._parseColorCache[a];return h||(h=this._parseColorCache[a]=hi.parse(a)),h}}class ad{constructor(a,h,p=[],_,S=new Cn,E=[]){this.registry=a,this.path=p,this.key=p.map(M=>`[${M}]`).join(""),this.scope=S,this.errors=E,this.expectedType=_,this._isConstant=h}parse(a,h,p,_,S={}){return h?this.concat(h,p,_)._parse(a,S):this._parse(a,S)}_parse(a,h){function p(_,S,E){return E==="assert"?new Bs(S,[_]):E==="coerce"?new wo(S,[_]):_}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const _=a[0];if(typeof _!="string")return this.error(`Expression name must be a string, but found ${typeof _} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const S=this.registry[_];if(S){let E=S.parse(a,this);if(!E)return null;if(this.expectedType){const M=this.expectedType,L=E.type;if(M.kind!=="string"&&M.kind!=="number"&&M.kind!=="boolean"&&M.kind!=="object"&&M.kind!=="array"||L.kind!=="value")if(M.kind!=="color"&&M.kind!=="formatted"&&M.kind!=="resolvedImage"||L.kind!=="value"&&L.kind!=="string")if(M.kind!=="padding"||L.kind!=="value"&&L.kind!=="number"&&L.kind!=="array")if(M.kind!=="variableAnchorOffsetCollection"||L.kind!=="value"&&L.kind!=="array"){if(this.checkSubtype(M,L))return null}else E=p(E,M,h.typeAnnotation||"coerce");else E=p(E,M,h.typeAnnotation||"coerce");else E=p(E,M,h.typeAnnotation||"coerce");else E=p(E,M,h.typeAnnotation||"assert")}if(!(E instanceof Qo)&&E.type.kind!=="resolvedImage"&&this._isConstant(E)){const M=new Wh;try{E=new Qo(E.type,E.evaluate(M))}catch(L){return this.error(L.message),null}}return E}return this.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,h,p){const _=typeof a=="number"?this.path.concat(a):this.path,S=p?this.scope.concat(p):this.scope;return new ad(this.registry,this._isConstant,_,h||null,S,this.errors)}error(a,...h){const p=`${this.key}${h.map(_=>`[${_}]`).join("")}`;this.errors.push(new Zt(p,a))}checkSubtype(a,h){const p=Be(a,h);return p&&this.error(p),p}}class od{constructor(a,h,p){this.type=li,this.locale=p,this.caseSensitive=a,this.diacriticSensitive=h}static parse(a,h){if(a.length!==2)return h.error("Expected one argument.");const p=a[1];if(typeof p!="object"||Array.isArray(p))return h.error("Collator options argument must be an object.");const _=h.parse(p["case-sensitive"]!==void 0&&p["case-sensitive"],1,_t);if(!_)return null;const S=h.parse(p["diacritic-sensitive"]!==void 0&&p["diacritic-sensitive"],1,_t);if(!S)return null;let E=null;return p.locale&&(E=h.parse(p.locale,1,Ht),!E)?null:new od(_,S,E)}evaluate(a){return new zl(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}}const So=8192;function qh(u,a){u[0]=Math.min(u[0],a[0]),u[1]=Math.min(u[1],a[1]),u[2]=Math.max(u[2],a[0]),u[3]=Math.max(u[3],a[1])}function Gc(u,a){return!(u[0]<=a[0]||u[2]>=a[2]||u[1]<=a[1]||u[3]>=a[3])}function jm(u,a){const h=(180+u[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,_=Math.pow(2,a.z);return[Math.round(h*_*So),Math.round(p*_*So)]}function Cy(u,a,h){const p=u[0]-a[0],_=u[1]-a[1],S=u[0]-h[0],E=u[1]-h[1];return p*E-S*_==0&&p*S<=0&&_*E<=0}function Zh(u,a){let h=!1;for(let E=0,M=a.length;E<M;E++){const L=a[E];for(let $=0,V=L.length;$<V-1;$++){if(Cy(u,L[$],L[$+1]))return!1;(_=L[$])[1]>(p=u)[1]!=(S=L[$+1])[1]>p[1]&&p[0]<(S[0]-_[0])*(p[1]-_[1])/(S[1]-_[1])+_[0]&&(h=!h)}}var p,_,S;return h}function Kh(u,a){for(let h=0;h<a.length;h++)if(Zh(u,a[h]))return!0;return!1}function Vm(u,a,h,p){const _=p[0]-h[0],S=p[1]-h[1],E=(u[0]-h[0])*S-_*(u[1]-h[1]),M=(a[0]-h[0])*S-_*(a[1]-h[1]);return E>0&&M<0||E<0&&M>0}function Iy(u,a,h){for(const $ of h)for(let V=0;V<$.length-1;++V)if((M=[(E=$[V+1])[0]-(S=$[V])[0],E[1]-S[1]])[0]*(L=[(_=a)[0]-(p=u)[0],_[1]-p[1]])[1]-M[1]*L[0]!=0&&Vm(p,_,S,E)&&Vm(S,E,p,_))return!0;var p,_,S,E,M,L;return!1}function Um(u,a){for(let h=0;h<u.length;++h)if(!Zh(u[h],a))return!1;for(let h=0;h<u.length-1;++h)if(Iy(u[h],u[h+1],a))return!1;return!0}function Hm(u,a){for(let h=0;h<a.length;h++)if(Um(u,a[h]))return!0;return!1}function ld(u,a,h){const p=[];for(let _=0;_<u.length;_++){const S=[];for(let E=0;E<u[_].length;E++){const M=jm(u[_][E],h);qh(a,M),S.push(M)}p.push(S)}return p}function Gm(u,a,h){const p=[];for(let _=0;_<u.length;_++){const S=ld(u[_],a,h);p.push(S)}return p}function Wm(u,a,h,p){if(u[0]<h[0]||u[0]>h[2]){const _=.5*p;let S=u[0]-h[0]>_?-p:h[0]-u[0]>_?p:0;S===0&&(S=u[0]-h[2]>_?-p:h[2]-u[0]>_?p:0),u[0]+=S}qh(a,u)}function Xh(u,a,h,p){const _=Math.pow(2,p.z)*So,S=[p.x*So,p.y*So],E=[];for(const M of u)for(const L of M){const $=[L.x+S[0],L.y+S[1]];Wm($,a,h,_),E.push($)}return E}function Yh(u,a,h,p){const _=Math.pow(2,p.z)*So,S=[p.x*So,p.y*So],E=[];for(const L of u){const $=[];for(const V of L){const Y=[V.x+S[0],V.y+S[1]];qh(a,Y),$.push(Y)}E.push($)}if(a[2]-a[0]<=_/2){(M=a)[0]=M[1]=1/0,M[2]=M[3]=-1/0;for(const L of E)for(const $ of L)Wm($,a,h,_)}var M;return E}class el{constructor(a,h){this.type=_t,this.geojson=a,this.geometries=h}static parse(a,h){if(a.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(Nl(a[1])){const p=a[1];if(p.type==="FeatureCollection")for(let _=0;_<p.features.length;++_){const S=p.features[_].geometry.type;if(S==="Polygon"||S==="MultiPolygon")return new el(p,p.features[_].geometry)}else if(p.type==="Feature"){const _=p.geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new el(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new el(p,p)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return function(h,p){const _=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],E=h.canonicalID();if(p.type==="Polygon"){const M=ld(p.coordinates,S,E),L=Xh(h.geometry(),_,S,E);if(!Gc(_,S))return!1;for(const $ of L)if(!Zh($,M))return!1}if(p.type==="MultiPolygon"){const M=Gm(p.coordinates,S,E),L=Xh(h.geometry(),_,S,E);if(!Gc(_,S))return!1;for(const $ of L)if(!Kh($,M))return!1}return!0}(a,this.geometries);if(a.geometryType()==="LineString")return function(h,p){const _=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],E=h.canonicalID();if(p.type==="Polygon"){const M=ld(p.coordinates,S,E),L=Yh(h.geometry(),_,S,E);if(!Gc(_,S))return!1;for(const $ of L)if(!Um($,M))return!1}if(p.type==="MultiPolygon"){const M=Gm(p.coordinates,S,E),L=Yh(h.geometry(),_,S,E);if(!Gc(_,S))return!1;for(const $ of L)if(!Hm($,M))return!1}return!0}(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class cd{constructor(a,h){this.type=h.type,this.name=a,this.boundExpression=h}static parse(a,h){if(a.length!==2||typeof a[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const p=a[1];return h.scope.has(p)?new cd(p,h.scope.get(p)):h.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}}class js{constructor(a,h,p,_){this.name=a,this.type=h,this._evaluate=p,this.args=_}evaluate(a){return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}static parse(a,h){const p=a[0],_=js.definitions[p];if(!_)return h.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const S=Array.isArray(_)?_[0]:_.type,E=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,M=E.filter(([$])=>!Array.isArray($)||$.length===a.length-1);let L=null;for(const[$,V]of M){L=new ad(h.registry,ud,h.path,null,h.scope);const Y=[];let ie=!1;for(let ce=1;ce<a.length;ce++){const de=a[ce],be=Array.isArray($)?$[ce-1]:$.type,Pe=L.parse(de,1+Y.length,be);if(!Pe){ie=!0;break}Y.push(Pe)}if(!ie)if(Array.isArray($)&&$.length!==Y.length)L.error(`Expected ${$.length} arguments, but found ${Y.length} instead.`);else{for(let ce=0;ce<Y.length;ce++){const de=Array.isArray($)?$[ce]:$.type,be=Y[ce];L.concat(ce+1).checkSubtype(de,be.type)}if(L.errors.length===0)return new js(p,S,V,Y)}}if(M.length===1)h.errors.push(...L.errors);else{const $=(M.length?M:E).map(([Y])=>{return ie=Y,Array.isArray(ie)?`(${ie.map(ke).join(", ")})`:`(${ke(ie.type)}...)`;var ie}).join(" | "),V=[];for(let Y=1;Y<a.length;Y++){const ie=h.parse(a[Y],1+V.length);if(!ie)return null;V.push(ke(ie.type))}h.error(`Expected arguments of type ${$}, but found (${V.join(", ")}) instead.`)}return null}static register(a,h){js.definitions=h;for(const p in h)a[p]=js}}function ud(u){if(u instanceof cd)return ud(u.boundExpression);if(u instanceof js&&u.name==="error"||u instanceof od||u instanceof el)return!1;const a=u instanceof wo||u instanceof Bs;let h=!0;return u.eachChild(p=>{h=a?h&&ud(p):h&&p instanceof Qo}),!!h&&dd(u)&&hd(u,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function dd(u){if(u instanceof js&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof el)return!1;let a=!0;return u.eachChild(h=>{a&&!dd(h)&&(a=!1)}),a}function Wc(u){if(u instanceof js&&u.name==="feature-state")return!1;let a=!0;return u.eachChild(h=>{a&&!Wc(h)&&(a=!1)}),a}function hd(u,a){if(u instanceof js&&a.indexOf(u.name)>=0)return!1;let h=!0;return u.eachChild(p=>{h&&!hd(p,a)&&(h=!1)}),h}function Bl(u,a){const h=u.length-1;let p,_,S=0,E=h,M=0;for(;S<=E;)if(M=Math.floor((S+E)/2),p=u[M],_=u[M+1],p<=a){if(M===h||a<_)return M;S=M+1}else{if(!(p>a))throw new Wi("Input is not a number.");E=M-1}return 0}class To{constructor(a,h,p){this.type=a,this.input=h,this.labels=[],this.outputs=[];for(const[_,S]of p)this.labels.push(_),this.outputs.push(S)}static parse(a,h){if(a.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return h.error("Expected an even number of arguments.");const p=h.parse(a[1],1,Mt);if(!p)return null;const _=[];let S=null;h.expectedType&&h.expectedType.kind!=="value"&&(S=h.expectedType);for(let E=1;E<a.length;E+=2){const M=E===1?-1/0:a[E],L=a[E+1],$=E,V=E+1;if(typeof M!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(_.length&&_[_.length-1][0]>=M)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',$);const Y=h.parse(L,V,S);if(!Y)return null;S=S||Y.type,_.push([M,Y])}return new To(S,p,_)}evaluate(a){const h=this.labels,p=this.outputs;if(h.length===1)return p[0].evaluate(a);const _=this.input.evaluate(a);if(_<=h[0])return p[0].evaluate(a);const S=h.length;return _>=h[S-1]?p[S-1].evaluate(a):p[Bl(h,_)].evaluate(a)}eachChild(a){a(this.input);for(const h of this.outputs)a(h)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function ti(u,a,h){return u+h*(a-u)}function fd(u,a,h){return u.map((p,_)=>ti(p,a[_],h))}const ys={number:ti,color:function(u,a,h,p="rgb"){switch(p){case"rgb":{const[_,S,E,M]=fd(u.rgb,a.rgb,h);return new hi(_,S,E,M,!1)}case"hcl":{const[_,S,E,M]=u.hcl,[L,$,V,Y]=a.hcl;let ie,ce;if(isNaN(_)||isNaN(L))isNaN(_)?isNaN(L)?ie=NaN:(ie=L,E!==1&&E!==0||(ce=$)):(ie=_,V!==1&&V!==0||(ce=S));else{let Je=L-_;L>_&&Je>180?Je-=360:L<_&&_-L>180&&(Je+=360),ie=_+h*Je}const[de,be,Pe,Re]=function([Je,je,rt,dt]){return Je=isNaN(Je)?0:Je*Rn,bt([rt,Math.cos(Je)*je,Math.sin(Je)*je,dt])}([ie,ce??ti(S,$,h),ti(E,V,h),ti(M,Y,h)]);return new hi(de,be,Pe,Re,!1)}case"lab":{const[_,S,E,M]=bt(fd(u.lab,a.lab,h));return new hi(_,S,E,M,!1)}}},array:fd,padding:function(u,a,h){return new _s(fd(u.values,a.values,h))},variableAnchorOffsetCollection:function(u,a,h){const p=u.values,_=a.values;if(p.length!==_.length)throw new Wi(`Cannot interpolate values of different length. from: ${u.toString()}, to: ${a.toString()}`);const S=[];for(let E=0;E<p.length;E+=2){if(p[E]!==_[E])throw new Wi(`Cannot interpolate values containing mismatched anchors. from[${E}]: ${p[E]}, to[${E}]: ${_[E]}`);S.push(p[E]);const[M,L]=p[E+1],[$,V]=_[E+1];S.push([ti(M,$,h),ti(L,V,h)])}return new Ns(S)}};class bs{constructor(a,h,p,_,S){this.type=a,this.operator=h,this.interpolation=p,this.input=_,this.labels=[],this.outputs=[];for(const[E,M]of S)this.labels.push(E),this.outputs.push(M)}static interpolationFactor(a,h,p,_){let S=0;if(a.name==="exponential")S=Jh(h,a.base,p,_);else if(a.name==="linear")S=Jh(h,1,p,_);else if(a.name==="cubic-bezier"){const E=a.controlPoints;S=new O(E[0],E[1],E[2],E[3]).solve(Jh(h,1,p,_))}return S}static parse(a,h){let[p,_,S,...E]=a;if(!Array.isArray(_)||_.length===0)return h.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){const $=_[1];if(typeof $!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:$}}else{if(_[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(_[0])}`,1,0);{const $=_.slice(1);if($.length!==4||$.some(V=>typeof V!="number"||V<0||V>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:$}}}if(a.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(S=h.parse(S,2,Mt),!S)return null;const M=[];let L=null;p==="interpolate-hcl"||p==="interpolate-lab"?L=cn:h.expectedType&&h.expectedType.kind!=="value"&&(L=h.expectedType);for(let $=0;$<E.length;$+=2){const V=E[$],Y=E[$+1],ie=$+3,ce=$+4;if(typeof V!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ie);if(M.length&&M[M.length-1][0]>=V)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ie);const de=h.parse(Y,ce,L);if(!de)return null;L=L||de.type,M.push([V,de])}return yt(L,Mt)||yt(L,cn)||yt(L,ne)||yt(L,pe)||yt(L,Ae(Mt))?new bs(L,p,_,S,M):h.error(`Type ${ke(L)} is not interpolatable.`)}evaluate(a){const h=this.labels,p=this.outputs;if(h.length===1)return p[0].evaluate(a);const _=this.input.evaluate(a);if(_<=h[0])return p[0].evaluate(a);const S=h.length;if(_>=h[S-1])return p[S-1].evaluate(a);const E=Bl(h,_),M=bs.interpolationFactor(this.interpolation,_,h[E],h[E+1]),L=p[E].evaluate(a),$=p[E+1].evaluate(a);switch(this.operator){case"interpolate":return ys[this.type.kind](L,$,M);case"interpolate-hcl":return ys.color(L,$,M,"hcl");case"interpolate-lab":return ys.color(L,$,M,"lab")}}eachChild(a){a(this.input);for(const h of this.outputs)a(h)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function Jh(u,a,h,p){const _=p-h,S=u-h;return _===0?0:a===1?S/_:(Math.pow(a,S)-1)/(Math.pow(a,_)-1)}class pd{constructor(a,h){this.type=a,this.args=h}static parse(a,h){if(a.length<2)return h.error("Expectected at least one argument.");let p=null;const _=h.expectedType;_&&_.kind!=="value"&&(p=_);const S=[];for(const M of a.slice(1)){const L=h.parse(M,1+S.length,p,void 0,{typeAnnotation:"omit"});if(!L)return null;p=p||L.type,S.push(L)}if(!p)throw new Error("No output type");const E=_&&S.some(M=>Be(_,M.type));return new pd(E?Vt:p,S)}evaluate(a){let h,p=null,_=0;for(const S of this.args)if(_++,p=S.evaluate(a),p&&p instanceof Dr&&!p.available&&(h||(h=p.name),p=null,_===this.args.length&&(p=h)),p!==null)break;return p}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}class md{constructor(a,h){this.type=h.type,this.bindings=[].concat(a),this.result=h}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const h of this.bindings)a(h[1]);a(this.result)}static parse(a,h){if(a.length<4)return h.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const p=[];for(let S=1;S<a.length-1;S+=2){const E=a[S];if(typeof E!="string")return h.error(`Expected string, but found ${typeof E} instead.`,S);if(/[^a-zA-Z0-9_]/.test(E))return h.error("Variable names must contain only alphanumeric characters or '_'.",S);const M=h.parse(a[S+1],S+1);if(!M)return null;p.push([E,M])}const _=h.parse(a[a.length-1],a.length-1,h.expectedType,p);return _?new md(p,_):null}outputDefined(){return this.result.outputDefined()}}class Qh{constructor(a,h,p){this.type=a,this.index=h,this.input=p}static parse(a,h){if(a.length!==3)return h.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const p=h.parse(a[1],1,Mt),_=h.parse(a[2],2,Ae(h.expectedType||Vt));return p&&_?new Qh(_.type.itemType,p,_):null}evaluate(a){const h=this.index.evaluate(a),p=this.input.evaluate(a);if(h<0)throw new Wi(`Array index out of bounds: ${h} < 0.`);if(h>=p.length)throw new Wi(`Array index out of bounds: ${h} > ${p.length-1}.`);if(h!==Math.floor(h))throw new Wi(`Array index must be an integer, but found ${h} instead.`);return p[h]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}}class ef{constructor(a,h){this.type=_t,this.needle=a,this.haystack=h}static parse(a,h){if(a.length!==3)return h.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const p=h.parse(a[1],1,Vt),_=h.parse(a[2],2,Vt);return p&&_?Oe(p.type,[_t,Ht,Mt,xn,Vt])?new ef(p,_):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${ke(p.type)} instead`):null}evaluate(a){const h=this.needle.evaluate(a),p=this.haystack.evaluate(a);if(!p)return!1;if(!He(h,["boolean","string","number","null"]))throw new Wi(`Expected first argument to be of type boolean, string, number or null, but found ${ke(Ni(h))} instead.`);if(!He(p,["string","array"]))throw new Wi(`Expected second argument to be of type array or string, but found ${ke(Ni(p))} instead.`);return p.indexOf(h)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}}class gd{constructor(a,h,p){this.type=Mt,this.needle=a,this.haystack=h,this.fromIndex=p}static parse(a,h){if(a.length<=2||a.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const p=h.parse(a[1],1,Vt),_=h.parse(a[2],2,Vt);if(!p||!_)return null;if(!Oe(p.type,[_t,Ht,Mt,xn,Vt]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${ke(p.type)} instead`);if(a.length===4){const S=h.parse(a[3],3,Mt);return S?new gd(p,_,S):null}return new gd(p,_)}evaluate(a){const h=this.needle.evaluate(a),p=this.haystack.evaluate(a);if(!He(h,["boolean","string","number","null"]))throw new Wi(`Expected first argument to be of type boolean, string, number or null, but found ${ke(Ni(h))} instead.`);if(!He(p,["string","array"]))throw new Wi(`Expected second argument to be of type array or string, but found ${ke(Ni(p))} instead.`);if(this.fromIndex){const _=this.fromIndex.evaluate(a);return p.indexOf(h,_)}return p.indexOf(h)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}}class tf{constructor(a,h,p,_,S,E){this.inputType=a,this.type=h,this.input=p,this.cases=_,this.outputs=S,this.otherwise=E}static parse(a,h){if(a.length<5)return h.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return h.error("Expected an even number of arguments.");let p,_;h.expectedType&&h.expectedType.kind!=="value"&&(_=h.expectedType);const S={},E=[];for(let $=2;$<a.length-1;$+=2){let V=a[$];const Y=a[$+1];Array.isArray(V)||(V=[V]);const ie=h.concat($);if(V.length===0)return ie.error("Expected at least one branch label.");for(const de of V){if(typeof de!="number"&&typeof de!="string")return ie.error("Branch labels must be numbers or strings.");if(typeof de=="number"&&Math.abs(de)>Number.MAX_SAFE_INTEGER)return ie.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof de=="number"&&Math.floor(de)!==de)return ie.error("Numeric branch labels must be integer values.");if(p){if(ie.checkSubtype(p,Ni(de)))return null}else p=Ni(de);if(S[String(de)]!==void 0)return ie.error("Branch labels must be unique.");S[String(de)]=E.length}const ce=h.parse(Y,$,_);if(!ce)return null;_=_||ce.type,E.push(ce)}const M=h.parse(a[1],1,Vt);if(!M)return null;const L=h.parse(a[a.length-1],a.length-1,_);return L?M.type.kind!=="value"&&h.concat(1).checkSubtype(p,M.type)?null:new tf(p,_,M,S,E,L):null}evaluate(a){const h=this.input.evaluate(a);return(Ni(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every(a=>a.outputDefined())&&this.otherwise.outputDefined()}}class nf{constructor(a,h,p){this.type=a,this.branches=h,this.otherwise=p}static parse(a,h){if(a.length<4)return h.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return h.error("Expected an odd number of arguments.");let p;h.expectedType&&h.expectedType.kind!=="value"&&(p=h.expectedType);const _=[];for(let E=1;E<a.length-1;E+=2){const M=h.parse(a[E],E,_t);if(!M)return null;const L=h.parse(a[E+1],E+1,p);if(!L)return null;_.push([M,L]),p=p||L.type}const S=h.parse(a[a.length-1],a.length-1,p);if(!S)return null;if(!p)throw new Error("Can't infer output type");return new nf(p,_,S)}evaluate(a){for(const[h,p]of this.branches)if(h.evaluate(a))return p.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[h,p]of this.branches)a(h),a(p);a(this.otherwise)}outputDefined(){return this.branches.every(([a,h])=>h.outputDefined())&&this.otherwise.outputDefined()}}class vd{constructor(a,h,p,_){this.type=a,this.input=h,this.beginIndex=p,this.endIndex=_}static parse(a,h){if(a.length<=2||a.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const p=h.parse(a[1],1,Vt),_=h.parse(a[2],2,Mt);if(!p||!_)return null;if(!Oe(p.type,[Ae(Vt),Ht,Vt]))return h.error(`Expected first argument to be of type array or string, but found ${ke(p.type)} instead`);if(a.length===4){const S=h.parse(a[3],3,Mt);return S?new vd(p.type,p,_,S):null}return new vd(p.type,p,_)}evaluate(a){const h=this.input.evaluate(a),p=this.beginIndex.evaluate(a);if(!He(h,["string","array"]))throw new Wi(`Expected first argument to be of type array or string, but found ${ke(Ni(h))} instead.`);if(this.endIndex){const _=this.endIndex.evaluate(a);return h.slice(p,_)}return h.slice(p)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}}function qm(u,a){return u==="=="||u==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function Zm(u,a,h,p){return p.compare(a,h)===0}function jl(u,a,h){const p=u!=="=="&&u!=="!=";return class lP{constructor(S,E,M){this.type=_t,this.lhs=S,this.rhs=E,this.collator=M,this.hasUntypedArgument=S.type.kind==="value"||E.type.kind==="value"}static parse(S,E){if(S.length!==3&&S.length!==4)return E.error("Expected two or three arguments.");const M=S[0];let L=E.parse(S[1],1,Vt);if(!L)return null;if(!qm(M,L.type))return E.concat(1).error(`"${M}" comparisons are not supported for type '${ke(L.type)}'.`);let $=E.parse(S[2],2,Vt);if(!$)return null;if(!qm(M,$.type))return E.concat(2).error(`"${M}" comparisons are not supported for type '${ke($.type)}'.`);if(L.type.kind!==$.type.kind&&L.type.kind!=="value"&&$.type.kind!=="value")return E.error(`Cannot compare types '${ke(L.type)}' and '${ke($.type)}'.`);p&&(L.type.kind==="value"&&$.type.kind!=="value"?L=new Bs($.type,[L]):L.type.kind!=="value"&&$.type.kind==="value"&&($=new Bs(L.type,[$])));let V=null;if(S.length===4){if(L.type.kind!=="string"&&$.type.kind!=="string"&&L.type.kind!=="value"&&$.type.kind!=="value")return E.error("Cannot use collator to compare non-string types.");if(V=E.parse(S[3],3,li),!V)return null}return new lP(L,$,V)}evaluate(S){const E=this.lhs.evaluate(S),M=this.rhs.evaluate(S);if(p&&this.hasUntypedArgument){const L=Ni(E),$=Ni(M);if(L.kind!==$.kind||L.kind!=="string"&&L.kind!=="number")throw new Wi(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${L.kind}, ${$.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const L=Ni(E),$=Ni(M);if(L.kind!=="string"||$.kind!=="string")return a(S,E,M)}return this.collator?h(S,E,M,this.collator.evaluate(S)):a(S,E,M)}eachChild(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)}outputDefined(){return!0}}}const Ay=jl("==",function(u,a,h){return a===h},Zm),My=jl("!=",function(u,a,h){return a!==h},function(u,a,h,p){return!Zm(0,a,h,p)}),ky=jl("<",function(u,a,h){return a<h},function(u,a,h,p){return p.compare(a,h)<0}),Py=jl(">",function(u,a,h){return a>h},function(u,a,h,p){return p.compare(a,h)>0}),Dy=jl("<=",function(u,a,h){return a<=h},function(u,a,h,p){return p.compare(a,h)<=0}),Ly=jl(">=",function(u,a,h){return a>=h},function(u,a,h,p){return p.compare(a,h)>=0});class rf{constructor(a,h,p,_,S){this.type=Ht,this.number=a,this.locale=h,this.currency=p,this.minFractionDigits=_,this.maxFractionDigits=S}static parse(a,h){if(a.length!==3)return h.error("Expected two arguments.");const p=h.parse(a[1],1,Mt);if(!p)return null;const _=a[2];if(typeof _!="object"||Array.isArray(_))return h.error("NumberFormat options argument must be an object.");let S=null;if(_.locale&&(S=h.parse(_.locale,1,Ht),!S))return null;let E=null;if(_.currency&&(E=h.parse(_.currency,1,Ht),!E))return null;let M=null;if(_["min-fraction-digits"]&&(M=h.parse(_["min-fraction-digits"],1,Mt),!M))return null;let L=null;return _["max-fraction-digits"]&&(L=h.parse(_["max-fraction-digits"],1,Mt),!L)?null:new rf(p,S,E,M,L)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}}class _d{constructor(a){this.type=Ee,this.sections=a}static parse(a,h){if(a.length<2)return h.error("Expected at least one argument.");const p=a[1];if(!Array.isArray(p)&&typeof p=="object")return h.error("First argument must be an image or text section.");const _=[];let S=!1;for(let E=1;E<=a.length-1;++E){const M=a[E];if(S&&typeof M=="object"&&!Array.isArray(M)){S=!1;let L=null;if(M["font-scale"]&&(L=h.parse(M["font-scale"],1,Mt),!L))return null;let $=null;if(M["text-font"]&&($=h.parse(M["text-font"],1,Ae(Ht)),!$))return null;let V=null;if(M["text-color"]&&(V=h.parse(M["text-color"],1,cn),!V))return null;const Y=_[_.length-1];Y.scale=L,Y.font=$,Y.textColor=V}else{const L=h.parse(a[E],1,Vt);if(!L)return null;const $=L.type.kind;if($!=="string"&&$!=="value"&&$!=="null"&&$!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,_.push({content:L,scale:null,font:null,textColor:null})}}return new _d(_)}evaluate(a){return new Nr(this.sections.map(h=>{const p=h.content.evaluate(a);return Ni(p)===ae?new Hc("",p,null,null,null):new Hc(pi(p),null,h.scale?h.scale.evaluate(a):null,h.font?h.font.evaluate(a).join(","):null,h.textColor?h.textColor.evaluate(a):null)}))}eachChild(a){for(const h of this.sections)a(h.content),h.scale&&a(h.scale),h.font&&a(h.font),h.textColor&&a(h.textColor)}outputDefined(){return!1}}class sf{constructor(a){this.type=ae,this.input=a}static parse(a,h){if(a.length!==2)return h.error("Expected two arguments.");const p=h.parse(a[1],1,Ht);return p?new sf(p):h.error("No image name provided.")}evaluate(a){const h=this.input.evaluate(a),p=Dr.fromString(h);return p&&a.availableImages&&(p.available=a.availableImages.indexOf(h)>-1),p}eachChild(a){a(this.input)}outputDefined(){return!1}}class af{constructor(a){this.type=Mt,this.input=a}static parse(a,h){if(a.length!==2)return h.error(`Expected 1 argument, but found ${a.length-1} instead.`);const p=h.parse(a[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${ke(p.type)} instead.`):new af(p):null}evaluate(a){const h=this.input.evaluate(a);if(typeof h=="string"||Array.isArray(h))return h.length;throw new Wi(`Expected value to be of type string or array, but found ${ke(Ni(h))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}}const Vl={"==":Ay,"!=":My,">":Py,"<":ky,">=":Ly,"<=":Dy,array:Bs,at:Qh,boolean:Bs,case:nf,coalesce:pd,collator:od,format:_d,image:sf,in:ef,"index-of":gd,interpolate:bs,"interpolate-hcl":bs,"interpolate-lab":bs,length:af,let:md,literal:Qo,match:tf,number:Bs,"number-format":rf,object:Bs,slice:vd,step:To,string:Bs,"to-boolean":wo,"to-color":wo,"to-number":wo,"to-string":wo,var:cd,within:el};function Km(u,[a,h,p,_]){a=a.evaluate(u),h=h.evaluate(u),p=p.evaluate(u);const S=_?_.evaluate(u):1,E=rd(a,h,p,S);if(E)throw new Wi(E);return new hi(a/255,h/255,p/255,S,!1)}function Xm(u,a){return u in a}function of(u,a){const h=a[u];return h===void 0?null:h}function tl(u){return{type:u}}function Ym(u){return{result:"success",value:u}}function Eo(u){return{result:"error",value:u}}function Ul(u){return u["property-type"]==="data-driven"||u["property-type"]==="cross-faded-data-driven"}function Jm(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function lf(u){return!!u.expression&&u.expression.interpolated}function mi(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}function Bi(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)}function Oy(u){return u}function ni(u,a){const h=a.type==="color",p=u.stops&&typeof u.stops[0][0]=="object",_=p||!(p||u.property!==void 0),S=u.type||(lf(a)?"exponential":"interval");if(h||a.type==="padding"){const V=h?hi.parse:_s.parse;(u=Qt({},u)).stops&&(u.stops=u.stops.map(Y=>[Y[0],V(Y[1])])),u.default=V(u.default?u.default:a.default)}if(u.colorSpace&&(E=u.colorSpace)!=="rgb"&&E!=="hcl"&&E!=="lab")throw new Error(`Unknown color space: "${u.colorSpace}"`);var E;let M,L,$;if(S==="exponential")M=qc;else if(S==="interval")M=$i;else if(S==="categorical"){M=ji,L=Object.create(null);for(const V of u.stops)L[V[0]]=V[1];$=typeof u.stops[0][0]}else{if(S!=="identity")throw new Error(`Unknown function type "${S}"`);M=Qm}if(p){const V={},Y=[];for(let de=0;de<u.stops.length;de++){const be=u.stops[de],Pe=be[0].zoom;V[Pe]===void 0&&(V[Pe]={zoom:Pe,type:u.type,property:u.property,default:u.default,stops:[]},Y.push(Pe)),V[Pe].stops.push([be[0].value,be[1]])}const ie=[];for(const de of Y)ie.push([V[de].zoom,ni(V[de],a)]);const ce={name:"linear"};return{kind:"composite",interpolationType:ce,interpolationFactor:bs.interpolationFactor.bind(void 0,ce),zoomStops:ie.map(de=>de[0]),evaluate:({zoom:de},be)=>qc({stops:ie,base:u.base},a,de).evaluate(de,be)}}if(_){const V=S==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:V,interpolationFactor:bs.interpolationFactor.bind(void 0,V),zoomStops:u.stops.map(Y=>Y[0]),evaluate:({zoom:Y})=>M(u,a,Y,L,$)}}return{kind:"source",evaluate(V,Y){const ie=Y&&Y.properties?Y.properties[u.property]:void 0;return ie===void 0?nl(u.default,a.default):M(u,a,ie,L,$)}}}function nl(u,a,h){return u!==void 0?u:a!==void 0?a:h!==void 0?h:void 0}function ji(u,a,h,p,_){return nl(typeof h===_?p[h]:void 0,u.default,a.default)}function $i(u,a,h){if(mi(h)!=="number")return nl(u.default,a.default);const p=u.stops.length;if(p===1||h<=u.stops[0][0])return u.stops[0][1];if(h>=u.stops[p-1][0])return u.stops[p-1][1];const _=Bl(u.stops.map(S=>S[0]),h);return u.stops[_][1]}function qc(u,a,h){const p=u.base!==void 0?u.base:1;if(mi(h)!=="number")return nl(u.default,a.default);const _=u.stops.length;if(_===1||h<=u.stops[0][0])return u.stops[0][1];if(h>=u.stops[_-1][0])return u.stops[_-1][1];const S=Bl(u.stops.map(V=>V[0]),h),E=function(V,Y,ie,ce){const de=ce-ie,be=V-ie;return de===0?0:Y===1?be/de:(Math.pow(Y,be)-1)/(Math.pow(Y,de)-1)}(h,p,u.stops[S][0],u.stops[S+1][0]),M=u.stops[S][1],L=u.stops[S+1][1],$=ys[a.type]||Oy;return typeof M.evaluate=="function"?{evaluate(...V){const Y=M.evaluate.apply(void 0,V),ie=L.evaluate.apply(void 0,V);if(Y!==void 0&&ie!==void 0)return $(Y,ie,E,u.colorSpace)}}:$(M,L,E,u.colorSpace)}function Qm(u,a,h){switch(a.type){case"color":h=hi.parse(h);break;case"formatted":h=Nr.fromString(h.toString());break;case"resolvedImage":h=Dr.fromString(h.toString());break;case"padding":h=_s.parse(h);break;default:mi(h)===a.type||a.type==="enum"&&a.values[h]||(h=void 0)}return nl(h,u.default,a.default)}js.register(Vl,{error:[{kind:"error"},[Ht],(u,[a])=>{throw new Wi(a.evaluate(u))}],typeof:[Ht,[Vt],(u,[a])=>ke(Ni(a.evaluate(u)))],"to-rgba":[Ae(Mt,4),[cn],(u,[a])=>{const[h,p,_,S]=a.evaluate(u).rgb;return[255*h,255*p,255*_,S]}],rgb:[cn,[Mt,Mt,Mt],Km],rgba:[cn,[Mt,Mt,Mt,Mt],Km],has:{type:_t,overloads:[[[Ht],(u,[a])=>Xm(a.evaluate(u),u.properties())],[[Ht,zn],(u,[a,h])=>Xm(a.evaluate(u),h.evaluate(u))]]},get:{type:Vt,overloads:[[[Ht],(u,[a])=>of(a.evaluate(u),u.properties())],[[Ht,zn],(u,[a,h])=>of(a.evaluate(u),h.evaluate(u))]]},"feature-state":[Vt,[Ht],(u,[a])=>of(a.evaluate(u),u.featureState||{})],properties:[zn,[],u=>u.properties()],"geometry-type":[Ht,[],u=>u.geometryType()],id:[Vt,[],u=>u.id()],zoom:[Mt,[],u=>u.globals.zoom],"heatmap-density":[Mt,[],u=>u.globals.heatmapDensity||0],"line-progress":[Mt,[],u=>u.globals.lineProgress||0],accumulated:[Vt,[],u=>u.globals.accumulated===void 0?null:u.globals.accumulated],"+":[Mt,tl(Mt),(u,a)=>{let h=0;for(const p of a)h+=p.evaluate(u);return h}],"*":[Mt,tl(Mt),(u,a)=>{let h=1;for(const p of a)h*=p.evaluate(u);return h}],"-":{type:Mt,overloads:[[[Mt,Mt],(u,[a,h])=>a.evaluate(u)-h.evaluate(u)],[[Mt],(u,[a])=>-a.evaluate(u)]]},"/":[Mt,[Mt,Mt],(u,[a,h])=>a.evaluate(u)/h.evaluate(u)],"%":[Mt,[Mt,Mt],(u,[a,h])=>a.evaluate(u)%h.evaluate(u)],ln2:[Mt,[],()=>Math.LN2],pi:[Mt,[],()=>Math.PI],e:[Mt,[],()=>Math.E],"^":[Mt,[Mt,Mt],(u,[a,h])=>Math.pow(a.evaluate(u),h.evaluate(u))],sqrt:[Mt,[Mt],(u,[a])=>Math.sqrt(a.evaluate(u))],log10:[Mt,[Mt],(u,[a])=>Math.log(a.evaluate(u))/Math.LN10],ln:[Mt,[Mt],(u,[a])=>Math.log(a.evaluate(u))],log2:[Mt,[Mt],(u,[a])=>Math.log(a.evaluate(u))/Math.LN2],sin:[Mt,[Mt],(u,[a])=>Math.sin(a.evaluate(u))],cos:[Mt,[Mt],(u,[a])=>Math.cos(a.evaluate(u))],tan:[Mt,[Mt],(u,[a])=>Math.tan(a.evaluate(u))],asin:[Mt,[Mt],(u,[a])=>Math.asin(a.evaluate(u))],acos:[Mt,[Mt],(u,[a])=>Math.acos(a.evaluate(u))],atan:[Mt,[Mt],(u,[a])=>Math.atan(a.evaluate(u))],min:[Mt,tl(Mt),(u,a)=>Math.min(...a.map(h=>h.evaluate(u)))],max:[Mt,tl(Mt),(u,a)=>Math.max(...a.map(h=>h.evaluate(u)))],abs:[Mt,[Mt],(u,[a])=>Math.abs(a.evaluate(u))],round:[Mt,[Mt],(u,[a])=>{const h=a.evaluate(u);return h<0?-Math.round(-h):Math.round(h)}],floor:[Mt,[Mt],(u,[a])=>Math.floor(a.evaluate(u))],ceil:[Mt,[Mt],(u,[a])=>Math.ceil(a.evaluate(u))],"filter-==":[_t,[Ht,Vt],(u,[a,h])=>u.properties()[a.value]===h.value],"filter-id-==":[_t,[Vt],(u,[a])=>u.id()===a.value],"filter-type-==":[_t,[Ht],(u,[a])=>u.geometryType()===a.value],"filter-<":[_t,[Ht,Vt],(u,[a,h])=>{const p=u.properties()[a.value],_=h.value;return typeof p==typeof _&&p<_}],"filter-id-<":[_t,[Vt],(u,[a])=>{const h=u.id(),p=a.value;return typeof h==typeof p&&h<p}],"filter->":[_t,[Ht,Vt],(u,[a,h])=>{const p=u.properties()[a.value],_=h.value;return typeof p==typeof _&&p>_}],"filter-id->":[_t,[Vt],(u,[a])=>{const h=u.id(),p=a.value;return typeof h==typeof p&&h>p}],"filter-<=":[_t,[Ht,Vt],(u,[a,h])=>{const p=u.properties()[a.value],_=h.value;return typeof p==typeof _&&p<=_}],"filter-id-<=":[_t,[Vt],(u,[a])=>{const h=u.id(),p=a.value;return typeof h==typeof p&&h<=p}],"filter->=":[_t,[Ht,Vt],(u,[a,h])=>{const p=u.properties()[a.value],_=h.value;return typeof p==typeof _&&p>=_}],"filter-id->=":[_t,[Vt],(u,[a])=>{const h=u.id(),p=a.value;return typeof h==typeof p&&h>=p}],"filter-has":[_t,[Vt],(u,[a])=>a.value in u.properties()],"filter-has-id":[_t,[],u=>u.id()!==null&&u.id()!==void 0],"filter-type-in":[_t,[Ae(Ht)],(u,[a])=>a.value.indexOf(u.geometryType())>=0],"filter-id-in":[_t,[Ae(Vt)],(u,[a])=>a.value.indexOf(u.id())>=0],"filter-in-small":[_t,[Ht,Ae(Vt)],(u,[a,h])=>h.value.indexOf(u.properties()[a.value])>=0],"filter-in-large":[_t,[Ht,Ae(Vt)],(u,[a,h])=>function(p,_,S,E){for(;S<=E;){const M=S+E>>1;if(_[M]===p)return!0;_[M]>p?E=M-1:S=M+1}return!1}(u.properties()[a.value],h.value,0,h.value.length-1)],all:{type:_t,overloads:[[[_t,_t],(u,[a,h])=>a.evaluate(u)&&h.evaluate(u)],[tl(_t),(u,a)=>{for(const h of a)if(!h.evaluate(u))return!1;return!0}]]},any:{type:_t,overloads:[[[_t,_t],(u,[a,h])=>a.evaluate(u)||h.evaluate(u)],[tl(_t),(u,a)=>{for(const h of a)if(h.evaluate(u))return!0;return!1}]]},"!":[_t,[_t],(u,[a])=>!a.evaluate(u)],"is-supported-script":[_t,[Ht],(u,[a])=>{const h=u.globals&&u.globals.isSupportedScript;return!h||h(a.evaluate(u))}],upcase:[Ht,[Ht],(u,[a])=>a.evaluate(u).toUpperCase()],downcase:[Ht,[Ht],(u,[a])=>a.evaluate(u).toLowerCase()],concat:[Ht,tl(Vt),(u,a)=>a.map(h=>pi(h.evaluate(u))).join("")],"resolved-locale":[Ht,[li],(u,[a])=>a.evaluate(u).resolvedLocale()]});class cf{constructor(a,h){var p;this.expression=a,this._warningHistory={},this._evaluator=new Wh,this._defaultValue=h?(p=h).type==="color"&&Bi(p.default)?new hi(0,0,0,0):p.type==="color"?hi.parse(p.default)||null:p.type==="padding"?_s.parse(p.default)||null:p.type==="variableAnchorOffsetCollection"?Ns.parse(p.default)||null:p.default===void 0?null:p.default:null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(a,h,p,_,S,E){return this._evaluator.globals=a,this._evaluator.feature=h,this._evaluator.featureState=p,this._evaluator.canonical=_,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=E,this.expression.evaluate(this._evaluator)}evaluate(a,h,p,_,S,E){this._evaluator.globals=a,this._evaluator.feature=h||null,this._evaluator.featureState=p||null,this._evaluator.canonical=_,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=E||null;try{const M=this.expression.evaluate(this._evaluator);if(M==null||typeof M=="number"&&M!=M)return this._defaultValue;if(this._enumValues&&!(M in this._enumValues))throw new Wi(`Expected value to be one of ${Object.keys(this._enumValues).map(L=>JSON.stringify(L)).join(", ")}, but found ${JSON.stringify(M)} instead.`);return M}catch(M){return this._warningHistory[M.message]||(this._warningHistory[M.message]=!0,typeof console<"u"&&console.warn(M.message)),this._defaultValue}}}function yd(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in Vl}function bd(u,a){const h=new ad(Vl,ud,[],a?function(_){const S={color:cn,string:Ht,number:Mt,enum:Ht,boolean:_t,formatted:Ee,padding:ne,resolvedImage:ae,variableAnchorOffsetCollection:pe};return _.type==="array"?Ae(S[_.value]||Vt,_.length):S[_.type]}(a):void 0),p=h.parse(u,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?Ym(new cf(p,a)):Eo(h.errors)}class uf{constructor(a,h){this.kind=a,this._styleExpression=h,this.isStateDependent=a!=="constant"&&!Wc(h.expression)}evaluateWithoutErrorHandling(a,h,p,_,S,E){return this._styleExpression.evaluateWithoutErrorHandling(a,h,p,_,S,E)}evaluate(a,h,p,_,S,E){return this._styleExpression.evaluate(a,h,p,_,S,E)}}class xd{constructor(a,h,p,_){this.kind=a,this.zoomStops=p,this._styleExpression=h,this.isStateDependent=a!=="camera"&&!Wc(h.expression),this.interpolationType=_}evaluateWithoutErrorHandling(a,h,p,_,S,E){return this._styleExpression.evaluateWithoutErrorHandling(a,h,p,_,S,E)}evaluate(a,h,p,_,S,E){return this._styleExpression.evaluate(a,h,p,_,S,E)}interpolationFactor(a,h,p){return this.interpolationType?bs.interpolationFactor(this.interpolationType,a,h,p):0}}function df(u,a){const h=bd(u,a);if(h.result==="error")return h;const p=h.value.expression,_=dd(p);if(!_&&!Ul(a))return Eo([new Zt("","data expressions not supported")]);const S=hd(p,["zoom"]);if(!S&&!Jm(a))return Eo([new Zt("","zoom expressions not supported")]);const E=Kc(p);return E||S?E instanceof Zt?Eo([E]):E instanceof bs&&!lf(a)?Eo([new Zt("",'"interpolate" expressions cannot be used with this property')]):Ym(E?new xd(_?"camera":"composite",h.value,E.labels,E instanceof bs?E.interpolation:void 0):new uf(_?"constant":"source",h.value)):Eo([new Zt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Zc{constructor(a,h){this._parameters=a,this._specification=h,Qt(this,ni(this._parameters,this._specification))}static deserialize(a){return new Zc(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function Kc(u){let a=null;if(u instanceof md)a=Kc(u.result);else if(u instanceof pd){for(const h of u.args)if(a=Kc(h),a)break}else(u instanceof To||u instanceof bs)&&u.input instanceof js&&u.input.name==="zoom"&&(a=u);return a instanceof Zt||u.eachChild(h=>{const p=Kc(h);p instanceof Zt?a=p:!a&&p?a=new Zt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&p&&a!==p&&(a=new Zt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),a}function Xc(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(const a of u.slice(1))if(!Xc(a)&&typeof a!="boolean")return!1;return!0;default:return!0}}const Ry={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function hf(u){if(u==null)return{filter:()=>!0,needGeometry:!1};Xc(u)||(u=wd(u));const a=bd(u,Ry);if(a.result==="error")throw new Error(a.value.map(h=>`${h.key}: ${h.message}`).join(", "));return{filter:(h,p,_)=>a.value.evaluate(h,p,{},_),needGeometry:eg(u)}}function Fy(u,a){return u<a?-1:u>a?1:0}function eg(u){if(!Array.isArray(u))return!1;if(u[0]==="within")return!0;for(let a=1;a<u.length;a++)if(eg(u[a]))return!0;return!1}function wd(u){if(!u)return!0;const a=u[0];return u.length<=1?a!=="any":a==="=="?ff(u[1],u[2],"=="):a==="!="?Yc(ff(u[1],u[2],"==")):a==="<"||a===">"||a==="<="||a===">="?ff(u[1],u[2],a):a==="any"?(h=u.slice(1),["any"].concat(h.map(wd))):a==="all"?["all"].concat(u.slice(1).map(wd)):a==="none"?["all"].concat(u.slice(1).map(wd).map(Yc)):a==="in"?tg(u[1],u.slice(2)):a==="!in"?Yc(tg(u[1],u.slice(2))):a==="has"?ng(u[1]):a==="!has"?Yc(ng(u[1])):a!=="within"||u;var h}function ff(u,a,h){switch(u){case"$type":return[`filter-type-${h}`,a];case"$id":return[`filter-id-${h}`,a];default:return[`filter-${h}`,u,a]}}function tg(u,a){if(a.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some(h=>typeof h!=typeof a[0])?["filter-in-large",u,["literal",a.sort(Fy)]]:["filter-in-small",u,["literal",a]]}}function ng(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function Yc(u){return["!",u]}function Sd(u){const a=typeof u;if(a==="number"||a==="boolean"||a==="string"||u==null)return JSON.stringify(u);if(Array.isArray(u)){let _="[";for(const S of u)_+=`${Sd(S)},`;return`${_}]`}const h=Object.keys(u).sort();let p="{";for(let _=0;_<h.length;_++)p+=`${JSON.stringify(h[_])}:${Sd(u[h[_]])},`;return`${p}}`}function Td(u){let a="";for(const h of mt)a+=`/${Sd(u[h])}`;return a}function ig(u){const a=u.value;return a?[new qe(u.key,a,"constants have been deprecated as of v8")]:[]}function qi(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function il(u){if(Array.isArray(u))return u.map(il);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){const a={};for(const h in u)a[h]=il(u[h]);return a}return qi(u)}function is(u){const a=u.key,h=u.value,p=u.valueSpec||{},_=u.objectElementValidators||{},S=u.style,E=u.styleSpec,M=u.validateSpec;let L=[];const $=mi(h);if($!=="object")return[new qe(a,h,`object expected, ${$} found`)];for(const V in h){const Y=V.split(".")[0],ie=p[Y]||p["*"];let ce;if(_[Y])ce=_[Y];else if(p[Y])ce=M;else if(_["*"])ce=_["*"];else{if(!p["*"]){L.push(new qe(a,h[V],`unknown property "${V}"`));continue}ce=M}L=L.concat(ce({key:(a&&`${a}.`)+V,value:h[V],valueSpec:ie,style:S,styleSpec:E,object:h,objectKey:V,validateSpec:M},h))}for(const V in p)_[V]||p[V].required&&p[V].default===void 0&&h[V]===void 0&&L.push(new qe(a,h,`missing required property "${V}"`));return L}function Hl(u){const a=u.value,h=u.valueSpec,p=u.style,_=u.styleSpec,S=u.key,E=u.arrayElementValidator||u.validateSpec;if(mi(a)!=="array")return[new qe(S,a,`array expected, ${mi(a)} found`)];if(h.length&&a.length!==h.length)return[new qe(S,a,`array length ${h.length} expected, length ${a.length} found`)];if(h["min-length"]&&a.length<h["min-length"])return[new qe(S,a,`array length at least ${h["min-length"]} expected, length ${a.length} found`)];let M={type:h.value,values:h.values};_.$version<7&&(M.function=h.function),mi(h.value)==="object"&&(M=h.value);let L=[];for(let $=0;$<a.length;$++)L=L.concat(E({array:a,arrayIndex:$,value:a[$],valueSpec:M,validateSpec:u.validateSpec,style:p,styleSpec:_,key:`${S}[${$}]`}));return L}function Jc(u){const a=u.key,h=u.value,p=u.valueSpec;let _=mi(h);return _==="number"&&h!=h&&(_="NaN"),_!=="number"?[new qe(a,h,`number expected, ${_} found`)]:"minimum"in p&&h<p.minimum?[new qe(a,h,`${h} is less than the minimum value ${p.minimum}`)]:"maximum"in p&&h>p.maximum?[new qe(a,h,`${h} is greater than the maximum value ${p.maximum}`)]:[]}function Ed(u){const a=u.valueSpec,h=qi(u.value.type);let p,_,S,E={};const M=h!=="categorical"&&u.value.property===void 0,L=!M,$=mi(u.value.stops)==="array"&&mi(u.value.stops[0])==="array"&&mi(u.value.stops[0][0])==="object",V=is({key:u.key,value:u.value,valueSpec:u.styleSpec.function,validateSpec:u.validateSpec,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(ce){if(h==="identity")return[new qe(ce.key,ce.value,'identity function may not have a "stops" property')];let de=[];const be=ce.value;return de=de.concat(Hl({key:ce.key,value:be,valueSpec:ce.valueSpec,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec,arrayElementValidator:Y})),mi(be)==="array"&&be.length===0&&de.push(new qe(ce.key,be,"array must have at least one stop")),de},default:function(ce){return ce.validateSpec({key:ce.key,value:ce.value,valueSpec:a,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec})}}});return h==="identity"&&M&&V.push(new qe(u.key,u.value,'missing required property "property"')),h==="identity"||u.value.stops||V.push(new qe(u.key,u.value,'missing required property "stops"')),h==="exponential"&&u.valueSpec.expression&&!lf(u.valueSpec)&&V.push(new qe(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(L&&!Ul(u.valueSpec)?V.push(new qe(u.key,u.value,"property functions not supported")):M&&!Jm(u.valueSpec)&&V.push(new qe(u.key,u.value,"zoom functions not supported"))),h!=="categorical"&&!$||u.value.property!==void 0||V.push(new qe(u.key,u.value,'"property" property is required')),V;function Y(ce){let de=[];const be=ce.value,Pe=ce.key;if(mi(be)!=="array")return[new qe(Pe,be,`array expected, ${mi(be)} found`)];if(be.length!==2)return[new qe(Pe,be,`array length 2 expected, length ${be.length} found`)];if($){if(mi(be[0])!=="object")return[new qe(Pe,be,`object expected, ${mi(be[0])} found`)];if(be[0].zoom===void 0)return[new qe(Pe,be,"object stop key must have zoom")];if(be[0].value===void 0)return[new qe(Pe,be,"object stop key must have value")];if(S&&S>qi(be[0].zoom))return[new qe(Pe,be[0].zoom,"stop zoom values must appear in ascending order")];qi(be[0].zoom)!==S&&(S=qi(be[0].zoom),_=void 0,E={}),de=de.concat(is({key:`${Pe}[0]`,value:be[0],valueSpec:{zoom:{}},validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec,objectElementValidators:{zoom:Jc,value:ie}}))}else de=de.concat(ie({key:`${Pe}[0]`,value:be[0],valueSpec:{},validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec},be));return yd(il(be[1]))?de.concat([new qe(`${Pe}[1]`,be[1],"expressions are not allowed in function stops.")]):de.concat(ce.validateSpec({key:`${Pe}[1]`,value:be[1],valueSpec:a,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec}))}function ie(ce,de){const be=mi(ce.value),Pe=qi(ce.value),Re=ce.value!==null?ce.value:de;if(p){if(be!==p)return[new qe(ce.key,Re,`${be} stop domain type must match previous stop domain type ${p}`)]}else p=be;if(be!=="number"&&be!=="string"&&be!=="boolean")return[new qe(ce.key,Re,"stop domain value must be a number, string, or boolean")];if(be!=="number"&&h!=="categorical"){let Je=`number expected, ${be} found`;return Ul(a)&&h===void 0&&(Je+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new qe(ce.key,Re,Je)]}return h!=="categorical"||be!=="number"||isFinite(Pe)&&Math.floor(Pe)===Pe?h!=="categorical"&&be==="number"&&_!==void 0&&Pe<_?[new qe(ce.key,Re,"stop domain values must appear in ascending order")]:(_=Pe,h==="categorical"&&Pe in E?[new qe(ce.key,Re,"stop domain values must be unique")]:(E[Pe]=!0,[])):[new qe(ce.key,Re,`integer expected, found ${Pe}`)]}}function rl(u){const a=(u.expressionContext==="property"?df:bd)(il(u.value),u.valueSpec);if(a.result==="error")return a.value.map(p=>new qe(`${u.key}${p.key}`,u.value,p.message));const h=a.value.expression||a.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!h.outputDefined())return[new qe(u.key,u.value,`Invalid data expression for "${u.propertyKey}". Output values must be contained as literals within the expression.`)];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!Wc(h))return[new qe(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if(u.expressionContext==="filter"&&!Wc(h))return[new qe(u.key,u.value,'"feature-state" data expressions are not supported with filters.')];if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!hd(h,["zoom","feature-state"]))return[new qe(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(u.expressionContext==="cluster-initial"&&!dd(h))return[new qe(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Qc(u){const a=u.key,h=u.value,p=u.valueSpec,_=[];return Array.isArray(p.values)?p.values.indexOf(qi(h))===-1&&_.push(new qe(a,h,`expected one of [${p.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(p.values).indexOf(qi(h))===-1&&_.push(new qe(a,h,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(h)} found`)),_}function Gl(u){return Xc(il(u.value))?rl(Qt({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):rg(u)}function rg(u){const a=u.value,h=u.key;if(mi(a)!=="array")return[new qe(h,a,`array expected, ${mi(a)} found`)];const p=u.styleSpec;let _,S=[];if(a.length<1)return[new qe(h,a,"filter array must have at least 1 element")];switch(S=S.concat(Qc({key:`${h}[0]`,value:a[0],valueSpec:p.filter_operator,style:u.style,styleSpec:u.styleSpec})),qi(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&qi(a[1])==="$type"&&S.push(new qe(h,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&S.push(new qe(h,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(_=mi(a[1]),_!=="string"&&S.push(new qe(`${h}[1]`,a[1],`string expected, ${_} found`)));for(let E=2;E<a.length;E++)_=mi(a[E]),qi(a[1])==="$type"?S=S.concat(Qc({key:`${h}[${E}]`,value:a[E],valueSpec:p.geometry_type,style:u.style,styleSpec:u.styleSpec})):_!=="string"&&_!=="number"&&_!=="boolean"&&S.push(new qe(`${h}[${E}]`,a[E],`string, number, or boolean expected, ${_} found`));break;case"any":case"all":case"none":for(let E=1;E<a.length;E++)S=S.concat(rg({key:`${h}[${E}]`,value:a[E],style:u.style,styleSpec:u.styleSpec}));break;case"has":case"!has":_=mi(a[1]),a.length!==2?S.push(new qe(h,a,`filter array for "${a[0]}" operator must have 2 elements`)):_!=="string"&&S.push(new qe(`${h}[1]`,a[1],`string expected, ${_} found`));break;case"within":_=mi(a[1]),a.length!==2?S.push(new qe(h,a,`filter array for "${a[0]}" operator must have 2 elements`)):_!=="object"&&S.push(new qe(`${h}[1]`,a[1],`object expected, ${_} found`))}return S}function sg(u,a){const h=u.key,p=u.validateSpec,_=u.style,S=u.styleSpec,E=u.value,M=u.objectKey,L=S[`${a}_${u.layerType}`];if(!L)return[];const $=M.match(/^(.*)-transition$/);if(a==="paint"&&$&&L[$[1]]&&L[$[1]].transition)return p({key:h,value:E,valueSpec:S.transition,style:_,styleSpec:S});const V=u.valueSpec||L[M];if(!V)return[new qe(h,E,`unknown property "${M}"`)];let Y;if(mi(E)==="string"&&Ul(V)&&!V.tokens&&(Y=/^{([^}]+)}$/.exec(E)))return[new qe(h,E,`"${M}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Y[1])} }\`.`)];const ie=[];return u.layerType==="symbol"&&(M==="text-field"&&_&&!_.glyphs&&ie.push(new qe(h,E,'use of "text-field" requires a style "glyphs" property')),M==="text-font"&&Bi(il(E))&&qi(E.type)==="identity"&&ie.push(new qe(h,E,'"text-font" does not support identity functions'))),ie.concat(p({key:u.key,value:E,valueSpec:V,style:_,styleSpec:S,expressionContext:"property",propertyType:a,propertyKey:M}))}function ag(u){return sg(u,"paint")}function og(u){return sg(u,"layout")}function lg(u){let a=[];const h=u.value,p=u.key,_=u.style,S=u.styleSpec;h.type||h.ref||a.push(new qe(p,h,'either "type" or "ref" is required'));let E=qi(h.type);const M=qi(h.ref);if(h.id){const L=qi(h.id);for(let $=0;$<u.arrayIndex;$++){const V=_.layers[$];qi(V.id)===L&&a.push(new qe(p,h.id,`duplicate layer id "${h.id}", previously used at line ${V.id.__line__}`))}}if("ref"in h){let L;["type","source","source-layer","filter","layout"].forEach($=>{$ in h&&a.push(new qe(p,h[$],`"${$}" is prohibited for ref layers`))}),_.layers.forEach($=>{qi($.id)===M&&(L=$)}),L?L.ref?a.push(new qe(p,h.ref,"ref cannot reference another ref layer")):E=qi(L.type):a.push(new qe(p,h.ref,`ref layer "${M}" not found`))}else if(E!=="background")if(h.source){const L=_.sources&&_.sources[h.source],$=L&&qi(L.type);L?$==="vector"&&E==="raster"?a.push(new qe(p,h.source,`layer "${h.id}" requires a raster source`)):$!=="raster-dem"&&E==="hillshade"?a.push(new qe(p,h.source,`layer "${h.id}" requires a raster-dem source`)):$==="raster"&&E!=="raster"?a.push(new qe(p,h.source,`layer "${h.id}" requires a vector source`)):$!=="vector"||h["source-layer"]?$==="raster-dem"&&E!=="hillshade"?a.push(new qe(p,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):E!=="line"||!h.paint||!h.paint["line-gradient"]||$==="geojson"&&L.lineMetrics||a.push(new qe(p,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new qe(p,h,`layer "${h.id}" must specify a "source-layer"`)):a.push(new qe(p,h.source,`source "${h.source}" not found`))}else a.push(new qe(p,h,'missing required property "source"'));return a=a.concat(is({key:p,value:h,valueSpec:S.layer,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,objectElementValidators:{"*":()=>[],type:()=>u.validateSpec({key:`${p}.type`,value:h.type,valueSpec:S.layer.type,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,object:h,objectKey:"type"}),filter:Gl,layout:L=>is({layer:h,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":$=>og(Qt({layerType:E},$))}}),paint:L=>is({layer:h,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":$=>ag(Qt({layerType:E},$))}})}})),a}function xa(u){const a=u.value,h=u.key,p=mi(a);return p!=="string"?[new qe(h,a,`string expected, ${p} found`)]:[]}const eu={promoteId:function({key:u,value:a}){if(mi(a)==="string")return xa({key:u,value:a});{const h=[];for(const p in a)h.push(...xa({key:`${u}.${p}`,value:a[p]}));return h}}};function xs(u){const a=u.value,h=u.key,p=u.styleSpec,_=u.style,S=u.validateSpec;if(!a.type)return[new qe(h,a,'"type" is required')];const E=qi(a.type);let M;switch(E){case"vector":case"raster":return M=is({key:h,value:a,valueSpec:p[`source_${E.replace("-","_")}`],style:u.style,styleSpec:p,objectElementValidators:eu,validateSpec:S}),M;case"raster-dem":return M=function(L){var $;const V=($=L.sourceName)!==null&&$!==void 0?$:"",Y=L.value,ie=L.styleSpec,ce=ie.source_raster_dem,de=L.style;let be=[];const Pe=mi(Y);if(Y===void 0)return be;if(Pe!=="object")return be.push(new qe("source_raster_dem",Y,`object expected, ${Pe} found`)),be;const Re=qi(Y.encoding)==="custom",Je=["redFactor","greenFactor","blueFactor","baseShift"],je=L.value.encoding?`"${L.value.encoding}"`:"Default";for(const rt in Y)!Re&&Je.includes(rt)?be.push(new qe(rt,Y[rt],`In "${V}": "${rt}" is only valid when "encoding" is set to "custom". ${je} encoding found`)):ce[rt]?be=be.concat(L.validateSpec({key:rt,value:Y[rt],valueSpec:ce[rt],validateSpec:L.validateSpec,style:de,styleSpec:ie})):be.push(new qe(rt,Y[rt],`unknown property "${rt}"`));return be}({sourceName:h,value:a,style:u.style,styleSpec:p,validateSpec:S}),M;case"geojson":if(M=is({key:h,value:a,valueSpec:p.source_geojson,style:_,styleSpec:p,validateSpec:S,objectElementValidators:eu}),a.cluster)for(const L in a.clusterProperties){const[$,V]=a.clusterProperties[L],Y=typeof $=="string"?[$,["accumulated"],["get",L]]:$;M.push(...rl({key:`${h}.${L}.map`,value:V,validateSpec:S,expressionContext:"cluster-map"})),M.push(...rl({key:`${h}.${L}.reduce`,value:Y,validateSpec:S,expressionContext:"cluster-reduce"}))}return M;case"video":return is({key:h,value:a,valueSpec:p.source_video,style:_,validateSpec:S,styleSpec:p});case"image":return is({key:h,value:a,valueSpec:p.source_image,style:_,validateSpec:S,styleSpec:p});case"canvas":return[new qe(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Qc({key:`${h}.type`,value:a.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:_,validateSpec:S,styleSpec:p})}}function tu(u){const a=u.value,h=u.styleSpec,p=h.light,_=u.style;let S=[];const E=mi(a);if(a===void 0)return S;if(E!=="object")return S=S.concat([new qe("light",a,`object expected, ${E} found`)]),S;for(const M in a){const L=M.match(/^(.*)-transition$/);S=S.concat(L&&p[L[1]]&&p[L[1]].transition?u.validateSpec({key:M,value:a[M],valueSpec:h.transition,validateSpec:u.validateSpec,style:_,styleSpec:h}):p[M]?u.validateSpec({key:M,value:a[M],valueSpec:p[M],validateSpec:u.validateSpec,style:_,styleSpec:h}):[new qe(M,a[M],`unknown property "${M}"`)])}return S}function cg(u){const a=u.value,h=u.styleSpec,p=h.terrain,_=u.style;let S=[];const E=mi(a);if(a===void 0)return S;if(E!=="object")return S=S.concat([new qe("terrain",a,`object expected, ${E} found`)]),S;for(const M in a)S=S.concat(p[M]?u.validateSpec({key:M,value:a[M],valueSpec:p[M],validateSpec:u.validateSpec,style:_,styleSpec:h}):[new qe(M,a[M],`unknown property "${M}"`)]);return S}function ug(u){let a=[];const h=u.value,p=u.key;if(Array.isArray(h)){const _=[],S=[];for(const E in h)h[E].id&&_.includes(h[E].id)&&a.push(new qe(p,h,`all the sprites' ids must be unique, but ${h[E].id} is duplicated`)),_.push(h[E].id),h[E].url&&S.includes(h[E].url)&&a.push(new qe(p,h,`all the sprites' URLs must be unique, but ${h[E].url} is duplicated`)),S.push(h[E].url),a=a.concat(is({key:`${p}[${E}]`,value:h[E],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:u.validateSpec}));return a}return xa({key:p,value:h})}const dg={"*":()=>[],array:Hl,boolean:function(u){const a=u.value,h=u.key,p=mi(a);return p!=="boolean"?[new qe(h,a,`boolean expected, ${p} found`)]:[]},number:Jc,color:function(u){const a=u.key,h=u.value,p=mi(h);return p!=="string"?[new qe(a,h,`color expected, ${p} found`)]:hi.parse(String(h))?[]:[new qe(a,h,`color expected, "${h}" found`)]},constants:ig,enum:Qc,filter:Gl,function:Ed,layer:lg,object:is,source:xs,light:tu,terrain:cg,string:xa,formatted:function(u){return xa(u).length===0?[]:rl(u)},resolvedImage:function(u){return xa(u).length===0?[]:rl(u)},padding:function(u){const a=u.key,h=u.value;if(mi(h)==="array"){if(h.length<1||h.length>4)return[new qe(a,h,`padding requires 1 to 4 values; ${h.length} values found`)];const p={type:"number"};let _=[];for(let S=0;S<h.length;S++)_=_.concat(u.validateSpec({key:`${a}[${S}]`,value:h[S],validateSpec:u.validateSpec,valueSpec:p}));return _}return Jc({key:a,value:h,valueSpec:{}})},variableAnchorOffsetCollection:function(u){const a=u.key,h=u.value,p=mi(h),_=u.styleSpec;if(p!=="array"||h.length<1||h.length%2!=0)return[new qe(a,h,"variableAnchorOffsetCollection requires a non-empty array of even length")];let S=[];for(let E=0;E<h.length;E+=2)S=S.concat(Qc({key:`${a}[${E}]`,value:h[E],valueSpec:_.layout_symbol["text-anchor"]})),S=S.concat(Hl({key:`${a}[${E+1}]`,value:h[E+1],valueSpec:{length:2,value:"number"},validateSpec:u.validateSpec,style:u.style,styleSpec:_}));return S},sprite:ug};function Ga(u){const a=u.value,h=u.valueSpec,p=u.styleSpec;return u.validateSpec=Ga,h.expression&&Bi(qi(a))?Ed(u):h.expression&&yd(il(a))?rl(u):h.type&&dg[h.type]?dg[h.type](u):is(Qt({},u,{valueSpec:h.type?p[h.type]:h}))}function hg(u){const a=u.value,h=u.key,p=xa(u);return p.length||(a.indexOf("{fontstack}")===-1&&p.push(new qe(h,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&p.push(new qe(h,a,'"glyphs" url must include a "{range}" token'))),p}function Vs(u,a=Se){let h=[];return h=h.concat(Ga({key:"",value:u,valueSpec:a.$root,styleSpec:a,style:u,validateSpec:Ga,objectElementValidators:{glyphs:hg,"*":()=>[]}})),u.constants&&(h=h.concat(ig({key:"constants",value:u.constants,style:u,styleSpec:a,validateSpec:Ga}))),Cd(h)}function Wa(u){return function(a){return u({...a,validateSpec:Ga})}}function Cd(u){return[].concat(u).sort((a,h)=>a.line-h.line)}function qa(u){return function(...a){return Cd(u.apply(this,a))}}Vs.source=qa(Wa(xs)),Vs.sprite=qa(Wa(ug)),Vs.glyphs=qa(Wa(hg)),Vs.light=qa(Wa(tu)),Vs.terrain=qa(Wa(cg)),Vs.layer=qa(Wa(lg)),Vs.filter=qa(Wa(Gl)),Vs.paintProperty=qa(Wa(ag)),Vs.layoutProperty=qa(Wa(og));const Za=Vs,$y=Za.light,pf=Za.paintProperty,fg=Za.layoutProperty;function Id(u,a){let h=!1;if(a&&a.length)for(const p of a)u.fire(new $e(new Error(p.message))),h=!0;return h}class Wl{constructor(a,h,p){const _=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;const E=new Int32Array(this.arrayBuffer);a=E[0],this.d=(h=E[1])+2*(p=E[2]);for(let L=0;L<this.d*this.d;L++){const $=E[3+L],V=E[3+L+1];_.push($===V?null:E.subarray($,V))}const M=E[3+_.length+1];this.keys=E.subarray(E[3+_.length],M),this.bboxes=E.subarray(M),this.insert=this._insertReadonly}else{this.d=h+2*p;for(let E=0;E<this.d*this.d;E++)_.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=a,this.padding=p,this.scale=h/a,this.uid=0;const S=p/h*a;this.min=-S,this.max=a+S}insert(a,h,p,_,S){this._forEachCell(h,p,_,S,this._insertCell,this.uid++,void 0,void 0),this.keys.push(a),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(_),this.bboxes.push(S)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(a,h,p,_,S,E){this.cells[S].push(E)}query(a,h,p,_,S){const E=this.min,M=this.max;if(a<=E&&h<=E&&M<=p&&M<=_&&!S)return Array.prototype.slice.call(this.keys);{const L=[];return this._forEachCell(a,h,p,_,this._queryCell,L,{},S),L}}_queryCell(a,h,p,_,S,E,M,L){const $=this.cells[S];if($!==null){const V=this.keys,Y=this.bboxes;for(let ie=0;ie<$.length;ie++){const ce=$[ie];if(M[ce]===void 0){const de=4*ce;(L?L(Y[de+0],Y[de+1],Y[de+2],Y[de+3]):a<=Y[de+2]&&h<=Y[de+3]&&p>=Y[de+0]&&_>=Y[de+1])?(M[ce]=!0,E.push(V[ce])):M[ce]=!1}}}}_forEachCell(a,h,p,_,S,E,M,L){const $=this._convertToCellCoord(a),V=this._convertToCellCoord(h),Y=this._convertToCellCoord(p),ie=this._convertToCellCoord(_);for(let ce=$;ce<=Y;ce++)for(let de=V;de<=ie;de++){const be=this.d*de+ce;if((!L||L(this._convertFromCellCoord(ce),this._convertFromCellCoord(de),this._convertFromCellCoord(ce+1),this._convertFromCellCoord(de+1)))&&S.call(this,a,h,p,_,be,E,M,L))return}}_convertFromCellCoord(a){return(a-this.padding)/this.scale}_convertToCellCoord(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const a=this.cells,h=3+this.cells.length+1+1;let p=0;for(let E=0;E<this.cells.length;E++)p+=this.cells[E].length;const _=new Int32Array(h+p+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;let S=h;for(let E=0;E<a.length;E++){const M=a[E];_[3+E]=S,_.set(M,S),S+=M.length}return _[3+a.length]=S,_.set(this.keys,S),S+=this.keys.length,_[3+a.length+1]=S,_.set(this.bboxes,S),S+=this.bboxes.length,_.buffer}static serialize(a,h){const p=a.toArrayBuffer();return h&&h.push(p),{buffer:p}}static deserialize(a){return new Wl(a.buffer)}}const Ka={};function un(u,a,h={}){if(Ka[u])throw new Error(`${u} is already registered.`);Object.defineProperty(a,"_classRegistryKey",{value:u,writeable:!1}),Ka[u]={klass:a,omit:h.omit||[],shallow:h.shallow||[]}}un("Object",Object),un("TransferableGridIndex",Wl),un("Color",hi),un("Error",Error),un("AJAXError",Dt),un("ResolvedImage",Dr),un("StylePropertyFunction",Zc),un("StyleExpression",cf,{omit:["_evaluator"]}),un("ZoomDependentExpression",xd),un("ZoomConstantExpression",uf),un("CompoundExpression",js,{omit:["_evaluate"]});for(const u in Vl)Vl[u]._classRegistryKey||un(`Expression_${u}`,Vl[u]);function Ad(u){return u&&typeof ArrayBuffer<"u"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function Co(u,a){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob)return u;if(Ad(u)||Qe(u))return a&&a.push(u),u;if(ArrayBuffer.isView(u)){const h=u;return a&&a.push(h.buffer),h}if(u instanceof ImageData)return a&&a.push(u.data.buffer),u;if(Array.isArray(u)){const h=[];for(const p of u)h.push(Co(p,a));return h}if(typeof u=="object"){const h=u.constructor,p=h._classRegistryKey;if(!p)throw new Error("can't serialize object of unregistered class");if(!Ka[p])throw new Error(`${p} is not registered.`);const _=h.serialize?h.serialize(u,a):{};if(h.serialize){if(a&&_===a[a.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const S in u){if(!u.hasOwnProperty(S)||Ka[p].omit.indexOf(S)>=0)continue;const E=u[S];_[S]=Ka[p].shallow.indexOf(S)>=0?E:Co(E,a)}u instanceof Error&&(_.message=u.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return p!=="Object"&&(_.$name=p),_}throw new Error("can't serialize object of type "+typeof u)}function ql(u){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob||Ad(u)||Qe(u)||ArrayBuffer.isView(u)||u instanceof ImageData)return u;if(Array.isArray(u))return u.map(ql);if(typeof u=="object"){const a=u.$name||"Object";if(!Ka[a])throw new Error(`can't deserialize unregistered class ${a}`);const{klass:h}=Ka[a];if(!h)throw new Error(`can't deserialize unregistered class ${a}`);if(h.deserialize)return h.deserialize(u);const p=Object.create(h.prototype);for(const _ of Object.keys(u)){if(_==="$name")continue;const S=u[_];p[_]=Ka[a].shallow.indexOf(_)>=0?S:ql(S)}return p}throw new Error("can't deserialize object of type "+typeof u)}class pg{constructor(){this.first=!0}update(a,h){const p=Math.floor(a);return this.first?(this.first=!1,this.lastIntegerZoom=p,this.lastIntegerZoomTime=0,this.lastZoom=a,this.lastFloorZoom=p,!0):(this.lastFloorZoom>p?(this.lastIntegerZoom=p+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<p&&(this.lastIntegerZoom=p,this.lastIntegerZoomTime=h),a!==this.lastZoom&&(this.lastZoom=a,this.lastFloorZoom=p,!0))}}const rn={"Latin-1 Supplement":u=>u>=128&&u<=255,Arabic:u=>u>=1536&&u<=1791,"Arabic Supplement":u=>u>=1872&&u<=1919,"Arabic Extended-A":u=>u>=2208&&u<=2303,"Hangul Jamo":u=>u>=4352&&u<=4607,"Unified Canadian Aboriginal Syllabics":u=>u>=5120&&u<=5759,Khmer:u=>u>=6016&&u<=6143,"Unified Canadian Aboriginal Syllabics Extended":u=>u>=6320&&u<=6399,"General Punctuation":u=>u>=8192&&u<=8303,"Letterlike Symbols":u=>u>=8448&&u<=8527,"Number Forms":u=>u>=8528&&u<=8591,"Miscellaneous Technical":u=>u>=8960&&u<=9215,"Control Pictures":u=>u>=9216&&u<=9279,"Optical Character Recognition":u=>u>=9280&&u<=9311,"Enclosed Alphanumerics":u=>u>=9312&&u<=9471,"Geometric Shapes":u=>u>=9632&&u<=9727,"Miscellaneous Symbols":u=>u>=9728&&u<=9983,"Miscellaneous Symbols and Arrows":u=>u>=11008&&u<=11263,"CJK Radicals Supplement":u=>u>=11904&&u<=12031,"Kangxi Radicals":u=>u>=12032&&u<=12255,"Ideographic Description Characters":u=>u>=12272&&u<=12287,"CJK Symbols and Punctuation":u=>u>=12288&&u<=12351,Hiragana:u=>u>=12352&&u<=12447,Katakana:u=>u>=12448&&u<=12543,Bopomofo:u=>u>=12544&&u<=12591,"Hangul Compatibility Jamo":u=>u>=12592&&u<=12687,Kanbun:u=>u>=12688&&u<=12703,"Bopomofo Extended":u=>u>=12704&&u<=12735,"CJK Strokes":u=>u>=12736&&u<=12783,"Katakana Phonetic Extensions":u=>u>=12784&&u<=12799,"Enclosed CJK Letters and Months":u=>u>=12800&&u<=13055,"CJK Compatibility":u=>u>=13056&&u<=13311,"CJK Unified Ideographs Extension A":u=>u>=13312&&u<=19903,"Yijing Hexagram Symbols":u=>u>=19904&&u<=19967,"CJK Unified Ideographs":u=>u>=19968&&u<=40959,"Yi Syllables":u=>u>=40960&&u<=42127,"Yi Radicals":u=>u>=42128&&u<=42191,"Hangul Jamo Extended-A":u=>u>=43360&&u<=43391,"Hangul Syllables":u=>u>=44032&&u<=55215,"Hangul Jamo Extended-B":u=>u>=55216&&u<=55295,"Private Use Area":u=>u>=57344&&u<=63743,"CJK Compatibility Ideographs":u=>u>=63744&&u<=64255,"Arabic Presentation Forms-A":u=>u>=64336&&u<=65023,"Vertical Forms":u=>u>=65040&&u<=65055,"CJK Compatibility Forms":u=>u>=65072&&u<=65103,"Small Form Variants":u=>u>=65104&&u<=65135,"Arabic Presentation Forms-B":u=>u>=65136&&u<=65279,"Halfwidth and Fullwidth Forms":u=>u>=65280&&u<=65519};function mf(u){for(const a of u)if(vf(a.charCodeAt(0)))return!0;return!1}function gf(u){for(const a of u)if(!zy(a.charCodeAt(0)))return!1;return!0}function zy(u){return!(rn.Arabic(u)||rn["Arabic Supplement"](u)||rn["Arabic Extended-A"](u)||rn["Arabic Presentation Forms-A"](u)||rn["Arabic Presentation Forms-B"](u))}function vf(u){return!(u!==746&&u!==747&&(u<4352||!(rn["Bopomofo Extended"](u)||rn.Bopomofo(u)||rn["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||rn["CJK Compatibility Ideographs"](u)||rn["CJK Compatibility"](u)||rn["CJK Radicals Supplement"](u)||rn["CJK Strokes"](u)||!(!rn["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||rn["CJK Unified Ideographs Extension A"](u)||rn["CJK Unified Ideographs"](u)||rn["Enclosed CJK Letters and Months"](u)||rn["Hangul Compatibility Jamo"](u)||rn["Hangul Jamo Extended-A"](u)||rn["Hangul Jamo Extended-B"](u)||rn["Hangul Jamo"](u)||rn["Hangul Syllables"](u)||rn.Hiragana(u)||rn["Ideographic Description Characters"](u)||rn.Kanbun(u)||rn["Kangxi Radicals"](u)||rn["Katakana Phonetic Extensions"](u)||rn.Katakana(u)&&u!==12540||!(!rn["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!rn["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||rn["Unified Canadian Aboriginal Syllabics"](u)||rn["Unified Canadian Aboriginal Syllabics Extended"](u)||rn["Vertical Forms"](u)||rn["Yijing Hexagram Symbols"](u)||rn["Yi Syllables"](u)||rn["Yi Radicals"](u))))}function mg(u){return!(vf(u)||function(a){return!!(rn["Latin-1 Supplement"](a)&&(a===167||a===169||a===174||a===177||a===188||a===189||a===190||a===215||a===247)||rn["General Punctuation"](a)&&(a===8214||a===8224||a===8225||a===8240||a===8241||a===8251||a===8252||a===8258||a===8263||a===8264||a===8265||a===8273)||rn["Letterlike Symbols"](a)||rn["Number Forms"](a)||rn["Miscellaneous Technical"](a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||a===9003||a>=9085&&a<=9114||a>=9150&&a<=9165||a===9167||a>=9169&&a<=9179||a>=9186&&a<=9215)||rn["Control Pictures"](a)&&a!==9251||rn["Optical Character Recognition"](a)||rn["Enclosed Alphanumerics"](a)||rn["Geometric Shapes"](a)||rn["Miscellaneous Symbols"](a)&&!(a>=9754&&a<=9759)||rn["Miscellaneous Symbols and Arrows"](a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||rn["CJK Symbols and Punctuation"](a)||rn.Katakana(a)||rn["Private Use Area"](a)||rn["CJK Compatibility Forms"](a)||rn["Small Form Variants"](a)||rn["Halfwidth and Fullwidth Forms"](a)||a===8734||a===8756||a===8757||a>=9984&&a<=10087||a>=10102&&a<=10131||a===65532||a===65533)}(u))}function gg(u){return u>=1424&&u<=2303||rn["Arabic Presentation Forms-A"](u)||rn["Arabic Presentation Forms-B"](u)}function vg(u,a){return!(!a&&gg(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||rn.Khmer(u))}function Ny(u){for(const a of u)if(gg(a.charCodeAt(0)))return!0;return!1}const _f="deferred",yf="loading",bf="loaded";let xf=null,rs="unavailable",Io=null;const nu=function(u){u&&typeof u=="string"&&u.indexOf("NetworkError")>-1&&(rs="error"),xf&&xf(u)};function wf(){iu.fire(new he("pluginStateChange",{pluginStatus:rs,pluginURL:Io}))}const iu=new et,Sf=function(){return rs},_g=function(){if(rs!==_f||!Io)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");rs=yf,wf(),Io&&me({url:Io},u=>{u?nu(u):(rs=bf,wf())})},ws={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>rs===bf||ws.applyArabicShaping!=null,isLoading:()=>rs===yf,setState(u){if(!Ve())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");rs=u.pluginStatus,Io=u.pluginURL},isParsed(){if(!Ve())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return ws.applyArabicShaping!=null&&ws.processBidirectionalText!=null&&ws.processStyledBidirectionalText!=null},getPluginURL(){if(!Ve())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Io}};class Di{constructor(a,h){this.zoom=a,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new pg,this.transition={})}isSupportedScript(a){return function(h,p){for(const _ of h)if(!vg(_.charCodeAt(0),p))return!1;return!0}(a,ws.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const a=this.zoom,h=a-Math.floor(a),p=this.crossFadingFactor();return a>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*p}:{fromScale:.5,toScale:1,t:1-(1-p)*h}}}class Md{constructor(a,h){this.property=a,this.value=h,this.expression=function(p,_){if(Bi(p))return new Zc(p,_);if(yd(p)){const S=df(p,_);if(S.result==="error")throw new Error(S.value.map(E=>`${E.key}: ${E.message}`).join(", "));return S.value}{let S=p;return _.type==="color"&&typeof p=="string"?S=hi.parse(p):_.type!=="padding"||typeof p!="number"&&!Array.isArray(p)?_.type==="variableAnchorOffsetCollection"&&Array.isArray(p)&&(S=Ns.parse(p)):S=_s.parse(p),{kind:"constant",evaluate:()=>S}}}(h===void 0?a.specification.default:h,a.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(a,h,p){return this.property.possiblyEvaluate(this,a,h,p)}}class Tf{constructor(a){this.property=a,this.value=new Md(a,void 0)}transitioned(a,h){return new bg(this.property,this.value,h,se({},a.transition,this.transition),a.now)}untransitioned(){return new bg(this.property,this.value,null,{},0)}}class yg{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)}getValue(a){return te(this._values[a].value.value)}setValue(a,h){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new Tf(this._values[a].property)),this._values[a].value=new Md(this._values[a].property,h===null?void 0:te(h))}getTransition(a){return te(this._values[a].transition)}setTransition(a,h){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new Tf(this._values[a].property)),this._values[a].transition=te(h)||void 0}serialize(){const a={};for(const h of Object.keys(this._values)){const p=this.getValue(h);p!==void 0&&(a[h]=p);const _=this.getTransition(h);_!==void 0&&(a[`${h}-transition`]=_)}return a}transitioned(a,h){const p=new xg(this._properties);for(const _ of Object.keys(this._values))p._values[_]=this._values[_].transitioned(a,h._values[_]);return p}untransitioned(){const a=new xg(this._properties);for(const h of Object.keys(this._values))a._values[h]=this._values[h].untransitioned();return a}}class bg{constructor(a,h,p,_,S){this.property=a,this.value=h,this.begin=S+_.delay||0,this.end=this.begin+_.duration||0,a.specification.transition&&(_.delay||_.duration)&&(this.prior=p)}possiblyEvaluate(a,h,p){const _=a.now||0,S=this.value.possiblyEvaluate(a,h,p),E=this.prior;if(E){if(_>this.end)return this.prior=null,S;if(this.value.isDataDriven())return this.prior=null,S;if(_<this.begin)return E.possiblyEvaluate(a,h,p);{const M=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(E.possiblyEvaluate(a,h,p),S,function(L){if(L<=0)return 0;if(L>=1)return 1;const $=L*L,V=$*L;return 4*(L<.5?V:3*(L-$)+V-.75)}(M))}}return S}}class xg{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,h,p){const _=new kd(this._properties);for(const S of Object.keys(this._values))_._values[S]=this._values[S].possiblyEvaluate(a,h,p);return _}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class By{constructor(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)}hasValue(a){return this._values[a].value!==void 0}getValue(a){return te(this._values[a].value)}setValue(a,h){this._values[a]=new Md(this._values[a].property,h===null?void 0:te(h))}serialize(){const a={};for(const h of Object.keys(this._values)){const p=this.getValue(h);p!==void 0&&(a[h]=p)}return a}possiblyEvaluate(a,h,p){const _=new kd(this._properties);for(const S of Object.keys(this._values))_._values[S]=this._values[S].possiblyEvaluate(a,h,p);return _}}class Gr{constructor(a,h,p){this.property=a,this.value=h,this.parameters=p}isConstant(){return this.value.kind==="constant"}constantOr(a){return this.value.kind==="constant"?this.value.value:a}evaluate(a,h,p,_){return this.property.evaluate(this.value,this.parameters,a,h,p,_)}}class kd{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class wn{constructor(a){this.specification=a}possiblyEvaluate(a,h){if(a.isDataDriven())throw new Error("Value should not be data driven");return a.expression.evaluate(h)}interpolate(a,h,p){const _=ys[this.specification.type];return _?_(a,h,p):a}}class Ln{constructor(a,h){this.specification=a,this.overrides=h}possiblyEvaluate(a,h,p,_){return new Gr(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(h,null,{},p,_)}:a.expression,h)}interpolate(a,h,p){if(a.value.kind!=="constant"||h.value.kind!=="constant")return a;if(a.value.value===void 0||h.value.value===void 0)return new Gr(this,{kind:"constant",value:void 0},a.parameters);const _=ys[this.specification.type];if(_){const S=_(a.value.value,h.value.value,p);return new Gr(this,{kind:"constant",value:S},a.parameters)}return a}evaluate(a,h,p,_,S,E){return a.kind==="constant"?a.value:a.evaluate(h,p,_,S,E)}}class ru extends Ln{possiblyEvaluate(a,h,p,_){if(a.value===void 0)return new Gr(this,{kind:"constant",value:void 0},h);if(a.expression.kind==="constant"){const S=a.expression.evaluate(h,null,{},p,_),E=a.property.specification.type==="resolvedImage"&&typeof S!="string"?S.name:S,M=this._calculate(E,E,E,h);return new Gr(this,{kind:"constant",value:M},h)}if(a.expression.kind==="camera"){const S=this._calculate(a.expression.evaluate({zoom:h.zoom-1}),a.expression.evaluate({zoom:h.zoom}),a.expression.evaluate({zoom:h.zoom+1}),h);return new Gr(this,{kind:"constant",value:S},h)}return new Gr(this,a.expression,h)}evaluate(a,h,p,_,S,E){if(a.kind==="source"){const M=a.evaluate(h,p,_,S,E);return this._calculate(M,M,M,h)}return a.kind==="composite"?this._calculate(a.evaluate({zoom:Math.floor(h.zoom)-1},p,_),a.evaluate({zoom:Math.floor(h.zoom)},p,_),a.evaluate({zoom:Math.floor(h.zoom)+1},p,_),h):a.value}_calculate(a,h,p,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:a,to:h}:{from:p,to:h}}interpolate(a){return a}}class Ef{constructor(a){this.specification=a}possiblyEvaluate(a,h,p,_){if(a.value!==void 0){if(a.expression.kind==="constant"){const S=a.expression.evaluate(h,null,{},p,_);return this._calculate(S,S,S,h)}return this._calculate(a.expression.evaluate(new Di(Math.floor(h.zoom-1),h)),a.expression.evaluate(new Di(Math.floor(h.zoom),h)),a.expression.evaluate(new Di(Math.floor(h.zoom+1),h)),h)}}_calculate(a,h,p,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:a,to:h}:{from:p,to:h}}interpolate(a){return a}}class Cf{constructor(a){this.specification=a}possiblyEvaluate(a,h,p,_){return!!a.expression.evaluate(h,null,{},p,_)}interpolate(){return!1}}class sr{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in a){const p=a[h];p.specification.overridable&&this.overridableProperties.push(h);const _=this.defaultPropertyValues[h]=new Md(p,void 0),S=this.defaultTransitionablePropertyValues[h]=new Tf(p);this.defaultTransitioningPropertyValues[h]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=_.possiblyEvaluate({})}}}un("DataDrivenProperty",Ln),un("DataConstantProperty",wn),un("CrossFadedDataDrivenProperty",ru),un("CrossFadedProperty",Ef),un("ColorRampProperty",Cf);const If="-transition";class Us extends et{constructor(a,h){if(super(),this.id=a.id,this.type=a.type,this._featureFilter={filter:()=>!0,needGeometry:!1},a.type!=="custom"&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,a.type!=="background"&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter),h.layout&&(this._unevaluatedLayout=new By(h.layout)),h.paint)){this._transitionablePaint=new yg(h.paint);for(const p in a.paint)this.setPaintProperty(p,a.paint[p],{validate:!1});for(const p in a.layout)this.setLayoutProperty(p,a.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new kd(h.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(a){return a==="visibility"?this.visibility:this._unevaluatedLayout.getValue(a)}setLayoutProperty(a,h,p={}){h!=null&&this._validate(fg,`layers.${this.id}.layout.${a}`,a,h,p)||(a!=="visibility"?this._unevaluatedLayout.setValue(a,h):this.visibility=h)}getPaintProperty(a){return a.endsWith(If)?this._transitionablePaint.getTransition(a.slice(0,-11)):this._transitionablePaint.getValue(a)}setPaintProperty(a,h,p={}){if(h!=null&&this._validate(pf,`layers.${this.id}.paint.${a}`,a,h,p))return!1;if(a.endsWith(If))return this._transitionablePaint.setTransition(a.slice(0,-11),h||void 0),!1;{const _=this._transitionablePaint._values[a],S=_.property.specification["property-type"]==="cross-faded-data-driven",E=_.value.isDataDriven(),M=_.value;this._transitionablePaint.setValue(a,h),this._handleSpecialPaintPropertyUpdate(a);const L=this._transitionablePaint._values[a].value;return L.isDataDriven()||E||S||this._handleOverridablePaintPropertyUpdate(a,M,L)}}_handleSpecialPaintPropertyUpdate(a){}_handleOverridablePaintPropertyUpdate(a,h,p){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||this.visibility==="none"}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,h){a.getCrossfadeParameters&&(this._crossfadeParameters=a.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,h)}serialize(){const a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(a.layout=a.layout||{},a.layout.visibility=this.visibility),W(a,(h,p)=>!(h===void 0||p==="layout"&&!Object.keys(h).length||p==="paint"&&!Object.keys(h).length))}_validate(a,h,p,_,S={}){return(!S||S.validate!==!1)&&Id(this,a.call(Za,{key:h,layerType:this.type,objectKey:p,value:_,styleSpec:Se,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const a in this.paint._values){const h=this.paint.get(a);if(h instanceof Gr&&Ul(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}const wg={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class sl{constructor(a,h){this._structArray=a,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Zi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,h){return a._trim(),h&&(a.isTransferred=!0,h.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){const h=Object.create(this.prototype);return h.arrayBuffer=a.arrayBuffer,h.length=a.length,h.capacity=a.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Vi(u,a=1){let h=0,p=0;return{members:u.map(_=>{const S=wg[_.type].BYTES_PER_ELEMENT,E=h=Zl(h,Math.max(a,S)),M=_.components||1;return p=Math.max(p,S),h+=S*M,{name:_.name,type:_.type,components:M,offset:E}}),size:Zl(h,Math.max(p,a)),alignment:a}}function Zl(u,a){return Math.ceil(u/a)*a}class su extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h){const p=this.length;return this.resize(p+1),this.emplace(p,a,h)}emplace(a,h,p){const _=2*a;return this.int16[_+0]=h,this.int16[_+1]=p,a}}su.prototype.bytesPerElement=4,un("StructArrayLayout2i4",su);class au extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,p){const _=this.length;return this.resize(_+1),this.emplace(_,a,h,p)}emplace(a,h,p,_){const S=3*a;return this.int16[S+0]=h,this.int16[S+1]=p,this.int16[S+2]=_,a}}au.prototype.bytesPerElement=6,un("StructArrayLayout3i6",au);class al extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,p,_){const S=this.length;return this.resize(S+1),this.emplace(S,a,h,p,_)}emplace(a,h,p,_,S){const E=4*a;return this.int16[E+0]=h,this.int16[E+1]=p,this.int16[E+2]=_,this.int16[E+3]=S,a}}al.prototype.bytesPerElement=8,un("StructArrayLayout4i8",al);class Af extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,p,_,S,E){const M=this.length;return this.resize(M+1),this.emplace(M,a,h,p,_,S,E)}emplace(a,h,p,_,S,E,M){const L=6*a;return this.int16[L+0]=h,this.int16[L+1]=p,this.int16[L+2]=_,this.int16[L+3]=S,this.int16[L+4]=E,this.int16[L+5]=M,a}}Af.prototype.bytesPerElement=12,un("StructArrayLayout2i4i12",Af);class Mf extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,p,_,S,E){const M=this.length;return this.resize(M+1),this.emplace(M,a,h,p,_,S,E)}emplace(a,h,p,_,S,E,M){const L=4*a,$=8*a;return this.int16[L+0]=h,this.int16[L+1]=p,this.uint8[$+4]=_,this.uint8[$+5]=S,this.uint8[$+6]=E,this.uint8[$+7]=M,a}}Mf.prototype.bytesPerElement=8,un("StructArrayLayout2i4ub8",Mf);class Kl extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h){const p=this.length;return this.resize(p+1),this.emplace(p,a,h)}emplace(a,h,p){const _=2*a;return this.float32[_+0]=h,this.float32[_+1]=p,a}}Kl.prototype.bytesPerElement=8,un("StructArrayLayout2f8",Kl);class kf extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h,p,_,S,E,M,L,$,V){const Y=this.length;return this.resize(Y+1),this.emplace(Y,a,h,p,_,S,E,M,L,$,V)}emplace(a,h,p,_,S,E,M,L,$,V,Y){const ie=10*a;return this.uint16[ie+0]=h,this.uint16[ie+1]=p,this.uint16[ie+2]=_,this.uint16[ie+3]=S,this.uint16[ie+4]=E,this.uint16[ie+5]=M,this.uint16[ie+6]=L,this.uint16[ie+7]=$,this.uint16[ie+8]=V,this.uint16[ie+9]=Y,a}}kf.prototype.bytesPerElement=20,un("StructArrayLayout10ui20",kf);class Pf extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h,p,_,S,E,M,L,$,V,Y,ie){const ce=this.length;return this.resize(ce+1),this.emplace(ce,a,h,p,_,S,E,M,L,$,V,Y,ie)}emplace(a,h,p,_,S,E,M,L,$,V,Y,ie,ce){const de=12*a;return this.int16[de+0]=h,this.int16[de+1]=p,this.int16[de+2]=_,this.int16[de+3]=S,this.uint16[de+4]=E,this.uint16[de+5]=M,this.uint16[de+6]=L,this.uint16[de+7]=$,this.int16[de+8]=V,this.int16[de+9]=Y,this.int16[de+10]=ie,this.int16[de+11]=ce,a}}Pf.prototype.bytesPerElement=24,un("StructArrayLayout4i4ui4i24",Pf);class gi extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p){const _=this.length;return this.resize(_+1),this.emplace(_,a,h,p)}emplace(a,h,p,_){const S=3*a;return this.float32[S+0]=h,this.float32[S+1]=p,this.float32[S+2]=_,a}}gi.prototype.bytesPerElement=12,un("StructArrayLayout3f12",gi);class w extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){const h=this.length;return this.resize(h+1),this.emplace(h,a)}emplace(a,h){return this.uint32[1*a+0]=h,a}}w.prototype.bytesPerElement=4,un("StructArrayLayout1ul4",w);class o extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h,p,_,S,E,M,L,$){const V=this.length;return this.resize(V+1),this.emplace(V,a,h,p,_,S,E,M,L,$)}emplace(a,h,p,_,S,E,M,L,$,V){const Y=10*a,ie=5*a;return this.int16[Y+0]=h,this.int16[Y+1]=p,this.int16[Y+2]=_,this.int16[Y+3]=S,this.int16[Y+4]=E,this.int16[Y+5]=M,this.uint32[ie+3]=L,this.uint16[Y+8]=$,this.uint16[Y+9]=V,a}}o.prototype.bytesPerElement=20,un("StructArrayLayout6i1ul2ui20",o);class f extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,p,_,S,E){const M=this.length;return this.resize(M+1),this.emplace(M,a,h,p,_,S,E)}emplace(a,h,p,_,S,E,M){const L=6*a;return this.int16[L+0]=h,this.int16[L+1]=p,this.int16[L+2]=_,this.int16[L+3]=S,this.int16[L+4]=E,this.int16[L+5]=M,a}}f.prototype.bytesPerElement=12,un("StructArrayLayout2i2i2i12",f);class v extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,p,_,S){const E=this.length;return this.resize(E+1),this.emplace(E,a,h,p,_,S)}emplace(a,h,p,_,S,E){const M=4*a,L=8*a;return this.float32[M+0]=h,this.float32[M+1]=p,this.float32[M+2]=_,this.int16[L+6]=S,this.int16[L+7]=E,a}}v.prototype.bytesPerElement=16,un("StructArrayLayout2f1f2i16",v);class b extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p,_){const S=this.length;return this.resize(S+1),this.emplace(S,a,h,p,_)}emplace(a,h,p,_,S){const E=12*a,M=3*a;return this.uint8[E+0]=h,this.uint8[E+1]=p,this.float32[M+1]=_,this.float32[M+2]=S,a}}b.prototype.bytesPerElement=12,un("StructArrayLayout2ub2f12",b);class T extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h,p){const _=this.length;return this.resize(_+1),this.emplace(_,a,h,p)}emplace(a,h,p,_){const S=3*a;return this.uint16[S+0]=h,this.uint16[S+1]=p,this.uint16[S+2]=_,a}}T.prototype.bytesPerElement=6,un("StructArrayLayout3ui6",T);class P extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p,_,S,E,M,L,$,V,Y,ie,ce,de,be,Pe,Re){const Je=this.length;return this.resize(Je+1),this.emplace(Je,a,h,p,_,S,E,M,L,$,V,Y,ie,ce,de,be,Pe,Re)}emplace(a,h,p,_,S,E,M,L,$,V,Y,ie,ce,de,be,Pe,Re,Je){const je=24*a,rt=12*a,dt=48*a;return this.int16[je+0]=h,this.int16[je+1]=p,this.uint16[je+2]=_,this.uint16[je+3]=S,this.uint32[rt+2]=E,this.uint32[rt+3]=M,this.uint32[rt+4]=L,this.uint16[je+10]=$,this.uint16[je+11]=V,this.uint16[je+12]=Y,this.float32[rt+7]=ie,this.float32[rt+8]=ce,this.uint8[dt+36]=de,this.uint8[dt+37]=be,this.uint8[dt+38]=Pe,this.uint32[rt+10]=Re,this.int16[je+22]=Je,a}}P.prototype.bytesPerElement=48,un("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",P);class D extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p,_,S,E,M,L,$,V,Y,ie,ce,de,be,Pe,Re,Je,je,rt,dt,Lt,sn,gn,en,Jt,qt,hn){const Xt=this.length;return this.resize(Xt+1),this.emplace(Xt,a,h,p,_,S,E,M,L,$,V,Y,ie,ce,de,be,Pe,Re,Je,je,rt,dt,Lt,sn,gn,en,Jt,qt,hn)}emplace(a,h,p,_,S,E,M,L,$,V,Y,ie,ce,de,be,Pe,Re,Je,je,rt,dt,Lt,sn,gn,en,Jt,qt,hn,Xt){const jt=32*a,An=16*a;return this.int16[jt+0]=h,this.int16[jt+1]=p,this.int16[jt+2]=_,this.int16[jt+3]=S,this.int16[jt+4]=E,this.int16[jt+5]=M,this.int16[jt+6]=L,this.int16[jt+7]=$,this.uint16[jt+8]=V,this.uint16[jt+9]=Y,this.uint16[jt+10]=ie,this.uint16[jt+11]=ce,this.uint16[jt+12]=de,this.uint16[jt+13]=be,this.uint16[jt+14]=Pe,this.uint16[jt+15]=Re,this.uint16[jt+16]=Je,this.uint16[jt+17]=je,this.uint16[jt+18]=rt,this.uint16[jt+19]=dt,this.uint16[jt+20]=Lt,this.uint16[jt+21]=sn,this.uint16[jt+22]=gn,this.uint32[An+12]=en,this.float32[An+13]=Jt,this.float32[An+14]=qt,this.uint16[jt+30]=hn,this.uint16[jt+31]=Xt,a}}D.prototype.bytesPerElement=64,un("StructArrayLayout8i15ui1ul2f2ui64",D);class R extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){const h=this.length;return this.resize(h+1),this.emplace(h,a)}emplace(a,h){return this.float32[1*a+0]=h,a}}R.prototype.bytesPerElement=4,un("StructArrayLayout1f4",R);class N extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p){const _=this.length;return this.resize(_+1),this.emplace(_,a,h,p)}emplace(a,h,p,_){const S=3*a;return this.uint16[6*a+0]=h,this.float32[S+1]=p,this.float32[S+2]=_,a}}N.prototype.bytesPerElement=12,un("StructArrayLayout1ui2f12",N);class G extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h,p){const _=this.length;return this.resize(_+1),this.emplace(_,a,h,p)}emplace(a,h,p,_){const S=4*a;return this.uint32[2*a+0]=h,this.uint16[S+2]=p,this.uint16[S+3]=_,a}}G.prototype.bytesPerElement=8,un("StructArrayLayout1ul2ui8",G);class X extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h){const p=this.length;return this.resize(p+1),this.emplace(p,a,h)}emplace(a,h,p){const _=2*a;return this.uint16[_+0]=h,this.uint16[_+1]=p,a}}X.prototype.bytesPerElement=4,un("StructArrayLayout2ui4",X);class oe extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){const h=this.length;return this.resize(h+1),this.emplace(h,a)}emplace(a,h){return this.uint16[1*a+0]=h,a}}oe.prototype.bytesPerElement=2,un("StructArrayLayout1ui2",oe);class we extends Zi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p,_){const S=this.length;return this.resize(S+1),this.emplace(S,a,h,p,_)}emplace(a,h,p,_,S){const E=4*a;return this.float32[E+0]=h,this.float32[E+1]=p,this.float32[E+2]=_,this.float32[E+3]=S,a}}we.prototype.bytesPerElement=16,un("StructArrayLayout4f16",we);class xe extends sl{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new C(this.anchorPointX,this.anchorPointY)}}xe.prototype.size=20;class Me extends o{get(a){return new xe(this,a)}}un("CollisionBoxArray",Me);class ge extends sl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(a){this._structArray.uint8[this._pos1+37]=a}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(a){this._structArray.uint8[this._pos1+38]=a}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(a){this._structArray.uint32[this._pos4+10]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ge.prototype.size=48;class Ze extends P{get(a){return new ge(this,a)}}un("PlacedSymbolArray",Ze);class ct extends sl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(a){this._structArray.uint32[this._pos4+12]=a}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ct.prototype.size=64;class Le extends D{get(a){return new ct(this,a)}}un("SymbolInstanceArray",Le);class Ye extends R{getoffsetX(a){return this.float32[1*a+0]}}un("GlyphOffsetArray",Ye);class ht extends au{getx(a){return this.int16[3*a+0]}gety(a){return this.int16[3*a+1]}gettileUnitDistanceFromAnchor(a){return this.int16[3*a+2]}}un("SymbolLineVertexArray",ht);class pt extends sl{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}pt.prototype.size=12;class Pt extends N{get(a){return new pt(this,a)}}un("TextAnchorOffsetArray",Pt);class Bt extends sl{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Bt.prototype.size=8;class Rt extends G{get(a){return new Bt(this,a)}}un("FeatureIndexArray",Rt);class Gt extends su{}class mn extends su{}class Kn extends su{}class Yt extends Af{}class On extends Mf{}class vn extends Kl{}class Ei extends kf{}class qn extends Pf{}class Vn extends gi{}class Xn extends w{}class Ji extends f{}class Ii extends b{}class Lr extends T{}class gr extends X{}const ar=Vi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ss}=ar;class Li{constructor(a=[]){this.segments=a}prepareSegment(a,h,p,_){let S=this.segments[this.segments.length-1];return a>Li.MAX_VERTEX_ARRAY_LENGTH&&re(`Max vertices per segment is ${Li.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}`),(!S||S.vertexLength+a>Li.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==_)&&(S={vertexOffset:h.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0},_!==void 0&&(S.sortKey=_),this.segments.push(S)),S}get(){return this.segments}destroy(){for(const a of this.segments)for(const h in a.vaos)a.vaos[h].destroy()}static simpleSegment(a,h,p,_){return new Li([{vertexOffset:a,primitiveOffset:h,vertexLength:p,primitiveLength:_,vaos:{},sortKey:0}])}}function wa(u,a){return 256*(u=Q(Math.floor(u),0,255))+Q(Math.floor(a),0,255)}Li.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,un("SegmentVector",Li);const Sa=Vi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ao={exports:{}},ol={exports:{}};ol.exports=function(u,a){var h,p,_,S,E,M,L,$;for(p=u.length-(h=3&u.length),_=a,E=3432918353,M=461845907,$=0;$<p;)L=255&u.charCodeAt($)|(255&u.charCodeAt(++$))<<8|(255&u.charCodeAt(++$))<<16|(255&u.charCodeAt(++$))<<24,++$,_=27492+(65535&(S=5*(65535&(_=(_^=L=(65535&(L=(L=(65535&L)*E+(((L>>>16)*E&65535)<<16)&4294967295)<<15|L>>>17))*M+(((L>>>16)*M&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(S>>>16)&65535)<<16);switch(L=0,h){case 3:L^=(255&u.charCodeAt($+2))<<16;case 2:L^=(255&u.charCodeAt($+1))<<8;case 1:_^=L=(65535&(L=(L=(65535&(L^=255&u.charCodeAt($)))*E+(((L>>>16)*E&65535)<<16)&4294967295)<<15|L>>>17))*M+(((L>>>16)*M&65535)<<16)&4294967295}return _^=u.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0};var Xl=ol.exports,Br={exports:{}};Br.exports=function(u,a){for(var h,p=u.length,_=a^p,S=0;p>=4;)h=1540483477*(65535&(h=255&u.charCodeAt(S)|(255&u.charCodeAt(++S))<<8|(255&u.charCodeAt(++S))<<16|(255&u.charCodeAt(++S))<<24))+((1540483477*(h>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),p-=4,++S;switch(p){case 3:_^=(255&u.charCodeAt(S+2))<<16;case 2:_^=(255&u.charCodeAt(S+1))<<8;case 1:_=1540483477*(65535&(_^=255&u.charCodeAt(S)))+((1540483477*(_>>>16)&65535)<<16)}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0};var Or=Xl,Wr=Br.exports;Ao.exports=Or,Ao.exports.murmur3=Or,Ao.exports.murmur2=Wr;var ll=g(Ao.exports);class Qi{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(a,h,p,_){this.ids.push(vr(a)),this.positions.push(h,p,_)}getPositions(a){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=vr(a);let p=0,_=this.ids.length-1;for(;p<_;){const E=p+_>>1;this.ids[E]>=h?_=E:p=E+1}const S=[];for(;this.ids[p]===h;)S.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return S}static serialize(a,h){const p=new Float64Array(a.ids),_=new Uint32Array(a.positions);return ss(p,_,0,p.length-1),h&&h.push(p.buffer,_.buffer),{ids:p,positions:_}}static deserialize(a){const h=new Qi;return h.ids=a.ids,h.positions=a.positions,h.indexed=!0,h}}function vr(u){const a=+u;return!isNaN(a)&&a<=Number.MAX_SAFE_INTEGER?a:ll(String(u))}function ss(u,a,h,p){for(;h<p;){const _=u[h+p>>1];let S=h-1,E=p+1;for(;;){do S++;while(u[S]<_);do E--;while(u[E]>_);if(S>=E)break;er(u,S,E),er(a,3*S,3*E),er(a,3*S+1,3*E+1),er(a,3*S+2,3*E+2)}E-h<p-E?(ss(u,a,h,E),h=E+1):(ss(u,a,E+1,p),p=E)}}function er(u,a,h){const p=u[a];u[a]=u[h],u[h]=p}un("FeaturePositionMap",Qi);class cl{constructor(a,h){this.gl=a.gl,this.location=h}}class Pd extends cl{constructor(a,h){super(a,h),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1f(this.location,a))}}class Sg extends cl{constructor(a,h){super(a,h),this.current=[0,0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]&&a[3]===this.current[3]||(this.current=a,this.gl.uniform4f(this.location,a[0],a[1],a[2],a[3]))}}class Tg extends cl{constructor(a,h){super(a,h),this.current=hi.transparent}set(a){a.r===this.current.r&&a.g===this.current.g&&a.b===this.current.b&&a.a===this.current.a||(this.current=a,this.gl.uniform4f(this.location,a.r,a.g,a.b,a.a))}}const jy=new Float32Array(16);function Df(u){return[wa(255*u.r,255*u.g),wa(255*u.b,255*u.a)]}class Ta{constructor(a,h,p){this.value=a,this.uniformNames=h.map(_=>`u_${_}`),this.type=p}setUniform(a,h,p){a.set(p.constantOr(this.value))}getBinding(a,h,p){return this.type==="color"?new Tg(a,h):new Pd(a,h)}}class ul{constructor(a,h){this.uniformNames=h.map(p=>`u_${p}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(a,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=a.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=a.tlbr}setUniform(a,h,p,_){const S=_==="u_pattern_to"?this.patternTo:_==="u_pattern_from"?this.patternFrom:_==="u_pixel_ratio_to"?this.pixelRatioTo:_==="u_pixel_ratio_from"?this.pixelRatioFrom:null;S&&a.set(S)}getBinding(a,h,p){return p.substr(0,9)==="u_pattern"?new Sg(a,h):new Pd(a,h)}}class Ea{constructor(a,h,p,_){this.expression=a,this.type=p,this.maxValue=0,this.paintVertexAttributes=h.map(S=>({name:`a_${S}`,type:"Float32",components:p==="color"?2:1,offset:0})),this.paintVertexArray=new _}populatePaintArray(a,h,p,_,S){const E=this.paintVertexArray.length,M=this.expression.evaluate(new Di(0),h,{},_,[],S);this.paintVertexArray.resize(a),this._setPaintValue(E,a,M)}updatePaintArray(a,h,p,_){const S=this.expression.evaluate({zoom:0},p,_);this._setPaintValue(a,h,S)}_setPaintValue(a,h,p){if(this.type==="color"){const _=Df(p);for(let S=a;S<h;S++)this.paintVertexArray.emplace(S,_[0],_[1])}else{for(let _=a;_<h;_++)this.paintVertexArray.emplace(_,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Hs{constructor(a,h,p,_,S,E){this.expression=a,this.uniformNames=h.map(M=>`u_${M}_t`),this.type=p,this.useIntegerZoom=_,this.zoom=S,this.maxValue=0,this.paintVertexAttributes=h.map(M=>({name:`a_${M}`,type:"Float32",components:p==="color"?4:2,offset:0})),this.paintVertexArray=new E}populatePaintArray(a,h,p,_,S){const E=this.expression.evaluate(new Di(this.zoom),h,{},_,[],S),M=this.expression.evaluate(new Di(this.zoom+1),h,{},_,[],S),L=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(L,a,E,M)}updatePaintArray(a,h,p,_){const S=this.expression.evaluate({zoom:this.zoom},p,_),E=this.expression.evaluate({zoom:this.zoom+1},p,_);this._setPaintValue(a,h,S,E)}_setPaintValue(a,h,p,_){if(this.type==="color"){const S=Df(p),E=Df(_);for(let M=a;M<h;M++)this.paintVertexArray.emplace(M,S[0],S[1],E[0],E[1])}else{for(let S=a;S<h;S++)this.paintVertexArray.emplace(S,p,_);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(_))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,h){const p=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,_=Q(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);a.set(_)}getBinding(a,h,p){return new Pd(a,h)}}class Ca{constructor(a,h,p,_,S,E){this.expression=a,this.type=h,this.useIntegerZoom=p,this.zoom=_,this.layerId=E,this.zoomInPaintVertexArray=new S,this.zoomOutPaintVertexArray=new S}populatePaintArray(a,h,p){const _=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(a),this.zoomOutPaintVertexArray.resize(a),this._setPaintValues(_,a,h.patterns&&h.patterns[this.layerId],p)}updatePaintArray(a,h,p,_,S){this._setPaintValues(a,h,p.patterns&&p.patterns[this.layerId],S)}_setPaintValues(a,h,p,_){if(!_||!p)return;const{min:S,mid:E,max:M}=p,L=_[S],$=_[E],V=_[M];if(L&&$&&V)for(let Y=a;Y<h;Y++)this.zoomInPaintVertexArray.emplace(Y,$.tl[0],$.tl[1],$.br[0],$.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],$.pixelRatio,L.pixelRatio),this.zoomOutPaintVertexArray.emplace(Y,$.tl[0],$.tl[1],$.br[0],$.br[1],V.tl[0],V.tl[1],V.br[0],V.br[1],$.pixelRatio,V.pixelRatio)}upload(a){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=a.createVertexBuffer(this.zoomInPaintVertexArray,Sa.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=a.createVertexBuffer(this.zoomOutPaintVertexArray,Sa.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Lf{constructor(a,h,p){this.binders={},this._buffers=[];const _=[];for(const S in a.paint._values){if(!p(S))continue;const E=a.paint.get(S);if(!(E instanceof Gr&&Ul(E.property.specification)))continue;const M=qD(S,a.type),L=E.value,$=E.property.specification.type,V=E.property.useIntegerZoom,Y=E.property.specification["property-type"],ie=Y==="cross-faded"||Y==="cross-faded-data-driven";if(L.kind==="constant")this.binders[S]=ie?new ul(L.value,M):new Ta(L.value,M,$),_.push(`/u_${S}`);else if(L.kind==="source"||ie){const ce=Vw(S,$,"source");this.binders[S]=ie?new Ca(L,$,V,h,ce,a.id):new Ea(L,M,$,ce),_.push(`/a_${S}`)}else{const ce=Vw(S,$,"composite");this.binders[S]=new Hs(L,M,$,V,h,ce),_.push(`/z_${S}`)}}this.cacheKey=_.sort().join("")}getMaxValue(a){const h=this.binders[a];return h instanceof Ea||h instanceof Hs?h.maxValue:0}populatePaintArrays(a,h,p,_,S){for(const E in this.binders){const M=this.binders[E];(M instanceof Ea||M instanceof Hs||M instanceof Ca)&&M.populatePaintArray(a,h,p,_,S)}}setConstantPatternPositions(a,h){for(const p in this.binders){const _=this.binders[p];_ instanceof ul&&_.setConstantPatternPositions(a,h)}}updatePaintArrays(a,h,p,_,S){let E=!1;for(const M in a){const L=h.getPositions(M);for(const $ of L){const V=p.feature($.index);for(const Y in this.binders){const ie=this.binders[Y];if((ie instanceof Ea||ie instanceof Hs||ie instanceof Ca)&&ie.expression.isStateDependent===!0){const ce=_.paint.get(Y);ie.expression=ce.value,ie.updatePaintArray($.start,$.end,V,a[M],S),E=!0}}}}return E}defines(){const a=[];for(const h in this.binders){const p=this.binders[h];(p instanceof Ta||p instanceof ul)&&a.push(...p.uniformNames.map(_=>`#define HAS_UNIFORM_${_}`))}return a}getBinderAttributes(){const a=[];for(const h in this.binders){const p=this.binders[h];if(p instanceof Ea||p instanceof Hs)for(let _=0;_<p.paintVertexAttributes.length;_++)a.push(p.paintVertexAttributes[_].name);else if(p instanceof Ca)for(let _=0;_<Sa.members.length;_++)a.push(Sa.members[_].name)}return a}getBinderUniforms(){const a=[];for(const h in this.binders){const p=this.binders[h];if(p instanceof Ta||p instanceof ul||p instanceof Hs)for(const _ of p.uniformNames)a.push(_)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a,h){const p=[];for(const _ in this.binders){const S=this.binders[_];if(S instanceof Ta||S instanceof ul||S instanceof Hs){for(const E of S.uniformNames)if(h[E]){const M=S.getBinding(a,h[E],E);p.push({name:E,property:_,binding:M})}}}return p}setUniforms(a,h,p,_){for(const{name:S,property:E,binding:M}of h)this.binders[E].setUniform(M,_,p.get(E),S)}updatePaintBuffers(a){this._buffers=[];for(const h in this.binders){const p=this.binders[h];if(a&&p instanceof Ca){const _=a.fromScale===2?p.zoomInPaintVertexBuffer:p.zoomOutPaintVertexBuffer;_&&this._buffers.push(_)}else(p instanceof Ea||p instanceof Hs)&&p.paintVertexBuffer&&this._buffers.push(p.paintVertexBuffer)}}upload(a){for(const h in this.binders){const p=this.binders[h];(p instanceof Ea||p instanceof Hs||p instanceof Ca)&&p.upload(a)}this.updatePaintBuffers()}destroy(){for(const a in this.binders){const h=this.binders[a];(h instanceof Ea||h instanceof Hs||h instanceof Ca)&&h.destroy()}}}class Xa{constructor(a,h,p=()=>!0){this.programConfigurations={};for(const _ of a)this.programConfigurations[_.id]=new Lf(_,h,p);this.needsUpload=!1,this._featureMap=new Qi,this._bufferOffset=0}populatePaintArrays(a,h,p,_,S,E){for(const M in this.programConfigurations)this.programConfigurations[M].populatePaintArrays(a,h,_,S,E);h.id!==void 0&&this._featureMap.add(h.id,p,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,h,p,_){for(const S of p)this.needsUpload=this.programConfigurations[S.id].updatePaintArrays(a,this._featureMap,h,S,_)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}function qD(u,a){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(`${a}-`,"").replace(/-/g,"_")]}function Vw(u,a,h){const p={color:{source:Kl,composite:we},number:{source:R,composite:Kl}},_=function(S){return{"line-pattern":{source:Ei,composite:Ei},"fill-pattern":{source:Ei,composite:Ei},"fill-extrusion-pattern":{source:Ei,composite:Ei}}[S]}(u);return _&&_[h]||p[a][h]}un("ConstantBinder",Ta),un("CrossFadedConstantBinder",ul),un("SourceExpressionBinder",Ea),un("CrossFadedCompositeBinder",Ca),un("CompositeExpressionBinder",Hs),un("ProgramConfiguration",Lf,{omit:["_buffers"]}),un("ProgramConfigurationSet",Xa);const ur=8192,Vy=Math.pow(2,14)-1,Uw=-Vy-1;function ou(u){const a=ur/u.extent,h=u.loadGeometry();for(let p=0;p<h.length;p++){const _=h[p];for(let S=0;S<_.length;S++){const E=_[S],M=Math.round(E.x*a),L=Math.round(E.y*a);E.x=Q(M,Uw,Vy),E.y=Q(L,Uw,Vy),(M<E.x||M>E.x+1||L<E.y||L>E.y+1)&&re("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function lu(u,a){return{type:u.type,id:u.id,properties:u.properties,geometry:a?ou(u):[]}}function Eg(u,a,h,p,_){u.emplaceBack(2*a+(p+1)/2,2*h+(_+1)/2)}class Uy{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(h=>h.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new mn,this.indexArray=new Lr,this.segments=new Li,this.programConfigurations=new Xa(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(a,h,p){const _=this.layers[0],S=[];let E=null,M=!1;_.type==="circle"&&(E=_.layout.get("circle-sort-key"),M=!E.isConstant());for(const{feature:L,id:$,index:V,sourceLayerIndex:Y}of a){const ie=this.layers[0]._featureFilter.needGeometry,ce=lu(L,ie);if(!this.layers[0]._featureFilter.filter(new Di(this.zoom),ce,p))continue;const de=M?E.evaluate(ce,{},p):void 0,be={id:$,properties:L.properties,type:L.type,sourceLayerIndex:Y,index:V,geometry:ie?ce.geometry:ou(L),patterns:{},sortKey:de};S.push(be)}M&&S.sort((L,$)=>L.sortKey-$.sortKey);for(const L of S){const{geometry:$,index:V,sourceLayerIndex:Y}=L,ie=a[V].feature;this.addFeature(L,$,V,p),h.featureIndex.insert(ie,$,V,Y,this.index)}}update(a,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,h,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Ss),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,h,p,_){for(const S of h)for(const E of S){const M=E.x,L=E.y;if(M<0||M>=ur||L<0||L>=ur)continue;const $=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),V=$.vertexLength;Eg(this.layoutVertexArray,M,L,-1,-1),Eg(this.layoutVertexArray,M,L,1,-1),Eg(this.layoutVertexArray,M,L,1,1),Eg(this.layoutVertexArray,M,L,-1,1),this.indexArray.emplaceBack(V,V+1,V+2),this.indexArray.emplaceBack(V,V+3,V+2),$.vertexLength+=4,$.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,{},_)}}function Hw(u,a){for(let h=0;h<u.length;h++)if(Dd(a,u[h]))return!0;for(let h=0;h<a.length;h++)if(Dd(u,a[h]))return!0;return!!Hy(u,a)}function ZD(u,a,h){return!!Dd(u,a)||!!Gy(a,u,h)}function Gw(u,a){if(u.length===1)return qw(a,u[0]);for(let h=0;h<a.length;h++){const p=a[h];for(let _=0;_<p.length;_++)if(Dd(u,p[_]))return!0}for(let h=0;h<u.length;h++)if(qw(a,u[h]))return!0;for(let h=0;h<a.length;h++)if(Hy(u,a[h]))return!0;return!1}function KD(u,a,h){if(u.length>1){if(Hy(u,a))return!0;for(let p=0;p<a.length;p++)if(Gy(a[p],u,h))return!0}for(let p=0;p<u.length;p++)if(Gy(u[p],a,h))return!0;return!1}function Hy(u,a){if(u.length===0||a.length===0)return!1;for(let h=0;h<u.length-1;h++){const p=u[h],_=u[h+1];for(let S=0;S<a.length-1;S++)if(XD(p,_,a[S],a[S+1]))return!0}return!1}function XD(u,a,h,p){return Te(u,h,p)!==Te(a,h,p)&&Te(u,a,h)!==Te(u,a,p)}function Gy(u,a,h){const p=h*h;if(a.length===1)return u.distSqr(a[0])<p;for(let _=1;_<a.length;_++)if(Ww(u,a[_-1],a[_])<p)return!0;return!1}function Ww(u,a,h){const p=a.distSqr(h);if(p===0)return u.distSqr(a);const _=((u.x-a.x)*(h.x-a.x)+(u.y-a.y)*(h.y-a.y))/p;return u.distSqr(_<0?a:_>1?h:h.sub(a)._mult(_)._add(a))}function qw(u,a){let h,p,_,S=!1;for(let E=0;E<u.length;E++){h=u[E];for(let M=0,L=h.length-1;M<h.length;L=M++)p=h[M],_=h[L],p.y>a.y!=_.y>a.y&&a.x<(_.x-p.x)*(a.y-p.y)/(_.y-p.y)+p.x&&(S=!S)}return S}function Dd(u,a){let h=!1;for(let p=0,_=u.length-1;p<u.length;_=p++){const S=u[p],E=u[_];S.y>a.y!=E.y>a.y&&a.x<(E.x-S.x)*(a.y-S.y)/(E.y-S.y)+S.x&&(h=!h)}return h}function YD(u,a,h){const p=h[0],_=h[2];if(u.x<p.x&&a.x<p.x||u.x>_.x&&a.x>_.x||u.y<p.y&&a.y<p.y||u.y>_.y&&a.y>_.y)return!1;const S=Te(u,a,h[0]);return S!==Te(u,a,h[1])||S!==Te(u,a,h[2])||S!==Te(u,a,h[3])}function Of(u,a,h){const p=a.paint.get(u).value;return p.kind==="constant"?p.value:h.programConfigurations.get(a.id).getMaxValue(u)}function Cg(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function Ig(u,a,h,p,_){if(!a[0]&&!a[1])return u;const S=C.convert(a)._mult(_);h==="viewport"&&S._rotate(-p);const E=[];for(let M=0;M<u.length;M++)E.push(u[M].sub(S));return E}let Zw,Kw;un("CircleBucket",Uy,{omit:["layers"]});var JD={get paint(){return Kw=Kw||new sr({"circle-radius":new Ln(Se.paint_circle["circle-radius"]),"circle-color":new Ln(Se.paint_circle["circle-color"]),"circle-blur":new Ln(Se.paint_circle["circle-blur"]),"circle-opacity":new Ln(Se.paint_circle["circle-opacity"]),"circle-translate":new wn(Se.paint_circle["circle-translate"]),"circle-translate-anchor":new wn(Se.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new wn(Se.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new wn(Se.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ln(Se.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ln(Se.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ln(Se.paint_circle["circle-stroke-opacity"])})},get layout(){return Zw=Zw||new sr({"circle-sort-key":new Ln(Se.layout_circle["circle-sort-key"])})}},as=1e-6,Ld=typeof Float32Array<"u"?Float32Array:Array;function Wy(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function Xw(u,a,h){var p=a[0],_=a[1],S=a[2],E=a[3],M=a[4],L=a[5],$=a[6],V=a[7],Y=a[8],ie=a[9],ce=a[10],de=a[11],be=a[12],Pe=a[13],Re=a[14],Je=a[15],je=h[0],rt=h[1],dt=h[2],Lt=h[3];return u[0]=je*p+rt*M+dt*Y+Lt*be,u[1]=je*_+rt*L+dt*ie+Lt*Pe,u[2]=je*S+rt*$+dt*ce+Lt*Re,u[3]=je*E+rt*V+dt*de+Lt*Je,u[4]=(je=h[4])*p+(rt=h[5])*M+(dt=h[6])*Y+(Lt=h[7])*be,u[5]=je*_+rt*L+dt*ie+Lt*Pe,u[6]=je*S+rt*$+dt*ce+Lt*Re,u[7]=je*E+rt*V+dt*de+Lt*Je,u[8]=(je=h[8])*p+(rt=h[9])*M+(dt=h[10])*Y+(Lt=h[11])*be,u[9]=je*_+rt*L+dt*ie+Lt*Pe,u[10]=je*S+rt*$+dt*ce+Lt*Re,u[11]=je*E+rt*V+dt*de+Lt*Je,u[12]=(je=h[12])*p+(rt=h[13])*M+(dt=h[14])*Y+(Lt=h[15])*be,u[13]=je*_+rt*L+dt*ie+Lt*Pe,u[14]=je*S+rt*$+dt*ce+Lt*Re,u[15]=je*E+rt*V+dt*de+Lt*Je,u}Math.hypot||(Math.hypot=function(){for(var u=0,a=arguments.length;a--;)u+=arguments[a]*arguments[a];return Math.sqrt(u)});var Rf,QD=Xw;function Ag(u,a,h){var p=a[0],_=a[1],S=a[2],E=a[3];return u[0]=h[0]*p+h[4]*_+h[8]*S+h[12]*E,u[1]=h[1]*p+h[5]*_+h[9]*S+h[13]*E,u[2]=h[2]*p+h[6]*_+h[10]*S+h[14]*E,u[3]=h[3]*p+h[7]*_+h[11]*S+h[15]*E,u}Rf=new Ld(4),Ld!=Float32Array&&(Rf[0]=0,Rf[1]=0,Rf[2]=0,Rf[3]=0);class eL extends Us{constructor(a){super(a,JD)}createBucket(a){return new Uy(a)}queryRadius(a){const h=a;return Of("circle-radius",this,h)+Of("circle-stroke-width",this,h)+Cg(this.paint.get("circle-translate"))}queryIntersectsFeature(a,h,p,_,S,E,M,L){const $=Ig(a,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),E.angle,M),V=this.paint.get("circle-radius").evaluate(h,p)+this.paint.get("circle-stroke-width").evaluate(h,p),Y=this.paint.get("circle-pitch-alignment")==="map",ie=Y?$:function(de,be){return de.map(Pe=>Yw(Pe,be))}($,L),ce=Y?V*M:V;for(const de of _)for(const be of de){const Pe=Y?be:Yw(be,L);let Re=ce;const Je=Ag([],[be.x,be.y,0,1],L);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Re*=Je[3]/E.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Re*=E.cameraToCenterDistance/Je[3]),ZD(ie,Pe,Re))return!0}return!1}}function Yw(u,a){const h=Ag([],[u.x,u.y,0,1],a);return new C(h[0]/h[3],h[1]/h[3])}class Jw extends Uy{}let Qw;un("HeatmapBucket",Jw,{omit:["layers"]});var tL={get paint(){return Qw=Qw||new sr({"heatmap-radius":new Ln(Se.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ln(Se.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new wn(Se.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Cf(Se.paint_heatmap["heatmap-color"]),"heatmap-opacity":new wn(Se.paint_heatmap["heatmap-opacity"])})}};function qy(u,{width:a,height:h},p,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==a*h*p)throw new RangeError(`mismatched image size. expected: ${_.length} but got: ${a*h*p}`)}else _=new Uint8Array(a*h*p);return u.width=a,u.height=h,u.data=_,u}function eS(u,{width:a,height:h},p){if(a===u.width&&h===u.height)return;const _=qy({},{width:a,height:h},p);Zy(u,_,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,a),height:Math.min(u.height,h)},p),u.width=a,u.height=h,u.data=_.data}function Zy(u,a,h,p,_,S){if(_.width===0||_.height===0)return a;if(_.width>u.width||_.height>u.height||h.x>u.width-_.width||h.y>u.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>a.width||_.height>a.height||p.x>a.width-_.width||p.y>a.height-_.height)throw new RangeError("out of range destination coordinates for image copy");const E=u.data,M=a.data;if(E===M)throw new Error("srcData equals dstData, so image is already copied");for(let L=0;L<_.height;L++){const $=((h.y+L)*u.width+h.x)*S,V=((p.y+L)*a.width+p.x)*S;for(let Y=0;Y<_.width*S;Y++)M[V+Y]=E[$+Y]}return a}class Ff{constructor(a,h){qy(this,a,1,h)}resize(a){eS(this,a,1)}clone(){return new Ff({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,h,p,_,S){Zy(a,h,p,_,S,1)}}class na{constructor(a,h){qy(this,a,4,h)}resize(a){eS(this,a,4)}replace(a,h){h?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new na({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,h,p,_,S){Zy(a,h,p,_,S,4)}}function tS(u){const a={},h=u.resolution||256,p=u.clips?u.clips.length:1,_=u.image||new na({width:h,height:p});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const S=(E,M,L)=>{a[u.evaluationKey]=L;const $=u.expression.evaluate(a);_.data[E+M+0]=Math.floor(255*$.r/$.a),_.data[E+M+1]=Math.floor(255*$.g/$.a),_.data[E+M+2]=Math.floor(255*$.b/$.a),_.data[E+M+3]=Math.floor(255*$.a)};if(u.clips)for(let E=0,M=0;E<p;++E,M+=4*h)for(let L=0,$=0;L<h;L++,$+=4){const V=L/(h-1),{start:Y,end:ie}=u.clips[E];S(M,$,Y*(1-V)+ie*V)}else for(let E=0,M=0;E<h;E++,M+=4)S(0,M,E/(h-1));return _}un("AlphaImage",Ff),un("RGBAImage",na);class nL extends Us{createBucket(a){return new Jw(a)}constructor(a){super(a,tL),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=tS({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let nS;var iL={get paint(){return nS=nS||new sr({"hillshade-illumination-direction":new wn(Se.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new wn(Se.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new wn(Se.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new wn(Se.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new wn(Se.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new wn(Se.paint_hillshade["hillshade-accent-color"])})}};class rL extends Us{constructor(a){super(a,iL)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const sL=Vi([{name:"a_pos",components:2,type:"Int16"}],4),{members:aL}=sL;var Ky={exports:{}};function Mg(u,a,h){h=h||2;var p,_,S,E,M,L,$,V=a&&a.length,Y=V?a[0]*h:u.length,ie=iS(u,0,Y,h,!0),ce=[];if(!ie||ie.next===ie.prev)return ce;if(V&&(ie=function(be,Pe,Re,Je){var je,rt,dt,Lt=[];for(je=0,rt=Pe.length;je<rt;je++)(dt=iS(be,Pe[je]*Je,je<rt-1?Pe[je+1]*Je:be.length,Je,!1))===dt.next&&(dt.steiner=!0),Lt.push(pL(dt));for(Lt.sort(dL),je=0;je<Lt.length;je++)Re=hL(Lt[je],Re);return Re}(u,a,ie,h)),u.length>80*h){p=S=u[0],_=E=u[1];for(var de=h;de<Y;de+=h)(M=u[de])<p&&(p=M),(L=u[de+1])<_&&(_=L),M>S&&(S=M),L>E&&(E=L);$=($=Math.max(S-p,E-_))!==0?32767/$:0}return $f(ie,ce,h,p,_,$,0),ce}function iS(u,a,h,p,_){var S,E;if(_===Jy(u,a,h,p)>0)for(S=a;S<h;S+=p)E=aS(S,u[S],u[S+1],E);else for(S=h-p;S>=a;S-=p)E=aS(S,u[S],u[S+1],E);return E&&kg(E,E.next)&&(Nf(E),E=E.next),E}function cu(u,a){if(!u)return u;a||(a=u);var h,p=u;do if(h=!1,p.steiner||!kg(p,p.next)&&or(p.prev,p,p.next)!==0)p=p.next;else{if(Nf(p),(p=a=p.prev)===p.next)break;h=!0}while(h||p!==a);return a}function $f(u,a,h,p,_,S,E){if(u){!E&&S&&function(V,Y,ie,ce){var de=V;do de.z===0&&(de.z=Xy(de.x,de.y,Y,ie,ce)),de.prevZ=de.prev,de.nextZ=de.next,de=de.next;while(de!==V);de.prevZ.nextZ=null,de.prevZ=null,function(be){var Pe,Re,Je,je,rt,dt,Lt,sn,gn=1;do{for(Re=be,be=null,rt=null,dt=0;Re;){for(dt++,Je=Re,Lt=0,Pe=0;Pe<gn&&(Lt++,Je=Je.nextZ);Pe++);for(sn=gn;Lt>0||sn>0&&Je;)Lt!==0&&(sn===0||!Je||Re.z<=Je.z)?(je=Re,Re=Re.nextZ,Lt--):(je=Je,Je=Je.nextZ,sn--),rt?rt.nextZ=je:be=je,je.prevZ=rt,rt=je;Re=Je}rt.nextZ=null,gn*=2}while(dt>1)}(de)}(u,p,_,S);for(var M,L,$=u;u.prev!==u.next;)if(M=u.prev,L=u.next,S?lL(u,p,_,S):oL(u))a.push(M.i/h|0),a.push(u.i/h|0),a.push(L.i/h|0),Nf(u),u=L.next,$=L.next;else if((u=L)===$){E?E===1?$f(u=cL(cu(u),a,h),a,h,p,_,S,2):E===2&&uL(u,a,h,p,_,S):$f(cu(u),a,h,p,_,S,1);break}}}function oL(u){var a=u.prev,h=u,p=u.next;if(or(a,h,p)>=0)return!1;for(var _=a.x,S=h.x,E=p.x,M=a.y,L=h.y,$=p.y,V=_<S?_<E?_:E:S<E?S:E,Y=M<L?M<$?M:$:L<$?L:$,ie=_>S?_>E?_:E:S>E?S:E,ce=M>L?M>$?M:$:L>$?L:$,de=p.next;de!==a;){if(de.x>=V&&de.x<=ie&&de.y>=Y&&de.y<=ce&&Od(_,M,S,L,E,$,de.x,de.y)&&or(de.prev,de,de.next)>=0)return!1;de=de.next}return!0}function lL(u,a,h,p){var _=u.prev,S=u,E=u.next;if(or(_,S,E)>=0)return!1;for(var M=_.x,L=S.x,$=E.x,V=_.y,Y=S.y,ie=E.y,ce=M<L?M<$?M:$:L<$?L:$,de=V<Y?V<ie?V:ie:Y<ie?Y:ie,be=M>L?M>$?M:$:L>$?L:$,Pe=V>Y?V>ie?V:ie:Y>ie?Y:ie,Re=Xy(ce,de,a,h,p),Je=Xy(be,Pe,a,h,p),je=u.prevZ,rt=u.nextZ;je&&je.z>=Re&&rt&&rt.z<=Je;){if(je.x>=ce&&je.x<=be&&je.y>=de&&je.y<=Pe&&je!==_&&je!==E&&Od(M,V,L,Y,$,ie,je.x,je.y)&&or(je.prev,je,je.next)>=0||(je=je.prevZ,rt.x>=ce&&rt.x<=be&&rt.y>=de&&rt.y<=Pe&&rt!==_&&rt!==E&&Od(M,V,L,Y,$,ie,rt.x,rt.y)&&or(rt.prev,rt,rt.next)>=0))return!1;rt=rt.nextZ}for(;je&&je.z>=Re;){if(je.x>=ce&&je.x<=be&&je.y>=de&&je.y<=Pe&&je!==_&&je!==E&&Od(M,V,L,Y,$,ie,je.x,je.y)&&or(je.prev,je,je.next)>=0)return!1;je=je.prevZ}for(;rt&&rt.z<=Je;){if(rt.x>=ce&&rt.x<=be&&rt.y>=de&&rt.y<=Pe&&rt!==_&&rt!==E&&Od(M,V,L,Y,$,ie,rt.x,rt.y)&&or(rt.prev,rt,rt.next)>=0)return!1;rt=rt.nextZ}return!0}function cL(u,a,h){var p=u;do{var _=p.prev,S=p.next.next;!kg(_,S)&&rS(_,p,p.next,S)&&zf(_,S)&&zf(S,_)&&(a.push(_.i/h|0),a.push(p.i/h|0),a.push(S.i/h|0),Nf(p),Nf(p.next),p=u=S),p=p.next}while(p!==u);return cu(p)}function uL(u,a,h,p,_,S){var E=u;do{for(var M=E.next.next;M!==E.prev;){if(E.i!==M.i&&mL(E,M)){var L=sS(E,M);return E=cu(E,E.next),L=cu(L,L.next),$f(E,a,h,p,_,S,0),void $f(L,a,h,p,_,S,0)}M=M.next}E=E.next}while(E!==u)}function dL(u,a){return u.x-a.x}function hL(u,a){var h=function(_,S){var E,M=S,L=_.x,$=_.y,V=-1/0;do{if($<=M.y&&$>=M.next.y&&M.next.y!==M.y){var Y=M.x+($-M.y)*(M.next.x-M.x)/(M.next.y-M.y);if(Y<=L&&Y>V&&(V=Y,E=M.x<M.next.x?M:M.next,Y===L))return E}M=M.next}while(M!==S);if(!E)return null;var ie,ce=E,de=E.x,be=E.y,Pe=1/0;M=E;do L>=M.x&&M.x>=de&&L!==M.x&&Od($<be?L:V,$,de,be,$<be?V:L,$,M.x,M.y)&&(ie=Math.abs($-M.y)/(L-M.x),zf(M,_)&&(ie<Pe||ie===Pe&&(M.x>E.x||M.x===E.x&&fL(E,M)))&&(E=M,Pe=ie)),M=M.next;while(M!==ce);return E}(u,a);if(!h)return a;var p=sS(h,u);return cu(p,p.next),cu(h,h.next)}function fL(u,a){return or(u.prev,u,a.prev)<0&&or(a.next,u,u.next)<0}function Xy(u,a,h,p,_){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-h)*_|0)|u<<8))|u<<4))|u<<2))|u<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-p)*_|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function pL(u){var a=u,h=u;do(a.x<h.x||a.x===h.x&&a.y<h.y)&&(h=a),a=a.next;while(a!==u);return h}function Od(u,a,h,p,_,S,E,M){return(_-E)*(a-M)>=(u-E)*(S-M)&&(u-E)*(p-M)>=(h-E)*(a-M)&&(h-E)*(S-M)>=(_-E)*(p-M)}function mL(u,a){return u.next.i!==a.i&&u.prev.i!==a.i&&!function(h,p){var _=h;do{if(_.i!==h.i&&_.next.i!==h.i&&_.i!==p.i&&_.next.i!==p.i&&rS(_,_.next,h,p))return!0;_=_.next}while(_!==h);return!1}(u,a)&&(zf(u,a)&&zf(a,u)&&function(h,p){var _=h,S=!1,E=(h.x+p.x)/2,M=(h.y+p.y)/2;do _.y>M!=_.next.y>M&&_.next.y!==_.y&&E<(_.next.x-_.x)*(M-_.y)/(_.next.y-_.y)+_.x&&(S=!S),_=_.next;while(_!==h);return S}(u,a)&&(or(u.prev,u,a.prev)||or(u,a.prev,a))||kg(u,a)&&or(u.prev,u,u.next)>0&&or(a.prev,a,a.next)>0)}function or(u,a,h){return(a.y-u.y)*(h.x-a.x)-(a.x-u.x)*(h.y-a.y)}function kg(u,a){return u.x===a.x&&u.y===a.y}function rS(u,a,h,p){var _=Dg(or(u,a,h)),S=Dg(or(u,a,p)),E=Dg(or(h,p,u)),M=Dg(or(h,p,a));return _!==S&&E!==M||!(_!==0||!Pg(u,h,a))||!(S!==0||!Pg(u,p,a))||!(E!==0||!Pg(h,u,p))||!(M!==0||!Pg(h,a,p))}function Pg(u,a,h){return a.x<=Math.max(u.x,h.x)&&a.x>=Math.min(u.x,h.x)&&a.y<=Math.max(u.y,h.y)&&a.y>=Math.min(u.y,h.y)}function Dg(u){return u>0?1:u<0?-1:0}function zf(u,a){return or(u.prev,u,u.next)<0?or(u,a,u.next)>=0&&or(u,u.prev,a)>=0:or(u,a,u.prev)<0||or(u,u.next,a)<0}function sS(u,a){var h=new Yy(u.i,u.x,u.y),p=new Yy(a.i,a.x,a.y),_=u.next,S=a.prev;return u.next=a,a.prev=u,h.next=_,_.prev=h,p.next=h,h.prev=p,S.next=p,p.prev=S,p}function aS(u,a,h,p){var _=new Yy(u,a,h);return p?(_.next=p.next,_.prev=p,p.next.prev=_,p.next=_):(_.prev=_,_.next=_),_}function Nf(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function Yy(u,a,h){this.i=u,this.x=a,this.y=h,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Jy(u,a,h,p){for(var _=0,S=a,E=h-p;S<h;S+=p)_+=(u[E]-u[S])*(u[S+1]+u[E+1]),E=S;return _}Ky.exports=Mg,Ky.exports.default=Mg,Mg.deviation=function(u,a,h,p){var _=a&&a.length,S=Math.abs(Jy(u,0,_?a[0]*h:u.length,h));if(_)for(var E=0,M=a.length;E<M;E++)S-=Math.abs(Jy(u,a[E]*h,E<M-1?a[E+1]*h:u.length,h));var L=0;for(E=0;E<p.length;E+=3){var $=p[E]*h,V=p[E+1]*h,Y=p[E+2]*h;L+=Math.abs((u[$]-u[Y])*(u[V+1]-u[$+1])-(u[$]-u[V])*(u[Y+1]-u[$+1]))}return S===0&&L===0?0:Math.abs((L-S)/S)},Mg.flatten=function(u){for(var a=u[0][0].length,h={vertices:[],holes:[],dimensions:a},p=0,_=0;_<u.length;_++){for(var S=0;S<u[_].length;S++)for(var E=0;E<a;E++)h.vertices.push(u[_][S][E]);_>0&&h.holes.push(p+=u[_-1].length)}return h};var oS=g(Ky.exports);function gL(u,a,h,p,_){lS(u,a,h||0,p||u.length-1,_||vL)}function lS(u,a,h,p,_){for(;p>h;){if(p-h>600){var S=p-h+1,E=a-h+1,M=Math.log(S),L=.5*Math.exp(2*M/3),$=.5*Math.sqrt(M*L*(S-L)/S)*(E-S/2<0?-1:1);lS(u,a,Math.max(h,Math.floor(a-E*L/S+$)),Math.min(p,Math.floor(a+(S-E)*L/S+$)),_)}var V=u[a],Y=h,ie=p;for(Bf(u,h,a),_(u[p],V)>0&&Bf(u,h,p);Y<ie;){for(Bf(u,Y,ie),Y++,ie--;_(u[Y],V)<0;)Y++;for(;_(u[ie],V)>0;)ie--}_(u[h],V)===0?Bf(u,h,ie):Bf(u,++ie,p),ie<=a&&(h=ie+1),a<=ie&&(p=ie-1)}}function Bf(u,a,h){var p=u[a];u[a]=u[h],u[h]=p}function vL(u,a){return u<a?-1:u>a?1:0}function Qy(u,a){const h=u.length;if(h<=1)return[u];const p=[];let _,S;for(let E=0;E<h;E++){const M=ye(u[E]);M!==0&&(u[E].area=Math.abs(M),S===void 0&&(S=M<0),S===M<0?(_&&p.push(_),_=[u[E]]):_.push(u[E]))}if(_&&p.push(_),a>1)for(let E=0;E<p.length;E++)p[E].length<=a||(gL(p[E],a,1,p[E].length-1,_L),p[E]=p[E].slice(0,a));return p}function _L(u,a){return a.area-u.area}function e0(u,a,h){const p=h.patternDependencies;let _=!1;for(const S of a){const E=S.paint.get(`${u}-pattern`);E.isConstant()||(_=!0);const M=E.constantOr(null);M&&(_=!0,p[M.to]=!0,p[M.from]=!0)}return _}function t0(u,a,h,p,_){const S=_.patternDependencies;for(const E of a){const M=E.paint.get(`${u}-pattern`).value;if(M.kind!=="constant"){let L=M.evaluate({zoom:p-1},h,{},_.availableImages),$=M.evaluate({zoom:p},h,{},_.availableImages),V=M.evaluate({zoom:p+1},h,{},_.availableImages);L=L&&L.name?L.name:L,$=$&&$.name?$.name:$,V=V&&V.name?V.name:V,S[L]=!0,S[$]=!0,S[V]=!0,h.patterns[E.id]={min:L,mid:$,max:V}}}return h}class n0{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(h=>h.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Kn,this.indexArray=new Lr,this.indexArray2=new gr,this.programConfigurations=new Xa(a.layers,a.zoom),this.segments=new Li,this.segments2=new Li,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(a,h,p){this.hasPattern=e0("fill",this.layers,h);const _=this.layers[0].layout.get("fill-sort-key"),S=!_.isConstant(),E=[];for(const{feature:M,id:L,index:$,sourceLayerIndex:V}of a){const Y=this.layers[0]._featureFilter.needGeometry,ie=lu(M,Y);if(!this.layers[0]._featureFilter.filter(new Di(this.zoom),ie,p))continue;const ce=S?_.evaluate(ie,{},p,h.availableImages):void 0,de={id:L,properties:M.properties,type:M.type,sourceLayerIndex:V,index:$,geometry:Y?ie.geometry:ou(M),patterns:{},sortKey:ce};E.push(de)}S&&E.sort((M,L)=>M.sortKey-L.sortKey);for(const M of E){const{geometry:L,index:$,sourceLayerIndex:V}=M;if(this.hasPattern){const Y=t0("fill",this.layers,M,this.zoom,h);this.patternFeatures.push(Y)}else this.addFeature(M,L,$,p,{});h.featureIndex.insert(a[$].feature,L,$,V,this.index)}}update(a,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,h,this.stateDependentLayers,p)}addFeatures(a,h,p){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,h,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,aL),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,h,p,_,S){for(const E of Qy(h,500)){let M=0;for(const ce of E)M+=ce.length;const L=this.segments.prepareSegment(M,this.layoutVertexArray,this.indexArray),$=L.vertexLength,V=[],Y=[];for(const ce of E){if(ce.length===0)continue;ce!==E[0]&&Y.push(V.length/2);const de=this.segments2.prepareSegment(ce.length,this.layoutVertexArray,this.indexArray2),be=de.vertexLength;this.layoutVertexArray.emplaceBack(ce[0].x,ce[0].y),this.indexArray2.emplaceBack(be+ce.length-1,be),V.push(ce[0].x),V.push(ce[0].y);for(let Pe=1;Pe<ce.length;Pe++)this.layoutVertexArray.emplaceBack(ce[Pe].x,ce[Pe].y),this.indexArray2.emplaceBack(be+Pe-1,be+Pe),V.push(ce[Pe].x),V.push(ce[Pe].y);de.vertexLength+=ce.length,de.primitiveLength+=ce.length}const ie=oS(V,Y);for(let ce=0;ce<ie.length;ce+=3)this.indexArray.emplaceBack($+ie[ce],$+ie[ce+1],$+ie[ce+2]);L.vertexLength+=M,L.primitiveLength+=ie.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,S,_)}}let cS,uS;un("FillBucket",n0,{omit:["layers","patternFeatures"]});var yL={get paint(){return uS=uS||new sr({"fill-antialias":new wn(Se.paint_fill["fill-antialias"]),"fill-opacity":new Ln(Se.paint_fill["fill-opacity"]),"fill-color":new Ln(Se.paint_fill["fill-color"]),"fill-outline-color":new Ln(Se.paint_fill["fill-outline-color"]),"fill-translate":new wn(Se.paint_fill["fill-translate"]),"fill-translate-anchor":new wn(Se.paint_fill["fill-translate-anchor"]),"fill-pattern":new ru(Se.paint_fill["fill-pattern"])})},get layout(){return cS=cS||new sr({"fill-sort-key":new Ln(Se.layout_fill["fill-sort-key"])})}};class bL extends Us{constructor(a){super(a,yL)}recalculate(a,h){super.recalculate(a,h);const p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new n0(a)}queryRadius(){return Cg(this.paint.get("fill-translate"))}queryIntersectsFeature(a,h,p,_,S,E,M){return Gw(Ig(a,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),E.angle,M),_)}isTileClipped(){return!0}}const xL=Vi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),wL=Vi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:SL}=xL;var Yl={},TL=y,dS=Rd;function Rd(u,a,h,p,_){this.properties={},this.extent=h,this.type=0,this._pbf=u,this._geometry=-1,this._keys=p,this._values=_,u.readFields(EL,this,a)}function EL(u,a,h){u==1?a.id=h.readVarint():u==2?function(p,_){for(var S=p.readVarint()+p.pos;p.pos<S;){var E=_._keys[p.readVarint()],M=_._values[p.readVarint()];_.properties[E]=M}}(h,a):u==3?a.type=h.readVarint():u==4&&(a._geometry=h.pos)}function CL(u){for(var a,h,p=0,_=0,S=u.length,E=S-1;_<S;E=_++)p+=((h=u[E]).x-(a=u[_]).x)*(a.y+h.y);return p}Rd.types=["Unknown","Point","LineString","Polygon"],Rd.prototype.loadGeometry=function(){var u=this._pbf;u.pos=this._geometry;for(var a,h=u.readVarint()+u.pos,p=1,_=0,S=0,E=0,M=[];u.pos<h;){if(_<=0){var L=u.readVarint();p=7&L,_=L>>3}if(_--,p===1||p===2)S+=u.readSVarint(),E+=u.readSVarint(),p===1&&(a&&M.push(a),a=[]),a.push(new TL(S,E));else{if(p!==7)throw new Error("unknown command "+p);a&&a.push(a[0].clone())}}return a&&M.push(a),M},Rd.prototype.bbox=function(){var u=this._pbf;u.pos=this._geometry;for(var a=u.readVarint()+u.pos,h=1,p=0,_=0,S=0,E=1/0,M=-1/0,L=1/0,$=-1/0;u.pos<a;){if(p<=0){var V=u.readVarint();h=7&V,p=V>>3}if(p--,h===1||h===2)(_+=u.readSVarint())<E&&(E=_),_>M&&(M=_),(S+=u.readSVarint())<L&&(L=S),S>$&&($=S);else if(h!==7)throw new Error("unknown command "+h)}return[E,L,M,$]},Rd.prototype.toGeoJSON=function(u,a,h){var p,_,S=this.extent*Math.pow(2,h),E=this.extent*u,M=this.extent*a,L=this.loadGeometry(),$=Rd.types[this.type];function V(ce){for(var de=0;de<ce.length;de++){var be=ce[de];ce[de]=[360*(be.x+E)/S-180,360/Math.PI*Math.atan(Math.exp((180-360*(be.y+M)/S)*Math.PI/180))-90]}}switch(this.type){case 1:var Y=[];for(p=0;p<L.length;p++)Y[p]=L[p][0];V(L=Y);break;case 2:for(p=0;p<L.length;p++)V(L[p]);break;case 3:for(L=function(ce){var de=ce.length;if(de<=1)return[ce];for(var be,Pe,Re=[],Je=0;Je<de;Je++){var je=CL(ce[Je]);je!==0&&(Pe===void 0&&(Pe=je<0),Pe===je<0?(be&&Re.push(be),be=[ce[Je]]):be.push(ce[Je]))}return be&&Re.push(be),Re}(L),p=0;p<L.length;p++)for(_=0;_<L[p].length;_++)V(L[p][_])}L.length===1?L=L[0]:$="Multi"+$;var ie={type:"Feature",geometry:{type:$,coordinates:L},properties:this.properties};return"id"in this&&(ie.id=this.id),ie};var IL=dS,hS=fS;function fS(u,a){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(AL,this,a),this.length=this._features.length}function AL(u,a,h){u===15?a.version=h.readVarint():u===1?a.name=h.readString():u===5?a.extent=h.readVarint():u===2?a._features.push(h.pos):u===3?a._keys.push(h.readString()):u===4&&a._values.push(function(p){for(var _=null,S=p.readVarint()+p.pos;p.pos<S;){var E=p.readVarint()>>3;_=E===1?p.readString():E===2?p.readFloat():E===3?p.readDouble():E===4?p.readVarint64():E===5?p.readVarint():E===6?p.readSVarint():E===7?p.readBoolean():null}return _}(h))}fS.prototype.feature=function(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];var a=this._pbf.readVarint()+this._pbf.pos;return new IL(this._pbf,a,this.extent,this._keys,this._values)};var ML=hS;function kL(u,a,h){if(u===3){var p=new ML(h,h.readVarint()+h.pos);p.length&&(a[p.name]=p)}}Yl.VectorTile=function(u,a){this.layers=u.readFields(kL,{},a)},Yl.VectorTileFeature=dS,Yl.VectorTileLayer=hS;const PL=Yl.VectorTileFeature.types,i0=Math.pow(2,13);function jf(u,a,h,p,_,S,E,M){u.emplaceBack(a,h,2*Math.floor(p*i0)+E,_*i0*2,S*i0*2,Math.round(M))}class r0{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(h=>h.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new Yt,this.centroidVertexArray=new Gt,this.indexArray=new Lr,this.programConfigurations=new Xa(a.layers,a.zoom),this.segments=new Li,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(a,h,p){this.features=[],this.hasPattern=e0("fill-extrusion",this.layers,h);for(const{feature:_,id:S,index:E,sourceLayerIndex:M}of a){const L=this.layers[0]._featureFilter.needGeometry,$=lu(_,L);if(!this.layers[0]._featureFilter.filter(new Di(this.zoom),$,p))continue;const V={id:S,sourceLayerIndex:M,index:E,geometry:L?$.geometry:ou(_),properties:_.properties,type:_.type,patterns:{}};this.hasPattern?this.features.push(t0("fill-extrusion",this.layers,V,this.zoom,h)):this.addFeature(V,V.geometry,E,p,{}),h.featureIndex.insert(_,V.geometry,E,M,this.index,!0)}}addFeatures(a,h,p){for(const _ of this.features){const{geometry:S}=_;this.addFeature(_,S,_.index,h,p)}}update(a,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,h,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,SL),this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,wL.members,!0),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(a,h,p,_,S){const E={x:0,y:0,vertexCount:0};for(const M of Qy(h,500)){let L=0;for(const de of M)L+=de.length;let $=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const de of M){if(de.length===0||LL(de))continue;let be=0;for(let Pe=0;Pe<de.length;Pe++){const Re=de[Pe];if(Pe>=1){const Je=de[Pe-1];if(!DL(Re,Je)){$.vertexLength+4>Li.MAX_VERTEX_ARRAY_LENGTH&&($=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const je=Re.sub(Je)._perp()._unit(),rt=Je.dist(Re);be+rt>32768&&(be=0),jf(this.layoutVertexArray,Re.x,Re.y,je.x,je.y,0,0,be),jf(this.layoutVertexArray,Re.x,Re.y,je.x,je.y,0,1,be),E.x+=2*Re.x,E.y+=2*Re.y,E.vertexCount+=2,be+=rt,jf(this.layoutVertexArray,Je.x,Je.y,je.x,je.y,0,0,be),jf(this.layoutVertexArray,Je.x,Je.y,je.x,je.y,0,1,be),E.x+=2*Je.x,E.y+=2*Je.y,E.vertexCount+=2;const dt=$.vertexLength;this.indexArray.emplaceBack(dt,dt+2,dt+1),this.indexArray.emplaceBack(dt+1,dt+2,dt+3),$.vertexLength+=4,$.primitiveLength+=2}}}}if($.vertexLength+L>Li.MAX_VERTEX_ARRAY_LENGTH&&($=this.segments.prepareSegment(L,this.layoutVertexArray,this.indexArray)),PL[a.type]!=="Polygon")continue;const V=[],Y=[],ie=$.vertexLength;for(const de of M)if(de.length!==0){de!==M[0]&&Y.push(V.length/2);for(let be=0;be<de.length;be++){const Pe=de[be];jf(this.layoutVertexArray,Pe.x,Pe.y,0,0,1,1,0),E.x+=Pe.x,E.y+=Pe.y,E.vertexCount+=1,V.push(Pe.x),V.push(Pe.y)}}const ce=oS(V,Y);for(let de=0;de<ce.length;de+=3)this.indexArray.emplaceBack(ie+ce[de],ie+ce[de+2],ie+ce[de+1]);$.primitiveLength+=ce.length/3,$.vertexLength+=L}for(let M=0;M<E.vertexCount;M++)this.centroidVertexArray.emplaceBack(Math.floor(E.x/E.vertexCount),Math.floor(E.y/E.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,S,_)}}function DL(u,a){return u.x===a.x&&(u.x<0||u.x>ur)||u.y===a.y&&(u.y<0||u.y>ur)}function LL(u){return u.every(a=>a.x<0)||u.every(a=>a.x>ur)||u.every(a=>a.y<0)||u.every(a=>a.y>ur)}let pS;un("FillExtrusionBucket",r0,{omit:["layers","features"]});var OL={get paint(){return pS=pS||new sr({"fill-extrusion-opacity":new wn(Se["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ln(Se["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new wn(Se["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new wn(Se["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ru(Se["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ln(Se["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ln(Se["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new wn(Se["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class RL extends Us{constructor(a){super(a,OL)}createBucket(a){return new r0(a)}queryRadius(){return Cg(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(a,h,p,_,S,E,M,L){const $=Ig(a,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),E.angle,M),V=this.paint.get("fill-extrusion-height").evaluate(h,p),Y=this.paint.get("fill-extrusion-base").evaluate(h,p),ie=function(de,be,Pe,Re){const Je=[];for(const je of de){const rt=[je.x,je.y,0,1];Ag(rt,rt,be),Je.push(new C(rt[0]/rt[3],rt[1]/rt[3]))}return Je}($,L),ce=function(de,be,Pe,Re){const Je=[],je=[],rt=Re[8]*be,dt=Re[9]*be,Lt=Re[10]*be,sn=Re[11]*be,gn=Re[8]*Pe,en=Re[9]*Pe,Jt=Re[10]*Pe,qt=Re[11]*Pe;for(const hn of de){const Xt=[],jt=[];for(const An of hn){const _n=An.x,Gn=An.y,Oi=Re[0]*_n+Re[4]*Gn+Re[12],zi=Re[1]*_n+Re[5]*Gn+Re[13],yr=Re[2]*_n+Re[6]*Gn+Re[14],Gs=Re[3]*_n+Re[7]*Gn+Re[15],os=yr+Lt,dr=Gs+sn,Rr=Oi+gn,Vr=zi+en,ls=yr+Jt,cs=Gs+qt,br=new C((Oi+rt)/dr,(zi+dt)/dr);br.z=os/dr,Xt.push(br);const xr=new C(Rr/cs,Vr/cs);xr.z=ls/cs,jt.push(xr)}Je.push(Xt),je.push(jt)}return[Je,je]}(_,Y,V,L);return function(de,be,Pe){let Re=1/0;Gw(Pe,be)&&(Re=mS(Pe,be[0]));for(let Je=0;Je<be.length;Je++){const je=be[Je],rt=de[Je];for(let dt=0;dt<je.length-1;dt++){const Lt=je[dt],sn=[Lt,je[dt+1],rt[dt+1],rt[dt],Lt];Hw(Pe,sn)&&(Re=Math.min(Re,mS(Pe,sn)))}}return Re!==1/0&&Re}(ce[0],ce[1],ie)}}function Vf(u,a){return u.x*a.x+u.y*a.y}function mS(u,a){if(u.length===1){let h=0;const p=a[h++];let _;for(;!_||p.equals(_);)if(_=a[h++],!_)return 1/0;for(;h<a.length;h++){const S=a[h],E=u[0],M=_.sub(p),L=S.sub(p),$=E.sub(p),V=Vf(M,M),Y=Vf(M,L),ie=Vf(L,L),ce=Vf($,M),de=Vf($,L),be=V*ie-Y*Y,Pe=(ie*ce-Y*de)/be,Re=(V*de-Y*ce)/be,Je=p.z*(1-Pe-Re)+_.z*Pe+S.z*Re;if(isFinite(Je))return Je}return 1/0}{let h=1/0;for(const p of a)h=Math.min(h,p.z);return h}}const FL=Vi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:$L}=FL,zL=Vi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:NL}=zL,BL=Yl.VectorTileFeature.types,jL=Math.cos(Math.PI/180*37.5),gS=Math.pow(2,14)/.5;class s0{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(h=>h.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new On,this.layoutVertexArray2=new vn,this.indexArray=new Lr,this.programConfigurations=new Xa(a.layers,a.zoom),this.segments=new Li,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(a,h,p){this.hasPattern=e0("line",this.layers,h);const _=this.layers[0].layout.get("line-sort-key"),S=!_.isConstant(),E=[];for(const{feature:M,id:L,index:$,sourceLayerIndex:V}of a){const Y=this.layers[0]._featureFilter.needGeometry,ie=lu(M,Y);if(!this.layers[0]._featureFilter.filter(new Di(this.zoom),ie,p))continue;const ce=S?_.evaluate(ie,{},p):void 0,de={id:L,properties:M.properties,type:M.type,sourceLayerIndex:V,index:$,geometry:Y?ie.geometry:ou(M),patterns:{},sortKey:ce};E.push(de)}S&&E.sort((M,L)=>M.sortKey-L.sortKey);for(const M of E){const{geometry:L,index:$,sourceLayerIndex:V}=M;if(this.hasPattern){const Y=t0("line",this.layers,M,this.zoom,h);this.patternFeatures.push(Y)}else this.addFeature(M,L,$,p,{});h.featureIndex.insert(a[$].feature,L,$,V,this.index)}}update(a,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,h,this.stateDependentLayers,p)}addFeatures(a,h,p){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,h,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,NL)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,$L),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,h,p,_,S){const E=this.layers[0].layout,M=E.get("line-join").evaluate(a,{}),L=E.get("line-cap"),$=E.get("line-miter-limit"),V=E.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(const Y of h)this.addLine(Y,a,M,L,$,V);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,S,_)}addLine(a,h,p,_,S,E){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Re=0;Re<a.length-1;Re++)this.totalDistance+=a[Re].dist(a[Re+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const M=BL[h.type]==="Polygon";let L=a.length;for(;L>=2&&a[L-1].equals(a[L-2]);)L--;let $=0;for(;$<L-1&&a[$].equals(a[$+1]);)$++;if(L<(M?3:2))return;p==="bevel"&&(S=1.05);const V=this.overscaling<=16?15*ur/(512*this.overscaling):0,Y=this.segments.prepareSegment(10*L,this.layoutVertexArray,this.indexArray);let ie,ce,de,be,Pe;this.e1=this.e2=-1,M&&(ie=a[L-2],Pe=a[$].sub(ie)._unit()._perp());for(let Re=$;Re<L;Re++){if(de=Re===L-1?M?a[$+1]:void 0:a[Re+1],de&&a[Re].equals(de))continue;Pe&&(be=Pe),ie&&(ce=ie),ie=a[Re],Pe=de?de.sub(ie)._unit()._perp():be,be=be||Pe;let Je=be.add(Pe);Je.x===0&&Je.y===0||Je._unit();const je=be.x*Pe.x+be.y*Pe.y,rt=Je.x*Pe.x+Je.y*Pe.y,dt=rt!==0?1/rt:1/0,Lt=2*Math.sqrt(2-2*rt),sn=rt<jL&&ce&&de,gn=be.x*Pe.y-be.y*Pe.x>0;if(sn&&Re>$){const qt=ie.dist(ce);if(qt>2*V){const hn=ie.sub(ie.sub(ce)._mult(V/qt)._round());this.updateDistance(ce,hn),this.addCurrentVertex(hn,be,0,0,Y),ce=hn}}const en=ce&&de;let Jt=en?p:M?"butt":_;if(en&&Jt==="round"&&(dt<E?Jt="miter":dt<=2&&(Jt="fakeround")),Jt==="miter"&&dt>S&&(Jt="bevel"),Jt==="bevel"&&(dt>2&&(Jt="flipbevel"),dt<S&&(Jt="miter")),ce&&this.updateDistance(ce,ie),Jt==="miter")Je._mult(dt),this.addCurrentVertex(ie,Je,0,0,Y);else if(Jt==="flipbevel"){if(dt>100)Je=Pe.mult(-1);else{const qt=dt*be.add(Pe).mag()/be.sub(Pe).mag();Je._perp()._mult(qt*(gn?-1:1))}this.addCurrentVertex(ie,Je,0,0,Y),this.addCurrentVertex(ie,Je.mult(-1),0,0,Y)}else if(Jt==="bevel"||Jt==="fakeround"){const qt=-Math.sqrt(dt*dt-1),hn=gn?qt:0,Xt=gn?0:qt;if(ce&&this.addCurrentVertex(ie,be,hn,Xt,Y),Jt==="fakeround"){const jt=Math.round(180*Lt/Math.PI/20);for(let An=1;An<jt;An++){let _n=An/jt;if(_n!==.5){const Oi=_n-.5;_n+=_n*Oi*(_n-1)*((1.0904+je*(je*(3.55645-1.43519*je)-3.2452))*Oi*Oi+(.848013+je*(.215638*je-1.06021)))}const Gn=Pe.sub(be)._mult(_n)._add(be)._unit()._mult(gn?-1:1);this.addHalfVertex(ie,Gn.x,Gn.y,!1,gn,0,Y)}}de&&this.addCurrentVertex(ie,Pe,-hn,-Xt,Y)}else if(Jt==="butt")this.addCurrentVertex(ie,Je,0,0,Y);else if(Jt==="square"){const qt=ce?1:-1;this.addCurrentVertex(ie,Je,qt,qt,Y)}else Jt==="round"&&(ce&&(this.addCurrentVertex(ie,be,0,0,Y),this.addCurrentVertex(ie,be,1,1,Y,!0)),de&&(this.addCurrentVertex(ie,Pe,-1,-1,Y,!0),this.addCurrentVertex(ie,Pe,0,0,Y)));if(sn&&Re<L-1){const qt=ie.dist(de);if(qt>2*V){const hn=ie.add(de.sub(ie)._mult(V/qt)._round());this.updateDistance(ie,hn),this.addCurrentVertex(hn,Pe,0,0,Y),ie=hn}}}}addCurrentVertex(a,h,p,_,S,E=!1){const M=h.y*_-h.x,L=-h.y-h.x*_;this.addHalfVertex(a,h.x+h.y*p,h.y-h.x*p,E,!1,p,S),this.addHalfVertex(a,M,L,E,!0,-_,S),this.distance>gS/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(a,h,p,_,S,E))}addHalfVertex({x:a,y:h},p,_,S,E,M,L){const $=.5*(this.lineClips?this.scaledDistance*(gS-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((a<<1)+(S?1:0),(h<<1)+(E?1:0),Math.round(63*p)+128,Math.round(63*_)+128,1+(M===0?0:M<0?-1:1)|(63&$)<<2,$>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const V=L.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,V),L.primitiveLength++),E?this.e2=V:this.e1=V}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(a,h){this.distance+=a.dist(h),this.updateScaledDistance()}}let vS,_S;un("LineBucket",s0,{omit:["layers","patternFeatures"]});var yS={get paint(){return _S=_S||new sr({"line-opacity":new Ln(Se.paint_line["line-opacity"]),"line-color":new Ln(Se.paint_line["line-color"]),"line-translate":new wn(Se.paint_line["line-translate"]),"line-translate-anchor":new wn(Se.paint_line["line-translate-anchor"]),"line-width":new Ln(Se.paint_line["line-width"]),"line-gap-width":new Ln(Se.paint_line["line-gap-width"]),"line-offset":new Ln(Se.paint_line["line-offset"]),"line-blur":new Ln(Se.paint_line["line-blur"]),"line-dasharray":new Ef(Se.paint_line["line-dasharray"]),"line-pattern":new ru(Se.paint_line["line-pattern"]),"line-gradient":new Cf(Se.paint_line["line-gradient"])})},get layout(){return vS=vS||new sr({"line-cap":new wn(Se.layout_line["line-cap"]),"line-join":new Ln(Se.layout_line["line-join"]),"line-miter-limit":new wn(Se.layout_line["line-miter-limit"]),"line-round-limit":new wn(Se.layout_line["line-round-limit"]),"line-sort-key":new Ln(Se.layout_line["line-sort-key"])})}};class VL extends Ln{possiblyEvaluate(a,h){return h=new Di(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(a,h)}evaluate(a,h,p,_){return h=se({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(a,h,p,_)}}let Lg;class UL extends Us{constructor(a){super(a,yS),this.gradientVersion=0,Lg||(Lg=new VL(yS.paint.properties["line-width"].specification),Lg.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(a){if(a==="line-gradient"){const h=this.gradientExpression();this.stepInterpolant=!!function(p){return p._styleExpression!==void 0}(h)&&h._styleExpression.expression instanceof To,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(a,h){super.recalculate(a,h),this.paint._values["line-floorwidth"]=Lg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new s0(a)}queryRadius(a){const h=a,p=bS(Of("line-width",this,h),Of("line-gap-width",this,h)),_=Of("line-offset",this,h);return p/2+Math.abs(_)+Cg(this.paint.get("line-translate"))}queryIntersectsFeature(a,h,p,_,S,E,M){const L=Ig(a,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),E.angle,M),$=M/2*bS(this.paint.get("line-width").evaluate(h,p),this.paint.get("line-gap-width").evaluate(h,p)),V=this.paint.get("line-offset").evaluate(h,p);return V&&(_=function(Y,ie){const ce=[];for(let de=0;de<Y.length;de++){const be=Y[de],Pe=[];for(let Re=0;Re<be.length;Re++){const Je=be[Re-1],je=be[Re],rt=be[Re+1],dt=Re===0?new C(0,0):je.sub(Je)._unit()._perp(),Lt=Re===be.length-1?new C(0,0):rt.sub(je)._unit()._perp(),sn=dt._add(Lt)._unit(),gn=sn.x*Lt.x+sn.y*Lt.y;gn!==0&&sn._mult(1/gn),Pe.push(sn._mult(ie)._add(je))}ce.push(Pe)}return ce}(_,V*M)),function(Y,ie,ce){for(let de=0;de<ie.length;de++){const be=ie[de];if(Y.length>=3){for(let Pe=0;Pe<be.length;Pe++)if(Dd(Y,be[Pe]))return!0}if(KD(Y,be,ce))return!0}return!1}(L,_,$)}isTileClipped(){return!0}}function bS(u,a){return a>0?a+2*u:u}const HL=Vi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),GL=Vi([{name:"a_projected_pos",components:3,type:"Float32"}],4);Vi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const WL=Vi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Vi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const xS=Vi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),qL=Vi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ZL(u,a,h){return u.sections.forEach(p=>{p.text=function(_,S,E){const M=S.layout.get("text-transform").evaluate(E,{});return M==="uppercase"?_=_.toLocaleUpperCase():M==="lowercase"&&(_=_.toLocaleLowerCase()),ws.applyArabicShaping&&(_=ws.applyArabicShaping(_)),_}(p.text,a,h)}),u}Vi([{name:"triangle",components:3,type:"Uint16"}]),Vi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Vi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Vi([{type:"Float32",name:"offsetX"}]),Vi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Vi([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Uf={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var _r=24,wS=Ci,SS=function(u,a,h,p,_){var S,E,M=8*_-p-1,L=(1<<M)-1,$=L>>1,V=-7,Y=h?_-1:0,ie=h?-1:1,ce=u[a+Y];for(Y+=ie,S=ce&(1<<-V)-1,ce>>=-V,V+=M;V>0;S=256*S+u[a+Y],Y+=ie,V-=8);for(E=S&(1<<-V)-1,S>>=-V,V+=p;V>0;E=256*E+u[a+Y],Y+=ie,V-=8);if(S===0)S=1-$;else{if(S===L)return E?NaN:1/0*(ce?-1:1);E+=Math.pow(2,p),S-=$}return(ce?-1:1)*E*Math.pow(2,S-p)},TS=function(u,a,h,p,_,S){var E,M,L,$=8*S-_-1,V=(1<<$)-1,Y=V>>1,ie=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,ce=p?0:S-1,de=p?1:-1,be=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(M=isNaN(a)?1:0,E=V):(E=Math.floor(Math.log(a)/Math.LN2),a*(L=Math.pow(2,-E))<1&&(E--,L*=2),(a+=E+Y>=1?ie/L:ie*Math.pow(2,1-Y))*L>=2&&(E++,L/=2),E+Y>=V?(M=0,E=V):E+Y>=1?(M=(a*L-1)*Math.pow(2,_),E+=Y):(M=a*Math.pow(2,Y-1)*Math.pow(2,_),E=0));_>=8;u[h+ce]=255&M,ce+=de,M/=256,_-=8);for(E=E<<_|M,$+=_;$>0;u[h+ce]=255&E,ce+=de,E/=256,$-=8);u[h+ce-de]|=128*be};function Ci(u){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(u)?u:new Uint8Array(u||0),this.pos=0,this.type=0,this.length=this.buf.length}Ci.Varint=0,Ci.Fixed64=1,Ci.Bytes=2,Ci.Fixed32=5;var a0=4294967296,ES=1/a0,CS=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function dl(u){return u.type===Ci.Bytes?u.readVarint()+u.pos:u.pos+1}function Fd(u,a,h){return h?4294967296*a+(u>>>0):4294967296*(a>>>0)+(u>>>0)}function IS(u,a,h){var p=a<=16383?1:a<=2097151?2:a<=268435455?3:Math.floor(Math.log(a)/(7*Math.LN2));h.realloc(p);for(var _=h.pos-1;_>=u;_--)h.buf[_+p]=h.buf[_]}function KL(u,a){for(var h=0;h<u.length;h++)a.writeVarint(u[h])}function XL(u,a){for(var h=0;h<u.length;h++)a.writeSVarint(u[h])}function YL(u,a){for(var h=0;h<u.length;h++)a.writeFloat(u[h])}function JL(u,a){for(var h=0;h<u.length;h++)a.writeDouble(u[h])}function QL(u,a){for(var h=0;h<u.length;h++)a.writeBoolean(u[h])}function eO(u,a){for(var h=0;h<u.length;h++)a.writeFixed32(u[h])}function tO(u,a){for(var h=0;h<u.length;h++)a.writeSFixed32(u[h])}function nO(u,a){for(var h=0;h<u.length;h++)a.writeFixed64(u[h])}function iO(u,a){for(var h=0;h<u.length;h++)a.writeSFixed64(u[h])}function Og(u,a){return(u[a]|u[a+1]<<8|u[a+2]<<16)+16777216*u[a+3]}function $d(u,a,h){u[h]=a,u[h+1]=a>>>8,u[h+2]=a>>>16,u[h+3]=a>>>24}function AS(u,a){return(u[a]|u[a+1]<<8|u[a+2]<<16)+(u[a+3]<<24)}Ci.prototype={destroy:function(){this.buf=null},readFields:function(u,a,h){for(h=h||this.length;this.pos<h;){var p=this.readVarint(),_=p>>3,S=this.pos;this.type=7&p,u(_,a,this),this.pos===S&&this.skip(p)}return a},readMessage:function(u,a){return this.readFields(u,a,this.readVarint()+this.pos)},readFixed32:function(){var u=Og(this.buf,this.pos);return this.pos+=4,u},readSFixed32:function(){var u=AS(this.buf,this.pos);return this.pos+=4,u},readFixed64:function(){var u=Og(this.buf,this.pos)+Og(this.buf,this.pos+4)*a0;return this.pos+=8,u},readSFixed64:function(){var u=Og(this.buf,this.pos)+AS(this.buf,this.pos+4)*a0;return this.pos+=8,u},readFloat:function(){var u=SS(this.buf,this.pos,!0,23,4);return this.pos+=4,u},readDouble:function(){var u=SS(this.buf,this.pos,!0,52,8);return this.pos+=8,u},readVarint:function(u){var a,h,p=this.buf;return a=127&(h=p[this.pos++]),h<128?a:(a|=(127&(h=p[this.pos++]))<<7,h<128?a:(a|=(127&(h=p[this.pos++]))<<14,h<128?a:(a|=(127&(h=p[this.pos++]))<<21,h<128?a:function(_,S,E){var M,L,$=E.buf;if(M=(112&(L=$[E.pos++]))>>4,L<128||(M|=(127&(L=$[E.pos++]))<<3,L<128)||(M|=(127&(L=$[E.pos++]))<<10,L<128)||(M|=(127&(L=$[E.pos++]))<<17,L<128)||(M|=(127&(L=$[E.pos++]))<<24,L<128)||(M|=(1&(L=$[E.pos++]))<<31,L<128))return Fd(_,M,S);throw new Error("Expected varint not more than 10 bytes")}(a|=(15&(h=p[this.pos]))<<28,u,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var u=this.readVarint();return u%2==1?(u+1)/-2:u/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var u=this.readVarint()+this.pos,a=this.pos;return this.pos=u,u-a>=12&&CS?function(h,p,_){return CS.decode(h.subarray(p,_))}(this.buf,a,u):function(h,p,_){for(var S="",E=p;E<_;){var M,L,$,V=h[E],Y=null,ie=V>239?4:V>223?3:V>191?2:1;if(E+ie>_)break;ie===1?V<128&&(Y=V):ie===2?(192&(M=h[E+1]))==128&&(Y=(31&V)<<6|63&M)<=127&&(Y=null):ie===3?(L=h[E+2],(192&(M=h[E+1]))==128&&(192&L)==128&&((Y=(15&V)<<12|(63&M)<<6|63&L)<=2047||Y>=55296&&Y<=57343)&&(Y=null)):ie===4&&(L=h[E+2],$=h[E+3],(192&(M=h[E+1]))==128&&(192&L)==128&&(192&$)==128&&((Y=(15&V)<<18|(63&M)<<12|(63&L)<<6|63&$)<=65535||Y>=1114112)&&(Y=null)),Y===null?(Y=65533,ie=1):Y>65535&&(Y-=65536,S+=String.fromCharCode(Y>>>10&1023|55296),Y=56320|1023&Y),S+=String.fromCharCode(Y),E+=ie}return S}(this.buf,a,u)},readBytes:function(){var u=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,u);return this.pos=u,a},readPackedVarint:function(u,a){if(this.type!==Ci.Bytes)return u.push(this.readVarint(a));var h=dl(this);for(u=u||[];this.pos<h;)u.push(this.readVarint(a));return u},readPackedSVarint:function(u){if(this.type!==Ci.Bytes)return u.push(this.readSVarint());var a=dl(this);for(u=u||[];this.pos<a;)u.push(this.readSVarint());return u},readPackedBoolean:function(u){if(this.type!==Ci.Bytes)return u.push(this.readBoolean());var a=dl(this);for(u=u||[];this.pos<a;)u.push(this.readBoolean());return u},readPackedFloat:function(u){if(this.type!==Ci.Bytes)return u.push(this.readFloat());var a=dl(this);for(u=u||[];this.pos<a;)u.push(this.readFloat());return u},readPackedDouble:function(u){if(this.type!==Ci.Bytes)return u.push(this.readDouble());var a=dl(this);for(u=u||[];this.pos<a;)u.push(this.readDouble());return u},readPackedFixed32:function(u){if(this.type!==Ci.Bytes)return u.push(this.readFixed32());var a=dl(this);for(u=u||[];this.pos<a;)u.push(this.readFixed32());return u},readPackedSFixed32:function(u){if(this.type!==Ci.Bytes)return u.push(this.readSFixed32());var a=dl(this);for(u=u||[];this.pos<a;)u.push(this.readSFixed32());return u},readPackedFixed64:function(u){if(this.type!==Ci.Bytes)return u.push(this.readFixed64());var a=dl(this);for(u=u||[];this.pos<a;)u.push(this.readFixed64());return u},readPackedSFixed64:function(u){if(this.type!==Ci.Bytes)return u.push(this.readSFixed64());var a=dl(this);for(u=u||[];this.pos<a;)u.push(this.readSFixed64());return u},skip:function(u){var a=7&u;if(a===Ci.Varint)for(;this.buf[this.pos++]>127;);else if(a===Ci.Bytes)this.pos=this.readVarint()+this.pos;else if(a===Ci.Fixed32)this.pos+=4;else{if(a!==Ci.Fixed64)throw new Error("Unimplemented type: "+a);this.pos+=8}},writeTag:function(u,a){this.writeVarint(u<<3|a)},realloc:function(u){for(var a=this.length||16;a<this.pos+u;)a*=2;if(a!==this.length){var h=new Uint8Array(a);h.set(this.buf),this.buf=h,this.length=a}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(u){this.realloc(4),$d(this.buf,u,this.pos),this.pos+=4},writeSFixed32:function(u){this.realloc(4),$d(this.buf,u,this.pos),this.pos+=4},writeFixed64:function(u){this.realloc(8),$d(this.buf,-1&u,this.pos),$d(this.buf,Math.floor(u*ES),this.pos+4),this.pos+=8},writeSFixed64:function(u){this.realloc(8),$d(this.buf,-1&u,this.pos),$d(this.buf,Math.floor(u*ES),this.pos+4),this.pos+=8},writeVarint:function(u){(u=+u||0)>268435455||u<0?function(a,h){var p,_;if(a>=0?(p=a%4294967296|0,_=a/4294967296|0):(_=~(-a/4294967296),4294967295^(p=~(-a%4294967296))?p=p+1|0:(p=0,_=_+1|0)),a>=18446744073709552e3||a<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),function(S,E,M){M.buf[M.pos++]=127&S|128,S>>>=7,M.buf[M.pos++]=127&S|128,S>>>=7,M.buf[M.pos++]=127&S|128,S>>>=7,M.buf[M.pos++]=127&S|128,M.buf[M.pos]=127&(S>>>=7)}(p,0,h),function(S,E){var M=(7&S)<<4;E.buf[E.pos++]|=M|((S>>>=3)?128:0),S&&(E.buf[E.pos++]=127&S|((S>>>=7)?128:0),S&&(E.buf[E.pos++]=127&S|((S>>>=7)?128:0),S&&(E.buf[E.pos++]=127&S|((S>>>=7)?128:0),S&&(E.buf[E.pos++]=127&S|((S>>>=7)?128:0),S&&(E.buf[E.pos++]=127&S)))))}(_,h)}(u,this):(this.realloc(4),this.buf[this.pos++]=127&u|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))},writeSVarint:function(u){this.writeVarint(u<0?2*-u-1:2*u)},writeBoolean:function(u){this.writeVarint(!!u)},writeString:function(u){u=String(u),this.realloc(4*u.length),this.pos++;var a=this.pos;this.pos=function(p,_,S){for(var E,M,L=0;L<_.length;L++){if((E=_.charCodeAt(L))>55295&&E<57344){if(!M){E>56319||L+1===_.length?(p[S++]=239,p[S++]=191,p[S++]=189):M=E;continue}if(E<56320){p[S++]=239,p[S++]=191,p[S++]=189,M=E;continue}E=M-55296<<10|E-56320|65536,M=null}else M&&(p[S++]=239,p[S++]=191,p[S++]=189,M=null);E<128?p[S++]=E:(E<2048?p[S++]=E>>6|192:(E<65536?p[S++]=E>>12|224:(p[S++]=E>>18|240,p[S++]=E>>12&63|128),p[S++]=E>>6&63|128),p[S++]=63&E|128)}return S}(this.buf,u,this.pos);var h=this.pos-a;h>=128&&IS(a,h,this),this.pos=a-1,this.writeVarint(h),this.pos+=h},writeFloat:function(u){this.realloc(4),TS(this.buf,u,this.pos,!0,23,4),this.pos+=4},writeDouble:function(u){this.realloc(8),TS(this.buf,u,this.pos,!0,52,8),this.pos+=8},writeBytes:function(u){var a=u.length;this.writeVarint(a),this.realloc(a);for(var h=0;h<a;h++)this.buf[this.pos++]=u[h]},writeRawMessage:function(u,a){this.pos++;var h=this.pos;u(a,this);var p=this.pos-h;p>=128&&IS(h,p,this),this.pos=h-1,this.writeVarint(p),this.pos+=p},writeMessage:function(u,a,h){this.writeTag(u,Ci.Bytes),this.writeRawMessage(a,h)},writePackedVarint:function(u,a){a.length&&this.writeMessage(u,KL,a)},writePackedSVarint:function(u,a){a.length&&this.writeMessage(u,XL,a)},writePackedBoolean:function(u,a){a.length&&this.writeMessage(u,QL,a)},writePackedFloat:function(u,a){a.length&&this.writeMessage(u,YL,a)},writePackedDouble:function(u,a){a.length&&this.writeMessage(u,JL,a)},writePackedFixed32:function(u,a){a.length&&this.writeMessage(u,eO,a)},writePackedSFixed32:function(u,a){a.length&&this.writeMessage(u,tO,a)},writePackedFixed64:function(u,a){a.length&&this.writeMessage(u,nO,a)},writePackedSFixed64:function(u,a){a.length&&this.writeMessage(u,iO,a)},writeBytesField:function(u,a){this.writeTag(u,Ci.Bytes),this.writeBytes(a)},writeFixed32Field:function(u,a){this.writeTag(u,Ci.Fixed32),this.writeFixed32(a)},writeSFixed32Field:function(u,a){this.writeTag(u,Ci.Fixed32),this.writeSFixed32(a)},writeFixed64Field:function(u,a){this.writeTag(u,Ci.Fixed64),this.writeFixed64(a)},writeSFixed64Field:function(u,a){this.writeTag(u,Ci.Fixed64),this.writeSFixed64(a)},writeVarintField:function(u,a){this.writeTag(u,Ci.Varint),this.writeVarint(a)},writeSVarintField:function(u,a){this.writeTag(u,Ci.Varint),this.writeSVarint(a)},writeStringField:function(u,a){this.writeTag(u,Ci.Bytes),this.writeString(a)},writeFloatField:function(u,a){this.writeTag(u,Ci.Fixed32),this.writeFloat(a)},writeDoubleField:function(u,a){this.writeTag(u,Ci.Fixed64),this.writeDouble(a)},writeBooleanField:function(u,a){this.writeVarintField(u,!!a)}};var o0=g(wS);const l0=3;function rO(u,a,h){u===1&&h.readMessage(sO,a)}function sO(u,a,h){if(u===3){const{id:p,bitmap:_,width:S,height:E,left:M,top:L,advance:$}=h.readMessage(aO,{});a.push({id:p,bitmap:new Ff({width:S+2*l0,height:E+2*l0},_),metrics:{width:S,height:E,left:M,top:L,advance:$}})}}function aO(u,a,h){u===1?a.id=h.readVarint():u===2?a.bitmap=h.readBytes():u===3?a.width=h.readVarint():u===4?a.height=h.readVarint():u===5?a.left=h.readSVarint():u===6?a.top=h.readSVarint():u===7&&(a.advance=h.readVarint())}const MS=l0;function kS(u){let a=0,h=0;for(const E of u)a+=E.w*E.h,h=Math.max(h,E.w);u.sort((E,M)=>M.h-E.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),h),h:1/0}];let _=0,S=0;for(const E of u)for(let M=p.length-1;M>=0;M--){const L=p[M];if(!(E.w>L.w||E.h>L.h)){if(E.x=L.x,E.y=L.y,S=Math.max(S,E.y+E.h),_=Math.max(_,E.x+E.w),E.w===L.w&&E.h===L.h){const $=p.pop();M<p.length&&(p[M]=$)}else E.h===L.h?(L.x+=E.w,L.w-=E.w):E.w===L.w?(L.y+=E.h,L.h-=E.h):(p.push({x:L.x+E.w,y:L.y,w:L.w-E.w,h:E.h}),L.y+=E.h,L.h-=E.h);break}}return{w:_,h:S,fill:a/(_*S)||0}}const Ts=1;class c0{constructor(a,{pixelRatio:h,version:p,stretchX:_,stretchY:S,content:E}){this.paddedRect=a,this.pixelRatio=h,this.stretchX=_,this.stretchY=S,this.content=E,this.version=p}get tl(){return[this.paddedRect.x+Ts,this.paddedRect.y+Ts]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ts,this.paddedRect.y+this.paddedRect.h-Ts]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ts)/this.pixelRatio,(this.paddedRect.h-2*Ts)/this.pixelRatio]}}class PS{constructor(a,h){const p={},_={};this.haveRenderCallbacks=[];const S=[];this.addImages(a,p,S),this.addImages(h,_,S);const{w:E,h:M}=kS(S),L=new na({width:E||1,height:M||1});for(const $ in a){const V=a[$],Y=p[$].paddedRect;na.copy(V.data,L,{x:0,y:0},{x:Y.x+Ts,y:Y.y+Ts},V.data)}for(const $ in h){const V=h[$],Y=_[$].paddedRect,ie=Y.x+Ts,ce=Y.y+Ts,de=V.data.width,be=V.data.height;na.copy(V.data,L,{x:0,y:0},{x:ie,y:ce},V.data),na.copy(V.data,L,{x:0,y:be-1},{x:ie,y:ce-1},{width:de,height:1}),na.copy(V.data,L,{x:0,y:0},{x:ie,y:ce+be},{width:de,height:1}),na.copy(V.data,L,{x:de-1,y:0},{x:ie-1,y:ce},{width:1,height:be}),na.copy(V.data,L,{x:0,y:0},{x:ie+de,y:ce},{width:1,height:be})}this.image=L,this.iconPositions=p,this.patternPositions=_}addImages(a,h,p){for(const _ in a){const S=a[_],E={x:0,y:0,w:S.data.width+2*Ts,h:S.data.height+2*Ts};p.push(E),h[_]=new c0(E,S),S.hasRenderCallback&&this.haveRenderCallbacks.push(_)}}patchUpdatedImages(a,h){a.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in a.updatedImages)this.patchUpdatedImage(this.iconPositions[p],a.getImage(p),h),this.patchUpdatedImage(this.patternPositions[p],a.getImage(p),h)}patchUpdatedImage(a,h,p){if(!a||!h||a.version===h.version)return;a.version=h.version;const[_,S]=a.tl;p.update(h.data,void 0,{x:_,y:S})}}var Jl;un("ImagePosition",c0),un("ImageAtlas",PS),l.ai=void 0,(Jl=l.ai||(l.ai={}))[Jl.none=0]="none",Jl[Jl.horizontal=1]="horizontal",Jl[Jl.vertical=2]="vertical",Jl[Jl.horizontalOnly=3]="horizontalOnly";const Hf=-17;class Gf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(a,h){const p=new Gf;return p.scale=a||1,p.fontStack=h,p}static forImage(a){const h=new Gf;return h.imageName=a,h}}class zd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,h){const p=new zd;for(let _=0;_<a.sections.length;_++){const S=a.sections[_];S.image?p.addImageSection(S):p.addTextSection(S,h)}return p}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSectionIndex(a){return this.sectionIndex[a]}getCharCode(a){return this.text.charCodeAt(a)}verticalizePunctuation(){this.text=function(a){let h="";for(let p=0;p<a.length;p++){const _=a.charCodeAt(p+1)||null,S=a.charCodeAt(p-1)||null;h+=_&&mg(_)&&!Uf[a[p+1]]||S&&mg(S)&&!Uf[a[p-1]]||!Uf[a[p]]?a[p]:Uf[a[p]]}return h}(this.text)}trim(){let a=0;for(let p=0;p<this.text.length&&Fg[this.text.charCodeAt(p)];p++)a++;let h=this.text.length;for(let p=this.text.length-1;p>=0&&p>=a&&Fg[this.text.charCodeAt(p)];p--)h--;this.text=this.text.substring(a,h),this.sectionIndex=this.sectionIndex.slice(a,h)}substring(a,h){const p=new zd;return p.text=this.text.substring(a,h),p.sectionIndex=this.sectionIndex.slice(a,h),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((a,h)=>Math.max(a,this.sections[h].scale),0)}addTextSection(a,h){this.text+=a.text,this.sections.push(Gf.forText(a.scale,a.fontStack||h));const p=this.sections.length-1;for(let _=0;_<a.text.length;++_)this.sectionIndex.push(p)}addImageSection(a){const h=a.image?a.image.name:"";if(h.length===0)return void re("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push(Gf.forImage(h)),this.sectionIndex.push(this.sections.length-1)):re("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Rg(u,a,h,p,_,S,E,M,L,$,V,Y,ie,ce,de,be){const Pe=zd.fromFeature(u,_);let Re;Y===l.ai.vertical&&Pe.verticalizePunctuation();const{processBidirectionalText:Je,processStyledBidirectionalText:je}=ws;if(Je&&Pe.sections.length===1){Re=[];const Lt=Je(Pe.toString(),u0(Pe,$,S,a,p,ce,de));for(const sn of Lt){const gn=new zd;gn.text=sn,gn.sections=Pe.sections;for(let en=0;en<sn.length;en++)gn.sectionIndex.push(0);Re.push(gn)}}else if(je){Re=[];const Lt=je(Pe.text,Pe.sectionIndex,u0(Pe,$,S,a,p,ce,de));for(const sn of Lt){const gn=new zd;gn.text=sn[0],gn.sectionIndex=sn[1],gn.sections=Pe.sections,Re.push(gn)}}else Re=function(Lt,sn){const gn=[],en=Lt.text;let Jt=0;for(const qt of sn)gn.push(Lt.substring(Jt,qt)),Jt=qt;return Jt<en.length&&gn.push(Lt.substring(Jt,en.length)),gn}(Pe,u0(Pe,$,S,a,p,ce,de));const rt=[],dt={positionedLines:rt,text:Pe.toString(),top:V[1],bottom:V[1],left:V[0],right:V[0],writingMode:Y,iconsInText:!1,verticalizable:!1};return function(Lt,sn,gn,en,Jt,qt,hn,Xt,jt,An,_n,Gn){let Oi=0,zi=Hf,yr=0,Gs=0;const os=Xt==="right"?1:Xt==="left"?0:.5;let dr=0;for(const br of Jt){br.trim();const xr=br.getMaxScale(),qr=(xr-1)*_r,us={positionedGlyphs:[],lineOffset:0};Lt.positionedLines[dr]=us;const Zr=us.positionedGlyphs;let Es=0;if(!br.length()){zi+=qt,++dr;continue}for(let wr=0;wr<br.length();wr++){const ei=br.getSection(wr),Kr=br.getSectionIndex(wr),Ur=br.getCharCode(wr);let Sr=0,Ia=null,Ya=null,Ja=null,hl=_r;const Aa=!(jt===l.ai.horizontal||!_n&&!vf(Ur)||_n&&(Fg[Ur]||(Rr=Ur,rn.Arabic(Rr)||rn["Arabic Supplement"](Rr)||rn["Arabic Extended-A"](Rr)||rn["Arabic Presentation Forms-A"](Rr)||rn["Arabic Presentation Forms-B"](Rr))));if(ei.imageName){const ra=en[ei.imageName];if(!ra)continue;Ja=ei.imageName,Lt.iconsInText=Lt.iconsInText||!0,Ya=ra.paddedRect;const Is=ra.displaySize;ei.scale=ei.scale*_r/Gn,Ia={width:Is[0],height:Is[1],left:Ts,top:-MS,advance:Aa?Is[1]:Is[0]},Sr=qr+(_r-Is[1]*ei.scale),hl=Ia.advance;const fl=Aa?Is[0]*ei.scale-_r*xr:Is[1]*ei.scale-_r*xr;fl>0&&fl>Es&&(Es=fl)}else{const ra=gn[ei.fontStack],Is=ra&&ra[Ur];if(Is&&Is.rect)Ya=Is.rect,Ia=Is.metrics;else{const fl=sn[ei.fontStack],Xf=fl&&fl[Ur];if(!Xf)continue;Ia=Xf.metrics}Sr=(xr-ei.scale)*_r}Aa?(Lt.verticalizable=!0,Zr.push({glyph:Ur,imageName:Ja,x:Oi,y:zi+Sr,vertical:Aa,scale:ei.scale,fontStack:ei.fontStack,sectionIndex:Kr,metrics:Ia,rect:Ya}),Oi+=hl*ei.scale+An):(Zr.push({glyph:Ur,imageName:Ja,x:Oi,y:zi+Sr,vertical:Aa,scale:ei.scale,fontStack:ei.fontStack,sectionIndex:Kr,metrics:Ia,rect:Ya}),Oi+=Ia.advance*ei.scale+An)}Zr.length!==0&&(yr=Math.max(Oi-An,yr),cO(Zr,0,Zr.length-1,os,Es)),Oi=0;const Cs=qt*xr+Es;us.lineOffset=Math.max(Es,qr),zi+=Cs,Gs=Math.max(Cs,Gs),++dr}var Rr;const Vr=zi-Hf,{horizontalAlign:ls,verticalAlign:cs}=d0(hn);(function(br,xr,qr,us,Zr,Es,Cs,wr,ei){const Kr=(xr-qr)*Zr;let Ur=0;Ur=Es!==Cs?-wr*us-Hf:(-us*ei+.5)*Cs;for(const Sr of br)for(const Ia of Sr.positionedGlyphs)Ia.x+=Kr,Ia.y+=Ur})(Lt.positionedLines,os,ls,cs,yr,Gs,qt,Vr,Jt.length),Lt.top+=-cs*Vr,Lt.bottom=Lt.top+Vr,Lt.left+=-ls*yr,Lt.right=Lt.left+yr}(dt,a,h,p,Re,E,M,L,Y,$,ie,be),!function(Lt){for(const sn of Lt)if(sn.positionedGlyphs.length!==0)return!1;return!0}(rt)&&dt}const Fg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},oO={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function DS(u,a,h,p,_,S){if(a.imageName){const E=p[a.imageName];return E?E.displaySize[0]*a.scale*_r/S+_:0}{const E=h[a.fontStack],M=E&&E[u];return M?M.metrics.advance*a.scale+_:0}}function LS(u,a,h,p){const _=Math.pow(u-a,2);return p?u<a?_/2:2*_:_+Math.abs(h)*h}function lO(u,a,h){let p=0;return u===10&&(p-=1e4),h&&(p+=150),u!==40&&u!==65288||(p+=50),a!==41&&a!==65289||(p+=50),p}function OS(u,a,h,p,_,S){let E=null,M=LS(a,h,_,S);for(const L of p){const $=LS(a-L.x,h,_,S)+L.badness;$<=M&&(E=L,M=$)}return{index:u,x:a,priorBreak:E,badness:M}}function RS(u){return u?RS(u.priorBreak).concat(u.index):[]}function u0(u,a,h,p,_,S,E){if(S!=="point")return[];if(!u)return[];const M=[],L=function(ie,ce,de,be,Pe,Re){let Je=0;for(let je=0;je<ie.length();je++){const rt=ie.getSection(je);Je+=DS(ie.getCharCode(je),rt,be,Pe,ce,Re)}return Je/Math.max(1,Math.ceil(Je/de))}(u,a,h,p,_,E),$=u.text.indexOf("​")>=0;let V=0;for(let ie=0;ie<u.length();ie++){const ce=u.getSection(ie),de=u.getCharCode(ie);if(Fg[de]||(V+=DS(de,ce,p,_,a,E)),ie<u.length()-1){const be=!((Y=de)<11904||!(rn["Bopomofo Extended"](Y)||rn.Bopomofo(Y)||rn["CJK Compatibility Forms"](Y)||rn["CJK Compatibility Ideographs"](Y)||rn["CJK Compatibility"](Y)||rn["CJK Radicals Supplement"](Y)||rn["CJK Strokes"](Y)||rn["CJK Symbols and Punctuation"](Y)||rn["CJK Unified Ideographs Extension A"](Y)||rn["CJK Unified Ideographs"](Y)||rn["Enclosed CJK Letters and Months"](Y)||rn["Halfwidth and Fullwidth Forms"](Y)||rn.Hiragana(Y)||rn["Ideographic Description Characters"](Y)||rn["Kangxi Radicals"](Y)||rn["Katakana Phonetic Extensions"](Y)||rn.Katakana(Y)||rn["Vertical Forms"](Y)||rn["Yi Radicals"](Y)||rn["Yi Syllables"](Y)));(oO[de]||be||ce.imageName)&&M.push(OS(ie+1,V,L,M,lO(de,u.getCharCode(ie+1),be&&$),!1))}}var Y;return RS(OS(u.length(),V,L,M,0,!0))}function d0(u){let a=.5,h=.5;switch(u){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:a,verticalAlign:h}}function cO(u,a,h,p,_){if(!p&&!_)return;const S=u[h],E=(u[h].x+S.metrics.advance*S.scale)*p;for(let M=a;M<=h;M++)u[M].x-=E,u[M].y+=_}function uO(u,a,h){const{horizontalAlign:p,verticalAlign:_}=d0(h),S=a[0]-u.displaySize[0]*p,E=a[1]-u.displaySize[1]*_;return{image:u,top:E,bottom:E+u.displaySize[1],left:S,right:S+u.displaySize[0]}}function FS(u,a,h,p,_,S){const E=u.image;let M;if(E.content){const Pe=E.content,Re=E.pixelRatio||1;M=[Pe[0]/Re,Pe[1]/Re,E.displaySize[0]-Pe[2]/Re,E.displaySize[1]-Pe[3]/Re]}const L=a.left*S,$=a.right*S;let V,Y,ie,ce;h==="width"||h==="both"?(ce=_[0]+L-p[3],Y=_[0]+$+p[1]):(ce=_[0]+(L+$-E.displaySize[0])/2,Y=ce+E.displaySize[0]);const de=a.top*S,be=a.bottom*S;return h==="height"||h==="both"?(V=_[1]+de-p[0],ie=_[1]+be+p[2]):(V=_[1]+(de+be-E.displaySize[1])/2,ie=V+E.displaySize[1]),{image:E,top:V,right:Y,bottom:ie,left:ce,collisionPadding:M}}const Wf=255,Mo=128,Ql=Wf*Mo;function $S(u,a){const{expression:h}=a;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new Di(u+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:p,interpolationType:_}=h;let S=0;for(;S<p.length&&p[S]<=u;)S++;S=Math.max(0,S-1);let E=S;for(;E<p.length&&p[E]<u+1;)E++;E=Math.min(p.length-1,E);const M=p[S],L=p[E];return h.kind==="composite"?{kind:"composite",minZoom:M,maxZoom:L,interpolationType:_}:{kind:"camera",minZoom:M,maxZoom:L,minSize:h.evaluate(new Di(M)),maxSize:h.evaluate(new Di(L)),interpolationType:_}}}function h0(u,a,h){let p="never";const _=u.get(a);return _?p=_:u.get(h)&&(p="always"),p}const dO=Yl.VectorTileFeature.types,hO=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function $g(u,a,h,p,_,S,E,M,L,$,V,Y,ie){const ce=M?Math.min(Ql,Math.round(M[0])):0,de=M?Math.min(Ql,Math.round(M[1])):0;u.emplaceBack(a,h,Math.round(32*p),Math.round(32*_),S,E,(ce<<1)+(L?1:0),de,16*$,16*V,256*Y,256*ie)}function f0(u,a,h){u.emplaceBack(a.x,a.y,h),u.emplaceBack(a.x,a.y,h),u.emplaceBack(a.x,a.y,h),u.emplaceBack(a.x,a.y,h)}function fO(u){for(const a of u.sections)if(Ny(a.text))return!0;return!1}class p0{constructor(a){this.layoutVertexArray=new qn,this.indexArray=new Lr,this.programConfigurations=a,this.segments=new Li,this.dynamicLayoutVertexArray=new Vn,this.opacityVertexArray=new Xn,this.hasVisibleVertices=!1,this.placedSymbolArray=new Ze}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(a,h,p,_){this.isEmpty()||(p&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,HL.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,GL.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,hO,!0),this.opacityVertexBuffer.itemSize=1),(p||_)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}un("SymbolBuffers",p0);class m0{constructor(a,h,p){this.layoutVertexArray=new a,this.layoutAttributes=h,this.indexArray=new p,this.segments=new Li,this.collisionVertexArray=new Ii}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,WL.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}un("CollisionBuffers",m0);class Nd{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(E=>E.id),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Wy([]),this.placementViewportMatrix=Wy([]);const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=$S(this.zoom,h["text-size"]),this.iconSizeData=$S(this.zoom,h["icon-size"]);const p=this.layers[0].layout,_=p.get("symbol-sort-key"),S=p.get("symbol-z-order");this.canOverlap=h0(p,"text-overlap","text-allow-overlap")!=="never"||h0(p,"icon-overlap","icon-allow-overlap")!=="never"||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey=S!=="viewport-y"&&!_.isConstant(),this.sortFeaturesByY=(S==="viewport-y"||S==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,p.get("symbol-placement")==="point"&&(this.writingModes=p.get("text-writing-mode").map(E=>l.ai[E])),this.stateDependentLayerIds=this.layers.filter(E=>E.isStateDependent()).map(E=>E.id),this.sourceID=a.sourceID}createArrays(){this.text=new p0(new Xa(this.layers,this.zoom,a=>/^text/.test(a))),this.icon=new p0(new Xa(this.layers,this.zoom,a=>/^icon/.test(a))),this.glyphOffsetArray=new Ye,this.lineVertexArray=new ht,this.symbolInstances=new Le,this.textAnchorOffsets=new Pt}calculateGlyphDependencies(a,h,p,_,S){for(let E=0;E<a.length;E++)if(h[a.charCodeAt(E)]=!0,(p||_)&&S){const M=Uf[a.charAt(E)];M&&(h[M.charCodeAt(0)]=!0)}}populate(a,h,p){const _=this.layers[0],S=_.layout,E=S.get("text-font"),M=S.get("text-field"),L=S.get("icon-image"),$=(M.value.kind!=="constant"||M.value.value instanceof Nr&&!M.value.value.isEmpty()||M.value.value.toString().length>0)&&(E.value.kind!=="constant"||E.value.value.length>0),V=L.value.kind!=="constant"||!!L.value.value||Object.keys(L.parameters).length>0,Y=S.get("symbol-sort-key");if(this.features=[],!$&&!V)return;const ie=h.iconDependencies,ce=h.glyphDependencies,de=h.availableImages,be=new Di(this.zoom);for(const{feature:Pe,id:Re,index:Je,sourceLayerIndex:je}of a){const rt=_._featureFilter.needGeometry,dt=lu(Pe,rt);if(!_._featureFilter.filter(be,dt,p))continue;let Lt,sn;if(rt||(dt.geometry=ou(Pe)),$){const en=_.getValueAndResolveTokens("text-field",dt,p,de),Jt=Nr.factory(en);fO(Jt)&&(this.hasRTLText=!0),(!this.hasRTLText||Sf()==="unavailable"||this.hasRTLText&&ws.isParsed())&&(Lt=ZL(Jt,_,dt))}if(V){const en=_.getValueAndResolveTokens("icon-image",dt,p,de);sn=en instanceof Dr?en:Dr.fromString(en)}if(!Lt&&!sn)continue;const gn=this.sortFeaturesByKey?Y.evaluate(dt,{},p):void 0;if(this.features.push({id:Re,text:Lt,icon:sn,index:Je,sourceLayerIndex:je,geometry:dt.geometry,properties:Pe.properties,type:dO[Pe.type],sortKey:gn}),sn&&(ie[sn.name]=!0),Lt){const en=E.evaluate(dt,{},p).join(","),Jt=S.get("text-rotation-alignment")!=="viewport"&&S.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.ai.vertical)>=0;for(const qt of Lt.sections)if(qt.image)ie[qt.image.name]=!0;else{const hn=mf(Lt.toString()),Xt=qt.fontStack||en,jt=ce[Xt]=ce[Xt]||{};this.calculateGlyphDependencies(qt.text,jt,Jt,this.allowVerticalPlacement,hn)}}}S.get("symbol-placement")==="line"&&(this.features=function(Pe){const Re={},Je={},je=[];let rt=0;function dt(en){je.push(Pe[en]),rt++}function Lt(en,Jt,qt){const hn=Je[en];return delete Je[en],Je[Jt]=hn,je[hn].geometry[0].pop(),je[hn].geometry[0]=je[hn].geometry[0].concat(qt[0]),hn}function sn(en,Jt,qt){const hn=Re[Jt];return delete Re[Jt],Re[en]=hn,je[hn].geometry[0].shift(),je[hn].geometry[0]=qt[0].concat(je[hn].geometry[0]),hn}function gn(en,Jt,qt){const hn=qt?Jt[0][Jt[0].length-1]:Jt[0][0];return`${en}:${hn.x}:${hn.y}`}for(let en=0;en<Pe.length;en++){const Jt=Pe[en],qt=Jt.geometry,hn=Jt.text?Jt.text.toString():null;if(!hn){dt(en);continue}const Xt=gn(hn,qt),jt=gn(hn,qt,!0);if(Xt in Je&&jt in Re&&Je[Xt]!==Re[jt]){const An=sn(Xt,jt,qt),_n=Lt(Xt,jt,je[An].geometry);delete Re[Xt],delete Je[jt],Je[gn(hn,je[_n].geometry,!0)]=_n,je[An].geometry=null}else Xt in Je?Lt(Xt,jt,qt):jt in Re?sn(Xt,jt,qt):(dt(en),Re[Xt]=rt-1,Je[jt]=rt-1)}return je.filter(en=>en.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Pe,Re)=>Pe.sortKey-Re.sortKey)}update(a,h,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,h,this.layers,p),this.icon.programConfigurations.updatePaintArrays(a,h,this.layers,p))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,h){const p=this.lineVertexArray.length;if(a.segment!==void 0){let _=a.dist(h[a.segment+1]),S=a.dist(h[a.segment]);const E={};for(let M=a.segment+1;M<h.length;M++)E[M]={x:h[M].x,y:h[M].y,tileUnitDistanceFromAnchor:_},M<h.length-1&&(_+=h[M+1].dist(h[M]));for(let M=a.segment||0;M>=0;M--)E[M]={x:h[M].x,y:h[M].y,tileUnitDistanceFromAnchor:S},M>0&&(S+=h[M-1].dist(h[M]));for(let M=0;M<h.length;M++){const L=E[M];this.lineVertexArray.emplaceBack(L.x,L.y,L.tileUnitDistanceFromAnchor)}}return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(a,h,p,_,S,E,M,L,$,V,Y,ie){const ce=a.indexArray,de=a.layoutVertexArray,be=a.segments.prepareSegment(4*h.length,de,ce,this.canOverlap?E.sortKey:void 0),Pe=this.glyphOffsetArray.length,Re=be.vertexLength,Je=this.allowVerticalPlacement&&M===l.ai.vertical?Math.PI/2:0,je=E.text&&E.text.sections;for(let rt=0;rt<h.length;rt++){const{tl:dt,tr:Lt,bl:sn,br:gn,tex:en,pixelOffsetTL:Jt,pixelOffsetBR:qt,minFontScaleX:hn,minFontScaleY:Xt,glyphOffset:jt,isSDF:An,sectionIndex:_n}=h[rt],Gn=be.vertexLength,Oi=jt[1];$g(de,L.x,L.y,dt.x,Oi+dt.y,en.x,en.y,p,An,Jt.x,Jt.y,hn,Xt),$g(de,L.x,L.y,Lt.x,Oi+Lt.y,en.x+en.w,en.y,p,An,qt.x,Jt.y,hn,Xt),$g(de,L.x,L.y,sn.x,Oi+sn.y,en.x,en.y+en.h,p,An,Jt.x,qt.y,hn,Xt),$g(de,L.x,L.y,gn.x,Oi+gn.y,en.x+en.w,en.y+en.h,p,An,qt.x,qt.y,hn,Xt),f0(a.dynamicLayoutVertexArray,L,Je),ce.emplaceBack(Gn,Gn+1,Gn+2),ce.emplaceBack(Gn+1,Gn+2,Gn+3),be.vertexLength+=4,be.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(jt[0]),rt!==h.length-1&&_n===h[rt+1].sectionIndex||a.programConfigurations.populatePaintArrays(de.length,E,E.index,{},ie,je&&je[_n])}a.placedSymbolArray.emplaceBack(L.x,L.y,Pe,this.glyphOffsetArray.length-Pe,Re,$,V,L.segment,p?p[0]:0,p?p[1]:0,_[0],_[1],M,0,!1,0,Y)}_addCollisionDebugVertex(a,h,p,_,S,E){return h.emplaceBack(0,0),a.emplaceBack(p.x,p.y,_,S,Math.round(E.x),Math.round(E.y))}addCollisionDebugVertices(a,h,p,_,S,E,M){const L=S.segments.prepareSegment(4,S.layoutVertexArray,S.indexArray),$=L.vertexLength,V=S.layoutVertexArray,Y=S.collisionVertexArray,ie=M.anchorX,ce=M.anchorY;this._addCollisionDebugVertex(V,Y,E,ie,ce,new C(a,h)),this._addCollisionDebugVertex(V,Y,E,ie,ce,new C(p,h)),this._addCollisionDebugVertex(V,Y,E,ie,ce,new C(p,_)),this._addCollisionDebugVertex(V,Y,E,ie,ce,new C(a,_)),L.vertexLength+=4;const de=S.indexArray;de.emplaceBack($,$+1),de.emplaceBack($+1,$+2),de.emplaceBack($+2,$+3),de.emplaceBack($+3,$),L.primitiveLength+=4}addDebugCollisionBoxes(a,h,p,_){for(let S=a;S<h;S++){const E=this.collisionBoxArray.get(S);this.addCollisionDebugVertices(E.x1,E.y1,E.x2,E.y2,_?this.textCollisionBox:this.iconCollisionBox,E.anchorPoint,p)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new m0(Ji,xS.members,gr),this.iconCollisionBox=new m0(Ji,xS.members,gr);for(let a=0;a<this.symbolInstances.length;a++){const h=this.symbolInstances.get(a);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(a,h,p,_,S,E,M,L,$){const V={};for(let Y=h;Y<p;Y++){const ie=a.get(Y);V.textBox={x1:ie.x1,y1:ie.y1,x2:ie.x2,y2:ie.y2,anchorPointX:ie.anchorPointX,anchorPointY:ie.anchorPointY},V.textFeatureIndex=ie.featureIndex;break}for(let Y=_;Y<S;Y++){const ie=a.get(Y);V.verticalTextBox={x1:ie.x1,y1:ie.y1,x2:ie.x2,y2:ie.y2,anchorPointX:ie.anchorPointX,anchorPointY:ie.anchorPointY},V.verticalTextFeatureIndex=ie.featureIndex;break}for(let Y=E;Y<M;Y++){const ie=a.get(Y);V.iconBox={x1:ie.x1,y1:ie.y1,x2:ie.x2,y2:ie.y2,anchorPointX:ie.anchorPointX,anchorPointY:ie.anchorPointY},V.iconFeatureIndex=ie.featureIndex;break}for(let Y=L;Y<$;Y++){const ie=a.get(Y);V.verticalIconBox={x1:ie.x1,y1:ie.y1,x2:ie.x2,y2:ie.y2,anchorPointX:ie.anchorPointX,anchorPointY:ie.anchorPointY},V.verticalIconFeatureIndex=ie.featureIndex;break}return V}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const p=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(a,h){const p=a.placedSymbolArray.get(h),_=p.vertexStartIndex+4*p.numGlyphs;for(let S=p.vertexStartIndex;S<_;S+=4)a.indexArray.emplaceBack(S,S+1,S+2),a.indexArray.emplaceBack(S+1,S+2,S+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(a),p=Math.cos(a),_=[],S=[],E=[];for(let M=0;M<this.symbolInstances.length;++M){E.push(M);const L=this.symbolInstances.get(M);_.push(0|Math.round(h*L.anchorX+p*L.anchorY)),S.push(L.featureIndex)}return E.sort((M,L)=>_[M]-_[L]||S[L]-S[M]),E}addToSortKeyRanges(a,h){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===h?p.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const p=this.symbolInstances.get(h);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach((_,S,E)=>{_>=0&&E.indexOf(_)===S&&this.addIndicesForPlacedSymbol(this.text,_)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let zS,NS;un("SymbolBucket",Nd,{omit:["layers","collisionBoxArray","features","compareText"]}),Nd.MAX_GLYPHS=65535,Nd.addDynamicAttributes=f0;var g0={get paint(){return NS=NS||new sr({"icon-opacity":new Ln(Se.paint_symbol["icon-opacity"]),"icon-color":new Ln(Se.paint_symbol["icon-color"]),"icon-halo-color":new Ln(Se.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ln(Se.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ln(Se.paint_symbol["icon-halo-blur"]),"icon-translate":new wn(Se.paint_symbol["icon-translate"]),"icon-translate-anchor":new wn(Se.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ln(Se.paint_symbol["text-opacity"]),"text-color":new Ln(Se.paint_symbol["text-color"],{runtimeType:cn,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new Ln(Se.paint_symbol["text-halo-color"]),"text-halo-width":new Ln(Se.paint_symbol["text-halo-width"]),"text-halo-blur":new Ln(Se.paint_symbol["text-halo-blur"]),"text-translate":new wn(Se.paint_symbol["text-translate"]),"text-translate-anchor":new wn(Se.paint_symbol["text-translate-anchor"])})},get layout(){return zS=zS||new sr({"symbol-placement":new wn(Se.layout_symbol["symbol-placement"]),"symbol-spacing":new wn(Se.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new wn(Se.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ln(Se.layout_symbol["symbol-sort-key"]),"symbol-z-order":new wn(Se.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new wn(Se.layout_symbol["icon-allow-overlap"]),"icon-overlap":new wn(Se.layout_symbol["icon-overlap"]),"icon-ignore-placement":new wn(Se.layout_symbol["icon-ignore-placement"]),"icon-optional":new wn(Se.layout_symbol["icon-optional"]),"icon-rotation-alignment":new wn(Se.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ln(Se.layout_symbol["icon-size"]),"icon-text-fit":new wn(Se.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new wn(Se.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ln(Se.layout_symbol["icon-image"]),"icon-rotate":new Ln(Se.layout_symbol["icon-rotate"]),"icon-padding":new Ln(Se.layout_symbol["icon-padding"]),"icon-keep-upright":new wn(Se.layout_symbol["icon-keep-upright"]),"icon-offset":new Ln(Se.layout_symbol["icon-offset"]),"icon-anchor":new Ln(Se.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new wn(Se.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new wn(Se.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new wn(Se.layout_symbol["text-rotation-alignment"]),"text-field":new Ln(Se.layout_symbol["text-field"]),"text-font":new Ln(Se.layout_symbol["text-font"]),"text-size":new Ln(Se.layout_symbol["text-size"]),"text-max-width":new Ln(Se.layout_symbol["text-max-width"]),"text-line-height":new wn(Se.layout_symbol["text-line-height"]),"text-letter-spacing":new Ln(Se.layout_symbol["text-letter-spacing"]),"text-justify":new Ln(Se.layout_symbol["text-justify"]),"text-radial-offset":new Ln(Se.layout_symbol["text-radial-offset"]),"text-variable-anchor":new wn(Se.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ln(Se.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ln(Se.layout_symbol["text-anchor"]),"text-max-angle":new wn(Se.layout_symbol["text-max-angle"]),"text-writing-mode":new wn(Se.layout_symbol["text-writing-mode"]),"text-rotate":new Ln(Se.layout_symbol["text-rotate"]),"text-padding":new wn(Se.layout_symbol["text-padding"]),"text-keep-upright":new wn(Se.layout_symbol["text-keep-upright"]),"text-transform":new Ln(Se.layout_symbol["text-transform"]),"text-offset":new Ln(Se.layout_symbol["text-offset"]),"text-allow-overlap":new wn(Se.layout_symbol["text-allow-overlap"]),"text-overlap":new wn(Se.layout_symbol["text-overlap"]),"text-ignore-placement":new wn(Se.layout_symbol["text-ignore-placement"]),"text-optional":new wn(Se.layout_symbol["text-optional"])})}};class BS{constructor(a){if(a.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=a.property.overrides?a.property.overrides.runtimeType:xn,this.defaultValue=a}evaluate(a){if(a.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(a.formattedSection))return h.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}un("FormatSectionOverride",BS,{omit:["defaultValue"]});class zg extends Us{constructor(a){super(a,g0)}recalculate(a,h){if(super.recalculate(a,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const p=this.layout.get("text-writing-mode");if(p){const _=[];for(const S of p)_.indexOf(S)<0&&_.push(S);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(a,h,p,_){const S=this.layout.get(a).evaluate(h,{},p,_),E=this._unevaluatedLayout._values[a];return E.isDataDriven()||yd(E.value)||!S?S:function(M,L){return L.replace(/{([^{}]+)}/g,($,V)=>M&&V in M?String(M[V]):"")}(h.properties,S)}createBucket(a){return new Nd(a)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const a of g0.paint.overridableProperties){if(!zg.hasPaintOverride(this.layout,a))continue;const h=this.paint.get(a),p=new BS(h),_=new cf(p,h.property.specification);let S=null;S=h.value.kind==="constant"||h.value.kind==="source"?new uf("source",_):new xd("composite",_,h.value.zoomStops),this.paint._values[a]=new Gr(h.property,S,h.parameters)}}_handleOverridablePaintPropertyUpdate(a,h,p){return!(!this.layout||h.isDataDriven()||p.isDataDriven())&&zg.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,h){const p=a.get("text-field"),_=g0.paint.properties[h];let S=!1;const E=M=>{for(const L of M)if(_.overrides&&_.overrides.hasOverride(L))return void(S=!0)};if(p.value.kind==="constant"&&p.value.value instanceof Nr)E(p.value.value.sections);else if(p.value.kind==="source"){const M=$=>{S||($ instanceof Qo&&Ni($.value)===Ee?E($.value.sections):$ instanceof _d?E($.sections):$.eachChild(M))},L=p.value;L._styleExpression&&M(L._styleExpression.expression)}return S}}let jS;var pO={get paint(){return jS=jS||new sr({"background-color":new wn(Se.paint_background["background-color"]),"background-pattern":new Ef(Se.paint_background["background-pattern"]),"background-opacity":new wn(Se.paint_background["background-opacity"])})}};class mO extends Us{constructor(a){super(a,pO)}}let VS;var gO={get paint(){return VS=VS||new sr({"raster-opacity":new wn(Se.paint_raster["raster-opacity"]),"raster-hue-rotate":new wn(Se.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new wn(Se.paint_raster["raster-brightness-min"]),"raster-brightness-max":new wn(Se.paint_raster["raster-brightness-max"]),"raster-saturation":new wn(Se.paint_raster["raster-saturation"]),"raster-contrast":new wn(Se.paint_raster["raster-contrast"]),"raster-resampling":new wn(Se.paint_raster["raster-resampling"]),"raster-fade-duration":new wn(Se.paint_raster["raster-fade-duration"])})}};class vO extends Us{constructor(a){super(a,gO)}}class _O extends Us{constructor(a){super(a,{}),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=a}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class yO{constructor(a){this._callback=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const v0=63710088e-1;class ec{constructor(a,h){if(isNaN(a)||isNaN(h))throw new Error(`Invalid LngLat object: (${a}, ${h})`);if(this.lng=+a,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ec(ve(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){const h=Math.PI/180,p=this.lat*h,_=a.lat*h,S=Math.sin(p)*Math.sin(_)+Math.cos(p)*Math.cos(_)*Math.cos((a.lng-this.lng)*h);return v0*Math.acos(Math.min(S,1))}static convert(a){if(a instanceof ec)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new ec(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new ec(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const US=2*Math.PI*v0;function HS(u){return US*Math.cos(u*Math.PI/180)}function GS(u){return(180+u)/360}function WS(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function qS(u,a){return u/HS(a)}function ZS(u){return 360*u-180}function _0(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}class Ng{constructor(a,h,p=0){this.x=+a,this.y=+h,this.z=+p}static fromLngLat(a,h=0){const p=ec.convert(a);return new Ng(GS(p.lng),WS(p.lat),qS(h,p.lat))}toLngLat(){return new ec(ZS(this.x),_0(this.y))}toAltitude(){return this.z*HS(_0(this.y))}meterInMercatorCoordinateUnits(){return 1/US*(a=_0(this.y),1/Math.cos(a*Math.PI/180));var a}}function KS(u,a,h){var p=2*Math.PI*6378137/256/Math.pow(2,h);return[u*p-2*Math.PI*6378137/2,a*p-2*Math.PI*6378137/2]}class y0{constructor(a,h,p){if(a<0||a>25||p<0||p>=Math.pow(2,a)||h<0||h>=Math.pow(2,a))throw new Error(`x=${h}, y=${p}, z=${a} outside of bounds. 0<=x<${Math.pow(2,a)}, 0<=y<${Math.pow(2,a)} 0<=z<=25 `);this.z=a,this.x=h,this.y=p,this.key=qf(0,a,a,h,p)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,h,p){const _=(E=this.y,M=this.z,L=KS(256*(S=this.x),256*(E=Math.pow(2,M)-E-1),M),$=KS(256*(S+1),256*(E+1),M),L[0]+","+L[1]+","+$[0]+","+$[1]);var S,E,M,L,$;const V=function(Y,ie,ce){let de,be="";for(let Pe=Y;Pe>0;Pe--)de=1<<Pe-1,be+=(ie&de?1:0)+(ce&de?2:0);return be}(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(p==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,V).replace(/{bbox-epsg-3857}/g,_)}isChildOf(a){const h=this.z-a.z;return h>0&&a.x===this.x>>h&&a.y===this.y>>h}getTilePoint(a){const h=Math.pow(2,this.z);return new C((a.x*h-this.x)*ur,(a.y*h-this.y)*ur)}toString(){return`${this.z}/${this.x}/${this.y}`}}class XS{constructor(a,h){this.wrap=a,this.canonical=h,this.key=qf(a,h.z,h.z,h.x,h.y)}}class ia{constructor(a,h,p,_,S){if(a<p)throw new Error(`overscaledZ should be >= z; overscaledZ = ${a}; z = ${p}`);this.overscaledZ=a,this.wrap=h,this.canonical=new y0(p,+_,+S),this.key=qf(h,a,p,_,S)}clone(){return new ia(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-a;return a>this.canonical.z?new ia(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ia(a,this.wrap,a,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(a,h){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const p=this.canonical.z-a;return a>this.canonical.z?qf(this.wrap*+h,a,this.canonical.z,this.canonical.x,this.canonical.y):qf(this.wrap*+h,a,a,this.canonical.x>>p,this.canonical.y>>p)}isChildOf(a){if(a.wrap!==this.wrap)return!1;const h=this.canonical.z-a.canonical.z;return a.overscaledZ===0||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>h&&a.canonical.y===this.canonical.y>>h}children(a){if(this.overscaledZ>=a)return[new ia(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,p=2*this.canonical.x,_=2*this.canonical.y;return[new ia(h,this.wrap,h,p,_),new ia(h,this.wrap,h,p+1,_),new ia(h,this.wrap,h,p,_+1),new ia(h,this.wrap,h,p+1,_+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new ia(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new ia(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new XS(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(a){return this.canonical.getTilePoint(new Ng(a.x-this.wrap,a.y))}}function qf(u,a,h,p,_){(u*=2)<0&&(u=-1*u-1);const S=1<<h;return(S*S*u+S*_+p).toString(36)+h.toString(36)+a.toString(36)}un("CanonicalTileID",y0),un("OverscaledTileID",ia,{omit:["posMatrix"]});class YS{constructor(a,h,p,_=1,S=1,E=1,M=0){if(this.uid=a,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(p&&!["mapbox","terrarium","custom"].includes(p))return void re(`"${p}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=h.height;const L=this.dim=h.height-2;switch(this.data=new Uint32Array(h.data.buffer),p){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=_,this.greenFactor=S,this.blueFactor=E,this.baseShift=M;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let $=0;$<L;$++)this.data[this._idx(-1,$)]=this.data[this._idx(0,$)],this.data[this._idx(L,$)]=this.data[this._idx(L-1,$)],this.data[this._idx($,-1)]=this.data[this._idx($,0)],this.data[this._idx($,L)]=this.data[this._idx($,L-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(L,-1)]=this.data[this._idx(L-1,0)],this.data[this._idx(-1,L)]=this.data[this._idx(0,L-1)],this.data[this._idx(L,L)]=this.data[this._idx(L-1,L-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let $=0;$<L;$++)for(let V=0;V<L;V++){const Y=this.get($,V);Y>this.max&&(this.max=Y),Y<this.min&&(this.min=Y)}}get(a,h){const p=new Uint8Array(this.data.buffer),_=4*this._idx(a,h);return this.unpack(p[_],p[_+1],p[_+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(a,h){if(a<-1||a>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(a+1)}unpack(a,h,p){return a*this.redFactor+h*this.greenFactor+p*this.blueFactor-this.baseShift}getPixels(){return new na({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(a,h,p){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let _=h*this.dim,S=h*this.dim+this.dim,E=p*this.dim,M=p*this.dim+this.dim;switch(h){case-1:_=S-1;break;case 1:S=_+1}switch(p){case-1:E=M-1;break;case 1:M=E+1}const L=-h*this.dim,$=-p*this.dim;for(let V=E;V<M;V++)for(let Y=_;Y<S;Y++)this.data[this._idx(Y,V)]=a.data[this._idx(Y+L,V+$)]}}un("DEMData",YS);class JS{constructor(a){this._stringToNumber={},this._numberToString=[];for(let h=0;h<a.length;h++){const p=a[h];this._stringToNumber[p]=h,this._numberToString[h]=p}}encode(a){return this._stringToNumber[a]}decode(a){if(a>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${a} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[a]}}class QS{constructor(a,h,p,_,S){this.type="Feature",this._vectorTileFeature=a,a._z=h,a._x=p,a._y=_,this.properties=a.properties,this.id=S}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){const a={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&(a[h]=this[h]);return a}}class eT{constructor(a,h){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new Wl(ur,16,0),this.grid3D=new Wl(ur,16,0),this.featureIndexArray=new Rt,this.promoteId=h}insert(a,h,p,_,S,E){const M=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,_,S);const L=E?this.grid3D:this.grid;for(let $=0;$<h.length;$++){const V=h[$],Y=[1/0,1/0,-1/0,-1/0];for(let ie=0;ie<V.length;ie++){const ce=V[ie];Y[0]=Math.min(Y[0],ce.x),Y[1]=Math.min(Y[1],ce.y),Y[2]=Math.max(Y[2],ce.x),Y[3]=Math.max(Y[3],ce.y)}Y[0]<ur&&Y[1]<ur&&Y[2]>=0&&Y[3]>=0&&L.insert(M,Y[0],Y[1],Y[2],Y[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Yl.VectorTile(new o0(this.rawTileData)).layers,this.sourceLayerCoder=new JS(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(a,h,p,_){this.loadVTLayers();const S=a.params||{},E=ur/a.tileSize/a.scale,M=hf(S.filter),L=a.queryGeometry,$=a.queryPadding*E,V=nT(L),Y=this.grid.query(V.minX-$,V.minY-$,V.maxX+$,V.maxY+$),ie=nT(a.cameraQueryGeometry),ce=this.grid3D.query(ie.minX-$,ie.minY-$,ie.maxX+$,ie.maxY+$,(Pe,Re,Je,je)=>function(rt,dt,Lt,sn,gn){for(const Jt of rt)if(dt<=Jt.x&&Lt<=Jt.y&&sn>=Jt.x&&gn>=Jt.y)return!0;const en=[new C(dt,Lt),new C(dt,gn),new C(sn,gn),new C(sn,Lt)];if(rt.length>2){for(const Jt of en)if(Dd(rt,Jt))return!0}for(let Jt=0;Jt<rt.length-1;Jt++)if(YD(rt[Jt],rt[Jt+1],en))return!0;return!1}(a.cameraQueryGeometry,Pe-$,Re-$,Je+$,je+$));for(const Pe of ce)Y.push(Pe);Y.sort(bO);const de={};let be;for(let Pe=0;Pe<Y.length;Pe++){const Re=Y[Pe];if(Re===be)continue;be=Re;const Je=this.featureIndexArray.get(Re);let je=null;this.loadMatchingFeature(de,Je.bucketIndex,Je.sourceLayerIndex,Je.featureIndex,M,S.layers,S.availableImages,h,p,_,(rt,dt,Lt)=>(je||(je=ou(rt)),dt.queryIntersectsFeature(L,rt,Lt,je,this.z,a.transform,E,a.pixelPosMatrix)))}return de}loadMatchingFeature(a,h,p,_,S,E,M,L,$,V,Y){const ie=this.bucketLayerIDs[h];if(E&&!function(Pe,Re){for(let Je=0;Je<Pe.length;Je++)if(Re.indexOf(Pe[Je])>=0)return!0;return!1}(E,ie))return;const ce=this.sourceLayerCoder.decode(p),de=this.vtLayers[ce].feature(_);if(S.needGeometry){const Pe=lu(de,!0);if(!S.filter(new Di(this.tileID.overscaledZ),Pe,this.tileID.canonical))return}else if(!S.filter(new Di(this.tileID.overscaledZ),de))return;const be=this.getId(de,ce);for(let Pe=0;Pe<ie.length;Pe++){const Re=ie[Pe];if(E&&E.indexOf(Re)<0)continue;const Je=L[Re];if(!Je)continue;let je={};be&&V&&(je=V.getState(Je.sourceLayer||"_geojsonTileLayer",be));const rt=se({},$[Re]);rt.paint=tT(rt.paint,Je.paint,de,je,M),rt.layout=tT(rt.layout,Je.layout,de,je,M);const dt=!Y||Y(de,Je,je);if(!dt)continue;const Lt=new QS(de,this.z,this.x,this.y,be);Lt.layer=rt;let sn=a[Re];sn===void 0&&(sn=a[Re]=[]),sn.push({featureIndex:_,feature:Lt,intersectionZ:dt})}}lookupSymbolFeatures(a,h,p,_,S,E,M,L){const $={};this.loadVTLayers();const V=hf(S);for(const Y of a)this.loadMatchingFeature($,p,_,Y,V,E,M,L,h);return $}hasLayer(a){for(const h of this.bucketLayerIDs)for(const p of h)if(a===p)return!0;return!1}getId(a,h){let p=a.id;return this.promoteId&&(p=a.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof p=="boolean"&&(p=Number(p))),p}}function tT(u,a,h,p,_){return J(u,(S,E)=>{const M=a instanceof kd?a.get(E):null;return M&&M.evaluate?M.evaluate(h,p,_):M})}function nT(u){let a=1/0,h=1/0,p=-1/0,_=-1/0;for(const S of u)a=Math.min(a,S.x),h=Math.min(h,S.y),p=Math.max(p,S.x),_=Math.max(_,S.y);return{minX:a,minY:h,maxX:p,maxY:_}}function bO(u,a){return a-u}function iT(u,a,h,p,_){const S=[];for(let E=0;E<u.length;E++){const M=u[E];let L;for(let $=0;$<M.length-1;$++){let V=M[$],Y=M[$+1];V.x<a&&Y.x<a||(V.x<a?V=new C(a,V.y+(a-V.x)/(Y.x-V.x)*(Y.y-V.y))._round():Y.x<a&&(Y=new C(a,V.y+(a-V.x)/(Y.x-V.x)*(Y.y-V.y))._round()),V.y<h&&Y.y<h||(V.y<h?V=new C(V.x+(h-V.y)/(Y.y-V.y)*(Y.x-V.x),h)._round():Y.y<h&&(Y=new C(V.x+(h-V.y)/(Y.y-V.y)*(Y.x-V.x),h)._round()),V.x>=p&&Y.x>=p||(V.x>=p?V=new C(p,V.y+(p-V.x)/(Y.x-V.x)*(Y.y-V.y))._round():Y.x>=p&&(Y=new C(p,V.y+(p-V.x)/(Y.x-V.x)*(Y.y-V.y))._round()),V.y>=_&&Y.y>=_||(V.y>=_?V=new C(V.x+(_-V.y)/(Y.y-V.y)*(Y.x-V.x),_)._round():Y.y>=_&&(Y=new C(V.x+(_-V.y)/(Y.y-V.y)*(Y.x-V.x),_)._round()),L&&V.equals(L[L.length-1])||(L=[V],S.push(L)),L.push(Y)))))}}return S}un("FeatureIndex",eT,{omit:["rawTileData","sourceLayerCoder"]});class tc extends C{constructor(a,h,p,_){super(a,h),this.angle=p,_!==void 0&&(this.segment=_)}clone(){return new tc(this.x,this.y,this.angle,this.segment)}}function rT(u,a,h,p,_){if(a.segment===void 0||h===0)return!0;let S=a,E=a.segment+1,M=0;for(;M>-h/2;){if(E--,E<0)return!1;M-=u[E].dist(S),S=u[E]}M+=u[E].dist(u[E+1]),E++;const L=[];let $=0;for(;M<h/2;){const V=u[E],Y=u[E+1];if(!Y)return!1;let ie=u[E-1].angleTo(V)-V.angleTo(Y);for(ie=Math.abs((ie+3*Math.PI)%(2*Math.PI)-Math.PI),L.push({distance:M,angleDelta:ie}),$+=ie;M-L[0].distance>p;)$-=L.shift().angleDelta;if($>_)return!1;E++,M+=V.dist(Y)}return!0}function sT(u){let a=0;for(let h=0;h<u.length-1;h++)a+=u[h].dist(u[h+1]);return a}function aT(u,a,h){return u?.6*a*h:0}function oT(u,a){return Math.max(u?u.right-u.left:0,a?a.right-a.left:0)}function xO(u,a,h,p,_,S){const E=aT(h,_,S),M=oT(h,p)*S;let L=0;const $=sT(u)/2;for(let V=0;V<u.length-1;V++){const Y=u[V],ie=u[V+1],ce=Y.dist(ie);if(L+ce>$){const de=($-L)/ce,be=ys.number(Y.x,ie.x,de),Pe=ys.number(Y.y,ie.y,de),Re=new tc(be,Pe,ie.angleTo(Y),V);return Re._round(),!E||rT(u,Re,M,E,a)?Re:void 0}L+=ce}}function wO(u,a,h,p,_,S,E,M,L){const $=aT(p,S,E),V=oT(p,_),Y=V*E,ie=u[0].x===0||u[0].x===L||u[0].y===0||u[0].y===L;return a-Y<a/4&&(a=Y+a/4),lT(u,ie?a/2*M%a:(V/2+2*S)*E*M%a,a,$,h,Y,ie,!1,L)}function lT(u,a,h,p,_,S,E,M,L){const $=S/2,V=sT(u);let Y=0,ie=a-h,ce=[];for(let de=0;de<u.length-1;de++){const be=u[de],Pe=u[de+1],Re=be.dist(Pe),Je=Pe.angleTo(be);for(;ie+h<Y+Re;){ie+=h;const je=(ie-Y)/Re,rt=ys.number(be.x,Pe.x,je),dt=ys.number(be.y,Pe.y,je);if(rt>=0&&rt<L&&dt>=0&&dt<L&&ie-$>=0&&ie+$<=V){const Lt=new tc(rt,dt,Je,de);Lt._round(),p&&!rT(u,Lt,S,p,_)||ce.push(Lt)}}Y+=Re}return M||ce.length||E||(ce=lT(u,Y/2,h,p,_,S,E,!0,L)),ce}un("Anchor",tc);const Bd=Ts;function cT(u,a,h,p){const _=[],S=u.image,E=S.pixelRatio,M=S.paddedRect.w-2*Bd,L=S.paddedRect.h-2*Bd,$=u.right-u.left,V=u.bottom-u.top,Y=S.stretchX||[[0,M]],ie=S.stretchY||[[0,L]],ce=(qt,hn)=>qt+hn[1]-hn[0],de=Y.reduce(ce,0),be=ie.reduce(ce,0),Pe=M-de,Re=L-be;let Je=0,je=de,rt=0,dt=be,Lt=0,sn=Pe,gn=0,en=Re;if(S.content&&p){const qt=S.content;Je=Bg(Y,0,qt[0]),rt=Bg(ie,0,qt[1]),je=Bg(Y,qt[0],qt[2]),dt=Bg(ie,qt[1],qt[3]),Lt=qt[0]-Je,gn=qt[1]-rt,sn=qt[2]-qt[0]-je,en=qt[3]-qt[1]-dt}const Jt=(qt,hn,Xt,jt)=>{const An=jg(qt.stretch-Je,je,$,u.left),_n=Vg(qt.fixed-Lt,sn,qt.stretch,de),Gn=jg(hn.stretch-rt,dt,V,u.top),Oi=Vg(hn.fixed-gn,en,hn.stretch,be),zi=jg(Xt.stretch-Je,je,$,u.left),yr=Vg(Xt.fixed-Lt,sn,Xt.stretch,de),Gs=jg(jt.stretch-rt,dt,V,u.top),os=Vg(jt.fixed-gn,en,jt.stretch,be),dr=new C(An,Gn),Rr=new C(zi,Gn),Vr=new C(zi,Gs),ls=new C(An,Gs),cs=new C(_n/E,Oi/E),br=new C(yr/E,os/E),xr=a*Math.PI/180;if(xr){const Zr=Math.sin(xr),Es=Math.cos(xr),Cs=[Es,-Zr,Zr,Es];dr._matMult(Cs),Rr._matMult(Cs),ls._matMult(Cs),Vr._matMult(Cs)}const qr=qt.stretch+qt.fixed,us=hn.stretch+hn.fixed;return{tl:dr,tr:Rr,bl:ls,br:Vr,tex:{x:S.paddedRect.x+Bd+qr,y:S.paddedRect.y+Bd+us,w:Xt.stretch+Xt.fixed-qr,h:jt.stretch+jt.fixed-us},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:cs,pixelOffsetBR:br,minFontScaleX:sn/E/$,minFontScaleY:en/E/V,isSDF:h}};if(p&&(S.stretchX||S.stretchY)){const qt=uT(Y,Pe,de),hn=uT(ie,Re,be);for(let Xt=0;Xt<qt.length-1;Xt++){const jt=qt[Xt],An=qt[Xt+1];for(let _n=0;_n<hn.length-1;_n++)_.push(Jt(jt,hn[_n],An,hn[_n+1]))}}else _.push(Jt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:M+1},{fixed:0,stretch:L+1}));return _}function Bg(u,a,h){let p=0;for(const _ of u)p+=Math.max(a,Math.min(h,_[1]))-Math.max(a,Math.min(h,_[0]));return p}function uT(u,a,h){const p=[{fixed:-Bd,stretch:0}];for(const[_,S]of u){const E=p[p.length-1];p.push({fixed:_-E.stretch,stretch:E.stretch}),p.push({fixed:_-E.stretch,stretch:E.stretch+(S-_)})}return p.push({fixed:a+Bd,stretch:h}),p}function jg(u,a,h,p){return u/a*h+p}function Vg(u,a,h,p){return u-a*h/p}class Ug{constructor(a,h,p,_,S,E,M,L,$,V){if(this.boxStartIndex=a.length,$){let Y=E.top,ie=E.bottom;const ce=E.collisionPadding;ce&&(Y-=ce[1],ie+=ce[3]);let de=ie-Y;de>0&&(de=Math.max(10,de),this.circleDiameter=de)}else{let Y=E.top*M-L[0],ie=E.bottom*M+L[2],ce=E.left*M-L[3],de=E.right*M+L[1];const be=E.collisionPadding;if(be&&(ce-=be[0]*M,Y-=be[1]*M,de+=be[2]*M,ie+=be[3]*M),V){const Pe=new C(ce,Y),Re=new C(de,Y),Je=new C(ce,ie),je=new C(de,ie),rt=V*Math.PI/180;Pe._rotate(rt),Re._rotate(rt),Je._rotate(rt),je._rotate(rt),ce=Math.min(Pe.x,Re.x,Je.x,je.x),de=Math.max(Pe.x,Re.x,Je.x,je.x),Y=Math.min(Pe.y,Re.y,Je.y,je.y),ie=Math.max(Pe.y,Re.y,Je.y,je.y)}a.emplaceBack(h.x,h.y,ce,Y,de,ie,p,_,S)}this.boxEndIndex=a.length}}class SO{constructor(a=[],h=TO){if(this.data=a,this.length=this.data.length,this.compare=h,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(a){this.data.push(a),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const a=this.data[0],h=this.data.pop();return this.length--,this.length>0&&(this.data[0]=h,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:h,compare:p}=this,_=h[a];for(;a>0;){const S=a-1>>1,E=h[S];if(p(_,E)>=0)break;h[a]=E,a=S}h[a]=_}_down(a){const{data:h,compare:p}=this,_=this.length>>1,S=h[a];for(;a<_;){let E=1+(a<<1),M=h[E];const L=E+1;if(L<this.length&&p(h[L],M)<0&&(E=L,M=h[L]),p(M,S)>=0)break;h[a]=M,a=E}h[a]=S}}function TO(u,a){return u<a?-1:u>a?1:0}function EO(u,a=1,h=!1){let p=1/0,_=1/0,S=-1/0,E=-1/0;const M=u[0];for(let ce=0;ce<M.length;ce++){const de=M[ce];(!ce||de.x<p)&&(p=de.x),(!ce||de.y<_)&&(_=de.y),(!ce||de.x>S)&&(S=de.x),(!ce||de.y>E)&&(E=de.y)}const L=Math.min(S-p,E-_);let $=L/2;const V=new SO([],CO);if(L===0)return new C(p,_);for(let ce=p;ce<S;ce+=L)for(let de=_;de<E;de+=L)V.push(new jd(ce+$,de+$,$,u));let Y=function(ce){let de=0,be=0,Pe=0;const Re=ce[0];for(let Je=0,je=Re.length,rt=je-1;Je<je;rt=Je++){const dt=Re[Je],Lt=Re[rt],sn=dt.x*Lt.y-Lt.x*dt.y;be+=(dt.x+Lt.x)*sn,Pe+=(dt.y+Lt.y)*sn,de+=3*sn}return new jd(be/de,Pe/de,0,ce)}(u),ie=V.length;for(;V.length;){const ce=V.pop();(ce.d>Y.d||!Y.d)&&(Y=ce,h&&console.log("found best %d after %d probes",Math.round(1e4*ce.d)/1e4,ie)),ce.max-Y.d<=a||($=ce.h/2,V.push(new jd(ce.p.x-$,ce.p.y-$,$,u)),V.push(new jd(ce.p.x+$,ce.p.y-$,$,u)),V.push(new jd(ce.p.x-$,ce.p.y+$,$,u)),V.push(new jd(ce.p.x+$,ce.p.y+$,$,u)),ie+=4)}return h&&(console.log(`num probes: ${ie}`),console.log(`best distance: ${Y.d}`)),Y.p}function CO(u,a){return a.max-u.max}function jd(u,a,h,p){this.p=new C(u,a),this.h=h,this.d=function(_,S){let E=!1,M=1/0;for(let L=0;L<S.length;L++){const $=S[L];for(let V=0,Y=$.length,ie=Y-1;V<Y;ie=V++){const ce=$[V],de=$[ie];ce.y>_.y!=de.y>_.y&&_.x<(de.x-ce.x)*(_.y-ce.y)/(de.y-ce.y)+ce.x&&(E=!E),M=Math.min(M,Ww(_,ce,de))}}return(E?1:-1)*Math.sqrt(M)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}var jr;l.aq=void 0,(jr=l.aq||(l.aq={}))[jr.center=1]="center",jr[jr.left=2]="left",jr[jr.right=3]="right",jr[jr.top=4]="top",jr[jr.bottom=5]="bottom",jr[jr["top-left"]=6]="top-left",jr[jr["top-right"]=7]="top-right",jr[jr["bottom-left"]=8]="bottom-left",jr[jr["bottom-right"]=9]="bottom-right";const nc=7,b0=Number.POSITIVE_INFINITY;function dT(u,a){return a[1]!==b0?function(h,p,_){let S=0,E=0;switch(p=Math.abs(p),_=Math.abs(_),h){case"top-right":case"top-left":case"top":E=_-nc;break;case"bottom-right":case"bottom-left":case"bottom":E=-_+nc}switch(h){case"top-right":case"bottom-right":case"right":S=-p;break;case"top-left":case"bottom-left":case"left":S=p}return[S,E]}(u,a[0],a[1]):function(h,p){let _=0,S=0;p<0&&(p=0);const E=p/Math.SQRT2;switch(h){case"top-right":case"top-left":S=E-nc;break;case"bottom-right":case"bottom-left":S=-E+nc;break;case"bottom":S=-p+nc;break;case"top":S=p-nc}switch(h){case"top-right":case"bottom-right":_=-E;break;case"top-left":case"bottom-left":_=E;break;case"left":_=p;break;case"right":_=-p}return[_,S]}(u,a[0])}function hT(u,a,h){var p;const _=u.layout,S=(p=_.get("text-variable-anchor-offset"))===null||p===void 0?void 0:p.evaluate(a,{},h);if(S){const M=S.values,L=[];for(let $=0;$<M.length;$+=2){const V=L[$]=M[$],Y=M[$+1].map(ie=>ie*_r);V.startsWith("top")?Y[1]-=nc:V.startsWith("bottom")&&(Y[1]+=nc),L[$+1]=Y}return new Ns(L)}const E=_.get("text-variable-anchor");if(E){let M;M=u._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[_.get("text-radial-offset").evaluate(a,{},h)*_r,b0]:_.get("text-offset").evaluate(a,{},h).map($=>$*_r);const L=[];for(const $ of E)L.push($,dT($,M));return new Ns(L)}return null}function x0(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function IO(u,a,h,p,_,S,E,M,L,$,V){let Y=S.textMaxSize.evaluate(a,{});Y===void 0&&(Y=E);const ie=u.layers[0].layout,ce=ie.get("icon-offset").evaluate(a,{},V),de=pT(h.horizontal),be=E/24,Pe=u.tilePixelRatio*be,Re=u.tilePixelRatio*Y/24,Je=u.tilePixelRatio*M,je=u.tilePixelRatio*ie.get("symbol-spacing"),rt=ie.get("text-padding")*u.tilePixelRatio,dt=function(jt,An,_n,Gn=1){const Oi=jt.get("icon-padding").evaluate(An,{},_n),zi=Oi&&Oi.values;return[zi[0]*Gn,zi[1]*Gn,zi[2]*Gn,zi[3]*Gn]}(ie,a,V,u.tilePixelRatio),Lt=ie.get("text-max-angle")/180*Math.PI,sn=ie.get("text-rotation-alignment")!=="viewport"&&ie.get("symbol-placement")!=="point",gn=ie.get("icon-rotation-alignment")==="map"&&ie.get("symbol-placement")!=="point",en=ie.get("symbol-placement"),Jt=je/2,qt=ie.get("icon-text-fit");let hn;p&&qt!=="none"&&(u.allowVerticalPlacement&&h.vertical&&(hn=FS(p,h.vertical,qt,ie.get("icon-text-fit-padding"),ce,be)),de&&(p=FS(p,de,qt,ie.get("icon-text-fit-padding"),ce,be)));const Xt=(jt,An)=>{An.x<0||An.x>=ur||An.y<0||An.y>=ur||function(_n,Gn,Oi,zi,yr,Gs,os,dr,Rr,Vr,ls,cs,br,xr,qr,us,Zr,Es,Cs,wr,ei,Kr,Ur,Sr,Ia){const Ya=_n.addToLineVertexArray(Gn,Oi);let Ja,hl,Aa,ra,Is=0,fl=0,Xf=0,_T=0,M0=-1,k0=-1;const pl={};let yT=ll("");if(_n.allowVerticalPlacement&&zi.vertical){const Xr=dr.layout.get("text-rotate").evaluate(ei,{},Sr)+90;Aa=new Ug(Rr,Gn,Vr,ls,cs,zi.vertical,br,xr,qr,Xr),os&&(ra=new Ug(Rr,Gn,Vr,ls,cs,os,Zr,Es,qr,Xr))}if(yr){const Xr=dr.layout.get("icon-rotate").evaluate(ei,{}),sa=dr.layout.get("icon-text-fit")!=="none",uu=cT(yr,Xr,Ur,sa),eo=os?cT(os,Xr,Ur,sa):void 0;hl=new Ug(Rr,Gn,Vr,ls,cs,yr,Zr,Es,!1,Xr),Is=4*uu.length;const du=_n.iconSizeData;let ko=null;du.kind==="source"?(ko=[Mo*dr.layout.get("icon-size").evaluate(ei,{})],ko[0]>Ql&&re(`${_n.layerIds[0]}: Value for "icon-size" is >= ${Wf}. Reduce your "icon-size".`)):du.kind==="composite"&&(ko=[Mo*Kr.compositeIconSizes[0].evaluate(ei,{},Sr),Mo*Kr.compositeIconSizes[1].evaluate(ei,{},Sr)],(ko[0]>Ql||ko[1]>Ql)&&re(`${_n.layerIds[0]}: Value for "icon-size" is >= ${Wf}. Reduce your "icon-size".`)),_n.addSymbols(_n.icon,uu,ko,wr,Cs,ei,l.ai.none,Gn,Ya.lineStartIndex,Ya.lineLength,-1,Sr),M0=_n.icon.placedSymbolArray.length-1,eo&&(fl=4*eo.length,_n.addSymbols(_n.icon,eo,ko,wr,Cs,ei,l.ai.vertical,Gn,Ya.lineStartIndex,Ya.lineLength,-1,Sr),k0=_n.icon.placedSymbolArray.length-1)}const bT=Object.keys(zi.horizontal);for(const Xr of bT){const sa=zi.horizontal[Xr];if(!Ja){yT=ll(sa.text);const eo=dr.layout.get("text-rotate").evaluate(ei,{},Sr);Ja=new Ug(Rr,Gn,Vr,ls,cs,sa,br,xr,qr,eo)}const uu=sa.positionedLines.length===1;if(Xf+=fT(_n,Gn,sa,Gs,dr,qr,ei,us,Ya,zi.vertical?l.ai.horizontal:l.ai.horizontalOnly,uu?bT:[Xr],pl,M0,Kr,Sr),uu)break}zi.vertical&&(_T+=fT(_n,Gn,zi.vertical,Gs,dr,qr,ei,us,Ya,l.ai.vertical,["vertical"],pl,k0,Kr,Sr));const kO=Ja?Ja.boxStartIndex:_n.collisionBoxArray.length,PO=Ja?Ja.boxEndIndex:_n.collisionBoxArray.length,DO=Aa?Aa.boxStartIndex:_n.collisionBoxArray.length,LO=Aa?Aa.boxEndIndex:_n.collisionBoxArray.length,OO=hl?hl.boxStartIndex:_n.collisionBoxArray.length,RO=hl?hl.boxEndIndex:_n.collisionBoxArray.length,FO=ra?ra.boxStartIndex:_n.collisionBoxArray.length,$O=ra?ra.boxEndIndex:_n.collisionBoxArray.length;let Qa=-1;const Gg=(Xr,sa)=>Xr&&Xr.circleDiameter?Math.max(Xr.circleDiameter,sa):sa;Qa=Gg(Ja,Qa),Qa=Gg(Aa,Qa),Qa=Gg(hl,Qa),Qa=Gg(ra,Qa);const xT=Qa>-1?1:0;xT&&(Qa*=Ia/_r),_n.glyphOffsetArray.length>=Nd.MAX_GLYPHS&&re("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ei.sortKey!==void 0&&_n.addToSortKeyRanges(_n.symbolInstances.length,ei.sortKey);const zO=hT(dr,ei,Sr),[NO,BO]=function(Xr,sa){const uu=Xr.length,eo=sa==null?void 0:sa.values;if((eo==null?void 0:eo.length)>0)for(let du=0;du<eo.length;du+=2){const ko=eo[du+1];Xr.emplaceBack(l.aq[eo[du]],ko[0],ko[1])}return[uu,Xr.length]}(_n.textAnchorOffsets,zO);_n.symbolInstances.emplaceBack(Gn.x,Gn.y,pl.right>=0?pl.right:-1,pl.center>=0?pl.center:-1,pl.left>=0?pl.left:-1,pl.vertical||-1,M0,k0,yT,kO,PO,DO,LO,OO,RO,FO,$O,Vr,Xf,_T,Is,fl,xT,0,br,Qa,NO,BO)}(u,An,jt,h,p,_,hn,u.layers[0],u.collisionBoxArray,a.index,a.sourceLayerIndex,u.index,Pe,[rt,rt,rt,rt],sn,L,Je,dt,gn,ce,a,S,$,V,E)};if(en==="line")for(const jt of iT(a.geometry,0,0,ur,ur)){const An=wO(jt,je,Lt,h.vertical||de,p,24,Re,u.overscaling,ur);for(const _n of An)de&&AO(u,de.text,Jt,_n)||Xt(jt,_n)}else if(en==="line-center"){for(const jt of a.geometry)if(jt.length>1){const An=xO(jt,Lt,h.vertical||de,p,24,Re);An&&Xt(jt,An)}}else if(a.type==="Polygon")for(const jt of Qy(a.geometry,0)){const An=EO(jt,16);Xt(jt[0],new tc(An.x,An.y,0))}else if(a.type==="LineString")for(const jt of a.geometry)Xt(jt,new tc(jt[0].x,jt[0].y,0));else if(a.type==="Point")for(const jt of a.geometry)for(const An of jt)Xt([An],new tc(An.x,An.y,0))}function fT(u,a,h,p,_,S,E,M,L,$,V,Y,ie,ce,de){const be=function(Je,je,rt,dt,Lt,sn,gn,en){const Jt=dt.layout.get("text-rotate").evaluate(sn,{})*Math.PI/180,qt=[];for(const hn of je.positionedLines)for(const Xt of hn.positionedGlyphs){if(!Xt.rect)continue;const jt=Xt.rect||{};let An=MS+1,_n=!0,Gn=1,Oi=0;const zi=(Lt||en)&&Xt.vertical,yr=Xt.metrics.advance*Xt.scale/2;if(en&&je.verticalizable&&(Oi=hn.lineOffset/2-(Xt.imageName?-(_r-Xt.metrics.width*Xt.scale)/2:(Xt.scale-1)*_r)),Xt.imageName){const wr=gn[Xt.imageName];_n=wr.sdf,Gn=wr.pixelRatio,An=Ts/Gn}const Gs=Lt?[Xt.x+yr,Xt.y]:[0,0];let os=Lt?[0,0]:[Xt.x+yr+rt[0],Xt.y+rt[1]-Oi],dr=[0,0];zi&&(dr=os,os=[0,0]);const Rr=Xt.metrics.isDoubleResolution?2:1,Vr=(Xt.metrics.left-An)*Xt.scale-yr+os[0],ls=(-Xt.metrics.top-An)*Xt.scale+os[1],cs=Vr+jt.w/Rr*Xt.scale/Gn,br=ls+jt.h/Rr*Xt.scale/Gn,xr=new C(Vr,ls),qr=new C(cs,ls),us=new C(Vr,br),Zr=new C(cs,br);if(zi){const wr=new C(-yr,yr-Hf),ei=-Math.PI/2,Kr=_r/2-yr,Ur=new C(5-Hf-Kr,-(Xt.imageName?Kr:0)),Sr=new C(...dr);xr._rotateAround(ei,wr)._add(Ur)._add(Sr),qr._rotateAround(ei,wr)._add(Ur)._add(Sr),us._rotateAround(ei,wr)._add(Ur)._add(Sr),Zr._rotateAround(ei,wr)._add(Ur)._add(Sr)}if(Jt){const wr=Math.sin(Jt),ei=Math.cos(Jt),Kr=[ei,-wr,wr,ei];xr._matMult(Kr),qr._matMult(Kr),us._matMult(Kr),Zr._matMult(Kr)}const Es=new C(0,0),Cs=new C(0,0);qt.push({tl:xr,tr:qr,bl:us,br:Zr,tex:jt,writingMode:je.writingMode,glyphOffset:Gs,sectionIndex:Xt.sectionIndex,isSDF:_n,pixelOffsetTL:Es,pixelOffsetBR:Cs,minFontScaleX:0,minFontScaleY:0})}return qt}(0,h,M,_,S,E,p,u.allowVerticalPlacement),Pe=u.textSizeData;let Re=null;Pe.kind==="source"?(Re=[Mo*_.layout.get("text-size").evaluate(E,{})],Re[0]>Ql&&re(`${u.layerIds[0]}: Value for "text-size" is >= ${Wf}. Reduce your "text-size".`)):Pe.kind==="composite"&&(Re=[Mo*ce.compositeTextSizes[0].evaluate(E,{},de),Mo*ce.compositeTextSizes[1].evaluate(E,{},de)],(Re[0]>Ql||Re[1]>Ql)&&re(`${u.layerIds[0]}: Value for "text-size" is >= ${Wf}. Reduce your "text-size".`)),u.addSymbols(u.text,be,Re,M,S,E,$,a,L.lineStartIndex,L.lineLength,ie,de);for(const Je of V)Y[Je]=u.text.placedSymbolArray.length-1;return 4*be.length}function pT(u){for(const a in u)return u[a];return null}function AO(u,a,h,p){const _=u.compareText;if(a in _){const S=_[a];for(let E=S.length-1;E>=0;E--)if(p.dist(S[E])<h)return!0}else _[a]=[];return _[a].push(p),!1}const mT=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class w0{static from(a){if(!(a instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,p]=new Uint8Array(a,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");const _=p>>4;if(_!==1)throw new Error(`Got v${_} data when expected v1.`);const S=mT[15&p];if(!S)throw new Error("Unrecognized array type.");const[E]=new Uint16Array(a,2,1),[M]=new Uint32Array(a,4,1);return new w0(M,E,S,a)}constructor(a,h=64,p=Float64Array,_){if(isNaN(a)||a<0)throw new Error(`Unpexpected numItems value: ${a}.`);this.numItems=+a,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=p,this.IndexArrayType=a<65536?Uint16Array:Uint32Array;const S=mT.indexOf(this.ArrayType),E=2*a*this.ArrayType.BYTES_PER_ELEMENT,M=a*this.IndexArrayType.BYTES_PER_ELEMENT,L=(8-M%8)%8;if(S<0)throw new Error(`Unexpected typed array class: ${p}.`);_&&_ instanceof ArrayBuffer?(this.data=_,this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+M+L,2*a),this._pos=2*a,this._finished=!0):(this.data=new ArrayBuffer(8+E+M+L),this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+M+L,2*a),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+S]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=a)}add(a,h){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=a,this.coords[this._pos++]=h,p}finish(){const a=this._pos>>1;if(a!==this.numItems)throw new Error(`Added ${a} items when expected ${this.numItems}.`);return S0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(a,h,p,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:S,coords:E,nodeSize:M}=this,L=[0,S.length-1,0],$=[];for(;L.length;){const V=L.pop()||0,Y=L.pop()||0,ie=L.pop()||0;if(Y-ie<=M){for(let Pe=ie;Pe<=Y;Pe++){const Re=E[2*Pe],Je=E[2*Pe+1];Re>=a&&Re<=p&&Je>=h&&Je<=_&&$.push(S[Pe])}continue}const ce=ie+Y>>1,de=E[2*ce],be=E[2*ce+1];de>=a&&de<=p&&be>=h&&be<=_&&$.push(S[ce]),(V===0?a<=de:h<=be)&&(L.push(ie),L.push(ce-1),L.push(1-V)),(V===0?p>=de:_>=be)&&(L.push(ce+1),L.push(Y),L.push(1-V))}return $}within(a,h,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:S,nodeSize:E}=this,M=[0,_.length-1,0],L=[],$=p*p;for(;M.length;){const V=M.pop()||0,Y=M.pop()||0,ie=M.pop()||0;if(Y-ie<=E){for(let Pe=ie;Pe<=Y;Pe++)vT(S[2*Pe],S[2*Pe+1],a,h)<=$&&L.push(_[Pe]);continue}const ce=ie+Y>>1,de=S[2*ce],be=S[2*ce+1];vT(de,be,a,h)<=$&&L.push(_[ce]),(V===0?a-p<=de:h-p<=be)&&(M.push(ie),M.push(ce-1),M.push(1-V)),(V===0?a+p>=de:h+p>=be)&&(M.push(ce+1),M.push(Y),M.push(1-V))}return L}}function S0(u,a,h,p,_,S){if(_-p<=h)return;const E=p+_>>1;gT(u,a,E,p,_,S),S0(u,a,h,p,E-1,1-S),S0(u,a,h,E+1,_,1-S)}function gT(u,a,h,p,_,S){for(;_>p;){if(_-p>600){const $=_-p+1,V=h-p+1,Y=Math.log($),ie=.5*Math.exp(2*Y/3),ce=.5*Math.sqrt(Y*ie*($-ie)/$)*(V-$/2<0?-1:1);gT(u,a,h,Math.max(p,Math.floor(h-V*ie/$+ce)),Math.min(_,Math.floor(h+($-V)*ie/$+ce)),S)}const E=a[2*h+S];let M=p,L=_;for(Zf(u,a,p,h),a[2*_+S]>E&&Zf(u,a,p,_);M<L;){for(Zf(u,a,M,L),M++,L--;a[2*M+S]<E;)M++;for(;a[2*L+S]>E;)L--}a[2*p+S]===E?Zf(u,a,p,L):(L++,Zf(u,a,L,_)),L<=h&&(p=L+1),h<=L&&(_=L-1)}}function Zf(u,a,h,p){T0(u,h,p),T0(a,2*h,2*p),T0(a,2*h+1,2*p+1)}function T0(u,a,h){const p=u[a];u[a]=u[h],u[h]=p}function vT(u,a,h,p){const _=u-h,S=a-p;return _*_+S*S}var E0;l.bh=void 0,(E0=l.bh||(l.bh={})).create="create",E0.load="load",E0.fullLoad="fullLoad";let Hg=null,Kf=[];const C0=1e3/60,I0="loadTime",A0="fullLoadTime",MO={mark(u){performance.mark(u)},frame(u){const a=u;Hg!=null&&Kf.push(a-Hg),Hg=a},clearMetrics(){Hg=null,Kf=[],performance.clearMeasures(I0),performance.clearMeasures(A0);for(const u in l.bh)performance.clearMarks(l.bh[u])},getPerformanceMetrics(){performance.measure(I0,l.bh.create,l.bh.load),performance.measure(A0,l.bh.create,l.bh.fullLoad);const u=performance.getEntriesByName(I0)[0].duration,a=performance.getEntriesByName(A0)[0].duration,h=Kf.length,p=1/(Kf.reduce((S,E)=>S+E,0)/h/1e3),_=Kf.filter(S=>S>C0).reduce((S,E)=>S+(E-C0)/C0,0);return{loadTime:u,fullLoadTime:a,fps:p,percentDroppedFrames:_/(h+_)*100,totalFrames:h}}};l.$=function(u,a,h){var p,_,S,E,M,L,$,V,Y,ie,ce,de,be=h[0],Pe=h[1],Re=h[2];return a===u?(u[12]=a[0]*be+a[4]*Pe+a[8]*Re+a[12],u[13]=a[1]*be+a[5]*Pe+a[9]*Re+a[13],u[14]=a[2]*be+a[6]*Pe+a[10]*Re+a[14],u[15]=a[3]*be+a[7]*Pe+a[11]*Re+a[15]):(_=a[1],S=a[2],E=a[3],M=a[4],L=a[5],$=a[6],V=a[7],Y=a[8],ie=a[9],ce=a[10],de=a[11],u[0]=p=a[0],u[1]=_,u[2]=S,u[3]=E,u[4]=M,u[5]=L,u[6]=$,u[7]=V,u[8]=Y,u[9]=ie,u[10]=ce,u[11]=de,u[12]=p*be+M*Pe+Y*Re+a[12],u[13]=_*be+L*Pe+ie*Re+a[13],u[14]=S*be+$*Pe+ce*Re+a[14],u[15]=E*be+V*Pe+de*Re+a[15]),u},l.A=Ld,l.B=ys,l.C=class{constructor(u,a,h){this.receive=p=>{const _=p.data,S=_.id;if(S&&(!_.targetMapId||this.mapId===_.targetMapId))if(_.type==="<cancel>"){delete this.tasks[S];const E=this.cancelCallbacks[S];delete this.cancelCallbacks[S],E&&E()}else Ve()||_.mustQueue?(this.tasks[S]=_,this.taskQueue.push(S),this.invoker.trigger()):this.processTask(S,_)},this.process=()=>{if(!this.taskQueue.length)return;const p=this.taskQueue.shift(),_=this.tasks[p];delete this.tasks[p],this.taskQueue.length&&this.invoker.trigger(),_&&this.processTask(p,_)},this.target=u,this.parent=a,this.mapId=h,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new yO(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ve()?u:window}send(u,a,h,p,_=!1){const S=Math.round(1e18*Math.random()).toString(36).substring(0,10);h&&(this.callbacks[S]=h);const E=[],M={id:S,type:u,hasCallback:!!h,targetMapId:p,mustQueue:_,sourceMapId:this.mapId,data:Co(a,E)};return this.target.postMessage(M,{transfer:E}),{cancel:()=>{h&&delete this.callbacks[S],this.target.postMessage({id:S,type:"<cancel>",targetMapId:p,sourceMapId:this.mapId})}}}processTask(u,a){if(a.type==="<response>"){const h=this.callbacks[u];delete this.callbacks[u],h&&(a.error?h(ql(a.error)):h(null,ql(a.data)))}else{let h=!1;const p=[],_=a.hasCallback?(M,L)=>{h=!0,delete this.cancelCallbacks[u];const $={id:u,type:"<response>",sourceMapId:this.mapId,error:M?Co(M):null,data:Co(L,p)};this.target.postMessage($,{transfer:p})}:M=>{h=!0};let S=null;const E=ql(a.data);if(this.parent[a.type])S=this.parent[a.type](a.sourceMapId,E,_);else if("getWorkerSource"in this.parent){const M=a.type.split(".");S=this.parent.getWorkerSource(a.sourceMapId,M[0],E.source)[M[1]](E,_)}else _(new Error(`Could not find function ${a.type}`));!h&&S&&S.cancel&&(this.cancelCallbacks[u]=S.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.D=wn,l.E=et,l.F=function(u,a){const h={};for(let p=0;p<a.length;p++){const _=a[p];_ in u&&(h[_]=u[_])}return h},l.G=GS,l.H=WS,l.I=c0,l.J=U,l.K=H,l.L=ec,l.M=vt,l.N=ur,l.O=ia,l.P=C,l.Q=Vi,l.R=na,l.S=Li,l.T=yg,l.U=Ng,l.V=class extends al{},l.W=y0,l.X=function(u,a){const h=window.document.createElement("video");h.muted=!0,h.onloadstart=function(){a(null,h)};for(let p=0;p<u.length;p++){const _=window.document.createElement("source");Ie(u[p])||(h.crossOrigin="Anonymous"),_.src=u[p],h.appendChild(_)}return{cancel:()=>{}}},l.Y=qe,l.Z=function(){var u=new Ld(16);return Ld!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},l._=m,l.a=Qe,l.a$=class extends oe{},l.a0=function(u,a,h){var p=h[0],_=h[1],S=h[2];return u[0]=a[0]*p,u[1]=a[1]*p,u[2]=a[2]*p,u[3]=a[3]*p,u[4]=a[4]*_,u[5]=a[5]*_,u[6]=a[6]*_,u[7]=a[7]*_,u[8]=a[8]*S,u[9]=a[9]*S,u[10]=a[10]*S,u[11]=a[11]*S,u[12]=a[12],u[13]=a[13],u[14]=a[14],u[15]=a[15],u},l.a1=Xw,l.a2=function(){return K++},l.a3=Me,l.a4=Nd,l.a5=function(){ws.isLoading()||ws.isLoaded()||Sf()!=="deferred"||_g()},l.a6=hf,l.a7=lu,l.a8=Di,l.a9=QS,l.aA=nu,l.aB=function(u){u=u.slice();const a=Object.create(null);for(let h=0;h<u.length;h++)a[u[h].id]=u[h];for(let h=0;h<u.length;h++)"ref"in u[h]&&(u[h]=gt(u[h],a[u[h].ref]));return u},l.aC=function(u){if(u.type==="custom")return new _O(u);switch(u.type){case"background":return new mO(u);case"circle":return new eL(u);case"fill":return new bL(u);case"fill-extrusion":return new RL(u);case"heatmap":return new nL(u);case"hillshade":return new rL(u);case"line":return new UL(u);case"raster":return new vO(u);case"symbol":return new zg(u)}},l.aD=te,l.aE=function(u,a){if(!u)return[{command:Ft.setStyle,args:[a]}];let h=[];try{if(!At(u.version,a.version))return[{command:Ft.setStyle,args:[a]}];At(u.center,a.center)||h.push({command:Ft.setCenter,args:[a.center]}),At(u.zoom,a.zoom)||h.push({command:Ft.setZoom,args:[a.zoom]}),At(u.bearing,a.bearing)||h.push({command:Ft.setBearing,args:[a.bearing]}),At(u.pitch,a.pitch)||h.push({command:Ft.setPitch,args:[a.pitch]}),At(u.sprite,a.sprite)||h.push({command:Ft.setSprite,args:[a.sprite]}),At(u.glyphs,a.glyphs)||h.push({command:Ft.setGlyphs,args:[a.glyphs]}),At(u.transition,a.transition)||h.push({command:Ft.setTransition,args:[a.transition]}),At(u.light,a.light)||h.push({command:Ft.setLight,args:[a.light]});const p={},_=[];(function(E,M,L,$){let V;for(V in M=M||{},E=E||{})Object.prototype.hasOwnProperty.call(E,V)&&(Object.prototype.hasOwnProperty.call(M,V)||an(V,L,$));for(V in M)Object.prototype.hasOwnProperty.call(M,V)&&(Object.prototype.hasOwnProperty.call(E,V)?At(E[V],M[V])||(E[V].type==="geojson"&&M[V].type==="geojson"&&jn(E,M,V)?L.push({command:Ft.setGeoJSONSourceData,args:[V,M[V].data]}):Pn(V,M,L,$)):Kt(V,M,L))})(u.sources,a.sources,_,p);const S=[];u.layers&&u.layers.forEach(E=>{p[E.source]?h.push({command:Ft.removeLayer,args:[E.id]}):S.push(E)}),h=h.concat(_),function(E,M,L){M=M||[];const $=(E=E||[]).map(nt),V=M.map(nt),Y=E.reduce(ut,{}),ie=M.reduce(ut,{}),ce=$.slice(),de=Object.create(null);let be,Pe,Re,Je,je,rt,dt;for(be=0,Pe=0;be<$.length;be++)Re=$[be],Object.prototype.hasOwnProperty.call(ie,Re)?Pe++:(L.push({command:Ft.removeLayer,args:[Re]}),ce.splice(ce.indexOf(Re,Pe),1));for(be=0,Pe=0;be<V.length;be++)Re=V[V.length-1-be],ce[ce.length-1-be]!==Re&&(Object.prototype.hasOwnProperty.call(Y,Re)?(L.push({command:Ft.removeLayer,args:[Re]}),ce.splice(ce.lastIndexOf(Re,ce.length-Pe),1)):Pe++,rt=ce[ce.length-be],L.push({command:Ft.addLayer,args:[ie[Re],rt]}),ce.splice(ce.length-be,0,Re),de[Re]=!0);for(be=0;be<V.length;be++)if(Re=V[be],Je=Y[Re],je=ie[Re],!de[Re]&&!At(Je,je))if(At(Je.source,je.source)&&At(Je["source-layer"],je["source-layer"])&&At(Je.type,je.type)){for(dt in tt(Je.layout,je.layout,L,Re,null,Ft.setLayoutProperty),tt(Je.paint,je.paint,L,Re,null,Ft.setPaintProperty),At(Je.filter,je.filter)||L.push({command:Ft.setFilter,args:[Re,je.filter]}),At(Je.minzoom,je.minzoom)&&At(Je.maxzoom,je.maxzoom)||L.push({command:Ft.setLayerZoomRange,args:[Re,je.minzoom,je.maxzoom]}),Je)Object.prototype.hasOwnProperty.call(Je,dt)&&dt!=="layout"&&dt!=="paint"&&dt!=="filter"&&dt!=="metadata"&&dt!=="minzoom"&&dt!=="maxzoom"&&(dt.indexOf("paint.")===0?tt(Je[dt],je[dt],L,Re,dt.slice(6),Ft.setPaintProperty):At(Je[dt],je[dt])||L.push({command:Ft.setLayerProperty,args:[Re,dt,je[dt]]}));for(dt in je)Object.prototype.hasOwnProperty.call(je,dt)&&!Object.prototype.hasOwnProperty.call(Je,dt)&&dt!=="layout"&&dt!=="paint"&&dt!=="filter"&&dt!=="metadata"&&dt!=="minzoom"&&dt!=="maxzoom"&&(dt.indexOf("paint.")===0?tt(Je[dt],je[dt],L,Re,dt.slice(6),Ft.setPaintProperty):At(Je[dt],je[dt])||L.push({command:Ft.setLayerProperty,args:[Re,dt,je[dt]]}))}else L.push({command:Ft.removeLayer,args:[Re]}),rt=ce[ce.lastIndexOf(Re)+1],L.push({command:Ft.addLayer,args:[je,rt]})}(S,a.layers,h)}catch(p){console.warn("Unable to compute style diff:",p),h=[{command:Ft.setStyle,args:[a]}]}return h},l.aF=function(u){const a=[],h=u.id;return h===void 0&&a.push({message:`layers.${h}: missing required property "id"`}),u.render===void 0&&a.push({message:`layers.${h}: missing required method "render"`}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&a.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),a},l.aG=function u(a,h){if(Array.isArray(a)){if(!Array.isArray(h)||a.length!==h.length)return!1;for(let p=0;p<a.length;p++)if(!u(a[p],h[p]))return!1;return!0}if(typeof a=="object"&&a!==null&&h!==null){if(typeof h!="object"||Object.keys(a).length!==Object.keys(h).length)return!1;for(const p in a)if(!u(a[p],h[p]))return!1;return!0}return a===h},l.aH=J,l.aI=W,l.aJ=iu,l.aK=function(u){return u({pluginStatus:rs,pluginURL:Io}),iu.on("pluginStateChange",u),u},l.aL=class extends cl{constructor(u,a){super(u,a),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},l.aM=Pd,l.aN=class extends cl{constructor(u,a){super(u,a),this.current=jy}set(u){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let a=1;a<16;a++)if(u[a]!==this.current[a]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}},l.aO=Sg,l.aP=class extends cl{constructor(u,a){super(u,a),this.current=[0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2]))}},l.aQ=class extends cl{constructor(u,a){super(u,a),this.current=[0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1]))}},l.aR=Tg,l.aS=function(u,a,h,p,_,S,E){var M=1/(a-h),L=1/(p-_),$=1/(S-E);return u[0]=-2*M,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*L,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*$,u[11]=0,u[12]=(a+h)*M,u[13]=(_+p)*L,u[14]=(E+S)*$,u[15]=1,u},l.aT=hi,l.aU=QD,l.aV=class extends v{},l.aW=qL,l.aX=class extends T{},l.aY=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},l.aZ=tS,l.a_=Gt,l.aa=function(u){const a={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,p,_,S)=>{const E=_||S;return a[p]=!E||E.toLowerCase(),""}),a["max-age"]){const h=parseInt(a["max-age"],10);isNaN(h)?delete a["max-age"]:a["max-age"]=h}return a},l.ab=function(u,a){const h=[];for(const p in u)p in a||h.push(p);return h},l.ac=function(u){if(Ue==null){const a=u.navigator?u.navigator.userAgent:null;Ue=!!u.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))}return Ue},l.ad=Q,l.ae=function(u,a,h){var p=Math.sin(h),_=Math.cos(h),S=a[0],E=a[1],M=a[2],L=a[3],$=a[4],V=a[5],Y=a[6],ie=a[7];return a!==u&&(u[8]=a[8],u[9]=a[9],u[10]=a[10],u[11]=a[11],u[12]=a[12],u[13]=a[13],u[14]=a[14],u[15]=a[15]),u[0]=S*_+$*p,u[1]=E*_+V*p,u[2]=M*_+Y*p,u[3]=L*_+ie*p,u[4]=$*_-S*p,u[5]=V*_-E*p,u[6]=Y*_-M*p,u[7]=ie*_-L*p,u},l.af=function(u){var a=new Ld(16);return a[0]=u[0],a[1]=u[1],a[2]=u[2],a[3]=u[3],a[4]=u[4],a[5]=u[5],a[6]=u[6],a[7]=u[7],a[8]=u[8],a[9]=u[9],a[10]=u[10],a[11]=u[11],a[12]=u[12],a[13]=u[13],a[14]=u[14],a[15]=u[15],a},l.ag=Ag,l.ah=function(u,a){let h=0,p=0;if(u.kind==="constant")p=u.layoutSize;else if(u.kind!=="source"){const{interpolationType:_,minZoom:S,maxZoom:E}=u,M=_?Q(bs.interpolationFactor(_,a,S,E),0,1):0;u.kind==="camera"?p=ys.number(u.minSize,u.maxSize,M):h=M}return{uSizeT:h,uSize:p}},l.aj=function(u,{uSize:a,uSizeT:h},{lowerSize:p,upperSize:_}){return u.kind==="source"?p/Mo:u.kind==="composite"?ys.number(p/Mo,_/Mo,h):a},l.ak=f0,l.al=function(u,a,h,p){const _=a.y-u.y,S=a.x-u.x,E=p.y-h.y,M=p.x-h.x,L=E*S-M*_;if(L===0)return null;const $=(M*(u.y-h.y)-E*(u.x-h.x))/L;return new C(u.x+$*S,u.y+$*_)},l.am=iT,l.an=Hw,l.ao=Wy,l.ap=_r,l.ar=h0,l.as=function(u,a){var h=a[0],p=a[1],_=a[2],S=a[3],E=a[4],M=a[5],L=a[6],$=a[7],V=a[8],Y=a[9],ie=a[10],ce=a[11],de=a[12],be=a[13],Pe=a[14],Re=a[15],Je=h*M-p*E,je=h*L-_*E,rt=h*$-S*E,dt=p*L-_*M,Lt=p*$-S*M,sn=_*$-S*L,gn=V*be-Y*de,en=V*Pe-ie*de,Jt=V*Re-ce*de,qt=Y*Pe-ie*be,hn=Y*Re-ce*be,Xt=ie*Re-ce*Pe,jt=Je*Xt-je*hn+rt*qt+dt*Jt-Lt*en+sn*gn;return jt?(u[0]=(M*Xt-L*hn+$*qt)*(jt=1/jt),u[1]=(_*hn-p*Xt-S*qt)*jt,u[2]=(be*sn-Pe*Lt+Re*dt)*jt,u[3]=(ie*Lt-Y*sn-ce*dt)*jt,u[4]=(L*Jt-E*Xt-$*en)*jt,u[5]=(h*Xt-_*Jt+S*en)*jt,u[6]=(Pe*rt-de*sn-Re*je)*jt,u[7]=(V*sn-ie*rt+ce*je)*jt,u[8]=(E*hn-M*Jt+$*gn)*jt,u[9]=(p*Jt-h*hn-S*gn)*jt,u[10]=(de*Lt-be*rt+Re*Je)*jt,u[11]=(Y*rt-V*Lt-ce*Je)*jt,u[12]=(M*en-E*qt-L*gn)*jt,u[13]=(h*qt-p*en+_*gn)*jt,u[14]=(be*je-de*dt-Pe*Je)*jt,u[15]=(V*dt-Y*je+ie*Je)*jt,u):null},l.at=x0,l.au=d0,l.av=w0,l.aw=function(){const u={},a=Se.$version;for(const h in Se.$root){const p=Se.$root[h];if(p.required){let _=null;_=h==="version"?a:p.type==="array"?[]:{},_!=null&&(u[h]=_)}}return u},l.ax=Ft,l.ay=pg,l.az=Tt,l.b=function(u,a){const h=new Blob([new Uint8Array(u)],{type:"image/png"});createImageBitmap(h).then(p=>{a(null,p)}).catch(p=>{a(new Error(`Could not load image because of ${p.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},l.b0=Lr,l.b1=function(u,a){var h=u[0],p=u[1],_=u[2],S=u[3],E=u[4],M=u[5],L=u[6],$=u[7],V=u[8],Y=u[9],ie=u[10],ce=u[11],de=u[12],be=u[13],Pe=u[14],Re=u[15],Je=a[0],je=a[1],rt=a[2],dt=a[3],Lt=a[4],sn=a[5],gn=a[6],en=a[7],Jt=a[8],qt=a[9],hn=a[10],Xt=a[11],jt=a[12],An=a[13],_n=a[14],Gn=a[15];return Math.abs(h-Je)<=as*Math.max(1,Math.abs(h),Math.abs(Je))&&Math.abs(p-je)<=as*Math.max(1,Math.abs(p),Math.abs(je))&&Math.abs(_-rt)<=as*Math.max(1,Math.abs(_),Math.abs(rt))&&Math.abs(S-dt)<=as*Math.max(1,Math.abs(S),Math.abs(dt))&&Math.abs(E-Lt)<=as*Math.max(1,Math.abs(E),Math.abs(Lt))&&Math.abs(M-sn)<=as*Math.max(1,Math.abs(M),Math.abs(sn))&&Math.abs(L-gn)<=as*Math.max(1,Math.abs(L),Math.abs(gn))&&Math.abs($-en)<=as*Math.max(1,Math.abs($),Math.abs(en))&&Math.abs(V-Jt)<=as*Math.max(1,Math.abs(V),Math.abs(Jt))&&Math.abs(Y-qt)<=as*Math.max(1,Math.abs(Y),Math.abs(qt))&&Math.abs(ie-hn)<=as*Math.max(1,Math.abs(ie),Math.abs(hn))&&Math.abs(ce-Xt)<=as*Math.max(1,Math.abs(ce),Math.abs(Xt))&&Math.abs(de-jt)<=as*Math.max(1,Math.abs(de),Math.abs(jt))&&Math.abs(be-An)<=as*Math.max(1,Math.abs(be),Math.abs(An))&&Math.abs(Pe-_n)<=as*Math.max(1,Math.abs(Pe),Math.abs(_n))&&Math.abs(Re-Gn)<=as*Math.max(1,Math.abs(Re),Math.abs(Gn))},l.b2=function(u,a){return u[0]=a[0],u[1]=a[1],u[2]=a[2],u[3]=a[3],u[4]=a[4],u[5]=a[5],u[6]=a[6],u[7]=a[7],u[8]=a[8],u[9]=a[9],u[10]=a[10],u[11]=a[11],u[12]=a[12],u[13]=a[13],u[14]=a[14],u[15]=a[15],u},l.b3=function(u,a,h){return u[0]=a[0]*h[0],u[1]=a[1]*h[1],u[2]=a[2]*h[2],u[3]=a[3]*h[3],u},l.b4=function(u,a){return u[0]*a[0]+u[1]*a[1]+u[2]*a[2]+u[3]*a[3]},l.b5=ve,l.b6=XS,l.b7=qS,l.b8=function(u,a,h,p,_){var S,E=1/Math.tan(a/2);return u[0]=E/h,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=E,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,_!=null&&_!==1/0?(u[10]=(_+p)*(S=1/(p-_)),u[14]=2*_*p*S):(u[10]=-1,u[14]=-2*p),u},l.b9=function(u,a,h){var p=Math.sin(h),_=Math.cos(h),S=a[4],E=a[5],M=a[6],L=a[7],$=a[8],V=a[9],Y=a[10],ie=a[11];return a!==u&&(u[0]=a[0],u[1]=a[1],u[2]=a[2],u[3]=a[3],u[12]=a[12],u[13]=a[13],u[14]=a[14],u[15]=a[15]),u[4]=S*_+$*p,u[5]=E*_+V*p,u[6]=M*_+Y*p,u[7]=L*_+ie*p,u[8]=$*_-S*p,u[9]=V*_-E*p,u[10]=Y*_-M*p,u[11]=ie*_-L*p,u},l.bA=y,l.bB=wS,l.bC=bd,l.bD=ws,l.ba=q,l.bb=ee,l.bc=function(u,a){return u[0]=a[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=a[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=a[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},l.bd=class extends au{},l.be=v0,l.bf=ZS,l.bg=MO,l.bi=Dt,l.bj=function(u,a,h=!1){if(rs===_f||rs===yf||rs===bf)throw new Error("setRTLTextPlugin cannot be called multiple times.");Io=wt.resolveURL(u),rs=_f,xf=a,wf(),h||_g()},l.bk=Sf,l.bl=function(u,a){const h={};for(let _=0;_<u.length;_++){const S=a&&a[u[_].id]||Td(u[_]);a&&(a[u[_].id]=S);let E=h[S];E||(E=h[S]=[]),E.push(u[_])}const p=[];for(const _ in h)p.push(h[_]);return p},l.bm=un,l.bn=JS,l.bo=eT,l.bp=PS,l.bq=function(u){u.bucket.createArrays(),u.bucket.tilePixelRatio=ur/(512*u.bucket.overscaling),u.bucket.compareText={},u.bucket.iconsNeedLinear=!1;const a=u.bucket.layers[0],h=a.layout,p=a._unevaluatedLayout._values,_={layoutIconSize:p["icon-size"].possiblyEvaluate(new Di(u.bucket.zoom+1),u.canonical),layoutTextSize:p["text-size"].possiblyEvaluate(new Di(u.bucket.zoom+1),u.canonical),textMaxSize:p["text-size"].possiblyEvaluate(new Di(18))};if(u.bucket.textSizeData.kind==="composite"){const{minZoom:$,maxZoom:V}=u.bucket.textSizeData;_.compositeTextSizes=[p["text-size"].possiblyEvaluate(new Di($),u.canonical),p["text-size"].possiblyEvaluate(new Di(V),u.canonical)]}if(u.bucket.iconSizeData.kind==="composite"){const{minZoom:$,maxZoom:V}=u.bucket.iconSizeData;_.compositeIconSizes=[p["icon-size"].possiblyEvaluate(new Di($),u.canonical),p["icon-size"].possiblyEvaluate(new Di(V),u.canonical)]}const S=h.get("text-line-height")*_r,E=h.get("text-rotation-alignment")!=="viewport"&&h.get("symbol-placement")!=="point",M=h.get("text-keep-upright"),L=h.get("text-size");for(const $ of u.bucket.features){const V=h.get("text-font").evaluate($,{},u.canonical).join(","),Y=L.evaluate($,{},u.canonical),ie=_.layoutTextSize.evaluate($,{},u.canonical),ce=_.layoutIconSize.evaluate($,{},u.canonical),de={horizontal:{},vertical:void 0},be=$.text;let Pe,Re=[0,0];if(be){const rt=be.toString(),dt=h.get("text-letter-spacing").evaluate($,{},u.canonical)*_r,Lt=gf(rt)?dt:0,sn=h.get("text-anchor").evaluate($,{},u.canonical),gn=hT(a,$,u.canonical);if(!gn){const Xt=h.get("text-radial-offset").evaluate($,{},u.canonical);Re=Xt?dT(sn,[Xt*_r,b0]):h.get("text-offset").evaluate($,{},u.canonical).map(jt=>jt*_r)}let en=E?"center":h.get("text-justify").evaluate($,{},u.canonical);const Jt=h.get("symbol-placement"),qt=Jt==="point"?h.get("text-max-width").evaluate($,{},u.canonical)*_r:0,hn=()=>{u.bucket.allowVerticalPlacement&&mf(rt)&&(de.vertical=Rg(be,u.glyphMap,u.glyphPositions,u.imagePositions,V,qt,S,sn,"left",Lt,Re,l.ai.vertical,!0,Jt,ie,Y))};if(!E&&gn){const Xt=new Set;if(en==="auto")for(let An=0;An<gn.values.length;An+=2)Xt.add(x0(gn.values[An]));else Xt.add(en);let jt=!1;for(const An of Xt)if(!de.horizontal[An])if(jt)de.horizontal[An]=de.horizontal[0];else{const _n=Rg(be,u.glyphMap,u.glyphPositions,u.imagePositions,V,qt,S,"center",An,Lt,Re,l.ai.horizontal,!1,Jt,ie,Y);_n&&(de.horizontal[An]=_n,jt=_n.positionedLines.length===1)}hn()}else{en==="auto"&&(en=x0(sn));const Xt=Rg(be,u.glyphMap,u.glyphPositions,u.imagePositions,V,qt,S,sn,en,Lt,Re,l.ai.horizontal,!1,Jt,ie,Y);Xt&&(de.horizontal[en]=Xt),hn(),mf(rt)&&E&&M&&(de.vertical=Rg(be,u.glyphMap,u.glyphPositions,u.imagePositions,V,qt,S,sn,en,Lt,Re,l.ai.vertical,!1,Jt,ie,Y))}}let Je=!1;if($.icon&&$.icon.name){const rt=u.imageMap[$.icon.name];rt&&(Pe=uO(u.imagePositions[$.icon.name],h.get("icon-offset").evaluate($,{},u.canonical),h.get("icon-anchor").evaluate($,{},u.canonical)),Je=!!rt.sdf,u.bucket.sdfIcons===void 0?u.bucket.sdfIcons=Je:u.bucket.sdfIcons!==Je&&re("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(rt.pixelRatio!==u.bucket.pixelRatio||h.get("icon-rotate").constantOr(1)!==0)&&(u.bucket.iconsNeedLinear=!0))}const je=pT(de.horizontal)||de.vertical;u.bucket.iconsInText=!!je&&je.iconsInText,(je||Pe)&&IO(u.bucket,$,de,Pe,u.imageMap,_,ie,ce,Re,Je,u.canonical)}u.showCollisionBoxes&&u.bucket.generateCollisionDebugBuffers()},l.br=s0,l.bs=n0,l.bt=r0,l.bu=class{constructor(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let u=performance.getEntriesByName(this._marks.measure);return u.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),u=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),u}},l.bv=o0,l.bw=Yl,l.bx=function(u,a,h,p,_){return m(this,void 0,void 0,function*(){if(H())try{return yield vt(u,a,h,p,_)}catch{}return function(S,E,M,L,$){const V=S.width,Y=S.height;it&&Ge||(it=new OffscreenCanvas(V,Y),Ge=it.getContext("2d",{willReadFrequently:!0})),it.width=V,it.height=Y,Ge.drawImage(S,0,0,V,Y);const ie=Ge.getImageData(E,M,L,$);return Ge.clearRect(0,0,V,Y),ie.data}(u,a,h,p,_)})},l.by=YS,l.bz=g,l.c=Xe,l.d=function(u,a){const h=new Image;h.onload=()=>{a(null,h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=It})},h.onerror=()=>a(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const p=new Blob([new Uint8Array(u)],{type:"image/png"});h.src=u.byteLength?URL.createObjectURL(p):It},l.e=se,l.f=function(u,a){return Sn(se(u,{type:"json"}),a)},l.g=Nt,l.h=wt,l.i=Ve,l.j=$e,l.k=he,l.l=me,l.m=Sn,l.n=function(u){return new o0(u).readFields(rO,[])},l.o=function(u,a,h){if(!u.length)return h(null,[]);let p=u.length;const _=new Array(u.length);let S=null;u.forEach((E,M)=>{a(E,(L,$)=>{L&&(S=L),_[M]=$,--p==0&&h(S,_)})})},l.p=kS,l.q=Ff,l.r=sr,l.s=Ie,l.t=$y,l.u=rn,l.v=Se,l.w=re,l.x=Id,l.y=Za,l.z=function([u,a,h]){return a+=90,a*=Math.PI/180,h*=Math.PI/180,{x:u*Math.cos(a)*Math.sin(h),y:u*Math.sin(a)*Math.sin(h),z:u*Math.cos(h)}}}),c(["./shared"],function(l){class m{constructor(ne){this.keyCache={},ne&&this.replace(ne)}replace(ne){this._layerConfigs={},this._layers={},this.update(ne,[])}update(ne,ae){for(const Ae of ne){this._layerConfigs[Ae.id]=Ae;const ke=this._layers[Ae.id]=l.aC(Ae);ke._featureFilter=l.a6(ke.filter),this.keyCache[Ae.id]&&delete this.keyCache[Ae.id]}for(const Ae of ae)delete this.keyCache[Ae],delete this._layerConfigs[Ae],delete this._layers[Ae];this.familiesBySource={};const pe=l.bl(Object.values(this._layerConfigs),this.keyCache);for(const Ae of pe){const ke=Ae.map(Et=>this._layers[Et.id]),Ke=ke[0];if(Ke.visibility==="none")continue;const Be=Ke.source||"";let Oe=this.familiesBySource[Be];Oe||(Oe=this.familiesBySource[Be]={});const He=Ke.sourceLayer||"_geojsonTileLayer";let yt=Oe[He];yt||(yt=Oe[He]=[]),yt.push(ke)}}}class g{constructor(ne){const ae={},pe=[];for(const Be in ne){const Oe=ne[Be],He=ae[Be]={};for(const yt in Oe){const Et=Oe[+yt];if(!Et||Et.bitmap.width===0||Et.bitmap.height===0)continue;const St={x:0,y:0,w:Et.bitmap.width+2,h:Et.bitmap.height+2};pe.push(St),He[yt]={rect:St,metrics:Et.metrics}}}const{w:Ae,h:ke}=l.p(pe),Ke=new l.q({width:Ae||1,height:ke||1});for(const Be in ne){const Oe=ne[Be];for(const He in Oe){const yt=Oe[+He];if(!yt||yt.bitmap.width===0||yt.bitmap.height===0)continue;const Et=ae[Be][He].rect;l.q.copy(yt.bitmap,Ke,{x:0,y:0},{x:Et.x+1,y:Et.y+1},yt.bitmap)}}this.image=Ke,this.positions=ae}}l.bm("GlyphAtlas",g);class y{constructor(ne){this.tileID=new l.O(ne.tileID.overscaledZ,ne.tileID.wrap,ne.tileID.canonical.z,ne.tileID.canonical.x,ne.tileID.canonical.y),this.uid=ne.uid,this.zoom=ne.zoom,this.pixelRatio=ne.pixelRatio,this.tileSize=ne.tileSize,this.source=ne.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ne.showCollisionBoxes,this.collectResourceTiming=!!ne.collectResourceTiming,this.returnDependencies=!!ne.returnDependencies,this.promoteId=ne.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(ne,ae,pe,Ae,ke){this.status="parsing",this.data=ne,this.collisionBoxArray=new l.a3;const Ke=new l.bn(Object.keys(ne.layers).sort()),Be=new l.bo(this.tileID,this.promoteId);Be.bucketLayerIDs=[];const Oe={},He={featureIndex:Be,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:pe},yt=ae.familiesBySource[this.source];for(const kt in yt){const ft=ne.layers[kt];if(!ft)continue;ft.version===1&&l.w(`Vector tile source "${this.source}" layer "${kt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ne=Ke.encode(kt),bt=[];for(let zt=0;zt<ft.length;zt++){const Tn=ft.feature(zt),ci=Be.getId(Tn,kt);bt.push({feature:Tn,id:ci,index:zt,sourceLayerIndex:Ne})}for(const zt of yt[kt]){const Tn=zt[0];Tn.source!==this.source&&l.w(`layer.source = ${Tn.source} does not equal this.source = ${this.source}`),Tn.minzoom&&this.zoom<Math.floor(Tn.minzoom)||Tn.maxzoom&&this.zoom>=Tn.maxzoom||Tn.visibility!=="none"&&(x(zt,this.zoom,pe),(Oe[Tn.id]=Tn.createBucket({index:Be.bucketLayerIDs.length,layers:zt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ne,sourceID:this.source})).populate(bt,He,this.tileID.canonical),Be.bucketLayerIDs.push(zt.map(ci=>ci.id)))}}let Et,St,yn,In;const nn=l.aH(He.glyphDependencies,kt=>Object.keys(kt).map(Number));this.inFlightDependencies.forEach(kt=>kt==null?void 0:kt.cancel()),this.inFlightDependencies=[];const bn=++this.dependencySentinel;Object.keys(nn).length?this.inFlightDependencies.push(Ae.send("getGlyphs",{uid:this.uid,stacks:nn,source:this.source,tileID:this.tileID,type:"glyphs"},(kt,ft)=>{bn===this.dependencySentinel&&(Et||(Et=kt,St=ft,We.call(this)))})):St={};const Rn=Object.keys(He.iconDependencies);Rn.length?this.inFlightDependencies.push(Ae.send("getImages",{icons:Rn,source:this.source,tileID:this.tileID,type:"icons"},(kt,ft)=>{bn===this.dependencySentinel&&(Et||(Et=kt,yn=ft,We.call(this)))})):yn={};const Wt=Object.keys(He.patternDependencies);function We(){if(Et)return ke(Et);if(St&&yn&&In){const kt=new g(St),ft=new l.bp(yn,In);for(const Ne in Oe){const bt=Oe[Ne];bt instanceof l.a4?(x(bt.layers,this.zoom,pe),l.bq({bucket:bt,glyphMap:St,glyphPositions:kt.positions,imageMap:yn,imagePositions:ft.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):bt.hasPattern&&(bt instanceof l.br||bt instanceof l.bs||bt instanceof l.bt)&&(x(bt.layers,this.zoom,pe),bt.addFeatures(He,this.tileID.canonical,ft.patternPositions))}this.status="done",ke(null,{buckets:Object.values(Oe).filter(Ne=>!Ne.isEmpty()),featureIndex:Be,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:kt.image,imageAtlas:ft,glyphMap:this.returnDependencies?St:null,iconMap:this.returnDependencies?yn:null,glyphPositions:this.returnDependencies?kt.positions:null})}}Wt.length?this.inFlightDependencies.push(Ae.send("getImages",{icons:Wt,source:this.source,tileID:this.tileID,type:"patterns"},(kt,ft)=>{bn===this.dependencySentinel&&(Et||(Et=kt,In=ft,We.call(this)))})):In={},We.call(this)}}function x(Ee,ne,ae){const pe=new l.a8(ne);for(const Ae of Ee)Ae.recalculate(pe,ae)}function C(Ee,ne){const ae=l.l(Ee.request,(pe,Ae,ke,Ke)=>{if(pe)ne(pe);else if(Ae)try{const Be=new l.bw.VectorTile(new l.bv(Ae));ne(null,{vectorTile:Be,rawData:Ae,cacheControl:ke,expires:Ke})}catch(Be){const Oe=new Uint8Array(Ae);let He=`Unable to parse the tile at ${Ee.request.url}, `;He+=Oe[0]===31&&Oe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Be.messge}`,ne(new Error(He))}});return()=>{ae.cancel(),ne()}}class I{constructor(ne,ae,pe,Ae){this.actor=ne,this.layerIndex=ae,this.availableImages=pe,this.loadVectorData=Ae||C,this.fetching={},this.loading={},this.loaded={}}loadTile(ne,ae){const pe=ne.uid;this.loading||(this.loading={});const Ae=!!(ne&&ne.request&&ne.request.collectResourceTiming)&&new l.bu(ne.request),ke=this.loading[pe]=new y(ne);ke.abort=this.loadVectorData(ne,(Ke,Be)=>{if(delete this.loading[pe],Ke||!Be)return ke.status="done",this.loaded[pe]=ke,ae(Ke);const Oe=Be.rawData,He={};Be.expires&&(He.expires=Be.expires),Be.cacheControl&&(He.cacheControl=Be.cacheControl);const yt={};if(Ae){const Et=Ae.finish();Et&&(yt.resourceTiming=JSON.parse(JSON.stringify(Et)))}ke.vectorTile=Be.vectorTile,ke.parse(Be.vectorTile,this.layerIndex,this.availableImages,this.actor,(Et,St)=>{if(delete this.fetching[pe],Et||!St)return ae(Et);ae(null,l.e({rawTileData:Oe.slice(0)},St,He,yt))}),this.loaded=this.loaded||{},this.loaded[pe]=ke,this.fetching[pe]={rawTileData:Oe,cacheControl:He,resourceTiming:yt}})}reloadTile(ne,ae){const pe=this.loaded,Ae=ne.uid;if(pe&&pe[Ae]){const ke=pe[Ae];ke.showCollisionBoxes=ne.showCollisionBoxes,ke.status==="parsing"?ke.parse(ke.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ke,Be)=>{if(Ke||!Be)return ae(Ke,Be);let Oe;if(this.fetching[Ae]){const{rawTileData:He,cacheControl:yt,resourceTiming:Et}=this.fetching[Ae];delete this.fetching[Ae],Oe=l.e({rawTileData:He.slice(0)},Be,yt,Et)}else Oe=Be;ae(null,Oe)}):ke.status==="done"&&(ke.vectorTile?ke.parse(ke.vectorTile,this.layerIndex,this.availableImages,this.actor,ae):ae())}}abortTile(ne,ae){const pe=this.loading,Ae=ne.uid;pe&&pe[Ae]&&pe[Ae].abort&&(pe[Ae].abort(),delete pe[Ae]),ae()}removeTile(ne,ae){const pe=this.loaded,Ae=ne.uid;pe&&pe[Ae]&&delete pe[Ae],ae()}}class A{constructor(){this.loaded={}}loadTile(ne,ae){return l._(this,void 0,void 0,function*(){const{uid:pe,encoding:Ae,rawImageData:ke,redFactor:Ke,greenFactor:Be,blueFactor:Oe,baseShift:He}=ne,yt=ke.width+2,Et=ke.height+2,St=l.a(ke)?new l.R({width:yt,height:Et},yield l.bx(ke,-1,-1,yt,Et)):ke,yn=new l.by(pe,St,Ae,Ke,Be,Oe,He);this.loaded=this.loaded||{},this.loaded[pe]=yn,ae(null,yn)})}removeTile(ne){const ae=this.loaded,pe=ne.uid;ae&&ae[pe]&&delete ae[pe]}}function O(Ee,ne){if(Ee.length!==0){F(Ee[0],ne);for(var ae=1;ae<Ee.length;ae++)F(Ee[ae],!ne)}}function F(Ee,ne){for(var ae=0,pe=0,Ae=0,ke=Ee.length,Ke=ke-1;Ae<ke;Ke=Ae++){var Be=(Ee[Ae][0]-Ee[Ke][0])*(Ee[Ke][1]+Ee[Ae][1]),Oe=ae+Be;pe+=Math.abs(ae)>=Math.abs(Be)?ae-Oe+Be:Be-Oe+ae,ae=Oe}ae+pe>=0!=!!ne&&Ee.reverse()}var z=l.bz(function Ee(ne,ae){var pe,Ae=ne&&ne.type;if(Ae==="FeatureCollection")for(pe=0;pe<ne.features.length;pe++)Ee(ne.features[pe],ae);else if(Ae==="GeometryCollection")for(pe=0;pe<ne.geometries.length;pe++)Ee(ne.geometries[pe],ae);else if(Ae==="Feature")Ee(ne.geometry,ae);else if(Ae==="Polygon")O(ne.coordinates,ae);else if(Ae==="MultiPolygon")for(pe=0;pe<ne.coordinates.length;pe++)O(ne.coordinates[pe],ae);return ne});const U=l.bw.VectorTileFeature.prototype.toGeoJSON;var H={exports:{}},q=l.bA,ee=l.bw.VectorTileFeature,Q=ve;function ve(Ee,ne){this.options=ne||{},this.features=Ee,this.length=Ee.length}function se(Ee,ne){this.id=typeof Ee.id=="number"?Ee.id:void 0,this.type=Ee.type,this.rawGeometry=Ee.type===1?[Ee.geometry]:Ee.geometry,this.properties=Ee.tags,this.extent=ne||4096}ve.prototype.feature=function(Ee){return new se(this.features[Ee],this.options.extent)},se.prototype.loadGeometry=function(){var Ee=this.rawGeometry;this.geometry=[];for(var ne=0;ne<Ee.length;ne++){for(var ae=Ee[ne],pe=[],Ae=0;Ae<ae.length;Ae++)pe.push(new q(ae[Ae][0],ae[Ae][1]));this.geometry.push(pe)}return this.geometry},se.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ee=this.geometry,ne=1/0,ae=-1/0,pe=1/0,Ae=-1/0,ke=0;ke<Ee.length;ke++)for(var Ke=Ee[ke],Be=0;Be<Ke.length;Be++){var Oe=Ke[Be];ne=Math.min(ne,Oe.x),ae=Math.max(ae,Oe.x),pe=Math.min(pe,Oe.y),Ae=Math.max(Ae,Oe.y)}return[ne,pe,ae,Ae]},se.prototype.toGeoJSON=ee.prototype.toGeoJSON;var K=l.bB,J=Q;function W(Ee){var ne=new K;return function(ae,pe){for(var Ae in ae.layers)pe.writeMessage(3,te,ae.layers[Ae])}(Ee,ne),ne.finish()}function te(Ee,ne){var ae;ne.writeVarintField(15,Ee.version||1),ne.writeStringField(1,Ee.name||""),ne.writeVarintField(5,Ee.extent||4096);var pe={keys:[],values:[],keycache:{},valuecache:{}};for(ae=0;ae<Ee.length;ae++)pe.feature=Ee.feature(ae),ne.writeMessage(2,j,pe);var Ae=pe.keys;for(ae=0;ae<Ae.length;ae++)ne.writeStringField(3,Ae[ae]);var ke=pe.values;for(ae=0;ae<ke.length;ae++)ne.writeMessage(4,Ue,ke[ae])}function j(Ee,ne){var ae=Ee.feature;ae.id!==void 0&&ne.writeVarintField(1,ae.id),ne.writeMessage(2,re,Ee),ne.writeVarintField(3,ae.type),ne.writeMessage(4,Ve,ae)}function re(Ee,ne){var ae=Ee.feature,pe=Ee.keys,Ae=Ee.values,ke=Ee.keycache,Ke=Ee.valuecache;for(var Be in ae.properties){var Oe=ae.properties[Be],He=ke[Be];if(Oe!==null){He===void 0&&(pe.push(Be),ke[Be]=He=pe.length-1),ne.writeVarint(He);var yt=typeof Oe;yt!=="string"&&yt!=="boolean"&&yt!=="number"&&(Oe=JSON.stringify(Oe));var Et=yt+":"+Oe,St=Ke[Et];St===void 0&&(Ae.push(Oe),Ke[Et]=St=Ae.length-1),ne.writeVarint(St)}}}function Te(Ee,ne){return(ne<<3)+(7&Ee)}function ye(Ee){return Ee<<1^Ee>>31}function Ve(Ee,ne){for(var ae=Ee.loadGeometry(),pe=Ee.type,Ae=0,ke=0,Ke=ae.length,Be=0;Be<Ke;Be++){var Oe=ae[Be],He=1;pe===1&&(He=Oe.length),ne.writeVarint(Te(1,He));for(var yt=pe===3?Oe.length-1:Oe.length,Et=0;Et<yt;Et++){Et===1&&pe!==1&&ne.writeVarint(Te(2,yt-1));var St=Oe[Et].x-Ae,yn=Oe[Et].y-ke;ne.writeVarint(ye(St)),ne.writeVarint(ye(yn)),Ae+=St,ke+=yn}pe===3&&ne.writeVarint(Te(7,1))}}function Ue(Ee,ne){var ae=typeof Ee;ae==="string"?ne.writeStringField(1,Ee):ae==="boolean"?ne.writeBooleanField(7,Ee):ae==="number"&&(Ee%1!=0?ne.writeDoubleField(3,Ee):Ee<0?ne.writeSVarintField(6,Ee):ne.writeVarintField(5,Ee))}H.exports=W,H.exports.fromVectorTileJs=W,H.exports.fromGeojsonVt=function(Ee,ne){ne=ne||{};var ae={};for(var pe in Ee)ae[pe]=new J(Ee[pe].features,ne),ae[pe].name=pe,ae[pe].version=ne.version,ae[pe].extent=ne.extent;return W({layers:ae})},H.exports.GeoJSONWrapper=J;var Qe=l.bz(H.exports);const It={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ee=>Ee},vt=Math.fround||(it=new Float32Array(1),Ee=>(it[0]=+Ee,it[0]));var it;const Ge=3,ot=5,Ct=6;class wt{constructor(ne){this.options=Object.assign(Object.create(It),ne),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ne){const{log:ae,minZoom:pe,maxZoom:Ae}=this.options;ae&&console.time("total time");const ke=`prepare ${ne.length} points`;ae&&console.time(ke),this.points=ne;const Ke=[];for(let Oe=0;Oe<ne.length;Oe++){const He=ne[Oe];if(!He.geometry)continue;const[yt,Et]=He.geometry.coordinates,St=vt(Tt(yt)),yn=vt(Nt(Et));Ke.push(St,yn,1/0,Oe,-1,1),this.options.reduce&&Ke.push(0)}let Be=this.trees[Ae+1]=this._createTree(Ke);ae&&console.timeEnd(ke);for(let Oe=Ae;Oe>=pe;Oe--){const He=+Date.now();Be=this.trees[Oe]=this._createTree(this._cluster(Be,Oe)),ae&&console.log("z%d: %d clusters in %dms",Oe,Be.numItems,+Date.now()-He)}return ae&&console.timeEnd("total time"),this}getClusters(ne,ae){let pe=((ne[0]+180)%360+360)%360-180;const Ae=Math.max(-90,Math.min(90,ne[1]));let ke=ne[2]===180?180:((ne[2]+180)%360+360)%360-180;const Ke=Math.max(-90,Math.min(90,ne[3]));if(ne[2]-ne[0]>=360)pe=-180,ke=180;else if(pe>ke){const Et=this.getClusters([pe,Ae,180,Ke],ae),St=this.getClusters([-180,Ae,ke,Ke],ae);return Et.concat(St)}const Be=this.trees[this._limitZoom(ae)],Oe=Be.range(Tt(pe),Nt(Ke),Tt(ke),Nt(Ae)),He=Be.data,yt=[];for(const Et of Oe){const St=this.stride*Et;yt.push(He[St+ot]>1?Xe(He,St,this.clusterProps):this.points[He[St+Ge]])}return yt}getChildren(ne){const ae=this._getOriginId(ne),pe=this._getOriginZoom(ne),Ae="No cluster with the specified id.",ke=this.trees[pe];if(!ke)throw new Error(Ae);const Ke=ke.data;if(ae*this.stride>=Ke.length)throw new Error(Ae);const Be=this.options.radius/(this.options.extent*Math.pow(2,pe-1)),Oe=ke.within(Ke[ae*this.stride],Ke[ae*this.stride+1],Be),He=[];for(const yt of Oe){const Et=yt*this.stride;Ke[Et+4]===ne&&He.push(Ke[Et+ot]>1?Xe(Ke,Et,this.clusterProps):this.points[Ke[Et+Ge]])}if(He.length===0)throw new Error(Ae);return He}getLeaves(ne,ae,pe){const Ae=[];return this._appendLeaves(Ae,ne,ae=ae||10,pe=pe||0,0),Ae}getTile(ne,ae,pe){const Ae=this.trees[this._limitZoom(ne)],ke=Math.pow(2,ne),{extent:Ke,radius:Be}=this.options,Oe=Be/Ke,He=(pe-Oe)/ke,yt=(pe+1+Oe)/ke,Et={features:[]};return this._addTileFeatures(Ae.range((ae-Oe)/ke,He,(ae+1+Oe)/ke,yt),Ae.data,ae,pe,ke,Et),ae===0&&this._addTileFeatures(Ae.range(1-Oe/ke,He,1,yt),Ae.data,ke,pe,ke,Et),ae===ke-1&&this._addTileFeatures(Ae.range(0,He,Oe/ke,yt),Ae.data,-1,pe,ke,Et),Et.features.length?Et:null}getClusterExpansionZoom(ne){let ae=this._getOriginZoom(ne)-1;for(;ae<=this.options.maxZoom;){const pe=this.getChildren(ne);if(ae++,pe.length!==1)break;ne=pe[0].properties.cluster_id}return ae}_appendLeaves(ne,ae,pe,Ae,ke){const Ke=this.getChildren(ae);for(const Be of Ke){const Oe=Be.properties;if(Oe&&Oe.cluster?ke+Oe.point_count<=Ae?ke+=Oe.point_count:ke=this._appendLeaves(ne,Oe.cluster_id,pe,Ae,ke):ke<Ae?ke++:ne.push(Be),ne.length===pe)break}return ke}_createTree(ne){const ae=new l.av(ne.length/this.stride|0,this.options.nodeSize,Float32Array);for(let pe=0;pe<ne.length;pe+=this.stride)ae.add(ne[pe],ne[pe+1]);return ae.finish(),ae.data=ne,ae}_addTileFeatures(ne,ae,pe,Ae,ke,Ke){for(const Be of ne){const Oe=Be*this.stride,He=ae[Oe+ot]>1;let yt,Et,St;if(He)yt=Dt(ae,Oe,this.clusterProps),Et=ae[Oe],St=ae[Oe+1];else{const nn=this.points[ae[Oe+Ge]];yt=nn.properties;const[bn,Rn]=nn.geometry.coordinates;Et=Tt(bn),St=Nt(Rn)}const yn={type:1,geometry:[[Math.round(this.options.extent*(Et*ke-pe)),Math.round(this.options.extent*(St*ke-Ae))]],tags:yt};let In;In=He||this.options.generateId?ae[Oe+Ge]:this.points[ae[Oe+Ge]].id,In!==void 0&&(yn.id=In),Ke.features.push(yn)}}_limitZoom(ne){return Math.max(this.options.minZoom,Math.min(Math.floor(+ne),this.options.maxZoom+1))}_cluster(ne,ae){const{radius:pe,extent:Ae,reduce:ke,minPoints:Ke}=this.options,Be=pe/(Ae*Math.pow(2,ae)),Oe=ne.data,He=[],yt=this.stride;for(let Et=0;Et<Oe.length;Et+=yt){if(Oe[Et+2]<=ae)continue;Oe[Et+2]=ae;const St=Oe[Et],yn=Oe[Et+1],In=ne.within(Oe[Et],Oe[Et+1],Be),nn=Oe[Et+ot];let bn=nn;for(const Rn of In){const Wt=Rn*yt;Oe[Wt+2]>ae&&(bn+=Oe[Wt+ot])}if(bn>nn&&bn>=Ke){let Rn,Wt=St*nn,We=yn*nn,kt=-1;const ft=((Et/yt|0)<<5)+(ae+1)+this.points.length;for(const Ne of In){const bt=Ne*yt;if(Oe[bt+2]<=ae)continue;Oe[bt+2]=ae;const zt=Oe[bt+ot];Wt+=Oe[bt]*zt,We+=Oe[bt+1]*zt,Oe[bt+4]=ft,ke&&(Rn||(Rn=this._map(Oe,Et,!0),kt=this.clusterProps.length,this.clusterProps.push(Rn)),ke(Rn,this._map(Oe,bt)))}Oe[Et+4]=ft,He.push(Wt/bn,We/bn,1/0,ft,-1,bn),ke&&He.push(kt)}else{for(let Rn=0;Rn<yt;Rn++)He.push(Oe[Et+Rn]);if(bn>1)for(const Rn of In){const Wt=Rn*yt;if(!(Oe[Wt+2]<=ae)){Oe[Wt+2]=ae;for(let We=0;We<yt;We++)He.push(Oe[Wt+We])}}}}return He}_getOriginId(ne){return ne-this.points.length>>5}_getOriginZoom(ne){return(ne-this.points.length)%32}_map(ne,ae,pe){if(ne[ae+ot]>1){const Ke=this.clusterProps[ne[ae+Ct]];return pe?Object.assign({},Ke):Ke}const Ae=this.points[ne[ae+Ge]].properties,ke=this.options.map(Ae);return pe&&ke===Ae?Object.assign({},ke):ke}}function Xe(Ee,ne,ae){return{type:"Feature",id:Ee[ne+Ge],properties:Dt(Ee,ne,ae),geometry:{type:"Point",coordinates:[(pe=Ee[ne],360*(pe-.5)),dn(Ee[ne+1])]}};var pe}function Dt(Ee,ne,ae){const pe=Ee[ne+ot],Ae=pe>=1e4?`${Math.round(pe/1e3)}k`:pe>=1e3?Math.round(pe/100)/10+"k":pe,ke=Ee[ne+Ct],Ke=ke===-1?{}:Object.assign({},ae[ke]);return Object.assign(Ke,{cluster:!0,cluster_id:Ee[ne+Ge],point_count:pe,point_count_abbreviated:Ae})}function Tt(Ee){return Ee/360+.5}function Nt(Ee){const ne=Math.sin(Ee*Math.PI/180),ae=.5-.25*Math.log((1+ne)/(1-ne))/Math.PI;return ae<0?0:ae>1?1:ae}function dn(Ee){const ne=(180-360*Ee)*Math.PI/180;return 360*Math.atan(Math.exp(ne))/Math.PI-90}function Sn(Ee,ne,ae,pe){for(var Ae,ke=pe,Ke=ae-ne>>1,Be=ae-ne,Oe=Ee[ne],He=Ee[ne+1],yt=Ee[ae],Et=Ee[ae+1],St=ne+3;St<ae;St+=3){var yn=me(Ee[St],Ee[St+1],Oe,He,yt,Et);if(yn>ke)Ae=St,ke=yn;else if(yn===ke){var In=Math.abs(St-Ke);In<Be&&(Ae=St,Be=In)}}ke>pe&&(Ae-ne>3&&Sn(Ee,ne,Ae,pe),Ee[Ae+2]=ke,ae-Ae>3&&Sn(Ee,Ae,ae,pe))}function me(Ee,ne,ae,pe,Ae,ke){var Ke=Ae-ae,Be=ke-pe;if(Ke!==0||Be!==0){var Oe=((Ee-ae)*Ke+(ne-pe)*Be)/(Ke*Ke+Be*Be);Oe>1?(ae=Ae,pe=ke):Oe>0&&(ae+=Ke*Oe,pe+=Be*Oe)}return(Ke=Ee-ae)*Ke+(Be=ne-pe)*Be}function Ie(Ee,ne,ae,pe){var Ae={id:Ee===void 0?null:Ee,type:ne,geometry:ae,tags:pe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ke){var Ke=ke.geometry,Be=ke.type;if(Be==="Point"||Be==="MultiPoint"||Be==="LineString")at(ke,Ke);else if(Be==="Polygon"||Be==="MultiLineString")for(var Oe=0;Oe<Ke.length;Oe++)at(ke,Ke[Oe]);else if(Be==="MultiPolygon")for(Oe=0;Oe<Ke.length;Oe++)for(var He=0;He<Ke[Oe].length;He++)at(ke,Ke[Oe][He])}(Ae),Ae}function at(Ee,ne){for(var ae=0;ae<ne.length;ae+=3)Ee.minX=Math.min(Ee.minX,ne[ae]),Ee.minY=Math.min(Ee.minY,ne[ae+1]),Ee.maxX=Math.max(Ee.maxX,ne[ae]),Ee.maxY=Math.max(Ee.maxY,ne[ae+1])}function Z(Ee,ne,ae,pe){if(ne.geometry){var Ae=ne.geometry.coordinates,ke=ne.geometry.type,Ke=Math.pow(ae.tolerance/((1<<ae.maxZoom)*ae.extent),2),Be=[],Oe=ne.id;if(ae.promoteId?Oe=ne.properties[ae.promoteId]:ae.generateId&&(Oe=pe||0),ke==="Point")he(Ae,Be);else if(ke==="MultiPoint")for(var He=0;He<Ae.length;He++)he(Ae[He],Be);else if(ke==="LineString")$e(Ae,Be,Ke,!1);else if(ke==="MultiLineString"){if(ae.lineMetrics){for(He=0;He<Ae.length;He++)$e(Ae[He],Be=[],Ke,!1),Ee.push(Ie(Oe,"LineString",Be,ne.properties));return}et(Ae,Be,Ke,!1)}else if(ke==="Polygon")et(Ae,Be,Ke,!0);else{if(ke!=="MultiPolygon"){if(ke==="GeometryCollection"){for(He=0;He<ne.geometry.geometries.length;He++)Z(Ee,{id:Oe,geometry:ne.geometry.geometries[He],properties:ne.properties},ae,pe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(He=0;He<Ae.length;He++){var yt=[];et(Ae[He],yt,Ke,!0),Be.push(yt)}}Ee.push(Ie(Oe,ke,Be,ne.properties))}}function he(Ee,ne){ne.push(Se(Ee[0])),ne.push(mt(Ee[1])),ne.push(0)}function $e(Ee,ne,ae,pe){for(var Ae,ke,Ke=0,Be=0;Be<Ee.length;Be++){var Oe=Se(Ee[Be][0]),He=mt(Ee[Be][1]);ne.push(Oe),ne.push(He),ne.push(0),Be>0&&(Ke+=pe?(Ae*He-Oe*ke)/2:Math.sqrt(Math.pow(Oe-Ae,2)+Math.pow(He-ke,2))),Ae=Oe,ke=He}var yt=ne.length-3;ne[2]=1,Sn(ne,0,yt,ae),ne[yt+2]=1,ne.size=Math.abs(Ke),ne.start=0,ne.end=ne.size}function et(Ee,ne,ae,pe){for(var Ae=0;Ae<Ee.length;Ae++){var ke=[];$e(Ee[Ae],ke,ae,pe),ne.push(ke)}}function Se(Ee){return Ee/360+.5}function mt(Ee){var ne=Math.sin(Ee*Math.PI/180),ae=.5-.25*Math.log((1+ne)/(1-ne))/Math.PI;return ae<0?0:ae>1?1:ae}function gt(Ee,ne,ae,pe,Ae,ke,Ke,Be){if(pe/=ne,ke>=(ae/=ne)&&Ke<pe)return Ee;if(Ke<ae||ke>=pe)return null;for(var Oe=[],He=0;He<Ee.length;He++){var yt=Ee[He],Et=yt.geometry,St=yt.type,yn=Ae===0?yt.minX:yt.minY,In=Ae===0?yt.maxX:yt.maxY;if(yn>=ae&&In<pe)Oe.push(yt);else if(!(In<ae||yn>=pe)){var nn=[];if(St==="Point"||St==="MultiPoint")At(Et,nn,ae,pe,Ae);else if(St==="LineString")Ft(Et,nn,ae,pe,Ae,!1,Be.lineMetrics);else if(St==="MultiLineString")an(Et,nn,ae,pe,Ae,!1);else if(St==="Polygon")an(Et,nn,ae,pe,Ae,!0);else if(St==="MultiPolygon")for(var bn=0;bn<Et.length;bn++){var Rn=[];an(Et[bn],Rn,ae,pe,Ae,!0),Rn.length&&nn.push(Rn)}if(nn.length){if(Be.lineMetrics&&St==="LineString"){for(bn=0;bn<nn.length;bn++)Oe.push(Ie(yt.id,St,nn[bn],yt.tags));continue}St!=="LineString"&&St!=="MultiLineString"||(nn.length===1?(St="LineString",nn=nn[0]):St="MultiLineString"),St!=="Point"&&St!=="MultiPoint"||(St=nn.length===3?"Point":"MultiPoint"),Oe.push(Ie(yt.id,St,nn,yt.tags))}}}return Oe.length?Oe:null}function At(Ee,ne,ae,pe,Ae){for(var ke=0;ke<Ee.length;ke+=3){var Ke=Ee[ke+Ae];Ke>=ae&&Ke<=pe&&(ne.push(Ee[ke]),ne.push(Ee[ke+1]),ne.push(Ee[ke+2]))}}function Ft(Ee,ne,ae,pe,Ae,ke,Ke){for(var Be,Oe,He=Kt(Ee),yt=Ae===0?jn:tt,Et=Ee.start,St=0;St<Ee.length-3;St+=3){var yn=Ee[St],In=Ee[St+1],nn=Ee[St+2],bn=Ee[St+3],Rn=Ee[St+4],Wt=Ae===0?yn:In,We=Ae===0?bn:Rn,kt=!1;Ke&&(Be=Math.sqrt(Math.pow(yn-bn,2)+Math.pow(In-Rn,2))),Wt<ae?We>ae&&(Oe=yt(He,yn,In,bn,Rn,ae),Ke&&(He.start=Et+Be*Oe)):Wt>pe?We<pe&&(Oe=yt(He,yn,In,bn,Rn,pe),Ke&&(He.start=Et+Be*Oe)):Pn(He,yn,In,nn),We<ae&&Wt>=ae&&(Oe=yt(He,yn,In,bn,Rn,ae),kt=!0),We>pe&&Wt<=pe&&(Oe=yt(He,yn,In,bn,Rn,pe),kt=!0),!ke&&kt&&(Ke&&(He.end=Et+Be*Oe),ne.push(He),He=Kt(Ee)),Ke&&(Et+=Be)}var ft=Ee.length-3;yn=Ee[ft],In=Ee[ft+1],nn=Ee[ft+2],(Wt=Ae===0?yn:In)>=ae&&Wt<=pe&&Pn(He,yn,In,nn),ft=He.length-3,ke&&ft>=3&&(He[ft]!==He[0]||He[ft+1]!==He[1])&&Pn(He,He[0],He[1],He[2]),He.length&&ne.push(He)}function Kt(Ee){var ne=[];return ne.size=Ee.size,ne.start=Ee.start,ne.end=Ee.end,ne}function an(Ee,ne,ae,pe,Ae,ke){for(var Ke=0;Ke<Ee.length;Ke++)Ft(Ee[Ke],ne,ae,pe,Ae,ke,!1)}function Pn(Ee,ne,ae,pe){Ee.push(ne),Ee.push(ae),Ee.push(pe)}function jn(Ee,ne,ae,pe,Ae,ke){var Ke=(ke-ne)/(pe-ne);return Ee.push(ke),Ee.push(ae+(Ae-ae)*Ke),Ee.push(1),Ke}function tt(Ee,ne,ae,pe,Ae,ke){var Ke=(ke-ae)/(Ae-ae);return Ee.push(ne+(pe-ne)*Ke),Ee.push(ke),Ee.push(1),Ke}function nt(Ee,ne){for(var ae=[],pe=0;pe<Ee.length;pe++){var Ae,ke=Ee[pe],Ke=ke.type;if(Ke==="Point"||Ke==="MultiPoint"||Ke==="LineString")Ae=ut(ke.geometry,ne);else if(Ke==="MultiLineString"||Ke==="Polygon"){Ae=[];for(var Be=0;Be<ke.geometry.length;Be++)Ae.push(ut(ke.geometry[Be],ne))}else if(Ke==="MultiPolygon")for(Ae=[],Be=0;Be<ke.geometry.length;Be++){for(var Oe=[],He=0;He<ke.geometry[Be].length;He++)Oe.push(ut(ke.geometry[Be][He],ne));Ae.push(Oe)}ae.push(Ie(ke.id,Ke,Ae,ke.tags))}return ae}function ut(Ee,ne){var ae=[];ae.size=Ee.size,Ee.start!==void 0&&(ae.start=Ee.start,ae.end=Ee.end);for(var pe=0;pe<Ee.length;pe+=3)ae.push(Ee[pe]+ne,Ee[pe+1],Ee[pe+2]);return ae}function qe(Ee,ne){if(Ee.transformed)return Ee;var ae,pe,Ae,ke=1<<Ee.z,Ke=Ee.x,Be=Ee.y;for(ae=0;ae<Ee.features.length;ae++){var Oe=Ee.features[ae],He=Oe.geometry,yt=Oe.type;if(Oe.geometry=[],yt===1)for(pe=0;pe<He.length;pe+=2)Oe.geometry.push(Qt(He[pe],He[pe+1],ne,ke,Ke,Be));else for(pe=0;pe<He.length;pe++){var Et=[];for(Ae=0;Ae<He[pe].length;Ae+=2)Et.push(Qt(He[pe][Ae],He[pe][Ae+1],ne,ke,Ke,Be));Oe.geometry.push(Et)}}return Ee.transformed=!0,Ee}function Qt(Ee,ne,ae,pe,Ae,ke){return[Math.round(ae*(Ee*pe-Ae)),Math.round(ae*(ne*pe-ke))]}function Zt(Ee,ne,ae,pe,Ae){for(var ke=ne===Ae.maxZoom?0:Ae.tolerance/((1<<ne)*Ae.extent),Ke={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ae,y:pe,z:ne,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Be=0;Be<Ee.length;Be++){Ke.numFeatures++,Cn(Ke,Ee[Be],ke,Ae);var Oe=Ee[Be].minX,He=Ee[Be].minY,yt=Ee[Be].maxX,Et=Ee[Be].maxY;Oe<Ke.minX&&(Ke.minX=Oe),He<Ke.minY&&(Ke.minY=He),yt>Ke.maxX&&(Ke.maxX=yt),Et>Ke.maxY&&(Ke.maxY=Et)}return Ke}function Cn(Ee,ne,ae,pe){var Ae=ne.geometry,ke=ne.type,Ke=[];if(ke==="Point"||ke==="MultiPoint")for(var Be=0;Be<Ae.length;Be+=3)Ke.push(Ae[Be]),Ke.push(Ae[Be+1]),Ee.numPoints++,Ee.numSimplified++;else if(ke==="LineString")xn(Ke,Ae,Ee,ae,!1,!1);else if(ke==="MultiLineString"||ke==="Polygon")for(Be=0;Be<Ae.length;Be++)xn(Ke,Ae[Be],Ee,ae,ke==="Polygon",Be===0);else if(ke==="MultiPolygon")for(var Oe=0;Oe<Ae.length;Oe++){var He=Ae[Oe];for(Be=0;Be<He.length;Be++)xn(Ke,He[Be],Ee,ae,!0,Be===0)}if(Ke.length){var yt=ne.tags||null;if(ke==="LineString"&&pe.lineMetrics){for(var Et in yt={},ne.tags)yt[Et]=ne.tags[Et];yt.mapbox_clip_start=Ae.start/Ae.size,yt.mapbox_clip_end=Ae.end/Ae.size}var St={geometry:Ke,type:ke==="Polygon"||ke==="MultiPolygon"?3:ke==="LineString"||ke==="MultiLineString"?2:1,tags:yt};ne.id!==null&&(St.id=ne.id),Ee.features.push(St)}}function xn(Ee,ne,ae,pe,Ae,ke){var Ke=pe*pe;if(pe>0&&ne.size<(Ae?Ke:pe))ae.numPoints+=ne.length/3;else{for(var Be=[],Oe=0;Oe<ne.length;Oe+=3)(pe===0||ne[Oe+2]>Ke)&&(ae.numSimplified++,Be.push(ne[Oe]),Be.push(ne[Oe+1])),ae.numPoints++;Ae&&function(He,yt){for(var Et=0,St=0,yn=He.length,In=yn-2;St<yn;In=St,St+=2)Et+=(He[St]-He[In])*(He[St+1]+He[In+1]);if(Et>0===yt)for(St=0,yn=He.length;St<yn/2;St+=2){var nn=He[St],bn=He[St+1];He[St]=He[yn-2-St],He[St+1]=He[yn-1-St],He[yn-2-St]=nn,He[yn-1-St]=bn}}(Be,ke),Ee.push(Be)}}function Mt(Ee,ne){var ae=(ne=this.options=function(Ae,ke){for(var Ke in ke)Ae[Ke]=ke[Ke];return Ae}(Object.create(this.options),ne)).debug;if(ae&&console.time("preprocess data"),ne.maxZoom<0||ne.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ne.promoteId&&ne.generateId)throw new Error("promoteId and generateId cannot be used together.");var pe=function(Ae,ke){var Ke=[];if(Ae.type==="FeatureCollection")for(var Be=0;Be<Ae.features.length;Be++)Z(Ke,Ae.features[Be],ke,Be);else Z(Ke,Ae.type==="Feature"?Ae:{geometry:Ae},ke);return Ke}(Ee,ne);this.tiles={},this.tileCoords=[],ae&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ne.indexMaxZoom,ne.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),pe=function(Ae,ke){var Ke=ke.buffer/ke.extent,Be=Ae,Oe=gt(Ae,1,-1-Ke,Ke,0,-1,2,ke),He=gt(Ae,1,1-Ke,2+Ke,0,-1,2,ke);return(Oe||He)&&(Be=gt(Ae,1,-Ke,1+Ke,0,-1,2,ke)||[],Oe&&(Be=nt(Oe,1).concat(Be)),He&&(Be=Be.concat(nt(He,-1)))),Be}(pe,ne),pe.length&&this.splitTile(pe,0,0,0),ae&&(pe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ht(Ee,ne,ae){return 32*((1<<Ee)*ae+ne)+Ee}function _t(Ee,ne){return ne?Ee.properties[ne]:Ee.id}function cn(Ee,ne){if(Ee==null)return!0;if(Ee.type==="Feature")return _t(Ee,ne)!=null;if(Ee.type==="FeatureCollection"){const ae=new Set;for(const pe of Ee.features){const Ae=_t(pe,ne);if(Ae==null||ae.has(Ae))return!1;ae.add(Ae)}return!0}return!1}function zn(Ee,ne){const ae=new Map;if(Ee!=null)if(Ee.type==="Feature")ae.set(_t(Ee,ne),Ee);else for(const pe of Ee.features)ae.set(_t(pe,ne),pe);return ae}Mt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Mt.prototype.splitTile=function(Ee,ne,ae,pe,Ae,ke,Ke){for(var Be=[Ee,ne,ae,pe],Oe=this.options,He=Oe.debug;Be.length;){pe=Be.pop(),ae=Be.pop(),ne=Be.pop(),Ee=Be.pop();var yt=1<<ne,Et=Ht(ne,ae,pe),St=this.tiles[Et];if(!St&&(He>1&&console.time("creation"),St=this.tiles[Et]=Zt(Ee,ne,ae,pe,Oe),this.tileCoords.push({z:ne,x:ae,y:pe}),He)){He>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ne,ae,pe,St.numFeatures,St.numPoints,St.numSimplified),console.timeEnd("creation"));var yn="z"+ne;this.stats[yn]=(this.stats[yn]||0)+1,this.total++}if(St.source=Ee,Ae){if(ne===Oe.maxZoom||ne===Ae)continue;var In=1<<Ae-ne;if(ae!==Math.floor(ke/In)||pe!==Math.floor(Ke/In))continue}else if(ne===Oe.indexMaxZoom||St.numPoints<=Oe.indexMaxPoints)continue;if(St.source=null,Ee.length!==0){He>1&&console.time("clipping");var nn,bn,Rn,Wt,We,kt,ft=.5*Oe.buffer/Oe.extent,Ne=.5-ft,bt=.5+ft,zt=1+ft;nn=bn=Rn=Wt=null,We=gt(Ee,yt,ae-ft,ae+bt,0,St.minX,St.maxX,Oe),kt=gt(Ee,yt,ae+Ne,ae+zt,0,St.minX,St.maxX,Oe),Ee=null,We&&(nn=gt(We,yt,pe-ft,pe+bt,1,St.minY,St.maxY,Oe),bn=gt(We,yt,pe+Ne,pe+zt,1,St.minY,St.maxY,Oe),We=null),kt&&(Rn=gt(kt,yt,pe-ft,pe+bt,1,St.minY,St.maxY,Oe),Wt=gt(kt,yt,pe+Ne,pe+zt,1,St.minY,St.maxY,Oe),kt=null),He>1&&console.timeEnd("clipping"),Be.push(nn||[],ne+1,2*ae,2*pe),Be.push(bn||[],ne+1,2*ae,2*pe+1),Be.push(Rn||[],ne+1,2*ae+1,2*pe),Be.push(Wt||[],ne+1,2*ae+1,2*pe+1)}}},Mt.prototype.getTile=function(Ee,ne,ae){var pe=this.options,Ae=pe.extent,ke=pe.debug;if(Ee<0||Ee>24)return null;var Ke=1<<Ee,Be=Ht(Ee,ne=(ne%Ke+Ke)%Ke,ae);if(this.tiles[Be])return qe(this.tiles[Be],Ae);ke>1&&console.log("drilling down to z%d-%d-%d",Ee,ne,ae);for(var Oe,He=Ee,yt=ne,Et=ae;!Oe&&He>0;)He--,yt=Math.floor(yt/2),Et=Math.floor(Et/2),Oe=this.tiles[Ht(He,yt,Et)];return Oe&&Oe.source?(ke>1&&console.log("found parent tile z%d-%d-%d",He,yt,Et),ke>1&&console.time("drilling down"),this.splitTile(Oe.source,He,yt,Et,Ee,ne,ae),ke>1&&console.timeEnd("drilling down"),this.tiles[Be]?qe(this.tiles[Be],Ae):null):null};class Vt extends I{constructor(ne,ae,pe,Ae){super(ne,ae,pe),this._dataUpdateable=new Map,this.loadGeoJSON=(ke,Ke)=>{const{promoteId:Be}=ke;if(ke.request)return l.f(ke.request,(Oe,He,yt,Et)=>{this._dataUpdateable=cn(He,Be)?zn(He,Be):void 0,Ke(Oe,He,yt,Et)});if(typeof ke.data=="string")try{const Oe=JSON.parse(ke.data);this._dataUpdateable=cn(Oe,Be)?zn(Oe,Be):void 0,Ke(null,Oe)}catch{Ke(new Error(`Input data given to '${ke.source}' is not a valid GeoJSON object.`))}else ke.dataDiff?this._dataUpdateable?(function(Oe,He,yt){var Et,St,yn,In;if(He.removeAll&&Oe.clear(),He.remove)for(const nn of He.remove)Oe.delete(nn);if(He.add)for(const nn of He.add){const bn=_t(nn,yt);bn!=null&&Oe.set(bn,nn)}if(He.update)for(const nn of He.update){let bn=Oe.get(nn.id);if(bn==null)continue;const Rn=!nn.removeAllProperties&&(((Et=nn.removeProperties)===null||Et===void 0?void 0:Et.length)>0||((St=nn.addOrUpdateProperties)===null||St===void 0?void 0:St.length)>0);if((nn.newGeometry||nn.removeAllProperties||Rn)&&(bn=Object.assign({},bn),Oe.set(nn.id,bn),Rn&&(bn.properties=Object.assign({},bn.properties))),nn.newGeometry&&(bn.geometry=nn.newGeometry),nn.removeAllProperties)bn.properties={};else if(((yn=nn.removeProperties)===null||yn===void 0?void 0:yn.length)>0)for(const Wt of nn.removeProperties)Object.prototype.hasOwnProperty.call(bn.properties,Wt)&&delete bn.properties[Wt];if(((In=nn.addOrUpdateProperties)===null||In===void 0?void 0:In.length)>0)for(const{key:Wt,value:We}of nn.addOrUpdateProperties)bn.properties[Wt]=We}}(this._dataUpdateable,ke.dataDiff,Be),Ke(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):Ke(new Error(`Cannot update existing geojson data in ${ke.source}`)):Ke(new Error(`Input data given to '${ke.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,Ae&&(this.loadGeoJSON=Ae)}loadGeoJSONTile(ne,ae){const pe=ne.tileID.canonical;if(!this._geoJSONIndex)return ae(null,null);const Ae=this._geoJSONIndex.getTile(pe.z,pe.x,pe.y);if(!Ae)return ae(null,null);const ke=new class{constructor(Be){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.N,this.length=Be.length,this._features=Be}feature(Be){return new class{constructor(Oe){this._feature=Oe,this.extent=l.N,this.type=Oe.type,this.properties=Oe.tags,"id"in Oe&&!isNaN(Oe.id)&&(this.id=parseInt(Oe.id,10))}loadGeometry(){if(this._feature.type===1){const Oe=[];for(const He of this._feature.geometry)Oe.push([new l.P(He[0],He[1])]);return Oe}{const Oe=[];for(const He of this._feature.geometry){const yt=[];for(const Et of He)yt.push(new l.P(Et[0],Et[1]));Oe.push(yt)}return Oe}}toGeoJSON(Oe,He,yt){return U.call(this,Oe,He,yt)}}(this._features[Be])}}(Ae.features);let Ke=Qe(ke);Ke.byteOffset===0&&Ke.byteLength===Ke.buffer.byteLength||(Ke=new Uint8Array(Ke)),ae(null,{vectorTile:ke,rawData:Ke.buffer})}loadData(ne,ae){var pe;(pe=this._pendingRequest)===null||pe===void 0||pe.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Ae=!!(ne&&ne.request&&ne.request.collectResourceTiming)&&new l.bu(ne.request);this._pendingCallback=ae,this._pendingRequest=this.loadGeoJSON(ne,(ke,Ke)=>{if(delete this._pendingCallback,delete this._pendingRequest,ke||!Ke)return ae(ke);if(typeof Ke!="object")return ae(new Error(`Input data given to '${ne.source}' is not a valid GeoJSON object.`));{z(Ke,!0);try{if(ne.filter){const Oe=l.bC(ne.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Oe.result==="error")throw new Error(Oe.value.map(yt=>`${yt.key}: ${yt.message}`).join(", "));Ke={type:"FeatureCollection",features:Ke.features.filter(yt=>Oe.value.evaluate({zoom:0},yt))}}this._geoJSONIndex=ne.cluster?new wt(function({superclusterOptions:Oe,clusterProperties:He}){if(!He||!Oe)return Oe;const yt={},Et={},St={accumulated:null,zoom:0},yn={properties:null},In=Object.keys(He);for(const nn of In){const[bn,Rn]=He[nn],Wt=l.bC(Rn),We=l.bC(typeof bn=="string"?[bn,["accumulated"],["get",nn]]:bn);yt[nn]=Wt.value,Et[nn]=We.value}return Oe.map=nn=>{yn.properties=nn;const bn={};for(const Rn of In)bn[Rn]=yt[Rn].evaluate(St,yn);return bn},Oe.reduce=(nn,bn)=>{yn.properties=bn;for(const Rn of In)St.accumulated=nn[Rn],nn[Rn]=Et[Rn].evaluate(St,yn)},Oe}(ne)).load(Ke.features):function(Oe,He){return new Mt(Oe,He)}(Ke,ne.geojsonVtOptions)}catch(Oe){return ae(Oe)}this.loaded={};const Be={};if(Ae){const Oe=Ae.finish();Oe&&(Be.resourceTiming={},Be.resourceTiming[ne.source]=JSON.parse(JSON.stringify(Oe)))}ae(null,Be)}})}reloadTile(ne,ae){const pe=this.loaded;return pe&&pe[ne.uid]?super.reloadTile(ne,ae):this.loadTile(ne,ae)}removeSource(ne,ae){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ae()}getClusterExpansionZoom(ne,ae){try{ae(null,this._geoJSONIndex.getClusterExpansionZoom(ne.clusterId))}catch(pe){ae(pe)}}getClusterChildren(ne,ae){try{ae(null,this._geoJSONIndex.getChildren(ne.clusterId))}catch(pe){ae(pe)}}getClusterLeaves(ne,ae){try{ae(null,this._geoJSONIndex.getLeaves(ne.clusterId,ne.limit,ne.offset))}catch(pe){ae(pe)}}}class li{constructor(ne){this.self=ne,this.actor=new l.C(ne,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:I,geojson:Vt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ae,pe)=>{if(this.workerSourceTypes[ae])throw new Error(`Worker source with name "${ae}" already registered.`);this.workerSourceTypes[ae]=pe},this.self.registerRTLTextPlugin=ae=>{if(l.bD.isParsed())throw new Error("RTL text plugin already registered.");l.bD.applyArabicShaping=ae.applyArabicShaping,l.bD.processBidirectionalText=ae.processBidirectionalText,l.bD.processStyledBidirectionalText=ae.processStyledBidirectionalText}}setReferrer(ne,ae){this.referrer=ae}setImages(ne,ae,pe){this.availableImages[ne]=ae;for(const Ae in this.workerSources[ne]){const ke=this.workerSources[ne][Ae];for(const Ke in ke)ke[Ke].availableImages=ae}pe()}setLayers(ne,ae,pe){this.getLayerIndex(ne).replace(ae),pe()}updateLayers(ne,ae,pe){this.getLayerIndex(ne).update(ae.layers,ae.removedIds),pe()}loadTile(ne,ae,pe){this.getWorkerSource(ne,ae.type,ae.source).loadTile(ae,pe)}loadDEMTile(ne,ae,pe){this.getDEMWorkerSource(ne,ae.source).loadTile(ae,pe)}reloadTile(ne,ae,pe){this.getWorkerSource(ne,ae.type,ae.source).reloadTile(ae,pe)}abortTile(ne,ae,pe){this.getWorkerSource(ne,ae.type,ae.source).abortTile(ae,pe)}removeTile(ne,ae,pe){this.getWorkerSource(ne,ae.type,ae.source).removeTile(ae,pe)}removeDEMTile(ne,ae){this.getDEMWorkerSource(ne,ae.source).removeTile(ae)}removeSource(ne,ae,pe){if(!this.workerSources[ne]||!this.workerSources[ne][ae.type]||!this.workerSources[ne][ae.type][ae.source])return;const Ae=this.workerSources[ne][ae.type][ae.source];delete this.workerSources[ne][ae.type][ae.source],Ae.removeSource!==void 0?Ae.removeSource(ae,pe):pe()}loadWorkerSource(ne,ae,pe){try{this.self.importScripts(ae.url),pe()}catch(Ae){pe(Ae.toString())}}syncRTLPluginState(ne,ae,pe){try{l.bD.setState(ae);const Ae=l.bD.getPluginURL();if(l.bD.isLoaded()&&!l.bD.isParsed()&&Ae!=null){this.self.importScripts(Ae);const ke=l.bD.isParsed();pe(ke?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ae}`),ke)}}catch(Ae){pe(Ae.toString())}}getAvailableImages(ne){let ae=this.availableImages[ne];return ae||(ae=[]),ae}getLayerIndex(ne){let ae=this.layerIndexes[ne];return ae||(ae=this.layerIndexes[ne]=new m),ae}getWorkerSource(ne,ae,pe){return this.workerSources[ne]||(this.workerSources[ne]={}),this.workerSources[ne][ae]||(this.workerSources[ne][ae]={}),this.workerSources[ne][ae][pe]||(this.workerSources[ne][ae][pe]=new this.workerSourceTypes[ae]({send:(Ae,ke,Ke)=>{this.actor.send(Ae,ke,Ke,ne)}},this.getLayerIndex(ne),this.getAvailableImages(ne))),this.workerSources[ne][ae][pe]}getDEMWorkerSource(ne,ae){return this.demWorkerSources[ne]||(this.demWorkerSources[ne]={}),this.demWorkerSources[ne][ae]||(this.demWorkerSources[ne][ae]=new A),this.demWorkerSources[ne][ae]}}return l.i()&&(self.worker=new li(self)),li}),c(["./shared"],function(l){var m="3.6.2";class g{static testProp(o){if(!g.docStyle)return o[0];for(let f=0;f<o.length;f++)if(o[f]in g.docStyle)return o[f];return o[0]}static create(o,f,v){const b=window.document.createElement(o);return f!==void 0&&(b.className=f),v&&v.appendChild(b),b}static createNS(o,f){return window.document.createElementNS(o,f)}static disableDrag(){g.docStyle&&g.selectProp&&(g.userSelect=g.docStyle[g.selectProp],g.docStyle[g.selectProp]="none")}static enableDrag(){g.docStyle&&g.selectProp&&(g.docStyle[g.selectProp]=g.userSelect)}static setTransform(o,f){o.style[g.transformProp]=f}static addEventListener(o,f,v,b={}){o.addEventListener(f,v,"passive"in b?b:b.capture)}static removeEventListener(o,f,v,b={}){o.removeEventListener(f,v,"passive"in b?b:b.capture)}static suppressClickInternal(o){o.preventDefault(),o.stopPropagation(),window.removeEventListener("click",g.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",g.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",g.suppressClickInternal,!0)},0)}static mousePos(o,f){const v=o.getBoundingClientRect();return new l.P(f.clientX-v.left-o.clientLeft,f.clientY-v.top-o.clientTop)}static touchPos(o,f){const v=o.getBoundingClientRect(),b=[];for(let T=0;T<f.length;T++)b.push(new l.P(f[T].clientX-v.left-o.clientLeft,f[T].clientY-v.top-o.clientTop));return b}static mouseButton(o){return o.button}static remove(o){o.parentNode&&o.parentNode.removeChild(o)}}g.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,g.selectProp=g.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),g.transformProp=g.testProp(["transform","WebkitTransform"]);const y={supported:!1,testSupport:function(w){!I&&C&&(A?O(w):x=w)}};let x,C,I=!1,A=!1;function O(w){const o=w.createTexture();w.bindTexture(w.TEXTURE_2D,o);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,C),w.isContextLost())return;y.supported=!0}catch{}w.deleteTexture(o),I=!0}var F,z;typeof document<"u"&&(C=document.createElement("img"),C.onload=function(){x&&O(x),x=null,A=!0},C.onerror=function(){I=!0,x=null},C.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(w){let o,f,v,b;w.resetRequestQueue=()=>{o=[],f=0,v=0,b={}},w.addThrottleControl=N=>{const G=v++;return b[G]=N,G},w.removeThrottleControl=N=>{delete b[N],D()},w.getImage=(N,G,X=!0)=>{y.supported&&(N.headers||(N.headers={}),N.headers.accept="image/webp,*/*");const oe={requestParameters:N,supportImageRefresh:X,callback:G,cancelled:!1,completed:!1,cancel:()=>{oe.completed||oe.cancelled||(oe.cancelled=!0,oe.innerRequest&&(oe.innerRequest.cancel(),f--),D())}};return o.push(oe),D(),oe};const T=N=>{const{requestParameters:G,supportImageRefresh:X,callback:oe}=N;return l.e(G,{type:"image"}),(X!==!1||l.i()||l.g(G.url)||G.headers&&!Object.keys(G.headers).reduce((we,xe)=>we&&xe==="accept",!0)?l.m:R)(G,(we,xe,Me,ge)=>{P(N,oe,we,xe,Me,ge)})},P=(N,G,X,oe,we,xe)=>{X?G(X):oe instanceof HTMLImageElement||l.a(oe)?G(null,oe):oe&&((Me,ge)=>{typeof createImageBitmap=="function"?l.b(Me,ge):l.d(Me,ge)})(oe,(Me,ge)=>{Me!=null?G(Me):ge!=null&&G(null,ge,{cacheControl:we,expires:xe})}),N.cancelled||(N.completed=!0,f--,D())},D=()=>{const N=(()=>{const G=Object.keys(b);let X=!1;if(G.length>0){for(const oe of G)if(X=b[oe](),X)break}return X})()?l.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let G=f;G<N&&o.length>0;G++){const X=o.shift();if(X.cancelled){G--;continue}const oe=T(X);f++,X.innerRequest=oe}},R=(N,G)=>{const X=new Image,oe=N.url;let we=!1;const xe=N.credentials;return xe&&xe==="include"?X.crossOrigin="use-credentials":(xe&&xe==="same-origin"||!l.s(oe))&&(X.crossOrigin="anonymous"),X.fetchPriority="high",X.onload=()=>{G(null,X),X.onerror=X.onload=null},X.onerror=()=>{we||G(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),X.onerror=X.onload=null},X.src=oe,{cancel:()=>{we=!0,X.src=""}}}}(F||(F={})),F.resetRequestQueue(),function(w){w.Glyphs="Glyphs",w.Image="Image",w.Source="Source",w.SpriteImage="SpriteImage",w.SpriteJSON="SpriteJSON",w.Style="Style",w.Tile="Tile",w.Unknown="Unknown"}(z||(z={}));class U{constructor(o){this._transformRequestFn=o}transformRequest(o,f){return this._transformRequestFn&&this._transformRequestFn(o,f)||{url:o}}normalizeSpriteURL(o,f,v){const b=function(T){const P=T.match(H);if(!P)throw new Error(`Unable to parse URL "${T}"`);return{protocol:P[1],authority:P[2],path:P[3]||"/",params:P[4]?P[4].split("&"):[]}}(o);return b.path+=`${f}${v}`,function(T){const P=T.params.length?`?${T.params.join("&")}`:"";return`${T.protocol}://${T.authority}${T.path}${P}`}(b)}setTransformRequest(o){this._transformRequestFn=o}}const H=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function q(w){var o=new l.A(3);return o[0]=w[0],o[1]=w[1],o[2]=w[2],o}var ee,Q=function(w,o,f){return w[0]=o[0]-f[0],w[1]=o[1]-f[1],w[2]=o[2]-f[2],w};ee=new l.A(3),l.A!=Float32Array&&(ee[0]=0,ee[1]=0,ee[2]=0);var ve=function(w){var o=w[0],f=w[1];return o*o+f*f};function se(w){const o=[];if(typeof w=="string")o.push({id:"default",url:w});else if(w&&w.length>0){const f=[];for(const{id:v,url:b}of w){const T=`${v}${b}`;f.indexOf(T)===-1&&(f.push(T),o.push({id:v,url:b}))}}return o}function K(w,o,f,v,b){if(v)return void w(v);if(b!==Object.values(o).length||b!==Object.values(f).length)return;const T={};for(const P in o){T[P]={};const D=l.h.getImageCanvasContext(f[P]),R=o[P];for(const N in R){const{width:G,height:X,x:oe,y:we,sdf:xe,pixelRatio:Me,stretchX:ge,stretchY:Ze,content:ct}=R[N];T[P][N]={data:null,pixelRatio:Me,sdf:xe,stretchX:ge,stretchY:Ze,content:ct,spriteData:{width:G,height:X,x:oe,y:we,context:D}}}}w(null,T)}(function(){var w=new l.A(2);l.A!=Float32Array&&(w[0]=0,w[1]=0)})();class J{constructor(o,f,v,b){this.context=o,this.format=v,this.texture=o.gl.createTexture(),this.update(f,b)}update(o,f,v){const{width:b,height:T}=o,P=!(this.size&&this.size[0]===b&&this.size[1]===T||v),{context:D}=this,{gl:R}=D;if(this.useMipmap=!!(f&&f.useMipmap),R.bindTexture(R.TEXTURE_2D,this.texture),D.pixelStoreUnpackFlipY.set(!1),D.pixelStoreUnpack.set(1),D.pixelStoreUnpackPremultiplyAlpha.set(this.format===R.RGBA&&(!f||f.premultiply!==!1)),P)this.size=[b,T],o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||l.a(o)?R.texImage2D(R.TEXTURE_2D,0,this.format,this.format,R.UNSIGNED_BYTE,o):R.texImage2D(R.TEXTURE_2D,0,this.format,b,T,0,this.format,R.UNSIGNED_BYTE,o.data);else{const{x:N,y:G}=v||{x:0,y:0};o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||l.a(o)?R.texSubImage2D(R.TEXTURE_2D,0,N,G,R.RGBA,R.UNSIGNED_BYTE,o):R.texSubImage2D(R.TEXTURE_2D,0,N,G,b,T,R.RGBA,R.UNSIGNED_BYTE,o.data)}this.useMipmap&&this.isSizePowerOfTwo()&&R.generateMipmap(R.TEXTURE_2D)}bind(o,f,v){const{context:b}=this,{gl:T}=b;T.bindTexture(T.TEXTURE_2D,this.texture),v!==T.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(v=T.LINEAR),o!==this.filter&&(T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,o),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,v||o),this.filter=o),f!==this.wrap&&(T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,f),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,f),this.wrap=f)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}function W(w){const{userImage:o}=w;return!!(o&&o.render&&o.render())&&(w.data.replace(new Uint8Array(o.data.buffer)),!0)}class te extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(o){if(this.loaded!==o&&(this.loaded=o,o)){for(const{ids:f,callback:v}of this.requestors)this._notify(f,v);this.requestors=[]}}getImage(o){const f=this.images[o];if(f&&!f.data&&f.spriteData){const v=f.spriteData;f.data=new l.R({width:v.width,height:v.height},v.context.getImageData(v.x,v.y,v.width,v.height).data),f.spriteData=null}return f}addImage(o,f){if(this.images[o])throw new Error(`Image id ${o} already exist, use updateImage instead`);this._validate(o,f)&&(this.images[o]=f)}_validate(o,f){let v=!0;const b=f.data||f.spriteData;return this._validateStretch(f.stretchX,b&&b.width)||(this.fire(new l.j(new Error(`Image "${o}" has invalid "stretchX" value`))),v=!1),this._validateStretch(f.stretchY,b&&b.height)||(this.fire(new l.j(new Error(`Image "${o}" has invalid "stretchY" value`))),v=!1),this._validateContent(f.content,f)||(this.fire(new l.j(new Error(`Image "${o}" has invalid "content" value`))),v=!1),v}_validateStretch(o,f){if(!o)return!0;let v=0;for(const b of o){if(b[0]<v||b[1]<b[0]||f<b[1])return!1;v=b[1]}return!0}_validateContent(o,f){if(!o)return!0;if(o.length!==4)return!1;const v=f.spriteData,b=v&&v.width||f.data.width,T=v&&v.height||f.data.height;return!(o[0]<0||b<o[0]||o[1]<0||T<o[1]||o[2]<0||b<o[2]||o[3]<0||T<o[3]||o[2]<o[0]||o[3]<o[1])}updateImage(o,f,v=!0){const b=this.getImage(o);if(v&&(b.data.width!==f.data.width||b.data.height!==f.data.height))throw new Error(`size mismatch between old image (${b.data.width}x${b.data.height}) and new image (${f.data.width}x${f.data.height}).`);f.version=b.version+1,this.images[o]=f,this.updatedImages[o]=!0}removeImage(o){const f=this.images[o];delete this.images[o],delete this.patterns[o],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(o,f){let v=!0;if(!this.isLoaded())for(const b of o)this.images[b]||(v=!1);this.isLoaded()||v?this._notify(o,f):this.requestors.push({ids:o,callback:f})}_notify(o,f){const v={};for(const b of o){let T=this.getImage(b);T||(this.fire(new l.k("styleimagemissing",{id:b})),T=this.getImage(b)),T?v[b]={data:T.data.clone(),pixelRatio:T.pixelRatio,sdf:T.sdf,version:T.version,stretchX:T.stretchX,stretchY:T.stretchY,content:T.content,hasRenderCallback:!!(T.userImage&&T.userImage.render)}:l.w(`Image "${b}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}f(null,v)}getPixelSize(){const{width:o,height:f}=this.atlasImage;return{width:o,height:f}}getPattern(o){const f=this.patterns[o],v=this.getImage(o);if(!v)return null;if(f&&f.position.version===v.version)return f.position;if(f)f.position.version=v.version;else{const b={w:v.data.width+2,h:v.data.height+2,x:0,y:0},T=new l.I(b,v);this.patterns[o]={bin:b,position:T}}return this._updatePatternAtlas(),this.patterns[o].position}bind(o){const f=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new J(o,this.atlasImage,f.RGBA),this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const o=[];for(const T in this.patterns)o.push(this.patterns[T].bin);const{w:f,h:v}=l.p(o),b=this.atlasImage;b.resize({width:f||1,height:v||1});for(const T in this.patterns){const{bin:P}=this.patterns[T],D=P.x+1,R=P.y+1,N=this.getImage(T).data,G=N.width,X=N.height;l.R.copy(N,b,{x:0,y:0},{x:D,y:R},{width:G,height:X}),l.R.copy(N,b,{x:0,y:X-1},{x:D,y:R-1},{width:G,height:1}),l.R.copy(N,b,{x:0,y:0},{x:D,y:R+X},{width:G,height:1}),l.R.copy(N,b,{x:G-1,y:0},{x:D-1,y:R},{width:1,height:X}),l.R.copy(N,b,{x:0,y:0},{x:D+G,y:R},{width:1,height:X})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(o){for(const f of o){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const v=this.getImage(f);v||l.w(`Image with ID: "${f}" was not found`),W(v)&&this.updateImage(f,v)}}}const j=1e20;function re(w,o,f,v,b,T,P,D,R){for(let N=o;N<o+v;N++)Te(w,f*T+N,T,b,P,D,R);for(let N=f;N<f+b;N++)Te(w,N*T+o,1,v,P,D,R)}function Te(w,o,f,v,b,T,P){T[0]=0,P[0]=-j,P[1]=j,b[0]=w[o];for(let D=1,R=0,N=0;D<v;D++){b[D]=w[o+D*f];const G=D*D;do{const X=T[R];N=(b[D]-b[X]+G-X*X)/(D-X)/2}while(N<=P[R]&&--R>-1);R++,T[R]=D,P[R]=N,P[R+1]=j}for(let D=0,R=0;D<v;D++){for(;P[R+1]<D;)R++;const N=T[R],G=D-N;w[o+D*f]=b[N]+G*G}}class ye{constructor(o,f){this.requestManager=o,this.localIdeographFontFamily=f,this.entries={}}setURL(o){this.url=o}getGlyphs(o,f){const v=[];for(const b in o)for(const T of o[b])v.push({stack:b,id:T});l.o(v,({stack:b,id:T},P)=>{let D=this.entries[b];D||(D=this.entries[b]={glyphs:{},requests:{},ranges:{}});let R=D.glyphs[T];if(R!==void 0)return void P(null,{stack:b,id:T,glyph:R});if(R=this._tinySDF(D,b,T),R)return D.glyphs[T]=R,void P(null,{stack:b,id:T,glyph:R});const N=Math.floor(T/256);if(256*N>65535)return void P(new Error("glyphs > 65535 not supported"));if(D.ranges[N])return void P(null,{stack:b,id:T,glyph:R});if(!this.url)return void P(new Error("glyphsUrl is not set"));let G=D.requests[N];G||(G=D.requests[N]=[],ye.loadGlyphRange(b,N,this.url,this.requestManager,(X,oe)=>{if(oe){for(const we in oe)this._doesCharSupportLocalGlyph(+we)||(D.glyphs[+we]=oe[+we]);D.ranges[N]=!0}for(const we of G)we(X,oe);delete D.requests[N]})),G.push((X,oe)=>{X?P(X):oe&&P(null,{stack:b,id:T,glyph:oe[T]||null})})},(b,T)=>{if(b)f(b);else if(T){const P={};for(const{stack:D,id:R,glyph:N}of T)(P[D]||(P[D]={}))[R]=N&&{id:N.id,bitmap:N.bitmap.clone(),metrics:N.metrics};f(null,P)}})}_doesCharSupportLocalGlyph(o){return!!this.localIdeographFontFamily&&(l.u["CJK Unified Ideographs"](o)||l.u["Hangul Syllables"](o)||l.u.Hiragana(o)||l.u.Katakana(o))}_tinySDF(o,f,v){const b=this.localIdeographFontFamily;if(!b||!this._doesCharSupportLocalGlyph(v))return;let T=o.tinySDF;if(!T){let D="400";/bold/i.test(f)?D="900":/medium/i.test(f)?D="500":/light/i.test(f)&&(D="200"),T=o.tinySDF=new ye.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:b,fontWeight:D})}const P=T.draw(String.fromCharCode(v));return{id:v,bitmap:new l.q({width:P.width||60,height:P.height||60},P.data),metrics:{width:P.glyphWidth/2||24,height:P.glyphHeight/2||24,left:P.glyphLeft/2+.5||0,top:P.glyphTop/2-27.5||-8,advance:P.glyphAdvance/2||24,isDoubleResolution:!0}}}}ye.loadGlyphRange=function(w,o,f,v,b){const T=256*o,P=T+255,D=v.transformRequest(f.replace("{fontstack}",w).replace("{range}",`${T}-${P}`),z.Glyphs);l.l(D,(R,N)=>{if(R)b(R);else if(N){const G={};for(const X of l.n(N))G[X.id]=X;b(null,G)}})},ye.TinySDF=class{constructor({fontSize:w=24,buffer:o=3,radius:f=8,cutoff:v=.25,fontFamily:b="sans-serif",fontWeight:T="normal",fontStyle:P="normal"}={}){this.buffer=o,this.cutoff=v,this.radius=f;const D=this.size=w+4*o,R=this._createCanvas(D),N=this.ctx=R.getContext("2d",{willReadFrequently:!0});N.font=`${P} ${T} ${w}px ${b}`,N.textBaseline="alphabetic",N.textAlign="left",N.fillStyle="black",this.gridOuter=new Float64Array(D*D),this.gridInner=new Float64Array(D*D),this.f=new Float64Array(D),this.z=new Float64Array(D+1),this.v=new Uint16Array(D)}_createCanvas(w){const o=document.createElement("canvas");return o.width=o.height=w,o}draw(w){const{width:o,actualBoundingBoxAscent:f,actualBoundingBoxDescent:v,actualBoundingBoxLeft:b,actualBoundingBoxRight:T}=this.ctx.measureText(w),P=Math.ceil(f),D=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(T-b))),R=Math.min(this.size-this.buffer,P+Math.ceil(v)),N=D+2*this.buffer,G=R+2*this.buffer,X=Math.max(N*G,0),oe=new Uint8ClampedArray(X),we={data:oe,width:N,height:G,glyphWidth:D,glyphHeight:R,glyphTop:P,glyphLeft:0,glyphAdvance:o};if(D===0||R===0)return we;const{ctx:xe,buffer:Me,gridInner:ge,gridOuter:Ze}=this;xe.clearRect(Me,Me,D,R),xe.fillText(w,Me,Me+P);const ct=xe.getImageData(Me,Me,D,R);Ze.fill(j,0,X),ge.fill(0,0,X);for(let Le=0;Le<R;Le++)for(let Ye=0;Ye<D;Ye++){const ht=ct.data[4*(Le*D+Ye)+3]/255;if(ht===0)continue;const pt=(Le+Me)*N+Ye+Me;if(ht===1)Ze[pt]=0,ge[pt]=j;else{const Pt=.5-ht;Ze[pt]=Pt>0?Pt*Pt:0,ge[pt]=Pt<0?Pt*Pt:0}}re(Ze,0,0,N,G,N,this.f,this.v,this.z),re(ge,Me,Me,D,R,N,this.f,this.v,this.z);for(let Le=0;Le<X;Le++){const Ye=Math.sqrt(Ze[Le])-Math.sqrt(ge[Le]);oe[Le]=Math.round(255-255*(Ye/this.radius+this.cutoff))}return we}};class Ve{constructor(){this.specification=l.v.light.position}possiblyEvaluate(o,f){return l.z(o.expression.evaluate(f))}interpolate(o,f,v){return{x:l.B.number(o.x,f.x,v),y:l.B.number(o.y,f.y,v),z:l.B.number(o.z,f.z,v)}}}let Ue;class Qe extends l.E{constructor(o){super(),Ue=Ue||new l.r({anchor:new l.D(l.v.light.anchor),position:new Ve,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T(Ue),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,f={}){if(!this._validate(l.t,o,f))for(const v in o){const b=o[v];v.endsWith("-transition")?this._transitionable.setTransition(v.slice(0,-11),b):this._transitionable.setValue(v,b)}}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,f,v){return(!v||v.validate!==!1)&&l.x(this,o.call(l.y,l.e({value:f,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}}class It{constructor(o,f){this.width=o,this.height=f,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(o,f){const v=o.join(",")+String(f);return this.dashEntry[v]||(this.dashEntry[v]=this.addDash(o,f)),this.dashEntry[v]}getDashRanges(o,f,v){const b=[];let T=o.length%2==1?-o[o.length-1]*v:0,P=o[0]*v,D=!0;b.push({left:T,right:P,isDash:D,zeroLength:o[0]===0});let R=o[0];for(let N=1;N<o.length;N++){D=!D;const G=o[N];T=R*v,R+=G,P=R*v,b.push({left:T,right:P,isDash:D,zeroLength:G===0})}return b}addRoundDash(o,f,v){const b=f/2;for(let T=-v;T<=v;T++){const P=this.width*(this.nextRow+v+T);let D=0,R=o[D];for(let N=0;N<this.width;N++){N/R.right>1&&(R=o[++D]);const G=Math.abs(N-R.left),X=Math.abs(N-R.right),oe=Math.min(G,X);let we;const xe=T/v*(b+1);if(R.isDash){const Me=b-Math.abs(xe);we=Math.sqrt(oe*oe+Me*Me)}else we=b-Math.sqrt(oe*oe+xe*xe);this.data[P+N]=Math.max(0,Math.min(255,we+128))}}}addRegularDash(o){for(let D=o.length-1;D>=0;--D){const R=o[D],N=o[D+1];R.zeroLength?o.splice(D,1):N&&N.isDash===R.isDash&&(N.left=R.left,o.splice(D,1))}const f=o[0],v=o[o.length-1];f.isDash===v.isDash&&(f.left=v.left-this.width,v.right=f.right+this.width);const b=this.width*this.nextRow;let T=0,P=o[T];for(let D=0;D<this.width;D++){D/P.right>1&&(P=o[++T]);const R=Math.abs(D-P.left),N=Math.abs(D-P.right),G=Math.min(R,N);this.data[b+D]=Math.max(0,Math.min(255,(P.isDash?G:-G)+128))}}addDash(o,f){const v=f?7:0,b=2*v+1;if(this.nextRow+b>this.height)return l.w("LineAtlas out of space"),null;let T=0;for(let D=0;D<o.length;D++)T+=o[D];if(T!==0){const D=this.width/T,R=this.getDashRanges(o,this.width,D);f?this.addRoundDash(R,D,v):this.addRegularDash(R)}const P={y:(this.nextRow+v+.5)/this.height,height:2*v/this.height,width:T};return this.nextRow+=b,this.dirty=!0,P}bind(o){const f=o.gl;this.texture?(f.bindTexture(f.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,f.texSubImage2D(f.TEXTURE_2D,0,0,0,this.width,this.height,f.ALPHA,f.UNSIGNED_BYTE,this.data))):(this.texture=f.createTexture(),f.bindTexture(f.TEXTURE_2D,this.texture),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texImage2D(f.TEXTURE_2D,0,f.ALPHA,this.width,this.height,0,f.ALPHA,f.UNSIGNED_BYTE,this.data))}}class vt{constructor(o,f,v){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=v;const b=this.workerPool.acquire(v);for(let T=0;T<b.length;T++){const P=new l.C(b[T],f,v);P.name=`Worker ${T}`,this.actors.push(P)}if(!this.actors.length)throw new Error("No actors found")}broadcast(o,f,v){l.o(this.actors,(b,T)=>{b.send(o,f,T)},v=v||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(o=!0){this.actors.forEach(f=>{f.remove()}),this.actors=[],o&&this.workerPool.release(this.id)}}function it(w,o,f){const v=function(b,T){if(b)return f(b);if(T){const P=l.F(l.e(T,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);T.vector_layers&&(P.vectorLayers=T.vector_layers,P.vectorLayerIds=P.vectorLayers.map(D=>D.id)),f(null,P)}};return w.url?l.f(o.transformRequest(w.url,z.Source),v):l.h.frame(()=>v(null,w))}class Ge{constructor(o,f){o&&(f?this.setSouthWest(o).setNorthEast(f):Array.isArray(o)&&(o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1])))}setNorthEast(o){return this._ne=o instanceof l.L?new l.L(o.lng,o.lat):l.L.convert(o),this}setSouthWest(o){return this._sw=o instanceof l.L?new l.L(o.lng,o.lat):l.L.convert(o),this}extend(o){const f=this._sw,v=this._ne;let b,T;if(o instanceof l.L)b=o,T=o;else{if(!(o instanceof Ge))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(Ge.convert(o)):this.extend(l.L.convert(o)):o&&("lng"in o||"lon"in o)&&"lat"in o?this.extend(l.L.convert(o)):this;if(b=o._sw,T=o._ne,!b||!T)return this}return f||v?(f.lng=Math.min(b.lng,f.lng),f.lat=Math.min(b.lat,f.lat),v.lng=Math.max(T.lng,v.lng),v.lat=Math.max(T.lat,v.lat)):(this._sw=new l.L(b.lng,b.lat),this._ne=new l.L(T.lng,T.lat)),this}getCenter(){return new l.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.L(this.getWest(),this.getNorth())}getSouthEast(){return new l.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:f,lat:v}=l.L.convert(o);let b=this._sw.lng<=f&&f<=this._ne.lng;return this._sw.lng>this._ne.lng&&(b=this._sw.lng>=f&&f>=this._ne.lng),this._sw.lat<=v&&v<=this._ne.lat&&b}static convert(o){return o instanceof Ge?o:o&&new Ge(o)}static fromLngLat(o,f=0){const v=360*f/40075017,b=v/Math.cos(Math.PI/180*o.lat);return new Ge(new l.L(o.lng-b,o.lat-v),new l.L(o.lng+b,o.lat+v))}}class ot{constructor(o,f,v){this.bounds=Ge.convert(this.validateBounds(o)),this.minzoom=f||0,this.maxzoom=v||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const f=Math.pow(2,o.z),v=Math.floor(l.G(this.bounds.getWest())*f),b=Math.floor(l.H(this.bounds.getNorth())*f),T=Math.ceil(l.G(this.bounds.getEast())*f),P=Math.ceil(l.H(this.bounds.getSouth())*f);return o.x>=v&&o.x<T&&o.y>=b&&o.y<P}}class Ct extends l.E{constructor(o,f,v,b){if(super(),this.load=()=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=it(this._options,this.map._requestManager,(T,P)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),T?this.fire(new l.j(T)):P&&(l.e(this,P),P.bounds&&(this.tileBounds=new ot(P.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>l.e({},this._options),this.id=o,this.dispatcher=v,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.F(f,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},f),this._collectResourceTiming=f.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b)}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}setSourceProperty(o){this._tileJSONRequest&&this._tileJSONRequest.cancel(),o(),this.load()}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(o,f){const v=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),b={request:this.map._requestManager.transformRequest(v,z.Tile),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function T(P,D){return delete o.request,o.aborted?f(null):P&&P.status!==404?f(P):(D&&D.resourceTiming&&(o.resourceTiming=D.resourceTiming),this.map._refreshExpiredTiles&&D&&o.setExpiryData(D),o.loadVectorData(D,this.map.painter),f(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}b.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired"?o.state==="loading"?o.reloadCallback=f:o.request=o.actor.send("reloadTile",b,T.bind(this)):(o.actor=this.dispatcher.getActor(),o.request=o.actor.send("loadTile",b,T.bind(this)))}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id},void 0)}unloadTile(o){o.unloadVectorData(),o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class wt extends l.E{constructor(o,f,v,b){super(),this.id=o,this.dispatcher=v,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},f),l.e(this,l.F(f,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=it(this._options,this.map._requestManager,(o,f)=>{this._tileJSONRequest=null,this._loaded=!0,o?this.fire(new l.j(o)):f&&(l.e(this,f),f.bounds&&(this.tileBounds=new ot(f.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(o){this._tileJSONRequest&&this._tileJSONRequest.cancel(),o(),this.load()}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}serialize(){return l.e({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o,f){const v=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);o.request=F.getImage(this.map._requestManager.transformRequest(v,z.Tile),(b,T,P)=>{if(delete o.request,o.aborted)o.state="unloaded",f(null);else if(b)o.state="errored",f(b);else if(T){this.map._refreshExpiredTiles&&P&&o.setExpiryData(P);const D=this.map.painter.context,R=D.gl;o.texture=this.map.painter.getTileTexture(T.width),o.texture?o.texture.update(T,{useMipmap:!0}):(o.texture=new J(D,T,R.RGBA,{useMipmap:!0}),o.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),D.extTextureFilterAnisotropic&&R.texParameterf(R.TEXTURE_2D,D.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,D.extTextureFilterAnisotropicMax)),o.state="loaded",f(null)}},this.map._refreshExpiredTiles)}abortTile(o,f){o.request&&(o.request.cancel(),delete o.request),f()}unloadTile(o,f){o.texture&&this.map.painter.saveTileTexture(o.texture),f()}hasTransition(){return!1}}class Xe extends wt{constructor(o,f,v,b){super(o,f,v,b),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},f),this.encoding=f.encoding||"mapbox",this.redFactor=f.redFactor,this.greenFactor=f.greenFactor,this.blueFactor=f.blueFactor,this.baseShift=f.baseShift}loadTile(o,f){const v=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),b=this.map._requestManager.transformRequest(v,z.Tile);function T(P,D){P&&(o.state="errored",f(P)),D&&(o.dem=D,o.needsHillshadePrepare=!0,o.needsTerrainPrepare=!0,o.state="loaded",f(null))}o.neighboringTiles=this._getNeighboringTiles(o.tileID),o.request=F.getImage(b,(P,D,R)=>l._(this,void 0,void 0,function*(){if(delete o.request,o.aborted)o.state="unloaded",f(null);else if(P)o.state="errored",f(P);else if(D){this.map._refreshExpiredTiles&&o.setExpiryData(R);const N=l.a(D)&&l.J()?D:yield function(X){return l._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&l.K()){const oe=X.width+2,we=X.height+2;try{return new l.R({width:oe,height:we},yield l.M(X,-1,-1,oe,we))}catch{}}return l.h.getImageData(X,1)})}(D),G={uid:o.uid,coord:o.tileID,source:this.id,rawImageData:N,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};o.actor&&o.state!=="expired"||(o.actor=this.dispatcher.getActor(),o.actor.send("loadDEMTile",G,T))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(o){const f=o.canonical,v=Math.pow(2,f.z),b=(f.x-1+v)%v,T=f.x===0?o.wrap-1:o.wrap,P=(f.x+1+v)%v,D=f.x+1===v?o.wrap+1:o.wrap,R={};return R[new l.O(o.overscaledZ,T,f.z,b,f.y).key]={backfilled:!1},R[new l.O(o.overscaledZ,D,f.z,P,f.y).key]={backfilled:!1},f.y>0&&(R[new l.O(o.overscaledZ,T,f.z,b,f.y-1).key]={backfilled:!1},R[new l.O(o.overscaledZ,o.wrap,f.z,f.x,f.y-1).key]={backfilled:!1},R[new l.O(o.overscaledZ,D,f.z,P,f.y-1).key]={backfilled:!1}),f.y+1<v&&(R[new l.O(o.overscaledZ,T,f.z,b,f.y+1).key]={backfilled:!1},R[new l.O(o.overscaledZ,o.wrap,f.z,f.x,f.y+1).key]={backfilled:!1},R[new l.O(o.overscaledZ,D,f.z,P,f.y+1).key]={backfilled:!1}),R}unloadTile(o){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&o.actor.send("removeDEMTile",{uid:o.uid,source:this.id})}}class Dt extends l.E{constructor(o,f,v,b){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>l.e({},this._options,{type:this.type,data:this._data}),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=v.getActor(),this.setEventedParent(b),this._data=f.data,this._options=l.e({},f),this._collectResourceTiming=f.collectResourceTiming,f.maxzoom!==void 0&&(this.maxzoom=f.maxzoom),f.type&&(this.type=f.type),f.attribution&&(this.attribution=f.attribution),this.promoteId=f.promoteId;const T=l.N/this.tileSize;this.workerOptions=l.e({source:this.id,cluster:f.cluster||!1,geojsonVtOptions:{buffer:(f.buffer!==void 0?f.buffer:128)*T,tolerance:(f.tolerance!==void 0?f.tolerance:.375)*T,extent:l.N,maxZoom:this.maxzoom,lineMetrics:f.lineMetrics||!1,generateId:f.generateId||!1},superclusterOptions:{maxZoom:f.clusterMaxZoom!==void 0?f.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,f.clusterMinPoints||2),extent:l.N,radius:(f.clusterRadius||50)*T,log:!1,generateId:f.generateId||!1},clusterProperties:f.clusterProperties,filter:f.filter},f.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(o){this.map=o,this.load()}setData(o){return this._data=o,this._updateWorkerData(),this}updateData(o){return this._updateWorkerData(o),this}setClusterOptions(o){return this.workerOptions.cluster=o.cluster,o&&(o.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=o.clusterRadius),o.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=o.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(o,f){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:o,source:this.id},f),this}getClusterChildren(o,f){return this.actor.send("geojson.getClusterChildren",{clusterId:o,source:this.id},f),this}getClusterLeaves(o,f,v,b){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:o,limit:f,offset:v},b),this}_updateWorkerData(o){const f=l.e({},this.workerOptions);o?f.dataDiff=o:typeof this._data=="string"?(f.request=this.map._requestManager.transformRequest(l.h.resolveURL(this._data),z.Source),f.request.collectResourceTiming=this._collectResourceTiming):f.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,f,(v,b)=>{if(this._pendingLoads--,this._removed||b&&b.abandoned)return void this.fire(new l.k("dataabort",{dataType:"source"}));let T=null;if(b&&b.resourceTiming&&b.resourceTiming[this.id]&&(T=b.resourceTiming[this.id].slice(0)),v)return void this.fire(new l.j(v));const P={dataType:"source"};this._collectResourceTiming&&T&&T.length>0&&l.e(P,{resourceTiming:T}),this.fire(new l.k("data",Object.assign(Object.assign({},P),{sourceDataType:"metadata"}))),this.fire(new l.k("data",Object.assign(Object.assign({},P),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(o,f){const v=o.actor?"reloadTile":"loadTile";o.actor=this.actor;const b={type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};o.request=this.actor.send(v,b,(T,P)=>(delete o.request,o.unloadVectorData(),o.aborted?f(null):T?f(T):(o.loadVectorData(P,this.map.painter,v==="reloadTile"),f(null))))}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.aborted=!0}unloadTile(o){o.unloadVectorData(),this.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var Tt=l.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Nt extends l.E{constructor(o,f,v,b){super(),this.load=(T,P)=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=F.getImage(this.map._requestManager.transformRequest(this.url,z.Image),(D,R)=>{this._request=null,this._loaded=!0,D?this.fire(new l.j(D)):R&&(this.image=R,T&&(this.coordinates=T),P&&P(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const T=this.map.painter.context,P=T.gl;this.boundsBuffer||(this.boundsBuffer=T.createVertexBuffer(this._boundsArray,Tt.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new J(T,this.image,P.RGBA),this.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE));let D=!1;for(const R in this.tiles){const N=this.tiles[R];N.state!=="loaded"&&(N.state="loaded",N.texture=this.texture,D=!0)}D&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=o,this.dispatcher=v,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(b),this.options=f}loaded(){return this._loaded}updateImage(o){return o.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=o.url,this.load(o.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(o){this.coordinates=o;const f=o.map(l.U.fromLngLat);this.tileID=function(b){let T=1/0,P=1/0,D=-1/0,R=-1/0;for(const oe of b)T=Math.min(T,oe.x),P=Math.min(P,oe.y),D=Math.max(D,oe.x),R=Math.max(R,oe.y);const N=Math.max(D-T,R-P),G=Math.max(0,Math.floor(-Math.log(N)/Math.LN2)),X=Math.pow(2,G);return new l.W(G,Math.floor((T+D)/2*X),Math.floor((P+R)/2*X))}(f),this.minzoom=this.maxzoom=this.tileID.z;const v=f.map(b=>this.tileID.getTilePoint(b)._round());return this._boundsArray=new l.V,this._boundsArray.emplaceBack(v[0].x,v[0].y,0,0),this._boundsArray.emplaceBack(v[1].x,v[1].y,l.N,0),this._boundsArray.emplaceBack(v[3].x,v[3].y,0,l.N),this._boundsArray.emplaceBack(v[2].x,v[2].y,l.N,l.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(o,f){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},f(null)):(o.state="errored",f(null))}hasTransition(){return!1}}class dn extends Nt{constructor(o,f,v,b){super(o,f,v,b),this.load=()=>{this._loaded=!1;const T=this.options;this.urls=[];for(const P of T.urls)this.urls.push(this.map._requestManager.transformRequest(P,z.Source).url);l.X(this.urls,(P,D)=>{this._loaded=!0,P?this.fire(new l.j(P)):D&&(this.video=D,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const T=this.map.painter.context,P=T.gl;this.boundsBuffer||(this.boundsBuffer=T.createVertexBuffer(this._boundsArray,Tt.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE),P.texSubImage2D(P.TEXTURE_2D,0,0,0,P.RGBA,P.UNSIGNED_BYTE,this.video)):(this.texture=new J(T,this.video,P.RGBA),this.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE));let D=!1;for(const R in this.tiles){const N=this.tiles[R];N.state!=="loaded"&&(N.state="loaded",N.texture=this.texture,D=!0)}D&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=f}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(o){if(this.video){const f=this.video.seekable;o<f.start(0)||o>f.end(0)?this.fire(new l.j(new l.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${f.start(0)} and ${f.end(0)}-second mark.`))):this.video.currentTime=o}}getVideo(){return this.video}onAdd(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Sn extends Nt{constructor(o,f,v,b){super(o,f,v,b),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let T=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,T=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,T=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const P=this.map.painter.context,D=P.gl;this.boundsBuffer||(this.boundsBuffer=P.createVertexBuffer(this._boundsArray,Tt.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?(T||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new J(P,this.canvas,D.RGBA,{premultiply:!0});let R=!1;for(const N in this.tiles){const G=this.tiles[N];G.state!=="loaded"&&(G.state="loaded",G.texture=this.texture,R=!0)}R&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),f.coordinates?Array.isArray(f.coordinates)&&f.coordinates.length===4&&!f.coordinates.some(T=>!Array.isArray(T)||T.length!==2||T.some(P=>typeof P!="number"))||this.fire(new l.j(new l.Y(`sources.${o}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.j(new l.Y(`sources.${o}`,null,'missing required property "coordinates"'))),f.animate&&typeof f.animate!="boolean"&&this.fire(new l.j(new l.Y(`sources.${o}`,null,'optional "animate" property must be a boolean value'))),f.canvas?typeof f.canvas=="string"||f.canvas instanceof HTMLCanvasElement||this.fire(new l.j(new l.Y(`sources.${o}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.j(new l.Y(`sources.${o}`,null,'missing required property "canvas"'))),this.options=f,this.animate=f.animate===void 0||f.animate}getCanvas(){return this.canvas}onAdd(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const o of[this.canvas.width,this.canvas.height])if(isNaN(o)||o<=0)return!0;return!1}}const me={},Ie=w=>{switch(w){case"geojson":return Dt;case"image":return Nt;case"raster":return wt;case"raster-dem":return Xe;case"vector":return Ct;case"video":return dn;case"canvas":return Sn}return me[w]};function at(w,o){const f=l.Z();return l.$(f,f,[1,1,0]),l.a0(f,f,[.5*w.width,.5*w.height,1]),l.a1(f,f,w.calculatePosMatrix(o.toUnwrapped()))}function Z(w,o,f,v,b,T){const P=function(X,oe,we){if(X)for(const xe of X){const Me=oe[xe];if(Me&&Me.source===we&&Me.type==="fill-extrusion")return!0}else for(const xe in oe){const Me=oe[xe];if(Me.source===we&&Me.type==="fill-extrusion")return!0}return!1}(b&&b.layers,o,w.id),D=T.maxPitchScaleFactor(),R=w.tilesIn(v,D,P);R.sort(he);const N=[];for(const X of R)N.push({wrappedTileID:X.tileID.wrapped().key,queryResults:X.tile.queryRenderedFeatures(o,f,w._state,X.queryGeometry,X.cameraQueryGeometry,X.scale,b,T,D,at(w.transform,X.tileID))});const G=function(X){const oe={},we={};for(const xe of X){const Me=xe.queryResults,ge=xe.wrappedTileID,Ze=we[ge]=we[ge]||{};for(const ct in Me){const Le=Me[ct],Ye=Ze[ct]=Ze[ct]||{},ht=oe[ct]=oe[ct]||[];for(const pt of Le)Ye[pt.featureIndex]||(Ye[pt.featureIndex]=!0,ht.push(pt))}}return oe}(N);for(const X in G)G[X].forEach(oe=>{const we=oe.feature,xe=w.getFeatureState(we.layer["source-layer"],we.id);we.source=we.layer.source,we.layer["source-layer"]&&(we.sourceLayer=we.layer["source-layer"]),we.state=xe});return G}function he(w,o){const f=w.tileID,v=o.tileID;return f.overscaledZ-v.overscaledZ||f.canonical.y-v.canonical.y||f.wrap-v.wrap||f.canonical.x-v.canonical.x}class $e{constructor(o,f){this.timeAdded=0,this.fadeEndTime=0,this.tileID=o,this.uid=l.a2(),this.uses=0,this.tileSize=f,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(o){const f=o+this.timeAdded;f<this.fadeEndTime||(this.fadeEndTime=f)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(o){this.demTexture&&o.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(o,f,v){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(b,T){const P={};if(!T)return P;for(const D of b){const R=D.layerIds.map(N=>T.getLayer(N)).filter(Boolean);if(R.length!==0){D.layers=R,D.stateDependentLayerIds&&(D.stateDependentLayers=D.stateDependentLayerIds.map(N=>R.filter(G=>G.id===N)[0]));for(const N of R)P[N.id]=D}}return P}(o.buckets,f.style),this.hasSymbolBuckets=!1;for(const b in this.buckets){const T=this.buckets[b];if(T instanceof l.a4){if(this.hasSymbolBuckets=!0,!v)break;T.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const b in this.buckets){const T=this.buckets[b];if(T instanceof l.a4&&T.hasRTLText){this.hasRTLText=!0,l.a5();break}}this.queryPadding=0;for(const b in this.buckets){const T=this.buckets[b];this.queryPadding=Math.max(this.queryPadding,f.style.getLayer(b).queryRadius(T))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage)}else this.collisionBoxArray=new l.a3}unloadVectorData(){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(o){return this.buckets[o.id]}upload(o){for(const v in this.buckets){const b=this.buckets[v];b.uploadPending()&&b.upload(o)}const f=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new J(o,this.imageAtlas.image,f.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new J(o,this.glyphAtlasImage,f.ALPHA),this.glyphAtlasImage=null)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,f,v,b,T,P,D,R,N,G){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:b,cameraQueryGeometry:T,scale:P,tileSize:this.tileSize,pixelPosMatrix:G,transform:R,params:D,queryPadding:this.queryPadding*N},o,f,v):{}}querySourceFeatures(o,f){const v=this.latestFeatureIndex;if(!v||!v.rawTileData)return;const b=v.loadVTLayers(),T=f&&f.sourceLayer?f.sourceLayer:"",P=b._geojsonTileLayer||b[T];if(!P)return;const D=l.a6(f&&f.filter),{z:R,x:N,y:G}=this.tileID.canonical,X={z:R,x:N,y:G};for(let oe=0;oe<P.length;oe++){const we=P.feature(oe);if(D.needGeometry){const ge=l.a7(we,!0);if(!D.filter(new l.a8(this.tileID.overscaledZ),ge,this.tileID.canonical))continue}else if(!D.filter(new l.a8(this.tileID.overscaledZ),we))continue;const xe=v.getId(we,T),Me=new l.a9(we,R,N,G,xe);Me.tile=X,o.push(Me)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const f=this.expirationTime;if(o.cacheControl){const v=l.aa(o.cacheControl);v["max-age"]&&(this.expirationTime=Date.now()+1e3*v["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const v=Date.now();let b=!1;if(this.expirationTime>v)b=!1;else if(f)if(this.expirationTime<f)b=!0;else{const T=this.expirationTime-f;T?this.expirationTime=v+Math.max(T,3e4):b=!0}else b=!0;b?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(o,f){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(o).length===0)return;const v=this.latestFeatureIndex.loadVTLayers();for(const b in this.buckets){if(!f.style.hasLayer(b))continue;const T=this.buckets[b],P=T.layers[0].sourceLayer||"_geojsonTileLayer",D=v[P],R=o[P];if(!D||!R||Object.keys(R).length===0)continue;T.update(R,D,this.imageAtlas&&this.imageAtlas.patternPositions||{});const N=f&&f.style&&f.style.getLayer(b);N&&(this.queryPadding=Math.max(this.queryPadding,N.queryRadius(T)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=l.h.now()+o}setDependencies(o,f){const v={};for(const b of f)v[b]=!0;this.dependencies[o]=v}hasDependency(o,f){for(const v of o){const b=this.dependencies[v];if(b){for(const T of f)if(b[T])return!0}}return!1}}class et{constructor(o,f){this.max=o,this.onRemove=f,this.reset()}reset(){for(const o in this.data)for(const f of this.data[o])f.timeout&&clearTimeout(f.timeout),this.onRemove(f.value);return this.data={},this.order=[],this}add(o,f,v){const b=o.wrapped().key;this.data[b]===void 0&&(this.data[b]=[]);const T={value:f,timeout:void 0};if(v!==void 0&&(T.timeout=setTimeout(()=>{this.remove(o,T)},v)),this.data[b].push(T),this.order.push(b),this.order.length>this.max){const P=this._getAndRemoveByKey(this.order[0]);P&&this.onRemove(P)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const f=this.data[o].shift();return f.timeout&&clearTimeout(f.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),f.value}getByKey(o){const f=this.data[o];return f?f[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,f){if(!this.has(o))return this;const v=o.wrapped().key,b=f===void 0?0:this.data[v].indexOf(f),T=this.data[v][b];return this.data[v].splice(b,1),T.timeout&&clearTimeout(T.timeout),this.data[v].length===0&&delete this.data[v],this.onRemove(T.value),this.order.splice(this.order.indexOf(v),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const f=this._getAndRemoveByKey(this.order[0]);f&&this.onRemove(f)}return this}filter(o){const f=[];for(const v in this.data)for(const b of this.data[v])o(b.value)||f.push(b);for(const v of f)this.remove(v.value.tileID,v)}}class Se{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,f,v){const b=String(f);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][b]=this.stateChanges[o][b]||{},l.e(this.stateChanges[o][b],v),this.deletedStates[o]===null){this.deletedStates[o]={};for(const T in this.state[o])T!==b&&(this.deletedStates[o][T]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][b]===null){this.deletedStates[o][b]={};for(const T in this.state[o][b])v[T]||(this.deletedStates[o][b][T]=null)}else for(const T in v)this.deletedStates[o]&&this.deletedStates[o][b]&&this.deletedStates[o][b][T]===null&&delete this.deletedStates[o][b][T]}removeFeatureState(o,f,v){if(this.deletedStates[o]===null)return;const b=String(f);if(this.deletedStates[o]=this.deletedStates[o]||{},v&&f!==void 0)this.deletedStates[o][b]!==null&&(this.deletedStates[o][b]=this.deletedStates[o][b]||{},this.deletedStates[o][b][v]=null);else if(f!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][b])for(v in this.deletedStates[o][b]={},this.stateChanges[o][b])this.deletedStates[o][b][v]=null;else this.deletedStates[o][b]=null;else this.deletedStates[o]=null}getState(o,f){const v=String(f),b=l.e({},(this.state[o]||{})[v],(this.stateChanges[o]||{})[v]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){const T=this.deletedStates[o][f];if(T===null)return{};for(const P in T)delete b[P]}return b}initializeTileState(o,f){o.setFeatureState(this.state,f)}coalesceChanges(o,f){const v={};for(const b in this.stateChanges){this.state[b]=this.state[b]||{};const T={};for(const P in this.stateChanges[b])this.state[b][P]||(this.state[b][P]={}),l.e(this.state[b][P],this.stateChanges[b][P]),T[P]=this.state[b][P];v[b]=T}for(const b in this.deletedStates){this.state[b]=this.state[b]||{};const T={};if(this.deletedStates[b]===null)for(const P in this.state[b])T[P]={},this.state[b][P]={};else for(const P in this.deletedStates[b]){if(this.deletedStates[b][P]===null)this.state[b][P]={};else for(const D of Object.keys(this.deletedStates[b][P]))delete this.state[b][P][D];T[P]=this.state[b][P]}v[b]=v[b]||{},l.e(v[b],T)}if(this.stateChanges={},this.deletedStates={},Object.keys(v).length!==0)for(const b in o)o[b].setFeatureState(v,f)}}class mt extends l.E{constructor(o,f,v){super(),this.id=o,this.dispatcher=v,this.on("data",b=>{b.dataType==="source"&&b.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&b.dataType==="source"&&b.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((b,T,P,D)=>{const R=new(Ie(T.type))(b,T,P,D);if(R.id!==b)throw new Error(`Expected Source id to be ${b} instead of ${R.id}`);return R})(o,f,v,this),this._tiles={},this._cache=new et(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Se,this._didEmitContent=!1,this._updated=!1}onAdd(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._maxTileCacheZoomLevels=o?o._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(o)}onRemove(o){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(o)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const o in this._tiles){const f=this._tiles[o];if(f.state!=="loaded"&&f.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(o,f){return this._source.loadTile(o,f)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o,()=>{})}_abortTile(o){this._source.abortTile&&this._source.abortTile(o,()=>{}),this._source.fire(new l.k("dataabort",{tile:o,coord:o.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const f in this._tiles){const v=this._tiles[f];v.upload(o),v.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(o=>o.tileID).sort(gt).map(o=>o.key)}getRenderableIds(o){const f=[];for(const v in this._tiles)this._isIdRenderable(v,o)&&f.push(this._tiles[v]);return o?f.sort((v,b)=>{const T=v.tileID,P=b.tileID,D=new l.P(T.canonical.x,T.canonical.y)._rotate(this.transform.angle),R=new l.P(P.canonical.x,P.canonical.y)._rotate(this.transform.angle);return T.overscaledZ-P.overscaledZ||R.y-D.y||R.x-D.x}).map(v=>v.tileID.key):f.map(v=>v.tileID).sort(gt).map(v=>v.key)}hasRenderableParent(o){const f=this.findLoadedParent(o,0);return!!f&&this._isIdRenderable(f.tileID.key)}_isIdRenderable(o,f){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(f||!this._tiles[o].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")}}_reloadTile(o,f){const v=this._tiles[o];v&&(v.state!=="loading"&&(v.state=f),this._loadTile(v,this._tileLoaded.bind(this,v,o,f)))}_tileLoaded(o,f,v,b){if(b)return o.state="errored",void(b.status!==404?this._source.fire(new l.j(b,{tile:o})):this.update(this.transform,this.terrain));o.timeAdded=l.h.now(),v==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(f,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),o.aborted||this._source.fire(new l.k("data",{dataType:"source",tile:o,coord:o.tileID}))}_backfillDEM(o){const f=this.getRenderableIds();for(let b=0;b<f.length;b++){const T=f[b];if(o.neighboringTiles&&o.neighboringTiles[T]){const P=this.getTileByID(T);v(o,P),v(P,o)}}function v(b,T){b.needsHillshadePrepare=!0,b.needsTerrainPrepare=!0;let P=T.tileID.canonical.x-b.tileID.canonical.x;const D=T.tileID.canonical.y-b.tileID.canonical.y,R=Math.pow(2,b.tileID.canonical.z),N=T.tileID.key;P===0&&D===0||Math.abs(D)>1||(Math.abs(P)>1&&(Math.abs(P+R)===1?P+=R:Math.abs(P-R)===1&&(P-=R)),T.dem&&b.dem&&(b.dem.backfillBorder(T.dem,P,D),b.neighboringTiles&&b.neighboringTiles[N]&&(b.neighboringTiles[N].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,f,v,b){for(const T in this._tiles){let P=this._tiles[T];if(b[T]||!P.hasData()||P.tileID.overscaledZ<=f||P.tileID.overscaledZ>v)continue;let D=P.tileID;for(;P&&P.tileID.overscaledZ>f+1;){const N=P.tileID.scaledTo(P.tileID.overscaledZ-1);P=this._tiles[N.key],P&&P.hasData()&&(D=N)}let R=D;for(;R.overscaledZ>f;)if(R=R.scaledTo(R.overscaledZ-1),o[R.key]){b[D.key]=D;break}}}findLoadedParent(o,f){if(o.key in this._loadedParentTiles){const v=this._loadedParentTiles[o.key];return v&&v.tileID.overscaledZ>=f?v:null}for(let v=o.overscaledZ-1;v>=f;v--){const b=o.scaledTo(v),T=this._getLoadedTile(b);if(T)return T}}_getLoadedTile(o){const f=this._tiles[o.key];return f&&f.hasData()?f:this._cache.getByKey(o.wrapped().key)}updateCacheSize(o){const f=Math.ceil(o.width/this._source.tileSize)+1,v=Math.ceil(o.height/this._source.tileSize)+1,b=Math.floor(f*v*(this._maxTileCacheZoomLevels===null?l.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),T=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,b):b;this._cache.setMaxSize(T)}handleWrapJump(o){const f=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,f){const v={};for(const b in this._tiles){const T=this._tiles[b];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+f),v[T.tileID.key]=T}this._tiles=v;for(const b in this._timers)clearTimeout(this._timers[b]),delete this._timers[b];for(const b in this._tiles)this._setTileReloadTimer(b,this._tiles[b])}}update(o,f){if(this.transform=o,this.terrain=f,!this._sourceLoaded||this._paused)return;let v;this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?v=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(G=>new l.O(G.canonical.z,G.wrap,G.canonical.z,G.canonical.x,G.canonical.y)):(v=o.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:f}),this._source.hasTile&&(v=v.filter(G=>this._source.hasTile(G)))):v=[];const b=o.coveringZoomLevel(this._source),T=Math.max(b-mt.maxOverzooming,this._source.minzoom),P=Math.max(b+mt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const G={};for(const X of v)if(X.canonical.z>this._source.minzoom){const oe=X.scaledTo(X.canonical.z-1);G[oe.key]=oe;const we=X.scaledTo(Math.max(this._source.minzoom,Math.min(X.canonical.z,5)));G[we.key]=we}v=v.concat(Object.values(G))}const D=v.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,D&&this.fire(new l.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const R=this._updateRetainedTiles(v,b);if(At(this._source.type)){const G={},X={},oe=Object.keys(R),we=l.h.now();for(const xe of oe){const Me=R[xe],ge=this._tiles[xe];if(!ge||ge.fadeEndTime!==0&&ge.fadeEndTime<=we)continue;const Ze=this.findLoadedParent(Me,T);Ze&&(this._addTile(Ze.tileID),G[Ze.tileID.key]=Ze.tileID),X[xe]=Me}this._retainLoadedChildren(X,b,P,R);for(const xe in G)R[xe]||(this._coveredTiles[xe]=!0,R[xe]=G[xe]);if(f){const xe={},Me={};for(const ge of v)this._tiles[ge.key].hasData()?xe[ge.key]=ge:Me[ge.key]=ge;for(const ge in Me){const Ze=Me[ge].children(this._source.maxzoom);this._tiles[Ze[0].key]&&this._tiles[Ze[1].key]&&this._tiles[Ze[2].key]&&this._tiles[Ze[3].key]&&(xe[Ze[0].key]=R[Ze[0].key]=Ze[0],xe[Ze[1].key]=R[Ze[1].key]=Ze[1],xe[Ze[2].key]=R[Ze[2].key]=Ze[2],xe[Ze[3].key]=R[Ze[3].key]=Ze[3],delete Me[ge])}for(const ge in Me){const Ze=this.findLoadedParent(Me[ge],this._source.minzoom);if(Ze){xe[Ze.tileID.key]=R[Ze.tileID.key]=Ze.tileID;for(const ct in xe)xe[ct].isChildOf(Ze.tileID)&&delete xe[ct]}}for(const ge in this._tiles)xe[ge]||(this._coveredTiles[ge]=!0)}}for(const G in R)this._tiles[G].clearFadeHold();const N=l.ab(this._tiles,R);for(const G of N){const X=this._tiles[G];X.hasSymbolBuckets&&!X.holdingForFade()?X.setHoldDuration(this.map._fadeDuration):X.hasSymbolBuckets&&!X.symbolFadeFinished()||this._removeTile(G)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)}_updateRetainedTiles(o,f){const v={},b={},T=Math.max(f-mt.maxOverzooming,this._source.minzoom),P=Math.max(f+mt.maxUnderzooming,this._source.minzoom),D={};for(const R of o){const N=this._addTile(R);v[R.key]=R,N.hasData()||f<this._source.maxzoom&&(D[R.key]=R)}this._retainLoadedChildren(D,f,P,v);for(const R of o){let N=this._tiles[R.key];if(N.hasData())continue;if(f+1>this._source.maxzoom){const X=R.children(this._source.maxzoom)[0],oe=this.getTile(X);if(oe&&oe.hasData()){v[X.key]=X;continue}}else{const X=R.children(this._source.maxzoom);if(v[X[0].key]&&v[X[1].key]&&v[X[2].key]&&v[X[3].key])continue}let G=N.wasRequested();for(let X=R.overscaledZ-1;X>=T;--X){const oe=R.scaledTo(X);if(b[oe.key])break;if(b[oe.key]=!0,N=this.getTile(oe),!N&&G&&(N=this._addTile(oe)),N){const we=N.hasData();if((G||we)&&(v[oe.key]=oe),G=N.wasRequested(),we)break}}}return v}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const f=[];let v,b=this._tiles[o].tileID;for(;b.overscaledZ>0;){if(b.key in this._loadedParentTiles){v=this._loadedParentTiles[b.key];break}f.push(b.key);const T=b.scaledTo(b.overscaledZ-1);if(v=this._getLoadedTile(T),v)break;b=T}for(const T of f)this._loadedParentTiles[T]=v}}_addTile(o){let f=this._tiles[o.key];if(f)return f;f=this._cache.getAndRemove(o),f&&(this._setTileReloadTimer(o.key,f),f.tileID=o,this._state.initializeTileState(f,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,f)));const v=f;return f||(f=new $e(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(f,this._tileLoaded.bind(this,f,o.key,f.state))),f.uses++,this._tiles[o.key]=f,v||this._source.fire(new l.k("dataloading",{tile:f,coord:f.tileID,dataType:"source"})),f}_setTileReloadTimer(o,f){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const v=f.getExpiryTimeout();v&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},v))}_removeTile(o){const f=this._tiles[o];f&&(f.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),f.uses>0||(f.hasData()&&f.state!=="reloading"?this._cache.add(f.tileID,f,f.getExpiryTimeout()):(f.aborted=!0,this._abortTile(f),this._unloadTile(f))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(o);this._cache.reset()}tilesIn(o,f,v){const b=[],T=this.transform;if(!T)return b;const P=v?T.getCameraQueryGeometry(o):o,D=o.map(xe=>T.pointCoordinate(xe,this.terrain)),R=P.map(xe=>T.pointCoordinate(xe,this.terrain)),N=this.getIds();let G=1/0,X=1/0,oe=-1/0,we=-1/0;for(const xe of R)G=Math.min(G,xe.x),X=Math.min(X,xe.y),oe=Math.max(oe,xe.x),we=Math.max(we,xe.y);for(let xe=0;xe<N.length;xe++){const Me=this._tiles[N[xe]];if(Me.holdingForFade())continue;const ge=Me.tileID,Ze=Math.pow(2,T.zoom-Me.tileID.overscaledZ),ct=f*Me.queryPadding*l.N/Me.tileSize/Ze,Le=[ge.getTilePoint(new l.U(G,X)),ge.getTilePoint(new l.U(oe,we))];if(Le[0].x-ct<l.N&&Le[0].y-ct<l.N&&Le[1].x+ct>=0&&Le[1].y+ct>=0){const Ye=D.map(pt=>ge.getTilePoint(pt)),ht=R.map(pt=>ge.getTilePoint(pt));b.push({tile:Me,tileID:ge,queryGeometry:Ye,cameraQueryGeometry:ht,scale:Ze})}}return b}getVisibleCoordinates(o){const f=this.getRenderableIds(o).map(v=>this._tiles[v].tileID);for(const v of f)v.posMatrix=this.transform.calculatePosMatrix(v.toUnwrapped());return f}hasTransition(){if(this._source.hasTransition())return!0;if(At(this._source.type)){const o=l.h.now();for(const f in this._tiles)if(this._tiles[f].fadeEndTime>=o)return!0}return!1}setFeatureState(o,f,v){this._state.updateState(o=o||"_geojsonTileLayer",f,v)}removeFeatureState(o,f,v){this._state.removeFeatureState(o=o||"_geojsonTileLayer",f,v)}getFeatureState(o,f){return this._state.getState(o=o||"_geojsonTileLayer",f)}setDependencies(o,f,v){const b=this._tiles[o];b&&b.setDependencies(f,v)}reloadTilesForDependencies(o,f){for(const v in this._tiles)this._tiles[v].hasDependency(o,f)&&this._reloadTile(v,"reloading");this._cache.filter(v=>!v.hasDependency(o,f))}}function gt(w,o){const f=Math.abs(2*w.wrap)-+(w.wrap<0),v=Math.abs(2*o.wrap)-+(o.wrap<0);return w.overscaledZ-o.overscaledZ||v-f||o.canonical.y-w.canonical.y||o.canonical.x-w.canonical.x}function At(w){return w==="raster"||w==="image"||w==="video"}mt.maxOverzooming=10,mt.maxUnderzooming=3;const Ft="mapboxgl_preloaded_worker_pool";class Kt{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<Kt.workerCount;)this.workers.push(new Worker(l.c.WORKER_URL));return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(f=>{f.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ft]}numActive(){return Object.keys(this.active).length}}const an=Math.floor(l.h.hardwareConcurrency/2);let Pn;function jn(){return Pn||(Pn=new Kt),Pn}Kt.workerCount=l.ac(globalThis)?Math.max(Math.min(an,3),1):1;class tt{constructor(o,f){this.reset(o,f)}reset(o,f){this.points=o||[],this._distances=[0];for(let v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=l.ad(o,0,1);let f=1,v=this._distances[f];const b=o*this.paddedLength+this.padding;for(;v<b&&f<this._distances.length;)v=this._distances[++f];const T=f-1,P=this._distances[T],D=v-P,R=D>0?(b-P)/D:0;return this.points[T].mult(1-R).add(this.points[f].mult(R))}}function nt(w,o){let f=!0;return w==="always"||w!=="never"&&o!=="never"||(f=!1),f}class ut{constructor(o,f,v){const b=this.boxCells=[],T=this.circleCells=[];this.xCellCount=Math.ceil(o/v),this.yCellCount=Math.ceil(f/v);for(let P=0;P<this.xCellCount*this.yCellCount;P++)b.push([]),T.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=f,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,f,v,b,T){this._forEachCell(f,v,b,T,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(b),this.bboxes.push(T)}insertCircle(o,f,v,b){this._forEachCell(f-b,v-b,f+b,v+b,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(f),this.circles.push(v),this.circles.push(b)}_insertBoxCell(o,f,v,b,T,P){this.boxCells[T].push(P)}_insertCircleCell(o,f,v,b,T,P){this.circleCells[T].push(P)}_query(o,f,v,b,T,P,D){if(v<0||o>this.width||b<0||f>this.height)return[];const R=[];if(o<=0&&f<=0&&this.width<=v&&this.height<=b){if(T)return[{key:null,x1:o,y1:f,x2:v,y2:b}];for(let N=0;N<this.boxKeys.length;N++)R.push({key:this.boxKeys[N],x1:this.bboxes[4*N],y1:this.bboxes[4*N+1],x2:this.bboxes[4*N+2],y2:this.bboxes[4*N+3]});for(let N=0;N<this.circleKeys.length;N++){const G=this.circles[3*N],X=this.circles[3*N+1],oe=this.circles[3*N+2];R.push({key:this.circleKeys[N],x1:G-oe,y1:X-oe,x2:G+oe,y2:X+oe})}}else this._forEachCell(o,f,v,b,this._queryCell,R,{hitTest:T,overlapMode:P,seenUids:{box:{},circle:{}}},D);return R}query(o,f,v,b){return this._query(o,f,v,b,!1,null)}hitTest(o,f,v,b,T,P){return this._query(o,f,v,b,!0,T,P).length>0}hitTestCircle(o,f,v,b,T){const P=o-v,D=o+v,R=f-v,N=f+v;if(D<0||P>this.width||N<0||R>this.height)return!1;const G=[];return this._forEachCell(P,R,D,N,this._queryCellCircle,G,{hitTest:!0,overlapMode:b,circle:{x:o,y:f,radius:v},seenUids:{box:{},circle:{}}},T),G.length>0}_queryCell(o,f,v,b,T,P,D,R){const{seenUids:N,hitTest:G,overlapMode:X}=D,oe=this.boxCells[T];if(oe!==null){const xe=this.bboxes;for(const Me of oe)if(!N.box[Me]){N.box[Me]=!0;const ge=4*Me,Ze=this.boxKeys[Me];if(o<=xe[ge+2]&&f<=xe[ge+3]&&v>=xe[ge+0]&&b>=xe[ge+1]&&(!R||R(Ze))&&(!G||!nt(X,Ze.overlapMode))&&(P.push({key:Ze,x1:xe[ge],y1:xe[ge+1],x2:xe[ge+2],y2:xe[ge+3]}),G))return!0}}const we=this.circleCells[T];if(we!==null){const xe=this.circles;for(const Me of we)if(!N.circle[Me]){N.circle[Me]=!0;const ge=3*Me,Ze=this.circleKeys[Me];if(this._circleAndRectCollide(xe[ge],xe[ge+1],xe[ge+2],o,f,v,b)&&(!R||R(Ze))&&(!G||!nt(X,Ze.overlapMode))){const ct=xe[ge],Le=xe[ge+1],Ye=xe[ge+2];if(P.push({key:Ze,x1:ct-Ye,y1:Le-Ye,x2:ct+Ye,y2:Le+Ye}),G)return!0}}}return!1}_queryCellCircle(o,f,v,b,T,P,D,R){const{circle:N,seenUids:G,overlapMode:X}=D,oe=this.boxCells[T];if(oe!==null){const xe=this.bboxes;for(const Me of oe)if(!G.box[Me]){G.box[Me]=!0;const ge=4*Me,Ze=this.boxKeys[Me];if(this._circleAndRectCollide(N.x,N.y,N.radius,xe[ge+0],xe[ge+1],xe[ge+2],xe[ge+3])&&(!R||R(Ze))&&!nt(X,Ze.overlapMode))return P.push(!0),!0}}const we=this.circleCells[T];if(we!==null){const xe=this.circles;for(const Me of we)if(!G.circle[Me]){G.circle[Me]=!0;const ge=3*Me,Ze=this.circleKeys[Me];if(this._circlesCollide(xe[ge],xe[ge+1],xe[ge+2],N.x,N.y,N.radius)&&(!R||R(Ze))&&!nt(X,Ze.overlapMode))return P.push(!0),!0}}}_forEachCell(o,f,v,b,T,P,D,R){const N=this._convertToXCellCoord(o),G=this._convertToYCellCoord(f),X=this._convertToXCellCoord(v),oe=this._convertToYCellCoord(b);for(let we=N;we<=X;we++)for(let xe=G;xe<=oe;xe++)if(T.call(this,o,f,v,b,this.xCellCount*xe+we,P,D,R))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,f,v,b,T,P){const D=b-o,R=T-f,N=v+P;return N*N>D*D+R*R}_circleAndRectCollide(o,f,v,b,T,P,D){const R=(P-b)/2,N=Math.abs(o-(b+R));if(N>R+v)return!1;const G=(D-T)/2,X=Math.abs(f-(T+G));if(X>G+v)return!1;if(N<=R||X<=G)return!0;const oe=N-R,we=X-G;return oe*oe+we*we<=v*v}}function qe(w,o,f,v,b){const T=l.Z();return o?(l.a0(T,T,[1/b,1/b,1]),f||l.ae(T,T,v.angle)):l.a1(T,v.labelPlaneMatrix,w),T}function Qt(w,o,f,v,b){if(o){const T=l.af(w);return l.a0(T,T,[b,b,1]),f||l.ae(T,T,-v.angle),T}return v.glCoordMatrix}function Zt(w,o,f){let v;f?(v=[w.x,w.y,f(w.x,w.y),1],l.ag(v,v,o)):(v=[w.x,w.y,0,1],Ae(v,v,o));const b=v[3];return{point:new l.P(v[0]/b,v[1]/b),signedDistanceFromCamera:b}}function Cn(w,o){return .5+w/o*.5}function xn(w,o){const f=w[0]/w[3],v=w[1]/w[3];return f>=-o[0]&&f<=o[0]&&v>=-o[1]&&v<=o[1]}function Mt(w,o,f,v,b,T,P,D,R,N){const G=v?w.textSizeData:w.iconSizeData,X=l.ah(G,f.transform.zoom),oe=[256/f.width*2+1,256/f.height*2+1],we=v?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;we.clear();const xe=w.lineVertexArray,Me=v?w.text.placedSymbolArray:w.icon.placedSymbolArray,ge=f.transform.width/f.transform.height;let Ze=!1;for(let ct=0;ct<Me.length;ct++){const Le=Me.get(ct);if(Le.hidden||Le.writingMode===l.ai.vertical&&!Ze){pe(Le.numGlyphs,we);continue}let Ye;if(Ze=!1,N?(Ye=[Le.anchorX,Le.anchorY,N(Le.anchorX,Le.anchorY),1],l.ag(Ye,Ye,o)):(Ye=[Le.anchorX,Le.anchorY,0,1],Ae(Ye,Ye,o)),!xn(Ye,oe)){pe(Le.numGlyphs,we);continue}const ht=Cn(f.transform.cameraToCenterDistance,Ye[3]),pt=l.aj(G,X,Le),Pt=P?pt/ht:pt*ht,Bt=new l.P(Le.anchorX,Le.anchorY),Rt=Zt(Bt,b,N).point,Gt={projections:{},offsets:{}},mn=cn(Le,Pt,!1,D,o,b,T,w.glyphOffsetArray,xe,we,Rt,Bt,Gt,ge,R,N);Ze=mn.useVertical,(mn.notEnoughRoom||Ze||mn.needsFlipping&&cn(Le,Pt,!0,D,o,b,T,w.glyphOffsetArray,xe,we,Rt,Bt,Gt,ge,R,N).notEnoughRoom)&&pe(Le.numGlyphs,we)}v?w.text.dynamicLayoutVertexBuffer.updateData(we):w.icon.dynamicLayoutVertexBuffer.updateData(we)}function Ht(w,o,f,v,b,T,P,D,R,N,G,X,oe){const we=D.glyphStartIndex+D.numGlyphs,xe=D.lineStartIndex,Me=D.lineStartIndex+D.lineLength,ge=o.getoffsetX(D.glyphStartIndex),Ze=o.getoffsetX(we-1),ct=ne(w*ge,f,v,b,T,P,D.segment,xe,Me,R,N,G,X,oe);if(!ct)return null;const Le=ne(w*Ze,f,v,b,T,P,D.segment,xe,Me,R,N,G,X,oe);return Le?{first:ct,last:Le}:null}function _t(w,o,f,v){return w===l.ai.horizontal&&Math.abs(f.y-o.y)>Math.abs(f.x-o.x)*v?{useVertical:!0}:(w===l.ai.vertical?o.y<f.y:o.x>f.x)?{needsFlipping:!0}:null}function cn(w,o,f,v,b,T,P,D,R,N,G,X,oe,we,xe,Me){const ge=o/24,Ze=w.lineOffsetX*ge,ct=w.lineOffsetY*ge;let Le;if(w.numGlyphs>1){const Ye=w.glyphStartIndex+w.numGlyphs,ht=w.lineStartIndex,pt=w.lineStartIndex+w.lineLength,Pt=Ht(ge,D,Ze,ct,f,G,X,w,R,T,oe,xe,Me);if(!Pt)return{notEnoughRoom:!0};const Bt=Zt(Pt.first.point,P,Me).point,Rt=Zt(Pt.last.point,P,Me).point;if(v&&!f){const Gt=_t(w.writingMode,Bt,Rt,we);if(Gt)return Gt}Le=[Pt.first];for(let Gt=w.glyphStartIndex+1;Gt<Ye-1;Gt++)Le.push(ne(ge*D.getoffsetX(Gt),Ze,ct,f,G,X,w.segment,ht,pt,R,T,oe,xe,Me));Le.push(Pt.last)}else{if(v&&!f){const ht=Zt(X,b,Me).point,pt=w.lineStartIndex+w.segment+1,Pt=new l.P(R.getx(pt),R.gety(pt)),Bt=Zt(Pt,b,Me),Rt=Bt.signedDistanceFromCamera>0?Bt.point:zn(X,Pt,ht,1,b,Me),Gt=_t(w.writingMode,ht,Rt,we);if(Gt)return Gt}const Ye=ne(ge*D.getoffsetX(w.glyphStartIndex),Ze,ct,f,G,X,w.segment,w.lineStartIndex,w.lineStartIndex+w.lineLength,R,T,oe,xe,Me);if(!Ye)return{notEnoughRoom:!0};Le=[Ye]}for(const Ye of Le)l.ak(N,Ye.point,Ye.angle);return{}}function zn(w,o,f,v,b,T){const P=Zt(w.add(w.sub(o)._unit()),b,T).point,D=f.sub(P);return f.add(D._mult(v/D.mag()))}function Vt(w,o){const{projectionCache:f,lineVertexArray:v,labelPlaneMatrix:b,tileAnchorPoint:T,distanceFromAnchor:P,getElevation:D,previousVertex:R,direction:N,absOffsetX:G}=o;if(f.projections[w])return f.projections[w];const X=new l.P(v.getx(w),v.gety(w)),oe=Zt(X,b,D);if(oe.signedDistanceFromCamera>0)return f.projections[w]=oe.point,oe.point;const we=w-N;return zn(P===0?T:new l.P(v.getx(we),v.gety(we)),X,R,G-P+1,b,D)}function li(w,o,f){return w._unit()._perp()._mult(o*f)}function Ee(w,o,f,v,b,T,P,D){const{projectionCache:R,direction:N}=D;if(R.offsets[w])return R.offsets[w];const G=f.add(o);if(w+N<v||w+N>=b)return R.offsets[w]=G,G;const X=Vt(w+N,D),oe=li(X.sub(f),P,N),we=f.add(oe),xe=X.add(oe);return R.offsets[w]=l.al(T,G,we,xe)||G,R.offsets[w]}function ne(w,o,f,v,b,T,P,D,R,N,G,X,oe,we){const xe=v?w-o:w+o;let Me=xe>0?1:-1,ge=0;v&&(Me*=-1,ge=Math.PI),Me<0&&(ge+=Math.PI);let Ze,ct,Le=Me>0?D+P:D+P+1,Ye=b,ht=b,pt=0,Pt=0;const Bt=Math.abs(xe),Rt=[];let Gt;for(;pt+Pt<=Bt;){if(Le+=Me,Le<D||Le>=R)return null;pt+=Pt,ht=Ye,ct=Ze;const Yt={projectionCache:X,lineVertexArray:N,labelPlaneMatrix:G,tileAnchorPoint:T,distanceFromAnchor:pt,getElevation:we,previousVertex:ht,direction:Me,absOffsetX:Bt};if(Ye=Vt(Le,Yt),f===0)Rt.push(ht),Gt=Ye.sub(ht);else{let On;const vn=Ye.sub(ht);On=vn.mag()===0?li(Vt(Le+Me,Yt).sub(Ye),f,Me):li(vn,f,Me),ct||(ct=ht.add(On)),Ze=Ee(Le,On,Ye,D,R,ct,f,Yt),Rt.push(ct),Gt=Ze.sub(ct)}Pt=Gt.mag()}const mn=Gt._mult((Bt-pt)/Pt)._add(ct||ht),Kn=ge+Math.atan2(Ye.y-ht.y,Ye.x-ht.x);return Rt.push(mn),{point:mn,angle:oe?Kn:0,path:Rt}}const ae=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function pe(w,o){for(let f=0;f<w;f++){const v=o.length;o.resize(v+4),o.float32.set(ae,3*v)}}function Ae(w,o,f){const v=o[0],b=o[1];return w[0]=f[0]*v+f[4]*b+f[12],w[1]=f[1]*v+f[5]*b+f[13],w[3]=f[3]*v+f[7]*b+f[15],w}const ke=100;class Ke{constructor(o,f=new ut(o.width+200,o.height+200,25),v=new ut(o.width+200,o.height+200,25)){this.transform=o,this.grid=f,this.ignoredGrid=v,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+ke,this.screenBottomBoundary=o.height+ke,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(o,f,v,b,T,P){const D=this.projectAndGetPerspectiveRatio(b,o.anchorPointX,o.anchorPointY,P),R=v*D.perspectiveRatio,N=o.x1*R+D.point.x,G=o.y1*R+D.point.y,X=o.x2*R+D.point.x,oe=o.y2*R+D.point.y;return!this.isInsideGrid(N,G,X,oe)||f!=="always"&&this.grid.hitTest(N,G,X,oe,f,T)||D.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[N,G,X,oe],offscreen:this.isOffscreen(N,G,X,oe)}}placeCollisionCircles(o,f,v,b,T,P,D,R,N,G,X,oe,we,xe){const Me=[],ge=new l.P(f.anchorX,f.anchorY),Ze=Zt(ge,P,xe),ct=Cn(this.transform.cameraToCenterDistance,Ze.signedDistanceFromCamera),Le=(G?T/ct:T*ct)/l.ap,Ye=Zt(ge,D,xe).point,ht=Ht(Le,b,f.lineOffsetX*Le,f.lineOffsetY*Le,!1,Ye,ge,f,v,D,{projections:{},offsets:{}},!1,xe);let pt=!1,Pt=!1,Bt=!0;if(ht){const Rt=.5*oe*ct+we,Gt=new l.P(-100,-100),mn=new l.P(this.screenRightBoundary,this.screenBottomBoundary),Kn=new tt,Yt=ht.first,On=ht.last;let vn=[];for(let Vn=Yt.path.length-1;Vn>=1;Vn--)vn.push(Yt.path[Vn]);for(let Vn=1;Vn<On.path.length;Vn++)vn.push(On.path[Vn]);const Ei=2.5*Rt;if(R){const Vn=vn.map(Xn=>Zt(Xn,R,xe));vn=Vn.some(Xn=>Xn.signedDistanceFromCamera<=0)?[]:Vn.map(Xn=>Xn.point)}let qn=[];if(vn.length>0){const Vn=vn[0].clone(),Xn=vn[0].clone();for(let Ji=1;Ji<vn.length;Ji++)Vn.x=Math.min(Vn.x,vn[Ji].x),Vn.y=Math.min(Vn.y,vn[Ji].y),Xn.x=Math.max(Xn.x,vn[Ji].x),Xn.y=Math.max(Xn.y,vn[Ji].y);qn=Vn.x>=Gt.x&&Xn.x<=mn.x&&Vn.y>=Gt.y&&Xn.y<=mn.y?[vn]:Xn.x<Gt.x||Vn.x>mn.x||Xn.y<Gt.y||Vn.y>mn.y?[]:l.am([vn],Gt.x,Gt.y,mn.x,mn.y)}for(const Vn of qn){Kn.reset(Vn,.25*Rt);let Xn=0;Xn=Kn.length<=.5*Rt?1:Math.ceil(Kn.paddedLength/Ei)+1;for(let Ji=0;Ji<Xn;Ji++){const Ii=Ji/Math.max(Xn-1,1),Lr=Kn.lerp(Ii),gr=Lr.x+ke,ar=Lr.y+ke;Me.push(gr,ar,Rt,0);const Ss=gr-Rt,Li=ar-Rt,wa=gr+Rt,Sa=ar+Rt;if(Bt=Bt&&this.isOffscreen(Ss,Li,wa,Sa),Pt=Pt||this.isInsideGrid(Ss,Li,wa,Sa),o!=="always"&&this.grid.hitTestCircle(gr,ar,Rt,o,X)&&(pt=!0,!N))return{circles:[],offscreen:!1,collisionDetected:pt}}}}return{circles:!N&&pt||!Pt||ct<this.perspectiveRatioCutoff?[]:Me,offscreen:Bt,collisionDetected:pt}}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const f=[];let v=1/0,b=1/0,T=-1/0,P=-1/0;for(const G of o){const X=new l.P(G.x+ke,G.y+ke);v=Math.min(v,X.x),b=Math.min(b,X.y),T=Math.max(T,X.x),P=Math.max(P,X.y),f.push(X)}const D=this.grid.query(v,b,T,P).concat(this.ignoredGrid.query(v,b,T,P)),R={},N={};for(const G of D){const X=G.key;if(R[X.bucketInstanceId]===void 0&&(R[X.bucketInstanceId]={}),R[X.bucketInstanceId][X.featureIndex])continue;const oe=[new l.P(G.x1,G.y1),new l.P(G.x2,G.y1),new l.P(G.x2,G.y2),new l.P(G.x1,G.y2)];l.an(f,oe)&&(R[X.bucketInstanceId][X.featureIndex]=!0,N[X.bucketInstanceId]===void 0&&(N[X.bucketInstanceId]=[]),N[X.bucketInstanceId].push(X.featureIndex))}return N}insertCollisionBox(o,f,v,b,T,P){(v?this.ignoredGrid:this.grid).insert({bucketInstanceId:b,featureIndex:T,collisionGroupID:P,overlapMode:f},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,f,v,b,T,P){const D=v?this.ignoredGrid:this.grid,R={bucketInstanceId:b,featureIndex:T,collisionGroupID:P,overlapMode:f};for(let N=0;N<o.length;N+=4)D.insertCircle(R,o[N],o[N+1],o[N+2])}projectAndGetPerspectiveRatio(o,f,v,b){let T;return b?(T=[f,v,b(f,v),1],l.ag(T,T,o)):(T=[f,v,0,1],Ae(T,T,o)),{point:new l.P((T[0]/T[3]+1)/2*this.transform.width+ke,(-T[1]/T[3]+1)/2*this.transform.height+ke),perspectiveRatio:.5+this.transform.cameraToCenterDistance/T[3]*.5}}isOffscreen(o,f,v,b){return v<ke||o>=this.screenRightBoundary||b<ke||f>this.screenBottomBoundary}isInsideGrid(o,f,v,b){return v>=0&&o<this.gridRightBoundary&&b>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const o=l.ao([]);return l.$(o,o,[-100,-100,0]),o}}function Be(w,o,f){return o*(l.N/(w.tileSize*Math.pow(2,f-w.tileID.overscaledZ)))}class Oe{constructor(o,f,v,b){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?f:-f))):b&&v?1:0,this.placed=v}isHidden(){return this.opacity===0&&!this.placed}}class He{constructor(o,f,v,b,T){this.text=new Oe(o?o.text:null,f,v,T),this.icon=new Oe(o?o.icon:null,f,b,T)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class yt{constructor(o,f,v){this.text=o,this.icon=f,this.skipFade=v}}class Et{constructor(){this.invProjMatrix=l.Z(),this.viewportMatrix=l.Z(),this.circles=[]}}class St{constructor(o,f,v,b,T){this.bucketInstanceId=o,this.featureIndex=f,this.sourceLayerIndex=v,this.bucketIndex=b,this.tileID=T}}class yn{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const f=++this.maxGroupID;this.collisionGroups[o]={ID:f,predicate:v=>v.collisionGroupID===f}}return this.collisionGroups[o]}}function In(w,o,f,v,b){const{horizontalAlign:T,verticalAlign:P}=l.au(w);return new l.P(-(T-.5)*o+v[0]*b,-(P-.5)*f+v[1]*b)}function nn(w,o,f,v,b,T){const{x1:P,x2:D,y1:R,y2:N,anchorPointX:G,anchorPointY:X}=w,oe=new l.P(o,f);return v&&oe._rotate(b?T:-T),{x1:P+oe.x,y1:R+oe.y,x2:D+oe.x,y2:N+oe.y,anchorPointX:G,anchorPointY:X}}class bn{constructor(o,f,v,b,T){this.transform=o.clone(),this.terrain=f,this.collisionIndex=new Ke(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=v,this.retainedQueryData={},this.collisionGroups=new yn(b),this.collisionCircleArrays={},this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(o,f,v,b){const T=v.getBucket(f),P=v.latestFeatureIndex;if(!T||!P||f.id!==T.layerIds[0])return;const D=v.collisionBoxArray,R=T.layers[0].layout,N=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),G=v.tileSize/l.N,X=this.transform.calculatePosMatrix(v.tileID.toUnwrapped()),oe=R.get("text-pitch-alignment")==="map",we=R.get("text-rotation-alignment")==="map",xe=Be(v,1,this.transform.zoom),Me=qe(X,oe,we,this.transform,xe);let ge=null;if(oe){const ct=Qt(X,oe,we,this.transform,xe);ge=l.a1([],this.transform.labelPlaneMatrix,ct)}this.retainedQueryData[T.bucketInstanceId]=new St(T.bucketInstanceId,P,T.sourceLayerIndex,T.index,v.tileID);const Ze={bucket:T,layout:R,posMatrix:X,textLabelPlaneMatrix:Me,labelToScreenMatrix:ge,scale:N,textPixelRatio:G,holdingForFade:v.holdingForFade(),collisionBoxArray:D,partiallyEvaluatedTextSize:l.ah(T.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(T.sourceID)};if(b)for(const ct of T.sortKeyRanges){const{sortKey:Le,symbolInstanceStart:Ye,symbolInstanceEnd:ht}=ct;o.push({sortKey:Le,symbolInstanceStart:Ye,symbolInstanceEnd:ht,parameters:Ze})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:T.symbolInstances.length,parameters:Ze})}attemptAnchorPlacement(o,f,v,b,T,P,D,R,N,G,X,oe,we,xe,Me,ge){const Ze=l.aq[o.textAnchor],ct=[o.textOffset0,o.textOffset1],Le=In(Ze,v,b,ct,T),Ye=this.collisionIndex.placeCollisionBox(nn(f,Le.x,Le.y,P,D,this.transform.angle),X,R,N,G.predicate,ge);if((!Me||this.collisionIndex.placeCollisionBox(nn(Me,Le.x,Le.y,P,D,this.transform.angle),X,R,N,G.predicate,ge).box.length!==0)&&Ye.box.length>0){let ht;if(this.prevPlacement&&this.prevPlacement.variableOffsets[oe.crossTileID]&&this.prevPlacement.placements[oe.crossTileID]&&this.prevPlacement.placements[oe.crossTileID].text&&(ht=this.prevPlacement.variableOffsets[oe.crossTileID].anchor),oe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[oe.crossTileID]={textOffset:ct,width:v,height:b,anchor:Ze,textBoxScale:T,prevAnchor:ht},this.markUsedJustification(we,Ze,oe,xe),we.allowVerticalPlacement&&(this.markUsedOrientation(we,xe,oe),this.placedOrientations[oe.crossTileID]=xe),{shift:Le,placedGlyphBoxes:Ye}}}placeLayerBucketPart(o,f,v){const{bucket:b,layout:T,posMatrix:P,textLabelPlaneMatrix:D,labelToScreenMatrix:R,textPixelRatio:N,holdingForFade:G,collisionBoxArray:X,partiallyEvaluatedTextSize:oe,collisionGroup:we}=o.parameters,xe=T.get("text-optional"),Me=T.get("icon-optional"),ge=l.ar(T,"text-overlap","text-allow-overlap"),Ze=ge==="always",ct=l.ar(T,"icon-overlap","icon-allow-overlap"),Le=ct==="always",Ye=T.get("text-rotation-alignment")==="map",ht=T.get("text-pitch-alignment")==="map",pt=T.get("icon-text-fit")!=="none",Pt=T.get("symbol-z-order")==="viewport-y",Bt=Ze&&(Le||!b.hasIconData()||Me),Rt=Le&&(Ze||!b.hasTextData()||xe);!b.collisionArrays&&X&&b.deserializeCollisionBoxes(X);const Gt=this.retainedQueryData[b.bucketInstanceId].tileID,mn=this.terrain?(Yt,On)=>this.terrain.getElevation(Gt,Yt,On):null,Kn=(Yt,On)=>{var vn,Ei;if(f[Yt.crossTileID])return;if(G)return void(this.placements[Yt.crossTileID]=new yt(!1,!1,!1));let qn=!1,Vn=!1,Xn=!0,Ji=null,Ii={box:null,offscreen:null},Lr={box:null,offscreen:null},gr=null,ar=null,Ss=null,Li=0,wa=0,Sa=0;On.textFeatureIndex?Li=On.textFeatureIndex:Yt.useRuntimeCollisionCircles&&(Li=Yt.featureIndex),On.verticalTextFeatureIndex&&(wa=On.verticalTextFeatureIndex);const Ao=On.textBox;if(Ao){const Br=Qi=>{let vr=l.ai.horizontal;if(b.allowVerticalPlacement&&!Qi&&this.prevPlacement){const ss=this.prevPlacement.placedOrientations[Yt.crossTileID];ss&&(this.placedOrientations[Yt.crossTileID]=ss,vr=ss,this.markUsedOrientation(b,vr,Yt))}return vr},Or=(Qi,vr)=>{if(b.allowVerticalPlacement&&Yt.numVerticalGlyphVertices>0&&On.verticalTextBox){for(const ss of b.writingModes)if(ss===l.ai.vertical?(Ii=vr(),Lr=Ii):Ii=Qi(),Ii&&Ii.box&&Ii.box.length)break}else Ii=Qi()},Wr=Yt.textAnchorOffsetStartIndex,ll=Yt.textAnchorOffsetEndIndex;if(ll===Wr){const Qi=(vr,ss)=>{const er=this.collisionIndex.placeCollisionBox(vr,ge,N,P,we.predicate,mn);return er&&er.box&&er.box.length&&(this.markUsedOrientation(b,ss,Yt),this.placedOrientations[Yt.crossTileID]=ss),er};Or(()=>Qi(Ao,l.ai.horizontal),()=>{const vr=On.verticalTextBox;return b.allowVerticalPlacement&&Yt.numVerticalGlyphVertices>0&&vr?Qi(vr,l.ai.vertical):{box:null,offscreen:null}}),Br(Ii&&Ii.box&&Ii.box.length)}else{let Qi=l.aq[(Ei=(vn=this.prevPlacement)===null||vn===void 0?void 0:vn.variableOffsets[Yt.crossTileID])===null||Ei===void 0?void 0:Ei.anchor];const vr=(er,cl,Pd)=>{const Sg=er.x2-er.x1,Tg=er.y2-er.y1,jy=Yt.textBoxScale,Df=pt&&ct==="never"?cl:null;let Ta={box:[],offscreen:!1},ul=ge==="never"?1:2,Ea="never";Qi&&ul++;for(let Hs=0;Hs<ul;Hs++){for(let Ca=Wr;Ca<ll;Ca++){const Lf=b.textAnchorOffsets.get(Ca);if(Qi&&Lf.textAnchor!==Qi)continue;const Xa=this.attemptAnchorPlacement(Lf,er,Sg,Tg,jy,Ye,ht,N,P,we,Ea,Yt,b,Pd,Df,mn);if(Xa&&(Ta=Xa.placedGlyphBoxes,Ta&&Ta.box&&Ta.box.length))return qn=!0,Ji=Xa.shift,Ta}Qi?Qi=null:Ea=ge}return Ta};Or(()=>vr(Ao,On.iconBox,l.ai.horizontal),()=>{const er=On.verticalTextBox;return b.allowVerticalPlacement&&!(Ii&&Ii.box&&Ii.box.length)&&Yt.numVerticalGlyphVertices>0&&er?vr(er,On.verticalIconBox,l.ai.vertical):{box:null,offscreen:null}}),Ii&&(qn=Ii.box,Xn=Ii.offscreen);const ss=Br(Ii&&Ii.box);if(!qn&&this.prevPlacement){const er=this.prevPlacement.variableOffsets[Yt.crossTileID];er&&(this.variableOffsets[Yt.crossTileID]=er,this.markUsedJustification(b,er.anchor,Yt,ss))}}}if(gr=Ii,qn=gr&&gr.box&&gr.box.length>0,Xn=gr&&gr.offscreen,Yt.useRuntimeCollisionCircles){const Br=b.text.placedSymbolArray.get(Yt.centerJustifiedTextSymbolIndex),Or=l.aj(b.textSizeData,oe,Br),Wr=T.get("text-padding");ar=this.collisionIndex.placeCollisionCircles(ge,Br,b.lineVertexArray,b.glyphOffsetArray,Or,P,D,R,v,ht,we.predicate,Yt.collisionCircleDiameter,Wr,mn),ar.circles.length&&ar.collisionDetected&&!v&&l.w("Collisions detected, but collision boxes are not shown"),qn=Ze||ar.circles.length>0&&!ar.collisionDetected,Xn=Xn&&ar.offscreen}if(On.iconFeatureIndex&&(Sa=On.iconFeatureIndex),On.iconBox){const Br=Or=>{const Wr=pt&&Ji?nn(Or,Ji.x,Ji.y,Ye,ht,this.transform.angle):Or;return this.collisionIndex.placeCollisionBox(Wr,ct,N,P,we.predicate,mn)};Lr&&Lr.box&&Lr.box.length&&On.verticalIconBox?(Ss=Br(On.verticalIconBox),Vn=Ss.box.length>0):(Ss=Br(On.iconBox),Vn=Ss.box.length>0),Xn=Xn&&Ss.offscreen}const ol=xe||Yt.numHorizontalGlyphVertices===0&&Yt.numVerticalGlyphVertices===0,Xl=Me||Yt.numIconVertices===0;if(ol||Xl?Xl?ol||(Vn=Vn&&qn):qn=Vn&&qn:Vn=qn=Vn&&qn,qn&&gr&&gr.box&&this.collisionIndex.insertCollisionBox(gr.box,ge,T.get("text-ignore-placement"),b.bucketInstanceId,Lr&&Lr.box&&wa?wa:Li,we.ID),Vn&&Ss&&this.collisionIndex.insertCollisionBox(Ss.box,ct,T.get("icon-ignore-placement"),b.bucketInstanceId,Sa,we.ID),ar&&(qn&&this.collisionIndex.insertCollisionCircles(ar.circles,ge,T.get("text-ignore-placement"),b.bucketInstanceId,Li,we.ID),v)){const Br=b.bucketInstanceId;let Or=this.collisionCircleArrays[Br];Or===void 0&&(Or=this.collisionCircleArrays[Br]=new Et);for(let Wr=0;Wr<ar.circles.length;Wr+=4)Or.circles.push(ar.circles[Wr+0]),Or.circles.push(ar.circles[Wr+1]),Or.circles.push(ar.circles[Wr+2]),Or.circles.push(ar.collisionDetected?1:0)}if(Yt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(b.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Yt.crossTileID]=new yt(qn||Bt,Vn||Rt,Xn||b.justReloaded),f[Yt.crossTileID]=!0};if(Pt){if(o.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Yt=b.getSortedSymbolIndexes(this.transform.angle);for(let On=Yt.length-1;On>=0;--On){const vn=Yt[On];Kn(b.symbolInstances.get(vn),b.collisionArrays[vn])}}else for(let Yt=o.symbolInstanceStart;Yt<o.symbolInstanceEnd;Yt++)Kn(b.symbolInstances.get(Yt),b.collisionArrays[Yt]);if(v&&b.bucketInstanceId in this.collisionCircleArrays){const Yt=this.collisionCircleArrays[b.bucketInstanceId];l.as(Yt.invProjMatrix,P),Yt.viewportMatrix=this.collisionIndex.getViewportMatrix()}b.justReloaded=!1}markUsedJustification(o,f,v,b){let T;T=b===l.ai.vertical?v.verticalPlacedTextSymbolIndex:{left:v.leftJustifiedTextSymbolIndex,center:v.centerJustifiedTextSymbolIndex,right:v.rightJustifiedTextSymbolIndex}[l.at(f)];const P=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex,v.verticalPlacedTextSymbolIndex];for(const D of P)D>=0&&(o.text.placedSymbolArray.get(D).crossTileID=T>=0&&D!==T?0:v.crossTileID)}markUsedOrientation(o,f,v){const b=f===l.ai.horizontal||f===l.ai.horizontalOnly?f:0,T=f===l.ai.vertical?f:0,P=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex];for(const D of P)o.text.placedSymbolArray.get(D).placedOrientation=b;v.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(v.verticalPlacedTextSymbolIndex).placedOrientation=T)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let v=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const b=f?f.symbolFadeChange(o):1,T=f?f.opacities:{},P=f?f.variableOffsets:{},D=f?f.placedOrientations:{};for(const R in this.placements){const N=this.placements[R],G=T[R];G?(this.opacities[R]=new He(G,b,N.text,N.icon),v=v||N.text!==G.text.placed||N.icon!==G.icon.placed):(this.opacities[R]=new He(null,b,N.text,N.icon,N.skipFade),v=v||N.text||N.icon)}for(const R in T){const N=T[R];if(!this.opacities[R]){const G=new He(N,b,!1,!1);G.isHidden()||(this.opacities[R]=G,v=v||N.text.placed||N.icon.placed)}}for(const R in P)this.variableOffsets[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.variableOffsets[R]=P[R]);for(const R in D)this.placedOrientations[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.placedOrientations[R]=D[R]);if(f&&f.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");v?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:o)}updateLayerOpacities(o,f){const v={};for(const b of f){const T=b.getBucket(o);T&&b.latestFeatureIndex&&o.id===T.layerIds[0]&&this.updateBucketOpacities(T,v,b.collisionBoxArray)}}updateBucketOpacities(o,f,v){o.hasTextData()&&(o.text.opacityVertexArray.clear(),o.text.hasVisibleVertices=!1),o.hasIconData()&&(o.icon.opacityVertexArray.clear(),o.icon.hasVisibleVertices=!1),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const b=o.layers[0],T=b.layout,P=new He(null,0,!1,!1,!0),D=T.get("text-allow-overlap"),R=T.get("icon-allow-overlap"),N=b._unevaluatedLayout.hasValue("text-variable-anchor")||b._unevaluatedLayout.hasValue("text-variable-anchor-offset"),G=T.get("text-rotation-alignment")==="map",X=T.get("text-pitch-alignment")==="map",oe=T.get("icon-text-fit")!=="none",we=new He(null,0,D&&(R||!o.hasIconData()||T.get("icon-optional")),R&&(D||!o.hasTextData()||T.get("text-optional")),!0);!o.collisionArrays&&v&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(v);const xe=(Me,ge,Ze)=>{for(let ct=0;ct<ge/4;ct++)Me.opacityVertexArray.emplaceBack(Ze);Me.hasVisibleVertices=Me.hasVisibleVertices||Ze!==ci};for(let Me=0;Me<o.symbolInstances.length;Me++){const ge=o.symbolInstances.get(Me),{numHorizontalGlyphVertices:Ze,numVerticalGlyphVertices:ct,crossTileID:Le}=ge;let Ye=this.opacities[Le];f[Le]?Ye=P:Ye||(Ye=we,this.opacities[Le]=Ye),f[Le]=!0;const ht=ge.numIconVertices>0,pt=this.placedOrientations[ge.crossTileID],Pt=pt===l.ai.vertical,Bt=pt===l.ai.horizontal||pt===l.ai.horizontalOnly;if(Ze>0||ct>0){const Rt=Tn(Ye.text);xe(o.text,Ze,Pt?ci:Rt),xe(o.text,ct,Bt?ci:Rt);const Gt=Ye.text.isHidden();[ge.rightJustifiedTextSymbolIndex,ge.centerJustifiedTextSymbolIndex,ge.leftJustifiedTextSymbolIndex].forEach(Yt=>{Yt>=0&&(o.text.placedSymbolArray.get(Yt).hidden=Gt||Pt?1:0)}),ge.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(ge.verticalPlacedTextSymbolIndex).hidden=Gt||Bt?1:0);const mn=this.variableOffsets[ge.crossTileID];mn&&this.markUsedJustification(o,mn.anchor,ge,pt);const Kn=this.placedOrientations[ge.crossTileID];Kn&&(this.markUsedJustification(o,"left",ge,Kn),this.markUsedOrientation(o,Kn,ge))}if(ht){const Rt=Tn(Ye.icon),Gt=!(oe&&ge.verticalPlacedIconSymbolIndex&&Pt);ge.placedIconSymbolIndex>=0&&(xe(o.icon,ge.numIconVertices,Gt?Rt:ci),o.icon.placedSymbolArray.get(ge.placedIconSymbolIndex).hidden=Ye.icon.isHidden()),ge.verticalPlacedIconSymbolIndex>=0&&(xe(o.icon,ge.numVerticalIconVertices,Gt?ci:Rt),o.icon.placedSymbolArray.get(ge.verticalPlacedIconSymbolIndex).hidden=Ye.icon.isHidden())}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const Rt=o.collisionArrays[Me];if(Rt){let Gt=new l.P(0,0);if(Rt.textBox||Rt.verticalTextBox){let Kn=!0;if(N){const Yt=this.variableOffsets[Le];Yt?(Gt=In(Yt.anchor,Yt.width,Yt.height,Yt.textOffset,Yt.textBoxScale),G&&Gt._rotate(X?this.transform.angle:-this.transform.angle)):Kn=!1}Rt.textBox&&Rn(o.textCollisionBox.collisionVertexArray,Ye.text.placed,!Kn||Pt,Gt.x,Gt.y),Rt.verticalTextBox&&Rn(o.textCollisionBox.collisionVertexArray,Ye.text.placed,!Kn||Bt,Gt.x,Gt.y)}const mn=!!(!Bt&&Rt.verticalIconBox);Rt.iconBox&&Rn(o.iconCollisionBox.collisionVertexArray,Ye.icon.placed,mn,oe?Gt.x:0,oe?Gt.y:0),Rt.verticalIconBox&&Rn(o.iconCollisionBox.collisionVertexArray,Ye.icon.placed,!mn,oe?Gt.x:0,oe?Gt.y:0)}}}if(o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.text.opacityVertexArray.length!==o.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${o.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${o.text.layoutVertexArray.length}) / 4`);if(o.icon.opacityVertexArray.length!==o.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${o.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${o.icon.layoutVertexArray.length}) / 4`);if(o.bucketInstanceId in this.collisionCircleArrays){const Me=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=Me.invProjMatrix,o.placementViewportMatrix=Me.viewportMatrix,o.collisionCircleArray=Me.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,f){const v=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*v>o}setStale(){this.stale=!0}}function Rn(w,o,f,v,b){w.emplaceBack(o?1:0,f?1:0,v||0,b||0),w.emplaceBack(o?1:0,f?1:0,v||0,b||0),w.emplaceBack(o?1:0,f?1:0,v||0,b||0),w.emplaceBack(o?1:0,f?1:0,v||0,b||0)}const Wt=Math.pow(2,25),We=Math.pow(2,24),kt=Math.pow(2,17),ft=Math.pow(2,16),Ne=Math.pow(2,9),bt=Math.pow(2,8),zt=Math.pow(2,1);function Tn(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;const o=w.placed?1:0,f=Math.floor(127*w.opacity);return f*Wt+o*We+f*kt+o*ft+f*Ne+o*bt+f*zt+o}const ci=0;class Fi{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&!o.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(o,f,v,b,T){const P=this._bucketParts;for(;this._currentTileIndex<o.length;)if(f.getBucketParts(P,b,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,T())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,P.sort((D,R)=>D.sortKey-R.sortKey));this._currentPartIndex<P.length;)if(f.placeLayerBucketPart(P[this._currentPartIndex],this._seenCrossTileIDs,v),this._currentPartIndex++,T())return!0;return!1}}class Qn{constructor(o,f,v,b,T,P,D,R){this.placement=new bn(o,f,P,D,R),this._currentPlacementIndex=v.length-1,this._forceFullPlacement=b,this._showCollisionBoxes=T,this._done=!1}isDone(){return this._done}continuePlacement(o,f,v){const b=l.h.now(),T=()=>!this._forceFullPlacement&&l.h.now()-b>2;for(;this._currentPlacementIndex>=0;){const P=f[o[this._currentPlacementIndex]],D=this.placement.collisionIndex.transform.zoom;if(P.type==="symbol"&&(!P.minzoom||P.minzoom<=D)&&(!P.maxzoom||P.maxzoom>D)){if(this._inProgressLayer||(this._inProgressLayer=new Fi(P)),this._inProgressLayer.continuePlacement(v[P.source],this.placement,this._showCollisionBoxes,P,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const ns=512/l.N/2;class Gi{constructor(o,f,v){this.tileID=o,this.bucketInstanceId=v,this._symbolsByKey={};const b=new Map;for(let T=0;T<f.length;T++){const P=f.get(T),D=P.key,R=b.get(D);R?R.push(P):b.set(D,[P])}for(const[T,P]of b){const D={positions:P.map(R=>({x:Math.floor(R.anchorX*ns),y:Math.floor(R.anchorY*ns)})),crossTileIDs:P.map(R=>R.crossTileID)};if(D.positions.length>128){const R=new l.av(D.positions.length,16,Uint16Array);for(const{x:N,y:G}of D.positions)R.add(N,G);R.finish(),delete D.positions,D.index=R}this._symbolsByKey[T]=D}}getScaledCoordinates(o,f){const{x:v,y:b,z:T}=this.tileID.canonical,{x:P,y:D,z:R}=f.canonical,N=ns/Math.pow(2,R-T),G=(D*l.N+o.anchorY)*N,X=b*l.N*ns;return{x:Math.floor((P*l.N+o.anchorX)*N-v*l.N*ns),y:Math.floor(G-X)}}findMatches(o,f,v){const b=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z);for(let T=0;T<o.length;T++){const P=o.get(T);if(P.crossTileID)continue;const D=this._symbolsByKey[P.key];if(!D)continue;const R=this.getScaledCoordinates(P,f);if(D.index){const N=D.index.range(R.x-b,R.y-b,R.x+b,R.y+b).sort();for(const G of N){const X=D.crossTileIDs[G];if(!v[X]){v[X]=!0,P.crossTileID=X;break}}}else if(D.positions)for(let N=0;N<D.positions.length;N++){const G=D.positions[N],X=D.crossTileIDs[N];if(Math.abs(G.x-R.x)<=b&&Math.abs(G.y-R.y)<=b&&!v[X]){v[X]=!0,P.crossTileID=X;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:o})=>o)}}class hi{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class zl{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const f=Math.round((o-this.lng)/360);if(f!==0)for(const v in this.indexes){const b=this.indexes[v],T={};for(const P in b){const D=b[P];D.tileID=D.tileID.unwrapTo(D.tileID.wrap+f),T[D.tileID.key]=D}this.indexes[v]=T}this.lng=o}addBucket(o,f,v){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let T=0;T<f.symbolInstances.length;T++)f.symbolInstances.get(T).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});const b=this.usedCrossTileIDs[o.overscaledZ];for(const T in this.indexes){const P=this.indexes[T];if(Number(T)>o.overscaledZ)for(const D in P){const R=P[D];R.tileID.isChildOf(o)&&R.findMatches(f.symbolInstances,o,b)}else{const D=P[o.scaledTo(Number(T)).key];D&&D.findMatches(f.symbolInstances,o,b)}}for(let T=0;T<f.symbolInstances.length;T++){const P=f.symbolInstances.get(T);P.crossTileID||(P.crossTileID=v.generate(),b[P.crossTileID]=!0)}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new Gi(o,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(o,f){for(const v of f.getCrossTileIDsLists())for(const b of v)delete this.usedCrossTileIDs[o][b]}removeStaleBuckets(o){let f=!1;for(const v in this.indexes){const b=this.indexes[v];for(const T in b)o[b[T].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,b[T]),delete b[T],f=!0)}return f}}class Hc{constructor(){this.layerIndexes={},this.crossTileIDs=new hi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,f,v){let b=this.layerIndexes[o.id];b===void 0&&(b=this.layerIndexes[o.id]=new zl);let T=!1;const P={};b.handleWrapJump(v);for(const D of f){const R=D.getBucket(o);R&&o.id===R.layerIds[0]&&(R.bucketInstanceId||(R.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket(D.tileID,R,this.crossTileIDs)&&(T=!0),P[R.bucketInstanceId]=!0)}return b.removeStaleBuckets(P)&&(T=!0),T}pruneUnusedLayers(o){const f={};o.forEach(v=>{f[v]=!0});for(const v in this.layerIndexes)f[v]||delete this.layerIndexes[v]}}const Nr=(w,o)=>l.x(w,o&&o.filter(f=>f.identifier!=="source.canvas")),_s=l.F(l.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),Ey=l.F(l.ax,["setCenter","setZoom","setBearing","setPitch"]),Ns=l.aw();class Dr extends l.E{constructor(o,f={}){super(),this.map=o,this.dispatcher=new vt(jn(),this,o._getMapId()),this.imageManager=new te,this.imageManager.setEventedParent(this),this.glyphManager=new ye(o._requestManager,f.localIdeographFontFamily),this.lineAtlas=new It(256,512),this.crossTileSymbolIndex=new Hc,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.az());const v=this;this._rtlTextPluginCallback=Dr.registerForPluginStateChange(b=>{v.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:b.pluginStatus,pluginURL:b.pluginURL},(T,P)=>{if(l.aA(T),P&&P.every(D=>D))for(const D in v.sourceCaches){const R=v.sourceCaches[D].getSource().type;R!=="vector"&&R!=="geojson"||v.sourceCaches[D].reload()}})}),this.on("data",b=>{if(b.dataType!=="source"||b.sourceDataType!=="metadata")return;const T=this.sourceCaches[b.sourceId];if(!T)return;const P=T.getSource();if(P&&P.vectorLayerIds)for(const D in this._layers){const R=this._layers[D];R.source===P.id&&this._validateLayer(R)}})}loadURL(o,f={},v){this.fire(new l.k("dataloading",{dataType:"style"})),f.validate=typeof f.validate!="boolean"||f.validate;const b=this.map._requestManager.transformRequest(o,z.Style);this._request=l.f(b,(T,P)=>{this._request=null,T?this.fire(new l.j(T)):P&&this._load(P,f,v)})}loadJSON(o,f={},v){this.fire(new l.k("dataloading",{dataType:"style"})),this._request=l.h.frame(()=>{this._request=null,f.validate=f.validate!==!1,this._load(o,f,v)})}loadEmpty(){this.fire(new l.k("dataloading",{dataType:"style"})),this._load(Ns,{validate:!1})}_load(o,f,v){var b;const T=f.transformStyle?f.transformStyle(v,o):o;if(!f.validate||!Nr(this,l.y(T))){this._loaded=!0,this.stylesheet=T;for(const P in T.sources)this.addSource(P,T.sources[P],{validate:!1});T.sprite?this._loadSprite(T.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(T.glyphs),this._createLayers(),this.light=new Qe(this.stylesheet.light),this.map.setTerrain((b=this.stylesheet.terrain)!==null&&b!==void 0?b:null),this.fire(new l.k("data",{dataType:"style"})),this.fire(new l.k("style.load"))}}_createLayers(){const o=l.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",o),this._order=o.map(f=>f.id),this._layers={},this._serializedLayers=null;for(const f of o){const v=l.aC(f);v.setEventedParent(this,{layer:{id:f.id}}),this._layers[f.id]=v}}_loadSprite(o,f=!1,v=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(b,T,P,D){const R=se(b),N=R.length,G=P>1?"@2x":"",X={},oe={},we={};for(const{id:xe,url:Me}of R){const ge=T.transformRequest(T.normalizeSpriteURL(Me,G,".json"),z.SpriteJSON),Ze=`${xe}_${ge.url}`;X[Ze]=l.f(ge,(Ye,ht)=>{delete X[Ze],oe[xe]=ht,K(D,oe,we,Ye,N)});const ct=T.transformRequest(T.normalizeSpriteURL(Me,G,".png"),z.SpriteImage),Le=`${xe}_${ct.url}`;X[Le]=F.getImage(ct,(Ye,ht)=>{delete X[Le],we[xe]=ht,K(D,oe,we,Ye,N)})}return{cancel(){for(const xe of Object.values(X))xe.cancel()}}}(o,this.map._requestManager,this.map.getPixelRatio(),(b,T)=>{if(this._spriteRequest=null,b)this.fire(new l.j(b));else if(T)for(const P in T){this._spritesImagesIds[P]=[];const D=this._spritesImagesIds[P]?this._spritesImagesIds[P].filter(R=>!(R in T)):[];for(const R of D)this.imageManager.removeImage(R),this._changedImages[R]=!0;for(const R in T[P]){const N=P==="default"?R:`${P}:${R}`;this._spritesImagesIds[P].push(N),N in this.imageManager.images?this.imageManager.updateImage(N,T[P][R],!1):this.imageManager.addImage(N,T[P][R]),f&&(this._changedImages[N]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),f&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"})),v&&v(b)})}_unloadSprite(){for(const o of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(o),this._changedImages[o]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}_validateLayer(o){const f=this.sourceCaches[o.source];if(!f)return;const v=o.sourceLayer;if(!v)return;const b=f.getSource();(b.type==="geojson"||b.vectorLayerIds&&b.vectorLayerIds.indexOf(v)===-1)&&this.fire(new l.j(new Error(`Source layer "${v}" does not exist on source "${b.id}" as specified by style layer "${o.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(o){const f=this._serializedAllLayers();if(!o||o.length===0)return Object.values(f);const v=[];for(const b of o)f[b]&&v.push(f[b]);return v}_serializedAllLayers(){let o=this._serializedLayers;if(o)return o;o=this._serializedLayers={};const f=Object.keys(this._layers);for(const v of f){const b=this._layers[v];b.type!=="custom"&&(o[v]=b.serialize())}return o}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const o in this.sourceCaches)if(this.sourceCaches[o].hasTransition())return!0;for(const o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(o){if(!this._loaded)return;const f=this._changed;if(this._changed){const b=Object.keys(this._updatedLayers),T=Object.keys(this._removedLayers);(b.length||T.length)&&this._updateWorkerLayers(b,T);for(const P in this._updatedSources){const D=this._updatedSources[P];if(D==="reload")this._reloadSource(P);else{if(D!=="clear")throw new Error(`Invalid action ${D}`);this._clearSource(P)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const P in this._updatedPaintProps)this._layers[P].updateTransitions(o);this.light.updateTransitions(o),this._resetUpdates()}const v={};for(const b in this.sourceCaches){const T=this.sourceCaches[b];v[b]=T.used,T.used=!1}for(const b of this._order){const T=this._layers[b];T.recalculate(o,this._availableImages),!T.isHidden(o.zoom)&&T.source&&(this.sourceCaches[T.source].used=!0)}for(const b in v){const T=this.sourceCaches[b];v[b]!==T.used&&T.fire(new l.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:b}))}this.light.recalculate(o),this.z=o.zoom,f&&this.fire(new l.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=Object.keys(this._changedImages);if(o.length){for(const f in this.sourceCaches)this.sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(o,f){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(o),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(o,f={}){this._checkLoaded();const v=this.serialize();if(o=f.transformStyle?f.transformStyle(v,o):o,Nr(this,l.y(o)))return!1;(o=l.aD(o)).layers=l.aB(o.layers);const b=l.aE(v,o).filter(P=>!(P.command in Ey));if(b.length===0)return!1;const T=b.filter(P=>!(P.command in _s));if(T.length>0)throw new Error(`Unimplemented: ${T.map(P=>P.command).join(", ")}.`);for(const P of b)P.command!=="setTransition"&&this[P.command].apply(this,P.args);return this.stylesheet=o,this._serializedLayers=null,!0}addImage(o,f){if(this.getImage(o))return this.fire(new l.j(new Error(`An image named "${o}" already exists.`)));this.imageManager.addImage(o,f),this._afterImageUpdated(o)}updateImage(o,f){this.imageManager.updateImage(o,f)}getImage(o){return this.imageManager.getImage(o)}removeImage(o){if(!this.getImage(o))return this.fire(new l.j(new Error(`An image named "${o}" does not exist.`)));this.imageManager.removeImage(o),this._afterImageUpdated(o)}_afterImageUpdated(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(o,f,v={}){if(this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error(`Source "${o}" already exists.`);if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(l.y.source,`sources.${o}`,f,null,v))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const b=this.sourceCaches[o]=new mt(o,f,this.dispatcher);b.style=this,b.setEventedParent(this,()=>({isSourceLoaded:b.loaded(),source:b.serialize(),sourceId:o})),b.onAdd(this.map),this._changed=!0}removeSource(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===o)return this.fire(new l.j(new Error(`Source "${o}" cannot be removed while layer "${v}" is using it.`)));const f=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],f.fire(new l.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),f.setEventedParent(null),f.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(o,f){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error(`There is no source with this ID=${o}`);const v=this.sourceCaches[o].getSource();if(v.type!=="geojson")throw new Error(`geojsonSource.type is ${v.type}, which is !== 'geojson`);v.setData(f),this._changed=!0}getSource(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()}addLayer(o,f,v={}){this._checkLoaded();const b=o.id;if(this.getLayer(b))return void this.fire(new l.j(new Error(`Layer "${b}" already exists on this map.`)));let T;if(o.type==="custom"){if(Nr(this,l.aF(o)))return;T=l.aC(o)}else{if("source"in o&&typeof o.source=="object"&&(this.addSource(b,o.source),o=l.aD(o),o=l.e(o,{source:b})),this._validate(l.y.layer,`layers.${b}`,o,{arrayIndex:-1},v))return;T=l.aC(o),this._validateLayer(T),T.setEventedParent(this,{layer:{id:b}})}const P=f?this._order.indexOf(f):this._order.length;if(f&&P===-1)this.fire(new l.j(new Error(`Cannot add layer "${b}" before non-existing layer "${f}".`)));else{if(this._order.splice(P,0,b),this._layerOrderChanged=!0,this._layers[b]=T,this._removedLayers[b]&&T.source&&T.type!=="custom"){const D=this._removedLayers[b];delete this._removedLayers[b],D.type!==T.type?this._updatedSources[T.source]="clear":(this._updatedSources[T.source]="reload",this.sourceCaches[T.source].pause())}this._updateLayer(T),T.onAdd&&T.onAdd(this.map)}}moveLayer(o,f){if(this._checkLoaded(),this._changed=!0,!this._layers[o])return void this.fire(new l.j(new Error(`The layer '${o}' does not exist in the map's style and cannot be moved.`)));if(o===f)return;const v=this._order.indexOf(o);this._order.splice(v,1);const b=f?this._order.indexOf(f):this._order.length;f&&b===-1?this.fire(new l.j(new Error(`Cannot move layer "${o}" before non-existing layer "${f}".`))):(this._order.splice(b,0,o),this._layerOrderChanged=!0)}removeLayer(o){this._checkLoaded();const f=this._layers[o];if(!f)return void this.fire(new l.j(new Error(`Cannot remove non-existing layer "${o}".`)));f.setEventedParent(null);const v=this._order.indexOf(o);this._order.splice(v,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=f,delete this._layers[o],this._serializedLayers&&delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],f.onRemove&&f.onRemove(this.map)}getLayer(o){return this._layers[o]}getLayersOrder(){return[...this._order]}hasLayer(o){return o in this._layers}setLayerZoomRange(o,f,v){this._checkLoaded();const b=this.getLayer(o);b?b.minzoom===f&&b.maxzoom===v||(f!=null&&(b.minzoom=f),v!=null&&(b.maxzoom=v),this._updateLayer(b)):this.fire(new l.j(new Error(`Cannot set the zoom range of non-existing layer "${o}".`)))}setFilter(o,f,v={}){this._checkLoaded();const b=this.getLayer(o);if(b){if(!l.aG(b.filter,f))return f==null?(b.filter=void 0,void this._updateLayer(b)):void(this._validate(l.y.filter,`layers.${b.id}.filter`,f,null,v)||(b.filter=l.aD(f),this._updateLayer(b)))}else this.fire(new l.j(new Error(`Cannot filter non-existing layer "${o}".`)))}getFilter(o){return l.aD(this.getLayer(o).filter)}setLayoutProperty(o,f,v,b={}){this._checkLoaded();const T=this.getLayer(o);T?l.aG(T.getLayoutProperty(f),v)||(T.setLayoutProperty(f,v,b),this._updateLayer(T)):this.fire(new l.j(new Error(`Cannot style non-existing layer "${o}".`)))}getLayoutProperty(o,f){const v=this.getLayer(o);if(v)return v.getLayoutProperty(f);this.fire(new l.j(new Error(`Cannot get style of non-existing layer "${o}".`)))}setPaintProperty(o,f,v,b={}){this._checkLoaded();const T=this.getLayer(o);T?l.aG(T.getPaintProperty(f),v)||(T.setPaintProperty(f,v,b)&&this._updateLayer(T),this._changed=!0,this._updatedPaintProps[o]=!0):this.fire(new l.j(new Error(`Cannot style non-existing layer "${o}".`)))}getPaintProperty(o,f){return this.getLayer(o).getPaintProperty(f)}setFeatureState(o,f){this._checkLoaded();const v=o.source,b=o.sourceLayer,T=this.sourceCaches[v];if(T===void 0)return void this.fire(new l.j(new Error(`The source '${v}' does not exist in the map's style.`)));const P=T.getSource().type;P==="geojson"&&b?this.fire(new l.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):P!=="vector"||b?(o.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),T.setFeatureState(b,o.id,f)):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(o,f){this._checkLoaded();const v=o.source,b=this.sourceCaches[v];if(b===void 0)return void this.fire(new l.j(new Error(`The source '${v}' does not exist in the map's style.`)));const T=b.getSource().type,P=T==="vector"?o.sourceLayer:void 0;T!=="vector"||P?f&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new l.j(new Error("A feature id is required to remove its specific state property."))):b.removeFeatureState(P,o.id,f):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(o){this._checkLoaded();const f=o.source,v=o.sourceLayer,b=this.sourceCaches[f];if(b!==void 0)return b.getSource().type!=="vector"||v?(o.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),b.getFeatureState(v,o.id)):void this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.j(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const o=l.aH(this.sourceCaches,T=>T.serialize()),f=this._serializeByIds(this._order),v=this.map.getTerrain()||void 0,b=this.stylesheet;return l.aI({version:b.version,name:b.name,metadata:b.metadata,light:b.light,center:b.center,zoom:b.zoom,bearing:b.bearing,pitch:b.pitch,sprite:b.sprite,glyphs:b.glyphs,transition:b.transition,sources:o,layers:f,terrain:v},T=>T!==void 0)}_updateLayer(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(o){const f=P=>this._layers[P].type==="fill-extrusion",v={},b=[];for(let P=this._order.length-1;P>=0;P--){const D=this._order[P];if(f(D)){v[D]=P;for(const R of o){const N=R[D];if(N)for(const G of N)b.push(G)}}}b.sort((P,D)=>D.intersectionZ-P.intersectionZ);const T=[];for(let P=this._order.length-1;P>=0;P--){const D=this._order[P];if(f(D))for(let R=b.length-1;R>=0;R--){const N=b[R].feature;if(v[N.layer.id]<P)break;T.push(N),b.pop()}else for(const R of o){const N=R[D];if(N)for(const G of N)T.push(G.feature)}}return T}queryRenderedFeatures(o,f,v){f&&f.filter&&this._validate(l.y.filter,"queryRenderedFeatures.filter",f.filter,null,f);const b={};if(f&&f.layers){if(!Array.isArray(f.layers))return this.fire(new l.j(new Error("parameters.layers must be an Array."))),[];for(const D of f.layers){const R=this._layers[D];if(!R)return this.fire(new l.j(new Error(`The layer '${D}' does not exist in the map's style and cannot be queried for features.`))),[];b[R.source]=!0}}const T=[];f.availableImages=this._availableImages;const P=this._serializedAllLayers();for(const D in this.sourceCaches)f.layers&&!b[D]||T.push(Z(this.sourceCaches[D],this._layers,P,o,f,v));return this.placement&&T.push(function(D,R,N,G,X,oe,we){const xe={},Me=oe.queryRenderedSymbols(G),ge=[];for(const Ze of Object.keys(Me).map(Number))ge.push(we[Ze]);ge.sort(he);for(const Ze of ge){const ct=Ze.featureIndex.lookupSymbolFeatures(Me[Ze.bucketInstanceId],R,Ze.bucketIndex,Ze.sourceLayerIndex,X.filter,X.layers,X.availableImages,D);for(const Le in ct){const Ye=xe[Le]=xe[Le]||[],ht=ct[Le];ht.sort((pt,Pt)=>{const Bt=Ze.featureSortOrder;if(Bt){const Rt=Bt.indexOf(pt.featureIndex);return Bt.indexOf(Pt.featureIndex)-Rt}return Pt.featureIndex-pt.featureIndex});for(const pt of ht)Ye.push(pt)}}for(const Ze in xe)xe[Ze].forEach(ct=>{const Le=ct.feature,Ye=N[D[Ze].source].getFeatureState(Le.layer["source-layer"],Le.id);Le.source=Le.layer.source,Le.layer["source-layer"]&&(Le.sourceLayer=Le.layer["source-layer"]),Le.state=Ye});return xe}(this._layers,P,this.sourceCaches,o,f,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(T)}querySourceFeatures(o,f){f&&f.filter&&this._validate(l.y.filter,"querySourceFeatures.filter",f.filter,null,f);const v=this.sourceCaches[o];return v?function(b,T){const P=b.getRenderableIds().map(N=>b.getTileByID(N)),D=[],R={};for(let N=0;N<P.length;N++){const G=P[N],X=G.tileID.canonical.key;R[X]||(R[X]=!0,G.querySourceFeatures(D,T))}return D}(v,f):[]}addSourceType(o,f,v){return Ie(o)?v(new Error(`A source type called "${o}" already exists.`)):(((b,T)=>{me[b]=T})(o,f),f.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:f.workerSourceURL},v):v(null,null))}getLight(){return this.light.getLight()}setLight(o,f={}){this._checkLoaded();const v=this.light.getLight();let b=!1;for(const P in o)if(!l.aG(o[P],v[P])){b=!0;break}if(!b)return;const T={now:l.h.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,f),this.light.updateTransitions(T)}_validate(o,f,v,b,T={}){return(!T||T.validate!==!1)&&Nr(this,o.call(l.y,l.e({key:f,style:this.serialize(),value:v,styleSpec:l.v},b)))}_remove(o=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const f in this._layers)this._layers[f].setEventedParent(null);for(const f in this.sourceCaches){const v=this.sourceCaches[f];v.setEventedParent(null),v.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(o)}_clearSource(o){this.sourceCaches[o].clearTiles()}_reloadSource(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()}_updateSources(o){for(const f in this.sourceCaches)this.sourceCaches[f].update(o,this.map.terrain)}_generateCollisionBoxes(){for(const o in this.sourceCaches)this._reloadSource(o)}_updatePlacement(o,f,v,b,T=!1){let P=!1,D=!1;const R={};for(const N of this._order){const G=this._layers[N];if(G.type!=="symbol")continue;if(!R[G.source]){const oe=this.sourceCaches[G.source];R[G.source]=oe.getRenderableIds(!0).map(we=>oe.getTileByID(we)).sort((we,xe)=>xe.tileID.overscaledZ-we.tileID.overscaledZ||(we.tileID.isLessThan(xe.tileID)?-1:1))}const X=this.crossTileSymbolIndex.addLayer(G,R[G.source],o.center.lng);P=P||X}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((T=T||this._layerOrderChanged||v===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.h.now(),o.zoom))&&(this.pauseablePlacement=new Qn(o,this.map.terrain,this._order,T,f,v,b,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,R),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.h.now()),D=!0),P&&this.pauseablePlacement.placement.setStale()),D||P)for(const N of this._order){const G=this._layers[N];G.type==="symbol"&&this.placement.updateLayerOpacities(G,R[G.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.h.now())}_releaseSymbolFadeTiles(){for(const o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()}getImages(o,f,v){this.imageManager.getImages(f.icons,v),this._updateTilesForChangedImages();const b=this.sourceCaches[f.source];b&&b.setDependencies(f.tileID.key,f.type,f.icons)}getGlyphs(o,f,v){this.glyphManager.getGlyphs(f.stacks,v);const b=this.sourceCaches[f.source];b&&b.setDependencies(f.tileID.key,f.type,[""])}getResource(o,f,v){return l.m(f,v)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(o,f={}){this._checkLoaded(),o&&this._validate(l.y.glyphs,"glyphs",o,null,f)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=o,this.glyphManager.entries={},this.glyphManager.setURL(o))}addSprite(o,f,v={},b){this._checkLoaded();const T=[{id:o,url:f}],P=[...se(this.stylesheet.sprite),...T];this._validate(l.y.sprite,"sprite",P,null,v)||(this.stylesheet.sprite=P,this._loadSprite(T,!0,b))}removeSprite(o){this._checkLoaded();const f=se(this.stylesheet.sprite);if(f.find(v=>v.id===o)){if(this._spritesImagesIds[o])for(const v of this._spritesImagesIds[o])this.imageManager.removeImage(v),this._changedImages[v]=!0;f.splice(f.findIndex(v=>v.id===o),1),this.stylesheet.sprite=f.length>0?f:void 0,delete this._spritesImagesIds[o],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}else this.fire(new l.j(new Error(`Sprite "${o}" doesn't exists on this map.`)))}getSprite(){return se(this.stylesheet.sprite)}setSprite(o,f={},v){this._checkLoaded(),o&&this._validate(l.y.sprite,"sprite",o,null,f)||(this.stylesheet.sprite=o,o?this._loadSprite(o,!0,v):(this._unloadSprite(),v&&v(null)))}}Dr.registerForPluginStateChange=l.aK;var rd=l.Q([{name:"a_pos",type:"Int16",components:2}]),Nl="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Ni={prelude:pi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:pi(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:pi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:pi(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:pi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:pi(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:pi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:pi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:pi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:pi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:pi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:pi(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:pi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:pi(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:pi(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:pi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:pi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:pi(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:pi(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:pi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:pi(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:pi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:pi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:pi(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:pi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:pi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:pi("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Nl),terrainDepth:pi("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Nl),terrainCoords:pi("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Nl)};function pi(w,o){const f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=o.match(/attribute ([\w]+) ([\w]+)/g),b=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=T?T.concat(b):b,D={};return{fragmentSource:w=w.replace(f,(R,N,G,X,oe)=>(D[oe]=!0,N==="define"?`
#ifndef HAS_UNIFORM_u_${oe}
varying ${G} ${X} ${oe};
#else
uniform ${G} ${X} u_${oe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${oe}
    ${G} ${X} ${oe} = u_${oe};
#endif
`)),vertexSource:o=o.replace(f,(R,N,G,X,oe)=>{const we=X==="float"?"vec2":"vec4",xe=oe.match(/color/)?"color":we;return D[oe]?N==="define"?`
#ifndef HAS_UNIFORM_u_${oe}
uniform lowp float u_${oe}_t;
attribute ${G} ${we} a_${oe};
varying ${G} ${X} ${oe};
#else
uniform ${G} ${X} u_${oe};
#endif
`:xe==="vec4"?`
#ifndef HAS_UNIFORM_u_${oe}
    ${oe} = a_${oe};
#else
    ${G} ${X} ${oe} = u_${oe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${oe}
    ${oe} = unpack_mix_${xe}(a_${oe}, u_${oe}_t);
#else
    ${G} ${X} ${oe} = u_${oe};
#endif
`:N==="define"?`
#ifndef HAS_UNIFORM_u_${oe}
uniform lowp float u_${oe}_t;
attribute ${G} ${we} a_${oe};
#else
uniform ${G} ${X} u_${oe};
#endif
`:xe==="vec4"?`
#ifndef HAS_UNIFORM_u_${oe}
    ${G} ${X} ${oe} = a_${oe};
#else
    ${G} ${X} ${oe} = u_${oe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${oe}
    ${G} ${X} ${oe} = unpack_mix_${xe}(a_${oe}, u_${oe}_t);
#else
    ${G} ${X} ${oe} = u_${oe};
#endif
`}),staticAttributes:v,staticUniforms:P}}class Qo{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(o,f,v,b,T,P,D,R,N){this.context=o;let G=this.boundPaintVertexBuffers.length!==b.length;for(let X=0;!G&&X<b.length;X++)this.boundPaintVertexBuffers[X]!==b[X]&&(G=!0);!this.vao||this.boundProgram!==f||this.boundLayoutVertexBuffer!==v||G||this.boundIndexBuffer!==T||this.boundVertexOffset!==P||this.boundDynamicVertexBuffer!==D||this.boundDynamicVertexBuffer2!==R||this.boundDynamicVertexBuffer3!==N?this.freshBind(f,v,b,T,P,D,R,N):(o.bindVertexArray.set(this.vao),D&&D.bind(),T&&T.dynamicDraw&&T.bind(),R&&R.bind(),N&&N.bind())}freshBind(o,f,v,b,T,P,D,R){const N=o.numAttributes,G=this.context,X=G.gl;this.vao&&this.destroy(),this.vao=G.createVertexArray(),G.bindVertexArray.set(this.vao),this.boundProgram=o,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=b,this.boundVertexOffset=T,this.boundDynamicVertexBuffer=P,this.boundDynamicVertexBuffer2=D,this.boundDynamicVertexBuffer3=R,f.enableAttributes(X,o);for(const oe of v)oe.enableAttributes(X,o);P&&P.enableAttributes(X,o),D&&D.enableAttributes(X,o),R&&R.enableAttributes(X,o),f.bind(),f.setVertexAttribPointers(X,o,T);for(const oe of v)oe.bind(),oe.setVertexAttribPointers(X,o,T);P&&(P.bind(),P.setVertexAttribPointers(X,o,T)),b&&b.bind(),D&&(D.bind(),D.setVertexAttribPointers(X,o,T)),R&&(R.bind(),R.setVertexAttribPointers(X,o,T)),G.currentNumAttributes=N}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Wi(w){const o=[];for(let f=0;f<w.length;f++){if(w[f]===null)continue;const v=w[f].split(" ");o.push(v.pop())}return o}class sd{constructor(o,f,v,b,T,P){const D=o.gl;this.program=D.createProgram();const R=Wi(f.staticAttributes),N=v?v.getBinderAttributes():[],G=R.concat(N),X=Ni.prelude.staticUniforms?Wi(Ni.prelude.staticUniforms):[],oe=f.staticUniforms?Wi(f.staticUniforms):[],we=v?v.getBinderUniforms():[],xe=X.concat(oe).concat(we),Me=[];for(const pt of xe)Me.indexOf(pt)<0&&Me.push(pt);const ge=v?v.defines():[];T&&ge.push("#define OVERDRAW_INSPECTOR;"),P&&ge.push("#define TERRAIN3D;");const Ze=ge.concat(Ni.prelude.fragmentSource,f.fragmentSource).join(`
`),ct=ge.concat(Ni.prelude.vertexSource,f.vertexSource).join(`
`),Le=D.createShader(D.FRAGMENT_SHADER);if(D.isContextLost())return void(this.failedToCreate=!0);if(D.shaderSource(Le,Ze),D.compileShader(Le),!D.getShaderParameter(Le,D.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${D.getShaderInfoLog(Le)}`);D.attachShader(this.program,Le);const Ye=D.createShader(D.VERTEX_SHADER);if(D.isContextLost())return void(this.failedToCreate=!0);if(D.shaderSource(Ye,ct),D.compileShader(Ye),!D.getShaderParameter(Ye,D.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${D.getShaderInfoLog(Ye)}`);D.attachShader(this.program,Ye),this.attributes={};const ht={};this.numAttributes=G.length;for(let pt=0;pt<this.numAttributes;pt++)G[pt]&&(D.bindAttribLocation(this.program,pt,G[pt]),this.attributes[G[pt]]=pt);if(D.linkProgram(this.program),!D.getProgramParameter(this.program,D.LINK_STATUS))throw new Error(`Program failed to link: ${D.getProgramInfoLog(this.program)}`);D.deleteShader(Ye),D.deleteShader(Le);for(let pt=0;pt<Me.length;pt++){const Pt=Me[pt];if(Pt&&!ht[Pt]){const Bt=D.getUniformLocation(this.program,Pt);Bt&&(ht[Pt]=Bt)}}this.fixedUniforms=b(o,ht),this.terrainUniforms=((pt,Pt)=>({u_depth:new l.aL(pt,Pt.u_depth),u_terrain:new l.aL(pt,Pt.u_terrain),u_terrain_dim:new l.aM(pt,Pt.u_terrain_dim),u_terrain_matrix:new l.aN(pt,Pt.u_terrain_matrix),u_terrain_unpack:new l.aO(pt,Pt.u_terrain_unpack),u_terrain_exaggeration:new l.aM(pt,Pt.u_terrain_exaggeration)}))(o,ht),this.binderUniforms=v?v.getUniforms(o,ht):[]}draw(o,f,v,b,T,P,D,R,N,G,X,oe,we,xe,Me,ge,Ze,ct){const Le=o.gl;if(this.failedToCreate)return;if(o.program.set(this.program),o.setDepthMode(v),o.setStencilMode(b),o.setColorMode(T),o.setCullFace(P),R){o.activeTexture.set(Le.TEXTURE2),Le.bindTexture(Le.TEXTURE_2D,R.depthTexture),o.activeTexture.set(Le.TEXTURE3),Le.bindTexture(Le.TEXTURE_2D,R.texture);for(const ht in this.terrainUniforms)this.terrainUniforms[ht].set(R[ht])}for(const ht in this.fixedUniforms)this.fixedUniforms[ht].set(D[ht]);Me&&Me.setUniforms(o,this.binderUniforms,we,{zoom:xe});let Ye=0;switch(f){case Le.LINES:Ye=2;break;case Le.TRIANGLES:Ye=3;break;case Le.LINE_STRIP:Ye=1}for(const ht of oe.get()){const pt=ht.vaos||(ht.vaos={});(pt[N]||(pt[N]=new Qo)).bind(o,this,G,Me?Me.getPaintVertexBuffers():[],X,ht.vertexOffset,ge,Ze,ct),Le.drawElements(f,ht.primitiveLength*Ye,Le.UNSIGNED_SHORT,ht.primitiveOffset*Ye*2)}}}function Bs(w,o,f){const v=1/Be(f,1,o.transform.tileZoom),b=Math.pow(2,f.tileID.overscaledZ),T=f.tileSize*Math.pow(2,o.transform.tileZoom)/b,P=T*(f.tileID.canonical.x+f.tileID.wrap*b),D=T*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture.size,u_scale:[v,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[P>>16,D>>16],u_pixel_coord_lower:[65535&P,65535&D]}}const Gh=(w,o,f,v)=>{const b=o.style.light,T=b.properties.get("position"),P=[T.x,T.y,T.z],D=function(){var N=new l.A(9);return l.A!=Float32Array&&(N[1]=0,N[2]=0,N[3]=0,N[5]=0,N[6]=0,N[7]=0),N[0]=1,N[4]=1,N[8]=1,N}();b.properties.get("anchor")==="viewport"&&function(N,G){var X=Math.sin(G),oe=Math.cos(G);N[0]=oe,N[1]=X,N[2]=0,N[3]=-X,N[4]=oe,N[5]=0,N[6]=0,N[7]=0,N[8]=1}(D,-o.transform.angle),function(N,G,X){var oe=G[0],we=G[1],xe=G[2];N[0]=oe*X[0]+we*X[3]+xe*X[6],N[1]=oe*X[1]+we*X[4]+xe*X[7],N[2]=oe*X[2]+we*X[5]+xe*X[8]}(P,P,D);const R=b.properties.get("color");return{u_matrix:w,u_lightpos:P,u_lightintensity:b.properties.get("intensity"),u_lightcolor:[R.r,R.g,R.b],u_vertical_gradient:+f,u_opacity:v}},wo=(w,o,f,v,b,T,P)=>l.e(Gh(w,o,f,v),Bs(T,o,P),{u_height_factor:-Math.pow(2,b.overscaledZ)/P.tileSize/8}),Bm=w=>({u_matrix:w}),Wh=(w,o,f,v)=>l.e(Bm(w),Bs(f,o,v)),ad=(w,o)=>({u_matrix:w,u_world:o}),od=(w,o,f,v,b)=>l.e(Wh(w,o,f,v),{u_world:b}),So=(w,o,f,v)=>{const b=w.transform;let T,P;if(v.paint.get("circle-pitch-alignment")==="map"){const D=Be(f,1,b.zoom);T=!0,P=[D,D]}else T=!1,P=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+(v.paint.get("circle-pitch-scale")==="map"),u_matrix:w.translatePosMatrix(o.posMatrix,f,v.paint.get("circle-translate"),v.paint.get("circle-translate-anchor")),u_pitch_with_map:+T,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:P}},qh=(w,o,f)=>{const v=Be(f,1,o.zoom),b=Math.pow(2,o.zoom-f.tileID.overscaledZ),T=f.tileID.overscaleFactor();return{u_matrix:w,u_camera_to_center_distance:o.cameraToCenterDistance,u_pixels_to_tile_units:v,u_extrude_scale:[o.pixelsToGLUnits[0]/(v*b),o.pixelsToGLUnits[1]/(v*b)],u_overscale_factor:T}},Gc=(w,o,f=1)=>({u_matrix:w,u_color:o,u_overlay:0,u_overlay_scale:f}),jm=w=>({u_matrix:w}),Cy=(w,o,f,v)=>({u_matrix:w,u_extrude_scale:Be(o,1,f),u_intensity:v});function Zh(w,o){const f=Math.pow(2,o.canonical.z),v=o.canonical.y;return[new l.U(0,v/f).toLngLat().lat,new l.U(0,(v+1)/f).toLngLat().lat]}const Kh=(w,o,f,v)=>{const b=w.transform;return{u_matrix:ld(w,o,f,v),u_ratio:1/Be(o,1,b.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},Vm=(w,o,f,v,b)=>l.e(Kh(w,o,f,b),{u_image:0,u_image_height:v}),Iy=(w,o,f,v,b)=>{const T=w.transform,P=Hm(o,T);return{u_matrix:ld(w,o,f,b),u_texsize:o.imageAtlasTexture.size,u_ratio:1/Be(o,1,T.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[P,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/T.pixelsToGLUnits[0],1/T.pixelsToGLUnits[1]]}},Um=(w,o,f,v,b,T)=>{const P=w.lineAtlas,D=Hm(o,w.transform),R=f.layout.get("line-cap")==="round",N=P.getDash(v.from,R),G=P.getDash(v.to,R),X=N.width*b.fromScale,oe=G.width*b.toScale;return l.e(Kh(w,o,f,T),{u_patternscale_a:[D/X,-N.height/2],u_patternscale_b:[D/oe,-G.height/2],u_sdfgamma:P.width/(256*Math.min(X,oe)*w.pixelRatio)/2,u_image:0,u_tex_y_a:N.y,u_tex_y_b:G.y,u_mix:b.t})};function Hm(w,o){return 1/Be(w,1,o.tileZoom)}function ld(w,o,f,v){return w.translatePosMatrix(v?v.posMatrix:o.tileID.posMatrix,o,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}const Gm=(w,o,f,v,b)=>{return{u_matrix:w,u_tl_parent:o,u_scale_parent:f,u_buffer_scale:1,u_fade_t:v.mix,u_opacity:v.opacity*b.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:b.paint.get("raster-brightness-min"),u_brightness_high:b.paint.get("raster-brightness-max"),u_saturation_factor:(P=b.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(T=b.paint.get("raster-contrast"),T>0?1/(1-T):1+T),u_spin_weights:Wm(b.paint.get("raster-hue-rotate"))};var T,P};function Wm(w){w*=Math.PI/180;const o=Math.sin(w),f=Math.cos(w);return[(2*f+1)/3,(-Math.sqrt(3)*o-f+1)/3,(Math.sqrt(3)*o-f+1)/3]}const Xh=(w,o,f,v,b,T,P,D,R,N)=>{const G=b.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:G.cameraToCenterDistance,u_pitch:G.pitch/360*2*Math.PI,u_rotate_symbol:+f,u_aspect_ratio:G.width/G.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_matrix:T,u_label_plane_matrix:P,u_coord_matrix:D,u_is_text:+R,u_pitch_with_map:+v,u_texsize:N,u_texture:0}},Yh=(w,o,f,v,b,T,P,D,R,N,G)=>{const X=b.transform;return l.e(Xh(w,o,f,v,b,T,P,D,R,N),{u_gamma_scale:v?Math.cos(X._pitch)*X.cameraToCenterDistance:1,u_device_pixel_ratio:b.pixelRatio,u_is_halo:+G})},el=(w,o,f,v,b,T,P,D,R,N)=>l.e(Yh(w,o,f,v,b,T,P,D,!0,R,!0),{u_texsize_icon:N,u_texture_icon:1}),cd=(w,o,f)=>({u_matrix:w,u_opacity:o,u_color:f}),js=(w,o,f,v,b,T)=>l.e(function(P,D,R,N){const G=R.imageManager.getPattern(P.from.toString()),X=R.imageManager.getPattern(P.to.toString()),{width:oe,height:we}=R.imageManager.getPixelSize(),xe=Math.pow(2,N.tileID.overscaledZ),Me=N.tileSize*Math.pow(2,R.transform.tileZoom)/xe,ge=Me*(N.tileID.canonical.x+N.tileID.wrap*xe),Ze=Me*N.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:G.tl,u_pattern_br_a:G.br,u_pattern_tl_b:X.tl,u_pattern_br_b:X.br,u_texsize:[oe,we],u_mix:D.t,u_pattern_size_a:G.displaySize,u_pattern_size_b:X.displaySize,u_scale_a:D.fromScale,u_scale_b:D.toScale,u_tile_units_to_pixels:1/Be(N,1,R.transform.tileZoom),u_pixel_coord_upper:[ge>>16,Ze>>16],u_pixel_coord_lower:[65535&ge,65535&Ze]}}(v,T,f,b),{u_matrix:w,u_opacity:o}),ud={fillExtrusion:(w,o)=>({u_matrix:new l.aN(w,o.u_matrix),u_lightpos:new l.aP(w,o.u_lightpos),u_lightintensity:new l.aM(w,o.u_lightintensity),u_lightcolor:new l.aP(w,o.u_lightcolor),u_vertical_gradient:new l.aM(w,o.u_vertical_gradient),u_opacity:new l.aM(w,o.u_opacity)}),fillExtrusionPattern:(w,o)=>({u_matrix:new l.aN(w,o.u_matrix),u_lightpos:new l.aP(w,o.u_lightpos),u_lightintensity:new l.aM(w,o.u_lightintensity),u_lightcolor:new l.aP(w,o.u_lightcolor),u_vertical_gradient:new l.aM(w,o.u_vertical_gradient),u_height_factor:new l.aM(w,o.u_height_factor),u_image:new l.aL(w,o.u_image),u_texsize:new l.aQ(w,o.u_texsize),u_pixel_coord_upper:new l.aQ(w,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(w,o.u_pixel_coord_lower),u_scale:new l.aP(w,o.u_scale),u_fade:new l.aM(w,o.u_fade),u_opacity:new l.aM(w,o.u_opacity)}),fill:(w,o)=>({u_matrix:new l.aN(w,o.u_matrix)}),fillPattern:(w,o)=>({u_matrix:new l.aN(w,o.u_matrix),u_image:new l.aL(w,o.u_image),u_texsize:new l.aQ(w,o.u_texsize),u_pixel_coord_upper:new l.aQ(w,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(w,o.u_pixel_coord_lower),u_scale:new l.aP(w,o.u_scale),u_fade:new l.aM(w,o.u_fade)}),fillOutline:(w,o)=>({u_matrix:new l.aN(w,o.u_matrix),u_world:new l.aQ(w,o.u_world)}),fillOutlinePattern:(w,o)=>({u_matrix:new l.aN(w,o.u_matrix),u_world:new l.aQ(w,o.u_world),u_image:new l.aL(w,o.u_image),u_texsize:new l.aQ(w,o.u_texsize),u_pixel_coord_upper:new l.aQ(w,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(w,o.u_pixel_coord_lower),u_scale:new l.aP(w,o.u_scale),u_fade:new l.aM(w,o.u_fade)}),circle:(w,o)=>({u_camera_to_center_distance:new l.aM(w,o.u_camera_to_center_distance),u_scale_with_map:new l.aL(w,o.u_scale_with_map),u_pitch_with_map:new l.aL(w,o.u_pitch_with_map),u_extrude_scale:new l.aQ(w,o.u_extrude_scale),u_device_pixel_ratio:new l.aM(w,o.u_device_pixel_ratio),u_matrix:new l.aN(w,o.u_matrix)}),collisionBox:(w,o)=>({u_matrix:new l.aN(w,o.u_matrix),u_camera_to_center_distance:new l.aM(w,o.u_camera_to_center_distance),u_pixels_to_tile_units:new l.aM(w,o.u_pixels_to_tile_units),u_extrude_scale:new l.aQ(w,o.u_extrude_scale),u_overscale_factor:new l.aM(w,o.u_overscale_factor)}),collisionCircle:(w,o)=>({u_matrix:new l.aN(w,o.u_matrix),u_inv_matrix:new l.aN(w,o.u_inv_matrix),u_camera_to_center_distance:new l.aM(w,o.u_camera_to_center_distance),u_viewport_size:new l.aQ(w,o.u_viewport_size)}),debug:(w,o)=>({u_color:new l.aR(w,o.u_color),u_matrix:new l.aN(w,o.u_matrix),u_overlay:new l.aL(w,o.u_overlay),u_overlay_scale:new l.aM(w,o.u_overlay_scale)}),clippingMask:(w,o)=>({u_matrix:new l.aN(w,o.u_matrix)}),heatmap:(w,o)=>({u_extrude_scale:new l.aM(w,o.u_extrude_scale),u_intensity:new l.aM(w,o.u_intensity),u_matrix:new l.aN(w,o.u_matrix)}),heatmapTexture:(w,o)=>({u_matrix:new l.aN(w,o.u_matrix),u_world:new l.aQ(w,o.u_world),u_image:new l.aL(w,o.u_image),u_color_ramp:new l.aL(w,o.u_color_ramp),u_opacity:new l.aM(w,o.u_opacity)}),hillshade:(w,o)=>({u_matrix:new l.aN(w,o.u_matrix),u_image:new l.aL(w,o.u_image),u_latrange:new l.aQ(w,o.u_latrange),u_light:new l.aQ(w,o.u_light),u_shadow:new l.aR(w,o.u_shadow),u_highlight:new l.aR(w,o.u_highlight),u_accent:new l.aR(w,o.u_accent)}),hillshadePrepare:(w,o)=>({u_matrix:new l.aN(w,o.u_matrix),u_image:new l.aL(w,o.u_image),u_dimension:new l.aQ(w,o.u_dimension),u_zoom:new l.aM(w,o.u_zoom),u_unpack:new l.aO(w,o.u_unpack)}),line:(w,o)=>({u_matrix:new l.aN(w,o.u_matrix),u_ratio:new l.aM(w,o.u_ratio),u_device_pixel_ratio:new l.aM(w,o.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(w,o.u_units_to_pixels)}),lineGradient:(w,o)=>({u_matrix:new l.aN(w,o.u_matrix),u_ratio:new l.aM(w,o.u_ratio),u_device_pixel_ratio:new l.aM(w,o.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(w,o.u_units_to_pixels),u_image:new l.aL(w,o.u_image),u_image_height:new l.aM(w,o.u_image_height)}),linePattern:(w,o)=>({u_matrix:new l.aN(w,o.u_matrix),u_texsize:new l.aQ(w,o.u_texsize),u_ratio:new l.aM(w,o.u_ratio),u_device_pixel_ratio:new l.aM(w,o.u_device_pixel_ratio),u_image:new l.aL(w,o.u_image),u_units_to_pixels:new l.aQ(w,o.u_units_to_pixels),u_scale:new l.aP(w,o.u_scale),u_fade:new l.aM(w,o.u_fade)}),lineSDF:(w,o)=>({u_matrix:new l.aN(w,o.u_matrix),u_ratio:new l.aM(w,o.u_ratio),u_device_pixel_ratio:new l.aM(w,o.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(w,o.u_units_to_pixels),u_patternscale_a:new l.aQ(w,o.u_patternscale_a),u_patternscale_b:new l.aQ(w,o.u_patternscale_b),u_sdfgamma:new l.aM(w,o.u_sdfgamma),u_image:new l.aL(w,o.u_image),u_tex_y_a:new l.aM(w,o.u_tex_y_a),u_tex_y_b:new l.aM(w,o.u_tex_y_b),u_mix:new l.aM(w,o.u_mix)}),raster:(w,o)=>({u_matrix:new l.aN(w,o.u_matrix),u_tl_parent:new l.aQ(w,o.u_tl_parent),u_scale_parent:new l.aM(w,o.u_scale_parent),u_buffer_scale:new l.aM(w,o.u_buffer_scale),u_fade_t:new l.aM(w,o.u_fade_t),u_opacity:new l.aM(w,o.u_opacity),u_image0:new l.aL(w,o.u_image0),u_image1:new l.aL(w,o.u_image1),u_brightness_low:new l.aM(w,o.u_brightness_low),u_brightness_high:new l.aM(w,o.u_brightness_high),u_saturation_factor:new l.aM(w,o.u_saturation_factor),u_contrast_factor:new l.aM(w,o.u_contrast_factor),u_spin_weights:new l.aP(w,o.u_spin_weights)}),symbolIcon:(w,o)=>({u_is_size_zoom_constant:new l.aL(w,o.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(w,o.u_is_size_feature_constant),u_size_t:new l.aM(w,o.u_size_t),u_size:new l.aM(w,o.u_size),u_camera_to_center_distance:new l.aM(w,o.u_camera_to_center_distance),u_pitch:new l.aM(w,o.u_pitch),u_rotate_symbol:new l.aL(w,o.u_rotate_symbol),u_aspect_ratio:new l.aM(w,o.u_aspect_ratio),u_fade_change:new l.aM(w,o.u_fade_change),u_matrix:new l.aN(w,o.u_matrix),u_label_plane_matrix:new l.aN(w,o.u_label_plane_matrix),u_coord_matrix:new l.aN(w,o.u_coord_matrix),u_is_text:new l.aL(w,o.u_is_text),u_pitch_with_map:new l.aL(w,o.u_pitch_with_map),u_texsize:new l.aQ(w,o.u_texsize),u_texture:new l.aL(w,o.u_texture)}),symbolSDF:(w,o)=>({u_is_size_zoom_constant:new l.aL(w,o.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(w,o.u_is_size_feature_constant),u_size_t:new l.aM(w,o.u_size_t),u_size:new l.aM(w,o.u_size),u_camera_to_center_distance:new l.aM(w,o.u_camera_to_center_distance),u_pitch:new l.aM(w,o.u_pitch),u_rotate_symbol:new l.aL(w,o.u_rotate_symbol),u_aspect_ratio:new l.aM(w,o.u_aspect_ratio),u_fade_change:new l.aM(w,o.u_fade_change),u_matrix:new l.aN(w,o.u_matrix),u_label_plane_matrix:new l.aN(w,o.u_label_plane_matrix),u_coord_matrix:new l.aN(w,o.u_coord_matrix),u_is_text:new l.aL(w,o.u_is_text),u_pitch_with_map:new l.aL(w,o.u_pitch_with_map),u_texsize:new l.aQ(w,o.u_texsize),u_texture:new l.aL(w,o.u_texture),u_gamma_scale:new l.aM(w,o.u_gamma_scale),u_device_pixel_ratio:new l.aM(w,o.u_device_pixel_ratio),u_is_halo:new l.aL(w,o.u_is_halo)}),symbolTextAndIcon:(w,o)=>({u_is_size_zoom_constant:new l.aL(w,o.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(w,o.u_is_size_feature_constant),u_size_t:new l.aM(w,o.u_size_t),u_size:new l.aM(w,o.u_size),u_camera_to_center_distance:new l.aM(w,o.u_camera_to_center_distance),u_pitch:new l.aM(w,o.u_pitch),u_rotate_symbol:new l.aL(w,o.u_rotate_symbol),u_aspect_ratio:new l.aM(w,o.u_aspect_ratio),u_fade_change:new l.aM(w,o.u_fade_change),u_matrix:new l.aN(w,o.u_matrix),u_label_plane_matrix:new l.aN(w,o.u_label_plane_matrix),u_coord_matrix:new l.aN(w,o.u_coord_matrix),u_is_text:new l.aL(w,o.u_is_text),u_pitch_with_map:new l.aL(w,o.u_pitch_with_map),u_texsize:new l.aQ(w,o.u_texsize),u_texsize_icon:new l.aQ(w,o.u_texsize_icon),u_texture:new l.aL(w,o.u_texture),u_texture_icon:new l.aL(w,o.u_texture_icon),u_gamma_scale:new l.aM(w,o.u_gamma_scale),u_device_pixel_ratio:new l.aM(w,o.u_device_pixel_ratio),u_is_halo:new l.aL(w,o.u_is_halo)}),background:(w,o)=>({u_matrix:new l.aN(w,o.u_matrix),u_opacity:new l.aM(w,o.u_opacity),u_color:new l.aR(w,o.u_color)}),backgroundPattern:(w,o)=>({u_matrix:new l.aN(w,o.u_matrix),u_opacity:new l.aM(w,o.u_opacity),u_image:new l.aL(w,o.u_image),u_pattern_tl_a:new l.aQ(w,o.u_pattern_tl_a),u_pattern_br_a:new l.aQ(w,o.u_pattern_br_a),u_pattern_tl_b:new l.aQ(w,o.u_pattern_tl_b),u_pattern_br_b:new l.aQ(w,o.u_pattern_br_b),u_texsize:new l.aQ(w,o.u_texsize),u_mix:new l.aM(w,o.u_mix),u_pattern_size_a:new l.aQ(w,o.u_pattern_size_a),u_pattern_size_b:new l.aQ(w,o.u_pattern_size_b),u_scale_a:new l.aM(w,o.u_scale_a),u_scale_b:new l.aM(w,o.u_scale_b),u_pixel_coord_upper:new l.aQ(w,o.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(w,o.u_pixel_coord_lower),u_tile_units_to_pixels:new l.aM(w,o.u_tile_units_to_pixels)}),terrain:(w,o)=>({u_matrix:new l.aN(w,o.u_matrix),u_texture:new l.aL(w,o.u_texture),u_ele_delta:new l.aM(w,o.u_ele_delta)}),terrainDepth:(w,o)=>({u_matrix:new l.aN(w,o.u_matrix),u_ele_delta:new l.aM(w,o.u_ele_delta)}),terrainCoords:(w,o)=>({u_matrix:new l.aN(w,o.u_matrix),u_texture:new l.aL(w,o.u_texture),u_terrain_coords_id:new l.aM(w,o.u_terrain_coords_id),u_ele_delta:new l.aM(w,o.u_ele_delta)})};class dd{constructor(o,f,v){this.context=o;const b=o.gl;this.buffer=b.createBuffer(),this.dynamicDraw=!!v,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){const f=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Wc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class hd{constructor(o,f,v,b){this.length=f.length,this.attributes=v,this.itemSize=f.bytesPerElement,this.dynamicDraw=b,this.context=o;const T=o.gl;this.buffer=T.createBuffer(),o.bindVertexBuffer.set(this.buffer),T.bufferData(T.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){if(o.length!==this.length)throw new Error(`Length of new data is ${o.length}, which doesn't match current length of ${this.length}`);const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,f){for(let v=0;v<this.attributes.length;v++){const b=f.attributes[this.attributes[v].name];b!==void 0&&o.enableVertexAttribArray(b)}}setVertexAttribPointers(o,f,v){for(let b=0;b<this.attributes.length;b++){const T=this.attributes[b],P=f.attributes[T.name];P!==void 0&&o.vertexAttribPointer(P,T.components,o[Wc[T.type]],!1,this.itemSize,T.offset+this.itemSize*(v||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Bl=new WeakMap;function To(w){var o;if(Bl.has(w))return Bl.get(w);{const f=(o=w.getParameter(w.VERSION))===null||o===void 0?void 0:o.startsWith("WebGL 2.0");return Bl.set(w,f),f}}class ti{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class fd extends ti{getDefault(){return l.aT.transparent}set(o){const f=this.current;(o.r!==f.r||o.g!==f.g||o.b!==f.b||o.a!==f.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class ys extends ti{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class bs extends ti{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class Jh extends ti{getDefault(){return[!0,!0,!0,!0]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||o[2]!==f[2]||o[3]!==f[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class pd extends ti{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class md extends ti{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class Qh extends ti{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const f=this.current;(o.func!==f.func||o.ref!==f.ref||o.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class ef extends ti{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||o[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class gd extends ti{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=o,this.dirty=!1}}class tf extends ti{getDefault(){return[0,1]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class nf extends ti{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=o,this.dirty=!1}}class vd extends ti{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class qm extends ti{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.BLEND):f.disable(f.BLEND),this.current=o,this.dirty=!1}}class Zm extends ti{getDefault(){const o=this.gl;return[o.ONE,o.ZERO]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)}}class jl extends ti{getDefault(){return l.aT.transparent}set(o){const f=this.current;(o.r!==f.r||o.g!==f.g||o.b!==f.b||o.a!==f.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class Ay extends ti{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)}}class My extends ti{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=o,this.dirty=!1}}class ky extends ti{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class Py extends ti{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}class Dy extends ti{getDefault(){return null}set(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)}}class Ly extends ti{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class rf extends ti{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||o[2]!==f[2]||o[3]!==f[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class _d extends ti{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class sf extends ti{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class af extends ti{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class Vl extends ti{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Km extends ti{getDefault(){return null}set(o){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Xm extends ti{getDefault(){return null}set(o){var f;if(o===this.current&&!this.dirty)return;const v=this.gl;To(v)?v.bindVertexArray(o):(f=v.getExtension("OES_vertex_array_object"))===null||f===void 0||f.bindVertexArrayOES(o),this.current=o,this.dirty=!1}}class of extends ti{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class tl extends ti{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class Ym extends ti{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class Eo extends ti{constructor(o,f){super(o),this.context=o,this.parent=f}getDefault(){return null}}class Ul extends Eo{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class Jm extends Eo{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class lf extends Eo{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class mi{constructor(o,f,v,b,T){this.context=o,this.width=f,this.height=v;const P=o.gl,D=this.framebuffer=P.createFramebuffer();if(this.colorAttachment=new Ul(o,D),b)this.depthAttachment=T?new lf(o,D):new Jm(o,D);else if(T)throw new Error("Stencil cannot be setted without depth");if(P.checkFramebufferStatus(P.FRAMEBUFFER)!==P.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const o=this.context.gl,f=this.colorAttachment.get();if(f&&o.deleteTexture(f),this.depthAttachment){const v=this.depthAttachment.get();v&&o.deleteRenderbuffer(v)}o.deleteFramebuffer(this.framebuffer)}}class Bi{constructor(o,f,v){this.blendFunction=o,this.blendColor=f,this.mask=v}}Bi.Replace=[1,0],Bi.disabled=new Bi(Bi.Replace,l.aT.transparent,[!1,!1,!1,!1]),Bi.unblended=new Bi(Bi.Replace,l.aT.transparent,[!0,!0,!0,!0]),Bi.alphaBlended=new Bi([1,771],l.aT.transparent,[!0,!0,!0,!0]);class Oy{constructor(o){var f,v;if(this.gl=o,this.clearColor=new fd(this),this.clearDepth=new ys(this),this.clearStencil=new bs(this),this.colorMask=new Jh(this),this.depthMask=new pd(this),this.stencilMask=new md(this),this.stencilFunc=new Qh(this),this.stencilOp=new ef(this),this.stencilTest=new gd(this),this.depthRange=new tf(this),this.depthTest=new nf(this),this.depthFunc=new vd(this),this.blend=new qm(this),this.blendFunc=new Zm(this),this.blendColor=new jl(this),this.blendEquation=new Ay(this),this.cullFace=new My(this),this.cullFaceSide=new ky(this),this.frontFace=new Py(this),this.program=new Dy(this),this.activeTexture=new Ly(this),this.viewport=new rf(this),this.bindFramebuffer=new _d(this),this.bindRenderbuffer=new sf(this),this.bindTexture=new af(this),this.bindVertexBuffer=new Vl(this),this.bindElementBuffer=new Km(this),this.bindVertexArray=new Xm(this),this.pixelStoreUnpack=new of(this),this.pixelStoreUnpackPremultiplyAlpha=new tl(this),this.pixelStoreUnpackFlipY=new Ym(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),To(o)){this.HALF_FLOAT=o.HALF_FLOAT;const b=o.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(f=o.RGBA16F)!==null&&f!==void 0?f:b==null?void 0:b.RGBA16F_EXT,this.RGB16F=(v=o.RGB16F)!==null&&v!==void 0?v:b==null?void 0:b.RGB16F_EXT,o.getExtension("EXT_color_buffer_float")}else{o.getExtension("EXT_color_buffer_half_float"),o.getExtension("OES_texture_half_float_linear");const b=o.getExtension("OES_texture_half_float");this.HALF_FLOAT=b==null?void 0:b.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,f){return new dd(this,o,f)}createVertexBuffer(o,f,v){return new hd(this,o,f,v)}createRenderbuffer(o,f,v){const b=this.gl,T=b.createRenderbuffer();return this.bindRenderbuffer.set(T),b.renderbufferStorage(b.RENDERBUFFER,o,f,v),this.bindRenderbuffer.set(null),T}createFramebuffer(o,f,v,b){return new mi(this,o,f,v,b)}clear({color:o,depth:f,stencil:v}){const b=this.gl;let T=0;o&&(T|=b.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(T|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),v!==void 0&&(T|=b.STENCIL_BUFFER_BIT,this.clearStencil.set(v),this.stencilMask.set(255)),b.clear(T)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){l.aG(o.blendFunction,Bi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)}createVertexArray(){var o;return To(this.gl)?this.gl.createVertexArray():(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.createVertexArrayOES()}deleteVertexArray(o){var f;return To(this.gl)?this.gl.deleteVertexArray(o):(f=this.gl.getExtension("OES_vertex_array_object"))===null||f===void 0?void 0:f.deleteVertexArrayOES(o)}unbindVAO(){this.bindVertexArray.set(null)}}class ni{constructor(o,f,v){this.func=o,this.mask=f,this.range=v}}ni.ReadOnly=!1,ni.ReadWrite=!0,ni.disabled=new ni(519,ni.ReadOnly,[0,1]);const nl=7680;class ji{constructor(o,f,v,b,T,P){this.test=o,this.ref=f,this.mask=v,this.fail=b,this.depthFail=T,this.pass=P}}ji.disabled=new ji({func:519,mask:0},0,0,nl,nl,nl);class $i{constructor(o,f,v){this.enable=o,this.mode=f,this.frontFace=v}}let qc;function Qm(w,o,f,v,b,T,P){const D=w.context,R=D.gl,N=w.useProgram("collisionBox"),G=[];let X=0,oe=0;for(let Le=0;Le<v.length;Le++){const Ye=v[Le],ht=o.getTile(Ye),pt=ht.getBucket(f);if(!pt)continue;let Pt=Ye.posMatrix;b[0]===0&&b[1]===0||(Pt=w.translatePosMatrix(Ye.posMatrix,ht,b,T));const Bt=P?pt.textCollisionBox:pt.iconCollisionBox,Rt=pt.collisionCircleArray;if(Rt.length>0){const Gt=l.Z(),mn=Pt;l.aU(Gt,pt.placementInvProjMatrix,w.transform.glCoordMatrix),l.aU(Gt,Gt,pt.placementViewportMatrix),G.push({circleArray:Rt,circleOffset:oe,transform:mn,invTransform:Gt,coord:Ye}),X+=Rt.length/4,oe=X}Bt&&N.draw(D,R.LINES,ni.disabled,ji.disabled,w.colorModeForRenderPass(),$i.disabled,qh(Pt,w.transform,ht),w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ye),f.id,Bt.layoutVertexBuffer,Bt.indexBuffer,Bt.segments,null,w.transform.zoom,null,null,Bt.collisionVertexBuffer)}if(!P||!G.length)return;const we=w.useProgram("collisionCircle"),xe=new l.aV;xe.resize(4*X),xe._trim();let Me=0;for(const Le of G)for(let Ye=0;Ye<Le.circleArray.length/4;Ye++){const ht=4*Ye,pt=Le.circleArray[ht+0],Pt=Le.circleArray[ht+1],Bt=Le.circleArray[ht+2],Rt=Le.circleArray[ht+3];xe.emplace(Me++,pt,Pt,Bt,Rt,0),xe.emplace(Me++,pt,Pt,Bt,Rt,1),xe.emplace(Me++,pt,Pt,Bt,Rt,2),xe.emplace(Me++,pt,Pt,Bt,Rt,3)}(!qc||qc.length<2*X)&&(qc=function(Le){const Ye=2*Le,ht=new l.aX;ht.resize(Ye),ht._trim();for(let pt=0;pt<Ye;pt++){const Pt=6*pt;ht.uint16[Pt+0]=4*pt+0,ht.uint16[Pt+1]=4*pt+1,ht.uint16[Pt+2]=4*pt+2,ht.uint16[Pt+3]=4*pt+2,ht.uint16[Pt+4]=4*pt+3,ht.uint16[Pt+5]=4*pt+0}return ht}(X));const ge=D.createIndexBuffer(qc,!0),Ze=D.createVertexBuffer(xe,l.aW.members,!0);for(const Le of G){const Ye={u_matrix:Le.transform,u_inv_matrix:Le.invTransform,u_camera_to_center_distance:(ct=w.transform).cameraToCenterDistance,u_viewport_size:[ct.width,ct.height]};we.draw(D,R.TRIANGLES,ni.disabled,ji.disabled,w.colorModeForRenderPass(),$i.disabled,Ye,w.style.map.terrain&&w.style.map.terrain.getTerrainData(Le.coord),f.id,Ze,ge,l.S.simpleSegment(0,2*Le.circleOffset,Le.circleArray.length,Le.circleArray.length/2),null,w.transform.zoom,null,null,null)}var ct;Ze.destroy(),ge.destroy()}$i.disabled=new $i(!1,1029,2305),$i.backCCW=new $i(!0,1029,2305);const cf=l.ao(new Float32Array(16));function yd(w,o,f,v,b,T){const{horizontalAlign:P,verticalAlign:D}=l.au(w);return new l.P((-(P-.5)*o/b+v[0])*T,(-(D-.5)*f/b+v[1])*T)}function bd(w,o,f,v,b,T,P,D,R,N,G){const X=w.text.placedSymbolArray,oe=w.text.dynamicLayoutVertexArray,we=w.icon.dynamicLayoutVertexArray,xe={};oe.clear();for(let Me=0;Me<X.length;Me++){const ge=X.get(Me),Ze=ge.hidden||!ge.crossTileID||w.allowVerticalPlacement&&!ge.placedOrientation?null:v[ge.crossTileID];if(Ze){const ct=new l.P(ge.anchorX,ge.anchorY),Le=Zt(ct,f?P:T,G),Ye=Cn(b.cameraToCenterDistance,Le.signedDistanceFromCamera);let ht=l.aj(w.textSizeData,R,ge)*Ye/l.ap;f&&(ht*=w.tilePixelRatio/D);const{width:pt,height:Pt,anchor:Bt,textOffset:Rt,textBoxScale:Gt}=Ze,mn=yd(Bt,pt,Pt,Rt,Gt,ht),Kn=f?Zt(ct.add(mn),T,G).point:Le.point.add(o?mn.rotate(-b.angle):mn),Yt=w.allowVerticalPlacement&&ge.placedOrientation===l.ai.vertical?Math.PI/2:0;for(let On=0;On<ge.numGlyphs;On++)l.ak(oe,Kn,Yt);N&&ge.associatedIconIndex>=0&&(xe[ge.associatedIconIndex]={shiftedAnchor:Kn,angle:Yt})}else pe(ge.numGlyphs,oe)}if(N){we.clear();const Me=w.icon.placedSymbolArray;for(let ge=0;ge<Me.length;ge++){const Ze=Me.get(ge);if(Ze.hidden)pe(Ze.numGlyphs,we);else{const ct=xe[ge];if(ct)for(let Le=0;Le<Ze.numGlyphs;Le++)l.ak(we,ct.shiftedAnchor,ct.angle);else pe(Ze.numGlyphs,we)}}w.icon.dynamicLayoutVertexBuffer.updateData(we)}w.text.dynamicLayoutVertexBuffer.updateData(oe)}function uf(w,o,f){return f.iconsInText&&o?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function xd(w,o,f,v,b,T,P,D,R,N,G,X){const oe=w.context,we=oe.gl,xe=w.transform,Me=D==="map",ge=R==="map",Ze=D!=="viewport"&&f.layout.get("symbol-placement")!=="point",ct=Me&&!ge&&!Ze,Le=!f.layout.get("symbol-sort-key").isConstant();let Ye=!1;const ht=w.depthModeForSublayer(0,ni.ReadOnly),pt=f._unevaluatedLayout.hasValue("text-variable-anchor")||f._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Pt=[];for(const Bt of v){const Rt=o.getTile(Bt),Gt=Rt.getBucket(f);if(!Gt)continue;const mn=b?Gt.text:Gt.icon;if(!mn||!mn.segments.get().length||!mn.hasVisibleVertices)continue;const Kn=mn.programConfigurations.get(f.id),Yt=b||Gt.sdfIcons,On=b?Gt.textSizeData:Gt.iconSizeData,vn=ge||xe.pitch!==0,Ei=w.useProgram(uf(Yt,b,Gt),Kn),qn=l.ah(On,xe.zoom),Vn=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Bt);let Xn,Ji,Ii,Lr,gr=[0,0],ar=null;if(b)Ji=Rt.glyphAtlasTexture,Ii=we.LINEAR,Xn=Rt.glyphAtlasTexture.size,Gt.iconsInText&&(gr=Rt.imageAtlasTexture.size,ar=Rt.imageAtlasTexture,Lr=vn||w.options.rotating||w.options.zooming||On.kind==="composite"||On.kind==="camera"?we.LINEAR:we.NEAREST);else{const Qi=f.layout.get("icon-size").constantOr(0)!==1||Gt.iconsNeedLinear;Ji=Rt.imageAtlasTexture,Ii=Yt||w.options.rotating||w.options.zooming||Qi||vn?we.LINEAR:we.NEAREST,Xn=Rt.imageAtlasTexture.size}const Ss=Be(Rt,1,w.transform.zoom),Li=qe(Bt.posMatrix,ge,Me,w.transform,Ss),wa=Qt(Bt.posMatrix,ge,Me,w.transform,Ss),Sa=pt&&Gt.hasTextData(),Ao=f.layout.get("icon-text-fit")!=="none"&&Sa&&Gt.hasIconData();if(Ze){const Qi=w.style.map.terrain?(ss,er)=>w.style.map.terrain.getElevation(Bt,ss,er):null,vr=f.layout.get("text-rotation-alignment")==="map";Mt(Gt,Bt.posMatrix,w,b,Li,wa,ge,N,vr,Qi)}const ol=w.translatePosMatrix(Bt.posMatrix,Rt,T,P),Xl=Ze||b&&pt||Ao?cf:Li,Br=w.translatePosMatrix(wa,Rt,T,P,!0),Or=Yt&&f.paint.get(b?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Wr;Wr=Yt?Gt.iconsInText?el(On.kind,qn,ct,ge,w,ol,Xl,Br,Xn,gr):Yh(On.kind,qn,ct,ge,w,ol,Xl,Br,b,Xn,!0):Xh(On.kind,qn,ct,ge,w,ol,Xl,Br,b,Xn);const ll={program:Ei,buffers:mn,uniformValues:Wr,atlasTexture:Ji,atlasTextureIcon:ar,atlasInterpolation:Ii,atlasInterpolationIcon:Lr,isSDF:Yt,hasHalo:Or};if(Le&&Gt.canOverlap){Ye=!0;const Qi=mn.segments.get();for(const vr of Qi)Pt.push({segments:new l.S([vr]),sortKey:vr.sortKey,state:ll,terrainData:Vn})}else Pt.push({segments:mn.segments,sortKey:0,state:ll,terrainData:Vn})}Ye&&Pt.sort((Bt,Rt)=>Bt.sortKey-Rt.sortKey);for(const Bt of Pt){const Rt=Bt.state;if(oe.activeTexture.set(we.TEXTURE0),Rt.atlasTexture.bind(Rt.atlasInterpolation,we.CLAMP_TO_EDGE),Rt.atlasTextureIcon&&(oe.activeTexture.set(we.TEXTURE1),Rt.atlasTextureIcon&&Rt.atlasTextureIcon.bind(Rt.atlasInterpolationIcon,we.CLAMP_TO_EDGE)),Rt.isSDF){const Gt=Rt.uniformValues;Rt.hasHalo&&(Gt.u_is_halo=1,df(Rt.buffers,Bt.segments,f,w,Rt.program,ht,G,X,Gt,Bt.terrainData)),Gt.u_is_halo=0}df(Rt.buffers,Bt.segments,f,w,Rt.program,ht,G,X,Rt.uniformValues,Bt.terrainData)}}function df(w,o,f,v,b,T,P,D,R,N){const G=v.context;b.draw(G,G.gl.TRIANGLES,T,P,D,$i.disabled,R,N,f.id,w.layoutVertexBuffer,w.indexBuffer,o,f.paint,v.transform.zoom,w.programConfigurations.get(f.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function Zc(w,o,f,v,b){if(!f||!v||!v.imageAtlas)return;const T=v.imageAtlas.patternPositions;let P=T[f.to.toString()],D=T[f.from.toString()];if(!P&&D&&(P=D),!D&&P&&(D=P),!P||!D){const R=b.getPaintProperty(o);P=T[R],D=T[R]}P&&D&&w.setConstantPatternPositions(P,D)}function Kc(w,o,f,v,b,T,P){const D=w.context.gl,R="fill-pattern",N=f.paint.get(R),G=N&&N.constantOr(1),X=f.getCrossfadeParameters();let oe,we,xe,Me,ge;P?(we=G&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",oe=D.LINES):(we=G?"fillPattern":"fill",oe=D.TRIANGLES);const Ze=N.constantOr(null);for(const ct of v){const Le=o.getTile(ct);if(G&&!Le.patternsLoaded())continue;const Ye=Le.getBucket(f);if(!Ye)continue;const ht=Ye.programConfigurations.get(f.id),pt=w.useProgram(we,ht),Pt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(ct);G&&(w.context.activeTexture.set(D.TEXTURE0),Le.imageAtlasTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),ht.updatePaintBuffers(X)),Zc(ht,R,Ze,Le,f);const Bt=Pt?ct:null,Rt=w.translatePosMatrix(Bt?Bt.posMatrix:ct.posMatrix,Le,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(P){Me=Ye.indexBuffer2,ge=Ye.segments2;const Gt=[D.drawingBufferWidth,D.drawingBufferHeight];xe=we==="fillOutlinePattern"&&G?od(Rt,w,X,Le,Gt):ad(Rt,Gt)}else Me=Ye.indexBuffer,ge=Ye.segments,xe=G?Wh(Rt,w,X,Le):Bm(Rt);pt.draw(w.context,oe,b,w.stencilModeForClipping(ct),T,$i.disabled,xe,Pt,f.id,Ye.layoutVertexBuffer,Me,ge,f.paint,w.transform.zoom,ht)}}function Xc(w,o,f,v,b,T,P){const D=w.context,R=D.gl,N="fill-extrusion-pattern",G=f.paint.get(N),X=G.constantOr(1),oe=f.getCrossfadeParameters(),we=f.paint.get("fill-extrusion-opacity"),xe=G.constantOr(null);for(const Me of v){const ge=o.getTile(Me),Ze=ge.getBucket(f);if(!Ze)continue;const ct=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Me),Le=Ze.programConfigurations.get(f.id),Ye=w.useProgram(X?"fillExtrusionPattern":"fillExtrusion",Le);X&&(w.context.activeTexture.set(R.TEXTURE0),ge.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),Le.updatePaintBuffers(oe)),Zc(Le,N,xe,ge,f);const ht=w.translatePosMatrix(Me.posMatrix,ge,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),pt=f.paint.get("fill-extrusion-vertical-gradient"),Pt=X?wo(ht,w,pt,we,Me,oe,ge):Gh(ht,w,pt,we);Ye.draw(D,D.gl.TRIANGLES,b,T,P,$i.backCCW,Pt,ct,f.id,Ze.layoutVertexBuffer,Ze.indexBuffer,Ze.segments,f.paint,w.transform.zoom,Le,w.style.map.terrain&&Ze.centroidVertexBuffer)}}function Ry(w,o,f,v,b,T,P){const D=w.context,R=D.gl,N=f.fbo;if(!N)return;const G=w.useProgram("hillshade"),X=w.style.map.terrain&&w.style.map.terrain.getTerrainData(o);D.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,N.colorAttachment.get()),G.draw(D,R.TRIANGLES,b,T,P,$i.disabled,((oe,we,xe,Me)=>{const ge=xe.paint.get("hillshade-shadow-color"),Ze=xe.paint.get("hillshade-highlight-color"),ct=xe.paint.get("hillshade-accent-color");let Le=xe.paint.get("hillshade-illumination-direction")*(Math.PI/180);xe.paint.get("hillshade-illumination-anchor")==="viewport"&&(Le-=oe.transform.angle);const Ye=!oe.options.moving;return{u_matrix:Me?Me.posMatrix:oe.transform.calculatePosMatrix(we.tileID.toUnwrapped(),Ye),u_image:0,u_latrange:Zh(0,we.tileID),u_light:[xe.paint.get("hillshade-exaggeration"),Le],u_shadow:ge,u_highlight:Ze,u_accent:ct}})(w,f,v,X?o:null),X,v.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments)}function hf(w,o,f,v,b,T){const P=w.context,D=P.gl,R=o.dem;if(R&&R.data){const N=R.dim,G=R.stride,X=R.getPixels();if(P.activeTexture.set(D.TEXTURE1),P.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||w.getTileTexture(G),o.demTexture){const we=o.demTexture;we.update(X,{premultiply:!1}),we.bind(D.NEAREST,D.CLAMP_TO_EDGE)}else o.demTexture=new J(P,X,D.RGBA,{premultiply:!1}),o.demTexture.bind(D.NEAREST,D.CLAMP_TO_EDGE);P.activeTexture.set(D.TEXTURE0);let oe=o.fbo;if(!oe){const we=new J(P,{width:N,height:N,data:null},D.RGBA);we.bind(D.LINEAR,D.CLAMP_TO_EDGE),oe=o.fbo=P.createFramebuffer(N,N,!0,!1),oe.colorAttachment.set(we.texture)}P.bindFramebuffer.set(oe.framebuffer),P.viewport.set([0,0,N,N]),w.useProgram("hillshadePrepare").draw(P,D.TRIANGLES,v,b,T,$i.disabled,((we,xe)=>{const Me=xe.stride,ge=l.Z();return l.aS(ge,0,l.N,-l.N,0,0,1),l.$(ge,ge,[0,-l.N,0]),{u_matrix:ge,u_image:1,u_dimension:[Me,Me],u_zoom:we.overscaledZ,u_unpack:xe.getUnpackVector()}})(o.tileID,R),null,f.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments),o.needsHillshadePrepare=!1}}function Fy(w,o,f,v,b,T){const P=v.paint.get("raster-fade-duration");if(!T&&P>0){const D=l.h.now(),R=(D-w.timeAdded)/P,N=o?(D-o.timeAdded)/P:-1,G=f.getSource(),X=b.coveringZoomLevel({tileSize:G.tileSize,roundZoom:G.roundZoom}),oe=!o||Math.abs(o.tileID.overscaledZ-X)>Math.abs(w.tileID.overscaledZ-X),we=oe&&w.refreshedUponExpiration?1:l.ad(oe?R:1-N,0,1);return w.refreshedUponExpiration&&R>=1&&(w.refreshedUponExpiration=!1),o?{opacity:1,mix:1-we}:{opacity:we,mix:0}}return{opacity:1,mix:0}}const eg=new l.aT(1,0,0,1),wd=new l.aT(0,1,0,1),ff=new l.aT(0,0,1,1),tg=new l.aT(1,0,1,1),ng=new l.aT(0,1,1,1);function Yc(w,o,f,v){Td(w,0,o+f/2,w.transform.width,f,v)}function Sd(w,o,f,v){Td(w,o-f/2,0,f,w.transform.height,v)}function Td(w,o,f,v,b,T){const P=w.context,D=P.gl;D.enable(D.SCISSOR_TEST),D.scissor(o*w.pixelRatio,f*w.pixelRatio,v*w.pixelRatio,b*w.pixelRatio),P.clear({color:T}),D.disable(D.SCISSOR_TEST)}function ig(w,o,f){const v=w.context,b=v.gl,T=f.posMatrix,P=w.useProgram("debug"),D=ni.disabled,R=ji.disabled,N=w.colorModeForRenderPass(),G="$debug",X=w.style.map.terrain&&w.style.map.terrain.getTerrainData(f);v.activeTexture.set(b.TEXTURE0);const oe=o.getTileByID(f.key).latestRawTileData,we=Math.floor((oe&&oe.byteLength||0)/1024),xe=o.getTile(f).tileSize,Me=512/Math.min(xe,512)*(f.overscaledZ/w.transform.zoom)*.5;let ge=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(ge+=` => ${f.overscaledZ}`),function(Ze,ct){Ze.initDebugOverlayCanvas();const Le=Ze.debugOverlayCanvas,Ye=Ze.context.gl,ht=Ze.debugOverlayCanvas.getContext("2d");ht.clearRect(0,0,Le.width,Le.height),ht.shadowColor="white",ht.shadowBlur=2,ht.lineWidth=1.5,ht.strokeStyle="white",ht.textBaseline="top",ht.font="bold 36px Open Sans, sans-serif",ht.fillText(ct,5,5),ht.strokeText(ct,5,5),Ze.debugOverlayTexture.update(Le),Ze.debugOverlayTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE)}(w,`${ge} ${we}kB`),P.draw(v,b.TRIANGLES,D,R,Bi.alphaBlended,$i.disabled,Gc(T,l.aT.transparent,Me),null,G,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),P.draw(v,b.LINE_STRIP,D,R,N,$i.disabled,Gc(T,l.aT.red),X,G,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function qi(w,o,f){const v=w.context,b=v.gl,T=w.colorModeForRenderPass(),P=new ni(b.LEQUAL,ni.ReadWrite,w.depthRangeFor3D),D=w.useProgram("terrain"),R=o.getTerrainMesh();v.bindFramebuffer.set(null),v.viewport.set([0,0,w.width,w.height]);for(const N of f){const G=w.renderToTexture.getTexture(N),X=o.getTerrainData(N.tileID);v.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,G.texture);const oe={u_matrix:w.transform.calculatePosMatrix(N.tileID.toUnwrapped()),u_texture:0,u_ele_delta:o.getMeshFrameDelta(w.transform.zoom)};D.draw(v,b.TRIANGLES,P,ji.disabled,T,$i.backCCW,oe,X,"terrain",R.vertexBuffer,R.indexBuffer,R.segments)}}class il{constructor(o,f){this.context=new Oy(o),this.transform=f,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.Z(),renderTime:0},this.setup(),this.numSublayers=mt.maxUnderzooming+mt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Hc}resize(o,f,v){if(this.width=Math.floor(o*v),this.height=Math.floor(f*v),this.pixelRatio=v,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const b of this.style._order)this.style._layers[b].resize()}setup(){const o=this.context,f=new l.a_;f.emplaceBack(0,0),f.emplaceBack(l.N,0),f.emplaceBack(0,l.N),f.emplaceBack(l.N,l.N),this.tileExtentBuffer=o.createVertexBuffer(f,rd.members),this.tileExtentSegments=l.S.simpleSegment(0,0,4,2);const v=new l.a_;v.emplaceBack(0,0),v.emplaceBack(l.N,0),v.emplaceBack(0,l.N),v.emplaceBack(l.N,l.N),this.debugBuffer=o.createVertexBuffer(v,rd.members),this.debugSegments=l.S.simpleSegment(0,0,4,5);const b=new l.V;b.emplaceBack(0,0,0,0),b.emplaceBack(l.N,0,l.N,0),b.emplaceBack(0,l.N,0,l.N),b.emplaceBack(l.N,l.N,l.N,l.N),this.rasterBoundsBuffer=o.createVertexBuffer(b,Tt.members),this.rasterBoundsSegments=l.S.simpleSegment(0,0,4,2);const T=new l.a_;T.emplaceBack(0,0),T.emplaceBack(1,0),T.emplaceBack(0,1),T.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(T,rd.members),this.viewportSegments=l.S.simpleSegment(0,0,4,2);const P=new l.a$;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(P);const D=new l.b0;D.emplaceBack(0,1,2),D.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(D);const R=this.context.gl;this.stencilClearMode=new ji({func:R.ALWAYS,mask:0},0,255,R.ZERO,R.ZERO,R.ZERO)}clearStencil(){const o=this.context,f=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const v=l.Z();l.aS(v,0,this.width,this.height,0,0,1),l.a0(v,v,[f.drawingBufferWidth,f.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(o,f.TRIANGLES,ni.disabled,this.stencilClearMode,Bi.disabled,$i.disabled,jm(v),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(o,f){if(this.currentStencilSource===o.source||!o.isTileClipped()||!f||!f.length)return;this.currentStencilSource=o.source;const v=this.context,b=v.gl;this.nextStencilID+f.length>256&&this.clearStencil(),v.setColorMode(Bi.disabled),v.setDepthMode(ni.disabled);const T=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const P of f){const D=this._tileClippingMaskIDs[P.key]=this.nextStencilID++,R=this.style.map.terrain&&this.style.map.terrain.getTerrainData(P);T.draw(v,b.TRIANGLES,ni.disabled,new ji({func:b.ALWAYS,mask:0},D,255,b.KEEP,b.KEEP,b.REPLACE),Bi.disabled,$i.disabled,jm(P.posMatrix),R,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,f=this.context.gl;return new ji({func:f.NOTEQUAL,mask:255},o,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(o){const f=this.context.gl;return new ji({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,f.KEEP,f.KEEP,f.REPLACE)}stencilConfigForOverlap(o){const f=this.context.gl,v=o.sort((P,D)=>D.overscaledZ-P.overscaledZ),b=v[v.length-1].overscaledZ,T=v[0].overscaledZ-b+1;if(T>1){this.currentStencilSource=void 0,this.nextStencilID+T>256&&this.clearStencil();const P={};for(let D=0;D<T;D++)P[D+b]=new ji({func:f.GEQUAL,mask:255},D+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=T,[P,v]}return[{[b]:ji.disabled},v]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new Bi([o.CONSTANT_COLOR,o.ONE],new l.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Bi.unblended:Bi.alphaBlended}depthModeForSublayer(o,f,v){if(!this.opaquePassEnabledForLayer())return ni.disabled;const b=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new ni(v||this.context.gl.LEQUAL,f,[b,b])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(o,f){this.style=o,this.options=f,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(l.h.now()),this.imageManager.beginFrame();const v=this.style._order,b=this.style.sourceCaches,T={},P={},D={};for(const R in b){const N=b[R];N.used&&N.prepare(this.context),T[R]=N.getVisibleCoordinates(),P[R]=T[R].slice().reverse(),D[R]=N.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let R=0;R<v.length;R++)if(this.style._layers[v[R]].is3D()){this.opaquePassCutoff=R;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const R=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!l.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||R.length)&&(l.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(N,G){const X=N.context,oe=X.gl,we=Bi.unblended,xe=new ni(oe.LEQUAL,ni.ReadWrite,[0,1]),Me=G.getTerrainMesh(),ge=G.sourceCache.getRenderableTiles(),Ze=N.useProgram("terrainDepth");X.bindFramebuffer.set(G.getFramebuffer("depth").framebuffer),X.viewport.set([0,0,N.width/devicePixelRatio,N.height/devicePixelRatio]),X.clear({color:l.aT.transparent,depth:1});for(const ct of ge){const Le=G.getTerrainData(ct.tileID),Ye={u_matrix:N.transform.calculatePosMatrix(ct.tileID.toUnwrapped()),u_ele_delta:G.getMeshFrameDelta(N.transform.zoom)};Ze.draw(X,oe.TRIANGLES,xe,ji.disabled,we,$i.backCCW,Ye,Le,"terrain",Me.vertexBuffer,Me.indexBuffer,Me.segments)}X.bindFramebuffer.set(null),X.viewport.set([0,0,N.width,N.height])}(this,this.style.map.terrain),function(N,G){const X=N.context,oe=X.gl,we=Bi.unblended,xe=new ni(oe.LEQUAL,ni.ReadWrite,[0,1]),Me=G.getTerrainMesh(),ge=G.getCoordsTexture(),Ze=G.sourceCache.getRenderableTiles(),ct=N.useProgram("terrainCoords");X.bindFramebuffer.set(G.getFramebuffer("coords").framebuffer),X.viewport.set([0,0,N.width/devicePixelRatio,N.height/devicePixelRatio]),X.clear({color:l.aT.transparent,depth:1}),G.coordsIndex=[];for(const Le of Ze){const Ye=G.getTerrainData(Le.tileID);X.activeTexture.set(oe.TEXTURE0),oe.bindTexture(oe.TEXTURE_2D,ge.texture);const ht={u_matrix:N.transform.calculatePosMatrix(Le.tileID.toUnwrapped()),u_terrain_coords_id:(255-G.coordsIndex.length)/255,u_texture:0,u_ele_delta:G.getMeshFrameDelta(N.transform.zoom)};ct.draw(X,oe.TRIANGLES,xe,ji.disabled,we,$i.backCCW,ht,Ye,"terrain",Me.vertexBuffer,Me.indexBuffer,Me.segments),G.coordsIndex.push(Le.tileID.key)}X.bindFramebuffer.set(null),X.viewport.set([0,0,N.width,N.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const R of v){const N=this.style._layers[R];if(!N.hasOffscreenPass()||N.isHidden(this.transform.zoom))continue;const G=P[N.source];(N.type==="custom"||G.length)&&this.renderLayer(this,b[N.source],N,G)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:f.showOverdrawInspector?l.aT.black:l.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=f.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){const R=this.style._layers[v[this.currentLayer]],N=b[R.source],G=T[R.source];this._renderTileClippingMasks(R,G),this.renderLayer(this,N,R,G)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){const R=this.style._layers[v[this.currentLayer]],N=b[R.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(R))continue;const G=(R.type==="symbol"?D:P)[R.source];this._renderTileClippingMasks(R,T[R.source]),this.renderLayer(this,N,R,G)}if(this.options.showTileBoundaries){const R=function(N,G){let X=null;const oe=Object.values(N._layers).flatMap(ge=>ge.source&&!ge.isHidden(G)?[N.sourceCaches[ge.source]]:[]),we=oe.filter(ge=>ge.getSource().type==="vector"),xe=oe.filter(ge=>ge.getSource().type!=="vector"),Me=ge=>{(!X||X.getSource().maxzoom<ge.getSource().maxzoom)&&(X=ge)};return we.forEach(ge=>Me(ge)),X||xe.forEach(ge=>Me(ge)),X}(this.style,this.transform.zoom);R&&function(N,G,X){for(let oe=0;oe<X.length;oe++)ig(N,G,X[oe])}(this,R,R.getVisibleCoordinates())}this.options.showPadding&&function(R){const N=R.transform.padding;Yc(R,R.transform.height-(N.top||0),3,eg),Yc(R,N.bottom||0,3,wd),Sd(R,N.left||0,3,ff),Sd(R,R.transform.width-(N.right||0),3,tg);const G=R.transform.centerPoint;(function(X,oe,we,xe){Td(X,oe-1,we-10,2,20,xe),Td(X,oe-10,we-1,20,2,xe)})(R,G.x,R.transform.height-G.y,ng)}(this),this.context.setDefault()}renderLayer(o,f,v,b){if(!v.isHidden(this.transform.zoom)&&(v.type==="background"||v.type==="custom"||(b||[]).length))switch(this.id=v.id,v.type){case"symbol":(function(T,P,D,R,N){if(T.renderPass!=="translucent")return;const G=ji.disabled,X=T.colorModeForRenderPass();(D._unevaluatedLayout.hasValue("text-variable-anchor")||D._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(oe,we,xe,Me,ge,Ze,ct){const Le=we.transform,Ye=ge==="map",ht=Ze==="map";for(const pt of oe){const Pt=Me.getTile(pt),Bt=Pt.getBucket(xe);if(!Bt||!Bt.text||!Bt.text.segments.get().length)continue;const Rt=l.ah(Bt.textSizeData,Le.zoom),Gt=Be(Pt,1,we.transform.zoom),mn=qe(pt.posMatrix,ht,Ye,we.transform,Gt),Kn=xe.layout.get("icon-text-fit")!=="none"&&Bt.hasIconData();if(Rt){const Yt=Math.pow(2,Le.zoom-Pt.tileID.overscaledZ);bd(Bt,Ye,ht,ct,Le,mn,pt.posMatrix,Yt,Rt,Kn,we.style.map.terrain?(On,vn)=>we.style.map.terrain.getElevation(pt,On,vn):null)}}}(R,T,D,P,D.layout.get("text-rotation-alignment"),D.layout.get("text-pitch-alignment"),N),D.paint.get("icon-opacity").constantOr(1)!==0&&xd(T,P,D,R,!1,D.paint.get("icon-translate"),D.paint.get("icon-translate-anchor"),D.layout.get("icon-rotation-alignment"),D.layout.get("icon-pitch-alignment"),D.layout.get("icon-keep-upright"),G,X),D.paint.get("text-opacity").constantOr(1)!==0&&xd(T,P,D,R,!0,D.paint.get("text-translate"),D.paint.get("text-translate-anchor"),D.layout.get("text-rotation-alignment"),D.layout.get("text-pitch-alignment"),D.layout.get("text-keep-upright"),G,X),P.map.showCollisionBoxes&&(Qm(T,P,D,R,D.paint.get("text-translate"),D.paint.get("text-translate-anchor"),!0),Qm(T,P,D,R,D.paint.get("icon-translate"),D.paint.get("icon-translate-anchor"),!1))})(o,f,v,b,this.style.placement.variableOffsets);break;case"circle":(function(T,P,D,R){if(T.renderPass!=="translucent")return;const N=D.paint.get("circle-opacity"),G=D.paint.get("circle-stroke-width"),X=D.paint.get("circle-stroke-opacity"),oe=!D.layout.get("circle-sort-key").isConstant();if(N.constantOr(1)===0&&(G.constantOr(1)===0||X.constantOr(1)===0))return;const we=T.context,xe=we.gl,Me=T.depthModeForSublayer(0,ni.ReadOnly),ge=ji.disabled,Ze=T.colorModeForRenderPass(),ct=[];for(let Le=0;Le<R.length;Le++){const Ye=R[Le],ht=P.getTile(Ye),pt=ht.getBucket(D);if(!pt)continue;const Pt=pt.programConfigurations.get(D.id),Bt=T.useProgram("circle",Pt),Rt=pt.layoutVertexBuffer,Gt=pt.indexBuffer,mn=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Ye),Kn={programConfiguration:Pt,program:Bt,layoutVertexBuffer:Rt,indexBuffer:Gt,uniformValues:So(T,Ye,ht,D),terrainData:mn};if(oe){const Yt=pt.segments.get();for(const On of Yt)ct.push({segments:new l.S([On]),sortKey:On.sortKey,state:Kn})}else ct.push({segments:pt.segments,sortKey:0,state:Kn})}oe&&ct.sort((Le,Ye)=>Le.sortKey-Ye.sortKey);for(const Le of ct){const{programConfiguration:Ye,program:ht,layoutVertexBuffer:pt,indexBuffer:Pt,uniformValues:Bt,terrainData:Rt}=Le.state;ht.draw(we,xe.TRIANGLES,Me,ge,Ze,$i.disabled,Bt,Rt,D.id,pt,Pt,Le.segments,D.paint,T.transform.zoom,Ye)}})(o,f,v,b);break;case"heatmap":(function(T,P,D,R){if(D.paint.get("heatmap-opacity")!==0)if(T.renderPass==="offscreen"){const N=T.context,G=N.gl,X=ji.disabled,oe=new Bi([G.ONE,G.ONE],l.aT.transparent,[!0,!0,!0,!0]);(function(we,xe,Me){const ge=we.gl;we.activeTexture.set(ge.TEXTURE1),we.viewport.set([0,0,xe.width/4,xe.height/4]);let Ze=Me.heatmapFbo;if(Ze)ge.bindTexture(ge.TEXTURE_2D,Ze.colorAttachment.get()),we.bindFramebuffer.set(Ze.framebuffer);else{const ct=ge.createTexture();ge.bindTexture(ge.TEXTURE_2D,ct),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_WRAP_S,ge.CLAMP_TO_EDGE),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_WRAP_T,ge.CLAMP_TO_EDGE),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_MIN_FILTER,ge.LINEAR),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_MAG_FILTER,ge.LINEAR),Ze=Me.heatmapFbo=we.createFramebuffer(xe.width/4,xe.height/4,!1,!1),function(Le,Ye,ht,pt){var Pt,Bt;const Rt=Le.gl,Gt=(Pt=Le.HALF_FLOAT)!==null&&Pt!==void 0?Pt:Rt.UNSIGNED_BYTE,mn=(Bt=Le.RGBA16F)!==null&&Bt!==void 0?Bt:Rt.RGBA;Rt.texImage2D(Rt.TEXTURE_2D,0,mn,Ye.width/4,Ye.height/4,0,Rt.RGBA,Gt,null),pt.colorAttachment.set(ht)}(we,xe,ct,Ze)}})(N,T,D),N.clear({color:l.aT.transparent});for(let we=0;we<R.length;we++){const xe=R[we];if(P.hasRenderableParent(xe))continue;const Me=P.getTile(xe),ge=Me.getBucket(D);if(!ge)continue;const Ze=ge.programConfigurations.get(D.id),ct=T.useProgram("heatmap",Ze),{zoom:Le}=T.transform;ct.draw(N,G.TRIANGLES,ni.disabled,X,oe,$i.disabled,Cy(xe.posMatrix,Me,Le,D.paint.get("heatmap-intensity")),null,D.id,ge.layoutVertexBuffer,ge.indexBuffer,ge.segments,D.paint,T.transform.zoom,Ze)}N.viewport.set([0,0,T.width,T.height])}else T.renderPass==="translucent"&&(T.context.setColorMode(T.colorModeForRenderPass()),function(N,G){const X=N.context,oe=X.gl,we=G.heatmapFbo;if(!we)return;X.activeTexture.set(oe.TEXTURE0),oe.bindTexture(oe.TEXTURE_2D,we.colorAttachment.get()),X.activeTexture.set(oe.TEXTURE1);let xe=G.colorRampTexture;xe||(xe=G.colorRampTexture=new J(X,G.colorRamp,oe.RGBA)),xe.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),N.useProgram("heatmapTexture").draw(X,oe.TRIANGLES,ni.disabled,ji.disabled,N.colorModeForRenderPass(),$i.disabled,((Me,ge,Ze,ct)=>{const Le=l.Z();l.aS(Le,0,Me.width,Me.height,0,0,1);const Ye=Me.context.gl;return{u_matrix:Le,u_world:[Ye.drawingBufferWidth,Ye.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ge.paint.get("heatmap-opacity")}})(N,G),null,G.id,N.viewportBuffer,N.quadTriangleIndexBuffer,N.viewportSegments,G.paint,N.transform.zoom)}(T,D))})(o,f,v,b);break;case"line":(function(T,P,D,R){if(T.renderPass!=="translucent")return;const N=D.paint.get("line-opacity"),G=D.paint.get("line-width");if(N.constantOr(1)===0||G.constantOr(1)===0)return;const X=T.depthModeForSublayer(0,ni.ReadOnly),oe=T.colorModeForRenderPass(),we=D.paint.get("line-dasharray"),xe=D.paint.get("line-pattern"),Me=xe.constantOr(1),ge=D.paint.get("line-gradient"),Ze=D.getCrossfadeParameters(),ct=Me?"linePattern":we?"lineSDF":ge?"lineGradient":"line",Le=T.context,Ye=Le.gl;let ht=!0;for(const pt of R){const Pt=P.getTile(pt);if(Me&&!Pt.patternsLoaded())continue;const Bt=Pt.getBucket(D);if(!Bt)continue;const Rt=Bt.programConfigurations.get(D.id),Gt=T.context.program.get(),mn=T.useProgram(ct,Rt),Kn=ht||mn.program!==Gt,Yt=T.style.map.terrain&&T.style.map.terrain.getTerrainData(pt),On=xe.constantOr(null);if(On&&Pt.imageAtlas){const qn=Pt.imageAtlas,Vn=qn.patternPositions[On.to.toString()],Xn=qn.patternPositions[On.from.toString()];Vn&&Xn&&Rt.setConstantPatternPositions(Vn,Xn)}const vn=Yt?pt:null,Ei=Me?Iy(T,Pt,D,Ze,vn):we?Um(T,Pt,D,we,Ze,vn):ge?Vm(T,Pt,D,Bt.lineClipsArray.length,vn):Kh(T,Pt,D,vn);if(Me)Le.activeTexture.set(Ye.TEXTURE0),Pt.imageAtlasTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE),Rt.updatePaintBuffers(Ze);else if(we&&(Kn||T.lineAtlas.dirty))Le.activeTexture.set(Ye.TEXTURE0),T.lineAtlas.bind(Le);else if(ge){const qn=Bt.gradients[D.id];let Vn=qn.texture;if(D.gradientVersion!==qn.version){let Xn=256;if(D.stepInterpolant){const Ji=P.getSource().maxzoom,Ii=pt.canonical.z===Ji?Math.ceil(1<<T.transform.maxZoom-pt.canonical.z):1;Xn=l.ad(l.aY(Bt.maxLineLength/l.N*1024*Ii),256,Le.maxTextureSize)}qn.gradient=l.aZ({expression:D.gradientExpression(),evaluationKey:"lineProgress",resolution:Xn,image:qn.gradient||void 0,clips:Bt.lineClipsArray}),qn.texture?qn.texture.update(qn.gradient):qn.texture=new J(Le,qn.gradient,Ye.RGBA),qn.version=D.gradientVersion,Vn=qn.texture}Le.activeTexture.set(Ye.TEXTURE0),Vn.bind(D.stepInterpolant?Ye.NEAREST:Ye.LINEAR,Ye.CLAMP_TO_EDGE)}mn.draw(Le,Ye.TRIANGLES,X,T.stencilModeForClipping(pt),oe,$i.disabled,Ei,Yt,D.id,Bt.layoutVertexBuffer,Bt.indexBuffer,Bt.segments,D.paint,T.transform.zoom,Rt,Bt.layoutVertexBuffer2),ht=!1}})(o,f,v,b);break;case"fill":(function(T,P,D,R){const N=D.paint.get("fill-color"),G=D.paint.get("fill-opacity");if(G.constantOr(1)===0)return;const X=T.colorModeForRenderPass(),oe=D.paint.get("fill-pattern"),we=T.opaquePassEnabledForLayer()&&!oe.constantOr(1)&&N.constantOr(l.aT.transparent).a===1&&G.constantOr(0)===1?"opaque":"translucent";if(T.renderPass===we){const xe=T.depthModeForSublayer(1,T.renderPass==="opaque"?ni.ReadWrite:ni.ReadOnly);Kc(T,P,D,R,xe,X,!1)}if(T.renderPass==="translucent"&&D.paint.get("fill-antialias")){const xe=T.depthModeForSublayer(D.getPaintProperty("fill-outline-color")?2:0,ni.ReadOnly);Kc(T,P,D,R,xe,X,!0)}})(o,f,v,b);break;case"fill-extrusion":(function(T,P,D,R){const N=D.paint.get("fill-extrusion-opacity");if(N!==0&&T.renderPass==="translucent"){const G=new ni(T.context.gl.LEQUAL,ni.ReadWrite,T.depthRangeFor3D);if(N!==1||D.paint.get("fill-extrusion-pattern").constantOr(1))Xc(T,P,D,R,G,ji.disabled,Bi.disabled),Xc(T,P,D,R,G,T.stencilModeFor3D(),T.colorModeForRenderPass());else{const X=T.colorModeForRenderPass();Xc(T,P,D,R,G,ji.disabled,X)}}})(o,f,v,b);break;case"hillshade":(function(T,P,D,R){if(T.renderPass!=="offscreen"&&T.renderPass!=="translucent")return;const N=T.context,G=T.depthModeForSublayer(0,ni.ReadOnly),X=T.colorModeForRenderPass(),[oe,we]=T.renderPass==="translucent"?T.stencilConfigForOverlap(R):[{},R];for(const xe of we){const Me=P.getTile(xe);Me.needsHillshadePrepare!==void 0&&Me.needsHillshadePrepare&&T.renderPass==="offscreen"?hf(T,Me,D,G,ji.disabled,X):T.renderPass==="translucent"&&Ry(T,xe,Me,D,G,oe[xe.overscaledZ],X)}N.viewport.set([0,0,T.width,T.height])})(o,f,v,b);break;case"raster":(function(T,P,D,R){if(T.renderPass!=="translucent"||D.paint.get("raster-opacity")===0||!R.length)return;const N=T.context,G=N.gl,X=P.getSource(),oe=T.useProgram("raster"),we=T.colorModeForRenderPass(),[xe,Me]=X instanceof Nt?[{},R]:T.stencilConfigForOverlap(R),ge=Me[Me.length-1].overscaledZ,Ze=!T.options.moving;for(const ct of Me){const Le=T.depthModeForSublayer(ct.overscaledZ-ge,D.paint.get("raster-opacity")===1?ni.ReadWrite:ni.ReadOnly,G.LESS),Ye=P.getTile(ct);Ye.registerFadeDuration(D.paint.get("raster-fade-duration"));const ht=P.findLoadedParent(ct,0),pt=Fy(Ye,ht,P,D,T.transform,T.style.map.terrain);let Pt,Bt;const Rt=D.paint.get("raster-resampling")==="nearest"?G.NEAREST:G.LINEAR;N.activeTexture.set(G.TEXTURE0),Ye.texture.bind(Rt,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),N.activeTexture.set(G.TEXTURE1),ht?(ht.texture.bind(Rt,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),Pt=Math.pow(2,ht.tileID.overscaledZ-Ye.tileID.overscaledZ),Bt=[Ye.tileID.canonical.x*Pt%1,Ye.tileID.canonical.y*Pt%1]):Ye.texture.bind(Rt,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST);const Gt=T.style.map.terrain&&T.style.map.terrain.getTerrainData(ct),mn=Gt?ct:null,Kn=mn?mn.posMatrix:T.transform.calculatePosMatrix(ct.toUnwrapped(),Ze),Yt=Gm(Kn,Bt||[0,0],Pt||1,pt,D);X instanceof Nt?oe.draw(N,G.TRIANGLES,Le,ji.disabled,we,$i.disabled,Yt,Gt,D.id,X.boundsBuffer,T.quadTriangleIndexBuffer,X.boundsSegments):oe.draw(N,G.TRIANGLES,Le,xe[ct.overscaledZ],we,$i.disabled,Yt,Gt,D.id,T.rasterBoundsBuffer,T.quadTriangleIndexBuffer,T.rasterBoundsSegments)}})(o,f,v,b);break;case"background":(function(T,P,D,R){const N=D.paint.get("background-color"),G=D.paint.get("background-opacity");if(G===0)return;const X=T.context,oe=X.gl,we=T.transform,xe=we.tileSize,Me=D.paint.get("background-pattern");if(T.isPatternMissing(Me))return;const ge=!Me&&N.a===1&&G===1&&T.opaquePassEnabledForLayer()?"opaque":"translucent";if(T.renderPass!==ge)return;const Ze=ji.disabled,ct=T.depthModeForSublayer(0,ge==="opaque"?ni.ReadWrite:ni.ReadOnly),Le=T.colorModeForRenderPass(),Ye=T.useProgram(Me?"backgroundPattern":"background"),ht=R||we.coveringTiles({tileSize:xe,terrain:T.style.map.terrain});Me&&(X.activeTexture.set(oe.TEXTURE0),T.imageManager.bind(T.context));const pt=D.getCrossfadeParameters();for(const Pt of ht){const Bt=R?Pt.posMatrix:T.transform.calculatePosMatrix(Pt.toUnwrapped()),Rt=Me?js(Bt,G,T,Me,{tileID:Pt,tileSize:xe},pt):cd(Bt,G,N),Gt=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Pt);Ye.draw(X,oe.TRIANGLES,ct,Ze,Le,$i.disabled,Rt,Gt,D.id,T.tileExtentBuffer,T.quadTriangleIndexBuffer,T.tileExtentSegments)}})(o,0,v,b);break;case"custom":(function(T,P,D){const R=T.context,N=D.implementation;if(T.renderPass==="offscreen"){const G=N.prerender;G&&(T.setCustomLayerDefaults(),R.setColorMode(T.colorModeForRenderPass()),G.call(N,R.gl,T.transform.customLayerMatrix()),R.setDirty(),T.setBaseState())}else if(T.renderPass==="translucent"){T.setCustomLayerDefaults(),R.setColorMode(T.colorModeForRenderPass()),R.setStencilMode(ji.disabled);const G=N.renderingMode==="3d"?new ni(T.context.gl.LEQUAL,ni.ReadWrite,T.depthRangeFor3D):T.depthModeForSublayer(0,ni.ReadOnly);R.setDepthMode(G),N.render(R.gl,T.transform.customLayerMatrix()),R.setDirty(),T.setBaseState(),R.bindFramebuffer.set(null)}})(o,0,v)}}translatePosMatrix(o,f,v,b,T){if(!v[0]&&!v[1])return o;const P=T?b==="map"?this.transform.angle:0:b==="viewport"?-this.transform.angle:0;if(P){const N=Math.sin(P),G=Math.cos(P);v=[v[0]*G-v[1]*N,v[0]*N+v[1]*G]}const D=[T?v[0]:Be(f,v[0],this.transform.zoom),T?v[1]:Be(f,v[1],this.transform.zoom),0],R=new Float32Array(16);return l.$(R,o,D),R}saveTileTexture(o){const f=this._tileTextures[o.size[0]];f?f.push(o):this._tileTextures[o.size[0]]=[o]}getTileTexture(o){const f=this._tileTextures[o];return f&&f.length>0?f.pop():null}isPatternMissing(o){if(!o)return!1;if(!o.from||!o.to)return!0;const f=this.imageManager.getPattern(o.from.toString()),v=this.imageManager.getPattern(o.to.toString());return!f||!v}useProgram(o,f){this.cache=this.cache||{};const v=o+(f?f.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[v]||(this.cache[v]=new sd(this.context,Ni[o],f,ud[o],this._showOverdrawInspector,this.style.map.terrain)),this.cache[v]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new J(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:o,drawingBufferHeight:f}=this.context.gl;return this.width!==o||this.height!==f}}class is{constructor(o,f){this.points=o,this.planes=f}static fromInvProjectionMatrix(o,f,v){const b=Math.pow(2,v),T=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(D=>{const R=1/(D=l.ag([],D,o))[3]/f*b;return l.b3(D,D,[R,R,1/D[3],R])}),P=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(D=>{const R=function(oe,we){var xe=we[0],Me=we[1],ge=we[2],Ze=xe*xe+Me*Me+ge*ge;return Ze>0&&(Ze=1/Math.sqrt(Ze)),oe[0]=we[0]*Ze,oe[1]=we[1]*Ze,oe[2]=we[2]*Ze,oe}([],function(oe,we,xe){var Me=we[0],ge=we[1],Ze=we[2],ct=xe[0],Le=xe[1],Ye=xe[2];return oe[0]=ge*Ye-Ze*Le,oe[1]=Ze*ct-Me*Ye,oe[2]=Me*Le-ge*ct,oe}([],Q([],T[D[0]],T[D[1]]),Q([],T[D[2]],T[D[1]]))),N=-((G=R)[0]*(X=T[D[1]])[0]+G[1]*X[1]+G[2]*X[2]);var G,X;return R.concat(N)});return new is(T,P)}}class Hl{constructor(o,f){this.min=o,this.max=f,this.center=function(v,b,T){return v[0]=.5*b[0],v[1]=.5*b[1],v[2]=.5*b[2],v}([],function(v,b,T){return v[0]=b[0]+T[0],v[1]=b[1]+T[1],v[2]=b[2]+T[2],v}([],this.min,this.max))}quadrant(o){const f=[o%2==0,o<2],v=q(this.min),b=q(this.max);for(let T=0;T<f.length;T++)v[T]=f[T]?this.min[T]:this.center[T],b[T]=f[T]?this.center[T]:this.max[T];return b[2]=this.max[2],new Hl(v,b)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}intersects(o){const f=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let v=!0;for(let b=0;b<o.planes.length;b++){const T=o.planes[b];let P=0;for(let D=0;D<f.length;D++)l.b4(T,f[D])>=0&&P++;if(P===0)return 0;P!==f.length&&(v=!1)}if(v)return 2;for(let b=0;b<3;b++){let T=Number.MAX_VALUE,P=-Number.MAX_VALUE;for(let D=0;D<o.points.length;D++){const R=o.points[D][b]-this.min[b];T=Math.min(T,R),P=Math.max(P,R)}if(P<0||T>this.max[b]-this.min[b])return 0}return 1}}class Jc{constructor(o=0,f=0,v=0,b=0){if(isNaN(o)||o<0||isNaN(f)||f<0||isNaN(v)||v<0||isNaN(b)||b<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=f,this.left=v,this.right=b}interpolate(o,f,v){return f.top!=null&&o.top!=null&&(this.top=l.B.number(o.top,f.top,v)),f.bottom!=null&&o.bottom!=null&&(this.bottom=l.B.number(o.bottom,f.bottom,v)),f.left!=null&&o.left!=null&&(this.left=l.B.number(o.left,f.left,v)),f.right!=null&&o.right!=null&&(this.right=l.B.number(o.right,f.right,v)),this}getCenter(o,f){const v=l.ad((this.left+o-this.right)/2,0,o),b=l.ad((this.top+f-this.bottom)/2,0,f);return new l.P(v,b)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new Jc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Ed{constructor(o,f,v,b,T){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=T===void 0||!!T,this._minZoom=o||0,this._maxZoom=f||22,this._minPitch=v??0,this._maxPitch=b??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Jc,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const o=new Ed(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return o.apply(this),o}apply(o){this.tileSize=o.tileSize,this.latRange=o.latRange,this.width=o.width,this.height=o.height,this._center=o._center,this._elevation=o._elevation,this._minEleveationForCurrentTile=o._minEleveationForCurrentTile,this.zoom=o.zoom,this.angle=o.angle,this._fov=o._fov,this._pitch=o._pitch,this._unmodified=o._unmodified,this._edgeInsets=o._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(o){const f=-l.b5(o,-180,180)*Math.PI/180;this.angle!==f&&(this._unmodified=!1,this.angle=f,this._calcMatrices(),this.rotationMatrix=function(){var v=new l.A(4);return l.A!=Float32Array&&(v[1]=0,v[2]=0),v[0]=1,v[3]=1,v}(),function(v,b,T){var P=b[0],D=b[1],R=b[2],N=b[3],G=Math.sin(T),X=Math.cos(T);v[0]=P*X+R*G,v[1]=D*X+N*G,v[2]=P*-G+R*X,v[3]=D*-G+N*X}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(o){const f=l.ad(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==f&&(this._unmodified=!1,this._pitch=f,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=o/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(o){const f=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==f&&(this._unmodified=!1,this._zoom=f,this.tileZoom=Math.max(0,Math.floor(f)),this.scale=this.zoomScale(f),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(o){o!==this._elevation&&(this._elevation=o,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,f,v){this._unmodified=!1,this._edgeInsets.interpolate(o,f,v),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){const f=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,f)}getVisibleUnwrappedCoordinates(o){const f=[new l.b6(0,o)];if(this._renderWorldCopies){const v=this.pointCoordinate(new l.P(0,0)),b=this.pointCoordinate(new l.P(this.width,0)),T=this.pointCoordinate(new l.P(this.width,this.height)),P=this.pointCoordinate(new l.P(0,this.height)),D=Math.floor(Math.min(v.x,b.x,T.x,P.x)),R=Math.floor(Math.max(v.x,b.x,T.x,P.x)),N=1;for(let G=D-N;G<=R+N;G++)G!==0&&f.push(new l.b6(G,o))}return f}coveringTiles(o){var f,v;let b=this.coveringZoomLevel(o);const T=b;if(o.minzoom!==void 0&&b<o.minzoom)return[];o.maxzoom!==void 0&&b>o.maxzoom&&(b=o.maxzoom);const P=this.pointCoordinate(this.getCameraPoint()),D=l.U.fromLngLat(this.center),R=Math.pow(2,b),N=[R*P.x,R*P.y,0],G=[R*D.x,R*D.y,0],X=is.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,b);let oe=o.minzoom||0;!o.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(oe=b);const we=o.terrain?2/Math.min(this.tileSize,o.tileSize)*this.tileSize:3,xe=Le=>({aabb:new Hl([Le*R,0,0],[(Le+1)*R,R,0]),zoom:0,x:0,y:0,wrap:Le,fullyVisible:!1}),Me=[],ge=[],Ze=b,ct=o.reparseOverscaled?T:b;if(this._renderWorldCopies)for(let Le=1;Le<=3;Le++)Me.push(xe(-Le)),Me.push(xe(Le));for(Me.push(xe(0));Me.length>0;){const Le=Me.pop(),Ye=Le.x,ht=Le.y;let pt=Le.fullyVisible;if(!pt){const mn=Le.aabb.intersects(X);if(mn===0)continue;pt=mn===2}const Pt=o.terrain?N:G,Bt=Le.aabb.distanceX(Pt),Rt=Le.aabb.distanceY(Pt),Gt=Math.max(Math.abs(Bt),Math.abs(Rt));if(Le.zoom===Ze||Gt>we+(1<<Ze-Le.zoom)-2&&Le.zoom>=oe){const mn=Ze-Le.zoom,Kn=N[0]-.5-(Ye<<mn),Yt=N[1]-.5-(ht<<mn);ge.push({tileID:new l.O(Le.zoom===Ze?ct:Le.zoom,Le.wrap,Le.zoom,Ye,ht),distanceSq:ve([G[0]-.5-Ye,G[1]-.5-ht]),tileDistanceToCamera:Math.sqrt(Kn*Kn+Yt*Yt)})}else for(let mn=0;mn<4;mn++){const Kn=(Ye<<1)+mn%2,Yt=(ht<<1)+(mn>>1),On=Le.zoom+1;let vn=Le.aabb.quadrant(mn);if(o.terrain){const Ei=new l.O(On,Le.wrap,On,Kn,Yt),qn=o.terrain.getMinMaxElevation(Ei),Vn=(f=qn.minElevation)!==null&&f!==void 0?f:this.elevation,Xn=(v=qn.maxElevation)!==null&&v!==void 0?v:this.elevation;vn=new Hl([vn.min[0],vn.min[1],Vn],[vn.max[0],vn.max[1],Xn])}Me.push({aabb:vn,zoom:On,x:Kn,y:Yt,wrap:Le.wrap,fullyVisible:pt})}}return ge.sort((Le,Ye)=>Le.distanceSq-Ye.distanceSq).map(Le=>Le.tileID)}resize(o,f){this.width=o,this.height=f,this.pixelsToGLUnits=[2/o,-2/f],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){const f=l.ad(o.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.P(l.G(o.lng)*this.worldSize,l.H(f)*this.worldSize)}unproject(o){return new l.U(o.x/this.worldSize,o.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(o){const f=this.pointLocation(this.centerPoint,o),v=o.getElevationForLngLatZoom(f,this.tileZoom);if(!(this.elevation-v))return;const b=this.getCameraPosition(),T=l.U.fromLngLat(b.lngLat,b.altitude),P=l.U.fromLngLat(f,v),D=T.x-P.x,R=T.y-P.y,N=T.z-P.z,G=Math.sqrt(D*D+R*R+N*N),X=this.scaleZoom(this.cameraToCenterDistance/G/this.tileSize);this._elevation=v,this._center=f,this.zoom=X}setLocationAtPoint(o,f){const v=this.pointCoordinate(f),b=this.pointCoordinate(this.centerPoint),T=this.locationCoordinate(o),P=new l.U(T.x-(v.x-b.x),T.y-(v.y-b.y));this.center=this.coordinateLocation(P),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(o,f){return f?this.coordinatePoint(this.locationCoordinate(o),f.getElevationForLngLatZoom(o,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(o))}pointLocation(o,f){return this.coordinateLocation(this.pointCoordinate(o,f))}locationCoordinate(o){return l.U.fromLngLat(o)}coordinateLocation(o){return o&&o.toLngLat()}pointCoordinate(o,f){if(f){const oe=f.pointCoordinate(o);if(oe!=null)return oe}const v=[o.x,o.y,0,1],b=[o.x,o.y,1,1];l.ag(v,v,this.pixelMatrixInverse),l.ag(b,b,this.pixelMatrixInverse);const T=v[3],P=b[3],D=v[1]/T,R=b[1]/P,N=v[2]/T,G=b[2]/P,X=N===G?0:(0-N)/(G-N);return new l.U(l.B.number(v[0]/T,b[0]/P,X)/this.worldSize,l.B.number(D,R,X)/this.worldSize)}coordinatePoint(o,f=0,v=this.pixelMatrix){const b=[o.x*this.worldSize,o.y*this.worldSize,f,1];return l.ag(b,b,v),new l.P(b[0]/b[3],b[1]/b[3])}getBounds(){const o=Math.max(0,this.height/2-this.getHorizon());return new Ge().extend(this.pointLocation(new l.P(0,o))).extend(this.pointLocation(new l.P(this.width,o))).extend(this.pointLocation(new l.P(this.width,this.height))).extend(this.pointLocation(new l.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Ge([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(o){o?(this.lngRange=[o.getWest(),o.getEast()],this.latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(o,f=!1){const v=o.key,b=f?this._alignedPosMatrixCache:this._posMatrixCache;if(b[v])return b[v];const T=o.canonical,P=this.worldSize/this.zoomScale(T.z),D=T.x+Math.pow(2,T.z)*o.wrap,R=l.ao(new Float64Array(16));return l.$(R,R,[D*P,T.y*P,0]),l.a0(R,R,[P/l.N,P/l.N,1]),l.a1(R,f?this.alignedProjMatrix:this.projMatrix,R),b[v]=new Float32Array(R),b[v]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let o,f,v,b,T=-90,P=90,D=-180,R=180;const N=this.size,G=this._unmodified;if(this.latRange){const we=this.latRange;T=l.H(we[1])*this.worldSize,P=l.H(we[0])*this.worldSize,o=P-T<N.y?N.y/(P-T):0}if(this.lngRange){const we=this.lngRange;D=l.b5(l.G(we[0])*this.worldSize,0,this.worldSize),R=l.b5(l.G(we[1])*this.worldSize,0,this.worldSize),R<D&&(R+=this.worldSize),f=R-D<N.x?N.x/(R-D):0}const X=this.point,oe=Math.max(f||0,o||0);if(oe)return this.center=this.unproject(new l.P(f?(R+D)/2:X.x,o?(P+T)/2:X.y)),this.zoom+=this.scaleZoom(oe),this._unmodified=G,void(this._constraining=!1);if(this.latRange){const we=X.y,xe=N.y/2;we-xe<T&&(b=T+xe),we+xe>P&&(b=P-xe)}if(this.lngRange){const we=(D+R)/2,xe=l.b5(X.x,we-this.worldSize/2,we+this.worldSize/2),Me=N.x/2;xe-Me<D&&(v=D+Me),xe+Me>R&&(v=R-Me)}v===void 0&&b===void 0||(this.center=this.unproject(new l.P(v!==void 0?v:X.x,b!==void 0?b:X.y)).wrap()),this._unmodified=G,this._constraining=!1}_calcMatrices(){if(!this.height)return;const o=this.centerOffset,f=this.point.x,v=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.b7(1,this.center.lat)*this.worldSize;let b=l.ao(new Float64Array(16));l.a0(b,b,[this.width/2,-this.height/2,1]),l.$(b,b,[1,-1,0]),this.labelPlaneMatrix=b,b=l.ao(new Float64Array(16)),l.a0(b,b,[1,-1,1]),l.$(b,b,[-1,-1,0]),l.a0(b,b,[2/this.width,2/this.height,1]),this.glCoordMatrix=b;const T=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),P=Math.min(this.elevation,this._minEleveationForCurrentTile),D=T-P*this._pixelPerMeter/Math.cos(this._pitch),R=P<0?D:T,N=Math.PI/2+this._pitch,G=this._fov*(.5+o.y/this.height),X=Math.sin(G)*R/Math.sin(l.ad(Math.PI-N-G,.01,Math.PI-.01)),oe=this.getHorizon(),we=2*Math.atan(oe/this.cameraToCenterDistance)*(.5+o.y/(2*oe)),xe=Math.sin(we)*R/Math.sin(l.ad(Math.PI-N-we,.01,Math.PI-.01)),Me=Math.min(X,xe),ge=1.01*(Math.cos(Math.PI/2-this._pitch)*Me+R),Ze=this.height/50;b=new Float64Array(16),l.b8(b,this._fov,this.width/this.height,Ze,ge),b[8]=2*-o.x/this.width,b[9]=2*o.y/this.height,l.a0(b,b,[1,-1,1]),l.$(b,b,[0,0,-this.cameraToCenterDistance]),l.b9(b,b,this._pitch),l.ae(b,b,this.angle),l.$(b,b,[-f,-v,0]),this.mercatorMatrix=l.a0([],b,[this.worldSize,this.worldSize,this.worldSize]),l.a0(b,b,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.a1(new Float64Array(16),this.labelPlaneMatrix,b),l.$(b,b,[0,0,-this.elevation]),this.projMatrix=b,this.invProjMatrix=l.as([],b),this.pixelMatrix3D=l.a1(new Float64Array(16),this.labelPlaneMatrix,b);const ct=this.width%2/2,Le=this.height%2/2,Ye=Math.cos(this.angle),ht=Math.sin(this.angle),pt=f-Math.round(f)+Ye*ct+ht*Le,Pt=v-Math.round(v)+Ye*Le+ht*ct,Bt=new Float64Array(b);if(l.$(Bt,Bt,[pt>.5?pt-1:pt,Pt>.5?Pt-1:Pt,0]),this.alignedProjMatrix=Bt,b=l.as(new Float64Array(16),this.pixelMatrix),!b)throw new Error("failed to invert matrix");this.pixelMatrixInverse=b,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const o=this.pointCoordinate(new l.P(0,0)),f=[o.x*this.worldSize,o.y*this.worldSize,0,1];return l.ag(f,f,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,o))}getCameraQueryGeometry(o){const f=this.getCameraPoint();if(o.length===1)return[o[0],f];{let v=f.x,b=f.y,T=f.x,P=f.y;for(const D of o)v=Math.min(v,D.x),b=Math.min(b,D.y),T=Math.max(T,D.x),P=Math.max(P,D.y);return[new l.P(v,b),new l.P(T,b),new l.P(T,P),new l.P(v,P),new l.P(v,b)]}}}function rl(w,o){let f,v=!1,b=null,T=null;const P=()=>{b=null,v&&(w.apply(T,f),b=setTimeout(P,o),v=!1)};return(...D)=>(v=!0,T=this,f=D,b||P(),b)}class Qc{constructor(o){this._getCurrentHash=()=>{const f=window.location.hash.replace("#","");if(this._hashName){let v;return f.split("&").map(b=>b.split("=")).forEach(b=>{b[0]===this._hashName&&(v=b)}),(v&&v[1]||"").split("/")}return f.split("/")},this._onHashChange=()=>{const f=this._getCurrentHash();if(f.length>=3&&!f.some(v=>isNaN(v))){const v=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(f[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:v,pitch:+(f[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const f=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,f)}catch{}},this._updateHash=rl(this._updateHashUnthrottled,300),this._hashName=o&&encodeURIComponent(o)}addTo(o){return this._map=o,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(o){const f=this._map.getCenter(),v=Math.round(100*this._map.getZoom())/100,b=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),T=Math.pow(10,b),P=Math.round(f.lng*T)/T,D=Math.round(f.lat*T)/T,R=this._map.getBearing(),N=this._map.getPitch();let G="";if(G+=o?`/${P}/${D}/${v}`:`${v}/${D}/${P}`,(R||N)&&(G+="/"+Math.round(10*R)/10),N&&(G+=`/${Math.round(N)}`),this._hashName){const X=this._hashName;let oe=!1;const we=window.location.hash.slice(1).split("&").map(xe=>{const Me=xe.split("=")[0];return Me===X?(oe=!0,`${Me}=${G}`):xe}).filter(xe=>xe);return oe||we.push(`${X}=${G}`),`#${we.join("&")}`}return`#${G}`}}const Gl={linearity:.3,easing:l.ba(0,0,.3,1)},rg=l.e({deceleration:2500,maxSpeed:1400},Gl),sg=l.e({deceleration:20,maxSpeed:1400},Gl),ag=l.e({deceleration:1e3,maxSpeed:360},Gl),og=l.e({deceleration:1e3,maxSpeed:90},Gl);class lg{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.h.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,f=l.h.now();for(;o.length>0&&f-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const f={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:T}of this._inertiaBuffer)f.zoom+=T.zoomDelta||0,f.bearing+=T.bearingDelta||0,f.pitch+=T.pitchDelta||0,T.panDelta&&f.pan._add(T.panDelta),T.around&&(f.around=T.around),T.pinchAround&&(f.pinchAround=T.pinchAround);const v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(f.pan.mag()){const T=eu(f.pan.mag(),v,l.e({},rg,o||{}));b.offset=f.pan.mult(T.amount/f.pan.mag()),b.center=this._map.transform.center,xa(b,T)}if(f.zoom){const T=eu(f.zoom,v,sg);b.zoom=this._map.transform.zoom+T.amount,xa(b,T)}if(f.bearing){const T=eu(f.bearing,v,ag);b.bearing=this._map.transform.bearing+l.ad(T.amount,-179,179),xa(b,T)}if(f.pitch){const T=eu(f.pitch,v,og);b.pitch=this._map.transform.pitch+T.amount,xa(b,T)}if(b.zoom||b.bearing){const T=f.pinchAround===void 0?f.around:f.pinchAround;b.around=T?this._map.unproject(T):this._map.getCenter()}return this.clear(),l.e(b,{noMoveStart:!0})}}function xa(w,o){(!w.duration||w.duration<o.duration)&&(w.duration=o.duration,w.easing=o.easing)}function eu(w,o,f){const{maxSpeed:v,linearity:b,deceleration:T}=f,P=l.ad(w*b/(o/1e3),-v,v),D=Math.abs(P)/(T*b);return{easing:f.easing,duration:1e3*D,amount:P*(D/2)}}class xs extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,f,v,b={}){const T=g.mousePos(f.getCanvasContainer(),v),P=f.unproject(T);super(o,l.e({point:T,lngLat:P,originalEvent:v},b)),this._defaultPrevented=!1,this.target=f}}class tu extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,f,v){const b=o==="touchend"?v.changedTouches:v.touches,T=g.touchPos(f.getCanvasContainer(),b),P=T.map(R=>f.unproject(R)),D=T.reduce((R,N,G,X)=>R.add(N.div(X.length)),new l.P(0,0));super(o,{points:T,point:D,lngLats:P,lngLat:f.unproject(D),originalEvent:v}),this._defaultPrevented=!1}}class cg extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,f,v){super(o,{originalEvent:v}),this._defaultPrevented=!1}}class ug{constructor(o,f){this._map=o,this._clickTolerance=f.clickTolerance}reset(){delete this._mousedownPos}wheel(o){return this._firePreventable(new cg(o.type,this._map,o))}mousedown(o,f){return this._mousedownPos=f,this._firePreventable(new xs(o.type,this._map,o))}mouseup(o){this._map.fire(new xs(o.type,this._map,o))}click(o,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||this._map.fire(new xs(o.type,this._map,o))}dblclick(o){return this._firePreventable(new xs(o.type,this._map,o))}mouseover(o){this._map.fire(new xs(o.type,this._map,o))}mouseout(o){this._map.fire(new xs(o.type,this._map,o))}touchstart(o){return this._firePreventable(new tu(o.type,this._map,o))}touchmove(o){this._map.fire(new tu(o.type,this._map,o))}touchend(o){this._map.fire(new tu(o.type,this._map,o))}touchcancel(o){this._map.fire(new tu(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class dg{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(o){this._map.fire(new xs(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new xs("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._ignoreContextMenu||this._map.fire(new xs(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ga{constructor(o){this._map=o}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(o){return this.transform.pointLocation(l.P.convert(o),this._map.terrain)}}class hg{constructor(o,f){this._map=o,this._tr=new Ga(o),this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,f){this.isEnabled()&&o.shiftKey&&o.button===0&&(g.disableDrag(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(o,f){if(!this._active)return;const v=f;if(this._lastPos.equals(v)||!this._box&&v.dist(this._startPos)<this._clickTolerance)return;const b=this._startPos;this._lastPos=v,this._box||(this._box=g.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",o));const T=Math.min(b.x,v.x),P=Math.max(b.x,v.x),D=Math.min(b.y,v.y),R=Math.max(b.y,v.y);g.setTransform(this._box,`translate(${T}px,${D}px)`),this._box.style.width=P-T+"px",this._box.style.height=R-D+"px"}mouseupWindow(o,f){if(!this._active||o.button!==0)return;const v=this._startPos,b=f;if(this.reset(),g.suppressClick(),v.x!==b.x||v.y!==b.y)return this._map.fire(new l.k("boxzoomend",{originalEvent:o})),{cameraAnimation:T=>T.fitScreenCoordinates(v,b,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",o)}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(g.remove(this._box),this._box=null),g.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(o,f){return this._map.fire(new l.k(o,{originalEvent:f}))}}function Vs(w,o){if(w.length!==o.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${o.length}`);const f={};for(let v=0;v<w.length;v++)f[w[v].identifier]=o[v];return f}class Wa{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(o,f,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=o.timeStamp),v.length===this.numTouches&&(this.centroid=function(b){const T=new l.P(0,0);for(const P of b)T._add(P);return T.div(b.length)}(f),this.touches=Vs(v,f)))}touchmove(o,f,v){if(this.aborted||!this.centroid)return;const b=Vs(v,f);for(const T in this.touches){const P=b[T];(!P||P.dist(this.touches[T])>30)&&(this.aborted=!0)}}touchend(o,f,v){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),v.length===0){const b=!this.aborted&&this.centroid;if(this.reset(),b)return b}}}class Cd{constructor(o){this.singleTap=new Wa(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(o,f,v){this.singleTap.touchstart(o,f,v)}touchmove(o,f,v){this.singleTap.touchmove(o,f,v)}touchend(o,f,v){const b=this.singleTap.touchend(o,f,v);if(b){const T=o.timeStamp-this.lastTime<500,P=!this.lastTap||this.lastTap.dist(b)<30;if(T&&P||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=b,this.count===this.numTaps)return this.reset(),b}}}class qa{constructor(o){this._tr=new Ga(o),this._zoomIn=new Cd({numTouches:1,numTaps:2}),this._zoomOut=new Cd({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,f,v){this._zoomIn.touchstart(o,f,v),this._zoomOut.touchstart(o,f,v)}touchmove(o,f,v){this._zoomIn.touchmove(o,f,v),this._zoomOut.touchmove(o,f,v)}touchend(o,f,v){const b=this._zoomIn.touchend(o,f,v),T=this._zoomOut.touchend(o,f,v),P=this._tr;return b?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:P.zoom+1,around:P.unproject(b)},{originalEvent:o})}):T?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:P.zoom-1,around:P.unproject(T)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Za{constructor(o){this._enabled=!!o.enable,this._moveStateManager=o.moveStateManager,this._clickTolerance=o.clickTolerance||1,this._moveFunction=o.move,this._activateOnStart=!!o.activateOnStart,o.assignEvents(this),this.reset()}reset(o){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(o)}_move(...o){const f=this._moveFunction(...o);if(f.bearingDelta||f.pitchDelta||f.around||f.panDelta)return this._active=!0,f}dragStart(o,f){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(o)&&(this._moveStateManager.startMove(o),this._lastPoint=f.length?f[0]:f,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(o,f){if(!this.isEnabled())return;const v=this._lastPoint;if(!v)return;if(o.preventDefault(),!this._moveStateManager.isValidMoveEvent(o))return void this.reset(o);const b=f.length?f[0]:f;return!this._moved&&b.dist(v)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=b,this._move(v,b))}dragEnd(o){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(o)&&(this._moved&&g.suppressClick(),this.reset(o))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const $y={0:1,2:2};class pf{constructor(o){this._correctEvent=o.checkCorrectEvent}startMove(o){const f=g.mouseButton(o);this._eventButton=f}endMove(o){delete this._eventButton}isValidStartEvent(o){return this._correctEvent(o)}isValidMoveEvent(o){return!function(f,v){const b=$y[v];return f.buttons===void 0||(f.buttons&b)!==b}(o,this._eventButton)}isValidEndEvent(o){return g.mouseButton(o)===this._eventButton}}class fg{constructor(){this._firstTouch=void 0}_isOneFingerTouch(o){return o.targetTouches.length===1}_isSameTouchEvent(o){return o.targetTouches[0].identifier===this._firstTouch}startMove(o){this._firstTouch=o.targetTouches[0].identifier}endMove(o){delete this._firstTouch}isValidStartEvent(o){return this._isOneFingerTouch(o)}isValidMoveEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}isValidEndEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}}const Id=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=function(o){o.preventDefault()}},Wl=({enable:w,clickTolerance:o,bearingDegreesPerPixelMoved:f=.8})=>{const v=new pf({checkCorrectEvent:b=>g.mouseButton(b)===0&&b.ctrlKey||g.mouseButton(b)===2});return new Za({clickTolerance:o,move:(b,T)=>({bearingDelta:(T.x-b.x)*f}),moveStateManager:v,enable:w,assignEvents:Id})},Ka=({enable:w,clickTolerance:o,pitchDegreesPerPixelMoved:f=-.5})=>{const v=new pf({checkCorrectEvent:b=>g.mouseButton(b)===0&&b.ctrlKey||g.mouseButton(b)===2});return new Za({clickTolerance:o,move:(b,T)=>({pitchDelta:(T.y-b.y)*f}),moveStateManager:v,enable:w,assignEvents:Id})};class un{constructor(o,f){this._minTouches=o.cooperativeGestures?2:1,this._clickTolerance=o.clickTolerance||1,this._map=f,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(o,f,v){return this._calculateTransform(o,f,v)}touchmove(o,f,v){if(this._map._cooperativeGestures&&(this._minTouches===2&&v.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(o,!1,v.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(v.length<this._minTouches))return o.preventDefault(),this._calculateTransform(o,f,v)}touchend(o,f,v){this._calculateTransform(o,f,v),this._active&&v.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,f,v){v.length>0&&(this._active=!0);const b=Vs(v,f),T=new l.P(0,0),P=new l.P(0,0);let D=0;for(const N in b){const G=b[N],X=this._touches[N];X&&(T._add(G),P._add(G.sub(X)),D++,b[N]=G)}if(this._touches=b,D<this._minTouches||!P.mag())return;const R=P.div(D);return this._sum._add(R),this._sum.mag()<this._clickTolerance?void 0:{around:T.div(D),panDelta:R}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ad{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(o,f,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([f[0],f[1]]))}touchmove(o,f,v){if(!this._firstTwoTouches)return;o.preventDefault();const[b,T]=this._firstTwoTouches,P=Co(v,f,b),D=Co(v,f,T);if(!P||!D)return;const R=this._aroundCenter?null:P.add(D).div(2);return this._move([P,D],R,o)}touchend(o,f,v){if(!this._firstTwoTouches)return;const[b,T]=this._firstTwoTouches,P=Co(v,f,b),D=Co(v,f,T);P&&D||(this._active&&g.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Co(w,o,f){for(let v=0;v<w.length;v++)if(w[v].identifier===f)return o[v]}function ql(w,o){return Math.log(w/o)/Math.LN2}class pg extends Ad{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,f){const v=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(ql(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ql(this._distance,v),pinchAround:f}}}function rn(w,o){return 180*w.angleWith(o)/Math.PI}class mf extends Ad{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,f){const v=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:rn(this._vector,v),pinchAround:f}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const f=25/(Math.PI*this._minDiameter)*360,v=rn(o,this._startVector);return Math.abs(v)<f}}function gf(w){return Math.abs(w.y)>Math.abs(w.x)}class zy extends Ad{constructor(o){super(),this._map=o}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(o,f,v){super.touchstart(o,f,v),this._currentTouchCount=v.length}_start(o){this._lastPoints=o,gf(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,f,v){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const b=o[0].sub(this._lastPoints[0]),T=o[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(b,T,v.timeStamp),this._valid?(this._lastPoints=o,this._active=!0,{pitchDelta:(b.y+T.y)/2*-.5}):void 0}gestureBeginsVertically(o,f,v){if(this._valid!==void 0)return this._valid;const b=o.mag()>=2,T=f.mag()>=2;if(!b&&!T)return;if(!b||!T)return this._firstMove===void 0&&(this._firstMove=v),v-this._firstMove<100&&void 0;const P=o.y>0==f.y>0;return gf(o)&&gf(f)&&P}}const vf={panStep:100,bearingStep:15,pitchStep:10};class mg{constructor(o){this._tr=new Ga(o);const f=vf;this._panStep=f.panStep,this._bearingStep=f.bearingStep,this._pitchStep=f.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let f=0,v=0,b=0,T=0,P=0;switch(o.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:o.shiftKey?v=-1:(o.preventDefault(),T=-1);break;case 39:o.shiftKey?v=1:(o.preventDefault(),T=1);break;case 38:o.shiftKey?b=1:(o.preventDefault(),P=-1);break;case 40:o.shiftKey?b=-1:(o.preventDefault(),P=1);break;default:return}return this._rotationDisabled&&(v=0,b=0),{cameraAnimation:D=>{const R=this._tr;D.easeTo({duration:300,easeId:"keyboardHandler",easing:gg,zoom:f?Math.round(R.zoom)+f*(o.shiftKey?2:1):R.zoom,bearing:R.bearing+v*this._bearingStep,pitch:R.pitch+b*this._pitchStep,offset:[-T*this._panStep,-P*this._panStep],center:R.center},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function gg(w){return w*(2-w)}const vg=4.000244140625;class Ny{constructor(o,f){this._onTimeout=v=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(v)},this._map=o,this._tr=new Ga(o),this._el=o.getCanvasContainer(),this._triggerRenderFrame=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!o&&o.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(o){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!o[this._map._metaKey])return;o.preventDefault()}let f=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const v=l.h.now(),b=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,f!==0&&f%vg==0?this._type="wheel":f!==0&&Math.abs(f)<4?this._type="trackpad":b>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(b*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),o.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=o,this._delta-=f,this._active||this._start(o)),o.preventDefault()}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=g.mousePos(this._el,o),v=this._tr;this._around=l.L.convert(this._aroundCenter?v.center:v.unproject(f)),this._aroundPoint=v.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._tr.transform;if(this._delta!==0){const D=this._type==="wheel"&&Math.abs(this._delta)>vg?this._wheelZoomRate:this._defaultZoomRate;let R=2/(1+Math.exp(-Math.abs(this._delta*D)));this._delta<0&&R!==0&&(R=1/R);const N=typeof this._targetZoom=="number"?o.zoomScale(this._targetZoom):o.scale;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(N*R))),this._type==="wheel"&&(this._startZoom=o.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const f=typeof this._targetZoom=="number"?this._targetZoom:o.zoom,v=this._startZoom,b=this._easing;let T,P=!1;if(this._type==="wheel"&&v&&b){const D=Math.min((l.h.now()-this._lastWheelEventTime)/200,1),R=b(D);T=l.B.number(v,f,R),D<1?this._frameId||(this._frameId=!0):P=!0}else T=f,P=!0;return this._active=!0,P&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!P,zoomDelta:T-o.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let f=l.bb;if(this._prevEase){const v=this._prevEase,b=(l.h.now()-v.start)/v.duration,T=v.easing(b+.01)-v.easing(b),P=.27/Math.sqrt(T*T+1e-4)*.01,D=Math.sqrt(.0729-P*P);f=l.ba(P,D,.25,1)}return this._prevEase={start:l.h.now(),duration:o,easing:f},f}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class _f{constructor(o,f){this._clickZoom=o,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class yf{constructor(o){this._tr=new Ga(o),this.reset()}reset(){this._active=!1}dblclick(o,f){return o.preventDefault(),{cameraAnimation:v=>{v.easeTo({duration:300,zoom:this._tr.zoom+(o.shiftKey?-1:1),around:this._tr.unproject(f)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bf{constructor(){this._tap=new Cd({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(o,f,v){if(!this._swipePoint)if(this._tapTime){const b=f[0],T=o.timeStamp-this._tapTime<500,P=this._tapPoint.dist(b)<30;T&&P?v.length>0&&(this._swipePoint=b,this._swipeTouch=v[0].identifier):this.reset()}else this._tap.touchstart(o,f,v)}touchmove(o,f,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;const b=f[0],T=b.y-this._swipePoint.y;return this._swipePoint=b,o.preventDefault(),this._active=!0,{zoomDelta:T/128}}}else this._tap.touchmove(o,f,v)}touchend(o,f,v){if(this._tapTime)this._swipePoint&&v.length===0&&this.reset();else{const b=this._tap.touchend(o,f,v);b&&(this._tapTime=o.timeStamp,this._tapPoint=b)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xf{constructor(o,f,v){this._el=o,this._mousePan=f,this._touchPan=v}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class rs{constructor(o,f,v){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=f,this._mousePitch=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Io{constructor(o,f,v,b){this._el=o,this._touchZoom=f,this._touchRotate=v,this._tapDragZoom=b,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const nu=w=>w.zoom||w.drag||w.pitch||w.rotate;class wf extends l.k{}function iu(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta}class Sf{constructor(o,f){this.handleWindowEvent=b=>{this.handleEvent(b,`${b.type}Window`)},this.handleEvent=(b,T)=>{if(b.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const P=b.type==="renderFrame"?void 0:b,D={needsRenderFrame:!1},R={},N={},G=b.touches,X=G?this._getMapTouches(G):void 0,oe=X?g.touchPos(this._el,X):g.mousePos(this._el,b);for(const{handlerName:Me,handler:ge,allowed:Ze}of this._handlers){if(!ge.isEnabled())continue;let ct;this._blockedByActive(N,Ze,Me)?ge.reset():ge[T||b.type]&&(ct=ge[T||b.type](b,oe,X),this.mergeHandlerResult(D,R,ct,Me,P),ct&&ct.needsRenderFrame&&this._triggerRenderFrame()),(ct||ge.isActive())&&(N[Me]=ge)}const we={};for(const Me in this._previousActiveHandlers)N[Me]||(we[Me]=P);this._previousActiveHandlers=N,(Object.keys(we).length||iu(D))&&(this._changes.push([D,R,we]),this._triggerRenderFrame()),(Object.keys(N).length||iu(D))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:xe}=D;xe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],xe(this._map))},this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new lg(o),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(f);const v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[window,"blur",void 0]];for(const[b,T,P]of this._listeners)g.addEventListener(b,T,b===document?this.handleWindowEvent:this.handleEvent,P)}destroy(){for(const[o,f,v]of this._listeners)g.removeEventListener(o,f,o===document?this.handleWindowEvent:this.handleEvent,v)}_addDefaultHandlers(o){const f=this._map,v=f.getCanvasContainer();this._add("mapEvent",new ug(f,o));const b=f.boxZoom=new hg(f,o);this._add("boxZoom",b),o.interactive&&o.boxZoom&&b.enable();const T=new qa(f),P=new yf(f);f.doubleClickZoom=new _f(P,T),this._add("tapZoom",T),this._add("clickZoom",P),o.interactive&&o.doubleClickZoom&&f.doubleClickZoom.enable();const D=new bf;this._add("tapDragZoom",D);const R=f.touchPitch=new zy(f);this._add("touchPitch",R),o.interactive&&o.touchPitch&&f.touchPitch.enable(o.touchPitch);const N=Wl(o),G=Ka(o);f.dragRotate=new rs(o,N,G),this._add("mouseRotate",N,["mousePitch"]),this._add("mousePitch",G,["mouseRotate"]),o.interactive&&o.dragRotate&&f.dragRotate.enable();const X=(({enable:Ze,clickTolerance:ct})=>{const Le=new pf({checkCorrectEvent:Ye=>g.mouseButton(Ye)===0&&!Ye.ctrlKey});return new Za({clickTolerance:ct,move:(Ye,ht)=>({around:ht,panDelta:ht.sub(Ye)}),activateOnStart:!0,moveStateManager:Le,enable:Ze,assignEvents:Id})})(o),oe=new un(o,f);f.dragPan=new xf(v,X,oe),this._add("mousePan",X),this._add("touchPan",oe,["touchZoom","touchRotate"]),o.interactive&&o.dragPan&&f.dragPan.enable(o.dragPan);const we=new mf,xe=new pg;f.touchZoomRotate=new Io(v,xe,we,D),this._add("touchRotate",we,["touchPan","touchZoom"]),this._add("touchZoom",xe,["touchPan","touchRotate"]),o.interactive&&o.touchZoomRotate&&f.touchZoomRotate.enable(o.touchZoomRotate);const Me=f.scrollZoom=new Ny(f,()=>this._triggerRenderFrame());this._add("scrollZoom",Me,["mousePan"]),o.interactive&&o.scrollZoom&&f.scrollZoom.enable(o.scrollZoom);const ge=f.keyboard=new mg(f);this._add("keyboard",ge),o.interactive&&o.keyboard&&f.keyboard.enable(),this._add("blockableMapEvent",new dg(f))}_add(o,f,v){this._handlers.push({handlerName:o,handler:f,allowed:v}),this._handlersById[o]=f}stop(o){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!nu(this._eventsInProgress)||this.isZooming()}_blockedByActive(o,f,v){for(const b in o)if(b!==v&&(!f||f.indexOf(b)<0))return!0;return!1}_getMapTouches(o){const f=[];for(const v of o)this._el.contains(v.target)&&f.push(v);return f}mergeHandlerResult(o,f,v,b,T){if(!v)return;l.e(o,v);const P={handlerName:b,originalEvent:v.originalEvent||T};v.zoomDelta!==void 0&&(f.zoom=P),v.panDelta!==void 0&&(f.drag=P),v.pitchDelta!==void 0&&(f.pitch=P),v.bearingDelta!==void 0&&(f.rotate=P)}_applyChanges(){const o={},f={},v={};for(const[b,T,P]of this._changes)b.panDelta&&(o.panDelta=(o.panDelta||new l.P(0,0))._add(b.panDelta)),b.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+b.pitchDelta),b.around!==void 0&&(o.around=b.around),b.pinchAround!==void 0&&(o.pinchAround=b.pinchAround),b.noInertia&&(o.noInertia=b.noInertia),l.e(f,T),l.e(v,P);this._updateMapTransform(o,f,v),this._changes=[]}_updateMapTransform(o,f,v){const b=this._map,T=b._getTransformForUpdate(),P=b.terrain;if(!(iu(o)||P&&this._terrainMovement))return this._fireEvents(f,v,!0);let{panDelta:D,zoomDelta:R,bearingDelta:N,pitchDelta:G,around:X,pinchAround:oe}=o;oe!==void 0&&(X=oe),b._stop(!0),X=X||b.transform.centerPoint;const we=T.pointLocation(D?X.sub(D):X);N&&(T.bearing+=N),G&&(T.pitch+=G),R&&(T.zoom+=R),P?this._terrainMovement||!f.drag&&!f.zoom?f.drag&&this._terrainMovement?T.center=T.pointLocation(T.centerPoint.sub(D)):T.setLocationAtPoint(we,X):(this._terrainMovement=!0,this._map._elevationFreeze=!0,T.setLocationAtPoint(we,X),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,T.recalculateZoom(b.terrain)})):T.setLocationAtPoint(we,X),b._applyUpdatedTransform(T),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(f,v,!0)}_fireEvents(o,f,v){const b=nu(this._eventsInProgress),T=nu(o),P={};for(const G in o){const{originalEvent:X}=o[G];this._eventsInProgress[G]||(P[`${G}start`]=X),this._eventsInProgress[G]=o[G]}!b&&T&&this._fireEvent("movestart",T.originalEvent);for(const G in P)this._fireEvent(G,P[G]);T&&this._fireEvent("move",T.originalEvent);for(const G in o){const{originalEvent:X}=o[G];this._fireEvent(G,X)}const D={};let R;for(const G in this._eventsInProgress){const{handlerName:X,originalEvent:oe}=this._eventsInProgress[G];this._handlersById[X].isActive()||(delete this._eventsInProgress[G],R=f[X]||oe,D[`${G}end`]=R)}for(const G in D)this._fireEvent(G,D[G]);const N=nu(this._eventsInProgress);if(v&&(b||T)&&!N){this._updatingCamera=!0;const G=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),X=oe=>oe!==0&&-this._bearingSnap<oe&&oe<this._bearingSnap;!G||!G.essential&&l.h.prefersReducedMotion?(this._map.fire(new l.k("moveend",{originalEvent:R})),X(this._map.getBearing())&&this._map.resetNorth()):(X(G.bearing||this._map.getBearing())&&(G.bearing=0),G.freezeElevation=!0,this._map.easeTo(G,{originalEvent:R})),this._updatingCamera=!1}}_fireEvent(o,f){this._map.fire(new l.k(o,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{delete this._frameId,this.handleEvent(new wf("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class _g extends l.E{constructor(o,f){super(),this._renderFrameCallback=()=>{const v=Math.min((l.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(v)),v<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=f.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.L(this.transform.center.lng,this.transform.center.lat)}setCenter(o,f){return this.jumpTo({center:o},f)}panBy(o,f,v){return o=l.P.convert(o).mult(-1),this.panTo(this.transform.center,l.e({offset:o},f),v)}panTo(o,f,v){return this.easeTo(l.e({center:o},f),v)}getZoom(){return this.transform.zoom}setZoom(o,f){return this.jumpTo({zoom:o},f),this}zoomTo(o,f,v){return this.easeTo(l.e({zoom:o},f),v)}zoomIn(o,f){return this.zoomTo(this.getZoom()+1,o,f),this}zoomOut(o,f){return this.zoomTo(this.getZoom()-1,o,f),this}getBearing(){return this.transform.bearing}setBearing(o,f){return this.jumpTo({bearing:o},f),this}getPadding(){return this.transform.padding}setPadding(o,f){return this.jumpTo({padding:o},f),this}rotateTo(o,f,v){return this.easeTo(l.e({bearing:o},f),v)}resetNorth(o,f){return this.rotateTo(0,l.e({duration:1e3},o),f),this}resetNorthPitch(o,f){return this.easeTo(l.e({bearing:0,pitch:0,duration:1e3},o),f),this}snapToNorth(o,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,f):this}getPitch(){return this.transform.pitch}setPitch(o,f){return this.jumpTo({pitch:o},f),this}cameraForBounds(o,f){o=Ge.convert(o);const v=f&&f.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),v,f)}_cameraForBoxAndBearing(o,f,v,b){const T={top:0,bottom:0,right:0,left:0};if(typeof(b=l.e({padding:T,offset:[0,0],maxZoom:this.transform.maxZoom},b)).padding=="number"){const ht=b.padding;b.padding={top:ht,bottom:ht,right:ht,left:ht}}b.padding=l.e(T,b.padding);const P=this.transform,D=P.padding,R=P.project(l.L.convert(o)),N=P.project(l.L.convert(f)),G=R.rotate(-v*Math.PI/180),X=N.rotate(-v*Math.PI/180),oe=new l.P(Math.max(G.x,X.x),Math.max(G.y,X.y)),we=new l.P(Math.min(G.x,X.x),Math.min(G.y,X.y)),xe=oe.sub(we),Me=(P.width-(D.left+D.right+b.padding.left+b.padding.right))/xe.x,ge=(P.height-(D.top+D.bottom+b.padding.top+b.padding.bottom))/xe.y;if(ge<0||Me<0)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ze=Math.min(P.scaleZoom(P.scale*Math.min(Me,ge)),b.maxZoom),ct=l.P.convert(b.offset),Le=new l.P((b.padding.left-b.padding.right)/2,(b.padding.top-b.padding.bottom)/2).rotate(v*Math.PI/180),Ye=ct.add(Le).mult(P.scale/P.zoomScale(Ze));return{center:P.unproject(R.add(N).div(2).sub(Ye)),zoom:Ze,bearing:v}}fitBounds(o,f,v){return this._fitInternal(this.cameraForBounds(o,f),f,v)}fitScreenCoordinates(o,f,v,b,T){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.P.convert(o)),this.transform.pointLocation(l.P.convert(f)),v,b),b,T)}_fitInternal(o,f,v){return o?(delete(f=l.e(o,f)).padding,f.linear?this.easeTo(f,v):this.flyTo(f,v)):this}jumpTo(o,f){this.stop();const v=this._getTransformForUpdate();let b=!1,T=!1,P=!1;return"zoom"in o&&v.zoom!==+o.zoom&&(b=!0,v.zoom=+o.zoom),o.center!==void 0&&(v.center=l.L.convert(o.center)),"bearing"in o&&v.bearing!==+o.bearing&&(T=!0,v.bearing=+o.bearing),"pitch"in o&&v.pitch!==+o.pitch&&(P=!0,v.pitch=+o.pitch),o.padding==null||v.isPaddingEqual(o.padding)||(v.padding=o.padding),this._applyUpdatedTransform(v),this.fire(new l.k("movestart",f)).fire(new l.k("move",f)),b&&this.fire(new l.k("zoomstart",f)).fire(new l.k("zoom",f)).fire(new l.k("zoomend",f)),T&&this.fire(new l.k("rotatestart",f)).fire(new l.k("rotate",f)).fire(new l.k("rotateend",f)),P&&this.fire(new l.k("pitchstart",f)).fire(new l.k("pitch",f)).fire(new l.k("pitchend",f)),this.fire(new l.k("moveend",f))}calculateCameraOptionsFromTo(o,f,v,b=0){const T=l.U.fromLngLat(o,f),P=l.U.fromLngLat(v,b),D=P.x-T.x,R=P.y-T.y,N=P.z-T.z,G=Math.hypot(D,R,N);if(G===0)throw new Error("Can't calculate camera options with same From and To");const X=Math.hypot(D,R),oe=this.transform.scaleZoom(this.transform.cameraToCenterDistance/G/this.transform.tileSize),we=180*Math.atan2(D,-R)/Math.PI;let xe=180*Math.acos(X/G)/Math.PI;return xe=N<0?90-xe:90+xe,{center:P.toLngLat(),zoom:oe,pitch:xe,bearing:we}}easeTo(o,f){this._stop(!1,o.easeId),((o=l.e({offset:[0,0],duration:500,easing:l.bb},o)).animate===!1||!o.essential&&l.h.prefersReducedMotion)&&(o.duration=0);const v=this._getTransformForUpdate(),b=this.getZoom(),T=this.getBearing(),P=this.getPitch(),D=this.getPadding(),R="zoom"in o?+o.zoom:b,N="bearing"in o?this._normalizeBearing(o.bearing,T):T,G="pitch"in o?+o.pitch:P,X="padding"in o?o.padding:v.padding,oe=l.P.convert(o.offset);let we=v.centerPoint.add(oe);const xe=v.pointLocation(we),Me=l.L.convert(o.center||xe);this._normalizeCenter(Me);const ge=v.project(xe),Ze=v.project(Me).sub(ge),ct=v.zoomScale(R-b);let Le,Ye;o.around&&(Le=l.L.convert(o.around),Ye=v.locationPoint(Le));const ht={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||R!==b,this._rotating=this._rotating||T!==N,this._pitching=this._pitching||G!==P,this._padding=!v.isPaddingEqual(X),this._easeId=o.easeId,this._prepareEase(f,o.noMoveStart,ht),this.terrain&&this._prepareElevation(Me),this._ease(pt=>{if(this._zooming&&(v.zoom=l.B.number(b,R,pt)),this._rotating&&(v.bearing=l.B.number(T,N,pt)),this._pitching&&(v.pitch=l.B.number(P,G,pt)),this._padding&&(v.interpolatePadding(D,X,pt),we=v.centerPoint.add(oe)),this.terrain&&!o.freezeElevation&&this._updateElevation(pt),Le)v.setLocationAtPoint(Le,Ye);else{const Pt=v.zoomScale(v.zoom-b),Bt=R>b?Math.min(2,ct):Math.max(.5,ct),Rt=Math.pow(Bt,1-pt),Gt=v.unproject(ge.add(Ze.mult(pt*Rt)).mult(Pt));v.setLocationAtPoint(v.renderWorldCopies?Gt.wrap():Gt,we)}this._applyUpdatedTransform(v),this._fireMoveEvents(f)},pt=>{this.terrain&&this._finalizeElevation(),this._afterEase(f,pt)},o),this}_prepareEase(o,f,v={}){this._moving=!0,f||v.moving||this.fire(new l.k("movestart",o)),this._zooming&&!v.zooming&&this.fire(new l.k("zoomstart",o)),this._rotating&&!v.rotating&&this.fire(new l.k("rotatestart",o)),this._pitching&&!v.pitching&&this.fire(new l.k("pitchstart",o))}_prepareElevation(o){this._elevationCenter=o,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(o){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const f=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(o<1&&f!==this._elevationTarget){const v=this._elevationTarget-this._elevationStart;this._elevationStart+=o*(v-(f-(v*o+this._elevationStart))/(1-o)),this._elevationTarget=f}this.transform.elevation=l.B.number(this._elevationStart,this._elevationTarget,o)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(o){if(!this.transformCameraUpdate)return;const f=o.clone(),{center:v,zoom:b,pitch:T,bearing:P,elevation:D}=this.transformCameraUpdate(f);v&&(f.center=v),b!==void 0&&(f.zoom=b),T!==void 0&&(f.pitch=T),P!==void 0&&(f.bearing=P),D!==void 0&&(f.elevation=D),this.transform.apply(f)}_fireMoveEvents(o){this.fire(new l.k("move",o)),this._zooming&&this.fire(new l.k("zoom",o)),this._rotating&&this.fire(new l.k("rotate",o)),this._pitching&&this.fire(new l.k("pitch",o))}_afterEase(o,f){if(this._easeId&&f&&this._easeId===f)return;delete this._easeId;const v=this._zooming,b=this._rotating,T=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,v&&this.fire(new l.k("zoomend",o)),b&&this.fire(new l.k("rotateend",o)),T&&this.fire(new l.k("pitchend",o)),this.fire(new l.k("moveend",o))}flyTo(o,f){if(!o.essential&&l.h.prefersReducedMotion){const vn=l.F(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(vn,f)}this.stop(),o=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.bb},o);const v=this._getTransformForUpdate(),b=this.getZoom(),T=this.getBearing(),P=this.getPitch(),D=this.getPadding(),R="zoom"in o?l.ad(+o.zoom,v.minZoom,v.maxZoom):b,N="bearing"in o?this._normalizeBearing(o.bearing,T):T,G="pitch"in o?+o.pitch:P,X="padding"in o?o.padding:v.padding,oe=v.zoomScale(R-b),we=l.P.convert(o.offset);let xe=v.centerPoint.add(we);const Me=v.pointLocation(xe),ge=l.L.convert(o.center||Me);this._normalizeCenter(ge);const Ze=v.project(Me),ct=v.project(ge).sub(Ze);let Le=o.curve;const Ye=Math.max(v.width,v.height),ht=Ye/oe,pt=ct.mag();if("minZoom"in o){const vn=l.ad(Math.min(o.minZoom,b,R),v.minZoom,v.maxZoom),Ei=Ye/v.zoomScale(vn-b);Le=Math.sqrt(Ei/pt*2)}const Pt=Le*Le;function Bt(vn){const Ei=(ht*ht-Ye*Ye+(vn?-1:1)*Pt*Pt*pt*pt)/(2*(vn?ht:Ye)*Pt*pt);return Math.log(Math.sqrt(Ei*Ei+1)-Ei)}function Rt(vn){return(Math.exp(vn)-Math.exp(-vn))/2}function Gt(vn){return(Math.exp(vn)+Math.exp(-vn))/2}const mn=Bt(!1);let Kn=function(vn){return Gt(mn)/Gt(mn+Le*vn)},Yt=function(vn){return Ye*((Gt(mn)*(Rt(Ei=mn+Le*vn)/Gt(Ei))-Rt(mn))/Pt)/pt;var Ei},On=(Bt(!0)-mn)/Le;if(Math.abs(pt)<1e-6||!isFinite(On)){if(Math.abs(Ye-ht)<1e-6)return this.easeTo(o,f);const vn=ht<Ye?-1:1;On=Math.abs(Math.log(ht/Ye))/Le,Yt=function(){return 0},Kn=function(Ei){return Math.exp(vn*Le*Ei)}}return o.duration="duration"in o?+o.duration:1e3*On/("screenSpeed"in o?+o.screenSpeed/Le:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=T!==N,this._pitching=G!==P,this._padding=!v.isPaddingEqual(X),this._prepareEase(f,!1),this.terrain&&this._prepareElevation(ge),this._ease(vn=>{const Ei=vn*On,qn=1/Kn(Ei);v.zoom=vn===1?R:b+v.scaleZoom(qn),this._rotating&&(v.bearing=l.B.number(T,N,vn)),this._pitching&&(v.pitch=l.B.number(P,G,vn)),this._padding&&(v.interpolatePadding(D,X,vn),xe=v.centerPoint.add(we)),this.terrain&&!o.freezeElevation&&this._updateElevation(vn);const Vn=vn===1?ge:v.unproject(Ze.add(ct.mult(Yt(Ei))).mult(qn));v.setLocationAtPoint(v.renderWorldCopies?Vn.wrap():Vn,xe),this._applyUpdatedTransform(v),this._fireMoveEvents(f)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(f)},o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(o,f){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const v=this._onEaseEnd;delete this._onEaseEnd,v.call(this,f)}if(!o){const v=this.handlers;v&&v.stop(!1)}return this}_ease(o,f,v){v.animate===!1||v.duration===0?(o(1),f()):(this._easeStart=l.h.now(),this._easeOptions=v,this._onEaseFrame=o,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(o,f){o=l.b5(o,-180,180);const v=Math.abs(o-f);return Math.abs(o-360-f)<v&&(o-=360),Math.abs(o+360-f)<v&&(o+=360),o}_normalizeCenter(o){const f=this.transform;if(!f.renderWorldCopies||f.lngRange)return;const v=o.lng-f.center.lng;o.lng+=v>180?-360:v<-180?360:0}queryTerrainElevation(o){return this.terrain?this.terrain.getElevationForLngLatZoom(l.L.convert(o),this.transform.tileZoom)-this.transform.elevation:null}}class ws{constructor(o={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=f=>{!f||f.sourceDataType!=="metadata"&&f.sourceDataType!=="visibility"&&f.dataType!=="style"&&f.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=o}getDefaultPosition(){return"bottom-right"}onAdd(o){return this._map=o,this._compact=this.options&&this.options.compact,this._container=g.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=g.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=g.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){g.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(o,f){const v=this._map._getUIString(`AttributionControl.${f}`);o.title=v,o.setAttribute("aria-label",v)}_updateAttributions(){if(!this._map.style)return;let o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(b=>typeof b!="string"?"":b)):typeof this.options.customAttribution=="string"&&o.push(this.options.customAttribution)),this._map.style.stylesheet){const b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}const f=this._map.style.sourceCaches;for(const b in f){const T=f[b];if(T.used||T.usedForTerrain){const P=T.getSource();P.attribution&&o.indexOf(P.attribution)<0&&o.push(P.attribution)}}o=o.filter(b=>String(b).trim()),o.sort((b,T)=>b.length-T.length),o=o.filter((b,T)=>{for(let P=T+1;P<o.length;P++)if(o[P].indexOf(b)>=0)return!1;return!0});const v=o.join(" | ");v!==this._attribHTML&&(this._attribHTML=v,o.length?(this._innerContainer.innerHTML=v,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Di{constructor(o={}){this._updateCompact=()=>{const f=this._container.children;if(f.length){const v=f[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&v.classList.add("maplibregl-compact"):v.classList.remove("maplibregl-compact")}},this.options=o}getDefaultPosition(){return"bottom-left"}onAdd(o){this._map=o,this._compact=this.options&&this.options.compact,this._container=g.create("div","maplibregl-ctrl");const f=g.create("a","maplibregl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://maplibre.org/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){g.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Md{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const f=++this._id;return this._queue.push({callback:o,id:f,cancelled:!1}),f}remove(o){const f=this._currentlyRunning,v=f?this._queue.concat(f):this._queue;for(const b of v)if(b.id===o)return void(b.cancelled=!0)}run(o=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const f=this._currentlyRunning=this._queue;this._queue=[];for(const v of f)if(!v.cancelled&&(v.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Tf={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var yg=l.Q([{name:"a_pos3d",type:"Int16",components:3}]);class bg extends l.E{constructor(o){super(),this.sourceCache=o,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,o.usedForTerrain=!0,o.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(o,f){this.sourceCache.update(o,f),this._renderableTilesKeys=[];const v={};for(const b of o.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:f}))v[b.key]=!0,this._renderableTilesKeys.push(b.key),this._tiles[b.key]||(b.posMatrix=new Float64Array(16),l.aS(b.posMatrix,0,l.N,0,l.N,0,1),this._tiles[b.key]=new $e(b,this.tileSize));for(const b in this._tiles)v[b]||delete this._tiles[b]}freeRtt(o){for(const f in this._tiles){const v=this._tiles[f];(!o||v.tileID.equals(o)||v.tileID.isChildOf(o)||o.isChildOf(v.tileID))&&(v.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(o=>this.getTileByID(o))}getTileByID(o){return this._tiles[o]}getTerrainCoords(o){const f={};for(const v of this._renderableTilesKeys){const b=this._tiles[v].tileID;if(b.canonical.equals(o.canonical)){const T=o.clone();T.posMatrix=new Float64Array(16),l.aS(T.posMatrix,0,l.N,0,l.N,0,1),f[v]=T}else if(b.canonical.isChildOf(o.canonical)){const T=o.clone();T.posMatrix=new Float64Array(16);const P=b.canonical.z-o.canonical.z,D=b.canonical.x-(b.canonical.x>>P<<P),R=b.canonical.y-(b.canonical.y>>P<<P),N=l.N>>P;l.aS(T.posMatrix,0,N,0,N,0,1),l.$(T.posMatrix,T.posMatrix,[-D*N,-R*N,0]),f[v]=T}else if(o.canonical.isChildOf(b.canonical)){const T=o.clone();T.posMatrix=new Float64Array(16);const P=o.canonical.z-b.canonical.z,D=o.canonical.x-(o.canonical.x>>P<<P),R=o.canonical.y-(o.canonical.y>>P<<P),N=l.N>>P;l.aS(T.posMatrix,0,l.N,0,l.N,0,1),l.$(T.posMatrix,T.posMatrix,[D*N,R*N,0]),l.a0(T.posMatrix,T.posMatrix,[1/2**P,1/2**P,0]),f[v]=T}}return f}getSourceTile(o,f){const v=this.sourceCache._source;let b=o.overscaledZ-this.deltaZoom;if(b>v.maxzoom&&(b=v.maxzoom),b<v.minzoom)return null;this._sourceTileCache[o.key]||(this._sourceTileCache[o.key]=o.scaledTo(b).key);let T=this.sourceCache.getTileByID(this._sourceTileCache[o.key]);if((!T||!T.dem)&&f)for(;b>=v.minzoom&&(!T||!T.dem);)T=this.sourceCache.getTileByID(o.scaledTo(b--).key);return T}tilesAfterTime(o=Date.now()){return Object.values(this._tiles).filter(f=>f.timeAdded>=o)}}class xg{constructor(o,f,v){this.painter=o,this.sourceCache=new bg(f),this.options=v,this.exaggeration=typeof v.exaggeration=="number"?v.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(o,f,v,b=l.N){var T;if(!(f>=0&&f<b&&v>=0&&v<b))return 0;const P=this.getTerrainData(o),D=(T=P.tile)===null||T===void 0?void 0:T.dem;if(!D)return 0;const R=function(xe,Me,ge){var Ze=Me[0],ct=Me[1];return xe[0]=ge[0]*Ze+ge[4]*ct+ge[12],xe[1]=ge[1]*Ze+ge[5]*ct+ge[13],xe}([],[f/b*l.N,v/b*l.N],P.u_terrain_matrix),N=[R[0]*D.dim,R[1]*D.dim],G=Math.floor(N[0]),X=Math.floor(N[1]),oe=N[0]-G,we=N[1]-X;return D.get(G,X)*(1-oe)*(1-we)+D.get(G+1,X)*oe*(1-we)+D.get(G,X+1)*(1-oe)*we+D.get(G+1,X+1)*oe*we}getElevationForLngLatZoom(o,f){const{tileID:v,mercatorX:b,mercatorY:T}=this._getOverscaledTileIDFromLngLatZoom(o,f);return this.getElevation(v,b%l.N,T%l.N,l.N)}getElevation(o,f,v,b=l.N){return this.getDEMElevation(o,f,v,b)*this.exaggeration}getTerrainData(o){if(!this._emptyDemTexture){const b=this.painter.context,T=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new J(b,T,b.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new J(b,new l.R({width:1,height:1}),b.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.ao([])}const f=this.sourceCache.getSourceTile(o,!0);if(f&&f.dem&&(!f.demTexture||f.needsTerrainPrepare)){const b=this.painter.context;f.demTexture=this.painter.getTileTexture(f.dem.stride),f.demTexture?f.demTexture.update(f.dem.getPixels(),{premultiply:!1}):f.demTexture=new J(b,f.dem.getPixels(),b.gl.RGBA,{premultiply:!1}),f.demTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),f.needsTerrainPrepare=!1}const v=f&&f+f.tileID.key+o.key;if(v&&!this._demMatrixCache[v]){const b=this.sourceCache.sourceCache._source.maxzoom;let T=o.canonical.z-f.tileID.canonical.z;o.overscaledZ>o.canonical.z&&(o.canonical.z>=b?T=o.canonical.z-b:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const P=o.canonical.x-(o.canonical.x>>T<<T),D=o.canonical.y-(o.canonical.y>>T<<T),R=l.bc(new Float64Array(16),[1/(l.N<<T),1/(l.N<<T),0]);l.$(R,R,[P*l.N,D*l.N,0]),this._demMatrixCache[o.key]={matrix:R,coord:o}}return{u_depth:2,u_terrain:3,u_terrain_dim:f&&f.dem&&f.dem.dim||1,u_terrain_matrix:v?this._demMatrixCache[o.key].matrix:this._emptyDemMatrix,u_terrain_unpack:f&&f.dem&&f.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(f&&f.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:f}}getFramebuffer(o){const f=this.painter,v=f.width/devicePixelRatio,b=f.height/devicePixelRatio;return!this._fbo||this._fbo.width===v&&this._fbo.height===b||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new J(f.context,{width:v,height:b,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new J(f.context,{width:v,height:b,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=f.context.createFramebuffer(v,b,!0,!1),this._fbo.depthAttachment.set(f.context.createRenderbuffer(f.context.gl.DEPTH_COMPONENT16,v,b))),this._fbo.colorAttachment.set(o==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const o=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const f=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let T=0,P=0;T<this._coordsTextureSize;T++)for(let D=0;D<this._coordsTextureSize;D++,P+=4)f[P+0]=255&D,f[P+1]=255&T,f[P+2]=D>>8<<4|T>>8,f[P+3]=0;const v=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(f.buffer)),b=new J(o,v,o.gl.RGBA,{premultiply:!1});return b.bind(o.gl.NEAREST,o.gl.CLAMP_TO_EDGE),this._coordsTexture=b,b}pointCoordinate(o){const f=new Uint8Array(4),v=this.painter.context,b=v.gl;v.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),b.readPixels(o.x,this.painter.height/devicePixelRatio-o.y-1,1,1,b.RGBA,b.UNSIGNED_BYTE,f),v.bindFramebuffer.set(null);const T=f[0]+(f[2]>>4<<8),P=f[1]+((15&f[2])<<8),D=this.coordsIndex[255-f[3]],R=D&&this.sourceCache.getTileByID(D);if(!R)return null;const N=this._coordsTextureSize,G=(1<<R.tileID.canonical.z)*N;return new l.U(this._allowMercatorOverflow(o,(R.tileID.canonical.x*N+T)/G),(R.tileID.canonical.y*N+P)/G,this.getElevation(R.tileID,T,P,N))}getTerrainMesh(){if(this._mesh)return this._mesh;const o=this.painter.context,f=new l.bd,v=new l.b0,b=this.meshSize,T=l.N/b,P=b*b;for(let X=0;X<=b;X++)for(let oe=0;oe<=b;oe++)f.emplaceBack(oe*T,X*T,0);for(let X=0;X<P;X+=b+1)for(let oe=0;oe<b;oe++)v.emplaceBack(oe+X,b+oe+X+1,b+oe+X+2),v.emplaceBack(oe+X,b+oe+X+2,oe+X+1);const D=f.length,R=D+2*(b+1);for(const X of[0,1])for(let oe=0;oe<=b;oe++)for(const we of[0,1])f.emplaceBack(oe*T,X*l.N,we);for(let X=0;X<2*b;X+=2)v.emplaceBack(R+X,R+X+1,R+X+3),v.emplaceBack(R+X,R+X+3,R+X+2),v.emplaceBack(D+X,D+X+3,D+X+1),v.emplaceBack(D+X,D+X+2,D+X+3);const N=f.length,G=N+2*(b+1);for(const X of[0,1])for(let oe=0;oe<=b;oe++)for(const we of[0,1])f.emplaceBack(X*l.N,oe*T,we);for(let X=0;X<2*b;X+=2)v.emplaceBack(N+X,N+X+1,N+X+3),v.emplaceBack(N+X,N+X+3,N+X+2),v.emplaceBack(G+X,G+X+3,G+X+1),v.emplaceBack(G+X,G+X+2,G+X+3);return this._mesh={indexBuffer:o.createIndexBuffer(v),vertexBuffer:o.createVertexBuffer(f,yg.members),segments:l.S.simpleSegment(0,0,f.length,v.length)},this._mesh}getMeshFrameDelta(o){return 2*Math.PI*l.be/Math.pow(2,o)/5}getMinTileElevationForLngLatZoom(o,f){var v;const{tileID:b}=this._getOverscaledTileIDFromLngLatZoom(o,f);return(v=this.getMinMaxElevation(b).minElevation)!==null&&v!==void 0?v:0}getMinMaxElevation(o){const f=this.getTerrainData(o).tile,v={minElevation:null,maxElevation:null};return f&&f.dem&&(v.minElevation=f.dem.min*this.exaggeration,v.maxElevation=f.dem.max*this.exaggeration),v}_getOverscaledTileIDFromLngLatZoom(o,f){const v=l.U.fromLngLat(o.wrap()),b=(1<<f)*l.N,T=v.x*b,P=v.y*b,D=Math.floor(T/l.N),R=Math.floor(P/l.N);return{tileID:new l.O(f,0,f,D,R),mercatorX:T,mercatorY:P}}_allowMercatorOverflow(o,f){const v=o.x<this.painter.width/2;let b=l.bf(f);const T=this.painter.transform.center.lng;return v&&Math.sign(b)>0&&Math.sign(T)<0||!v&&Math.sign(b)<0&&Math.sign(T)>0?(b=360*Math.sign(T)+b,l.G(b)):f}}class By{constructor(o,f,v){this._context=o,this._size=f,this._tileSize=v,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const o of this._objects)o.texture.destroy(),o.fbo.destroy()}_createObject(o){const f=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),v=new J(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return v.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),f.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),f.colorAttachment.set(v.texture),{id:o,fbo:f,texture:v,stamp:-1,inUse:!1}}getObjectForId(o){return this._objects[o]}useObject(o){o.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(f=>o.id!==f),this._recentlyUsed.push(o.id)}stampObject(o){o.stamp=++this._stamp}getOrCreateFreeObject(){for(const f of this._recentlyUsed)if(!this._objects[f].inUse)return this._objects[f];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const o=this._createObject(this._objects.length);return this._objects.push(o),o}freeObject(o){o.inUse=!1}freeAllObjects(){for(const o of this._objects)this.freeObject(o)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(o=>!o.inUse)===!1}}const Gr={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class kd{constructor(o,f){this.painter=o,this.terrain=f,this.pool=new By(o.context,30,f.sourceCache.tileSize*f.qualityFactor)}destruct(){this.pool.destruct()}getTexture(o){return this.pool.getObjectForId(o.rtt[this._stacks.length-1].id).texture}prepareForRender(o,f){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=o._order.filter(v=>!o._layers[v].isHidden(f)),this._coordsDescendingInv={};for(const v in o.sourceCaches){this._coordsDescendingInv[v]={};const b=o.sourceCaches[v].getVisibleCoordinates();for(const T of b){const P=this.terrain.sourceCache.getTerrainCoords(T);for(const D in P)this._coordsDescendingInv[v][D]||(this._coordsDescendingInv[v][D]=[]),this._coordsDescendingInv[v][D].push(P[D])}}this._coordsDescendingInvStr={};for(const v of o._order){const b=o._layers[v],T=b.source;if(Gr[b.type]&&!this._coordsDescendingInvStr[T]){this._coordsDescendingInvStr[T]={};for(const P in this._coordsDescendingInv[T])this._coordsDescendingInvStr[T][P]=this._coordsDescendingInv[T][P].map(D=>D.key).sort().join()}}for(const v of this._renderableTiles)for(const b in this._coordsDescendingInvStr){const T=this._coordsDescendingInvStr[b][v.tileID.key];T&&T!==v.rttCoords[b]&&(v.rtt=[])}}renderLayer(o){if(o.isHidden(this.painter.transform.zoom))return!1;const f=o.type,v=this.painter,b=this._renderableLayerIds[this._renderableLayerIds.length-1]===o.id;if(Gr[f]&&(this._prevType&&Gr[this._prevType]||this._stacks.push([]),this._prevType=f,this._stacks[this._stacks.length-1].push(o.id),!b))return!0;if(Gr[this._prevType]||Gr[f]&&b){this._prevType=f;const T=this._stacks.length-1,P=this._stacks[T]||[];for(const D of this._renderableTiles){if(this.pool.isFull()&&(qi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(D),D.rtt[T]){const N=this.pool.getObjectForId(D.rtt[T].id);if(N.stamp===D.rtt[T].stamp){this.pool.useObject(N);continue}}const R=this.pool.getOrCreateFreeObject();this.pool.useObject(R),this.pool.stampObject(R),D.rtt[T]={id:R.id,stamp:R.stamp},v.context.bindFramebuffer.set(R.fbo.framebuffer),v.context.clear({color:l.aT.transparent,stencil:0}),v.currentStencilSource=void 0;for(let N=0;N<P.length;N++){const G=v.style._layers[P[N]],X=G.source?this._coordsDescendingInv[G.source][D.tileID.key]:[D.tileID];v.context.viewport.set([0,0,R.fbo.width,R.fbo.height]),v._renderTileClippingMasks(G,X),v.renderLayer(v,v.style.sourceCaches[G.source],G,X),G.source&&(D.rttCoords[G.source]=this._coordsDescendingInvStr[G.source][D.tileID.key])}}return qi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Gr[f]}return!1}}const wn=m,Ln={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},ru=w=>{w.touchstart=w.dragStart,w.touchmoveWindow=w.dragMove,w.touchend=w.dragEnd},Ef={showCompass:!0,showZoom:!0,visualizePitch:!1};class Cf{constructor(o,f,v=!1){this.mousedown=P=>{this.startMouse(l.e({},P,{ctrlKey:!0,preventDefault:()=>P.preventDefault()}),g.mousePos(this.element,P)),g.addEventListener(window,"mousemove",this.mousemove),g.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=P=>{this.moveMouse(P,g.mousePos(this.element,P))},this.mouseup=P=>{this.mouseRotate.dragEnd(P),this.mousePitch&&this.mousePitch.dragEnd(P),this.offTemp()},this.touchstart=P=>{P.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=g.touchPos(this.element,P.targetTouches)[0],this.startTouch(P,this._startPos),g.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.addEventListener(window,"touchend",this.touchend))},this.touchmove=P=>{P.targetTouches.length!==1?this.reset():(this._lastPos=g.touchPos(this.element,P.targetTouches)[0],this.moveTouch(P,this._lastPos))},this.touchend=P=>{P.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const b=o.dragRotate._mouseRotate.getClickTolerance(),T=o.dragRotate._mousePitch.getClickTolerance();this.element=f,this.mouseRotate=Wl({clickTolerance:b,enable:!0}),this.touchRotate=(({enable:P,clickTolerance:D,bearingDegreesPerPixelMoved:R=.8})=>{const N=new fg;return new Za({clickTolerance:D,move:(G,X)=>({bearingDelta:(X.x-G.x)*R}),moveStateManager:N,enable:P,assignEvents:ru})})({clickTolerance:b,enable:!0}),this.map=o,v&&(this.mousePitch=Ka({clickTolerance:T,enable:!0}),this.touchPitch=(({enable:P,clickTolerance:D,pitchDegreesPerPixelMoved:R=-.5})=>{const N=new fg;return new Za({clickTolerance:D,move:(G,X)=>({pitchDelta:(X.y-G.y)*R}),moveStateManager:N,enable:P,assignEvents:ru})})({clickTolerance:T,enable:!0})),g.addEventListener(f,"mousedown",this.mousedown),g.addEventListener(f,"touchstart",this.touchstart,{passive:!1}),g.addEventListener(f,"touchcancel",this.reset)}startMouse(o,f){this.mouseRotate.dragStart(o,f),this.mousePitch&&this.mousePitch.dragStart(o,f),g.disableDrag()}startTouch(o,f){this.touchRotate.dragStart(o,f),this.touchPitch&&this.touchPitch.dragStart(o,f),g.disableDrag()}moveMouse(o,f){const v=this.map,{bearingDelta:b}=this.mouseRotate.dragMove(o,f)||{};if(b&&v.setBearing(v.getBearing()+b),this.mousePitch){const{pitchDelta:T}=this.mousePitch.dragMove(o,f)||{};T&&v.setPitch(v.getPitch()+T)}}moveTouch(o,f){const v=this.map,{bearingDelta:b}=this.touchRotate.dragMove(o,f)||{};if(b&&v.setBearing(v.getBearing()+b),this.touchPitch){const{pitchDelta:T}=this.touchPitch.dragMove(o,f)||{};T&&v.setPitch(v.getPitch()+T)}}off(){const o=this.element;g.removeEventListener(o,"mousedown",this.mousedown),g.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),g.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.removeEventListener(window,"touchend",this.touchend),g.removeEventListener(o,"touchcancel",this.reset),this.offTemp()}offTemp(){g.enableDrag(),g.removeEventListener(window,"mousemove",this.mousemove),g.removeEventListener(window,"mouseup",this.mouseup),g.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.removeEventListener(window,"touchend",this.touchend)}}let sr;function If(w,o,f){if(w=new l.L(w.lng,w.lat),o){const v=new l.L(w.lng-360,w.lat),b=new l.L(w.lng+360,w.lat),T=f.locationPoint(w).distSqr(o);f.locationPoint(v).distSqr(o)<T?w=v:f.locationPoint(b).distSqr(o)<T&&(w=b)}for(;Math.abs(w.lng-f.center.lng)>180;){const v=f.locationPoint(w);if(v.x>=0&&v.y>=0&&v.x<=f.width&&v.y<=f.height)break;w.lng>f.center.lng?w.lng-=360:w.lng+=360}return w}const Us={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function wg(w,o,f){const v=w.classList;for(const b in Us)v.remove(`maplibregl-${f}-anchor-${b}`);v.add(`maplibregl-${f}-anchor-${o}`)}class sl extends l.E{constructor(o){if(super(),this._onKeyPress=f=>{const v=f.code,b=f.charCode||f.keyCode;v!=="Space"&&v!=="Enter"&&b!==32&&b!==13||this.togglePopup()},this._onMapClick=f=>{const v=f.originalEvent.target,b=this._element;this._popup&&(v===b||b.contains(v))&&this.togglePopup()},this._update=f=>{if(!this._map)return;const v=this._map.loaded()&&!this._map.isMoving();((f==null?void 0:f.type)==="terrain"||(f==null?void 0:f.type)==="render"&&!v)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=If(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let b="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?b=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(b=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let T="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?T="rotateX(0deg)":this._pitchAlignment==="map"&&(T=`rotateX(${this._map.getPitch()}deg)`),f&&f.type!=="moveend"||(this._pos=this._pos.round()),g.setTransform(this._element,`${Us[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${T} ${b}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const P=this._map.unproject(this._pos),D=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=P.distanceTo(this._lngLat)>20*D?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=f=>{if(!this._isDragging){const v=this._clickTolerance||this._map._clickTolerance;this._isDragging=f.point.dist(this._pointerdownPos)>=v}this._isDragging&&(this._pos=f.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.k("dragstart"))),this.fire(new l.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.k("dragend")),this._state="inactive"},this._addDragHandler=f=>{this._element.contains(f.originalEvent.target)&&(f.preventDefault(),this._positionDelta=f.point.sub(this._pos).add(this._offset),this._pointerdownPos=f.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,o&&o.element)this._element=o.element,this._offset=l.P.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=g.create("div"),this._element.setAttribute("aria-label","Map marker");const f=g.createNS("http://www.w3.org/2000/svg","svg"),v=41,b=27;f.setAttributeNS(null,"display","block"),f.setAttributeNS(null,"height",`${v}px`),f.setAttributeNS(null,"width",`${b}px`),f.setAttributeNS(null,"viewBox",`0 0 ${b} ${v}`);const T=g.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"stroke","none"),T.setAttributeNS(null,"stroke-width","1"),T.setAttributeNS(null,"fill","none"),T.setAttributeNS(null,"fill-rule","evenodd");const P=g.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"fill-rule","nonzero");const D=g.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"transform","translate(3.0, 29.0)"),D.setAttributeNS(null,"fill","#000000");const R=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ze of R){const ct=g.createNS("http://www.w3.org/2000/svg","ellipse");ct.setAttributeNS(null,"opacity","0.04"),ct.setAttributeNS(null,"cx","10.5"),ct.setAttributeNS(null,"cy","5.80029008"),ct.setAttributeNS(null,"rx",Ze.rx),ct.setAttributeNS(null,"ry",Ze.ry),D.appendChild(ct)}const N=g.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"fill",this._color);const G=g.createNS("http://www.w3.org/2000/svg","path");G.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),N.appendChild(G);const X=g.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"opacity","0.25"),X.setAttributeNS(null,"fill","#000000");const oe=g.createNS("http://www.w3.org/2000/svg","path");oe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),X.appendChild(oe);const we=g.createNS("http://www.w3.org/2000/svg","g");we.setAttributeNS(null,"transform","translate(6.0, 7.0)"),we.setAttributeNS(null,"fill","#FFFFFF");const xe=g.createNS("http://www.w3.org/2000/svg","g");xe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Me=g.createNS("http://www.w3.org/2000/svg","circle");Me.setAttributeNS(null,"fill","#000000"),Me.setAttributeNS(null,"opacity","0.25"),Me.setAttributeNS(null,"cx","5.5"),Me.setAttributeNS(null,"cy","5.5"),Me.setAttributeNS(null,"r","5.4999962");const ge=g.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#FFFFFF"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962"),xe.appendChild(Me),xe.appendChild(ge),P.appendChild(D),P.appendChild(N),P.appendChild(X),P.appendChild(we),P.appendChild(xe),f.appendChild(P),f.setAttributeNS(null,"height",v*this._scale+"px"),f.setAttributeNS(null,"width",b*this._scale+"px"),this._element.appendChild(f),this._offset=l.P.convert(o&&o.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",f=>{f.preventDefault()}),this._element.addEventListener("mousedown",f=>{f.preventDefault()}),wg(this._element,this._anchor,"marker"),o&&o.className)for(const f of o.className.split(" "))this._element.classList.add(f);this._popup=null}addTo(o){return this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),o.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),g.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=l.L.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const b=Math.abs(13.5)/Math.SQRT2;o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[b,-1*(38.1-13.5+b)],"bottom-right":[-b,-1*(38.1-13.5+b)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const o=this._popup;return o?(o.isOpen()?o.remove():o.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(o){return this._offset=l.P.convert(o),this._update(),this}addClassName(o){this._element.classList.add(o)}removeClassName(o){this._element.classList.remove(o)}toggleClassName(o){return this._element.classList.toggle(o)}setDraggable(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Zi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Vi=0,Zl=!1;const su={maxWidth:100,unit:"metric"};function au(w,o,f){const v=f&&f.maxWidth||100,b=w._container.clientHeight/2,T=w.unproject([0,b]),P=w.unproject([v,b]),D=T.distanceTo(P);if(f&&f.unit==="imperial"){const R=3.2808*D;R>5280?al(o,v,R/5280,w._getUIString("ScaleControl.Miles")):al(o,v,R,w._getUIString("ScaleControl.Feet"))}else f&&f.unit==="nautical"?al(o,v,D/1852,w._getUIString("ScaleControl.NauticalMiles")):D>=1e3?al(o,v,D/1e3,w._getUIString("ScaleControl.Kilometers")):al(o,v,D,w._getUIString("ScaleControl.Meters"))}function al(w,o,f,v){const b=function(T){const P=Math.pow(10,`${Math.floor(T)}`.length-1);let D=T/P;return D=D>=10?10:D>=5?5:D>=3?3:D>=2?2:D>=1?1:function(R){const N=Math.pow(10,Math.ceil(-Math.log(R)/Math.LN10));return Math.round(R*N)/N}(D),P*D}(f);w.style.width=o*(b/f)+"px",w.innerHTML=`${b}&nbsp;${v}`}const Af={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Mf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Kl(w){if(w){if(typeof w=="number"){const o=Math.round(Math.abs(w)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,w),"top-left":new l.P(o,o),"top-right":new l.P(-o,o),bottom:new l.P(0,-w),"bottom-left":new l.P(o,-o),"bottom-right":new l.P(-o,-o),left:new l.P(w,0),right:new l.P(-w,0)}}if(w instanceof l.P||Array.isArray(w)){const o=l.P.convert(w);return{center:o,top:o,"top-left":o,"top-right":o,bottom:o,"bottom-left":o,"bottom-right":o,left:o,right:o}}return{center:l.P.convert(w.center||[0,0]),top:l.P.convert(w.top||[0,0]),"top-left":l.P.convert(w["top-left"]||[0,0]),"top-right":l.P.convert(w["top-right"]||[0,0]),bottom:l.P.convert(w.bottom||[0,0]),"bottom-left":l.P.convert(w["bottom-left"]||[0,0]),"bottom-right":l.P.convert(w["bottom-right"]||[0,0]),left:l.P.convert(w.left||[0,0]),right:l.P.convert(w.right||[0,0])}}return Kl(new l.P(0,0))}const kf={extend:(w,...o)=>l.e(w,...o),run(w){w()},logToElement(w,o=!1,f="log"){const v=window.document.getElementById(f);v&&(o&&(v.innerHTML=""),v.innerHTML+=`<br>${w}`)}},Pf=m;class gi{static get version(){return Pf}static get workerCount(){return Kt.workerCount}static set workerCount(o){Kt.workerCount=o}static get maxParallelImageRequests(){return l.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(o){l.c.MAX_PARALLEL_IMAGE_REQUESTS=o}static get workerUrl(){return l.c.WORKER_URL}static set workerUrl(o){l.c.WORKER_URL=o}static addProtocol(o,f){l.c.REGISTERED_PROTOCOLS[o]=f}static removeProtocol(o){delete l.c.REGISTERED_PROTOCOLS[o]}}return gi.Map=class extends _g{constructor(w){if(l.bg.mark(l.bh.create),(w=l.e({},Ln,w)).minZoom!=null&&w.maxZoom!=null&&w.minZoom>w.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(w.minPitch!=null&&w.maxPitch!=null&&w.minPitch>w.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(w.minPitch!=null&&w.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(w.maxPitch!=null&&w.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ed(w.minZoom,w.maxZoom,w.minPitch,w.maxPitch,w.renderWorldCopies),{bearingSnap:w.bearingSnap}),this._cooperativeGesturesOnWheel=o=>{this._onCooperativeGesture(o,o[this._metaKey],1)},this._contextLost=o=>{o.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.k("webglcontextlost",{originalEvent:o}))},this._contextRestored=o=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.k("webglcontextrestored",{originalEvent:o}))},this._onMapScroll=o=>{if(o.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=w.interactive,this._cooperativeGestures=w.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=w.maxTileCacheSize,this._maxTileCacheZoomLevels=w.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=w.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=w.preserveDrawingBuffer,this._antialias=w.antialias,this._trackResize=w.trackResize,this._bearingSnap=w.bearingSnap,this._refreshExpiredTiles=w.refreshExpiredTiles,this._fadeDuration=w.fadeDuration,this._crossSourceCollisions=w.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=w.collectResourceTiming,this._renderTaskQueue=new Md,this._controls=[],this._mapId=l.a2(),this._locale=l.e({},Tf,w.locale),this._clickTolerance=w.clickTolerance,this._overridePixelRatio=w.pixelRatio,this._maxCanvasSize=w.maxCanvasSize,this.transformCameraUpdate=w.transformCameraUpdate,this._imageQueueHandle=F.addThrottleControl(()=>this.isMoving()),this._requestManager=new U(w.transformRequest),typeof w.container=="string"){if(this._container=document.getElementById(w.container),!this._container)throw new Error(`Container '${w.container}' not found.`)}else{if(!(w.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=w.container}if(w.maxBounds&&this.setMaxBounds(w.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let o=!1;const f=rl(v=>{this._trackResize&&!this._removed&&this.resize(v)._update()},50);this._resizeObserver=new ResizeObserver(v=>{o?f(v):o=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Sf(this,w),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=w.hash&&new Qc(typeof w.hash=="string"&&w.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:w.center,zoom:w.zoom,bearing:w.bearing,pitch:w.pitch}),w.bounds&&(this.resize(),this.fitBounds(w.bounds,l.e({},w.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=w.localIdeographFontFamily,this._validateStyle=w.validateStyle,w.style&&this.setStyle(w.style,{localIdeographFontFamily:w.localIdeographFontFamily}),w.attributionControl&&this.addControl(new ws({customAttribution:w.customAttribution})),w.maplibreLogo&&this.addControl(new Di,w.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",o=>{this._update(o.dataType==="style"),this.fire(new l.k(`${o.dataType}data`,o))}),this.on("dataloading",o=>{this.fire(new l.k(`${o.dataType}dataloading`,o))}),this.on("dataabort",o=>{this.fire(new l.k("sourcedataabort",o))})}_getMapId(){return this._mapId}addControl(w,o){if(o===void 0&&(o=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new l.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=w.onAdd(this);this._controls.push(w);const v=this._controlPositions[o];return o.indexOf("bottom")!==-1?v.insertBefore(f,v.firstChild):v.appendChild(f),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new l.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(w);return o>-1&&this._controls.splice(o,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}calculateCameraOptionsFromTo(w,o,f,v){return v==null&&this.terrain&&(v=this.terrain.getElevationForLngLatZoom(f,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(w,o,f,v)}resize(w){var o;const f=this._containerDimensions(),v=f[0],b=f[1],T=this._getClampedPixelRatio(v,b);if(this._resizeCanvas(v,b,T),this.painter.resize(v,b,T),this.painter.overLimit()){const D=this.painter.context.gl;this._maxCanvasSize=[D.drawingBufferWidth,D.drawingBufferHeight];const R=this._getClampedPixelRatio(v,b);this._resizeCanvas(v,b,R),this.painter.resize(v,b,R)}this.transform.resize(v,b),(o=this._requestedCameraState)===null||o===void 0||o.resize(v,b);const P=!this._moving;return P&&(this.stop(),this.fire(new l.k("movestart",w)).fire(new l.k("move",w))),this.fire(new l.k("resize",w)),P&&this.fire(new l.k("moveend",w)),this}_getClampedPixelRatio(w,o){const{0:f,1:v}=this._maxCanvasSize,b=this.getPixelRatio(),T=w*b,P=o*b;return Math.min(T>f?f/T:1,P>v?v/P:1)*b}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds(Ge.convert(w)),this._update()}setMinZoom(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom)return this.transform.minZoom=w,this._update(),this.getZoom()<w&&this.setZoom(w),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w??22)>=this.transform.minZoom)return this.transform.maxZoom=w,this._update(),this.getZoom()>w&&this.setZoom(w),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.minPitch=w,this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(w>=this.transform.minPitch)return this.transform.maxPitch=w,this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.renderWorldCopies=w,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(w){return this._cooperativeGestures=w,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(w){return this.transform.locationPoint(l.L.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.pointLocation(l.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,o,f){if(w==="mouseenter"||w==="mouseover"){let v=!1;return{layer:o,listener:f,delegates:{mousemove:T=>{const P=this.getLayer(o)?this.queryRenderedFeatures(T.point,{layers:[o]}):[];P.length?v||(v=!0,f.call(this,new xs(w,this,T.originalEvent,{features:P}))):v=!1},mouseout:()=>{v=!1}}}}if(w==="mouseleave"||w==="mouseout"){let v=!1;return{layer:o,listener:f,delegates:{mousemove:P=>{(this.getLayer(o)?this.queryRenderedFeatures(P.point,{layers:[o]}):[]).length?v=!0:v&&(v=!1,f.call(this,new xs(w,this,P.originalEvent)))},mouseout:P=>{v&&(v=!1,f.call(this,new xs(w,this,P.originalEvent)))}}}}{const v=b=>{const T=this.getLayer(o)?this.queryRenderedFeatures(b.point,{layers:[o]}):[];T.length&&(b.features=T,f.call(this,b),delete b.features)};return{layer:o,listener:f,delegates:{[w]:v}}}}on(w,o,f){if(f===void 0)return super.on(w,o);const v=this._createDelegatedListener(w,o,f);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(v);for(const b in v.delegates)this.on(b,v.delegates[b]);return this}once(w,o,f){if(f===void 0)return super.once(w,o);const v=this._createDelegatedListener(w,o,f);for(const b in v.delegates)this.once(b,v.delegates[b]);return this}off(w,o,f){return f===void 0?super.off(w,o):(this._delegatedListeners&&this._delegatedListeners[w]&&(v=>{const b=this._delegatedListeners[w];for(let T=0;T<b.length;T++){const P=b[T];if(P.layer===o&&P.listener===f){for(const D in P.delegates)this.off(D,P.delegates[D]);return b.splice(T,1),this}}})(),this)}queryRenderedFeatures(w,o){if(!this.style)return[];let f;const v=w instanceof l.P||Array.isArray(w),b=v?w:[[0,0],[this.transform.width,this.transform.height]];if(o=o||(v?{}:w)||{},b instanceof l.P||typeof b[0]=="number")f=[l.P.convert(b)];else{const T=l.P.convert(b[0]),P=l.P.convert(b[1]);f=[T,new l.P(P.x,T.y),P,new l.P(T.x,P.y),T]}return this.style.queryRenderedFeatures(f,o,this.transform)}querySourceFeatures(w,o){return this.style.querySourceFeatures(w,o)}setStyle(w,o){return(o=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},o)).diff!==!1&&o.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,o),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._updateStyle(w,o))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){const o=this._locale[w];if(o==null)throw new Error(`Missing UI string '${w}'`);return o}_updateStyle(w,o){if(o.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(w,o));const f=this.style&&o.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new Dr(this,o||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,o,f):this.style.loadJSON(w,o,f),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Dr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,o){if(typeof w=="string"){const f=this._requestManager.transformRequest(w,z.Style);l.f(f,(v,b)=>{v?this.fire(new l.j(v)):b&&this._updateDiff(b,o)})}else typeof w=="object"&&this._updateDiff(w,o)}_updateDiff(w,o){try{this.style.setState(w,o)&&this._update(!0)}catch(f){l.w(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(w,o)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(w,o){return this._lazyInitEmptyStyle(),this.style.addSource(w,o),this._update(!0)}isSourceLoaded(w){const o=this.style&&this.style.sourceCaches[w];if(o!==void 0)return o.loaded();this.fire(new l.j(new Error(`There is no source with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){const o=this.style.sourceCaches[w.source];if(!o)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);for(const f in this.style._layers){const v=this.style._layers[f];v.type==="hillshade"&&v.source===w.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new xg(this.painter,o,w),this.painter.renderToTexture=new kd(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=f=>{f.dataType==="style"?this.terrain.sourceCache.freeRtt():f.dataType==="source"&&f.tile&&(f.sourceId!==w.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(f.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.k("terrain",{terrain:w})),this}getTerrain(){var w,o;return(o=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&o!==void 0?o:null}areTilesLoaded(){const w=this.style&&this.style.sourceCaches;for(const o in w){const f=w[o]._tiles;for(const v in f){const b=f[v];if(b.state!=="loaded"&&b.state!=="errored")return!1}}return!0}addSourceType(w,o,f){return this._lazyInitEmptyStyle(),this.style.addSourceType(w,o,f)}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}addImage(w,o,f={}){const{pixelRatio:v=1,sdf:b=!1,stretchX:T,stretchY:P,content:D}=f;if(this._lazyInitEmptyStyle(),!(o instanceof HTMLImageElement||l.a(o))){if(o.width===void 0||o.height===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:R,height:N,data:G}=o,X=o;return this.style.addImage(w,{data:new l.R({width:R,height:N},new Uint8Array(G)),pixelRatio:v,stretchX:T,stretchY:P,content:D,sdf:b,version:0,userImage:X}),X.onAdd&&X.onAdd(this,w),this}}{const{width:R,height:N,data:G}=l.h.getImageData(o);this.style.addImage(w,{data:new l.R({width:R,height:N},G),pixelRatio:v,stretchX:T,stretchY:P,content:D,sdf:b,version:0})}}updateImage(w,o){const f=this.style.getImage(w);if(!f)return this.fire(new l.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const v=o instanceof HTMLImageElement||l.a(o)?l.h.getImageData(o):o,{width:b,height:T,data:P}=v;if(b===void 0||T===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(b!==f.data.width||T!==f.data.height)return this.fire(new l.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const D=!(o instanceof HTMLImageElement||l.a(o));return f.data.replace(P,D),this.style.updateImage(w,f),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new l.j(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w,o){F.getImage(this._requestManager.transformRequest(w,z.Image),o)}listImages(){return this.style.listImages()}addLayer(w,o){return this._lazyInitEmptyStyle(),this.style.addLayer(w,o),this._update(!0)}moveLayer(w,o){return this.style.moveLayer(w,o),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,o,f){return this.style.setLayerZoomRange(w,o,f),this._update(!0)}setFilter(w,o,f={}){return this.style.setFilter(w,o,f),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,o,f,v={}){return this.style.setPaintProperty(w,o,f,v),this._update(!0)}getPaintProperty(w,o){return this.style.getPaintProperty(w,o)}setLayoutProperty(w,o,f,v={}){return this.style.setLayoutProperty(w,o,f,v),this._update(!0)}getLayoutProperty(w,o){return this.style.getLayoutProperty(w,o)}setGlyphs(w,o={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,o),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,o,f={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,o,f,v=>{v||this._update(!0)}),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,o={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,o,f=>{f||this._update(!0)}),this}setLight(w,o={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,o),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(w,o){return this.style.setFeatureState(w,o),this._update()}removeFeatureState(w,o){return this.style.removeFeatureState(w,o),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,o=0;return this._container&&(w=this._container.clientWidth||400,o=this._container.clientHeight||300),[w,o]}_setupContainer(){const w=this._container;w.classList.add("maplibregl-map");const o=this._canvasContainer=g.create("div","maplibregl-canvas-container",w);this._interactive&&o.classList.add("maplibregl-interactive"),this._canvas=g.create("canvas","maplibregl-canvas",o),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const f=this._containerDimensions(),v=this._getClampedPixelRatio(f[0],f[1]);this._resizeCanvas(f[0],f[1],v);const b=this._controlContainer=g.create("div","maplibregl-control-container",w),T=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(P=>{T[P]=g.create("div",`maplibregl-ctrl-${P} `,b)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=g.create("div","maplibregl-cooperative-gesture-screen",this._container);let w=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(w=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${w}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){g.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(w,o,f){this._canvas.width=Math.floor(f*w),this._canvas.height=Math.floor(f*o),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${o}px`}_setupPainter(){const w={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let o=null;this._canvas.addEventListener("webglcontextcreationerror",v=>{o={requestedAttributes:w},v&&(o.statusMessage=v.statusMessage,o.type=v.type)},{once:!0});const f=this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w);if(!f){const v="Failed to initialize WebGL";throw o?(o.message=v,new Error(JSON.stringify(o))):new Error(v)}this.painter=new il(f,this.transform),y.testSupport(f)}_onCooperativeGesture(w,o,f){return!o&&f<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){const o=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let f=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const b=this.transform.zoom,T=l.h.now();this.style.zoomHistory.update(b,T);const P=new l.a8(b,{now:T,fadeDuration:o,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),D=P.crossFadingFactor();D===1&&D===this._crossFadingFactor||(f=!0,this._crossFadingFactor=D),this.style.update(P)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,o,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:o,showPadding:this.showPadding}),this.fire(new l.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.bg.mark(l.bh.load),this.fire(new l.k("load"))),this.style&&(this.style.hasTransitions()||f)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const v=this._sourcesDirty||this._styleDirty||this._placementDirty;return v||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.k("idle")),!this._loaded||this._fullyLoaded||v||(this._fullyLoaded=!0,l.bg.mark(l.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(const f of this._controls)f.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),F.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();const o=this.painter.context.gl.getExtension("WEBGL_lose_context");o&&o.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),g.remove(this._canvasContainer),g.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),l.bg.clearMetrics(),this._removed=!0,this.fire(new l.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.h.frame(w=>{l.bg.frame(w),this._frame=null,this._render(w)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return wn}getCameraTargetElevation(){return this.transform.elevation}},gi.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{const o=this._map.getZoom(),f=o===this._map.getMaxZoom(),v=o===this._map.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=v,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",v.toString())},this._rotateCompassArrow=()=>{const o=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=o},this._setButtonTitle=(o,f)=>{const v=this._map._getUIString(`NavigationControl.${f}`);o.title=v,o.setAttribute("aria-label",v)},this.options=l.e({},Ef,w),this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",o=>this._map.zoomIn({},{originalEvent:o})),g.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",o=>this._map.zoomOut({},{originalEvent:o})),g.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",o=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:o}):this._map.resetNorth({},{originalEvent:o})}),this._compassIcon=g.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Cf(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){g.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,o){const f=g.create("button",w,this._container);return f.type="button",f.addEventListener("click",o),f}},gi.GeolocateControl=class extends l.E{constructor(w){super(),this._onSuccess=o=>{if(this._map){if(this._isOutOfMapMaxBounds(o))return this._setErrorState(),this.fire(new l.k("outofmaxbounds",o)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=o,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(o),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(o),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.k("geolocate",o)),this._finish()}},this._updateCamera=o=>{const f=new l.L(o.coords.longitude,o.coords.latitude),v=o.coords.accuracy,b=this._map.getBearing(),T=l.e({bearing:b},this.options.fitBoundsOptions),P=Ge.fromLngLat(f,v);this._map.fitBounds(P,T,{geolocateSource:!0})},this._updateMarker=o=>{if(o){const f=new l.L(o.coords.longitude,o.coords.latitude);this._accuracyCircleMarker.setLngLat(f).addTo(this._map),this._userLocationDotMarker.setLngLat(f).addTo(this._map),this._accuracy=o.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=o=>{if(this._map){if(this.options.trackUserLocation)if(o.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(o.code===3&&Zl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.k("error",o)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=o=>{if(this._map){if(this._container.addEventListener("contextmenu",f=>f.preventDefault()),this._geolocateButton=g.create("button","maplibregl-ctrl-geolocate",this._container),g.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",o===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}else{const f=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=g.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new sl({element:this._dotElement}),this._circleElement=g.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new sl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",f=>{f.geolocateSource||this._watchState!=="ACTIVE_LOCK"||f.originalEvent&&f.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.k("trackuserlocationend")))})}},this.options=l.e({},Zi,w)}onAdd(w){return this._map=w,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(o,f=!1){sr===void 0||f?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(v=>{sr=v.state!=="denied",o(sr)}).catch(()=>{sr=!!window.navigator.geolocation,o(sr)}):(sr=!!window.navigator.geolocation,o(sr)):o(sr)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),g.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Vi=0,Zl=!1}_isOutOfMapMaxBounds(w){const o=this._map.getMaxBounds(),f=w.coords;return o&&(f.longitude<o.getWest()||f.longitude>o.getEast()||f.latitude<o.getSouth()||f.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const w=this._map.getBounds(),o=w.getSouthEast(),f=w.getNorthEast(),v=o.distanceTo(f),b=Math.ceil(this._accuracy/(v/this._map._container.clientHeight)*2);this._circleElement.style.width=`${b}px`,this._circleElement.style.height=`${b}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Vi--,Zl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Vi++,Vi>1?(w={maximumAge:6e5,timeout:0},Zl=!0):(w=this.options.positionOptions,Zl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},gi.AttributionControl=ws,gi.LogoControl=Di,gi.ScaleControl=class{constructor(w){this._onMove=()=>{au(this._map,this._container,this.options)},this.setUnit=o=>{this.options.unit=o,au(this._map,this._container,this.options)},this.options=l.e({},su,w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){g.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},gi.FullscreenControl=class extends l.E{constructor(w={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){g.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const w=this._fullscreenButton=g.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);g.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new l.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},gi.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=w}onAdd(w){return this._map=w,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=g.create("button","maplibregl-ctrl-terrain",this._container),g.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){g.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},gi.Popup=class extends l.E{constructor(w){super(),this.remove=()=>(this._content&&g.remove(this._content),this._container&&(g.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.k("close")),this),this._onMouseUp=o=>{this._update(o.point)},this._onMouseMove=o=>{this._update(o.point)},this._onDrag=o=>{this._update(o.point)},this._update=o=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=g.create("div","maplibregl-popup",this._map.getContainer()),this._tip=g.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const P of this.options.className.split(" "))this._container.classList.add(P);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=If(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!o)return;const f=this._pos=this._trackPointer&&o?o:this._map.project(this._lngLat);let v=this.options.anchor;const b=Kl(this.options.offset);if(!v){const P=this._container.offsetWidth,D=this._container.offsetHeight;let R;R=f.y+b.bottom.y<D?["top"]:f.y>this._map.transform.height-D?["bottom"]:[],f.x<P/2?R.push("left"):f.x>this._map.transform.width-P/2&&R.push("right"),v=R.length===0?"bottom":R.join("-")}const T=f.add(b[v]).round();g.setTransform(this._container,`${Us[v]} translate(${T.x}px,${T.y}px)`),wg(this._container,v,"popup")},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(Af),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=l.L.convert(w),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){const o=document.createDocumentFragment(),f=document.createElement("body");let v;for(f.innerHTML=w;v=f.firstChild,v;)o.appendChild(v);return this.setDOMContent(o)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=g.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){this._container&&this._container.classList.add(w)}removeClassName(w){this._container&&this._container.classList.remove(w)}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}_createCloseButton(){this.options.closeButton&&(this._closeButton=g.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const w=this._container.querySelector(Mf);w&&w.focus()}},gi.Marker=sl,gi.Style=Dr,gi.LngLat=l.L,gi.LngLatBounds=Ge,gi.Point=l.P,gi.MercatorCoordinate=l.U,gi.Evented=l.E,gi.AJAXError=l.bi,gi.config=l.c,gi.CanvasSource=Sn,gi.GeoJSONSource=Dt,gi.ImageSource=Nt,gi.RasterDEMTileSource=Xe,gi.RasterTileSource=wt,gi.VectorTileSource=Ct,gi.VideoSource=dn,gi.setRTLTextPlugin=l.bj,gi.getRTLTextPluginStatus=l.bk,gi.prewarm=function(){jn().acquire(Ft)},gi.clearPrewarmedResources=function(){const w=Pn;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(Ft),Pn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},kf.extend(gi,{isSafari:l.ac,getPerformanceMetrics:l.bg.getPerformanceMetrics}),gi});var d=s;return d})})(oP);var eh=oP.exports;const cP=Symbol("MapLibreGLMap"),fG=Symbol("MapLibreGLMarker"),pG=lt({__name:"Skeleton",props:{variant:{default:"rect"},width:{default:"100%"},height:{default:"1rem"}},setup(e){return bm(t=>({"367bb0d0":t.width,cc985cd6:t.height})),(t,i)=>(B(),fe("div",{class:Mn(`skeleton skeleton--${t.variant} rounded-md animate-pulse bg-neutral-200 flex items-center justify-center`)},[En(t.$slots,"default",{},void 0,!0)],2))}});const No=ln(pG,[["__scopeId","data-v-637a971d"]]),mG={class:"maplibre-map"},gG=["onClick"],vG={class:"hidden"},sp="markers",Gd="unclustered-points",Wd="clusters",M2="cluster-count",_G=lt({__name:"Map",props:{center:{},bounds:{default:void 0},zoom:{},apiKey:{},labelsClass:{default:""},mapStyle:{default:"light"},mapContainerClass:{default:""},fullscreenControl:{type:Boolean,default:!0},mapOptions:{default:()=>({})}},emits:["click","load"],setup(e,{emit:t}){const i=e,r=t,s=Fe(null),c=Fe(null),d=es(new Map),l=Fe(!1),m={light:{label:"Light",name:"ArcGIS:LightGray",type:"style"},dark:{label:"Dark",name:"ArcGIS:DarkGray",type:"style"},satellite:{label:"Satellite",name:"ArcGIS:Imagery",type:"style"},streets:{label:"Street",name:"ArcGIS:Navigation",type:"style"}},g=Fe(i.mapStyle),y=ee=>{const Q="https://basemaps-api.arcgis.com/arcgis/rest/services/styles",{name:ve,type:se,url:K}=m[ee];return K||`${Q}/${ve}?type=${se}&token=${i.apiKey}`};function x(){if(!c.value)throw new Error("Cannot update style: no map");c.value.setStyle(y(g.value))}function C(){if(i.bounds){if(!c.value)throw new Error("Cannot update bounds: no map");c.value.fitBounds(i.bounds,{padding:64})}}function I({id:ee,lng:Q,lat:ve}){return Array.from(d.values()).filter(K=>{var te;if(((te=K.properties)==null?void 0:te.id)===ee)return!1;const J=Math.abs(K.geometry.coordinates[0]-Q),W=Math.abs(K.geometry.coordinates[1]-ve);return J<1e-4&&W<1e-4})}function A({id:ee,lng:Q,lat:ve,...se}){const J=I({id:ee,lng:Q,lat:ve}).length?[1e-4,0]:[0,0],W={type:"Feature",geometry:{type:"Point",coordinates:[Q,ve]},properties:{...se,id:ee,offset:J}};return d.set(ee,W),W}function O(ee){d.delete(ee)}const F=new Map;function z(ee,Q){F.set(ee,Q)}function U(ee){const Q=F.get(ee);Q!=null&&Q.value&&(Q.value.innerHTML=""),F.delete(ee)}function H(ee){return Array.from(ee.values()).map(se=>{var K;if(!((K=se.properties)!=null&&K.offset))throw new Error("No offset");return{...se,geometry:{...se.geometry,coordinates:[se.geometry.coordinates[0]+se.properties.offset[0],se.geometry.coordinates[1]+se.properties.offset[1]]}}})}function q(){const ee=c.value;if(!ee)return;const Q=ee.getSource("markers");Q==null||Q.setData({type:"FeatureCollection",features:H(d)})}return pn(g,x),pn([()=>i.bounds,c],C),Fn(()=>{if(!s.value)throw Error("Cannot create Map: container not defined:");const ee=new eh.Map({container:s.value,center:i.center?[i.center.lng,i.center.lat]:[0,0],style:y(g.value),zoom:i.zoom,bounds:i.bounds,...i.mapOptions});i.fullscreenControl&&ee.addControl(new eh.FullscreenControl({container:document.querySelector("body")})),ee.addControl(new eh.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0})).addControl(new eh.ScaleControl({unit:"imperial"})).on("click",Q=>{if(!c.value)throw new Error("there was a click but no map");r("click",Q,c.value)}).on("click",Wd,function(Q){var W;if(!c.value)throw new Error("there was a click on the map, but no map. How is that even possible?");const ve=c.value,se=ve.queryRenderedFeatures(Q.point,{layers:[Wd]}),K=(W=se[0].properties)==null?void 0:W.cluster_id,J=ve.getSource(sp);J==null||J.getClusterExpansionZoom(K,(te,j)=>{var Te;if(te||j===null)return;const re=(Te=se[0].geometry)==null?void 0:Te.coordinates;ve.easeTo({center:re,zoom:j})})}).on("click",Gd,function(Q){var j,re;if(!c.value)throw new Error("there was a click on the map, but no map. How is that even possible?");const ve=c.value,K=ve.queryRenderedFeatures(Q.point,{layers:[Gd]})[0],J=K.geometry.coordinates.slice();for(;Math.abs(Q.lngLat.lng-J[0])>180;)J[0]+=Q.lngLat.lng>J[0]?360:-360;const W=(j=K.properties)==null?void 0:j.id,te=(re=F.get(W))==null?void 0:re.value;if(!te){console.error(`no popup container for marker ${W}`);return}new eh.Popup().setLngLat(J).setDOMContent(te).addTo(ve)}).on("mouseenter",Wd,function(){ee.getCanvas().style.cursor="pointer"}).on("mouseleave",Wd,function(){ee.getCanvas().style.cursor=""}).on("mouseenter",Gd,function(){ee.getCanvas().style.cursor="pointer"}).on("mouseleave",Gd,function(){ee.getCanvas().style.cursor=""}).on("styledata",()=>{if(!c.value)throw new Error("cannot emit styledata event: no map");const Q=c.value;Q.getSource(sp)||Q.addSource(sp,{type:"geojson",data:{type:"FeatureCollection",features:H(d)},cluster:!0,clusterMaxZoom:14,clusterRadius:50}),Q.getLayer(Wd)||Q.addLayer({id:Wd,type:"circle",source:sp,filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#F54D94",5,"#F54D94"],"circle-radius":["step",["get","point_count"],20,10,30,100,40],"circle-stroke-width":8,"circle-stroke-color":"rgba(245, 77, 138, 0.25)"}}),Q.getLayer(M2)||Q.addLayer({id:M2,type:"symbol",source:sp,layout:{"text-font":["Arial Bold"],"text-field":["get","point_count"],"text-offset":[0,.1]},paint:{"text-color":"white"}}),Q.getLayer(Gd)||Q.addLayer({id:Gd,type:"circle",source:"markers",filter:["!",["has","point_count"]],paint:{"circle-color":"#F54D94","circle-radius":8,"circle-stroke-width":1,"circle-stroke-color":"#fff"}})}).on("load",()=>{if(!c.value)throw new Error("cannot emit load event: no map");l.value=!0,r("load",c.value)}),c.value=ee,Q_(s,()=>{c.value&&c.value.resize()})}),Hi(()=>{c.value&&(c.value.remove(),c.value=null)}),ki(cP,{addMarker:A,removeMarker:O,setMarkerPopupContainer:z,removeMarkerPopup:U,renderMarkers:q}),(ee,Q)=>(B(),fe("div",mG,[ue("div",{class:Mn(["flex gap-4 sm:justify-end items-center mb-4",ee.labelsClass])},[(B(),fe(Ut,null,$n(m,(ve,se)=>ue("button",{key:se,class:Mn(["text-sm",{"font-bold":se===g.value,"text-neutral-400":se!==g.value}]),onClick:K=>g.value=se},xt(ve.label),11,gG)),64))],2),ue("div",{ref_key:"mapContainerRef",ref:s,class:Mn(["map-container",ee.mapContainerClass])},null,2),l.value?st("",!0):(B(),ze(No,{key:0,class:"w-full h-[75vh]"})),ue("div",vG,[En(ee.$slots,"default",{},void 0,!0)])]))}});const uP=ln(_G,[["__scopeId","data-v-b6b790f1"]]),vw=Object.freeze(Object.defineProperty({__proto__:null,default:uP},Symbol.toStringTag,{value:"Module"})),yG={class:"map-marker"},bG=lt({__name:"MapMarker",props:{id:{},lng:{},lat:{}},setup(e){const t=e,i=yi(cP);Fn(()=>{if(!i)throw new Error(`Cannot add marker ${t.id} for [${t.lng}, ${t.lat}]. Map context is null.`);i.addMarker({id:t.id,lng:t.lng,lat:t.lat})}),Hi(()=>{if(!i)throw new Error(`Cannot remove marker ${t.id} for [${t.lng}, ${t.lat}]. Map context is null.`);i.removeMarker(t.id)});function r(c){if(!i)throw new Error(`Cannot create popup for marker ${t.id} for [${t.lng}, ${t.lat}]. Map context is null.`);i.setMarkerPopupContainer(t.id,c)}function s(){if(!i)throw new Error(`Cannot remove popup for marker ${t.id} for [${t.lng}, ${t.lat}]. Map context is null.`);i.removeMarkerPopup(t.id)}return ki(fG,{createPopup:r,removePopup:s}),(c,d)=>(B(),fe("div",yG,[En(c.$slots,"default")]))}});var Ws=63710088e-1,xG={centimeters:Ws*100,centimetres:Ws*100,degrees:Ws/111325,feet:Ws*3.28084,inches:Ws*39.37,kilometers:Ws/1e3,kilometres:Ws/1e3,meters:Ws,metres:Ws,miles:Ws/1609.344,millimeters:Ws*1e3,millimetres:Ws*1e3,nauticalmiles:Ws/1852,radians:1,yards:Ws*1.0936};function dP(e,t,i){i===void 0&&(i={});var r={type:"Feature"};return(i.id===0||i.id)&&(r.id=i.id),i.bbox&&(r.bbox=i.bbox),r.properties=t||{},r.geometry=e,r}function wG(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!P2(e[0])||!P2(e[1]))throw new Error("coordinates must contain numbers");var r={type:"Point",coordinates:e};return dP(r,t,i)}function SG(e,t,i){i===void 0&&(i={});for(var r=0,s=e;r<s.length;r++){var c=s[r];if(c.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var d=0;d<c[c.length-1].length;d++)if(c[c.length-1][d]!==c[0][d])throw new Error("First and last Position are not equivalent.")}var l={type:"Polygon",coordinates:e};return dP(l,t,i)}function TG(e,t){t===void 0&&(t="kilometers");var i=xG[t];if(!i)throw new Error(t+" units is invalid");return e/i}function k2(e){var t=e%(2*Math.PI);return t*180/Math.PI}function eb(e){var t=e%360;return t*Math.PI/180}function P2(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function EG(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function CG(e,t,i,r){r===void 0&&(r={});var s=EG(e),c=eb(s[0]),d=eb(s[1]),l=eb(i),m=TG(t,r.units),g=Math.asin(Math.sin(d)*Math.cos(m)+Math.cos(d)*Math.sin(m)*Math.cos(l)),y=c+Math.atan2(Math.sin(l)*Math.sin(m)*Math.cos(d),Math.cos(m)-Math.sin(d)*Math.sin(g)),x=k2(y),C=k2(g);return wG([x,C],r.properties)}function IG(e,t,i){i===void 0&&(i={});for(var r=i.steps||64,s=i.properties?i.properties:!Array.isArray(e)&&e.type==="Feature"&&e.properties?e.properties:{},c=[],d=0;d<r;d++)c.push(CG(e,t,d*-360/r,i).geometry.coordinates);return c.push(c[0]),SG([c],s)}const AG={class:"flex items-baseline mt-2 text-sm gap-2"},MG={key:0,class:"text-xs text-red-700 mt-2"},kG=lt({__name:"FilterByGlobalLocationRow",props:{rowIndex:{}},setup(e){const t=Pr(),i=Fe(null),r=Fe(!1),s=De(()=>!c.value||!d.value?null:{lng:c.value,lat:d.value}),c=De(()=>{var I;return parseFloat(((I=t.filterBy.globalLocation)==null?void 0:I.lng)??"")}),d=De(()=>{var I;return parseFloat(((I=t.filterBy.globalLocation)==null?void 0:I.lat)??"")}),l=De(()=>{var I;return parseFloat(((I=t.filterBy.globalLocation)==null?void 0:I.radius)??"")}),m=De(()=>{if(!c.value||!d.value||!l.value)return null;const I=[c.value,d.value];return IG(I,l.value,{steps:36,units:"miles"})}),g=De(()=>l.value>0);function y(I){r.value=!0,t.updateLocationFilter({radius:I})}function x(I){i.value=I,I.on("click",A=>{const O=A.lngLat;t.updateLocationFilter({lng:O.lng.toString(),lat:O.lat.toString()})}),I.getSource("radius-circle")||I.addSource("radius-circle",{type:"geojson",data:m.value}),I.getLayer("radius-circle")||I.addLayer({id:"radius-circle",type:"fill",source:"radius-circle",paint:{"fill-color":"#f03","fill-opacity":.2}})}function C(){const I=i.value,A=m.value;if(!I||!A||!I.loaded())return;const O=I.getSource("radius-circle");if(!O)throw new Error("Cannot render radius circle. Expected source to be defined.");if(!(O instanceof eh.GeoJSONSource))throw new Error("Expected source to be a GeoJSONSource");O.setData(A)}return pn([c,d,l],()=>C()),(I,A)=>le(t).filterBy.globalLocation?(B(),ze(uy,{key:0,rowIndex:I.rowIndex,label:"Any Location",onRemove:le(t).removeLocationFilter},{default:Ce(()=>[ue("div",AG,[ue("span",null,xt(Math.abs(c.value).toFixed(4))+"° "+xt(c.value>0?"E":"W"),1),ue("span",null,xt(Math.abs(d.value).toFixed(4))+"° "+xt(d.value>0?"N":"S"),1)]),s.value?(B(),ze(uP,{key:0,center:s.value,zoom:2,apiKey:le(Zn).arcgis.apiKey,class:"my-2 border border-neutral-300 rounded-md",labelsClass:"hidden",mapContainerClass:"!h-[12rem] !min-h-[12rem]",fullscreenControl:!1,mapOptions:{attributionControl:!1},onLoad:x},{default:Ce(()=>[c.value&&d.value?(B(),ze(bG,{key:0,id:"search-by-location-map-marker",lng:c.value,lat:d.value},null,8,["lng","lat"])):st("",!0)]),_:1},8,["center","apiKey"])):st("",!0),ue("div",null,[_e(co,{id:"filter-by-global-location-radius",modelValue:le(t).filterBy.globalLocation.radius??"",type:"text",label:"Search Radius",labelClass:{"!text-red-700":r.value&&!g.value},inputClass:{"bg-white !border-neutral-200":!0,"border-red-600 text-red-700":r.value&&!g.value},"onUpdate:modelValue":y},{append:Ce(()=>[ue("span",{class:Mn(["text-sm text-neutral-600 mr-2",{"!text-red-700":r.value&&!g.value}])},"miles",2)]),_:1},8,["modelValue","labelClass","inputClass"]),r.value&&!g.value?(B(),fe("p",MG," Radius must be a number greater than 0. ")):st("",!0)])]),_:1},8,["rowIndex","onRemove"])):st("",!0)}}),PG=e=>(ja("data-v-0b78b9fe"),e=e(),Va(),e),DG=PG(()=>ue("option",{value:""},"All",-1)),LG=["value"],OG=lt({__name:"FilterByGlobalFileTypeRow",props:{rowIndex:{}},setup(e){const t=Pr(),r=[...[{label:"Image",value:"image"},{label:"Video",value:"movie"},{label:"Audio",value:"audio"},{label:"Doc",value:"office"},{label:"TXT",value:"txt"},{label:"PDF",value:"pdf"},{label:"PPT",value:"office"},{label:"3D (obj)",value:"zipobj"},{label:"3D (ply)",value:"ply"},{label:"DICOM",value:"zipmeddicom"},{label:"SCORM",value:"zipscorm"}]].sort((s,c)=>s.label.localeCompare(c.label));return(s,c)=>(B(),ze(uy,{label:"File Type",rowIndex:s.rowIndex,onRemove:le(t).removeFileTypeFilter},{default:Ce(()=>[le(t).filterBy.globalFileType?vs((B(),fe("select",{key:0,"onUpdate:modelValue":c[0]||(c[0]=d=>le(t).filterBy.globalFileType.fileType=d),class:"rounded-md w-full text-sm"},[DG,(B(!0),fe(Ut,null,$n(le(r),d=>(B(),fe("option",{key:d.label,value:d.value},xt(d.label),9,LG))),128))],512)),[[Nh,le(t).filterBy.globalFileType.fileType]]):st("",!0)]),_:1},8,["rowIndex","onRemove"]))}});const RG=ln(OG,[["__scopeId","data-v-0b78b9fe"]]),FG={class:"my-4"},$G={class:"flex justify-between"},zG={class:"flex items-baseline gap-2 mb-2"},NG=ue("h3",{class:"font-bold"},"Fields",-1),BG={key:0,class:"p-4 bg-transparent-black-50 rounded-md flex flex-col gap-4 sm:gap-2 mb-4"},jG={class:"flex justify-between items-baseline"},VG={class:"divide-y divide-neutral-200"},UG={class:"flex-1"},HG=lt({__name:"FilterByFieldsSection",setup(e){const t=bi(),i=Pr(),r=De(()=>t.searchableFields.filter(d=>i.supportedSpecificFieldTypes.includes(d.type))),s=De(()=>{const{globalDateRangeAsFilter:d,globalLocationAsFilter:l,globalFileTypeAsFilter:m}=i;return[d,l,m].filter(g=>!!g)}),c=De(()=>[...i.specificFieldFilters,...s.value].sort((d,l)=>d.createdAt>l.createdAt?1:d.createdAt<l.createdAt?-1:0));return(d,l)=>(B(),fe("section",FG,[ue("div",$G,[ue("header",zG,[NG,le(i).hasFieldFiltersApplied?(B(),ze(oi,{key:0,variant:"tertiary",onClick:le(i).clearSearchableFieldsFilters},{default:Ce(()=>[Ot(" clear ")]),_:1},8,["onClick"])):st("",!0)])]),le(i).hasFieldFiltersApplied?(B(),fe("div",BG,[(B(!0),fe(Ut,null,$n(c.value,(m,g)=>(B(),fe("div",{key:m.id},[m.fieldId===le(yl).DATE_RANGE?(B(),ze(hG,{key:0,rowIndex:g},null,8,["rowIndex"])):m.fieldId===le(yl).LOCATION?(B(),ze(kG,{key:1,rowIndex:g},null,8,["rowIndex"])):m.fieldId===le(yl).FILE_TYPE?(B(),ze(RG,{key:2,rowIndex:g},null,8,["rowIndex"])):(B(),ze(uG,{key:3,filter:m,rowIndex:g},null,8,["filter","rowIndex"]))]))),128))])):st("",!0),ue("div",jG,[_e(aP,{label:"Add Field"},{default:Ce(()=>[ue("div",VG,[ue("div",null,[(B(!0),fe(Ut,null,$n(r.value,m=>(B(),ze(vp,{key:m.id,class:"flex items-center justify-between cursor-pointer",onClick:g=>le(i).addSearchableFieldFilter(m.id)},{default:Ce(()=>[ue("span",UG,xt(m.label),1)]),_:2},1032,["onClick"]))),128))]),ue("div",null,[_e(vp,{class:"flex items-center cursor-pointer aria-disabled:opacity-25",disabled:le(i).hasDateRangeFilter,onClick:l[0]||(l[0]=m=>le(i).addDateRangeFilter())},{default:Ce(()=>[Ot(" Any Date ")]),_:1},8,["disabled"]),_e(vp,{class:"flex items-center cursor-pointer aria-disabled:opacity-25",disabled:le(i).hasLocationFilter,onClick:l[1]||(l[1]=m=>le(i).addLocationFilter())},{default:Ce(()=>[Ot(" Any Location ")]),_:1},8,["disabled"]),_e(vp,{class:"flex items-center cursor-pointer aria-disabled:opacity-25",disabled:le(i).hasFileTypeFilter,onClick:l[2]||(l[2]=m=>le(i).addFileTypeFilter())},{default:Ce(()=>[Ot(" Any File Type ")]),_:1},8,["disabled"])])])]),_:1})])]))}}),GG={class:"inline-flex items-center gap-1.5"},WG={class:"sr-only"},qG=lt({__name:"Toggle",props:{modelValue:{type:Boolean},settingLabel:{},offLabel:{},onLabel:{},toggleClass:{},toggleOnClass:{},toggleOffClass:{},onLabelClass:{},offLabelClass:{}},emits:["update:modelValue"],setup(e){return(t,i)=>(B(),ze(le(n7),{class:"toggle"},{default:Ce(()=>[ue("div",GG,[t.offLabel?(B(),ze(le(u2),{key:0,class:Mn(t.offLabelClass)},{default:Ce(()=>[Ot(xt(t.offLabel),1)]),_:1},8,["class"])):st("",!0),_e(le(i7),{modelValue:t.modelValue,class:Mn([t.modelValue?"bg-blue-600":"bg-neutral-200","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2",t.toggleClass,t.modelValue?t.toggleOnClass:t.toggleOffClass]),"onUpdate:modelValue":i[0]||(i[0]=r=>t.$emit("update:modelValue",r))},{default:Ce(()=>[ue("span",WG,xt(t.settingLabel),1),ue("span",{"aria-hidden":"true",class:Mn([t.modelValue?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"])},null,2)]),_:1},8,["modelValue","class"]),t.onLabel?(B(),ze(le(u2),{key:1,class:Mn(t.onLabelClass)},{default:Ce(()=>[Ot(xt(t.onLabel),1)]),_:1},8,["class"])):st("",!0)])]),_:1}))}}),ZG={class:"p-2"},KG=ue("h1",{class:"sr-only"},"Advanced Search",-1),XG={class:"px-2"},YG=ue("h2",{class:"font-bold text-xs uppercase pb-2 border-b border-b-neutral-200"}," Filter By ",-1),JG={class:"max-h-[60vh] overflow-y-auto px-2"},QG={class:"flex bg-transparent-black-100 p-2 justify-between items-center gap-4"},eW=lt({__name:"AdvancedSearchForm",emits:["close","submit"],setup(e,{emit:t}){const i=t,r=Pr(),s=bi(),c=Fe(null);ON(c,()=>{i("close")});function d(m){m.key==="Escape"&&i("close")}function l(m){m.preventDefault(),r.isValidSearch&&i("submit")}return Fn(()=>{document.addEventListener("keydown",d)}),Hi(()=>{document.removeEventListener("keydown",d)}),(m,g)=>{var y;return B(),fe("form",{ref_key:"advancedSearchForm",ref:c,class:"advanced-search-form bg-white rounded-3xl shadow-md",onSubmit:Uo(l,["prevent"])},[ue("div",ZG,[KG,_e(sP,{class:"mb-4",onMoreOptionClick:g[0]||(g[0]=x=>m.$emit("close"))}),ue("div",XG,[YG,ue("div",JG,[_e(jH),_e(HG)])])]),ue("div",QG,[ue("div",null,[(y=le(s).currentUser)!=null&&y.isAdmin?(B(),ze(qG,{key:0,modelValue:le(r).filterBy.includeHiddenAssets,"onUpdate:modelValue":g[1]||(g[1]=x=>le(r).filterBy.includeHiddenAssets=x),class:"ml-4",settingLabel:"Include Hidden Assets",onLabel:"Include Hidden",onLabelClass:"text-sm"},null,8,["modelValue"])):st("",!0)]),ue("div",null,[_e(oi,{variant:"tertiary",type:"button",onClick:le(r).clearAllFilters},{default:Ce(()=>[Ot(" Clear All ")]),_:1},8,["onClick"]),_e(oi,{variant:"primary",type:"submit",class:"!rounded-full",disabled:!le(r).isValidSearch},{default:Ce(()=>[Ot(" Search ")]),_:1},8,["disabled"])])])],544)}}}),tW={};function nW(e,t){return B(),ze(Cr,{enterActiveClass:"ease-inout duration-200",enterFromClass:"opacity-0",enterToClass:"opacity-100",leaveActiveClass:"ease-inout duration-300",leaveFromClass:"opacity-100",leaveToClass:"opacity-0"},{default:Ce(()=>[En(e.$slots,"default")]),_:3})}const D2=ln(tW,[["render",nW]]),iW={class:"search-bar relative"},rW={key:0,class:"fixed inset-0 bg-transparent-black-700 z-30"},sW=lt({__name:"SearchBar",setup(e){const t=Fe(null),i=Fe(!1),r=Pr(),s=_o();async function c(){i.value=!1;const g=await r.getSearchId();if(!g){s.push({name:"error",params:{errorCode:400}});return}s.push({name:"search",params:{searchId:g}})}function d(g){var y;t.value&&g.metaKey&&g.key==="k"&&(g.preventDefault(),(y=t.value.$el.querySelector("input"))==null||y.focus())}function l(g){var y;t.value&&g.key==="Escape"&&((y=t.value.$el.querySelector("input"))==null||y.blur())}document.addEventListener("keydown",d),document.addEventListener("keydown",l);const m=Ju();return pn(m,(g,y)=>{const x=g.name!==(y==null?void 0:y.name),C=!["search","asset"].includes(g.name);x&&C&&(r.query="",r.clearAllFilters())},{immediate:!0}),(g,y)=>(B(),fe("div",iW,[ue("form",{class:"search-bar__form",onSubmit:Uo(c,["prevent"])},[_e(sP,{onMoreOptionClick:y[0]||(y[0]=x=>i.value=!0),onClearAllFilters:y[1]||(y[1]=()=>{i.value||c()})})],32),_e(D2,null,{default:Ce(()=>[i.value?(B(),ze(eW,{key:0,isOpen:i.value,class:"fixed top-1 right-1 left-1 m-auto z-40 sm:absolute sm:!-top-2 sm:!-right-2 sm:!-left-2 advanced-search-form",onSubmit:c,onClose:y[2]||(y[2]=x=>i.value=!1)},null,8,["isOpen"])):st("",!0)]),_:1}),_e(D2,null,{default:Ce(()=>[i.value?(B(),fe("div",rW)):st("",!0)]),_:1})]))}});const aW=ln(sW,[["__scopeId","data-v-1bb5e04f"]]),oW={class:"app-logo-mark flex gap-2 items-center"},lW=["src","alt"],cW={class:"app-header__wordmark font-bold text-lg hidden md:block"},uW=lt({__name:"AppLogoMark",setup(e){const t=bi();return(i,r)=>(B(),fe("div",oW,[le(t).instance.logoImg?(B(),fe("img",{key:0,src:le(t).instance.logoImg.src,alt:le(t).instance.logoImg.alt,class:"app-header__logo-img h-8"},null,8,lW)):(B(),ze(D8,{key:1,class:"h-full app-header__icon"})),ue("h1",cW,xt(le(t).instance.name),1)]))}}),dW={class:"avatar inline-flex justify-center items-center rounded-full w-6 h-6 border text-xs border-neutral-900 font-sans"},hW=lt({__name:"Avatar",props:{name:{}},setup(e){const t=e,i=De(()=>t.name.length?t.name[0].toUpperCase():"X");return(r,s)=>(B(),fe("div",dW,xt(i.value),1))}}),fW={key:1},pW={class:"p-4 border-b border-neutral-300 text-xs flex items-center gap-1"},mW=ue("span",{class:"text-neutral-400"},"Signed in as",-1),gW={class:"font-normal"},vW=lt({__name:"AuthDropDown",props:{currentUser:{},instance:{}},setup(e){const t=e,i=Ju(),r=NM(),s=De(()=>{var l;const d=((l=r.value)==null?void 0:l.href)??Zn.instance.base.url;return encodeURIComponent(d)}),c=De(()=>t.currentUser?t.currentUser.displayName:"Login");return(d,l)=>(B(),ze(gw,{label:c.value,showChevron:!1,class:"auth-drop-down"},{label:Ce(()=>[d.currentUser?(B(),ze(hW,{key:0,name:d.currentUser.displayName},null,8,["name"])):(B(),fe("span",fW,"Login"))]),default:Ce(()=>[d.currentUser?(B(),fe(Ut,{key:0},[ue("div",pW,[mW,ue("b",gW,xt(d.currentUser.displayName),1)]),d.currentUser.id?(B(),ze(rh,{key:0,href:`${le(Zn).instance.base.url}/permissions/editUser/${d.currentUser.id}`},{default:Ce(()=>[Ot(" Preferences ")]),_:1},8,["href"])):st("",!0),_e(rh,{to:"/logout"},{default:Ce(()=>[Ot("Logout")]),_:1})],64)):(B(),fe(Ut,{key:1},[d.instance.useCentralAuth&&d.instance.centralAuthLabel?(B(),ze(rh,{key:0,href:`${le(Zn).instance.base.url}/loginManager/remoteLogin/?redirect=${s.value}`},{default:Ce(()=>[Ot(xt(d.instance.centralAuthLabel)+" Login ",1)]),_:1},8,["href"])):st("",!0),_e(rh,{to:`/loginManager/localLogin/?redirect=${le(i).path}`},{default:Ce(()=>[Ot(xt(d.instance.useCentralAuth?"Guest":"")+" Login ",1)]),_:1},8,["to"])],64))]),_:1},8,["label"]))}}),_W={class:"app-header flex flex-col gap-2"},yW={class:"flex justify-between items-center md:gap-8 px-4 py-2"},bW={class:"flex gap-2 items-center"},xW={class:"flex gap-2 items-center"},wW={class:"app-header__secondary-nav"},SW=lt({__name:"AppHeader",setup(e){const t=bi(),i=De(()=>t.currentUser);return(r,s)=>(B(),fe("header",_W,[ue("div",yW,[ue("div",bW,[_e(ts,{to:"/",class:"app-header__logo-link hover:no-underline mr-4"},{default:Ce(()=>[_e(uW)]),_:1})]),le(t).instance.userCanSearchAndBrowse?(B(),ze(aW,{key:0,class:"flex-1 w-full max-w-2xl"})):st("",!0),ue("div",xW,[_e(vW,{currentUser:i.value,instance:le(t).instance},null,8,["currentUser","instance"]),_e(vH)])]),ue("div",wW,[En(r.$slots,"default",{},void 0,!0)])]))}});const hP=ln(SW,[["__scopeId","data-v-bd7ec3e4"]]);const TW={},EW={class:"skipnav shadow-md",href:"#main"};function CW(e,t){return B(),fe("a",EW," Skip to content ")}const IW=ln(TW,[["render",CW],["__scopeId","data-v-641f0db6"]]),AW={id:"top",class:"default-layout min-h-screen pt-18 flex flex-col"},MW={id:"main",class:"flex-1 flex flex-col",tabindex:"-1"},kW={href:"#top",class:"fixed bottom-2 right-2 w-10 h-10 flex items-center justify-center rounded-full hover:bg-blue-100 z-20"},PW=ue("span",{class:"sr-only"},"Top",-1),yo=lt({__name:"DefaultLayout",setup(e){const{y:t}=ZN(),i=De(()=>t.value>0);return(r,s)=>(B(),fe("div",AW,[_e(IW,{href:"#main"}),En(r.$slots,"custom-header"),_e(hP,{class:"app-header top-0 w-full z-20 sticky left-0"}),ue("main",MW,[En(r.$slots,"default")]),En(r.$slots,"footer"),_e(Cr,{name:"fade"},{default:Ce(()=>[vs(ue("a",kW,[_e(le(iy)),PW],512),[[_a,i.value]])]),_:1})]))}});/*! @license DOMPurify 3.0.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.8/LICENSE */const{entries:fP,setPrototypeOf:L2,isFrozen:DW,getPrototypeOf:LW,getOwnPropertyDescriptor:_w}=Object;let{freeze:Os,seal:po,create:pP}=Object,{apply:Ax,construct:Mx}=typeof Reflect<"u"&&Reflect;Os||(Os=function(t){return t});po||(po=function(t){return t});Ax||(Ax=function(t,i,r){return t.apply(i,r)});Mx||(Mx=function(t,i){return new t(...i)});const fv=za(Array.prototype.forEach),O2=za(Array.prototype.pop),ap=za(Array.prototype.push),Rv=za(String.prototype.toLowerCase),tb=za(String.prototype.toString),OW=za(String.prototype.match),op=za(String.prototype.replace),RW=za(String.prototype.indexOf),FW=za(String.prototype.trim),aa=za(RegExp.prototype.test),lp=$W(TypeError);function za(e){return function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];return Ax(e,t,r)}}function $W(e){return function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Mx(e,i)}}function ui(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Rv;L2&&L2(e,null);let r=t.length;for(;r--;){let s=t[r];if(typeof s=="string"){const c=i(s);c!==s&&(DW(t)||(t[r]=c),s=c)}e[s]=!0}return e}function zW(e){for(let t=0;t<e.length;t++)_w(e,t)===void 0&&(e[t]=null);return e}function bu(e){const t=pP(null);for(const[i,r]of fP(e))_w(e,i)!==void 0&&(Array.isArray(r)?t[i]=zW(r):r&&typeof r=="object"&&r.constructor===Object?t[i]=bu(r):t[i]=r);return t}function pv(e,t){for(;e!==null;){const r=_w(e,t);if(r){if(r.get)return za(r.get);if(typeof r.value=="function")return za(r.value)}e=LW(e)}function i(r){return console.warn("fallback value for",r),null}return i}const R2=Os(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),nb=Os(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ib=Os(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),NW=Os(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),rb=Os(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),BW=Os(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),F2=Os(["#text"]),$2=Os(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),sb=Os(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),z2=Os(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),mv=Os(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),jW=po(/\{\{[\w\W]*|[\w\W]*\}\}/gm),VW=po(/<%[\w\W]*|[\w\W]*%>/gm),UW=po(/\${[\w\W]*}/gm),HW=po(/^data-[\-\w.\u00B7-\uFFFF]/),GW=po(/^aria-[\-\w]+$/),mP=po(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),WW=po(/^(?:\w+script|data):/i),qW=po(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),gP=po(/^html$/i);var N2=Object.freeze({__proto__:null,MUSTACHE_EXPR:jW,ERB_EXPR:VW,TMPLIT_EXPR:UW,DATA_ATTR:HW,ARIA_ATTR:GW,IS_ALLOWED_URI:mP,IS_SCRIPT_OR_DATA:WW,ATTR_WHITESPACE:qW,DOCTYPE_NAME:gP});const ZW=function(){return typeof window>"u"?null:window},KW=function(t,i){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const s="data-tt-policy-suffix";i&&i.hasAttribute(s)&&(r=i.getAttribute(s));const c="dompurify"+(r?"#"+r:"");try{return t.createPolicy(c,{createHTML(d){return d},createScriptURL(d){return d}})}catch{return console.warn("TrustedTypes policy "+c+" could not be created."),null}};function vP(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ZW();const t=Wt=>vP(Wt);if(t.version="3.0.8",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;let{document:i}=e;const r=i,s=r.currentScript,{DocumentFragment:c,HTMLTemplateElement:d,Node:l,Element:m,NodeFilter:g,NamedNodeMap:y=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:x,DOMParser:C,trustedTypes:I}=e,A=m.prototype,O=pv(A,"cloneNode"),F=pv(A,"nextSibling"),z=pv(A,"childNodes"),U=pv(A,"parentNode");if(typeof d=="function"){const Wt=i.createElement("template");Wt.content&&Wt.content.ownerDocument&&(i=Wt.content.ownerDocument)}let H,q="";const{implementation:ee,createNodeIterator:Q,createDocumentFragment:ve,getElementsByTagName:se}=i,{importNode:K}=r;let J={};t.isSupported=typeof fP=="function"&&typeof U=="function"&&ee&&ee.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:W,ERB_EXPR:te,TMPLIT_EXPR:j,DATA_ATTR:re,ARIA_ATTR:Te,IS_SCRIPT_OR_DATA:ye,ATTR_WHITESPACE:Ve}=N2;let{IS_ALLOWED_URI:Ue}=N2,Qe=null;const It=ui({},[...R2,...nb,...ib,...rb,...F2]);let vt=null;const it=ui({},[...$2,...sb,...z2,...mv]);let Ge=Object.seal(pP(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ot=null,Ct=null,wt=!0,Xe=!0,Dt=!1,Tt=!0,Nt=!1,dn=!1,Sn=!1,me=!1,Ie=!1,at=!1,Z=!1,he=!0,$e=!1;const et="user-content-";let Se=!0,mt=!1,gt={},At=null;const Ft=ui({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Kt=null;const an=ui({},["audio","video","img","source","image","track"]);let Pn=null;const jn=ui({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),tt="http://www.w3.org/1998/Math/MathML",nt="http://www.w3.org/2000/svg",ut="http://www.w3.org/1999/xhtml";let qe=ut,Qt=!1,Zt=null;const Cn=ui({},[tt,nt,ut],tb);let xn=null;const Mt=["application/xhtml+xml","text/html"],Ht="text/html";let _t=null,cn=null;const zn=i.createElement("form"),Vt=function(We){return We instanceof RegExp||We instanceof Function},li=function(){let We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(cn&&cn===We)){if((!We||typeof We!="object")&&(We={}),We=bu(We),xn=Mt.indexOf(We.PARSER_MEDIA_TYPE)===-1?Ht:We.PARSER_MEDIA_TYPE,_t=xn==="application/xhtml+xml"?tb:Rv,Qe="ALLOWED_TAGS"in We?ui({},We.ALLOWED_TAGS,_t):It,vt="ALLOWED_ATTR"in We?ui({},We.ALLOWED_ATTR,_t):it,Zt="ALLOWED_NAMESPACES"in We?ui({},We.ALLOWED_NAMESPACES,tb):Cn,Pn="ADD_URI_SAFE_ATTR"in We?ui(bu(jn),We.ADD_URI_SAFE_ATTR,_t):jn,Kt="ADD_DATA_URI_TAGS"in We?ui(bu(an),We.ADD_DATA_URI_TAGS,_t):an,At="FORBID_CONTENTS"in We?ui({},We.FORBID_CONTENTS,_t):Ft,ot="FORBID_TAGS"in We?ui({},We.FORBID_TAGS,_t):{},Ct="FORBID_ATTR"in We?ui({},We.FORBID_ATTR,_t):{},gt="USE_PROFILES"in We?We.USE_PROFILES:!1,wt=We.ALLOW_ARIA_ATTR!==!1,Xe=We.ALLOW_DATA_ATTR!==!1,Dt=We.ALLOW_UNKNOWN_PROTOCOLS||!1,Tt=We.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Nt=We.SAFE_FOR_TEMPLATES||!1,dn=We.WHOLE_DOCUMENT||!1,Ie=We.RETURN_DOM||!1,at=We.RETURN_DOM_FRAGMENT||!1,Z=We.RETURN_TRUSTED_TYPE||!1,me=We.FORCE_BODY||!1,he=We.SANITIZE_DOM!==!1,$e=We.SANITIZE_NAMED_PROPS||!1,Se=We.KEEP_CONTENT!==!1,mt=We.IN_PLACE||!1,Ue=We.ALLOWED_URI_REGEXP||mP,qe=We.NAMESPACE||ut,Ge=We.CUSTOM_ELEMENT_HANDLING||{},We.CUSTOM_ELEMENT_HANDLING&&Vt(We.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ge.tagNameCheck=We.CUSTOM_ELEMENT_HANDLING.tagNameCheck),We.CUSTOM_ELEMENT_HANDLING&&Vt(We.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ge.attributeNameCheck=We.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),We.CUSTOM_ELEMENT_HANDLING&&typeof We.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ge.allowCustomizedBuiltInElements=We.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Nt&&(Xe=!1),at&&(Ie=!0),gt&&(Qe=ui({},F2),vt=[],gt.html===!0&&(ui(Qe,R2),ui(vt,$2)),gt.svg===!0&&(ui(Qe,nb),ui(vt,sb),ui(vt,mv)),gt.svgFilters===!0&&(ui(Qe,ib),ui(vt,sb),ui(vt,mv)),gt.mathMl===!0&&(ui(Qe,rb),ui(vt,z2),ui(vt,mv))),We.ADD_TAGS&&(Qe===It&&(Qe=bu(Qe)),ui(Qe,We.ADD_TAGS,_t)),We.ADD_ATTR&&(vt===it&&(vt=bu(vt)),ui(vt,We.ADD_ATTR,_t)),We.ADD_URI_SAFE_ATTR&&ui(Pn,We.ADD_URI_SAFE_ATTR,_t),We.FORBID_CONTENTS&&(At===Ft&&(At=bu(At)),ui(At,We.FORBID_CONTENTS,_t)),Se&&(Qe["#text"]=!0),dn&&ui(Qe,["html","head","body"]),Qe.table&&(ui(Qe,["tbody"]),delete ot.tbody),We.TRUSTED_TYPES_POLICY){if(typeof We.TRUSTED_TYPES_POLICY.createHTML!="function")throw lp('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof We.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw lp('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');H=We.TRUSTED_TYPES_POLICY,q=H.createHTML("")}else H===void 0&&(H=KW(I,s)),H!==null&&typeof q=="string"&&(q=H.createHTML(""));Os&&Os(We),cn=We}},Ee=ui({},["mi","mo","mn","ms","mtext"]),ne=ui({},["foreignobject","desc","title","annotation-xml"]),ae=ui({},["title","style","font","a","script"]),pe=ui({},[...nb,...ib,...NW]),Ae=ui({},[...rb,...BW]),ke=function(We){let kt=U(We);(!kt||!kt.tagName)&&(kt={namespaceURI:qe,tagName:"template"});const ft=Rv(We.tagName),Ne=Rv(kt.tagName);return Zt[We.namespaceURI]?We.namespaceURI===nt?kt.namespaceURI===ut?ft==="svg":kt.namespaceURI===tt?ft==="svg"&&(Ne==="annotation-xml"||Ee[Ne]):!!pe[ft]:We.namespaceURI===tt?kt.namespaceURI===ut?ft==="math":kt.namespaceURI===nt?ft==="math"&&ne[Ne]:!!Ae[ft]:We.namespaceURI===ut?kt.namespaceURI===nt&&!ne[Ne]||kt.namespaceURI===tt&&!Ee[Ne]?!1:!Ae[ft]&&(ae[ft]||!pe[ft]):!!(xn==="application/xhtml+xml"&&Zt[We.namespaceURI]):!1},Ke=function(We){ap(t.removed,{element:We});try{We.parentNode.removeChild(We)}catch{We.remove()}},Be=function(We,kt){try{ap(t.removed,{attribute:kt.getAttributeNode(We),from:kt})}catch{ap(t.removed,{attribute:null,from:kt})}if(kt.removeAttribute(We),We==="is"&&!vt[We])if(Ie||at)try{Ke(kt)}catch{}else try{kt.setAttribute(We,"")}catch{}},Oe=function(We){let kt=null,ft=null;if(me)We="<remove></remove>"+We;else{const zt=OW(We,/^[\r\n\t ]+/);ft=zt&&zt[0]}xn==="application/xhtml+xml"&&qe===ut&&(We='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+We+"</body></html>");const Ne=H?H.createHTML(We):We;if(qe===ut)try{kt=new C().parseFromString(Ne,xn)}catch{}if(!kt||!kt.documentElement){kt=ee.createDocument(qe,"template",null);try{kt.documentElement.innerHTML=Qt?q:Ne}catch{}}const bt=kt.body||kt.documentElement;return We&&ft&&bt.insertBefore(i.createTextNode(ft),bt.childNodes[0]||null),qe===ut?se.call(kt,dn?"html":"body")[0]:dn?kt.documentElement:bt},He=function(We){return Q.call(We.ownerDocument||We,We,g.SHOW_ELEMENT|g.SHOW_COMMENT|g.SHOW_TEXT,null)},yt=function(We){return We instanceof x&&(typeof We.nodeName!="string"||typeof We.textContent!="string"||typeof We.removeChild!="function"||!(We.attributes instanceof y)||typeof We.removeAttribute!="function"||typeof We.setAttribute!="function"||typeof We.namespaceURI!="string"||typeof We.insertBefore!="function"||typeof We.hasChildNodes!="function")},Et=function(We){return typeof l=="function"&&We instanceof l},St=function(We,kt,ft){J[We]&&fv(J[We],Ne=>{Ne.call(t,kt,ft,cn)})},yn=function(We){let kt=null;if(St("beforeSanitizeElements",We,null),yt(We))return Ke(We),!0;const ft=_t(We.nodeName);if(St("uponSanitizeElement",We,{tagName:ft,allowedTags:Qe}),We.hasChildNodes()&&!Et(We.firstElementChild)&&aa(/<[/\w]/g,We.innerHTML)&&aa(/<[/\w]/g,We.textContent))return Ke(We),!0;if(!Qe[ft]||ot[ft]){if(!ot[ft]&&nn(ft)&&(Ge.tagNameCheck instanceof RegExp&&aa(Ge.tagNameCheck,ft)||Ge.tagNameCheck instanceof Function&&Ge.tagNameCheck(ft)))return!1;if(Se&&!At[ft]){const Ne=U(We)||We.parentNode,bt=z(We)||We.childNodes;if(bt&&Ne){const zt=bt.length;for(let Tn=zt-1;Tn>=0;--Tn)Ne.insertBefore(O(bt[Tn],!0),F(We))}}return Ke(We),!0}return We instanceof m&&!ke(We)||(ft==="noscript"||ft==="noembed"||ft==="noframes")&&aa(/<\/no(script|embed|frames)/i,We.innerHTML)?(Ke(We),!0):(Nt&&We.nodeType===3&&(kt=We.textContent,fv([W,te,j],Ne=>{kt=op(kt,Ne," ")}),We.textContent!==kt&&(ap(t.removed,{element:We.cloneNode()}),We.textContent=kt)),St("afterSanitizeElements",We,null),!1)},In=function(We,kt,ft){if(he&&(kt==="id"||kt==="name")&&(ft in i||ft in zn))return!1;if(!(Xe&&!Ct[kt]&&aa(re,kt))){if(!(wt&&aa(Te,kt))){if(!vt[kt]||Ct[kt]){if(!(nn(We)&&(Ge.tagNameCheck instanceof RegExp&&aa(Ge.tagNameCheck,We)||Ge.tagNameCheck instanceof Function&&Ge.tagNameCheck(We))&&(Ge.attributeNameCheck instanceof RegExp&&aa(Ge.attributeNameCheck,kt)||Ge.attributeNameCheck instanceof Function&&Ge.attributeNameCheck(kt))||kt==="is"&&Ge.allowCustomizedBuiltInElements&&(Ge.tagNameCheck instanceof RegExp&&aa(Ge.tagNameCheck,ft)||Ge.tagNameCheck instanceof Function&&Ge.tagNameCheck(ft))))return!1}else if(!Pn[kt]){if(!aa(Ue,op(ft,Ve,""))){if(!((kt==="src"||kt==="xlink:href"||kt==="href")&&We!=="script"&&RW(ft,"data:")===0&&Kt[We])){if(!(Dt&&!aa(ye,op(ft,Ve,"")))){if(ft)return!1}}}}}}return!0},nn=function(We){return We.indexOf("-")>0},bn=function(We){St("beforeSanitizeAttributes",We,null);const{attributes:kt}=We;if(!kt)return;const ft={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:vt};let Ne=kt.length;for(;Ne--;){const bt=kt[Ne],{name:zt,namespaceURI:Tn,value:ci}=bt,Fi=_t(zt);let Qn=zt==="value"?ci:FW(ci);if(ft.attrName=Fi,ft.attrValue=Qn,ft.keepAttr=!0,ft.forceKeepAttr=void 0,St("uponSanitizeAttribute",We,ft),Qn=ft.attrValue,ft.forceKeepAttr||(Be(zt,We),!ft.keepAttr))continue;if(!Tt&&aa(/\/>/i,Qn)){Be(zt,We);continue}Nt&&fv([W,te,j],Gi=>{Qn=op(Qn,Gi," ")});const ns=_t(We.nodeName);if(In(ns,Fi,Qn)){if($e&&(Fi==="id"||Fi==="name")&&(Be(zt,We),Qn=et+Qn),H&&typeof I=="object"&&typeof I.getAttributeType=="function"&&!Tn)switch(I.getAttributeType(ns,Fi)){case"TrustedHTML":{Qn=H.createHTML(Qn);break}case"TrustedScriptURL":{Qn=H.createScriptURL(Qn);break}}try{Tn?We.setAttributeNS(Tn,zt,Qn):We.setAttribute(zt,Qn),O2(t.removed)}catch{}}}St("afterSanitizeAttributes",We,null)},Rn=function Wt(We){let kt=null;const ft=He(We);for(St("beforeSanitizeShadowDOM",We,null);kt=ft.nextNode();)St("uponSanitizeShadowNode",kt,null),!yn(kt)&&(kt.content instanceof c&&Wt(kt.content),bn(kt));St("afterSanitizeShadowDOM",We,null)};return t.sanitize=function(Wt){let We=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},kt=null,ft=null,Ne=null,bt=null;if(Qt=!Wt,Qt&&(Wt="<!-->"),typeof Wt!="string"&&!Et(Wt))if(typeof Wt.toString=="function"){if(Wt=Wt.toString(),typeof Wt!="string")throw lp("dirty is not a string, aborting")}else throw lp("toString is not a function");if(!t.isSupported)return Wt;if(Sn||li(We),t.removed=[],typeof Wt=="string"&&(mt=!1),mt){if(Wt.nodeName){const ci=_t(Wt.nodeName);if(!Qe[ci]||ot[ci])throw lp("root node is forbidden and cannot be sanitized in-place")}}else if(Wt instanceof l)kt=Oe("<!---->"),ft=kt.ownerDocument.importNode(Wt,!0),ft.nodeType===1&&ft.nodeName==="BODY"||ft.nodeName==="HTML"?kt=ft:kt.appendChild(ft);else{if(!Ie&&!Nt&&!dn&&Wt.indexOf("<")===-1)return H&&Z?H.createHTML(Wt):Wt;if(kt=Oe(Wt),!kt)return Ie?null:Z?q:""}kt&&me&&Ke(kt.firstChild);const zt=He(mt?Wt:kt);for(;Ne=zt.nextNode();)yn(Ne)||(Ne.content instanceof c&&Rn(Ne.content),bn(Ne));if(mt)return Wt;if(Ie){if(at)for(bt=ve.call(kt.ownerDocument);kt.firstChild;)bt.appendChild(kt.firstChild);else bt=kt;return(vt.shadowroot||vt.shadowrootmode)&&(bt=K.call(r,bt,!0)),bt}let Tn=dn?kt.outerHTML:kt.innerHTML;return dn&&Qe["!doctype"]&&kt.ownerDocument&&kt.ownerDocument.doctype&&kt.ownerDocument.doctype.name&&aa(gP,kt.ownerDocument.doctype.name)&&(Tn="<!DOCTYPE "+kt.ownerDocument.doctype.name+`>
`+Tn),Nt&&fv([W,te,j],ci=>{Tn=op(Tn,ci," ")}),H&&Z?H.createHTML(Tn):Tn},t.setConfig=function(){let Wt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};li(Wt),Sn=!0},t.clearConfig=function(){cn=null,Sn=!1},t.isValidAttribute=function(Wt,We,kt){cn||li({});const ft=_t(Wt),Ne=_t(We);return In(ft,Ne,kt)},t.addHook=function(Wt,We){typeof We=="function"&&(J[Wt]=J[Wt]||[],ap(J[Wt],We))},t.removeHook=function(Wt){if(J[Wt])return O2(J[Wt])},t.removeHooks=function(Wt){J[Wt]&&(J[Wt]=[])},t.removeAllHooks=function(){J={}},t}var XW=vP();const YW=["innerHTML"],qo=lt({__name:"SanitizedHTML",props:{html:{},removeInlineStyles:{type:Boolean,default:!1},addTags:{default:()=>[]}},setup(e){var s;const t=e,i={FORBID_ATTR:t.removeInlineStyles?["style"]:[],ADD_TAGS:["iframe",...t.addTags],FORCE_BODY:(s=t.addTags)==null?void 0:s.includes("style")},r=De(()=>XW.sanitize(t.html,i));return(c,d)=>(B(),fe("div",{innerHTML:r.value},null,8,YW))}});function JW(e){const{overflowY:t,overflowX:i}=getComputedStyle(e);return!t.includes("hidden")&&!t.includes("visible")&&!i.includes("hidden")&&!i.includes("visible")&&e.scrollHeight>=e.clientHeight}function _P(e){return!e||!(e instanceof HTMLElement)?document.body:JW(e)?e:_P(e.parentNode)??document.body}const QW=["src","alt"],eq={key:1,class:"lazy-load-image__placeholder bg-neutral-200 border-neutral-300 text-neutral-400 absolute inset-0 z-10 flex items-center justify-center border"},tq=lt({__name:"LazyLoadImage",props:{src:{},alt:{}},setup(e){const t=Fe(null),i=Fe(!1),r=Fe(!1);function s(c,d){c.forEach(l=>{l.isIntersecting&&(i.value=!0,d.unobserve(l.target))})}return Fn(()=>{const c={root:_P(t.value),rootMargin:"640px",threshold:0};GN(t,s,c)}),(c,d)=>(B(),fe("div",{ref_key:"imgContainer",ref:t,class:"lazy-load-image relative"},[i.value?(B(),fe("img",Hr({key:0,class:["lazy-load-image__image bg-neutral-100 block transition-opacity opacity-0",{"opacity-100":r.value}],src:c.src,alt:c.alt??""},c.$attrs,{onLoad:d[0]||(d[0]=l=>r.value=!0)}),null,16,QW)):st("",!0),r.value?st("",!0):(B(),fe("div",eq,[_e(tw)]))],512))}});const td=ln(tq,[["__scopeId","data-v-83ff1a5e"]]),nq={key:0,class:"media-card flex flex-col overflow-hidden rounded-md shadow-sm max-w-xs group-hover:border-blue-700"},iq={class:"placeholder-image aspect-video flex items-center justify-center w-full overflow-hidden bg-transparent-black-200 p-4"},rq={class:"flex-1 p-4 flex justify-between items-center"},sq={class:"search-result-card__title font-bold leading-tight group-hover:text-blue-700 text-center"},aq=lt({__name:"FeaturedAssetCard",props:{assetId:{}},setup(e){const t=e,i=Fe(null);pn(()=>t.assetId,async()=>{i.value=await Un.getAsset(t.assetId)},{immediate:!0});const r=De(()=>i.value?Xu(i.value):""),s=De(()=>{var d;const c=((d=i.value)==null?void 0:d.firstFileHandlerId)??null;return c?Nc(c):null});return(c,d)=>(B(),ze(ts,{to:le(Cl)(c.assetId),class:"featured-asset-card group hover:no-underline relative"},{default:Ce(()=>[_e(Cr,{name:"fade"},{default:Ce(()=>[i.value?(B(),fe("article",nq,[ue("div",iq,[s.value?(B(),ze(td,{key:0,src:s.value,alt:r.value||"Untitled",loading:"lazy",class:"object-contain w-full h-full !bg-transparent"},null,8,["src","alt"])):(B(),ze(le(em),{key:1}))]),ue("div",rq,[ue("h1",sq,[_e(qo,{html:r.value},null,8,["html"])]),_e(le(Qu),{class:"group-hover:text-blue-700"})])])):st("",!0)]),_:1})]),_:1},8,["to"]))}});const oq=ln(aq,[["__scopeId","data-v-1bd7c89c"]]),lq={key:0,class:"app-footer bg-transparent-black-100"},cq=lt({__name:"AppFooter",setup(e){const t=bi();return(i,r)=>le(t).customFooter?(B(),fe("footer",lq,[_e(qo,{html:le(t).customFooter,addTags:["style"]},null,8,["html"])])):st("",!0)}});const yP=ln(cq,[["__scopeId","data-v-63de6cc8"]]),uq={class:"custom-app-header bg-transparent-black-100"},Ll=lt({__name:"CustomAppHeader",setup(e){const t=bi();return(i,r)=>{var s;return B(),fe("div",uq,[_e(qo,{html:((s=le(t))==null?void 0:s.customHeader)??"",addTags:["style","link"]},null,8,["html"])])}}}),bP=e=>(ja("data-v-97d63d01"),e=e(),Va(),e),dq={class:"page-content-block col-span-2 p-4 lg:p-8"},hq={key:1,class:"bg-white p-8 my-8 shadow-sm"},fq={class:"text-4xl text-center font-bold"},pq={key:0,class:"featured-asset-block col-span-1 p-4 lg:p-8"},mq=bP(()=>ue("h2",{class:"text-sm font-bold uppercase mb-2"},"Featured",-1)),gq={class:"mb-4"},vq=bP(()=>ue("p",null," Your account does not have permission to search and browse assets. Please contact your administrator if you believe this is an error. ",-1)),_q=lt({__name:"HomePage",setup(e){const t=Fe(null),i=bi(),r=De(()=>{var C;return((C=i.instance)==null?void 0:C.userCanSearchAndBrowse)??!1}),s=De(()=>i.isReady),c={title:"No Home Page",content:"<p>Update your instance to set a Home Page</p>"},d=De(()=>{var C;return((C=i.instance)==null?void 0:C.featuredAssetId)??null}),l=De(()=>{var C;return((C=i.instance)==null?void 0:C.featuredAssetText)??""}),m=Fe(null);function g(){var C;return(C=i.pages.find(I=>I.title==="Home Page"))==null?void 0:C.id}async function y(C){return C?Un.getStaticPage(C):c}async function x(C){return C?Un.getAsset(C):null}return pn(()=>i.fetchStatus,async()=>{if(i.fetchStatus!=="success"||!r.value)return;const C=g();t.value=await y(C),m.value=await x(d.value)},{immediate:!0}),(C,I)=>(B(),ze(yo,{class:"home-page"},{"custom-header":Ce(()=>[le(i).customHeaderMode>0?(B(),ze(Ll,{key:0})):st("",!0)]),footer:Ce(()=>[_e(yP)]),default:Ce(()=>[s.value&&!r.value&&!le(i).isLoggedIn?(B(),ze(sk,{key:0,class:"my-8 mx-4"})):st("",!0),s.value&&r.value?(B(),fe("div",{key:1,class:Mn(["home-page-content flex-1 md:grid max-w-screen-xl w-full mx-auto md:grid-rows-1",{"md:grid-cols-2":!d.value,"md:grid-cols-3":d.value}])},[ue("article",dq,[t.value?(B(),ze(Cr,{key:0,name:"fade"},{default:Ce(()=>{var A;return[t.value.content?(B(),ze(qo,{key:0,html:t.value.content,class:Mn(["prose prose-neutral",{"mx-auto":!d.value}])},null,8,["html","class"])):(B(),fe("section",hq,[ue("h1",fq,xt(((A=le(i).instance)==null?void 0:A.name)??"Elevator"),1)]))]}),_:1})):st("",!0)]),d.value?(B(),fe("aside",pq,[mq,ue("div",gq,[_e(qo,{html:l.value},null,8,["html"])]),_e(oq,{assetId:d.value},null,8,["assetId"])])):st("",!0)],2)):s.value&&!r.value&&le(i).isLoggedIn?(B(),ze(Im,{key:2,title:"Nothing to See Here",class:"my-8 mx-4"},{default:Ce(()=>[vq]),_:1})):st("",!0)]),_:1}))}});const yq=ln(_q,[["__scopeId","data-v-97d63d01"]]),bq={class:"no-scroll-layout h-screen flex flex-col"},xq={ref:"contentContainer",class:"flex-1 mt-18 md:mt-0 overflow-auto"},xP=lt({__name:"NoScrollLayout",setup(e){const t=bi();return(i,r)=>(B(),fe("div",bq,[le(t).customHeaderMode==1?(B(),ze(Ll,{key:0})):st("",!0),_e(hP,{class:"top-0 w-full z-20 backdrop-blur-sm"},{default:Ce(()=>[En(i.$slots,"secondaryAppHeader")]),_:3}),ue("div",xq,[En(i.$slots,"default")],512)]))}}),wq={class:"object-viewer relative flex flex-col"},Sq=ue("h2",{class:"sr-only"},"Object Viewer",-1),Tq=["src"],Eq={key:1,class:"w-full h-full min-h-[20rem] bg-neutral-400 place-items-center p-8"},Cq=ue("p",null,"No asset file found.",-1),Iq={class:"text-sm"},wP=lt({__name:"ObjectViewer",props:{fileHandlerId:{}},setup(e){return(t,i)=>(B(),fe("section",wq,[Sq,t.fileHandlerId?(B(),fe("iframe",{key:0,class:"object-viewer__iframe w-full flex-1",src:`${le(Zn).instance.base.url}/asset/getEmbed/${t.fileHandlerId}`,frameBorder:"0",allowfullscreen:"true"},null,8,Tq)):(B(),fe("div",Eq,[Cq,ue("code",Iq,"FileHandlerId: "+xt(t.fileHandlerId??"null"),1)]))]))}}),Aq=["title"],Mq=["innerHTML"],SP=lt({__name:"PanelLabel",props:{label:{}},setup(e){return(t,i)=>(B(),fe("h1",{class:"panel__panel-label font-bold relative text-left",title:t.label},[ue("span",{class:"min-w-0 block",innerHTML:t.label},null,8,Mq)],8,Aq))}}),kq={class:"panel flex flex-col overflow-auto"},Pq=["disabled"],Dq={key:0},Lq={class:"panel__header-utils"},Oq={class:"panel__body flex flex-col gap-6 px-4 md:p-8 flex-1"},Rq=lt({__name:"Panel",props:{label:{},isOpen:{type:Boolean,default:!0},showToggle:{type:Boolean,default:!0}},emits:["toggle"],setup(e){return(t,i)=>(B(),fe("section",kq,[ue("header",{class:Mn(["panel__header flex items-center sticky top-0 left-0 justify-between z-10 backdrop-blur-[2px]",{"h-full":!t.isOpen}])},[ue("button",{disabled:!t.showToggle,class:"flex items-center p-4 leading-tight gap-4 flex-1",onClick:i[0]||(i[0]=r=>t.$emit("toggle"))},[t.showToggle?(B(),fe("span",Dq,[t.isOpen?(B(),ze(Vh,{key:0,class:"w-5 h-5"})):st("",!0),t.isOpen?st("",!0):(B(),ze(iy,{key:1,class:"w-5 h-5"}))])):st("",!0),En(t.$slots,"header-label",{},()=>[_e(SP,{label:t.label,isOpen:t.isOpen},null,8,["label","isOpen"])],!0)],8,Pq),ue("div",Lq,[En(t.$slots,"header-utils",{},void 0,!0)])],2),vs(ue("div",Oq,[En(t.$slots,"default",{},void 0,!0)],512),[[_a,t.isOpen]])]))}});const TP=ln(Rq,[["__scopeId","data-v-a57c7f16"]]),Fq={class:"tuple__label"},$q={inheritAttrs:!1},zq=lt({...$q,__name:"Tuple",props:{label:{},variant:{default:"stacked"}},setup(e){return(t,i)=>(B(),fe("div",{class:Mn(["tuple",{"w-full":t.variant==="stacked","inline-flex items-baseline gap-2":t.variant==="inline"}])},[ue("div",Fq,[En(t.$slots,"label",{},()=>[ue("span",{class:Mn(["text-xs block uppercase leading-none mb-1 tracking-wide",{"font-bold":t.variant==="stacked","sr-only":t.variant==="value-only"}])},xt(t.label),3)],!0)]),ue("span",Hr({class:"tuple__value block"},t.$attrs),[En(t.$slots,"default",{},()=>[Ot(" - ")],!0)],16)],2))}});const hs=ln(zq,[["__scopeId","data-v-304b7d45"]]),Nq={key:0},Bq=["href"],jq={key:1},Dm=lt({__name:"ClickToSearchLink",props:{linkText:{},widget:{}},setup(e){const t=e,i=_o(),r=Pr(),s=De(()=>TM(t.linkText,t.widget));async function c(){r.reset();const d=await Un.getSearchIdForClickToSearch(t.linkText,t.widget);i.push(`/search/s/${d}`)}return(d,l)=>t.widget.clickToSearch?(B(),fe("span",Nq,[ue("a",{href:s.value,class:"click-to-search-link text-blue-600 hover:text-blue-700 hover:underline",onClick:Uo(c,["prevent"])},[En(d.$slots,"default",{isClickable:!0})],8,Bq)])):(B(),fe("span",jq,[En(d.$slots,"default",{isClickable:!1})]))}}),Vq=["innerHTML"],Uq=lt({__name:"TextWidget",props:{widget:{},contents:{}},setup(e){function t(i){return i.replace(/(<([^>]+)>)/gi,"")!=i?i:i.replace(/(https?:\/\/[a-zA-Z0-9\-_.:@!~*'(¥);/?&=+$,%#]+)/g,'<a href="$1" target="_blank">$1</a>')}return(i,r)=>(B(),fe("ul",null,[(B(!0),fe(Ut,null,$n(i.contents,(s,c)=>(B(),fe("li",{key:c},[_e(Dm,{widget:i.widget,linkText:s.fieldContents},{default:Ce(()=>[ue("span",{innerHTML:t(s.fieldContents)},null,8,Vq)]),_:2},1032,["widget","linkText"])]))),128))]))}}),Hq=["innerHTML"],Gq=lt({__name:"SelectItem",props:{selectValues:{},widget:{}},setup(e){const t=e,i=De(()=>typeof t.selectValues.fieldContents=="string"?[t.selectValues.fieldContents]:t.selectValues.fieldContents);function r(s){var c,d;return(c=t.widget.fieldData.selectGroup)!=null&&c.hasOwnProperty(s)?(d=t.widget.fieldData)==null?void 0:d.selectGroup[s]:s}return(s,c)=>(B(!0),fe(Ut,null,$n(i.value,(d,l)=>(B(),fe("li",{key:l},[_e(Dm,{widget:s.widget,linkText:r(d)},{default:Ce(()=>[ue("div",{innerHTML:r(d)},null,8,Hq)]),_:2},1032,["widget","linkText"])]))),128))}}),Wq=lt({__name:"SelectWidget",props:{widget:{},contents:{}},setup(e){return(t,i)=>(B(),fe("ul",null,[(B(!0),fe(Ut,null,$n(t.contents,(r,s)=>(B(),ze(Gq,{key:s,selectValues:r,widget:t.widget},null,8,["selectValues","widget"]))),128))]))}}),qq=lt({__name:"CheckBoxWidget",props:{widget:{},contents:{}},setup(e){return(t,i)=>(B(),fe("ul",null,[(B(!0),fe(Ut,null,$n(t.contents,(r,s)=>(B(),fe("li",{key:s},[r.fieldContents==!0?(B(),ze(nk,{key:0})):(B(),ze(a8,{key:1}))]))),128))]))}});/**
  shave - Shave is a javascript plugin that truncates multi-line text within a html element based on set max height
  @version v5.0.4
  @link https://github.com/yowainwright/shave#readme
  @author Jeff Wainwright <yowainwright@gmail.com> (jeffry.in)
  @license MIT
**/function B2(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),s,c=[],d;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)c.push(s.value)}catch(l){d={error:l}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(d)throw d.error}}return c}function j2(e,t,i){if(i||arguments.length===2)for(var r=0,s=t.length,c;r<s;r++)(c||!(r in t))&&(c||(c=Array.prototype.slice.call(t,0,r)),c[r]=t[r]);return e.concat(c||Array.prototype.slice.call(t))}function Zq(e){return typeof e=="string"?j2([],B2(document.querySelectorAll(e)),!1):"length"in e?j2([],B2(e),!1):[e]}function Kq(e,t,i){if(i===void 0&&(i={}),typeof t>"u"||isNaN(t))throw Error("maxHeight is required");var r=Zq(e);if(r.length)for(var s=i.character,c=s===void 0?"…":s,d=i.classname,l=d===void 0?"js-shave":d,m=i.spaces,g=m===void 0?!0:m,y=i.charclassname,x=y===void 0?"js-shave-char":y,C=i.link,I=C===void 0?{}:C,A=typeof g=="boolean"?g:!0,O=I&&JSON.stringify(I)!=="{}"&&I.href,F=O?"a":"span",z=0;z<r.length;z+=1){var U=r[z],H=U.style,q=U.querySelector("."+l),ee=U.textContent===void 0?"innerText":"textContent";q&&(U.removeChild(U.querySelector("."+x)),U[ee]=U[ee]);var Q=U[ee],ve=A?Q.split(" "):Q;if(!(ve.length<2)){var se=H.height;H.height="auto";var K=H.maxHeight;if(H.maxHeight="none",U.offsetHeight<=t){H.height=se,H.maxHeight=K;continue}var J=O&&I.textContent?I.textContent:c,W=document.createElement(F),te={className:x,textContent:J};for(var j in te)W[j]=te[j],W.textContent=c;if(O)for(var re in I)W[re]=I[re];for(var Te=ve.length-1,ye=0,Ve=void 0;ye<Te;){Ve=ye+Te+1>>1;var Ue=ve.slice(0,Ve);U[ee]=A?Ue.join(" "):Ue,U.insertAdjacentElement("beforeend",W),U.offsetHeight>t?Te=Ve-1:ye=Ve}var Qe=ve.slice(0,Te);U[ee]=A?Qe.join(" "):Qe,U.insertAdjacentElement("beforeend",W);var It=ve.slice(Te),vt=A?" "+It.join(" "):It,it=document.createTextNode(vt),Ge=document.createElement("span");Ge.classList.add(l),Ge.style.display="none",Ge.appendChild(it),U.insertAdjacentElement("beforeend",Ge),H.height=se,H.maxHeight=K}}}const Xq=["innerHTML"],Yq=["innerHTML"],Jq=lt({__name:"TextAreaItem",props:{fieldContents:{},widget:{},textTruncationHeight:{default:Zn.instance.textAreaItem.defaultTextTruncationHeight}},setup(e){const t=e,i=Fe(!1),r=Fe(null),s=Fe(!1),c=RM(()=>{d()},50);function d(){r.value&&(Kq([r.value],t.textTruncationHeight),s.value=r.value.querySelector(".js-shave")!==null)}return Q_(r,c),Fn(()=>{d()}),(l,m)=>(B(),fe(Ut,null,[i.value?st("",!0):(B(),fe("div",{key:0,ref_key:"truncateText",ref:r,innerHTML:l.fieldContents},null,8,Xq)),i.value?(B(),fe("div",{key:1,innerHTML:l.fieldContents},null,8,Yq)):st("",!0),s.value?(B(),fe("button",{key:2,class:"flex items-center uppercase text-xs text-blue-600",onClick:m[0]||(m[0]=g=>i.value=!i.value)},[Ot(" Show "+xt(i.value?"Less":"More")+" ",1),i.value?(B(),ze(iy,{key:0})):(B(),ze(Vh,{key:1}))])):st("",!0)],64))}}),Qq={class:"text-area-widget flex flex-col gap-4"},eZ=lt({__name:"TextAreaWidget",props:{widget:{},contents:{}},setup(e){return(t,i)=>(B(),fe("ul",Qq,[(B(!0),fe(Ut,null,$n(t.contents,(r,s)=>(B(),fe("li",{key:s},[_e(Jq,{widget:t.widget,fieldContents:r.fieldContents??""},null,8,["widget","fieldContents"])]))),128))]))}}),tZ=lt({__name:"DateWidgetItem",props:{dateContent:{},widget:{}},setup(e){const t=e,i=De(()=>{let r="";return r+=t.dateContent.start.text,t.dateContent.range&&(r+=" - "+t.dateContent.end.text),r});return(r,s)=>(B(),ze(Dm,{widget:r.widget,linkText:i.value},{default:Ce(()=>[r.dateContent.label?(B(),ze(hs,{key:0,label:r.dateContent.label,variant:"inline"},{default:Ce(()=>[Ot(xt(i.value),1)]),_:1},8,["label"])):(B(),fe(Ut,{key:1},[Ot(xt(i.value),1)],64))]),_:1},8,["widget","linkText"]))}}),nZ=lt({__name:"DateWidget",props:{widget:{},contents:{}},setup(e){return(t,i)=>(B(),fe("ul",null,[(B(!0),fe(Ut,null,$n(t.contents,(r,s)=>(B(),fe("li",{key:s},[_e(tZ,{dateContent:r,widget:t.widget},null,8,["dateContent","widget"])]))),128))]))}}),EP=(e,t)=>{let i=[];for(const r in e)t||i.push(r),typeof e[r]=="object"&&(i=i.concat(EP(e[r],!t)));return i.flat()},iZ=e=>e.filter((t,i,r)=>r.indexOf(t)===i),rZ={key:0},sZ=lt({__name:"MultiSelectItem",props:{widget:{},content:{}},setup(e){const t=e,i=De(()=>iZ(EP(t.widget.fieldData,!1)).map(r)),r=c=>c.replace(/[^a-zA-Z0-9]+/,""),s=c=>{const d=[];for(const l of i.value)if(d.push(t.content.fieldContents[l]),l==c)return d.join(" : ");return d.join(" : ")};return(c,d)=>(B(),fe("ul",null,[(B(!0),fe(Ut,null,$n(i.value,l=>(B(),fe(Ut,{key:l},[c.content.fieldContents[l]?(B(),fe("li",rZ,[_e(Dm,{widget:c.widget,linkText:s(l)},{default:Ce(()=>[Ot(xt(c.content.fieldContents[l]),1)]),_:2},1032,["widget","linkText"])])):st("",!0)],64))),128))]))}});const aZ=ln(sZ,[["__scopeId","data-v-34a7054d"]]),oZ=lt({__name:"MultiSelectWidget",props:{widget:{},contents:{}},setup(e){return(t,i)=>(B(),fe("ul",null,[(B(!0),fe(Ut,null,$n(t.contents,(r,s)=>(B(),fe("li",{key:s},[_e(aZ,{widget:t.widget,content:r},null,8,["widget","content"])]))),128))]))}}),lZ={class:"modal-contents__header flex justify-between items-start p-4 md:p-8"},cZ={class:"flex-1 font-bold text-2xl mr-12 flex items-center"},uZ={class:"modal-contents__body flex-1 overflow-auto p-4 md:p-8"},dZ={key:0,class:"modal-contents__footer"},hZ=lt({__name:"Modal",props:{label:{default:""},isOpen:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:t}){const i=e,r=t,s=Fe();function c(d){i.isOpen&&d.keyCode===27&&r("close")}return Fn(()=>{document.addEventListener("keydown",c)}),Hi(()=>document.removeEventListener("keydown",c)),ki(iP,De(()=>i.isOpen)),(d,l)=>(B(),ze(_m,{to:"body"},[ue("div",{ref_key:"modal",ref:s,class:Mn({"modal flex bg-transparent-black-700 fixed inset-0 z-50 justify-center items-center p-4":d.isOpen,hidden:!d.isOpen}),onClick:l[1]||(l[1]=Uo(m=>d.$emit("close"),["self"]))},[ue("div",Hr({class:"modal-contents shadow-lg relative rounded-2xl flex flex-col overflow-hidden max-w-[60rem] max-h-[90vh] m-auto w-full"},d.$attrs),[_e(ak,{class:"absolute right-4 top-4 md:top-8 md:right-8",onClick:l[0]||(l[0]=m=>d.$emit("close"))}),ue("header",lZ,[ue("h2",cZ,[En(d.$slots,"label",{},()=>[Ot(xt(d.label),1)],!0)])]),ue("div",uZ,[En(d.$slots,"default",{},void 0,!0)]),d.$slots.footer?(B(),fe("div",dZ,[En(d.$slots,"footer",{},void 0,!0)])):st("",!0)],16)],2)]))}});const Vc=ln(hZ,[["__scopeId","data-v-035831a8"]]),fZ={class:"accordion w-full mt-2 overflow-hidden rounded"},pZ=["label"],mZ={class:"place-items-center flex p-4"},gZ={key:0,class:"accordion__body flex flex-col gap-4 px-4 pt-2 pb-4 border-t"},vZ=lt({__name:"Accordion",props:{label:{default:"-"}},emits:["toggle","open"],setup(e,{emit:t}){const i=t,r=Fe(!1);function s(){r.value=!r.value,i("toggle"),r.value&&i("open")}return(c,d)=>(B(),fe("div",fZ,[ue("button",{class:"accordion__header flex items-center justify-between w-full gap-2 border-none rounded-b-none",label:r.value?"close":"open",onClick:s},[En(c.$slots,"label",{},()=>[ue("span",{class:Mn(["flex-1 block p-4 text-left",{"font-bold ":r.value,"font-normal":!r.value}])},xt(le(ho)(c.label)),3)],!0),ue("div",mZ,[En(c.$slots,"label-icon",{},()=>[r.value?(B(),ze(iy,{key:0,class:"w-5 h-5"})):(B(),ze(Vh,{key:1,class:"w-5 h-5"}))],!0)])],8,pZ),r.value?(B(),fe("div",gZ,[En(c.$slots,"default",{},void 0,!0)])):st("",!0)]))}});const CP=ln(vZ,[["__scopeId","data-v-fc17cd65"]]),_Z={key:0,class:"flex gap-4 p-4 pr-0 flex-wrap"},yZ={key:1,class:"p-4"},bZ={key:0,class:"w-min flex gap-4 my-4"},xZ={class:"w-min flex gap-4 my-4"},wZ=lt({__name:"LocationItem",props:{locationContent:{},widget:{}},setup(e){const t=Ic(()=>oo(()=>Promise.resolve().then(()=>vw),void 0)),i=Ic(()=>oo(()=>import("./MapMarker-d1c12f0b.js"),[])),r=e,s=De(()=>{var C,I;return((I=(C=r.locationContent.loc)==null?void 0:C.coordinates)==null?void 0:I[1])??0}),c=De(()=>{var C,I;return((I=(C=r.locationContent.loc)==null?void 0:C.coordinates)==null?void 0:I[0])??0}),d=De(()=>c.value?c.value.toFixed(4):"-"),l=De(()=>s.value?s.value.toFixed(4):"-"),m=De(()=>({lng:c.value,lat:s.value})),g=De(()=>(r.locationContent.locationLabel||r.locationContent.address)??null),y=De(()=>c.value!==0&&s.value!==0),x=Fe(!1);return(C,I)=>(B(),fe(Ut,null,[_e(CP,null,{label:Ce(()=>[g.value?(B(),fe("span",yZ,xt(g.value),1)):(B(),fe("div",_Z,[_e(hs,{label:"Lat",class:"w-auto",variant:"inline"},{default:Ce(()=>[Ot(xt(l.value),1)]),_:1}),_e(hs,{label:"Lng",class:"w-auto",variant:"inline"},{default:Ce(()=>[Ot(xt(d.value),1)]),_:1})]))]),default:Ce(()=>[g.value?(B(),fe("div",bZ,[_e(hs,{label:"Latitude",class:"w-auto"},{default:Ce(()=>[Ot(xt(l.value),1)]),_:1}),_e(hs,{label:"Longitude",class:"w-auto"},{default:Ce(()=>[Ot(xt(d.value),1)]),_:1})])):st("",!0),y.value?(B(),ze(oi,{key:1,icon:"map",iconPosition:"start",onClick:I[0]||(I[0]=A=>x.value=!0)},{default:Ce(()=>[Ot("Show Location")]),_:1})):st("",!0)]),_:1}),_e(Vc,{isOpen:x.value,label:g.value,onClose:I[1]||(I[1]=A=>x.value=!1)},{default:Ce(()=>[_e(le(t),{center:m.value,zoom:10,mapStyle:"streets",apiKey:le(Zn).arcgis.apiKey,class:"p-1 rounded",mapContainerClass:"!h-[50vh]"},{default:Ce(()=>[_e(le(i),{id:`locationItem-${g.value}`,lng:m.value.lng,lat:m.value.lat},null,8,["id","lng","lat"])]),_:1},8,["center","apiKey"]),ue("div",xZ,[_e(hs,{label:"Latitude",class:"w-auto"},{default:Ce(()=>[Ot(xt(l.value),1)]),_:1}),_e(hs,{label:"Longitude",class:"w-auto"},{default:Ce(()=>[Ot(xt(d.value),1)]),_:1})])]),_:1},8,["isOpen","label"])],64))}}),SZ=lt({__name:"LocationWidget",props:{widget:{},contents:{}},setup(e){return(t,i)=>(B(),fe("ul",null,[(B(!0),fe(Ut,null,$n(t.contents,(r,s)=>(B(),fe("li",{key:s},[_e(wZ,{widget:t.widget,locationContent:r},null,8,["widget","locationContent"])]))),128))]))}}),TZ={class:"thumbnail-image__icon absolute z-10 bg-transparent-white-500 rounded-full w-12 h-12 flex justify-center items-center backdrop-blur-sm top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 scale-0 group-hover:scale-100 transition-all"},EZ={key:0,class:"backdrop-blur-md bg-transparent-white-500 text-neutral-900 flex absolute bottom-1 right-1 z-10 rounded-full justify-center items-center p-1 w-6 h-6"},CZ=lt({__name:"ThumbnailImage",props:{src:{},alt:{},href:{default:void 0},fileType:{default:void 0}},setup(e){const t=e,i=["mp3","aiff","aif","m4a","wav","wave","wma"],r=["mov","mp4","m4v","mts","mkv","avi","mpeg","mpg","m2t","m2ts","dv","vob","mxf","wmv"],s=De(()=>t.fileType?r.includes(t.fileType.toLowerCase()):!1),c=De(()=>t.fileType?i.includes(t.fileType.toLowerCase()):!1);return(d,l)=>(B(),ze(zc(d.href?"a":"div"),{href:d.href,class:"thumbnail-image block rounded overflow-hidden w-24 aspect-square relative border border-transparent-black-200 shadow-sm group transition-all"},{default:Ce(()=>[ue("div",TZ,[_e(le(Qu),{class:"text-neutral-900"})]),_e(td,{src:d.src,alt:d.alt,class:"group-hover:scale-110 w-full h-full object-cover transition-all group-hover:opacity-100 opacity-80"},null,8,["src","alt"]),s.value||c.value?(B(),fe("div",EZ,[c.value?(B(),ze(le(M6),{key:0})):st("",!0),s.value?(B(),ze(le(oV),{key:1})):st("",!0)])):st("",!0),En(d.$slots,"default",{},void 0,!0)]),_:3},8,["href"]))}});const IP=ln(CZ,[["__scopeId","data-v-975e84a0"]]),IZ={class:"upload-widget flex gap-2 flex-wrap mt-2"},AZ=["title","onClick"],MZ=lt({__name:"UploadWidget",props:{widget:{},contents:{}},setup(e){const t=e,i=Ho(),r=g=>i.activeFileObjectId===g,s=De(()=>t.contents.findIndex(g=>r(g.fileId))),c=De(()=>s.value!==-1);function d(){const g=(s.value-1+t.contents.length)%t.contents.length;i.activeFileObjectId=t.contents[g].fileId}function l(){const g=(s.value+1)%t.contents.length;i.activeFileObjectId=t.contents[g].fileId}function m(g){if(c.value){if(g.key==="ArrowLeft")return d();if(g.key==="ArrowRight")return l()}}return Fn(()=>{t.contents.length<2||window.addEventListener("keydown",m)}),ta(()=>{window.removeEventListener("keydown",m)}),(g,y)=>(B(),fe("div",IZ,[(B(!0),fe(Ut,null,$n(g.contents,(x,C)=>(B(),fe("button",{key:C,title:x.fileDescription,class:Mn(["thumbnail-related-asset-widget flex flex-col rounded-md border border-transparent p-1 no-underline hover:no-underline hover:bg-blue-50 hover:text-blue-600 w-24 text-neutral-600",{"opacity-80 hover:opacity-100 hover:border-blue-600":!r(x.fileId),"ring ring-offset-1 ring-blue-600 hover:border-transparent opacity-100 bg-blue-50":r(x.fileId)}]),onClick:I=>le(i).activeFileObjectId=x.fileId},[_e(IP,{src:`${le(Zn).instance.base.url}/fileManager/tinyImageByFileId/${x.fileId}/true`,alt:x.fileDescription,fileType:x.fileType,class:"thumbnail-related-asset-widget__image max-w-full"},null,8,["src","alt","fileType"]),x.fileDescription?(B(),ze(qo,{key:0,class:"whitespace-nowrap text-xs mt-1 truncate overflow-hidden w-full text-center",html:x.fileDescription},null,8,["html"])):st("",!0)],10,AZ))),128))]))}}),kZ=lt({__name:"Chip",props:{href:{default:void 0}},setup(e){return(t,i)=>(B(),ze(zc(t.href?"a":"span"),{href:t.href,class:Mn(["chip inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-transparent-black-100 hover:no-underline no-underline text-neutral-700",{"chip--is-clickable border border-blue-700  bg-blue-100 text-blue-700 cursor-pointer hover:bg-blue-700 hover:text-white transition-colors ease-in-out":t.href}])},{default:Ce(()=>[En(t.$slots,"default",{},void 0,!0)]),_:3},8,["href","class"]))}});const v_=ln(kZ,[["__scopeId","data-v-f8a00a29"]]),PZ={class:"flex gap-2 flex-wrap"},DZ=lt({__name:"TagWidget",props:{widget:{},contents:{}},setup(e){return(t,i)=>(B(),fe("ul",null,[(B(!0),fe(Ut,null,$n(t.contents,(r,s)=>(B(),fe("li",{key:s},[ue("ul",PZ,[(B(!0),fe(Ut,null,$n(r.tags,(c,d)=>(B(),fe("li",{key:d},[_e(Dm,{linkText:c,widget:t.widget},{default:Ce(({isClickable:l})=>[_e(v_,{class:Mn({"chip--is-clickable border border-blue-700  bg-blue-100 text-blue-700 cursor-pointer hover:bg-blue-700 hover:text-white transition-colors ease-in-out":l})},{default:Ce(()=>[Ot(xt(c),1)]),_:2},1032,["class"])]),_:2},1032,["linkText","widget"])]))),128))])]))),128))]))}});function dy(e){var t;return((t=e==null?void 0:e.relatedAssetTitle)==null?void 0:t[0])??"(No Title)"}const LZ={class:"accordion-related-asset-widget-item w-full max-w-lg"},OZ={key:0,class:"flex items-center flex-1 w-full gap-4 py-2 pl-2 pr-4"},RZ=["src","alt"],FZ=lt({__name:"AccordionRelatedAssetWidgetItem",props:{assetId:{},assetCacheItem:{}},setup(e){const t=e,i=De(()=>dy(t.assetCacheItem));return(r,s)=>{var c;return B(),fe("div",LZ,[_e(CP,{label:i.value},UI({default:Ce(()=>[_e(Lm,{assetId:r.assetId},null,8,["assetId"]),En(r.$slots,"default")]),_:2},[(c=r.assetCacheItem)!=null&&c.primaryHandler?{name:"label",fn:Ce(()=>{var d;return[(d=r.assetCacheItem)!=null&&d.primaryHandler?(B(),fe("div",OZ,[r.assetCacheItem.primaryHandler?(B(),fe("img",{key:0,src:le(SM)(r.assetCacheItem.primaryHandler),alt:i.value,class:"aspect-square h-10 overflow-hidden rounded",loading:"lazy"},null,8,RZ)):st("",!0),ue("h3",null,xt(i.value),1)])):st("",!0)]}),key:"0"}:void 0]),1032,["label"])])}}});function hy(e){const t=Fe(null),i=Fe(null),r=De(()=>t.value?Xu(t.value):"");async function s(){const{asset:c,template:d}=await Un.getAssetWithTemplate(e.value);t.value=c,i.value=d}return pn(e,s,{immediate:!0}),{asset:t,template:i,title:r}}const $Z={key:0,class:"collapsed-inline-related-asset-widget-item flex flex-col"},zZ=lt({__name:"CollapsedInlineRelatedAssetWidgetItem",props:{assetId:{},assetCacheItem:{}},setup(e){const t=e,i=De(()=>dy(t.assetCacheItem)),r=De(()=>t.assetId),{asset:s}=hy(r);return(c,d)=>le(s)?(B(),fe("section",$Z,[ue("h3",null,xt(i.value),1),_e(Lm,{assetId:c.assetId},null,8,["assetId"])])):st("",!0)}});const NZ=ln(zZ,[["__scopeId","data-v-fdc8ade2"]]),BZ={class:"thumbnail-image__icon bg-transparent-white-500 backdrop-blur-sm top-1/2 left-1/2 group-hover:scale-100 absolute z-10 flex items-center justify-center w-12 h-12 transition-all scale-0 -translate-x-1/2 -translate-y-1/2 rounded-full"},jZ={class:"group-hover:scale-110 flex flex-col items-center justify-center transition-all"},VZ={class:"whitespace-nowrap text-ellipsis max-w-full px-2 overflow-hidden text-xs"},UZ=lt({__name:"ThumbnailGeneric",props:{isActive:{type:Boolean}},setup(e){return(t,i)=>(B(),fe("div",{class:Mn(["thumbnail-generic aspect-square hover:shadow-md border-transparent-black-200 hover:opacity-100 group relative inline-flex flex-col items-center justify-center w-24 transition-all border rounded shadow-sm opacity-75",{"thumbnail-generic--is-active ring ring-offset-1 ring-blue-600":t.isActive}])},[ue("div",BZ,[_e(Qu,{class:"text-neutral-900"})]),ue("div",jZ,[_e(em,{class:"thumbnail-generic__icon"}),ue("div",VZ,[En(t.$slots,"default",{},void 0,!0)])])],2))}});const HZ=ln(UZ,[["__scopeId","data-v-9378db69"]]),V2=lt({__name:"ThumbnailRelatedAssetWidgetItem",props:{assetId:{},assetCacheItem:{},isActiveObject:{type:Boolean}},setup(e){const t=e,i=De(()=>dy(t.assetCacheItem));return(r,s)=>{const c=j_("RouterLink");return B(),ze(c,{title:i.value,class:Mn(["thumbnail-related-asset-widget flex flex-col rounded-md border border-transparent p-1 no-underline hover:no-underline hover:bg-blue-50 hover:text-blue-600 w-24 text-neutral-600",{"opacity-80 hover:opacity-100 hover:border-blue-600":!r.isActiveObject,"ring ring-offset-1 ring-blue-600 hover:border-transparent opacity-100 bg-blue-50":r.isActiveObject}]),to:`#${r.assetId}`},{default:Ce(()=>[r.assetCacheItem.primaryHandler?(B(),ze(IP,{key:0,src:le(SM)(r.assetCacheItem.primaryHandler),alt:i.value,class:"thumbnail-related-asset-widget__image max-w-full"},null,8,["src","alt"])):(B(),ze(HZ,{key:1,isActive:r.isActiveObject},null,8,["isActive"])),_e(qo,{class:"whitespace-nowrap text-xs mt-1 truncate overflow-hidden w-full text-center",html:i.value},null,8,["html"])]),_:1},8,["title","class","to"])}}}),GZ={class:"linked-related-asset-widget-item"},ab=lt({__name:"LinkedRelatedAssetWidgetItem",props:{assetId:{},assetCacheItem:{}},setup(e){const t=e,i=De(()=>dy(t.assetCacheItem)),r=De(()=>Cl(t.assetId));return(s,c)=>(B(),fe("div",GZ,[_e(ts,{to:r.value},{default:Ce(()=>[Ot(xt(i.value),1)]),_:1},8,["to"])]))}}),AP=lt({__name:"ArrowButton",setup(e){return(t,i)=>(B(),ze(oi,Hr({class:"arrow-button !rounded-full !p-2 cursor-pointer",variant:"primary"},t.$attrs),{default:Ce(()=>[En(t.$slots,"default"),_e(Qu)]),_:3},16))}}),WZ={class:"flex items-center justify-end gap-2"},qZ=lt({__name:"RelatedAssetWidget",props:{widget:{},contents:{},asset:{}},setup(e){const t=e,i=Ho(),r=De(()=>t.widget.fieldData.collapseNestedChildren?NZ:t.widget.fieldData.thumbnailView?V2:t.widget.fieldData.nestData?FZ:ab),s=De(()=>t.contents.filter(x=>!!x.targetAssetId)),c=De(()=>s.value.findIndex(x=>x.targetAssetId===i.activeObjectId)),d=De(()=>c.value!==-1);function l(){const x=(c.value-1+t.contents.length)%t.contents.length,C=s.value[x].targetAssetId;i.setActiveObject(C)}function m(){const x=(c.value+1)%t.contents.length,C=s.value[x].targetAssetId;i.setActiveObject(C)}function g(x){if(d.value){if(x.key==="ArrowLeft")return l();if(x.key==="ArrowRight")return m()}}const y=De(()=>r.value===V2);return Fn(()=>{!y.value||s.value.length<2||window.addEventListener("keydown",g)}),ta(()=>{window.removeEventListener("keydown",g)}),(x,C)=>(B(),fe("div",{class:Mn(["related-asset-widget flex flex-wrap w-full",{"flex-col gap-1 leading-5":r.value===ab,"gap-2":r.value!==ab}])},[(B(!0),fe(Ut,null,$n(s.value,I=>{var A;return B(),ze(zc(r.value),{key:I.targetAssetId,isActiveObject:le(i).activeObjectId===I.targetAssetId,assetId:I.targetAssetId,assetCacheItem:(A=x.asset.relatedAssetCache)==null?void 0:A[I.targetAssetId],label:I.label??""},{default:Ce(()=>[ue("div",WZ,[_e(AP,{to:`/asset/viewAsset/${I.targetAssetId}`},null,8,["to"])])]),_:2},1032,["isActiveObject","assetId","assetCacheItem","label"])}),128))],2))}}),ZZ=lt({__name:"Widget",props:{widget:{},asset:{}},setup(e){const t=e,i=De(()=>Z1({asset:t.asset,widget:t.widget})),r={text:Uq,select:Wq,checkbox:qq,"text area":eZ,date:nZ,multiselect:oZ,location:SZ,upload:MZ,"tag list":DZ,"related asset":qZ};function s(c){return r[c]||null}return(c,d)=>(B(),ze(hs,{label:c.widget.label,class:"widget"},{default:Ce(()=>[s(c.widget.type)?(B(),ze(zc(s(c.widget.type)),{key:0,widget:c.widget,contents:i.value,asset:c.asset},null,8,["widget","contents","asset"])):st("",!0)]),_:1},8,["label"]))}}),KZ={key:0,class:"widget-list flex flex-col"},XZ=lt({__name:"WidgetList",props:{assetId:{}},setup(e){const t=e,i=De(()=>t.assetId),{asset:r,template:s}=hy(i),c=De(()=>lz({asset:r.value,template:s.value}));return(d,l)=>(B(),ze(Cr,{name:"fade"},{default:Ce(()=>[le(r)&&le(s)?(B(),fe("div",KZ,[(B(!0),fe(Ut,null,$n(c.value,m=>(B(),ze(ZZ,{key:m.widgetId,widget:m,asset:le(r)},null,8,["widget","asset"]))),128))])):st("",!0)]),_:1}))}});const Lm=ln(XZ,[["__scopeId","data-v-aa3a6e37"]]);function kx(e,t,i){var r,s,c,d,l;t==null&&(t=100);function m(){var y=Date.now()-d;y<t&&y>=0?r=setTimeout(m,t-y):(r=null,i||(l=e.apply(c,s),c=s=null))}var g=function(){c=this,s=arguments,d=Date.now();var y=i&&!r;return r||(r=setTimeout(m,t)),y&&(l=e.apply(c,s),c=s=null),l};return g.clear=function(){r&&(clearTimeout(r),r=null)},g.flush=function(){r&&(l=e.apply(c,s),c=s=null,clearTimeout(r),r=null)},g}kx.debounce=kx;var ob=kx;function YZ(e,t,i){cr(e)?pn(e,(r,s)=>{s==null||s.removeEventListener(t,i),r==null||r.addEventListener(t,i)}):Fn(()=>{e.addEventListener(t,i)}),ta(()=>{var r;(r=le(e))===null||r===void 0||r.removeEventListener(t,i)})}function JZ(e,t){const i="pointerdown";return typeof window>"u"||!window?void 0:YZ(window,i,s=>{const c=le(e);c&&(c===s.target||s.composedPath().includes(c)||t(s))})}function QZ(e,t,i){let r=null;const s=Fe(!1);Fn(()=>{(e.content!==void 0||i.value)&&(s.value=!0),r=new MutationObserver(c),r.observe(t.value,{childList:!0,subtree:!0})}),ta(()=>r.disconnect()),pn(i,d=>{d?s.value=!0:s.value=!1});const c=()=>{e.content?s.value=!0:s.value=!1};return{hasContent:s}}function Mh(e,t){var i=e.getBoundingClientRect(),r=1,s=1;return{width:i.width/r,height:i.height/s,top:i.top/s,right:i.right/r,bottom:i.bottom/s,left:i.left/r,x:i.left/r,y:i.top/s}}function bo(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function yw(e){var t=bo(e),i=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:i,scrollTop:r}}function rm(e){var t=bo(e).Element;return e instanceof t||e instanceof Element}function La(e){var t=bo(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function MP(e){if(typeof ShadowRoot>"u")return!1;var t=bo(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function eK(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function tK(e){return e===bo(e)||!La(e)?yw(e):eK(e)}function Zo(e){return e?(e.nodeName||"").toLowerCase():null}function Uc(e){return((rm(e)?e.ownerDocument:e.document)||window.document).documentElement}function bw(e){return Mh(Uc(e)).left+yw(e).scrollLeft}function Ml(e){return bo(e).getComputedStyle(e)}function xw(e){var t=Ml(e),i=t.overflow,r=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+s+r)}function nK(e){var t=e.getBoundingClientRect(),i=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return i!==1||r!==1}function iK(e,t,i){i===void 0&&(i=!1);var r=La(t);La(t)&&nK(t);var s=Uc(t),c=Mh(e),d={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!i)&&((Zo(t)!=="body"||xw(s))&&(d=tK(t)),La(t)?(l=Mh(t),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=bw(s))),{x:c.left+d.scrollLeft-l.x,y:c.top+d.scrollTop-l.y,width:c.width,height:c.height}}function ww(e){var t=Mh(e),i=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:r}}function fy(e){return Zo(e)==="html"?e:e.assignedSlot||e.parentNode||(MP(e)?e.host:null)||Uc(e)}function kP(e){return["html","body","#document"].indexOf(Zo(e))>=0?e.ownerDocument.body:La(e)&&xw(e)?e:kP(fy(e))}function Fp(e,t){var i;t===void 0&&(t=[]);var r=kP(e),s=r===((i=e.ownerDocument)==null?void 0:i.body),c=bo(r),d=s?[c].concat(c.visualViewport||[],xw(r)?r:[]):r,l=t.concat(d);return s?l:l.concat(Fp(fy(d)))}function rK(e){return["table","td","th"].indexOf(Zo(e))>=0}function U2(e){return!La(e)||Ml(e).position==="fixed"?null:e.offsetParent}function sK(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,i=navigator.userAgent.indexOf("Trident")!==-1;if(i&&La(e)){var r=Ml(e);if(r.position==="fixed")return null}for(var s=fy(e);La(s)&&["html","body"].indexOf(Zo(s))<0;){var c=Ml(s);if(c.transform!=="none"||c.perspective!=="none"||c.contain==="paint"||["transform","perspective"].indexOf(c.willChange)!==-1||t&&c.willChange==="filter"||t&&c.filter&&c.filter!=="none")return s;s=s.parentNode}return null}function Om(e){for(var t=bo(e),i=U2(e);i&&rK(i)&&Ml(i).position==="static";)i=U2(i);return i&&(Zo(i)==="html"||Zo(i)==="body"&&Ml(i).position==="static")?t:i||sK(e)||t}var Oa="top",mo="bottom",go="right",Ra="left",Sw="auto",Rm=[Oa,mo,go,Ra],kh="start",sm="end",aK="clippingParents",PP="viewport",cp="popper",oK="reference",H2=Rm.reduce(function(e,t){return e.concat([t+"-"+kh,t+"-"+sm])},[]),DP=[].concat(Rm,[Sw]).reduce(function(e,t){return e.concat([t,t+"-"+kh,t+"-"+sm])},[]),lK="beforeRead",cK="read",uK="afterRead",dK="beforeMain",hK="main",fK="afterMain",pK="beforeWrite",mK="write",gK="afterWrite",vK=[lK,cK,uK,dK,hK,fK,pK,mK,gK];function _K(e){var t=new Map,i=new Set,r=[];e.forEach(function(c){t.set(c.name,c)});function s(c){i.add(c.name);var d=[].concat(c.requires||[],c.requiresIfExists||[]);d.forEach(function(l){if(!i.has(l)){var m=t.get(l);m&&s(m)}}),r.push(c)}return e.forEach(function(c){i.has(c.name)||s(c)}),r}function yK(e){var t=_K(e);return vK.reduce(function(i,r){return i.concat(t.filter(function(s){return s.phase===r}))},[])}function bK(e){var t;return function(){return t||(t=new Promise(function(i){Promise.resolve().then(function(){t=void 0,i(e())})})),t}}function Bo(e){return e.split("-")[0]}function xK(e){var t=e.reduce(function(i,r){var s=i[r.name];return i[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,i},{});return Object.keys(t).map(function(i){return t[i]})}function wK(e){var t=bo(e),i=Uc(e),r=t.visualViewport,s=i.clientWidth,c=i.clientHeight,d=0,l=0;return r&&(s=r.width,c=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(d=r.offsetLeft,l=r.offsetTop)),{width:s,height:c,x:d+bw(e),y:l}}var kc=Math.max,am=Math.min,gv=Math.round;function SK(e){var t,i=Uc(e),r=yw(e),s=(t=e.ownerDocument)==null?void 0:t.body,c=kc(i.scrollWidth,i.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),d=kc(i.scrollHeight,i.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),l=-r.scrollLeft+bw(e),m=-r.scrollTop;return Ml(s||i).direction==="rtl"&&(l+=kc(i.clientWidth,s?s.clientWidth:0)-c),{width:c,height:d,x:l,y:m}}function LP(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&MP(i)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Px(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function TK(e){var t=Mh(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function G2(e,t){return t===PP?Px(wK(e)):La(t)?TK(t):Px(SK(Uc(e)))}function EK(e){var t=Fp(fy(e)),i=["absolute","fixed"].indexOf(Ml(e).position)>=0,r=i&&La(e)?Om(e):e;return rm(r)?t.filter(function(s){return rm(s)&&LP(s,r)&&Zo(s)!=="body"}):[]}function CK(e,t,i){var r=t==="clippingParents"?EK(e):[].concat(t),s=[].concat(r,[i]),c=s[0],d=s.reduce(function(l,m){var g=G2(e,m);return l.top=kc(g.top,l.top),l.right=am(g.right,l.right),l.bottom=am(g.bottom,l.bottom),l.left=kc(g.left,l.left),l},G2(e,c));return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d}function Ph(e){return e.split("-")[1]}function Tw(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function OP(e){var t=e.reference,i=e.element,r=e.placement,s=r?Bo(r):null,c=r?Ph(r):null,d=t.x+t.width/2-i.width/2,l=t.y+t.height/2-i.height/2,m;switch(s){case Oa:m={x:d,y:t.y-i.height};break;case mo:m={x:d,y:t.y+t.height};break;case go:m={x:t.x+t.width,y:l};break;case Ra:m={x:t.x-i.width,y:l};break;default:m={x:t.x,y:t.y}}var g=s?Tw(s):null;if(g!=null){var y=g==="y"?"height":"width";switch(c){case kh:m[g]=m[g]-(t[y]/2-i[y]/2);break;case sm:m[g]=m[g]+(t[y]/2-i[y]/2);break}}return m}function RP(){return{top:0,right:0,bottom:0,left:0}}function FP(e){return Object.assign({},RP(),e)}function $P(e,t){return t.reduce(function(i,r){return i[r]=e,i},{})}function Ew(e,t){t===void 0&&(t={});var i=t,r=i.placement,s=r===void 0?e.placement:r,c=i.boundary,d=c===void 0?aK:c,l=i.rootBoundary,m=l===void 0?PP:l,g=i.elementContext,y=g===void 0?cp:g,x=i.altBoundary,C=x===void 0?!1:x,I=i.padding,A=I===void 0?0:I,O=FP(typeof A!="number"?A:$P(A,Rm)),F=y===cp?oK:cp,z=e.rects.popper,U=e.elements[C?F:y],H=CK(rm(U)?U:U.contextElement||Uc(e.elements.popper),d,m),q=Mh(e.elements.reference),ee=OP({reference:q,element:z,strategy:"absolute",placement:s}),Q=Px(Object.assign({},z,ee)),ve=y===cp?Q:q,se={top:H.top-ve.top+O.top,bottom:ve.bottom-H.bottom+O.bottom,left:H.left-ve.left+O.left,right:ve.right-H.right+O.right},K=e.modifiersData.offset;if(y===cp&&K){var J=K[s];Object.keys(se).forEach(function(W){var te=[go,mo].indexOf(W)>=0?1:-1,j=[Oa,mo].indexOf(W)>=0?"y":"x";se[W]+=J[j]*te})}return se}var W2={placement:"bottom",modifiers:[],strategy:"absolute"};function q2(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function IK(e){e===void 0&&(e={});var t=e,i=t.defaultModifiers,r=i===void 0?[]:i,s=t.defaultOptions,c=s===void 0?W2:s;return function(l,m,g){g===void 0&&(g=c);var y={placement:"bottom",orderedModifiers:[],options:Object.assign({},W2,c),modifiersData:{},elements:{reference:l,popper:m},attributes:{},styles:{}},x=[],C=!1,I={state:y,setOptions:function(z){var U=typeof z=="function"?z(y.options):z;O(),y.options=Object.assign({},c,y.options,U),y.scrollParents={reference:rm(l)?Fp(l):l.contextElement?Fp(l.contextElement):[],popper:Fp(m)};var H=yK(xK([].concat(r,y.options.modifiers)));return y.orderedModifiers=H.filter(function(q){return q.enabled}),A(),I.update()},forceUpdate:function(){if(!C){var z=y.elements,U=z.reference,H=z.popper;if(q2(U,H)){y.rects={reference:iK(U,Om(H),y.options.strategy==="fixed"),popper:ww(H)},y.reset=!1,y.placement=y.options.placement,y.orderedModifiers.forEach(function(J){return y.modifiersData[J.name]=Object.assign({},J.data)});for(var q=0;q<y.orderedModifiers.length;q++){if(y.reset===!0){y.reset=!1,q=-1;continue}var ee=y.orderedModifiers[q],Q=ee.fn,ve=ee.options,se=ve===void 0?{}:ve,K=ee.name;typeof Q=="function"&&(y=Q({state:y,options:se,name:K,instance:I})||y)}}}},update:bK(function(){return new Promise(function(F){I.forceUpdate(),F(y)})}),destroy:function(){O(),C=!0}};if(!q2(l,m))return I;I.setOptions(g).then(function(F){!C&&g.onFirstUpdate&&g.onFirstUpdate(F)});function A(){y.orderedModifiers.forEach(function(F){var z=F.name,U=F.options,H=U===void 0?{}:U,q=F.effect;if(typeof q=="function"){var ee=q({state:y,name:z,instance:I,options:H}),Q=function(){};x.push(ee||Q)}})}function O(){x.forEach(function(F){return F()}),x=[]}return I}}var vv={passive:!0};function AK(e){var t=e.state,i=e.instance,r=e.options,s=r.scroll,c=s===void 0?!0:s,d=r.resize,l=d===void 0?!0:d,m=bo(t.elements.popper),g=[].concat(t.scrollParents.reference,t.scrollParents.popper);return c&&g.forEach(function(y){y.addEventListener("scroll",i.update,vv)}),l&&m.addEventListener("resize",i.update,vv),function(){c&&g.forEach(function(y){y.removeEventListener("scroll",i.update,vv)}),l&&m.removeEventListener("resize",i.update,vv)}}var MK={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:AK,data:{}};function kK(e){var t=e.state,i=e.name;t.modifiersData[i]=OP({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var PK={name:"popperOffsets",enabled:!0,phase:"read",fn:kK,data:{}},DK={top:"auto",right:"auto",bottom:"auto",left:"auto"};function LK(e){var t=e.x,i=e.y,r=window,s=r.devicePixelRatio||1;return{x:gv(gv(t*s)/s)||0,y:gv(gv(i*s)/s)||0}}function Z2(e){var t,i=e.popper,r=e.popperRect,s=e.placement,c=e.variation,d=e.offsets,l=e.position,m=e.gpuAcceleration,g=e.adaptive,y=e.roundOffsets,x=y===!0?LK(d):typeof y=="function"?y(d):d,C=x.x,I=C===void 0?0:C,A=x.y,O=A===void 0?0:A,F=d.hasOwnProperty("x"),z=d.hasOwnProperty("y"),U=Ra,H=Oa,q=window;if(g){var ee=Om(i),Q="clientHeight",ve="clientWidth";ee===bo(i)&&(ee=Uc(i),Ml(ee).position!=="static"&&l==="absolute"&&(Q="scrollHeight",ve="scrollWidth")),ee=ee,(s===Oa||(s===Ra||s===go)&&c===sm)&&(H=mo,O-=ee[Q]-r.height,O*=m?1:-1),(s===Ra||(s===Oa||s===mo)&&c===sm)&&(U=go,I-=ee[ve]-r.width,I*=m?1:-1)}var se=Object.assign({position:l},g&&DK);if(m){var K;return Object.assign({},se,(K={},K[H]=z?"0":"",K[U]=F?"0":"",K.transform=(q.devicePixelRatio||1)<=1?"translate("+I+"px, "+O+"px)":"translate3d("+I+"px, "+O+"px, 0)",K))}return Object.assign({},se,(t={},t[H]=z?O+"px":"",t[U]=F?I+"px":"",t.transform="",t))}function OK(e){var t=e.state,i=e.options,r=i.gpuAcceleration,s=r===void 0?!0:r,c=i.adaptive,d=c===void 0?!0:c,l=i.roundOffsets,m=l===void 0?!0:l,g={placement:Bo(t.placement),variation:Ph(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Z2(Object.assign({},g,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:d,roundOffsets:m})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Z2(Object.assign({},g,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:m})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var RK={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:OK,data:{}};function FK(e){var t=e.state;Object.keys(t.elements).forEach(function(i){var r=t.styles[i]||{},s=t.attributes[i]||{},c=t.elements[i];!La(c)||!Zo(c)||(Object.assign(c.style,r),Object.keys(s).forEach(function(d){var l=s[d];l===!1?c.removeAttribute(d):c.setAttribute(d,l===!0?"":l)}))})}function $K(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(r){var s=t.elements[r],c=t.attributes[r]||{},d=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:i[r]),l=d.reduce(function(m,g){return m[g]="",m},{});!La(s)||!Zo(s)||(Object.assign(s.style,l),Object.keys(c).forEach(function(m){s.removeAttribute(m)}))})}}var zK={name:"applyStyles",enabled:!0,phase:"write",fn:FK,effect:$K,requires:["computeStyles"]},NK=[MK,PK,RK,zK],BK=IK({defaultModifiers:NK});function jK(e){return e==="x"?"y":"x"}function Fv(e,t,i){return kc(e,am(t,i))}function VK(e){var t=e.state,i=e.options,r=e.name,s=i.mainAxis,c=s===void 0?!0:s,d=i.altAxis,l=d===void 0?!1:d,m=i.boundary,g=i.rootBoundary,y=i.altBoundary,x=i.padding,C=i.tether,I=C===void 0?!0:C,A=i.tetherOffset,O=A===void 0?0:A,F=Ew(t,{boundary:m,rootBoundary:g,padding:x,altBoundary:y}),z=Bo(t.placement),U=Ph(t.placement),H=!U,q=Tw(z),ee=jK(q),Q=t.modifiersData.popperOffsets,ve=t.rects.reference,se=t.rects.popper,K=typeof O=="function"?O(Object.assign({},t.rects,{placement:t.placement})):O,J={x:0,y:0};if(Q){if(c||l){var W=q==="y"?Oa:Ra,te=q==="y"?mo:go,j=q==="y"?"height":"width",re=Q[q],Te=Q[q]+F[W],ye=Q[q]-F[te],Ve=I?-se[j]/2:0,Ue=U===kh?ve[j]:se[j],Qe=U===kh?-se[j]:-ve[j],It=t.elements.arrow,vt=I&&It?ww(It):{width:0,height:0},it=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:RP(),Ge=it[W],ot=it[te],Ct=Fv(0,ve[j],vt[j]),wt=H?ve[j]/2-Ve-Ct-Ge-K:Ue-Ct-Ge-K,Xe=H?-ve[j]/2+Ve+Ct+ot+K:Qe+Ct+ot+K,Dt=t.elements.arrow&&Om(t.elements.arrow),Tt=Dt?q==="y"?Dt.clientTop||0:Dt.clientLeft||0:0,Nt=t.modifiersData.offset?t.modifiersData.offset[t.placement][q]:0,dn=Q[q]+wt-Nt-Tt,Sn=Q[q]+Xe-Nt;if(c){var me=Fv(I?am(Te,dn):Te,re,I?kc(ye,Sn):ye);Q[q]=me,J[q]=me-re}if(l){var Ie=q==="x"?Oa:Ra,at=q==="x"?mo:go,Z=Q[ee],he=Z+F[Ie],$e=Z-F[at],et=Fv(I?am(he,dn):he,Z,I?kc($e,Sn):$e);Q[ee]=et,J[ee]=et-Z}}t.modifiersData[r]=J}}var UK={name:"preventOverflow",enabled:!0,phase:"main",fn:VK,requiresIfExists:["offset"]},HK={left:"right",right:"left",bottom:"top",top:"bottom"};function $v(e){return e.replace(/left|right|bottom|top/g,function(t){return HK[t]})}var GK={start:"end",end:"start"};function K2(e){return e.replace(/start|end/g,function(t){return GK[t]})}function WK(e,t){t===void 0&&(t={});var i=t,r=i.placement,s=i.boundary,c=i.rootBoundary,d=i.padding,l=i.flipVariations,m=i.allowedAutoPlacements,g=m===void 0?DP:m,y=Ph(r),x=y?l?H2:H2.filter(function(A){return Ph(A)===y}):Rm,C=x.filter(function(A){return g.indexOf(A)>=0});C.length===0&&(C=x);var I=C.reduce(function(A,O){return A[O]=Ew(e,{placement:O,boundary:s,rootBoundary:c,padding:d})[Bo(O)],A},{});return Object.keys(I).sort(function(A,O){return I[A]-I[O]})}function qK(e){if(Bo(e)===Sw)return[];var t=$v(e);return[K2(e),t,K2(t)]}function ZK(e){var t=e.state,i=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var s=i.mainAxis,c=s===void 0?!0:s,d=i.altAxis,l=d===void 0?!0:d,m=i.fallbackPlacements,g=i.padding,y=i.boundary,x=i.rootBoundary,C=i.altBoundary,I=i.flipVariations,A=I===void 0?!0:I,O=i.allowedAutoPlacements,F=t.options.placement,z=Bo(F),U=z===F,H=m||(U||!A?[$v(F)]:qK(F)),q=[F].concat(H).reduce(function(ot,Ct){return ot.concat(Bo(Ct)===Sw?WK(t,{placement:Ct,boundary:y,rootBoundary:x,padding:g,flipVariations:A,allowedAutoPlacements:O}):Ct)},[]),ee=t.rects.reference,Q=t.rects.popper,ve=new Map,se=!0,K=q[0],J=0;J<q.length;J++){var W=q[J],te=Bo(W),j=Ph(W)===kh,re=[Oa,mo].indexOf(te)>=0,Te=re?"width":"height",ye=Ew(t,{placement:W,boundary:y,rootBoundary:x,altBoundary:C,padding:g}),Ve=re?j?go:Ra:j?mo:Oa;ee[Te]>Q[Te]&&(Ve=$v(Ve));var Ue=$v(Ve),Qe=[];if(c&&Qe.push(ye[te]<=0),l&&Qe.push(ye[Ve]<=0,ye[Ue]<=0),Qe.every(function(ot){return ot})){K=W,se=!1;break}ve.set(W,Qe)}if(se)for(var It=A?3:1,vt=function(Ct){var wt=q.find(function(Xe){var Dt=ve.get(Xe);if(Dt)return Dt.slice(0,Ct).every(function(Tt){return Tt})});if(wt)return K=wt,"break"},it=It;it>0;it--){var Ge=vt(it);if(Ge==="break")break}t.placement!==K&&(t.modifiersData[r]._skip=!0,t.placement=K,t.reset=!0)}}var KK={name:"flip",enabled:!0,phase:"main",fn:ZK,requiresIfExists:["offset"],data:{_skip:!1}};function XK(e,t,i){var r=Bo(e),s=[Ra,Oa].indexOf(r)>=0?-1:1,c=typeof i=="function"?i(Object.assign({},t,{placement:e})):i,d=c[0],l=c[1];return d=d||0,l=(l||0)*s,[Ra,go].indexOf(r)>=0?{x:l,y:d}:{x:d,y:l}}function YK(e){var t=e.state,i=e.options,r=e.name,s=i.offset,c=s===void 0?[0,0]:s,d=DP.reduce(function(y,x){return y[x]=XK(x,t.rects,c),y},{}),l=d[t.placement],m=l.x,g=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=m,t.modifiersData.popperOffsets.y+=g),t.modifiersData[r]=d}var JK={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:YK},QK=function(t,i){return t=typeof t=="function"?t(Object.assign({},i.rects,{placement:i.placement})):t,FP(typeof t!="number"?t:$P(t,Rm))};function eX(e){var t,i=e.state,r=e.name,s=e.options,c=i.elements.arrow,d=i.modifiersData.popperOffsets,l=Bo(i.placement),m=Tw(l),g=[Ra,go].indexOf(l)>=0,y=g?"height":"width";if(!(!c||!d)){var x=QK(s.padding,i),C=ww(c),I=m==="y"?Oa:Ra,A=m==="y"?mo:go,O=i.rects.reference[y]+i.rects.reference[m]-d[m]-i.rects.popper[y],F=d[m]-i.rects.reference[m],z=Om(c),U=z?m==="y"?z.clientHeight||0:z.clientWidth||0:0,H=O/2-F/2,q=x[I],ee=U-C[y]-x[A],Q=U/2-C[y]/2+H,ve=Fv(q,Q,ee),se=m;i.modifiersData[r]=(t={},t[se]=ve,t.centerOffset=ve-Q,t)}}function tX(e){var t=e.state,i=e.options,r=i.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||LP(t.elements.popper,s)&&(t.elements.arrow=s))}var nX={name:"arrow",enabled:!0,phase:"main",fn:eX,effect:tX,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};const lb=e=>parseInt(e,10);function iX({arrowPadding:e,emit:t,locked:i,offsetDistance:r,offsetSkid:s,placement:c,popperNode:d,triggerNode:l}){const m=es({isOpen:!1,popperInstance:null}),g=O=>{var F;(F=m.popperInstance)===null||F===void 0||F.setOptions(z=>({...z,modifiers:[...z.modifiers,{name:"eventListeners",enabled:O}]}))},y=()=>g(!0),x=()=>g(!1),C=()=>{m.isOpen&&(m.isOpen=!1,t("close:popper"))},I=()=>{m.isOpen||(m.isOpen=!0,t("open:popper"))};pn([()=>m.isOpen,c],async([O])=>{O?(await A(),y()):x()});const A=async()=>{await Ir(),m.popperInstance=BK(l.value,d.value,{placement:c.value,modifiers:[UK,KK,{name:"flip",enabled:!i.value},nX,{name:"arrow",options:{padding:lb(e.value)}},JK,{name:"offset",options:{offset:[lb(s.value),lb(r.value)]}}]}),m.popperInstance.update()};return ta(()=>{var O;(O=m.popperInstance)===null||O===void 0||O.destroy()}),{...$_(m),open:I,close:C}}const rX={id:"arrow","data-popper-arrow":""};function sX(e,t){return B(),fe("div",rX)}function zP(e,t){t===void 0&&(t={});var i=t.insertAt;if(!(!e||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",i==="top"&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}}var aX=`
#arrow[data-v-20b7fd4a],
  #arrow[data-v-20b7fd4a]::before {
    transition: background 250ms ease-in-out;
    position: absolute;
    width: calc(10px - var(--popper-theme-border-width, 0px));
    height: calc(10px - var(--popper-theme-border-width, 0px));
    box-sizing: border-box;
    background: var(--popper-theme-background-color);
}
#arrow[data-v-20b7fd4a] {
    visibility: hidden;
}
#arrow[data-v-20b7fd4a]::before {
    visibility: visible;
    content: "";
    transform: rotate(45deg);
}

  /* Top arrow */
.popper[data-popper-placement^="top"] > #arrow[data-v-20b7fd4a] {
    bottom: -5px;
}
.popper[data-popper-placement^="top"] > #arrow[data-v-20b7fd4a]::before {
    border-right: var(--popper-theme-border-width)
      var(--popper-theme-border-style) var(--popper-theme-border-color);
    border-bottom: var(--popper-theme-border-width)
      var(--popper-theme-border-style) var(--popper-theme-border-color);
}

  /* Bottom arrow */
.popper[data-popper-placement^="bottom"] > #arrow[data-v-20b7fd4a] {
    top: -5px;
}
.popper[data-popper-placement^="bottom"] > #arrow[data-v-20b7fd4a]::before {
    border-left: var(--popper-theme-border-width)
      var(--popper-theme-border-style) var(--popper-theme-border-color);
    border-top: var(--popper-theme-border-width)
      var(--popper-theme-border-style) var(--popper-theme-border-color);
}

  /* Left arrow */
.popper[data-popper-placement^="left"] > #arrow[data-v-20b7fd4a] {
    right: -5px;
}
.popper[data-popper-placement^="left"] > #arrow[data-v-20b7fd4a]::before {
    border-right: var(--popper-theme-border-width)
      var(--popper-theme-border-style) var(--popper-theme-border-color);
    border-top: var(--popper-theme-border-width)
      var(--popper-theme-border-style) var(--popper-theme-border-color);
}

  /* Right arrow */
.popper[data-popper-placement^="right"] > #arrow[data-v-20b7fd4a] {
    left: -5px;
}
`;zP(aX);const Cw={};Cw.render=sX;Cw.__scopeId="data-v-20b7fd4a";var oX=Cw;const lX=["onKeyup"];var NP={props:{placement:{type:String,default:"bottom",validator:function(e){return["auto","auto-start","auto-end","top","top-start","top-end","bottom","bottom-start","bottom-end","right","right-start","right-end","left","left-start","left-end"].includes(e)}},disableClickAway:{type:Boolean,default:!1},offsetSkid:{type:String,default:"0"},offsetDistance:{type:String,default:"12"},hover:{type:Boolean,default:!1},show:{type:Boolean,default:null},disabled:{type:Boolean,default:!1},openDelay:{type:[Number,String],default:0},closeDelay:{type:[Number,String],default:0},zIndex:{type:[Number,String],default:9999},arrow:{type:Boolean,default:!1},arrowPadding:{type:String,default:"0"},interactive:{type:Boolean,default:!0},locked:{type:Boolean,default:!1},content:{type:String,default:null}},emits:["open:popper","close:popper"],setup(e,{emit:t}){const i=e;bm(Ue=>({c81fc0a4:e.zIndex}));const r=GI(),s=Fe(null),c=Fe(null),d=Fe(null),l=Fe(!1);Fn(()=>{const Ue=r.default();if(Ue&&Ue.length>1)return console.error(`[Popper]: The <Popper> component expects only one child element at its root. You passed ${Ue.length} child nodes.`)});const{arrowPadding:m,closeDelay:g,content:y,disableClickAway:x,disabled:C,interactive:I,locked:A,offsetDistance:O,offsetSkid:F,openDelay:z,placement:U,show:H}=$_(i),{isOpen:q,open:ee,close:Q}=iX({arrowPadding:m,emit:t,locked:A,offsetDistance:O,offsetSkid:F,placement:U,popperNode:c,triggerNode:d}),{hasContent:ve}=QZ(r,c,y),se=De(()=>H.value!==null),K=De(()=>C.value||!ve.value),J=De(()=>q.value&&!K.value),W=De(()=>!x.value&&!se.value),te=De(()=>I.value?`border: ${O.value}px solid transparent; margin: -${O.value}px;`:null),j=ob.debounce(ee,z.value),re=ob.debounce(Q,g.value),Te=async()=>{K.value||se.value||(re.clear(),j())},ye=async()=>{se.value||(j.clear(),re())},Ve=()=>{q.value?ye():Te()};return pn([ve,C],([Ue,Qe])=>{q.value&&(!Ue||Qe)&&Q()}),pn(q,Ue=>{Ue?l.value=!0:ob.debounce(()=>{l.value=!1},200)}),$r(()=>{se.value&&(H.value?j():re())}),$r(()=>{W.value&&JZ(s,ye)}),(Ue,Qe)=>(B(),fe("div",{class:"inline-block",style:Gu(le(te)),onMouseleave:Qe[2]||(Qe[2]=It=>e.hover&&ye()),ref:(It,vt)=>{vt.popperContainerNode=It,s.value=It}},[ue("div",{ref:(It,vt)=>{vt.triggerNode=It,d.value=It},onMouseover:Qe[0]||(Qe[0]=It=>e.hover&&Te()),onClick:Ve,onFocus:Te,onKeyup:kA(ye,["esc"])},[En(Ue.$slots,"default")],40,lX),_e(Cr,{name:"fade"},{default:Ce(()=>[vs(ue("div",{onClick:Qe[1]||(Qe[1]=It=>!le(I)&&ye()),class:"popper",ref:(It,vt)=>{vt.popperNode=It,c.value=It}},[En(Ue.$slots,"content",{close:le(Q),isOpen:l.value},()=>[Ot(xt(le(y)),1)]),e.arrow?(B(),ze(oX,{key:0})):st("",!0)],512),[[_a,le(J)]])]),_:3})],36))}},cX=`
.inline-block[data-v-5784ed69] {
    display: inline-block;
}
.popper[data-v-5784ed69] {
    transition: background 250ms ease-in-out;
    background: var(--popper-theme-background-color);
    padding: var(--popper-theme-padding);
    color: var(--popper-theme-text-color);
    border-radius: var(--popper-theme-border-radius);
    border-width: var(--popper-theme-border-width);
    border-style: var(--popper-theme-border-style);
    border-color: var(--popper-theme-border-color);
    box-shadow: var(--popper-theme-box-shadow);
    z-index: var(--c81fc0a4);
}
.popper[data-v-5784ed69]:hover,
  .popper:hover > #arrow[data-v-5784ed69]::before {
    background: var(--popper-theme-background-color-hover);
}
.inline-block[data-v-5784ed69] {
    display: inline-block;
}
.fade-enter-active[data-v-5784ed69],
  .fade-leave-active[data-v-5784ed69] {
    transition: opacity 0.2s ease;
}
.fade-enter-from[data-v-5784ed69],
  .fade-leave-to[data-v-5784ed69] {
    opacity: 0;
}
`;zP(cX);NP.__scopeId="data-v-5784ed69";var uX=(()=>{const e=NP;return e.install=t=>{t.component("Popper",e)},e})();const dX=lt({__name:"Popover",props:{hover:{type:Boolean,default:!0},arrow:{type:Boolean,default:!0},content:{default:void 0}},setup(e){return(t,i)=>(B(),ze(le(uX),{class:"popover",hover:t.hover,arrow:t.arrow},{content:Ce(()=>[En(t.$slots,"content",{},()=>[ue("div",Hr({class:"popover-content"},t.$attrs),xt(t.content),17)])]),default:Ce(()=>[En(t.$slots,"default")]),_:3},8,["hover","arrow"]))}});const $c=lt({__name:"IconButton",props:{title:{},href:{default:void 0},to:{default:void 0},type:{default:"button"}},emits:["click"],setup(e){const t=e,i=_o(),r=De(()=>{if(t.href)return t.href;if(t.to&&s.value===Ac)return i.resolve(t.to).href}),s=De(()=>t.href?"a":t.to?Ac:"button");return(c,d)=>(B(),ze(dX,{content:c.title,class:"icon-button"},{default:Ce(()=>[(B(),ze(zc(s.value),Hr({href:r.value,type:c.type,to:s.value===le(Ac)?c.to:void 0},c.$attrs,{class:"flex items-center justify-center aspect-square p-2 text-neutral-900 hover:text-blue-700 hover:bg-blue-50 border border-transparent hover:border-blue-600 rounded-md transition-colors duration-150",title:c.title,onClick:d[0]||(d[0]=l=>c.$emit("click",l))}),{default:Ce(()=>[En(c.$slots,"default")]),_:3},16,["href","type","to","title"]))]),_:3},8,["content"]))}}),hX=ue("span",{class:"sr-only"},"More Info",-1),fX={key:0},pX={key:0},mX={key:1,class:"flex flex-col gap-6"},gX={class:"bg-neutral-200 p-4 rounded-xl"},vX=ue("h2",{class:"text-xl font-bold mt-6 border-t pt-6"},"EXIF Details",-1),_X={key:2},BP=lt({__name:"MoreFileInfoButton",props:{fileObjectId:{}},setup(e){const t=e,i=Ic(()=>oo(()=>Promise.resolve().then(()=>vw),void 0)),r=Ic(()=>oo(()=>import("./MapMarker-d1c12f0b.js"),[])),s=Fe(!1),c=Fe(void 0),d=De(()=>c.value!==void 0);async function l(){s.value=!s.value,c.value=void 0,c.value=await Un.getFileMetaData(t.fileObjectId)}return(m,g)=>(B(),fe(Ut,null,[_e($c,{class:"more-file-info-button",title:"More Info",onClick:l},{default:Ce(()=>[_e(rk),hX]),_:1}),_e(Vc,{label:"File Info",isOpen:s.value,class:"max-w-4xl m-auto h-[75vh]",onClose:g[0]||(g[0]=y=>s.value=!1)},{default:Ce(()=>[_e(Cr,{name:"fade"},{default:Ce(()=>{var y;return[d.value?(B(),fe("div",fX,[c.value?st("",!0):(B(),fe("span",pX,"No meta data found.")),(y=c.value)!=null&&y.exif?(B(),fe("section",mX,[_e(hs,{label:"File Type"},{default:Ce(()=>{var x,C;return[Ot(xt(((C=(x=c.value.exif)==null?void 0:x.File)==null?void 0:C.FileType)??"Unknown"),1)]}),_:1}),_e(hs,{label:"Original Name"},{default:Ce(()=>[Ot(xt(c.value.sourcefile??"Unknown"),1)]),_:1}),_e(hs,{label:"File Size"},{default:Ce(()=>{var x,C;return[Ot(xt(((C=(x=c.value.exif)==null?void 0:x.File)==null?void 0:C.FileSize)??"Unknown"),1)]}),_:1}),_e(hs,{label:"Image Size"},{default:Ce(()=>[Ot(xt(c.value.width??"Unknown")+" x "+xt(c.value.height??"Unknonwn"),1)]),_:1}),c.value.coordinates?(B(),ze(hs,{key:0,label:"Location"},{default:Ce(()=>[ue("div",gX,[_e(le(i),{center:{lng:c.value.coordinates[0],lat:c.value.coordinates[1]},zoom:10,mapStyle:"streets",apiKey:le(Zn).arcgis.apiKey,mapContainerClass:"!h-[50vh]"},{default:Ce(()=>[_e(le(r),{id:"more-info-location-map-marker",lng:c.value.coordinates[0],lat:c.value.coordinates[1]},null,8,["lng","lat"])]),_:1},8,["center","apiKey"])])]),_:1})):st("",!0),vX,ue("pre",null,xt(c.value.exif),1)])):(B(),fe("section",_X,[ue("pre",null,xt(c.value),1)]))])):st("",!0)]}),_:1})]),_:1},8,["isOpen"])],64))}}),yX=ue("span",{class:"sr-only"},"Download File",-1),bX={key:0},xX={key:0},wX={key:1,class:"max-w-sm"},SX=["href"],TX={class:"flex justify-between"},EX={class:"group-hover:underline"},jP=lt({__name:"DownloadFileButton",props:{fileObjectId:{},assetId:{}},setup(e){const t=e,i=Fe(!1),r=Fe(void 0),s=De(()=>r.value!==void 0);async function c(){i.value=!0,r.value=void 0,r.value=await Un.getFileDownloadInfo(t.fileObjectId,t.assetId)}return(d,l)=>(B(),fe(Ut,null,[_e($c,{class:"download-file-button",title:"Download File",onClick:c},{default:Ce(()=>[_e(ew),yX]),_:1}),_e(Vc,{label:"File Downloads",isOpen:i.value,class:"max-w-sm",onClose:l[0]||(l[0]=m=>i.value=!1)},{default:Ce(()=>[s.value?(B(),fe("div",bX,[r.value?(B(),fe("ul",wX,[(B(!0),fe(Ut,null,$n(r.value,m=>(B(),fe(Ut,{key:m.filetype},[m.isReady||m.filetype==="original"?(B(),fe("a",{key:0,href:m.url,class:"py-2 hover:bg-transparent-black-50 border-t last:border-b block hover:no-underline group"},[ue("li",TX,[ue("span",EX,xt(m.filetype),1),_e(v_,{class:"group-hover:bg-blue-100 group-hover:text-blue-600"},{default:Ce(()=>[Ot(xt(m.extension),1)]),_:2},1024)])],8,SX)):st("",!0)],64))),128))])):(B(),fe("span",xX,"No Downloads available"))])):st("",!0)]),_:1},8,["isOpen"])],64))}}),CX={class:"text-area"},IX={class:"flex justify-between items-baseline"},AX={for:"share-embed",class:"block text-sm font-medium text-gray-700"},MX={class:"mt-1 flex rounded-md shadow-sm relative"},kX=["placeholder","value"],PX=lt({__name:"TextArea",props:{label:{},value:{},placeholder:{default:""}},emits:["input"],setup(e){return(t,i)=>(B(),fe("div",CX,[ue("div",IX,[En(t.$slots,"label",{},()=>[ue("label",AX,xt(t.label),1)]),ue("div",null,[En(t.$slots,"corner")])]),ue("div",MX,[ue("textarea",{id:"share-embed",name:"share-embed",class:"block w-full rounded border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 font-mono text-neutral-500 focus:text-neutral-900 h-24",placeholder:t.placeholder,value:t.value,onInput:i[0]||(i[0]=r=>t.$emit("input",r))},null,40,kX)])]))}}),X2=lt({__name:"CopyableTextArea",props:{label:{},value:{},placeholder:{default:""}},setup(e){const i=vh(e,"value"),{copy:r,copied:s}=zN({source:i,copiedDuring:3e3});return(c,d)=>(B(),ze(PX,{label:c.label,value:c.value,placeholder:c.placeholder,class:"copyable-text-area"},{default:Ce(()=>[Ot(`
    <template #corner>
      <Button
        :icon="copied ? 'check' : 'content_copy'"
        variant="tertiary"
        @click="copy()">
        <!-- eslint-disable-next-line vue/no-textarea-mustache-->
        `+xt(le(s)?"Copied":"Copy")+`
      </Button>
    </template>
  `,1)]),_:1},8,["label","value","placeholder"]))}}),DX=ue("span",{class:"sr-only"},"Share",-1),LX={class:"flex flex-col gap-4"},Iw=lt({__name:"ShareButton",props:{url:{}},setup(e){const t=e,i=c=>c.replace(/\s+/g," ").trim(),r=Fe(!1),s=De(()=>i(`
  <iframe width="560" height="480" src="${t.url}" frameborder="0" allowfullscreen></iframe>`));return(c,d)=>(B(),ze($c,{class:"share-button",title:"Share",onClick:d[1]||(d[1]=l=>r.value=!r.value)},{default:Ce(()=>[_e(Pj),DX,_e(Vc,{label:"Share",isOpen:r.value,class:"max-w-xl mx-auto",onClose:d[0]||(d[0]=l=>r.value=!1)},{default:Ce(()=>[ue("div",LX,[_e(X2,{label:"Embed",value:s.value},null,8,["value"]),_e(X2,{label:"Link",value:t.url},null,8,["value"]),_e(oi,{icon:"open_in_new",label:"Open in New Window",href:t.url,target:"_blank"},{default:Ce(()=>[Ot(" Open Viewer in New Window ")]),_:1},8,["href"])])]),_:1},8,["isOpen"])]),_:1}))}}),OX=lt({__name:"ShareFileButton",props:{fileObjectId:{}},setup(e){const t=e,i=De(()=>`${Zn.instance.base.url}/asset/getEmbed/${t.fileObjectId}/null/true`);return(r,s)=>(B(),ze(Iw,{class:"share-file-button",url:i.value},null,8,["url"]))}}),RX={class:"drawer-title-input"},FX=ue("span",{class:"sr-only"},"Clear",-1),$X={key:0,class:"text-xs text-red-600 mt-1"},Aw=lt({__name:"DrawerTitleInput",props:{modelValue:{},label:{default:"Drawer Title"},labelHidden:{type:Boolean,default:!1},placeholder:{default:"New Drawer Title"},inputClass:{default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const i=e,r=t,s=Ha(),c=De(()=>i.modelValue.trim()),d=De(()=>i.modelValue.length>0),l=De(()=>!s.drawers.some(y=>y.title.trim()===c.value)),m=De(()=>d.value&&l.value);function g(){r("update:modelValue","")}return(y,x)=>(B(),fe("div",RX,[_e(co,{id:"new-drawer-title",label:y.label,modelValue:y.modelValue,labelHidden:y.labelHidden,placeholder:y.placeholder,inputClass:y.inputClass,"onUpdate:modelValue":x[0]||(x[0]=C=>r("update:modelValue",C))},{append:Ce(()=>[y.modelValue.length?(B(),fe("button",{key:0,type:"button",class:"text-transparent-black-500 hover:text-neutral-900 float-right",onClick:g},[FX,_e(le(Em))])):st("",!0)]),_:1},8,["label","modelValue","labelHidden","placeholder","inputClass"]),!m.value&&y.modelValue.length>0?(B(),fe("p",$X," Drawer title must be unique. ")):st("",!0)]))}});function zX(e){return/^(\d{1,2}:)?([0-5]?\d:)?[0-5]?\d$/.test(e)}function gc(e){if(e===null)return"";if(Number.isNaN(e))throw new Error("Cannot convert seconds to time string: seconds is NaN");if(e>=60*60*24)throw new Error("Cannot convert seconds to time string: seconds larger than 1 day");return e<60*60?new Date(e*1e3).toISOString().slice(14,19):new Date(e*1e3).toISOString().slice(11,19)}function Y2(e){if(!zX(e))return null;const t=e.split(":").reverse();let i=0;return t.forEach((r,s)=>{i+=Number.parseInt(r)*Math.pow(60,s)}),i}const Dx={SET_PLAY_BOUNDS:"SET_PLAY_BOUNDS",GET_SCRUBBER_POSITION:"GET_SCRUBBER_POSITION",PAUSE_PLAYER:"PAUSE_PLAYER"},cb={MEDIAPLAYER_READY:"MEDIAPLAYER_READY",CURRENT_SCRUBBER_POSITION:"CURRENT_SCRUBBER_POSITION",SET_PLAY_BOUNDS_SUCCESS:"SET_PLAY_BOUNDS_SUCCESS",PAUSE_PLAYER_SUCCESS:"PAUSE_PLAYER_SUCCESS"},NX=(...e)=>console.log("[PARENT] ",...e);function VP(e){const t=[];function i(s){var c,d;s.source===((c=e.value)==null?void 0:c.contentWindow)&&(d=s.data)!=null&&d.type&&(NX("message received:",s.data.type,s.data.payload??"",{event:s}),t.forEach(l=>l(s)))}const r=pn(e,()=>{e.value&&(window.addEventListener("message",i),r())});return ta(()=>{window.removeEventListener("message",i)}),{postMessage(s){var c,d;(d=(c=e.value)==null?void 0:c.contentWindow)==null||d.postMessage(s,"*")},addResponseHandler(s){t.push(s)},destroy(){window.removeEventListener("message",i)}}}const BX=["src"],UP=lt({__name:"ExcerptableIframe",props:{fileObjectId:{},startTime:{},endTime:{}},emits:["ready","update:currentScrubberPosition"],setup(e,{emit:t}){const i=e,r=t,s=Fe(null),c=Fe(0),d=VP(s);d.addResponseHandler(m=>{const{type:g}=m.data;if(g===cb.MEDIAPLAYER_READY)return d.postMessage({type:Dx.SET_PLAY_BOUNDS,payload:{startTime:i.startTime,endTime:i.endTime}});if(g===cb.CURRENT_SCRUBBER_POSITION)return c.value=m.data.payload,r("update:currentScrubberPosition",m.data.payload);if(g===cb.SET_PLAY_BOUNDS_SUCCESS)return r("ready")});const l=yi(iP);return l&&pn(l,()=>{d.postMessage({type:Dx.PAUSE_PLAYER})}),(m,g)=>(B(),fe("iframe",{ref_key:"videoPlayerIframe",ref:s,src:`${le(Zn).instance.base.url}/asset/getEmbed/${m.fileObjectId}`,frameBorder:"0",allowfullscreen:"true",class:"excerptable-iframe w-full aspect-video"},[En(m.$slots,"default")],8,BX))}}),jX={class:"add-to-drawer-button__add-excerpt-to-drawer-section text-sm rounded-md"},VX={class:"inline-flex gap-1 items-center"},UX=["checked"],HX={key:0,class:"excerpt-details flex flex-col gap-4 mt-2 border border-neutral-300 bg-neutral-100 p-4 rounded-md"},GX={class:"flex gap-4"},WX=lt({__name:"AddExcerptToDrawerSection",props:{isAddingExcerpt:{type:Boolean},startTime:{},endTime:{},excerptName:{},fileObjectId:{}},emits:["update:startTime","update:endTime","update:excerptName","update:isAddingExcerpt"],setup(e,{emit:t}){const i=e,r=t,s=Fe(gc(i.startTime??0)),c=Fe(gc(i.endTime??0)),d=Fe(0),l=Fe(!1),m=Fe(!1),g=Fe(!1);function y(){s.value=gc(d.value),r("update:startTime",d.value)}function x(){c.value=gc(d.value),r("update:endTime",d.value)}return(C,I)=>(B(),fe("div",jX,[ue("label",VX,[ue("input",{checked:C.isAddingExcerpt,type:"checkbox","aria-label":"Add Excerpt",class:"text-sm rounded-sm",onChange:I[0]||(I[0]=A=>C.$emit("update:isAddingExcerpt",A.target.checked))},null,40,UX),Ot(" Add as Excerpt ")]),C.isAddingExcerpt?(B(),fe("div",HX,[_e(co,{id:"excerpt-name",modelValue:C.excerptName,label:"Excerpt Name",placeholder:"Excerpt Name",class:"flex-1 text-sm",inputClass:["!bg-white border !border-neutral-300",{"!border !border-red-500":!C.excerptName&&g.value}],"onUpdate:modelValue":I[1]||(I[1]=A=>{g.value=!0,C.$emit("update:excerptName",A)}),onBlur:I[2]||(I[2]=A=>g.value=!0)},null,8,["modelValue","inputClass"]),ue("div",GX,[_e(co,{id:"excerpt__start-time",modelValue:s.value,"onUpdate:modelValue":[I[3]||(I[3]=A=>s.value=A),I[4]||(I[4]=A=>{l.value=!0,C.$emit("update:startTime",le(Y2)(A)??0)})],label:"Start Time",placeholder:"00:00",type:"text",class:"flex-1 text-sm",inputClass:["!bg-white border !border-neutral-300",{"!border !border-red-500":l.value&&!s.value}],onBlur:I[5]||(I[5]=()=>{l.value=!0,s.value=le(gc)(C.startTime??0)})},{append:Ce(()=>[_e(oi,{variant:"tertiary",class:"text-sm",onClick:y},{default:Ce(()=>[Ot(" Set ")]),_:1})]),_:1},8,["modelValue","inputClass"]),_e(co,{id:"excerpt__end-time",modelValue:c.value,"onUpdate:modelValue":[I[6]||(I[6]=A=>c.value=A),I[7]||(I[7]=A=>{m.value=!0,C.$emit("update:endTime",le(Y2)(A)??0)})],label:"End Time",placeholder:"00:00",type:"text",class:"flex-1 text-sm",inputClass:["!bg-white border !border-neutral-300",{"!border !border-red-500":m.value&&!c.value}],onBlur:I[8]||(I[8]=()=>{m.value=!0,c.value=le(gc)(C.endTime??0)})},{append:Ce(()=>[_e(oi,{variant:"tertiary",class:"text-sm",onClick:x},{default:Ce(()=>[Ot(" Set ")]),_:1})]),_:1},8,["modelValue","inputClass"])]),_e(UP,{fileObjectId:C.fileObjectId,class:"aspect-video rounded","onUpdate:currentScrubberPosition":I[9]||(I[9]=A=>d.value=A)},null,8,["fileObjectId"])])):st("",!0)]))}}),qX=ue("span",{class:"sr-only"},"Add to Drawer",-1),ZX={class:"flex items-start justify-between gap-2 flex-1"},KX=ue("legend",{class:"sr-only"},"Choose a drawer",-1),XX={class:"flex-1 flex flex-col gap-1"},YX=ue("label",{class:"text-xs uppercase font-medium"},"Existing Drawer",-1),JX=ue("option",{value:""},"-",-1),QX=["value"],eY=ue("p",{class:"mt-8 before:absolute before:top-1/2 before:-translate-y-1/2 before:block before:h-[1px] before:w-full before:left-0 before:bg-transparent-black-100 relative leading-none text-center text-sm"},[ue("span",{class:"bg-neutral-50 relative z-10 px-2"},"or")],-1),tY={key:0,class:"text-xs italic text-red-500 my-2"},nY={class:"p-4 bg-neutral-200"},iY={class:"flex justify-end gap-4"},rY=lt({__name:"AddToDrawerButton",props:{assetId:{}},setup(e){const t=e,i=Fe(!1),r=Fe(""),s=Fe(""),c=Fe("idle"),d=Fe(!1),l=Fe(!1),m=Fe(!1),g=Ha(),y=Ho(),x=es({fileHandlerId:y.activeFileObjectId,name:"",startTime:0,endTime:0}),C=De(()=>s.value.trim()&&!g.drawers.some(q=>q.title===s.value)),I=De(()=>(r.value||s.value.trim())&&!(r.value&&s.value.trim())),A=De(()=>x.startTime>=0&&x.endTime>=0&&x.name.trim()&&Math.abs(x.endTime-x.startTime)>=1),O=De(()=>I.value&&(!d.value||A.value));async function F(){const q=Number.parseInt(r.value),ee=s.value.trim();if(!t.assetId)throw new Error("Cannot add to drawer. No active asset.");if(!q&&!ee)throw new Error("Cannot add to drawer. No new or selected drawer.");if(q&&ee)throw new Error("Cannot add to existing and new drawer at the same time.");if(ee&&!C.value)throw new Error("Drawer name is invalid.");if(q&&isNaN(q))throw new Error("Cannot add to drawer. Drawer ID is not a number.");if(d.value&&!A.value)throw new Error("Cannot add excerpt. Excerpt is invalid.");if(d.value&&!x.fileHandlerId)throw new Error("Cannot add excerpt. No file handler ID.");i.value=!1,c.value="fetching";const Q=isNaN(q)?(await g.createDrawer(ee)).id:q;x.startTime>x.endTime&&([x.startTime,x.endTime]=[x.endTime,x.startTime]),await g.addAssetToDrawer(t.assetId,Q,d.value?x:null),z()}function z(){r.value="",s.value="",c.value="idle",d.value=!1,x.name="",x.startTime=0,x.endTime=0,x.fileHandlerId=y.activeFileObjectId,l.value=!1}const U=Fe(null),{postMessage:H}=VP(U);return Fn(()=>{U.value=document.querySelector(".object-viewer__iframe")}),pn([()=>y.activeFileObjectId,i],async()=>{if(!i.value)return;if(!y.activeFileObjectId){m.value=!1;return}x.fileHandlerId=y.activeFileObjectId;const q=await Un.getFileMetaData(y.activeFileObjectId);m.value=!!(q!=null&&q.handlerType)&&["MovieHandler","AudioHandler"].includes(q.handlerType),m.value&&H({type:Dx.PAUSE_PLAYER})},{immediate:!0}),(q,ee)=>(B(),fe(Ut,null,[_e($c,Hr({class:"add-to-drawer-button",title:"Add to Drawer"},q.$attrs,{onClick:ee[0]||(ee[0]=Q=>i.value=!0)}),{default:Ce(()=>[c.value==="fetching"?(B(),ze(le(Jo),{key:0})):(B(),ze(le(QM),{key:1})),qX]),_:1},16),_e(Vc,{type:"info",label:"Add to Drawer",isOpen:i.value,class:"max-w-xl",onClose:ee[10]||(ee[10]=Q=>i.value=!1)},{footer:Ce(()=>[ue("footer",nY,[ue("div",iY,[_e(oi,{variant:"tertiary",onClick:ee[9]||(ee[9]=Q=>i.value=!1)},{default:Ce(()=>[Ot(" Cancel ")]),_:1}),_e(oi,{class:"text-sm",disabled:!O.value,variant:"primary",onClick:F},{default:Ce(()=>[Ot(" Add to Drawer ")]),_:1},8,["disabled"])])])]),default:Ce(()=>[ue("div",null,[ue("fieldset",ZX,[KX,ue("div",XX,[YX,vs(ue("select",{"onUpdate:modelValue":ee[1]||(ee[1]=Q=>r.value=Q),class:Mn(["border border-neutral-200 rounded w-full text-sm",{" !border-red-500 text-red-700":!I.value&&l.value}]),"on:update:modelValue":ee[2]||(ee[2]=Q=>l.value=!0)},[JX,(B(!0),fe(Ut,null,$n(le(g).drawers,Q=>(B(),fe("option",{key:Q.id,value:Q.id},xt(Q.title),9,QX))),128))],34),[[Nh,r.value]])]),eY,_e(Aw,{modelValue:s.value,"onUpdate:modelValue":[ee[3]||(ee[3]=Q=>s.value=Q),ee[4]||(ee[4]=Q=>l.value=!0)],class:"flex-1",label:"New Drawer",inputClass:["bg-white placeholder-neutral-400 border !border-neutral-200 rounded",{"!border !border-red-500 !text-red-700":!I.value&&l.value}]},null,8,["modelValue","inputClass"])]),!I.value&&l.value?(B(),fe("p",tY," Please select a drawer or enter a new drawer name. ")):st("",!0),le(y).activeFileObjectId&&m.value?(B(),ze(WX,{key:1,startTime:x.startTime,"onUpdate:startTime":ee[5]||(ee[5]=Q=>x.startTime=Q),endTime:x.endTime,"onUpdate:endTime":ee[6]||(ee[6]=Q=>x.endTime=Q),excerptName:x.name,"onUpdate:excerptName":ee[7]||(ee[7]=Q=>x.name=Q),"is-adding-excerpt":d.value,"onUpdate:isAddingExcerpt":ee[8]||(ee[8]=Q=>d.value=Q),fileObjectId:le(y).activeFileObjectId,class:"mt-4"},null,8,["startTime","endTime","excerptName","is-adding-excerpt","fileObjectId"])):st("",!0)])]),_:1},8,["isOpen"])],64))}}),sY=ue("div",{class:"fixed inset-0 z-40 bg-black/70","aria-hidden":"true"},null,-1),aY={class:"fixed inset-0 z-50 flex items-center justify-center p-4"},oY={class:"flex justify-end mt-4 space-x-2"},Mw=lt({__name:"ConfirmModal",props:{isOpen:{type:Boolean},title:{},type:{default:"info"},confirmLabel:{default:"Confirm"},cancelLabel:{default:"Cancel"}},emits:["close","confirm"],setup(e,{emit:t}){const i=e,r=t,s=Fe(null),c=De(()=>i.type==="danger"?"danger":"primary");function d(){r("confirm"),r("close")}function l(){r("close")}return(m,g)=>(B(),ze(le(Rk),{show:m.isOpen,as:"template",class:"confirm-modal fixed inset-0 z-40"},{default:Ce(()=>[_e(le(zU),{as:"div",onClose:l},{default:Ce(()=>[_e(le(l_),{enter:"duration-300 ease-out",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"duration-200 ease-in",leaveFrom:"opacity-100",leaveTo:"opacity-0"},{default:Ce(()=>[sY]),_:1}),ue("div",aY,[_e(le(l_),{enter:"duration-300 ease-out",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"duration-200 ease-in",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",as:"template"},{default:Ce(()=>[_e(le(NU),{class:"flex-1"},{default:Ce(()=>[_e(Im,{title:m.title,type:m.type,isDismissable:"",onDismiss:l},{default:Ce(()=>[En(m.$slots,"default"),ue("div",oY,[_e(oi,{variant:"tertiary",onClick:l},{default:Ce(()=>[Ot(xt(m.cancelLabel),1)]),_:1}),_e(oi,{ref_key:"confirmButtonRef",ref:s,variant:c.value,onClick:d},{default:Ce(()=>[Ot(xt(m.confirmLabel),1)]),_:1},8,["variant"])])]),_:3},8,["title","type"])]),_:3})]),_:3})])]),_:3})]),_:3},8,["show"]))}});function HP(){const e=Ud("returnURL",null),t=Ud("elevatorPlugin",null),i=De(()=>!!t.value),r=Ud("elevatorCallbackType",null),s=Ud("ltiVersion",null),c=Ud("launchId",null),d=Ud("userId",null);function l(){e.value=null,t.value=null,r.value=null}return{returnUrl:e,isInEmbedMode:i,elevatorPlugin:t,elevatorCallbackType:r,elevatorLTIVersion:s,elevatorLaunchId:c,userId:d,clear:l}}const lY={key:2},cY=["innerHTML"],uY={key:1},dY=["action"],hY=ue("input",{type:"hidden",name:"lti_version",value:"LTI-1p0"},null,-1),fY=ue("input",{type:"hidden",name:"lti_message_type",value:"ContentItemSelection"},null,-1),pY=["value"],mY=lt({__name:"AddToEmbeddedPluginButton",props:{fileHandlerId:{}},setup(e){const t=e,i=Ho(),r=ih(),{elevatorPlugin:s,elevatorCallbackType:c,returnUrl:d,elevatorLTIVersion:l,elevatorLaunchId:m,userId:g,clear:y}=HP(),x=Fe(null),C=Fe(!1),I=Fe(null),A=Fe(!1),O=Fe("idle"),F=Fe("");Fn(async()=>{I.value=await Un.getEmbedPluginInterstitial()}),window.addEventListener("beforeunload",()=>y());async function z(){if(O.value="loading",!I.value)throw O.value="error",new Error("Interstitial not loaded");if(I.value.haveInterstitial){C.value=!0;return}A.value=!0}function U(){C.value=!1,O.value="idle"}function H(){C.value=!1,A.value=!0}async function q(){var ee;if(!t.fileHandlerId)throw O.value="error",new Error("File handler ID not set");if(c.value==="lti")if(l.value=="1.3"){const Q=await Un.postLtiPayload13({fileObjectId:t.fileHandlerId,excerptId:"",returnUrl:d.value??"",launchId:m.value??"",userId:g.value??""});document.body.innerHTML+=Q,(ee=document.getElementById("auto_submit"))==null||ee.submit()}else{const Q=await Un.postLtiPayload({fileObjectId:t.fileHandlerId,excerptId:"",returnUrl:d.value??""});F.value=JSON.stringify(Q),Ir(()=>{if(!x.value)throw O.value="error",new Error("Return form not set");x.value.submit(),O.value="success",r.addToast({message:"Added to Canvas"})})}c.value==="JS"&&(window.opener.postMessage({pluginResponse:!0,fileObjectId:i.activeFileObjectId,objectId:i.activeObjectId,currentLink:window.location.href},"*"),O.value="success",r.addToast({message:"Added to WordPress"}),window.close())}return pn(A,q),(ee,Q)=>(B(),fe(Ut,null,[_e($c,{class:"add-to-embedded-plugin-button",title:`Add to ${le(s)||"Elevator Plugin"}`,onClick:z},{default:Ce(()=>[O.value==="loading"?(B(),ze(le(Jo),{key:0})):(B(),fe(Ut,{key:1},[le(s)==="Canvas"?(B(),ze(le(a6),{key:0})):le(s)==="WordPress"?(B(),ze(le(_6),{key:1})):(B(),fe("span",lY,"+ "+xt(le(s)??"Elevator Plugin"),1))],64))]),_:1},8,["title"]),_e(Mw,{isOpen:C.value,title:`Add to ${le(s)}`,onClose:U,onConfirm:H},{default:Ce(()=>{var ve,se;return[(ve=I.value)!=null&&ve.interstitialText?(B(),fe("div",{key:0,innerHTML:(se=I.value)==null?void 0:se.interstitialText},null,8,cY)):(B(),fe("p",uY,"Are you sure you want to add this to "+xt(le(s))+"?",1))]}),_:1},8,["isOpen","title"]),le(c)=="lti"&&le(l)=="1.1"?(B(),fe("form",{key:0,ref_key:"returnForm",ref:x,action:le(d)??"",method:"POST"},[hY,fY,ue("input",{type:"hidden",name:"content_items",value:F.value},null,8,pY)],8,dY)):st("",!0)],64))}}),gY={class:"active-file-view-toolbar"},vY={class:"flex justify-between items-center w-full px-4 py-2"},_Y={class:"flex gap-1 items-center leading-none"},J2=lt({__name:"ActiveFileViewToolbar",props:{fileHandlerId:{},assetId:{}},setup(e){const t=bi(),{isInEmbedMode:i}=HP();return(r,s)=>{var c;return B(),fe("div",gY,[ue("div",vY,[ue("div",_Y,[r.fileHandlerId?(B(),ze(BP,{key:0,fileObjectId:r.fileHandlerId},null,8,["fileObjectId"])):st("",!0),r.assetId&&r.fileHandlerId?(B(),ze(jP,{key:1,assetId:r.assetId,fileObjectId:r.fileHandlerId},null,8,["assetId","fileObjectId"])):st("",!0),r.fileHandlerId?(B(),ze(OX,{key:2,fileObjectId:r.fileHandlerId},null,8,["fileObjectId"])):st("",!0),(c=le(t).currentUser)!=null&&c.canManageDrawers&&r.assetId?(B(),ze(rY,{key:3,assetId:r.assetId},null,8,["assetId"])):st("",!0),le(i)?(B(),ze(mY,{key:4,fileHandlerId:r.fileHandlerId},null,8,["fileHandlerId"])):st("",!0)])])])}}}),yY={class:"object-details-panel"},bY={key:0,class:"h-full flex justify-end"},xY={key:1,class:"flex gap-2"},wY=lt({__name:"ObjectDetailsPanel",props:{assetId:{},objectId:{},fileHandlerId:{},isOpen:{type:Boolean,default:!1},showToggle:{type:Boolean,default:!0}},emits:["toggle"],setup(e){const t=e,i=De(()=>t.objectId?Cl(t.objectId):null);return(r,s)=>(B(),fe("div",yY,[r.objectId?(B(),ze(TP,{key:1,label:"Details",variant:"secondary",isOpen:r.isOpen,showToggle:r.showToggle,class:"h-full",onToggle:s[0]||(s[0]=c=>r.$emit("toggle"))},{"header-utils":Ce(()=>[_e(J2,{fileHandlerId:r.fileHandlerId,assetId:r.objectId},null,8,["fileHandlerId","assetId"])]),default:Ce(()=>[r.objectId?(B(),ze(Lm,{key:0,assetId:r.objectId},null,8,["assetId"])):st("",!0),r.objectId?(B(),fe("footer",xY,[i.value?(B(),ze(AP,{key:0,to:i.value},null,8,["to"])):st("",!0)])):st("",!0)]),_:1},8,["isOpen","showToggle"])):(B(),fe("div",bY,[_e(J2,{fileHandlerId:r.fileHandlerId,assetId:r.assetId},null,8,["fileHandlerId","assetId"])]))]))}}),SY={key:0,class:"mr-1"},Q2=lt({__name:"CollectionTuple",props:{collectionId:{}},setup(e){const t=e,i=bi(),r=De(()=>{if(!t.collectionId)return null;const s=i.collectionIndex[t.collectionId];if(!s)throw new Error(`Collection ${t.collectionId} not found in instanceStore`);const c=[s];let d=s;for(;d.parentId;)d=i.collectionIndex[d.parentId],c.unshift(d);return c});return(s,c)=>{var d;return(d=r.value)!=null&&d.length?(B(),ze(hs,{key:0,label:"Collection"},{default:Ce(()=>[(B(!0),fe(Ut,null,$n(r.value,(l,m)=>(B(),fe(Ut,{key:l.id},[_e(ts,{to:`/collections/${l.id}`,class:Mn({"mr-1":m<r.value.length-1})},{default:Ce(()=>[Ot(xt(l.title),1)]),_:2},1032,["to","class"]),m<r.value.length-1?(B(),fe("span",SY,"/")):st("",!0)],64))),128))]),_:1})):st("",!0)}}}),TY={class:"media-card flex flex-col overflow-hidden border rounded-md shadow-sm"},EY={class:"placeholder-image aspect-video overflow-hidden"},CY={class:"flex items-center justify-center w-full h-full media-card__image"},IY={class:"flex-1 p-4 media-card__body hover:no-underline"},AY=lt({__name:"MediaCard",props:{imgSrc:{},imgAlt:{}},setup(e){return(t,i)=>(B(),fe("article",TY,[ue("div",EY,[ue("div",CY,[t.imgSrc?(B(),ze(td,{key:0,src:t.imgSrc,alt:t.imgAlt||"Untitled",loading:"lazy",class:"object-cover w-full h-full"},null,8,["src","alt"])):(B(),ze(le(em),{key:1}))])]),ue("div",IY,[En(t.$slots,"default",{},void 0,!0)]),En(t.$slots,"footer",{},void 0,!0)]))}});const MY=ln(AY,[["__scopeId","data-v-a8eaec7b"]]),kY=ue("span",{class:"sr-only"},"Remove",-1),PY=lt({__name:"RemoveFromDrawerButton",props:{drawerId:{},objectId:{},excerptId:{}},setup(e){const t=e,i=Ha(),r=De(()=>i.getDrawerById(t.drawerId)),s=De(()=>{var x,C,I;return(I=(C=(x=r.value)==null?void 0:x.contents)==null?void 0:C.matches)==null?void 0:I.find(A=>A.objectId===t.objectId)}),c=De(()=>{var x,C,I;return(I=(C=(x=r.value)==null?void 0:x.contents)==null?void 0:C.matches)==null?void 0:I.find(A=>A.excerptId===t.excerptId)}),d=Fe(!1),l=De(()=>{var C;const x=(C=s.value)==null?void 0:C.title;return x?Array.isArray(x)?ho(x[0]):ho(x):null}),m=De(()=>{var x;return((x=c.value)==null?void 0:x.excerptLabel)??null}),g=De(()=>{var x;return(x=r.value)==null?void 0:x.title});async function y(){if(t.excerptId)return i.removeExcerptFromDrawer({drawerId:t.drawerId,excerptId:t.excerptId});i.removeAssetFromDrawer({drawerId:t.drawerId,assetId:t.objectId})}return(x,C)=>(B(),fe(Ut,null,[ue("button",Hr({class:"bg-white w-6 h-6 text-neutral-500 inline-flex justify-center items-center rounded-full shadow-sm border border-neutral-200 hover:bg-neutral-900 hover:text-neutral-200 transition-all remove-from-drawer-button",title:"Remove"},x.$attrs,{onClick:C[0]||(C[0]=I=>d.value=!0)}),[kY,Ot(" × ")],16),_e(Mw,{isOpen:d.value,title:"Remove from drawer",type:"danger",confirmLabel:"Remove",onClose:C[1]||(C[1]=I=>d.value=!1),onConfirm:y},{default:Ce(()=>[Ot(" Are you sure you want to remove "),ue("b",null,xt(x.excerptId?m.value??"this excerpt":l.value??"this asset"),1),Ot(" from the drawer "),ue("b",null,xt(g.value),1),Ot(" ? ")]),_:1},8,["isOpen"])],64))}}),DY={key:0},LY=ue("dt",{class:"font-bold text-xs uppercase"},"Collection",-1),OY=lt({__name:"CollectionHeirarchy",props:{collectionHierarchy:{}},setup(e){return(t,i)=>{var r;return(r=t.collectionHierarchy)!=null&&r.length?(B(),fe("div",DY,[LY,ue("dd",null,[(B(!0),fe(Ut,null,$n(t.collectionHierarchy,s=>(B(),fe("span",{key:s.id,class:"after:content-['/'] after:mr-1 after:ml-1 after:text-neutral-400 after:last:content-none"},xt(s.title),1))),128))])])):st("",!0)}}}),RY=e=>(ja("data-v-5b29969f"),e=e(),Va(),e),FY={class:"search-result-card relative rounded-lg"},$Y={class:"absolute top-1 right-1 z-10 flex gap-1"},zY={class:"search-result-card__title font-bold leading-tight mb-2"},NY={class:"search-result-card__contents max-h-[15rem] overflow-y-auto overflow-x-hidden"},BY={class:"text-sm flex flex-col gap-2"},jY={class:"font-bold text-xs uppercase"},VY={key:1},UY=RY(()=>ue("dt",{class:"font-bold text-xs uppercase"},"Template",-1)),HY=lt({__name:"SearchResultCard",props:{searchMatch:{},drawerId:{},mediaCardClass:{}},setup(e){const t=e,i=bi(),r=De(()=>{if(!t.searchMatch.excerpt)return null;if(!t.searchMatch.excerptId)throw new Error("Excerpt is missing excerptId");return`/asset/viewExcerpt/${t.searchMatch.excerptId}`}),s=De(()=>t.searchMatch.excerpt?t.searchMatch.excerptLabel:null),c=De(()=>Cl(t.searchMatch.objectId)),d=De(()=>Array.isArray(t.searchMatch.title)?t.searchMatch.title.map(m=>ho(m)).join(","):t.searchMatch.title&&t.searchMatch.title.length>0?ho(t.searchMatch.title):"(no title)"),l=De(()=>{const{excerptAsset:m,primaryHandlerThumbnail2x:g}=t.searchMatch;return m?Nc(m):g??null});return(m,g)=>{var y;return B(),fe("div",FY,[m.drawerId&&((y=le(i).currentUser)!=null&&y.canManageDrawers)?(B(),ze(PY,{key:0,class:"absolute top-0 right-0 -translate-y-1/2 translate-x-1/2 z-10 remove-from-drawer-btn",drawerId:m.drawerId,objectId:m.searchMatch.objectId,excerptId:m.searchMatch.excerptId??void 0},null,8,["drawerId","objectId","excerptId"])):st("",!0),_e(ts,{to:r.value??c.value,class:"rounded-md hover:no-underline"},{default:Ce(()=>[_e(MY,{imgSrc:l.value,imgAlt:d.value,class:Mn(["search-result-card__media-card flex w-full h-full relative transition-colors",m.mediaCardClass])},{default:Ce(()=>[ue("div",$Y,[!m.searchMatch.excerpt&&m.searchMatch.fileAssets&&m.searchMatch.fileAssets>1?(B(),ze(v_,{key:0,class:"!bg-neutral-900 !text-neutral-200 border !border-neutral-900"},{default:Ce(()=>[Ot(xt(m.searchMatch.fileAssets)+" files ",1)]),_:1})):st("",!0),m.searchMatch.excerpt?(B(),ze(v_,{key:1,class:"!bg-neutral-50 !text-neutral-900 border !border-neutral-50"},{default:Ce(()=>[Ot(" Excerpt ")]),_:1})):st("",!0)]),ue("h1",zY,xt(s.value??d.value),1),ue("div",NY,[ue("dl",BY,[(B(!0),fe(Ut,null,$n(t.searchMatch.entries,(x,C)=>{var I;return B(),fe("div",{key:C},[ue("dt",jY,xt((x==null?void 0:x.label)??"Item"),1),ue("dd",null,xt((I=x.entries)==null?void 0:I.join(", ")),1)])}),128)),le(i).instance.showCollectionInSearchResults?(B(),ze(OY,{key:0,collectionHierarchy:t.searchMatch.collectionHierarchy},null,8,["collectionHierarchy"])):st("",!0),le(i).instance.showTemplateInSearchResults?(B(),fe("div",VY,[UY,ue("dd",null,xt(m.searchMatch.template.name),1)])):st("",!0)])])]),_:1},8,["imgSrc","imgAlt","class"])]),_:1},8,["to"])])}}});const __=ln(HY,[["__scopeId","data-v-5b29969f"]]);const GY={},WY={class:"more-like-this__count inline-flex items-center px-2 py-1 text-xs font-bold rounded-full"};function qY(e,t){return B(),fe("span",WY,[En(e.$slots,"default",{},void 0,!0)])}const Lx=ln(GY,[["render",qY],["__scopeId","data-v-67b76540"]]),ZY=lt({__name:"ButtonWithCount",props:{count:{}},setup(e){return(t,i)=>(B(),ze(oi,null,{default:Ce(()=>[En(t.$slots,"default"),_e(Lx,null,{default:Ce(()=>[Ot(xt(t.count),1)]),_:1})]),_:3}))}}),GP=e=>(ja("data-v-23538bf6"),e=e(),Va(),e),KY={key:0,class:"more-like-this"},XY={key:0,class:"pt-6 mt-6"},YY={class:"more-like-this__title flex flex-wrap items-center gap-2 mb-4 text-xl font-bold"},JY=GP(()=>ue("span",null,"More Like This",-1)),QY=GP(()=>ue("span",null,"More Like This",-1)),eJ={class:"grid grid-cols-3 gap-2"},tJ=lt({__name:"MoreLikeThis",props:{items:{},listContainerClass:{}},setup(e){const t=e,i=De(()=>t.items.slice(0,Zn.instance.moreLikeThis.maxInlineResults)),r=De(()=>t.items.length-i.value.length),s=Fe(!1);return(c,d)=>c.items.length?(B(),fe("section",KY,[i.value.length?(B(),fe("div",XY,[ue("h3",YY,[JY,_e(Lx,null,{default:Ce(()=>[Ot(xt(c.items.length),1)]),_:1})]),ue("div",{class:Mn(["flex flex-col gap-2",c.listContainerClass])},[(B(!0),fe(Ut,null,$n(i.value,l=>(B(),ze(__,{key:l.objectId,searchMatch:l},null,8,["searchMatch"]))),128))],2)])):st("",!0),r.value?(B(),ze(ZY,{key:1,count:r.value,class:"my-4",onClick:d[0]||(d[0]=l=>s.value=!0)},{default:Ce(()=>[Ot(xt(le(Zn).instance.moreLikeThis.maxInlineResults?"Show More":"More Like This"),1)]),_:1},8,["count"])):st("",!0),_e(Vc,{label:"More Like This",isOpen:s.value,onClose:d[1]||(d[1]=l=>s.value=!1)},{label:Ce(()=>[QY,_e(Lx,{class:"ml-2"},{default:Ce(()=>[Ot(xt(c.items.length),1)]),_:1})]),default:Ce(()=>[ue("div",eJ,[(B(!0),fe(Ut,null,$n(c.items,l=>(B(),ze(__,{key:l.objectId,searchMatch:l},null,8,["searchMatch"]))),128))])]),_:1},8,["isOpen"])])):st("",!0)}});const WP=ln(tJ,[["__scopeId","data-v-23538bf6"]]),nJ={class:"asset-details-panel"},iJ=lt({__name:"AssetDetailsPanel",props:{assetId:{},isOpen:{type:Boolean,default:!0},showToggle:{type:Boolean,default:!0}},emits:["toggle"],setup(e){const t=e,i=De(()=>t.assetId),{asset:r,template:s}=hy(i),c=Fe([]),d=De(()=>{var x,C;return((x=s.value)==null?void 0:x.showCollection)&&((C=s.value)==null?void 0:C.showCollectionPosition)===hv.BOTTOM}),l=De(()=>{var x,C;return((x=s.value)==null?void 0:x.showCollection)&&((C=s.value)==null?void 0:C.showCollectionPosition)===hv.TOP}),m=De(()=>{var x,C;return((x=s.value)==null?void 0:x.showTemplate)&&((C=s.value)==null?void 0:C.showTemplatePosition)===hv.BOTTOM}),g=De(()=>{var x,C;return((x=s.value)==null?void 0:x.showTemplate)&&((C=s.value)==null?void 0:C.showTemplatePosition)===hv.TOP});pn(i,async()=>{c.value=await Un.getMoreLikeThis(i.value)},{immediate:!0});const y=De(()=>r.value?Xu(r.value):"");return(x,C)=>(B(),fe("div",nJ,[_e(TP,{label:y.value,isOpen:x.isOpen,showToggle:x.showToggle,class:"h-full py-4 md:py-0",onToggle:C[0]||(C[0]=I=>x.$emit("toggle"))},{"header-label":Ce(()=>[_e(SP,{label:y.value||"(No Title)",class:Mn({"text-2xl":x.isOpen})},null,8,["label","class"])]),default:Ce(()=>[x.assetId&&le(r)&&le(s)?(B(),fe(Ut,{key:0},[l.value?(B(),ze(Q2,{key:0,collectionId:le(r).collectionId,label:"Collection"},null,8,["collectionId"])):st("",!0),g.value?(B(),ze(hs,{key:1,label:"Template"},{default:Ce(()=>[Ot(xt(le(s).templateName),1)]),_:1})):st("",!0),_e(Lm,{assetId:x.assetId,class:"py-4 md:py-0"},null,8,["assetId"]),d.value?(B(),ze(Q2,{key:2,collectionId:le(r).collectionId,label:"Collection"},null,8,["collectionId"])):st("",!0),m.value?(B(),ze(hs,{key:3,label:"Template"},{default:Ce(()=>[Ot(xt(le(s).templateName),1)]),_:1})):st("",!0),_e(WP,{items:c.value},null,8,["items"])],64)):st("",!0)]),_:1},8,["label","isOpen","showToggle"])]))}}),rJ={class:"asset-view-page__asset-view h-full relative"},sJ=lt({__name:"AssetView",props:{assetId:{},objectId:{}},setup(e){const t=Fe(!0),i=Fe(!1),r=Ho(),s=$N("(min-width: 768px)");return(c,d)=>(B(),fe("div",rJ,[_e(wP,{class:Mn(["asset-view__object-viewer h-[75vh] md:h-auto md:absolute md:top-0 border-t-0 border-b-asset-view",{"md:top-0 md:bottom-1/2 md:left-sm md:right-0 border-l-asset-view":t.value&&i.value,"md:top-0 md:bottom-16 md:left-sm md:right-0 border-l-asset-view":t.value&&!i.value,"md:top-0 md:bottom-16 md:left-0 md:right-sm border-r-asset-view":!t.value&&i.value,"md:top-0 md:bottom-16 md:left-0 md:right-0":!t.value&&!i.value}]),fileHandlerId:le(r).activeFileObjectId},null,8,["class","fileHandlerId"]),_e(iJ,{class:Mn(["asset-view__asset-panel md:absolute",{"asset-view__asset-panel--open":t.value,"md:bottom-0 md:left-0 md:top-0 md:w-sm":t.value,"md:bottom-0 md:left-0 md:h-16 md:right-sm border-r-asset-view":!t.value&&i.value,"md:bottom-0 md:left-0 md:h-16 md:w-1/2":!t.value&&!i.value}]),showToggle:le(s),assetId:le(r).activeAssetId,isOpen:le(s)?t.value:!0,onToggle:d[0]||(d[0]=l=>t.value=!t.value)},null,8,["class","showToggle","assetId","isOpen"]),_e(wY,{class:Mn(["asset-view__details-panel md:absolute",{"asset-view__details-panel--open":i.value,"border-l-asset-view":!i.value,"md:bottom-0 md:right-0 md:h-16 md:left-sm":!i.value&&t.value,"md:bottom-0 md:right-0 md:h-1/2 md:left-sm border-l-asset-view":i.value&&t.value,"md:bottom-0 md:right-0 md:top-0 md:w-sm":i.value&&!t.value,"md:bottom-0 md:right-0 md:h-16 md:w-1/2":!i.value&&!t.value}]),showToggle:le(s),assetId:le(r).activeAssetId,objectId:le(r).activeObjectId,fileHandlerId:le(r).activeFileObjectId,isOpen:le(s)?i.value:!0,onToggle:d[1]||(d[1]=l=>i.value=!i.value)},null,8,["class","showToggle","assetId","objectId","fileHandlerId","isOpen"])]))}});const aJ=ln(sJ,[["__scopeId","data-v-1b213a75"]]),oJ={class:"asset-view-page__meta-data-only-view h-full relative"},lJ={class:"meta-data-only-view__inner h-full sm:p-8"},cJ={class:"meta-data-only-view__article m-auto sm:max-w-3xl h-full overflow-auto p-4 sm:p-12 rounded shadow sm:px-12"},uJ={class:"text-3xl mb-12 sm:text-5xl font-bold py-8 after:content-[''] after:w-8 after:h-2 after:block relative after:absolute after:bottom-0 after:left-0"},dJ=lt({__name:"MetaDataOnlyView",props:{assetId:{}},setup(e){const t=e,i=De(()=>t.assetId),{asset:r}=hy(i),s=De(()=>r.value?Xu(r.value):"Unknown"),c=Fe([]);return pn(i,async()=>{c.value=await Un.getMoreLikeThis(i.value)},{immediate:!0}),(d,l)=>(B(),fe("div",oJ,[ue("div",lJ,[ue("article",cJ,[ue("h2",uJ,xt(s.value||"(No Title)"),1),d.assetId?(B(),ze(Lm,{key:0,assetId:d.assetId},null,8,["assetId"])):st("",!0),d.assetId?(B(),ze(WP,{key:1,items:c.value,listContainerClass:"sm:!grid sm:!grid-cols-2"},null,8,["items"])):st("",!0)])])]))}});const hJ=ln(dJ,[["__scopeId","data-v-1a0e37ac"]]),qP=(e="")=>{const t=bi(),i=Fe(e),r=De(()=>i.value?`${i.value} | ${t.instance.name}`:t.instance.name);return qN(r),i},fJ={key:0,class:"prev-next-search-result-nav justify-between items-center gap-4 grid grid-cols-3 px-4 py-1"},pJ={class:"flex justify-start"},mJ={class:"flex justify-center text-xs text-gray-500 leading-none p-2"},gJ={class:"flex justify-end"},vJ=5,_J=lt({__name:"PrevNextSearchResultNav",setup(e){const t=Ho(),i=Pr(),r=De(()=>{const{activeAssetId:l}=t;if(!l)return null;const m=i.matches.findIndex(g=>g.objectId===l);return m===-1?null:m});function s(){return r.value!==null&&i.hasMoreResults&&i.matches.length-r.value<=vJ}pn([()=>i.matches,r],()=>{s()&&i.loadMore()});const c=De(()=>{const l=r.value;return l===null||l<=0?null:i.matches[l-1].objectId}),d=De(()=>{var m;const l=r.value;return l===null||l+1>=i.matches.length||i.status=="fetching"?null:((m=i.matches[l+1])==null?void 0:m.objectId)??null});return(l,m)=>r.value!==null?(B(),fe("nav",fJ,[ue("div",pJ,[c.value?(B(),ze(oi,{key:0,variant:"tertiary",to:le(Cl)(c.value)},{default:Ce(()=>[_e(le(ek),{class:"h-3 w-3"}),Ot(" Prev ")]),_:1},8,["to"])):st("",!0)]),ue("div",mJ,[_e(oi,{to:{name:"search",params:{searchId:le(i).searchId},query:{objectId:le(t).activeAssetId,resultsView:le(i).resultsView}},variant:"tertiary"},{default:Ce(()=>[Ot(xt(r.value+1)+" of "+xt(le(i).totalResults),1)]),_:1},8,["to"])]),ue("div",gJ,[d.value?(B(),ze(oi,{key:0,variant:"tertiary",to:le(Cl)(d.value),class:"!ml-0"},{default:Ce(()=>[Ot(" Next "),_e(le(tk),{class:"h-3 w-3"})]),_:1},8,["to"])):st("",!0)])])):st("",!0)}});function eC(e){return e==" "||e==`
`||e=="\r"||e=="	"}function yJ(e){return e=='"'||e=="'"}const ph="<",py=">",y_="&lt;",ZP="&gt;";class om{constructor(t){this.options=t}consume(t,i){return t==ph?(i(new bJ(this.options)),""):t==py&&this.options.encodePlaintextTagDelimiters?ZP:t}}class bJ{constructor(t){this.options=t,this.nameBuffer="",this.isClosingTag=!1}consume(t,i){if(this.nameBuffer.length==0){if(eC(t))return i(new om(this.options)),(this.options.encodePlaintextTagDelimiters?y_:"<")+t;if(t=="/")return this.isClosingTag=!0,""}return eC(t)?this.isNameBufferAnAllowedTag()?(i(new Ox(0,this.options)),ph+(this.isClosingTag?"/":"")+this.nameBuffer+t):(i(new Ox(1,this.options)),this.options.tagReplacementText):t==ph?(this.nameBuffer+=y_,""):t==py?(i(new om(this.options)),this.isNameBufferAnAllowedTag()?ph+(this.isClosingTag?"/":"")+this.nameBuffer+t:this.options.tagReplacementText):t=="-"&&this.nameBuffer=="!-"?(i(new wJ(this.options)),""):(this.nameBuffer+=t,"")}isNameBufferAnAllowedTag(){const t=this.nameBuffer.toLowerCase();return this.options.allowedTags?this.options.allowedTags.has(t):this.options.disallowedTags?!this.options.disallowedTags.has(t):!1}}class Ox{constructor(t,i){this.mode=t,this.options=i}consume(t,i){return t==py?i(new om(this.options)):yJ(t)&&i(new xJ(this.mode,t,this.options)),this.mode==1?"":t==ph?y_:t}}class xJ{constructor(t,i,r){this.mode=t,this.quoteCharacter=i,this.options=r}consume(t,i){return t==this.quoteCharacter&&i(new Ox(this.mode,this.options)),this.mode==1?"":t==ph?y_:t==py?ZP:t}}class wJ{constructor(t){this.options=t,this.consecutiveHyphens=0}consume(t,i){return t==">"&&this.consecutiveHyphens>=2?i(new om(this.options)):t=="-"?this.consecutiveHyphens++:this.consecutiveHyphens=0,""}}const SJ={tagReplacementText:"",encodePlaintextTagDelimiters:!0};class TJ{constructor(t={}){this.state=new om(Object.assign(Object.assign({},SJ),t)),this.transitionFunction=(i=>{this.state=i}).bind(this)}consume(t){let i="";for(const r of t)i+=this.state.consume(r,this.transitionFunction);return i}}function EJ(e,t={}){return new TJ(t).consume(e)}const CJ=lt({__name:"AssetViewPage",props:{assetId:{},objectId:{default:null}},setup(e){const t=Ho(),i=De(()=>!t.activeFileObjectId),r=Fe(!1),s=Ju(),c=e,d=De(()=>{var g;return((g=s.hash)==null?void 0:g.substring(1))||c.objectId||null}),l=qP();async function m(){r.value=!1;const g=await t.setActiveAsset(c.assetId,d.value);if(!g){l.value="Asset not found",r.value=!0;return}const y=Xu(g);l.value=EJ(y),r.value=!0}return pn([()=>c.assetId,()=>{var g;return(g=s.params)==null?void 0:g.assetId}],m,{immediate:!0}),pn([()=>c.objectId,()=>s.hash],async()=>{await t.setActiveObject(d.value)}),VB(()=>{t.setActiveAsset(null)}),(g,y)=>(B(),ze(xP,{class:"overflow-x-hidden asset-view-page"},{secondaryAppHeader:Ce(()=>[_e(_J)]),default:Ce(()=>[r.value?(B(),fe(Ut,{key:0},[i.value?(B(),ze(hJ,{key:0,assetId:le(t).activeAssetId},null,8,["assetId"])):(B(),ze(aJ,{key:1,assetId:le(t).activeAssetId,objectId:le(t).activeObjectId},null,8,["assetId","objectId"]))],64)):st("",!0)]),_:1}))}}),IJ={class:"all-collections-page__collection-item p-4 rounded border transition-colors duration-150"},AJ={class:"flex items-center gap-1"},MJ={key:0},kJ=lt({__name:"CollectionItem",props:{collection:{}},setup(e){const t=e,i=De(()=>{const s=t.collection.previewImageId;return s?Nc(s):null}),r=Fe(!1);return(s,c)=>{const d=j_("CollectionItem",!0);return B(),fe("div",IJ,[ue("div",AJ,[s.collection.children&&s.collection.children.length>0?(B(),fe("button",{key:0,class:"p-2 -ml-2 rounded-full inline-flex items-center justify-center hover:bg-white transition-colors duration-150",onClick:c[0]||(c[0]=l=>r.value=!r.value)},[_e(le(Vh),{class:Mn(["transform w-4 h-4",{"-rotate-90":!r.value}])},null,8,["class"])])):st("",!0),_e(ts,{class:"flex gap-2 flex-1 items-center !no-underline h-full",to:`/collections/browseCollection/${s.collection.id}`},{default:Ce(()=>[i.value?(B(),ze(td,{key:0,src:i.value,alt:s.collection.title,class:"w-6 h-6 object-cover rounded-md"},null,8,["src","alt"])):st("",!0),ue("h2",{class:Mn({"font-bold":r.value})},xt(s.collection.title),3)]),_:1},8,["to"])]),s.collection.children?(B(),fe("div",MJ,[(B(!0),fe(Ut,null,$n(s.collection.children,l=>vs((B(),ze(d,{key:l.id,collection:l,class:"!p-0 m-2 ml-8"},null,8,["collection"])),[[_a,r.value]])),128))])):st("",!0)])}}});const PJ=ln(kJ,[["__scopeId","data-v-4dbfe5ff"]]),DJ=e=>(ja("data-v-7c995165"),e=e(),Va(),e),LJ={class:"p-8 px-4"},OJ=DJ(()=>ue("h1",{class:"text-4xl font-bold my-8"},"Collections",-1)),RJ=lt({__name:"AllCollectionsPage",setup(e){bm(l=>({"180a537c":s.value,18112662:d.value}));const t=bi(),i=Fe(null),r=De(()=>t.collections),s=Fe(1),c=Fe(null);Fn(async()=>{const l=t.pages.find(m=>m.title==="Collection Page");l&&(c.value=await Un.getStaticPage(l.id))}),Q_(i,l=>{const[m]=l,{width:g}=m.contentRect;g<640&&(s.value=1),g<768&&(s.value=2),g<1024&&(s.value=3),g>=1024&&(s.value=4)});const d=De(()=>{const l=r.value.length;return Math.ceil(l/s.value)});return(l,m)=>(B(),ze(yo,{class:"all-collections-page"},{"custom-header":Ce(()=>[le(t).customHeaderMode==1?(B(),ze(Ll,{key:0})):st("",!0)]),default:Ce(()=>{var g;return[ue("div",LJ,[OJ,(g=c.value)!=null&&g.content?(B(),ze(qo,{key:0,class:"mb-8",html:c.value.content},null,8,["html"])):st("",!0),ue("div",{ref_key:"collectionGrid",ref:i,class:"grid"},[(B(!0),fe(Ut,null,$n(r.value,y=>(B(),ze(PJ,{key:y.id,collection:y},null,8,["collection"]))),128))],512)])]}),_:1}))}});const FJ=ln(RJ,[["__scopeId","data-v-7c995165"]]),$J=lt({__name:"BrowseCollectionPage",props:{collectionId:{}},setup(e){const t=e,i=_o();return pn([()=>t.collectionId],async()=>{const r=await Un.getSearchIdForCollection(t.collectionId);i.replace(`/search/s/${r}`)},{immediate:!0}),(r,s)=>(B(),ze(yo,{class:"browse-collection-page"}))}}),zJ={class:"search-results-page__browser-collection-header"},NJ={class:"pb-8 my-8"},BJ={key:0,class:"text-4xl font-bold mt-4"},jJ=lt({__name:"BrowseCollectionHeader",props:{collectionId:{}},setup(e){const t=e,i=bi(),r=Fe(null);return pn([()=>t.collectionId,()=>i.isReady],async()=>{i.isReady&&(r.value=await i.getCollectionById(t.collectionId))},{immediate:!0}),(s,c)=>{var d,l,m;return B(),fe("div",zJ,[ue("header",NJ,[_e(ts,{to:"/search/listCollections",class:"flex items-center gap-1"},{default:Ce(()=>[_e(le(Qu),{class:"transform rotate-180 h-4 w-4"}),Ot(" Back to Collections ")]),_:1}),(d=r.value)!=null&&d.title?(B(),fe("h2",BJ," Browsing "+xt((l=r.value)==null?void 0:l.title),1)):st("",!0),(m=r.value)!=null&&m.description?(B(),ze(qo,{key:1,html:r.value.description,class:"prose max-w-screen-lg mt-2"},null,8,["html"])):st("",!0),r.value?st("",!0):(B(),ze(No,{key:2,class:"!w-1/2 !h-12 !my-8"}))])])}}}),VJ={key:0,class:"tab"},Ro=lt({__name:"Tab",props:{id:{},label:{}},setup(e){const t=e,i=yi(nP);return Fn(()=>{if(!i)throw new Error("TabsContext not found");i.addTab(t)}),Hi(()=>{if(!i)throw new Error("TabsContext not found");i.removeTab(t)}),(r,s)=>{var c;return(c=le(i))!=null&&c.isActiveTab(r.id)?(B(),fe("div",VJ,[En(r.$slots,"default")])):st("",!0)}}}),UJ={class:"tabs"},HJ=["onClick"],GJ={class:"py-4"},KP=lt({__name:"Tabs",props:{labelsClass:{},activeTabId:{}},emits:["tabChange"],setup(e,{emit:t}){const i=e,r=t,s=Fe([]),c=g=>{s.value.push(g)},d=g=>{const y=s.value.findIndex(x=>x.id===g.id);y!==-1&&s.value.splice(y,1)},l=g=>{const y=s.value.find(x=>x.id===g);if(!y)throw new Error(`Tab with id ${g} not found`);r("tabChange",y)};return ki(nP,{addTab:c,removeTab:d,setActiveTab:l,isActiveTab:g=>g===i.activeTabId}),(g,y)=>(B(),fe("div",UJ,[ue("div",{class:Mn(["flex",g.labelsClass])},[(B(!0),fe(Ut,null,$n(s.value,x=>(B(),fe("button",{key:x.id,class:Mn([`tab-button tab-button--${x.id} px-4 py-2 text-sm border-b-2`,{"border-transparent text-neutral-400":x.id!==g.activeTabId,"tab-button--is-active border-neutral-900 text-neutral-900 font-bold":x.id===g.activeTabId}]),onClick:C=>l(x.id)},xt(x.label),11,HJ))),128))],2),ue("div",GJ,[En(g.$slots,"default")])]))}}),WJ={class:"skeleton-card flex flex-col overflow-hidden border rounded-md shadow-sm"},qJ={class:"placeholder-image aspect-video flex items-center justify-center w-full overflow-hidden"},ZJ={class:"flex-1 p-4"},KJ=lt({__name:"SkeletonCard",setup(e){return(t,i)=>(B(),fe("article",WJ,[ue("div",qJ,[_e(No,{width:"100%",height:"100%",class:"rounded-none"},{default:Ce(()=>[_e(tw,{class:"opacity-25 w-8 h-8"})]),_:1})]),ue("div",ZJ,[_e(No,{height:"1.5rem",width:"50%",class:"mb-4"}),(B(),fe(Ut,null,$n(3,r=>_e(No,{key:r,class:"mb-2",height:"0.75rem"})),64))])]))}}),XJ={class:"search-results-grid"},YJ={class:"grid grid-cols-auto-md gap-4"},JJ=lt({__name:"SearchResultsGrid",props:{totalResults:{default:void 0},matches:{},status:{},drawerId:{default:void 0}},emits:["loadMore"],setup(e,{emit:t}){const i=e,r=t,{arrivedState:s}=ey(window,{offset:{bottom:100}});pn(s,d=>{d.bottom&&c.value&&i.status!=="fetching"&&r("loadMore")},{immediate:!0});const c=De(()=>(i.totalResults??1/0)>i.matches.length);return(d,l)=>(B(),fe("div",XJ,[ue("div",YJ,[(B(!0),fe(Ut,null,$n(d.matches,m=>(B(),ze(__,{id:`object-${m.objectId}`,key:m.objectId,searchMatch:m,showDetails:!1,drawerId:d.drawerId},null,8,["id","searchMatch","drawerId"]))),128)),(B(!0),fe(Ut,null,$n(Math.min(30,(d.totalResults??1/0)-d.matches.length),m=>vs((B(),ze(KJ,{key:m})),[[_a,d.status==="fetching"]])),128))])]))}}),QJ={key:1,class:"h-8 w-8 sm:h-16 sm:w-16"},eQ={class:"flex-1"},tQ={class:"font-bold text-md sm:text-lg leading-tight sm:mb-2 group-hover:text-blue-700 group-focus:text-blue-700"},nQ={key:0,class:"inline-flex items-baseline gap-x-4 sm:gap-y-2 flex-wrap m-0"},iQ={class:"text-xs uppercase"},rQ={class:"text-sm"},sQ={class:"not-sr-only hidden sm:inline-flex self-center rounded-full w-10 h-10 items-center justify-center group-hover:bg-blue-700 transition-all"},XP=lt({__name:"SearchResultRow",props:{searchMatch:{}},setup(e){const t=e,i=De(()=>Array.isArray(t.searchMatch.title)?t.searchMatch.title.map(ho).join(","):t.searchMatch.title&&t.searchMatch.title.length>0?ho(t.searchMatch.title):"(no title)"),r=De(()=>{const{primaryHandlerId:s}=t.searchMatch;return s?Nc(s):null});return(s,c)=>(B(),ze(ts,{to:le(Cl)(s.searchMatch.objectId),class:"search-result-row group hover:no-underline relative text-inherit group focus:outline-blue-600 focus:outline-offset-2 focus-within:outline-solid search-result-row flex bg-white p-2 sm:p-4 gap-4 group-hover:bg-blue-50 transition-all rounded-md border-2 border-transparent hover:border-blue-600 group-focus:bg-blue-50 group-focus:border-blue-600 items-center"},{default:Ce(()=>{var d;return[r.value?(B(),ze(td,{key:0,src:r.value,alt:i.value,class:"h-8 w-8 sm:h-16 sm:w-16 object-cover rounded-md overflow-hidden"},null,8,["src","alt"])):(B(),fe("div",QJ)),ue("div",eQ,[ue("h1",tQ,xt(i.value),1),(d=t.searchMatch)!=null&&d.entries?(B(),fe("dl",nQ,[(B(!0),fe(Ut,null,$n(t.searchMatch.entries,(l,m)=>{var g;return B(),fe("div",{key:m,class:"inline-flex items-baseline gap-x-2 flex-wrap text-neutral-400 group-hover:text-blue-700 group-focus:text-blue-700"},[ue("dt",iQ,xt((l==null?void 0:l.label)||"Item"),1),ue("dd",rQ,xt((g=l.entries)==null?void 0:g.join(", ")),1)])}),128))])):st("",!0)]),ue("div",sQ,[_e(le(Qu),{class:"text-neutral-900 group-hover:text-white transition-all"})])]}),_:1},8,["to"]))}}),aQ={class:"skeleton-result-row flex bg-white p-2 sm:p-4 gap-4 rounded-md border-2 border-transparent"},oQ={class:"flex-1"},lQ=lt({__name:"SkeletonResultRow",setup(e){return(t,i)=>(B(),fe("div",aQ,[_e(No,{width:"4rem",height:"4rem"},{default:Ce(()=>[_e(tw,{class:"opacity-25"})]),_:1}),ue("div",oQ,[_e(No,{width:"25%",height:"1.25rem",class:"mb-4"}),(B(),fe(Ut,null,$n(2,r=>_e(No,{key:r,class:"my-2",height:"0.75rem",width:"50%"})),64))])]))}}),cQ={class:"search-results-list"},uQ={class:"flex flex-col gap-1"},dQ=lt({__name:"SearchResultsList",props:{totalResults:{},matches:{},status:{}},emits:["loadMore"],setup(e,{emit:t}){const i=e,r=t,{arrivedState:s}=ey(window,{offset:{bottom:100}});pn(s,d=>{d.bottom&&c.value&&i.status!=="fetching"&&r("loadMore")},{immediate:!0});const c=De(()=>(i.totalResults??1/0)>i.matches.length);return(d,l)=>(B(),fe("div",cQ,[ue("div",uQ,[(B(!0),fe(Ut,null,$n(d.matches,m=>(B(),ze(XP,{id:`object-${m.objectId}`,key:m.objectId,searchMatch:m,showDetails:!1},null,8,["id","searchMatch"]))),128)),(B(!0),fe(Ut,null,$n(Math.min(30,(d.totalResults??1/0)-d.matches.length),m=>vs((B(),ze(lQ,{key:m})),[[_a,d.status==="fetching"]])),128))])]))}});const Ko=navigator?navigator.userAgent.toLowerCase():"no-user-agent-specified",Dh=document?document.documentElement:null,hQ=Ko?Ko.indexOf("phantom")!==-1:!1,Fm=window&&"ActiveXObject"in window;Fm&&Ko.match(/MSIE 9/i);const my=Ko.indexOf("webkit")!==-1;Ko.indexOf("android");const fQ=Ko.search("android [23]")!==-1,nd=window?typeof window.orientation<"u":!1,pQ=navigator&&window?navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&!window.PointerEvent:!1,mQ=navigator&&window?window.PointerEvent&&navigator.pointerEnabled&&navigator.maxTouchPoints:pQ,YP=window?window.opera:!1;Ko.indexOf("gecko");const Lh=Ko.indexOf("gecko")!==-1&&!my&&!YP&&!Fm;Ko.indexOf("chrome");const gQ=Ko.indexOf("edge/")!==-1;Dh&&Fm&&"transition"in Dh.style;window&&"WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix;Dh&&"MozPerspective"in Dh.style;Dh&&"OTransition"in Dh.style;let tC=window?"devicePixelRatio"in window&&window.devicePixelRatio>1:!1;if(!tC&&window&&"matchMedia"in window){let e=window.matchMedia("(min-resolution:144dpi)");tC=e&&e.matches}const jo=window&&!window.L_NO_TOUCH&&!hQ&&(mQ||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);function vQ(){var e=window.innerWidth,t=window.innerHeight,i="portrait";return e>t&&(i="landscape"),i}function $m(e){return typeof e=="string"?document.getElementById(e):e}function fn(e,t,i){var r=document.createElement(e);return r.className=t,i&&i.appendChild(r),r}function _p(e,t){var i=fn("button",e,t);return i.type="button",i}function Rx(e){for(var t={x:0,y:0};e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t.x+=e.offsetLeft,t.y+=e.offsetTop,e=e.offsetParent;return t}function JP(e){for(var t=document.documentElement.style,i=0;i<e.length;i++)if(e[i]in t)return e[i];return!1}JP(["transition","webkitTransition","OTransition","MozTransition","msTransition"]);JP(["transformProperty","WebkitTransform","OTransform","MozTransform","msTransform"]);class vi extends Error{constructor(t,i){super(),this.name="TLError",this.message=t||"error",this.message_key=this.message,this.detail=i||""}}const nC={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function QP(e){nC[e.toLowerCase()]&&(e=nC[e.toLowerCase()]);var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(r,s,c,d){return s+s+c+c+d+d});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null}function Pi(e,t){var i;for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}function _Q(e){return e==null?!1:e==!0||String(e).toLowerCase()=="true"||Number(e)==1}function th(e){for(var t=Array.prototype.slice.call(arguments,1),i=0,r=t.length,s;i<r;i++)s=t[i]||{},Pi(e,s);return e}const eD=[];function yQ(e){eD.push(e)}function _i(e){eD.forEach(t=>{try{t(e)}catch(i){console&&console.log&&console.log("Error handling trace",i)}})}function gl(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}const iC=function(){var e=0,t="_tl_id";return function(i){return i[t]=i[t]||++e,i[t]}}();function ga(e){return e&&typeof e.replace=="function"?e.replace(/^\s+|\s+$/g,""):""}function Fs(e,...t){for(let r of t)for(var i of Object.getOwnPropertyNames(r.prototype))e.prototype[i]=r.prototype[i]}function bQ(e,t){if(t||(t=ju(6)),!(t in e))return t;var i=t.match(/^(.+)(-\d+)?$/)[1],r=[];for(let c in e)c.match(/^(.+?)(-\d+)?$/)[1]==i&&r.push(c);t=i+"-"+(r.length+1);for(var s=r.length;r.indexOf(t)!=-1;s++)t=i+"-"+s;return t}function xQ(e){var t=[];if(Object.keys)t=Object.keys(e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);for(var r=0;r<t.length;r++){var s=t[r];if(e[s]!=null&&typeof e[s]!="string"||ga(e[s]).length!=0)return!1}return!0}function ub(e){e=ga(e),e=e.toLowerCase();for(var t="ãàáäâẽèéëêìíïîõòóöôùúüûñç·/_,:;",i="aaaaaeeeeeiiiiooooouuuunc------",r=0,s=t.length;r<s;r++)e=e.replace(new RegExp(t.charAt(r),"g"),i.charAt(r));return e=e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),e=e.replace(/^([0-9])/,"_$1"),e}function ju(e,t){var i=function(c){return Math.floor(Math.random()*c)},r=function(){var c="abcdefghijklmnopqurstuvwxyz";return c.substr(i(32),1)},s=function(c){for(var d="",l=0;l<c;l++)d+=r();return d};return t?t+"-"+s(e):"tl-"+s(e)}function wQ(e,t,i){for(var r=0;r<e.length;r++)if(t<e[r])return e[r];return i||t}function SQ(e,t,i){for(var r=e.length-1;r>=0;r--)if(t>e[r])return e[r];return i||t}function TQ(e){return e==parseFloat(e)?!(e%2):void 0}function tD(e,t,i,r){for(var s=r||0,c=0;c<t.length;c++)t[c].data[i]==e&&(s=c);return s}function mh(e){return e&&(e=e.replace(/<a\b[^>]*>/i,""),e=e.replace(/<\/a>/i,""),e)}function EQ(e,t){e.data=th({},e.data,t),e.data.unique_id===""&&(e.data.unique_id=ju(6))}function CQ(e){return e.match(/<p>[\s\S]*?<\/p>/)?e:"<p>"+e+"</p>"}function Oh(e){return e=e.replace(/(<[^>]*>)+/g,""),e.replace('"',"'")}function Fx(e,t,i){var r=function(l,m,g){g||(g="");var y=30;return m&&m.length>y&&(m=m.substring(0,y)+"…"),g+"<a class='tl-makelink' href='"+l+"' onclick='void(0)'>"+m+"</a>"},s=/\b(?:https?|ftp):\/\/([a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|])/gim,c=/(^|[^\/>])(www\.[\S]+(\b|$))/gim,d=/([a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+)/gim;return e.replace(s,function(l,m,g,y){if(g>0){var x=y[g-1];if(x=='"'||x=="'"||x=="=")return l}return r(l,m)}).replace(c,function(l,m,g,y,x){return r("http://"+g,g,m)}).replace(d,function(l,m,g,y){return r("mailto:"+m,m)})}function gy(e){return e.replace(/(.*)www.dropbox.com\/(.*)/,"$1dl.dropboxusercontent.com/$2")}const id={square:e=>{var t={w:0,h:0};return e.w>e.h&&e.h>0?(t.h=e.h,t.w=e.h):(t.w=e.w,t.h=e.w),t},r16_9:e=>e.w!==null&&e.w!==""?Math.round(e.w/16*9):e.h!==null&&e.h!==""?Math.round(e.h/9*16):0,r4_3:e=>{if(e.w!==null&&e.w!=="")return Math.round(e.w/4*3);if(e.h!==null&&e.h!=="")return Math.round(e.h/3*4)}};function IQ(e){var t,i=[],r,s;t=e.toString(),t.match("&#038;")?t=t.replace("&#038;","&"):t.match("&#38;")?t=t.replace("&#38;","&"):t.match("&amp;")&&(t=t.replace("&amp;","&")),s=t.slice(t.indexOf("?")+1).split("&");for(var c=0;c<s.length;c++)r=s[c].split("="),i.push(r[0]),i[r[0]]=r[1];return i}function AQ(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i+"="+e[i]);return"?"+t.join("&")}function MQ(e,t){if(typeof e<"u"){var i=0;for(var r in e){if(t===i)return e[r];i++}return""}else return""}let kQ=function(e){var t=e||"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",i=t.length;return{encode:function(r){if(typeof r!="number"||r!==parseInt(r))throw'"encode" only accepts integers.';for(var s="";r;){var c=r%i;r=Math.floor(r/i),s=t[c].toString()+s}return s},decode:function(r){if(typeof r!="string")throw'"decode" only accepts strings.';for(var s=0;r;){var c=t.indexOf(r[0]);if(c<0)throw`"decode" can't find "`+r[0]+'" in the alphabet: "'+t+'"';var d=r.length-1;s+=c*Math.pow(i,d),r=r.substring(1)}return s}}}();function db(e){if(typeof e=="string"){let s=e.match(/^\s*(\d+h)?(\d+m)?(\d+s)?\s*/i);if(s){var t=parseInt(s[1])||0,i=parseInt(s[2])||0,r=parseInt(s[3])||0;return r+i*60+t*60*60}}else if(typeof e=="number")return e;return 0}function PQ(e){var t=new DOMParser().parseFromString(e,"text/html");return t.body.textContent||""}function DQ(e){}function vy(e){var t=new DQ;return t.get(e)}function lm(e){return e==1?1:1-Math.pow(2,-10*e)}function Uh(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}let b_=function(){};b_.extend=function(e){var t=function(){this.initialize&&this.initialize.apply(this,arguments)},i=function(){};i.prototype=this.prototype;var r=new i;r.constructor=t,t.prototype=r,t.superclass=this.prototype;for(var s in this)this.hasOwnProperty(s)&&s!=="prototype"&&s!=="superclass"&&(t[s]=this[s]);return e.statics&&(th(t,e.statics),delete e.statics),e.includes&&(th.apply(null,[r].concat(e.includes)),delete e.includes),e.options&&r.options&&(e.options=th({},r.options,e.options)),th(r,e),t.extend=b_.extend,t.include=function(c){th(this.prototype,c)},t};class $s{on(t,i,r){if(!i)throw new vi("No callback function provided");var s=this._tl_events=this._tl_events||{};return s[t]=s[t]||[],s[t].push({action:i,context:r||this}),this}addEventListener(t,i,r){return this.on(t,i,r)}hasEventListeners(t){var i="_tl_events";return i in this&&t in this[i]&&this[i][t].length>0}removeEventListener(t,i,r){if(!this.hasEventListeners(t))return this;for(var s=0,c=this._tl_events,d=c[t].length;s<d;s++)if(c[t][s].action===i&&(!r||c[t][s].context===r))return c[t].splice(s,1),this;return this}off(t,i,r){return this.removeEventListener(t,i,r)}fire(t,i){if(!this.hasEventListeners(t))return this;for(var r=Pi({type:t,target:this},i),s=this._tl_events[t].slice(),c=0,d=s.length;c<d;c++)s[c].action?s[c].action.call(s[c].context||this,r):_i(`no action defined for ${t} listener`);return this}}function kl(e,t){return LQ(e,t)}const LQ=function(){var e=document,t=window,i=t.performance,r=i&&(i.now||i.webkitNow||i.msNow||i.mozNow),s=r?function(){return r.call(i)}:function(){return+new Date},c=e.documentElement,d=!1,l=1e3,m=/^rgb\(|#/,g=/^([+\-])=([\d\.]+)/,y=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,x=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,C=/scale\(((?:[+\-]=)?([\d\.]+))\)/,I=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,A=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,O={lineHeight:1,zoom:1,zIndex:1,opacity:1,transform:1},F=function(){var it=e.createElement("a").style,Ge=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],ot;for(ot=0;ot<Ge.length;ot++)if(Ge[ot]in it)return Ge[ot]}(),z=function(){return typeof e.createElement("a").style.opacity<"u"}(),U=e.defaultView&&e.defaultView.getComputedStyle?function(it,Ge){Ge=Ge=="transform"?F:Ge,Ge=j(Ge);var ot=null,Ct=e.defaultView.getComputedStyle(it,"");return Ct&&(ot=Ct[Ge]),it.style[Ge]||ot}:c.currentStyle?function(it,Ge){if(Ge=j(Ge),Ge=="opacity"){var ot=100;try{ot=it.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch{try{ot=it.filters("alpha").opacity}catch{}}return ot/100}var Ct=it.currentStyle?it.currentStyle[Ge]:null;return it.style[Ge]||Ct}:function(it,Ge){return it.style[j(Ge)]},H=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||t.oRequestAnimationFrame||function(it){t.setTimeout(function(){it(+new Date)},17)}}(),q=[];H(function(it){d=it>1e12!=s()>1e12});function ee(it,Ge,ot){if(Array.prototype.indexOf)return it.indexOf(Ge);for(ot=0;ot<it.length;++ot)if(it[ot]===Ge)return ot}function Q(it){var Ge,ot=q.length;for(r&&it>1e12&&(it=s()),d&&(it=s()),Ge=ot;Ge--;)q[Ge](it);q.length&&H(Q)}function ve(it){q.push(it)===1&&H(Q)}function se(it){var Ge,ot=ee(q,it);ot>=0&&(Ge=q.slice(ot+1),q.length=ot,q=q.concat(Ge))}function K(it,Ge){var ot={},Ct;return(Ct=it.match(x))&&(ot.rotate=It(Ct[1],Ge?Ge.rotate:null)),(Ct=it.match(C))&&(ot.scale=It(Ct[1],Ge?Ge.scale:null)),(Ct=it.match(I))&&(ot.skewx=It(Ct[1],Ge?Ge.skewx:null),ot.skewy=It(Ct[3],Ge?Ge.skewy:null)),(Ct=it.match(A))&&(ot.translatex=It(Ct[1],Ge?Ge.translatex:null),ot.translatey=It(Ct[3],Ge?Ge.translatey:null)),ot}function J(it){var Ge="";return"rotate"in it&&(Ge+="rotate("+it.rotate+"deg) "),"scale"in it&&(Ge+="scale("+it.scale+") "),"translatex"in it&&(Ge+="translate("+it.translatex+"px,"+it.translatey+"px) "),"skewx"in it&&(Ge+="skew("+it.skewx+"deg,"+it.skewy+"deg)"),Ge}function W(it,Ge,ot){return"#"+(1<<24|it<<16|Ge<<8|ot).toString(16).slice(1)}function te(it){var Ge=it.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return(Ge?W(Ge[1],Ge[2],Ge[3]):it).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function j(it){return it.replace(/-(.)/g,function(Ge,ot){return ot.toUpperCase()})}function re(it){return typeof it=="function"}function Te(it){return Math.sin(it*Math.PI/2)}function ye(it,Ge,ot,Ct,wt,Xe){Ct=re(Ct)?Ct:vt.easings[Ct]||Te;var Dt=it||l,Tt=this,Nt=Xe-wt,dn=s(),Sn=0,me=0;function Ie(at){var Z=at-dn;if(Z>Dt||Sn)return Xe=isFinite(Xe)?Xe:1,Sn?me&&Ge(Xe):Ge(Xe),se(Ie),ot&&ot.apply(Tt);isFinite(Xe)?Ge(Nt*Ct(Z/Dt)+wt):Ge(Ct(Z/Dt))}return ve(Ie),{stop:function(at){Sn=1,me=at,at||(ot=null)}}}function Ve(it,Ge){var ot=it.length,Ct=[],wt,Xe;for(wt=0;wt<ot;++wt)Ct[wt]=[it[wt][0],it[wt][1]];for(Xe=1;Xe<ot;++Xe)for(wt=0;wt<ot-Xe;++wt)Ct[wt][0]=(1-Ge)*Ct[wt][0]+Ge*Ct[parseInt(wt+1,10)][0],Ct[wt][1]=(1-Ge)*Ct[wt][1]+Ge*Ct[parseInt(wt+1,10)][1];return[Ct[0][0],Ct[0][1]]}function Ue(it,Ge,ot){var Ct=[],wt,Xe,Dt,Tt;for(wt=0;wt<6;wt++)Dt=Math.min(15,parseInt(Ge.charAt(wt),16)),Tt=Math.min(15,parseInt(ot.charAt(wt),16)),Xe=Math.floor((Tt-Dt)*it+Dt),Xe=Xe>15?15:Xe<0?0:Xe,Ct[wt]=Xe.toString(16);return"#"+Ct.join("")}function Qe(it,Ge,ot,Ct,wt,Xe,Dt){if(wt=="transform"){Dt={};for(var Tt in ot[Xe][wt])Dt[Tt]=Tt in Ct[Xe][wt]?Math.round(((Ct[Xe][wt][Tt]-ot[Xe][wt][Tt])*it+ot[Xe][wt][Tt])*l)/l:ot[Xe][wt][Tt];return Dt}else return typeof ot[Xe][wt]=="string"?Ue(it,ot[Xe][wt],Ct[Xe][wt]):(Dt=Math.round(((Ct[Xe][wt]-ot[Xe][wt])*it+ot[Xe][wt])*l)/l,wt in O||(Dt+=Ge[Xe][wt]||"px"),Dt)}function It(it,Ge,ot,Ct,wt){return(ot=g.exec(it))?(wt=parseFloat(ot[2]))&&Ge+(ot[1]=="+"?1:-1)*wt:parseFloat(it)}function vt(it,Ge){var ot=it?ot=isFinite(it.length)?it:[it]:[],Ct,wt=Ge.complete,Xe=Ge.duration,Dt=Ge.easing,Tt=Ge.bezier,Nt=[],dn=[],Sn=[],me=[],Ie,at;for(Tt&&(Ie=Ge.left,at=Ge.top,delete Ge.right,delete Ge.bottom,delete Ge.left,delete Ge.top),Ct=ot.length;Ct--;){if(Nt[Ct]={},dn[Ct]={},Sn[Ct]={},Tt){var Z=U(ot[Ct],"left"),he=U(ot[Ct],"top"),$e=[It(re(Ie)?Ie(ot[Ct]):Ie||0,parseFloat(Z)),It(re(at)?at(ot[Ct]):at||0,parseFloat(he))];me[Ct]=re(Tt)?Tt(ot[Ct],$e):Tt,me[Ct].push($e),me[Ct].unshift([parseInt(Z,10),parseInt(he,10)])}for(var et in Ge){switch(et){case"complete":case"duration":case"easing":case"bezier":continue}var Se=U(ot[Ct],et),mt,gt=re(Ge[et])?Ge[et](ot[Ct]):Ge[et];if(typeof gt=="string"&&m.test(gt)&&!m.test(Se)){delete Ge[et];continue}Nt[Ct][et]=et=="transform"?K(Se):typeof gt=="string"&&m.test(gt)?te(Se).slice(1):parseFloat(Se),dn[Ct][et]=et=="transform"?K(gt,Nt[Ct][et]):typeof gt=="string"&&gt.charAt(0)=="#"?te(gt).slice(1):It(gt,parseFloat(Se)),typeof gt=="string"&&(mt=gt.match(y))&&(Sn[Ct][et]=mt[1])}}return ye.apply(ot,[Xe,function(At,Ft,Kt){for(Ct=ot.length;Ct--;){Tt&&(Kt=Ve(me[Ct],At),ot[Ct].style.left=Kt[0]+"px",ot[Ct].style.top=Kt[1]+"px");for(var an in Ge)Ft=Qe(At,Sn,Nt,dn,an,Ct),an=="transform"?ot[Ct].style[F]=J(Ft):an=="opacity"&&!z?ot[Ct].style.filter="alpha(opacity="+Ft*100+")":ot[Ct].style[j(an)]=Ft}},wt,Dt])}return vt.tween=ye,vt.getStyle=U,vt.bezier=Ve,vt.transform=F,vt.parseTransform=K,vt.formatTransform=J,vt.easings={},vt}();class Ol{show(t){t||(this._el.container.style.display="block")}hide(t){this._el.container.style.display="none"}addTo(t){t.appendChild(this._el.container),this.onAdd()}removeFrom(t){t.removeChild(this._el.container),this.onRemove()}animatePosition(t,i){var r={duration:this.options.duration,easing:this.options.ease};for(var s in t)t.hasOwnProperty(s)&&(r[s]=t[s]+"px");this.animator&&this.animator.stop(),this.animator=kl(i,r)}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}setPosition(t,i){for(var r in t)t.hasOwnProperty(r)&&(i?i.style[r]=t[r]+"px":this._el.container.style[r]=t[r]+"px")}getPosition(){return Rx(this._el.container)}}let OQ=class{constructor(t,i,r){this._el={drag:t,move:t},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},r&&(this._el.move=r),this.options={enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:!1,right:!1},momentum_multiplier:2e3,duration:1e3,ease:Uh},this.animator=null,this.dragevent=this.mousedrag,jo&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},Pi(this.options,i)}enable(t){this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){ri.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),ri.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(t){this.options.constraint=t}_onDragStart(t){jo?t.originalEvent?(this.data.pagex.start=t.originalEvent.touches[0].screenX,this.data.pagey.start=t.originalEvent.touches[0].screenY):(this.data.pagex.start=t.targetTouches[0].screenX,this.data.pagey.start=t.targetTouches[0].screenY):(this.data.pagex.start=t.pageX,this.data.pagey.start=t.pageY),this.options.enable.x&&(this._el.move.style.left=this.data.pagex.start-this._el.move.offsetWidth/2+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.pagey.start-this._el.move.offsetHeight/2+"px"),this.data.pos.start=Rx(this._el.drag),this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),ri.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),ri.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(t){this.data.sliding=!1,ri.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),ri.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(t){t.preventDefault(),this.data.sliding=!0,jo?t.originalEvent?(this.data.pagex.end=t.originalEvent.touches[0].screenX,this.data.pagey.end=t.originalEvent.touches[0].screenY):(this.data.pagex.end=t.targetTouches[0].screenX,this.data.pagey.end=t.targetTouches[0].screenY):(this.data.pagex.end=t.pageX,this.data.pagey.end=t.pageY),this.data.pos.end=Rx(this._el.drag),this.data.new_pos.x=-(this.data.pagex.start-this.data.pagex.end-this.data.pos.start.x),this.data.new_pos.y=-(this.data.pagey.start-this.data.pagey.end-this.data.pos.start.y),this.options.enable.x&&(this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var t={x:0,y:0,time:0},i={x:0,y:0,time:0},r=!1;t.time=(new Date().getTime()-this.data.time.start)*10,i.time=(new Date().getTime()-this.data.time.start)*10,i.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),i.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),t.x=Math.round(i.x/i.time),t.y=Math.round(i.y/i.time),this.data.new_pos.x=Math.min(this.data.pos.end.x+t.x),this.data.new_pos.y=Math.min(this.data.pos.end.y+t.y),this.options.enable.x?this.data.new_pos.x<0&&(this.data.new_pos.x=0):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,i.time<3e3&&(r=!0),Math.abs(i.x)>1e4&&(this.data.direction="left",i.x>0&&(this.data.direction="right")),Math.abs(i.y)>1e4&&(this.data.direction="up",i.y>0&&(this.data.direction="down")),this._animateMomentum(),r&&this.fire("swipe_"+this.data.direction,this.data)}_animateMomentum(){var t={x:this.data.new_pos.x,y:this.data.new_pos.y},i={duration:this.options.duration,easing:lm};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(t.y>this.options.constraint.bottom?t.y=this.options.constraint.bottom:t.y<this.options.constraint.top&&(t.y=this.options.constraint.top)),i.top=Math.floor(t.y)+"px"),this.options.enable.x&&((this.options.constraint.left||this.options.constraint.right)&&(t.x>this.options.constraint.left?t.x=this.options.constraint.left:t.x<this.options.constraint.right&&(t.x=this.options.constraint.right)),i.left=Math.floor(t.x)+"px"),this.animator=kl(this._el.move,i),this.fire("momentum",this.data)}};Fs($s);var ri={addListener:function(e,t,i,r){var s=iC(i),c="_tl_"+t+s;if(!e[c]){var d=function(g){return i.call(r||e,g||ri._getEvent())};if(jo&&t==="dblclick"&&this.addDoubleTapListener)this.addDoubleTapListener(e,d,s);else if("addEventListener"in e)if(t==="mousewheel")e.addEventListener("DOMMouseScroll",d,!1),e.addEventListener(t,d,!1);else if(t==="mouseenter"||t==="mouseleave"){var l=d,m=t==="mouseenter"?"mouseover":"mouseout";d=function(g){if(ri._checkMouse(e,g))return l(g)},e.addEventListener(m,d,!1)}else e.addEventListener(t,d,!1);else"attachEvent"in e&&e.attachEvent("on"+t,d);e[c]=d}},removeListener:function(e,t,i){var r=iC(i),s="_tl_"+t+r,c=e[s];c&&(jo&&t==="dblclick"&&this.removeDoubleTapListener?this.removeDoubleTapListener(e,r):"removeEventListener"in e?t==="mousewheel"?(e.removeEventListener("DOMMouseScroll",c,!1),e.removeEventListener(t,c,!1)):t==="mouseenter"||t==="mouseleave"?e.removeEventListener(t==="mouseenter"?"mouseover":"mouseout",c,!1):e.removeEventListener(t,c,!1):"detachEvent"in e&&e.detachEvent("on"+t,c),e[s]=null)},_checkMouse:function(e,t){var i=t.relatedTarget;if(!i)return!0;try{for(;i&&i!==e;)i=i.parentNode}catch{return!1}return i!==e},_getEvent:function(){var e=window.event;if(!e)for(var t=arguments.callee.caller;t&&(e=t.arguments[0],!(e&&window.Event===e.constructor));)t=t.caller;return e},stopPropagation:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},disableClickPropagation:function(e){ri.addListener(e,OQ.START,ri.stopPropagation),ri.addListener(e,"click",ri.stopPropagation),ri.addListener(e,"dblclick",ri.stopPropagation)},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},stop:function(e){ri.preventDefault(e),ri.stopPropagation(e)},getWheelDelta:function(e){var t=0;return e.wheelDelta&&(t=e.wheelDelta/120),e.detail&&(t=-e.detail/3),t}},Rl=function(){var e,t,i,r,s=[],c=s.slice,d=s.filter,l=window.document,m={},g={},y={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},x=/^\s*<(\w+|!)[^>]*>/,C=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,I=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,A=/^(?:body|html)$/i,O=/([A-Z])/g,F=["val","css","html","text","data","width","height","offset"],z=["after","prepend","before","append"],U=l.createElement("table"),H=l.createElement("tr"),q={tr:l.createElement("tbody"),tbody:U,thead:U,tfoot:U,td:H,th:H,"*":l.createElement("div")},ee=/complete|loaded|interactive/,Q=/^[\w-]*$/,ve={},se=ve.toString,K={},J,W,te=l.createElement("div"),j={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},re=Array.isArray||function(Z){return Z instanceof Array};K.matches=function(Z,he){if(!he||!Z||Z.nodeType!==1)return!1;var $e=Z.webkitMatchesSelector||Z.mozMatchesSelector||Z.oMatchesSelector||Z.matchesSelector;if($e)return $e.call(Z,he);var et,Se=Z.parentNode,mt=!Se;return mt&&(Se=te).appendChild(Z),et=~K.qsa(Se,he).indexOf(Z),mt&&te.removeChild(Z),et};function Te(Z){return Z==null?String(Z):ve[se.call(Z)]||"object"}function ye(Z){return Te(Z)=="function"}function Ve(Z){return Z!=null&&Z==Z.window}function Ue(Z){return Z!=null&&Z.nodeType==Z.DOCUMENT_NODE}function Qe(Z){return Te(Z)=="object"}function It(Z){return Qe(Z)&&!Ve(Z)&&Object.getPrototypeOf(Z)==Object.prototype}function vt(Z){return typeof Z.length=="number"}function it(Z){return d.call(Z,function(he){return he!=null})}function Ge(Z){return Z.length>0?i.fn.concat.apply([],Z):Z}J=function(Z){return Z.replace(/-+(.)?/g,function(he,$e){return $e?$e.toUpperCase():""})};function ot(Z){return Z.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}W=function(Z){return d.call(Z,function(he,$e){return Z.indexOf(he)==$e})};function Ct(Z){return Z in g?g[Z]:g[Z]=new RegExp("(^|\\s)"+Z+"(\\s|$)")}function wt(Z,he){return typeof he=="number"&&!y[ot(Z)]?he+"px":he}function Xe(Z){var he,$e;return m[Z]||(he=l.createElement(Z),l.body.appendChild(he),$e=getComputedStyle(he,"").getPropertyValue("display"),he.parentNode.removeChild(he),$e=="none"&&($e="block"),m[Z]=$e),m[Z]}function Dt(Z){return"children"in Z?c.call(Z.children):i.map(Z.childNodes,function(he){if(he.nodeType==1)return he})}K.fragment=function(Z,he,$e){var et,Se,mt;return C.test(Z)&&(et=i(l.createElement(RegExp.$1))),et||(Z.replace&&(Z=Z.replace(I,"<$1></$2>")),he===e&&(he=x.test(Z)&&RegExp.$1),he in q||(he="*"),mt=q[he],mt.innerHTML=""+Z,et=i.each(c.call(mt.childNodes),function(){mt.removeChild(this)})),It($e)&&(Se=i(et),i.each($e,function(gt,At){F.indexOf(gt)>-1?Se[gt](At):Se.attr(gt,At)})),et},K.Z=function(Z,he){return Z=Z||[],Z.__proto__=i.fn,Z.selector=he||"",Z},K.isZ=function(Z){return Z instanceof K.Z},K.init=function(Z,he){var $e;if(Z)if(typeof Z=="string")if(Z=Z.trim(),Z[0]=="<"&&x.test(Z))$e=K.fragment(Z,RegExp.$1,he),Z=null;else{if(he!==e)return i(he).find(Z);$e=K.qsa(l,Z)}else{if(ye(Z))return i(l).ready(Z);if(K.isZ(Z))return Z;if(re(Z))$e=it(Z);else if(Qe(Z))$e=[Z],Z=null;else if(x.test(Z))$e=K.fragment(Z.trim(),RegExp.$1,he),Z=null;else{if(he!==e)return i(he).find(Z);$e=K.qsa(l,Z)}}else return K.Z();return K.Z($e,Z)},i=function(Z,he){return K.init(Z,he)};function Tt(Z,he,$e){for(t in he)$e&&(It(he[t])||re(he[t]))?(It(he[t])&&!It(Z[t])&&(Z[t]={}),re(he[t])&&!re(Z[t])&&(Z[t]=[]),Tt(Z[t],he[t],$e)):he[t]!==e&&(Z[t]=he[t])}i.extend=function(Z){var he,$e=c.call(arguments,1);return typeof Z=="boolean"&&(he=Z,Z=$e.shift()),$e.forEach(function(et){Tt(Z,et,he)}),Z},K.qsa=function(Z,he){var $e,et=he[0]=="#",Se=!et&&he[0]==".",mt=et||Se?he.slice(1):he,gt=Q.test(mt);return Ue(Z)&&gt&&et?($e=Z.getElementById(mt))?[$e]:[]:Z.nodeType!==1&&Z.nodeType!==9?[]:c.call(gt&&!et?Se?Z.getElementsByClassName(mt):Z.getElementsByTagName(he):Z.querySelectorAll(he))};function Nt(Z,he){return he==null?i(Z):i(Z).filter(he)}i.contains=function(Z,he){return Z!==he&&Z.contains(he)};function dn(Z,he,$e,et){return ye(he)?he.call(Z,$e,et):he}function Sn(Z,he,$e){$e==null?Z.removeAttribute(he):Z.setAttribute(he,$e)}function me(Z,he){var $e=Z.className,et=$e&&$e.baseVal!==e;if(he===e)return et?$e.baseVal:$e;et?$e.baseVal=he:Z.className=he}function Ie(Z){var he;try{return Z&&(Z=="true"||(Z=="false"?!1:Z=="null"?null:!/^0/.test(Z)&&!isNaN(he=Number(Z))?he:/^[\[\{]/.test(Z)?i.parseJSON(Z):Z))}catch{return Z}}i.type=Te,i.isFunction=ye,i.isWindow=Ve,i.isArray=re,i.isPlainObject=It,i.isEmptyObject=function(Z){var he;for(he in Z)return!1;return!0},i.inArray=function(Z,he,$e){return s.indexOf.call(he,Z,$e)},i.camelCase=J,i.trim=function(Z){return Z==null?"":String.prototype.trim.call(Z)},i.uuid=0,i.support={},i.expr={},i.map=function(Z,he){var $e,et=[],Se,mt;if(vt(Z))for(Se=0;Se<Z.length;Se++)$e=he(Z[Se],Se),$e!=null&&et.push($e);else for(mt in Z)$e=he(Z[mt],mt),$e!=null&&et.push($e);return Ge(et)},i.each=function(Z,he){var $e,et;if(vt(Z)){for($e=0;$e<Z.length;$e++)if(he.call(Z[$e],$e,Z[$e])===!1)return Z}else for(et in Z)if(he.call(Z[et],et,Z[et])===!1)return Z;return Z},i.grep=function(Z,he){return d.call(Z,he)},window.JSON&&(i.parseJSON=JSON.parse),i.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(Z,he){ve["[object "+he+"]"]=he.toLowerCase()}),i.fn={forEach:s.forEach,reduce:s.reduce,push:s.push,sort:s.sort,indexOf:s.indexOf,concat:s.concat,map:function(Z){return i(i.map(this,function(he,$e){return Z.call(he,$e,he)}))},slice:function(){return i(c.apply(this,arguments))},ready:function(Z){return ee.test(l.readyState)&&l.body?Z(i):l.addEventListener("DOMContentLoaded",function(){Z(i)},!1),this},get:function(Z){return Z===e?c.call(this):this[Z>=0?Z:Z+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(Z){return s.every.call(this,function(he,$e){return Z.call(he,$e,he)!==!1}),this},filter:function(Z){return ye(Z)?this.not(this.not(Z)):i(d.call(this,function(he){return K.matches(he,Z)}))},add:function(Z,he){return i(W(this.concat(i(Z,he))))},is:function(Z){return this.length>0&&K.matches(this[0],Z)},not:function(Z){var he=[];if(ye(Z)&&Z.call!==e)this.each(function(et){Z.call(this,et)||he.push(this)});else{var $e=typeof Z=="string"?this.filter(Z):vt(Z)&&ye(Z.item)?c.call(Z):i(Z);this.forEach(function(et){$e.indexOf(et)<0&&he.push(et)})}return i(he)},has:function(Z){return this.filter(function(){return Qe(Z)?i.contains(this,Z):i(this).find(Z).size()})},eq:function(Z){return Z===-1?this.slice(Z):this.slice(Z,+Z+1)},first:function(){var Z=this[0];return Z&&!Qe(Z)?Z:i(Z)},last:function(){var Z=this[this.length-1];return Z&&!Qe(Z)?Z:i(Z)},find:function(Z){var he,$e=this;return typeof Z=="object"?he=i(Z).filter(function(){var et=this;return s.some.call($e,function(Se){return i.contains(Se,et)})}):this.length==1?he=i(K.qsa(this[0],Z)):he=this.map(function(){return K.qsa(this,Z)}),he},closest:function(Z,he){var $e=this[0],et=!1;for(typeof Z=="object"&&(et=i(Z));$e&&!(et?et.indexOf($e)>=0:K.matches($e,Z));)$e=$e!==he&&!Ue($e)&&$e.parentNode;return i($e)},parents:function(Z){for(var he=[],$e=this;$e.length>0;)$e=i.map($e,function(et){if((et=et.parentNode)&&!Ue(et)&&he.indexOf(et)<0)return he.push(et),et});return Nt(he,Z)},parent:function(Z){return Nt(W(this.pluck("parentNode")),Z)},children:function(Z){return Nt(this.map(function(){return Dt(this)}),Z)},contents:function(){return this.map(function(){return c.call(this.childNodes)})},siblings:function(Z){return Nt(this.map(function(he,$e){return d.call(Dt($e.parentNode),function(et){return et!==$e})}),Z)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(Z){return i.map(this,function(he){return he[Z]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=""),getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=Xe(this.nodeName))})},replaceWith:function(Z){return this.before(Z).remove()},wrap:function(Z){var he=ye(Z);if(this[0]&&!he)var $e=i(Z).get(0),et=$e.parentNode||this.length>1;return this.each(function(Se){i(this).wrapAll(he?Z.call(this,Se):et?$e.cloneNode(!0):$e)})},wrapAll:function(Z){if(this[0]){i(this[0]).before(Z=i(Z));for(var he;(he=Z.children()).length;)Z=he.first();i(Z).append(this)}return this},wrapInner:function(Z){var he=ye(Z);return this.each(function($e){var et=i(this),Se=et.contents(),mt=he?Z.call(this,$e):Z;Se.length?Se.wrapAll(mt):et.append(mt)})},unwrap:function(){return this.parent().each(function(){i(this).replaceWith(i(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(Z){return this.each(function(){var he=i(this);(Z===e?he.css("display")=="none":Z)?he.show():he.hide()})},prev:function(Z){return i(this.pluck("previousElementSibling")).filter(Z||"*")},next:function(Z){return i(this.pluck("nextElementSibling")).filter(Z||"*")},html:function(Z){return arguments.length===0?this.length>0?this[0].innerHTML:null:this.each(function(he){var $e=this.innerHTML;i(this).empty().append(dn(this,Z,he,$e))})},text:function(Z){return arguments.length===0?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=Z===e?"":""+Z})},attr:function(Z,he){var $e;return typeof Z=="string"&&he===e?this.length==0||this[0].nodeType!==1?e:Z=="value"&&this[0].nodeName=="INPUT"?this.val():!($e=this[0].getAttribute(Z))&&Z in this[0]?this[0][Z]:$e:this.each(function(et){if(this.nodeType===1)if(Qe(Z))for(t in Z)Sn(this,t,Z[t]);else Sn(this,Z,dn(this,he,et,this.getAttribute(Z)))})},removeAttr:function(Z){return this.each(function(){this.nodeType===1&&Sn(this,Z)})},prop:function(Z,he){return Z=j[Z]||Z,he===e?this[0]&&this[0][Z]:this.each(function($e){this[Z]=dn(this,he,$e,this[Z])})},data:function(Z,he){var $e=this.attr("data-"+Z.replace(O,"-$1").toLowerCase(),he);return $e!==null?Ie($e):e},val:function(Z){return arguments.length===0?this[0]&&(this[0].multiple?i(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(he){this.value=dn(this,Z,he,this.value)})},offset:function(Z){if(Z)return this.each(function($e){var et=i(this),Se=dn(this,Z,$e,et.offset()),mt=et.offsetParent().offset(),gt={top:Se.top-mt.top,left:Se.left-mt.left};et.css("position")=="static"&&(gt.position="relative"),et.css(gt)});if(this.length==0)return null;var he=this[0].getBoundingClientRect();return{left:he.left+window.pageXOffset,top:he.top+window.pageYOffset,width:Math.round(he.width),height:Math.round(he.height)}},css:function(Z,he){if(arguments.length<2){var $e=this[0],et=getComputedStyle($e,"");if(!$e)return;if(typeof Z=="string")return $e.style[J(Z)]||et.getPropertyValue(Z);if(re(Z)){var Se={};return i.each(re(Z)?Z:[Z],function(gt,At){Se[At]=$e.style[J(At)]||et.getPropertyValue(At)}),Se}}var mt="";if(Te(Z)=="string")!he&&he!==0?this.each(function(){this.style.removeProperty(ot(Z))}):mt=ot(Z)+":"+wt(Z,he);else for(t in Z)!Z[t]&&Z[t]!==0?this.each(function(){this.style.removeProperty(ot(t))}):mt+=ot(t)+":"+wt(t,Z[t])+";";return this.each(function(){this.style.cssText+=";"+mt})},index:function(Z){return Z?this.indexOf(i(Z)[0]):this.parent().children().indexOf(this[0])},hasClass:function(Z){return Z?s.some.call(this,function(he){return this.test(me(he))},Ct(Z)):!1},addClass:function(Z){return Z?this.each(function(he){r=[];var $e=me(this),et=dn(this,Z,he,$e);et.split(/\s+/g).forEach(function(Se){i(this).hasClass(Se)||r.push(Se)},this),r.length&&me(this,$e+($e?" ":"")+r.join(" "))}):this},removeClass:function(Z){return this.each(function(he){if(Z===e)return me(this,"");r=me(this),dn(this,Z,he,r).split(/\s+/g).forEach(function($e){r=r.replace(Ct($e)," ")}),me(this,r.trim())})},toggleClass:function(Z,he){return Z?this.each(function($e){var et=i(this),Se=dn(this,Z,$e,me(this));Se.split(/\s+/g).forEach(function(mt){(he===e?!et.hasClass(mt):he)?et.addClass(mt):et.removeClass(mt)})}):this},scrollTop:function(Z){if(this.length){var he="scrollTop"in this[0];return Z===e?he?this[0].scrollTop:this[0].pageYOffset:this.each(he?function(){this.scrollTop=Z}:function(){this.scrollTo(this.scrollX,Z)})}},scrollLeft:function(Z){if(this.length){var he="scrollLeft"in this[0];return Z===e?he?this[0].scrollLeft:this[0].pageXOffset:this.each(he?function(){this.scrollLeft=Z}:function(){this.scrollTo(Z,this.scrollY)})}},position:function(){if(this.length){var Z=this[0],he=this.offsetParent(),$e=this.offset(),et=A.test(he[0].nodeName)?{top:0,left:0}:he.offset();return $e.top-=parseFloat(i(Z).css("margin-top"))||0,$e.left-=parseFloat(i(Z).css("margin-left"))||0,et.top+=parseFloat(i(he[0]).css("border-top-width"))||0,et.left+=parseFloat(i(he[0]).css("border-left-width"))||0,{top:$e.top-et.top,left:$e.left-et.left}}},offsetParent:function(){return this.map(function(){for(var Z=this.offsetParent||l.body;Z&&!A.test(Z.nodeName)&&i(Z).css("position")=="static";)Z=Z.offsetParent;return Z})}},i.fn.detach=i.fn.remove,["width","height"].forEach(function(Z){var he=Z.replace(/./,function($e){return $e[0].toUpperCase()});i.fn[Z]=function($e){var et,Se=this[0];return $e===e?Ve(Se)?Se["inner"+he]:Ue(Se)?Se.documentElement["scroll"+he]:(et=this.offset())&&et[Z]:this.each(function(mt){Se=i(this),Se.css(Z,dn(this,$e,mt,Se[Z]()))})}});function at(Z,he){he(Z);for(var $e in Z.childNodes)at(Z.childNodes[$e],he)}return z.forEach(function(Z,he){var $e=he%2;i.fn[Z]=function(){var et,Se=i.map(arguments,function(At){return et=Te(At),et=="object"||et=="array"||At==null?At:K.fragment(At)}),mt,gt=this.length>1;return Se.length<1?this:this.each(function(At,Ft){mt=$e?Ft:Ft.parentNode,Ft=he==0?Ft.nextSibling:he==1?Ft.firstChild:he==2?Ft:null,Se.forEach(function(Kt){if(gt)Kt=Kt.cloneNode(!0);else if(!mt)return i(Kt).remove();at(mt.insertBefore(Kt,Ft),function(an){an.nodeName!=null&&an.nodeName.toUpperCase()==="SCRIPT"&&(!an.type||an.type==="text/javascript")&&!an.src&&window.eval.call(window,an.innerHTML)})})})},i.fn[$e?Z+"To":"insert"+(he?"Before":"After")]=function(et){return i(et)[Z](this),this}}),K.Z.prototype=i.fn,K.uniq=W,K.deserializeValue=Ie,i.zepto=K,i}();window.Zepto=Rl;window.$===void 0&&(window.$=Rl);(function(e){e.zepto.qsa;var t=1,i,r=Array.prototype.slice,s=e.isFunction,c=function(K){return typeof K=="string"},d={},l={},m="onfocusin"in window,g={focus:"focusin",blur:"focusout"},y={mouseenter:"mouseover",mouseleave:"mouseout"};l.click=l.mousedown=l.mouseup=l.mousemove="MouseEvents";function x(K){return K._zid||(K._zid=t++)}function C(K,J,W,te){if(J=I(J),J.ns)var j=A(J.ns);return(d[x(K)]||[]).filter(function(re){return re&&(!J.e||re.e==J.e)&&(!J.ns||j.test(re.ns))&&(!W||x(re.fn)===x(W))&&(!te||re.sel==te)})}function I(K){var J=(""+K).split(".");return{e:J[0],ns:J.slice(1).sort().join(" ")}}function A(K){return new RegExp("(?:^| )"+K.replace(" "," .* ?")+"(?: |$)")}function O(K,J){return K.del&&!m&&K.e in g||!!J}function F(K){return y[K]||m&&g[K]||K}function z(K,J,W,te,j,re,Te){var ye=x(K),Ve=d[ye]||(d[ye]=[]);J.split(/\s/).forEach(function(Ue){if(Ue=="ready")return e(document).ready(W);var Qe=I(Ue);Qe.fn=W,Qe.sel=j,Qe.e in y&&(W=function(vt){var it=vt.relatedTarget;if(!it||it!==this&&!e.contains(this,it))return Qe.fn.apply(this,arguments)}),Qe.del=re;var It=re||W;Qe.proxy=function(vt){if(vt=ve(vt),!vt.isImmediatePropagationStopped()){vt.data=te;var it=It.apply(K,vt._args==i?[vt]:[vt].concat(vt._args));return it===!1&&(vt.preventDefault(),vt.stopPropagation()),it}},Qe.i=Ve.length,Ve.push(Qe),"addEventListener"in K&&K.addEventListener(F(Qe.e),Qe.proxy,O(Qe,Te))})}function U(K,J,W,te,j){var re=x(K);(J||"").split(/\s/).forEach(function(Te){C(K,Te,W,te).forEach(function(ye){delete d[re][ye.i],"removeEventListener"in K&&K.removeEventListener(F(ye.e),ye.proxy,O(ye,j))})})}e.event={add:z,remove:U},e.proxy=function(K,J){if(s(K)){var W=function(){return K.apply(J,arguments)};return W._zid=x(K),W}else{if(c(J))return e.proxy(K[J],K);throw new TypeError("expected function")}},e.fn.bind=function(K,J,W){return this.on(K,J,W)},e.fn.unbind=function(K,J){return this.off(K,J)},e.fn.one=function(K,J,W,te){return this.on(K,J,W,te,1)};var H=function(){return!0},q=function(){return!1},ee=/^([A-Z]|returnValue$|layer[XY]$)/,Q={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function ve(K,J){return(J||!K.isDefaultPrevented)&&(J||(J=K),e.each(Q,function(W,te){var j=J[W];K[W]=function(){return this[te]=H,j&&j.apply(J,arguments)},K[te]=q}),(J.defaultPrevented!==i?J.defaultPrevented:"returnValue"in J?J.returnValue===!1:J.getPreventDefault&&J.getPreventDefault())&&(K.isDefaultPrevented=H)),K}function se(K){var J,W={originalEvent:K};for(J in K)!ee.test(J)&&K[J]!==i&&(W[J]=K[J]);return ve(W,K)}e.fn.delegate=function(K,J,W){return this.on(J,K,W)},e.fn.undelegate=function(K,J,W){return this.off(J,K,W)},e.fn.live=function(K,J){return e(document.body).delegate(this.selector,K,J),this},e.fn.die=function(K,J){return e(document.body).undelegate(this.selector,K,J),this},e.fn.on=function(K,J,W,te,j){var re,Te,ye=this;return K&&!c(K)?(e.each(K,function(Ve,Ue){ye.on(Ve,J,W,Ue,j)}),ye):(!c(J)&&!s(te)&&te!==!1&&(te=W,W=J,J=i),(s(W)||W===!1)&&(te=W,W=i),te===!1&&(te=q),ye.each(function(Ve,Ue){j&&(re=function(Qe){return U(Ue,Qe.type,te),te.apply(this,arguments)}),J&&(Te=function(Qe){var It,vt=e(Qe.target).closest(J,Ue).get(0);if(vt&&vt!==Ue)return It=e.extend(se(Qe),{currentTarget:vt,liveFired:Ue}),(re||te).apply(vt,[It].concat(r.call(arguments,1)))}),z(Ue,K,te,W,J,Te||re)}))},e.fn.off=function(K,J,W){var te=this;return K&&!c(K)?(e.each(K,function(j,re){te.off(j,J,re)}),te):(!c(J)&&!s(W)&&W!==!1&&(W=J,J=i),W===!1&&(W=q),te.each(function(){U(this,K,W,J)}))},e.fn.trigger=function(K,J){return K=c(K)||e.isPlainObject(K)?e.Event(K):ve(K),K._args=J,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(K):e(this).triggerHandler(K,J)})},e.fn.triggerHandler=function(K,J){var W,te;return this.each(function(j,re){W=se(c(K)?e.Event(K):K),W._args=J,W.target=re,e.each(C(re,K.type||K),function(Te,ye){if(te=ye.proxy(W),W.isImmediatePropagationStopped())return!1})}),te},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(K){e.fn[K]=function(J){return J?this.bind(K,J):this.trigger(K)}}),["focus","blur"].forEach(function(K){e.fn[K]=function(J){return J?this.bind(K,J):this.each(function(){try{this[K]()}catch{}}),this}}),e.Event=function(K,J){c(K)||(J=K,K=J.type);var W=document.createEvent(l[K]||"Events"),te=!0;if(J)for(var j in J)j=="bubbles"?te=!!J[j]:W[j]=J[j];return W.initEvent(K,te,!0),ve(W)}})(Rl);(function(e){var t=0,i=window.document,r,s,c=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,d=/^(?:text|application)\/javascript/i,l=/^(?:text|application)\/xml/i,m="application/json",g="text/html",y=/^\s*$/;function x(J,W,te){var j=e.Event(W);return e(J).trigger(j,te),!j.isDefaultPrevented()}function C(J,W,te,j){if(J.global)return x(W||i,te,j)}e.active=0;function I(J){J.global&&e.active++===0&&C(J,null,"ajaxStart")}function A(J){J.global&&!--e.active&&C(J,null,"ajaxStop")}function O(J,W){var te=W.context;if(W.beforeSend.call(te,J,W)===!1||C(W,te,"ajaxBeforeSend",[J,W])===!1)return!1;C(W,te,"ajaxSend",[J,W])}function F(J,W,te,j){var re=te.context,Te="success";te.success.call(re,J,Te,W),j&&j.resolveWith(re,[J,Te,W]),C(te,re,"ajaxSuccess",[W,te,J]),U(Te,W,te)}function z(J,W,te,j,re){var Te=j.context;j.error.call(Te,te,W,J),re&&re.rejectWith(Te,[te,W,J]),C(j,Te,"ajaxError",[te,j,J||W]),U(W,te,j)}function U(J,W,te){var j=te.context;te.complete.call(j,W,J),C(te,j,"ajaxComplete",[W,te]),A(te)}function H(){}e.ajaxJSONP=function(J,W){if(!("type"in J))return e.ajax(J);var te=J.jsonpCallback,j=(e.isFunction(te)?te():te)||"jsonp"+ ++t,re=i.createElement("script"),Te=window[j],ye,Ve=function(It){e(re).triggerHandler("error",It||"abort")},Ue={abort:Ve},Qe;return W&&W.promise(Ue),e(re).on("load error",function(It,vt){clearTimeout(Qe),e(re).off().remove(),It.type=="error"||!ye?z(null,vt||"error",Ue,J,W):F(ye[0],Ue,J,W),window[j]=Te,ye&&e.isFunction(Te)&&Te(ye[0]),Te=ye=void 0}),O(Ue,J)===!1?(Ve("abort"),Ue):(window[j]=function(){ye=arguments},re.src=J.url.replace(/\?(.+)=\?/,"?$1="+j),i.head.appendChild(re),J.timeout>0&&(Qe=setTimeout(function(){Ve("timeout")},J.timeout)),Ue)},e.ajaxSettings={type:"GET",beforeSend:H,success:H,error:H,complete:H,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:m,xml:"application/xml, text/xml",html:g,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0};function q(J){return J&&(J=J.split(";",2)[0]),J&&(J==g?"html":J==m?"json":d.test(J)?"script":l.test(J)&&"xml")||"text"}function ee(J,W){return W==""?J:(J+"&"+W).replace(/[&?]{1,2}/,"?")}function Q(J){J.processData&&J.data&&e.type(J.data)!="string"&&(J.data=e.param(J.data,J.traditional)),J.data&&(!J.type||J.type.toUpperCase()=="GET")&&(J.url=ee(J.url,J.data),J.data=void 0)}e.ajax=function(J){var W=e.extend({},J||{}),te=e.Deferred&&e.Deferred();for(r in e.ajaxSettings)W[r]===void 0&&(W[r]=e.ajaxSettings[r]);I(W),W.crossDomain||(W.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(W.url)&&RegExp.$2!=window.location.host),W.url||(W.url=window.location.toString()),Q(W),W.cache===!1&&(W.url=ee(W.url,"_="+Date.now()));var j=W.dataType,re=/\?.+=\?/.test(W.url);if(j=="jsonp"||re)return re||(W.url=ee(W.url,W.jsonp?W.jsonp+"=?":W.jsonp===!1?"":"callback=?")),e.ajaxJSONP(W,te);var Te=W.accepts[j],ye={},Ve=function(Ge,ot){ye[Ge.toLowerCase()]=[Ge,ot]},Ue=/^([\w-]+:)\/\//.test(W.url)?RegExp.$1:window.location.protocol,Qe=W.xhr(),It=Qe.setRequestHeader,vt;if(te&&te.promise(Qe),W.crossDomain||Ve("X-Requested-With","XMLHttpRequest"),Ve("Accept",Te||"*/*"),(Te=W.mimeType||Te)&&(Te.indexOf(",")>-1&&(Te=Te.split(",",2)[0]),Qe.overrideMimeType&&Qe.overrideMimeType(Te)),(W.contentType||W.contentType!==!1&&W.data&&W.type.toUpperCase()!="GET")&&Ve("Content-Type",W.contentType||"application/x-www-form-urlencoded"),W.headers)for(s in W.headers)Ve(s,W.headers[s]);if(Qe.setRequestHeader=Ve,Qe.onreadystatechange=function(){if(Qe.readyState==4){Qe.onreadystatechange=H,clearTimeout(vt);var Ge,ot=!1;if(Qe.status>=200&&Qe.status<300||Qe.status==304||Qe.status==0&&Ue=="file:"){j=j||q(W.mimeType||Qe.getResponseHeader("content-type")),Ge=Qe.responseText;try{j=="script"?(0,eval)(Ge):j=="xml"?Ge=Qe.responseXML:j=="json"&&(Ge=y.test(Ge)?null:e.parseJSON(Ge))}catch(Ct){ot=Ct}ot?z(ot,"parsererror",Qe,W,te):F(Ge,Qe,W,te)}else z(Qe.statusText||null,Qe.status?"error":"abort",Qe,W,te)}},O(Qe,W)===!1)return Qe.abort(),z(null,"abort",Qe,W,te),Qe;if(W.xhrFields)for(s in W.xhrFields)Qe[s]=W.xhrFields[s];var it="async"in W?W.async:!0;Qe.open(W.type,W.url,it,W.username,W.password);for(s in ye)It.apply(Qe,ye[s]);return W.timeout>0&&(vt=setTimeout(function(){Qe.onreadystatechange=H,Qe.abort(),z(null,"timeout",Qe,W,te)},W.timeout)),Qe.send(W.data?W.data:null),Qe};function ve(J,W,te,j){var re=!e.isFunction(W);return{url:J,data:re?W:void 0,success:re?e.isFunction(te)?te:void 0:W,dataType:re&&j||te}}e.get=function(J,W,te,j){return e.ajax(ve.apply(null,arguments))},e.post=function(J,W,te,j){var re=ve.apply(null,arguments);return re.type="POST",e.ajax(re)},e.getJSON=function(J,W,te){var j=ve.apply(null,arguments);return j.dataType="json",e.ajax(j)},e.fetchJSON=function(J){var W=new XMLHttpRequest;return new Promise(function(te,j){W.onreadystatechange=function(){try{if(W.readyState!==4)return;if(W.status>=200&&W.status<300){var re=JSON.parse(W.responseText);te(re)}else j({status:W.status,statusText:W.statusText})}catch(Te){j({status:400,statusText:`Error fetching JSON from ${J}: ${Te}`})}},W.open("GET",J,!0),W.send()})},e.fn.load=function(J,W,te){if(!this.length)return this;var j=this,re=J.split(/\s/),Te,ye=ve(J,W,te),Ve=ye.success;return re.length>1&&(ye.url=re[0],Te=re[1]),ye.success=function(Ue){j.html(Te?e("<div>").html(Ue.replace(c,"")).find(Te):Ue),Ve&&Ve.apply(j,arguments)},e.ajax(ye),this};var se=encodeURIComponent;function K(J,W,te,j){var re,Te=e.isArray(W),ye=e.isPlainObject(W);e.each(W,function(Ve,Ue){re=e.type(Ue),j&&(Ve=te?j:j+"["+(ye||re=="object"||re=="array"?Ve:"")+"]"),!j&&Te?J.add(Ue.name,Ue.value):re=="array"||!te&&re=="object"?K(J,Ue,te,Ve):J.add(Ve,Ue)})}e.param=function(J,W){var te=[];return te.add=function(j,re){this.push(se(j)+"="+se(re))},K(te,J,W),te.join("&").replace(/%20/g,"+")}})(Rl);(function(e){e.fn.serializeArray=function(){var t=[],i;return e([].slice.call(this.get(0).elements)).each(function(){i=e(this);var r=i.attr("type");this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&r!="submit"&&r!="reset"&&r!="button"&&(r!="radio"&&r!="checkbox"||this.checked)&&t.push({name:i.attr("name"),value:i.val()})}),t},e.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(i){t.push(encodeURIComponent(i.name)+"="+encodeURIComponent(i.value))}),t.join("&")},e.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var i=e.Event("submit");this.eq(0).trigger(i),i.isDefaultPrevented()||this.get(0).submit()}return this}})(Rl);(function(e){"__proto__"in{}||e.extend(e.zepto,{Z:function(i,r){return i=i||[],e.extend(i,e.fn),i.selector=r||"",i.__Z=!0,i},isZ:function(i){return e.type(i)==="array"&&"__Z"in i}});try{getComputedStyle(void 0)}catch{var t=getComputedStyle;window.getComputedStyle=function(r,s){try{return t(r,s)}catch{return null}}}})(Rl);const x_=Rl.getJSON,Hh=Rl.ajax,_y=Rl.fetchJSON,Do=[["millisecond",1,function(e){}],["second",1e3,function(e){e.setMilliseconds(0)}],["minute",1e3*60,function(e){e.setSeconds(0)}],["hour",1e3*60*60,function(e){e.setMinutes(0)}],["day",1e3*60*60*24,function(e){e.setHours(0)}],["month",1e3*60*60*24*30,function(e){e.setDate(1)}],["year",1e3*60*60*24*365,function(e){e.setMonth(0)}],["decade",1e3*60*60*24*365*10,function(e){var t=e.getFullYear();e.setFullYear(t-t%10)}],["century",1e3*60*60*24*365*100,function(e){var t=e.getFullYear();e.setFullYear(t-t%100)}],["millennium",1e3*60*60*24*365*1e3,function(e){var t=e.getFullYear();e.setFullYear(t-t%1e3)}]],mu=["millisecond","second","minute","hour","day","month","year"],rC=/^([\+-]?\d+?)(-\d{2}?)?(-\d{2}?)?$/,RQ=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,sC={base:{millisecond:"time_short",second:"time",minute:"time_no_seconds_small_date",hour:"time_no_seconds_small_date",day:"full",month:"month",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"},short:{millisecond:"time_short",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"}},yy=b_.extend({initialize:function(e,t,i){typeof e=="number"?this.data={format:"yyyy mmmm",date_obj:new Date(e)}:Date==e.constructor?this.data={format:"yyyy mmmm",date_obj:e}:(this.data=JSON.parse(JSON.stringify(e)),this._createDateObj()),e.format&&!t&&(t=e.format),this._setFormat(t,i)},setDateFormat:function(e){this.data.format=e},getDisplayDate:function(e,t){if(this.data.display_date)return this.data.display_date;e||(e=Fa.fallback),e.constructor!=Fa&&(_i("First argument to getDisplayDate must be type Language"),e=Fa.fallback);var i=t||this.data.format;return e.formatDate(this.data.date_obj,i)},getMillisecond:function(){return this.getTime()},getTime:function(){return this.data.date_obj.getTime()},isBefore:function(e){if(!this.data.date_obj.constructor==e.data.date_obj.constructor)throw new vi("date_compare_err");return"isBefore"in this.data.date_obj?this.data.date_obj.isBefore(e.data.date_obj):this.data.date_obj<e.data.date_obj},isAfter:function(e){if(!this.data.date_obj.constructor==e.data.date_obj.constructor)throw new vi("date_compare_err");return"isAfter"in this.data.date_obj?this.data.date_obj.isAfter(e.data.date_obj):this.data.date_obj>e.data.date_obj},floor:function(e){for(var t=new Date(this.data.date_obj.getTime()),i=0;i<Do.length;i++)if(Do[i][2](t),Do[i][0]==e)return new yy(t);throw new vi("invalid_scale_err",e)},_getDateData:function(){var e={year:0,month:1,day:1,hour:0,minute:0,second:0,millisecond:0};Pi(e,this.data);for(var t in mu){var i=ga(e[mu[t]]);if(!i.match(/^-?\d*$/))throw new vi("invalid_date_err",mu[t]+" = '"+e[mu[t]]+"'");var r=parseInt(e[mu[t]]);isNaN(r)&&(r=t==4||t==5?1:0),e[mu[t]]=r}return e.month>0&&e.month<=12&&(e.month=e.month-1),e},_createDateObj:function(){var e=this._getDateData();this.data.date_obj=new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond),this.data.date_obj.getFullYear()!=e.year&&this.data.date_obj.setFullYear(e.year)},findBestFormat:function(e){for(var t=mu,i=0;i<t.length;i++)if(this.data[t[i]])return e?e in sC||(e="short"):e="base",sC[e][t[i]];return""},_setFormat:function(e,t){e?this.data.format=e:this.data.format||(this.data.format=this.findBestFormat()),t?this.data.format_short=t:this.data.format_short||(this.data.format_short=this.findBestFormat(!0))},getFullYear:function(){return this.data.date_obj.getFullYear()}});function aC(e){if(e.match(rC)){var t=e.match(rC).slice(1),i={year:t[0].replace("+","")};return t[1]&&(i.month=t[1].replace("-","")),t[2]&&(i.day=t[2].replace("-","")),i}if(e.match(RQ))return cls.parseISODate(e);if(e.match(/^\-?\d+$/))return{year:e};var r={};if(e.match(/\d+\/\d+\/\d+/)){var s=e.match(/\d+\/\d+\/\d+/)[0];e=ga(e.replace(s,""));var c=s.split("/");r.month=c[0],r.day=c[1],r.year=c[2]}if(e.match(/\d+\/\d+/)){var s=e.match(/\d+\/\d+/)[0];e=ga(e.replace(s,""));var c=s.split("/");r.month=c[0],r.year=c[1]}if(e.match(":")){var d=e.split(":");if(r.hour=d[0],r.minute=d[1],d[2]){let l=d[2].split(".");r.second=l[0],r.millisecond=l[1]}}return r}const cm=b_.extend({initialize:function(e){if(this.year=parseInt(e),isNaN(this.year))throw new vi("invalid_year_err",e)},isBefore:function(e){return this.year<e.year},isAfter:function(e){return this.year>e.year},getTime:function(){return this.year}}),$x=1e6,zx=$x*10,Nx=zx*10,oC=Nx*10;function lc(e){return function(t){var i=t.getTime();return new cm(Math.floor(i/e)*e)}}const zv=[["year",1,new lc(1)],["decade",10,new lc(10)],["century",100,new lc(100)],["millennium",1e3,new lc(1e3)],["age",$x,new lc($x)],["epoch",zx,new lc(zx)],["era",Nx,new lc(Nx)],["eon",oC,new lc(oC)]],by=yy.extend({initialize:function(e,t,i){cm==e.constructor?this.data={date_obj:e}:(this.data=JSON.parse(JSON.stringify(e)),this._createDateObj()),e.format&&!t&&(t=e.format),this._setFormat(t,i)},_createDateObj:function(){var e=this._getDateData();this.data.date_obj=new cm(e.year)},floor:function(e){for(var t=0;t<zv.length;t++)if(zv[t][0]==e){var i=zv[t][2](this.data.date_obj);return new by(i)}throw new vi("invalid_scale_err",e)},getFullYear:function(){return this.data.date_obj.getTime()}}),lC=new RegExp(/\$\{(.+?)\}/g);class Fa{constructor(t,i){for(let c in vc.en)this[c]=vc.en[c];if(t&&typeof t=="string"&&t!="en"){var r=t;if(!(r in vc)){console.log(`Expected language ${r} to be cached. Did you call the constructor directly?`);var s=nD(r,i);_y(s).then(c=>{vc[r]=c}).catch(c=>{console.log(`Error loading language [${s}] ${c.statusText} [${c.status}]`)})}Pi(this,vc[r])}}mergeData(t){for(k in vc.en)t[k]&&(typeof this[k]=="object"?Pi(t[k],this[k]):this[k]=t[k])}formatBigYear(t,i){var r=t.year,s=this.bigdateformats[i]||this.bigdateformats.fallback;if(s){for(var c=0;c<s.length;c++){var d=s[c];if(Math.abs(r/d[0])>1)return cC(Math.abs(r/d[0]),d[1])}return r.toString()}else return _i("Language file dateformats missing cosmological. Falling back."),cC(r,i)}_(t,i){let r=this.messages[t]||Fa.fallback.messages[t]||t;if(r.match(lC)){if(!i)throw new vi("template_message_without_context");for(let s of r.matchAll(lC)){if(!(s[1]in i))throw new vi("template_message_without_context");r=r.replace(s[0],i[s[1]])}}return r}formatDate(t,i){return t.constructor==Date?this.formatJSDate(t,i):t.constructor==cm?this.formatBigYear(t,i):t.data&&t.data.date_obj?this.formatDate(t.data.date_obj,i):(_i("Unfamiliar date presented for formatting"),t.toString())}formatJSDate(t,i){var r=this,s=function(q,ee){var Q=r.period_labels[q];if(Q)var q=ee<12?Q[0]:Q[1];return"<span class='tl-timeaxis-timesuffix'>"+q+"</span>"},c=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,d=/[^-+\dA-Z]/g;i||(i="full");var l=this.dateformats[i]||Fa.fallback.dateformats[i];l||(l=i);var m="get",g=t[m+"Date"](),y=t[m+"Day"](),x=t[m+"Month"](),C=t[m+"FullYear"](),I=t[m+"Hours"](),A=t[m+"Minutes"](),O=t[m+"Seconds"](),F=t[m+"Milliseconds"](),z=t.getTimezoneOffset(),U={d:g,dd:gl(g),ddd:this.date.day_abbr[y],dddd:this.date.day[y],m:x+1,mm:gl(x+1),mmm:this.date.month_abbr[x],mmmm:this.date.month[x],yy:String(C).slice(2),yyyy:C<0&&this.has_negative_year_modifier()?Math.abs(C):C,h:I%12||12,hh:gl(I%12||12),H:I,HH:gl(I),M:A,MM:gl(A),s:O,ss:gl(O),l:gl(F,3),L:gl(F>99?Math.round(F/10):F),t:s("t",I),tt:s("tt",I),T:s("T",I),TT:s("TT",I),Z:(String(t).match(c)||[""]).pop().replace(d,""),o:(z>0?"-":"+")+gl(Math.floor(Math.abs(z)/60)*100+Math.abs(z)%60,4),S:["th","st","nd","rd"][g%10>3?0:(g%100-g%10!=10)*g%10]},H=l.replace(Fa.DATE_FORMAT_TOKENS,function(q){return q in U?U[q]:q.slice(1,q.length-1)});return this._applyEra(H,C)}has_negative_year_modifier(){return!!(this.era_labels.negative_year.prefix||this.era_labels.negative_year.suffix)}_applyEra(t,i){var r=i<0?this.era_labels.negative_year:this.era_labels.positive_year,s="";return r.prefix&&(s+="<span>"+r.prefix+"</span> "),s+=t,r.suffix&&(s+=" <span>"+r.suffix+"</span>"),s}}async function FQ(e,t){var i=nD(e,t);try{if(!vc[e]){let r=await _y(i);vc[e]=r}return new Fa(e,t)}catch(r){return console.log(`Error loading language [${i}] ${r.statusText}`),null}}function nD(e,t){if(/\.json$/.test(e))var i=e;else{var r="/locale/"+e+".json";/\/$/.test(t)&&(r=r.substr(1));var i=t+r}return i}function cC(e,t){if(t.match(/%(\.(\d+))?f/)){var i=t.match(/%(\.(\d+))?f/),r=i[0];return i[2]&&(e=e.toFixed(i[2])),t.replace(r,e)}return t}Fa.fallback={messages:{}};Fa.DATE_FORMAT_TOKENS=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g;var vc={en:{name:"English (built-in)",lang:"en",api:{wikipedia:"en"},messages:{loading:"Loading",wikipedia:"From Wikipedia, the free encyclopedia",error:"Error",return_to_title:"Return to Title",go_to_end:"Go to the last slide",loading_content:"Loading Content",loading_timeline:"Loading Timeline... ",swipe_to_navigate:"Swipe to Navigate<br><span class='tl-button'>OK</span>",zoom_in:"Zoom in",zoom_out:"Zoom out",unknown_read_err:"An unexpected error occurred trying to read your spreadsheet data",invalid_url_err:"Unable to read Timeline data. Make sure your URL is for a Google Spreadsheet or a Timeline JSON file.",network_err:"Unable to read your Google Spreadsheet. Make sure you have published it to the web.",missing_start_date_err:"Missing start_date",invalid_start_time_without_date:"Invalid configuration: time cannot be used without date.",invalid_end_time_without_date:"Invalid configuration: end time cannot be used without end date.",date_compare_err:"Can't compare timeline date objects on different scales",invalid_scale_err:"Invalid scale",invalid_date_err:"Invalid date: month, day and year must be numbers.",invalid_separator_error:"Invalid time: misuse of : or . as separator.",invalid_hour_err:"Invalid time (hour)",invalid_minute_err:"Invalid time (minute)",invalid_second_err:"Invalid time (second)",invalid_fractional_err:"Invalid time (fractional seconds)",invalid_second_fractional_err:"Invalid time (seconds and fractional seconds)",invalid_year_err:"Invalid year",flickr_notfound_err:"Photo not found or private",flickr_invalidurl_err:"Invalid Flickr URL",imgur_invalidurl_err:"Invalid Imgur URL",twitter_load_err:"Unable to load Tweet",twitterembed_invalidurl_err:"Invalid Twitter Embed url",wikipedia_load_err:"Unable to load Wikipedia entry",wikipedia_image_load_err:"Unable to load Wikipedia image data",spotify_invalid_url:"Invalid Spotify URL",invalid_rgb_err:"Invalid RGB argument",time_scale_scale_err:"Don't know how to get date from time for scale",axis_helper_no_options_err:"Axis helper must be configured with options",axis_helper_scale_err:"No AxisHelper available for scale",invalid_integer_option:"Invalid option value—must be a whole number.",instagram_bad_request:"Invalid or private Instagram URL",template_message_without_context:"Required variables not provided for template translation message",aria_label_timeline:"Timeline",aria_label_timeline_navigation:"Timeline navigation",aria_label_timeline_content:"Timeline content",aria_label_zoomin:"Show less than ${start} to ${end}",aria_label_zoomout:"Show more than ${start} to ${end}"},date:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],month_abbr:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_abbr:["Sun.","Mon.","Tues.","Wed.","Thurs.","Fri.","Sat."]},era_labels:{positive_year:{prefix:"",suffix:""},negative_year:{prefix:"",suffix:"BCE"}},period_labels:{t:["a","p"],tt:["am","pm"],T:["A","P"],TT:["AM","PM"]},dateformats:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time:"h:MM:ss TT' <small>'mmmm d',' yyyy'</small>'",time_short:"h:MM:ss TT",time_no_seconds_short:"h:MM TT",time_no_minutes_short:"h TT",time_no_seconds_small_date:"h:MM TT' <small>'mmmm d',' yyyy'</small>'",time_milliseconds:"l",full_long:"mmm d',' yyyy 'at' h:MM TT",full_long_small_date:"h:MM TT' <small>mmm d',' yyyy'</small>'"},bigdateformats:{fallback:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]],compact:[[1e9,"%.2f bya"],[1e6,"%.1f mya"],[1e3,"%.1f kya"],[1,"%f years ago"]],verbose:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]]}}};let kw=new Fa;Fa.fallback=kw;class Fl{setLanguage(t){this.language=t}getLanguage(){if(this.language){if(typeof this.language=="object")return this.language;_i(`I18NMixins.getLanguage: this.language should be object, but is ${typeof this.language}`)}return kw}_(t,i){return this.getLanguage()._(t,i)}}class xy{constructor(t,i,r){r&&this.setLanguage(r),this._el={parent:{},container:{},message_container:{},loading_icon:{},message:{}},this.options={width:600,height:600,message_class:"tl-message",message_icon_class:"tl-loading-icon"},this.container=t,Pi(this.options,i),this._el.container=fn("div",this.options.message_class),t&&(t.appendChild(this._el.container),this._el.parent=t),this.animator={},this._initLayout(),this._initEvents()}updateMessage(t){t?this._el.message.innerHTML=t:this._el.message.innerHTML=this._("loading"),!this._el.parent.atributes&&this.container.attributes&&(this.container.appendChild(this._el.container),this._el.parent=this.container)}updateDisplay(t,i){}_onMouseClick(){this.fire("clicked",this.options)}_onRemove(){this._el.parent={}}_initLayout(){this._el.message_container=fn("div","tl-message-container",this._el.container),this._el.loading_icon=fn("div",this.options.message_icon_class,this._el.message_container),this._el.message=fn("div","tl-message-content",this._el.message_container),this.updateMessage()}_initEvents(){ri.addListener(this._el.container,"click",this._onMouseClick,this),ri.addListener(this,"removed",this._onRemove,this)}}Fs(xy,Fl,$s,Ol);function _v(e,i){var i=i||"start_date";e.sort(function(r,s){return r[i].isBefore(s[i])?-1:r[i].isAfter(s[i])?1:0})}function uC(e){var t={hour:null,minute:null,second:null,millisecond:null},i=null,r=e.match(/(\s*[AaPp]\.?[Mm]\.?\s*)$/);r&&(i=ga(r[0]),e=ga(e.substring(0,e.lastIndexOf(i))));var s=[],c=e.match(/^\s*(\d{1,2})(\d{2})\s*$/);if(c?s=c.slice(1):(s=e.split(":"),s.length==1&&(s=e.split("."))),s.length>4)throw new vi("invalid_separator_error");let d=s[0];if(t.hour=parseInt(d),i&&i.toLowerCase()[0]=="p"&&t.hour!=12?t.hour+=12:i&&i.toLowerCase()[0]=="a"&&t.hour==12&&(t.hour=0),isNaN(t.hour)||t.hour<0||t.hour>23)throw new vi("invalid_hour_err",d);if(s.length>1){let g=s[1];if(t.minute=parseInt(g),isNaN(t.minute))throw new vi("invalid_minute_err",g)}if(s.length>2){var l=s[2].split(/[\.,]/);if(s=l.concat(s.slice(3)),s.length>2)throw new vi("invalid_second_fractional_err");if(t.second=parseInt(s[0]),isNaN(t.second))throw new vi("invalid_second_err",s[0]);if(s.length==2){var m=parseInt(s[1]);if(isNaN(m))throw new vi("invalid_fractional_err",s[1]);t.millisecond=100*m}}return t}const $Q=new RegExp("(^-?\\d+$|^$)");function dC(e){try{return Object.keys(e).forEach(t=>{let i=e[t];if(i&&i.match&&!i.match($Q))throw`invalid value ${i} for ${t}`}),!0}catch{return!1}}const hC={human:yy,cosmological:by};/*! @license DOMPurify 2.4.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.7/LICENSE */function bc(e){"@babel/helpers - typeof";return bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bc(e)}function Bx(e,t){return Bx=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},Bx(e,t)}function zQ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Nv(e,t,i){return zQ()?Nv=Reflect.construct:Nv=function(s,c,d){var l=[null];l.push.apply(l,c);var m=Function.bind.apply(s,l),g=new m;return d&&Bx(g,d.prototype),g},Nv.apply(null,arguments)}function ro(e){return NQ(e)||BQ(e)||jQ(e)||VQ()}function NQ(e){if(Array.isArray(e))return jx(e)}function BQ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jQ(e,t){if(e){if(typeof e=="string")return jx(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return jx(e,t)}}function jx(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function VQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var UQ=Object.hasOwnProperty,fC=Object.setPrototypeOf,HQ=Object.isFrozen,GQ=Object.getPrototypeOf,WQ=Object.getOwnPropertyDescriptor,Rs=Object.freeze,vo=Object.seal,qQ=Object.create,iD=typeof Reflect<"u"&&Reflect,w_=iD.apply,Vx=iD.construct;w_||(w_=function(t,i,r){return t.apply(i,r)});Rs||(Rs=function(t){return t});vo||(vo=function(t){return t});Vx||(Vx=function(t,i){return Nv(t,ro(i))});var ZQ=Na(Array.prototype.forEach),pC=Na(Array.prototype.pop),up=Na(Array.prototype.push),Bv=Na(String.prototype.toLowerCase),hb=Na(String.prototype.toString),KQ=Na(String.prototype.match),to=Na(String.prototype.replace),XQ=Na(String.prototype.indexOf),YQ=Na(String.prototype.trim),As=Na(RegExp.prototype.test),fb=JQ(TypeError);function Na(e){return function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];return w_(e,t,r)}}function JQ(e){return function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Vx(e,i)}}function ii(e,t,i){var r;i=(r=i)!==null&&r!==void 0?r:Bv,fC&&fC(e,null);for(var s=t.length;s--;){var c=t[s];if(typeof c=="string"){var d=i(c);d!==c&&(HQ(t)||(t[s]=d),c=d)}e[c]=!0}return e}function gu(e){var t=qQ(null),i;for(i in e)w_(UQ,e,[i])===!0&&(t[i]=e[i]);return t}function yv(e,t){for(;e!==null;){var i=WQ(e,t);if(i){if(i.get)return Na(i.get);if(typeof i.value=="function")return Na(i.value)}e=GQ(e)}function r(s){return console.warn("fallback value for",s),null}return r}var mC=Rs(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),pb=Rs(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),mb=Rs(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),QQ=Rs(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),gb=Rs(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),eee=Rs(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),gC=Rs(["#text"]),vC=Rs(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),vb=Rs(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),_C=Rs(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),bv=Rs(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),tee=vo(/\{\{[\w\W]*|[\w\W]*\}\}/gm),nee=vo(/<%[\w\W]*|[\w\W]*%>/gm),iee=vo(/\${[\w\W]*}/gm),ree=vo(/^data-[\-\w.\u00B7-\uFFFF]/),see=vo(/^aria-[\-\w]+$/),aee=vo(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),oee=vo(/^(?:\w+script|data):/i),lee=vo(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),cee=vo(/^html$/i),uee=function(){return typeof window>"u"?null:window},dee=function(t,i){if(bc(t)!=="object"||typeof t.createPolicy!="function")return null;var r=null,s="data-tt-policy-suffix";i.currentScript&&i.currentScript.hasAttribute(s)&&(r=i.currentScript.getAttribute(s));var c="dompurify"+(r?"#"+r:"");try{return t.createPolicy(c,{createHTML:function(l){return l},createScriptURL:function(l){return l}})}catch{return console.warn("TrustedTypes policy "+c+" could not be created."),null}};function rD(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:uee(),t=function(Ne){return rD(Ne)};if(t.version="2.4.7",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;var i=e.document,r=e.document,s=e.DocumentFragment,c=e.HTMLTemplateElement,d=e.Node,l=e.Element,m=e.NodeFilter,g=e.NamedNodeMap,y=g===void 0?e.NamedNodeMap||e.MozNamedAttrMap:g,x=e.HTMLFormElement,C=e.DOMParser,I=e.trustedTypes,A=l.prototype,O=yv(A,"cloneNode"),F=yv(A,"nextSibling"),z=yv(A,"childNodes"),U=yv(A,"parentNode");if(typeof c=="function"){var H=r.createElement("template");H.content&&H.content.ownerDocument&&(r=H.content.ownerDocument)}var q=dee(I,i),ee=q?q.createHTML(""):"",Q=r,ve=Q.implementation,se=Q.createNodeIterator,K=Q.createDocumentFragment,J=Q.getElementsByTagName,W=i.importNode,te={};try{te=gu(r).documentMode?r.documentMode:{}}catch{}var j={};t.isSupported=typeof U=="function"&&ve&&ve.createHTMLDocument!==void 0&&te!==9;var re=tee,Te=nee,ye=iee,Ve=ree,Ue=see,Qe=oee,It=lee,vt=aee,it=null,Ge=ii({},[].concat(ro(mC),ro(pb),ro(mb),ro(gb),ro(gC))),ot=null,Ct=ii({},[].concat(ro(vC),ro(vb),ro(_C),ro(bv))),wt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Xe=null,Dt=null,Tt=!0,Nt=!0,dn=!1,Sn=!0,me=!1,Ie=!1,at=!1,Z=!1,he=!1,$e=!1,et=!1,Se=!0,mt=!1,gt="user-content-",At=!0,Ft=!1,Kt={},an=null,Pn=ii({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),jn=null,tt=ii({},["audio","video","img","source","image","track"]),nt=null,ut=ii({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),qe="http://www.w3.org/1998/Math/MathML",Qt="http://www.w3.org/2000/svg",Zt="http://www.w3.org/1999/xhtml",Cn=Zt,xn=!1,Mt=null,Ht=ii({},[qe,Qt,Zt],hb),_t,cn=["application/xhtml+xml","text/html"],zn="text/html",Vt,li=null,Ee=r.createElement("form"),ne=function(Ne){return Ne instanceof RegExp||Ne instanceof Function},ae=function(Ne){li&&li===Ne||((!Ne||bc(Ne)!=="object")&&(Ne={}),Ne=gu(Ne),_t=cn.indexOf(Ne.PARSER_MEDIA_TYPE)===-1?_t=zn:_t=Ne.PARSER_MEDIA_TYPE,Vt=_t==="application/xhtml+xml"?hb:Bv,it="ALLOWED_TAGS"in Ne?ii({},Ne.ALLOWED_TAGS,Vt):Ge,ot="ALLOWED_ATTR"in Ne?ii({},Ne.ALLOWED_ATTR,Vt):Ct,Mt="ALLOWED_NAMESPACES"in Ne?ii({},Ne.ALLOWED_NAMESPACES,hb):Ht,nt="ADD_URI_SAFE_ATTR"in Ne?ii(gu(ut),Ne.ADD_URI_SAFE_ATTR,Vt):ut,jn="ADD_DATA_URI_TAGS"in Ne?ii(gu(tt),Ne.ADD_DATA_URI_TAGS,Vt):tt,an="FORBID_CONTENTS"in Ne?ii({},Ne.FORBID_CONTENTS,Vt):Pn,Xe="FORBID_TAGS"in Ne?ii({},Ne.FORBID_TAGS,Vt):{},Dt="FORBID_ATTR"in Ne?ii({},Ne.FORBID_ATTR,Vt):{},Kt="USE_PROFILES"in Ne?Ne.USE_PROFILES:!1,Tt=Ne.ALLOW_ARIA_ATTR!==!1,Nt=Ne.ALLOW_DATA_ATTR!==!1,dn=Ne.ALLOW_UNKNOWN_PROTOCOLS||!1,Sn=Ne.ALLOW_SELF_CLOSE_IN_ATTR!==!1,me=Ne.SAFE_FOR_TEMPLATES||!1,Ie=Ne.WHOLE_DOCUMENT||!1,he=Ne.RETURN_DOM||!1,$e=Ne.RETURN_DOM_FRAGMENT||!1,et=Ne.RETURN_TRUSTED_TYPE||!1,Z=Ne.FORCE_BODY||!1,Se=Ne.SANITIZE_DOM!==!1,mt=Ne.SANITIZE_NAMED_PROPS||!1,At=Ne.KEEP_CONTENT!==!1,Ft=Ne.IN_PLACE||!1,vt=Ne.ALLOWED_URI_REGEXP||vt,Cn=Ne.NAMESPACE||Zt,wt=Ne.CUSTOM_ELEMENT_HANDLING||{},Ne.CUSTOM_ELEMENT_HANDLING&&ne(Ne.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(wt.tagNameCheck=Ne.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ne.CUSTOM_ELEMENT_HANDLING&&ne(Ne.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(wt.attributeNameCheck=Ne.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ne.CUSTOM_ELEMENT_HANDLING&&typeof Ne.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(wt.allowCustomizedBuiltInElements=Ne.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),me&&(Nt=!1),$e&&(he=!0),Kt&&(it=ii({},ro(gC)),ot=[],Kt.html===!0&&(ii(it,mC),ii(ot,vC)),Kt.svg===!0&&(ii(it,pb),ii(ot,vb),ii(ot,bv)),Kt.svgFilters===!0&&(ii(it,mb),ii(ot,vb),ii(ot,bv)),Kt.mathMl===!0&&(ii(it,gb),ii(ot,_C),ii(ot,bv))),Ne.ADD_TAGS&&(it===Ge&&(it=gu(it)),ii(it,Ne.ADD_TAGS,Vt)),Ne.ADD_ATTR&&(ot===Ct&&(ot=gu(ot)),ii(ot,Ne.ADD_ATTR,Vt)),Ne.ADD_URI_SAFE_ATTR&&ii(nt,Ne.ADD_URI_SAFE_ATTR,Vt),Ne.FORBID_CONTENTS&&(an===Pn&&(an=gu(an)),ii(an,Ne.FORBID_CONTENTS,Vt)),At&&(it["#text"]=!0),Ie&&ii(it,["html","head","body"]),it.table&&(ii(it,["tbody"]),delete Xe.tbody),Rs&&Rs(Ne),li=Ne)},pe=ii({},["mi","mo","mn","ms","mtext"]),Ae=ii({},["foreignobject","desc","title","annotation-xml"]),ke=ii({},["title","style","font","a","script"]),Ke=ii({},pb);ii(Ke,mb),ii(Ke,QQ);var Be=ii({},gb);ii(Be,eee);var Oe=function(Ne){var bt=U(Ne);(!bt||!bt.tagName)&&(bt={namespaceURI:Cn,tagName:"template"});var zt=Bv(Ne.tagName),Tn=Bv(bt.tagName);return Mt[Ne.namespaceURI]?Ne.namespaceURI===Qt?bt.namespaceURI===Zt?zt==="svg":bt.namespaceURI===qe?zt==="svg"&&(Tn==="annotation-xml"||pe[Tn]):!!Ke[zt]:Ne.namespaceURI===qe?bt.namespaceURI===Zt?zt==="math":bt.namespaceURI===Qt?zt==="math"&&Ae[Tn]:!!Be[zt]:Ne.namespaceURI===Zt?bt.namespaceURI===Qt&&!Ae[Tn]||bt.namespaceURI===qe&&!pe[Tn]?!1:!Be[zt]&&(ke[zt]||!Ke[zt]):!!(_t==="application/xhtml+xml"&&Mt[Ne.namespaceURI]):!1},He=function(Ne){up(t.removed,{element:Ne});try{Ne.parentNode.removeChild(Ne)}catch{try{Ne.outerHTML=ee}catch{Ne.remove()}}},yt=function(Ne,bt){try{up(t.removed,{attribute:bt.getAttributeNode(Ne),from:bt})}catch{up(t.removed,{attribute:null,from:bt})}if(bt.removeAttribute(Ne),Ne==="is"&&!ot[Ne])if(he||$e)try{He(bt)}catch{}else try{bt.setAttribute(Ne,"")}catch{}},Et=function(Ne){var bt,zt;if(Z)Ne="<remove></remove>"+Ne;else{var Tn=KQ(Ne,/^[\r\n\t ]+/);zt=Tn&&Tn[0]}_t==="application/xhtml+xml"&&Cn===Zt&&(Ne='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ne+"</body></html>");var ci=q?q.createHTML(Ne):Ne;if(Cn===Zt)try{bt=new C().parseFromString(ci,_t)}catch{}if(!bt||!bt.documentElement){bt=ve.createDocument(Cn,"template",null);try{bt.documentElement.innerHTML=xn?ee:ci}catch{}}var Fi=bt.body||bt.documentElement;return Ne&&zt&&Fi.insertBefore(r.createTextNode(zt),Fi.childNodes[0]||null),Cn===Zt?J.call(bt,Ie?"html":"body")[0]:Ie?bt.documentElement:Fi},St=function(Ne){return se.call(Ne.ownerDocument||Ne,Ne,m.SHOW_ELEMENT|m.SHOW_COMMENT|m.SHOW_TEXT,null,!1)},yn=function(Ne){return Ne instanceof x&&(typeof Ne.nodeName!="string"||typeof Ne.textContent!="string"||typeof Ne.removeChild!="function"||!(Ne.attributes instanceof y)||typeof Ne.removeAttribute!="function"||typeof Ne.setAttribute!="function"||typeof Ne.namespaceURI!="string"||typeof Ne.insertBefore!="function"||typeof Ne.hasChildNodes!="function")},In=function(Ne){return bc(d)==="object"?Ne instanceof d:Ne&&bc(Ne)==="object"&&typeof Ne.nodeType=="number"&&typeof Ne.nodeName=="string"},nn=function(Ne,bt,zt){j[Ne]&&ZQ(j[Ne],function(Tn){Tn.call(t,bt,zt,li)})},bn=function(Ne){var bt;if(nn("beforeSanitizeElements",Ne,null),yn(Ne)||As(/[\u0080-\uFFFF]/,Ne.nodeName))return He(Ne),!0;var zt=Vt(Ne.nodeName);if(nn("uponSanitizeElement",Ne,{tagName:zt,allowedTags:it}),Ne.hasChildNodes()&&!In(Ne.firstElementChild)&&(!In(Ne.content)||!In(Ne.content.firstElementChild))&&As(/<[/\w]/g,Ne.innerHTML)&&As(/<[/\w]/g,Ne.textContent)||zt==="select"&&As(/<template/i,Ne.innerHTML))return He(Ne),!0;if(!it[zt]||Xe[zt]){if(!Xe[zt]&&Wt(zt)&&(wt.tagNameCheck instanceof RegExp&&As(wt.tagNameCheck,zt)||wt.tagNameCheck instanceof Function&&wt.tagNameCheck(zt)))return!1;if(At&&!an[zt]){var Tn=U(Ne)||Ne.parentNode,ci=z(Ne)||Ne.childNodes;if(ci&&Tn)for(var Fi=ci.length,Qn=Fi-1;Qn>=0;--Qn)Tn.insertBefore(O(ci[Qn],!0),F(Ne))}return He(Ne),!0}return Ne instanceof l&&!Oe(Ne)||(zt==="noscript"||zt==="noembed"||zt==="noframes")&&As(/<\/no(script|embed|frames)/i,Ne.innerHTML)?(He(Ne),!0):(me&&Ne.nodeType===3&&(bt=Ne.textContent,bt=to(bt,re," "),bt=to(bt,Te," "),bt=to(bt,ye," "),Ne.textContent!==bt&&(up(t.removed,{element:Ne.cloneNode()}),Ne.textContent=bt)),nn("afterSanitizeElements",Ne,null),!1)},Rn=function(Ne,bt,zt){if(Se&&(bt==="id"||bt==="name")&&(zt in r||zt in Ee))return!1;if(!(Nt&&!Dt[bt]&&As(Ve,bt))){if(!(Tt&&As(Ue,bt))){if(!ot[bt]||Dt[bt]){if(!(Wt(Ne)&&(wt.tagNameCheck instanceof RegExp&&As(wt.tagNameCheck,Ne)||wt.tagNameCheck instanceof Function&&wt.tagNameCheck(Ne))&&(wt.attributeNameCheck instanceof RegExp&&As(wt.attributeNameCheck,bt)||wt.attributeNameCheck instanceof Function&&wt.attributeNameCheck(bt))||bt==="is"&&wt.allowCustomizedBuiltInElements&&(wt.tagNameCheck instanceof RegExp&&As(wt.tagNameCheck,zt)||wt.tagNameCheck instanceof Function&&wt.tagNameCheck(zt))))return!1}else if(!nt[bt]){if(!As(vt,to(zt,It,""))){if(!((bt==="src"||bt==="xlink:href"||bt==="href")&&Ne!=="script"&&XQ(zt,"data:")===0&&jn[Ne])){if(!(dn&&!As(Qe,to(zt,It,"")))){if(zt)return!1}}}}}}return!0},Wt=function(Ne){return Ne.indexOf("-")>0},We=function(Ne){var bt,zt,Tn,ci;nn("beforeSanitizeAttributes",Ne,null);var Fi=Ne.attributes;if(Fi){var Qn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ot};for(ci=Fi.length;ci--;){bt=Fi[ci];var ns=bt,Gi=ns.name,hi=ns.namespaceURI;if(zt=Gi==="value"?bt.value:YQ(bt.value),Tn=Vt(Gi),Qn.attrName=Tn,Qn.attrValue=zt,Qn.keepAttr=!0,Qn.forceKeepAttr=void 0,nn("uponSanitizeAttribute",Ne,Qn),zt=Qn.attrValue,!Qn.forceKeepAttr&&(yt(Gi,Ne),!!Qn.keepAttr)){if(!Sn&&As(/\/>/i,zt)){yt(Gi,Ne);continue}me&&(zt=to(zt,re," "),zt=to(zt,Te," "),zt=to(zt,ye," "));var zl=Vt(Ne.nodeName);if(Rn(zl,Tn,zt)){if(mt&&(Tn==="id"||Tn==="name")&&(yt(Gi,Ne),zt=gt+zt),q&&bc(I)==="object"&&typeof I.getAttributeType=="function"&&!hi)switch(I.getAttributeType(zl,Tn)){case"TrustedHTML":{zt=q.createHTML(zt);break}case"TrustedScriptURL":{zt=q.createScriptURL(zt);break}}try{hi?Ne.setAttributeNS(hi,Gi,zt):Ne.setAttribute(Gi,zt),pC(t.removed)}catch{}}}}nn("afterSanitizeAttributes",Ne,null)}},kt=function ft(Ne){var bt,zt=St(Ne);for(nn("beforeSanitizeShadowDOM",Ne,null);bt=zt.nextNode();)nn("uponSanitizeShadowNode",bt,null),!bn(bt)&&(bt.content instanceof s&&ft(bt.content),We(bt));nn("afterSanitizeShadowDOM",Ne,null)};return t.sanitize=function(ft){var Ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},bt,zt,Tn,ci,Fi;if(xn=!ft,xn&&(ft="<!-->"),typeof ft!="string"&&!In(ft))if(typeof ft.toString=="function"){if(ft=ft.toString(),typeof ft!="string")throw fb("dirty is not a string, aborting")}else throw fb("toString is not a function");if(!t.isSupported){if(bc(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof ft=="string")return e.toStaticHTML(ft);if(In(ft))return e.toStaticHTML(ft.outerHTML)}return ft}if(at||ae(Ne),t.removed=[],typeof ft=="string"&&(Ft=!1),Ft){if(ft.nodeName){var Qn=Vt(ft.nodeName);if(!it[Qn]||Xe[Qn])throw fb("root node is forbidden and cannot be sanitized in-place")}}else if(ft instanceof d)bt=Et("<!---->"),zt=bt.ownerDocument.importNode(ft,!0),zt.nodeType===1&&zt.nodeName==="BODY"||zt.nodeName==="HTML"?bt=zt:bt.appendChild(zt);else{if(!he&&!me&&!Ie&&ft.indexOf("<")===-1)return q&&et?q.createHTML(ft):ft;if(bt=Et(ft),!bt)return he?null:et?ee:""}bt&&Z&&He(bt.firstChild);for(var ns=St(Ft?ft:bt);Tn=ns.nextNode();)Tn.nodeType===3&&Tn===ci||bn(Tn)||(Tn.content instanceof s&&kt(Tn.content),We(Tn),ci=Tn);if(ci=null,Ft)return ft;if(he){if($e)for(Fi=K.call(bt.ownerDocument);bt.firstChild;)Fi.appendChild(bt.firstChild);else Fi=bt;return(ot.shadowroot||ot.shadowrootmod)&&(Fi=W.call(i,Fi,!0)),Fi}var Gi=Ie?bt.outerHTML:bt.innerHTML;return Ie&&it["!doctype"]&&bt.ownerDocument&&bt.ownerDocument.doctype&&bt.ownerDocument.doctype.name&&As(cee,bt.ownerDocument.doctype.name)&&(Gi="<!DOCTYPE "+bt.ownerDocument.doctype.name+`>
`+Gi),me&&(Gi=to(Gi,re," "),Gi=to(Gi,Te," "),Gi=to(Gi,ye," ")),q&&et?q.createHTML(Gi):Gi},t.setConfig=function(ft){ae(ft),at=!0},t.clearConfig=function(){li=null,at=!1},t.isValidAttribute=function(ft,Ne,bt){li||ae({});var zt=Vt(ft),Tn=Vt(Ne);return Rn(zt,Tn,bt)},t.addHook=function(ft,Ne){typeof Ne=="function"&&(j[ft]=j[ft]||[],up(j[ft],Ne))},t.removeHook=function(ft){if(j[ft])return pC(j[ft])},t.removeHooks=function(ft){j[ft]&&(j[ft]=[])},t.removeAllHooks=function(){j={}},t}var wy=rD();const hee={text:["headline","text"],media:["caption","credit"]},fee={start_date:["display_date"],end_date:["display_date"],slide:["display_date","group"],date:["display_date"]};wy.addHook("afterSanitizeAttributes",function(e){if(e.nodeName=="A"&&"href"in e){"target"in e.attributes||e.setAttribute("target","_blank");let t=e.attributes.rel;t?t.value.indexOf("noopener")==-1&&e.setAttribute("rel",`noopener ${t.value}`):e.setAttribute("rel","noopener")}});function yC(e,t,i){Object.keys(i).forEach(r=>{var s=r=="slide"?e:e[r];s&&i[r].forEach(c=>{typeof s[c]<"u"&&(s[c]=t(s[c]))})})}function pee(e){return wy.sanitize(e,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder","target"]})}class Eu{constructor(t){if(this.title="",this.scale="",this.events=[],this.eras=[],this.event_dict={},this.messages={errors:[],warnings:[]},typeof t=="object"&&t.events){if(this.scale=t.scale,this.events=[],this._ensureValidScale(t.events),t.title){var i=this._assignID(t.title);this._tidyFields(t.title),this.title=t.title,this.event_dict[i]=this.title}for(var r=0;r<t.events.length;r++)try{this.addEvent(t.events[r],!0)}catch(s){this.logError(s)}t.eras&&t.eras.forEach((s,c)=>{try{this.addEra(s)}catch(d){this.logError("Era "+c+": "+d)}}),_v(this.events),_v(this.eras)}}logError(t){_i(`logError: ${t}`),this.messages.errors.push(t)}getErrors(t){return t?this.messages.errors.join(t):this.messages.errors}validate(){(typeof this.events>"u"||typeof this.events.length>"u"||this.events.length==0)&&this.logError("Timeline configuration has no events.");for(var t=0;t<this.eras.length;t++)if(typeof this.eras[t].start_date>"u"||typeof this.eras[t].end_date>"u"){var i;this.eras[t].headline?i=this.eras[t].headline:i="era "+(t+1),this.logError("All eras must have start and end dates. ["+i+"]")}}isValid(){return this.messages.errors.length==0}addEvent(t,i){var r=this._assignID(t);return typeof t.start_date>"u"?(_i("Missing start date, skipping event"),console.log(t),null):(this._processDates(t),this._tidyFields(t),this.events.push(t),this.event_dict[r]=t,i||_v(this.events),r)}addEra(t){var i=this._assignID(t);if(typeof t.start_date>"u")throw new vi("missing_start_date_err",i);this._processDates(t),this._tidyFields(t),this.eras.push({start_date:t.start_date,end_date:t.end_date,headline:t.text.headline})}_assignID(t){var i=t.unique_id;return ga(i)||(i=t.text?ub(t.text.headline):null),t.unique_id=bQ(this.event_dict,i),t.unique_id}_makeUniqueIdentifiers(t,i){for(var r=[t],s=0;s<i.length;s++)ga(i[s].unique_id)&&(i[s].unique_id=ub(i[s].unique_id),r.indexOf(i[s].unique_id)==-1?r.push(i[s].unique_id):i[s].unique_id="");if(r.length!=i.length+1){for(var s=0;s<i.length;s++)if(!i[s].unique_id){var c=i[s].text?ub(i[s].text.headline):null;c||(c=ju(6)),r.indexOf(c)!=-1&&(c=c+"-"+s),r.push(c),i[s].unique_id=c}}}_ensureValidScale(t){if(!this.scale){this.scale="human";for(var i=0;i<t.length;i++){if(t[i].scale=="cosmological"){this.scale="cosmological";break}if(t[i].start_date&&typeof t[i].start_date.year<"u"){var r=new by(t[i].start_date),s=r.data.date_obj.year;if(s<-271820||s>275759){this.scale="cosmological";break}}}_i(`Determining scale dynamically: ${this.scale}`)}var c=hC[this.scale];c||this.logError("Don't know how to process dates on scale "+this.scale)}_processDates(t){var i=hC[this.scale];if(!(t.start_date instanceof i)){var r=t.start_date;if(t.start_date=new i(r),typeof t.end_date<"u"&&!(t.end_date instanceof i)){var s=t.end_date,c=!0;for(let d in r)c=c&&r[d]==s[d];c?(_i("End date same as start date is redundant; dropping end date"),delete t.end_date):t.end_date=new i(s)}}}getEarliestDate(){var t=this.events[0].start_date;return this.eras&&this.eras.length>0&&this.eras[0].start_date.isBefore(t)?this.eras[0].start_date:t}getLatestDate(){for(var t=[],i=0;i<this.events.length;i++)this.events[i].end_date?t.push({date:this.events[i].end_date}):t.push({date:this.events[i].start_date});for(var i=0;i<this.eras.length;i++)this.eras[i].end_date?t.push({date:this.eras[i].end_date}):t.push({date:this.eras[i].start_date});return _v(t,"date"),t.slice(-1)[0].date}_tidyFields(t){function i(r,s,c){c||(c=""),r.hasOwnProperty(s)||(r[s]=c)}t.group&&(t.group=ga(t.group)),t.text||(t.text={}),i(t.text,"text"),i(t.text,"headline"),yC(t,pee,hee),yC(t,PQ,fee)}}function mee(e,t){return e==null?"":(t=t||`
`,e.charAt(e.length-t.length)!==t?e:e.substring(0,e.length-t.length))}async function gee(e){return new Promise((t,i)=>{if(e.data){var r=sD(aD(e.data,e),e);r.useMemoryStore=!0,t(r)}else e.url&&window.fetch(e.url,{mode:"cors"}).then(function(s){if(s.status!=200){s.headers.get("content-type")=="application/json"?s.text().then(c=>{i(JSON.parse(c))}):i({status_code:s.status,message:`Error fetching CSV: [${s.status} ${s.statusText}]`});return}return s.text?s.text():s}).then(function(s){if(s){var c=yee(s,e);c.useMemoryStore=!0,t(c)}}).catch(s=>{i({status_code:500,message:`Error fetching CSV: ${s}`})})})}function sD(e,t){return t=t||{},t.noHeaderRow!==!0&&e.length>0?{fields:e[0].map((i,r)=>i&&i.trim?i.trim():`untitled${r}`),records:e.slice(1)}:{records:e}}function vee(e){var t={delimiter:",",doublequote:!0,lineterminator:`
`,quotechar:'"',skipinitialspace:!0,skipinitialrows:0};for(var i in e)i==="trim"?t.skipinitialspace=e.trim:t[i.toLowerCase()]=e[i];return t}function aD(e,t){(!t||t&&!t.lineterminator)&&(e=_ee(e,t));var i=vee(t);e=mee(e,i.lineterminator);var r="",s=!1,c=!1,d="",l=[],m=[],g,y;for(y=function(x){return c!==!0&&(x===""?x=null:i.skipinitialspace===!0&&(x=x.trim())),x},g=0;g<e.length;g+=1)r=e.charAt(g),s===!1&&(r===i.delimiter||r===i.lineterminator)?(d=y(d),l.push(d),r===i.lineterminator&&(m.push(l),l=[]),d="",c=!1):r!==i.quotechar?d+=r:s?e.charAt(g+1)===i.quotechar?(d+=i.quotechar,g+=1):s=!1:(s=!0,c=!0);return d=y(d),l.push(d),m.push(l),i.skipinitialrows&&(m=m.slice(i.skipinitialrows)),m}function _ee(e,t){return t&&!t.lineterminator?e.replace(/(\r\n|\n|\r)/gm,`
`):e}function yee(e,t){let i=sD(aD(e,t)),r=[];return i.records.forEach(s=>{let c={};i.fields.forEach((d,l)=>c[d]=s[l]),r.push(c)}),r}function qd(e){if(e)return e.replace(/[\s,]+/g,"")}function bee(e){let t={key:null,worksheet:0};var i=/\bkey=([-_A-Za-z0-9]+)&?/i,r=/docs.google.com\/spreadsheets(.*?)\/d\//;if(e.match(i))t.key=e.match(i)[1];else if(e.match(r)){var s=e.search(r)+e.match(r)[0].length,c=e.substr(s);t.key=c.split("/")[0],e.match(/\?gid=(\d+)/)&&(t.worksheet=e.match(/\?gid=(\d+)/)[1])}else e.match(/^\b[-_A-Za-z0-9]+$/)&&(t.key=e);return t.key?t:null}function xee(e){return typeof e!="string"?"":e.match(/^(https?:)?\/\/?/)?{url:e}:{color:e}}function wee(e){let t={};Object.keys(e).forEach(r=>{t[r]=ga(e[r])});var i={media:{caption:t["Media Caption"]||"",credit:t["Media Credit"]||"",url:t.Media||"",thumbnail:t["Media Thumbnail"]||""},text:{headline:t.Headline||"",text:t.Text||""},display_date:t["Display Date"]||"",group:t.Group||t.Tag||"",background:xee(t.Background),type:t.Type||""};if(Object.keys(t).includes("Start Date")||Object.keys(t).includes("End Date"))t["Start Date"]&&(i.start_date=aC(t["Start Date"])),t["End Date"]&&(i.end_date=aC(t["End Date"]));else{if(t.Year&&(i.start_date={year:qd(t.Year),month:qd(t.Month)||"",day:qd(t.Day)||""}),t["End Year"]&&(i.end_date={year:qd(t["End Year"])||"",month:qd(t["End Month"])||"",day:qd(t["End Day"])||""}),t.Time)if(i.start_date)Pi(i.start_date,uC(t.Time));else throw new vi("invalid_start_time_without_date");if(t["End Time"])if(i.end_date)Pi(i.end_date,uC(t["End Time"]));else throw new vi("invalid_end_time_without_date");if(i.start_date&&!dC(i.start_date))throw new vi("invalid_date_err");if(i.end_date&&!dC(i.end_date))throw new vi("invalid_date_err")}return i}async function See(e,t){let i=[];e=Tee(e),await gee({url:`${t}${e}`}).then(s=>{i=s}).catch(s=>{if(s.proxy_err_code=="response_not_csv")throw new vi("Timeline could not read the data for your timeline. Make sure you have published it to the web.");let c="undefined error";throw Array.isArray(s.message)?c=s.message.join("<br>"):c=String(s.message),new vi(c)});let r={events:[],errors:[],warnings:[],eras:[]};return i.forEach((s,c)=>{try{if(!xQ(s)){let d=wee(s);Iee(d,r)}}catch(d){if(d.constructor==vi)r.errors.push(d);else{d.message&&(d=d.message);let l=s.Headline||c;r.errors.push(d+`[${l}]`)}}}),r}function Tee(e){if(e=e.trim(),e.match(/^[a-zA-Z0-9-_]+$/))return`https://docs.google.com/spreadsheets/d/${e}/pub?output=csv`;if(e.startsWith("https://docs.google.com/spreadsheets/")){if(e.match(/\/pub\?output=csv$/))return e;let t=new URL(e),i=new URLSearchParams(t.search);i.set("output","csv"),i.get("gid")&&i.set("single","true"),t.search=`?${i.toString()}`;let r=t.pathname.substr(0,t.pathname.lastIndexOf("/"));return t.pathname=`${r}/pub`,t.toString()}throw new vi("invalid_url_err",e)}async function Eee(e,t){if(!t.sheets_proxy)throw new vi("Proxy option must be set to read data from Google");var i=await See(e,t.sheets_proxy);if(i)return i}async function Cee(e,t){let i=null,r={};if(typeof t=="function"?i=t:typeof t=="object"&&(r=t,i=t.callback,typeof r.callback=="function"&&(i=r.callback)),!i)throw new vi("Second argument to makeConfig must be either a function or an object which includes a 'callback' property with a 'function' type value");var s,c,d=bee(e);if(d){try{c=await Eee(e,r)}catch(m){s=new Eu,m.name=="NetworkError"?s.logError(new vi("network_err")):m.name=="TLError"?s.logError(m):s.logError(new vi("unknown_read_err",m.name)),i(s);return}if(s=new Eu(c),c.errors)for(var l=0;l<c.errors.length;l++)s.logError(c.errors[l]);i(s)}else Hh({url:e,dataType:"json",success:function(m){try{s=new Eu(m)}catch(g){s=new Eu,s.logError(g)}i(s)},error:function(m,g,y){if(s=new Eu,g=="parsererror")var y=new vi("invalid_url_err");else var y=new vi("unknown_read_err",g);s.logError(y),i(s)}})}function Iee(e,t){var i="event";typeof e.type<"u"&&(i=e.type,delete e.type),i=="title"?t.title?(t.warnings.push("Multiple title slides detected."),t.events.push(e)):t.title=e:i=="era"?t.eras.push(e):t.events.push(e)}class Aee{constructor(t){if(t)this.scale=t.scale,this.minor=t.minor,this.major=t.major;else throw new vi("axis_helper_no_options_err")}getPixelsPerTick(t){return t*this.minor.factor}getMajorTicks(t){return this._getTicks(t,this.major)}getMinorTicks(t){return this._getTicks(t,this.minor)}_getTicks(t,i){for(var r=t._scaled_padding*i.factor,s=t._earliest-r,c=t._latest+r,d=[],l=s;l<c;l+=i.factor)d.push(t.getDateFromTime(l).floor(i.name));return{name:i.name,ticks:d}}}var Ux={},oD=function(e,t){Ux[e]=[];for(var i=0;i<t.length-1;i++){var r=t[i],s=t[i+1];Ux[e].push(new Aee({scale:r[3],minor:{name:r[0],factor:r[1]},major:{name:s[0],factor:s[1]}}))}};oD("human",Do);oD("cosmological",zv);function Mee(e,t){typeof t!="number"&&(t=100);var i=e.getScale(),r=Ux[i];if(!r)throw new vi("axis_helper_scale_err",i);for(var s=null,c=0;c<r.length;c++){var d=r[c],l=d.getPixelsPerTick(e._pixels_per_milli);if(l>t){if(s==null)return d;var m=Math.abs(t-l),g=Math.abs(t-l);return m<g?d:s}s=d}return r[r.length-1]}const kee={millisecond:"time_milliseconds",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"compact",epoch:"compact",era:"compact",eon:"compact",eon2:"compact"};class bC{constructor(t,i){var r=t.events;this._scale=t.scale,i=Pi({display_width:500,screen_multiplier:3,max_rows:null},i),this._display_width=i.display_width,this._screen_multiplier=i.screen_multiplier,this._pixel_width=this._screen_multiplier*this._display_width,this._group_labels=void 0,this._positions=[],this._pixels_per_milli=0,this._earliest=t.getEarliestDate().getTime(),this._latest=t.getLatestDate().getTime(),this._span_in_millis=this._latest-this._earliest,this._span_in_millis<=0&&(this._span_in_millis=this._computeDefaultSpan(t)),this._average=this._span_in_millis/r.length,this._pixels_per_milli=this.getPixelWidth()/this._span_in_millis,this._axis_helper=Mee(this),this._scaled_padding=1/this.getPixelsPerTick()*(this._display_width/2),this._computePositionInfo(r,i.max_rows)}_computeDefaultSpan(t){if(t.scale=="human"){for(var i={},r=0;r<t.events.length;r++){var s=t.events[r].start_date.findBestFormat();i[s]=i[s]?i[s]+1:1}for(var r=Do.length-1;r>=0;r--)if(i.hasOwnProperty(Do[r][0])){var c=Do[Do.length-1];return Do[r+1]&&(c=Do[r+1]),c[1]}return 365*24*60*60*1e3}return 2e5}getGroupLabels(){return this._group_labels||[]}getScale(){return this._scale}getNumberOfRows(){return this._number_of_rows}getPixelWidth(){return this._pixel_width}getPosition(t){return(t-this._earliest)*this._pixels_per_milli}getPositionInfo(t){return this._positions[t]}getPixelsPerTick(){return this._axis_helper.getPixelsPerTick(this._pixels_per_milli)}getTicks(){return{major:this._axis_helper.getMajorTicks(this),minor:this._axis_helper.getMinorTicks(this)}}getDateFromTime(t){if(this._scale=="human")return new yy(t);if(this._scale=="cosmological")return new by(new cm(t));throw new vi("time_scale_scale_err",this._scale)}getMajorScale(){return this._axis_helper.major.name}getMinorScale(){return this._axis_helper.minor.name}_assessGroups(t){for(var i=[],r=!1,s=0;s<t.length;s++)t[s].group&&(i.indexOf(t[s].group)<0?i.push(t[s].group):r=!0);return i.length&&r&&i.push(""),i}_computeRowInfo(t,i){for(var r=[],s=0,c=0;c<t.length;c++){var d=t[c],l=[];delete d.row;for(var m=0;m<r.length;m++)if(l.push(r[m].end-d.start),l[m]<=0){d.row=m,r[m]=d;break}if(typeof d.row>"u")if(i===null)d.row=r.length,r.push(d);else if(i>0)d.row=r.length,r.push(d),i--;else{var g=Math.min.apply(null,l),y=l.indexOf(g);d.row=y,d.end>r[y].end&&(r[y]=d),s++}}return{n_rows:r.length,n_overlaps:s}}_computePositionInfo(t,i,r){r=r||100;for(var s=[],c=!1,d=0;d<t.length;d++){var l={start:this.getPosition(t[d].start_date.getTime())};if(this._positions.push(l),typeof t[d].end_date<"u"){var m=this.getPosition(t[d].end_date.getTime());l.width=m-l.start,l.width>r?l.end=l.start+l.width:l.end=l.start+r}else l.width=r,l.end=l.start+r;t[d].group?s.indexOf(t[d].group)<0&&s.push(t[d].group):c=!0}if(s.length){c&&s.push("");for(var y=[],d=0;d<s.length;d++)y[d]={label:s[d],idx:d,positions:[],n_rows:1,n_overlaps:0};for(var d=0;d<this._positions.length;d++){var l=this._positions[d];l.group=s.indexOf(t[d].group||""),l.row=0;for(var x=y[l.group],C=x.positions.length-1;C>=0;C--)x.positions[C].end>l.start&&x.n_overlaps++;x.positions.push(l)}for(var I=s.length;;){var A=Math.max(0,i-I);if(!A||(y.sort(function(U,H){return U.n_overlaps>H.n_overlaps?-1:U.n_overlaps<H.n_overlaps?1:U.idx-H.idx}),!y[0].n_overlaps))break;for(var I=0,d=0;d<y.length;d++){var x=y[d];if(x.n_overlaps&&A){var O=this._computeRowInfo(x.positions,x.n_rows+1);x.n_rows=O.n_rows,x.n_overlaps=O.n_overlaps,A--}I+=x.n_rows}}this._number_of_rows=I,this._group_labels=[],y.sort(function(z,U){return z.idx-U.idx});for(var d=0,F=0;d<y.length;d++){this._group_labels.push({label:y[d].label,rows:y[d].n_rows});for(var C=0;C<y[d].positions.length;C++){var l=y[d].positions[C];l.row+=F}F+=y[d].n_rows}}else{var g=this._computeRowInfo(this._positions,i);this._number_of_rows=g.n_rows}}getAxisTickDateFormat(t){return this._scale=="cosmological"?"compact":kee[t]}}class lD{constructor(t){this._el={parent:{},container:{},message:{}},this.options={width:600,height:600},this.data={label:"",rows:1},this._el.container=fn("div","tl-timegroup"),Pi(this.data,t),this.animator={},this._initLayout(),this._initEvents()}updateDisplay(t,i){}setRowPosition(t,i){this.options.height=i*this.data.rows,this.setPosition({top:t}),this._el.container.style.height=this.options.height+"px"}setAlternateRowColor(t,i){var r="tl-timegroup";t&&(r+=" tl-timegroup-alternate"),i&&(r+=" tl-timegroup-hidden"),this._el.container.className=r}_onMouseClick(){this.fire("clicked",this.options)}_initLayout(){this._el.message=fn("div","tl-timegroup-message",this._el.container),this._el.message.innerHTML=this.data.label}_initEvents(){ri.addListener(this._el.container,"click",this._onMouseClick,this)}_updateDisplay(t,i,r){}}Fs(lD,$s,Ol);class cD{constructor(t,i,r,s){this.start_date=t,this.end_date=i,this.headline=r,this._el={container:{},background:{},content_container:{},content:{},text:{}},this._text={},this._state={loaded:!1},this.options={duration:1e3,ease:vy,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,Pi(this.options,s),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(t){}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}updateDisplay(t,i){this._updateDisplay(t,i)}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.start_date.getTime()}getEndTime(){return this.end_date?this.end_date.getTime():!1}setHeight(t){var i=12,r=1;this._el.content_container.style.height=t+"px",this._el.content.className="tl-timeera-content",my?(r=Math.floor(t/(i+2)),r<1&&(r=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=r):(r=t/i,r>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=r*i+"px")}setWidth(t){this.end_date&&(this._el.container.style.width=t+"px",t>this.options.marker_width_min?(this._el.content_container.style.width=t+"px",this._el.content_container.className="tl-timeera-content-container tl-timeera-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timeera-content-container"))}setClass(t){this._el.container.className=t}setRowPosition(t,i){this.setPosition({top:t}),i<56&&this._el.content_container.remove("tl-timeera-content-container-small")}setColor(t){this._el.container.className="tl-timeera tl-timeera-color"+t}_initLayout(){this._el.container=fn("div","tl-timeera"),this.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timeera tl-timeera-with-end"),this._el.content_container=fn("div","tl-timeera-content-container",this._el.container),this._el.background=fn("div","tl-timeera-background",this._el.content_container),this._el.content=fn("div","tl-timeera-content",this._el.content_container),this._el.text=fn("div","tl-timeera-text",this._el.content),this._text=fn("h2","tl-headline",this._el.text),this.headline&&this.headline!=""&&(this._text.innerHTML=mh(this.headline)),this.onLoaded()}_initEvents(){}_updateDisplay(t,i,r){t&&(this.options.width=t),i&&(this.options.height=i)}}Fs(cD,$s,Ol);function Pee(e){const t=e.getBoundingClientRect();return t.left>=0&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}class uD{constructor(t,i,r){r&&this.setLanguage(r),this._el={container:{},content_container:{},major:{},minor:{}},this._text={},this._state={loaded:!1},this.data={},this.options={duration:1e3,ease:vy,width:600,height:600},this.active=!1,this.animator={},this.axis_helper={},this.minor_ticks=[],this.major_ticks=[],typeof t=="object"?this._el.container=t:this._el.container=$m(t),Pi(this.options,i),this._initLayout(),this._initEvents()}show(){}hide(){}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}updateDisplay(t,i){this._updateDisplay(t,i)}getLeft(){return this._el.container.style.left.slice(0,-2)}drawTicks(t,i){var r=t.getTicks();this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor",this._el.major.style.opacity=0,this._el.minor.style.opacity=0,this.major_ticks=this._createTickElements(r.major.ticks,this._el.major,t.getAxisTickDateFormat(r.major.name)),this.minor_ticks=this._createTickElements(r.minor.ticks,this._el.minor,t.getAxisTickDateFormat(r.minor.name),r.major.ticks),this.positionTicks(t,i,!0),this._el.major.className="tl-timeaxis-major tl-animate-opacity tl-timeaxis-animate-opacity",this._el.minor.className="tl-timeaxis-minor tl-animate-opacity tl-timeaxis-animate-opacity",this._el.major.style.opacity=1,this._el.minor.style.opacity=1}_createTickElements(t,i,r,s){i.innerHTML="";var c={},d=new Date(-1,13,-30);if(c[d.getTime()]=!0,s)for(var l=0;l<s.length;l++)c[s[l].getTime()]=!0;for(var m=[],l=0;l<t.length;l++){var g=t[l];if(!(g.getTime()in c)){var y=fn("div","tl-timeaxis-tick",i),x=fn("span","tl-timeaxis-tick-text tl-animate-opacity",y);let I=g.getDisplayDate(this.getLanguage(),r);x.innerHTML=I,m.push({tick:y,tick_text:x,display_date:I,date:g})}}return m}positionTicks(t,i,r){r?(this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor"):(this._el.major.className="tl-timeaxis-major tl-timeaxis-animate",this._el.minor.className="tl-timeaxis-minor tl-timeaxis-animate"),this._positionTickArray(this.major_ticks,t,i),this._positionTickArray(this.minor_ticks,t,i)}_positionTickArray(t,i,r){if(t[1]&&t[0]){var s=i.getPosition(t[1].date.getMillisecond())-i.getPosition(t[0].date.getMillisecond()),c=1;s<r&&(c=Math.round(r/i.getPixelsPerTick()));for(var d=1,l=0;l<t.length;l++){var m=t[l];m.tick.style.left=i.getPosition(m.date.getMillisecond())+"px",m.tick_text.innerHTML=m.display_date,c>1?d>=c?(d=1,m.tick_text.style.opacity=1,m.tick.className="tl-timeaxis-tick"):(d++,m.tick_text.style.opacity=0,m.tick.className="tl-timeaxis-tick tl-timeaxis-tick-hidden"):(m.tick_text.style.opacity=1,m.tick.className="tl-timeaxis-tick")}}}getVisibleTicks(){return{major:this._getVisibleTickArray(this.major_ticks),minor:this._getVisibleTickArray(this.minor_ticks)}}_getVisibleTickArray(t){return t.filter(({tick:i})=>Pee(i))}_initLayout(){this._el.content_container=fn("div","tl-timeaxis-content-container",this._el.container),this._el.major=fn("div","tl-timeaxis-major",this._el.content_container),this._el.minor=fn("div","tl-timeaxis-minor",this._el.content_container),this.onLoaded()}_initEvents(){}_updateDisplay(t,i,r){t&&(this.options.width=t),i&&(this.options.height=i)}}Fs(uD,$s,Ol,Fl);class dD{constructor(t,i,r){this._el={container:{},content_container:{},content:{},headline_container:{},headline:{},date:{}},this.options={title:!1},this.data={unique_id:"",headline:"headline",text:"text"},EQ(this,t),Pi(this.options,i),this._el.container=fn("div","tl-text"),this._el.container.id=this.data.unique_id,this._initLayout(),r&&r.appendChild(this._el.container)}show(){}hide(){}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}headlineHeight(){return this._el.headline.offsetHeight+40}addDateText(t){this._el.date.innerHTML=t}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){if(this._el.content_container=fn("div","tl-text-content-container",this._el.container),this._el.headline_container=fn("div","tl-text-headline-container",this._el.content_container),this.data.headline!=""){var t="tl-headline";this.options.title&&(t="tl-headline tl-headline-title"),this._el.headline=fn("h2",t,this._el.headline_container),this._el.headline.innerHTML=this.data.headline}if(this._el.date=fn("h3","tl-headline-date",this._el.headline_container),this.data.text!=""){var i="";i+=CQ(this.options.autolink==!0?Fx(this.data.text):this.data.text),this._el.content=fn("div","tl-text-content",this._el.content_container),this._el.content.innerHTML=i}this.onLoaded()}}Fs(dD,$s);class Yi{constructor(t,i,r){r&&this.setLanguage(r),this._el={container:{},content_container:{},content:{},content_item:{},content_link:{},caption:null,credit:null,parent:{},link:null},this.player=null,this.timer=null,this.load_timer=null,this.message=null,this.media_id=null,this._state={loaded:!1,show_meta:!1,media_loaded:!1},this.data={unique_id:null,url:null,credit:null,caption:null,credit_alternate:null,caption_alternate:null,link:null,link_target:null},this.options={api_key_flickr:"bd3a7c45ddd52f3101825d41563a6125",api_key_googlemaps:"AIzaSyB9dW8e_iRrATFa8g24qB6BDBGdkrLDZYI",api_key_embedly:"",credit_height:0,caption_height:0,background:0},this.animator={},Pi(this.options,i),Pi(this.data,t),this.options.background||(this._el.container=fn("div","tl-media"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._initLayout())}loadMedia(){var t=this;if(!this._state.loaded)try{this.load_timer=setTimeout(function(){t.loadingMessage(),t._loadMedia(),t._updateDisplay()},1200)}catch(i){_i("Error loading media for ",this._media),_i(i)}}_updateMessage(t){this.message&&this.message.updateMessage(t)}loadingMessage(){this._updateMessage(this._("loading")+" "+this.options.media_name)}errorMessage(t){t?t=this._("error")+": "+t:t=this._("error"),this._updateMessage(t)}updateMediaDisplay(t){this._state.loaded&&!this.options.background&&(nd?this._el.content_item.style.maxHeight=this.options.height/2+"px":this._el.content_item.style.maxHeight=this.options.height-this.options.credit_height-this.options.caption_height-30+"px",this._el.container.style.maxWidth=this.options.width+"px",Lh&&this._el.content_item.offsetWidth>this._el.content_item.offsetHeight,this._updateMediaDisplay(t),this._state.media_loaded&&(this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")))}_loadMedia(){this.onLoaded()}_updateMediaDisplay(t){Lh&&(this._el.content_item.style.maxWidth=this.options.width+"px",this._el.content_item.style.width="auto")}_getMeta(){}_getImageURL(t,i){return""}show(){}hide(){}addTo(t){t.appendChild(this._el.container),this.onAdd()}removeFrom(t){t.removeChild(this._el.container),this.onRemove()}getImageURL(t,i){return this._getImageURL(t,i)}updateDisplay(t,i,r){this._updateDisplay(t,i,r)}stopMedia(){try{this._stopMedia()}catch(t){_i(`stopMedia() exception: ${t}`)}}loadErrorDisplay(t){try{this._el.content.removeChild(this._el.content_item)}catch{}this._el.content_item=fn("div","tl-media-item tl-media-loaderror",this._el.content),this._el.content_item.innerHTML="<div class='tl-icon-"+this.options.media_type+"'></div><p>"+t+"</p>",this.onLoaded(!0)}onLoaded(t){this._state.loaded=!0,this.fire("loaded",this.data),this.message&&this.message.hide(),t||this.options.background||this.showMeta(),this.updateDisplay()}onMediaLoaded(t){this._state.media_loaded=!0,this.fire("media_loaded",this.data),this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")}showMeta(t,i){this._state.show_meta=!0,this.data.credit&&this.data.credit!=""&&(this._el.credit=fn("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.options.autolink==!0?Fx(this.data.credit):this.data.credit,this.options.credit_height=this._el.credit.offsetHeight),this.data.caption&&this.data.caption!=""&&(this._el.caption=fn("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.options.autolink==!0?Fx(this.data.caption):this.data.caption,this.options.caption_height=this._el.caption.offsetHeight),(!this.data.caption||!this.data.credit)&&this.getMeta()}getMeta(){this._getMeta()}updateMeta(){!this.data.credit&&this.data.credit_alternate&&(this._el.credit=fn("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.data.credit_alternate,this.options.credit_height=this._el.credit.offsetHeight),!this.data.caption&&this.data.caption_alternate&&(this._el.caption=fn("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.data.caption_alternate,this.options.caption_height=this._el.caption.offsetHeight),this.updateDisplay()}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){this.message=new xy(this._el.container,this.options,this.getLanguage()),this._el.content_container=fn("div","tl-media-content-container",this._el.container),this.data.link&&this.data.link!=""?(this._el.link=fn("a","tl-media-link",this._el.content_container),this._el.link.href=this.data.link,this.data.link_target&&this.data.link_target!=""?this._el.link.target=this.data.link_target:this._el.link.target="_blank",this._el.link.target=="_blank"&&this._el.link.setAttribute("rel","noopener"),this._el.content=fn("div","tl-media-content",this._el.link)):this._el.content=fn("div","tl-media-content",this._el.content_container)}_updateDisplay(t,i,r){t&&(this.options.width=t),i&&(this.options.height=i),r&&(this.options.layout=r),this._el.credit&&(this.options.credit_height=this._el.credit.offsetHeight),this._el.caption&&(this.options.caption_height=this._el.caption.offsetHeight+5),this.updateMediaDisplay(this.options.layout)}domCreate(...t){return fn(...t)}_stopMedia(){}}Fs(Yi,$s,Fl);let xC=class extends Yi{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var t=this,i="tl-media-item tl-media-image tl-media-shadow";(this.data.url.match(/.png(\?.*)?$/)||this.data.url.match(/.svg(\?.*)?$/))&&(i="tl-media-item tl-media-image"),this._el.content_item=this.domCreate("img",i,this._el.content),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=Oh(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=Oh(this.data.caption)),this._el.content_item.addEventListener("load",function(r){t.onMediaLoaded()}),this._el.content_item.src=this.getImageURL()}getImageURL(t,i){return gy(this.data.url)}_updateMediaDisplay(t){Lh&&(this._el.content_item.style.width="auto")}};class Dee{constructor(t){this.doc=t,this.pending={},this.queue={css:[],js:[]},this.styleSheets=t.styleSheets,this.env=this.getEnv(),this.head=this.doc.head||this.doc.getElementsByTagName("head")[0],this.pollCount=0}createNode(t,i){var r=this.doc.createElement(t),s;for(s in i)i.hasOwnProperty(s)&&r.setAttribute(s,i[s]);return r}finish(t){var i=this.pending[t],r,s;i&&(r=i.callback,s=i.urls,s.shift(),this.pollCount=0,s.length||(r&&r.call(i.context,i.obj),this.pending[t]=null,this.queue[t].length&&this.load(t)))}getEnv(){var t=navigator.userAgent,i={async:this.doc.createElement("script").async===!0};return(i.webkit=/AppleWebKit\//.test(t))||(i.ie=/MSIE/.test(t))||(i.opera=/Opera/.test(t))||(i.gecko=/Gecko\//.test(t))||(i.unknown=!0),i}load(t,i,r,s,c){var d=(function(){this.finish(t)}).bind(this),l=t==="css",m=[],g,y,x,C,I,A;if(i)if(i=typeof i=="string"?[i]:i.concat(),l||this.env.async||this.env.gecko||this.env.opera)this.queue[t].push({urls:i,callback:r,obj:s,context:c});else for(g=0,y=i.length;g<y;++g)this.queue[t].push({urls:[i[g]],callback:g===y-1?r:null,obj:s,context:c});if(!(this.pending[t]||!(C=this.pending[t]=this.queue[t].shift()))){for(I=C.urls,g=0,y=I.length;g<y;++g)A=I[g],l?x=this.env.gecko?this.createNode("style"):this.createNode("link",{href:A,rel:"stylesheet"}):(x=this.createNode("script",{src:A}),x.async=!1),x.className="lazyload",x.setAttribute("charset","utf-8"),this.env.ie&&!l?x.onreadystatechange=function(){/loaded|complete/.test(x.readyState)&&(x.onreadystatechange=null,d())}:l&&(this.env.gecko||this.env.webkit)?this.env.webkit?(C.urls[g]=x.href,this.pollWebKit()):(x.innerHTML='@import "'+A+'";',this.pollGecko(x)):x.onload=x.onerror=d,m.push(x);for(g=0,y=m.length;g<y;++g)this.head.appendChild(m[g])}}pollGecko(t){var i;try{i=!!t.sheet.cssRules}catch{if(this.pollCount+=1,this.pollCount<200){var r=this;setTimeout(function(){r.pollGecko(t)},50)}else i&&this.finish("css");return}this.finish("css")}pollWebKit(){var t=this.pending.css,i;if(t){for(i=this.styleSheets.length;--i>=0;)if(this.styleSheets[i].href===t.urls[0]){this.finish("css");break}this.pollCount+=1,t&&(this.pollCount<200?setTimeout(this.pollWebKit.bind(this),50):this.finish("css"))}}css(t,i,r,s){this.load("css",t,i,r,s)}js(t,i,r,s){this.load("js",t,i,r,s)}}function Vu(e,t,i,r){hD.js(e,t,i,r)}function _b(e,t,i,r){hD.css(e,t,i,r)}let hD=new Dee(document);class Lee extends Yi{_loadMedia(){var t=this,i;this.youtube_loaded=!1,this._el.content_item=this.domCreate("div","tl-media-item tl-media-youtube tl-media-shadow",this._el.content),this._el.content_item.id=ju(7),i=IQ(this.data.url),this.media_id={},this.data.url.match("v=")?this.media_id.id=i.v:this.data.url.match("/embed/")?this.media_id.id=this.data.url.split("embed/")[1].split(/[?&]/)[0]:this.data.url.match(/v\/|v=|youtu\.be\//)?this.media_id.id=this.data.url.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0]:_i("YOUTUBE IN URL BUT NOT A VALID VIDEO"),this.data.url.match("start=")?this.media_id.start=db(this.data.url.split("start=")[1]):this.data.url.match("t=")&&(this.media_id.start=db(this.data.url.split("t=")[1])),this.data.url.match("end=")&&(this.media_id.end=db(this.data.url.split("end=")[1])),this.media_id.hd=typeof i.hd<"u",Vu("https://www.youtube.com/iframe_api",function(){t.createMedia()})}_updateMediaDisplay(){this._el.content_item.style.height=id.r16_9({w:this.options.width})+"px",this._el.content_item.style.width=this.options.width+"px"}_stopMedia(){if(this.youtube_loaded)try{this.player.getPlayerState()==YT.PlayerState.PLAYING&&this.player.pauseVideo()}catch(t){_i(t)}}createMedia(){var t=this;clearTimeout(this.timer),typeof YT<"u"&&typeof YT.Player<"u"?this.player=new YT.Player(this._el.content_item.id,{playerVars:{enablejsapi:1,color:"white",controls:1,start:this.media_id.start,end:this.media_id.end,fs:1},videoId:this.media_id.id,events:{onReady:function(){t.onPlayerReady(),t.onLoaded()},onStateChange:t.onStateChange}}):this.timer=setTimeout(function(){t.createMedia()},1e3)}onPlayerReady(t){this.youtube_loaded=!0,this._el.content_item=document.getElementById(this._el.content_item.id),this.onMediaLoaded()}onStateChange(t){t.data==YT.PlayerState.ENDED&&(t.target.seekTo(0),t.target.pauseVideo())}}class Oee extends Yi{_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-map tl-media-shadow",this._el.content),this.media_id=this.data.url,this.mapframe=this.domCreate("iframe","",this._el.content_item),this.mapframe.width="100%",this.mapframe.height="100%",this.mapframe.frameBorder="0",this.mapframe.src=this.makeGoogleMapsEmbedURL(this.media_id,this.options.api_key_googlemaps),this.onLoaded()}_updateMediaDisplay(){if(this._state.loaded){var t=id.square({w:this._el.content_item.offsetWidth});this._el.content_item.style.height=t.h+"px"}}makeGoogleMapsEmbedURL(t,i){var r=!1;function s(x){function C(O,F){if(O.slice(-1)=="z")F.zoom=O;else if(O.slice(-1)=="m")F.zoom=14,F.maptype="satellite";else if(O.slice(-1)=="t"){if(r=!0,A=="place")var z=x.match(y.place)[3]+","+x.match(y.place)[4];else{var z=F.center;delete F.center}F={},F.location=z,streetview_params=O.split(",");for(let H in c.streetview){var U=parseInt(H)+1;c.streetview[H]=="pitch"&&streetview_params[U]=="90t"?F[c.streetview[H]]=0:F[c.streetview[H]]=streetview_params[U].slice(0,-1)}}return F}function I(O,F){var z={},U=F[1],H=F[F.length-1];for(let ee in c[O]){var q=parseInt(ee)+2;c[O][ee]=="center"?z[c[O][ee]]=F[q]+","+F[++q]:z[c[O][ee]]=F[q]}return z=C(H,z),z.key=i,r==!0&&(O="streetview"),U+"/embed/v1/"+O+AQ(z)}let A="view";return x.match(y.place)?A="place":x.match(y.directions)?A="directions":x.match(y.search)&&(A="search"),I(A,x.match(y[A]))}var c={view:["center"],place:["q","center"],directions:["origin","destination","center"],search:["q","center"],streetview:["fov","heading","pitch"]},d=/(https:\/\/.+google.+?\/maps)/,l=/@([-\d.]+),([-\d.]+)/,m=/([\w\W]+)/,g=/,((?:[-\d.]+[zmayht],?)*)/,y={view:new RegExp(d.source+"/"+l.source+g.source),place:new RegExp(d.source+"/place/"+m.source+"/"+l.source+g.source),directions:new RegExp(d.source+"/dir/"+m.source+"/"+m.source+"/"+l.source+g.source),search:new RegExp(d.source+"/search/"+m.source+"/"+l.source+g.source)};return s(t)}}class Ree extends Yi{constructor(t,i,r){super(t,i,r),this.blockquote=wy.sanitize(this.data.url)}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-blockquote",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this._el.content_item.innerHTML=this.blockquote,this.onLoaded()}updateMediaDisplay(){}}class Fee extends Yi{_loadMedia(){var t,i,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-wikipedia",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.media_id=this.data.url.split("wiki/")[1].split("#")[0].replace("_"," "),this.media_id=this.media_id.replace(" ","%20"),i=this.data.url.split("//")[1].split(".wikipedia")[0],t="https://"+i+".wikipedia.org/w/api.php?action=query&prop=extracts|pageimages&redirects=&titles="+this.media_id+"&exintro=1&format=json&callback=?",Hh({type:"GET",url:t,dataType:"json",success:function(s){r.createMedia(s)},error:function(s,c){var d="";d+=r._("wikipedia_load_err")+"<br/>"+r.media_id+"<br/>"+c,r.loadErrorDisplay(d)}})}createMedia(t){var i="";if(t.query){var r="",i={entry:{},title:"",text:"",extract:"",paragraphs:1,page_image:"",text_array:[]};i.entry=MQ(t.query.pages,0),i.extract=i.entry.extract,i.title=i.entry.title,i.page_image=i.entry.thumbnail,i.extract.match("<p>")?i.text_array=i.extract.split("<p>"):i.text_array.push(i.extract);for(var s=0;s<i.text_array.length;s++)s+1<=i.paragraphs&&s+1<i.text_array.length&&(i.text+="<p>"+i.text_array[s+1]);r+="<span class='tl-icon-wikipedia'></span>",r+="<div class='tl-wikipedia-title'><h4><a href='"+this.data.url+"' target='_blank' rel='noopener'>"+i.title+"</a></h4>",r+="<span class='tl-wikipedia-source'>"+this._("wikipedia")+"</span></div>",i.page_image,r+=i.text,i.extract.match("REDIRECT")||(this._el.content_item.innerHTML=r,this.onLoaded())}}updateMediaDisplay(){}}function $ee(e){if(e.match(/^.+#\/media\/.+/))return`File:${e.split("#")[1].split(":")[1]}`;if(e.match(/^.*commons.wikimedia.org\/wiki\/File:.+/)){let t=e.split("/");return t[t.length-1]}return null}function zee(e){let t={};if(e.query&&e.query.pages){let i=Object.keys(e.query.pages);t.page_id=i[0];let r=e.query.pages[t.page_id];t.url=r.imageinfo[0].thumburl,r.entityterms&&r.entityterms.label&&(t.label=r.entityterms.label[0])}return t}class wC extends Yi{_loadMedia(){var t,i=this.options.width||1e3,r=this.getLanguage().lang.toLowerCase(),s=this;try{this.establishMediaID(),t=`https://commons.wikimedia.org/w/api.php?action=query&titles=${this.media_id}&prop=imageinfo|entityterms&iiprop=url&&iiurlwidth=${i}&format=json&origin=*&wbetlanguage=${r}`,x_(t,function(c){let d=zee(c);d.url?(s.base_image_url=d.url,s.page_id=d.page_id,!s.data.alt&&d.label&&(s.data.alt=d.label),s.options.background||s.createMedia(),s.onLoaded()):s.loadErrorDisplay(s._("wikipedia_image_load_err"))})}catch(c){s.loadErrorDisplay(s._(c.message_key))}}establishMediaID(){let t=$ee(this.data.url);if(t)this.media_id=t;else throw new vi("Invalid Wikipedia Image URL")}createMedia(){var t=this;if(this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-wikipedia-image tl-media-shadow",this._el.content),this.data.alt)this._el.content_item.alt=this.data.alt;else if(this.page_id){let i=`M${this.page_id}`,r=`https://commons.wikimedia.org/w/api.php?action=wbgetentities&format=json&ids=${i}&format=json&origin=*`;_y(r).then(s=>{if(s.entities&&s.entities[i]){let c=s.entities[i].labels,d=t.getLanguage().lang.toLowerCase(),l=null;c[d]?l=c[d]:d.length>2&&c[d.substr(0,2)]?l=c[d.substr(0,2)]:c.en&&(l=c.en),l?(console.log(`wikibase_id: ${t.media_id} alt ${l.value}`),t.data.alt=l.value,t._el.content_item.alt=t.data.alt):console.log(`wikibase_id: ${t.media_id} ain't got no alt`)}})}this.data.title&&(this._el.content_item.title=this.data.title),this._el.content_item.addEventListener("load",function(i){t.onMediaLoaded()}),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}_getImageURL(t,i){if(t&&this.base_image_url){let r=this.base_image_url.match(/(\/\d+px-)/);if(r)return this.base_image_url.replace(r[1],`/${t}px-`)}return this.base_image_url}}class Nee extends Yi{_loadMedia(){var t,i=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-soundcloud tl-media-shadow",this._el.content),this.media_id=this.data.url,t="https://soundcloud.com/oembed?url="+this.media_id+"&format=js&callback=?",x_(t,function(r){Vu("https://w.soundcloud.com/player/api.js",function(){i.createMedia(r)})})}createMedia(t){this._el.content_item.innerHTML=t.html,self.widget=SC.Widget(this._el.content_item.querySelector("iframe")),this.soundCloudCreated=!0,this.onLoaded()}_stopMedia(){this.soundCloudCreated&&self.widget.pause()}}class Bee extends Yi{_loadMedia(){var t,i=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vimeo tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/video\/|\/\/vimeo\.com\//)[1].split(/[?&]/)[0];var r=null;this.data.url.match(/#t=([^&]+).*/)&&(r=this.data.url.match(/#t=([^&]+).*/)[1]),t="https://player.vimeo.com/video/"+this.media_id+"?api=1&title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff",r&&(t=t+="&amp;#t="+r),this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(s){i.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=t,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=id.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player&&this.player.contentWindow&&this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(t){_i(t)}}}class jee extends Yi{_loadMedia(){var t;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-dailymotion",this._el.content),this.data.url.indexOf("dai.ly/")!=-1?this.media_id=this.data.url.substr(this.data.url.indexOf("dai.ly/")+7):this.data.url.match("video")?this.media_id=this.data.url.split("video/")[1].split(/[?&]/)[0]:this.media_id=this.data.url.split("embed/")[1].split(/[?&]/)[0],this.media_id.indexOf("_")!=-1&&(this.media_id=this.media_id.split("_")[0]),t="https://www.dailymotion.com/embed/video/"+this.media_id+"?api=postMessage",this._el.content_item.innerHTML="<iframe autostart='false' frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._state.loaded&&(this._el.content_item.style.height=id.r16_9({w:this._el.content_item.offsetWidth})+"px")}_stopMedia(){this._state.loaded&&this._el.content_item.querySelector("iframe").contentWindow.postMessage('{"command":"pause","parameters":[]}',"*")}}class Vee extends Yi{_loadMedia(){var t;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vine tl-media-shadow",this._el.content),this.media_id=this.data.url.split("vine.co/v/")[1],t="https://vine.co/v/"+this.media_id+"/embed/simple",this._el.content_item.innerHTML="<iframe frameborder='0' width='100%' height='100%' src='"+t+"'></iframe><script async src='https://platform.vine.co/static/scripts/embed.js' charset='utf-8'><\/script>",this.onLoaded()}_updateMediaDisplay(){var t=id.square({w:this._el.content_item.offsetWidth,h:this.options.height});this._el.content_item.style.height=t.h+"px"}_stopMedia(){this._el.content_item.querySelector("iframe").contentWindow.postMessage("pause","*")}}class Uee extends Yi{_loadMedia(){var t,i=this;if(this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.data.url.match("^(https?:)?/*(www.)?twitter.com"))this.data.url.match("status/")?this.media_id=this.data.url.split("status/")[1]:this.data.url.match("statuses/")?this.media_id=this.data.url.split("statuses/")[1]:this.media_id="";else if(this.data.url.match(`<blockquote class=['"]twitter-tweet['"]`)){var r=this.data.url.match(/(status|statuses)\/(\d+)/);if(r&&r.length>2)this.media_id=r[2];else{i.loadErrorDisplay(i._("twitterembed_invalidurl_err"));return}}t="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",Hh({type:"GET",url:t,dataType:"json",success:function(s){i.createMedia(s)},error:function(s,c){var d="";d+=i._("twitter_load_err")+"<br/>"+i.media_id+"<br/>"+c,i.loadErrorDisplay(d)}})}createMedia(t){var i="",r="",s="",c="",d="",l="",m=this;r=t.html.split("</p>&mdash;")[0]+"</p></blockquote>",s=t.author_url.split("twitter.com/")[1],c=t.html.split("</p>&mdash;")[1].split('<a href="')[1],d=c.split('">')[0],l=c.split('">')[1].split("</a>")[0],r=r.replace(/<a href/ig,'<a target="_blank" rel="noopener" href'),r.includes("pic.twitter.com")?(Vu("https://platform.twitter.com/widgets.js",function(){twttr.widgets.createTweet(m.media_id,m._el.content_item,{conversation:"none",linkColor:"#cc0000",theme:"light"})}),this.onLoaded()):(i+=r,i+="<div class='vcard'>",i+="<a href='"+d+"' class='twitter-date' rel='noopener' target='_blank'>"+l+"</a>",i+="<img src='' class='tl-media-item tl-media-image'></a>",i+="<div class='author'>",i+="<a class='screen-name url' href='"+t.author_url+"' rel='noopener' target='_blank'>",i+="<span class='avatar'></span>",i+="<span class='fn'>"+t.author_name+" <span class='tl-icon-twitter'></span></span>",i+="<span class='nickname'>@"+s+"<span class='thumbnail-inline'></span></span>",i+="</a>",i+="</div>",i+="</div>",this._el.content_item.innerHTML=i,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class Hee extends Yi{_loadMedia(){var t,i=this;this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text";var r=this.data.url.match(/(status|statuses)\/(\d+)/);if(r&&r.length>2)this.media_id=r[2];else{i.loadErrorDisplay(i._("twitterembed_invalidurl_err"));return}t="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",window.twttr=function(s,c,d){var l,m=s.getElementsByTagName(c)[0],g=window.twttr||{};return s.getElementById(d)||(l=s.createElement(c),l.id=d,l.src="https://platform.twitter.com/widgets.js",m.parentNode.insertBefore(l,m),g._e=[],g.ready=function(y){g._e.push(y)}),g}(document,"script","twitter-wjs"),Hh({type:"GET",url:t,dataType:"json",success(s){i.createMedia(s)},error:function(s,c){var d="";d+=i._("twitter_load_err")+"<br/>"+i.media_id+"<br/>"+c,i.loadErrorDisplay(d)}})}createMedia(t){var i="",r="",s="",c="",d="",l="";r=t.html.split("</p>&mdash;")[0]+"</p></blockquote>",s=t.author_url.split("twitter.com/")[1],c=t.html.split("</p>&mdash;")[1].split('<a href="')[1],d=c.split('">')[0],l=c.split('">')[1].split("</a>")[0],r=r.replace(/<a href/ig,'<a target="_blank" rel="noopener" href');let m=this.media_id;r.includes("pic.twitter.com")?(twttr.ready(function(g){i=document.getElementsByClassName("tl-media-twitter")[0];var y=String(m);twttr.widgets.createTweet(y,i,{conversation:"none",linkColor:"#cc0000",theme:"light"}).then(function(x){this.onLoaded()})}),this._el.content_item.innerHTML=i,this.onLoaded()):(i+=r,i+="<div class='vcard'>",i+="<a href='"+d+"' class='twitter-date' rel='noopener' target='_blank'>"+l+"</a>",i+="<div class='author'>",i+="<a class='screen-name url' href='"+t.author_url+"' rel='noopener' target='_blank'>",i+="<span class='avatar'></span>",i+="<span class='fn'>"+t.author_name+" <span class='tl-icon-twitter'></span></span>",i+="<span class='nickname'>@"+s+"<span class='thumbnail-inline'></span></span>",i+="</a>",i+="</div>",i+="</div>",this._el.content_item.innerHTML=i,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class TC extends Yi{_loadMedia(){var t,i=this;try{this.establishMediaID(),t="https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",x_(t,function(r){r.stat=="ok"?(i.sizes=r.sizes.size,i.options.background||i.createMedia(),i.onLoaded()):i.loadErrorDisplay(i._("flickr_notfound_err"))})}catch(r){i.loadErrorDisplay(i._(r.message_key))}}establishMediaID(){if(this.data.url.match(/flic.kr\/.+/i)){var t=this.data.url.split("/").slice(-1)[0];this.media_id=kQ.decode(t)}else{var i="flickr.com/photos/",r=this.data.url.indexOf(i);if(r==-1)throw new vi("flickr_invalidurl_err");var s=r+i.length;this.media_id=this.data.url.substr(s).split("/")[1]}}createMedia(){var t=this;this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-flickr tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=Oh(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=Oh(this.data.caption)),this._el.content_item.addEventListener("load",function(i){t.onMediaLoaded()}),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}getImageURL(t,i){for(var r=this.size_label(i),s=this.sizes[this.sizes.length-2].source,c=0;c<this.sizes.length;c++)this.sizes[c].label==r&&(s=this.sizes[c].source);return s}_getMeta(){var t=this,i;i="https://api.flickr.com/services/rest/?method=flickr.photos.getInfo&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",x_(i,function(r){t.data.credit_alternate="<a href='"+t.data.url+"' target='_blank' rel='noopener'>"+r.photo.owner.realname+"</a>",t.data.caption_alternate=r.photo.title._content+" "+r.photo.description._content,t.updateMeta()})}size_label(t){var i="";return t<=75?t<=0?i="Large":i="Thumbnail":t<=180?i="Small":t<=240?i="Small 320":t<=375?i="Medium":t<=480?i="Medium 640":(t<=600,i="Large"),i}}class Gee extends Yi{_loadMedia(){var t=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-documentcloud tl-media-shadow",this._el.content),this._el.content_item.id=ju(7),this.data.url.match(/\.html$/)?this.data.url=this._transformURL(this.data.url):this.data.url.match(/.(json|js)$/)||_i("DOCUMENT CLOUD IN URL BUT INVALID SUFFIX"),Vu(["https://assets.documentcloud.org/viewer/loader.js","https://assets.documentcloud.org/viewer/viewer.js"],function(){t.createMedia()})}_transformURL(t){return t.replace(/(.*)\.html$/,"$1.js")}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}createMedia(){DV.load(this.data.url,{container:"#"+this._el.content_item.id,showSidebar:!1}),this.onLoaded()}}const Wee="830b21071290df4f81a35c56abbea096",qee="704270473831239",Zee=`${qee}|${Wee}`,EC=`https://graph.facebook.com/v8.0/instagram_oembed?access_token=${Zee}&fields=html,thumbnail_url,author_name&url=`;function Kee(e){this.oembed_response=e,this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-instagram tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=Oh(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=Oh(this.data.caption)),this._el.content_item.addEventListener("load",(function(t){this.onMediaLoaded()}).bind(this)),this._el.content_item.src=e.thumbnail_url,this.onLoaded()}function Xee(e){let t=`${e.statusText} [${e.status}]`;e.status==400&&(t=this._("instagram_bad_request")),this.loadErrorDisplay(t)}class Yee extends Yi{_loadMedia(){this.media_id=this.data.url.split("/p/")[1].split("/")[0],this.options.background||this.createMedia()}createMedia(){this.oembed_response=null;let t=`${EC}${this.data.url}`;try{Hh({url:t,dataType:"json",success:Kee,error:Xee,context:this})}catch(i){console.log(`Instagram: error fetching ${t}`),console.log(i);debugger}}getImageURL(){if(this.oembed_response&&this.oembed_response.thumbnail_url)return this.oembed_response.thumbnail_url;_y(`${EC}${this.data.url}`).then(t=>t.thumbnail_url).catch(t=>{_i(`Instagram getImageURL Error: ${t.status} ${t.statusText}`)})}_getMeta(){this.oembed_response&&this.oembed_response.author_name&&(this.data.credit_alternate=`Instagram: <a href="https://instagram.com/${this.oembed_response.author_name}" target="_blank">@${this.oembed_response.author_name}</a>`),this.updateMeta()}sizes(t){var i="";return t<=150?i="t":t<=306?i="m":i="l",i}}class Jee extends Yi{_loadMedia(){this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-profile tl-media-shadow",this._el.content),this._el.content_item.src=this.data.url,this.onLoaded()}_updateMediaDisplay(t){Lh&&(this._el.content_item.style.maxWidth=this.options.width/2-40+"px")}}class Qee extends Yi{_loadMedia(){var t;if(this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this.data.url.match(/open\?id=([^&]+)/)){var i=this.data.url.match(/open\?id=([^&]+)/)[1];t="https://drive.google.com/file/d/"+i+"/preview"}else if(this.data.url.match(/file\/d\/([^/]*)\/?/)){var i=this.data.url.match(/file\/d\/([^/]*)\/?/)[1];t="https://drive.google.com/file/d/"+i+"/preview"}else t=this.data.url;this._el.content_item.innerHTML="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}function ete(e){return e.match(/^spotify:/)?e:(e=new URL(e),`spotify${e.pathname.replace(/\/$/,"").replace(/\//g,":")}`)}class tte extends Yi{_loadMedia(){var t;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-spotify",this._el.content),this.media_id=ete(this.data.url),this.media_id?(t="https://embed.spotify.com/?uri="+this.media_id+"&theme=white&view=coverart",this.player=this.domCreate("iframe","tl-media-shadow",this._el.content_item),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=t,this.onLoaded()):this.loadErrorDisplay(this._("spotify_invalid_url"))}_updateMediaDisplay(t){var i=this.options.height,r=0,s=0;nd?i=this.options.height/2:i=this.options.height-this.options.credit_height-this.options.caption_height-30,this._el.content_item.style.maxHeight="none",_i(i),_i(this.options.width),i>this.options.width?(_i("height is greater"),r=this.options.width+80+"px",s=this.options.width+"px"):(_i("width is greater"),_i(this.options.width),r=i+"px",s=i-80+"px"),this.player.style.width=s,this.player.style.height=r,this._el.credit&&(this._el.credit.style.width=s),this._el.caption&&(this._el.caption.style.width=s)}_stopMedia(){}}class nte extends Yi{constructor(t,i,r){super(t,i,r),this.iframe=wy.sanitize(this.data.url,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder"]})}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this._el.content_item.innerHTML=this.iframe,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class ite extends Yi{_loadMedia(){try{var t=this;if(this.data.url.match(`<blockquote class=['"]imgur-embed-pub['"]`)){var i=this.data.url.match(/(imgur\.com)\/(\w+)/);this.media_id=i[2],this.data.url="http://imgur.com/gallery/"+this.media_id}else this.data.url&&(this.media_id=this.data.url.split("/").slice(-1)[0]);Vu(["https://s.imgur.com/min/embed.js"],function(){t.createMedia()})}catch{this.loadErrorDisplay(this._("imgur_invalidurl_err"))}}createMedia(){var t=this,i="https://api.imgur.com/oembed.json?url="+this.data.url;this._el.content_item=this.domCreate("div","tl-media-item tl-media-image tl-media-imgur",this._el.content),Hh({type:"GET",url:i,dataType:"json",success:function(r){try{t._el.content_item.innerHTML=r.html,setInterval(function(){document.querySelector("blockquote.imgur-embed-pub")==null?clearInterval():(imgurEmbed.createIframe(),document.getElementById("imageElement").removeAttribute("style"),document.getElementById("image").removeAttribute("style"))},2e3)}catch{_i("Error processing imgur ajax response")}},error:function(r,s,c){s=="parsererror"?t.loadErrorDisplay(t._("imgur_invalidurl_err")):t.loadErrorDisplay(t._("unknown_read_err",s))}}),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.width=this.options.width+"px",this._el.content_item.style.height=id.r16_9({w:this.options.width})+"px"}}class rte extends Yi{_loadMedia(){var t=gy(this.data.url);this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content);var i="";Fm||gQ||t.match(/dl.dropboxusercontent.com/)?i="<iframe class='doc' frameborder='0' width='100%' height='100%' src='//docs.google.com/viewer?url="+t+"&amp;embedded=true'></iframe>":i="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+t+"'></iframe>",this._el.content_item.innerHTML=i,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class ste extends Yi{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var t=gy(this.data.url),i=this,i=this,r="tl-media-item tl-media-audio tl-media-shadow";this._el.content_item=this.domCreate("audio",r,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){i.onMediaLoaded()}),this._el.source_item.src=t,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 audio with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(t){Lh&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(t,i){var r=t.match(i),s="audio/";switch(r[1]){case"mp3":s+="mpeg";break;case"wav":s+="wav";break;case"m4a":s+="mp4";break;default:s="audio";break}return s}}class ate extends Yi{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var t=gy(this.data.url),i=this,i=this,r="tl-media-item tl-media-video tl-media-shadow";this._el.content_item=this.domCreate("video",r,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){i.onMediaLoaded()}),this._el.source_item.src=t,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 video with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(t){Lh&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(t,i){var r=t.match(i),s="video/";switch(r[1]){case"mp4":s+="mp4";break;case"webm":s+="webm";break;default:s="video";break}return s}}class ote extends Yi{_loadMedia(){var t,i=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-wistia tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/https?:\/\/(.+)?(wistia\.com|wi\.st)\/medias\/(.*)/)[3],_i(`Wistia: media_id: ${this.media_id}`),t="https://fast.wistia.com/embed/iframe/"+this.media_id+"?version=v1&controlsVisibleOnLoad=true&playerColor=aae3d8",this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(r){i.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=t,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=id.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(t){_i(t)}}}function S_(e,t){var i={},r=[{type:"youtube",name:"YouTube",match_str:"^(https?:)?/*(www.|m.)?youtube|youtu.be",cls:Lee},{type:"vimeo",name:"Vimeo",match_str:"^(https?:)?/*(player.)?vimeo.com",cls:Bee},{type:"dailymotion",name:"DailyMotion",match_str:"^(https?:)?/*(www.)?(dailymotion.com|dai.ly)",cls:jee},{type:"vine",name:"Vine",match_str:"^(https?:)?/*(www.)?vine.co",cls:Vee},{type:"soundcloud",name:"SoundCloud",match_str:"^(https?:)?/*(player.)?soundcloud.com",cls:Nee},{type:"twitter",name:"Twitter",match_str:"^(https?:)?/*(www.)?twitter.com",cls:Uee},{type:"twitterembed",name:"TwitterEmbed",match_str:`<blockquote class=['"]twitter-tweet['"]`,cls:Hee},{type:"googlemaps",name:"Google Map",match_str:/google.+?\/maps\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/search\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/place\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/dir\/([\w\W]+)\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)/,cls:Oee},{type:"flickr",name:"Flickr",match_str:"^(https?:)?/*(www.)?flickr.com/photos",cls:TC},{type:"flickr",name:"Flickr",match_str:"^(https?://)?flic.kr/.*",cls:TC},{type:"instagram",name:"Instagram",match_str:/^(https?:)?\/*(www.)?(instagr.am|^(https?:)?\/*(www.)?instagram.com)\/p\//,cls:Yee},{type:"profile",name:"Profile",match_str:/^(https?:)?\/*(www.)?instagr.am\/[a-zA-Z0-9]{2,}|^(https?:)?\/*(www.)?instagram.com\/[a-zA-Z0-9]{2,}/,cls:Jee},{type:"documentcloud",name:"Document Cloud",match_str:/documentcloud.org\//,cls:Gee},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://.+.wiki[mp]edia.org.+#/media/.+.(jpg|jpeg|png|gif|svg|webp)",cls:wC},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://commons.wikimedia.org/wiki/File:.+.(jpg|jpeg|png|gif|svg|webp)",cls:wC},{type:"wikipedia",name:"Wikipedia",match_str:"^(https?:)?/.+.wikipedia.org",cls:Fee},{type:"image",name:"Image",match_str:/(jpg|jpeg|png|gif|svg|webp)(\?.*)?$/i,cls:xC},{type:"imgur",name:"Imgur",match_str:/^.*imgur.com\/.+$|<blockquote class=['\"]imgur-embed-pub['\"]/i,cls:ite},{type:"googledocs",name:"Google Doc",match_str:"^(https?:)?/*[^.]*.google.com/[^/]*/d/[^/]*/[^/]*?usp=shar.*|^(https?:)?/*drive.google.com/open?id=[^&]*&authuser=0|^(https?:)?//*drive.google.com/open\\?id=[^&]*|^(https?:)?/*[^.]*.googledrive.com/host/[^/]*/",cls:Qee},{type:"pdf",name:"PDF",match_str:/^.*\.pdf(\?.*)?(\#.*)?/,cls:rte},{type:"spotify",name:"spotify",match_str:"spotify",cls:tte},{type:"iframe",name:"iFrame",match_str:"iframe",cls:nte},{type:"blockquote",name:"Quote",match_str:"blockquote",cls:Ree},{type:"video",name:"Video",match_str:/(mp4|webm)(\?.*)?$/i,cls:ate},{type:"wistia",name:"Wistia",match_str:/https?:\/\/(.+)?(wistia\.com|wi\.st)\/.*/i,cls:ote},{type:"audio",name:"Audio",match_str:/(mp3|wav|m4a)(\?.*)?$/i,cls:ste},{type:"imageblank",name:"Imageblank",match_str:"",cls:xC}];if(t){if(e instanceof Array)return!1;for(var s=0;s<r.length;s++)switch(r[s].type){case"flickr":case"image":case"instagram":if(e.url.match(r[s].match_str))return i=r[s],i;break}}else for(var s=0;s<r.length;s++)if(e.url.match(r[s].match_str))return r[s];return!1}class fD{constructor(t,i){this._el={container:{},content_container:{},media_container:{},timespan:{},line_left:{},line_right:{},content:{},text:{},media:{}},this._text={},this._state={loaded:!1},this.data={unique_id:"",background:null,date:{year:0,month:0,day:0,hour:0,minute:0,second:0,millisecond:0,thumbnail:"",format:""},text:{headline:"",text:""},media:null},this.options={duration:1e3,ease:vy,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,this.ariaLabel="",Pi(this.options,i),Pi(this.data,t),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(t){this.active=t,this.active&&this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end tl-timemarker-active":this.active?this._el.container.className="tl-timemarker tl-timemarker-active":this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end":this._el.container.className="tl-timemarker",this._el.container.ariaLabel=this.ariaLabel,this.active?this._el.container.ariaLabel+=", shown":this._el.container.ariaLabel+=", press space to show"}setFocus(t={preventScroll:!0}){this._el.container.focus(t)}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}updateDisplay(t,i){this._updateDisplay(t,i)}loadMedia(){this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0)}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.data.start_date.getTime()}getEndTime(){return this.data.end_date?this.data.end_date.getTime():!1}setHeight(t){var i=12,r=1;this._el.content_container.style.height=t+"px",this._el.timespan_content.style.height=t+"px",t<=30?this._el.content.className="tl-timemarker-content tl-timemarker-content-small":this._el.content.className="tl-timemarker-content",t<=56?this._el.content_container.classList.add("tl-timemarker-content-container-small"):this._el.content_container.classList.remove("tl-timemarker-content-container-small"),my?(r=Math.floor(t/(i+2)),r<1&&(r=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=r):(r=t/i,r>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=r*i+"px")}setWidth(t){this.data.end_date&&(this._el.container.style.width=t+"px",t>this.options.marker_width_min?(this._el.content_container.style.width=t+"px",this._el.content_container.className="tl-timemarker-content-container tl-timemarker-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timemarker-content-container"))}setClass(t){this._el.container.className=t}setRowPosition(t,i){this.setPosition({top:t}),this._el.timespan.style.height=i+"px"}getFormattedDate(){if(ga(this.data.display_date).length>0)return this.data.display_date;let t="";return this.data.end_date&&(t=" to "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(t=(t?"from ":"")+this.data.start_date.getDisplayDate(this.getLanguage())+t),t}_onMarkerClick(t){this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerKeydown(t){/Space|Enter/.test(t.code)&&this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerBlur(t){this.fire("markerblur",{unique_id:this.data.unique_id})}_initLayout(){if(this._el.container=fn("div","tl-timemarker"),this._el.container.setAttribute("tabindex","-1"),this.data.unique_id&&(this._el.container.id=this.data.unique_id+"-marker"),this.data.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timemarker tl-timemarker-with-end"),this._el.timespan=fn("div","tl-timemarker-timespan",this._el.container),this._el.timespan_content=fn("div","tl-timemarker-timespan-content",this._el.timespan),this._el.content_container=fn("div","tl-timemarker-content-container",this._el.container),this._el.content=fn("div","tl-timemarker-content",this._el.content_container),this._el.line_left=fn("div","tl-timemarker-line-left",this._el.timespan),this._el.line_right=fn("div","tl-timemarker-line-right",this._el.timespan),this.data.media){this._el.media_container=fn("div","tl-timemarker-media-container",this._el.content);var t={url:this.data.media.thumbnail},i=this.data.media.thumbnail?S_(t,!0):null;if(i){var r=new i.cls(t);r.on("loaded",(function(){this._el.media=fn("img","tl-timemarker-media",this._el.media_container),this._el.media.src=r.getImageURL()}).bind(this)),r.loadMedia()}else{var s=S_(this.data.media).type;this._el.media=fn("span","tl-icon-"+s,this._el.media_container)}}this._el.text=fn("div","tl-timemarker-text",this._el.content),this._text=fn("h2","tl-headline",this._el.text),this.data.text.headline&&this.data.text.headline!=""?this._text.innerHTML=mh(this.data.text.headline):this.data.text.text&&this.data.text.text!=""?this._text.innerHTML=mh(this.data.text.text):this.data.media&&this.data.media.caption&&this.data.media.caption!=""&&(this._text.innerHTML=mh(this.data.media.caption));const c=this.getFormattedDate();this.ariaLabel=`${this._text.innerHTML}, ${c}`,this.onLoaded()}_initEvents(){ri.addListener(this._el.container,"click",this._onMarkerClick,this),ri.addListener(this._el.container,"keydown",this._onMarkerKeydown,this),ri.addListener(this._el.container,"blur",this._onMarkerBlur,this)}_updateDisplay(t,i,r){t&&(this.options.width=t),i&&(this.options.height=i)}}Fs(fD,Fl,$s,Ol);class Pw{constructor(t,i,r){this._el={drag:t,move:t},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},i&&(this._el.move=i),this.options={snap:!1,enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:0,right:!1},momentum_multiplier:2e3,duration:1e3,ease:Uh},this.animator=null,this.dragevent=this.mousedrag,jo&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},Pi(this.options,r)}enable(t){ri.addListener(this._el.drag,this.dragevent.down,this._onDragStart,this),ri.addListener(this._el.drag,this.dragevent.up,this._onDragEnd,this),this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){ri.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),ri.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(t){this.options.constraint=t}_onDragStart(t){this.animator&&this.animator.stop(),jo?t.originalEvent?(this.data.pagex.start=t.originalEvent.touches[0].screenX,this.data.pagey.start=t.originalEvent.touches[0].screenY):(this.data.pagex.start=t.targetTouches[0].screenX,this.data.pagey.start=t.targetTouches[0].screenY):(this.data.pagex.start=t.pageX,this.data.pagey.start=t.pageY),this.options.enable.x,this.options.enable.y,this.data.pos.start={x:this._el.move.offsetLeft,y:this._el.move.offsetTop},this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),ri.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),ri.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(t){this.data.sliding=!1,ri.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),ri.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(t){var i={x:0,y:0};this.data.sliding=!0,jo?t.originalEvent?(this.data.pagex.end=t.originalEvent.touches[0].screenX,this.data.pagey.end=t.originalEvent.touches[0].screenY):(this.data.pagex.end=t.targetTouches[0].screenX,this.data.pagey.end=t.targetTouches[0].screenY):(this.data.pagex.end=t.pageX,this.data.pagey.end=t.pageY),i.x=this.data.pagex.start-this.data.pagex.end,i.y=this.data.pagey.start-this.data.pagey.end,this.data.pos.end={x:this._el.drag.offsetLeft,y:this._el.drag.offsetTop},this.data.new_pos.x=-(i.x-this.data.pos.start.x),this.data.new_pos.y=-(i.y-this.data.pos.start.y),this.options.enable.x&&Math.abs(i.x)>Math.abs(i.y)&&(t.preventDefault(),this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&Math.abs(i.y)>Math.abs(i.y)&&(t.preventDefault(),this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var t={x:0,y:0,time:0},i={x:0,y:0,time:0},r={x:!1,y:!1},s=!1;this.data.direction=null,t.time=(new Date().getTime()-this.data.time.start)*10,i.time=(new Date().getTime()-this.data.time.start)*10,i.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),i.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),t.x=Math.round(i.x/i.time),t.y=Math.round(i.y/i.time),this.data.new_pos.x=Math.min(this.data.new_pos.x+t.x),this.data.new_pos.y=Math.min(this.data.new_pos.y+t.y),this.options.enable.x?this.options.constraint.left&&this.data.new_pos.x>this.options.constraint.left&&(this.data.new_pos.x=this.options.constraint.left):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,i.time<2e3&&(s=!0),this.options.enable.x&&this.options.enable.y?Math.abs(i.x)>Math.abs(i.y)?r.x=!0:r.y=!0:this.options.enable.x?Math.abs(i.x)>Math.abs(i.y)&&(r.x=!0):Math.abs(i.y)>Math.abs(i.x)&&(r.y=!0),r.x&&(Math.abs(i.x)>this._el.drag.offsetWidth/2&&(s=!0),Math.abs(i.x)>1e4&&(this.data.direction="left",i.x>0&&(this.data.direction="right"))),r.y&&(Math.abs(i.y)>this._el.drag.offsetHeight/2&&(s=!0),Math.abs(i.y)>1e4&&(this.data.direction="up",i.y>0&&(this.data.direction="down"))),i.time<1e3||this._animateMomentum(),s&&this.data.direction?this.fire("swipe_"+this.data.direction,this.data):this.data.direction?this.fire("swipe_nodirection",this.data):this.options.snap&&(this.animator.stop(),this.animator=kl(this._el.move,{top:this.data.pos.start.y,left:this.data.pos.start.x,duration:this.options.duration,easing:lm}))}_animateMomentum(){var t={x:this.data.new_pos.x,y:this.data.new_pos.y},i={duration:this.options.duration,easing:lm};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(t.y>this.options.constraint.bottom?t.y=this.options.constraint.bottom:t.y<this.options.constraint.top&&(t.y=this.options.constraint.top)),i.top=Math.floor(t.y)+"px"),this.options.enable.x&&(this.options.constraint.left&&t.x>=this.options.constraint.left&&(t.x=this.options.constraint.left),this.options.constraint.right&&t.x<this.options.constraint.right&&(t.x=this.options.constraint.right),i.left=Math.floor(t.x)+"px"),this.animator=kl(this._el.move,i),this.fire("momentum",this.data)}}Fs(Pw,$s);class pD{constructor(t,i,r,s){this.language=s,this._el={parent:{},container:{},slider:{},slider_background:{},line:{},marker_container_mask:{},marker_container:{},marker_item_container:{},timeaxis:{},timeaxis_background:{}},this.collapsed=!1,typeof t=="object"?this._el.container=t:this._el.container=$m(t),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","application"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline_navigation")),this._el.container.setAttribute("aria-description",'Navigate between markers with arrow keys. Press "Home" for the first and "End" for the last markers'),this.config=i,this.options={width:600,height:600,duration:1e3,ease:Uh,has_groups:!1,optimal_tick_width:50,scale_factor:2,marker_padding:5,timenav_height_min:150,marker_height_min:30,marker_width_min:100,zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89]},this.animator=null,this.ready=!1,this._markers=[],this._eras=[],this.has_eras=!1,this._groups=[],this._calculated_row_height=100,this.current_id="",this.current_focused_id="",this.timescale={},this.timeaxis={},this.max_rows=6,this.animate_css=!1,this._swipable,Pi(this.options,r)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this._onLoaded()}positionMarkers(t){for(var i=0;i<this._markers.length;i++){var r=this.timescale.getPositionInfo(i);t?this._markers[i].setClass("tl-timemarker tl-timemarker-fast"):this._markers[i].setClass("tl-timemarker"),this._markers[i].setPosition({left:r.start}),this._markers[i].setWidth(r.width)}}updateDisplay(t,i,r){let s=!1;t&&(this.options.width==0&&t>0&&(s=!0),this.options.width=t),i&&i!=this.options.height&&(this.options.height=i,this.timescale=this._getTimeScale()),this._assignRowsToMarkers(),this._el.slider_background.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._el.slider_background.style.left=-(this.options.width/2)+"px",this._el.slider.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._swipable.updateConstraint({top:!1,bottom:!1,left:this.options.width/2,right:-(this.timescale.getPixelWidth()-this.options.width/2)}),s&&this._drawTimeline(),this.goToId(this.current_id,!0)}_getTimeScale(){var t=0;try{t=parseInt(this.options.marker_height_min)}catch{_i("Invalid value for marker_height_min option."),t=30}return t==0&&(_i("marker_height_min option must not be zero."),t=30),this.max_rows=Math.round((this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding)/t),this.max_rows<1&&(this.max_rows=1),new bC(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows})}_updateTimeScale(t){this.options.scale_factor=t,this._updateDrawTimeline()}zoomIn(){var t=wQ(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(t)}zoomOut(){var t=SQ(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(t)}setZoom(t){var i=this.options.zoom_sequence[t];typeof i=="number"?this.setZoomFactor(i):console.warn("Invalid zoom level. Please use an index number between 0 and "+(this.options.zoom_sequence.length-1))}setZoomFactor(t){t<=this.options.zoom_sequence[0]?this.fire("zoomtoggle",{zoom:"out",show:!1}):this.fire("zoomtoggle",{zoom:"out",show:!0}),t>=this.options.zoom_sequence[this.options.zoom_sequence.length-1]?this.fire("zoomtoggle",{zoom:"in",show:!1}):this.fire("zoomtoggle",{zoom:"in",show:!0}),t==0&&(console.warn("Zoom factor must be greater than zero. Using 0.1"),t=.1),this.options.scale_factor=t,this.goToId(this.current_id,!this._updateDrawTimeline(!0),!0)}_createGroups(){this._groups=[];var t=this.timescale.getGroupLabels();if(t){this.options.has_groups=!0;for(var i=0;i<t.length;i++)this._createGroup(t[i])}}_createGroup(t){var i=new lD(t);this._addGroup(i),this._groups.push(i)}_addGroup(t){t.addTo(this._el.container)}_positionGroups(){if(this.options.has_groups){var t=this.options.height-this._el.timeaxis_background.offsetHeight,i=Math.floor(t/this.timescale.getNumberOfRows()-this.options.marker_padding);this.timescale.getGroupLabels();for(var r=0,s=0;r<this._groups.length;r++){var c=Math.floor(s*(i+this.options.marker_padding)),d=!1;c>t-this.options.marker_padding&&(d=!0),this._groups[r].setRowPosition(c,this._calculated_row_height+this.options.marker_padding/2),this._groups[r].setAlternateRowColor(TQ(r),d),s+=this._groups[r].data.rows}}}_addMarker(t){t.addTo(this._el.marker_item_container),t.on("markerclick",this._onMarkerClick,this),t.on("added",this._onMarkerAdded,this)}_createMarker(t,i){var r=new fD(t,this.options);this._addMarker(r),i<0?this._markers.push(r):this._markers.splice(i,0,r)}_createMarkers(t){for(var i=0;i<t.length;i++)this._createMarker(t[i],-1)}_removeMarker(t){t.removeFrom(this._el.marker_item_container)}_destroyMarker(t){this._removeMarker(this._markers[t]),this._markers.splice(t,1)}_calculateMarkerHeight(t){return t/this.timescale.getNumberOfRows()-this.options.marker_padding}_calculateRowHeight(t){return t/this.timescale.getNumberOfRows()}_calculateAvailableHeight(){return this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding}_calculateMinimumTimeNavHeight(){return this.timescale.getNumberOfRows()*this.options.marker_height_min+this._el.timeaxis_background.offsetHeight+this.options.marker_padding}getMinimumHeight(){return this._calculateMinimumTimeNavHeight()}_assignRowsToMarkers(){var t=this._calculateAvailableHeight(),i=this._calculateMarkerHeight(t);this._positionGroups(),this._calculated_row_height=this._calculateRowHeight(t);for(var r=0;r<this._markers.length;r++){this._markers[r].setHeight(i);var s=this.timescale.getPositionInfo(r).row,c=Math.floor(s*(i+this.options.marker_padding))+this.options.marker_padding,d=t-c+this.options.marker_padding;this._markers[r].setRowPosition(c,d)}}_resetMarkersActive(){for(var t=0;t<this._markers.length;t++)this._markers[t].setActive(!1)}_resetMarkersBlurListeners(){for(var t=0;t<this._markers.length;t++)this._markers[t].off("markerblur",this._onMarkerBlur,this)}_findMarkerIndex(t){var i=-1;return(typeof t=="string"||t instanceof String)&&(i=tD(t,this._markers,"unique_id",i)),i}_createEras(t){for(var i=0;i<t.length;i++){var r=t[i],s=new cD(r.start_date,r.end_date,r.headline,this.options);this._eras.push(s),s.addTo(this._el.marker_item_container),s.on("added",this._onEraAdded,this)}}_positionEras(t){for(var i=0,r=0;r<this._eras.length;r++){var s={start:0,end:0,width:0};s.start=this.timescale.getPosition(this._eras[r].start_date.getTime()),s.end=this.timescale.getPosition(this._eras[r].end_date.getTime()),s.width=s.end-s.start,t?this._eras[r].setClass("tl-timeera tl-timeera-fast"):this._eras[r].setClass("tl-timeera"),this._eras[r].setPosition({left:s.start}),this._eras[r].setWidth(s.width),i++,i>5&&(i=0),this._eras[r].setColor(i)}}createMarker(t,i){this._createMarker(t,i)}createMarkers(t){this._createMarkers(t)}destroyMarker(t){this._destroyMarker(t)}destroyMarkerId(t){this.destroyMarker(this._findMarkerIndex(t))}goTo(t,i,r){var s=this.options.ease,c=this.options.duration,d=t<0?0:t;this._resetMarkersActive(),t>=0&&t<this._markers.length&&this._markers[t].setActive(!0),this.animateMovement(d,i,r,c,s),t>=0&&t<this._markers.length?this.current_id=this.current_focused_id=this._markers[t].data.unique_id:this.current_id=this.current_focused_id="",this._setLabelWithCurrentMarker()}goToId(t,i,r){this.goTo(this._findMarkerIndex(t),i,r)}focusOn(t,i,r){const s=this.options.ease,c=this.options.duration,d=t<0?0:t;this.animateMovement(d,i,r,c,s),this._resetMarkersBlurListeners(),t>=0&&t<this._markers.length&&(this._markers[t].setFocus(),this.current_focused_id=this._markers[t].data.unique_id,this._markers[t].on("markerblur",this._onMarkerBlur,this))}focusNext(){const t=this._findMarkerIndex(this.current_focused_id);t+1<this._markers.length?this.focusOn(t+1):this.focusOn(t)}focusPrevious(){const t=this._findMarkerIndex(this.current_focused_id);t-1>=0?this.focusOn(t-1):this.focusOn(t)}animateMovement(t,i,r,s,c){this.animator&&this.animator.stop(),i?(this._el.slider.className="tl-timenav-slider",this._el.slider.style.left=-this._markers[t].getLeft()+this.options.width/2+"px"):r?(this._el.slider.className="tl-timenav-slider tl-timenav-slider-animate",this.animate_css=!0,this._el.slider.style.left=-this._markers[t].getLeft()+this.options.width/2+"px"):(this._el.slider.className="tl-timenav-slider",this.animator=kl(this._el.slider,{left:-this._markers[t].getLeft()+this.options.width/2+"px",duration:s,easing:c})),t>=0&&t<this._markers.length?this.current_id=this._markers[t].data.unique_id:this.current_id="",this._dispatchVisibleTicksChange()}goToId(t,i,r){this.goTo(this._findMarkerIndex(t),i,r)}_dispatchVisibleTicksChange(){this.ticks_change_timeout&&(clearTimeout(this.ticks_change_timeout),this.ticks_change_timeout=null),this.ticks_change_timeout=setTimeout(()=>{const t=this.timeaxis.getVisibleTicks();this.fire("visible_ticks_change",{visible_ticks:t})},this.options.duration)}_onLoaded(){this.ready=!0,this.fire("loaded",this.config)}_onMarkerAdded(t){this.fire("dateAdded",this.config)}_onEraAdded(t){this.fire("eraAdded",this.config)}_onMarkerRemoved(t){this.fire("dateRemoved",this.config)}_onMarkerClick(t){this.goToId(t.unique_id),this.fire("change",{unique_id:t.unique_id})}_onMarkerBlur(t){this.current_focused_id!==this.current_id&&this.focusOn(this._findMarkerIndex(this.current_id))}_onMouseScroll(t){var i=0,r=0,s={right:-(this.timescale.getPixelWidth()-this.options.width/2),left:this.options.width/2};t||(t=window.event),t.originalEvent&&(t=t.originalEvent),typeof t.wheelDeltaX<"u"&&(i=t.wheelDeltaY/6,Math.abs(t.wheelDeltaX)>Math.abs(t.wheelDeltaY)?i=t.wheelDeltaX/6:i=0),i&&(t.preventDefault&&t.preventDefault(),t.returnValue=!1),r=parseInt(this._el.slider.style.left.replace("px",""))+i,r>s.left?r=s.left:r<s.right&&(r=s.right),this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1),this._el.slider.style.left=r+"px"}_onDragMove(t){this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1)}_onKeydown(t){switch(ri.stopPropagation(t),t.key){case"ArrowUp":case"ArrowRight":{this.focusNext();break}case"ArrowDown":case"ArrowLeft":{this.focusPrevious();break}case"Home":{this.focusOn(0);break}case"End":{this.focusOn(this._markers.length-1);break}}}_drawTimeline(t){this.timescale=this._getTimeScale(),this.timeaxis.drawTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(t),this._assignRowsToMarkers(),this._createGroups(),this._positionGroups(),this.has_eras&&this._positionEras(t)}_updateDrawTimeline(t){var i=!1;if(t){var r=new bC(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows});this.timescale.getMajorScale()==r.getMajorScale()&&this.timescale.getMinorScale()==r.getMinorScale()&&(i=!0)}else i=!0;return i?(this.timescale=this._getTimeScale(),this.timeaxis.positionTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(),this._assignRowsToMarkers(),this._positionGroups(),this.has_eras&&this._positionEras(),this.updateDisplay()):this._drawTimeline(!0),i}_setLabelWithCurrentMarker(){const t=this._markers[this._findMarkerIndex(this.current_focused_id)],i=t&&t.ariaLabel?`, ${t.ariaLabel}, shown`:"";this._el.container.setAttribute("aria-label",`Timeline navigation ${i}`)}_initLayout(){this._el.line=fn("div","tl-timenav-line",this._el.container),this._el.slider=fn("div","tl-timenav-slider",this._el.container),this._el.slider_background=fn("div","tl-timenav-slider-background",this._el.slider),this._el.marker_container_mask=fn("div","tl-timenav-container-mask",this._el.slider),this._el.marker_container=fn("div","tl-timenav-container",this._el.marker_container_mask),this._el.marker_item_container=fn("div","tl-timenav-item-container",this._el.marker_container),this._el.timeaxis=fn("div","tl-timeaxis",this._el.slider),this._el.timeaxis_background=fn("div","tl-timeaxis-background",this._el.container),this.timeaxis=new uD(this._el.timeaxis,this.options,this.language),this._swipable=new Pw(this._el.slider_background,this._el.slider,{enable:{x:!0,y:!1},constraint:{top:!1,bottom:!1,left:this.options.width/2,right:!1},snap:!1}),this._swipable.enable()}_initEvents(){this._swipable.on("dragmove",this._onDragMove,this),ri.addListener(this._el.container,"mousewheel",this._onMouseScroll,this),ri.addListener(this._el.container,"DOMMouseScroll",this._onMouseScroll,this),ri.addListener(this._el.container,"keydown",this._onKeydown,this)}_initData(){this._createMarkers(this.config.events),this.config.eras&&this.config.eras.length>0&&(this.has_eras=!0,this._createEras(this.config.eras)),this._drawTimeline()}}Fs(pD,$s,Ol,Fl);var yb=function(){function e(t,i){for(var r=0;r<i.length;r++){var s=i[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();function bb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(function(){if(typeof window>"u")return;var e=Array.prototype.slice,t=Element.prototype.matches||Element.prototype.msMatchesSelector,i=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","details","summary","iframe","object","embed","[contenteditable]"].join(","),r=function(){function g(y,x){bb(this,g),this._inertManager=x,this._rootElement=y,this._managedNodes=new Set,this._rootElement.hasAttribute("aria-hidden")?this._savedAriaHidden=this._rootElement.getAttribute("aria-hidden"):this._savedAriaHidden=null,this._rootElement.setAttribute("aria-hidden","true"),this._makeSubtreeUnfocusable(this._rootElement),this._observer=new MutationObserver(this._onMutation.bind(this)),this._observer.observe(this._rootElement,{attributes:!0,childList:!0,subtree:!0})}return yb(g,[{key:"destructor",value:function(){this._observer.disconnect(),this._rootElement&&(this._savedAriaHidden!==null?this._rootElement.setAttribute("aria-hidden",this._savedAriaHidden):this._rootElement.removeAttribute("aria-hidden")),this._managedNodes.forEach(function(x){this._unmanageNode(x.node)},this),this._observer=null,this._rootElement=null,this._managedNodes=null,this._inertManager=null}},{key:"_makeSubtreeUnfocusable",value:function(x){var C=this;d(x,function(F){return C._visitNode(F)});var I=document.activeElement;if(!document.body.contains(x)){for(var A=x,O=void 0;A;){if(A.nodeType===Node.DOCUMENT_FRAGMENT_NODE){O=A;break}A=A.parentNode}O&&(I=O.activeElement)}x.contains(I)&&(I.blur(),I===document.activeElement&&document.body.focus())}},{key:"_visitNode",value:function(x){if(x.nodeType===Node.ELEMENT_NODE){var C=x;C!==this._rootElement&&C.hasAttribute("inert")&&this._adoptInertRoot(C),(t.call(C,i)||C.hasAttribute("tabindex"))&&this._manageNode(C)}}},{key:"_manageNode",value:function(x){var C=this._inertManager.register(x,this);this._managedNodes.add(C)}},{key:"_unmanageNode",value:function(x){var C=this._inertManager.deregister(x,this);C&&this._managedNodes.delete(C)}},{key:"_unmanageSubtree",value:function(x){var C=this;d(x,function(I){return C._unmanageNode(I)})}},{key:"_adoptInertRoot",value:function(x){var C=this._inertManager.getInertRoot(x);C||(this._inertManager.setInert(x,!0),C=this._inertManager.getInertRoot(x)),C.managedNodes.forEach(function(I){this._manageNode(I.node)},this)}},{key:"_onMutation",value:function(x,C){x.forEach(function(I){var A=I.target;if(I.type==="childList")e.call(I.addedNodes).forEach(function(F){this._makeSubtreeUnfocusable(F)},this),e.call(I.removedNodes).forEach(function(F){this._unmanageSubtree(F)},this);else if(I.type==="attributes"){if(I.attributeName==="tabindex")this._manageNode(A);else if(A!==this._rootElement&&I.attributeName==="inert"&&A.hasAttribute("inert")){this._adoptInertRoot(A);var O=this._inertManager.getInertRoot(A);this._managedNodes.forEach(function(F){A.contains(F.node)&&O._manageNode(F.node)})}}},this)}},{key:"managedNodes",get:function(){return new Set(this._managedNodes)}},{key:"hasSavedAriaHidden",get:function(){return this._savedAriaHidden!==null}},{key:"savedAriaHidden",set:function(x){this._savedAriaHidden=x},get:function(){return this._savedAriaHidden}}]),g}(),s=function(){function g(y,x){bb(this,g),this._node=y,this._overrodeFocusMethod=!1,this._inertRoots=new Set([x]),this._savedTabIndex=null,this._destroyed=!1,this.ensureUntabbable()}return yb(g,[{key:"destructor",value:function(){if(this._throwIfDestroyed(),this._node&&this._node.nodeType===Node.ELEMENT_NODE){var x=this._node;this._savedTabIndex!==null?x.setAttribute("tabindex",this._savedTabIndex):x.removeAttribute("tabindex"),this._overrodeFocusMethod&&delete x.focus}this._node=null,this._inertRoots=null,this._destroyed=!0}},{key:"_throwIfDestroyed",value:function(){if(this.destroyed)throw new Error("Trying to access destroyed InertNode")}},{key:"ensureUntabbable",value:function(){if(this.node.nodeType===Node.ELEMENT_NODE){var x=this.node;if(t.call(x,i)){if(x.tabIndex===-1&&this.hasSavedTabIndex)return;x.hasAttribute("tabindex")&&(this._savedTabIndex=x.tabIndex),x.setAttribute("tabindex","-1"),x.nodeType===Node.ELEMENT_NODE&&(x.focus=function(){},this._overrodeFocusMethod=!0)}else x.hasAttribute("tabindex")&&(this._savedTabIndex=x.tabIndex,x.removeAttribute("tabindex"))}}},{key:"addInertRoot",value:function(x){this._throwIfDestroyed(),this._inertRoots.add(x)}},{key:"removeInertRoot",value:function(x){this._throwIfDestroyed(),this._inertRoots.delete(x),this._inertRoots.size===0&&this.destructor()}},{key:"destroyed",get:function(){return this._destroyed}},{key:"hasSavedTabIndex",get:function(){return this._savedTabIndex!==null}},{key:"node",get:function(){return this._throwIfDestroyed(),this._node}},{key:"savedTabIndex",set:function(x){this._throwIfDestroyed(),this._savedTabIndex=x},get:function(){return this._throwIfDestroyed(),this._savedTabIndex}}]),g}(),c=function(){function g(y){if(bb(this,g),!y)throw new Error("Missing required argument; InertManager needs to wrap a document.");this._document=y,this._managedNodes=new Map,this._inertRoots=new Map,this._observer=new MutationObserver(this._watchForInert.bind(this)),l(y.head||y.body||y.documentElement),y.readyState==="loading"?y.addEventListener("DOMContentLoaded",this._onDocumentLoaded.bind(this)):this._onDocumentLoaded()}return yb(g,[{key:"setInert",value:function(x,C){if(C){if(this._inertRoots.has(x))return;var I=new r(x,this);if(x.setAttribute("inert",""),this._inertRoots.set(x,I),!this._document.body.contains(x))for(var A=x.parentNode;A;)A.nodeType===11&&l(A),A=A.parentNode}else{if(!this._inertRoots.has(x))return;var O=this._inertRoots.get(x);O.destructor(),this._inertRoots.delete(x),x.removeAttribute("inert")}}},{key:"getInertRoot",value:function(x){return this._inertRoots.get(x)}},{key:"register",value:function(x,C){var I=this._managedNodes.get(x);return I!==void 0?I.addInertRoot(C):I=new s(x,C),this._managedNodes.set(x,I),I}},{key:"deregister",value:function(x,C){var I=this._managedNodes.get(x);return I?(I.removeInertRoot(C),I.destroyed&&this._managedNodes.delete(x),I):null}},{key:"_onDocumentLoaded",value:function(){var x=e.call(this._document.querySelectorAll("[inert]"));x.forEach(function(C){this.setInert(C,!0)},this),this._observer.observe(this._document.body||this._document.documentElement,{attributes:!0,subtree:!0,childList:!0})}},{key:"_watchForInert",value:function(x,C){var I=this;x.forEach(function(A){switch(A.type){case"childList":e.call(A.addedNodes).forEach(function(z){if(z.nodeType===Node.ELEMENT_NODE){var U=e.call(z.querySelectorAll("[inert]"));t.call(z,"[inert]")&&U.unshift(z),U.forEach(function(H){this.setInert(H,!0)},I)}},I);break;case"attributes":if(A.attributeName!=="inert")return;var O=A.target,F=O.hasAttribute("inert");I.setInert(O,F);break}},this)}}]),g}();function d(g,y,x){if(g.nodeType==Node.ELEMENT_NODE){var C=g;y&&y(C);var I=C.shadowRoot;if(I){d(I,y);return}if(C.localName=="content"){for(var A=C,O=A.getDistributedNodes?A.getDistributedNodes():[],F=0;F<O.length;F++)d(O[F],y);return}if(C.localName=="slot"){for(var z=C,U=z.assignedNodes?z.assignedNodes({flatten:!0}):[],H=0;H<U.length;H++)d(U[H],y);return}}for(var q=g.firstChild;q!=null;)d(q,y),q=q.nextSibling}function l(g){if(!g.querySelector("style#inert-style, link#inert-style")){var y=document.createElement("style");y.setAttribute("id","inert-style"),y.textContent=`
[inert] {
  pointer-events: none;
  cursor: default;
}

[inert], [inert] * {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
`,g.appendChild(y)}}if(!HTMLElement.prototype.hasOwnProperty("inert")){var m=new c(document);Object.defineProperty(HTMLElement.prototype,"inert",{enumerable:!0,get:function(){return this.hasAttribute("inert")},set:function(y){m.setInert(this,y)}})}})();class mD{constructor(t,i,r,s){s&&this.setLanguage(s),this._el={container:{},scroll_container:{},background:{},content_container:{},content:{}},this._media=null,this._mediaclass={},this._text={},this._background_media=null,this._state={loaded:!1},this.has={headline:!1,text:!1,media:!1,title:!1,background:{image:!1,color:!1,color_value:""}},this.has.title=r,this.data={unique_id:null,background:null,start_date:null,end_date:null,location:null,text:null,media:null,autolink:!0},this.options={duration:1e3,slide_padding_lr:40,ease:vy,width:600,height:600,skinny_size:650,media_name:""},this.active=!1,this.animator={},Pi(this.options,i),Pi(this.data,t),this._initLayout(),this._initEvents()}show(){this.animator=kl(this._el.slider_container,{left:-(this._el.container.offsetWidth*n)+"px",duration:this.options.duration,easing:this.options.ease})}hide(){}setActive(t){this.active=t,this.active?(this.data.background&&this.fire("background_change",this.has.background),this._setInteractive(!0),this.loadMedia()):(this.stopMedia(),this._setInteractive(!1))}addTo(t){t.appendChild(this._el.container)}removeFrom(t){t.removeChild(this._el.container)}updateDisplay(t,i,r){var s,c=this.options.slide_padding_lr,d=this.options.slide_padding_lr;t?this.options.width=t:this.options.width=this._el.container.offsetWidth,s=this.options.width-this.options.slide_padding_lr*2,nd&&this.options.width<=this.options.skinny_size?(c=0,d=0,s=this.options.width):r=="landscape"||this.options.width<=this.options.skinny_size&&(c=50,d=50,s=this.options.width-c-d),this._el.content.style.paddingLeft=c+"px",this._el.content.style.paddingRight=d+"px",this._el.content.style.width=s+"px",i?this.options.height=i:this.options.height=this._el.container.offsetHeight,this._media&&(!this.has.text&&this.has.headline?this._media.updateDisplay(s,this.options.height-this._text.headlineHeight(),r):!this.has.text&&!this.has.headline?this._media.updateDisplay(s,this.options.height,r):this.options.width<=this.options.skinny_size?this._media.updateDisplay(s,this.options.height,r):this._media.updateDisplay(s/2,this.options.height,r)),this._updateBackgroundDisplay()}loadMedia(){var t=this;this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0),this._background_media&&!this._background_media._state.loaded&&(this._background_media.on("loaded",function(){t._updateBackgroundDisplay()}),this._background_media.loadMedia())}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getBackground(){return this.has.background}scrollToTop(){this._el.container.scrollTop=0}getFormattedDate(){if(ga(this.data.display_date).length>0)return this.data.display_date;var t="";return this.has.title||(this.data.end_date&&(t=" &mdash; "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(t=this.data.start_date.getDisplayDate(this.getLanguage())+t)),t}_initLayout(){if(this._el.container=fn("div","tl-slide"),this.has.title&&(this._el.container.className="tl-slide tl-slide-titleslide"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._el.scroll_container=fn("div","tl-slide-scrollable-container",this._el.container),this._el.content_container=fn("div","tl-slide-content-container",this._el.scroll_container),this._el.content=fn("div","tl-slide-content",this._el.content_container),this._el.background=fn("div","tl-slide-background",this._el.container),this.data.background){if(this.data.background.url){var t=S_(this.data.background,!0);t&&(this._background_media=new t.cls(this.data.background,{background:1}),this.has.background.image=!0,this._el.container.className+=" tl-full-image-background",this.has.background.color_value="#000",this._el.background.style.display="block"),this.data.background.alt&&(this._el.background.setAttribute("role","img"),this._el.background.setAttribute("aria-label",this.data.background.alt))}this.data.background.color&&(this.has.background.color=!0,this._el.container.className+=" tl-full-color-background",this.has.background.color_value=this.data.background.color),this.data.background.text_background&&(this._el.container.className+=" tl-text-background")}this.data.media&&this.data.media.url&&this.data.media.url!=""&&(this.has.media=!0),this.data.text&&this.data.text.text&&(this.has.text=!0),this.data.text&&this.data.text.headline&&(this.has.headline=!0),this.has.media&&(this.data.media.mediatype=S_(this.data.media),this.options.media_name=this.data.media.mediatype.name,this.options.media_type=this.data.media.mediatype.type,this.options.autolink=this.data.autolink,this._media=new this.data.media.mediatype.cls(this.data.media,this.options,this.getLanguage())),(this.has.text||this.has.headline)&&(this._text=new dD(this.data.text,{title:this.has.title,language:this.getLanguage(),autolink:this.data.autolink}),this._text.addDateText(this.getFormattedDate())),!this.has.text&&!this.has.headline&&this.has.media?(this._el.container.classList.add("tl-slide-media-only"),this._media.addTo(this._el.content)):this.has.headline&&this.has.media&&!this.has.text?(this._el.container.classList.add("tl-slide-media-only"),this._text.addTo(this._el.content),this._media.addTo(this._el.content)):this.has.text&&this.has.media?(this._text.addTo(this._el.content),this._media.addTo(this._el.content)):(this.has.text||this.has.headline)&&(this._el.container.classList.add("tl-slide-text-only"),this._text.addTo(this._el.content)),this.onLoaded()}_initEvents(){}_updateBackgroundDisplay(){this._background_media&&this._background_media._state.loaded&&(this._el.background.style.backgroundImage="url('"+this._background_media.getImageURL(this.options.width,this.options.height)+"')")}_setInteractive(t){t?this._el.container.removeAttribute("inert"):this._el.container.setAttribute("inert",!0)}}Fs(mD,Fl,$s,Ol);class Hx{constructor(t,i,r){this._el={container:{},content_container:{},icon:{},title:{},description:{}},this.mediatype={},this.data={title:"Navigation",description:"Description",date:"Date"},this.options={direction:"previous"},this.animator=null,Pi(this.options,i),Pi(this.data,t),this._el.container=_p("tl-slidenav-"+this.options.direction),nd&&this._el.container.setAttribute("ontouchstart"," "),this._initLayout(),this._initEvents(),r&&r.appendChild(this._el.container)}update(t){var i={title:"",description:"",date:t.getFormattedDate()};t.data.text&&t.data.text.headline&&(i.title=t.data.text.headline),this._update(i)}setColor(t){t?this._el.content_container.className="tl-slidenav-content-container tl-slidenav-inverted":this._el.content_container.className="tl-slidenav-content-container"}_onMouseClick(){this.fire("clicked",this.options)}_update(t){this.data=Pi(this.data,t);const i=mh(this.data.title);this._el.title.innerHTML=i;const r=mh(this.data.date);this._el.description.innerHTML=r,this._el.container.setAttribute("aria-label",`${this.options.direction}, ${i}, ${r}`)}_initLayout(){this._el.content_container=fn("div","tl-slidenav-content-container",this._el.container),this._el.icon=fn("div","tl-slidenav-icon",this._el.content_container),this._el.title=fn("div","tl-slidenav-title",this._el.content_container),this._el.description=fn("div","tl-slidenav-description",this._el.content_container),this._el.icon.innerHTML="&nbsp;",this._update()}_initEvents(){ri.addListener(this._el.container,"click",this._onMouseClick,this)}}Fs(Hx,Ol,$s);class gD{constructor(t,i,r,s){s&&this.setLanguage(s),this._el={container:{},background:{},slider_container_mask:{},slider_container:{},slider_item_container:{}},this._nav={},this._nav.previous={},this._nav.next={},this.slide_spacing=0,this._slides=[],this._swipable,this.preloadTimer,this._message,this.current_id="",this.data={},this.options={id:"",layout:"portrait",width:600,height:600,default_bg_color:{r:255,g:255,b:255},slide_padding_lr:40,start_at_slide:1,slide_default_fade:"0%",duration:1e3,ease:Uh,dragging:!0,trackResize:!0},typeof t=="object"?(this._el.container=t,this.options.id=ju(6,"tl")):(this.options.id=t,this._el.container=$m(t)),this._el.container.id||(this._el.container.id=this.options.id),this.animator=null,Pi(this.options,r),Pi(this.data,i)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this.goTo(this.options.start_at_slide),this._onLoaded()}_addSlide(t){t.addTo(this._el.slider_item_container),t.on("added",this._onSlideAdded,this),t.on("background_change",this._onBackgroundChange,this)}_createSlide(t,i,r){var s=new mD(t,this.options,i,this.getLanguage());this._addSlide(s),r<0?this._slides.push(s):this._slides.splice(r,0,s)}_createSlides(t){for(var i=0;i<t.length;i++)t[i].unique_id==""&&(t[i].unique_id=ju(6,"tl-slide")),this._createSlide(t[i],!1,-1)}_removeSlide(t){t.removeFrom(this._el.slider_item_container),t.off("added",this._onSlideRemoved,this),t.off("background_change",this._onBackgroundChange)}_destroySlide(t){this._removeSlide(this._slides[t]),this._slides.splice(t,1)}_findSlideIndex(t){var i=t;return(typeof t=="string"||t instanceof String)&&(i=tD(t,this._slides,"unique_id")),i}updateDisplay(t,i,r,s){var c,d;typeof s>"u"?d=this.options.layout:d=s,this.options.layout=d,t?this.options.width=t:this.options.width=this._el.container.offsetWidth,i?this.options.height=i:this.options.height=this._el.container.offsetHeight,this.slide_spacing=this.options.width*2,c=this.options.height/2,this._nav.next.setPosition({top:c}),this._nav.previous.setPosition({top:c});for(var l=0;l<this._slides.length;l++)this._slides[l].updateDisplay(this.options.width,this.options.height,d),this._slides[l].setPosition({left:this.slide_spacing*l,top:0});this.goToId(this.current_id,!0,!0)}createSlide(t,i){this._createSlide(t,!1,i)}createSlides(t){this._createSlides(t)}destroySlide(t){this._destroySlide(t)}destroySlideId(t){this.destroySlide(this._findSlideIndex(t))}goTo(t,i,r){t=parseInt(t),isNaN(t)&&(t=0);var s=this;this.changeBackground({color_value:"",image:!1}),this.preloadTimer&&clearTimeout(this.preloadTimer);for(var c=0;c<this._slides.length;c++)this._slides[c].setActive(!1);t<this._slides.length&&t>=0&&(this.current_id=this._slides[t].data.unique_id,this.animator&&this.animator.stop(),this._swipable&&this._swipable.stopMomentum(),i?(this._el.slider_container.style.left=-(this.slide_spacing*t)+"px",this._onSlideChange(r)):this.animator=kl(this._el.slider_container,{left:-(this.slide_spacing*t)+"px",duration:this.options.duration,easing:this.options.ease,complete:this._onSlideChange(r)}),this._slides[t].setActive(!0),this._slides[t+1]?(this.showNav(this._nav.next,!0),this._nav.next.update(this._slides[t+1])):this.showNav(this._nav.next,!1),this._slides[t-1]?(this.showNav(this._nav.previous,!0),this._nav.previous.update(this._slides[t-1])):this.showNav(this._nav.previous,!1),this.preloadTimer=setTimeout(function(){s.preloadSlides(t)},this.options.duration))}goToId(t,i,r){this.goTo(this._findSlideIndex(t),i,r)}preloadSlides(t){this._slides[t+1]&&(this._slides[t+1].loadMedia(),this._slides[t+1].scrollToTop()),this._slides[t+2]&&(this._slides[t+2].loadMedia(),this._slides[t+2].scrollToTop()),this._slides[t-1]&&(this._slides[t-1].loadMedia(),this._slides[t-1].scrollToTop()),this._slides[t-2]&&(this._slides[t-2].loadMedia(),this._slides[t-2].scrollToTop())}next(){var t=this._findSlideIndex(this.current_id);t+1<this._slides.length?this.goTo(t+1):this.goTo(t)}previous(){var t=this._findSlideIndex(this.current_id);t-1>=0?this.goTo(t-1):this.goTo(t)}showNav(t,i){this.options.width<=500&&nd?t.hide():i?t.show():t.hide()}changeBackground(t){var i={r:256,g:256,b:256};t.color_value&&t.color_value!=""?(i=QP(t.color_value),i||(_i("Invalid color value "+t.color_value),i=this.options.default_bg_color)):(i=this.options.default_bg_color,t.color_value="rgb("+i.r+" , "+i.g+", "+i.b+")"),i.r+""+i.g+i.b,this._el.background.style.backgroundImage="none",t.color_value?this._el.background.style.backgroundColor=t.color_value:this._el.background.style.backgroundColor="transparent",i.r<255||i.g<255||i.b<255||t.image?(this._nav.next.setColor(!0),this._nav.previous.setColor(!0)):(this._nav.next.setColor(!1),this._nav.previous.setColor(!1))}_updateDrawSlides(){for(var t=this.options.layout,i=0;i<this._slides.length;i++)this._slides[i].updateDisplay(this.options.width,this.options.height,t),this._slides[i].setPosition({left:this.slide_spacing*i,top:0});this.goToId(this.current_id,!0,!1)}_initLayout(){this._el.container.classList.add("tl-storyslider"),this._nav.previous=new Hx({title:"Previous",description:"description"},{direction:"previous"},this._el.container),this._nav.next=new Hx({title:"Next",description:"description"},{direction:"next"},this._el.container),this._el.slider_container_mask=fn("div","tl-slider-container-mask",this._el.container),this._el.background=fn("div","tl-slider-background tl-animate",this._el.container),this._el.slider_container=fn("div","tl-slider-container tlanimate",this._el.slider_container_mask),this._el.slider_item_container=fn("div","tl-slider-item-container",this._el.slider_container),this._el.slider_container.setAttribute("aria-live","polite"),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this._el.slider_container.style.left="0px",jo&&(this._swipable=new Pw(this._el.slider_container_mask,this._el.slider_container,{enable:{x:!0,y:!1},snap:!0}),this._swipable.enable(),this._message=new xy(this._el.container,{message_class:"tl-message-full",message_icon_class:"tl-icon-swipe-left"},this.getLanguage()),this._message.updateMessage(this._("swipe_to_navigate")),this._message.addTo(this._el.container))}_initEvents(){this._nav.next.on("clicked",this._onNavigation,this),this._nav.previous.on("clicked",this._onNavigation,this),this._message&&this._message.on("clicked",this._onMessageClick,this),this._swipable&&(this._swipable.on("swipe_left",this._onNavigation,this),this._swipable.on("swipe_right",this._onNavigation,this),this._swipable.on("swipe_nodirection",this._onSwipeNoDirection,this))}_initData(){this.data.title&&this._createSlide(this.data.title,!0,-1),this._createSlides(this.data.events)}_onBackgroundChange(t){var i=this._findSlideIndex(this.current_id),r=this._slides[i].getBackground();this.changeBackground(t),this.fire("colorchange",r)}_onMessageClick(t){this._message.hide()}_onSwipeNoDirection(t){this.goToId(this.current_id)}_onNavigation(t){t.direction=="next"||t.direction=="left"?this.next():(t.direction=="previous"||t.direction=="right")&&this.previous(),this.fire("nav_"+t.direction,this.data)}_onSlideAdded(t){_i("slideadded"),this.fire("slideAdded",this.data)}_onSlideRemoved(t){this.fire("slideRemoved",this.data)}_onSlideChange(t){t||this.fire("change",{unique_id:this.current_id})}_onMouseClick(t){}_fireMouseEvent(t){if(this._loaded){var i=t.type;i=i==="mouseenter"?"mouseover":i==="mouseleave"?"mouseout":i,this.hasEventListeners(i)&&(i==="contextmenu"&&ri.preventDefault(t),this.fire(i,{latlng:"something",layerPoint:"something else"}))}}_onLoaded(){this.fire("loaded",this.data)}}Fs(gD,Fl,$s);class vD{constructor(t,i,r,s){this._el={parent:{},container:{},button_forwardtoend:{},button_backtostart:{},button_zoomin:{},button_zoomout:{},arrow:{},line:{},coverbar:{},grip:{}},this.collapsed=!1,typeof t=="object"?this._el.container=t:this._el.container=$m(t),i&&(this._el.parent=i),this.data={visible_ticks_dates:{}},this.options={width:600,height:600,duration:1e3,ease:Uh,menubar_default_y:0},this.animator={},this.setLanguage(s),Pi(this.options,r),this._initLayout(),this._initEvents()}show(t){this.options.duration}hide(t){}toogleZoomIn(t){t?this._el.button_zoomin.removeAttribute("disabled"):this._el.button_zoomin.setAttribute("disabled",!0)}toogleZoomOut(t){t?this._el.button_zoomout.removeAttribute("disabled"):this._el.button_zoomout.setAttribute("disabled",!0)}changeVisibleTicks(t){const i=t.minor;if(!i.length){this.data.visible_ticks_dates={};return}const s=i[0].date.getFullYear(),d=i[i.length-1].date.getFullYear();this.data.visible_ticks_dates={start:s,end:d},this._updateZoomAriaLabels()}setSticky(t){this.options.menubar_default_y=t}setColor(t){t?this._el.container.className="tl-menubar tl-menubar-inverted":this._el.container.className="tl-menubar"}updateDisplay(t,i,r,s){this._updateDisplay(t,i,r,s)}_onButtonZoomIn(t){this.fire("zoom_in",t)}_onButtonZoomOut(t){this.fire("zoom_out",t)}_onButtonForwardToEnd(t){this.fire("forward_to_end",t)}_onButtonBackToStart(t){this.fire("back_to_start",t)}_initLayout(){this._el.button_zoomin=_p("tl-menubar-button",this._el.container),this._el.button_zoomout=_p("tl-menubar-button",this._el.container),this._el.button_forwardtoend=_p("tl-menubar-button",this._el.container),this._el.button_backtostart=_p("tl-menubar-button",this._el.container),nd&&this._el.container.setAttribute("ontouchstart"," "),this._el.button_backtostart.innerHTML="<span class='tl-icon-goback'></span>",this._el.button_backtostart.setAttribute("aria-label",this._("return_to_title")),this._el.button_forwardtoend.innerHTML="<span class='tl-icon-goend'></span>",this._el.button_forwardtoend.setAttribute("aria-label",this._("go_to_end")),this._el.button_zoomin.innerHTML="<span class='tl-icon-zoom-in'></span>",this._el.button_zoomin.setAttribute("aria-label",this._("zoom_in")),this._el.button_zoomout.innerHTML="<span class='tl-icon-zoom-out'></span>",this._el.button_zoomout.setAttribute("aria-label",this._("zoom_out"))}_initEvents(){ri.addListener(this._el.button_forwardtoend,"click",this._onButtonForwardToEnd,this),ri.addListener(this._el.button_backtostart,"click",this._onButtonBackToStart,this),ri.addListener(this._el.button_zoomin,"click",this._onButtonZoomIn,this),ri.addListener(this._el.button_zoomout,"click",this._onButtonZoomOut,this)}_updateDisplay(t,i,r){t&&(this.options.width=t),i&&(this.options.height=i)}_updateZoomAriaLabels(){Object.keys(this.data.visible_ticks_dates).length==0?(this._el.button_zoomin.setAttribute("aria-description",""),this._el.button_zoomout.setAttribute("aria-description","")):(this._el.button_zoomin.setAttribute("aria-description",this._("aria_label_zoomin",this.data.visible_ticks_dates)),this._el.button_zoomout.setAttribute("aria-description",this._("aria_label_zoomout",this.data.visible_ticks_dates)))}}Fs(vD,Ol,$s,Fl);let Gx=null;if(document){let e=document.getElementsByTagName("script");e&&e.length>0&&(Gx=e[e.length-1].src)}function lte(e){return function(t){if(e.config){var i=t.key,r=e._getSlideIndex(self.current_id),s=e.config.events.length-1,c=e.config.title?s+1:s,d=0;i=="ArrowLeft"?r!=d&&e.goToPrev():i=="ArrowRight"&&r!=c&&e.goToNext()}}}class _D{constructor(t,i,r){if(r||(r={}),this.ready=!1,this._el={container:$m(t),storyslider:{},timenav:{},menubar:{}},r.lang&&!r.language&&(r.language=r.lang),this.language=kw,this._storyslider={},this._timenav={},this._menubar={},this._loaded={storyslider:!1,timenav:!1},this.config=null,this.options={script_path:"https://cdn.knightlab.com/libs/timeline3/latest/js/",height:this._el.container.offsetHeight,width:this._el.container.offsetWidth,debug:!1,font:"default",is_embed:!1,is_full_embed:!1,hash_bookmark:!1,default_bg_color:{r:255,g:255,b:255},scale_factor:2,layout:"landscape",timenav_position:"bottom",optimal_tick_width:60,base_class:"tl-timeline",timenav_height:null,timenav_height_percentage:25,timenav_mobile_height_percentage:40,timenav_height_min:175,marker_height_min:30,marker_width_min:100,marker_padding:5,start_at_slide:0,start_at_end:!1,menubar_height:0,skinny_size:650,medium_size:800,use_bc:!1,duration:1e3,ease:Uh,dragging:!0,trackResize:!0,map_type:"stamen:toner-lite",slide_padding_lr:100,slide_default_fade:"0%",zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89],language:"en",ga_measurement_id:null,ga_property_id:null,track_events:["back_to_start","nav_next","nav_previous","zoom_in","zoom_out"],theme:null,sheets_proxy:"https://sheets-proxy.knightlab.com/proxy/",soundcite:!1},this.animator_timenav=null,this.animator_storyslider=null,this.animator_menubar=null,this.message=new xy(this._el.container,{message_class:"tl-message-full"}),typeof r.default_bg_color=="string"){var s=QP(r.default_bg_color);s?r.default_bg_color=s:(delete r.default_bg_color,_i("Invalid default background color. Ignoring."))}Pi(this.options,r),this.options.script_path||(this.options.script_path=this.determineScriptPath()),r.soundcite&&this.on("ready",()=>{_i("Loading Soundcite resources "),_b("https://cdn.knightlab.com/libs/soundcite/latest/css/player.css"),Vu("https://cdn.knightlab.com/libs/soundcite/latest/js/soundcite.min.js")}),this._loadStyles(),document.addEventListener("keydown",lte(this)),window.addEventListener("resize",(function(c){this.updateDisplay()}).bind(this)),this.options.debug&&yQ(console.log),this._el.container.classList.add("tl-timeline"),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","region"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline")),this.options.is_embed&&this._el.container.classList.add("tl-timeline-embed"),this.options.is_full_embed&&this._el.container.classList.add("tl-timeline-full-embed"),this._loadLanguage(i)}_loadStyles(){let t=null,i=null;if(this.options.font&&(this.options.font.indexOf("http")==0||this.options.font.match(/\.css$/)))t=this.options.font;else if(this.options.font){let r="../css/fonts/font."+this.options.font.toLowerCase()+".css";t=new URL(r,this.options.script_path).toString()}if(t&&_b(t),this.options.theme&&(this.options.theme.indexOf("http")==0||this.options.theme.match(/\.css$/)))i=this.options.theme;else if(this.options.theme){let r="../css/themes/timeline.theme."+this.options.theme.toLowerCase()+".css";i=new URL(r,this.options.script_path).toString()}i&&_b(i)}_loadLanguage(t){try{var i=this.options.language,r=this.options.script_path;FQ(i,r).then(s=>{s?(this.language=s,this.message.setLanguage(this.language),this.showMessage(this._("loading_timeline"))):this.showMessage(`Error loading ${i}`),this._initData(t)})}catch(s){this.showMessage(this._translateError(s))}}_initData(t){typeof t=="string"?Cee(t,{callback:(function(i){this.setConfig(i)}).bind(this),sheets_proxy:this.options.sheets_proxy}):Eu==t.constructor?this.setConfig(t):this.setConfig(new Eu(t))}_translateError(t){return t.hasOwnProperty("stack")&&_i(t.stack),t.message_key?this._(t.message_key)+(t.detail?" ["+t.detail+"]":""):t}showMessage(t){this.message?this.message.updateMessage(t):(_i("No message display available."),_i(t))}determineScriptPath(){let t=null;if(Gx)t=Gx;else{let i=document.getElementById("timeline-script-tag");i&&(t=i.src)}if(!t){let i=document.getElementsByTagName("script");for(let r=i.length-1;r>=0;r--)if(i[r].src){t=i[r].src;break}}return t?t.substr(0,t.lastIndexOf("/")+1):""}setConfig(t){if(this.config=t,this.config.isValid()&&(this.config.validate(),this._validateOptions()),this.config.isValid())try{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",this._onDataLoaded.bind(this)):this._onDataLoaded()}catch(c){this.showMessage("<strong>"+this._("error")+":</strong> "+this._translateError(c))}else{for(var i=[],r=0,s=this.config.getErrors();r<s.length;r++)i.push(this._translateError(s[r]));this.showMessage("<strong>"+this._("error")+":</strong> "+i.join("<br>"))}}_onDataLoaded(){this.fire("dataloaded"),this._initLayout(),this._initEvents(),this._initAnalytics(),this.message&&this.message.hide();let t=(r,s)=>{r.reduce((c,d)=>c||d.isIntersecting,!1)&&this.updateDisplay()};new IntersectionObserver(t.bind(this)).observe(this._el.container),this.ready=!0,this.fire("ready")}_initLayout(){this.message.removeFrom(this._el.container),this._el.container.innerHTML="",this.options.timenav_position=="top"?(this._el.timenav=fn("div","tl-timenav",this._el.container),this._el.menubar=fn("div","tl-menubar",this._el.container),this._el.storyslider=fn("div","tl-storyslider",this._el.container)):(this._el.storyslider=fn("div","tl-storyslider",this._el.container),this._el.timenav=fn("div","tl-timenav",this._el.container),this._el.menubar=fn("div","tl-menubar",this._el.container)),this._el.attribution=fn("div","tl-attribution",this._el.container),this._el.attribution.innerHTML="<a href='https://timeline.knightlab.com' target='_blank' rel='noopener'><span class='tl-knightlab-logo'></span>TimelineJS</a>",this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.timenav_height=this._calculateTimeNavHeight(this.options.timenav_height),this._timenav=new pD(this._el.timenav,this.config,this.options,this.language),this._timenav.on("loaded",this._onTimeNavLoaded,this),this._timenav.options.height=this.options.timenav_height,this._timenav.init(),this.options.initial_zoom&&this.setZoom(this.options.initial_zoom),this._storyslider=new gD(this._el.storyslider,this.config,this.options,this.language),this._el.storyslider.setAttribute("role","group"),this._el.storyslider.setAttribute("aria-label",this._("aria_label_timeline_content")),this._storyslider.on("loaded",this._onStorySliderLoaded,this),this._storyslider.init(),this._menubar=new vD(this._el.menubar,this._el.container,this.options,this.getLanguage()),this.options.layout=="portrait"?this.options.storyslider_height=this.options.height-this.options.timenav_height-1:this.options.storyslider_height=this.options.height-1,this._updateDisplay(this._timenav.options.height,!0,2e3)}_initEvents(){this._timenav.on("change",this._onTimeNavChange,this),this._timenav.on("zoomtoggle",this._onZoomToggle,this),this._timenav.on("visible_ticks_change",this._onVisibleTicksChange,this),this._storyslider.on("change",this._onSlideChange,this),this._storyslider.on("colorchange",this._onColorChange,this),this._storyslider.on("nav_next",this._onStorySliderNext,this),this._storyslider.on("nav_previous",this._onStorySliderPrevious,this),this._menubar.on("zoom_in",this._onZoomIn,this),this._menubar.on("zoom_out",this._onZoomOut,this),this._menubar.on("forward_to_end",this._onForwardToEnd,this),this._menubar.on("back_to_start",this._onBackToStart,this)}_onColorChange(t){this.fire("color_change",{unique_id:this.current_id},this)}_onSlideChange(t){this.current_id!=t.unique_id&&(this.current_id=t.unique_id,this._timenav.goToId(this.current_id),this._onChange(t))}_onTimeNavChange(t){this.current_id!=t.unique_id&&(this.current_id=t.unique_id,this._storyslider.goToId(this.current_id),this._onChange(t))}_onZoomToggle(t){t.zoom=="in"?this._menubar.toogleZoomIn(t.show):t.zoom=="out"&&this._menubar.toogleZoomOut(t.show)}_onChange(t){this.fire("change",{unique_id:this.current_id},this),this.options.hash_bookmark&&this.current_id&&this._updateHashBookmark(this.current_id)}_onVisibleTicksChange(t){this._menubar.changeVisibleTicks(t.visible_ticks)}_onForwardToEnd(t){this.goToEnd(),this.fire("forward_to_end",{unique_id:this.current_id},this)}_onBackToStart(t){this.goToStart(),this.fire("back_to_start",{unique_id:this.current_id},this)}_onZoomIn(t){this._timenav.zoomIn(),this.fire("zoom_in",{zoom_level:this._timenav.options.scale_factor},this)}_onZoomOut(t){this._timenav.zoomOut(),this.fire("zoom_out",{zoom_level:this._timenav.options.scale_factor},this)}_onTimeNavLoaded(){this._loaded.timenav=!0,this._onLoaded()}_onStorySliderLoaded(){this._loaded.storyslider=!0,this._onLoaded()}_onStorySliderNext(t){this.fire("nav_next",t)}_onStorySliderPrevious(t){this.fire("nav_previous",t)}_updateDisplay(t,i,r){var s=this.options.duration,c=this.options.base_class,d=0;r&&(s=r),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.width<=this.options.skinny_size?(c+=" tl-skinny",this.options.layout="portrait"):this.options.width<=this.options.medium_size?(c+=" tl-medium",this.options.layout="landscape"):this.options.layout="landscape",jo&&(this.options.layout=vQ()),nd?(c+=" tl-mobile",this.options.timenav_height=this._calculateTimeNavHeight(t,this.options.timenav_mobile_height_percentage)):this.options.timenav_height=this._calculateTimeNavHeight(t),this.options.layout=="portrait"?c+=" tl-layout-portrait":c+=" tl-layout-landscape",this.options.storyslider_height=this.options.height-this.options.timenav_height,this.options.timenav_position=="top"?d=Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-39/2:d=Math.round(this.options.storyslider_height+1+Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-35/2),i?(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this.animator_storyslider&&this.animator_storyslider.stop(),this.animator_storyslider=kl(this._el.storyslider,{height:this.options.storyslider_height+"px",duration:s/2,easing:lm}),this.animator_menubar&&this.animator_menubar.stop(),this.animator_menubar=kl(this._el.menubar,{top:d+"px",duration:s/2,easing:lm})):(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this._el.storyslider.style.height=this.options.storyslider_height+"px",this._el.menubar.style.top=d+"px"),this.message&&this.message.updateDisplay(this.options.width,this.options.height),this._timenav.updateDisplay(this.options.width,this.options.timenav_height,i),this._storyslider.updateDisplay(this.options.width,this.options.storyslider_height,i,this.options.layout),this.language.direction=="rtl"&&(c+=" tl-rtl"),this._el.container.className=c}_calculateTimeNavHeight(t,i){var r=0;return t?r=t:(this.options.timenav_height_percentage||i)&&(i?r=Math.round(this.options.height/100*i):r=Math.round(this.options.height/100*this.options.timenav_height_percentage)),this._timenav.ready&&this.options.timenav_height_min<this._timenav.getMinimumHeight()&&(this.options.timenav_height_min=this._timenav.getMinimumHeight()),r<this.options.timenav_height_min&&(r=this.options.timenav_height_min),r=r-this.options.marker_padding*2,r}_validateOptions(){for(var t=["timenav_height","timenav_height_min","marker_height_min","marker_width_min","marker_padding","start_at_slide","slide_padding_lr"],i=0;i<t.length;i++){var r=t[i],s=this.options[r];let c=!0;typeof s=="number"?c=s==parseInt(s):typeof s=="string"&&(c=s.match(/^\s*(\-?\d+)?\s*$/)),c||this.config.logError({message_key:"invalid_integer_option",detail:r})}}_getSlideIndex(t){if(this.config){if(this.config.title&&this.config.title.unique_id==t)return 0;for(var i=0;i<this.config.events.length;i++)if(t==this.config.events[i].unique_id)return this.config.title?i+1:i}return-1}_getEventIndex(t){for(var i=0;i<this.config.events.length;i++)if(t==this.config.events[i].unique_id)return i;return-1}_onLoaded(){if(this._loaded.storyslider&&this._loaded.timenav&&(this.fire("loaded",this.config),_Q(this.options.start_at_end)||this.options.start_at_slide>this.config.events.length?this.goToEnd():this.goTo(this.options.start_at_slide),this.options.hash_bookmark)){window.location.hash!=""?this.goToId(window.location.hash.replace("#event-","")):this._updateHashBookmark(this.current_id);let t=this;window.addEventListener("hashchange",function(){window.location.hash.indexOf("#event-")==0&&t.goToId(window.location.hash.replace("#event-",""))},!1)}}_updateHashBookmark(t){if(t){var i="#event-"+t.toString();window.history.replaceState(null,"Browsing TimelineJS",i),this.fire("hash_updated",{unique_id:this.current_id,hashbookmark:"#event-"+t.toString()},this)}}zoomIn(){this._timenav.zoomIn()}zoomOut(){this._timenav.zoomOut()}setZoom(t){this._timenav.setZoom(t)}goToId(t){this.current_id!=t&&(this.current_id=t,this._timenav.goToId(this.current_id),this._storyslider.goToId(this.current_id,!1,!0),this.fire("change",{unique_id:this.current_id},this))}goTo(t){if(!(t<0))try{this.config.title?t===0?this.goToId(this.config.title.unique_id):this.goToId(this.config.events[t-1].unique_id):this.goToId(this.config.events[t].unique_id)}catch{return}}goToStart(){this.goTo(0)}goToEnd(){var t=this.config.events.length-1;this.goTo(this.config.title?t+1:t)}goToPrev(){this.goTo(this._getSlideIndex(this.current_id)-1),this.focusContainer()}goToNext(){this.goTo(this._getSlideIndex(this.current_id)+1),this.focusContainer()}add(t){var i=this.config.addEvent(t),r=this._getEventIndex(i),s=this.config.events[r];this._storyslider.createSlide(s,this.config.title?r+1:r),this._storyslider._updateDrawSlides(),this._timenav.createMarker(s,r),this._timenav._updateDrawTimeline(!1),this.fire("added",{unique_id:i})}remove(t){if(t>=0&&t<this.config.events.length){this.config.events[t].unique_id==this.current_id&&(t<this.config.events.length-1?this.goTo(t+1):this.goTo(t-1));var i=this.config.events.splice(t,1);delete this.config.event_dict[i[0].unique_id],this._storyslider.destroySlide(this.config.title?t+1:t),this._storyslider._updateDrawSlides(),this._timenav.destroyMarker(t),this._timenav._updateDrawTimeline(!1),this.fire("removed",{unique_id:i[0].unique_id})}}removeId(t){this.remove(this._getEventIndex(t))}getData(t){if(this.config.title){if(t==0)return this.config.title;if(t>0&&t<=this.config.events.length)return this.config.events[t-1]}else if(t>=0&&t<this.config.events.length)return this.config.events[t];return null}getDataById(t){return this.getData(this._getSlideIndex(t))}getSlide(t){return t>=0&&t<this._storyslider._slides.length?this._storyslider._slides[t]:null}getSlideById(t){return this.getSlide(this._getSlideIndex(t))}getCurrentSlide(){return this.getSlideById(this.current_id)}updateDisplay(){this.ready?this._updateDisplay():_i("updateDisplay called but timeline is not in ready state")}focusContainer(){this._el.container.focus()}_initGoogleAnalytics(t){Vu(`https://www.googletagmanager.com/gtag/js?id=${t}`),window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config",t)}_initAnalytics(){let t=this.options.ga_measurement_id||this.options.ga_property_id||null;if(t){this._initGoogleAnalytics(t);var i=this.options.track_events;for(let s=0;s<i.length;s++){var r=i[s];this.addEventListener(r,function(c){gtag("event",c.type)})}}}}Fs(_D,Fl,$s);function cte(e){return{display_date:e.toLocaleDateString("en-US",{timeZone:"UTC",day:"2-digit",month:"2-digit",year:"numeric"}),year:e.getUTCFullYear(),month:e.getUTCMonth()+1,day:e.getUTCDate()}}function CC(e){const t=typeof e=="string"?Number.parseInt(e):e,i=new Date(t*1e3);return cte(i)}function ute(e){const t=r=>`<li>${r}</li>`,i=r=>{var s;return`<div class="previewEntry"><strong>${r.label}:</strong><ul>${((s=r.entries)==null?void 0:s.map(t).join(""))??""}</ul></div>`};return e.map(i).join("")}function dte(e){var l,m;if(!((l=e.dates)!=null&&l.length))return null;const t=e.dates[0].dateAsset[0],i=CC(t.start.numeric),r=(m=t.end)!=null&&m.numeric?CC(t.end.numeric):void 0,s=`<a href="/defaultinstance/asset/viewAsset/${e.objectId}">${e.title}</a>`,c=e.entries?ute(e.entries):"",d=e.primaryHandlerThumbnail2x?{thumbnail:e.primaryHandlerThumbnail2x,url:e.primaryHandlerThumbnail2x}:void 0;return{start_date:i,...r&&{end_date:r},text:{headline:s,text:c},media:d}}function hte(e){return e.map(dte).filter(t=>t!==null)}const yD=e=>(ja("data-v-c023243c"),e=e(),Va(),e),fte={class:"search-results-timeline"},pte={key:0,class:"flex flex-col items-center justify-center py-16 gap-4"},mte=yD(()=>ue("h2",{class:"text-2xl font-medium"},"No Timeline Events",-1)),gte=yD(()=>ue("p",null,"The loaded results don't have dates, so we can't make a timeline.",-1)),vte=lt({__name:"SearchResultsTimeline",props:{totalResults:{},matches:{},status:{}},emits:["loadMore"],setup(e){const t=e,i=Fe([]),r=Fe(null),s=Fe(null);function c(d){const l=d.cloneNode(!0);return d.parentNode.replaceChild(l,d),l}return Fn(()=>{i.value=hte(t.matches),i.value.length&&(r.value=new _D("timeline-embed",{events:i.value},{timenav_position:"bottom",timenav_height_percentage:50,start_at_end:!0}))}),Hi(()=>{s.value&&(s.value.innerHTML="",c(s.value))}),(d,l)=>(B(),fe("div",fte,[i.value.length?st("",!0):(B(),fe("div",pte,[mte,gte,d.matches.length<d.totalResults?(B(),ze(oi,{key:0,onClick:l[0]||(l[0]=m=>d.$emit("loadMore"))},{default:Ce(()=>[Ot(" Load More "),d.status==="fetching"?(B(),ze(Jo,{key:0,class:"w-4 h-4 ml-2"})):st("",!0)]),_:1})):st("",!0)])),ue("div",{id:"timeline-embed",ref_key:"timelineEmbed",ref:s},null,512)]))}});const Dw=ln(vte,[["__scopeId","data-v-c023243c"]]);function _te(e){return e.locations?e.locations.flatMap(t=>t.entries?t.entries.map(i=>i.loc?{lng:i.loc.coordinates[0],lat:i.loc.coordinates[1]}:null):[]).filter(t=>t!==null):[]}const xv=e=>(t,i)=>e(t,i),yte=e=>{const t=e.map(c=>c.lng).reduce(xv(Math.min),1/0),i=e.map(Ov("lat")).reduce(xv(Math.min),1/0),r=e.map(Ov("lng")).reduce(xv(Math.max),-1/0),s=e.map(Ov("lat")).reduce(xv(Math.max),-1/0);return[[t,i],[r,s]]};function bte(e){const[[t,i],[r,s]]=e;return{lng:(t+r)/2,lat:(i+s)/2}}const xte={class:"search-results-map mb-16"},wte={key:0,class:"flex flex-col items-center justify-center py-16 gap-4"},Ste=ue("h2",{class:"text-2xl font-medium"},"No Locations",-1),Tte=ue("p",null,"The loaded results don't have locations, so we can't make a map.",-1),Ete={class:"my-2"},Cte={key:0,class:"inline-flex items-baseline flex-wrap m-0"},Ite={class:"text-xs uppercase"},Ate={class:"text-sm"},Lw=lt({__name:"SearchResultsMap",props:{totalResults:{},matches:{},status:{}},emits:["loadMore"],setup(e){const t=Ic(()=>oo(()=>Promise.resolve().then(()=>vw),void 0)),i=Ic(()=>oo(()=>import("./MapMarker-d1c12f0b.js"),[])),r=Ic(()=>oo(()=>import("./MapPopup-17010ab7.js"),["assets/MapPopup-17010ab7.js","assets/MapPopup-56628758.css"])),s=e;function c(g){return typeof g.title=="string"?g.title:Array.isArray(g.title)&&g.title.length>0?g.title[0]:"(No Title)"}const d=De(()=>s.matches.reduce((g,y)=>{const x=_te(y);if(!x.length)return g;const C=Cl(y.objectId),I=y.primaryHandlerId?Nc(y.primaryHandlerId):null,A=c(y),O=x.map(F=>({id:`${y.objectId}-${F.lng}-${F.lat}`,assetUrl:C,title:A,imgSrc:I,entries:y.entries??[],...F}));return g.concat(O)},[])),l=De(()=>{const g=d.value.map(y=>({lng:y.lng,lat:y.lat}));return yte(g)}),m=De(()=>bte(l.value));return(g,y)=>(B(),fe("div",xte,[d.value.length?st("",!0):(B(),fe("div",wte,[Ste,Tte,g.matches.length<(g.totalResults??1/0)?(B(),ze(oi,{key:0,onClick:y[0]||(y[0]=x=>g.$emit("loadMore"))},{default:Ce(()=>[Ot(" Load More "),g.status==="fetching"?(B(),ze(Jo,{key:0,class:"w-4 h-4 ml-2"})):st("",!0)]),_:1})):st("",!0)])),vs(_e(le(t),{zoom:10,mapStyle:"light",apiKey:le(Zn).arcgis.apiKey,bounds:l.value,center:m.value,mapContainerClass:"!h-[50vh]"},{default:Ce(()=>[(B(!0),fe(Ut,null,$n(d.value,x=>(B(),ze(le(i),{id:x.id,key:x.id,lng:x.lng,lat:x.lat},{default:Ce(()=>[_e(le(r),null,{default:Ce(()=>[_e(ts,{to:x.assetUrl},{default:Ce(()=>[x.imgSrc?(B(),ze(td,{key:0,src:x.imgSrc,alt:x.title,class:"h-8 w-8 sm:h-16 sm:w-16 object-cover rounded-md overflow-hidden border"},null,8,["src","alt"])):st("",!0)]),_:2},1032,["to"]),ue("h1",Ete,[_e(ts,{to:x.assetUrl},{default:Ce(()=>[Ot(xt(x.title),1)]),_:2},1032,["to"])]),x.entries?(B(),fe("dl",Cte,[(B(!0),fe(Ut,null,$n(x.entries,(C,I)=>{var A;return B(),fe("div",{key:I,class:"inline-flex items-baseline gap-x-2 flex-wrap text-neutral-400 group-hover:text-blue-700 group-focus:text-blue-700"},[ue("dt",Ite,xt((C==null?void 0:C.label)||"Item"),1),ue("dd",Ate,xt((A=C.entries)==null?void 0:A.join(", ")),1)])}),128))])):st("",!0)]),_:2},1024)]),_:2},1032,["id","lng","lat"]))),128))]),_:1},8,["apiKey","bounds","center"]),[[_a,d.value.length>0]])]))}});function IC(e){return e!==null&&typeof e=="object"&&"constructor"in e&&e.constructor===Object}function Ow(e={},t={}){Object.keys(t).forEach(i=>{typeof e[i]>"u"?e[i]=t[i]:IC(t[i])&&IC(e[i])&&Object.keys(t[i]).length>0&&Ow(e[i],t[i])})}const bD={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function xo(){const e=typeof document<"u"?document:{};return Ow(e,bD),e}const Mte={document:bD,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(e){return typeof setTimeout>"u"?(e(),null):setTimeout(e,0)},cancelAnimationFrame(e){typeof setTimeout>"u"||clearTimeout(e)}};function zs(){const e=typeof window<"u"?window:{};return Ow(e,Mte),e}function kte(e){const t=e;Object.keys(t).forEach(i=>{try{t[i]=null}catch{}try{delete t[i]}catch{}})}function T_(e,t=0){return setTimeout(e,t)}function E_(){return Date.now()}function Pte(e){const t=zs();let i;return t.getComputedStyle&&(i=t.getComputedStyle(e,null)),!i&&e.currentStyle&&(i=e.currentStyle),i||(i=e.style),i}function Dte(e,t="x"){const i=zs();let r,s,c;const d=Pte(e);return i.WebKitCSSMatrix?(s=d.transform||d.webkitTransform,s.split(",").length>6&&(s=s.split(", ").map(l=>l.replace(",",".")).join(", ")),c=new i.WebKitCSSMatrix(s==="none"?"":s)):(c=d.MozTransform||d.OTransform||d.MsTransform||d.msTransform||d.transform||d.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=c.toString().split(",")),t==="x"&&(i.WebKitCSSMatrix?s=c.m41:r.length===16?s=parseFloat(r[12]):s=parseFloat(r[4])),t==="y"&&(i.WebKitCSSMatrix?s=c.m42:r.length===16?s=parseFloat(r[13]):s=parseFloat(r[5])),s||0}function yp(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function Lte(e){return typeof window<"u"&&typeof window.HTMLElement<"u"?e instanceof HTMLElement:e&&(e.nodeType===1||e.nodeType===11)}function ua(...e){const t=Object(e[0]),i=["__proto__","constructor","prototype"];for(let r=1;r<e.length;r+=1){const s=e[r];if(s!=null&&!Lte(s)){const c=Object.keys(Object(s)).filter(d=>i.indexOf(d)<0);for(let d=0,l=c.length;d<l;d+=1){const m=c[d],g=Object.getOwnPropertyDescriptor(s,m);g!==void 0&&g.enumerable&&(yp(t[m])&&yp(s[m])?s[m].__swiper__?t[m]=s[m]:ua(t[m],s[m]):!yp(t[m])&&yp(s[m])?(t[m]={},s[m].__swiper__?t[m]=s[m]:ua(t[m],s[m])):t[m]=s[m])}}}return t}function wv(e,t,i){e.style.setProperty(t,i)}function xD({swiper:e,targetPosition:t,side:i}){const r=zs(),s=-e.translate;let c=null,d;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const m=t>s?"next":"prev",g=(x,C)=>m==="next"&&x>=C||m==="prev"&&x<=C,y=()=>{d=new Date().getTime(),c===null&&(c=d);const x=Math.max(Math.min((d-c)/l,1),0),C=.5-Math.cos(x*Math.PI)/2;let I=s+C*(t-s);if(g(I,t)&&(I=t),e.wrapperEl.scrollTo({[i]:I}),g(I,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:I})}),r.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=r.requestAnimationFrame(y)};y()}function lo(e,t=""){return[...e.children].filter(i=>i.matches(t))}function Sy(e,t=[]){const i=document.createElement(e);return i.classList.add(...Array.isArray(t)?t:[t]),i}function wD(e){const t=zs(),i=xo(),r=e.getBoundingClientRect(),s=i.body,c=e.clientTop||s.clientTop||0,d=e.clientLeft||s.clientLeft||0,l=e===t?t.scrollY:e.scrollTop,m=e===t?t.scrollX:e.scrollLeft;return{top:r.top+l-c,left:r.left+m-d}}function Ote(e,t){const i=[];for(;e.previousElementSibling;){const r=e.previousElementSibling;t?r.matches(t)&&i.push(r):i.push(r),e=r}return i}function Rte(e,t){const i=[];for(;e.nextElementSibling;){const r=e.nextElementSibling;t?r.matches(t)&&i.push(r):i.push(r),e=r}return i}function Sc(e,t){return zs().getComputedStyle(e,null).getPropertyValue(t)}function Wx(e){let t=e,i;if(t){for(i=0;(t=t.previousSibling)!==null;)t.nodeType===1&&(i+=1);return i}}function qx(e,t){const i=[];let r=e.parentElement;for(;r;)t?r.matches(t)&&i.push(r):i.push(r),r=r.parentElement;return i}function AC(e,t,i){const r=zs();return i?e[t==="width"?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-left":"margin-bottom")):e.offsetWidth}let xb;function Fte(){const e=zs(),t=xo();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}function SD(){return xb||(xb=Fte()),xb}let wb;function $te({userAgent:e}={}){const t=SD(),i=zs(),r=i.navigator.platform,s=e||i.navigator.userAgent,c={ios:!1,android:!1},d=i.screen.width,l=i.screen.height,m=s.match(/(Android);?[\s\/]+([\d.]+)?/);let g=s.match(/(iPad).*OS\s([\d_]+)/);const y=s.match(/(iPod)(.*OS\s([\d_]+))?/),x=!g&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),C=r==="Win32";let I=r==="MacIntel";const A=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!g&&I&&t.touch&&A.indexOf(`${d}x${l}`)>=0&&(g=s.match(/(Version)\/([\d.]+)/),g||(g=[0,1,"13_0_0"]),I=!1),m&&!C&&(c.os="android",c.android=!0),(g||x||y)&&(c.os="ios",c.ios=!0),c}function zte(e={}){return wb||(wb=$te(e)),wb}let Sb;function Nte(){const e=zs();let t=!1;function i(){const r=e.navigator.userAgent.toLowerCase();return r.indexOf("safari")>=0&&r.indexOf("chrome")<0&&r.indexOf("android")<0}if(i()){const r=String(e.navigator.userAgent);if(r.includes("Version/")){const[s,c]=r.split("Version/")[1].split(" ")[0].split(".").map(d=>Number(d));t=s<16||s===16&&c<2}}return{isSafari:t||i(),needPerspectiveFix:t,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}function Bte(){return Sb||(Sb=Nte()),Sb}function jte({swiper:e,on:t,emit:i}){const r=zs();let s=null,c=null;const d=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(s=new ResizeObserver(y=>{c=r.requestAnimationFrame(()=>{const{width:x,height:C}=e;let I=x,A=C;y.forEach(({contentBoxSize:O,contentRect:F,target:z})=>{z&&z!==e.el||(I=F?F.width:(O[0]||O).inlineSize,A=F?F.height:(O[0]||O).blockSize)}),(I!==x||A!==C)&&d()})}),s.observe(e.el))},m=()=>{c&&r.cancelAnimationFrame(c),s&&s.unobserve&&e.el&&(s.unobserve(e.el),s=null)},g=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof r.ResizeObserver<"u"){l();return}r.addEventListener("resize",d),r.addEventListener("orientationchange",g)}),t("destroy",()=>{m(),r.removeEventListener("resize",d),r.removeEventListener("orientationchange",g)})}function Vte({swiper:e,extendParams:t,on:i,emit:r}){const s=[],c=zs(),d=(g,y={})=>{const x=c.MutationObserver||c.WebkitMutationObserver,C=new x(I=>{if(e.__preventObserver__)return;if(I.length===1){r("observerUpdate",I[0]);return}const A=function(){r("observerUpdate",I[0])};c.requestAnimationFrame?c.requestAnimationFrame(A):c.setTimeout(A,0)});C.observe(g,{attributes:typeof y.attributes>"u"?!0:y.attributes,childList:typeof y.childList>"u"?!0:y.childList,characterData:typeof y.characterData>"u"?!0:y.characterData}),s.push(C)},l=()=>{if(e.params.observer){if(e.params.observeParents){const g=qx(e.el);for(let y=0;y<g.length;y+=1)d(g[y])}d(e.el,{childList:e.params.observeSlideChildren}),d(e.wrapperEl,{attributes:!1})}},m=()=>{s.forEach(g=>{g.disconnect()}),s.splice(0,s.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",l),i("destroy",m)}const Ute={on(e,t,i){const r=this;if(!r.eventsListeners||r.destroyed||typeof t!="function")return r;const s=i?"unshift":"push";return e.split(" ").forEach(c=>{r.eventsListeners[c]||(r.eventsListeners[c]=[]),r.eventsListeners[c][s](t)}),r},once(e,t,i){const r=this;if(!r.eventsListeners||r.destroyed||typeof t!="function")return r;function s(...c){r.off(e,s),s.__emitterProxy&&delete s.__emitterProxy,t.apply(r,c)}return s.__emitterProxy=t,r.on(e,s,i)},onAny(e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const r=t?"unshift":"push";return i.eventsAnyListeners.indexOf(e)<0&&i.eventsAnyListeners[r](e),i},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsAnyListeners)return t;const i=t.eventsAnyListeners.indexOf(e);return i>=0&&t.eventsAnyListeners.splice(i,1),t},off(e,t){const i=this;return!i.eventsListeners||i.destroyed||!i.eventsListeners||e.split(" ").forEach(r=>{typeof t>"u"?i.eventsListeners[r]=[]:i.eventsListeners[r]&&i.eventsListeners[r].forEach((s,c)=>{(s===t||s.__emitterProxy&&s.__emitterProxy===t)&&i.eventsListeners[r].splice(c,1)})}),i},emit(...e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsListeners)return t;let i,r,s;return typeof e[0]=="string"||Array.isArray(e[0])?(i=e[0],r=e.slice(1,e.length),s=t):(i=e[0].events,r=e[0].data,s=e[0].context||t),r.unshift(s),(Array.isArray(i)?i:i.split(" ")).forEach(d=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(l=>{l.apply(s,[d,...r])}),t.eventsListeners&&t.eventsListeners[d]&&t.eventsListeners[d].forEach(l=>{l.apply(s,r)})}),t}};function Hte(){const e=this;let t,i;const r=e.el;typeof e.params.width<"u"&&e.params.width!==null?t=e.params.width:t=r.clientWidth,typeof e.params.height<"u"&&e.params.height!==null?i=e.params.height:i=r.clientHeight,!(t===0&&e.isHorizontal()||i===0&&e.isVertical())&&(t=t-parseInt(Sc(r,"padding-left")||0,10)-parseInt(Sc(r,"padding-right")||0,10),i=i-parseInt(Sc(r,"padding-top")||0,10)-parseInt(Sc(r,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(i)&&(i=0),Object.assign(e,{width:t,height:i,size:e.isHorizontal()?t:i}))}function Gte(){const e=this;function t(W){return e.isHorizontal()?W:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[W]}function i(W,te){return parseFloat(W.getPropertyValue(t(te))||0)}const r=e.params,{wrapperEl:s,slidesEl:c,size:d,rtlTranslate:l,wrongRTL:m}=e,g=e.virtual&&r.virtual.enabled,y=g?e.virtual.slides.length:e.slides.length,x=lo(c,`.${e.params.slideClass}, swiper-slide`),C=g?e.virtual.slides.length:x.length;let I=[];const A=[],O=[];let F=r.slidesOffsetBefore;typeof F=="function"&&(F=r.slidesOffsetBefore.call(e));let z=r.slidesOffsetAfter;typeof z=="function"&&(z=r.slidesOffsetAfter.call(e));const U=e.snapGrid.length,H=e.slidesGrid.length;let q=r.spaceBetween,ee=-F,Q=0,ve=0;if(typeof d>"u")return;typeof q=="string"&&q.indexOf("%")>=0?q=parseFloat(q.replace("%",""))/100*d:typeof q=="string"&&(q=parseFloat(q)),e.virtualSize=-q,x.forEach(W=>{l?W.style.marginLeft="":W.style.marginRight="",W.style.marginBottom="",W.style.marginTop=""}),r.centeredSlides&&r.cssMode&&(wv(s,"--swiper-centered-offset-before",""),wv(s,"--swiper-centered-offset-after",""));const se=r.grid&&r.grid.rows>1&&e.grid;se&&e.grid.initSlides(C);let K;const J=r.slidesPerView==="auto"&&r.breakpoints&&Object.keys(r.breakpoints).filter(W=>typeof r.breakpoints[W].slidesPerView<"u").length>0;for(let W=0;W<C;W+=1){K=0;let te;if(x[W]&&(te=x[W]),se&&e.grid.updateSlide(W,te,C,t),!(x[W]&&Sc(te,"display")==="none")){if(r.slidesPerView==="auto"){J&&(x[W].style[t("width")]="");const j=getComputedStyle(te),re=te.style.transform,Te=te.style.webkitTransform;if(re&&(te.style.transform="none"),Te&&(te.style.webkitTransform="none"),r.roundLengths)K=e.isHorizontal()?AC(te,"width",!0):AC(te,"height",!0);else{const ye=i(j,"width"),Ve=i(j,"padding-left"),Ue=i(j,"padding-right"),Qe=i(j,"margin-left"),It=i(j,"margin-right"),vt=j.getPropertyValue("box-sizing");if(vt&&vt==="border-box")K=ye+Qe+It;else{const{clientWidth:it,offsetWidth:Ge}=te;K=ye+Ve+Ue+Qe+It+(Ge-it)}}re&&(te.style.transform=re),Te&&(te.style.webkitTransform=Te),r.roundLengths&&(K=Math.floor(K))}else K=(d-(r.slidesPerView-1)*q)/r.slidesPerView,r.roundLengths&&(K=Math.floor(K)),x[W]&&(x[W].style[t("width")]=`${K}px`);x[W]&&(x[W].swiperSlideSize=K),O.push(K),r.centeredSlides?(ee=ee+K/2+Q/2+q,Q===0&&W!==0&&(ee=ee-d/2-q),W===0&&(ee=ee-d/2-q),Math.abs(ee)<1/1e3&&(ee=0),r.roundLengths&&(ee=Math.floor(ee)),ve%r.slidesPerGroup===0&&I.push(ee),A.push(ee)):(r.roundLengths&&(ee=Math.floor(ee)),(ve-Math.min(e.params.slidesPerGroupSkip,ve))%e.params.slidesPerGroup===0&&I.push(ee),A.push(ee),ee=ee+K+q),e.virtualSize+=K+q,Q=K,ve+=1}}if(e.virtualSize=Math.max(e.virtualSize,d)+z,l&&m&&(r.effect==="slide"||r.effect==="coverflow")&&(s.style.width=`${e.virtualSize+q}px`),r.setWrapperSize&&(s.style[t("width")]=`${e.virtualSize+q}px`),se&&e.grid.updateWrapperSize(K,I,t),!r.centeredSlides){const W=[];for(let te=0;te<I.length;te+=1){let j=I[te];r.roundLengths&&(j=Math.floor(j)),I[te]<=e.virtualSize-d&&W.push(j)}I=W,Math.floor(e.virtualSize-d)-Math.floor(I[I.length-1])>1&&I.push(e.virtualSize-d)}if(g&&r.loop){const W=O[0]+q;if(r.slidesPerGroup>1){const te=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/r.slidesPerGroup),j=W*r.slidesPerGroup;for(let re=0;re<te;re+=1)I.push(I[I.length-1]+j)}for(let te=0;te<e.virtual.slidesBefore+e.virtual.slidesAfter;te+=1)r.slidesPerGroup===1&&I.push(I[I.length-1]+W),A.push(A[A.length-1]+W),e.virtualSize+=W}if(I.length===0&&(I=[0]),q!==0){const W=e.isHorizontal()&&l?"marginLeft":t("marginRight");x.filter((te,j)=>!r.cssMode||r.loop?!0:j!==x.length-1).forEach(te=>{te.style[W]=`${q}px`})}if(r.centeredSlides&&r.centeredSlidesBounds){let W=0;O.forEach(j=>{W+=j+(q||0)}),W-=q;const te=W-d;I=I.map(j=>j<=0?-F:j>te?te+z:j)}if(r.centerInsufficientSlides){let W=0;if(O.forEach(te=>{W+=te+(q||0)}),W-=q,W<d){const te=(d-W)/2;I.forEach((j,re)=>{I[re]=j-te}),A.forEach((j,re)=>{A[re]=j+te})}}if(Object.assign(e,{slides:x,snapGrid:I,slidesGrid:A,slidesSizesGrid:O}),r.centeredSlides&&r.cssMode&&!r.centeredSlidesBounds){wv(s,"--swiper-centered-offset-before",`${-I[0]}px`),wv(s,"--swiper-centered-offset-after",`${e.size/2-O[O.length-1]/2}px`);const W=-e.snapGrid[0],te=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(j=>j+W),e.slidesGrid=e.slidesGrid.map(j=>j+te)}if(C!==y&&e.emit("slidesLengthChange"),I.length!==U&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),A.length!==H&&e.emit("slidesGridLengthChange"),r.watchSlidesProgress&&e.updateSlidesOffset(),!g&&!r.cssMode&&(r.effect==="slide"||r.effect==="fade")){const W=`${r.containerModifierClass}backface-hidden`,te=e.el.classList.contains(W);C<=r.maxBackfaceHiddenSlides?te||e.el.classList.add(W):te&&e.el.classList.remove(W)}}function Wte(e){const t=this,i=[],r=t.virtual&&t.params.virtual.enabled;let s=0,c;typeof e=="number"?t.setTransition(e):e===!0&&t.setTransition(t.params.speed);const d=l=>r?t.slides[t.getSlideIndexByData(l)]:t.slides[l];if(t.params.slidesPerView!=="auto"&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach(l=>{i.push(l)});else for(c=0;c<Math.ceil(t.params.slidesPerView);c+=1){const l=t.activeIndex+c;if(l>t.slides.length&&!r)break;i.push(d(l))}else i.push(d(t.activeIndex));for(c=0;c<i.length;c+=1)if(typeof i[c]<"u"){const l=i[c].offsetHeight;s=l>s?l:s}(s||s===0)&&(t.wrapperEl.style.height=`${s}px`)}function qte(){const e=this,t=e.slides,i=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let r=0;r<t.length;r+=1)t[r].swiperSlideOffset=(e.isHorizontal()?t[r].offsetLeft:t[r].offsetTop)-i-e.cssOverflowAdjustment()}function Zte(e=this&&this.translate||0){const t=this,i=t.params,{slides:r,rtlTranslate:s,snapGrid:c}=t;if(r.length===0)return;typeof r[0].swiperSlideOffset>"u"&&t.updateSlidesOffset();let d=-e;s&&(d=e),r.forEach(m=>{m.classList.remove(i.slideVisibleClass)}),t.visibleSlidesIndexes=[],t.visibleSlides=[];let l=i.spaceBetween;typeof l=="string"&&l.indexOf("%")>=0?l=parseFloat(l.replace("%",""))/100*t.size:typeof l=="string"&&(l=parseFloat(l));for(let m=0;m<r.length;m+=1){const g=r[m];let y=g.swiperSlideOffset;i.cssMode&&i.centeredSlides&&(y-=r[0].swiperSlideOffset);const x=(d+(i.centeredSlides?t.minTranslate():0)-y)/(g.swiperSlideSize+l),C=(d-c[0]+(i.centeredSlides?t.minTranslate():0)-y)/(g.swiperSlideSize+l),I=-(d-y),A=I+t.slidesSizesGrid[m];(I>=0&&I<t.size-1||A>1&&A<=t.size||I<=0&&A>=t.size)&&(t.visibleSlides.push(g),t.visibleSlidesIndexes.push(m),r[m].classList.add(i.slideVisibleClass)),g.progress=s?-x:x,g.originalProgress=s?-C:C}}function Kte(e){const t=this;if(typeof e>"u"){const y=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*y||0}const i=t.params,r=t.maxTranslate()-t.minTranslate();let{progress:s,isBeginning:c,isEnd:d,progressLoop:l}=t;const m=c,g=d;if(r===0)s=0,c=!0,d=!0;else{s=(e-t.minTranslate())/r;const y=Math.abs(e-t.minTranslate())<1,x=Math.abs(e-t.maxTranslate())<1;c=y||s<=0,d=x||s>=1,y&&(s=0),x&&(s=1)}if(i.loop){const y=t.getSlideIndexByData(0),x=t.getSlideIndexByData(t.slides.length-1),C=t.slidesGrid[y],I=t.slidesGrid[x],A=t.slidesGrid[t.slidesGrid.length-1],O=Math.abs(e);O>=C?l=(O-C)/A:l=(O+A-I)/A,l>1&&(l-=1)}Object.assign(t,{progress:s,progressLoop:l,isBeginning:c,isEnd:d}),(i.watchSlidesProgress||i.centeredSlides&&i.autoHeight)&&t.updateSlidesProgress(e),c&&!m&&t.emit("reachBeginning toEdge"),d&&!g&&t.emit("reachEnd toEdge"),(m&&!c||g&&!d)&&t.emit("fromEdge"),t.emit("progress",s)}function Xte(){const e=this,{slides:t,params:i,slidesEl:r,activeIndex:s}=e,c=e.virtual&&i.virtual.enabled,d=m=>lo(r,`.${i.slideClass}${m}, swiper-slide${m}`)[0];t.forEach(m=>{m.classList.remove(i.slideActiveClass,i.slideNextClass,i.slidePrevClass)});let l;if(c)if(i.loop){let m=s-e.virtual.slidesBefore;m<0&&(m=e.virtual.slides.length+m),m>=e.virtual.slides.length&&(m-=e.virtual.slides.length),l=d(`[data-swiper-slide-index="${m}"]`)}else l=d(`[data-swiper-slide-index="${s}"]`);else l=t[s];if(l){l.classList.add(i.slideActiveClass);let m=Rte(l,`.${i.slideClass}, swiper-slide`)[0];i.loop&&!m&&(m=t[0]),m&&m.classList.add(i.slideNextClass);let g=Ote(l,`.${i.slideClass}, swiper-slide`)[0];i.loop&&!g===0&&(g=t[t.length-1]),g&&g.classList.add(i.slidePrevClass)}e.emitSlidesClasses()}const jv=(e,t)=>{if(!e||e.destroyed||!e.params)return;const i=()=>e.isElement?"swiper-slide":`.${e.params.slideClass}`,r=t.closest(i());if(r){const s=r.querySelector(`.${e.params.lazyPreloaderClass}`);s&&s.remove()}},Tb=(e,t)=>{if(!e.slides[t])return;const i=e.slides[t].querySelector('[loading="lazy"]');i&&i.removeAttribute("loading")},Zx=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const i=e.slides.length;if(!i||!t||t<0)return;t=Math.min(t,i);const r=e.params.slidesPerView==="auto"?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),s=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){const d=s,l=[d-t];l.push(...Array.from({length:t}).map((m,g)=>d+r+g)),e.slides.forEach((m,g)=>{l.includes(m.column)&&Tb(e,g)});return}const c=s+r-1;if(e.params.rewind||e.params.loop)for(let d=s-t;d<=c+t;d+=1){const l=(d%i+i)%i;(l<s||l>c)&&Tb(e,l)}else for(let d=Math.max(s-t,0);d<=Math.min(c+t,i-1);d+=1)d!==s&&(d>c||d<s)&&Tb(e,d)};function Yte(e){const{slidesGrid:t,params:i}=e,r=e.rtlTranslate?e.translate:-e.translate;let s;for(let c=0;c<t.length;c+=1)typeof t[c+1]<"u"?r>=t[c]&&r<t[c+1]-(t[c+1]-t[c])/2?s=c:r>=t[c]&&r<t[c+1]&&(s=c+1):r>=t[c]&&(s=c);return i.normalizeSlideIndex&&(s<0||typeof s>"u")&&(s=0),s}function Jte(e){const t=this,i=t.rtlTranslate?t.translate:-t.translate,{snapGrid:r,params:s,activeIndex:c,realIndex:d,snapIndex:l}=t;let m=e,g;const y=C=>{let I=C-t.virtual.slidesBefore;return I<0&&(I=t.virtual.slides.length+I),I>=t.virtual.slides.length&&(I-=t.virtual.slides.length),I};if(typeof m>"u"&&(m=Yte(t)),r.indexOf(i)>=0)g=r.indexOf(i);else{const C=Math.min(s.slidesPerGroupSkip,m);g=C+Math.floor((m-C)/s.slidesPerGroup)}if(g>=r.length&&(g=r.length-1),m===c){g!==l&&(t.snapIndex=g,t.emit("snapIndexChange")),t.params.loop&&t.virtual&&t.params.virtual.enabled&&(t.realIndex=y(m));return}let x;t.virtual&&s.virtual.enabled&&s.loop?x=y(m):t.slides[m]?x=parseInt(t.slides[m].getAttribute("data-swiper-slide-index")||m,10):x=m,Object.assign(t,{previousSnapIndex:l,snapIndex:g,previousRealIndex:d,realIndex:x,previousIndex:c,activeIndex:m}),t.initialized&&Zx(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),d!==x&&t.emit("realIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&t.emit("slideChange")}function Qte(e){const t=this,i=t.params,r=e.closest(`.${i.slideClass}, swiper-slide`);let s=!1,c;if(r){for(let d=0;d<t.slides.length;d+=1)if(t.slides[d]===r){s=!0,c=d;break}}if(r&&s)t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=c;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}i.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}const ene={updateSize:Hte,updateSlides:Gte,updateAutoHeight:Wte,updateSlidesOffset:qte,updateSlidesProgress:Zte,updateProgress:Kte,updateSlidesClasses:Xte,updateActiveIndex:Jte,updateClickedSlide:Qte};function tne(e=this.isHorizontal()?"x":"y"){const t=this,{params:i,rtlTranslate:r,translate:s,wrapperEl:c}=t;if(i.virtualTranslate)return r?-s:s;if(i.cssMode)return s;let d=Dte(c,e);return d+=t.cssOverflowAdjustment(),r&&(d=-d),d||0}function nne(e,t){const i=this,{rtlTranslate:r,params:s,wrapperEl:c,progress:d}=i;let l=0,m=0;const g=0;i.isHorizontal()?l=r?-e:e:m=e,s.roundLengths&&(l=Math.floor(l),m=Math.floor(m)),i.previousTranslate=i.translate,i.translate=i.isHorizontal()?l:m,s.cssMode?c[i.isHorizontal()?"scrollLeft":"scrollTop"]=i.isHorizontal()?-l:-m:s.virtualTranslate||(i.isHorizontal()?l-=i.cssOverflowAdjustment():m-=i.cssOverflowAdjustment(),c.style.transform=`translate3d(${l}px, ${m}px, ${g}px)`);let y;const x=i.maxTranslate()-i.minTranslate();x===0?y=0:y=(e-i.minTranslate())/x,y!==d&&i.updateProgress(e),i.emit("setTranslate",i.translate,t)}function ine(){return-this.snapGrid[0]}function rne(){return-this.snapGrid[this.snapGrid.length-1]}function sne(e=0,t=this.params.speed,i=!0,r=!0,s){const c=this,{params:d,wrapperEl:l}=c;if(c.animating&&d.preventInteractionOnTransition)return!1;const m=c.minTranslate(),g=c.maxTranslate();let y;if(r&&e>m?y=m:r&&e<g?y=g:y=e,c.updateProgress(y),d.cssMode){const x=c.isHorizontal();if(t===0)l[x?"scrollLeft":"scrollTop"]=-y;else{if(!c.support.smoothScroll)return xD({swiper:c,targetPosition:-y,side:x?"left":"top"}),!0;l.scrollTo({[x?"left":"top"]:-y,behavior:"smooth"})}return!0}return t===0?(c.setTransition(0),c.setTranslate(y),i&&(c.emit("beforeTransitionStart",t,s),c.emit("transitionEnd"))):(c.setTransition(t),c.setTranslate(y),i&&(c.emit("beforeTransitionStart",t,s),c.emit("transitionStart")),c.animating||(c.animating=!0,c.onTranslateToWrapperTransitionEnd||(c.onTranslateToWrapperTransitionEnd=function(C){!c||c.destroyed||C.target===this&&(c.wrapperEl.removeEventListener("transitionend",c.onTranslateToWrapperTransitionEnd),c.onTranslateToWrapperTransitionEnd=null,delete c.onTranslateToWrapperTransitionEnd,i&&c.emit("transitionEnd"))}),c.wrapperEl.addEventListener("transitionend",c.onTranslateToWrapperTransitionEnd))),!0}const ane={getTranslate:tne,setTranslate:nne,minTranslate:ine,maxTranslate:rne,translateTo:sne};function one(e,t){const i=this;i.params.cssMode||(i.wrapperEl.style.transitionDuration=`${e}ms`),i.emit("setTransition",e,t)}function TD({swiper:e,runCallbacks:t,direction:i,step:r}){const{activeIndex:s,previousIndex:c}=e;let d=i;if(d||(s>c?d="next":s<c?d="prev":d="reset"),e.emit(`transition${r}`),t&&s!==c){if(d==="reset"){e.emit(`slideResetTransition${r}`);return}e.emit(`slideChangeTransition${r}`),d==="next"?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`)}}function lne(e=!0,t){const i=this,{params:r}=i;r.cssMode||(r.autoHeight&&i.updateAutoHeight(),TD({swiper:i,runCallbacks:e,direction:t,step:"Start"}))}function cne(e=!0,t){const i=this,{params:r}=i;i.animating=!1,!r.cssMode&&(i.setTransition(0),TD({swiper:i,runCallbacks:e,direction:t,step:"End"}))}const une={setTransition:one,transitionStart:lne,transitionEnd:cne};function dne(e=0,t=this.params.speed,i=!0,r,s){typeof e=="string"&&(e=parseInt(e,10));const c=this;let d=e;d<0&&(d=0);const{params:l,snapGrid:m,slidesGrid:g,previousIndex:y,activeIndex:x,rtlTranslate:C,wrapperEl:I,enabled:A}=c;if(c.animating&&l.preventInteractionOnTransition||!A&&!r&&!s)return!1;const O=Math.min(c.params.slidesPerGroupSkip,d);let F=O+Math.floor((d-O)/c.params.slidesPerGroup);F>=m.length&&(F=m.length-1);const z=-m[F];if(l.normalizeSlideIndex)for(let H=0;H<g.length;H+=1){const q=-Math.floor(z*100),ee=Math.floor(g[H]*100),Q=Math.floor(g[H+1]*100);typeof g[H+1]<"u"?q>=ee&&q<Q-(Q-ee)/2?d=H:q>=ee&&q<Q&&(d=H+1):q>=ee&&(d=H)}if(c.initialized&&d!==x&&(!c.allowSlideNext&&(C?z>c.translate&&z>c.minTranslate():z<c.translate&&z<c.minTranslate())||!c.allowSlidePrev&&z>c.translate&&z>c.maxTranslate()&&(x||0)!==d))return!1;d!==(y||0)&&i&&c.emit("beforeSlideChangeStart"),c.updateProgress(z);let U;if(d>x?U="next":d<x?U="prev":U="reset",C&&-z===c.translate||!C&&z===c.translate)return c.updateActiveIndex(d),l.autoHeight&&c.updateAutoHeight(),c.updateSlidesClasses(),l.effect!=="slide"&&c.setTranslate(z),U!=="reset"&&(c.transitionStart(i,U),c.transitionEnd(i,U)),!1;if(l.cssMode){const H=c.isHorizontal(),q=C?z:-z;if(t===0){const ee=c.virtual&&c.params.virtual.enabled;ee&&(c.wrapperEl.style.scrollSnapType="none",c._immediateVirtual=!0),ee&&!c._cssModeVirtualInitialSet&&c.params.initialSlide>0?(c._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{I[H?"scrollLeft":"scrollTop"]=q})):I[H?"scrollLeft":"scrollTop"]=q,ee&&requestAnimationFrame(()=>{c.wrapperEl.style.scrollSnapType="",c._immediateVirtual=!1})}else{if(!c.support.smoothScroll)return xD({swiper:c,targetPosition:q,side:H?"left":"top"}),!0;I.scrollTo({[H?"left":"top"]:q,behavior:"smooth"})}return!0}return c.setTransition(t),c.setTranslate(z),c.updateActiveIndex(d),c.updateSlidesClasses(),c.emit("beforeTransitionStart",t,r),c.transitionStart(i,U),t===0?c.transitionEnd(i,U):c.animating||(c.animating=!0,c.onSlideToWrapperTransitionEnd||(c.onSlideToWrapperTransitionEnd=function(q){!c||c.destroyed||q.target===this&&(c.wrapperEl.removeEventListener("transitionend",c.onSlideToWrapperTransitionEnd),c.onSlideToWrapperTransitionEnd=null,delete c.onSlideToWrapperTransitionEnd,c.transitionEnd(i,U))}),c.wrapperEl.addEventListener("transitionend",c.onSlideToWrapperTransitionEnd)),!0}function hne(e=0,t=this.params.speed,i=!0,r){typeof e=="string"&&(e=parseInt(e,10));const s=this;let c=e;return s.params.loop&&(s.virtual&&s.params.virtual.enabled?c=c+s.virtual.slidesBefore:c=s.getSlideIndexByData(c)),s.slideTo(c,t,i,r)}function fne(e=this.params.speed,t=!0,i){const r=this,{enabled:s,params:c,animating:d}=r;if(!s)return r;let l=c.slidesPerGroup;c.slidesPerView==="auto"&&c.slidesPerGroup===1&&c.slidesPerGroupAuto&&(l=Math.max(r.slidesPerViewDynamic("current",!0),1));const m=r.activeIndex<c.slidesPerGroupSkip?1:l,g=r.virtual&&c.virtual.enabled;if(c.loop){if(d&&!g&&c.loopPreventsSliding)return!1;r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft}return c.rewind&&r.isEnd?r.slideTo(0,e,t,i):r.slideTo(r.activeIndex+m,e,t,i)}function pne(e=this.params.speed,t=!0,i){const r=this,{params:s,snapGrid:c,slidesGrid:d,rtlTranslate:l,enabled:m,animating:g}=r;if(!m)return r;const y=r.virtual&&s.virtual.enabled;if(s.loop){if(g&&!y&&s.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}const x=l?r.translate:-r.translate;function C(z){return z<0?-Math.floor(Math.abs(z)):Math.floor(z)}const I=C(x),A=c.map(z=>C(z));let O=c[A.indexOf(I)-1];if(typeof O>"u"&&s.cssMode){let z;c.forEach((U,H)=>{I>=U&&(z=H)}),typeof z<"u"&&(O=c[z>0?z-1:z])}let F=0;if(typeof O<"u"&&(F=d.indexOf(O),F<0&&(F=r.activeIndex-1),s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(F=F-r.slidesPerViewDynamic("previous",!0)+1,F=Math.max(F,0))),s.rewind&&r.isBeginning){const z=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(z,e,t,i)}return r.slideTo(F,e,t,i)}function mne(e=this.params.speed,t=!0,i){const r=this;return r.slideTo(r.activeIndex,e,t,i)}function gne(e=this.params.speed,t=!0,i,r=.5){const s=this;let c=s.activeIndex;const d=Math.min(s.params.slidesPerGroupSkip,c),l=d+Math.floor((c-d)/s.params.slidesPerGroup),m=s.rtlTranslate?s.translate:-s.translate;if(m>=s.snapGrid[l]){const g=s.snapGrid[l],y=s.snapGrid[l+1];m-g>(y-g)*r&&(c+=s.params.slidesPerGroup)}else{const g=s.snapGrid[l-1],y=s.snapGrid[l];m-g<=(y-g)*r&&(c-=s.params.slidesPerGroup)}return c=Math.max(c,0),c=Math.min(c,s.slidesGrid.length-1),s.slideTo(c,e,t,i)}function vne(){const e=this,{params:t,slidesEl:i}=e,r=t.slidesPerView==="auto"?e.slidesPerViewDynamic():t.slidesPerView;let s=e.clickedIndex,c;const d=e.isElement?"swiper-slide":`.${t.slideClass}`;if(t.loop){if(e.animating)return;c=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?s<e.loopedSlides-r/2||s>e.slides.length-e.loopedSlides+r/2?(e.loopFix(),s=e.getSlideIndex(lo(i,`${d}[data-swiper-slide-index="${c}"]`)[0]),T_(()=>{e.slideTo(s)})):e.slideTo(s):s>e.slides.length-r?(e.loopFix(),s=e.getSlideIndex(lo(i,`${d}[data-swiper-slide-index="${c}"]`)[0]),T_(()=>{e.slideTo(s)})):e.slideTo(s)}else e.slideTo(s)}const _ne={slideTo:dne,slideToLoop:hne,slideNext:fne,slidePrev:pne,slideReset:mne,slideToClosest:gne,slideToClickedSlide:vne};function yne(e){const t=this,{params:i,slidesEl:r}=t;if(!i.loop||t.virtual&&t.params.virtual.enabled)return;lo(r,`.${i.slideClass}, swiper-slide`).forEach((c,d)=>{c.setAttribute("data-swiper-slide-index",d)}),t.loopFix({slideRealIndex:e,direction:i.centeredSlides?void 0:"next"})}function bne({slideRealIndex:e,slideTo:t=!0,direction:i,setTranslate:r,activeSlideIndex:s,byController:c,byMousewheel:d}={}){const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:m,allowSlidePrev:g,allowSlideNext:y,slidesEl:x,params:C}=l;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&C.virtual.enabled){t&&(!C.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):C.centeredSlides&&l.snapIndex<C.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=g,l.allowSlideNext=y,l.emit("loopFix");return}const I=C.slidesPerView==="auto"?l.slidesPerViewDynamic():Math.ceil(parseFloat(C.slidesPerView,10));let A=C.loopedSlides||I;A%C.slidesPerGroup!==0&&(A+=C.slidesPerGroup-A%C.slidesPerGroup),l.loopedSlides=A;const O=[],F=[];let z=l.activeIndex;typeof s>"u"?s=l.getSlideIndex(l.slides.filter(Q=>Q.classList.contains(C.slideActiveClass))[0]):z=s;const U=i==="next"||!i,H=i==="prev"||!i;let q=0,ee=0;if(s<A){q=Math.max(A-s,C.slidesPerGroup);for(let Q=0;Q<A-s;Q+=1){const ve=Q-Math.floor(Q/m.length)*m.length;O.push(m.length-ve-1)}}else if(s>l.slides.length-A*2){ee=Math.max(s-(l.slides.length-A*2),C.slidesPerGroup);for(let Q=0;Q<ee;Q+=1){const ve=Q-Math.floor(Q/m.length)*m.length;F.push(ve)}}if(H&&O.forEach(Q=>{l.slides[Q].swiperLoopMoveDOM=!0,x.prepend(l.slides[Q]),l.slides[Q].swiperLoopMoveDOM=!1}),U&&F.forEach(Q=>{l.slides[Q].swiperLoopMoveDOM=!0,x.append(l.slides[Q]),l.slides[Q].swiperLoopMoveDOM=!1}),l.recalcSlides(),C.slidesPerView==="auto"&&l.updateSlides(),C.watchSlidesProgress&&l.updateSlidesOffset(),t){if(O.length>0&&H)if(typeof e>"u"){const Q=l.slidesGrid[z],se=l.slidesGrid[z+q]-Q;d?l.setTranslate(l.translate-se):(l.slideTo(z+q,0,!1,!0),r&&(l.touches[l.isHorizontal()?"startX":"startY"]+=se))}else r&&l.slideToLoop(e,0,!1,!0);else if(F.length>0&&U)if(typeof e>"u"){const Q=l.slidesGrid[z],se=l.slidesGrid[z-ee]-Q;d?l.setTranslate(l.translate-se):(l.slideTo(z-ee,0,!1,!0),r&&(l.touches[l.isHorizontal()?"startX":"startY"]+=se))}else l.slideToLoop(e,0,!1,!0)}if(l.allowSlidePrev=g,l.allowSlideNext=y,l.controller&&l.controller.control&&!c){const Q={slideRealIndex:e,slideTo:!1,direction:i,setTranslate:r,activeSlideIndex:s,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(ve=>{!ve.destroyed&&ve.params.loop&&ve.loopFix(Q)}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix(Q)}l.emit("loopFix")}function xne(){const e=this,{params:t,slidesEl:i}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const r=[];e.slides.forEach(s=>{const c=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;r[c]=s}),e.slides.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),r.forEach(s=>{i.append(s)}),e.recalcSlides(),e.slideTo(e.realIndex,0)}const wne={loopCreate:yne,loopFix:bne,loopDestroy:xne};function Sne(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const i=t.params.touchEventsTarget==="container"?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),i.style.cursor="move",i.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1})}function Tne(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e[e.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1}))}const Ene={setGrabCursor:Sne,unsetGrabCursor:Tne};function Cne(e,t=this){function i(r){if(!r||r===xo()||r===zs())return null;r.assignedSlot&&(r=r.assignedSlot);const s=r.closest(e);return!s&&!r.getRootNode?null:s||i(r.getRootNode().host)}return i(t)}function Ine(e){const t=this,i=xo(),r=zs(),s=t.touchEventsData;s.evCache.push(e);const{params:c,touches:d,enabled:l}=t;if(!l||!c.simulateTouch&&e.pointerType==="mouse"||t.animating&&c.preventInteractionOnTransition)return;!t.animating&&c.cssMode&&c.loop&&t.loopFix();let m=e;m.originalEvent&&(m=m.originalEvent);let g=m.target;if(c.touchEventsTarget==="wrapper"&&!t.wrapperEl.contains(g)||"which"in m&&m.which===3||"button"in m&&m.button>0||s.isTouched&&s.isMoved)return;const y=!!c.noSwipingClass&&c.noSwipingClass!=="",x=e.composedPath?e.composedPath():e.path;y&&m.target&&m.target.shadowRoot&&x&&(g=x[0]);const C=c.noSwipingSelector?c.noSwipingSelector:`.${c.noSwipingClass}`,I=!!(m.target&&m.target.shadowRoot);if(c.noSwiping&&(I?Cne(C,g):g.closest(C))){t.allowClick=!0;return}if(c.swipeHandler&&!g.closest(c.swipeHandler))return;d.currentX=m.pageX,d.currentY=m.pageY;const A=d.currentX,O=d.currentY,F=c.edgeSwipeDetection||c.iOSEdgeSwipeDetection,z=c.edgeSwipeThreshold||c.iOSEdgeSwipeThreshold;if(F&&(A<=z||A>=r.innerWidth-z))if(F==="prevent")e.preventDefault();else return;Object.assign(s,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),d.startX=A,d.startY=O,s.touchStartTime=E_(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,c.threshold>0&&(s.allowThresholdMove=!1);let U=!0;g.matches(s.focusableElements)&&(U=!1,g.nodeName==="SELECT"&&(s.isTouched=!1)),i.activeElement&&i.activeElement.matches(s.focusableElements)&&i.activeElement!==g&&i.activeElement.blur();const H=U&&t.allowTouchMove&&c.touchStartPreventDefault;(c.touchStartForcePreventDefault||H)&&!g.isContentEditable&&m.preventDefault(),c.freeMode&&c.freeMode.enabled&&t.freeMode&&t.animating&&!c.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",m)}function Ane(e){const t=xo(),i=this,r=i.touchEventsData,{params:s,touches:c,rtlTranslate:d,enabled:l}=i;if(!l||!s.simulateTouch&&e.pointerType==="mouse")return;let m=e;if(m.originalEvent&&(m=m.originalEvent),!r.isTouched){r.startMoving&&r.isScrolling&&i.emit("touchMoveOpposite",m);return}const g=r.evCache.findIndex(Q=>Q.pointerId===m.pointerId);g>=0&&(r.evCache[g]=m);const y=r.evCache.length>1?r.evCache[0]:m,x=y.pageX,C=y.pageY;if(m.preventedByNestedSwiper){c.startX=x,c.startY=C;return}if(!i.allowTouchMove){m.target.matches(r.focusableElements)||(i.allowClick=!1),r.isTouched&&(Object.assign(c,{startX:x,startY:C,prevX:i.touches.currentX,prevY:i.touches.currentY,currentX:x,currentY:C}),r.touchStartTime=E_());return}if(s.touchReleaseOnEdges&&!s.loop){if(i.isVertical()){if(C<c.startY&&i.translate<=i.maxTranslate()||C>c.startY&&i.translate>=i.minTranslate()){r.isTouched=!1,r.isMoved=!1;return}}else if(x<c.startX&&i.translate<=i.maxTranslate()||x>c.startX&&i.translate>=i.minTranslate())return}if(t.activeElement&&m.target===t.activeElement&&m.target.matches(r.focusableElements)){r.isMoved=!0,i.allowClick=!1;return}if(r.allowTouchCallbacks&&i.emit("touchMove",m),m.targetTouches&&m.targetTouches.length>1)return;c.currentX=x,c.currentY=C;const I=c.currentX-c.startX,A=c.currentY-c.startY;if(i.params.threshold&&Math.sqrt(I**2+A**2)<i.params.threshold)return;if(typeof r.isScrolling>"u"){let Q;i.isHorizontal()&&c.currentY===c.startY||i.isVertical()&&c.currentX===c.startX?r.isScrolling=!1:I*I+A*A>=25&&(Q=Math.atan2(Math.abs(A),Math.abs(I))*180/Math.PI,r.isScrolling=i.isHorizontal()?Q>s.touchAngle:90-Q>s.touchAngle)}if(r.isScrolling&&i.emit("touchMoveOpposite",m),typeof r.startMoving>"u"&&(c.currentX!==c.startX||c.currentY!==c.startY)&&(r.startMoving=!0),r.isScrolling||i.zoom&&i.params.zoom&&i.params.zoom.enabled&&r.evCache.length>1){r.isTouched=!1;return}if(!r.startMoving)return;i.allowClick=!1,!s.cssMode&&m.cancelable&&m.preventDefault(),s.touchMoveStopPropagation&&!s.nested&&m.stopPropagation();let O=i.isHorizontal()?I:A,F=i.isHorizontal()?c.currentX-c.previousX:c.currentY-c.previousY;s.oneWayMovement&&(O=Math.abs(O)*(d?1:-1),F=Math.abs(F)*(d?1:-1)),c.diff=O,O*=s.touchRatio,d&&(O=-O,F=-F);const z=i.touchesDirection;i.swipeDirection=O>0?"prev":"next",i.touchesDirection=F>0?"prev":"next";const U=i.params.loop&&!s.cssMode;if(!r.isMoved){if(U&&i.loopFix({direction:i.swipeDirection}),r.startTranslate=i.getTranslate(),i.setTransition(0),i.animating){const Q=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});i.wrapperEl.dispatchEvent(Q)}r.allowMomentumBounce=!1,s.grabCursor&&(i.allowSlideNext===!0||i.allowSlidePrev===!0)&&i.setGrabCursor(!0),i.emit("sliderFirstMove",m)}let H;r.isMoved&&z!==i.touchesDirection&&U&&Math.abs(O)>=1&&(i.loopFix({direction:i.swipeDirection,setTranslate:!0}),H=!0),i.emit("sliderMove",m),r.isMoved=!0,r.currentTranslate=O+r.startTranslate;let q=!0,ee=s.resistanceRatio;if(s.touchReleaseOnEdges&&(ee=0),O>0?(U&&!H&&r.currentTranslate>(s.centeredSlides?i.minTranslate()-i.size/2:i.minTranslate())&&i.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>i.minTranslate()&&(q=!1,s.resistance&&(r.currentTranslate=i.minTranslate()-1+(-i.minTranslate()+r.startTranslate+O)**ee))):O<0&&(U&&!H&&r.currentTranslate<(s.centeredSlides?i.maxTranslate()+i.size/2:i.maxTranslate())&&i.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:i.slides.length-(s.slidesPerView==="auto"?i.slidesPerViewDynamic():Math.ceil(parseFloat(s.slidesPerView,10)))}),r.currentTranslate<i.maxTranslate()&&(q=!1,s.resistance&&(r.currentTranslate=i.maxTranslate()+1-(i.maxTranslate()-r.startTranslate-O)**ee))),q&&(m.preventedByNestedSwiper=!0),!i.allowSlideNext&&i.swipeDirection==="next"&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!i.allowSlidePrev&&i.swipeDirection==="prev"&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),!i.allowSlidePrev&&!i.allowSlideNext&&(r.currentTranslate=r.startTranslate),s.threshold>0)if(Math.abs(O)>s.threshold||r.allowThresholdMove){if(!r.allowThresholdMove){r.allowThresholdMove=!0,c.startX=c.currentX,c.startY=c.currentY,r.currentTranslate=r.startTranslate,c.diff=i.isHorizontal()?c.currentX-c.startX:c.currentY-c.startY;return}}else{r.currentTranslate=r.startTranslate;return}!s.followFinger||s.cssMode||((s.freeMode&&s.freeMode.enabled&&i.freeMode||s.watchSlidesProgress)&&(i.updateActiveIndex(),i.updateSlidesClasses()),s.freeMode&&s.freeMode.enabled&&i.freeMode&&i.freeMode.onTouchMove(),i.updateProgress(r.currentTranslate),i.setTranslate(r.currentTranslate))}function Mne(e){const t=this,i=t.touchEventsData,r=i.evCache.findIndex(H=>H.pointerId===e.pointerId);if(r>=0&&i.evCache.splice(r,1),["pointercancel","pointerout","pointerleave"].includes(e.type)&&!(e.type==="pointercancel"&&(t.browser.isSafari||t.browser.isWebView)))return;const{params:s,touches:c,rtlTranslate:d,slidesGrid:l,enabled:m}=t;if(!m||!s.simulateTouch&&e.pointerType==="mouse")return;let g=e;if(g.originalEvent&&(g=g.originalEvent),i.allowTouchCallbacks&&t.emit("touchEnd",g),i.allowTouchCallbacks=!1,!i.isTouched){i.isMoved&&s.grabCursor&&t.setGrabCursor(!1),i.isMoved=!1,i.startMoving=!1;return}s.grabCursor&&i.isMoved&&i.isTouched&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!1);const y=E_(),x=y-i.touchStartTime;if(t.allowClick){const H=g.path||g.composedPath&&g.composedPath();t.updateClickedSlide(H&&H[0]||g.target),t.emit("tap click",g),x<300&&y-i.lastClickTime<300&&t.emit("doubleTap doubleClick",g)}if(i.lastClickTime=E_(),T_(()=>{t.destroyed||(t.allowClick=!0)}),!i.isTouched||!i.isMoved||!t.swipeDirection||c.diff===0||i.currentTranslate===i.startTranslate){i.isTouched=!1,i.isMoved=!1,i.startMoving=!1;return}i.isTouched=!1,i.isMoved=!1,i.startMoving=!1;let C;if(s.followFinger?C=d?t.translate:-t.translate:C=-i.currentTranslate,s.cssMode)return;if(s.freeMode&&s.freeMode.enabled){t.freeMode.onTouchEnd({currentPos:C});return}let I=0,A=t.slidesSizesGrid[0];for(let H=0;H<l.length;H+=H<s.slidesPerGroupSkip?1:s.slidesPerGroup){const q=H<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;typeof l[H+q]<"u"?C>=l[H]&&C<l[H+q]&&(I=H,A=l[H+q]-l[H]):C>=l[H]&&(I=H,A=l[l.length-1]-l[l.length-2])}let O=null,F=null;s.rewind&&(t.isBeginning?F=s.virtual&&s.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(O=0));const z=(C-l[I])/A,U=I<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;if(x>s.longSwipesMs){if(!s.longSwipes){t.slideTo(t.activeIndex);return}t.swipeDirection==="next"&&(z>=s.longSwipesRatio?t.slideTo(s.rewind&&t.isEnd?O:I+U):t.slideTo(I)),t.swipeDirection==="prev"&&(z>1-s.longSwipesRatio?t.slideTo(I+U):F!==null&&z<0&&Math.abs(z)>s.longSwipesRatio?t.slideTo(F):t.slideTo(I))}else{if(!s.shortSwipes){t.slideTo(t.activeIndex);return}t.navigation&&(g.target===t.navigation.nextEl||g.target===t.navigation.prevEl)?g.target===t.navigation.nextEl?t.slideTo(I+U):t.slideTo(I):(t.swipeDirection==="next"&&t.slideTo(O!==null?O:I+U),t.swipeDirection==="prev"&&t.slideTo(F!==null?F:I))}}function MC(){const e=this,{params:t,el:i}=e;if(i&&i.offsetWidth===0)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:s,snapGrid:c}=e,d=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const l=d&&t.loop;(t.slidesPerView==="auto"||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides&&!l?e.slideTo(e.slides.length-1,0,!1,!0):e.params.loop&&!d?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout(()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()},500)),e.allowSlidePrev=s,e.allowSlideNext=r,e.params.watchOverflow&&c!==e.snapGrid&&e.checkOverflow()}function kne(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function Pne(){const e=this,{wrapperEl:t,rtlTranslate:i,enabled:r}=e;if(!r)return;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,e.translate===0&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();let s;const c=e.maxTranslate()-e.minTranslate();c===0?s=0:s=(e.translate-e.minTranslate())/c,s!==e.progress&&e.updateProgress(i?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function Dne(e){const t=this;jv(t,e.target),!(t.params.cssMode||t.params.slidesPerView!=="auto"&&!t.params.autoHeight)&&t.update()}let kC=!1;function Lne(){}const ED=(e,t)=>{const i=xo(),{params:r,el:s,wrapperEl:c,device:d}=e,l=!!r.nested,m=t==="on"?"addEventListener":"removeEventListener",g=t;s[m]("pointerdown",e.onTouchStart,{passive:!1}),i[m]("pointermove",e.onTouchMove,{passive:!1,capture:l}),i[m]("pointerup",e.onTouchEnd,{passive:!0}),i[m]("pointercancel",e.onTouchEnd,{passive:!0}),i[m]("pointerout",e.onTouchEnd,{passive:!0}),i[m]("pointerleave",e.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&s[m]("click",e.onClick,!0),r.cssMode&&c[m]("scroll",e.onScroll),r.updateOnWindowResize?e[g](d.ios||d.android?"resize orientationchange observerUpdate":"resize observerUpdate",MC,!0):e[g]("observerUpdate",MC,!0),s[m]("load",e.onLoad,{capture:!0})};function One(){const e=this,t=xo(),{params:i}=e;e.onTouchStart=Ine.bind(e),e.onTouchMove=Ane.bind(e),e.onTouchEnd=Mne.bind(e),i.cssMode&&(e.onScroll=Pne.bind(e)),e.onClick=kne.bind(e),e.onLoad=Dne.bind(e),kC||(t.addEventListener("touchstart",Lne),kC=!0),ED(e,"on")}function Rne(){ED(this,"off")}const Fne={attachEvents:One,detachEvents:Rne},PC=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;function $ne(){const e=this,{realIndex:t,initialized:i,params:r,el:s}=e,c=r.breakpoints;if(!c||c&&Object.keys(c).length===0)return;const d=e.getBreakpoint(c,e.params.breakpointsBase,e.el);if(!d||e.currentBreakpoint===d)return;const m=(d in c?c[d]:void 0)||e.originalParams,g=PC(e,r),y=PC(e,m),x=r.enabled;g&&!y?(s.classList.remove(`${r.containerModifierClass}grid`,`${r.containerModifierClass}grid-column`),e.emitContainerClasses()):!g&&y&&(s.classList.add(`${r.containerModifierClass}grid`),(m.grid.fill&&m.grid.fill==="column"||!m.grid.fill&&r.grid.fill==="column")&&s.classList.add(`${r.containerModifierClass}grid-column`),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(O=>{if(typeof m[O]>"u")return;const F=r[O]&&r[O].enabled,z=m[O]&&m[O].enabled;F&&!z&&e[O].disable(),!F&&z&&e[O].enable()});const C=m.direction&&m.direction!==r.direction,I=r.loop&&(m.slidesPerView!==r.slidesPerView||C);C&&i&&e.changeDirection(),ua(e.params,m);const A=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),x&&!A?e.disable():!x&&A&&e.enable(),e.currentBreakpoint=d,e.emit("_beforeBreakpoint",m),I&&i&&(e.loopDestroy(),e.loopCreate(t),e.updateSlides()),e.emit("breakpoint",m)}function zne(e,t="window",i){if(!e||t==="container"&&!i)return;let r=!1;const s=zs(),c=t==="window"?s.innerHeight:i.clientHeight,d=Object.keys(e).map(l=>{if(typeof l=="string"&&l.indexOf("@")===0){const m=parseFloat(l.substr(1));return{value:c*m,point:l}}return{value:l,point:l}});d.sort((l,m)=>parseInt(l.value,10)-parseInt(m.value,10));for(let l=0;l<d.length;l+=1){const{point:m,value:g}=d[l];t==="window"?s.matchMedia(`(min-width: ${g}px)`).matches&&(r=m):g<=i.clientWidth&&(r=m)}return r||"max"}const Nne={setBreakpoint:$ne,getBreakpoint:zne};function Bne(e,t){const i=[];return e.forEach(r=>{typeof r=="object"?Object.keys(r).forEach(s=>{r[s]&&i.push(t+s)}):typeof r=="string"&&i.push(t+r)}),i}function jne(){const e=this,{classNames:t,params:i,rtl:r,el:s,device:c}=e,d=Bne(["initialized",i.direction,{"free-mode":e.params.freeMode&&i.freeMode.enabled},{autoheight:i.autoHeight},{rtl:r},{grid:i.grid&&i.grid.rows>1},{"grid-column":i.grid&&i.grid.rows>1&&i.grid.fill==="column"},{android:c.android},{ios:c.ios},{"css-mode":i.cssMode},{centered:i.cssMode&&i.centeredSlides},{"watch-progress":i.watchSlidesProgress}],i.containerModifierClass);t.push(...d),s.classList.add(...t),e.emitContainerClasses()}function Vne(){const e=this,{el:t,classNames:i}=e;t.classList.remove(...i),e.emitContainerClasses()}const Une={addClasses:jne,removeClasses:Vne};function Hne(){const e=this,{isLocked:t,params:i}=e,{slidesOffsetBefore:r}=i;if(r){const s=e.slides.length-1,c=e.slidesGrid[s]+e.slidesSizesGrid[s]+r*2;e.isLocked=e.size>c}else e.isLocked=e.snapGrid.length===1;i.allowSlideNext===!0&&(e.allowSlideNext=!e.isLocked),i.allowSlidePrev===!0&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}const Gne={checkOverflow:Hne},DC={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function Wne(e,t){return function(r={}){const s=Object.keys(r)[0],c=r[s];if(typeof c!="object"||c===null){ua(t,r);return}if(["navigation","pagination","scrollbar"].indexOf(s)>=0&&e[s]===!0&&(e[s]={auto:!0}),!(s in e&&"enabled"in c)){ua(t,r);return}e[s]===!0&&(e[s]={enabled:!0}),typeof e[s]=="object"&&!("enabled"in e[s])&&(e[s].enabled=!0),e[s]||(e[s]={enabled:!1}),ua(t,r)}}const Eb={eventsEmitter:Ute,update:ene,translate:ane,transition:une,slide:_ne,loop:wne,grabCursor:Ene,events:Fne,breakpoints:Nne,checkOverflow:Gne,classes:Une},Cb={};let um=class _l{constructor(...t){let i,r;t.length===1&&t[0].constructor&&Object.prototype.toString.call(t[0]).slice(8,-1)==="Object"?r=t[0]:[i,r]=t,r||(r={}),r=ua({},r),i&&!r.el&&(r.el=i);const s=xo();if(r.el&&typeof r.el=="string"&&s.querySelectorAll(r.el).length>1){const m=[];return s.querySelectorAll(r.el).forEach(g=>{const y=ua({},r,{el:g});m.push(new _l(y))}),m}const c=this;c.__swiper__=!0,c.support=SD(),c.device=zte({userAgent:r.userAgent}),c.browser=Bte(),c.eventsListeners={},c.eventsAnyListeners=[],c.modules=[...c.__modules__],r.modules&&Array.isArray(r.modules)&&c.modules.push(...r.modules);const d={};c.modules.forEach(m=>{m({params:r,swiper:c,extendParams:Wne(r,d),on:c.on.bind(c),once:c.once.bind(c),off:c.off.bind(c),emit:c.emit.bind(c)})});const l=ua({},DC,d);return c.params=ua({},l,Cb,r),c.originalParams=ua({},c.params),c.passedParams=ua({},r),c.params&&c.params.on&&Object.keys(c.params.on).forEach(m=>{c.on(m,c.params.on[m])}),c.params&&c.params.onAny&&c.onAny(c.params.onAny),Object.assign(c,{enabled:c.params.enabled,el:i,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return c.params.direction==="horizontal"},isVertical(){return c.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:c.params.allowSlideNext,allowSlidePrev:c.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:c.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:c.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),c.emit("_swiper"),c.params.init&&c.init(),c}getSlideIndex(t){const{slidesEl:i,params:r}=this,s=lo(i,`.${r.slideClass}, swiper-slide`),c=Wx(s[0]);return Wx(t)-c}getSlideIndexByData(t){return this.getSlideIndex(this.slides.filter(i=>i.getAttribute("data-swiper-slide-index")*1===t)[0])}recalcSlides(){const t=this,{slidesEl:i,params:r}=t;t.slides=lo(i,`.${r.slideClass}, swiper-slide`)}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;t.enabled&&(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,i){const r=this;t=Math.min(Math.max(t,0),1);const s=r.minTranslate(),d=(r.maxTranslate()-s)*t+s;r.translateTo(d,typeof i>"u"?0:i),r.updateActiveIndex(),r.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const i=t.el.className.split(" ").filter(r=>r.indexOf("swiper")===0||r.indexOf(t.params.containerModifierClass)===0);t.emit("_containerClasses",i.join(" "))}getSlideClasses(t){const i=this;return i.destroyed?"":t.className.split(" ").filter(r=>r.indexOf("swiper-slide")===0||r.indexOf(i.params.slideClass)===0).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const i=[];t.slides.forEach(r=>{const s=t.getSlideClasses(r);i.push({slideEl:r,classNames:s}),t.emit("_slideClass",r,s)}),t.emit("_slideClasses",i)}slidesPerViewDynamic(t="current",i=!1){const r=this,{params:s,slides:c,slidesGrid:d,slidesSizesGrid:l,size:m,activeIndex:g}=r;let y=1;if(s.centeredSlides){let x=c[g]?c[g].swiperSlideSize:0,C;for(let I=g+1;I<c.length;I+=1)c[I]&&!C&&(x+=c[I].swiperSlideSize,y+=1,x>m&&(C=!0));for(let I=g-1;I>=0;I-=1)c[I]&&!C&&(x+=c[I].swiperSlideSize,y+=1,x>m&&(C=!0))}else if(t==="current")for(let x=g+1;x<c.length;x+=1)(i?d[x]+l[x]-d[g]<m:d[x]-d[g]<m)&&(y+=1);else for(let x=g-1;x>=0;x-=1)d[g]-d[x]<m&&(y+=1);return y}update(){const t=this;if(!t||t.destroyed)return;const{snapGrid:i,params:r}=t;r.breakpoints&&t.setBreakpoint(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach(d=>{d.complete&&jv(t,d)}),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses();function s(){const d=t.rtlTranslate?t.translate*-1:t.translate,l=Math.min(Math.max(d,t.maxTranslate()),t.minTranslate());t.setTranslate(l),t.updateActiveIndex(),t.updateSlidesClasses()}let c;if(r.freeMode&&r.freeMode.enabled&&!r.cssMode)s(),r.autoHeight&&t.updateAutoHeight();else{if((r.slidesPerView==="auto"||r.slidesPerView>1)&&t.isEnd&&!r.centeredSlides){const d=t.virtual&&r.virtual.enabled?t.virtual.slides:t.slides;c=t.slideTo(d.length-1,0,!1,!0)}else c=t.slideTo(t.activeIndex,0,!1,!0);c||s()}r.watchOverflow&&i!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,i=!0){const r=this,s=r.params.direction;return t||(t=s==="horizontal"?"vertical":"horizontal"),t===s||t!=="horizontal"&&t!=="vertical"||(r.el.classList.remove(`${r.params.containerModifierClass}${s}`),r.el.classList.add(`${r.params.containerModifierClass}${t}`),r.emitContainerClasses(),r.params.direction=t,r.slides.forEach(c=>{t==="vertical"?c.style.width="":c.style.height=""}),r.emit("changeDirection"),i&&r.update()),r}changeLanguageDirection(t){const i=this;i.rtl&&t==="rtl"||!i.rtl&&t==="ltr"||(i.rtl=t==="rtl",i.rtlTranslate=i.params.direction==="horizontal"&&i.rtl,i.rtl?(i.el.classList.add(`${i.params.containerModifierClass}rtl`),i.el.dir="rtl"):(i.el.classList.remove(`${i.params.containerModifierClass}rtl`),i.el.dir="ltr"),i.update())}mount(t){const i=this;if(i.mounted)return!0;let r=t||i.params.el;if(typeof r=="string"&&(r=document.querySelector(r)),!r)return!1;r.swiper=i,r.shadowEl&&(i.isElement=!0);const s=()=>`.${(i.params.wrapperClass||"").trim().split(" ").join(".")}`;let d=(()=>r&&r.shadowRoot&&r.shadowRoot.querySelector?r.shadowRoot.querySelector(s()):lo(r,s())[0])();return!d&&i.params.createElements&&(d=Sy("div",i.params.wrapperClass),r.append(d),lo(r,`.${i.params.slideClass}`).forEach(l=>{d.append(l)})),Object.assign(i,{el:r,wrapperEl:d,slidesEl:i.isElement?r:d,mounted:!0,rtl:r.dir.toLowerCase()==="rtl"||Sc(r,"direction")==="rtl",rtlTranslate:i.params.direction==="horizontal"&&(r.dir.toLowerCase()==="rtl"||Sc(r,"direction")==="rtl"),wrongRTL:Sc(d,"display")==="-webkit-box"}),!0}init(t){const i=this;return i.initialized||i.mount(t)===!1||(i.emit("beforeInit"),i.params.breakpoints&&i.setBreakpoint(),i.addClasses(),i.updateSize(),i.updateSlides(),i.params.watchOverflow&&i.checkOverflow(),i.params.grabCursor&&i.enabled&&i.setGrabCursor(),i.params.loop&&i.virtual&&i.params.virtual.enabled?i.slideTo(i.params.initialSlide+i.virtual.slidesBefore,0,i.params.runCallbacksOnInit,!1,!0):i.slideTo(i.params.initialSlide,0,i.params.runCallbacksOnInit,!1,!0),i.params.loop&&i.loopCreate(),i.attachEvents(),[...i.el.querySelectorAll('[loading="lazy"]')].forEach(s=>{s.complete?jv(i,s):s.addEventListener("load",c=>{jv(i,c.target)})}),Zx(i),i.initialized=!0,Zx(i),i.emit("init"),i.emit("afterInit")),i}destroy(t=!0,i=!0){const r=this,{params:s,el:c,wrapperEl:d,slides:l}=r;return typeof r.params>"u"||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),s.loop&&r.loopDestroy(),i&&(r.removeClasses(),c.removeAttribute("style"),d.removeAttribute("style"),l&&l.length&&l.forEach(m=>{m.classList.remove(s.slideVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass),m.removeAttribute("style"),m.removeAttribute("data-swiper-slide-index")})),r.emit("destroy"),Object.keys(r.eventsListeners).forEach(m=>{r.off(m)}),t!==!1&&(r.el.swiper=null,kte(r)),r.destroyed=!0),null}static extendDefaults(t){ua(Cb,t)}static get extendedDefaults(){return Cb}static get defaults(){return DC}static installModule(t){_l.prototype.__modules__||(_l.prototype.__modules__=[]);const i=_l.prototype.__modules__;typeof t=="function"&&i.indexOf(t)<0&&i.push(t)}static use(t){return Array.isArray(t)?(t.forEach(i=>_l.installModule(i)),_l):(_l.installModule(t),_l)}};Object.keys(Eb).forEach(e=>{Object.keys(Eb[e]).forEach(t=>{um.prototype[t]=Eb[e][t]})});um.use([jte,Vte]);function qne({swiper:e,extendParams:t,on:i,emit:r}){const s=xo(),c=zs();e.keyboard={enabled:!1},t({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}});function d(g){if(!e.enabled)return;const{rtlTranslate:y}=e;let x=g;x.originalEvent&&(x=x.originalEvent);const C=x.keyCode||x.charCode,I=e.params.keyboard.pageUpDown,A=I&&C===33,O=I&&C===34,F=C===37,z=C===39,U=C===38,H=C===40;if(!e.allowSlideNext&&(e.isHorizontal()&&z||e.isVertical()&&H||O)||!e.allowSlidePrev&&(e.isHorizontal()&&F||e.isVertical()&&U||A))return!1;if(!(x.shiftKey||x.altKey||x.ctrlKey||x.metaKey)&&!(s.activeElement&&s.activeElement.nodeName&&(s.activeElement.nodeName.toLowerCase()==="input"||s.activeElement.nodeName.toLowerCase()==="textarea"))){if(e.params.keyboard.onlyInViewport&&(A||O||F||z||U||H)){let q=!1;if(qx(e.el,`.${e.params.slideClass}, swiper-slide`).length>0&&qx(e.el,`.${e.params.slideActiveClass}`).length===0)return;const ee=e.el,Q=ee.clientWidth,ve=ee.clientHeight,se=c.innerWidth,K=c.innerHeight,J=wD(ee);y&&(J.left-=ee.scrollLeft);const W=[[J.left,J.top],[J.left+Q,J.top],[J.left,J.top+ve],[J.left+Q,J.top+ve]];for(let te=0;te<W.length;te+=1){const j=W[te];if(j[0]>=0&&j[0]<=se&&j[1]>=0&&j[1]<=K){if(j[0]===0&&j[1]===0)continue;q=!0}}if(!q)return}e.isHorizontal()?((A||O||F||z)&&(x.preventDefault?x.preventDefault():x.returnValue=!1),((O||z)&&!y||(A||F)&&y)&&e.slideNext(),((A||F)&&!y||(O||z)&&y)&&e.slidePrev()):((A||O||U||H)&&(x.preventDefault?x.preventDefault():x.returnValue=!1),(O||H)&&e.slideNext(),(A||U)&&e.slidePrev()),r("keyPress",C)}}function l(){e.keyboard.enabled||(s.addEventListener("keydown",d),e.keyboard.enabled=!0)}function m(){e.keyboard.enabled&&(s.removeEventListener("keydown",d),e.keyboard.enabled=!1)}i("init",()=>{e.params.keyboard.enabled&&l()}),i("destroy",()=>{e.keyboard.enabled&&m()}),Object.assign(e.keyboard,{enable:l,disable:m})}function CD(e,t,i,r){return e.params.createElements&&Object.keys(r).forEach(s=>{if(!i[s]&&i.auto===!0){let c=lo(e.el,`.${r[s]}`)[0];c||(c=Sy("div",r[s]),c.className=r[s],e.el.append(c)),i[s]=c,t[s]=c}}),i}function Zne({swiper:e,extendParams:t,on:i,emit:r}){t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};const s=A=>(Array.isArray(A)||(A=[A].filter(O=>!!O)),A);function c(A){let O;return A&&typeof A=="string"&&e.isElement&&(O=e.el.shadowRoot.querySelector(A),O)?O:(A&&(typeof A=="string"&&(O=[...document.querySelectorAll(A)]),e.params.uniqueNavElements&&typeof A=="string"&&O.length>1&&e.el.querySelectorAll(A).length===1&&(O=e.el.querySelector(A))),A&&!O?A:O)}function d(A,O){const F=e.params.navigation;A=s(A),A.forEach(z=>{z&&(z.classList[O?"add":"remove"](...F.disabledClass.split(" ")),z.tagName==="BUTTON"&&(z.disabled=O),e.params.watchOverflow&&e.enabled&&z.classList[e.isLocked?"add":"remove"](F.lockClass))})}function l(){const{nextEl:A,prevEl:O}=e.navigation;if(e.params.loop){d(O,!1),d(A,!1);return}d(O,e.isBeginning&&!e.params.rewind),d(A,e.isEnd&&!e.params.rewind)}function m(A){A.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),r("navigationPrev"))}function g(A){A.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),r("navigationNext"))}function y(){const A=e.params.navigation;if(e.params.navigation=CD(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(A.nextEl||A.prevEl))return;let O=c(A.nextEl),F=c(A.prevEl);Object.assign(e.navigation,{nextEl:O,prevEl:F}),O=s(O),F=s(F);const z=(U,H)=>{U&&U.addEventListener("click",H==="next"?g:m),!e.enabled&&U&&U.classList.add(...A.lockClass.split(" "))};O.forEach(U=>z(U,"next")),F.forEach(U=>z(U,"prev"))}function x(){let{nextEl:A,prevEl:O}=e.navigation;A=s(A),O=s(O);const F=(z,U)=>{z.removeEventListener("click",U==="next"?g:m),z.classList.remove(...e.params.navigation.disabledClass.split(" "))};A.forEach(z=>F(z,"next")),O.forEach(z=>F(z,"prev"))}i("init",()=>{e.params.navigation.enabled===!1?I():(y(),l())}),i("toEdge fromEdge lock unlock",()=>{l()}),i("destroy",()=>{x()}),i("enable disable",()=>{let{nextEl:A,prevEl:O}=e.navigation;A=s(A),O=s(O),[...A,...O].filter(F=>!!F).forEach(F=>F.classList[e.enabled?"remove":"add"](e.params.navigation.lockClass))}),i("click",(A,O)=>{let{nextEl:F,prevEl:z}=e.navigation;F=s(F),z=s(z);const U=O.target;if(e.params.navigation.hideOnClick&&!z.includes(U)&&!F.includes(U)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===U||e.pagination.el.contains(U)))return;let H;F.length?H=F[0].classList.contains(e.params.navigation.hiddenClass):z.length&&(H=z[0].classList.contains(e.params.navigation.hiddenClass)),r(H===!0?"navigationShow":"navigationHide"),[...F,...z].filter(q=>!!q).forEach(q=>q.classList.toggle(e.params.navigation.hiddenClass))}});const C=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),y(),l()},I=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),x()};Object.assign(e.navigation,{enable:C,disable:I,update:l,init:y,destroy:x})}function Ib(e=""){return`.${e.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function LC({swiper:e,extendParams:t,on:i,emit:r}){const s=xo();let c=!1,d=null,l=null,m,g,y,x;t({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),e.scrollbar={el:null,dragEl:null};function C(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:W,rtlTranslate:te}=e,{dragEl:j,el:re}=W,Te=e.params.scrollbar,ye=e.params.loop?e.progressLoop:e.progress;let Ve=g,Ue=(y-g)*ye;te?(Ue=-Ue,Ue>0?(Ve=g-Ue,Ue=0):-Ue+g>y&&(Ve=y+Ue)):Ue<0?(Ve=g+Ue,Ue=0):Ue+g>y&&(Ve=y-Ue),e.isHorizontal()?(j.style.transform=`translate3d(${Ue}px, 0, 0)`,j.style.width=`${Ve}px`):(j.style.transform=`translate3d(0px, ${Ue}px, 0)`,j.style.height=`${Ve}px`),Te.hide&&(clearTimeout(d),re.style.opacity=1,d=setTimeout(()=>{re.style.opacity=0,re.style.transitionDuration="400ms"},1e3))}function I(W){!e.params.scrollbar.el||!e.scrollbar.el||(e.scrollbar.dragEl.style.transitionDuration=`${W}ms`)}function A(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:W}=e,{dragEl:te,el:j}=W;te.style.width="",te.style.height="",y=e.isHorizontal()?j.offsetWidth:j.offsetHeight,x=e.size/(e.virtualSize+e.params.slidesOffsetBefore-(e.params.centeredSlides?e.snapGrid[0]:0)),e.params.scrollbar.dragSize==="auto"?g=y*x:g=parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?te.style.width=`${g}px`:te.style.height=`${g}px`,x>=1?j.style.display="none":j.style.display="",e.params.scrollbar.hide&&(j.style.opacity=0),e.params.watchOverflow&&e.enabled&&W.el.classList[e.isLocked?"add":"remove"](e.params.scrollbar.lockClass)}function O(W){return e.isHorizontal()?W.clientX:W.clientY}function F(W){const{scrollbar:te,rtlTranslate:j}=e,{el:re}=te;let Te;Te=(O(W)-wD(re)[e.isHorizontal()?"left":"top"]-(m!==null?m:g/2))/(y-g),Te=Math.max(Math.min(Te,1),0),j&&(Te=1-Te);const ye=e.minTranslate()+(e.maxTranslate()-e.minTranslate())*Te;e.updateProgress(ye),e.setTranslate(ye),e.updateActiveIndex(),e.updateSlidesClasses()}function z(W){const te=e.params.scrollbar,{scrollbar:j,wrapperEl:re}=e,{el:Te,dragEl:ye}=j;c=!0,m=W.target===ye?O(W)-W.target.getBoundingClientRect()[e.isHorizontal()?"left":"top"]:null,W.preventDefault(),W.stopPropagation(),re.style.transitionDuration="100ms",ye.style.transitionDuration="100ms",F(W),clearTimeout(l),Te.style.transitionDuration="0ms",te.hide&&(Te.style.opacity=1),e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="none"),r("scrollbarDragStart",W)}function U(W){const{scrollbar:te,wrapperEl:j}=e,{el:re,dragEl:Te}=te;c&&(W.preventDefault?W.preventDefault():W.returnValue=!1,F(W),j.style.transitionDuration="0ms",re.style.transitionDuration="0ms",Te.style.transitionDuration="0ms",r("scrollbarDragMove",W))}function H(W){const te=e.params.scrollbar,{scrollbar:j,wrapperEl:re}=e,{el:Te}=j;c&&(c=!1,e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="",re.style.transitionDuration=""),te.hide&&(clearTimeout(l),l=T_(()=>{Te.style.opacity=0,Te.style.transitionDuration="400ms"},1e3)),r("scrollbarDragEnd",W),te.snapOnRelease&&e.slideToClosest())}function q(W){const{scrollbar:te,params:j}=e,re=te.el;if(!re)return;const Te=re,ye=j.passiveListeners?{passive:!1,capture:!1}:!1,Ve=j.passiveListeners?{passive:!0,capture:!1}:!1;if(!Te)return;const Ue=W==="on"?"addEventListener":"removeEventListener";Te[Ue]("pointerdown",z,ye),s[Ue]("pointermove",U,ye),s[Ue]("pointerup",H,Ve)}function ee(){!e.params.scrollbar.el||!e.scrollbar.el||q("on")}function Q(){!e.params.scrollbar.el||!e.scrollbar.el||q("off")}function ve(){const{scrollbar:W,el:te}=e;e.params.scrollbar=CD(e,e.originalParams.scrollbar,e.params.scrollbar,{el:"swiper-scrollbar"});const j=e.params.scrollbar;if(!j.el)return;let re;typeof j.el=="string"&&e.isElement&&(re=e.el.shadowRoot.querySelector(j.el)),!re&&typeof j.el=="string"?re=s.querySelectorAll(j.el):re||(re=j.el),e.params.uniqueNavElements&&typeof j.el=="string"&&re.length>1&&te.querySelectorAll(j.el).length===1&&(re=te.querySelector(j.el)),re.length>0&&(re=re[0]),re.classList.add(e.isHorizontal()?j.horizontalClass:j.verticalClass);let Te;re&&(Te=re.querySelector(`.${e.params.scrollbar.dragClass}`),Te||(Te=Sy("div",e.params.scrollbar.dragClass),re.append(Te))),Object.assign(W,{el:re,dragEl:Te}),j.draggable&&ee(),re&&re.classList[e.enabled?"remove":"add"](e.params.scrollbar.lockClass)}function se(){const W=e.params.scrollbar,te=e.scrollbar.el;te&&te.classList.remove(e.isHorizontal()?W.horizontalClass:W.verticalClass),Q()}i("init",()=>{e.params.scrollbar.enabled===!1?J():(ve(),A(),C())}),i("update resize observerUpdate lock unlock",()=>{A()}),i("setTranslate",()=>{C()}),i("setTransition",(W,te)=>{I(te)}),i("enable disable",()=>{const{el:W}=e.scrollbar;W&&W.classList[e.enabled?"remove":"add"](e.params.scrollbar.lockClass)}),i("destroy",()=>{se()});const K=()=>{e.el.classList.remove(e.params.scrollbar.scrollbarDisabledClass),e.scrollbar.el&&e.scrollbar.el.classList.remove(e.params.scrollbar.scrollbarDisabledClass),ve(),A(),C()},J=()=>{e.el.classList.add(e.params.scrollbar.scrollbarDisabledClass),e.scrollbar.el&&e.scrollbar.el.classList.add(e.params.scrollbar.scrollbarDisabledClass),se()};Object.assign(e.scrollbar,{enable:K,disable:J,updateSize:A,setTranslate:C,init:ve,destroy:se})}function Kne({swiper:e,extendParams:t,on:i}){t({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}}),e.a11y={clicked:!1};let r=null;function s(j){const re=r;re.length!==0&&(re.innerHTML="",re.innerHTML=j)}const c=j=>(Array.isArray(j)||(j=[j].filter(re=>!!re)),j);function d(j=16){const re=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(j).replace(/x/g,re)}function l(j){j=c(j),j.forEach(re=>{re.setAttribute("tabIndex","0")})}function m(j){j=c(j),j.forEach(re=>{re.setAttribute("tabIndex","-1")})}function g(j,re){j=c(j),j.forEach(Te=>{Te.setAttribute("role",re)})}function y(j,re){j=c(j),j.forEach(Te=>{Te.setAttribute("aria-roledescription",re)})}function x(j,re){j=c(j),j.forEach(Te=>{Te.setAttribute("aria-controls",re)})}function C(j,re){j=c(j),j.forEach(Te=>{Te.setAttribute("aria-label",re)})}function I(j,re){j=c(j),j.forEach(Te=>{Te.setAttribute("id",re)})}function A(j,re){j=c(j),j.forEach(Te=>{Te.setAttribute("aria-live",re)})}function O(j){j=c(j),j.forEach(re=>{re.setAttribute("aria-disabled",!0)})}function F(j){j=c(j),j.forEach(re=>{re.setAttribute("aria-disabled",!1)})}function z(j){if(j.keyCode!==13&&j.keyCode!==32)return;const re=e.params.a11y,Te=j.target;e.pagination&&e.pagination.el&&(Te===e.pagination.el||e.pagination.el.contains(j.target))&&!j.target.matches(Ib(e.params.pagination.bulletClass))||(e.navigation&&e.navigation.nextEl&&Te===e.navigation.nextEl&&(e.isEnd&&!e.params.loop||e.slideNext(),e.isEnd?s(re.lastSlideMessage):s(re.nextSlideMessage)),e.navigation&&e.navigation.prevEl&&Te===e.navigation.prevEl&&(e.isBeginning&&!e.params.loop||e.slidePrev(),e.isBeginning?s(re.firstSlideMessage):s(re.prevSlideMessage)),e.pagination&&Te.matches(Ib(e.params.pagination.bulletClass))&&Te.click())}function U(){if(e.params.loop||e.params.rewind||!e.navigation)return;const{nextEl:j,prevEl:re}=e.navigation;re&&(e.isBeginning?(O(re),m(re)):(F(re),l(re))),j&&(e.isEnd?(O(j),m(j)):(F(j),l(j)))}function H(){return e.pagination&&e.pagination.bullets&&e.pagination.bullets.length}function q(){return H()&&e.params.pagination.clickable}function ee(){const j=e.params.a11y;H()&&e.pagination.bullets.forEach(re=>{e.params.pagination.clickable&&(l(re),e.params.pagination.renderBullet||(g(re,"button"),C(re,j.paginationBulletMessage.replace(/\{\{index\}\}/,Wx(re)+1)))),re.matches(Ib(e.params.pagination.bulletActiveClass))?re.setAttribute("aria-current","true"):re.removeAttribute("aria-current")})}const Q=(j,re,Te)=>{l(j),j.tagName!=="BUTTON"&&(g(j,"button"),j.addEventListener("keydown",z)),C(j,Te),x(j,re)},ve=()=>{e.a11y.clicked=!0},se=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.destroyed||(e.a11y.clicked=!1)})})},K=j=>{if(e.a11y.clicked)return;const re=j.target.closest(`.${e.params.slideClass}, swiper-slide`);if(!re||!e.slides.includes(re))return;const Te=e.slides.indexOf(re)===e.activeIndex,ye=e.params.watchSlidesProgress&&e.visibleSlides&&e.visibleSlides.includes(re);Te||ye||j.sourceCapabilities&&j.sourceCapabilities.firesTouchEvents||(e.isHorizontal()?e.el.scrollLeft=0:e.el.scrollTop=0,e.slideTo(e.slides.indexOf(re),0))},J=()=>{const j=e.params.a11y;j.itemRoleDescriptionMessage&&y(e.slides,j.itemRoleDescriptionMessage),j.slideRole&&g(e.slides,j.slideRole);const re=e.slides.length;j.slideLabelMessage&&e.slides.forEach((Te,ye)=>{const Ve=e.params.loop?parseInt(Te.getAttribute("data-swiper-slide-index"),10):ye,Ue=j.slideLabelMessage.replace(/\{\{index\}\}/,Ve+1).replace(/\{\{slidesLength\}\}/,re);C(Te,Ue)})},W=()=>{const j=e.params.a11y;e.isElement?e.el.shadowEl.append(r):e.el.append(r);const re=e.el;j.containerRoleDescriptionMessage&&y(re,j.containerRoleDescriptionMessage),j.containerMessage&&C(re,j.containerMessage);const Te=e.wrapperEl,ye=j.id||Te.getAttribute("id")||`swiper-wrapper-${d(16)}`,Ve=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite";I(Te,ye),A(Te,Ve),J();let{nextEl:Ue,prevEl:Qe}=e.navigation?e.navigation:{};Ue=c(Ue),Qe=c(Qe),Ue&&Ue.forEach(It=>Q(It,ye,j.nextSlideMessage)),Qe&&Qe.forEach(It=>Q(It,ye,j.prevSlideMessage)),q()&&(Array.isArray(e.pagination.el)?e.pagination.el:[e.pagination.el]).forEach(vt=>{vt.addEventListener("keydown",z)}),e.el.addEventListener("focus",K,!0),e.el.addEventListener("pointerdown",ve,!0),e.el.addEventListener("pointerup",se,!0)};function te(){r&&r.remove();let{nextEl:j,prevEl:re}=e.navigation?e.navigation:{};j=c(j),re=c(re),j&&j.forEach(Te=>Te.removeEventListener("keydown",z)),re&&re.forEach(Te=>Te.removeEventListener("keydown",z)),q()&&(Array.isArray(e.pagination.el)?e.pagination.el:[e.pagination.el]).forEach(ye=>{ye.removeEventListener("keydown",z)}),e.el.removeEventListener("focus",K,!0),e.el.removeEventListener("pointerdown",ve,!0),e.el.removeEventListener("pointerup",se,!0)}i("beforeInit",()=>{r=Sy("span",e.params.a11y.notificationClass),r.setAttribute("aria-live","assertive"),r.setAttribute("aria-atomic","true")}),i("afterInit",()=>{e.params.a11y.enabled&&W()}),i("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{e.params.a11y.enabled&&J()}),i("fromEdge toEdge afterInit lock unlock",()=>{e.params.a11y.enabled&&U()}),i("paginationUpdate",()=>{e.params.a11y.enabled&&ee()}),i("destroy",()=>{e.params.a11y.enabled&&te()})}function OC({swiper:e,extendParams:t,on:i}){t({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let r=!1,s=!1;e.thumbs={swiper:null};function c(){const m=e.thumbs.swiper;if(!m||m.destroyed)return;const g=m.clickedIndex,y=m.clickedSlide;if(y&&y.classList.contains(e.params.thumbs.slideThumbActiveClass)||typeof g>"u"||g===null)return;let x;m.params.loop?x=parseInt(m.clickedSlide.getAttribute("data-swiper-slide-index"),10):x=g,e.params.loop?e.slideToLoop(x):e.slideTo(x)}function d(){const{thumbs:m}=e.params;if(r)return!1;r=!0;const g=e.constructor;if(m.swiper instanceof g)e.thumbs.swiper=m.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update();else if(yp(m.swiper)){const y=Object.assign({},m.swiper);Object.assign(y,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new g(y),s=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",c),!0}function l(m){const g=e.thumbs.swiper;if(!g||g.destroyed)return;const y=g.params.slidesPerView==="auto"?g.slidesPerViewDynamic():g.params.slidesPerView;let x=1;const C=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(x=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(x=1),x=Math.floor(x),g.slides.forEach(O=>O.classList.remove(C)),g.params.loop||g.params.virtual&&g.params.virtual.enabled)for(let O=0;O<x;O+=1)lo(g.slidesEl,`[data-swiper-slide-index="${e.realIndex+O}"]`).forEach(F=>{F.classList.add(C)});else for(let O=0;O<x;O+=1)g.slides[e.realIndex+O]&&g.slides[e.realIndex+O].classList.add(C);const I=e.params.thumbs.autoScrollOffset,A=I&&!g.params.loop;if(e.realIndex!==g.realIndex||A){const O=g.activeIndex;let F,z;if(g.params.loop){const U=g.slides.filter(H=>H.getAttribute("data-swiper-slide-index")===`${e.realIndex}`)[0];F=g.slides.indexOf(U),z=e.activeIndex>e.previousIndex?"next":"prev"}else F=e.realIndex,z=F>e.previousIndex?"next":"prev";A&&(F+=z==="next"?I:-1*I),g.visibleSlidesIndexes&&g.visibleSlidesIndexes.indexOf(F)<0&&(g.params.centeredSlides?F>O?F=F-Math.floor(y/2)+1:F=F+Math.floor(y/2)-1:F>O&&g.params.slidesPerGroup,g.slideTo(F,m?0:void 0))}}i("beforeInit",()=>{const{thumbs:m}=e.params;if(!(!m||!m.swiper))if(typeof m.swiper=="string"||m.swiper instanceof HTMLElement){const g=xo(),y=()=>{const C=typeof m.swiper=="string"?g.querySelector(m.swiper):m.swiper;if(C&&C.swiper)m.swiper=C.swiper,d(),l(!0);else if(C){const I=A=>{m.swiper=A.detail[0],C.removeEventListener("init",I),d(),l(!0),m.swiper.update(),e.update()};C.addEventListener("init",I)}return C},x=()=>{if(e.destroyed)return;y()||requestAnimationFrame(x)};requestAnimationFrame(x)}else d(),l(!0)}),i("slideChange update resize observerUpdate",()=>{l()}),i("setTransition",(m,g)=>{const y=e.thumbs.swiper;!y||y.destroyed||y.setTransition(g)}),i("beforeDestroy",()=>{const m=e.thumbs.swiper;!m||m.destroyed||s&&m.destroy()}),Object.assign(e.thumbs,{init:d,update:l})}function Uu(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function Tc(e,t){const i=["__proto__","constructor","prototype"];Object.keys(t).filter(r=>i.indexOf(r)<0).forEach(r=>{typeof e[r]>"u"?e[r]=t[r]:Uu(t[r])&&Uu(e[r])&&Object.keys(t[r]).length>0?t[r].__swiper__?e[r]=t[r]:Tc(e[r],t[r]):e[r]=t[r]})}function ID(e={}){return e.navigation&&typeof e.navigation.nextEl>"u"&&typeof e.navigation.prevEl>"u"}function AD(e={}){return e.pagination&&typeof e.pagination.el>"u"}function MD(e={}){return e.scrollbar&&typeof e.scrollbar.el>"u"}function kD(e=""){const t=e.split(" ").map(r=>r.trim()).filter(r=>!!r),i=[];return t.forEach(r=>{i.indexOf(r)<0&&i.push(r)}),i.join(" ")}function Xne(e=""){return e?e.includes("swiper-wrapper")?e:`swiper-wrapper ${e}`:"swiper-wrapper"}const PD=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopedSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideNextClass","slidePrevClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function RC(e={},t=!0){const i={on:{}},r={},s={};Tc(i,um.defaults),Tc(i,um.extendedDefaults),i._emitClasses=!0,i.init=!1;const c={},d=PD.map(m=>m.replace(/_/,"")),l=Object.assign({},e);return Object.keys(l).forEach(m=>{typeof e[m]>"u"||(d.indexOf(m)>=0?Uu(e[m])?(i[m]={},s[m]={},Tc(i[m],e[m]),Tc(s[m],e[m])):(i[m]=e[m],s[m]=e[m]):m.search(/on[A-Z]/)===0&&typeof e[m]=="function"?t?r[`${m[2].toLowerCase()}${m.substr(3)}`]=e[m]:i.on[`${m[2].toLowerCase()}${m.substr(3)}`]=e[m]:c[m]=e[m])}),["navigation","pagination","scrollbar"].forEach(m=>{i[m]===!0&&(i[m]={}),i[m]===!1&&delete i[m]}),{params:i,passedParams:s,rest:c,events:r}}function Yne({el:e,nextEl:t,prevEl:i,paginationEl:r,scrollbarEl:s,swiper:c},d){ID(d)&&t&&i&&(c.params.navigation.nextEl=t,c.originalParams.navigation.nextEl=t,c.params.navigation.prevEl=i,c.originalParams.navigation.prevEl=i),AD(d)&&r&&(c.params.pagination.el=r,c.originalParams.pagination.el=r),MD(d)&&s&&(c.params.scrollbar.el=s,c.originalParams.scrollbar.el=s),c.init(e)}function Jne(e,t,i,r,s){const c=[];if(!t)return c;const d=m=>{c.indexOf(m)<0&&c.push(m)};if(i&&r){const m=r.map(s),g=i.map(s);m.join("")!==g.join("")&&d("children"),r.length!==i.length&&d("children")}return PD.filter(m=>m[0]==="_").map(m=>m.replace(/_/,"")).forEach(m=>{if(m in e&&m in t)if(Uu(e[m])&&Uu(t[m])){const g=Object.keys(e[m]),y=Object.keys(t[m]);g.length!==y.length?d(m):(g.forEach(x=>{e[m][x]!==t[m][x]&&d(m)}),y.forEach(x=>{e[m][x]!==t[m][x]&&d(m)}))}else e[m]!==t[m]&&d(m)}),c}function Ab(e,t,i){e===void 0&&(e={});const r=[],s={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},c=(d,l)=>{Array.isArray(d)&&d.forEach(m=>{const g=typeof m.type=="symbol";l==="default"&&(l="container-end"),g&&m.children?c(m.children,l):m.type&&(m.type.name==="SwiperSlide"||m.type.name==="AsyncComponentWrapper")?r.push(m):s[l]&&s[l].push(m)})};return Object.keys(e).forEach(d=>{if(typeof e[d]!="function")return;const l=e[d]();c(l,d)}),i.value=t.value,t.value=r,{slides:r,slots:s}}function Qne({swiper:e,slides:t,passedParams:i,changedParams:r,nextEl:s,prevEl:c,scrollbarEl:d,paginationEl:l}){const m=r.filter(se=>se!=="children"&&se!=="direction"&&se!=="wrapperClass"),{params:g,pagination:y,navigation:x,scrollbar:C,virtual:I,thumbs:A}=e;let O,F,z,U,H,q,ee,Q;r.includes("thumbs")&&i.thumbs&&i.thumbs.swiper&&g.thumbs&&!g.thumbs.swiper&&(O=!0),r.includes("controller")&&i.controller&&i.controller.control&&g.controller&&!g.controller.control&&(F=!0),r.includes("pagination")&&i.pagination&&(i.pagination.el||l)&&(g.pagination||g.pagination===!1)&&y&&!y.el&&(z=!0),r.includes("scrollbar")&&i.scrollbar&&(i.scrollbar.el||d)&&(g.scrollbar||g.scrollbar===!1)&&C&&!C.el&&(U=!0),r.includes("navigation")&&i.navigation&&(i.navigation.prevEl||c)&&(i.navigation.nextEl||s)&&(g.navigation||g.navigation===!1)&&x&&!x.prevEl&&!x.nextEl&&(H=!0);const ve=se=>{e[se]&&(e[se].destroy(),se==="navigation"?(e.isElement&&(e[se].prevEl.remove(),e[se].nextEl.remove()),g[se].prevEl=void 0,g[se].nextEl=void 0,e[se].prevEl=void 0,e[se].nextEl=void 0):(e.isElement&&e[se].el.remove(),g[se].el=void 0,e[se].el=void 0))};r.includes("loop")&&e.isElement&&(g.loop&&!i.loop?q=!0:!g.loop&&i.loop?ee=!0:Q=!0),m.forEach(se=>{if(Uu(g[se])&&Uu(i[se]))Tc(g[se],i[se]),(se==="navigation"||se==="pagination"||se==="scrollbar")&&"enabled"in i[se]&&!i[se].enabled&&ve(se);else{const K=i[se];(K===!0||K===!1)&&(se==="navigation"||se==="pagination"||se==="scrollbar")?K===!1&&ve(se):g[se]=i[se]}}),m.includes("controller")&&!F&&e.controller&&e.controller.control&&g.controller&&g.controller.control&&(e.controller.control=g.controller.control),r.includes("children")&&t&&I&&g.virtual.enabled&&(I.slides=t,I.update(!0)),r.includes("children")&&t&&g.loop&&(Q=!0),O&&A.init()&&A.update(!0),F&&(e.controller.control=g.controller.control),z&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),e.el.shadowEl.appendChild(l)),l&&(g.pagination.el=l),y.init(),y.render(),y.update()),U&&(e.isElement&&(!d||typeof d=="string")&&(d=document.createElement("div"),d.classList.add("swiper-scrollbar"),e.el.shadowEl.appendChild(d)),d&&(g.scrollbar.el=d),C.init(),C.updateSize(),C.setTranslate()),H&&(e.isElement&&((!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-next"),e.el.shadowEl.appendChild(s)),(!c||typeof c=="string")&&(c=document.createElement("div"),c.classList.add("swiper-button-prev"),e.el.shadowEl.appendChild(c))),s&&(g.navigation.nextEl=s),c&&(g.navigation.prevEl=c),x.init(),x.update()),r.includes("allowSlideNext")&&(e.allowSlideNext=i.allowSlideNext),r.includes("allowSlidePrev")&&(e.allowSlidePrev=i.allowSlidePrev),r.includes("direction")&&e.changeDirection(i.direction,!1),(q||Q)&&e.loopDestroy(),(ee||Q)&&e.loopCreate(),e.update()}function eie(e,t,i){if(!i)return null;const r=y=>{let x=y;return y<0?x=t.length+y:x>=t.length&&(x=x-t.length),x},s=e.value.isHorizontal()?{[e.value.rtlTranslate?"right":"left"]:`${i.offset}px`}:{top:`${i.offset}px`},{from:c,to:d}=i,l=e.value.params.loop?-t.length:0,m=e.value.params.loop?t.length*2:t.length,g=[];for(let y=l;y<m;y+=1)y>=c&&y<=d&&g.push(t[r(y)]);return g.map(y=>(y.props||(y.props={}),y.props.style||(y.props.style={}),y.props.swiperRef=e,y.props.style=s,Jn(y.type,{...y.props},y.children)))}const tie=e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())},FC={name:"Swiper",props:{tag:{type:String,default:"div"},wrapperTag:{type:String,default:"div"},modules:{type:Array,default:void 0},init:{type:Boolean,default:void 0},direction:{type:String,default:void 0},oneWayMovement:{type:Boolean,default:void 0},touchEventsTarget:{type:String,default:void 0},initialSlide:{type:Number,default:void 0},speed:{type:Number,default:void 0},cssMode:{type:Boolean,default:void 0},updateOnWindowResize:{type:Boolean,default:void 0},resizeObserver:{type:Boolean,default:void 0},nested:{type:Boolean,default:void 0},focusableElements:{type:String,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},preventInteractionOnTransition:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},edgeSwipeDetection:{type:[Boolean,String],default:void 0},edgeSwipeThreshold:{type:Number,default:void 0},autoHeight:{type:Boolean,default:void 0},setWrapperSize:{type:Boolean,default:void 0},virtualTranslate:{type:Boolean,default:void 0},effect:{type:String,default:void 0},breakpoints:{type:Object,default:void 0},spaceBetween:{type:[Number,String],default:void 0},slidesPerView:{type:[Number,String],default:void 0},maxBackfaceHiddenSlides:{type:Number,default:void 0},slidesPerGroup:{type:Number,default:void 0},slidesPerGroupSkip:{type:Number,default:void 0},slidesPerGroupAuto:{type:Boolean,default:void 0},centeredSlides:{type:Boolean,default:void 0},centeredSlidesBounds:{type:Boolean,default:void 0},slidesOffsetBefore:{type:Number,default:void 0},slidesOffsetAfter:{type:Number,default:void 0},normalizeSlideIndex:{type:Boolean,default:void 0},centerInsufficientSlides:{type:Boolean,default:void 0},watchOverflow:{type:Boolean,default:void 0},roundLengths:{type:Boolean,default:void 0},touchRatio:{type:Number,default:void 0},touchAngle:{type:Number,default:void 0},simulateTouch:{type:Boolean,default:void 0},shortSwipes:{type:Boolean,default:void 0},longSwipes:{type:Boolean,default:void 0},longSwipesRatio:{type:Number,default:void 0},longSwipesMs:{type:Number,default:void 0},followFinger:{type:Boolean,default:void 0},allowTouchMove:{type:Boolean,default:void 0},threshold:{type:Number,default:void 0},touchMoveStopPropagation:{type:Boolean,default:void 0},touchStartPreventDefault:{type:Boolean,default:void 0},touchStartForcePreventDefault:{type:Boolean,default:void 0},touchReleaseOnEdges:{type:Boolean,default:void 0},uniqueNavElements:{type:Boolean,default:void 0},resistance:{type:Boolean,default:void 0},resistanceRatio:{type:Number,default:void 0},watchSlidesProgress:{type:Boolean,default:void 0},grabCursor:{type:Boolean,default:void 0},preventClicks:{type:Boolean,default:void 0},preventClicksPropagation:{type:Boolean,default:void 0},slideToClickedSlide:{type:Boolean,default:void 0},loop:{type:Boolean,default:void 0},loopedSlides:{type:Number,default:void 0},loopPreventsSliding:{type:Boolean,default:void 0},rewind:{type:Boolean,default:void 0},allowSlidePrev:{type:Boolean,default:void 0},allowSlideNext:{type:Boolean,default:void 0},swipeHandler:{type:Boolean,default:void 0},noSwiping:{type:Boolean,default:void 0},noSwipingClass:{type:String,default:void 0},noSwipingSelector:{type:String,default:void 0},passiveListeners:{type:Boolean,default:void 0},containerModifierClass:{type:String,default:void 0},slideClass:{type:String,default:void 0},slideActiveClass:{type:String,default:void 0},slideVisibleClass:{type:String,default:void 0},slideNextClass:{type:String,default:void 0},slidePrevClass:{type:String,default:void 0},wrapperClass:{type:String,default:void 0},lazyPreloaderClass:{type:String,default:void 0},lazyPreloadPrevNext:{type:Number,default:void 0},runCallbacksOnInit:{type:Boolean,default:void 0},observer:{type:Boolean,default:void 0},observeParents:{type:Boolean,default:void 0},observeSlideChildren:{type:Boolean,default:void 0},a11y:{type:[Boolean,Object],default:void 0},autoplay:{type:[Boolean,Object],default:void 0},controller:{type:Object,default:void 0},coverflowEffect:{type:Object,default:void 0},cubeEffect:{type:Object,default:void 0},fadeEffect:{type:Object,default:void 0},flipEffect:{type:Object,default:void 0},creativeEffect:{type:Object,default:void 0},cardsEffect:{type:Object,default:void 0},hashNavigation:{type:[Boolean,Object],default:void 0},history:{type:[Boolean,Object],default:void 0},keyboard:{type:[Boolean,Object],default:void 0},mousewheel:{type:[Boolean,Object],default:void 0},navigation:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:void 0},parallax:{type:[Boolean,Object],default:void 0},scrollbar:{type:[Boolean,Object],default:void 0},thumbs:{type:Object,default:void 0},virtual:{type:[Boolean,Object],default:void 0},zoom:{type:[Boolean,Object],default:void 0},grid:{type:[Object],default:void 0},freeMode:{type:[Boolean,Object],default:void 0},enabled:{type:Boolean,default:void 0}},emits:["_beforeBreakpoint","_containerClasses","_slideClass","_slideClasses","_swiper","_freeModeNoMomentumRelease","activeIndexChange","afterInit","autoplay","autoplayStart","autoplayStop","autoplayPause","autoplayResume","autoplayTimeLeft","beforeDestroy","beforeInit","beforeLoopFix","beforeResize","beforeSlideChangeStart","beforeTransitionStart","breakpoint","changeDirection","click","disable","doubleTap","doubleClick","destroy","enable","fromEdge","hashChange","hashSet","init","keyPress","lock","loopFix","momentumBounce","navigationHide","navigationShow","navigationPrev","navigationNext","observerUpdate","orientationchange","paginationHide","paginationRender","paginationShow","paginationUpdate","progress","reachBeginning","reachEnd","realIndexChange","resize","scroll","scrollbarDragEnd","scrollbarDragMove","scrollbarDragStart","setTransition","setTranslate","slideChange","slideChangeTransitionEnd","slideChangeTransitionStart","slideNextTransitionEnd","slideNextTransitionStart","slidePrevTransitionEnd","slidePrevTransitionStart","slideResetTransitionStart","slideResetTransitionEnd","sliderMove","sliderFirstMove","slidesLengthChange","slidesGridLengthChange","snapGridLengthChange","snapIndexChange","swiper","tap","toEdge","touchEnd","touchMove","touchMoveOpposite","touchStart","transitionEnd","transitionStart","unlock","update","virtualUpdate","zoomChange"],setup(e,t){let{slots:i,emit:r}=t;const{tag:s,wrapperTag:c}=e,d=Fe("swiper"),l=Fe(null),m=Fe(!1),g=Fe(!1),y=Fe(null),x=Fe(null),C=Fe(null),I={value:[]},A={value:[]},O=Fe(null),F=Fe(null),z=Fe(null),U=Fe(null),{params:H,passedParams:q}=RC(e,!1);Ab(i,I,A),C.value=q,A.value=I.value;const ee=()=>{Ab(i,I,A),m.value=!0};H.onAny=function(se){for(var K=arguments.length,J=new Array(K>1?K-1:0),W=1;W<K;W++)J[W-1]=arguments[W];r(se,...J)},Object.assign(H.on,{_beforeBreakpoint:ee,_containerClasses(se,K){d.value=K}});const Q={...H};if(delete Q.wrapperClass,x.value=new um(Q),x.value.virtual&&x.value.params.virtual.enabled){x.value.virtual.slides=I.value;const se={cache:!1,slides:I.value,renderExternal:K=>{l.value=K},renderExternalUpdate:!1};Tc(x.value.params.virtual,se),Tc(x.value.originalParams.virtual,se)}zh(()=>{!g.value&&x.value&&(x.value.emitSlidesClasses(),g.value=!0);const{passedParams:se}=RC(e,!1),K=Jne(se,C.value,I.value,A.value,J=>J.props&&J.props.key);C.value=se,(K.length||m.value)&&x.value&&!x.value.destroyed&&Qne({swiper:x.value,slides:I.value,passedParams:se,changedParams:K,nextEl:O.value,prevEl:F.value,scrollbarEl:U.value,paginationEl:z.value}),m.value=!1}),ki("swiper",x),pn(l,()=>{Ir(()=>{tie(x.value)})}),Fn(()=>{y.value&&(Yne({el:y.value,nextEl:O.value,prevEl:F.value,paginationEl:z.value,scrollbarEl:U.value,swiper:x.value},H),r("swiper",x.value))}),ta(()=>{x.value&&!x.value.destroyed&&x.value.destroy(!0,!1)});function ve(se){return H.virtual?eie(x,se,l.value):(se.forEach((K,J)=>{K.props||(K.props={}),K.props.swiperRef=x,K.props.swiperSlideIndex=J}),se)}return()=>{const{slides:se,slots:K}=Ab(i,I,A);return Jn(s,{ref:y,class:kD(d.value)},[K["container-start"],Jn(c,{class:Xne(H.wrapperClass)},[K["wrapper-start"],ve(se),K["wrapper-end"]]),ID(e)&&[Jn("div",{ref:F,class:"swiper-button-prev"}),Jn("div",{ref:O,class:"swiper-button-next"})],MD(e)&&Jn("div",{ref:U,class:"swiper-scrollbar"}),AD(e)&&Jn("div",{ref:z,class:"swiper-pagination"}),K["container-end"]])}}},$C={name:"SwiperSlide",props:{tag:{type:String,default:"div"},swiperRef:{type:Object,required:!1},swiperSlideIndex:{type:Number,default:void 0,required:!1},zoom:{type:Boolean,default:void 0,required:!1},lazy:{type:Boolean,default:!1,required:!1},virtualIndex:{type:[String,Number],default:void 0}},setup(e,t){let{slots:i}=t,r=!1;const{swiperRef:s}=e,c=Fe(null),d=Fe("swiper-slide"),l=Fe(!1);function m(x,C,I){C===c.value&&(d.value=I)}Fn(()=>{!s||!s.value||(s.value.on("_slideClass",m),r=!0)}),C1(()=>{r||!s||!s.value||(s.value.on("_slideClass",m),r=!0)}),zh(()=>{!c.value||!s||!s.value||(typeof e.swiperSlideIndex<"u"&&(c.value.swiperSlideIndex=e.swiperSlideIndex),s.value.destroyed&&d.value!=="swiper-slide"&&(d.value="swiper-slide"))}),ta(()=>{!s||!s.value||s.value.off("_slideClass",m)});const g=De(()=>({isActive:d.value.indexOf("swiper-slide-active")>=0,isVisible:d.value.indexOf("swiper-slide-visible")>=0,isPrev:d.value.indexOf("swiper-slide-prev")>=0,isNext:d.value.indexOf("swiper-slide-next")>=0}));ki("swiperSlide",g);const y=()=>{l.value=!0};return()=>Jn(e.tag,{class:kD(`${d.value}`),ref:c,"data-swiper-slide-index":typeof e.virtualIndex>"u"&&s&&s.value&&s.value.params.loop?e.swiperSlideIndex:e.virtualIndex,onLoadCapture:y},e.zoom?Jn("div",{class:"swiper-zoom-container","data-swiper-zoom":typeof e.zoom=="number"?e.zoom:void 0},[i.default&&i.default(g.value),e.lazy&&!l.value&&Jn("div",{class:"swiper-lazy-preloader"})]):[i.default&&i.default(g.value),e.lazy&&!l.value&&Jn("div",{class:"swiper-lazy-preloader"})])}},Kx=e=>{var t;return Array.isArray(e.title)?e.title.map(ho).join(", "):(t=e.title)!=null&&t.length?ho(e.title):"(No Title)"},nie=e=>{const{primaryHandlerId:t}=e;return t?Nc(t):null},iie=e=>({id:e.objectId,objectId:e.objectId,primaryHandlerId:e.primaryHandlerId??null,title:Kx(e),thumb:{src:nie(e),alt:Kx(e)}});function rie(e){const{fileAssets:t,objectId:i}=e,r=[];if(!t)return r;const s=t-1;for(let c=0;c<s;c++){const d={id:`${i}-placeholder-${c}`,objectId:void 0,title:void 0,primaryHandlerId:void 0,thumb:{src:void 0,alt:void 0},isChildSlide:!0,isPlaceholder:!0,parentObjectId:i,parentTitle:Kx(e),childIndex:c,totalChildren:s};r.push(d)}return r}function sie(e){const{id:t,relatedAssetTitle:i,primaryHandler:r}=e,s=Array.isArray(i)?i[0]:i??"No Title";return{id:`${t}-related-asset`,objectId:t,title:s,primaryHandlerId:r,thumb:{src:r?Nc(r):null,alt:s}}}function aie({fileId:e,parentObjectId:t,parentTitle:i}){return{id:`${t}-file-${e}`,objectId:t,title:i,primaryHandlerId:e,thumb:{src:e?Nc(e):null,alt:i}}}function oie(e){const t=[],i=r=>r&&typeof r=="object"&&r.fileId;return Object.values(e).forEach(r=>{Array.isArray(r)&&r.forEach(s=>{i(s)&&t.push(s)})}),t}function lie(e){return Object.entries((e==null?void 0:e.relatedAssets)??{}).map(([t,i])=>({...i,id:t}))}async function cie(e){const t=await Un.getAsset(e);if(!t)throw new Error("Asset not found. Cannot fetch child slides.");const i=oie(t),r=lie(t);return[...i.filter(c=>!c.isPrimary).map(c=>({fileId:c.fileId,parentObjectId:e,parentTitle:Xu(t)})).map(aie),...r.map(sie)]}function uie(e){const t=es([]);function i(r){const s=iie(r);t.push(s);const c=rie(r);t.push(...c),cie(r.objectId).then(d=>{c.forEach((l,m)=>{const g=d[m];if(!g)throw new Error("Child slide not found, cannot replace placeholder. There may be a mismatch between the number of placeholders and the number of child slides.");const y=t.findIndex(x=>x.id===l.id);t[y]=g})})}return e.forEach(r=>{i(r)}),{slides:t,createSlidesForMatch:i}}const die=ue("span",{class:"sr-only"},"Toggle fullscreen",-1),hie={class:"not-sr-only hidden md:inline-block"},fie=lt({__name:"FullscreenButton",props:{isFullscreen:{type:Boolean}},emits:["click"],setup(e){return(t,i)=>(B(),fe("button",{class:Mn(["fullscreen-button inline-flex gap-1 p-2 md:px-4 items-center justify-center rounded-md text-xs uppercase tracking-wide whitespace-nowrap group transition-all",{" text-neutral-900 bg-transparent-black-100 hover:bg-blue-600 hover:text-blue-100":!t.isFullscreen,"bg-transparent-white-300 text-neutral-500 hover:bg-blue-600 hover:text-blue-100":t.isFullscreen}]),onClick:i[0]||(i[0]=r=>t.$emit("click",r))},[t.isFullscreen?(B(),ze(le(z8),{key:1,class:"fill-neutral-500 group-hover:fill-neutral-100 transition-all"})):(B(),ze(le(ij),{key:0,class:"fill-neutral-900 group-hover:fill-neutral-200 transition-all"})),die,ue("span",hie,xt(t.isFullscreen?"Exit":"")+" Fullscreen ",1)],2))}});const pie={class:"font-bold"},mie={class:"w-full h-full border"},gie={key:1,class:"w-full h-full flex items-center justify-center -mt-12"},vie={class:"border border-neutral-400 aspect-video flex items-center justify-center w-full relative"},_ie={key:0,class:"absolute bottom-0 left-0 w-6 h-6 text-xs z-10 flex items-center justify-center bg-transparent-white-800 text-neutral-900"},yie={class:"flex flex-col items-center justify-center text-xs text-center px-4 py-2"},Rw=lt({__name:"SearchResultsGallery",props:{totalResults:{},matches:{},status:{}},emits:["loadMore"],setup(e,{emit:t}){const i=e,r=t,s=[Zne,LC,Kne,OC,qne],c=Fe(null),d=Fe(null),l=Fe(null),{isFullscreen:m,toggle:g}=WN(l),{slides:y,createSlidesForMatch:x}=uie([]),C=Fe(0),I=De(()=>y[C.value]),A=U=>{c.value=U},O=U=>{d.value=U},F=U=>{C.value=U.activeIndex,c.value&&c.value.slideTo(U.activeIndex)},z=U=>{var H;C.value=U.activeIndex,(H=d.value)==null||H.slideTo(U.activeIndex)};return pn(()=>[...i.matches??[]],(U,H)=>{if(!U)return;E$(U,H??[]).forEach(x)},{immediate:!0}),pn(C,()=>{if(!i.matches||i.status==="fetching")return;const U=i.matches.length<i.totalResults,H=C.value>=y.length-10;U&&H&&r("loadMore")}),(U,H)=>(B(),fe("div",{ref_key:"galleryEl",ref:l,class:Mn(["search-results-gallery",{"h-screen flex flex-col items-center justify-center":le(m)}])},[d.value?(B(),fe("div",{key:0,class:Mn(["flex items-center justify-between w-full gap-4",{"p-4":le(m),"py-2":!le(m)}])},[ue("h2",pie,[I.value.objectId?(B(),ze(ts,{key:0,to:le(Cl)(I.value.objectId),class:Mn(["transition-colors hover:text-blue-600 !no-underline",{"text-neutral-300 text-4xl ":le(m),"text-xl text-blue-700 ":!le(m)}])},{default:Ce(()=>[Ot(xt(I.value.title),1)]),_:1},8,["to","class"])):st("",!0)]),_e(fie,{isFullscreen:le(m),onClick:le(g)},null,8,["isFullscreen","onClick"])],2)):st("",!0),_e(le(FC),{class:"main-swiper flex-1",modules:s,slidesPerView:1,spaceBetween:50,thumbs:{swiper:c.value},keyboard:{enabled:!0,onlyInViewport:!1},onSwiper:O,onSlideChange:F},{default:Ce(()=>[(B(!0),fe(Ut,null,$n(le(y),q=>(B(),ze(le($C),{key:q.id},{default:Ce(({isActive:ee,isPrev:Q,isNext:ve})=>[ue("div",mie,[q.primaryHandlerId&&(ee||Q||ve)?(B(),ze(wP,{key:0,class:"border w-full h-full",fileHandlerId:q.primaryHandlerId},null,8,["fileHandlerId"])):(B(),fe("div",gie,[_e(em)]))])]),_:2},1024))),128))]),_:1},8,["thumbs"]),_e(le(FC),{class:"thumbs-swiper w-full",modules:[le(OC),le(LC)],watchSlidesProgress:!0,slidesPerView:10,centeredSlides:!0,scrollbar:{draggable:!0,dragSize:32},spaceBetween:4,onSwiper:A,onTouchEnd:z,onScrollbarDragEnd:z},{default:Ce(()=>[(B(!0),fe(Ut,null,$n(le(y),(q,ee)=>(B(),ze(le($C),{key:q.id},{default:Ce(()=>[ue("div",vie,[ee!==C.value?(B(),fe("div",_ie,xt(ee+1),1)):st("",!0),q.thumb.src?(B(),ze(td,{key:1,src:q.thumb.src,alt:q.thumb.alt??"Loading...",class:"swiper-lazy object-cover w-full h-full"},null,8,["src","alt"])):(B(),ze(em,{key:2}))])]),_:2},1024))),128))]),_:1},8,["modules"]),d.value?(B(),fe("div",{key:1,class:Mn(["flex items-center justify-center mb-1 relative py-4",{"text-neutral-50":le(m),"text-neutral-900":!le(m)}])},[_e(oi,{variant:"tertiary",class:Mn(["!m-0 bg-transparent hover:!bg-transparent-white-500",{"opacity-30":C.value===0}]),onClick:H[0]||(H[0]=q=>d.value.slidePrev())},{default:Ce(()=>[_e(le(ek),{class:Mn({"text-neutral-50":le(m),"text-neutral-900":!le(m)})},null,8,["class"])]),_:1},8,["class"]),ue("div",yie,xt(C.value+1),1),_e(oi,{variant:"tertiary",class:"!m-0 bg-transparent hover:!bg-transparent-white-500",onClick:H[1]||(H[1]=q=>d.value.slideNext())},{default:Ce(()=>[_e(le(tk),{class:Mn({"text-neutral-50 ":le(m),"text-neutral-900":!le(m)})},null,8,["class"])]),_:1})],2)):st("",!0)],2))}});const bie={class:"results-count"},xie={key:0,class:"flex gap-2 items-baseline"},wie={class:"text-sm text-neutral-500"},Sie={key:1,class:"text-sm text-neutral-500"},Xx=lt({__name:"ResultsCount",props:{showingCount:{},total:{},fetchStatus:{}},emits:["loadMore","loadAll"],setup(e,{emit:t}){const i=e,r=t;function s(){if(i.fetchStatus!=="fetching"){if(i.total-i.showingCount<1e3){r("loadAll");return}r("loadMore")}}return(c,d)=>(B(),fe("div",bie,[c.total>0?(B(),fe("div",xie,[ue("p",wie,[ue("b",null,xt(c.showingCount),1),Ot(" of "),ue("b",null,xt(c.total),1),Ot(" results ")]),c.showingCount<c.total?(B(),ze(oi,{key:0,variant:"tertiary",onClick:s},{default:Ce(()=>[En(c.$slots,"loadMoreButtonLabel",{},()=>[Ot(" Load "+xt(c.total-c.showingCount<1e3?"All":"More"),1)]),vs(_e(Jo,{class:"w-3 h-3 text-blue-600 ml-1"},null,512),[[_a,c.fetchStatus==="fetching"]])]),_:3})):st("",!0)])):st("",!0),c.fetchStatus!=="fetching"&&c.total===0?(B(),fe("p",Sie," No results found. ")):st("",!0)]))}}),Tie={class:"search-results-sort-select flex items-baseline gap-2"},Eie=ue("label",{for:"location",class:"sr-only"},"Sort",-1),Cie=["value"],Iie=["value","disabled"],Aie=lt({__name:"SearchResultsSortSelect",props:{sortOptions:{},selectedSortOption:{},searchQuery:{}},emits:["sortOptionChange"],setup(e,{emit:t}){const i=t;function r(s){const c=s.target.value??null;i("sortOptionChange",c)}return(s,c)=>(B(),fe("div",Tie,[Eie,ue("select",{id:"sort",name:"sort",class:"block w-full rounded-md border-0 py-2 pl-3 pr-10 text-neutral-900 ring-1 ring-inset ring-neutral-300 focus:ring-2 focus:ring-indigo-600 text-sm sm:leading-6 max-w-full bg-transparent-white-800",value:s.selectedSortOption,onChange:r},[(B(!0),fe(Ut,null,$n(s.sortOptions,(d,l)=>(B(),fe("option",{key:l,value:l,disabled:l==le(Ps).BEST_MATCH&&!s.searchQuery},xt(d),9,Iie))),128))],40,Cie)]))}}),Mie=ue("p",{class:"mb-2"},"Something went wrong loading these search results.",-1),kie=ue("span",{class:"uppercase text-xs mr-4"},"Search Text",-1),Pie=ue("span",{class:"uppercase text-xs mr-4"},"Sort Type",-1),Die=ue("p",{class:"mt-2"},[Ot(" Try reloading, and if the problem persists, please contact "),ue("a",{href:"mailto:latistecharch@umn.edu"},"latistecharch@umn.edu"),Ot(" for help. ")],-1),Lie=lt({__name:"SearchErrorNotification",setup(e){const t=Pr();return(i,r)=>(B(),ze(Im,{type:"danger",title:"Error",class:"search-results-page__search-error-notification"},{default:Ce(()=>{var s;return[Mie,ue("div",null,[kie,ue("q",null,xt(((s=le(t).searchEntry)==null?void 0:s.searchText)??le(t).query),1)]),ue("div",null,[Pie,ue("q",null,xt(le(t).sort??"Default"),1)]),Die]}),_:1}))}}),Oie=ue("span",{class:"sr-only"},"Add Search Results",-1),Rie={class:"flex-1 flex gap-4 items-center"},Fie=ue("label",{class:"sr-only"},"Add to Drawer",-1),$ie=ue("option",{disabled:"",value:""},"-- Select a Drawer --",-1),zie=["value"],Nie=ue("p",{class:"my-4 before:absolute before:top-1/2 before:-translate-y-1/2 before:block before:h-[1px] before:w-full before:left-0 before:bg-transparent-black-100 relative leading-none text-center"},[ue("span",{class:"bg-neutral-50 relative z-10 px-2"},"or")],-1),Bie=lt({__name:"AddSearchResultsToDrawerButton",setup(e){const t=Fe(!1),i=Fe(""),r=Fe(""),s=Fe("idle"),c=Ha(),d=Pr(),l=De(()=>r.value.trim()&&!c.drawers.some(y=>y.title===r.value));async function m(y){const x=typeof y=="string"?Number.parseInt(y):y;if(isNaN(x))throw new Error("Cannot add to drawer. Drawer ID is not a number.");t.value=!1,s.value="fetching";const C=d.matches.map(I=>I.objectId);await c.addAssetListToDrawer(C,x),s.value="idle",r.value=""}async function g(){if(!l.value)throw new Error(`Cannot create drawer. Drawer name '${r.value}' is invalid'.`);s.value="fetching",t.value=!1;const y=await c.createDrawer(r.value);m(y.id)}return(y,x)=>(B(),fe(Ut,null,[_e($c,Hr({class:"search-results-page__add-search-results-to-drawer-button",title:"Add Search Results to Drawer"},y.$attrs,{disabled:le(d).matches.length===0,onClick:x[0]||(x[0]=C=>t.value=!0)}),{default:Ce(()=>[s.value==="fetching"?(B(),ze(le(Jo),{key:0})):(B(),ze(le(QM),{key:1})),Oie]),_:1},16,["disabled"]),_e(Vc,{type:"info",label:"Add Search Results to Drawer",isOpen:t.value,class:"max-w-lg",onClose:x[4]||(x[4]=C=>t.value=!1)},{default:Ce(()=>[ue("div",null,[ue("form",{class:"flex items-center justify-between gap-2",onSubmit:x[2]||(x[2]=Uo(C=>m(i.value),["prevent"]))},[ue("div",Rie,[Fie,vs(ue("select",{"onUpdate:modelValue":x[1]||(x[1]=C=>i.value=C),class:Mn(["border border-neutral-200 rounded w-full text-sm",{"text-neutral-400":!i.value}])},[$ie,(B(!0),fe(Ut,null,$n(le(c).drawers,C=>(B(),fe("option",{key:C.id,value:C.id},xt(C.title),9,zie))),128))],2),[[Nh,i.value]])]),_e(oi,{class:"text-sm",type:"submit",disabled:!i.value},{default:Ce(()=>[Ot(" Add to Drawer ")]),_:1},8,["disabled"])],32),Nie,ue("form",{class:"flex items-center justify-between gap-2",onSubmit:Uo(g,["prevent"])},[_e(Aw,{modelValue:r.value,"onUpdate:modelValue":x[3]||(x[3]=C=>r.value=C),class:"flex-1 border border-neutral-200 rounded",inputClass:"bg-white placeholder-neutral-400",labelHidden:!0},null,8,["modelValue"]),_e(oi,{type:"submit",class:"text-sm",disabled:!l.value},{default:Ce(()=>[Ot(" Create Drawer ")]),_:1},8,["disabled"])],32)])]),_:1},8,["isOpen"])],64))}}),jie={key:0,class:"search-results-page__did-you-mean-suggestions"},Vie=ue("p",null,"Did you mean?",-1),Uie=lt({__name:"DidYouMeanSuggestions",props:{searchTerm:{}},setup(e){const t=e,i=Fe({}),r=Pr(),s=_o(),c=De(()=>Object.keys(i.value).length),d=De(()=>Object.entries(i.value).reduce((g,[y,x])=>l(g,y,x),t.searchTerm)),l=(g,y,x)=>{const C=new RegExp(`\\b${y}\\b`,"ig");return g.replace(C,x)};async function m(){r.query=d.value;const g=await r.getSearchId();s.push({name:"search",params:{searchId:g}})}return pn(()=>t.searchTerm,async()=>{t.searchTerm&&(i.value=await Un.getDidYouMeanSuggestions(t.searchTerm))},{immediate:!0}),(g,y)=>c.value?(B(),fe("div",jie,[Vie,ue("button",{class:"text-blue-500 hover:underline italic",onClick:m},xt(d.value),1)])):st("",!0)}}),Hie={class:"px-4"},Gie={class:"flex justify-between items-center my-8"},Wie={key:1,class:"text-4xl font-bold"},qie={key:0},Zie={key:1},Kie={class:"sm:flex justify-between items-center bg-transparent-black-50 rounded-md mb-4 p-2 flex-wrap"},Xie={key:0,class:"flex items-center"},Yie=lt({__name:"SearchResultsPage",props:{searchId:{},objectId:{default:null},resultsView:{default:void 0}},setup(e){const t=e,i=bi(),r=Pr(),s=Ju(),c=_o(),d=De(()=>{var A;return((A=r.searchEntry)==null?void 0:A.searchText)??r.query}),l=Zn.instance.base.url,m=De(()=>`${l}/search/${t.resultsView}/${r.searchId}`),g=Fe(!1);r.onBeforeNewSearch(()=>{g.value=!1}),r.onAfterNewSearch(()=>{g.value=!0}),pn(()=>t.searchId,()=>r.search(t.searchId),{immediate:!0});const y=A=>Ix.includes(A.id);function x(A){if(!y(A))throw new Error(`Invalid tab id: ${A.id}`);r.setResultsView(A.id),c.replace({query:{...s.query,resultsView:A.id}})}async function C(A){await r.setSortOption(A),c.push({name:"search",params:{searchId:r.searchId},query:{...s.query,sort:A}})}function I(A){const O=s.query.sort;return A===""&&(!O||O===Ps.BEST_MATCH)?Ps.TITLE:O||Ps.BEST_MATCH}return Fn(()=>{const A=t.resultsView||r.resultsView||"grid";r.sort=I(r.currentSearchTerm??r.query),r.setResultsView(A),c.replace({query:{...s.query,resultsView:A}})}),pn([()=>t.objectId,()=>r.status],([A,O])=>{!A||O==="fetching"||Ir(()=>{const F=document.getElementById(`object-${A}`);F&&F.scrollIntoView({block:"center"})})},{immediate:!0}),(A,O)=>(B(),ze(yo,{class:"search-results-page"},{"custom-header":Ce(()=>[le(i).customHeaderMode==1?(B(),ze(Ll,{key:0})):st("",!0)]),default:Ce(()=>[ue("div",Hie,[le(r).status==="error"?(B(),ze(Lie,{key:0})):(B(),fe(Ut,{key:1},[ue("div",Gie,[le(r).browsingCollectionId?(B(),ze(jJ,{key:0,collectionId:le(r).browsingCollectionId},null,8,["collectionId"])):le(r).isReady?(B(),fe("h2",Wie,[d.value?(B(),fe("q",qie,xt(d.value),1)):(B(),fe("span",Zie,"Search Results"))])):(B(),ze(No,{key:2,class:"!w-1/2 !h-12"}))]),le(r).isReady?(B(),ze(Uie,{key:0,searchTerm:le(r).currentSearchTerm},null,8,["searchTerm"])):st("",!0),_e(KP,{labelsClass:"sticky top-14 z-20 search-results-page__tabs -mx-4 px-4 border-b border-neutral-200 pt-4",activeTabId:le(r).resultsView,onTabChange:x},{default:Ce(()=>{var F,z;return[ue("div",Kie,[_e(Xx,{class:"mb-2 sm:mb-0",fetchStatus:le(r).status,showingCount:le(r).matches.length,total:le(r).totalResults??0,onLoadMore:le(r).loadMore,onLoadAll:O[0]||(O[0]=U=>le(r).loadMore({loadAll:!0}))},null,8,["fetchStatus","showingCount","total","onLoadMore"]),le(r).isReady?(B(),fe("div",Xie,[["map","timeline"].includes(le(r).resultsView)?st("",!0):(B(),ze(Aie,{key:0,sortOptions:le(r).sortOptions,selectedSortOption:le(r).sort,searchQuery:((F=le(r).searchEntry)==null?void 0:F.searchText)??le(r).query,class:"mr-1",onSortOptionChange:C},null,8,["sortOptions","selectedSortOption","searchQuery"])),(z=le(i).currentUser)!=null&&z.canManageDrawers?(B(),ze(Bie,{key:1})):st("",!0),["map","timeline","gallery"].includes(le(r).resultsView)?(B(),ze(Iw,{key:2,url:m.value},null,8,["url"])):st("",!0)])):st("",!0)]),_e(Ro,{id:"grid",label:"Grid"},{default:Ce(()=>{var U;return[_e(JJ,{totalResults:le(r).totalResults,matches:le(r).matches,status:le(r).status,showAddToDrawerButton:(U=le(i).currentUser)==null?void 0:U.canManageDrawers,onLoadMore:O[1]||(O[1]=()=>le(r).loadMore())},null,8,["totalResults","matches","status","showAddToDrawerButton"])]}),_:1}),_e(Ro,{id:"list",label:"List"},{default:Ce(()=>[_e(dQ,{totalResults:le(r).totalResults,matches:le(r).matches,status:le(r).status,onLoadMore:O[2]||(O[2]=()=>le(r).loadMore())},null,8,["totalResults","matches","status"])]),_:1}),_e(Ro,{id:"timeline",label:"Timeline"},{default:Ce(()=>[le(r).totalResults&&le(r).status==="success"?(B(),ze(Dw,{key:0,totalResults:le(r).totalResults,matches:le(r).matches,status:le(r).status,onLoadMore:O[3]||(O[3]=()=>le(r).loadMore())},null,8,["totalResults","matches","status"])):st("",!0)]),_:1}),_e(Ro,{id:"map",label:"Map"},{default:Ce(()=>[le(r).isReady?(B(),ze(Lw,{key:0,totalResults:le(r).totalResults,matches:le(r).matches,status:le(r).status,onLoadMore:O[4]||(O[4]=()=>le(r).loadMore())},null,8,["totalResults","matches","status"])):st("",!0)]),_:1}),_e(Ro,{id:"gallery",label:"Gallery"},{default:Ce(()=>[g.value?(B(),ze(Rw,{key:0,totalResults:le(r).totalResults??1/0,matches:le(r).matches,status:le(r).status,onLoadMore:O[5]||(O[5]=()=>le(r).loadMore())},null,8,["totalResults","matches","status"])):st("",!0)]),_:1}),["grid","list"].includes(le(r).resultsView)&&(le(r).totalResults??0)>6?(B(),ze(Xx,{key:0,class:"mt-4",fetchStatus:le(r).status,showingCount:le(r).matches.length,total:le(r).totalResults??0,onLoadMore:le(r).loadMore,onLoadAll:O[6]||(O[6]=U=>le(r).loadMore({loadAll:!0}))},null,8,["fetchStatus","showingCount","total","onLoadMore"])):st("",!0)]}),_:1},8,["activeTabId"])],64))])]),_:1}))}});function DD(){const e=KF();if(!e)throw new Error("Cannot reset all stores. Pinia not found.");e._s.forEach(t=>t.$reset())}const Jie=e=>(ja("data-v-955bd906"),e=e(),Va(),e),Qie={class:"px-4"},ere=Jie(()=>ue("header",{class:"font-bold text-center mb-8 pb-4 border-b border-neutral-900"},[ue("h2",{class:"text-2xl capitalize"},"Login")],-1)),tre={key:0,class:"text-red-500 text-sm italic mb-6 capitalize bg-red-50 p-2 rounded-md border border-red-200 text-center"},nre={class:"flex flex-col gap-6 mb-12"},ire={key:0,class:"text-red-500 text-sm italic mt-2"},rre={class:"border-none",type:"button"},sre={key:0,class:"text-red-600 text-sm italic mt-2"},are={key:1,class:"text-center mt-4 text-sm"},ore=["href"],lre=lt({__name:"LocalLoginPage",props:{redirectURL:{default:Zn.instance.base.path}},setup(e){const t=e,i=Fe(""),r=Fe(""),s=Fe(!1),c=Fe(!1),d=es({username:"",password:"",form:""}),l=Fe(!1),m=bi(),g=Ha(),y=_o(),x=async()=>{if(d.username="",d.password="",l.value=!1,i.value||(d.username="Username required"),r.value||(d.password="Password required"),!i.value||!r.value)return;c.value=!0;const{status:I,message:A}=await Un.loginAsGuest({username:i.value,password:r.value});if(r.value="",c.value=!1,I==="error"){d.form=A,l.value=!0;return}I==="success"&&(d.form="",Un.clearCache(),DD(),await m.init(),await g.init(),y.push(t.redirectURL))},C=De(()=>encodeURIComponent(t.redirectURL));return Fn(()=>{m.isLoggedIn&&y.push(t.redirectURL)}),(I,A)=>(B(),ze(yo,{class:"local-login-page"},{"custom-header":Ce(()=>[le(m).customHeaderMode==1?(B(),ze(Ll,{key:0})):st("",!0)]),default:Ce(()=>[ue("div",Qie,[ue("section",{class:Mn(["max-w-md border border-neutral-900 rounded-lg mx-auto my-12 p-8",{"has-form-error":l.value}])},[ere,ue("form",{onSubmit:Uo(x,["prevent"])},[d.form?(B(),fe("p",tre,xt(d.form),1)):st("",!0),ue("div",nre,[ue("div",null,[_e(co,{id:"username",modelValue:i.value,"onUpdate:modelValue":A[0]||(A[0]=O=>i.value=O),label:"Username",inputClass:{"!border-red-500 !bg-red-50":!!d.username},type:"string","aria-required":"true"},null,8,["modelValue","inputClass"]),d.username?(B(),fe("p",ire,xt(d.username),1)):st("",!0)]),ue("div",null,[_e(co,{id:"password",modelValue:r.value,"onUpdate:modelValue":A[3]||(A[3]=O=>r.value=O),label:"Password",inputClass:{"!border-red-500 !bg-red-50":!!d.password},type:s.value?"text":"password","aria-required":"true"},{append:Ce(()=>[ue("button",rre,[s.value?(B(),ze(le(G8),{key:1,onClick:A[2]||(A[2]=O=>s.value=!1)})):(B(),ze(le(Y8),{key:0,onClick:A[1]||(A[1]=O=>s.value=!0)}))])]),_:1},8,["modelValue","inputClass","type"]),d.password?(B(),fe("p",sre,xt(d.password),1)):st("",!0)])]),_e(oi,{variant:"primary",type:"submit",class:Mn(["w-full",{"cursor-not-allowed opacity-50 !border-neutral-300":!i.value||!r.value}]),disabled:!i.value||!r.value},{default:Ce(()=>[Ot(" Login "),c.value?(B(),ze(le(Jo),{key:0,class:"animate-spin ml-2 h-4 w-4"})):st("",!0)]),_:1},8,["class","disabled"]),le(m).instance.useCentralAuth&&le(m).instance.centralAuthLabel?(B(),fe("div",are,[ue("a",{href:`${le(Zn).instance.base.url}/loginManager/remoteLogin/?redirect=${C.value}`}," Sign In with "+xt(le(m).instance.centralAuthLabel)+" Login ",9,ore)])):st("",!0)],32)],2)])]),_:1}))}});const cre=ln(lre,[["__scopeId","data-v-955bd906"]]),ure={key:0,class:"static-content-page__content p-4 lg:p-8 mx-auto flex-1 w-full max-w-screen-xl"},dre=["href"],hre={class:"prose prose-neutral mx-auto"},fre={class:"text-4xl font-bold text-center"},pre=lt({__name:"StaticContentPage",props:{pageId:{}},setup(e){const t=bi(),i=e,r=Zn.instance.base.path,s=Fe(null),c=De(()=>{var d,l;return((d=t.currentUser)==null?void 0:d.isAdmin)||((l=t.currentUser)==null?void 0:l.isSuperAdmin)});return pn(()=>i.pageId,async()=>{s.value=await Un.getStaticPage(i.pageId)},{immediate:!0}),(d,l)=>(B(),ze(yo,{class:"static-content-page"},{"custom-header":Ce(()=>[le(t).customHeaderMode>0?(B(),ze(Ll,{key:0})):st("",!0)]),footer:Ce(()=>[le(t).customFooter?(B(),ze(yP,{key:0})):st("",!0)]),default:Ce(()=>[s.value?(B(),fe("div",ure,[c.value?(B(),fe("a",{key:0,href:`${le(r)}/instances/editPage/${d.pageId}`,class:"float-right uppercase text-xs font-medium bg-blue-100 px-2 py-1 rounded-md no-underline hover:bg-blue-600 hover:text-blue-100 hover:no-underline"}," Edit Page ",8,dre)):st("",!0),ue("div",hre,[ue("h1",fre,xt(s.value.title||"Untitled"),1),_e(qo,{html:s.value.content??"",class:"w-full"},null,8,["html"])])])):st("",!0)]),_:1}))}});const mre=ln(pre,[["__scopeId","data-v-5f94f789"]]),gre={class:"p-8"},vre={class:"text-8xl font-bold text-neutral-200"},_re={class:"text-4xl mb-8"},yre={class:"my-4"},zC=lt({__name:"ErrorPage",props:{errorCode:{default:404}},setup(e){const t={400:{message:"Bad Request",detailedMessage:"We couldn't understand your request."},404:{message:"Page not found",detailedMessage:"We couldn't find this page."},500:{message:"Internal Server Error",detailedMessage:"Something went wrong on our end."}};function i(c){var d;return((d=t[c])==null?void 0:d.message)||"Unknown Error"}function r(c){var d;return((d=t[c])==null?void 0:d.detailedMessage)||"Something went wrong."}return qP(i(e.errorCode)),(c,d)=>(B(),ze(yo,{class:"error-page"},{default:Ce(()=>[ue("div",gre,[ue("h1",vre,xt(c.errorCode),1),ue("h2",_re,xt(i(c.errorCode)),1),ue("p",yre,xt(r(c.errorCode)),1),_e(oi,{href:le(Zn).instance.base.url,icon:"home",iconPosition:"start"},{default:Ce(()=>[Ot(" Go Home ")]),_:1},8,["href"])])]),_:1}))}}),bre=ue("span",{class:"sr-only"},"Delete drawer",-1),xre=lt({__name:"DeleteDrawerButton",props:{drawer:{}},setup(e){const t=e,i=Ha(),r=Fe(!1);async function s(){i.deleteDrawer(t.drawer.id)}return(c,d)=>(B(),fe(Ut,null,[ue("button",Hr({class:"all-drawers-page__delete-drawer-button px-2 py-4 inline-flex items-center justify-center text-transparent-black-400 hover:text-neutral-900",type:"button"},c.$attrs,{onClick:d[0]||(d[0]=l=>r.value=!0)}),[bre,_e(le(Em),{class:"!w-5 !h-5"})],16),_e(Mw,{isOpen:r.value,title:"Delete Drawer",type:"danger",confirmLabel:"Delete",onClose:d[1]||(d[1]=l=>r.value=!1),onConfirm:s},{default:Ce(()=>[ue("p",null,[Ot(" Are you sure you want to delete drawer "),ue("b",null,xt(c.drawer.title),1),Ot(" ? This action cannot be undone. ")])]),_:1},8,["isOpen"])],64))}}),wre={class:"flex justify-end gap-2 items-center"},Sre=lt({__name:"CreateDrawerButton",setup(e){const t=Fe(!1),i=Fe(""),r=Fe(!1),s=Ha(),c=De(()=>i.value.trim()),d=De(()=>i.value.length>0),l=De(()=>!s.drawers.some(C=>C.title.trim()===c.value)),m=De(()=>d.value&&l.value);function g(){s.createDrawer(c.value),t.value=!1,y()}function y(){i.value="",r.value=!1}function x(){t.value=!1,y()}return(C,I)=>(B(),fe(Ut,null,[_e(oi,{class:"all-drawers-page__create-drawer-button",onClick:I[0]||(I[0]=A=>t.value=!0)},{default:Ce(()=>[Ot("Create Drawer")]),_:1}),_e(Vc,{isOpen:t.value,label:"Create Drawer",class:"max-w-lg mx-auto m-4",onClose:x},{default:Ce(()=>[ue("form",{class:"flex flex-col gap-6",onSubmit:Uo(g,["prevent"])},[_e(Aw,{modelValue:i.value,"onUpdate:modelValue":I[1]||(I[1]=A=>i.value=A)},null,8,["modelValue"]),ue("div",wre,[_e(oi,{variant:"tertiary",onClick:x},{default:Ce(()=>[Ot("Cancel")]),_:1}),_e(oi,{type:"submit",variant:"primary",disabled:!m.value},{default:Ce(()=>[Ot(" Create ")]),_:1},8,["disabled"])])],32)]),_:1},8,["isOpen"])],64))}}),Tre=e=>(ja("data-v-1ef29c24"),e=e(),Va(),e),Ere={class:"p-8 px-4"},Cre=Tre(()=>ue("h1",{class:"text-4xl font-bold my-8"},"Drawers",-1)),Ire={key:0,class:"mb-4"},Are={key:"no-drawers"},Mre={class:"transition-colors duration-150"},kre=lt({__name:"AllDrawersPage",setup(e){bm(m=>({"6e73fb12":i.value,"6e665546":l.value}));const t=Fe(null),i=Fe(1),r=bi(),s=Ha(),c=De(()=>r.currentUser),d=De(()=>[...s.drawers].sort((m,g)=>m.title.localeCompare(g.title)));Q_(t,m=>{const[g]=m,{width:y}=g.contentRect;y<640&&(i.value=1),y<768&&(i.value=2),y<1024&&(i.value=3),y>=1024&&(i.value=4)});const l=De(()=>Math.ceil(d.value.length/i.value));return(m,g)=>(B(),ze(yo,{class:"all-drawers-page"},{"custom-header":Ce(()=>[le(r).customHeaderMode==1?(B(),ze(Ll,{key:0})):st("",!0)]),default:Ce(()=>{var y;return[ue("div",Ere,[Cre,(y=c.value)!=null&&y.canManageDrawers?(B(),fe("nav",Ire,[_e(Sre)])):st("",!0),ue("div",{ref_key:"gridContainer",ref:t,class:"grid grid-cols-2 gap-2"},[_e(L1,{name:"fade"},{default:Ce(()=>[le(s).isReady&&!d.value.length?(B(),fe("p",Are," No drawers. ")):st("",!0),(B(!0),fe(Ut,null,$n(d.value,x=>{var C;return B(),fe("article",{key:x.id,class:"relative drawer-list-item rounded group transition-colors duration-150"},[(C=c.value)!=null&&C.canManageDrawers?(B(),ze(xre,{key:0,drawer:x,class:"float-right"},null,8,["drawer"])):st("",!0),_e(ts,{class:"p-4 block hover:no-underline w-full h-full",to:`/drawers/viewDrawer/${x.id}`},{default:Ce(()=>[ue("h2",Mre,xt(x.title),1)]),_:2},1032,["to"])])}),128))]),_:1})],512)])]}),_:1}))}});const Pre=ln(kre,[["__scopeId","data-v-1ef29c24"]]);var LD={exports:{}};const Dre=xM(qF);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function NC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),i.push.apply(i,r)}return i}function Xo(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?NC(Object(i),!0).forEach(function(r){Lre(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):NC(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}function Vv(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Vv=function(t){return typeof t}:Vv=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vv(e)}function Lre(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ba(){return Ba=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},Ba.apply(this,arguments)}function Ore(e,t){if(e==null)return{};var i={},r=Object.keys(e),s,c;for(c=0;c<r.length;c++)s=r[c],!(t.indexOf(s)>=0)&&(i[s]=e[s]);return i}function Rre(e,t){if(e==null)return{};var i=Ore(e,t),r,s;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)r=c[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Fre(e){return $re(e)||zre(e)||Nre(e)||Bre()}function $re(e){if(Array.isArray(e))return Yx(e)}function zre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Nre(e,t){if(e){if(typeof e=="string")return Yx(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Yx(e,t)}}function Yx(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function Bre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var jre="1.14.0";function Tl(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var $l=Tl(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),zm=Tl(/Edge/i),BC=Tl(/firefox/i),$p=Tl(/safari/i)&&!Tl(/chrome/i)&&!Tl(/android/i),OD=Tl(/iP(ad|od|hone)/i),Vre=Tl(/chrome/i)&&Tl(/android/i),RD={capture:!1,passive:!1};function fi(e,t,i){e.addEventListener(t,i,!$l&&RD)}function ai(e,t,i){e.removeEventListener(t,i,!$l&&RD)}function C_(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function Ure(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function so(e,t,i,r){if(e){i=i||document;do{if(t!=null&&(t[0]===">"?e.parentNode===i&&C_(e,t):C_(e,t))||r&&e===i)return e;if(e===i)break}while(e=Ure(e))}return null}var jC=/\s+/g;function lr(e,t,i){if(e&&t)if(e.classList)e.classList[i?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(jC," ").replace(" "+t+" "," ");e.className=(r+(i?" "+t:"")).replace(jC," ")}}function Dn(e,t,i){var r=e&&e.style;if(r){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),t===void 0?i:i[t];!(t in r)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),r[t]=i+(typeof i=="string"?"":"px")}}function Lu(e,t){var i="";if(typeof e=="string")i=e;else do{var r=Dn(e,"transform");r&&r!=="none"&&(i=r+" "+i)}while(!t&&(e=e.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(i)}function FD(e,t,i){if(e){var r=e.getElementsByTagName(t),s=0,c=r.length;if(i)for(;s<c;s++)i(r[s],s);return r}return[]}function Vo(){var e=document.scrollingElement;return e||document.documentElement}function nr(e,t,i,r,s){if(!(!e.getBoundingClientRect&&e!==window)){var c,d,l,m,g,y,x;if(e!==window&&e.parentNode&&e!==Vo()?(c=e.getBoundingClientRect(),d=c.top,l=c.left,m=c.bottom,g=c.right,y=c.height,x=c.width):(d=0,l=0,m=window.innerHeight,g=window.innerWidth,y=window.innerHeight,x=window.innerWidth),(t||i)&&e!==window&&(s=s||e.parentNode,!$l))do if(s&&s.getBoundingClientRect&&(Dn(s,"transform")!=="none"||i&&Dn(s,"position")!=="static")){var C=s.getBoundingClientRect();d-=C.top+parseInt(Dn(s,"border-top-width")),l-=C.left+parseInt(Dn(s,"border-left-width")),m=d+c.height,g=l+c.width;break}while(s=s.parentNode);if(r&&e!==window){var I=Lu(s||e),A=I&&I.a,O=I&&I.d;I&&(d/=O,l/=A,x/=A,y/=O,m=d+y,g=l+x)}return{top:d,left:l,bottom:m,right:g,width:x,height:y}}}function VC(e,t,i){for(var r=Ec(e,!0),s=nr(e)[t];r;){var c=nr(r)[i],d=void 0;if(i==="top"||i==="left"?d=s>=c:d=s<=c,!d)return r;if(r===Vo())break;r=Ec(r,!1)}return!1}function Rh(e,t,i,r){for(var s=0,c=0,d=e.children;c<d.length;){if(d[c].style.display!=="none"&&d[c]!==Nn.ghost&&(r||d[c]!==Nn.dragged)&&so(d[c],i.draggable,e,!1)){if(s===t)return d[c];s++}c++}return null}function Fw(e,t){for(var i=e.lastElementChild;i&&(i===Nn.ghost||Dn(i,"display")==="none"||t&&!C_(i,t));)i=i.previousElementSibling;return i||null}function pr(e,t){var i=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==Nn.clone&&(!t||C_(e,t))&&i++;return i}function UC(e){var t=0,i=0,r=Vo();if(e)do{var s=Lu(e),c=s.a,d=s.d;t+=e.scrollLeft*c,i+=e.scrollTop*d}while(e!==r&&(e=e.parentNode));return[t,i]}function Hre(e,t){for(var i in e)if(e.hasOwnProperty(i)){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[i][r])return Number(i)}return-1}function Ec(e,t){if(!e||!e.getBoundingClientRect)return Vo();var i=e,r=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var s=Dn(i);if(i.clientWidth<i.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return Vo();if(r||t)return i;r=!0}}while(i=i.parentNode);return Vo()}function Gre(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function Mb(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var zp;function $D(e,t){return function(){if(!zp){var i=arguments,r=this;i.length===1?e.call(r,i[0]):e.apply(r,i),zp=setTimeout(function(){zp=void 0},t)}}}function Wre(){clearTimeout(zp),zp=void 0}function zD(e,t,i){e.scrollLeft+=t,e.scrollTop+=i}function $w(e){var t=window.Polymer,i=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):i?i(e).clone(!0)[0]:e.cloneNode(!0)}function HC(e,t){Dn(e,"position","absolute"),Dn(e,"top",t.top),Dn(e,"left",t.left),Dn(e,"width",t.width),Dn(e,"height",t.height)}function kb(e){Dn(e,"position",""),Dn(e,"top",""),Dn(e,"left",""),Dn(e,"width",""),Dn(e,"height","")}var ps="Sortable"+new Date().getTime();function qre(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(s){if(!(Dn(s,"display")==="none"||s===Nn.ghost)){e.push({target:s,rect:nr(s)});var c=Xo({},e[e.length-1].rect);if(s.thisAnimationDuration){var d=Lu(s,!0);d&&(c.top-=d.f,c.left-=d.e)}s.fromRect=c}})}},addAnimationState:function(r){e.push(r)},removeAnimationState:function(r){e.splice(Hre(e,{target:r}),1)},animateAll:function(r){var s=this;if(!this.options.animation){clearTimeout(t),typeof r=="function"&&r();return}var c=!1,d=0;e.forEach(function(l){var m=0,g=l.target,y=g.fromRect,x=nr(g),C=g.prevFromRect,I=g.prevToRect,A=l.rect,O=Lu(g,!0);O&&(x.top-=O.f,x.left-=O.e),g.toRect=x,g.thisAnimationDuration&&Mb(C,x)&&!Mb(y,x)&&(A.top-x.top)/(A.left-x.left)===(y.top-x.top)/(y.left-x.left)&&(m=Kre(A,C,I,s.options)),Mb(x,y)||(g.prevFromRect=y,g.prevToRect=x,m||(m=s.options.animation),s.animate(g,A,x,m)),m&&(c=!0,d=Math.max(d,m),clearTimeout(g.animationResetTimer),g.animationResetTimer=setTimeout(function(){g.animationTime=0,g.prevFromRect=null,g.fromRect=null,g.prevToRect=null,g.thisAnimationDuration=null},m),g.thisAnimationDuration=m)}),clearTimeout(t),c?t=setTimeout(function(){typeof r=="function"&&r()},d):typeof r=="function"&&r(),e=[]},animate:function(r,s,c,d){if(d){Dn(r,"transition",""),Dn(r,"transform","");var l=Lu(this.el),m=l&&l.a,g=l&&l.d,y=(s.left-c.left)/(m||1),x=(s.top-c.top)/(g||1);r.animatingX=!!y,r.animatingY=!!x,Dn(r,"transform","translate3d("+y+"px,"+x+"px,0)"),this.forRepaintDummy=Zre(r),Dn(r,"transition","transform "+d+"ms"+(this.options.easing?" "+this.options.easing:"")),Dn(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Dn(r,"transition",""),Dn(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},d)}}}}function Zre(e){return e.offsetWidth}function Kre(e,t,i,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))*r.animation}var Zd=[],Pb={initializeByDefault:!0},Nm={mount:function(t){for(var i in Pb)Pb.hasOwnProperty(i)&&!(i in t)&&(t[i]=Pb[i]);Zd.forEach(function(r){if(r.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Zd.push(t)},pluginEvent:function(t,i,r){var s=this;this.eventCanceled=!1,r.cancel=function(){s.eventCanceled=!0};var c=t+"Global";Zd.forEach(function(d){i[d.pluginName]&&(i[d.pluginName][c]&&i[d.pluginName][c](Xo({sortable:i},r)),i.options[d.pluginName]&&i[d.pluginName][t]&&i[d.pluginName][t](Xo({sortable:i},r)))})},initializePlugins:function(t,i,r,s){Zd.forEach(function(l){var m=l.pluginName;if(!(!t.options[m]&&!l.initializeByDefault)){var g=new l(t,i,t.options);g.sortable=t,g.options=t.options,t[m]=g,Ba(r,g.defaults)}});for(var c in t.options)if(t.options.hasOwnProperty(c)){var d=this.modifyOption(t,c,t.options[c]);typeof d<"u"&&(t.options[c]=d)}},getEventProperties:function(t,i){var r={};return Zd.forEach(function(s){typeof s.eventProperties=="function"&&Ba(r,s.eventProperties.call(i[s.pluginName],t))}),r},modifyOption:function(t,i,r){var s;return Zd.forEach(function(c){t[c.pluginName]&&c.optionListeners&&typeof c.optionListeners[i]=="function"&&(s=c.optionListeners[i].call(t[c.pluginName],r))}),s}};function bp(e){var t=e.sortable,i=e.rootEl,r=e.name,s=e.targetEl,c=e.cloneEl,d=e.toEl,l=e.fromEl,m=e.oldIndex,g=e.newIndex,y=e.oldDraggableIndex,x=e.newDraggableIndex,C=e.originalEvent,I=e.putSortable,A=e.extraEventProperties;if(t=t||i&&i[ps],!!t){var O,F=t.options,z="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!$l&&!zm?O=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(O=document.createEvent("Event"),O.initEvent(r,!0,!0)),O.to=d||i,O.from=l||i,O.item=s||i,O.clone=c,O.oldIndex=m,O.newIndex=g,O.oldDraggableIndex=y,O.newDraggableIndex=x,O.originalEvent=C,O.pullMode=I?I.lastPutMode:void 0;var U=Xo(Xo({},A),Nm.getEventProperties(r,t));for(var H in U)O[H]=U[H];i&&i.dispatchEvent(O),F[z]&&F[z].call(t,O)}}var Xre=["evt"],qs=function(t,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=r.evt,c=Rre(r,Xre);Nm.pluginEvent.bind(Nn)(t,i,Xo({dragEl:on,parentEl:hr,ghostEl:Yn,rootEl:tr,nextEl:xu,lastDownEl:Uv,cloneEl:fr,cloneHidden:xc,dragStarted:xp,putSortable:Yr,activeSortable:Nn.active,originalEvent:s,oldIndex:sh,oldDraggableIndex:Np,newIndex:la,newDraggableIndex:_c,hideGhostForTarget:VD,unhideGhostForTarget:UD,cloneNowHidden:function(){xc=!0},cloneNowShown:function(){xc=!1},dispatchSortableEvent:function(l){ks({sortable:i,name:l,originalEvent:s})}},c))};function ks(e){bp(Xo({putSortable:Yr,cloneEl:fr,targetEl:on,rootEl:tr,oldIndex:sh,oldDraggableIndex:Np,newIndex:la,newDraggableIndex:_c},e))}var on,hr,Yn,tr,xu,Uv,fr,xc,sh,la,Np,_c,Sv,Yr,nh=!1,I_=!1,A_=[],vu,no,Db,Lb,GC,WC,xp,Kd,Bp,jp=!1,Tv=!1,Hv,ds,Ob=[],Jx=!1,M_=[],Ty=typeof document<"u",Ev=OD,qC=zm||$l?"cssFloat":"float",Yre=Ty&&!Vre&&!OD&&"draggable"in document.createElement("div"),ND=function(){if(Ty){if($l)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),BD=function(t,i){var r=Dn(t),s=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),c=Rh(t,0,i),d=Rh(t,1,i),l=c&&Dn(c),m=d&&Dn(d),g=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+nr(c).width,y=m&&parseInt(m.marginLeft)+parseInt(m.marginRight)+nr(d).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(c&&l.float&&l.float!=="none"){var x=l.float==="left"?"left":"right";return d&&(m.clear==="both"||m.clear===x)?"vertical":"horizontal"}return c&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||g>=s&&r[qC]==="none"||d&&r[qC]==="none"&&g+y>s)?"vertical":"horizontal"},Jre=function(t,i,r){var s=r?t.left:t.top,c=r?t.right:t.bottom,d=r?t.width:t.height,l=r?i.left:i.top,m=r?i.right:i.bottom,g=r?i.width:i.height;return s===l||c===m||s+d/2===l+g/2},Qre=function(t,i){var r;return A_.some(function(s){var c=s[ps].options.emptyInsertThreshold;if(!(!c||Fw(s))){var d=nr(s),l=t>=d.left-c&&t<=d.right+c,m=i>=d.top-c&&i<=d.bottom+c;if(l&&m)return r=s}}),r},jD=function(t){function i(c,d){return function(l,m,g,y){var x=l.options.group.name&&m.options.group.name&&l.options.group.name===m.options.group.name;if(c==null&&(d||x))return!0;if(c==null||c===!1)return!1;if(d&&c==="clone")return c;if(typeof c=="function")return i(c(l,m,g,y),d)(l,m,g,y);var C=(d?l:m).options.group.name;return c===!0||typeof c=="string"&&c===C||c.join&&c.indexOf(C)>-1}}var r={},s=t.group;(!s||Vv(s)!="object")&&(s={name:s}),r.name=s.name,r.checkPull=i(s.pull,!0),r.checkPut=i(s.put),r.revertClone=s.revertClone,t.group=r},VD=function(){!ND&&Yn&&Dn(Yn,"display","none")},UD=function(){!ND&&Yn&&Dn(Yn,"display","")};Ty&&document.addEventListener("click",function(e){if(I_)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),I_=!1,!1},!0);var _u=function(t){if(on){t=t.touches?t.touches[0]:t;var i=Qre(t.clientX,t.clientY);if(i){var r={};for(var s in t)t.hasOwnProperty(s)&&(r[s]=t[s]);r.target=r.rootEl=i,r.preventDefault=void 0,r.stopPropagation=void 0,i[ps]._onDragOver(r)}}},ese=function(t){on&&on.parentNode[ps]._isOutsideThisEl(t.target)};function Nn(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Ba({},t),e[ps]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return BD(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(d,l){d.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Nn.supportPointer!==!1&&"PointerEvent"in window&&!$p,emptyInsertThreshold:5};Nm.initializePlugins(this,e,i);for(var r in i)!(r in t)&&(t[r]=i[r]);jD(t);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=t.forceFallback?!1:Yre,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?fi(e,"pointerdown",this._onTapStart):(fi(e,"mousedown",this._onTapStart),fi(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(fi(e,"dragover",this),fi(e,"dragenter",this)),A_.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Ba(this,qre())}Nn.prototype={constructor:Nn,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Kd=null)},_getDirection:function(t,i){return typeof this.options.direction=="function"?this.options.direction.call(this,t,i,on):this.options.direction},_onTapStart:function(t){if(t.cancelable){var i=this,r=this.el,s=this.options,c=s.preventOnFilter,d=t.type,l=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,m=(l||t).target,g=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||m,y=s.filter;if(lse(r),!on&&!(/mousedown|pointerdown/.test(d)&&t.button!==0||s.disabled)&&!g.isContentEditable&&!(!this.nativeDraggable&&$p&&m&&m.tagName.toUpperCase()==="SELECT")&&(m=so(m,s.draggable,r,!1),!(m&&m.animated)&&Uv!==m)){if(sh=pr(m),Np=pr(m,s.draggable),typeof y=="function"){if(y.call(this,t,m,this)){ks({sortable:i,rootEl:g,name:"filter",targetEl:m,toEl:r,fromEl:r}),qs("filter",i,{evt:t}),c&&t.cancelable&&t.preventDefault();return}}else if(y&&(y=y.split(",").some(function(x){if(x=so(g,x.trim(),r,!1),x)return ks({sortable:i,rootEl:x,name:"filter",targetEl:m,fromEl:r,toEl:r}),qs("filter",i,{evt:t}),!0}),y)){c&&t.cancelable&&t.preventDefault();return}s.handle&&!so(g,s.handle,r,!1)||this._prepareDragStart(t,l,m)}}},_prepareDragStart:function(t,i,r){var s=this,c=s.el,d=s.options,l=c.ownerDocument,m;if(r&&!on&&r.parentNode===c){var g=nr(r);if(tr=c,on=r,hr=on.parentNode,xu=on.nextSibling,Uv=r,Sv=d.group,Nn.dragged=on,vu={target:on,clientX:(i||t).clientX,clientY:(i||t).clientY},GC=vu.clientX-g.left,WC=vu.clientY-g.top,this._lastX=(i||t).clientX,this._lastY=(i||t).clientY,on.style["will-change"]="all",m=function(){if(qs("delayEnded",s,{evt:t}),Nn.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!BC&&s.nativeDraggable&&(on.draggable=!0),s._triggerDragStart(t,i),ks({sortable:s,name:"choose",originalEvent:t}),lr(on,d.chosenClass,!0)},d.ignore.split(",").forEach(function(y){FD(on,y.trim(),Rb)}),fi(l,"dragover",_u),fi(l,"mousemove",_u),fi(l,"touchmove",_u),fi(l,"mouseup",s._onDrop),fi(l,"touchend",s._onDrop),fi(l,"touchcancel",s._onDrop),BC&&this.nativeDraggable&&(this.options.touchStartThreshold=4,on.draggable=!0),qs("delayStart",this,{evt:t}),d.delay&&(!d.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(zm||$l))){if(Nn.eventCanceled){this._onDrop();return}fi(l,"mouseup",s._disableDelayedDrag),fi(l,"touchend",s._disableDelayedDrag),fi(l,"touchcancel",s._disableDelayedDrag),fi(l,"mousemove",s._delayedDragTouchMoveHandler),fi(l,"touchmove",s._delayedDragTouchMoveHandler),d.supportPointer&&fi(l,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(m,d.delay)}else m()}},_delayedDragTouchMoveHandler:function(t){var i=t.touches?t.touches[0]:t;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){on&&Rb(on),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;ai(t,"mouseup",this._disableDelayedDrag),ai(t,"touchend",this._disableDelayedDrag),ai(t,"touchcancel",this._disableDelayedDrag),ai(t,"mousemove",this._delayedDragTouchMoveHandler),ai(t,"touchmove",this._delayedDragTouchMoveHandler),ai(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,i){i=i||t.pointerType=="touch"&&t,!this.nativeDraggable||i?this.options.supportPointer?fi(document,"pointermove",this._onTouchMove):i?fi(document,"touchmove",this._onTouchMove):fi(document,"mousemove",this._onTouchMove):(fi(on,"dragend",this),fi(tr,"dragstart",this._onDragStart));try{document.selection?Gv(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,i){if(nh=!1,tr&&on){qs("dragStarted",this,{evt:i}),this.nativeDraggable&&fi(document,"dragover",ese);var r=this.options;!t&&lr(on,r.dragClass,!1),lr(on,r.ghostClass,!0),Nn.active=this,t&&this._appendGhost(),ks({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(no){this._lastX=no.clientX,this._lastY=no.clientY,VD();for(var t=document.elementFromPoint(no.clientX,no.clientY),i=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(no.clientX,no.clientY),t!==i);)i=t;if(on.parentNode[ps]._isOutsideThisEl(t),i)do{if(i[ps]){var r=void 0;if(r=i[ps]._onDragOver({clientX:no.clientX,clientY:no.clientY,target:t,rootEl:i}),r&&!this.options.dragoverBubble)break}t=i}while(i=i.parentNode);UD()}},_onTouchMove:function(t){if(vu){var i=this.options,r=i.fallbackTolerance,s=i.fallbackOffset,c=t.touches?t.touches[0]:t,d=Yn&&Lu(Yn,!0),l=Yn&&d&&d.a,m=Yn&&d&&d.d,g=Ev&&ds&&UC(ds),y=(c.clientX-vu.clientX+s.x)/(l||1)+(g?g[0]-Ob[0]:0)/(l||1),x=(c.clientY-vu.clientY+s.y)/(m||1)+(g?g[1]-Ob[1]:0)/(m||1);if(!Nn.active&&!nh){if(r&&Math.max(Math.abs(c.clientX-this._lastX),Math.abs(c.clientY-this._lastY))<r)return;this._onDragStart(t,!0)}if(Yn){d?(d.e+=y-(Db||0),d.f+=x-(Lb||0)):d={a:1,b:0,c:0,d:1,e:y,f:x};var C="matrix(".concat(d.a,",").concat(d.b,",").concat(d.c,",").concat(d.d,",").concat(d.e,",").concat(d.f,")");Dn(Yn,"webkitTransform",C),Dn(Yn,"mozTransform",C),Dn(Yn,"msTransform",C),Dn(Yn,"transform",C),Db=y,Lb=x,no=c}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Yn){var t=this.options.fallbackOnBody?document.body:tr,i=nr(on,!0,Ev,!0,t),r=this.options;if(Ev){for(ds=t;Dn(ds,"position")==="static"&&Dn(ds,"transform")==="none"&&ds!==document;)ds=ds.parentNode;ds!==document.body&&ds!==document.documentElement?(ds===document&&(ds=Vo()),i.top+=ds.scrollTop,i.left+=ds.scrollLeft):ds=Vo(),Ob=UC(ds)}Yn=on.cloneNode(!0),lr(Yn,r.ghostClass,!1),lr(Yn,r.fallbackClass,!0),lr(Yn,r.dragClass,!0),Dn(Yn,"transition",""),Dn(Yn,"transform",""),Dn(Yn,"box-sizing","border-box"),Dn(Yn,"margin",0),Dn(Yn,"top",i.top),Dn(Yn,"left",i.left),Dn(Yn,"width",i.width),Dn(Yn,"height",i.height),Dn(Yn,"opacity","0.8"),Dn(Yn,"position",Ev?"absolute":"fixed"),Dn(Yn,"zIndex","100000"),Dn(Yn,"pointerEvents","none"),Nn.ghost=Yn,t.appendChild(Yn),Dn(Yn,"transform-origin",GC/parseInt(Yn.style.width)*100+"% "+WC/parseInt(Yn.style.height)*100+"%")}},_onDragStart:function(t,i){var r=this,s=t.dataTransfer,c=r.options;if(qs("dragStart",this,{evt:t}),Nn.eventCanceled){this._onDrop();return}qs("setupClone",this),Nn.eventCanceled||(fr=$w(on),fr.draggable=!1,fr.style["will-change"]="",this._hideClone(),lr(fr,this.options.chosenClass,!1),Nn.clone=fr),r.cloneId=Gv(function(){qs("clone",r),!Nn.eventCanceled&&(r.options.removeCloneOnHide||tr.insertBefore(fr,on),r._hideClone(),ks({sortable:r,name:"clone"}))}),!i&&lr(on,c.dragClass,!0),i?(I_=!0,r._loopId=setInterval(r._emulateDragOver,50)):(ai(document,"mouseup",r._onDrop),ai(document,"touchend",r._onDrop),ai(document,"touchcancel",r._onDrop),s&&(s.effectAllowed="move",c.setData&&c.setData.call(r,s,on)),fi(document,"drop",r),Dn(on,"transform","translateZ(0)")),nh=!0,r._dragStartId=Gv(r._dragStarted.bind(r,i,t)),fi(document,"selectstart",r),xp=!0,$p&&Dn(document.body,"user-select","none")},_onDragOver:function(t){var i=this.el,r=t.target,s,c,d,l=this.options,m=l.group,g=Nn.active,y=Sv===m,x=l.sort,C=Yr||g,I,A=this,O=!1;if(Jx)return;function F(Ue,Qe){qs(Ue,A,Xo({evt:t,isOwner:y,axis:I?"vertical":"horizontal",revert:d,dragRect:s,targetRect:c,canSort:x,fromSortable:C,target:r,completed:U,onMove:function(vt,it){return Cv(tr,i,on,s,vt,nr(vt),t,it)},changed:H},Qe))}function z(){F("dragOverAnimationCapture"),A.captureAnimationState(),A!==C&&C.captureAnimationState()}function U(Ue){return F("dragOverCompleted",{insertion:Ue}),Ue&&(y?g._hideClone():g._showClone(A),A!==C&&(lr(on,Yr?Yr.options.ghostClass:g.options.ghostClass,!1),lr(on,l.ghostClass,!0)),Yr!==A&&A!==Nn.active?Yr=A:A===Nn.active&&Yr&&(Yr=null),C===A&&(A._ignoreWhileAnimating=r),A.animateAll(function(){F("dragOverAnimationComplete"),A._ignoreWhileAnimating=null}),A!==C&&(C.animateAll(),C._ignoreWhileAnimating=null)),(r===on&&!on.animated||r===i&&!r.animated)&&(Kd=null),!l.dragoverBubble&&!t.rootEl&&r!==document&&(on.parentNode[ps]._isOutsideThisEl(t.target),!Ue&&_u(t)),!l.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),O=!0}function H(){la=pr(on),_c=pr(on,l.draggable),ks({sortable:A,name:"change",toEl:i,newIndex:la,newDraggableIndex:_c,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),r=so(r,l.draggable,i,!0),F("dragOver"),Nn.eventCanceled)return O;if(on.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||A._ignoreWhileAnimating===r)return U(!1);if(I_=!1,g&&!l.disabled&&(y?x||(d=hr!==tr):Yr===this||(this.lastPutMode=Sv.checkPull(this,g,on,t))&&m.checkPut(this,g,on,t))){if(I=this._getDirection(t,r)==="vertical",s=nr(on),F("dragOverValid"),Nn.eventCanceled)return O;if(d)return hr=tr,z(),this._hideClone(),F("revert"),Nn.eventCanceled||(xu?tr.insertBefore(on,xu):tr.appendChild(on)),U(!0);var q=Fw(i,l.draggable);if(!q||rse(t,I,this)&&!q.animated){if(q===on)return U(!1);if(q&&i===t.target&&(r=q),r&&(c=nr(r)),Cv(tr,i,on,s,r,c,t,!!r)!==!1)return z(),i.appendChild(on),hr=i,H(),U(!0)}else if(q&&ise(t,I,this)){var ee=Rh(i,0,l,!0);if(ee===on)return U(!1);if(r=ee,c=nr(r),Cv(tr,i,on,s,r,c,t,!1)!==!1)return z(),i.insertBefore(on,ee),hr=i,H(),U(!0)}else if(r.parentNode===i){c=nr(r);var Q=0,ve,se=on.parentNode!==i,K=!Jre(on.animated&&on.toRect||s,r.animated&&r.toRect||c,I),J=I?"top":"left",W=VC(r,"top","top")||VC(on,"top","top"),te=W?W.scrollTop:void 0;Kd!==r&&(ve=c[J],jp=!1,Tv=!K&&l.invertSwap||se),Q=sse(t,r,c,I,K?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,Tv,Kd===r);var j;if(Q!==0){var re=pr(on);do re-=Q,j=hr.children[re];while(j&&(Dn(j,"display")==="none"||j===Yn))}if(Q===0||j===r)return U(!1);Kd=r,Bp=Q;var Te=r.nextElementSibling,ye=!1;ye=Q===1;var Ve=Cv(tr,i,on,s,r,c,t,ye);if(Ve!==!1)return(Ve===1||Ve===-1)&&(ye=Ve===1),Jx=!0,setTimeout(nse,30),z(),ye&&!Te?i.appendChild(on):r.parentNode.insertBefore(on,ye?Te:r),W&&zD(W,0,te-W.scrollTop),hr=on.parentNode,ve!==void 0&&!Tv&&(Hv=Math.abs(ve-nr(r)[J])),H(),U(!0)}if(i.contains(on))return U(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ai(document,"mousemove",this._onTouchMove),ai(document,"touchmove",this._onTouchMove),ai(document,"pointermove",this._onTouchMove),ai(document,"dragover",_u),ai(document,"mousemove",_u),ai(document,"touchmove",_u)},_offUpEvents:function(){var t=this.el.ownerDocument;ai(t,"mouseup",this._onDrop),ai(t,"touchend",this._onDrop),ai(t,"pointerup",this._onDrop),ai(t,"touchcancel",this._onDrop),ai(document,"selectstart",this)},_onDrop:function(t){var i=this.el,r=this.options;if(la=pr(on),_c=pr(on,r.draggable),qs("drop",this,{evt:t}),hr=on&&on.parentNode,la=pr(on),_c=pr(on,r.draggable),Nn.eventCanceled){this._nulling();return}nh=!1,Tv=!1,jp=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Qx(this.cloneId),Qx(this._dragStartId),this.nativeDraggable&&(ai(document,"drop",this),ai(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),$p&&Dn(document.body,"user-select",""),Dn(on,"transform",""),t&&(xp&&(t.cancelable&&t.preventDefault(),!r.dropBubble&&t.stopPropagation()),Yn&&Yn.parentNode&&Yn.parentNode.removeChild(Yn),(tr===hr||Yr&&Yr.lastPutMode!=="clone")&&fr&&fr.parentNode&&fr.parentNode.removeChild(fr),on&&(this.nativeDraggable&&ai(on,"dragend",this),Rb(on),on.style["will-change"]="",xp&&!nh&&lr(on,Yr?Yr.options.ghostClass:this.options.ghostClass,!1),lr(on,this.options.chosenClass,!1),ks({sortable:this,name:"unchoose",toEl:hr,newIndex:null,newDraggableIndex:null,originalEvent:t}),tr!==hr?(la>=0&&(ks({rootEl:hr,name:"add",toEl:hr,fromEl:tr,originalEvent:t}),ks({sortable:this,name:"remove",toEl:hr,originalEvent:t}),ks({rootEl:hr,name:"sort",toEl:hr,fromEl:tr,originalEvent:t}),ks({sortable:this,name:"sort",toEl:hr,originalEvent:t})),Yr&&Yr.save()):la!==sh&&la>=0&&(ks({sortable:this,name:"update",toEl:hr,originalEvent:t}),ks({sortable:this,name:"sort",toEl:hr,originalEvent:t})),Nn.active&&((la==null||la===-1)&&(la=sh,_c=Np),ks({sortable:this,name:"end",toEl:hr,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){qs("nulling",this),tr=on=hr=Yn=xu=fr=Uv=xc=vu=no=xp=la=_c=sh=Np=Kd=Bp=Yr=Sv=Nn.dragged=Nn.ghost=Nn.clone=Nn.active=null,M_.forEach(function(t){t.checked=!0}),M_.length=Db=Lb=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":on&&(this._onDragOver(t),tse(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],i,r=this.el.children,s=0,c=r.length,d=this.options;s<c;s++)i=r[s],so(i,d.draggable,this.el,!1)&&t.push(i.getAttribute(d.dataIdAttr)||ose(i));return t},sort:function(t,i){var r={},s=this.el;this.toArray().forEach(function(c,d){var l=s.children[d];so(l,this.options.draggable,s,!1)&&(r[c]=l)},this),i&&this.captureAnimationState(),t.forEach(function(c){r[c]&&(s.removeChild(r[c]),s.appendChild(r[c]))}),i&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,i){return so(t,i||this.options.draggable,this.el,!1)},option:function(t,i){var r=this.options;if(i===void 0)return r[t];var s=Nm.modifyOption(this,t,i);typeof s<"u"?r[t]=s:r[t]=i,t==="group"&&jD(r)},destroy:function(){qs("destroy",this);var t=this.el;t[ps]=null,ai(t,"mousedown",this._onTapStart),ai(t,"touchstart",this._onTapStart),ai(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(ai(t,"dragover",this),ai(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),A_.splice(A_.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!xc){if(qs("hideClone",this),Nn.eventCanceled)return;Dn(fr,"display","none"),this.options.removeCloneOnHide&&fr.parentNode&&fr.parentNode.removeChild(fr),xc=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(xc){if(qs("showClone",this),Nn.eventCanceled)return;on.parentNode==tr&&!this.options.group.revertClone?tr.insertBefore(fr,on):xu?tr.insertBefore(fr,xu):tr.appendChild(fr),this.options.group.revertClone&&this.animate(on,fr),Dn(fr,"display",""),xc=!1}}};function tse(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Cv(e,t,i,r,s,c,d,l){var m,g=e[ps],y=g.options.onMove,x;return window.CustomEvent&&!$l&&!zm?m=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent("move",!0,!0)),m.to=t,m.from=e,m.dragged=i,m.draggedRect=r,m.related=s||t,m.relatedRect=c||nr(t),m.willInsertAfter=l,m.originalEvent=d,e.dispatchEvent(m),y&&(x=y.call(g,m,d)),x}function Rb(e){e.draggable=!1}function nse(){Jx=!1}function ise(e,t,i){var r=nr(Rh(i.el,0,i.options,!0)),s=10;return t?e.clientX<r.left-s||e.clientY<r.top&&e.clientX<r.right:e.clientY<r.top-s||e.clientY<r.bottom&&e.clientX<r.left}function rse(e,t,i){var r=nr(Fw(i.el,i.options.draggable)),s=10;return t?e.clientX>r.right+s||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+s}function sse(e,t,i,r,s,c,d,l){var m=r?e.clientY:e.clientX,g=r?i.height:i.width,y=r?i.top:i.left,x=r?i.bottom:i.right,C=!1;if(!d){if(l&&Hv<g*s){if(!jp&&(Bp===1?m>y+g*c/2:m<x-g*c/2)&&(jp=!0),jp)C=!0;else if(Bp===1?m<y+Hv:m>x-Hv)return-Bp}else if(m>y+g*(1-s)/2&&m<x-g*(1-s)/2)return ase(t)}return C=C||d,C&&(m<y+g*c/2||m>x-g*c/2)?m>y+g/2?1:-1:0}function ase(e){return pr(on)<pr(e)?1:-1}function ose(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,r=0;i--;)r+=t.charCodeAt(i);return r.toString(36)}function lse(e){M_.length=0;for(var t=e.getElementsByTagName("input"),i=t.length;i--;){var r=t[i];r.checked&&M_.push(r)}}function Gv(e){return setTimeout(e,0)}function Qx(e){return clearTimeout(e)}Ty&&fi(document,"touchmove",function(e){(Nn.active||nh)&&e.cancelable&&e.preventDefault()});Nn.utils={on:fi,off:ai,css:Dn,find:FD,is:function(t,i){return!!so(t,i,t,!1)},extend:Gre,throttle:$D,closest:so,toggleClass:lr,clone:$w,index:pr,nextTick:Gv,cancelNextTick:Qx,detectDirection:BD,getChild:Rh};Nn.get=function(e){return e[ps]};Nn.mount=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t[0].constructor===Array&&(t=t[0]),t.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Nn.utils=Xo(Xo({},Nn.utils),r.utils)),Nm.mount(r)})};Nn.create=function(e,t){return new Nn(e,t)};Nn.version=jre;var Ar=[],wp,e1,t1=!1,Fb,$b,k_,Sp;function cse(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(i){var r=i.originalEvent;this.sortable.nativeDraggable?fi(document,"dragover",this._handleAutoScroll):this.options.supportPointer?fi(document,"pointermove",this._handleFallbackAutoScroll):r.touches?fi(document,"touchmove",this._handleFallbackAutoScroll):fi(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var r=i.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?ai(document,"dragover",this._handleAutoScroll):(ai(document,"pointermove",this._handleFallbackAutoScroll),ai(document,"touchmove",this._handleFallbackAutoScroll),ai(document,"mousemove",this._handleFallbackAutoScroll)),ZC(),Wv(),Wre()},nulling:function(){k_=e1=wp=t1=Sp=Fb=$b=null,Ar.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,r){var s=this,c=(i.touches?i.touches[0]:i).clientX,d=(i.touches?i.touches[0]:i).clientY,l=document.elementFromPoint(c,d);if(k_=i,r||this.options.forceAutoScrollFallback||zm||$l||$p){zb(i,this.options,l,r);var m=Ec(l,!0);t1&&(!Sp||c!==Fb||d!==$b)&&(Sp&&ZC(),Sp=setInterval(function(){var g=Ec(document.elementFromPoint(c,d),!0);g!==m&&(m=g,Wv()),zb(i,s.options,g,r)},10),Fb=c,$b=d)}else{if(!this.options.bubbleScroll||Ec(l,!0)===Vo()){Wv();return}zb(i,this.options,Ec(l,!1),!1)}}},Ba(e,{pluginName:"scroll",initializeByDefault:!0})}function Wv(){Ar.forEach(function(e){clearInterval(e.pid)}),Ar=[]}function ZC(){clearInterval(Sp)}var zb=$D(function(e,t,i,r){if(t.scroll){var s=(e.touches?e.touches[0]:e).clientX,c=(e.touches?e.touches[0]:e).clientY,d=t.scrollSensitivity,l=t.scrollSpeed,m=Vo(),g=!1,y;e1!==i&&(e1=i,Wv(),wp=t.scroll,y=t.scrollFn,wp===!0&&(wp=Ec(i,!0)));var x=0,C=wp;do{var I=C,A=nr(I),O=A.top,F=A.bottom,z=A.left,U=A.right,H=A.width,q=A.height,ee=void 0,Q=void 0,ve=I.scrollWidth,se=I.scrollHeight,K=Dn(I),J=I.scrollLeft,W=I.scrollTop;I===m?(ee=H<ve&&(K.overflowX==="auto"||K.overflowX==="scroll"||K.overflowX==="visible"),Q=q<se&&(K.overflowY==="auto"||K.overflowY==="scroll"||K.overflowY==="visible")):(ee=H<ve&&(K.overflowX==="auto"||K.overflowX==="scroll"),Q=q<se&&(K.overflowY==="auto"||K.overflowY==="scroll"));var te=ee&&(Math.abs(U-s)<=d&&J+H<ve)-(Math.abs(z-s)<=d&&!!J),j=Q&&(Math.abs(F-c)<=d&&W+q<se)-(Math.abs(O-c)<=d&&!!W);if(!Ar[x])for(var re=0;re<=x;re++)Ar[re]||(Ar[re]={});(Ar[x].vx!=te||Ar[x].vy!=j||Ar[x].el!==I)&&(Ar[x].el=I,Ar[x].vx=te,Ar[x].vy=j,clearInterval(Ar[x].pid),(te!=0||j!=0)&&(g=!0,Ar[x].pid=setInterval((function(){r&&this.layer===0&&Nn.active._onTouchMove(k_);var Te=Ar[this.layer].vy?Ar[this.layer].vy*l:0,ye=Ar[this.layer].vx?Ar[this.layer].vx*l:0;typeof y=="function"&&y.call(Nn.dragged.parentNode[ps],ye,Te,e,k_,Ar[this.layer].el)!=="continue"||zD(Ar[this.layer].el,ye,Te)}).bind({layer:x}),24))),x++}while(t.bubbleScroll&&C!==m&&(C=Ec(C,!1)));t1=g}},30),HD=function(t){var i=t.originalEvent,r=t.putSortable,s=t.dragEl,c=t.activeSortable,d=t.dispatchSortableEvent,l=t.hideGhostForTarget,m=t.unhideGhostForTarget;if(i){var g=r||c;l();var y=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,x=document.elementFromPoint(y.clientX,y.clientY);m(),g&&!g.el.contains(x)&&(d("spill"),this.onSpill({dragEl:s,putSortable:r}))}};function zw(){}zw.prototype={startIndex:null,dragStart:function(t){var i=t.oldDraggableIndex;this.startIndex=i},onSpill:function(t){var i=t.dragEl,r=t.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var s=Rh(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(i,s):this.sortable.el.appendChild(i),this.sortable.animateAll(),r&&r.animateAll()},drop:HD};Ba(zw,{pluginName:"revertOnSpill"});function Nw(){}Nw.prototype={onSpill:function(t){var i=t.dragEl,r=t.putSortable,s=r||this.sortable;s.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),s.animateAll()},drop:HD};Ba(Nw,{pluginName:"removeOnSpill"});var ka;function use(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(i){var r=i.dragEl;ka=r},dragOverValid:function(i){var r=i.completed,s=i.target,c=i.onMove,d=i.activeSortable,l=i.changed,m=i.cancel;if(d.options.swap){var g=this.sortable.el,y=this.options;if(s&&s!==g){var x=ka;c(s)!==!1?(lr(s,y.swapClass,!0),ka=s):ka=null,x&&x!==ka&&lr(x,y.swapClass,!1)}l(),r(!0),m()}},drop:function(i){var r=i.activeSortable,s=i.putSortable,c=i.dragEl,d=s||this.sortable,l=this.options;ka&&lr(ka,l.swapClass,!1),ka&&(l.swap||s&&s.options.swap)&&c!==ka&&(d.captureAnimationState(),d!==r&&r.captureAnimationState(),dse(c,ka),d.animateAll(),d!==r&&r.animateAll())},nulling:function(){ka=null}},Ba(e,{pluginName:"swap",eventProperties:function(){return{swapItem:ka}}})}function dse(e,t){var i=e.parentNode,r=t.parentNode,s,c;!i||!r||i.isEqualNode(t)||r.isEqualNode(e)||(s=pr(e),c=pr(t),i.isEqualNode(r)&&s<c&&c++,i.insertBefore(t,i.children[s]),r.insertBefore(e,r.children[c]))}var Wn=[],oa=[],dp,io,hp=!1,Zs=!1,Xd=!1,Ui,fp,Iv;function hse(){function e(t){for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));t.options.supportPointer?fi(document,"pointerup",this._deselectMultiDrag):(fi(document,"mouseup",this._deselectMultiDrag),fi(document,"touchend",this._deselectMultiDrag)),fi(document,"keydown",this._checkKeyDown),fi(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(s,c){var d="";Wn.length&&io===t?Wn.forEach(function(l,m){d+=(m?", ":"")+l.textContent}):d=c.textContent,s.setData("Text",d)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(i){var r=i.dragEl;Ui=r},delayEnded:function(){this.isMultiDrag=~Wn.indexOf(Ui)},setupClone:function(i){var r=i.sortable,s=i.cancel;if(this.isMultiDrag){for(var c=0;c<Wn.length;c++)oa.push($w(Wn[c])),oa[c].sortableIndex=Wn[c].sortableIndex,oa[c].draggable=!1,oa[c].style["will-change"]="",lr(oa[c],this.options.selectedClass,!1),Wn[c]===Ui&&lr(oa[c],this.options.chosenClass,!1);r._hideClone(),s()}},clone:function(i){var r=i.sortable,s=i.rootEl,c=i.dispatchSortableEvent,d=i.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Wn.length&&io===r&&(KC(!0,s),c("clone"),d()))},showClone:function(i){var r=i.cloneNowShown,s=i.rootEl,c=i.cancel;this.isMultiDrag&&(KC(!1,s),oa.forEach(function(d){Dn(d,"display","")}),r(),Iv=!1,c())},hideClone:function(i){var r=this;i.sortable;var s=i.cloneNowHidden,c=i.cancel;this.isMultiDrag&&(oa.forEach(function(d){Dn(d,"display","none"),r.options.removeCloneOnHide&&d.parentNode&&d.parentNode.removeChild(d)}),s(),Iv=!0,c())},dragStartGlobal:function(i){i.sortable,!this.isMultiDrag&&io&&io.multiDrag._deselectMultiDrag(),Wn.forEach(function(r){r.sortableIndex=pr(r)}),Wn=Wn.sort(function(r,s){return r.sortableIndex-s.sortableIndex}),Xd=!0},dragStarted:function(i){var r=this,s=i.sortable;if(this.isMultiDrag){if(this.options.sort&&(s.captureAnimationState(),this.options.animation)){Wn.forEach(function(d){d!==Ui&&Dn(d,"position","absolute")});var c=nr(Ui,!1,!0,!0);Wn.forEach(function(d){d!==Ui&&HC(d,c)}),Zs=!0,hp=!0}s.animateAll(function(){Zs=!1,hp=!1,r.options.animation&&Wn.forEach(function(d){kb(d)}),r.options.sort&&Av()})}},dragOver:function(i){var r=i.target,s=i.completed,c=i.cancel;Zs&&~Wn.indexOf(r)&&(s(!1),c())},revert:function(i){var r=i.fromSortable,s=i.rootEl,c=i.sortable,d=i.dragRect;Wn.length>1&&(Wn.forEach(function(l){c.addAnimationState({target:l,rect:Zs?nr(l):d}),kb(l),l.fromRect=d,r.removeAnimationState(l)}),Zs=!1,fse(!this.options.removeCloneOnHide,s))},dragOverCompleted:function(i){var r=i.sortable,s=i.isOwner,c=i.insertion,d=i.activeSortable,l=i.parentEl,m=i.putSortable,g=this.options;if(c){if(s&&d._hideClone(),hp=!1,g.animation&&Wn.length>1&&(Zs||!s&&!d.options.sort&&!m)){var y=nr(Ui,!1,!0,!0);Wn.forEach(function(C){C!==Ui&&(HC(C,y),l.appendChild(C))}),Zs=!0}if(!s)if(Zs||Av(),Wn.length>1){var x=Iv;d._showClone(r),d.options.animation&&!Iv&&x&&oa.forEach(function(C){d.addAnimationState({target:C,rect:fp}),C.fromRect=fp,C.thisAnimationDuration=null})}else d._showClone(r)}},dragOverAnimationCapture:function(i){var r=i.dragRect,s=i.isOwner,c=i.activeSortable;if(Wn.forEach(function(l){l.thisAnimationDuration=null}),c.options.animation&&!s&&c.multiDrag.isMultiDrag){fp=Ba({},r);var d=Lu(Ui,!0);fp.top-=d.f,fp.left-=d.e}},dragOverAnimationComplete:function(){Zs&&(Zs=!1,Av())},drop:function(i){var r=i.originalEvent,s=i.rootEl,c=i.parentEl,d=i.sortable,l=i.dispatchSortableEvent,m=i.oldIndex,g=i.putSortable,y=g||this.sortable;if(r){var x=this.options,C=c.children;if(!Xd)if(x.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),lr(Ui,x.selectedClass,!~Wn.indexOf(Ui)),~Wn.indexOf(Ui))Wn.splice(Wn.indexOf(Ui),1),dp=null,bp({sortable:d,rootEl:s,name:"deselect",targetEl:Ui,originalEvt:r});else{if(Wn.push(Ui),bp({sortable:d,rootEl:s,name:"select",targetEl:Ui,originalEvt:r}),r.shiftKey&&dp&&d.el.contains(dp)){var I=pr(dp),A=pr(Ui);if(~I&&~A&&I!==A){var O,F;for(A>I?(F=I,O=A):(F=A,O=I+1);F<O;F++)~Wn.indexOf(C[F])||(lr(C[F],x.selectedClass,!0),Wn.push(C[F]),bp({sortable:d,rootEl:s,name:"select",targetEl:C[F],originalEvt:r}))}}else dp=Ui;io=y}if(Xd&&this.isMultiDrag){if(Zs=!1,(c[ps].options.sort||c!==s)&&Wn.length>1){var z=nr(Ui),U=pr(Ui,":not(."+this.options.selectedClass+")");if(!hp&&x.animation&&(Ui.thisAnimationDuration=null),y.captureAnimationState(),!hp&&(x.animation&&(Ui.fromRect=z,Wn.forEach(function(q){if(q.thisAnimationDuration=null,q!==Ui){var ee=Zs?nr(q):z;q.fromRect=ee,y.addAnimationState({target:q,rect:ee})}})),Av(),Wn.forEach(function(q){C[U]?c.insertBefore(q,C[U]):c.appendChild(q),U++}),m===pr(Ui))){var H=!1;Wn.forEach(function(q){if(q.sortableIndex!==pr(q)){H=!0;return}}),H&&l("update")}Wn.forEach(function(q){kb(q)}),y.animateAll()}io=y}(s===c||g&&g.lastPutMode!=="clone")&&oa.forEach(function(q){q.parentNode&&q.parentNode.removeChild(q)})}},nullingGlobal:function(){this.isMultiDrag=Xd=!1,oa.length=0},destroyGlobal:function(){this._deselectMultiDrag(),ai(document,"pointerup",this._deselectMultiDrag),ai(document,"mouseup",this._deselectMultiDrag),ai(document,"touchend",this._deselectMultiDrag),ai(document,"keydown",this._checkKeyDown),ai(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(i){if(!(typeof Xd<"u"&&Xd)&&io===this.sortable&&!(i&&so(i.target,this.options.draggable,this.sortable.el,!1))&&!(i&&i.button!==0))for(;Wn.length;){var r=Wn[0];lr(r,this.options.selectedClass,!1),Wn.shift(),bp({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r,originalEvt:i})}},_checkKeyDown:function(i){i.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(i){i.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Ba(e,{pluginName:"multiDrag",utils:{select:function(i){var r=i.parentNode[ps];!r||!r.options.multiDrag||~Wn.indexOf(i)||(io&&io!==r&&(io.multiDrag._deselectMultiDrag(),io=r),lr(i,r.options.selectedClass,!0),Wn.push(i))},deselect:function(i){var r=i.parentNode[ps],s=Wn.indexOf(i);!r||!r.options.multiDrag||!~s||(lr(i,r.options.selectedClass,!1),Wn.splice(s,1))}},eventProperties:function(){var i=this,r=[],s=[];return Wn.forEach(function(c){r.push({multiDragElement:c,index:c.sortableIndex});var d;Zs&&c!==Ui?d=-1:Zs?d=pr(c,":not(."+i.options.selectedClass+")"):d=pr(c),s.push({multiDragElement:c,index:d})}),{items:Fre(Wn),clones:[].concat(oa),oldIndicies:r,newIndicies:s}},optionListeners:{multiDragKey:function(i){return i=i.toLowerCase(),i==="ctrl"?i="Control":i.length>1&&(i=i.charAt(0).toUpperCase()+i.substr(1)),i}}})}function fse(e,t){Wn.forEach(function(i,r){var s=t.children[i.sortableIndex+(e?Number(r):0)];s?t.insertBefore(i,s):t.appendChild(i)})}function KC(e,t){oa.forEach(function(i,r){var s=t.children[i.sortableIndex+(e?Number(r):0)];s?t.insertBefore(i,s):t.appendChild(i)})}function Av(){Wn.forEach(function(e){e!==Ui&&e.parentNode&&e.parentNode.removeChild(e)})}Nn.mount(new cse);Nn.mount(Nw,zw);const pse=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:hse,Sortable:Nn,Swap:use,default:Nn},Symbol.toStringTag,{value:"Module"})),mse=xM(pse);(function(e,t){(function(r,s){e.exports=s(Dre,mse)})(typeof self<"u"?self:yM,function(i,r){return function(s){var c={};function d(l){if(c[l])return c[l].exports;var m=c[l]={i:l,l:!1,exports:{}};return s[l].call(m.exports,m,m.exports,d),m.l=!0,m.exports}return d.m=s,d.c=c,d.d=function(l,m,g){d.o(l,m)||Object.defineProperty(l,m,{enumerable:!0,get:g})},d.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},d.t=function(l,m){if(m&1&&(l=d(l)),m&8||m&4&&typeof l=="object"&&l&&l.__esModule)return l;var g=Object.create(null);if(d.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:l}),m&2&&typeof l!="string")for(var y in l)d.d(g,y,(function(x){return l[x]}).bind(null,y));return g},d.n=function(l){var m=l&&l.__esModule?function(){return l.default}:function(){return l};return d.d(m,"a",m),m},d.o=function(l,m){return Object.prototype.hasOwnProperty.call(l,m)},d.p="",d(d.s="fb15")}({"00ee":function(s,c,d){var l=d("b622"),m=l("toStringTag"),g={};g[m]="z",s.exports=String(g)==="[object z]"},"0366":function(s,c,d){var l=d("1c0b");s.exports=function(m,g,y){if(l(m),g===void 0)return m;switch(y){case 0:return function(){return m.call(g)};case 1:return function(x){return m.call(g,x)};case 2:return function(x,C){return m.call(g,x,C)};case 3:return function(x,C,I){return m.call(g,x,C,I)}}return function(){return m.apply(g,arguments)}}},"057f":function(s,c,d){var l=d("fc6a"),m=d("241c").f,g={}.toString,y=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],x=function(C){try{return m(C)}catch{return y.slice()}};s.exports.f=function(I){return y&&g.call(I)=="[object Window]"?x(I):m(l(I))}},"06cf":function(s,c,d){var l=d("83ab"),m=d("d1e7"),g=d("5c6c"),y=d("fc6a"),x=d("c04e"),C=d("5135"),I=d("0cfb"),A=Object.getOwnPropertyDescriptor;c.f=l?A:function(F,z){if(F=y(F),z=x(z,!0),I)try{return A(F,z)}catch{}if(C(F,z))return g(!m.f.call(F,z),F[z])}},"0cfb":function(s,c,d){var l=d("83ab"),m=d("d039"),g=d("cc12");s.exports=!l&&!m(function(){return Object.defineProperty(g("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(s,c,d){var l=d("23e7"),m=d("d58f").left,g=d("a640"),y=d("ae40"),x=g("reduce"),C=y("reduce",{1:0});l({target:"Array",proto:!0,forced:!x||!C},{reduce:function(A){return m(this,A,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(s,c,d){var l=d("c6b6"),m=d("9263");s.exports=function(g,y){var x=g.exec;if(typeof x=="function"){var C=x.call(g,y);if(typeof C!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return C}if(l(g)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return m.call(g,y)}},"159b":function(s,c,d){var l=d("da84"),m=d("fdbc"),g=d("17c2"),y=d("9112");for(var x in m){var C=l[x],I=C&&C.prototype;if(I&&I.forEach!==g)try{y(I,"forEach",g)}catch{I.forEach=g}}},"17c2":function(s,c,d){var l=d("b727").forEach,m=d("a640"),g=d("ae40"),y=m("forEach"),x=g("forEach");s.exports=!y||!x?function(I){return l(this,I,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(s,c,d){var l=d("d066");s.exports=l("document","documentElement")},"1c0b":function(s,c){s.exports=function(d){if(typeof d!="function")throw TypeError(String(d)+" is not a function");return d}},"1c7e":function(s,c,d){var l=d("b622"),m=l("iterator"),g=!1;try{var y=0,x={next:function(){return{done:!!y++}},return:function(){g=!0}};x[m]=function(){return this},Array.from(x,function(){throw 2})}catch{}s.exports=function(C,I){if(!I&&!g)return!1;var A=!1;try{var O={};O[m]=function(){return{next:function(){return{done:A=!0}}}},C(O)}catch{}return A}},"1d80":function(s,c){s.exports=function(d){if(d==null)throw TypeError("Can't call method on "+d);return d}},"1dde":function(s,c,d){var l=d("d039"),m=d("b622"),g=d("2d00"),y=m("species");s.exports=function(x){return g>=51||!l(function(){var C=[],I=C.constructor={};return I[y]=function(){return{foo:1}},C[x](Boolean).foo!==1})}},"23cb":function(s,c,d){var l=d("a691"),m=Math.max,g=Math.min;s.exports=function(y,x){var C=l(y);return C<0?m(C+x,0):g(C,x)}},"23e7":function(s,c,d){var l=d("da84"),m=d("06cf").f,g=d("9112"),y=d("6eeb"),x=d("ce4e"),C=d("e893"),I=d("94ca");s.exports=function(A,O){var F=A.target,z=A.global,U=A.stat,H,q,ee,Q,ve,se;if(z?q=l:U?q=l[F]||x(F,{}):q=(l[F]||{}).prototype,q)for(ee in O){if(ve=O[ee],A.noTargetGet?(se=m(q,ee),Q=se&&se.value):Q=q[ee],H=I(z?ee:F+(U?".":"#")+ee,A.forced),!H&&Q!==void 0){if(typeof ve==typeof Q)continue;C(ve,Q)}(A.sham||Q&&Q.sham)&&g(ve,"sham",!0),y(q,ee,ve,A)}}},"241c":function(s,c,d){var l=d("ca84"),m=d("7839"),g=m.concat("length","prototype");c.f=Object.getOwnPropertyNames||function(x){return l(x,g)}},"25f0":function(s,c,d){var l=d("6eeb"),m=d("825a"),g=d("d039"),y=d("ad6d"),x="toString",C=RegExp.prototype,I=C[x],A=g(function(){return I.call({source:"a",flags:"b"})!="/a/b"}),O=I.name!=x;(A||O)&&l(RegExp.prototype,x,function(){var z=m(this),U=String(z.source),H=z.flags,q=String(H===void 0&&z instanceof RegExp&&!("flags"in C)?y.call(z):H);return"/"+U+"/"+q},{unsafe:!0})},"2ca0":function(s,c,d){var l=d("23e7"),m=d("06cf").f,g=d("50c4"),y=d("5a34"),x=d("1d80"),C=d("ab13"),I=d("c430"),A="".startsWith,O=Math.min,F=C("startsWith"),z=!I&&!F&&!!function(){var U=m(String.prototype,"startsWith");return U&&!U.writable}();l({target:"String",proto:!0,forced:!z&&!F},{startsWith:function(H){var q=String(x(this));y(H);var ee=g(O(arguments.length>1?arguments[1]:void 0,q.length)),Q=String(H);return A?A.call(q,Q,ee):q.slice(ee,ee+Q.length)===Q}})},"2d00":function(s,c,d){var l=d("da84"),m=d("342f"),g=l.process,y=g&&g.versions,x=y&&y.v8,C,I;x?(C=x.split("."),I=C[0]+C[1]):m&&(C=m.match(/Edge\/(\d+)/),(!C||C[1]>=74)&&(C=m.match(/Chrome\/(\d+)/),C&&(I=C[1]))),s.exports=I&&+I},"342f":function(s,c,d){var l=d("d066");s.exports=l("navigator","userAgent")||""},"35a1":function(s,c,d){var l=d("f5df"),m=d("3f8c"),g=d("b622"),y=g("iterator");s.exports=function(x){if(x!=null)return x[y]||x["@@iterator"]||m[l(x)]}},"37e8":function(s,c,d){var l=d("83ab"),m=d("9bf2"),g=d("825a"),y=d("df75");s.exports=l?Object.defineProperties:function(C,I){g(C);for(var A=y(I),O=A.length,F=0,z;O>F;)m.f(C,z=A[F++],I[z]);return C}},"3bbe":function(s,c,d){var l=d("861d");s.exports=function(m){if(!l(m)&&m!==null)throw TypeError("Can't set "+String(m)+" as a prototype");return m}},"3ca3":function(s,c,d){var l=d("6547").charAt,m=d("69f3"),g=d("7dd0"),y="String Iterator",x=m.set,C=m.getterFor(y);g(String,"String",function(I){x(this,{type:y,string:String(I),index:0})},function(){var A=C(this),O=A.string,F=A.index,z;return F>=O.length?{value:void 0,done:!0}:(z=l(O,F),A.index+=z.length,{value:z,done:!1})})},"3f8c":function(s,c){s.exports={}},4160:function(s,c,d){var l=d("23e7"),m=d("17c2");l({target:"Array",proto:!0,forced:[].forEach!=m},{forEach:m})},"428f":function(s,c,d){var l=d("da84");s.exports=l},"44ad":function(s,c,d){var l=d("d039"),m=d("c6b6"),g="".split;s.exports=l(function(){return!Object("z").propertyIsEnumerable(0)})?function(y){return m(y)=="String"?g.call(y,""):Object(y)}:Object},"44d2":function(s,c,d){var l=d("b622"),m=d("7c73"),g=d("9bf2"),y=l("unscopables"),x=Array.prototype;x[y]==null&&g.f(x,y,{configurable:!0,value:m(null)}),s.exports=function(C){x[y][C]=!0}},"44e7":function(s,c,d){var l=d("861d"),m=d("c6b6"),g=d("b622"),y=g("match");s.exports=function(x){var C;return l(x)&&((C=x[y])!==void 0?!!C:m(x)=="RegExp")}},4930:function(s,c,d){var l=d("d039");s.exports=!!Object.getOwnPropertySymbols&&!l(function(){return!String(Symbol())})},"4d64":function(s,c,d){var l=d("fc6a"),m=d("50c4"),g=d("23cb"),y=function(x){return function(C,I,A){var O=l(C),F=m(O.length),z=g(A,F),U;if(x&&I!=I){for(;F>z;)if(U=O[z++],U!=U)return!0}else for(;F>z;z++)if((x||z in O)&&O[z]===I)return x||z||0;return!x&&-1}};s.exports={includes:y(!0),indexOf:y(!1)}},"4de4":function(s,c,d){var l=d("23e7"),m=d("b727").filter,g=d("1dde"),y=d("ae40"),x=g("filter"),C=y("filter");l({target:"Array",proto:!0,forced:!x||!C},{filter:function(A){return m(this,A,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(s,c,d){var l=d("0366"),m=d("7b0b"),g=d("9bdd"),y=d("e95a"),x=d("50c4"),C=d("8418"),I=d("35a1");s.exports=function(O){var F=m(O),z=typeof this=="function"?this:Array,U=arguments.length,H=U>1?arguments[1]:void 0,q=H!==void 0,ee=I(F),Q=0,ve,se,K,J,W,te;if(q&&(H=l(H,U>2?arguments[2]:void 0,2)),ee!=null&&!(z==Array&&y(ee)))for(J=ee.call(F),W=J.next,se=new z;!(K=W.call(J)).done;Q++)te=q?g(J,H,[K.value,Q],!0):K.value,C(se,Q,te);else for(ve=x(F.length),se=new z(ve);ve>Q;Q++)te=q?H(F[Q],Q):F[Q],C(se,Q,te);return se.length=Q,se}},"4fad":function(s,c,d){var l=d("23e7"),m=d("6f53").entries;l({target:"Object",stat:!0},{entries:function(y){return m(y)}})},"50c4":function(s,c,d){var l=d("a691"),m=Math.min;s.exports=function(g){return g>0?m(l(g),9007199254740991):0}},5135:function(s,c){var d={}.hasOwnProperty;s.exports=function(l,m){return d.call(l,m)}},5319:function(s,c,d){var l=d("d784"),m=d("825a"),g=d("7b0b"),y=d("50c4"),x=d("a691"),C=d("1d80"),I=d("8aa5"),A=d("14c3"),O=Math.max,F=Math.min,z=Math.floor,U=/\$([$&'`]|\d\d?|<[^>]*>)/g,H=/\$([$&'`]|\d\d?)/g,q=function(ee){return ee===void 0?ee:String(ee)};l("replace",2,function(ee,Q,ve,se){var K=se.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,J=se.REPLACE_KEEPS_$0,W=K?"$":"$0";return[function(re,Te){var ye=C(this),Ve=re==null?void 0:re[ee];return Ve!==void 0?Ve.call(re,ye,Te):Q.call(String(ye),re,Te)},function(j,re){if(!K&&J||typeof re=="string"&&re.indexOf(W)===-1){var Te=ve(Q,j,this,re);if(Te.done)return Te.value}var ye=m(j),Ve=String(this),Ue=typeof re=="function";Ue||(re=String(re));var Qe=ye.global;if(Qe){var It=ye.unicode;ye.lastIndex=0}for(var vt=[];;){var it=A(ye,Ve);if(it===null||(vt.push(it),!Qe))break;var Ge=String(it[0]);Ge===""&&(ye.lastIndex=I(Ve,y(ye.lastIndex),It))}for(var ot="",Ct=0,wt=0;wt<vt.length;wt++){it=vt[wt];for(var Xe=String(it[0]),Dt=O(F(x(it.index),Ve.length),0),Tt=[],Nt=1;Nt<it.length;Nt++)Tt.push(q(it[Nt]));var dn=it.groups;if(Ue){var Sn=[Xe].concat(Tt,Dt,Ve);dn!==void 0&&Sn.push(dn);var me=String(re.apply(void 0,Sn))}else me=te(Xe,Ve,Dt,Tt,dn,re);Dt>=Ct&&(ot+=Ve.slice(Ct,Dt)+me,Ct=Dt+Xe.length)}return ot+Ve.slice(Ct)}];function te(j,re,Te,ye,Ve,Ue){var Qe=Te+j.length,It=ye.length,vt=H;return Ve!==void 0&&(Ve=g(Ve),vt=U),Q.call(Ue,vt,function(it,Ge){var ot;switch(Ge.charAt(0)){case"$":return"$";case"&":return j;case"`":return re.slice(0,Te);case"'":return re.slice(Qe);case"<":ot=Ve[Ge.slice(1,-1)];break;default:var Ct=+Ge;if(Ct===0)return it;if(Ct>It){var wt=z(Ct/10);return wt===0?it:wt<=It?ye[wt-1]===void 0?Ge.charAt(1):ye[wt-1]+Ge.charAt(1):it}ot=ye[Ct-1]}return ot===void 0?"":ot})}})},5692:function(s,c,d){var l=d("c430"),m=d("c6cd");(s.exports=function(g,y){return m[g]||(m[g]=y!==void 0?y:{})})("versions",[]).push({version:"3.6.5",mode:l?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(s,c,d){var l=d("d066"),m=d("241c"),g=d("7418"),y=d("825a");s.exports=l("Reflect","ownKeys")||function(C){var I=m.f(y(C)),A=g.f;return A?I.concat(A(C)):I}},"5a34":function(s,c,d){var l=d("44e7");s.exports=function(m){if(l(m))throw TypeError("The method doesn't accept regular expressions");return m}},"5c6c":function(s,c){s.exports=function(d,l){return{enumerable:!(d&1),configurable:!(d&2),writable:!(d&4),value:l}}},"5db7":function(s,c,d){var l=d("23e7"),m=d("a2bf"),g=d("7b0b"),y=d("50c4"),x=d("1c0b"),C=d("65f0");l({target:"Array",proto:!0},{flatMap:function(A){var O=g(this),F=y(O.length),z;return x(A),z=C(O,0),z.length=m(z,O,O,F,0,1,A,arguments.length>1?arguments[1]:void 0),z}})},6547:function(s,c,d){var l=d("a691"),m=d("1d80"),g=function(y){return function(x,C){var I=String(m(x)),A=l(C),O=I.length,F,z;return A<0||A>=O?y?"":void 0:(F=I.charCodeAt(A),F<55296||F>56319||A+1===O||(z=I.charCodeAt(A+1))<56320||z>57343?y?I.charAt(A):F:y?I.slice(A,A+2):(F-55296<<10)+(z-56320)+65536)}};s.exports={codeAt:g(!1),charAt:g(!0)}},"65f0":function(s,c,d){var l=d("861d"),m=d("e8b5"),g=d("b622"),y=g("species");s.exports=function(x,C){var I;return m(x)&&(I=x.constructor,typeof I=="function"&&(I===Array||m(I.prototype))?I=void 0:l(I)&&(I=I[y],I===null&&(I=void 0))),new(I===void 0?Array:I)(C===0?0:C)}},"69f3":function(s,c,d){var l=d("7f9a"),m=d("da84"),g=d("861d"),y=d("9112"),x=d("5135"),C=d("f772"),I=d("d012"),A=m.WeakMap,O,F,z,U=function(K){return z(K)?F(K):O(K,{})},H=function(K){return function(J){var W;if(!g(J)||(W=F(J)).type!==K)throw TypeError("Incompatible receiver, "+K+" required");return W}};if(l){var q=new A,ee=q.get,Q=q.has,ve=q.set;O=function(K,J){return ve.call(q,K,J),J},F=function(K){return ee.call(q,K)||{}},z=function(K){return Q.call(q,K)}}else{var se=C("state");I[se]=!0,O=function(K,J){return y(K,se,J),J},F=function(K){return x(K,se)?K[se]:{}},z=function(K){return x(K,se)}}s.exports={set:O,get:F,has:z,enforce:U,getterFor:H}},"6eeb":function(s,c,d){var l=d("da84"),m=d("9112"),g=d("5135"),y=d("ce4e"),x=d("8925"),C=d("69f3"),I=C.get,A=C.enforce,O=String(String).split("String");(s.exports=function(F,z,U,H){var q=H?!!H.unsafe:!1,ee=H?!!H.enumerable:!1,Q=H?!!H.noTargetGet:!1;if(typeof U=="function"&&(typeof z=="string"&&!g(U,"name")&&m(U,"name",z),A(U).source=O.join(typeof z=="string"?z:"")),F===l){ee?F[z]=U:y(z,U);return}else q?!Q&&F[z]&&(ee=!0):delete F[z];ee?F[z]=U:m(F,z,U)})(Function.prototype,"toString",function(){return typeof this=="function"&&I(this).source||x(this)})},"6f53":function(s,c,d){var l=d("83ab"),m=d("df75"),g=d("fc6a"),y=d("d1e7").f,x=function(C){return function(I){for(var A=g(I),O=m(A),F=O.length,z=0,U=[],H;F>z;)H=O[z++],(!l||y.call(A,H))&&U.push(C?[H,A[H]]:A[H]);return U}};s.exports={entries:x(!0),values:x(!1)}},"73d9":function(s,c,d){var l=d("44d2");l("flatMap")},7418:function(s,c){c.f=Object.getOwnPropertySymbols},"746f":function(s,c,d){var l=d("428f"),m=d("5135"),g=d("e538"),y=d("9bf2").f;s.exports=function(x){var C=l.Symbol||(l.Symbol={});m(C,x)||y(C,x,{value:g.f(x)})}},7839:function(s,c){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(s,c,d){var l=d("1d80");s.exports=function(m){return Object(l(m))}},"7c73":function(s,c,d){var l=d("825a"),m=d("37e8"),g=d("7839"),y=d("d012"),x=d("1be4"),C=d("cc12"),I=d("f772"),A=">",O="<",F="prototype",z="script",U=I("IE_PROTO"),H=function(){},q=function(K){return O+z+A+K+O+"/"+z+A},ee=function(K){K.write(q("")),K.close();var J=K.parentWindow.Object;return K=null,J},Q=function(){var K=C("iframe"),J="java"+z+":",W;return K.style.display="none",x.appendChild(K),K.src=String(J),W=K.contentWindow.document,W.open(),W.write(q("document.F=Object")),W.close(),W.F},ve,se=function(){try{ve=document.domain&&new ActiveXObject("htmlfile")}catch{}se=ve?ee(ve):Q();for(var K=g.length;K--;)delete se[F][g[K]];return se()};y[U]=!0,s.exports=Object.create||function(J,W){var te;return J!==null?(H[F]=l(J),te=new H,H[F]=null,te[U]=J):te=se(),W===void 0?te:m(te,W)}},"7dd0":function(s,c,d){var l=d("23e7"),m=d("9ed3"),g=d("e163"),y=d("d2bb"),x=d("d44e"),C=d("9112"),I=d("6eeb"),A=d("b622"),O=d("c430"),F=d("3f8c"),z=d("ae93"),U=z.IteratorPrototype,H=z.BUGGY_SAFARI_ITERATORS,q=A("iterator"),ee="keys",Q="values",ve="entries",se=function(){return this};s.exports=function(K,J,W,te,j,re,Te){m(W,J,te);var ye=function(wt){if(wt===j&&vt)return vt;if(!H&&wt in Qe)return Qe[wt];switch(wt){case ee:return function(){return new W(this,wt)};case Q:return function(){return new W(this,wt)};case ve:return function(){return new W(this,wt)}}return function(){return new W(this)}},Ve=J+" Iterator",Ue=!1,Qe=K.prototype,It=Qe[q]||Qe["@@iterator"]||j&&Qe[j],vt=!H&&It||ye(j),it=J=="Array"&&Qe.entries||It,Ge,ot,Ct;if(it&&(Ge=g(it.call(new K)),U!==Object.prototype&&Ge.next&&(!O&&g(Ge)!==U&&(y?y(Ge,U):typeof Ge[q]!="function"&&C(Ge,q,se)),x(Ge,Ve,!0,!0),O&&(F[Ve]=se))),j==Q&&It&&It.name!==Q&&(Ue=!0,vt=function(){return It.call(this)}),(!O||Te)&&Qe[q]!==vt&&C(Qe,q,vt),F[J]=vt,j)if(ot={values:ye(Q),keys:re?vt:ye(ee),entries:ye(ve)},Te)for(Ct in ot)(H||Ue||!(Ct in Qe))&&I(Qe,Ct,ot[Ct]);else l({target:J,proto:!0,forced:H||Ue},ot);return ot}},"7f9a":function(s,c,d){var l=d("da84"),m=d("8925"),g=l.WeakMap;s.exports=typeof g=="function"&&/native code/.test(m(g))},"825a":function(s,c,d){var l=d("861d");s.exports=function(m){if(!l(m))throw TypeError(String(m)+" is not an object");return m}},"83ab":function(s,c,d){var l=d("d039");s.exports=!l(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(s,c,d){var l=d("c04e"),m=d("9bf2"),g=d("5c6c");s.exports=function(y,x,C){var I=l(x);I in y?m.f(y,I,g(0,C)):y[I]=C}},"861d":function(s,c){s.exports=function(d){return typeof d=="object"?d!==null:typeof d=="function"}},8875:function(s,c,d){var l,m,g;(function(y,x){m=[],l=x,g=typeof l=="function"?l.apply(c,m):l,g!==void 0&&(s.exports=g)})(typeof self<"u"?self:this,function(){function y(){var x=Object.getOwnPropertyDescriptor(document,"currentScript");if(!x&&"currentScript"in document&&document.currentScript||x&&x.get!==y&&document.currentScript)return document.currentScript;try{throw new Error}catch(ve){var C=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,I=/@([^@]*):(\d+):(\d+)\s*$/ig,A=C.exec(ve.stack)||I.exec(ve.stack),O=A&&A[1]||!1,F=A&&A[2]||!1,z=document.location.href.replace(document.location.hash,""),U,H,q,ee=document.getElementsByTagName("script");O===z&&(U=document.documentElement.outerHTML,H=new RegExp("(?:[^\\n]+?\\n){0,"+(F-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),q=U.replace(H,"$1").trim());for(var Q=0;Q<ee.length;Q++)if(ee[Q].readyState==="interactive"||ee[Q].src===O||O===z&&ee[Q].innerHTML&&ee[Q].innerHTML.trim()===q)return ee[Q];return null}}return y})},8925:function(s,c,d){var l=d("c6cd"),m=Function.toString;typeof l.inspectSource!="function"&&(l.inspectSource=function(g){return m.call(g)}),s.exports=l.inspectSource},"8aa5":function(s,c,d){var l=d("6547").charAt;s.exports=function(m,g,y){return g+(y?l(m,g).length:1)}},"8bbf":function(s,c){s.exports=i},"90e3":function(s,c){var d=0,l=Math.random();s.exports=function(m){return"Symbol("+String(m===void 0?"":m)+")_"+(++d+l).toString(36)}},9112:function(s,c,d){var l=d("83ab"),m=d("9bf2"),g=d("5c6c");s.exports=l?function(y,x,C){return m.f(y,x,g(1,C))}:function(y,x,C){return y[x]=C,y}},9263:function(s,c,d){var l=d("ad6d"),m=d("9f7f"),g=RegExp.prototype.exec,y=String.prototype.replace,x=g,C=function(){var F=/a/,z=/b*/g;return g.call(F,"a"),g.call(z,"a"),F.lastIndex!==0||z.lastIndex!==0}(),I=m.UNSUPPORTED_Y||m.BROKEN_CARET,A=/()??/.exec("")[1]!==void 0,O=C||A||I;O&&(x=function(z){var U=this,H,q,ee,Q,ve=I&&U.sticky,se=l.call(U),K=U.source,J=0,W=z;return ve&&(se=se.replace("y",""),se.indexOf("g")===-1&&(se+="g"),W=String(z).slice(U.lastIndex),U.lastIndex>0&&(!U.multiline||U.multiline&&z[U.lastIndex-1]!==`
`)&&(K="(?: "+K+")",W=" "+W,J++),q=new RegExp("^(?:"+K+")",se)),A&&(q=new RegExp("^"+K+"$(?!\\s)",se)),C&&(H=U.lastIndex),ee=g.call(ve?q:U,W),ve?ee?(ee.input=ee.input.slice(J),ee[0]=ee[0].slice(J),ee.index=U.lastIndex,U.lastIndex+=ee[0].length):U.lastIndex=0:C&&ee&&(U.lastIndex=U.global?ee.index+ee[0].length:H),A&&ee&&ee.length>1&&y.call(ee[0],q,function(){for(Q=1;Q<arguments.length-2;Q++)arguments[Q]===void 0&&(ee[Q]=void 0)}),ee}),s.exports=x},"94ca":function(s,c,d){var l=d("d039"),m=/#|\.prototype\./,g=function(A,O){var F=x[y(A)];return F==I?!0:F==C?!1:typeof O=="function"?l(O):!!O},y=g.normalize=function(A){return String(A).replace(m,".").toLowerCase()},x=g.data={},C=g.NATIVE="N",I=g.POLYFILL="P";s.exports=g},"99af":function(s,c,d){var l=d("23e7"),m=d("d039"),g=d("e8b5"),y=d("861d"),x=d("7b0b"),C=d("50c4"),I=d("8418"),A=d("65f0"),O=d("1dde"),F=d("b622"),z=d("2d00"),U=F("isConcatSpreadable"),H=9007199254740991,q="Maximum allowed index exceeded",ee=z>=51||!m(function(){var K=[];return K[U]=!1,K.concat()[0]!==K}),Q=O("concat"),ve=function(K){if(!y(K))return!1;var J=K[U];return J!==void 0?!!J:g(K)},se=!ee||!Q;l({target:"Array",proto:!0,forced:se},{concat:function(J){var W=x(this),te=A(W,0),j=0,re,Te,ye,Ve,Ue;for(re=-1,ye=arguments.length;re<ye;re++)if(Ue=re===-1?W:arguments[re],ve(Ue)){if(Ve=C(Ue.length),j+Ve>H)throw TypeError(q);for(Te=0;Te<Ve;Te++,j++)Te in Ue&&I(te,j,Ue[Te])}else{if(j>=H)throw TypeError(q);I(te,j++,Ue)}return te.length=j,te}})},"9bdd":function(s,c,d){var l=d("825a");s.exports=function(m,g,y,x){try{return x?g(l(y)[0],y[1]):g(y)}catch(I){var C=m.return;throw C!==void 0&&l(C.call(m)),I}}},"9bf2":function(s,c,d){var l=d("83ab"),m=d("0cfb"),g=d("825a"),y=d("c04e"),x=Object.defineProperty;c.f=l?x:function(I,A,O){if(g(I),A=y(A,!0),g(O),m)try{return x(I,A,O)}catch{}if("get"in O||"set"in O)throw TypeError("Accessors not supported");return"value"in O&&(I[A]=O.value),I}},"9ed3":function(s,c,d){var l=d("ae93").IteratorPrototype,m=d("7c73"),g=d("5c6c"),y=d("d44e"),x=d("3f8c"),C=function(){return this};s.exports=function(I,A,O){var F=A+" Iterator";return I.prototype=m(l,{next:g(1,O)}),y(I,F,!1,!0),x[F]=C,I}},"9f7f":function(s,c,d){var l=d("d039");function m(g,y){return RegExp(g,y)}c.UNSUPPORTED_Y=l(function(){var g=m("a","y");return g.lastIndex=2,g.exec("abcd")!=null}),c.BROKEN_CARET=l(function(){var g=m("^r","gy");return g.lastIndex=2,g.exec("str")!=null})},a2bf:function(s,c,d){var l=d("e8b5"),m=d("50c4"),g=d("0366"),y=function(x,C,I,A,O,F,z,U){for(var H=O,q=0,ee=z?g(z,U,3):!1,Q;q<A;){if(q in I){if(Q=ee?ee(I[q],q,C):I[q],F>0&&l(Q))H=y(x,C,Q,m(Q.length),H,F-1)-1;else{if(H>=9007199254740991)throw TypeError("Exceed the acceptable array length");x[H]=Q}H++}q++}return H};s.exports=y},a352:function(s,c){s.exports=r},a434:function(s,c,d){var l=d("23e7"),m=d("23cb"),g=d("a691"),y=d("50c4"),x=d("7b0b"),C=d("65f0"),I=d("8418"),A=d("1dde"),O=d("ae40"),F=A("splice"),z=O("splice",{ACCESSORS:!0,0:0,1:2}),U=Math.max,H=Math.min,q=9007199254740991,ee="Maximum allowed length exceeded";l({target:"Array",proto:!0,forced:!F||!z},{splice:function(ve,se){var K=x(this),J=y(K.length),W=m(ve,J),te=arguments.length,j,re,Te,ye,Ve,Ue;if(te===0?j=re=0:te===1?(j=0,re=J-W):(j=te-2,re=H(U(g(se),0),J-W)),J+j-re>q)throw TypeError(ee);for(Te=C(K,re),ye=0;ye<re;ye++)Ve=W+ye,Ve in K&&I(Te,ye,K[Ve]);if(Te.length=re,j<re){for(ye=W;ye<J-re;ye++)Ve=ye+re,Ue=ye+j,Ve in K?K[Ue]=K[Ve]:delete K[Ue];for(ye=J;ye>J-re+j;ye--)delete K[ye-1]}else if(j>re)for(ye=J-re;ye>W;ye--)Ve=ye+re-1,Ue=ye+j-1,Ve in K?K[Ue]=K[Ve]:delete K[Ue];for(ye=0;ye<j;ye++)K[ye+W]=arguments[ye+2];return K.length=J-re+j,Te}})},a4d3:function(s,c,d){var l=d("23e7"),m=d("da84"),g=d("d066"),y=d("c430"),x=d("83ab"),C=d("4930"),I=d("fdbf"),A=d("d039"),O=d("5135"),F=d("e8b5"),z=d("861d"),U=d("825a"),H=d("7b0b"),q=d("fc6a"),ee=d("c04e"),Q=d("5c6c"),ve=d("7c73"),se=d("df75"),K=d("241c"),J=d("057f"),W=d("7418"),te=d("06cf"),j=d("9bf2"),re=d("d1e7"),Te=d("9112"),ye=d("6eeb"),Ve=d("5692"),Ue=d("f772"),Qe=d("d012"),It=d("90e3"),vt=d("b622"),it=d("e538"),Ge=d("746f"),ot=d("d44e"),Ct=d("69f3"),wt=d("b727").forEach,Xe=Ue("hidden"),Dt="Symbol",Tt="prototype",Nt=vt("toPrimitive"),dn=Ct.set,Sn=Ct.getterFor(Dt),me=Object[Tt],Ie=m.Symbol,at=g("JSON","stringify"),Z=te.f,he=j.f,$e=J.f,et=re.f,Se=Ve("symbols"),mt=Ve("op-symbols"),gt=Ve("string-to-symbol-registry"),At=Ve("symbol-to-string-registry"),Ft=Ve("wks"),Kt=m.QObject,an=!Kt||!Kt[Tt]||!Kt[Tt].findChild,Pn=x&&A(function(){return ve(he({},"a",{get:function(){return he(this,"a",{value:7}).a}})).a!=7})?function(Ht,_t,cn){var zn=Z(me,_t);zn&&delete me[_t],he(Ht,_t,cn),zn&&Ht!==me&&he(me,_t,zn)}:he,jn=function(Ht,_t){var cn=Se[Ht]=ve(Ie[Tt]);return dn(cn,{type:Dt,tag:Ht,description:_t}),x||(cn.description=_t),cn},tt=I?function(Ht){return typeof Ht=="symbol"}:function(Ht){return Object(Ht)instanceof Ie},nt=function(_t,cn,zn){_t===me&&nt(mt,cn,zn),U(_t);var Vt=ee(cn,!0);return U(zn),O(Se,Vt)?(zn.enumerable?(O(_t,Xe)&&_t[Xe][Vt]&&(_t[Xe][Vt]=!1),zn=ve(zn,{enumerable:Q(0,!1)})):(O(_t,Xe)||he(_t,Xe,Q(1,{})),_t[Xe][Vt]=!0),Pn(_t,Vt,zn)):he(_t,Vt,zn)},ut=function(_t,cn){U(_t);var zn=q(cn),Vt=se(zn).concat(xn(zn));return wt(Vt,function(li){(!x||Qt.call(zn,li))&&nt(_t,li,zn[li])}),_t},qe=function(_t,cn){return cn===void 0?ve(_t):ut(ve(_t),cn)},Qt=function(_t){var cn=ee(_t,!0),zn=et.call(this,cn);return this===me&&O(Se,cn)&&!O(mt,cn)?!1:zn||!O(this,cn)||!O(Se,cn)||O(this,Xe)&&this[Xe][cn]?zn:!0},Zt=function(_t,cn){var zn=q(_t),Vt=ee(cn,!0);if(!(zn===me&&O(Se,Vt)&&!O(mt,Vt))){var li=Z(zn,Vt);return li&&O(Se,Vt)&&!(O(zn,Xe)&&zn[Xe][Vt])&&(li.enumerable=!0),li}},Cn=function(_t){var cn=$e(q(_t)),zn=[];return wt(cn,function(Vt){!O(Se,Vt)&&!O(Qe,Vt)&&zn.push(Vt)}),zn},xn=function(_t){var cn=_t===me,zn=$e(cn?mt:q(_t)),Vt=[];return wt(zn,function(li){O(Se,li)&&(!cn||O(me,li))&&Vt.push(Se[li])}),Vt};if(C||(Ie=function(){if(this instanceof Ie)throw TypeError("Symbol is not a constructor");var _t=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),cn=It(_t),zn=function(Vt){this===me&&zn.call(mt,Vt),O(this,Xe)&&O(this[Xe],cn)&&(this[Xe][cn]=!1),Pn(this,cn,Q(1,Vt))};return x&&an&&Pn(me,cn,{configurable:!0,set:zn}),jn(cn,_t)},ye(Ie[Tt],"toString",function(){return Sn(this).tag}),ye(Ie,"withoutSetter",function(Ht){return jn(It(Ht),Ht)}),re.f=Qt,j.f=nt,te.f=Zt,K.f=J.f=Cn,W.f=xn,it.f=function(Ht){return jn(vt(Ht),Ht)},x&&(he(Ie[Tt],"description",{configurable:!0,get:function(){return Sn(this).description}}),y||ye(me,"propertyIsEnumerable",Qt,{unsafe:!0}))),l({global:!0,wrap:!0,forced:!C,sham:!C},{Symbol:Ie}),wt(se(Ft),function(Ht){Ge(Ht)}),l({target:Dt,stat:!0,forced:!C},{for:function(Ht){var _t=String(Ht);if(O(gt,_t))return gt[_t];var cn=Ie(_t);return gt[_t]=cn,At[cn]=_t,cn},keyFor:function(_t){if(!tt(_t))throw TypeError(_t+" is not a symbol");if(O(At,_t))return At[_t]},useSetter:function(){an=!0},useSimple:function(){an=!1}}),l({target:"Object",stat:!0,forced:!C,sham:!x},{create:qe,defineProperty:nt,defineProperties:ut,getOwnPropertyDescriptor:Zt}),l({target:"Object",stat:!0,forced:!C},{getOwnPropertyNames:Cn,getOwnPropertySymbols:xn}),l({target:"Object",stat:!0,forced:A(function(){W.f(1)})},{getOwnPropertySymbols:function(_t){return W.f(H(_t))}}),at){var Mt=!C||A(function(){var Ht=Ie();return at([Ht])!="[null]"||at({a:Ht})!="{}"||at(Object(Ht))!="{}"});l({target:"JSON",stat:!0,forced:Mt},{stringify:function(_t,cn,zn){for(var Vt=[_t],li=1,Ee;arguments.length>li;)Vt.push(arguments[li++]);if(Ee=cn,!(!z(cn)&&_t===void 0||tt(_t)))return F(cn)||(cn=function(ne,ae){if(typeof Ee=="function"&&(ae=Ee.call(this,ne,ae)),!tt(ae))return ae}),Vt[1]=cn,at.apply(null,Vt)}})}Ie[Tt][Nt]||Te(Ie[Tt],Nt,Ie[Tt].valueOf),ot(Ie,Dt),Qe[Xe]=!0},a630:function(s,c,d){var l=d("23e7"),m=d("4df4"),g=d("1c7e"),y=!g(function(x){Array.from(x)});l({target:"Array",stat:!0,forced:y},{from:m})},a640:function(s,c,d){var l=d("d039");s.exports=function(m,g){var y=[][m];return!!y&&l(function(){y.call(null,g||function(){throw 1},1)})}},a691:function(s,c){var d=Math.ceil,l=Math.floor;s.exports=function(m){return isNaN(m=+m)?0:(m>0?l:d)(m)}},ab13:function(s,c,d){var l=d("b622"),m=l("match");s.exports=function(g){var y=/./;try{"/./"[g](y)}catch{try{return y[m]=!1,"/./"[g](y)}catch{}}return!1}},ac1f:function(s,c,d){var l=d("23e7"),m=d("9263");l({target:"RegExp",proto:!0,forced:/./.exec!==m},{exec:m})},ad6d:function(s,c,d){var l=d("825a");s.exports=function(){var m=l(this),g="";return m.global&&(g+="g"),m.ignoreCase&&(g+="i"),m.multiline&&(g+="m"),m.dotAll&&(g+="s"),m.unicode&&(g+="u"),m.sticky&&(g+="y"),g}},ae40:function(s,c,d){var l=d("83ab"),m=d("d039"),g=d("5135"),y=Object.defineProperty,x={},C=function(I){throw I};s.exports=function(I,A){if(g(x,I))return x[I];A||(A={});var O=[][I],F=g(A,"ACCESSORS")?A.ACCESSORS:!1,z=g(A,0)?A[0]:C,U=g(A,1)?A[1]:void 0;return x[I]=!!O&&!m(function(){if(F&&!l)return!0;var H={length:-1};F?y(H,1,{enumerable:!0,get:C}):H[1]=1,O.call(H,z,U)})}},ae93:function(s,c,d){var l=d("e163"),m=d("9112"),g=d("5135"),y=d("b622"),x=d("c430"),C=y("iterator"),I=!1,A=function(){return this},O,F,z;[].keys&&(z=[].keys(),"next"in z?(F=l(l(z)),F!==Object.prototype&&(O=F)):I=!0),O==null&&(O={}),!x&&!g(O,C)&&m(O,C,A),s.exports={IteratorPrototype:O,BUGGY_SAFARI_ITERATORS:I}},b041:function(s,c,d){var l=d("00ee"),m=d("f5df");s.exports=l?{}.toString:function(){return"[object "+m(this)+"]"}},b0c0:function(s,c,d){var l=d("83ab"),m=d("9bf2").f,g=Function.prototype,y=g.toString,x=/^\s*function ([^ (]*)/,C="name";l&&!(C in g)&&m(g,C,{configurable:!0,get:function(){try{return y.call(this).match(x)[1]}catch{return""}}})},b622:function(s,c,d){var l=d("da84"),m=d("5692"),g=d("5135"),y=d("90e3"),x=d("4930"),C=d("fdbf"),I=m("wks"),A=l.Symbol,O=C?A:A&&A.withoutSetter||y;s.exports=function(F){return g(I,F)||(x&&g(A,F)?I[F]=A[F]:I[F]=O("Symbol."+F)),I[F]}},b64b:function(s,c,d){var l=d("23e7"),m=d("7b0b"),g=d("df75"),y=d("d039"),x=y(function(){g(1)});l({target:"Object",stat:!0,forced:x},{keys:function(I){return g(m(I))}})},b727:function(s,c,d){var l=d("0366"),m=d("44ad"),g=d("7b0b"),y=d("50c4"),x=d("65f0"),C=[].push,I=function(A){var O=A==1,F=A==2,z=A==3,U=A==4,H=A==6,q=A==5||H;return function(ee,Q,ve,se){for(var K=g(ee),J=m(K),W=l(Q,ve,3),te=y(J.length),j=0,re=se||x,Te=O?re(ee,te):F?re(ee,0):void 0,ye,Ve;te>j;j++)if((q||j in J)&&(ye=J[j],Ve=W(ye,j,K),A)){if(O)Te[j]=Ve;else if(Ve)switch(A){case 3:return!0;case 5:return ye;case 6:return j;case 2:C.call(Te,ye)}else if(U)return!1}return H?-1:z||U?U:Te}};s.exports={forEach:I(0),map:I(1),filter:I(2),some:I(3),every:I(4),find:I(5),findIndex:I(6)}},c04e:function(s,c,d){var l=d("861d");s.exports=function(m,g){if(!l(m))return m;var y,x;if(g&&typeof(y=m.toString)=="function"&&!l(x=y.call(m))||typeof(y=m.valueOf)=="function"&&!l(x=y.call(m))||!g&&typeof(y=m.toString)=="function"&&!l(x=y.call(m)))return x;throw TypeError("Can't convert object to primitive value")}},c430:function(s,c){s.exports=!1},c6b6:function(s,c){var d={}.toString;s.exports=function(l){return d.call(l).slice(8,-1)}},c6cd:function(s,c,d){var l=d("da84"),m=d("ce4e"),g="__core-js_shared__",y=l[g]||m(g,{});s.exports=y},c740:function(s,c,d){var l=d("23e7"),m=d("b727").findIndex,g=d("44d2"),y=d("ae40"),x="findIndex",C=!0,I=y(x);x in[]&&Array(1)[x](function(){C=!1}),l({target:"Array",proto:!0,forced:C||!I},{findIndex:function(O){return m(this,O,arguments.length>1?arguments[1]:void 0)}}),g(x)},c8ba:function(s,c){var d;d=function(){return this}();try{d=d||new Function("return this")()}catch{typeof window=="object"&&(d=window)}s.exports=d},c975:function(s,c,d){var l=d("23e7"),m=d("4d64").indexOf,g=d("a640"),y=d("ae40"),x=[].indexOf,C=!!x&&1/[1].indexOf(1,-0)<0,I=g("indexOf"),A=y("indexOf",{ACCESSORS:!0,1:0});l({target:"Array",proto:!0,forced:C||!I||!A},{indexOf:function(F){return C?x.apply(this,arguments)||0:m(this,F,arguments.length>1?arguments[1]:void 0)}})},ca84:function(s,c,d){var l=d("5135"),m=d("fc6a"),g=d("4d64").indexOf,y=d("d012");s.exports=function(x,C){var I=m(x),A=0,O=[],F;for(F in I)!l(y,F)&&l(I,F)&&O.push(F);for(;C.length>A;)l(I,F=C[A++])&&(~g(O,F)||O.push(F));return O}},caad:function(s,c,d){var l=d("23e7"),m=d("4d64").includes,g=d("44d2"),y=d("ae40"),x=y("indexOf",{ACCESSORS:!0,1:0});l({target:"Array",proto:!0,forced:!x},{includes:function(I){return m(this,I,arguments.length>1?arguments[1]:void 0)}}),g("includes")},cc12:function(s,c,d){var l=d("da84"),m=d("861d"),g=l.document,y=m(g)&&m(g.createElement);s.exports=function(x){return y?g.createElement(x):{}}},ce4e:function(s,c,d){var l=d("da84"),m=d("9112");s.exports=function(g,y){try{m(l,g,y)}catch{l[g]=y}return y}},d012:function(s,c){s.exports={}},d039:function(s,c){s.exports=function(d){try{return!!d()}catch{return!0}}},d066:function(s,c,d){var l=d("428f"),m=d("da84"),g=function(y){return typeof y=="function"?y:void 0};s.exports=function(y,x){return arguments.length<2?g(l[y])||g(m[y]):l[y]&&l[y][x]||m[y]&&m[y][x]}},d1e7:function(s,c,d){var l={}.propertyIsEnumerable,m=Object.getOwnPropertyDescriptor,g=m&&!l.call({1:2},1);c.f=g?function(x){var C=m(this,x);return!!C&&C.enumerable}:l},d28b:function(s,c,d){var l=d("746f");l("iterator")},d2bb:function(s,c,d){var l=d("825a"),m=d("3bbe");s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var g=!1,y={},x;try{x=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,x.call(y,[]),g=y instanceof Array}catch{}return function(I,A){return l(I),m(A),g?x.call(I,A):I.__proto__=A,I}}():void 0)},d3b7:function(s,c,d){var l=d("00ee"),m=d("6eeb"),g=d("b041");l||m(Object.prototype,"toString",g,{unsafe:!0})},d44e:function(s,c,d){var l=d("9bf2").f,m=d("5135"),g=d("b622"),y=g("toStringTag");s.exports=function(x,C,I){x&&!m(x=I?x:x.prototype,y)&&l(x,y,{configurable:!0,value:C})}},d58f:function(s,c,d){var l=d("1c0b"),m=d("7b0b"),g=d("44ad"),y=d("50c4"),x=function(C){return function(I,A,O,F){l(A);var z=m(I),U=g(z),H=y(z.length),q=C?H-1:0,ee=C?-1:1;if(O<2)for(;;){if(q in U){F=U[q],q+=ee;break}if(q+=ee,C?q<0:H<=q)throw TypeError("Reduce of empty array with no initial value")}for(;C?q>=0:H>q;q+=ee)q in U&&(F=A(F,U[q],q,z));return F}};s.exports={left:x(!1),right:x(!0)}},d784:function(s,c,d){d("ac1f");var l=d("6eeb"),m=d("d039"),g=d("b622"),y=d("9263"),x=d("9112"),C=g("species"),I=!m(function(){var U=/./;return U.exec=function(){var H=[];return H.groups={a:"7"},H},"".replace(U,"$<a>")!=="7"}),A=function(){return"a".replace(/./,"$0")==="$0"}(),O=g("replace"),F=function(){return/./[O]?/./[O]("a","$0")==="":!1}(),z=!m(function(){var U=/(?:)/,H=U.exec;U.exec=function(){return H.apply(this,arguments)};var q="ab".split(U);return q.length!==2||q[0]!=="a"||q[1]!=="b"});s.exports=function(U,H,q,ee){var Q=g(U),ve=!m(function(){var j={};return j[Q]=function(){return 7},""[U](j)!=7}),se=ve&&!m(function(){var j=!1,re=/a/;return U==="split"&&(re={},re.constructor={},re.constructor[C]=function(){return re},re.flags="",re[Q]=/./[Q]),re.exec=function(){return j=!0,null},re[Q](""),!j});if(!ve||!se||U==="replace"&&!(I&&A&&!F)||U==="split"&&!z){var K=/./[Q],J=q(Q,""[U],function(j,re,Te,ye,Ve){return re.exec===y?ve&&!Ve?{done:!0,value:K.call(re,Te,ye)}:{done:!0,value:j.call(Te,re,ye)}:{done:!1}},{REPLACE_KEEPS_$0:A,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:F}),W=J[0],te=J[1];l(String.prototype,U,W),l(RegExp.prototype,Q,H==2?function(j,re){return te.call(j,this,re)}:function(j){return te.call(j,this)})}ee&&x(RegExp.prototype[Q],"sham",!0)}},d81d:function(s,c,d){var l=d("23e7"),m=d("b727").map,g=d("1dde"),y=d("ae40"),x=g("map"),C=y("map");l({target:"Array",proto:!0,forced:!x||!C},{map:function(A){return m(this,A,arguments.length>1?arguments[1]:void 0)}})},da84:function(s,c,d){(function(l){var m=function(g){return g&&g.Math==Math&&g};s.exports=m(typeof globalThis=="object"&&globalThis)||m(typeof window=="object"&&window)||m(typeof self=="object"&&self)||m(typeof l=="object"&&l)||Function("return this")()}).call(this,d("c8ba"))},dbb4:function(s,c,d){var l=d("23e7"),m=d("83ab"),g=d("56ef"),y=d("fc6a"),x=d("06cf"),C=d("8418");l({target:"Object",stat:!0,sham:!m},{getOwnPropertyDescriptors:function(A){for(var O=y(A),F=x.f,z=g(O),U={},H=0,q,ee;z.length>H;)ee=F(O,q=z[H++]),ee!==void 0&&C(U,q,ee);return U}})},dbf1:function(s,c,d){(function(l){d.d(c,"a",function(){return g});function m(){return typeof window<"u"?window.console:l.console}var g=m()}).call(this,d("c8ba"))},ddb0:function(s,c,d){var l=d("da84"),m=d("fdbc"),g=d("e260"),y=d("9112"),x=d("b622"),C=x("iterator"),I=x("toStringTag"),A=g.values;for(var O in m){var F=l[O],z=F&&F.prototype;if(z){if(z[C]!==A)try{y(z,C,A)}catch{z[C]=A}if(z[I]||y(z,I,O),m[O]){for(var U in g)if(z[U]!==g[U])try{y(z,U,g[U])}catch{z[U]=g[U]}}}}},df75:function(s,c,d){var l=d("ca84"),m=d("7839");s.exports=Object.keys||function(y){return l(y,m)}},e01a:function(s,c,d){var l=d("23e7"),m=d("83ab"),g=d("da84"),y=d("5135"),x=d("861d"),C=d("9bf2").f,I=d("e893"),A=g.Symbol;if(m&&typeof A=="function"&&(!("description"in A.prototype)||A().description!==void 0)){var O={},F=function(){var Q=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),ve=this instanceof F?new A(Q):Q===void 0?A():A(Q);return Q===""&&(O[ve]=!0),ve};I(F,A);var z=F.prototype=A.prototype;z.constructor=F;var U=z.toString,H=String(A("test"))=="Symbol(test)",q=/^Symbol\((.*)\)[^)]+$/;C(z,"description",{configurable:!0,get:function(){var Q=x(this)?this.valueOf():this,ve=U.call(Q);if(y(O,Q))return"";var se=H?ve.slice(7,-1):ve.replace(q,"$1");return se===""?void 0:se}}),l({global:!0,forced:!0},{Symbol:F})}},e163:function(s,c,d){var l=d("5135"),m=d("7b0b"),g=d("f772"),y=d("e177"),x=g("IE_PROTO"),C=Object.prototype;s.exports=y?Object.getPrototypeOf:function(I){return I=m(I),l(I,x)?I[x]:typeof I.constructor=="function"&&I instanceof I.constructor?I.constructor.prototype:I instanceof Object?C:null}},e177:function(s,c,d){var l=d("d039");s.exports=!l(function(){function m(){}return m.prototype.constructor=null,Object.getPrototypeOf(new m)!==m.prototype})},e260:function(s,c,d){var l=d("fc6a"),m=d("44d2"),g=d("3f8c"),y=d("69f3"),x=d("7dd0"),C="Array Iterator",I=y.set,A=y.getterFor(C);s.exports=x(Array,"Array",function(O,F){I(this,{type:C,target:l(O),index:0,kind:F})},function(){var O=A(this),F=O.target,z=O.kind,U=O.index++;return!F||U>=F.length?(O.target=void 0,{value:void 0,done:!0}):z=="keys"?{value:U,done:!1}:z=="values"?{value:F[U],done:!1}:{value:[U,F[U]],done:!1}},"values"),g.Arguments=g.Array,m("keys"),m("values"),m("entries")},e439:function(s,c,d){var l=d("23e7"),m=d("d039"),g=d("fc6a"),y=d("06cf").f,x=d("83ab"),C=m(function(){y(1)}),I=!x||C;l({target:"Object",stat:!0,forced:I,sham:!x},{getOwnPropertyDescriptor:function(O,F){return y(g(O),F)}})},e538:function(s,c,d){var l=d("b622");c.f=l},e893:function(s,c,d){var l=d("5135"),m=d("56ef"),g=d("06cf"),y=d("9bf2");s.exports=function(x,C){for(var I=m(C),A=y.f,O=g.f,F=0;F<I.length;F++){var z=I[F];l(x,z)||A(x,z,O(C,z))}}},e8b5:function(s,c,d){var l=d("c6b6");s.exports=Array.isArray||function(g){return l(g)=="Array"}},e95a:function(s,c,d){var l=d("b622"),m=d("3f8c"),g=l("iterator"),y=Array.prototype;s.exports=function(x){return x!==void 0&&(m.Array===x||y[g]===x)}},f5df:function(s,c,d){var l=d("00ee"),m=d("c6b6"),g=d("b622"),y=g("toStringTag"),x=m(function(){return arguments}())=="Arguments",C=function(I,A){try{return I[A]}catch{}};s.exports=l?m:function(I){var A,O,F;return I===void 0?"Undefined":I===null?"Null":typeof(O=C(A=Object(I),y))=="string"?O:x?m(A):(F=m(A))=="Object"&&typeof A.callee=="function"?"Arguments":F}},f772:function(s,c,d){var l=d("5692"),m=d("90e3"),g=l("keys");s.exports=function(y){return g[y]||(g[y]=m(y))}},fb15:function(s,c,d){if(d.r(c),typeof window<"u"){var l=window.document.currentScript;{var m=d("8875");l=m(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:m})}var g=l&&l.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);g&&(d.p=g[1])}d("99af"),d("4de4"),d("4160"),d("c975"),d("d81d"),d("a434"),d("159b"),d("a4d3"),d("e439"),d("dbb4"),d("b64b");function y(tt,nt,ut){return nt in tt?Object.defineProperty(tt,nt,{value:ut,enumerable:!0,configurable:!0,writable:!0}):tt[nt]=ut,tt}function x(tt,nt){var ut=Object.keys(tt);if(Object.getOwnPropertySymbols){var qe=Object.getOwnPropertySymbols(tt);nt&&(qe=qe.filter(function(Qt){return Object.getOwnPropertyDescriptor(tt,Qt).enumerable})),ut.push.apply(ut,qe)}return ut}function C(tt){for(var nt=1;nt<arguments.length;nt++){var ut=arguments[nt]!=null?arguments[nt]:{};nt%2?x(Object(ut),!0).forEach(function(qe){y(tt,qe,ut[qe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(ut)):x(Object(ut)).forEach(function(qe){Object.defineProperty(tt,qe,Object.getOwnPropertyDescriptor(ut,qe))})}return tt}function I(tt){if(Array.isArray(tt))return tt}d("e01a"),d("d28b"),d("e260"),d("d3b7"),d("3ca3"),d("ddb0");function A(tt,nt){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(tt)))){var ut=[],qe=!0,Qt=!1,Zt=void 0;try{for(var Cn=tt[Symbol.iterator](),xn;!(qe=(xn=Cn.next()).done)&&(ut.push(xn.value),!(nt&&ut.length===nt));qe=!0);}catch(Mt){Qt=!0,Zt=Mt}finally{try{!qe&&Cn.return!=null&&Cn.return()}finally{if(Qt)throw Zt}}return ut}}d("a630"),d("fb6a"),d("b0c0"),d("25f0");function O(tt,nt){(nt==null||nt>tt.length)&&(nt=tt.length);for(var ut=0,qe=new Array(nt);ut<nt;ut++)qe[ut]=tt[ut];return qe}function F(tt,nt){if(tt){if(typeof tt=="string")return O(tt,nt);var ut=Object.prototype.toString.call(tt).slice(8,-1);if(ut==="Object"&&tt.constructor&&(ut=tt.constructor.name),ut==="Map"||ut==="Set")return Array.from(tt);if(ut==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ut))return O(tt,nt)}}function z(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U(tt,nt){return I(tt)||A(tt,nt)||F(tt,nt)||z()}function H(tt){if(Array.isArray(tt))return O(tt)}function q(tt){if(typeof Symbol<"u"&&Symbol.iterator in Object(tt))return Array.from(tt)}function ee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q(tt){return H(tt)||q(tt)||F(tt)||ee()}var ve=d("a352"),se=d.n(ve);function K(tt){tt.parentElement!==null&&tt.parentElement.removeChild(tt)}function J(tt,nt,ut){var qe=ut===0?tt.children[0]:tt.children[ut-1].nextSibling;tt.insertBefore(nt,qe)}var W=d("dbf1");d("13d5"),d("4fad"),d("ac1f"),d("5319");function te(tt){var nt=Object.create(null);return function(qe){var Qt=nt[qe];return Qt||(nt[qe]=tt(qe))}}var j=/-(\w)/g,re=te(function(tt){return tt.replace(j,function(nt,ut){return ut.toUpperCase()})});d("5db7"),d("73d9");var Te=["Start","Add","Remove","Update","End"],ye=["Choose","Unchoose","Sort","Filter","Clone"],Ve=["Move"],Ue=[Ve,Te,ye].flatMap(function(tt){return tt}).map(function(tt){return"on".concat(tt)}),Qe={manage:Ve,manageAndEmit:Te,emit:ye};function It(tt){return Ue.indexOf(tt)!==-1}d("caad"),d("2ca0");var vt=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function it(tt){return vt.includes(tt)}function Ge(tt){return["transition-group","TransitionGroup"].includes(tt)}function ot(tt){return["id","class","role","style"].includes(tt)||tt.startsWith("data-")||tt.startsWith("aria-")||tt.startsWith("on")}function Ct(tt){return tt.reduce(function(nt,ut){var qe=U(ut,2),Qt=qe[0],Zt=qe[1];return nt[Qt]=Zt,nt},{})}function wt(tt){var nt=tt.$attrs,ut=tt.componentData,qe=ut===void 0?{}:ut,Qt=Ct(Object.entries(nt).filter(function(Zt){var Cn=U(Zt,2),xn=Cn[0];return Cn[1],ot(xn)}));return C(C({},Qt),qe)}function Xe(tt){var nt=tt.$attrs,ut=tt.callBackBuilder,qe=Ct(Dt(nt));Object.entries(ut).forEach(function(Zt){var Cn=U(Zt,2),xn=Cn[0],Mt=Cn[1];Qe[xn].forEach(function(Ht){qe["on".concat(Ht)]=Mt(Ht)})});var Qt="[data-draggable]".concat(qe.draggable||"");return C(C({},qe),{},{draggable:Qt})}function Dt(tt){return Object.entries(tt).filter(function(nt){var ut=U(nt,2),qe=ut[0];return ut[1],!ot(qe)}).map(function(nt){var ut=U(nt,2),qe=ut[0],Qt=ut[1];return[re(qe),Qt]}).filter(function(nt){var ut=U(nt,2),qe=ut[0];return ut[1],!It(qe)})}d("c740");function Tt(tt,nt){if(!(tt instanceof nt))throw new TypeError("Cannot call a class as a function")}function Nt(tt,nt){for(var ut=0;ut<nt.length;ut++){var qe=nt[ut];qe.enumerable=qe.enumerable||!1,qe.configurable=!0,"value"in qe&&(qe.writable=!0),Object.defineProperty(tt,qe.key,qe)}}function dn(tt,nt,ut){return nt&&Nt(tt.prototype,nt),ut&&Nt(tt,ut),tt}var Sn=function(nt){var ut=nt.el;return ut},me=function(nt,ut){return nt.__draggable_context=ut},Ie=function(nt){return nt.__draggable_context},at=function(){function tt(nt){var ut=nt.nodes,qe=ut.header,Qt=ut.default,Zt=ut.footer,Cn=nt.root,xn=nt.realList;Tt(this,tt),this.defaultNodes=Qt,this.children=[].concat(Q(qe),Q(Qt),Q(Zt)),this.externalComponent=Cn.externalComponent,this.rootTransition=Cn.transition,this.tag=Cn.tag,this.realList=xn}return dn(tt,[{key:"render",value:function(ut,qe){var Qt=this.tag,Zt=this.children,Cn=this._isRootComponent,xn=Cn?{default:function(){return Zt}}:Zt;return ut(Qt,qe,xn)}},{key:"updated",value:function(){var ut=this.defaultNodes,qe=this.realList;ut.forEach(function(Qt,Zt){me(Sn(Qt),{element:qe[Zt],index:Zt})})}},{key:"getUnderlyingVm",value:function(ut){return Ie(ut)}},{key:"getVmIndexFromDomIndex",value:function(ut,qe){var Qt=this.defaultNodes,Zt=Qt.length,Cn=qe.children,xn=Cn.item(ut);if(xn===null)return Zt;var Mt=Ie(xn);if(Mt)return Mt.index;if(Zt===0)return 0;var Ht=Sn(Qt[0]),_t=Q(Cn).findIndex(function(cn){return cn===Ht});return ut<_t?0:Zt}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),tt}(),Z=d("8bbf");function he(tt,nt){var ut=tt[nt];return ut?ut():[]}function $e(tt){var nt=tt.$slots,ut=tt.realList,qe=tt.getKey,Qt=ut||[],Zt=["header","footer"].map(function(cn){return he(nt,cn)}),Cn=U(Zt,2),xn=Cn[0],Mt=Cn[1],Ht=nt.item;if(!Ht)throw new Error("draggable element must have an item slot");var _t=Qt.flatMap(function(cn,zn){return Ht({element:cn,index:zn}).map(function(Vt){return Vt.key=qe(cn),Vt.props=C(C({},Vt.props||{}),{},{"data-draggable":!0}),Vt})});if(_t.length!==Qt.length)throw new Error("Item slot must have only one child");return{header:xn,footer:Mt,default:_t}}function et(tt){var nt=Ge(tt),ut=!it(tt)&&!nt;return{transition:nt,externalComponent:ut,tag:ut?Object(Z.resolveComponent)(tt):nt?Z.TransitionGroup:tt}}function Se(tt){var nt=tt.$slots,ut=tt.tag,qe=tt.realList,Qt=tt.getKey,Zt=$e({$slots:nt,realList:qe,getKey:Qt}),Cn=et(ut);return new at({nodes:Zt,root:Cn,realList:qe})}function mt(tt,nt){var ut=this;Object(Z.nextTick)(function(){return ut.$emit(tt.toLowerCase(),nt)})}function gt(tt){var nt=this;return function(ut,qe){if(nt.realList!==null)return nt["onDrag".concat(tt)](ut,qe)}}function At(tt){var nt=this,ut=gt.call(this,tt);return function(qe,Qt){ut.call(nt,qe,Qt),mt.call(nt,tt,qe)}}var Ft=null,Kt={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(nt){return nt}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},an=["update:modelValue","change"].concat(Q([].concat(Q(Qe.manageAndEmit),Q(Qe.emit)).map(function(tt){return tt.toLowerCase()}))),Pn=Object(Z.defineComponent)({name:"draggable",inheritAttrs:!1,props:Kt,emits:an,data:function(){return{error:!1}},render:function(){try{this.error=!1;var nt=this.$slots,ut=this.$attrs,qe=this.tag,Qt=this.componentData,Zt=this.realList,Cn=this.getKey,xn=Se({$slots:nt,tag:qe,realList:Zt,getKey:Cn});this.componentStructure=xn;var Mt=wt({$attrs:ut,componentData:Qt});return xn.render(Z.h,Mt)}catch(Ht){return this.error=!0,Object(Z.h)("pre",{style:{color:"red"}},Ht.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&W.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var nt=this;if(!this.error){var ut=this.$attrs,qe=this.$el,Qt=this.componentStructure;Qt.updated();var Zt=Xe({$attrs:ut,callBackBuilder:{manageAndEmit:function(Mt){return At.call(nt,Mt)},emit:function(Mt){return mt.bind(nt,Mt)},manage:function(Mt){return gt.call(nt,Mt)}}}),Cn=qe.nodeType===1?qe:qe.parentElement;this._sortable=new se.a(Cn,Zt),this.targetDomElement=Cn,Cn.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var nt=this.list;return nt||this.modelValue},getKey:function(){var nt=this.itemKey;return typeof nt=="function"?nt:function(ut){return ut[nt]}}},watch:{$attrs:{handler:function(nt){var ut=this._sortable;ut&&Dt(nt).forEach(function(qe){var Qt=U(qe,2),Zt=Qt[0],Cn=Qt[1];ut.option(Zt,Cn)})},deep:!0}},methods:{getUnderlyingVm:function(nt){return this.componentStructure.getUnderlyingVm(nt)||null},getUnderlyingPotencialDraggableComponent:function(nt){return nt.__draggable_component__},emitChanges:function(nt){var ut=this;Object(Z.nextTick)(function(){return ut.$emit("change",nt)})},alterList:function(nt){if(this.list){nt(this.list);return}var ut=Q(this.modelValue);nt(ut),this.$emit("update:modelValue",ut)},spliceList:function(){var nt=arguments,ut=function(Qt){return Qt.splice.apply(Qt,Q(nt))};this.alterList(ut)},updatePosition:function(nt,ut){var qe=function(Zt){return Zt.splice(ut,0,Zt.splice(nt,1)[0])};this.alterList(qe)},getRelatedContextFromMoveEvent:function(nt){var ut=nt.to,qe=nt.related,Qt=this.getUnderlyingPotencialDraggableComponent(ut);if(!Qt)return{component:Qt};var Zt=Qt.realList,Cn={list:Zt,component:Qt};if(ut!==qe&&Zt){var xn=Qt.getUnderlyingVm(qe)||{};return C(C({},xn),Cn)}return Cn},getVmIndexFromDomIndex:function(nt){return this.componentStructure.getVmIndexFromDomIndex(nt,this.targetDomElement)},onDragStart:function(nt){this.context=this.getUnderlyingVm(nt.item),nt.item._underlying_vm_=this.clone(this.context.element),Ft=nt.item},onDragAdd:function(nt){var ut=nt.item._underlying_vm_;if(ut!==void 0){K(nt.item);var qe=this.getVmIndexFromDomIndex(nt.newIndex);this.spliceList(qe,0,ut);var Qt={element:ut,newIndex:qe};this.emitChanges({added:Qt})}},onDragRemove:function(nt){if(J(this.$el,nt.item,nt.oldIndex),nt.pullMode==="clone"){K(nt.clone);return}var ut=this.context,qe=ut.index,Qt=ut.element;this.spliceList(qe,1);var Zt={element:Qt,oldIndex:qe};this.emitChanges({removed:Zt})},onDragUpdate:function(nt){K(nt.item),J(nt.from,nt.item,nt.oldIndex);var ut=this.context.index,qe=this.getVmIndexFromDomIndex(nt.newIndex);this.updatePosition(ut,qe);var Qt={element:this.context.element,oldIndex:ut,newIndex:qe};this.emitChanges({moved:Qt})},computeFutureIndex:function(nt,ut){if(!nt.element)return 0;var qe=Q(ut.to.children).filter(function(xn){return xn.style.display!=="none"}),Qt=qe.indexOf(ut.related),Zt=nt.component.getVmIndexFromDomIndex(Qt),Cn=qe.indexOf(Ft)!==-1;return Cn||!ut.willInsertAfter?Zt:Zt+1},onDragMove:function(nt,ut){var qe=this.move,Qt=this.realList;if(!qe||!Qt)return!0;var Zt=this.getRelatedContextFromMoveEvent(nt),Cn=this.computeFutureIndex(Zt,nt),xn=C(C({},this.context),{},{futureIndex:Cn}),Mt=C(C({},nt),{},{relatedContext:Zt,draggedContext:xn});return qe(Mt,ut)},onDragEnd:function(){Ft=null}}}),jn=Pn;c.default=jn},fb6a:function(s,c,d){var l=d("23e7"),m=d("861d"),g=d("e8b5"),y=d("23cb"),x=d("50c4"),C=d("fc6a"),I=d("8418"),A=d("b622"),O=d("1dde"),F=d("ae40"),z=O("slice"),U=F("slice",{ACCESSORS:!0,0:0,1:2}),H=A("species"),q=[].slice,ee=Math.max;l({target:"Array",proto:!0,forced:!z||!U},{slice:function(ve,se){var K=C(this),J=x(K.length),W=y(ve,J),te=y(se===void 0?J:se,J),j,re,Te;if(g(K)&&(j=K.constructor,typeof j=="function"&&(j===Array||g(j.prototype))?j=void 0:m(j)&&(j=j[H],j===null&&(j=void 0)),j===Array||j===void 0))return q.call(K,W,te);for(re=new(j===void 0?Array:j)(ee(te-W,0)),Te=0;W<te;W++,Te++)W in K&&I(re,Te,K[W]);return re.length=Te,re}})},fc6a:function(s,c,d){var l=d("44ad"),m=d("1d80");s.exports=function(g){return l(m(g))}},fdbc:function(s,c){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(s,c,d){var l=d("4930");s.exports=l&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(LD);var gse=LD.exports;const GD=bM(gse),vse={class:"drawer-view-page__drawer-items-grid"},_se={class:"item-container relative rounded flex items-start group shadow-sm"},yse={key:0,class:"drag-handle cursor-move h-full py-1 rounded-l border border-r-0 group-hover:bg-blue-600 group-hover:border-blue-600 group-hover:text-blue-100 transition-colors"},bse=lt({__name:"DrawerItemsGrid",props:{totalResults:{default:void 0},matches:{},status:{},drawerId:{default:void 0},isDraggable:{type:Boolean,default:!1}},emits:["loadMore","dragEnd"],setup(e,{emit:t}){const i=e,r=t,s=Fe(i.matches);pn(()=>i.matches,l=>{s.value=l});const{arrivedState:c}=ey(window,{offset:{bottom:100}});pn(c,l=>{l.bottom&&d.value&&i.status!=="fetching"&&r("loadMore")},{immediate:!0});const d=De(()=>(i.totalResults??1/0)>i.matches.length);return(l,m)=>(B(),fe("div",vse,[_e(le(GD),{modelValue:s.value,"onUpdate:modelValue":m[0]||(m[0]=g=>s.value=g),class:"grid grid-cols-auto-md gap-4",itemKey:g=>g.excerptId?`${g.objectId}-${g.excerptId}`:`${g.objectId}`,handle:".drag-handle",ghostClass:"draggable-ghost",dragClass:"is-dragging",disabled:!l.isDraggable,onEnd:m[1]||(m[1]=g=>r("dragEnd",s.value))},{item:Ce(({element:g})=>[ue("div",_se,[l.isDraggable?(B(),fe("div",yse,[_e(le(ik))])):st("",!0),_e(__,{id:`object-${g.objectId}`,searchMatch:g,showDetails:!1,drawerId:l.drawerId,class:"search-result-card h-full flex-1 !rounded-l-none",mediaCardClass:["group-hover:bg-blue-50 group-hover:border-blue-600 group-hover:!text-blue-600",l.isDraggable?"rounded-l-none !border-l-0 shadow-none":""]},null,8,["id","searchMatch","drawerId","mediaCardClass"])])]),_:1},8,["modelValue","itemKey","disabled"])]))}});const xse=ln(bse,[["__scopeId","data-v-d22f8444"]]),wse={class:"drawer-view-page__drawer-items-list"},Sse={class:"item-container relative rounded flex group shadow-sm"},Tse={key:0,class:"drag-handle cursor-move py-1 rounded-l group-hover:bg-blue-600 group-hover:border-blue-600 group-hover:text-blue-100 transition-colors bg-white"},Ese=lt({__name:"DrawerItemsList",props:{totalResults:{default:void 0},matches:{},status:{},isDraggable:{type:Boolean,default:!1}},emits:["loadMore","dragEnd"],setup(e,{emit:t}){const i=e,r=t,s=Fe(i.matches);pn(()=>i.matches,l=>{s.value=l});const{arrivedState:c}=ey(window,{offset:{bottom:100}});pn(c,l=>{l.bottom&&d.value&&i.status!=="fetching"&&r("loadMore")},{immediate:!0});const d=De(()=>(i.totalResults??1/0)>i.matches.length);return(l,m)=>(B(),fe("div",wse,[_e(le(GD),{modelValue:s.value,"onUpdate:modelValue":m[0]||(m[0]=g=>s.value=g),class:"flex flex-col gap-2",itemKey:"objectId",handle:".drag-handle",ghostClass:"draggable-ghost",dragClass:"is-dragging",disabled:!l.isDraggable,onEnd:m[1]||(m[1]=g=>r("dragEnd",s.value))},{item:Ce(({element:g})=>[ue("div",Sse,[l.isDraggable?(B(),fe("div",Tse,[_e(le(ik))])):st("",!0),(B(),ze(XP,{id:`object-${g.objectId}`,key:g.objectId,searchMatch:g,showDetails:!1,class:Mn(["search-result-row flex-1",{"rounded-l-none border-l-none":l.isDraggable}])},null,8,["id","searchMatch","class"]))])]),_:1},8,["modelValue","disabled"])]))}});const Cse=ln(Ese,[["__scopeId","data-v-b2d19734"]]),Ise={class:"px-4"},Ase={class:"my-8 flex flex-wrap items-center"},Mse={class:"text-4xl font-bold flex-grow"},kse={key:0,class:"flex items-center gap-2 bg-white p-1 rounded-md"},Pse=ue("span",{class:"sr-only"},"Edit Permissions",-1),Dse=ue("span",{class:"sr-only"},"Download Drawer",-1),Lse={class:"bg-transparent-black-50 rounded-md mb-4 sm:flex justify-between items-center p-2"},Ose={key:1,class:"flex items-center gap-2 text-neutral-500 text-sm"},Rse={class:"flex items-baseline gap-2"},Fse=ue("label",{for:"location",class:"sr-only"},"Sort",-1),$se=["value"],zse=["value"],Nse=lt({__name:"DrawerViewPage",props:{drawerId:{},resultsView:{default:"grid"}},setup(e){const t=e,i=Zn.instance.base.url,r=bi(),c=(se=>Ix.includes(se))(t.resultsView)?t.resultsView:"grid",d=Fe(c),l=Fe("idle"),m=Ha(),g=_o(),y=Ju(),x=De(()=>m.getDrawerById(t.drawerId)),C={[Ps.TITLE]:"Default Title",[Ps.CUSTOM]:"Custom"},I=Fe(Ps.TITLE),A=De(()=>{var se;return(se=m.drawerRecords[t.drawerId])==null?void 0:se.title}),O=se=>Ix.includes(se.id);function F(se){if(!O(se))throw new Error(`Invalid tab id: ${se.id}`);d.value=se.id,g.replace({query:{...y.query,resultsView:se.id}})}function z(se){m.setDrawerItems(t.drawerId,se)}function U(){console.log("load more")}function H(){console.log("load all")}const q=se=>typeof se=="string"&&se in C;function ee(se){const K=se.target.value;if(!q(K))throw new Error(`Invalid sort option: ${K}`);I.value=K,Q(K),m.setDrawerSortBy(t.drawerId,K)}function Q(se){g.replace({query:{...y.query,sort:se}})}const ve=Sm();return Fn(async()=>{l.value="fetching";const se=await m.refreshDrawer(t.drawerId);if(!(se!=null&&se.contents))return l.value="error",ve.setError(new Error("Couldn't find drawer content."));if(!y.query.sort||!q(y.query.sort)){I.value=se.contents.sortBy??Ps.TITLE,Q(I.value),l.value="success";return}if(y.query.sort===se.contents.sortBy){I.value=y.query.sort,l.value="success";return}I.value=y.query.sort,await m.setDrawerSortBy(t.drawerId,y.query.sort),l.value="success"}),(se,K)=>(B(),ze(yo,{class:"drawer-view-page"},{"custom-header":Ce(()=>[le(r).customHeaderMode==1?(B(),ze(Ll,{key:0})):st("",!0)]),default:Ce(()=>{var J;return[ue("div",Ise,[_e(ts,{to:"/drawers/listDrawers",class:"flex items-center gap-1 mb-4 hover:no-underline mt-8"},{default:Ce(()=>[_e(le(Qu),{class:"transform rotate-180 h-4 w-4"}),Ot(" Back to Drawers ")]),_:1}),ue("header",Ase,[ue("h2",Mse,xt(A.value),1),(J=le(r).currentUser)!=null&&J.canManageDrawers?(B(),fe("div",kse,[_e($c,{href:`${le(i)}/permissions/edit/drawer/${se.drawerId}`,title:"Edit Permissions"},{default:Ce(()=>[_e(le(Kj),{class:"!w-5 !h-5"}),Pse]),_:1},8,["href"]),_e($c,{title:"Download Drawer",to:`/drawers/downloadDrawer/${se.drawerId}`},{default:Ce(()=>[_e(le(ew),{class:"!w-5 !h-5"}),Dse]),_:1},8,["to"])])):st("",!0)]),x.value?(B(),ze(KP,{key:0,labelsClass:"drawer-view-page__tabs sticky top-14 z-20  -mx-4 px-4 border-b border-neutral-200 pt-4",activeTabId:d.value,onTabChange:F},{default:Ce(()=>[ue("div",Lse,[ue("div",null,[x.value.contents?(B(),ze(Xx,{key:0,class:"mb-2 sm:mb-0",total:x.value.contents.totalResults,fetchStatus:l.value,showingCount:x.value.contents.matches.length,onLoadMore:U,onLoadAll:H},null,8,["total","fetchStatus","showingCount"])):(B(),fe("div",Ose,[_e(Jo,{class:"animate-spin h-5 w-5"}),Ot(" Loading... ")]))]),ue("div",Rse,[Fse,ue("select",{id:"sort",name:"sort",class:"block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-neutral-900 ring-1 ring-inset ring-neutral-300 focus:ring-2 focus:ring-indigo-600 text-sm sm:leading-6 max-w-full bg-transparent-white-800",value:I.value,onChange:ee},[(B(),fe(Ut,null,$n(C,(W,te)=>ue("option",{key:te,value:te},xt(W),9,zse)),64))],40,$se)])]),_e(Ro,{id:"grid",label:"Grid"},{default:Ce(()=>[_e(Cr,{name:"fade"},{default:Ce(()=>{var W;return[x.value.contents?(B(),ze(xse,{key:0,totalResults:x.value.contents.totalResults,matches:x.value.contents.matches,status:l.value,drawerId:se.drawerId,isDraggable:I.value===le(Ps).CUSTOM&&((W=le(r).currentUser)==null?void 0:W.canManageDrawers),onDragEnd:z},null,8,["totalResults","matches","status","drawerId","isDraggable"])):st("",!0)]}),_:1})]),_:1}),_e(Ro,{id:"list",label:"List"},{default:Ce(()=>[_e(Cr,{name:"fade"},{default:Ce(()=>{var W;return[x.value.contents?(B(),ze(Cse,{key:0,totalResults:x.value.contents.totalResults,matches:x.value.contents.matches,status:l.value,drawerId:se.drawerId,isDraggable:I.value===le(Ps).CUSTOM&&((W=le(r).currentUser)==null?void 0:W.canManageDrawers),onDragEnd:z},null,8,["totalResults","matches","status","drawerId","isDraggable"])):st("",!0)]}),_:1})]),_:1}),_e(Ro,{id:"timeline",label:"Timeline"},{default:Ce(()=>[_e(Cr,{name:"fade"},{default:Ce(()=>[x.value.contents?(B(),ze(Dw,{key:0,totalResults:x.value.contents.totalResults,matches:x.value.contents.matches,status:l.value},null,8,["totalResults","matches","status"])):st("",!0)]),_:1})]),_:1}),_e(Ro,{id:"map",label:"Map"},{default:Ce(()=>[_e(Cr,{name:"fade"},{default:Ce(()=>[x.value.contents?(B(),ze(Lw,{key:0,totalResults:x.value.contents.totalResults,matches:x.value.contents.matches,status:l.value},null,8,["totalResults","matches","status"])):st("",!0)]),_:1})]),_:1}),_e(Ro,{id:"gallery",label:"Gallery"},{default:Ce(()=>[_e(Cr,{name:"fade"},{default:Ce(()=>[x.value.contents?(B(),ze(Rw,{key:0,totalResults:x.value.contents.totalResults,matches:x.value.contents.matches,status:l.value},null,8,["totalResults","matches","status"])):st("",!0)]),_:1})]),_:1})]),_:1},8,["activeTabId"])):st("",!0)])]}),_:1}))}});const Bw=e=>(ja("data-v-ceee4709"),e=e(),Va(),e),Bse={class:"max-w-lg mx-auto mt-12"},jse=Bw(()=>ue("h1",{class:"text-4xl font-bold mb-8"},"Add Asset",-1)),Vse=["action"],Use=Bw(()=>ue("label",{for:"templateId"},"Choose a template",-1)),Hse=Bw(()=>ue("option",{value:"",disabled:"",selected:""},"--",-1)),Gse=["value"],Wse=lt({__name:"CreateAssetPage",setup(e){const t=Zn.instance.base.url,i=bi(),r=Fe("");return(s,c)=>(B(),ze(yo,{class:"create-asset-page"},{default:Ce(()=>[ue("div",Bse,[jse,ue("form",{action:`${le(t)}/assetManager/addAsset`,method:"POST",class:"flex flex-col gap-4"},[Use,vs(ue("select",{id:"templateId","onUpdate:modelValue":c[0]||(c[0]=d=>r.value=d),name:"templateId",class:"rounded-md",required:""},[Hse,(B(!0),fe(Ut,null,$n(le(i).instance.templates,d=>(B(),fe("option",{key:d.id,value:d.id},xt(d.name),9,Gse))),128))],512),[[Nh,r.value]]),_e(oi,{type:"submit",variant:"primary",class:"block my-4 w-full",disabled:!r.value},{default:Ce(()=>[Ot(" Add Asset ")]),_:1},8,["disabled"])],8,Vse)])]),_:1}))}});const qse=ln(Wse,[["__scopeId","data-v-ceee4709"]]),Zse={class:"max-w-md mx-auto py-8 px-4 text-center"},Kse=ue("h1",{class:"text-2xl my-8"},"Your Download is Ready",-1),Xse={class:"flex flex-col items-center justify-center"},Yse=ue("h1",{class:"text-3xl my-6"},"Working on it!",-1),Jse=ue("p",null," We're getting your drawer ready. We'll send you an email when your link is all set. ",-1),Qse=lt({__name:"DownloadDrawerPage",props:{drawerId:{}},setup(e){const t=e,i=Fe(!1),r=Ha(),s=Fe(null),c=bi(),d=_o();return Fn(async()=>{s.value=await r.downloadDrawer(t.drawerId),i.value=!0}),UB(()=>{var l;if(!((l=c.currentUser)!=null&&l.canManageDrawers)){d.push(`/drawers/viewDrawer/${t.drawerId}`);return}}),(l,m)=>(B(),ze(yo,{class:"download-drawer-page"},{default:Ce(()=>{var g;return[ue("div",Zse,[i.value?((g=s.value)==null?void 0:g.status)==="completed"?(B(),fe(Ut,{key:1},[Kse,ue("p",Xse,[_e(oi,{variant:"primary",href:s.value.url},{default:Ce(()=>[_e(le(ew),{class:"!w-5 !h-5 mr-2"}),Ot(" Download ")]),_:1},8,["href"]),_e(oi,{variant:"tertiary",to:`/drawers/viewDrawer/${l.drawerId}`,class:"my-6"},{default:Ce(()=>[Ot(" ← Back to Drawer ")]),_:1},8,["to"])])],64)):(B(),fe(Ut,{key:2},[Yse,Jse,_e(oi,{to:`/drawers/viewDrawer/${l.drawerId}`,class:"my-6"},{default:Ce(()=>[Ot(" ← Back to Drawer ")]),_:1},8,["to"])],64)):(B(),ze(le(Jo),{key:0,class:"!w-5 !h-5 animate-spin"}))])]}),_:1}))}}),eae=lt({__name:"LogoutPage",setup(e){const t=bi(),i=Ha(),r=_o();return Fn(async()=>{await Un.logout(),Un.clearCache(),DD(),t.init(),i.init(),r.push("/")}),()=>{}}}),tae={key:0,class:"p-4 lg:p-8 mx-auto flex-1 w-full max-w-screen-xl"},nae={class:"flex justify-between items-baseline my-4 flex-wrap"},iae={class:"text-4xl font-bold flex-1"},rae={class:"flex justify-between p-1 items-center flex-wrap"},sae={class:"inline-flex gap-2 items-center"},aae=ue("span",{class:"font-bold text-xs uppercase"},"Time",-1),oae={class:"text-sm"},lae=lt({__name:"ExcerptViewPage",props:{excerptId:{}},setup(e){const t=bi(),i=e,r=Fe(null),s=De(()=>`${Zn.instance.base.url}/asset/viewExcerpt/${i.excerptId}/true`);return Fn(async()=>{r.value=await Un.getExcerpt(i.excerptId)}),(c,d)=>(B(),ze(xP,{class:"excerpt-view-page"},{"custom-header":Ce(()=>[le(t).customHeaderMode==1?(B(),ze(Ll,{key:0})):st("",!0)]),default:Ce(()=>[_e(Cr,{name:"fade"},{default:Ce(()=>[r.value?(B(),fe("div",tae,[ue("header",nae,[ue("h1",iae,xt(r.value.label||`Excerpt ${r.value.id}`),1),_e(oi,{variant:"tertiary",to:`/asset/viewAsset/${r.value.assetId}`},{default:Ce(()=>[Ot(" View Asset ")]),_:1},8,["to"])]),_e(UP,{fileObjectId:r.value.fileObjectId,startTime:r.value.startTime,endTime:r.value.endTime},null,8,["fileObjectId","startTime","endTime"]),ue("div",rae,[ue("div",sae,[aae,ue("span",oae,xt(le(gc)(r.value.startTime))+" - "+xt(le(gc)(r.value.endTime)),1)]),ue("div",null,[_e(BP,{fileObjectId:r.value.fileObjectId},null,8,["fileObjectId"]),_e(jP,{assetId:r.value.assetId,fileObjectId:r.value.fileObjectId},null,8,["assetId","fileObjectId"]),_e(Iw,{class:"share-file-button",url:s.value},null,8,["url"])])])])):st("",!0)]),_:1})]),_:1}))}}),cae={class:"search-results-embed-page p-4"},uae={key:0,class:"flex items-center justify-center bg-neutral-200 p-4 gap-4 min-h-[480px]"},dae={key:1},hae=lt({__name:"SearchResultsEmbedPage",props:{searchId:{},embedType:{}},setup(e){const t=e,i=Pr(),r=Fe(!1);return i.onBeforeNewSearch(()=>{r.value=!1}),i.onAfterNewSearch(()=>{r.value=!0}),pn(()=>t.searchId,()=>{const s=["map","timeline"].includes(t.embedType);i.search(t.searchId,{loadAll:s})},{immediate:!0}),(s,c)=>(B(),fe("div",cae,[_e(Cr,{name:"fade",mode:"out-in"},{default:Ce(()=>[r.value?(B(),fe("div",dae,[s.embedType==="map"?(B(),ze(Lw,{key:0,class:"",totalResults:le(i).totalResults,matches:le(i).matches,status:le(i).status,onLoadMore:c[0]||(c[0]=()=>le(i).loadMore())},null,8,["totalResults","matches","status"])):s.embedType==="timeline"?(B(),ze(Dw,{key:1,totalResults:le(i).totalResults??1/0,matches:le(i).matches,status:le(i).status,onLoadMore:c[1]||(c[1]=()=>le(i).loadMore())},null,8,["totalResults","matches","status"])):s.embedType==="gallery"?(B(),ze(Rw,{key:2,totalResults:le(i).totalResults??1/0,matches:le(i).matches,status:le(i).status,onLoadMore:c[2]||(c[2]=()=>le(i).loadMore())},null,8,["totalResults","matches","status"])):st("",!0)])):(B(),fe("div",uae,[_e(No,{width:"100%",height:"100%",class:"rounded-none"},{default:Ce(()=>[Ot(" Loading... ")]),_:1})]))]),_:1})]))}});function Yd(e){return typeof e=="string"?Number.parseInt(e):null}const fae=()=>{const e={name:"home",path:"/",component:yq};if(!Zn.routes.home.redirect)return e;const t=Zn.routes.home.redirect.replace(Zn.instance.base.url,"");return t==="/"?e:{name:"home",path:"/",redirect:t}},jw=XB({history:hB(Zn.instance.base.path),scrollBehavior(e,t,i){if(i)return i;const r=e.hash?document.getElementById(e.hash.substring(1)):null;return r?{el:r,behavior:"smooth",top:100}:e.path===t.path?!1:{top:0}},routes:[fae(),{name:"asset",path:"/asset/viewAsset/:assetId",component:CJ,props:e=>{var t;return{assetId:e.params.assetId,objectId:(t=e.hash)==null?void 0:t.substring(1)}}},{name:"viewExcerpt",path:"/asset/viewExcerpt/:excerptId",component:lae,props:e=>({excerptId:Yd(e.params.excerptId)})},{name:"addAsset",path:"/asset/create",component:qse},{name:"listCollections",path:"/search/listCollections",alias:"/collections",component:FJ},{name:"browseCollection",path:"/collections/browseCollection/:collectionId",alias:"/collections/:collectionId",component:$J,props:e=>({collectionId:Yd(e.params.collectionId)})},{name:"allDrawersPage",path:"/drawers/listDrawers",component:Pre},{name:"viewDrawerPage",path:"/drawers/viewDrawer/:drawerId",component:Nse,props:e=>({drawerId:Yd(e.params.drawerId),resultsView:e.query.resultsView??null})},{name:"downloadDrawerPage",path:"/drawers/downloadDrawer/:drawerId",component:Qse,props:e=>({drawerId:Yd(e.params.drawerId)})},{name:"search",path:"/search/s/:searchId",component:Yie,props:e=>({searchId:e.params.searchId,objectId:e.query.objectId??null,resultsView:e.query.resultsView??null})},{name:"searchResultsMapEmbed",path:"/search/:embedType/:searchId",component:hae,props:!0},{name:"localLogin",path:"/loginManager/localLogin",component:cre,props:e=>({redirectURL:e.query.redirect??null})},{name:"logout",path:"/logout",component:eae},{name:"staticContentPage",path:"/page/view/:pageId",component:mre,props:e=>({pageId:Yd(e.params.pageId)})},{name:"error",path:"/error/:errorCode",component:zC,props:e=>({errorCode:Yd(e.params.errorCode)})},{name:"catchall",path:"/:pathMatch(.*)",component:zC,props:()=>({errorCode:404})}]});jw.onError(e=>{Sm().setError(e)});jw.beforeResolve((e,t,i)=>{Sm().clearError();const s=e.path.replace(/\/\//g,"/");s!==e.path&&i(s),i()});const pae=RA(BV),WD=XF();WD.use(jV);pae.use(jw).use(WD).mount("#app");export{fG as M,bG as _,Hi as a,B as b,fe as c,lt as d,En as e,yi as i,Fn as o,Fe as r};
//# sourceMappingURL=main-e24366e3.js.map
