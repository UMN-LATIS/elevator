(a=>{a.fn.serializeForm=function(){var n,r,e,i;return!(this.length<1)&&(r=n={},i=function(){var e=this.name.replace(/\[([^\]]+)?\]/g,",$1").split(","),i=e.length-1,t=a(this);if(e[0]){for(var h=0;h<i;h++)r=r[e[h]]=r[e[h]]||(""===e[h+1]?[]:{});void 0!==r.length?r.push(t.val()):r[e[i]]=t.val(),r=n}},this.filter(e=':input[type!="checkbox"][type!="radio"], input:checked').each(i),this.find(e).each(i),n)}})(jQuery);
function modifyRange(e){1==$(this).val()?($(this).closest(".widgetContents").find(".startLabel").text("Start"),null!=window.mozInnerScreenX?$(this).closest(".widgetContents").find(".dateRange").show():$(this).closest(".widgetContents").find(".dateRange").show("fast",function(){})):($(this).closest(".widgetContents").find(".startLabel").text("Date"),null!=window.mozInnerScreenX?$(this).closest(".widgetContents").find(".dateRange").hide():$(this).closest(".widgetContents").find(".dateRange").hide("fast",function(){}))}function parseDateString(e,t){var n;if(0<e.length)return Sugar.Date.isValid(Sugar.Date.create(e))?(n=Sugar.Date.create(e,{fromUTC:!0}).getTime()/1e3,t&&$(t.target).siblings(".dateHidden").val(n),!0):-1!=e.toLowerCase().indexOf("bc")&&(0<(n=(e=e.replace(/,/g,"")).match(/[0-9]+/g)).length?(n=n[0],-1!=e.toLowerCase().indexOf("century")&&(n*=100),e=-1*n*31556900-62167093e3,t&&$(t.target).siblings(".dateHidden").val(e),!0):void 0);$(t.target).siblings(".dateHidden").val("")}function parseDate(e){parseDateString($(this).val(),e)}$(document).ready(function(){$(document).on("change",".rangeModify",modifyRange),$(".rangeModify").trigger("change"),$(document).on("change",".dateText",parseDate)});
$.mapGetScript=function(t,e,a){return $.ajax({type:"GET",url:t,success:e,dataType:"script",cache:!1,async:!1})},$(document).ready(function(){$("#advancedSearchModal").on("shown.bs.modal",function(t){$(".advancedSearchText").val($(".searchText").val())})});var cachedWidth=0,navbarToTopHeight=0,navbarHeight=0;function scrollManage(){var n;document.documentElement.clientWidth!=cachedWidth&&(cachedWidth=document.documentElement.clientWidth,$(".navbar").length)&&(navbarToTopHeight=$(".navbar").offset().top-parseFloat($(".navbar").css("margin-top").replace(/auto/,0)),navbarHeight=$(".navbar").height(),n=$(".navbar").height(),0===navbarToTopHeight?(768<document.documentElement.clientWidth?$(".mainContent").css("padding-top",20+parseInt($(".navbar").css("height"))):$(".mainContent").css("padding-top",0),$(".navbar").addClass("navbar-fixed-top")):$(window).scroll(function(t){var e=$(this).scrollTop(),a=$(".footer").offset().top;a>$(document).height()||(navbarToTopHeight<=e&&e+n<a?(768<document.documentElement.clientWidth?$(".mainContent").css("padding-top",parseInt($(".navbar").css("height"))+20):$(".mainContent").css("padding-top",0),$(".navbar").addClass("navbar-fixed-top")):(768<document.documentElement.clientWidth&&$(".mainContent").css("padding-top",0),$(".navbar").removeClass("navbar-fixed-top")))}))}$(window).load(function(){scrollManage()}),$(window).resize(function(){scrollManage()}),Mousetrap.bind("command+ctrl+h",function(){$(".advancedContent").toggle()}),$(".collectionFilterSelect").on("click",function(t){t.preventDefault(),targetItem=$(this).data("collection-id"),$("#collection").val(targetItem),$("#search_concept").text($(this).text())});var searchId=null;function loadLastSearch(){try{searchId=$.cookie("lastSearch"),$.removeCookie("lastSearch",{path:"/"})}catch(t){}var e;searchId&&($(".searchResultsNavBar").removeClass("hide"),e=function(t,e,a){$.cookie("lastSearch",e,{path:"/"}),$.get(basePath+"search/getResult/"+t+"/"+e+"/"+a,function(t){"found"==t.status?nextResultLink(t.targetId):window.location=basePath+"search/s/"+t.search})},$(".previousResult").on("click",function(t){t.preventDefault(),e("previous",searchId,objectId)}),$(".nextResult").on("click",function(t){t.preventDefault(),e("next",searchId,objectId)}))}
$(document).on("click",".addAnotherSpecific",function(){$(".searchCombine").removeClass("hide");var e=$(this).closest(".specificSearch"),t=$(e).clone(!1);t.find("input[type='text']").val(""),$(e).after(t)}),$(document).on("click",".addAnotherCollection",function(){var e=$(this).closest(".form-group"),t=$(e).clone(!1);t.find("input[type='text']").val(""),$(e).after(t)}),$(document).on("click",".addAnotherTemplate",function(){var e=$(this).closest(".form-group"),t=$(e).clone(!1);$(e).after(t)}),$(document).on("change",".searchDropdown",function(){var e=$(this).find(":selected"),t=$(e).val(),e=$(e).data("templateid"),a=$(this).closest(".form-group").find(".specificSearchTextContainer");buildSearchForm(t,e,a)});let buildSearchForm=function(fieldTitle,templateId,targetGroup){$.post(basePath+"search/getFieldInfo",{fieldTitle:fieldTitle,template:templateId},function(data,textStatus,xhr){"text"==data.type?($(targetGroup).html(""),$(targetGroup).html('<input type="text" name="specificSearchText[]"  autocomplete="off" class="form-control advancedOption advancedSearchContent" value="">')):"select"==data.type||"checkbox"==data.type||"tag"==data.type?($(targetGroup).html(""),$(targetGroup).html('<select name="specificSearchText[]"  autocomplete="off" class="form-control advancedOption advancedSearchContent">'),selectElement=$(targetGroup).find("select"),$.each(data.values,function(e,t){"string"==typeof e?$(selectElement).append($("<option>",{value:e}).text(t)):$(selectElement).append($("<option>",{value:t}).text(t))})):"multiselect"==data.type&&(console.log("Hey"),$(targetGroup).html(data.renderContent),$(targetGroup).append('<input type="text" name="specificSearchText[]"  autocomplete="off" class="form-control advancedOption advancedSearchContent searchText" value="">'),$(targetGroup).find("select").on("change",function(){console.log(targetGroup);var e=$(targetGroup).find("select").map(function(e,t){return $(t).find(":selected").text()});$(targetGroup).find(".searchText").val($.makeArray(e).join(", "))}),eval($(targetGroup).find("script").text()),loadGroup(targetGroup))})};
function loadGroup(e){targetId=$(e).find(".multiselectGroup").attr("id");sourceContent[targetId];$("#"+targetId).find(".multiSelect").each(function(e,a){var t=$(a).data("cascadenumber"),r=$(a).data("category");0===t&&(t=sourceContent[targetId][r])&&((t=Object.keys(t)).sort(),$.each(t,function(e,t){$(a).append($("<option></option>").attr("value",t).text(t))}),selectedItems)&&selectedItems[targetId]&&(t=selectedItems[targetId],r=r.replace(/[^A-Za-z0-9]/g,""),t)&&t[r]&&($(a).val(t[r]),$(a).trigger("change"))})}function loadCascadeNumber(e,t){var a=sourceContent[$(e).attr("id")],r=selectedItems[$(e).attr("id")];for(i=0;i<t;i++)var c=$(e).find("[data-cascadenumber="+i+"]"),n=$(c).data("category"),c=$(c).val(),a=a[n][c];var d=$(e).find("[data-cascadenumber="+t+"]");if((n=$(d).data("category"))&&a&&(a=a[n],$(d).empty(),$(d).append("<option></option>"),void 0!==a)){var o,s=Object.keys(a);for($.isNumeric(s[0])?(a.sort(),s=Object.keys(a)):s.sort(),length=s.length,i=0;i<length;i++)key=s[i],value=a[key],o=$.isNumeric(key)?value:key,$(d).append($("<option></option>").attr("value",o).text(o));n=n.replace(/[^A-Za-z0-9]/g,""),r&&r[n]&&($(d).val(r[n]),$(d).trigger("change"))}}$(document).on("change",".multiSelect",function(e){var t=$(this).data("cascadenumber"),a=($(this).data("category"),$(this).closest(".multiselectGroup")),r=$(a).find("[data-cascadenumber]").filter(function(){return $(this).attr("data-cascadenumber")>t});$(r).each(function(e,t){$(t).val("")}),loadCascadeNumber(a,t+1)});
//# sourceMappingURL=serializeDateTemplate.min.js.map
