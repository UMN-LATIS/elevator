!function(e){e.fn.serializeForm=function(){if(this.length<1)return!1;var i={},t=i,n=':input[type!="checkbox"][type!="radio"], input:checked',r=function(){var n=this.name.replace(/\[([^\]]+)?\]/g,",$1").split(","),r=n.length-1,h=e(this);if(n[0]){for(var a=0;a<r;a++)t=t[n[a]]=t[n[a]]||(""===n[a+1]?[]:{});void 0!==t.length?t.push(h.val()):t[n[r]]=h.val(),t=i}};return this.filter(n).each(r),this.find(n).each(r),i}}(jQuery);
function modifyRange(e){1==$(this).val()?($(this).closest(".widgetContents").find(".startLabel").text("Start"),null!=window.mozInnerScreenX?$(this).closest(".widgetContents").find(".dateRange").show():$(this).closest(".widgetContents").find(".dateRange").show("fast",(function(){}))):($(this).closest(".widgetContents").find(".startLabel").text("Date"),null!=window.mozInnerScreenX?$(this).closest(".widgetContents").find(".dateRange").hide():$(this).closest(".widgetContents").find(".dateRange").hide("fast",(function(){})))}function parseDateString(e,t){if(e.length>0){if(Date.create(e).isValid()){var n=Date.utc.create(e).getTime()/1e3;return t&&$(t.target).siblings(".dateHidden").val(n),!0}if(-1==e.toLowerCase().indexOf("bc"))return!1;var a=(e=e.replace(/,/g,"")).match(/[0-9]+/g);if(a.length>0){var i=a[0];-1!=e.toLowerCase().indexOf("century")&&(i*=100);var s=-1*i*31556900-62167093e3;return t&&$(t.target).siblings(".dateHidden").val(s),!0}}else $(t.target).siblings(".dateHidden").val("")}function parseDate(e){parseDateString($(this).val(),e)}$(document).ready((function(){$(document).on("change",".rangeModify",modifyRange),$(".rangeModify").trigger("change"),$(document).on("change",".dateText",parseDate)}));
$.mapGetScript=function(t,e,a){return $.ajax({type:"GET",url:t,success:e,dataType:"script",cache:!1,async:!1})},$(document).ready((function(){$("#advancedSearchModal").on("shown.bs.modal",(function(t){$(".advancedSearchText").val($(".searchText").val())}))}));var cachedWidth=0,navbarToTopHeight=0,navbarHeight=0;function scrollManage(){if(document.documentElement.clientWidth!=cachedWidth&&(cachedWidth=document.documentElement.clientWidth,$(".navbar").length)){navbarToTopHeight=$(".navbar").offset().top-parseFloat($(".navbar").css("margin-top").replace(/auto/,0)),navbarHeight=$(".navbar").height();var t=$(".navbar").height();0===navbarToTopHeight?(document.documentElement.clientWidth>768?$(".mainContent").css("padding-top",20+parseInt($(".navbar").css("height"))):$(".mainContent").css("padding-top",0),$(".navbar").addClass("navbar-fixed-top")):$(window).scroll((function(e){var a=$(this).scrollTop(),n=$(".footer").offset().top;n>$(document).height()||(a>=navbarToTopHeight&&a+t<n?(document.documentElement.clientWidth>768?$(".mainContent").css("padding-top",parseInt($(".navbar").css("height"))+20):$(".mainContent").css("padding-top",0),$(".navbar").addClass("navbar-fixed-top")):(document.documentElement.clientWidth>768&&$(".mainContent").css("padding-top",0),$(".navbar").removeClass("navbar-fixed-top")))}))}}$(window).load((function(){scrollManage()})),$(window).resize((function(){scrollManage()})),Mousetrap.bind("command+ctrl+h",(function(){$(".advancedContent").toggle()})),$(".collectionFilterSelect").on("click",(function(t){t.preventDefault(),targetItem=$(this).data("collection-id"),$("#collection").val(targetItem),$("#search_concept").text($(this).text())}));var searchId=null;function loadLastSearch(){try{searchId=$.cookie("lastSearch"),$.removeCookie("lastSearch",{path:"/"})}catch(t){}if(searchId){$(".searchResultsNavBar").removeClass("hide");var t=function(t,e,a){$.cookie("lastSearch",e,{path:"/"}),$.get(basePath+"search/getResult/"+t+"/"+e+"/"+a,(function(t){var e=t;"found"==e.status?nextResultLink(e.targetId):window.location=basePath+"search/s/"+e.search}))};$(".previousResult").on("click",(function(e){e.preventDefault(),t("previous",searchId,objectId)})),$(".nextResult").on("click",(function(e){e.preventDefault(),t("next",searchId,objectId)}))}}
$(document).on("click",".addAnotherSpecific",(function(){$(".searchCombine").removeClass("hide");var e=$(this).closest(".specificSearch"),t=$(e).clone(!1);t.find("input[type='text']").val(""),$(e).after(t)})),$(document).on("click",".addAnotherCollection",(function(){var e=$(this).closest(".form-group"),t=$(e).clone(!1);t.find("input[type='text']").val(""),$(e).after(t)})),$(document).on("click",".addAnotherTemplate",(function(){var e=$(this).closest(".form-group"),t=$(e).clone(!1);$(e).after(t)})),$(document).on("change",".searchDropdown",(function(){var e=$(this).find(":selected"),t=$(e).val(),a=$(e).data("templateid"),o=$(this).closest(".form-group").find(".specificSearchTextContainer");buildSearchForm(t,a,o)}));const buildSearchForm=function(fieldTitle,templateId,targetGroup){$.post(basePath+"search/getFieldInfo",{fieldTitle:fieldTitle,template:templateId},(function(data,textStatus,xhr){"text"==data.type?($(targetGroup).html(""),$(targetGroup).html('<input type="text" name="specificSearchText[]"  autocomplete="off" class="form-control advancedOption advancedSearchContent" value="">')):"select"==data.type||"checkbox"==data.type||"tag"==data.type?($(targetGroup).html(""),$(targetGroup).html('<select name="specificSearchText[]"  autocomplete="off" class="form-control advancedOption advancedSearchContent">'),selectElement=$(targetGroup).find("select"),$.each(data.values,(function(e,t){"string"==typeof e?$(selectElement).append($("<option>",{value:e}).text(t)):$(selectElement).append($("<option>",{value:t}).text(t))}))):"multiselect"==data.type&&(console.log("Hey"),$(targetGroup).html(data.renderContent),$(targetGroup).append('<input type="text" name="specificSearchText[]"  autocomplete="off" class="form-control advancedOption advancedSearchContent searchText" value="">'),$(targetGroup).find("select").on("change",(function(){console.log(targetGroup);let e=$(targetGroup).find("select").map((function(e,t){return $(t).find(":selected").text()}));$(targetGroup).find(".searchText").val($.makeArray(e).join(", "))})),eval($(targetGroup).find("script").text()),loadGroup("cascade"))}))};
function loadGroup(e){sourceContent[e];$("#"+e).find(".multiSelect").each((function(t,a){var c=$(a).data("cascadenumber"),r=$(a).data("category");if(0===c){var n=sourceContent[e][r];if(n){var i=Object.keys(n);if(i.sort(),$.each(i,(function(e,t){$(a).append($("<option></option>").attr("value",t).text(t))})),selectedItems&&selectedItems[e]){var o=selectedItems[e];r=r.replace(/[^A-Za-z0-9]/g,""),o&&o[r]&&($(a).val(o[r]),$(a).trigger("change"))}}}}))}function loadCascadeNumber(e,t){var a,c=sourceContent[$(e).attr("id")],r=selectedItems[$(e).attr("id")];for(i=0;i<t;i++){var n=$(e).find("[data-cascadenumber="+i+"]");a=$(n).data("category");var o=$(n).val();c=c[a][o]}var d=$(e).find("[data-cascadenumber="+t+"]");if((a=$(d).data("category"))&&c&&(c=c[a],$(d).empty(),$(d).append("<option></option>"),void 0!==c)){var s=Object.keys(c);for($.isNumeric(s[0])?(c.sort(),s=Object.keys(c)):s.sort(),length=s.length,i=0;i<length;i++){var u;key=s[i],value=c[key],u=$.isNumeric(key)?value:key,$(d).append($("<option></option>").attr("value",u).text(u))}r[a=a.replace(/[^A-Za-z0-9]/g,"")]&&($(d).val(r[a]),$(d).trigger("change"))}}$(document).on("change",".multiSelect",(function(e){var t=$(this).data("cascadenumber"),a=($(this).data("category"),$(this).closest(".multiselectGroup")),c=$(a).find("[data-cascadenumber]").filter((function(){return $(this).attr("data-cascadenumber")>t}));$(c).each((function(e,t){$(t).val("")})),loadCascadeNumber(a,t+1)}));
//# sourceMappingURL=serializeDateTemplate.min.js.map
