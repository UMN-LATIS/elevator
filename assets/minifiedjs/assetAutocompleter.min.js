var relatedAssetPreview=function(e,t,s){if(e.length>0){var o=$("#autocompleter-template").html(),c=Handlebars.compile(o),a=t;$.get(basePath+"asset/getAssetPreview/"+e,(function(e){try{jsonObject=$.parseJSON(e)}catch(t){return void alert(t+" "+e)}if(jsonObject){var t=jsonObject;t.base_url=basePath;var o=c(t);$(a).closest(s).find(".autocompletePreview").show(),$(a).closest(s).find(".autocompleteEdit").show(),$(a).closest(s).find(".clearRelated").show(),$(a).closest(s).find(".assetPreview").html(o),$(a).closest(s).find(".newAssetButton").attr("disabled",!0)}}))}},buildAssetAutocomplete=function(e){var t=$("#autocompleter-template").html(),s=Handlebars.compile(t);$(".tryAutocompleteAsset").length&&$(".tryAutocompleteAsset").each((function(t,o){$(o).val().length>0&&($(o).closest(e).find(".autocompletePreview").show(),$(o).closest(e).find(".autocompleteEdit").show(),$(o).closest(e).find(".clearRelated").show(),$(o).closest(e).find(".newAssetButton").attr("disabled",!0)),$(o).autocomplete({source:function(t,s){var c={searchText:t.term},a=$(o).closest(e).find(".matchAgainstSelector").val();$.post(basePath+"search/searchResults/",{searchQuery:JSON.stringify(c),templateId:a,suppressRecent:!0,showHidden:!0},(function(e){try{jsonObject=$.parseJSON(e)}catch(t){return void alert(t+" "+e)}!0===jsonObject.success&&($.each(jsonObject.matches,(function(e,t){if(!t||t.objectId==$("#inputObjectId").val())return jsonObject.matches.splice(e,1),!0;t.value=t.objectId,jsonObject.matches[e]=t})),s(jsonObject.matches))}))},messages:{noResults:"",results:function(){}},close:function(e,t){void 0!==e.which&&($(o).hasClass("relatedAssetSelectedItem")||$(o).val(""))},select:function(t,c){$(o).closest(e).find(".relatedAssetSelectedItem").val(c.item.objectId);var a=s(c.item);$(this).trigger("change"),$(this).closest(e).find(".autocompletePreview").show(),$(this).closest(e).find(".autocompleteEdit").show(),$(this).closest(e).find(".clearRelated").show(),$(this).closest(e).find(".newAssetButton").attr("disabled",!0),$(this).closest(e).find(".assetPreview").html(a)}}).data("ui-autocomplete")._renderItem=function(e,t){t.base_url=basePath;var o=s(t);return $(o).appendTo(e)}}))};
//# sourceMappingURL=assetAutocompleter.min.js.map
