var relatedAssetPreview=function(e,t,s){if(e.length>0){var o=$("#autocompleter-template").html(),c=Handlebars.compile(o),a=t;$.get(basePath+"asset/getAssetPreview/"+e,function(e){try{jsonObject=$.parseJSON(e)}catch(t){return void alert(t+" "+e)}if(jsonObject){var o=jsonObject;o.base_url=basePath;var l=c(o);$(a).closest(s).find(".autocompletePreview").show(),$(a).closest(s).find(".autocompleteEdit").show(),$(a).closest(s).find(".clearRelated").show(),$(a).closest(s).find(".assetPreview").html(l),$(a).closest(s).find(".newAssetButton").attr("disabled",!0)}})}},buildAssetAutocomplete=function(e){var t=$("#autocompleter-template").html(),s=Handlebars.compile(t);$(".tryAutocompleteAsset").length&&$(".tryAutocompleteAsset").each(function(t,o){$(o).val().length>0&&($(o).closest(e).find(".autocompletePreview").show(),$(o).closest(e).find(".autocompleteEdit").show(),$(o).closest(e).find(".clearRelated").show(),$(o).closest(e).find(".newAssetButton").attr("disabled",!0)),$(o).autocomplete({source:function(e,t){var s={searchText:e.term},c=$(o).closest(".widgetContents").find(".matchAgainstSelector").val();$.post(basePath+"search/searchResults/",{searchQuery:JSON.stringify(s),templateId:c,suppressRecent:!0,showHidden:!0},function(e){try{jsonObject=$.parseJSON(e)}catch(s){return void alert(s+" "+e)}jsonObject.success===!0&&($.each(jsonObject.matches,function(e,t){return t&&t.objectId!=$("#inputObjectId").val()?(t.value=t.objectId,void(jsonObject.matches[e]=t)):(jsonObject.matches.splice(e,1),!0)}),t(jsonObject.matches))})},messages:{noResults:"",results:function(){}},close:function(e,t){void 0!==e.which&&($(o).hasClass("relatedAssetSelectedItem")||$(o).val(""))},select:function(t,c){$(o).closest(e).find(".relatedAssetSelectedItem").val("ui.item.objectId");var a=s(c.item);$(this).trigger("change"),$(this).closest(e).find(".autocompletePreview").show(),$(this).closest(e).find(".autocompleteEdit").show(),$(this).closest(e).find(".clearRelated").show(),$(this).closest(e).find(".newAssetButton").attr("disabled",!0),$(this).closest(e).find(".assetPreview").html(a)}}).data("ui-autocomplete")._renderItem=function(e,t){t.base_url=basePath;var o=s(t);return $(o).appendTo(e)}})};
//# sourceMappingURL=assetAutocompleter.min.js.map
