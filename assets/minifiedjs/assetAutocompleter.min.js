var relatedAssetPreview=function(e,t,s){if(e.length>0){var o=$("#autocompleter-template").html(),a=Handlebars.compile(o),c=t;$.get(basePath+"asset/getAssetPreview/"+e,(function(e){try{jsonObject=$.parseJSON(e)}catch(t){return void alert(t+" "+e)}if(jsonObject){var t=jsonObject;t.base_url=basePath;var o=a(t);$(c).closest(s).find(".autocompletePreview").show(),$(c).closest(s).find(".autocompleteEdit").show(),$(c).closest(s).find(".clearRelated").show(),$(c).closest(s).find(".assetPreview").html(o),$(c).closest(s).find(".newAssetButton").attr("disabled",!0)}}))}},buildAssetAutocomplete=function(e){var t=$("#autocompleter-template").html(),s=Handlebars.compile(t);$(".tryAutocompleteAsset").length&&$(".tryAutocompleteAsset").each((function(t,o){$(o).val().length>0&&($(o).closest(e).find(".autocompletePreview").show(),$(o).closest(e).find(".autocompleteEdit").show(),$(o).closest(e).find(".clearRelated").show(),$(o).closest(e).find(".newAssetButton").attr("disabled",!0)),$(o).autocomplete({source:function(t,s){var a={searchText:t.term},c=$(o).closest(e).find(".matchAgainstSelector").val();$.post(basePath+"search/searchResults/",{searchQuery:JSON.stringify(a),templateId:c,suppressRecent:!0,showHidden:!0},(function(e){try{jsonObject=e}catch(t){return void alert(t+" "+e)}!0===jsonObject.success&&($.each(jsonObject.matches,(function(e,t){if(!t||t.objectId==$("#inputObjectId").val())return jsonObject.matches.splice(e,1),!0;t.value=t.objectId,jsonObject.matches[e]=t})),s(jsonObject.matches))})).fail((function(e){e.readyState>0&&alert(JSON.stringify(e))}))},messages:{noResults:"",results:function(){}},close:function(e,t){void 0!==e.which&&($(o).hasClass("relatedAssetSelectedItem")||$(o).val(""))},select:function(t,a){$(o).closest(e).find(".relatedAssetSelectedItem").val(a.item.objectId);var c=s(a.item);$(this).trigger("change"),$(this).closest(e).find(".autocompletePreview").show(),$(this).closest(e).find(".autocompleteEdit").show(),$(this).closest(e).find(".clearRelated").show(),$(this).closest(e).find(".newAssetButton").attr("disabled",!0),$(this).closest(e).find(".assetPreview").html(c)}}).data("ui-autocomplete")._renderItem=function(e,t){t.base_url=basePath;var o=s(t);return $(o).appendTo(e)}}))};
//# sourceMappingURL=assetAutocompleter.min.js.map
