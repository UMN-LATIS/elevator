var relatedAssetPreview=function(e,t,s){var o,c,a;0<e.length&&(o=$("#autocompleter-template").html(),c=Handlebars.compile(o),a=t,$.get(basePath+"asset/getAssetPreview/"+e,function(t){try{jsonObject=$.parseJSON(t)}catch(e){return void alert(e+" "+t)}jsonObject&&((t=jsonObject).base_url=basePath,t=c(t),$(a).closest(s).find(".autocompletePreview").show(),$(a).closest(s).find(".autocompleteEdit").show(),$(a).closest(s).find(".clearRelated").show(),$(a).closest(s).find(".assetPreview").html(t),$(a).closest(s).find(".newAssetButton").attr("disabled",!0))}))},buildAssetAutocomplete=function(c){var e=$("#autocompleter-template").html(),s=Handlebars.compile(e);$(".tryAutocompleteAsset").length&&$(".tryAutocompleteAsset").each(function(e,o){0<$(o).val().length&&($(o).closest(c).find(".autocompletePreview").show(),$(o).closest(c).find(".autocompleteEdit").show(),$(o).closest(c).find(".clearRelated").show(),$(o).closest(c).find(".newAssetButton").attr("disabled",!0)),$(o).autocomplete({source:function(e,s){var e={searchText:e.term},t=$(o).closest(c).find(".matchAgainstSelector").val();$.post(basePath+"search/searchResults/",{searchQuery:JSON.stringify(e),templateId:t,suppressRecent:!0,showHidden:!0},function(t){try{jsonObject=t}catch(e){return void alert(e+" "+t)}!0===jsonObject.success&&($.each(jsonObject.matches,function(e,t){if(!t||t.objectId==$("#inputObjectId").val())return jsonObject.matches.splice(e,1),!0;t.value=t.objectId,jsonObject.matches[e]=t}),s(jsonObject.matches))}).fail(function(e){0<e.readyState&&alert(JSON.stringify(e))})},messages:{noResults:"",results:function(){}},close:function(e,t){void 0===e.which||$(o).hasClass("relatedAssetSelectedItem")||$(o).val("")},select:function(e,t){$(o).closest(c).find(".relatedAssetSelectedItem").val(t.item.objectId);t=s(t.item);$(this).trigger("change"),$(this).closest(c).find(".autocompletePreview").show(),$(this).closest(c).find(".autocompleteEdit").show(),$(this).closest(c).find(".clearRelated").show(),$(this).closest(c).find(".newAssetButton").attr("disabled",!0),$(this).closest(c).find(".assetPreview").html(t)}}).data("ui-autocomplete")._renderItem=function(e,t){t.base_url=basePath;t=s(t);return $(t).appendTo(e)}})};
//# sourceMappingURL=assetAutocompleter.min.js.map
