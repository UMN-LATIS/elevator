{"version":3,"sources":["progressbarcontrol.js"],"names":["$","goMapProgressBar","map","options","bar","this","init","width","loadstring","operations","current","container","append","div_","text_","container_","start","data","getTmpMarkerCount","css","color","html","display","countDown","updateLoader","step","percentage_","Math","ceil","remove","hide","goMap","count","getMarkerCount","setTimeout","jQuery"],"mappings":"CAAA,SAAUA,GACTA,EAAEC,iBAAmB,SAASC,EAAKC,GAClC,GAAIC,GAAMC,IACVD,GAAIF,IAAMA,EACVE,EAAID,QAAUA,MAEdC,EAAIE,KAAO,WACVF,EAAIG,MAAQH,EAAID,QAAQI,OAAS,IACjCH,EAAII,WAAaJ,EAAID,QAAQK,YAAc,aAC3CJ,EAAIK,WAAa,EACjBL,EAAIM,QAAU,CAEd,IAAIC,GAAY,6FAA+FP,EAAIG,MAAQ,4SAKzHP,GAAEI,EAAIF,KAAKU,OAAOD,GAEpBP,EAAIS,KAAOb,EAAE,iBACbI,EAAIU,MAAQd,EAAE,sBACdI,EAAIW,WAAaf,EAAE,4BAGpBI,EAAIY,MAAQ,WACX,GAAIP,GAAaT,EAAEI,EAAIF,KAAKe,KAAK,SAASC,mBAC1Cd,GAAIK,WAAaA,GAAc,EAC/BL,EAAIM,QAAU,EACdN,EAAIS,KAAKM,KAAKZ,MAAQ,OACtBH,EAAIU,MAAMK,KAAKC,MAAQ,SAASC,KAAKjB,EAAII,YACzCJ,EAAIW,WAAWI,KAAKG,QAAU,UAE9BlB,EAAImB,aAGLnB,EAAIoB,aAAe,SAASC,GAE3B,GADArB,EAAIM,QAAUe,EACVrB,EAAIM,QAAU,EAAG,CACpB,GAAIgB,GAAcC,KAAKC,KAAMxB,EAAIM,QAAUN,EAAIK,WAAc,IACzDiB,GAAc,MACZA,EAAc,KACjBtB,EAAIS,KAAKM,KAAKZ,MAAQmB,EAAc,MACpCtB,EAAIU,MAAMO,KAAKjB,EAAIM,QAAU,MAAQN,EAAIK,cAI9CL,EAAIyB,OAAS,WACZzB,EAAIW,WAAWe,QAGhB1B,EAAImB,UAAY,WACf,GAAIQ,GAAQ/B,EAAEI,EAAIF,KAAKe,KAAK,SACxBe,EAAQD,EAAME,gBACfF,GAAMb,oBAAsBc,GAC9B5B,EAAIoB,aAAaQ,GACjBE,WAAW,WACV9B,EAAImB,aACF,MAGHnB,EAAIyB,UAENzB,EAAIE,SAGH6B","file":"progressbarcontrol.js","sourcesContent":["(function($) {\n\t$.goMapProgressBar = function(map, options) {\n\t\tvar bar = this;\n\t\tbar.map = map;\n\t\tbar.options = options || {}; \n\t\t\n\t\tbar.init = function() {\n\t\t\tbar.width = bar.options.width || 176;\n\t\t\tbar.loadstring = bar.options.loadstring || 'Loading...';\n\t\t\tbar.operations = 0;\n\t\t\tbar.current = 0;\n\n\t\t\tvar container = '<div id=\"geo_progress_container\" style=\"position:absolute;display:none;z-index:1001;width:' + bar.width + 'px;height:20px;border:1px solid #555;background-color:#fff;text-align:left;font-size:0.8em;\">'\n\t\t\t\t+ '<div style=\"position:absolute;width:100%;border:5px;text-align:center;vertical-align:bottom;\" id=\"geo_progress_text\">asd</div>'\n\t\t\t\t+ '<div style=\"background-color:green;height:100%;\" id=\"geo_progress\"></div>'\n\t\t\t\t+ '</div>';\n\n  \t\t\t$(bar.map).append(container);\n\n\t\t\tbar.div_ = $('#geo_progress');\n\t\t\tbar.text_ = $('#geo_progress_text');\n\t\t\tbar.container_ = $('#geo_progress_container');\n\t\t};\n\t\t\n\t\tbar.start = function() {\n\t\t\tvar operations = $(bar.map).data('goMap').getTmpMarkerCount();\n\t\t\tbar.operations = operations || 0;\n\t\t\tbar.current = 0;\n\t\t\tbar.div_.css({'width':'0%'});\n\t\t\tbar.text_.css({'color':'#111'}).html(bar.loadstring);\n\t\t\tbar.container_.css({'display':'block'});\n\t\t\t\n\t\t\tbar.countDown();\n\t\t};\n\n\t\tbar.updateLoader = function(step) {\n\t\t\tbar.current = step;\n\t\t\tif (bar.current > 0) {\n\t\t\t\tvar percentage_ = Math.ceil((bar.current / bar.operations) * 100);\n\t\t\t\tif (percentage_ > 100) \n      \t\t\t\tpercentage_ = 100; \n\t\t\t    bar.div_.css({'width':percentage_ + '%'});\n\t\t\t    bar.text_.html(bar.current + ' / ' + bar.operations); \n  \t\t\t}\n\t\t};\n\n\t\tbar.remove = function() {\n\t\t\tbar.container_.hide();\n\t\t};\n\n\t\tbar.countDown = function() {\n\t\t\tvar goMap = $(bar.map).data('goMap');\n\t\t\tvar count = goMap.getMarkerCount();\n\t\t\tif(goMap.getTmpMarkerCount() > count) {\n\t\t\t\tbar.updateLoader(count);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tbar.countDown();\n\t\t\t\t}, 200);\n\t\t\t}\n\t\t\telse\n\t\t\t\tbar.remove();\n\t\t};\n\t\tbar.init();\t\t\n\t};\n \n})(jQuery);\n"],"sourceRoot":"/source/"}