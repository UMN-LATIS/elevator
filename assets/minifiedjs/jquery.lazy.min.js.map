{"version":3,"sources":["jquery.lazy.js"],"names":["$","window","document","undefined","_executeLazy","instance","configuration","items","events","_initialize","_isRetinaDisplay","devicePixelRatio","_prepareItems","setTimeout","_lazyLoadItems","e","_throttle","event","type","_actualWidth","_actualHeight","all","a","additionalItems","push","apply","g","on","name","filter","this","data","attr","i","length","element","tag","tagName","toLowerCase","propertyName","css","allItems","destroy","loadTriggered","imageBase","item","_isInLoadableArea","customLoader","attribute","is","_handleItem","_awaitingAfterLoad","errorCallback","_triggerCallback","_reduceAwaiting","off","one","removeAttr","response","load","error","imageObj","Image","hide","remove","complete","elementBound","getBoundingClientRect","direction","threshold","vertical","_getActualHeight","top","bottom","horizontal","_getActualWidth","left","right","width","height","delay","callback","timeout","lastExecute","ignoreThrottle","run","Date","call","elapsed","clearTimeout","size","args","slice","arguments","LazyPlugin","elements","settings","_instance","_config","extend","_events","config","entryName","value","addItems","getItems","update","useThrottle","loadAll","fn","Lazy","lazy","prototype","chainable","autoDestroy","bind","visibleOnly","appendScroll","scrollDirection","defaultImage","placeholder","combined","retinaAttribute","loaderAttribute","removeAttribute","handledName","effect","effectTime","enableThrottle","throttle","beforeLoad","afterLoad","onError","onFinishedAll","jQuery"],"mappings":"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","file":"jquery.lazy.min.js","sourcesContent":["/*!\n * jQuery Lazy - v1.6.5\n * http://jquery.eisbehr.de/lazy/\n *\n * Copyright 2012 - 2016, Daniel 'Eisbehr' Kern\n *\n * Dual licensed under the MIT and GPL-2.0 licenses:\n * http://www.opensource.org/licenses/mit-license.php\n * http://www.gnu.org/licenses/gpl-2.0.html\n *\n * $(\"img.lazy\").lazy();\n */\n\n;(function($, window, document, undefined)\n{\n    \"use strict\";\n\n    // make lazy a bit more case-insensitive :)\n    $.fn.Lazy = $.fn.lazy = function(settings)\n    {\n        return new LazyPlugin(this, settings);\n    };\n\n    /**\n     * contains all logic and the whole element handling\n     * is packed in a private function outside class to reduce memory usage, because it will not be created on every plugin instance\n     * @access private\n     * @type {function}\n     * @param {LazyPlugin} instance\n     * @param {function} configuration\n     * @param {object} items\n     * @param {object} events\n     * @return void\n     */\n    function _executeLazy(instance, configuration, items, events)\n    {\n        /**\n         * a helper to trigger the 'onFinishedAll' callback after all other events\n         * @access private\n         * @type {number}\n         */\n        var _awaitingAfterLoad = 0,\n\n        /**\n         * visible content width\n         * @access private\n         * @type {number}\n         */\n        _actualWidth = -1,\n\n        /**\n         * visible content height\n         * @access private\n         * @type {number}\n         */\n        _actualHeight = -1,\n\n        /**\n         * determine possible detected high pixel density\n         * @access private\n         * @type {boolean}\n         */\n        _isRetinaDisplay = false;\n\n        /**\n         * initialize plugin\n         * bind loading to events or set delay time to load all items at once\n         * @access private\n         * @return void\n         */\n        function _initialize()\n        {\n            // detect actual device pixel ratio\n            // noinspection JSUnresolvedVariable\n            _isRetinaDisplay = window.devicePixelRatio > 1;\n\n            // prepare all initial items\n            _prepareItems(items);\n\n            // if delay time is set load all items at once after delay time\n            if( configuration(\"delay\") >= 0 ) setTimeout(function() { _lazyLoadItems(true); }, configuration(\"delay\"));\n\n            // if no delay is set or combine usage is active bind events\n            if( configuration(\"delay\") < 0 || configuration(\"combined\") )\n            {\n                // create unique event function\n                events.e = _throttle(configuration(\"throttle\"), function(event)\n                {\n                    // reset detected window size on resize event\n                    if( event.type === \"resize\" )\n                        _actualWidth = _actualHeight = -1;\n\n                    // execute 'lazy magic'\n                    _lazyLoadItems(event.all);\n                });\n\n                // create function to add new items to instance\n                events.a = function(additionalItems)\n                {\n                    _prepareItems(additionalItems);\n                    items.push.apply(items, additionalItems);\n                };\n\n                // create function to get all instance items left\n                events.g = function()\n                {\n                    return items;\n                };\n\n                // load initial items\n                _lazyLoadItems();\n\n                // bind lazy load functions to scroll and resize event\n                $(configuration(\"appendScroll\")).on(\"scroll.\" + instance.name + \" resize.\" + instance.name, events.e);\n            }\n        }\n\n        /**\n         * prepare items before handle them\n         * @access private\n         * @param {Array|object|jQuery} items\n         * @return void\n         */\n        function _prepareItems(items)\n        {\n            // filter items and only add those who not handled yet and got needed attributes available\n            items = $(items).filter(function()\n            {\n                return !$(this).data(configuration(\"handledName\")) && ($(this).attr(configuration(\"attribute\")) || $(this).attr(configuration(\"loaderAttribute\")));\n            })\n\n            // append plugin instance to all elements\n            .data(\"plugin_\" + instance.name, instance);\n\n            // set default image and/or placeholder to elements if configured\n            if( configuration(\"defaultImage\") || configuration(\"placeholder\") )\n                for( var i = 0; i < items.length; i++ )\n                {\n                    var element = $(items[i]),\n                        tag = items[i].tagName.toLowerCase(),\n                        propertyName = \"background-image\";\n\n                    // set default image on every element without source\n                    if( tag == \"img\" && configuration(\"defaultImage\") && !element.attr(\"src\") )\n                        element.attr(\"src\", configuration(\"defaultImage\"));\n\n                    // set placeholder on every element without background image\n                    else if( tag != \"img\" && configuration(\"placeholder\") && (!element.css(propertyName) || element.css(propertyName) == \"none\") )\n                        element.css(propertyName, \"url(\" + configuration(\"placeholder\") + \")\");\n                }\n        }\n\n        /**\n         * the 'lazy magic' - check all items\n         * @access private\n         * @param {boolean} [allItems]\n         * @return void\n         */\n        function _lazyLoadItems(allItems)\n        {\n            // skip if no items where left\n            if( !items.length )\n            {\n                // destroy instance if option is enabled\n                if( configuration(\"autoDestroy\") )\n                    // noinspection JSUnresolvedFunction\n                    instance.destroy();\n\n                return;\n            }\n\n            // helper to see if something was changed\n            var loadTriggered = false,\n\n            // get image base once, not on every image loop\n            imageBase = configuration(\"imageBase\") ? configuration(\"imageBase\") : \"\";\n\n            // loop all available items\n            for( var i = 0; i < items.length; i++ )\n                (function(item)\n                {\n                    // item is at least in loadable area\n                    if( _isInLoadableArea(item) || allItems )\n                    {\n                        var element = $(item),\n                            tag = item.tagName.toLowerCase(),\n                            attribute = element.attr(configuration(\"attribute\")),\n                            customLoader;\n\n                            // is not already handled\n                        if( !element.data(configuration(\"handledName\")) &&\n                            // and is visible or visibility doesn't matter\n                            (!configuration(\"visibleOnly\") || element.is(\":visible\")) && (\n                            // and image source attribute is available\n                            attribute && (\n                            // and is image tag where attribute is not equal source\n                            (tag == \"img\" && imageBase + attribute != element.attr(\"src\")) ||\n                            // or is non image tag where attribute is not equal background\n                            (tag != \"img\" && imageBase + attribute != element.css(\"background-image\")) ) ||\n                            // or custom loader is available\n                            (customLoader = element.attr(configuration(\"loaderAttribute\"))) ))\n                        {\n                            // mark element always as handled as this point to prevent double loading\n                            loadTriggered = true;\n                            element.data(configuration(\"handledName\"), true);\n\n                            // load item\n                            _handleItem(element, tag, imageBase, customLoader);\n                        }\n                    }\n                })(items[i]);\n\n            // when something was loaded remove them from remaining items\n            if( loadTriggered )\n                items = $(items).filter(function()\n                {\n                    return !$(this).data(configuration(\"handledName\"));\n                });\n        }\n\n        /**\n         * load the given element the lazy way\n         * @access private\n         * @param {object} element\n         * @param {string} tag\n         * @param {string} imageBase\n         * @param {function} [customLoader]\n         * @return void\n         */\n        function _handleItem(element, tag, imageBase, customLoader)\n        {\n            // increment count of items waiting for after load\n            ++_awaitingAfterLoad;\n\n            // extended error callback for correct 'onFinishedAll' handling\n            var errorCallback = function()\n            {\n                _triggerCallback(\"onError\", element);\n                _reduceAwaiting();\n            };\n\n            // trigger function before loading image\n            _triggerCallback(\"beforeLoad\", element);\n\n            // handle custom loader\n            if( customLoader )\n            {\n                // bind error event to trigger callback and reduce waiting amount\n                element.off(\"error\").one(\"error\", errorCallback);\n\n                // bind after load callback to image\n                element.one(\"load\", function()\n                {\n                    // remove attribute from element\n                    if( configuration(\"removeAttribute\") )\n                        element.removeAttr(configuration(\"loaderAttribute\"));\n\n                    // call after load event\n                    _triggerCallback(\"afterLoad\", element);\n\n                    // remove item from waiting queue and possible trigger finished event\n                    _reduceAwaiting();\n                });\n\n                // trigger custom loader\n                if( !_triggerCallback(customLoader, element, function(response)\n                {\n                    if( response ) element.load();\n                    else element.error();\n                })) element.error();\n            }\n\n            // handle images\n            else\n            {\n                // create image object\n                var imageObj = $(new Image());\n\n                // bind error event to trigger callback and reduce waiting amount\n                imageObj.one(\"error\", errorCallback);\n\n                // bind after load callback to image\n                imageObj.one(\"load\", function()\n                {\n                    // remove element from view\n                    element.hide();\n\n                    // set image back to element\n                    if( tag == \"img\" ) element.attr(\"src\", imageObj.attr(\"src\"));\n                    else element.css(\"background-image\", \"url(\" + imageObj.attr(\"src\") + \")\");\n\n                    // bring it back with some effect!\n                    element[configuration(\"effect\")](configuration(\"effectTime\"));\n\n                    // remove attribute from element\n                    if( configuration(\"removeAttribute\") )\n                        element.removeAttr(configuration(\"attribute\") + \" \" + configuration(\"retinaAttribute\"));\n\n                    // call after load event\n                    _triggerCallback(\"afterLoad\", element);\n\n                    // cleanup image object\n                    imageObj.remove();\n\n                    // remove item from waiting queue and possible trigger finished event\n                    _reduceAwaiting();\n                });\n\n                // set source\n                imageObj.attr(\"src\", imageBase + element.attr(configuration(_isRetinaDisplay && element.attr(configuration(\"retinaAttribute\")) ? \"retinaAttribute\" : \"attribute\")));\n\n                // call after load even on cached image\n                if( imageObj.complete ) imageObj.load();\n            }\n        }\n\n        /**\n         * check if the given element is inside the current viewport or threshold\n         * @access private\n         * @param {object} element\n         * @return {boolean}\n         */\n        function _isInLoadableArea(element)\n        {\n            var elementBound = element.getBoundingClientRect(),\n                direction    = configuration(\"scrollDirection\"),\n                threshold    = configuration(\"threshold\"),\n                vertical     = // check if element is in loadable area from top\n                               ((_getActualHeight() + threshold) > elementBound.top) &&\n                               // check if element is even in loadable are from bottom\n                               (-threshold < elementBound.bottom),\n                horizontal   = // check if element is in loadable area from left\n                               ((_getActualWidth() + threshold) > elementBound.left) &&\n                               // check if element is even in loadable area from right\n                               (-threshold < elementBound.right);\n\n            if( direction == \"vertical\" ) return vertical;\n            else if( direction == \"horizontal\" ) return horizontal;\n\n            return vertical && horizontal;\n        }\n\n        /**\n         * receive the current viewed width of the browser\n         * @access private\n         * @return {number}\n         */\n        function _getActualWidth()\n        {\n            return _actualWidth >= 0 ? _actualWidth : (_actualWidth = $(window).width());\n        }\n\n        /**\n         * receive the current viewed height of the browser\n         * @access private\n         * @return {number}\n         */\n        function _getActualHeight()\n        {\n            return _actualHeight >= 0 ? _actualHeight : (_actualHeight = $(window).height());\n        }\n\n        /**\n         * helper function to throttle down event triggering\n         * @access private\n         * @param {number} delay\n         * @param {function} callback\n         * @return {function}\n         */\n        function _throttle(delay, callback)\n        {\n            var timeout, lastExecute = 0;\n\n            return function(event, ignoreThrottle)\n            {\n                var elapsed = +new Date() - lastExecute;\n\n                function run()\n                {\n                    lastExecute = +new Date();\n                    callback.call(instance, event);\n                }\n\n                timeout && clearTimeout(timeout);\n\n                if( elapsed > delay || !configuration(\"enableThrottle\") || ignoreThrottle ) run();\n                else timeout = setTimeout(run, delay - elapsed);\n            };\n        }\n\n        /**\n         * reduce count of awaiting elements to 'afterLoad' event and fire 'onFinishedAll' if reached zero\n         * @access private\n         * @return void\n         */\n        function _reduceAwaiting()\n        {\n            --_awaitingAfterLoad;\n\n            // if no items were left trigger finished event\n            if( !items.size() && !_awaitingAfterLoad ) _triggerCallback(\"onFinishedAll\");\n        }\n\n        /**\n         * single implementation to handle callbacks, pass element and set 'this' to current instance\n         * @access private\n         * @param {string|function} callback\n         * @param {object} [element]\n         * @param {*} [args]\n         * @return {boolean}\n         */\n        function _triggerCallback(callback, element, args)\n        {\n            if( (callback = configuration(callback)) )\n            {\n                // jQuery's internal '$(arguments).slice(1)' are causing problems at least on old iPads\n                // below is shorthand of 'Array.prototype.slice.call(arguments, 1)'\n                callback.apply(instance, [].slice.call(arguments, 1));\n                return true;\n            }\n\n            return false;\n        }\n\n        // set up lazy\n        (function()\n        {\n            // if event driven don't wait for page loading\n            if( configuration(\"bind\") == \"event\" ) _initialize();\n\n            // otherwise load initial items and start lazy after page load\n            else $(window).load(_initialize);\n        })();\n    }\n\n    /**\n     * lazy plugin class constructor\n     * @constructor\n     * @access private\n     * @param {object} elements\n     * @param {object} settings\n     * @return {object|LazyPlugin}\n     */\n    function LazyPlugin(elements, settings)\n    {\n        /**\n         * this lazy plugin instance\n         * @access private\n         * @type {object|LazyPlugin}\n         */\n        var _instance = this,\n\n        /**\n         * this lazy plugin instance configuration\n         * @access private\n         * @type {object}\n         */\n        _config = $.extend({}, _instance.configuration, settings),\n\n        /**\n         * instance generated event executed on container scroll or resize\n         * packed in an object to be referenceable and short named because properties will not be minified\n         * @access private\n         * @type {object}\n         */\n        _events = {};\n\n        // noinspection JSUndefinedPropertyAssignment\n        /**\n         * wrapper to get or set an entry from plugin instance configuration\n         * much smaller on minify as direct access\n         * @access private\n         * @type {function}\n         * @param {string} entryName\n         * @param {*} [value]\n         * @return {LazyPlugin|*}\n         */\n        _instance.config = function(entryName, value)\n        {\n            if( value === undefined )\n                return _config[entryName];\n            else\n                _config[entryName] = value;\n\n            return _instance;\n        };\n\n        // noinspection JSUndefinedPropertyAssignment\n        /**\n         * add additional items to current instance\n         * @access public\n         * @param {Array|object|string} items\n         * @return {LazyPlugin}\n         */\n        _instance.addItems = function(items)\n        {\n            if( _events.a )\n                _events.a($.type(items) === \"string\" ? $(items) : items);\n\n            return _instance;\n        };\n\n        // noinspection JSUndefinedPropertyAssignment\n        /**\n         * get all left items of this instance\n         * @access public\n         * @returns {object}\n         */\n        _instance.getItems = function()\n        {\n            return _events.g ? _events.g() : {};\n        };\n\n        // noinspection JSUndefinedPropertyAssignment\n        /**\n         * force lazy to load all items in loadable area right now\n         * by default without throttle\n         * @access public\n         * @type {function}\n         * @param {boolean} [useThrottle]\n         * @return {LazyPlugin}\n         */\n        _instance.update = function(useThrottle)\n        {\n            if( _events.e )\n                _events.e({}, !useThrottle);\n\n            return _instance;\n        };\n\n        // noinspection JSUndefinedPropertyAssignment\n        /**\n         * force lazy to load all available items right now\n         * this call ignores throttling\n         * @access public\n         * @type {function}\n         * @return {LazyPlugin}\n         */\n        _instance.loadAll = function()\n        {\n            if( _events.e )\n                _events.e({all: true}, true);\n\n            return _instance;\n        };\n\n        // noinspection JSUndefinedPropertyAssignment\n        /**\n         * destroy this plugin instance\n         * @access public\n         * @type {function}\n         * @return undefined\n         */\n        _instance.destroy = function ()\n        {\n            // unbind instance generated events\n            // noinspection JSUnresolvedFunction\n            $(_instance.config(\"appendScroll\")).off(\".\" + _instance.name, _events.e);\n\n            // clear events\n            _events = {};\n\n            return undefined;\n        };\n\n        // start using lazy and return all elements to be chainable or instance for further use\n        // noinspection JSUnresolvedVariable\n        _executeLazy(_instance, _instance.config, elements, _events);\n        // noinspection JSUnresolvedFunction\n        return _instance.config(\"chainable\") ? elements : _instance;\n    }\n\n    // use jquery to extend class prototype without conflicts\n    $.extend(LazyPlugin.prototype,\n    {\n        /**\n         * internal name used for bindings and namespaces\n         * @access public\n         * @var {string}\n         */\n        name: \"lazy\",\n\n        /**\n         * settings and configuration data\n         * @access public\n         * @type {object}\n         */\n        configuration:\n        {\n            // general\n            chainable       : true,\n            autoDestroy     : true,\n            bind            : \"load\",\n            threshold       : 500,\n            visibleOnly     : false,\n            appendScroll    : window,\n            scrollDirection : \"both\",\n            imageBase       : null,\n            defaultImage    : \"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\",\n            placeholder     : null,\n            delay           : -1,\n            combined        : false,\n\n            // attributes\n            attribute       : \"data-src\",\n            retinaAttribute : \"data-retina\",\n            loaderAttribute : \"data-loader\",\n            removeAttribute : true,\n            handledName     : \"handled\",\n\n            // effect\n            effect          : \"show\",\n            effectTime      : 0,\n\n            // throttle\n            enableThrottle  : true,\n            throttle        : 250,\n\n            // callbacks\n            beforeLoad      : null,\n            afterLoad       : null,\n            onError         : null,\n            onFinishedAll   : null\n        }\n    });\n})(jQuery, window, document);"],"sourceRoot":"/source/"}