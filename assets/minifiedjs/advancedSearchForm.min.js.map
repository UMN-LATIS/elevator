{"version":3,"file":"advancedSearchForm.min.js","sources":["advancedSearchForm.js"],"sourcesContent":["// Manages the advanced search\n$(document).on(\"click\", \".addAnotherSpecific\", function() {\n    $(\".searchCombine\").removeClass(\"hide\");\n    var specificSearch = $(this).closest('.specificSearch');\n    var newSpecificSearch = $(specificSearch).clone(false);\n    newSpecificSearch.find(\"input[type='text']\").val(\"\");\n    $(specificSearch).after(newSpecificSearch);\n\n});\n\n$(document).on(\"click\", \".addAnotherCollection\", function() {\n    var collectionCopy = $(this).closest('.form-group');\n    var newCollection = $(collectionCopy).clone(false);\n    newCollection.find(\"input[type='text']\").val(\"\");\n    $(collectionCopy).after(newCollection);\n});\n\n$(document).on(\"click\", \".addAnotherTemplate\", function() {\n    var templateCopy = $(this).closest('.form-group');\n    var newTemplate = $(templateCopy).clone(false);\n    $(templateCopy).after(newTemplate);\n});\n\n\n$(document).on(\"change\", \".searchDropdown\", function() {\n    var selectedOption = $(this).find(\":selected\");\n    var content = $(selectedOption).val();\n    var templateId = $(selectedOption).data('templateid');\n    var targetGroup = $(this).closest(\".form-group\").find(\".specificSearchTextContainer\");\n    buildSearchForm(content, templateId, targetGroup);\n    \n});\n\nconst buildSearchForm = function(fieldTitle, templateId, targetGroup) {\n    $.post(basePath + 'search/getFieldInfo', {fieldTitle: fieldTitle, template: templateId}, function(data, textStatus, xhr) {\n        if(data.type == \"text\") {\n            $(targetGroup).html(\"\");\n            $(targetGroup).html('<input type=\"text\" name=\"specificSearchText[]\"  autocomplete=\"off\" class=\"form-control advancedOption advancedSearchContent\" value=\"\">');\n        }\n        else if(data.type == \"select\" || data.type==\"checkbox\" || data.type == \"tag\") {\n            $(targetGroup).html(\"\");\n            $(targetGroup).html('<select name=\"specificSearchText[]\"  autocomplete=\"off\" class=\"form-control advancedOption advancedSearchContent\">');\n            selectElement = $(targetGroup).find(\"select\");\n            $.each(data.values, function(index, val) {\n                if(typeof index == \"string\") {\n                    $(selectElement).append($('<option>', {value: index}).text(val));\n                }\n                else {\n                    $(selectElement).append($('<option>', {value: val}).text(val));\n                }\n                \n            });\n\n        }\n        else if (data.type == \"multiselect\") {\n            console.log(\"Hey\");\n            $(targetGroup).html(data.renderContent);\n            $(targetGroup).append('<input type=\"text\" name=\"specificSearchText[]\"  autocomplete=\"off\" class=\"form-control advancedOption advancedSearchContent searchText\" value=\"\">');\n            $(targetGroup).find(\"select\").on(\"change\", function () {\n                console.log(targetGroup);\n                let selectedValues = $(targetGroup).find(\"select\").map(function (index, el) {\n                    return $(el).find(\":selected\").text();\n                });\n                \n                $(targetGroup).find(\".searchText\").val($.makeArray(selectedValues).join(\", \"))\n            });\n            eval($(targetGroup).find(\"script\").text());\n            loadGroup(targetGroup);\n\n            // $(targetGroup).html('<select name=\"specificSearchText[]\"  autocomplete=\"off\" class=\"form-control advancedOption advancedSearchContent\">');\n            // selectElement = $(targetGroup).find(\"select\");\n            // $.each(data.values, function(index, val) {\n            //     if(typeof index == \"string\") {\n            //         $(selectElement).append($('<option>', {value: index}).text(val));\n            //     }\n            //     else {\n            //         $(selectElement).append($('<option>', {value: val}).text(val));\n            //     }\n                \n            // });\n\n        }\n\n    });\n\n}"],"names":["$","document","on","removeClass","specificSearch","this","closest","newSpecificSearch","clone","find","val","after","collectionCopy","newCollection","templateCopy","newTemplate","selectedOption","content","templateId","data","targetGroup","buildSearchForm","fieldTitle","post","basePath","template","textStatus","xhr","type","html","selectElement","each","values","index","append","value","text","console","log","renderContent","let","selectedValues","map","el","makeArray","join","eval","loadGroup"],"mappings":"AACAA,EAAEC,QAAQ,EAAEC,GAAG,QAAS,sBAAuB,WAC3CF,EAAE,gBAAgB,EAAEG,YAAY,MAAM,EACtC,IAAIC,EAAiBJ,EAAEK,IAAI,EAAEC,QAAQ,iBAAiB,EAClDC,EAAoBP,EAAEI,CAAc,EAAEI,MAAM,CAAA,CAAK,EACrDD,EAAkBE,KAAK,oBAAoB,EAAEC,IAAI,EAAE,EACnDV,EAAEI,CAAc,EAAEO,MAAMJ,CAAiB,CAE7C,CAAC,EAEDP,EAAEC,QAAQ,EAAEC,GAAG,QAAS,wBAAyB,WAC7C,IAAIU,EAAiBZ,EAAEK,IAAI,EAAEC,QAAQ,aAAa,EAC9CO,EAAgBb,EAAEY,CAAc,EAAEJ,MAAM,CAAA,CAAK,EACjDK,EAAcJ,KAAK,oBAAoB,EAAEC,IAAI,EAAE,EAC/CV,EAAEY,CAAc,EAAED,MAAME,CAAa,CACzC,CAAC,EAEDb,EAAEC,QAAQ,EAAEC,GAAG,QAAS,sBAAuB,WAC3C,IAAIY,EAAed,EAAEK,IAAI,EAAEC,QAAQ,aAAa,EAC5CS,EAAcf,EAAEc,CAAY,EAAEN,MAAM,CAAA,CAAK,EAC7CR,EAAEc,CAAY,EAAEH,MAAMI,CAAW,CACrC,CAAC,EAGDf,EAAEC,QAAQ,EAAEC,GAAG,SAAU,kBAAmB,WACxC,IAAIc,EAAiBhB,EAAEK,IAAI,EAAEI,KAAK,WAAW,EACzCQ,EAAUjB,EAAEgB,CAAc,EAAEN,IAAI,EAChCQ,EAAalB,EAAEgB,CAAc,EAAEG,KAAK,YAAY,EAChDC,EAAcpB,EAAEK,IAAI,EAAEC,QAAQ,aAAa,EAAEG,KAAK,8BAA8B,EACpFY,gBAAgBJ,EAASC,EAAYE,CAAW,CAEpD,CAAC,EAED,IAAMC,gBAAkB,SAASC,WAAYJ,WAAYE,aACrDpB,EAAEuB,KAAKC,SAAW,sBAAuB,CAACF,WAAYA,WAAYG,SAAUP,UAAU,EAAG,SAASC,KAAMO,WAAYC,KAChG,QAAbR,KAAKS,MACJ5B,EAAEoB,WAAW,EAAES,KAAK,EAAE,EACtB7B,EAAEoB,WAAW,EAAES,KAAK,wIAAwI,GAE3I,UAAbV,KAAKS,MAA+B,YAAXT,KAAKS,MAAiC,OAAbT,KAAKS,MAC3D5B,EAAEoB,WAAW,EAAES,KAAK,EAAE,EACtB7B,EAAEoB,WAAW,EAAES,KAAK,oHAAoH,EACxIC,cAAgB9B,EAAEoB,WAAW,EAAEX,KAAK,QAAQ,EAC5CT,EAAE+B,KAAKZ,KAAKa,OAAQ,SAASC,EAAOvB,GACb,UAAhB,OAAOuB,EACNjC,EAAE8B,aAAa,EAAEI,OAAOlC,EAAE,WAAY,CAACmC,MAAOF,CAAK,CAAC,EAAEG,KAAK1B,CAAG,CAAC,EAG/DV,EAAE8B,aAAa,EAAEI,OAAOlC,EAAE,WAAY,CAACmC,MAAOzB,CAAG,CAAC,EAAE0B,KAAK1B,CAAG,CAAC,CAGrE,CAAC,GAGiB,eAAbS,KAAKS,OACVS,QAAQC,IAAI,KAAK,EACjBtC,EAAEoB,WAAW,EAAES,KAAKV,KAAKoB,aAAa,EACtCvC,EAAEoB,WAAW,EAAEc,OAAO,mJAAmJ,EACzKlC,EAAEoB,WAAW,EAAEX,KAAK,QAAQ,EAAEP,GAAG,SAAU,WACvCmC,QAAQC,IAAIlB,WAAW,EACvBoB,IAAIC,EAAiBzC,EAAEoB,WAAW,EAAEX,KAAK,QAAQ,EAAEiC,IAAI,SAAUT,EAAOU,GACpE,OAAO3C,EAAE2C,CAAE,EAAElC,KAAK,WAAW,EAAE2B,KAAK,CACxC,CAAC,EAEDpC,EAAEoB,WAAW,EAAEX,KAAK,aAAa,EAAEC,IAAIV,EAAE4C,UAAUH,CAAc,EAAEI,KAAK,IAAI,CAAC,CACjF,CAAC,EACDC,KAAK9C,EAAEoB,WAAW,EAAEX,KAAK,QAAQ,EAAE2B,KAAK,CAAC,EACzCW,UAAU3B,WAAW,EAgB7B,CAAC,CAEL"}