{"version":3,"sources":["advancedSearchForm.js"],"names":["$","document","on","removeClass","specificSearch","this","closest","newSpecificSearch","clone","find","val","after","collectionCopy","newCollection","templateCopy","newTemplate","selectedOption","content","templateId","data","targetGroup","buildSearchForm","fieldTitle","post","basePath","template","textStatus","xhr","type","html","selectElement","each","values","index","append","value","text","console","log","renderContent","selectedValues","map","el","makeArray","join","eval","loadGroup"],"mappings":"AACAA,EAAEC,UAAUC,GAAG,QAAS,uBAAuB,WAC3CF,EAAE,kBAAkBG,YAAY,QAChC,IAAIC,EAAiBJ,EAAEK,MAAMC,QAAQ,mBACjCC,EAAoBP,EAAEI,GAAgBI,OAAM,GAChDD,EAAkBE,KAAK,sBAAsBC,IAAI,IACjDV,EAAEI,GAAgBO,MAAMJ,MAI5BP,EAAEC,UAAUC,GAAG,QAAS,yBAAyB,WAC7C,IAAIU,EAAiBZ,EAAEK,MAAMC,QAAQ,eACjCO,EAAgBb,EAAEY,GAAgBJ,OAAM,GAC5CK,EAAcJ,KAAK,sBAAsBC,IAAI,IAC7CV,EAAEY,GAAgBD,MAAME,MAG5Bb,EAAEC,UAAUC,GAAG,QAAS,uBAAuB,WAC3C,IAAIY,EAAed,EAAEK,MAAMC,QAAQ,eAC/BS,EAAcf,EAAEc,GAAcN,OAAM,GACxCR,EAAEc,GAAcH,MAAMI,MAI1Bf,EAAEC,UAAUC,GAAG,SAAU,mBAAmB,WACxC,IAAIc,EAAiBhB,EAAEK,MAAMI,KAAK,aAC9BQ,EAAUjB,EAAEgB,GAAgBN,MAC5BQ,EAAalB,EAAEgB,GAAgBG,KAAK,cACpCC,EAAcpB,EAAEK,MAAMC,QAAQ,eAAeG,KAAK,gCACtDY,gBAAgBJ,EAASC,EAAYE,MAIzC,MAAMC,gBAAkB,SAASC,WAAYJ,WAAYE,aACrDpB,EAAEuB,KAAKC,SAAW,sBAAuB,CAACF,WAAYA,WAAYG,SAAUP,aAAa,SAASC,KAAMO,WAAYC,KAChG,QAAbR,KAAKS,MACJ5B,EAAEoB,aAAaS,KAAK,IACpB7B,EAAEoB,aAAaS,KAAK,2IAEH,UAAbV,KAAKS,MAA+B,YAAXT,KAAKS,MAAiC,OAAbT,KAAKS,MAC3D5B,EAAEoB,aAAaS,KAAK,IACpB7B,EAAEoB,aAAaS,KAAK,sHACpBC,cAAgB9B,EAAEoB,aAAaX,KAAK,UACpCT,EAAE+B,KAAKZ,KAAKa,QAAQ,SAASC,EAAOvB,GACb,iBAATuB,EACNjC,EAAE8B,eAAeI,OAAOlC,EAAE,WAAY,CAACmC,MAAOF,IAAQG,KAAK1B,IAG3DV,EAAE8B,eAAeI,OAAOlC,EAAE,WAAY,CAACmC,MAAOzB,IAAM0B,KAAK1B,QAM/C,eAAbS,KAAKS,OACVS,QAAQC,IAAI,OACZtC,EAAEoB,aAAaS,KAAKV,KAAKoB,eACzBvC,EAAEoB,aAAac,OAAO,qJACtBlC,EAAEoB,aAAaX,KAAK,UAAUP,GAAG,UAAU,WACvCmC,QAAQC,IAAIlB,aACZ,IAAIoB,EAAiBxC,EAAEoB,aAAaX,KAAK,UAAUgC,KAAI,SAAUR,EAAOS,GACpE,OAAO1C,EAAE0C,GAAIjC,KAAK,aAAa2B,UAGnCpC,EAAEoB,aAAaX,KAAK,eAAeC,IAAIV,EAAE2C,UAAUH,GAAgBI,KAAK,UAE5EC,KAAK7C,EAAEoB,aAAaX,KAAK,UAAU2B,QACnCU,UAAU1B","file":"advancedSearchForm.min.js","sourcesContent":["// Manages the advanced search\n$(document).on(\"click\", \".addAnotherSpecific\", function() {\n    $(\".searchCombine\").removeClass(\"hide\");\n    var specificSearch = $(this).closest('.specificSearch');\n    var newSpecificSearch = $(specificSearch).clone(false);\n    newSpecificSearch.find(\"input[type='text']\").val(\"\");\n    $(specificSearch).after(newSpecificSearch);\n\n});\n\n$(document).on(\"click\", \".addAnotherCollection\", function() {\n    var collectionCopy = $(this).closest('.form-group');\n    var newCollection = $(collectionCopy).clone(false);\n    newCollection.find(\"input[type='text']\").val(\"\");\n    $(collectionCopy).after(newCollection);\n});\n\n$(document).on(\"click\", \".addAnotherTemplate\", function() {\n    var templateCopy = $(this).closest('.form-group');\n    var newTemplate = $(templateCopy).clone(false);\n    $(templateCopy).after(newTemplate);\n});\n\n\n$(document).on(\"change\", \".searchDropdown\", function() {\n    var selectedOption = $(this).find(\":selected\");\n    var content = $(selectedOption).val();\n    var templateId = $(selectedOption).data('templateid');\n    var targetGroup = $(this).closest(\".form-group\").find(\".specificSearchTextContainer\");\n    buildSearchForm(content, templateId, targetGroup);\n    \n});\n\nconst buildSearchForm = function(fieldTitle, templateId, targetGroup) {\n    $.post(basePath + 'search/getFieldInfo', {fieldTitle: fieldTitle, template: templateId}, function(data, textStatus, xhr) {\n        if(data.type == \"text\") {\n            $(targetGroup).html(\"\");\n            $(targetGroup).html('<input type=\"text\" name=\"specificSearchText[]\"  autocomplete=\"off\" class=\"form-control advancedOption advancedSearchContent\" value=\"\">');\n        }\n        else if(data.type == \"select\" || data.type==\"checkbox\" || data.type == \"tag\") {\n            $(targetGroup).html(\"\");\n            $(targetGroup).html('<select name=\"specificSearchText[]\"  autocomplete=\"off\" class=\"form-control advancedOption advancedSearchContent\">');\n            selectElement = $(targetGroup).find(\"select\");\n            $.each(data.values, function(index, val) {\n                if(typeof index == \"string\") {\n                    $(selectElement).append($('<option>', {value: index}).text(val));\n                }\n                else {\n                    $(selectElement).append($('<option>', {value: val}).text(val));\n                }\n                \n            });\n\n        }\n        else if (data.type == \"multiselect\") {\n            console.log(\"Hey\");\n            $(targetGroup).html(data.renderContent);\n            $(targetGroup).append('<input type=\"text\" name=\"specificSearchText[]\"  autocomplete=\"off\" class=\"form-control advancedOption advancedSearchContent searchText\" value=\"\">');\n            $(targetGroup).find(\"select\").on(\"change\", function () {\n                console.log(targetGroup);\n                let selectedValues = $(targetGroup).find(\"select\").map(function (index, el) {\n                    return $(el).find(\":selected\").text();\n                });\n                \n                $(targetGroup).find(\".searchText\").val($.makeArray(selectedValues).join(\", \"))\n            });\n            eval($(targetGroup).find(\"script\").text());\n            loadGroup(targetGroup);\n\n            // $(targetGroup).html('<select name=\"specificSearchText[]\"  autocomplete=\"off\" class=\"form-control advancedOption advancedSearchContent\">');\n            // selectElement = $(targetGroup).find(\"select\");\n            // $.each(data.values, function(index, val) {\n            //     if(typeof index == \"string\") {\n            //         $(selectElement).append($('<option>', {value: index}).text(val));\n            //     }\n            //     else {\n            //         $(selectElement).append($('<option>', {value: val}).text(val));\n            //     }\n                \n            // });\n\n        }\n\n    });\n\n}"]}