{"version":3,"sources":["template.js"],"names":["$","mapGetScript","url","callback","cache","ajax","type","success","dataType","async","document","ready","on","e","val","cachedWidth","navbarToTopHeight","navbarHeight","scrollManage","documentElement","clientWidth","length","offset","top","parseFloat","css","replace","height","_height","parseInt","addClass","window","scroll","event","y","this","scrollTop","z","removeClass","load","resize","Mousetrap","bind","toggle","preventDefault","targetItem","data","text","searchId","loadLastSearch","cookie","removeCookie","path","err","getRedirect","direction","objectId","get","basePath","parsed","parseJSON","status","nextResultLink","targetId","location","search"],"mappings":"AAAAA,EAAEC,aAAe,SAASC,EAAKC,EAAUC,GACvC,OAAOJ,EAAEK,KAAK,CACZC,KAAM,MACNJ,IAAKA,EACLK,QAASJ,EACTK,SAAU,SACVJ,OAAO,EACPK,OAAO,KAKXT,EAAEU,UAAUC,OAAM,WAMhBX,EAAE,wBAAwBY,GAAG,kBAAkB,SAASC,GACtDb,EAAE,uBAAuBc,IAAId,EAAE,eAAec,aAKlD,IAAIC,YAAc,EACdC,kBAAoB,EACpBC,aAAe,EAEnB,SAASC,eACP,GAAGR,SAASS,gBAAgBC,aAAeL,cAG3CA,YAAcL,SAASS,gBAAgBC,YACnCpB,EAAE,WAAWqB,QAAjB,CAGAL,kBAAoBhB,EAAE,WAAWsB,SAASC,IAAMC,WAAWxB,EAAE,WAAWyB,IAAI,cAAcC,QAAQ,OAAQ,IAC1GT,aAAejB,EAAE,WAAW2B,SAC5B,IAAIC,EAAU5B,EAAE,WAAW2B,SACF,IAAtBX,mBAEEN,SAASS,gBAAgBC,YAAc,IACxCpB,EAAE,gBAAgByB,IAAI,cAAe,GAAKI,SAAS7B,EAAE,WAAWyB,IAAI,YAGpEzB,EAAE,gBAAgByB,IAAI,cAAe,GAEvCzB,EAAE,WAAW8B,SAAS,qBAGtB9B,EAAE+B,QAAQC,QAAO,SAASC,GACxB,IAAIC,EAAIlC,EAAEmC,MAAMC,YACZC,EAAIrC,EAAE,WAAWsB,SAASC,IAE3Bc,EAAIrC,EAAGU,UAAWiB,WAGjBO,GAAKlB,mBAAsBkB,EAAEN,EAAWS,GAEvC3B,SAASS,gBAAgBC,YAAc,IACxCpB,EAAE,gBAAgByB,IAAI,cAAeI,SAAS7B,EAAE,WAAWyB,IAAI,WAAa,IAG5EzB,EAAE,gBAAgByB,IAAI,cAAe,GAEvCzB,EAAE,WAAW8B,SAAS,sBAGnBpB,SAASS,gBAAgBC,YAAc,KACxCpB,EAAE,gBAAgByB,IAAI,cAAe,GAEvCzB,EAAE,WAAWsC,YAAY,0BAOjCtC,EAAE+B,QAAQQ,MAAK,WACbrB,kBAIFlB,EAAE+B,QAAQS,QAAO,WACftB,kBAIFuB,UAAUC,KAAK,kBAAkB,WAC/B1C,EAAE,oBAAoB2C,YAGxB3C,EAAE,2BAA2BY,GAAG,SAAS,SAASC,GAEhDA,EAAE+B,iBAEFC,WAAa7C,EAAEmC,MAAMW,KAAK,iBAE1B9C,EAAE,eAAec,IAAI+B,YACrB7C,EAAE,mBAAmB+C,KAAK/C,EAAEmC,MAAMY,WAQpC,IAAIC,SAAW,KACf,SAASC,iBACP,IACED,SAAWhD,EAAEkD,OAAO,cACpBlD,EAAEmD,aAAa,aAAc,CAC7BC,KAAM,MAGR,MAAMC,IAMN,GAAIL,SAAU,CACZhD,EAAE,wBAAwBsC,YAAY,QAEtC,IAAIgB,EAAc,SAASC,EAAWP,EAAUQ,GAE9CxD,EAAEkD,OAAO,aAAcF,EAAU,CAC/BI,KAAM,MAGRpD,EAAEyD,IAAIC,SAAW,oBAAsBH,EAAY,IAAMP,EAAW,IAAMQ,GAAU,SAAUV,GAC5F,IAAIa,EAAS3D,EAAE4D,UAAUd,GACJ,SAAjBa,EAAOE,OACTC,eAAeH,EAAOI,UAEtBhC,OAAOiC,SAAWN,SAAW,YAAcC,EAAOM,WAKxDjE,EAAE,mBAAmBY,GAAG,SAAS,SAAUC,GAEzCA,EAAE+B,iBACFU,EAAY,WAAYN,SAAUQ,aAEpCxD,EAAE,eAAeY,GAAG,SAAS,SAAUC,GACrCA,EAAE+B,iBACFU,EAAY,OAAQN,SAAUQ","file":"template.min.js","sourcesContent":["$.mapGetScript = function(url, callback, cache){\n  return $.ajax({\n    type: \"GET\",\n    url: url,\n    success: callback,\n    dataType: \"script\",\n    cache: false,\n    async: false\n  });\n};\n\n\n$(document).ready(function() {\n  /**\n  * don't load the map js stuff until we need the advancedSearch modal\n  * @param  {[type]} e [description]\n  * @return {[type]}   [description]\n  */\n  $(\"#advancedSearchModal\").on(\"shown.bs.modal\", function(e) {\n    $(\".advancedSearchText\").val($(\".searchText\").val());\n  });\n});\n\n\nvar cachedWidth = 0;\nvar navbarToTopHeight = 0;\nvar navbarHeight = 0;\n\nfunction scrollManage() {\n  if(document.documentElement.clientWidth == cachedWidth) {\n    return;\n  }\n  cachedWidth = document.documentElement.clientWidth;\n  if(!$('.navbar').length) {\n    return;\n  }\n  navbarToTopHeight = $('.navbar').offset().top - parseFloat($('.navbar').css('margin-top').replace(/auto/, 0));\n  navbarHeight = $('.navbar').height();\n  var _height = $('.navbar').height();\n  if(navbarToTopHeight === 0) {\n    \n    if(document.documentElement.clientWidth > 768) {\n      $('.mainContent').css('padding-top', 20 + parseInt($('.navbar').css('height')));\n    }\n    else {\n      $('.mainContent').css('padding-top', 0);\n    }\n    $('.navbar').addClass('navbar-fixed-top');\n  }\n  else {\n    $(window).scroll(function(event) {\n      var y = $(this).scrollTop();\n      var z = $('.footer').offset().top;\n      \n      if(z > $( document ).height()) {\n        return;\n      }\n      if (y >= navbarToTopHeight && (y+_height) < z) {\n        \n        if(document.documentElement.clientWidth > 768) {\n          $('.mainContent').css('padding-top', parseInt($('.navbar').css('height')) + 20);\n        }\n        else {\n          $('.mainContent').css('padding-top', 0);\n        }\n        $('.navbar').addClass('navbar-fixed-top');\n      } else {\n        \n        if(document.documentElement.clientWidth > 768) {\n          $('.mainContent').css('padding-top', 0);\n        }\n        $('.navbar').removeClass('navbar-fixed-top');\n      }\n    });\n  }\n}\n\n// handle sticky header regardless of header size.\n$(window).load(function() {\n  scrollManage();\n});\n\n\n$(window).resize(function() {\n  scrollManage();\n});\n\n// command-control-h reveals hidden content (anything flagged advancedContent)\nMousetrap.bind('command+ctrl+h', function() {\n  $(\".advancedContent\").toggle();\n});\n\n$(\".collectionFilterSelect\").on(\"click\", function(e) {\n  \n  e.preventDefault();\n  \n  targetItem = $(this).data(\"collection-id\");\n  \n  $(\"#collection\").val(targetItem);\n  $(\"#search_concept\").text($(this).text());\n});\n\n\n/**\n* Management for \"searchsearch\" functionality on asset page and editing\n*/\n\nvar searchId = null;\nfunction loadLastSearch() {\n  try {\n    searchId = $.cookie(\"lastSearch\");\n    $.removeCookie(\"lastSearch\", {\n    path: '/'\n  });\n  }\n  catch(err) {\n  \n  }\n  \n  \n  \n  if (searchId) {\n    $(\".searchResultsNavBar\").removeClass(\"hide\");\n    \n    var getRedirect = function(direction, searchId, objectId) {\n      \n      $.cookie('lastSearch', searchId, {\n        path: \"/\"\n      });\n      \n      $.get(basePath + \"search/getResult/\" + direction + \"/\" + searchId + \"/\" + objectId, function (data) {\n        var parsed = $.parseJSON(data);\n        if (parsed.status == \"found\") {\n          nextResultLink(parsed.targetId);\n        } else {\n          window.location = basePath + \"search/s/\" + parsed.search;\n        }\n      });\n    }\n    \n    $(\".previousResult\").on(\"click\", function (e) {\n      \n      e.preventDefault();\n      getRedirect(\"previous\", searchId, objectId);\n    });\n    $(\".nextResult\").on(\"click\", function (e) {\n      e.preventDefault();\n      getRedirect(\"next\", searchId, objectId);\n    });\n  }\n  \n}\n"]}