{"version":3,"file":"template.min.js","sources":["template.js"],"sourcesContent":["$.mapGetScript = function(url, callback, cache){\n  return $.ajax({\n    type: \"GET\",\n    url: url,\n    success: callback,\n    dataType: \"script\",\n    cache: false,\n    async: false\n  });\n};\n\n\n$(document).ready(function() {\n  /**\n  * don't load the map js stuff until we need the advancedSearch modal\n  * @param  {[type]} e [description]\n  * @return {[type]}   [description]\n  */\n  $(\"#advancedSearchModal\").on(\"shown.bs.modal\", function(e) {\n    $(\".advancedSearchText\").val($(\".searchText\").val());\n  });\n});\n\n\nvar cachedWidth = 0;\nvar navbarToTopHeight = 0;\nvar navbarHeight = 0;\n\nfunction scrollManage() {\n  if(document.documentElement.clientWidth == cachedWidth) {\n    return;\n  }\n  cachedWidth = document.documentElement.clientWidth;\n  if(!$('.navbar').length) {\n    return;\n  }\n  navbarToTopHeight = $('.navbar').offset().top - parseFloat($('.navbar').css('margin-top').replace(/auto/, 0));\n  navbarHeight = $('.navbar').height();\n  var _height = $('.navbar').height();\n  if(navbarToTopHeight === 0) {\n    \n    if(document.documentElement.clientWidth > 768) {\n      $('.mainContent').css('padding-top', 20 + parseInt($('.navbar').css('height')));\n    }\n    else {\n      $('.mainContent').css('padding-top', 0);\n    }\n    $('.navbar').addClass('navbar-fixed-top');\n  }\n  else {\n    $(window).scroll(function(event) {\n      var y = $(this).scrollTop();\n      var z = $('.footer').offset().top;\n      \n      if(z > $( document ).height()) {\n        return;\n      }\n      if (y >= navbarToTopHeight && (y+_height) < z) {\n        \n        if(document.documentElement.clientWidth > 768) {\n          $('.mainContent').css('padding-top', parseInt($('.navbar').css('height')) + 20);\n        }\n        else {\n          $('.mainContent').css('padding-top', 0);\n        }\n        $('.navbar').addClass('navbar-fixed-top');\n      } else {\n        \n        if(document.documentElement.clientWidth > 768) {\n          $('.mainContent').css('padding-top', 0);\n        }\n        $('.navbar').removeClass('navbar-fixed-top');\n      }\n    });\n  }\n}\n\n// handle sticky header regardless of header size.\n$(window).load(function() {\n  scrollManage();\n});\n\n\n$(window).resize(function() {\n  scrollManage();\n});\n\n// command-control-h reveals hidden content (anything flagged advancedContent)\nMousetrap.bind('command+ctrl+h', function() {\n  $(\".advancedContent\").toggle();\n});\n\n$(\".collectionFilterSelect\").on(\"click\", function(e) {\n  \n  e.preventDefault();\n  \n  targetItem = $(this).data(\"collection-id\");\n  \n  $(\"#collection\").val(targetItem);\n  $(\"#search_concept\").text($(this).text());\n});\n\n\n/**\n* Management for \"searchsearch\" functionality on asset page and editing\n*/\n\nvar searchId = null;\nfunction loadLastSearch() {\n  try {\n    searchId = $.cookie(\"lastSearch\");\n    $.removeCookie(\"lastSearch\", {\n    path: '/'\n  });\n  }\n  catch(err) {\n  \n  }\n  \n  \n  \n  if (searchId) {\n    $(\".searchResultsNavBar\").removeClass(\"hide\");\n    \n    var getRedirect = function(direction, searchId, objectId) {\n      \n      $.cookie('lastSearch', searchId, {\n        path: \"/\"\n      });\n      \n      $.get(basePath + \"search/getResult/\" + direction + \"/\" + searchId + \"/\" + objectId, function (data) {\n        var parsed = data;\n        if (parsed.status == \"found\") {\n          nextResultLink(parsed.targetId);\n        } else {\n          window.location = basePath + \"search/s/\" + parsed.search;\n        }\n      });\n    }\n    \n    $(\".previousResult\").on(\"click\", function (e) {\n      \n      e.preventDefault();\n      getRedirect(\"previous\", searchId, objectId);\n    });\n    $(\".nextResult\").on(\"click\", function (e) {\n      e.preventDefault();\n      getRedirect(\"next\", searchId, objectId);\n    });\n  }\n  \n}\n"],"names":["$","mapGetScript","url","callback","cache","ajax","type","success","dataType","async","document","ready","on","e","val","cachedWidth","navbarToTopHeight","navbarHeight","scrollManage","_height","documentElement","clientWidth","length","offset","top","parseFloat","css","replace","height","parseInt","addClass","window","scroll","event","y","this","scrollTop","z","removeClass","load","resize","Mousetrap","bind","toggle","preventDefault","targetItem","data","text","searchId","loadLastSearch","cookie","removeCookie","path","err","getRedirect","direction","objectId","get","basePath","parsed","status","nextResultLink","targetId","location","search"],"mappings":"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"}