"use strict";!function(){if("function"!=typeof window.getMatchedCSSRules){var e=/[\w-]+/g,t=/#[\w-]+/g,o=/\.[\w-]+/g,n=/\[[^\]]+\]/g,i=/\:(?!not)[\w-]+(\(.*\))?/g,r=/\:\:?(after|before|first-letter|first-line|selection)/g,c=function(e){var t=[];for(var o in e)t.push(e[o]);return t},a=function(e){var t=e.media&&e.media.mediaText;return e.disabled?[]:t&&t.length&&!window.matchMedia(t).matches?[]:c(e.cssRules)},l=function(e,t){e.match(t);return t?t.length:0},d=function(c){for(var a,d,s=[0,0,0],u=c.split(" ");a=u.shift(),"string"==typeof a;)d=l(a,r),s[2]=d,d&&(a=a.replace(r,"")),d=l(a,i),s[1]=d,d&&(a=a.replace(i,"")),d=l(a,n),s[1]+=d,d&&(a=a.replace(n,"")),d=l(a,t),s[0]=d,d&&(a=a.replace(t,"")),d=l(a,o),s[1]+=d,d&&(a=a.replace(o,"")),s[2]+=l(a,e);return parseInt(s.join(""),10)},s=function(e,t){for(var o,n,i=t.split(","),r=0;o=i.shift();)(e.mozMatchesSelector&&e.mozMatchesSelector(o)||e.msMatchesSelector&&e.msMatchesSelector(o)||e.oMatchesSelector&&e.oMatchesSelector(o)||e.webkitMatchesSelector&&e.webkitMatchesSelector(o))&&(n=d(o),r=n>r?n:r);return r},u=function(e,t){function o(t,o){return s(e,o.selectorText)-s(e,t.selectorText)}return t.sort(o)};window.getMatchedCSSRules=function(e){var t,o,n,i,r=[];for(t=c(window.document.styleSheets);o=t.shift();)for(n=a(o);i=n.shift();)i.styleSheet?n=a(i.styleSheet).concat(n):i.media?n=a(i).concat(n):(e.mozMatchesSelector&&e.mozMatchesSelector(i.selectorText)||e.msMatchesSelector&&e.msMatchesSelector(i.selectorText)||e.oMatchesSelector&&e.oMatchesSelector(i.selectorText)||e.webkitMatchesSelector&&e.webkitMatchesSelector(i.selectorText))&&r.push(i);return u(e,r)}}}(),function(){for(var e=0,t=["webkit","moz"],o=0;o<t.length&&!window.requestAnimationFrame;++o)window.requestAnimationFrame=window[t[o]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[o]+"CancelAnimationFrame"]||window[t[o]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,o){var n=(new Date).getTime(),i=Math.max(0,16-(n-e)),r=window.setTimeout(function(){t(n+i)},i);return e=n+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),function(e){var t={};t._debug=!1,t.observer=null,t.getComputedStyle=function(e,t){return t=t||window,t.getComputedStyle?t.getComputedStyle(e,null):e.currentStyle},t.getDefaultComputedStyle=function(e){var t=e.cloneNode(!0),o={},n=document.createElement("iframe");document.body.appendChild(n),n.contentWindow.document.open(),n.contentWindow.document.write("<body></body>"),n.contentWindow.document.body.appendChild(t),n.contentWindow.document.close();var i=n.contentWindow.document.querySelectorAll(e.nodeName.toLowerCase())[0],r=this.getComputedStyle(i,n.contentWindow);for(var c in r){var a=r.getPropertyValue?r.getPropertyValue(c):r[c];if(null!==a)switch(c){default:o[c]=a;break;case"width":case"height":case"minWidth":case"minHeight":case"maxWidth":case"maxHeight":}}return document.body.removeChild(n),o},t.getMatchedStyle=function(e,t){var o=null,n=null;e.style.getPropertyValue?n=e.style.getPropertyValue(t):e.currentStyle&&(n=e.currentStyle[t]);var i=window.getMatchedCSSRules(e);if(i.length)for(var r=i.length;r-- >0;){var c=i[r],a=c.style.getPropertyPriority(t);if((null===o||a)&&(o=c.style.getPropertyValue(t),a))break}return o||null===n||(o=n),o},t.orientation=function(e){if(e.parentNode&&"x-object-fit"===e.parentNode.nodeName.toLowerCase()){var t=e.naturalWidth||e.clientWidth,o=e.naturalHeight||e.clientHeight,n=e.parentNode.clientWidth,i=e.parentNode.clientHeight;!o||t/o>n/i?"wider"!==e.getAttribute("data-x-object-relation")&&(e.setAttribute("data-x-object-relation","wider"),e.className="x-object-fit-wider",this._debug&&window.console&&console.log("x-object-fit-wider")):"taller"!==e.getAttribute("data-x-object-relation")&&(e.setAttribute("data-x-object-relation","taller"),e.className="x-object-fit-taller",this._debug&&window.console&&console.log("x-object-fit-taller"))}},t.process=function(e){if(e.selector&&e.replacedElements){switch(e.fittype=e.fittype||"none",e.fittype){default:return;case"none":case"fill":case"contain":case"cover":}var t=e.replacedElements;if(t.length)for(var o=0,n=t.length;n>o;o++)this.processElement(t[o],e)}},t.processElement=function(e,o){var n,i,r=t.getComputedStyle(e),c=t.getDefaultComputedStyle(e),a=document.createElement("x-object-fit");t._debug&&window.console&&console.log("Applying to WRAPPER-------------------------------------------------------");for(n in r)switch(n){default:i=t.getMatchedStyle(e,n),null!==i&&""!==i&&(t._debug&&window.console&&console.log(n+": "+i),a.style[n]=i);break;case"length":case"parentRule":}t._debug&&window.console&&console.log("Applying to REPLACED ELEMENT-------------------------------------------------------");for(n in c)switch(n){default:i=c[n],t._debug&&window.console&&""!==i&&console.log(n+": "+i),e.style[n]=i;break;case"length":case"parentRule":}a.setAttribute("class","x-object-fit-"+o.fittype),e.parentNode.insertBefore(a,e),a.appendChild(e),t.orientation(e);var l=null,d=function(){null!==l&&window.cancelAnimationFrame(l),l=window.requestAnimationFrame(function(){t.orientation(e)})};switch(o.fittype){default:break;case"contain":case"cover":window.addEventListener?(e.addEventListener("load",d,!1),window.addEventListener("resize",d,!1),window.addEventListener("orientationchange",d,!1)):(e.attachEvent("onload",d),window.attachEvent("onresize",d))}},t.listen=function(e){var o=function(o){for(var n=0,i=e.length;i>n;n++)(o.mozMatchesSelector&&o.mozMatchesSelector(e[n].selector)||o.msMatchesSelector&&o.msMatchesSelector(e[n].selector)||o.oMatchesSelector&&o.oMatchesSelector(e[n].selector)||o.webkitMatchesSelector&&o.webkitMatchesSelector(e[n].selector))&&(e[n].replacedElements=[o],t.process(e[n]),t._debug&&window.console&&console.log("Matching node inserted: "+o.nodeName))},n=function(e){t.observer.disconnect(),o(e),t.observer.observe(document.documentElement,{childList:!0,subtree:!0})},i=function(e){window.removeEventListener("DOMNodeInserted",i,!1),o(e.target),window.addEventListener("DOMNodeInserted",i,!1)},r=function(e){"x-object-fit"===e.nodeName.toLowerCase()&&(e.parentNode.removeChild(e),t._debug&&window.console&&console.log("Matching node removed: "+e.nodeName))},c=function(e){t.observer.disconnect(),r(e),t.observer.observe(document.documentElement,{childList:!0,subtree:!0})},a=function(e){window.removeEventListener("DOMNodeRemoved",a,!1),r(e.target.parentNode),window.addEventListener("DOMNodeRemoved",a,!1)};window.MutationObserver?(t._debug&&window.console&&console.log("DOM MutationObserver"),this.observer=new MutationObserver(function(e){e.forEach(function(e){if(e.addedNodes&&e.addedNodes.length)for(var t=e.addedNodes,o=0,i=t.length;i>o;o++)n(t[o]);e.removedNodes&&e.removedNodes.length&&c(e.target)})}),this.observer.observe(document.documentElement,{childList:!0,subtree:!0})):window.addEventListener&&(t._debug&&window.console&&console.log("DOM Mutation Events"),window.addEventListener("DOMNodeInserted",i,!1),window.addEventListener("DOMNodeRemoved",a,!1))},t.init=function(e){if(e){"Array"!=typeof e&&(e=[e]);for(var t=0,o=e.length;o>t;t++)e[t].replacedElements=document.querySelectorAll(e[t].selector),this.process(e[t]);this.listen(e)}},t.polyfill=function(e){"objectFit"in document.documentElement.style==!1?(t._debug&&window.console&&console.log("object-fit not natively supported"),"complete"===document.readyState?t.init(e):window.addEventListener?window.addEventListener("load",function(){t.init(e)},!1):window.attachEvent("onload",function(){t.init(e)})):t._debug&&window.console&&console.log("object-fit natively supported")},e.objectFit=t}(window);
//# sourceMappingURL=polyfill.object-fit.js.map
