{"version":3,"sources":["oms.js"],"names":["ref","hasProp","hasOwnProperty","slice","this","_Class","map1","opts","e","k","l","len1","ref2","v","map","call","projHelper","constructor","ProjHelper","initMarkerArrays","listeners","length","ge","addListener","_this","gm","j","lcH","lcU","len","mt","p","ref1","twoPi","x","prototype","google","maps","event","MapTypeId","Math","PI","usual","highlighted","HYBRID","SATELLITE","TERRAIN","ROADMAP","markers","markerListenerRefs","marker","listenerRefs","spiderListener","push","markerChangeListener","positionChanged","getVisible","spiderfying","unspiderfying","i","listenerRef","arrIndexOf","splice","removeListener","len2","n","func","base","trigger","args","ref3","results","arguments","apply","generatePtsCircle","count","centerPt","angle","angleStep","circumference","legLength","Point","cos","y","sin","generatePtsSpiral","pt","m","mPt","markerPt","markerSpiderfied","nDist","nearbyMarkerData","nonNearbyMarkers","pxSq","getStreetView","getMapTypeId","llToPt","position","ptDistanceSq","spiderfy","firstOnly","ref4","getProjection","usualPosition","i1","i2","len3","m1","m1Data","m2","m2Data","mData","q","willSpiderfy","makeHighlightListenerFuncs","highlight","leg","setOptions","strokeColor","mapTypeId","zIndex","unhighlight","markerData","bodyPt","footLl","footPt","footPts","highlightListenerFuncs","md","nearestMarkerDatum","numFeet","spiderfiedMarkers","ptAverage","reverse","ptToLl","minExtract","Polyline","path","strokeWeight","hightlightListeners","setPosition","setZIndex","round","spiderfied","markerNotToMove","unspiderfiedMarkers","setMap","pt1","pt2","dx","dy","pts","numPts","sumX","sumY","ll","fromLatLngToDivPixel","fromDivPixelToLatLng","set","bestIndex","bestVal","index","item","val","arr","obj","o","indexOf","OverlayView"],"mappings":"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","file":"oms.min.js","sourcesContent":["// Generated by CoffeeScript 1.10.0\n\n/** @preserve OverlappingMarkerSpiderfier\nhttps://github.com/jawj/OverlappingMarkerSpiderfier\nCopyright (c) 2011 - 2013 George MacKerron\nReleased under the MIT licence: http://opensource.org/licenses/mit-license\nNote: The Google Maps API v3 must be included *before* this code\n */\n\n(function() {\n  var ref,\n    hasProp = {}.hasOwnProperty,\n    slice = [].slice;\n\n  if (((ref = this['google']) != null ? ref['maps'] : void 0) == null) {\n    return;\n  }\n\n  this['OverlappingMarkerSpiderfier'] = (function() {\n    var ge, gm, j, lcH, lcU, len, mt, p, ref1, twoPi, x;\n\n    p = _Class.prototype;\n\n    ref1 = [_Class, p];\n    for (j = 0, len = ref1.length; j < len; j++) {\n      x = ref1[j];\n      x['VERSION'] = '0.3.3';\n    }\n\n    gm = google.maps;\n\n    ge = gm.event;\n\n    mt = gm.MapTypeId;\n\n    twoPi = Math.PI * 2;\n\n    p['keepSpiderfied'] = false;\n\n    p['markersWontHide'] = false;\n\n    p['markersWontMove'] = false;\n\n    p['nearbyDistance'] = 20;\n\n    p['circleSpiralSwitchover'] = 9;\n\n    p['circleFootSeparation'] = 23;\n\n    p['circleStartAngle'] = twoPi / 12;\n\n    p['spiralFootSeparation'] = 26;\n\n    p['spiralLengthStart'] = 11;\n\n    p['spiralLengthFactor'] = 4;\n\n    p['spiderfiedZIndex'] = 1000;\n\n    p['usualLegZIndex'] = 10;\n\n    p['highlightedLegZIndex'] = 20;\n\n    p['legWeight'] = 1.5;\n\n    p['legColors'] = {\n      'usual': {},\n      'highlighted': {}\n    };\n\n    lcU = p['legColors']['usual'];\n\n    lcH = p['legColors']['highlighted'];\n\n    lcU[mt.HYBRID] = lcU[mt.SATELLITE] = '#fff';\n\n    lcH[mt.HYBRID] = lcH[mt.SATELLITE] = '#f00';\n\n    lcU[mt.TERRAIN] = lcU[mt.ROADMAP] = '#444';\n\n    lcH[mt.TERRAIN] = lcH[mt.ROADMAP] = '#f00';\n\n    function _Class(map1, opts) {\n      var e, k, l, len1, ref2, v;\n      this.map = map1;\n      if (opts == null) {\n        opts = {};\n      }\n      for (k in opts) {\n        if (!hasProp.call(opts, k)) continue;\n        v = opts[k];\n        this[k] = v;\n      }\n      this.projHelper = new this.constructor.ProjHelper(this.map);\n      this.initMarkerArrays();\n      this.listeners = {};\n      ref2 = ['click', 'zoom_changed', 'maptypeid_changed'];\n      for (l = 0, len1 = ref2.length; l < len1; l++) {\n        e = ref2[l];\n        ge.addListener(this.map, e, (function(_this) {\n          return function() {\n            return _this['unspiderfy']();\n          };\n        })(this));\n      }\n    }\n\n    p.initMarkerArrays = function() {\n      this.markers = [];\n      return this.markerListenerRefs = [];\n    };\n\n    p['addMarker'] = function(marker) {\n      var listenerRefs;\n      if (marker['_oms'] != null) {\n        return this;\n      }\n      marker['_oms'] = true;\n      listenerRefs = [\n        ge.addListener(marker, 'click', (function(_this) {\n          return function(event) {\n            return _this.spiderListener(marker, event);\n          };\n        })(this))\n      ];\n      if (!this['markersWontHide']) {\n        listenerRefs.push(ge.addListener(marker, 'visible_changed', (function(_this) {\n          return function() {\n            return _this.markerChangeListener(marker, false);\n          };\n        })(this)));\n      }\n      if (!this['markersWontMove']) {\n        listenerRefs.push(ge.addListener(marker, 'position_changed', (function(_this) {\n          return function() {\n            return _this.markerChangeListener(marker, true);\n          };\n        })(this)));\n      }\n      this.markerListenerRefs.push(listenerRefs);\n      this.markers.push(marker);\n      return this;\n    };\n\n    p.markerChangeListener = function(marker, positionChanged) {\n      if ((marker['_omsData'] != null) && (positionChanged || !marker.getVisible()) && !((this.spiderfying != null) || (this.unspiderfying != null))) {\n        return this['unspiderfy'](positionChanged ? marker : null);\n      }\n    };\n\n    p['getMarkers'] = function() {\n      return this.markers.slice(0);\n    };\n\n    p['removeMarker'] = function(marker) {\n      var i, l, len1, listenerRef, listenerRefs;\n      if (marker['_omsData'] != null) {\n        this['unspiderfy']();\n      }\n      i = this.arrIndexOf(this.markers, marker);\n      if (i < 0) {\n        return this;\n      }\n      listenerRefs = this.markerListenerRefs.splice(i, 1)[0];\n      for (l = 0, len1 = listenerRefs.length; l < len1; l++) {\n        listenerRef = listenerRefs[l];\n        ge.removeListener(listenerRef);\n      }\n      delete marker['_oms'];\n      this.markers.splice(i, 1);\n      return this;\n    };\n\n    p['clearMarkers'] = function() {\n      var i, l, len1, len2, listenerRef, listenerRefs, marker, n, ref2;\n      this['unspiderfy']();\n      ref2 = this.markers;\n      for (i = l = 0, len1 = ref2.length; l < len1; i = ++l) {\n        marker = ref2[i];\n        listenerRefs = this.markerListenerRefs[i];\n        for (n = 0, len2 = listenerRefs.length; n < len2; n++) {\n          listenerRef = listenerRefs[n];\n          ge.removeListener(listenerRef);\n        }\n        delete marker['_oms'];\n      }\n      this.initMarkerArrays();\n      return this;\n    };\n\n    p['addListener'] = function(event, func) {\n      var base;\n      ((base = this.listeners)[event] != null ? base[event] : base[event] = []).push(func);\n      return this;\n    };\n\n    p['removeListener'] = function(event, func) {\n      var i;\n      i = this.arrIndexOf(this.listeners[event], func);\n      if (!(i < 0)) {\n        this.listeners[event].splice(i, 1);\n      }\n      return this;\n    };\n\n    p['clearListeners'] = function(event) {\n      this.listeners[event] = [];\n      return this;\n    };\n\n    p.trigger = function() {\n      var args, event, func, l, len1, ref2, ref3, results;\n      event = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n      ref3 = (ref2 = this.listeners[event]) != null ? ref2 : [];\n      results = [];\n      for (l = 0, len1 = ref3.length; l < len1; l++) {\n        func = ref3[l];\n        results.push(func.apply(null, args));\n      }\n      return results;\n    };\n\n    p.generatePtsCircle = function(count, centerPt) {\n      var angle, angleStep, circumference, i, l, legLength, ref2, results;\n      circumference = this['circleFootSeparation'] * (2 + count);\n      legLength = circumference / twoPi;\n      angleStep = twoPi / count;\n      results = [];\n      for (i = l = 0, ref2 = count; 0 <= ref2 ? l < ref2 : l > ref2; i = 0 <= ref2 ? ++l : --l) {\n        angle = this['circleStartAngle'] + i * angleStep;\n        results.push(new gm.Point(centerPt.x + legLength * Math.cos(angle), centerPt.y + legLength * Math.sin(angle)));\n      }\n      return results;\n    };\n\n    p.generatePtsSpiral = function(count, centerPt) {\n      var angle, i, l, legLength, pt, ref2, results;\n      legLength = this['spiralLengthStart'];\n      angle = 0;\n      results = [];\n      for (i = l = 0, ref2 = count; 0 <= ref2 ? l < ref2 : l > ref2; i = 0 <= ref2 ? ++l : --l) {\n        angle += this['spiralFootSeparation'] / legLength + i * 0.0005;\n        pt = new gm.Point(centerPt.x + legLength * Math.cos(angle), centerPt.y + legLength * Math.sin(angle));\n        legLength += twoPi * this['spiralLengthFactor'] / angle;\n        results.push(pt);\n      }\n      return results;\n    };\n\n    p.spiderListener = function(marker, event) {\n      var l, len1, m, mPt, markerPt, markerSpiderfied, nDist, nearbyMarkerData, nonNearbyMarkers, pxSq, ref2;\n      markerSpiderfied = marker['_omsData'] != null;\n      if (!(markerSpiderfied && this['keepSpiderfied'])) {\n        this['unspiderfy']();\n      }\n      if (markerSpiderfied || this.map.getStreetView().getVisible() || this.map.getMapTypeId() === 'GoogleEarthAPI') {\n        return this.trigger('click', marker, event);\n      } else {\n        nearbyMarkerData = [];\n        nonNearbyMarkers = [];\n        nDist = this['nearbyDistance'];\n        pxSq = nDist * nDist;\n        markerPt = this.llToPt(marker.position);\n        ref2 = this.markers;\n        for (l = 0, len1 = ref2.length; l < len1; l++) {\n          m = ref2[l];\n          if (!((m.map != null) && m.getVisible())) {\n            continue;\n          }\n          mPt = this.llToPt(m.position);\n          if (this.ptDistanceSq(mPt, markerPt) < pxSq) {\n            nearbyMarkerData.push({\n              marker: m,\n              markerPt: mPt\n            });\n          } else {\n            nonNearbyMarkers.push(m);\n          }\n        }\n        if (nearbyMarkerData.length === 1) {\n          return this.trigger('click', marker, event);\n        } else {\n          return this.spiderfy(nearbyMarkerData, nonNearbyMarkers);\n        }\n      }\n    };\n\n    p['markersNearMarker'] = function(marker, firstOnly) {\n      var l, len1, m, mPt, markerPt, markers, nDist, pxSq, ref2, ref3, ref4;\n      if (firstOnly == null) {\n        firstOnly = false;\n      }\n      if (this.projHelper.getProjection() == null) {\n        throw \"Must wait for 'idle' event on map before calling markersNearMarker\";\n      }\n      nDist = this['nearbyDistance'];\n      pxSq = nDist * nDist;\n      markerPt = this.llToPt(marker.position);\n      markers = [];\n      ref2 = this.markers;\n      for (l = 0, len1 = ref2.length; l < len1; l++) {\n        m = ref2[l];\n        if (m === marker || (m.map == null) || !m.getVisible()) {\n          continue;\n        }\n        mPt = this.llToPt((ref3 = (ref4 = m['_omsData']) != null ? ref4.usualPosition : void 0) != null ? ref3 : m.position);\n        if (this.ptDistanceSq(mPt, markerPt) < pxSq) {\n          markers.push(m);\n          if (firstOnly) {\n            break;\n          }\n        }\n      }\n      return markers;\n    };\n\n    p['markersNearAnyOtherMarker'] = function() {\n      var i, i1, i2, l, len1, len2, len3, m, m1, m1Data, m2, m2Data, mData, n, nDist, pxSq, q, ref2, ref3, ref4, results;\n      if (this.projHelper.getProjection() == null) {\n        throw \"Must wait for 'idle' event on map before calling markersNearAnyOtherMarker\";\n      }\n      nDist = this['nearbyDistance'];\n      pxSq = nDist * nDist;\n      mData = (function() {\n        var l, len1, ref2, ref3, ref4, results;\n        ref2 = this.markers;\n        results = [];\n        for (l = 0, len1 = ref2.length; l < len1; l++) {\n          m = ref2[l];\n          results.push({\n            pt: this.llToPt((ref3 = (ref4 = m['_omsData']) != null ? ref4.usualPosition : void 0) != null ? ref3 : m.position),\n            willSpiderfy: false\n          });\n        }\n        return results;\n      }).call(this);\n      ref2 = this.markers;\n      for (i1 = l = 0, len1 = ref2.length; l < len1; i1 = ++l) {\n        m1 = ref2[i1];\n        if (!((m1.map != null) && m1.getVisible())) {\n          continue;\n        }\n        m1Data = mData[i1];\n        if (m1Data.willSpiderfy) {\n          continue;\n        }\n        ref3 = this.markers;\n        for (i2 = n = 0, len2 = ref3.length; n < len2; i2 = ++n) {\n          m2 = ref3[i2];\n          if (i2 === i1) {\n            continue;\n          }\n          if (!((m2.map != null) && m2.getVisible())) {\n            continue;\n          }\n          m2Data = mData[i2];\n          if (i2 < i1 && !m2Data.willSpiderfy) {\n            continue;\n          }\n          if (this.ptDistanceSq(m1Data.pt, m2Data.pt) < pxSq) {\n            m1Data.willSpiderfy = m2Data.willSpiderfy = true;\n            break;\n          }\n        }\n      }\n      ref4 = this.markers;\n      results = [];\n      for (i = q = 0, len3 = ref4.length; q < len3; i = ++q) {\n        m = ref4[i];\n        if (mData[i].willSpiderfy) {\n          results.push(m);\n        }\n      }\n      return results;\n    };\n\n    p.makeHighlightListenerFuncs = function(marker) {\n      return {\n        highlight: (function(_this) {\n          return function() {\n            return marker['_omsData'].leg.setOptions({\n              strokeColor: _this['legColors']['highlighted'][_this.map.mapTypeId],\n              zIndex: _this['highlightedLegZIndex']\n            });\n          };\n        })(this),\n        unhighlight: (function(_this) {\n          return function() {\n            return marker['_omsData'].leg.setOptions({\n              strokeColor: _this['legColors']['usual'][_this.map.mapTypeId],\n              zIndex: _this['usualLegZIndex']\n            });\n          };\n        })(this)\n      };\n    };\n\n    p.spiderfy = function(markerData, nonNearbyMarkers) {\n      var bodyPt, footLl, footPt, footPts, highlightListenerFuncs, leg, marker, md, nearestMarkerDatum, numFeet, spiderfiedMarkers;\n      this.spiderfying = true;\n      numFeet = markerData.length;\n      bodyPt = this.ptAverage((function() {\n        var l, len1, results;\n        results = [];\n        for (l = 0, len1 = markerData.length; l < len1; l++) {\n          md = markerData[l];\n          results.push(md.markerPt);\n        }\n        return results;\n      })());\n      footPts = numFeet >= this['circleSpiralSwitchover'] ? this.generatePtsSpiral(numFeet, bodyPt).reverse() : this.generatePtsCircle(numFeet, bodyPt);\n      spiderfiedMarkers = (function() {\n        var l, len1, results;\n        results = [];\n        for (l = 0, len1 = footPts.length; l < len1; l++) {\n          footPt = footPts[l];\n          footLl = this.ptToLl(footPt);\n          nearestMarkerDatum = this.minExtract(markerData, (function(_this) {\n            return function(md) {\n              return _this.ptDistanceSq(md.markerPt, footPt);\n            };\n          })(this));\n          marker = nearestMarkerDatum.marker;\n          leg = new gm.Polyline({\n            map: this.map,\n            path: [marker.position, footLl],\n            strokeColor: this['legColors']['usual'][this.map.mapTypeId],\n            strokeWeight: this['legWeight'],\n            zIndex: this['usualLegZIndex']\n          });\n          marker['_omsData'] = {\n            usualPosition: marker.position,\n            leg: leg\n          };\n          if (this['legColors']['highlighted'][this.map.mapTypeId] !== this['legColors']['usual'][this.map.mapTypeId]) {\n            highlightListenerFuncs = this.makeHighlightListenerFuncs(marker);\n            marker['_omsData'].hightlightListeners = {\n              highlight: ge.addListener(marker, 'mouseover', highlightListenerFuncs.highlight),\n              unhighlight: ge.addListener(marker, 'mouseout', highlightListenerFuncs.unhighlight)\n            };\n          }\n          marker.setPosition(footLl);\n          marker.setZIndex(Math.round(this['spiderfiedZIndex'] + footPt.y));\n          results.push(marker);\n        }\n        return results;\n      }).call(this);\n      delete this.spiderfying;\n      this.spiderfied = true;\n      return this.trigger('spiderfy', spiderfiedMarkers, nonNearbyMarkers);\n    };\n\n    p['unspiderfy'] = function(markerNotToMove) {\n      var l, len1, listeners, marker, nonNearbyMarkers, ref2, unspiderfiedMarkers;\n      if (markerNotToMove == null) {\n        markerNotToMove = null;\n      }\n      if (this.spiderfied == null) {\n        return this;\n      }\n      this.unspiderfying = true;\n      unspiderfiedMarkers = [];\n      nonNearbyMarkers = [];\n      ref2 = this.markers;\n      for (l = 0, len1 = ref2.length; l < len1; l++) {\n        marker = ref2[l];\n        if (marker['_omsData'] != null) {\n          marker['_omsData'].leg.setMap(null);\n          if (marker !== markerNotToMove) {\n            marker.setPosition(marker['_omsData'].usualPosition);\n          }\n          marker.setZIndex(null);\n          listeners = marker['_omsData'].hightlightListeners;\n          if (listeners != null) {\n            ge.removeListener(listeners.highlight);\n            ge.removeListener(listeners.unhighlight);\n          }\n          delete marker['_omsData'];\n          unspiderfiedMarkers.push(marker);\n        } else {\n          nonNearbyMarkers.push(marker);\n        }\n      }\n      delete this.unspiderfying;\n      delete this.spiderfied;\n      this.trigger('unspiderfy', unspiderfiedMarkers, nonNearbyMarkers);\n      return this;\n    };\n\n    p.ptDistanceSq = function(pt1, pt2) {\n      var dx, dy;\n      dx = pt1.x - pt2.x;\n      dy = pt1.y - pt2.y;\n      return dx * dx + dy * dy;\n    };\n\n    p.ptAverage = function(pts) {\n      var l, len1, numPts, pt, sumX, sumY;\n      sumX = sumY = 0;\n      for (l = 0, len1 = pts.length; l < len1; l++) {\n        pt = pts[l];\n        sumX += pt.x;\n        sumY += pt.y;\n      }\n      numPts = pts.length;\n      return new gm.Point(sumX / numPts, sumY / numPts);\n    };\n\n    p.llToPt = function(ll) {\n      return this.projHelper.getProjection().fromLatLngToDivPixel(ll);\n    };\n\n    p.ptToLl = function(pt) {\n      return this.projHelper.getProjection().fromDivPixelToLatLng(pt);\n    };\n\n    p.minExtract = function(set, func) {\n      var bestIndex, bestVal, index, item, l, len1, val;\n      for (index = l = 0, len1 = set.length; l < len1; index = ++l) {\n        item = set[index];\n        val = func(item);\n        if ((typeof bestIndex === \"undefined\" || bestIndex === null) || val < bestVal) {\n          bestVal = val;\n          bestIndex = index;\n        }\n      }\n      return set.splice(bestIndex, 1)[0];\n    };\n\n    p.arrIndexOf = function(arr, obj) {\n      var i, l, len1, o;\n      if (arr.indexOf != null) {\n        return arr.indexOf(obj);\n      }\n      for (i = l = 0, len1 = arr.length; l < len1; i = ++l) {\n        o = arr[i];\n        if (o === obj) {\n          return i;\n        }\n      }\n      return -1;\n    };\n\n    _Class.ProjHelper = function(map) {\n      return this.setMap(map);\n    };\n\n    _Class.ProjHelper.prototype = new gm.OverlayView();\n\n    _Class.ProjHelper.prototype['draw'] = function() {};\n\n    return _Class;\n\n  })();\n\n}).call(this);\n"],"sourceRoot":"/source/"}