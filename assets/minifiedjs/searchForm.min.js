var targetTemplate="#result-template",listTemplate="#list-template";function resetSearchFrame(){$("#results").empty(),$("#listResults").empty(),$(".frame ul").empty(),$(".suggest").empty(),galleryFrame&&(galleryFrame.destroy(),galleryFrame=null),$(".galleryIframe").attr("src","")}$(document).on("click",".addAnotherSpecific",(function(){$(".searchCombine").removeClass("hide");var e=$(this).closest(".specificSearch"),t=$(e).clone(!1);t.find("input[type='text']").val(""),$(e).after(t)})),$(document).on("click",".addAnotherCollection",(function(){var e=$(this).closest(".form-group"),t=$(e).clone(!1);t.find("input[type='text']").val(""),$(e).after(t)})),$(document).on("change",".searchDropdown",(function(){var e=$(this).find(":selected"),t=$(e).val(),a=$(e).data("templateid"),c=$(this).closest(".form-group").find(".specificSearchTextContainer");$.post(basePath+"search/getFieldInfo",{fieldTitle:t,template:a},(function(e,t,a){var s;try{s=$.parseJSON(e)}catch(e){console.log("error occurred")}"text"==s.type?($(c).html(""),$(c).html('<input type="text" name="specificSearchText[]"  autocomplete="off" class="form-control advancedOption advancedSearchContent" value="">')):($(c).html(""),$(c).html('<select name="specificSearchText[]"  autocomplete="off" class="form-control advancedOption advancedSearchContent">'),selectElement=$(c).find("select"),$.each(s.values,(function(e,t){"string"==typeof e?$(selectElement).append($("<option>",{value:e}).text(t)):$(selectElement).append($("<option>",{value:t}).text(t))})))}))}));var performSearchForButtonPress=function(e){return resetSearchFrame(),searchId="",window.location.hash.length,currentPageNumber=0,previousEventComplete=!1,$.post(basePath+"search/searchResults/"+searchId,{searchQuery:JSON.stringify($(e).serializeForm())},(function(e){try{cachedResults=$.parseJSON(e),cachedDates=null}catch(t){alert(t+" "+e)}if(!0===cachedResults.success){if(1==cachedResults.matches.length){var t=cachedResults.matches[0].objectId;$.cookie("lastSearch",searchId),window.location.hash="",window.location.pathname=basePath+"/asset/viewAsset/"+t}searchId=cachedResults.searchId,cachedResults.totalLoadedCount=cachedResults.matches.length,disableHashChange=!0,currentURL=window.location.href.replace(window.location.hash,""),currentHash=window.location.hash.replace("#","");var a=currentURL.substr(currentURL.lastIndexOf("/")+1);window.history.pushState({},"Search Results",window.location.href.replace(a,searchId)),dataAvailable=!0,$("#loadAllResults").show(),processSearchResults(cachedResults),setTimeout((function(){disableHashChange=!1}),500),$("#advancedSearchModal").hasClass("in")&&$("#advancedSearchModal").modal("hide")}})),!1};$(document).ready((function(){parseSearch(),$(document).on("submit",".searchForm",(function(){return"advancedSearchForm"==$(this).attr("id")||($(this).find("#specificSearchField").val(""),$(this).find("#specificSearchText").val(""),$(".collectionHeader").html("")),performSearchForButtonPress(this),!1}))}));
//# sourceMappingURL=searchForm.min.js.map
