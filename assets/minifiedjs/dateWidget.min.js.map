{"version":3,"file":"dateWidget.min.js","sources":["dateWidget.js"],"sourcesContent":["\n\n\n\nfunction modifyRange(event) {\n\tif($(this).val() == 1) {\n\t\t$(this).closest(\".widgetContents\").find('.startLabel').text(\"Start\");\n\t\t// Firefox fails to handle animation when items are off-screen.  Disable animation.\n\t\t// TODO: refactor this in a smarter way.\n\t\tif(!(window.mozInnerScreenX == null)) {\n\t\t\t$(this).closest(\".widgetContents\").find('.dateRange').show();\n\t\t}\n\t\telse {\n\t\t\t$(this).closest(\".widgetContents\").find('.dateRange').show('fast', function() {\n\n\t\t\t});\t\n\t\t}\n\t\t\n\t}\n\telse {\n\t\t$(this).closest(\".widgetContents\").find('.startLabel').text(\"Date\");\n\t\tif(!(window.mozInnerScreenX == null)) {\n\t\t\t$(this).closest(\".widgetContents\").find('.dateRange').hide();\n\t\t}\n\t\telse {\n\t\t\t$(this).closest(\".widgetContents\").find('.dateRange').hide('fast', function() {\n\n\t\t\t});\n\t\t}\n\t\t\n\t}\n\n}\n\n\nfunction parseDateString(dateString, event) {\n\tif(dateString.length > 0) {\n\t\tif(Sugar.Date.isValid(Sugar.Date.create(dateString))) {\n\t\t\tvar dateNumeric = Sugar.Date.create(dateString, {fromUTC: true}).getTime()/1000;\n\t\t\tif(event) {\n\t\t\t\t$(event.target).siblings('.dateHidden').val(dateNumeric);\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse {\n\t\t\tif(dateString.toLowerCase().indexOf('bc') != -1) {\n\t\t\t\tdateString = dateString.replace(/,/g, '');\n\t\t\t\tvar pattern = /[0-9]+/g;\n\t\t\t\tvar matches = dateString.match(pattern);\n\t\t\t\tif(matches.length>0) {\n\t\t\t\t\tvar yearsAgo = matches[0];\n\t\t\t\t\tif(dateString.toLowerCase().indexOf('century') != -1) {\n\t\t\t\t\t\tyearsAgo = yearsAgo * 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar bceDate = (-1 * yearsAgo * 31556900) - (1970*31556900); // seconds in a year\n\t\t\t\t\tif(event) {\n\t\t\t\t\t\t$(event.target).siblings('.dateHidden').val(bceDate);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//TODO: make this trigger parse error instead!\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\t$(event.target).siblings('.dateHidden').val(\"\");\n\t}\n}\n\nfunction parseDate(event) {\n\tvar dateString = $(this).val();\n\tparseDateString(dateString, event);\n}\n\n$(document).ready(function() {\n\t$(document).on( \"change\", \".rangeModify\", modifyRange );\n\t$( \".rangeModify\" ).trigger( \"change\" );\n\t$(document).on(\"change\", \".dateText\", parseDate);\n});\n"],"names":["modifyRange","event","$","this","val","closest","find","text","window","mozInnerScreenX","show","hide","parseDateString","dateString","yearsAgo","length","Sugar","Date","isValid","create","dateNumeric","fromUTC","getTime","target","siblings","toLowerCase","indexOf","matches","replace","match","bceDate","parseDate","document","ready","on","trigger"],"mappings":"AAIA,SAASA,YAAYC,GACA,GAAjBC,EAAEC,IAAI,EAAEC,IAAI,GACdF,EAAEC,IAAI,EAAEE,QAAQ,iBAAiB,EAAEC,KAAK,aAAa,EAAEC,KAAK,OAAO,EAGpC,MAA1BC,OAAOC,gBACXP,EAAEC,IAAI,EAAEE,QAAQ,iBAAiB,EAAEC,KAAK,YAAY,EAAEI,KAAK,EAG3DR,EAAEC,IAAI,EAAEE,QAAQ,iBAAiB,EAAEC,KAAK,YAAY,EAAEI,KAAK,OAAQ,YAElE,IAKFR,EAAEC,IAAI,EAAEE,QAAQ,iBAAiB,EAAEC,KAAK,aAAa,EAAEC,KAAK,MAAM,EACnC,MAA1BC,OAAOC,gBACXP,EAAEC,IAAI,EAAEE,QAAQ,iBAAiB,EAAEC,KAAK,YAAY,EAAEK,KAAK,EAG3DT,EAAEC,IAAI,EAAEE,QAAQ,iBAAiB,EAAEC,KAAK,YAAY,EAAEK,KAAK,OAAQ,YAElE,EAKJ,CAGA,SAASC,gBAAgBC,EAAYZ,GACpC,IAcQa,EAdR,GAAuB,EAApBD,EAAWE,OACb,OAAGC,MAAMC,KAAKC,QAAQF,MAAMC,KAAKE,OAAON,CAAU,CAAC,GAC9CO,EAAcJ,MAAMC,KAAKE,OAAON,EAAY,CAACQ,QAAS,CAAA,CAAI,CAAC,EAAEC,QAAQ,EAAE,IACxErB,GACFC,EAAED,EAAMsB,MAAM,EAAEC,SAAS,aAAa,EAAEpB,IAAIgB,CAAW,EAEjD,CAAA,GAGsC,CAAC,GAA3CP,EAAWY,YAAY,EAAEC,QAAQ,IAAI,IAIrB,GADdC,GAFJd,EAAaA,EAAWe,QAAQ,KAAM,EAAE,GAEfC,MADX,SACwB,GAC3Bd,QACND,EAAWa,EAAQ,GAC2B,CAAC,GAAhDd,EAAWY,YAAY,EAAEC,QAAQ,SAAS,IAC5CZ,GAAsB,KAGnBgB,EAAW,CAAC,EAAIhB,EAAW,SAAY,WACxCb,GACFC,EAAED,EAAMsB,MAAM,EAAEC,SAAS,aAAa,EAAEpB,IAAI0B,CAAO,EAG7C,CAAA,GAXR,KAAA,GAqBF5B,EAAED,EAAMsB,MAAM,EAAEC,SAAS,aAAa,EAAEpB,IAAI,EAAE,CAEhD,CAEA,SAAS2B,UAAU9B,GAElBW,gBADiBV,EAAEC,IAAI,EAAEC,IAAI,EACDH,CAAK,CAClC,CAEAC,EAAE8B,QAAQ,EAAEC,MAAM,WACjB/B,EAAE8B,QAAQ,EAAEE,GAAI,SAAU,eAAgBlC,WAAY,EACtDE,EAAG,cAAe,EAAEiC,QAAS,QAAS,EACtCjC,EAAE8B,QAAQ,EAAEE,GAAG,SAAU,YAAaH,SAAS,CAChD,CAAC"}