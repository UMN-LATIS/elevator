!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&"object"==typeof module.exports?module.exports=e:e(jQuery)}(function(e){e.expander={version:"1.6.1",defaults:{slicePoint:100,sliceOn:null,preserveWords:!0,normalizeWhitespace:!0,showWordCount:!1,wordCountText:" ({{count}} words)",widow:4,expandText:"read more",expandPrefix:"&hellip; ",expandAfterSummary:!1,wordEnd:/(&(?:[^;]+;)?|[0-9a-zA-Z\u00C0-\u0100]+|[^\u0000-\u007F]+)$/,summaryClass:"summary",detailClass:"details",moreClass:"read-more",lessClass:"read-less",moreLinkClass:"more-link",lessLinkClass:"less-link",collapseTimer:0,expandEffect:"slideDown",expandSpeed:250,collapseEffect:"slideUp",collapseSpeed:200,userCollapse:!0,userCollapseText:"read less",userCollapsePrefix:" ",onSlice:null,beforeExpand:null,afterExpand:null,onCollapse:null,afterCollapse:null}},e.fn.expander=function(a){function l(e,a){var l="span",s=e.summary,n=h.exec(s),t=n?n[2].toLowerCase():"";return a?(l="div",n&&"a"!==t&&!e.expandAfterSummary?s=s.replace(h,e.moreLabel+"$1"):s+=e.moreLabel,s='<div class="'+e.summaryClass+'">'+s+"</div>"):(!/^\s*</.test(s),s+=e.moreLabel),[s," <",l+' class="'+e.detailClass+'"',">",e.details,"</"+l+">"].join("")}function s(e,a){var l='<span class="'+e.moreClass+'">'+e.expandPrefix;return e.showWordCount?e.wordCountText=e.wordCountText.replace(/\{\{count\}\}/,a.replace(u,"").replace(/\&(?:amp|nbsp);/g,"").replace(/(?:^\s+|\s+$)/,"").match(/\w+/g).length):e.wordCountText="",l+='<a href="#" class="'+e.moreLinkClass+'">'+e.expandText+e.wordCountText+"</a></span>"}function n(a,l){return a.lastIndexOf("<")>a.lastIndexOf(">")&&(a=a.slice(0,a.lastIndexOf("<"))),l&&(a=a.replace(f,"")),e.trim(a)}function t(e,a){a.stop(!0,!0)[e.collapseEffect](e.collapseSpeed,function(){var l=a.prev("span."+e.moreClass).show();l.length||a.parent().children("div."+e.summaryClass).show().find("span."+e.moreClass).show(),e.afterCollapse&&e.afterCollapse.call(a)})}function r(a,l,s){a.collapseTimer&&(d=setTimeout(function(){t(a,l),e.isFunction(a.onCollapse)&&a.onCollapse.call(s,!1)},a.collapseTimer))}function i(a){var l="ExpandMoreHere374216623",s=a.summaryText.replace(a.sliceOn,l);s=e("<div>"+s+"</div>").text();var n=s.indexOf(l),t=a.summaryText.indexOf(a.sliceOn);return-1!==n&&n<a.slicePoint&&(a.summaryText=a.allHtml.slice(0,t)),a}var o="init";"string"==typeof a&&(o=a,a={});var d,c=e.extend({},e.expander.defaults,a),p=/^<(?:area|br|col|embed|hr|img|input|link|meta|param).*>$/i,f=c.wordEnd,u=/<\/?(\w+)[^>]*>/g,m=/<(\w+)[^>]*>/g,x=/<\/(\w+)>/g,h=/(<\/([^>]+)>)\s*$/,C=/^(<[^>]+>)+.?/,v=/\s\s+/g,y=function(a){return c.normalizeWhitespace?e.trim(a||"").replace(v," "):a},g={init:function(){this.each(function(){var a,o,f,h,v,g,w,T,b,E,S,k,O,P,j,L=[],I=[],$="",A={},D=this,W=e(this),z=e([]),F=e.extend({},c,W.data("expander")||e.meta&&W.data()||{}),H=!!W.find("."+F.detailClass).length,U=!!W.find("*").filter(function(){var a=e(this).css("display");return/^block|table|list/.test(a)}).length,q=U?"div":"span",M=q+"."+F.detailClass,Q=F.moreClass+"",Z=F.lessClass+"",B=F.expandSpeed||0,G=y(W.html()),J=G.slice(0,F.slicePoint);if(F.moreSelector="span."+Q.split(" ").join("."),F.lessSelector="span."+Z.split(" ").join("."),!e.data(this,"expanderInit")){for(e.data(this,"expanderInit",!0),e.data(this,"expander",F),e.each(["onSlice","beforeExpand","afterExpand","onCollapse","afterCollapse"],function(a,l){A[l]=e.isFunction(F[l])}),J=n(J),v=J.replace(u,"").length;v<F.slicePoint;)h=G.charAt(J.length),"<"===h&&(h=G.slice(J.length).match(C)[0]),J+=h,v++;for(F.sliceOn&&(j=i({sliceOn:F.sliceOn,slicePoint:F.slicePoint,allHtml:G,summaryText:J}),J=j.summaryText),J=n(J,F.preserveWords&&G.slice(J.length).length),g=J.match(m)||[],w=J.match(x)||[],f=[],e.each(g,function(e,a){p.test(a)||f.push(a)}),g=f,o=w.length,a=0;o>a;a++)w[a]=w[a].replace(x,"$1");if(e.each(g,function(a,l){var s=l.replace(m,"$1"),n=e.inArray(s,w);-1===n?(L.push(l),I.push("</"+s+">")):w.splice(n,1)}),I.reverse(),H)b=W.find(M).remove().html(),J=W.html(),G=J+b,T="";else{if(b=G.slice(J.length),E=e.trim(b.replace(u,"")),""===E||E.split(/\s+/).length<F.widow)return;T=I.pop()||"",J+=I.join(""),b=L.join("")+b}F.moreLabel=W.find(F.moreSelector).length?"":s(F,b),U?b=G:"&"===J.charAt(J.length-1)&&($=/^[#\w\d\\]+;/.exec(b),$&&(b=b.slice($[0].length),J+=$[0])),J+=T,F.summary=J,F.details=b,F.lastCloseTag=T,A.onSlice&&(f=F.onSlice.call(D,F),F=f&&f.details?f:F),S=l(F,U),W.empty().append(S),O=W.find(M),P=W.find(F.moreSelector),"slideUp"===F.collapseEffect&&"slideDown"!==F.expandEffect||W.is(":hidden")?O.css({display:"none"}):O[F.collapseEffect](0),z=W.find("div."+F.summaryClass),k=function(e){e.preventDefault(),P.hide(),z.hide(),A.beforeExpand&&F.beforeExpand.call(D),O.stop(!1,!0)[F.expandEffect](B,function(){O.css({zoom:""}),A.afterExpand&&F.afterExpand.call(D),r(F,O,D)})},P.find("a").unbind("click.expander").bind("click.expander",k),F.userCollapse&&!W.find(F.lessSelector).length&&W.find(M).append('<span class="'+F.lessClass+'">'+F.userCollapsePrefix+'<a href="#" class="'+F.lessLinkClass+'">'+F.userCollapseText+"</a></span>"),W.find(F.lessSelector+" a").unbind("click.expander").bind("click.expander",function(a){a.preventDefault(),clearTimeout(d);var l=e(this).closest(M);t(F,l),A.onCollapse&&F.onCollapse.call(D,!0)})}})},destroy:function(){this.each(function(){var a,l,s=e(this);s.data("expanderInit")&&(a=e.extend({},s.data("expander")||{},c),l=s.find("."+a.detailClass).contents(),s.removeData("expanderInit"),s.removeData("expander"),s.find(a.moreSelector).remove(),s.find("."+a.summaryClass).remove(),s.find("."+a.detailClass).after(l).remove(),s.find(a.lessSelector).remove())})}};return g[o]&&g[o].call(this),this},e.fn.expander.defaults=e.expander.defaults});
//# sourceMappingURL=jquery.expander.min.js.map
