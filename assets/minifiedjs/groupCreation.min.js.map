{"version":3,"sources":["groupCreation.js"],"names":["loadValues","groupArray","$","each","index","val","addValue","value","source","html","template","Handlebars","compile","sourceObject","groupValue","groupName","userCache","before","buildAutocomplete","removeValue","targetElement","find","hide","updateHints","hints","remove","Object","keys","length","hintLabel","on","last","this","updateHelptext","helpText","text","el","autocomplete","request","response","post","basePath","groupType","term","data","jsonObject","parseJSON","e","alert","success","matches","username","emplid","name","email","completionId","messages","noResults","results","search","event","ui","show","_renderItem","ul","item","base_url","appendTo","document","closest","ready","existingGroups","attr","removeAttr","haveValues","trigger"],"mappings":"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","file":"groupCreation.min.js","sourcesContent":["\n\nvar loadValues = function(groupArray) {\n\n\t$.each(groupArray, function(index, val) {\n\t\taddValue(val);\n\t});\n\n};\n\nvar addValue = function(value) {\n\n\tvar source = $(\"#group-value\").html();\n\tif (!source) {\n\t\treturn;\n\t}\n\tvar template = Handlebars.compile(source);\n\n\tvar sourceObject = {};\n\tsourceObject.groupValue = value;\n\tif($(\"#inputGroupType\").val() == \"User\") {\n\t\tsourceObject.groupName = userCache[value];\n\t}\n\telse {\n\t\tsourceObject.groupName = null;\n\t}\n\n\tvar html = template(sourceObject);\n\t$(\"#addAnotherValue\").before(html);\n\tbuildAutocomplete();\n};\n\n\nvar removeValue = function(targetElement) {\n\t$(targetElement).find(\"input\").val(\"\");\n\t$(targetElement).hide();\n\n};\n\n\n$(document).on(\"click\", \".removeValueButton\", function() {\n\n\tremoveValue($(this).closest(\".groupValueGroup\"));\n\n});\n\n$(document).ready(function() {\n\n\tif (typeof existingGroups !== 'undefined') {\n\t\tloadValues(existingGroups);\t\n\t}\n\t\n\taddValue(\"\");\n\n\t$(\"#addAnotherValue\").on(\"click\", function() {\n\t\taddValue(\"\");\n\t});\n\n\n\n\n\tbuildAutocomplete();\n\t$(\"#inputGroupType\").on(\"change\", function() {\n\n\n\t\tif($(this).val() === \"\") {\n\t\t\t$(\"#submitButton\").attr(\"disabled\",true);\n\t\t}\n\t\telse {\n\t\t\t$(\"#submitButton\").removeAttr(\"disabled\");\n\t\t}\n\n\n\n\n\t\tswitch($(this).val()) {\n\t\t\tcase \"\":\n\t\t\tcase \"All\":\n\t\t\tcase \"Authed\":\n\t\t\tcase \"Authed_remote\":\n\t\t\t$(\".groupValueGroup\").hide();\n\t\t\t$(\"#groupLabelGroup\").hide();\n\t\t\t$(\"#courseList\").hide();\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t$(\".groupValueGroup\").show();\n\t\t\t$(\"#groupLabelGroup\").show();\n\t\t\tbreak;\n\t\t}\n\n\t\tupdateHints($(this));\n\t\tupdateHelptext($(this));\n\n\t\t\n\n\t\tif($(\"#inputGroupId\").val() === \"\") {\n\t\t\t$(\"#inputGroupLabel\").attr(\"placeholder\", ($(this).find(\"option:selected\").text()));\n\t\t}\n\n\n\t});\n\n\t$(\"#createGroupForm\").on(\"submit\", function() {\n\n\t\tswitch($(\"#inputGroupType\").val()) {\n\t\t\tcase \"All\":\n\t\t\tcase \"Authed\":\n\t\t\tcase \"Authed_remote\":\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tvar haveValues = false;\n\t\t\t\t$('input[name=\"groupValue[]\"]').each(function(index, el) {\n\t\t\t\t\tif($(el).val() !== \"\")\t{\n\t\t\t\t\t\thaveValues = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif(!haveValues) {\n\t\t\t\t\talert(\"A group value is required\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\treturn true;\n\t});\n\n\t$(\"#inputGroupType\").trigger(\"change\");\n\n});\n\nfunction updateHints(targetElement) {\n\tif (typeof hints == 'undefined') {\n\t\treturn;\n\t}\n\t$(\".hintSelectorGroup\").remove();\n\tif(hints[targetElement.val()] && Object.keys(hints[targetElement.val()]).length >0) {\t\n\t\n\t\tvar source   = $(\"#hint-selector\").html();\n\t\tvar template = Handlebars.compile(source);\n\n\t\tvar sourceObject = {};\n\t\tsourceObject.hintLabel = targetElement.val();\n\t\tsourceObject.hints = hints[targetElement.val()];\n\t\tvar html = template(sourceObject);\n\n\t\t$(\"#groupLabelGroup\").before(html);\n\t\t$(\".hintSelector\").on(\"change\", function() {\n\t\t\t$(\".inputGroupValue\").last().val($(this).val());\n\t\t});\n\t}\n}\nfunction updateHelptext(targetElement) {\n\tif (typeof helpText == 'undefined') {\n\t\treturn;\n\t}\n\t$(\"#helpText\").text(\"\");\n\tif(helpText[targetElement.val()] && Object.keys(helpText[targetElement.val()]).length >0) {\t\n\t\t$(\"#helpText\").text(helpText[targetElement.val()]);\n\t}\n}\n\nfunction buildAutocomplete() {\n\tvar source   = $(\"#person-autocompleter-template\").html();\n\tvar template = Handlebars.compile(source);\n\n\t$(\".inputGroupValue\").each(function (index, el) {\n\t\t\n\t\t$(el).autocomplete({\n\n\t\t\tsource: function(request, response) {\n\t\t\t\t$.post( basePath + \"permissions/userAutocompleter/\", {groupType: $(\"#inputGroupType\").val(), groupValue: request.term}, function( data ) {\n\t\t\t\t\ttry{\n\t\t\t\t\t\tjsonObject = $.parseJSON(data);\n\t\t\t\t\t}\n\t\t\t\t\tcatch(e){\n\t\t\t\t\t\talert(e + \" \" + data);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(jsonObject.success === true) {\n\t\t\t\t\t\t$.each(jsonObject.matches, function(index, value) {\n\n\t\t\t\t\t\t\tvalue.username = value.username;\n\t\t\t\t\t\t\tvalue.emplid = value.emplid;\n\t\t\t\t\t\t\tvalue.name = value.name;\n\t\t\t\t\t\t\tvalue.email = value.email;\n\t\t\t\t\t\t\tif(value.completionId) {\n\t\t\t\t\t\t\t\tvalue.value = value.completionId;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tvalue.value = value.username;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tjsonObject.matches[index] = value;\n\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresponse(jsonObject.matches);\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t\t},\n\t\t\tmessages: {\n\t\t\t\tnoResults: '',\n\t\t\t\tresults: function() {}\n\t\t\t},\n\t\t\tsearch: function(event, ui) {\n\t\t\t\t$('.spinner').show();\n\t\t\t},\n\t\t\tresponse: function(event, ui) {\n\t\t\t\t$('.spinner').hide();\n\t\t\t}\n\t\t}).data(\"ui-autocomplete\")._renderItem = function( ul, item ) {\n\t\t\titem.base_url = basePath;\n\t\t\tvar html = template(item);\n\t\t\treturn $(html).appendTo(ul);\n\t\t};\n\n\t\t});\n}\n"]}