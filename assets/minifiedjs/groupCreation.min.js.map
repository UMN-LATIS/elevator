{"version":3,"sources":["groupCreation.js"],"names":["buildAutocomplete","source","$","html","template","Handlebars","compile","each","index","el","autocomplete","request","response","post","basePath","groupType","val","groupValue","term","data","jsonObject","parseJSON","e","alert","success","matches","value","username","emplid","name","email","completionId","messages","noResults","results","search","event","ui","show","hide","_renderItem","ul","item","base_url","appendTo","loadValues","groupArray","addValue","sourceObject","groupName","userCache","before","removeValue","targetElement","find","document","on","this","closest","ready","existingGroups","attr","removeAttr","text","haveValues","trigger"],"mappings":"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","file":"groupCreation.min.js","sourcesContent":["\n\nvar loadValues = function(groupArray) {\n\n\t$.each(groupArray, function(index, val) {\n\t\taddValue(val);\n\t});\n\n};\n\nvar addValue = function(value) {\n\n\tvar source   = $(\"#group-value\").html();\n\tvar template = Handlebars.compile(source);\n\n\tvar sourceObject = {};\n\tsourceObject.groupValue = value;\n\tif($(\"#inputGroupType\").val() == \"User\") {\n\t\tsourceObject.groupName = userCache[value];\n\t}\n\telse {\n\t\tsourceObject.groupName = null;\n\t}\n\n\tvar html = template(sourceObject);\n\t$(\"#addAnotherValue\").before(html);\n\tbuildAutocomplete();\n};\n\n\nvar removeValue = function(targetElement) {\n\t$(targetElement).find(\"input\").val(\"\");\n\t$(targetElement).hide();\n\n};\n\n\n$(document).on(\"click\", \".removeValueButton\", function() {\n\n\tremoveValue($(this).closest(\".groupValueGroup\"));\n\n});\n\n$(document).ready(function() {\n\n\n\tloadValues(existingGroups);\n\taddValue(\"\");\n\n\t$(\"#addAnotherValue\").on(\"click\", function() {\n\t\taddValue(\"\");\n\t});\n\n\n\n\n\tbuildAutocomplete();\n\t$(\"#inputGroupType\").on(\"change\", function() {\n\n\n\t\tif($(this).val() === \"\") {\n\t\t\t$(\"#submitButton\").attr(\"disabled\",true);\n\t\t}\n\t\telse {\n\t\t\t$(\"#submitButton\").removeAttr(\"disabled\");\n\t\t}\n\n\n\n\n\t\tswitch($(this).val()) {\n\t\t\tcase \"\":\n\t\t\tcase \"All\":\n\t\t\tcase \"Authed\":\n\t\t\tcase \"Authed_remote\":\n\t\t\t$(\".groupValueGroup\").hide();\n\t\t\t$(\"#groupLabelGroup\").hide();\n\t\t\tbreak;\n\t\t\tcase \"Course\":\n\t\t\tcase \"JobCode\":\n\t\t\tcase \"User\":\n\t\t\tcase \"Unit\":\n\t\t\t$(\".groupValueGroup\").show();\n\t\t\t$(\"#groupLabelGroup\").show();\n\t\t\tbreak;\n\t\t}\n\n\t\tif($(\"#inputGroupId\").val() === \"\") {\n\t\t\t$(\"#inputGroupLabel\").attr(\"placeholder\", ($(this).find(\"option:selected\").text()));\n\t\t}\n\n\n\t});\n\n\t$(\"#createGroupForm\").on(\"submit\", function() {\n\n\t\tswitch($(\"#inputGroupType\").val()) {\n\t\t\tcase \"User\":\n\t\t\tcase \"JobCode\":\n\t\t\tcase \"Course\":\n\t\t\tvar haveValues = false;\n\t\t\t$('input[name=\"groupValue[]\"]').each(function(index, el) {\n\t\t\t\tif($(el).val() !== \"\")\t{\n\t\t\t\t\thaveValues = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif(!haveValues) {\n\t\t\t\talert(\"A group value is required\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\treturn true;\n\t});\n\n\t$(\"#inputGroupType\").trigger(\"change\");\n\n});\n\n\n\nfunction buildAutocomplete() {\n\tvar source   = $(\"#person-autocompleter-template\").html();\n\tvar template = Handlebars.compile(source);\n\n\n\t$(\".inputGroupValue\").each(function(index, el) {\n\t\t$(el).autocomplete({\n\n\t\t\tsource: function(request, response) {\n\t\t\t\t$.post( basePath + \"permissions/userAutocompleter/\", {groupType: $(\"#inputGroupType\").val(), groupValue: request.term}, function( data ) {\n\t\t\t\t\ttry{\n\t\t\t\t\t\tjsonObject = $.parseJSON(data);\n\t\t\t\t\t}\n\t\t\t\t\tcatch(e){\n\t\t\t\t\t\talert(e + \" \" + data);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(jsonObject.success === true) {\n\t\t\t\t\t\t$.each(jsonObject.matches, function(index, value) {\n\n\t\t\t\t\t\t\tvalue.username = value.username;\n\t\t\t\t\t\t\tvalue.emplid = value.emplid;\n\t\t\t\t\t\t\tvalue.name = value.name;\n\t\t\t\t\t\t\tvalue.email = value.email;\n\t\t\t\t\t\t\tif(value.completionId) {\n\t\t\t\t\t\t\t\tvalue.value = value.completionId;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tvalue.value = value.username;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tjsonObject.matches[index] = value;\n\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresponse(jsonObject.matches);\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t\t},\n\t\t\tmessages: {\n\t\t\t\tnoResults: '',\n\t\t\t\tresults: function() {}\n\t\t\t},\n\t\t\tsearch: function(event, ui) {\n\t\t\t\t$('.spinner').show();\n\t\t\t},\n\t\t\tresponse: function(event, ui) {\n\t\t\t\t$('.spinner').hide();\n\t\t\t}\n\t\t}).data(\"ui-autocomplete\")._renderItem = function( ul, item ) {\n\t\t\titem.base_url = basePath;\n\t\t\tvar html = template(item);\n\t\t\treturn $(html).appendTo(ul);\n\t\t};\n\n\t\t});\n}\n"],"sourceRoot":"/source/"}