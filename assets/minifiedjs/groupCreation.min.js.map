{"version":3,"file":"groupCreation.min.js","sources":["groupCreation.js"],"sourcesContent":["\n\nvar loadValues = function(groupArray) {\n\n\t$.each(groupArray, function(index, val) {\n\t\taddValue(val);\n\t});\n\n};\n\nvar addValue = function(value) {\n\n\tvar source = $(\"#group-value\").html();\n\tif (!source) {\n\t\treturn;\n\t}\n\tvar template = Handlebars.compile(source);\n\n\tvar sourceObject = {};\n\tsourceObject.groupValue = value;\n\tif($(\"#inputGroupType\").val() == \"User\") {\n\t\tsourceObject.groupName = userCache[value];\n\t}\n\telse {\n\t\tsourceObject.groupName = null;\n\t}\n\n\tvar html = template(sourceObject);\n\t$(\"#addAnotherValue\").before(html);\n\tbuildAutocomplete();\n};\n\n\nvar removeValue = function(targetElement) {\n\t$(targetElement).find(\"input\").val(\"\");\n\t$(targetElement).hide();\n\n};\n\n\n$(document).on(\"click\", \".removeValueButton\", function() {\n\n\tremoveValue($(this).closest(\".groupValueGroup\"));\n\n});\n\n$(document).ready(function() {\n\n\tif (typeof existingGroups !== 'undefined') {\n\t\tloadValues(existingGroups);\t\n\t}\n\t\n\taddValue(\"\");\n\n\t$(\"#addAnotherValue\").on(\"click\", function() {\n\t\taddValue(\"\");\n\t});\n\n\n\n\n\tbuildAutocomplete();\n\t$(\"#inputGroupType\").on(\"change\", function() {\n\n\n\t\tif($(this).val() === \"\") {\n\t\t\t$(\"#submitButton\").attr(\"disabled\",true);\n\t\t}\n\t\telse {\n\t\t\t$(\"#submitButton\").removeAttr(\"disabled\");\n\t\t}\n\n\n\n\n\t\tswitch($(this).val()) {\n\t\t\tcase \"\":\n\t\t\tcase \"All\":\n\t\t\tcase \"Authed\":\n\t\t\tcase \"Authed_remote\":\n\t\t\t$(\".groupValueGroup\").hide();\n\t\t\t$(\"#groupLabelGroup\").hide();\n\t\t\t$(\"#courseList\").hide();\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t$(\".groupValueGroup\").show();\n\t\t\t$(\"#groupLabelGroup\").show();\n\t\t\tbreak;\n\t\t}\n\n\t\tupdateHints($(this));\n\t\tupdateHelptext($(this));\n\n\t\t\n\n\t\tif($(\"#inputGroupId\").val() === \"\") {\n\t\t\t$(\"#inputGroupLabel\").attr(\"placeholder\", ($(this).find(\"option:selected\").text()));\n\t\t}\n\n\n\t});\n\n\t$(\"#createGroupForm\").on(\"submit\", function() {\n\n\t\tswitch($(\"#inputGroupType\").val()) {\n\t\t\tcase \"All\":\n\t\t\tcase \"Authed\":\n\t\t\tcase \"Authed_remote\":\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tvar haveValues = false;\n\t\t\t\t$('input[name=\"groupValue[]\"]').each(function(index, el) {\n\t\t\t\t\tif($(el).val() !== \"\")\t{\n\t\t\t\t\t\thaveValues = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif(!haveValues) {\n\t\t\t\t\talert(\"A group value is required\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\treturn true;\n\t});\n\n\t$(\"#inputGroupType\").trigger(\"change\");\n\n});\n\nfunction updateHints(targetElement) {\n\tif (typeof hints == 'undefined') {\n\t\treturn;\n\t}\n\t$(\".hintSelectorGroup\").remove();\n\tif(hints[targetElement.val()] && Object.keys(hints[targetElement.val()]).length >0) {\t\n\t\n\t\tvar source   = $(\"#hint-selector\").html();\n\t\tvar template = Handlebars.compile(source);\n\n\t\tvar sourceObject = {};\n\t\tsourceObject.hintLabel = targetElement.val();\n\t\tsourceObject.hints = hints[targetElement.val()];\n\t\tvar html = template(sourceObject);\n\n\t\t$(\"#groupLabelGroup\").before(html);\n\t\t$(\".hintSelector\").on(\"change\", function() {\n\t\t\t$(\".inputGroupValue\").last().val($(this).val());\n\t\t});\n\t}\n}\nfunction updateHelptext(targetElement) {\n\tif (typeof helpText == 'undefined') {\n\t\treturn;\n\t}\n\t$(\"#helpText\").text(\"\");\n\tif(helpText[targetElement.val()] && Object.keys(helpText[targetElement.val()]).length >0) {\t\n\t\t$(\"#helpText\").text(helpText[targetElement.val()]);\n\t}\n}\n\nfunction buildAutocomplete() {\n\tvar source   = $(\"#person-autocompleter-template\").html();\n\tvar template = Handlebars.compile(source);\n\n\t$(\".inputGroupValue\").each(function (index, el) {\n\t\t\n\t\t$(el).autocomplete({\n\n\t\t\tsource: function(request, response) {\n\t\t\t\t$.post( basePath + \"permissions/userAutocompleter/\", {groupType: $(\"#inputGroupType\").val(), groupValue: request.term}, function( data ) {\n\t\t\t\t\ttry{\n\t\t\t\t\t\tjsonObject = $.parseJSON(data);\n\t\t\t\t\t}\n\t\t\t\t\tcatch(e){\n\t\t\t\t\t\talert(e + \" \" + data);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(jsonObject.success === true) {\n\t\t\t\t\t\t$.each(jsonObject.matches, function(index, value) {\n\n\t\t\t\t\t\t\tvalue.username = value.username;\n\t\t\t\t\t\t\tvalue.emplid = value.emplid;\n\t\t\t\t\t\t\tvalue.name = value.name;\n\t\t\t\t\t\t\tvalue.email = value.email;\n\t\t\t\t\t\t\tif(value.completionId) {\n\t\t\t\t\t\t\t\tvalue.value = value.completionId;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tvalue.value = value.username;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tjsonObject.matches[index] = value;\n\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresponse(jsonObject.matches);\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t\t},\n\t\t\tmessages: {\n\t\t\t\tnoResults: '',\n\t\t\t\tresults: function() {}\n\t\t\t},\n\t\t\tsearch: function(event, ui) {\n\t\t\t\t$('.spinner').show();\n\t\t\t},\n\t\t\tresponse: function(event, ui) {\n\t\t\t\t$('.spinner').hide();\n\t\t\t}\n\t\t}).data(\"ui-autocomplete\")._renderItem = function( ul, item ) {\n\t\t\titem.base_url = basePath;\n\t\t\tvar html = template(item);\n\t\t\treturn $(html).appendTo(ul);\n\t\t};\n\n\t\t});\n}\n"],"names":["loadValues","groupArray","$","each","index","val","addValue","value","sourceObject","source","html","template","Handlebars","compile","groupValue","groupName","userCache","before","buildAutocomplete","removeValue","targetElement","find","hide","updateHints","hints","remove","Object","keys","length","hintLabel","on","last","this","updateHelptext","helpText","text","el","autocomplete","request","response","post","basePath","groupType","term","data","jsonObject","parseJSON","e","alert","success","matches","username","emplid","name","email","completionId","messages","noResults","results","search","event","ui","show","_renderItem","ul","item","base_url","appendTo","document","closest","ready","existingGroups","attr","removeAttr","haveValues","trigger"],"mappings":"AAEA,IAAIA,WAAa,SAASC,GAEzBC,EAAEC,KAAKF,EAAY,SAASG,EAAOC,GAClCC,SAASD,CAAG,CACb,CAAC,CAEF,EAEIC,SAAW,SAASC,GAEvB,IAMIC,EANAC,EAASP,EAAE,cAAc,EAAEQ,KAAK,EAC/BD,IAGDE,EAAWC,WAAWC,QAAQJ,CAAM,GAEpCD,EAAe,IACNM,WAAaP,EACO,QAA9BL,EAAE,iBAAiB,EAAEG,IAAI,EAC3BG,EAAaO,UAAYC,UAAUT,GAGnCC,EAAaO,UAAY,KAGtBL,EAAOC,EAASH,CAAY,EAChCN,EAAE,kBAAkB,EAAEe,OAAOP,CAAI,EACjCQ,kBAAkB,EACnB,EAGIC,YAAc,SAASC,GAC1BlB,EAAEkB,CAAa,EAAEC,KAAK,OAAO,EAAEhB,IAAI,EAAE,EACrCH,EAAEkB,CAAa,EAAEE,KAAK,CAEvB,EA4FA,SAASC,YAAYH,GACpB,IAOKT,EAEAH,EATe,aAAhB,OAAOgB,QAGXtB,EAAE,oBAAoB,EAAEuB,OAAO,EAC5BD,MAAMJ,EAAcf,IAAI,KAAsD,EAAhDqB,OAAOC,KAAKH,MAAMJ,EAAcf,IAAI,EAAE,EAAEuB,SAEpEnB,EAAWP,EAAE,gBAAgB,EAAEQ,KAAK,EACpCC,EAAWC,WAAWC,QAAQJ,CAAM,GAEpCD,EAAe,IACNqB,UAAYT,EAAcf,IAAI,EAC3CG,EAAagB,MAAQA,MAAMJ,EAAcf,IAAI,GACzCK,EAAOC,EAASH,CAAY,EAEhCN,EAAE,kBAAkB,EAAEe,OAAOP,CAAI,EACjCR,EAAE,eAAe,EAAE4B,GAAG,SAAU,WAC/B5B,EAAE,kBAAkB,EAAE6B,KAAK,EAAE1B,IAAIH,EAAE8B,IAAI,EAAE3B,IAAI,CAAC,CAC/C,CAAC,EAEH,CACA,SAAS4B,eAAeb,GACA,aAAnB,OAAOc,WAGXhC,EAAE,WAAW,EAAEiC,KAAK,EAAE,EACnBD,SAASd,EAAcf,IAAI,KAAyD,EAAnDqB,OAAOC,KAAKO,SAASd,EAAcf,IAAI,EAAE,EAAEuB,QAC9E1B,EAAE,WAAW,EAAEiC,KAAKD,SAASd,EAAcf,IAAI,EAAE,CAEnD,CAEA,SAASa,oBACR,IAAIT,EAAWP,EAAE,gCAAgC,EAAEQ,KAAK,EACpDC,EAAWC,WAAWC,QAAQJ,CAAM,EAExCP,EAAE,kBAAkB,EAAEC,KAAK,SAAUC,EAAOgC,GAE3ClC,EAAEkC,CAAE,EAAEC,aAAa,CAElB5B,OAAQ,SAAS6B,EAASC,GACzBrC,EAAEsC,KAAMC,SAAW,iCAAkC,CAACC,UAAWxC,EAAE,iBAAiB,EAAEG,IAAI,EAAGS,WAAYwB,EAAQK,IAAI,EAAG,SAAUC,GACjI,IACCC,WAAa3C,EAAE4C,UAAUF,CAAI,CAK9B,CAHA,MAAMG,GAEL,OADAC,KAAAA,MAAMD,EAAI,IAAMH,CAAI,CAErB,CAE0B,CAAA,IAAvBC,WAAWI,UACb/C,EAAEC,KAAK0C,WAAWK,QAAS,SAAS9C,EAAOG,GAE1CA,EAAM4C,SAAW5C,EAAM4C,SACvB5C,EAAM6C,OAAS7C,EAAM6C,OACrB7C,EAAM8C,KAAO9C,EAAM8C,KACnB9C,EAAM+C,MAAQ/C,EAAM+C,MAEnB/C,EAAMA,MADJA,EAAMgD,cAIMhD,EAAM4C,SAGrBN,WAAWK,QAAQ9C,GAASG,CAE7B,CAAC,EACDgC,EAASM,WAAWK,OAAO,EAG7B,CAAC,CACF,EACAM,SAAU,CACTC,UAAW,GACXC,QAAS,YACV,EACAC,OAAQ,SAASC,EAAOC,GACvB3D,EAAE,UAAU,EAAE4D,KAAK,CACpB,EACAvB,SAAU,SAASqB,EAAOC,GACzB3D,EAAE,UAAU,EAAEoB,KAAK,CACpB,CACD,CAAC,EAAEsB,KAAK,iBAAiB,EAAEmB,YAAc,SAAUC,EAAIC,GACtDA,EAAKC,SAAWzB,SACZ/B,EAAOC,EAASsD,CAAI,EACxB,OAAO/D,EAAEQ,CAAI,EAAEyD,SAASH,CAAE,CAC3B,CAEA,CAAC,CACH,CAjLA9D,EAAEkE,QAAQ,EAAEtC,GAAG,QAAS,qBAAsB,WAE7CX,YAAYjB,EAAE8B,IAAI,EAAEqC,QAAQ,kBAAkB,CAAC,CAEhD,CAAC,EAEDnE,EAAEkE,QAAQ,EAAEE,MAAM,WAEa,aAA1B,OAAOC,gBACVvE,WAAWuE,cAAc,EAG1BjE,SAAS,EAAE,EAEXJ,EAAE,kBAAkB,EAAE4B,GAAG,QAAS,WACjCxB,SAAS,EAAE,CACZ,CAAC,EAKDY,kBAAkB,EAClBhB,EAAE,iBAAiB,EAAE4B,GAAG,SAAU,WAajC,OAVqB,KAAlB5B,EAAE8B,IAAI,EAAE3B,IAAI,EACdH,EAAE,eAAe,EAAEsE,KAAK,WAAW,CAAA,CAAI,EAGvCtE,EAAE,eAAe,EAAEuE,WAAW,UAAU,EAMlCvE,EAAE8B,IAAI,EAAE3B,IAAI,GAClB,IAAK,GACL,IAAK,MACL,IAAK,SACL,IAAK,gBACLH,EAAE,kBAAkB,EAAEoB,KAAK,EAC3BpB,EAAE,kBAAkB,EAAEoB,KAAK,EAC3BpB,EAAE,aAAa,EAAEoB,KAAK,EACtB,MACA,QACApB,EAAE,kBAAkB,EAAE4D,KAAK,EAC3B5D,EAAE,kBAAkB,EAAE4D,KAAK,CAE5B,CAEAvC,YAAYrB,EAAE8B,IAAI,CAAC,EACnBC,eAAe/B,EAAE8B,IAAI,CAAC,EAIU,KAA7B9B,EAAE,eAAe,EAAEG,IAAI,GACzBH,EAAE,kBAAkB,EAAEsE,KAAK,cAAgBtE,EAAE8B,IAAI,EAAEX,KAAK,iBAAiB,EAAEc,KAAM,CAAC,CAIpF,CAAC,EAEDjC,EAAE,kBAAkB,EAAE4B,GAAG,SAAU,WAElC,OAAO5B,EAAE,iBAAiB,EAAEG,IAAI,GAC/B,IAAK,MACL,IAAK,SACL,IAAK,gBACJ,MACD,QACC,IAAIqE,EAAa,CAAA,EAMjB,GALAxE,EAAE,4BAA4B,EAAEC,KAAK,SAASC,EAAOgC,GACjC,KAAhBlC,EAAEkC,CAAE,EAAE/B,IAAI,IACZqE,EAAa,CAAA,EAEf,CAAC,EACGA,EAIL,MAFE,OADA1B,MAAM,2BAA2B,EAC1B,CAAA,CAGV,CACA,MAAO,CAAA,CACR,CAAC,EAED9C,EAAE,iBAAiB,EAAEyE,QAAQ,QAAQ,CAEtC,CAAC"}