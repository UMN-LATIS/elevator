{"version":3,"sources":["groupCreation.js"],"names":["updateHints","targetElement","$","remove","hints","val","Object","keys","length","source","html","template","Handlebars","compile","sourceObject","hintLabel","before","on","last","this","updateHelptext","text","helpText","buildAutocomplete","each","index","el","autocomplete","request","response","post","basePath","groupType","groupValue","term","data","jsonObject","parseJSON","e","alert","success","matches","value","username","emplid","name","email","completionId","messages","noResults","results","search","event","ui","show","hide","_renderItem","ul","item","base_url","appendTo","loadValues","groupArray","addValue","groupName","userCache","removeValue","find","document","closest","ready","existingGroups","attr","removeAttr","haveValues","trigger"],"mappings":"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","file":"groupCreation.min.js","sourcesContent":["\n\nvar loadValues = function(groupArray) {\n\n\t$.each(groupArray, function(index, val) {\n\t\taddValue(val);\n\t});\n\n};\n\nvar addValue = function(value) {\n\n\tvar source   = $(\"#group-value\").html();\n\tvar template = Handlebars.compile(source);\n\n\tvar sourceObject = {};\n\tsourceObject.groupValue = value;\n\tif($(\"#inputGroupType\").val() == \"User\") {\n\t\tsourceObject.groupName = userCache[value];\n\t}\n\telse {\n\t\tsourceObject.groupName = null;\n\t}\n\n\tvar html = template(sourceObject);\n\t$(\"#addAnotherValue\").before(html);\n\tbuildAutocomplete();\n};\n\n\nvar removeValue = function(targetElement) {\n\t$(targetElement).find(\"input\").val(\"\");\n\t$(targetElement).hide();\n\n};\n\n\n$(document).on(\"click\", \".removeValueButton\", function() {\n\n\tremoveValue($(this).closest(\".groupValueGroup\"));\n\n});\n\n$(document).ready(function() {\n\n\n\tloadValues(existingGroups);\n\taddValue(\"\");\n\n\t$(\"#addAnotherValue\").on(\"click\", function() {\n\t\taddValue(\"\");\n\t});\n\n\n\n\n\tbuildAutocomplete();\n\t$(\"#inputGroupType\").on(\"change\", function() {\n\n\n\t\tif($(this).val() === \"\") {\n\t\t\t$(\"#submitButton\").attr(\"disabled\",true);\n\t\t}\n\t\telse {\n\t\t\t$(\"#submitButton\").removeAttr(\"disabled\");\n\t\t}\n\n\n\n\n\t\tswitch($(this).val()) {\n\t\t\tcase \"\":\n\t\t\tcase \"All\":\n\t\t\tcase \"Authed\":\n\t\t\tcase \"Authed_remote\":\n\t\t\t$(\".groupValueGroup\").hide();\n\t\t\t$(\"#groupLabelGroup\").hide();\n\t\t\t$(\"#courseList\").hide();\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t$(\".groupValueGroup\").show();\n\t\t\t$(\"#groupLabelGroup\").show();\n\t\t\tbreak;\n\t\t}\n\n\t\tupdateHints($(this));\n\t\tupdateHelptext($(this));\n\n\t\t\n\n\t\tif($(\"#inputGroupId\").val() === \"\") {\n\t\t\t$(\"#inputGroupLabel\").attr(\"placeholder\", ($(this).find(\"option:selected\").text()));\n\t\t}\n\n\n\t});\n\n\t$(\"#createGroupForm\").on(\"submit\", function() {\n\n\t\tswitch($(\"#inputGroupType\").val()) {\n\t\t\tcase \"All\":\n\t\t\tcase \"Authed\":\n\t\t\tcase \"Authed_remote\":\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tvar haveValues = false;\n\t\t\t\t$('input[name=\"groupValue[]\"]').each(function(index, el) {\n\t\t\t\t\tif($(el).val() !== \"\")\t{\n\t\t\t\t\t\thaveValues = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif(!haveValues) {\n\t\t\t\t\talert(\"A group value is required\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\treturn true;\n\t});\n\n\t$(\"#inputGroupType\").trigger(\"change\");\n\n});\n\nfunction updateHints(targetElement) {\n\n\t$(\".hintSelectorGroup\").remove();\n\tif(hints[targetElement.val()] && Object.keys(hints[targetElement.val()]).length >0) {\t\n\t\n\t\tvar source   = $(\"#hint-selector\").html();\n\t\tvar template = Handlebars.compile(source);\n\n\t\tvar sourceObject = {};\n\t\tsourceObject.hintLabel = targetElement.val();\n\t\tsourceObject.hints = hints[targetElement.val()];\n\t\tvar html = template(sourceObject);\n\n\t\t$(\"#groupLabelGroup\").before(html);\n\t\t$(\".hintSelector\").on(\"change\", function() {\n\t\t\t$(\".inputGroupValue\").last().val($(this).val());\n\t\t});\n\t}\n}\nfunction updateHelptext(targetElement) {\n\t$(\"#helpText\").text(\"\");\n\tif(helpText[targetElement.val()] && Object.keys(helpText[targetElement.val()]).length >0) {\t\n\t\t$(\"#helpText\").text(helpText[targetElement.val()]);\n\t}\n}\n\nfunction buildAutocomplete() {\n\tvar source   = $(\"#person-autocompleter-template\").html();\n\tvar template = Handlebars.compile(source);\n\n\n\t$(\".inputGroupValue\").each(function(index, el) {\n\t\t$(el).autocomplete({\n\n\t\t\tsource: function(request, response) {\n\t\t\t\t$.post( basePath + \"permissions/userAutocompleter/\", {groupType: $(\"#inputGroupType\").val(), groupValue: request.term}, function( data ) {\n\t\t\t\t\ttry{\n\t\t\t\t\t\tjsonObject = $.parseJSON(data);\n\t\t\t\t\t}\n\t\t\t\t\tcatch(e){\n\t\t\t\t\t\talert(e + \" \" + data);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(jsonObject.success === true) {\n\t\t\t\t\t\t$.each(jsonObject.matches, function(index, value) {\n\n\t\t\t\t\t\t\tvalue.username = value.username;\n\t\t\t\t\t\t\tvalue.emplid = value.emplid;\n\t\t\t\t\t\t\tvalue.name = value.name;\n\t\t\t\t\t\t\tvalue.email = value.email;\n\t\t\t\t\t\t\tif(value.completionId) {\n\t\t\t\t\t\t\t\tvalue.value = value.completionId;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tvalue.value = value.username;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tjsonObject.matches[index] = value;\n\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresponse(jsonObject.matches);\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t\t},\n\t\t\tmessages: {\n\t\t\t\tnoResults: '',\n\t\t\t\tresults: function() {}\n\t\t\t},\n\t\t\tsearch: function(event, ui) {\n\t\t\t\t$('.spinner').show();\n\t\t\t},\n\t\t\tresponse: function(event, ui) {\n\t\t\t\t$('.spinner').hide();\n\t\t\t}\n\t\t}).data(\"ui-autocomplete\")._renderItem = function( ul, item ) {\n\t\t\titem.base_url = basePath;\n\t\t\tvar html = template(item);\n\t\t\treturn $(html).appendTo(ul);\n\t\t};\n\n\t\t});\n}\n"]}