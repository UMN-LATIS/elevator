function loadEmbedViewPointer(){targetObjectId=$("#embedView").data("objectid");var e=$(document).find('[data-fileobjectid="'+targetObjectId+'"]');e.length>0||(e=$(document).find('[data-objectid="'+targetObjectId+'"]').find(".loadView")),$(e).trigger("click")}$(document).on("ready",function(){$.fullscreen.isNativelySupported()||$("head").append("<style> .canFullscreen { display: none;</style>"),$(".textareaView li div").expander({slicePoint:400}),$("#mapModal").on("shown.bs.modal",function(e){var t=$(e.relatedTarget).data("latitude"),a=$(e.relatedTarget).data("longitude"),o=$(e.relatedTarget).html();$("#mapModalLabel").html(o),$("#mapModalContainer").goMap({mapTypeControl:!0,maptype:"ROADMAP",mapTypeControlOptions:{position:"TOP_RIGHT",style:"DROPDOWN_MENU"}}),$.goMap.getMarkerCount()>0&&$.goMap.clearMarkers(),$.goMap.setMap({latitude:t,longitude:a}),$("#mapModalContainer").goMap();$.goMap.createMarker({latitude:t,longitude:a,draggable:!1});return $.goMap.fitBounds(),$("#mapNearby").attr("href",basePath+"search/nearbyAssets/"+t+"/"+a),!1}),$(document).on("click",".exifToggle",function(e){e.preventDefault();var t=$(e.target).data("fileobject");$.getJSON(basePath+"fileManager/getMetadataForObject/"+t,{},function(e,t){if(e.exif){var a=$("<ul />");$.each(e.exif,function(e,t){a.append("<li>"+e+" : "+t+"</li>")}),bootbox.dialog({title:"EXIF Data",message:a.html(),buttons:{success:{label:"OK",className:"btn-primary"}}})}})}),$(document).on("click",".relatedThumbContainer",function(e){e.stopPropagation();var t=$(this).data("objectid");window.location.hash=t}),$(document).on("hide.bs.collapse",".relatedListToggle",function(e){$(this).find(".expandRelated").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down")}),$(document).on("show.bs.collapse",".relatedListToggle",function(e){e.stopPropagation();var t=$(this).data("objectid"),a=this;$(this).find(".expandRelated").removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up"),$(a).parents(".relatedAssetContainer").length>0?parentObjectId=$(a).parents(".relatedAssetContainer").eq(0).data("objectid"):parentObjectId=$(this).closest(".objectIdHost").data("objectid"),$.get(basePath+"asset/viewAssetMetadataOnly/"+parentObjectId+"/"+t,function(e){$(a).find(".relatedAssetContents").html(e),lazyElements=$(a).find(".relatedAssetContents").find(".lazy"),lazyInstance.addItems(lazyElements),lazyInstance.update()})}),$("#relatedAccordian").on("hide.bs.collapse",function(e){$(this).find(".expandRelated").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down")}),$("#relatedAccordian").on("show.bs.collapse",function(e){$(this).find(".expandRelated").removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up");var t={searchText:objectId};$.post(basePath+"search/searchResults/",{suppressRecent:!0,searchRelated:!0,searchQuery:JSON.stringify(t)},function(e){try{jsonObject=$.parseJSON(e)}catch(t){return void alert(t+" "+e)}if(jsonObject.success===!0){$("#relatedAssets").empty();var a=$("#result-template").html(),o=Handlebars.compile(a),n=!1,d=0;$.each(jsonObject.matches,function(e,t){if(t.objectId!=objectId){t.base_url=basePath;var a=o(t);$("#relatedAssets").append(a),n=!0,d++}}),n||$("#relatedAssets").append("<p>No Related Assets Found</p>")}})});var e=$.cookie("lastSearch");if($.removeCookie("lastSearch",{path:"/"}),$("body").on("click",function(e){$('[data-toggle="popover"]').each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$(".popover").has(e.target).length||$(this).popover("hide")})}),window.location.hash){nestedObjectId=window.location.hash.replace("#","");var t=$(document).find('[data-fileobjectid="'+nestedObjectId+'"]');t.length>0||(t=$(document).find('[data-objectid="'+nestedObjectId+'"]').find(".loadView")),t.length>0?$(t).trigger("click"):loadEmbedViewPointer()}else e&&$(".rightColumn").find(".loadView").length>1?$.post(basePath+"search/getHighlight",{searchId:e,objectId:objectId},function(e,t,a){var o=$.parseJSON(e),n=null,d=!1;$.each(o,function(e,t){return t!=$("#embedView").data("objectid")&&(n=$(document).find('[data-fileobjectid="'+t+'"]'),n.length>0||(n=$(document).find('[data-objectid="'+t+'"]').find(".loadView")),n.length>0)?($(n).trigger("click"),d=!0,!1):void 0}),d||loadEmbedViewPointer()}):loadEmbedViewPointer()}),$(document).on("mouseover",".relatedThumbToggle",function(){var e=$(this).find(".relatedThumbContainerImage");$(e).data("oldURL",$(e).attr("src"));var t=$(e).data("at2x");$(e).attr("src",t)}),$(document).on("mouseout",".relatedThumbToggle",function(){var e=$(this).find(".relatedThumbContainerImage"),t=$(e).data("oldURL");$(e).attr("src",t)}),$(document).on("click",".embedControl",function(){$(this).select()}),$(document).on("click",".showDetails",function(){$(this).parent().parent().children(".assetDetails").toggle("fast")}),$(document).on("click",".loadView",function(e){void 0===e.originalEvent&&e.preventDefault(),fileObjectId=$(this).data("fileobjectid");var t=$(this).closest("[data-objectid]"),a=!1;t.length>0&&!t.hasClass("objectIdHost")?(parentObject=t.data("objectid"),a=!0):parentObject=$(this).closest(".objectIdHost").data("objectid"),$.get(basePath+"asset/getEmbed/"+fileObjectId+"/"+objectId,function(e){$("#embedView").html(e);var t=$(window).scrollTop(),o=$("#embedView").offset().top+400;t>o&&$("html, body").animate({scrollTop:0},"fast"),a&&$.get(basePath+"asset/viewAssetMetadataOnly/"+objectId+"/"+parentObject,function(e){$("#embedView").append(e)}),lazyInstance.update(),"function"==typeof loadedCallback&&loadedCallback()})});
$(document).ready(function(){$("#addToDrawer").on("submit",function(e){e.preventDefault();var r=$(this).serializeArray();"undefined"!=typeof excerptId&&r.push({name:"excerptId",value:excerptId}),"undefined"!=typeof objectId&&r.push({name:"objectId",value:objectId}),"undefined"!=typeof cachedResults&&r.push({name:"objectArray",value:JSON.stringify(cachedResults.searchResults)});var a=$(this).attr("action");$.ajax({url:a,type:"POST",data:r,success:function(e,r,a){$("#drawerModal").modal("toggle")},error:function(e,r,a){console.log("Error adding Drawer")}})}),$("#addNewDrawer").on("submit",function(e){var r=$(this).serializeArray(),a=$(this).attr("action");$.ajax({url:a,type:"POST",data:r,success:function(e,r,a){var t=$.parseJSON(e),d=parseInt(t.drawerId,10);$("#drawerList").append("<option value='"+d+"'>"+t.drawerTitle+"</option>"),$("#drawerList").val(d),$(".drawerAddedSuccess").fadeIn("400"),window.setTimeout(function(){$(".drawerAddedSuccess").fadeOut("400")},2e3)},error:function(e,r,a){console.log("Error adding Drawer")}}),e.preventDefault()})});
//# sourceMappingURL=assetMaster.min.js.map
