{"version":3,"sources":["typeahead.jquery.js"],"names":["root","factory","define","amd","a0","exports","module","require","jQuery","this","$","_","isMsie","test","navigator","userAgent","match","isBlankString","str","escapeRegExChars","replace","isString","obj","isNumber","isArray","isFunction","isObject","isPlainObject","isUndefined","isElement","nodeType","isJQuery","toStr","s","bind","proxy","each","collection","cb","reverseArgs","index","value","map","filter","grep","every","result","key","val","call","some","mixin","extend","identity","x","clone","getIdGenerator","counter","templatify","template","String","defer","fn","setTimeout","debounce","func","wait","immediate","timeout","later","callNow","context","args","arguments","apply","clearTimeout","throttle","previous","Date","now","remaining","stringify","JSON","noop","WWW","build","o","www","classes","defaultClassNames","css","buildCss","html","buildHtml","selectors","buildSelectors","c","wrapper","menu","v","k","position","display","hint","top","left","borderColor","boxShadow","opacity","input","verticalAlign","backgroundColor","inputWithNoHint","zIndex","ltr","right","rtl","backgroundImage","dataset","suggestion","selectable","empty","open","cursor","highlight","EventBus","el","error","$el","namespace","deprecationMap","render","cursorchange","select","autocomplete","prototype","_trigger","type","$e","Event","unshift","trigger","before","slice","isDefaultPrevented","deprecatedType","EventEmitter","on","method","types","split","splitter","bindContext","_callbacks","shift","sync","async","push","onAsync","onSync","off","callbacks","syncFlush","asyncFlush","getFlush","concat","nextTick","flush","cancelled","i","len","length","getNextTick","nextTickFn","window","setImmediate","doc","getRegex","patterns","caseSensitive","wordsOnly","regexStr","escapedPatterns","join","RegExp","defaults","node","pattern","tagName","className","hightlightTextNode","textNode","patternNode","wrapperNode","regex","exec","data","createElement","splitText","appendChild","cloneNode","parentNode","replaceChild","traverse","childNode","TEXT_NODE_TYPE","childNodes","document","Input","$hint","$input","query","queryWhenFocused","hasFocus","$overflowHelper","buildOverflowHelper","_checkLanguageDirection","setHint","getHint","clearHint","clearHintIfInvalid","visibility","whiteSpace","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","wordSpacing","letterSpacing","textIndent","textRendering","textTransform","insertAfter","areQueriesEquivalent","a","b","normalizeQuery","withModifier","altKey","ctrlKey","metaKey","shiftKey","specialKeyCodeMap",9,27,37,39,13,38,40,"_onBlur","resetInputValue","_onFocus","_onKeydown","keyName","which","keyCode","_managePreventDefault","_shouldTrigger","_onInput","_setQuery","getInputValue","preventDefault","dir","toLowerCase","attr","silent","areEquivalent","hasDifferentWhitespace","onBlur","onFocus","onKeydown","onInput","that","focus","blur","getLangDir","getQuery","setQuery","setInputValue","hasQueryChangedSinceLastFocus","valIsPrefixOfHint","isValid","indexOf","hasOverflow","is","constraint","width","text","isCursorAtEnd","valueLength","selectionStart","range","selection","createRange","moveStart","destroy","remove","Dataset","templates","notFound","source","name","isValidName","nameGenerator","limit","displayFn","getDisplayFn","displayKey","getTemplates","__ttAdapter","_resetLastSuggestion","addClass","suggestionTemplate","pending","header","footer","keys","extractData","_overwrite","suggestions","_renderSuggestions","_renderPending","_renderNotFound","_empty","_append","$lastSuggestion","_appendSuggestions","$fragment","_getSuggestionsFragment","children","last","prepend","_getHeader","append","_getFooter","after","fragment","createDocumentFragment","_injectQuery","_query","update","syncCalled","rendered","canceled","cancel","clear","isEmpty","Menu","initializeDataset","oDataset","$node","find","first","appendTo","datasets","_onSelectableClick","currentTarget","_onRendered","toggleClass","_allDatasetsEmpty","_onCleared","_propagate","isDatasetEmpty","_getSelectables","_removeCursor","$selectable","getActiveSelectable","removeClass","_ensureVisible","elTop","elBottom","nodeScrollTop","nodeHeight","outerHeight","scrollTop","height","parseInt","onSelectableClick","isOpen","hasClass","close","setLanguageDirection","selectableRelativeToCursor","delta","$selectables","$oldCursor","oldIndex","newIndex","eq","setCursor","getSelectableData","getTopSelectable","updateDataset","isValidUpdate","clearDataset","destroyDataset","DefaultMenu","_show","_hide","hide","Typeahead","onFocused","onBlurred","onEnterKeyed","onTabKeyed","onEscKeyed","onUpKeyed","onDownKeyed","onLeftKeyed","onRightKeyed","onQueryChanged","onWhitespaceChanged","eventBus","minLength","enabled","active","activate","_hacks","_onSelectableClicked","_onAsyncRequested","_onAsyncCanceled","_onAsyncReceived","_onDatasetRendered","_onDatasetCleared","_onLangDirChanged","ctx","methods","$menu","isActive","hasActive","activeElement","has","stopImmediatePropagation","_updateHint","_onFocused","_minLengthMet","_onBlurred","_onEnterKeyed","_onTabKeyed","_onEscKeyed","_onUpKeyed","moveCursor","_onDownKeyed","_onLeftKeyed","_onRightKeyed","_onQueryChanged","e","_onWhitespaceChanged","_openIfActive","escapedQuery","frontMatchRegEx","isEnabled","enable","disable","deactivate","setVal","getVal","$candidate","payload","cancelMove","ttEach","$els","typeahead","buildHintFromInput","removeData","getBackgroundStyles","prop","removeAttr","spellcheck","tabindex","prepInput","attrs","style","backgroundAttachment","backgroundClip","backgroundOrigin","backgroundPosition","backgroundRepeat","backgroundSize","revert","$wrapper","parent","detach","$elOrNull","old","initialize","attach","defaultHint","defaultMenu","MenuConstructor","d","wrap","classNames","t","success","newVal","noConflict"],"mappings":"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","file":"typeahead.jquery.min.js","sourcesContent":["/*!\n * typeahead.js 0.11.1\n * https://github.com/twitter/typeahead.js\n * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT\n */\n\n(function(root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(\"typeahead.js\", [ \"jquery\" ], function(a0) {\n            return factory(a0);\n        });\n    } else if (typeof exports === \"object\") {\n        module.exports = factory(require(\"jquery\"));\n    } else {\n        factory(jQuery);\n    }\n})(this, function($) {\n    var _ = function() {\n        \"use strict\";\n        return {\n            isMsie: function() {\n                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\\d+(.\\d+)?)/i)[2] : false;\n            },\n            isBlankString: function(str) {\n                return !str || /^\\s*$/.test(str);\n            },\n            escapeRegExChars: function(str) {\n                return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n            },\n            isString: function(obj) {\n                return typeof obj === \"string\";\n            },\n            isNumber: function(obj) {\n                return typeof obj === \"number\";\n            },\n            isArray: $.isArray,\n            isFunction: $.isFunction,\n            isObject: $.isPlainObject,\n            isUndefined: function(obj) {\n                return typeof obj === \"undefined\";\n            },\n            isElement: function(obj) {\n                return !!(obj && obj.nodeType === 1);\n            },\n            isJQuery: function(obj) {\n                return obj instanceof $;\n            },\n            toStr: function toStr(s) {\n                return _.isUndefined(s) || s === null ? \"\" : s + \"\";\n            },\n            bind: $.proxy,\n            each: function(collection, cb) {\n                $.each(collection, reverseArgs);\n                function reverseArgs(index, value) {\n                    return cb(value, index);\n                }\n            },\n            map: $.map,\n            filter: $.grep,\n            every: function(obj, test) {\n                var result = true;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (!(result = test.call(null, val, key, obj))) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            some: function(obj, test) {\n                var result = false;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (result = test.call(null, val, key, obj)) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            mixin: $.extend,\n            identity: function(x) {\n                return x;\n            },\n            clone: function(obj) {\n                return $.extend(true, {}, obj);\n            },\n            getIdGenerator: function() {\n                var counter = 0;\n                return function() {\n                    return counter++;\n                };\n            },\n            templatify: function templatify(obj) {\n                return $.isFunction(obj) ? obj : template;\n                function template() {\n                    return String(obj);\n                }\n            },\n            defer: function(fn) {\n                setTimeout(fn, 0);\n            },\n            debounce: function(func, wait, immediate) {\n                var timeout, result;\n                return function() {\n                    var context = this, args = arguments, later, callNow;\n                    later = function() {\n                        timeout = null;\n                        if (!immediate) {\n                            result = func.apply(context, args);\n                        }\n                    };\n                    callNow = immediate && !timeout;\n                    clearTimeout(timeout);\n                    timeout = setTimeout(later, wait);\n                    if (callNow) {\n                        result = func.apply(context, args);\n                    }\n                    return result;\n                };\n            },\n            throttle: function(func, wait) {\n                var context, args, timeout, result, previous, later;\n                previous = 0;\n                later = function() {\n                    previous = new Date();\n                    timeout = null;\n                    result = func.apply(context, args);\n                };\n                return function() {\n                    var now = new Date(), remaining = wait - (now - previous);\n                    context = this;\n                    args = arguments;\n                    if (remaining <= 0) {\n                        clearTimeout(timeout);\n                        timeout = null;\n                        previous = now;\n                        result = func.apply(context, args);\n                    } else if (!timeout) {\n                        timeout = setTimeout(later, remaining);\n                    }\n                    return result;\n                };\n            },\n            stringify: function(val) {\n                return _.isString(val) ? val : JSON.stringify(val);\n            },\n            noop: function() {}\n        };\n    }();\n    var WWW = function() {\n        \"use strict\";\n        var defaultClassNames = {\n            wrapper: \"twitter-typeahead\",\n            input: \"tt-input\",\n            hint: \"tt-hint\",\n            menu: \"tt-menu\",\n            dataset: \"tt-dataset\",\n            suggestion: \"tt-suggestion\",\n            selectable: \"tt-selectable\",\n            empty: \"tt-empty\",\n            open: \"tt-open\",\n            cursor: \"tt-cursor\",\n            highlight: \"tt-highlight\"\n        };\n        return build;\n        function build(o) {\n            var www, classes;\n            classes = _.mixin({}, defaultClassNames, o);\n            www = {\n                css: buildCss(),\n                classes: classes,\n                html: buildHtml(classes),\n                selectors: buildSelectors(classes)\n            };\n            return {\n                css: www.css,\n                html: www.html,\n                classes: www.classes,\n                selectors: www.selectors,\n                mixin: function(o) {\n                    _.mixin(o, www);\n                }\n            };\n        }\n        function buildHtml(c) {\n            return {\n                wrapper: '<span class=\"' + c.wrapper + '\"></span>',\n                menu: '<div class=\"' + c.menu + '\"></div>'\n            };\n        }\n        function buildSelectors(classes) {\n            var selectors = {};\n            _.each(classes, function(v, k) {\n                selectors[k] = \".\" + v;\n            });\n            return selectors;\n        }\n        function buildCss() {\n            var css = {\n                wrapper: {\n                    position: \"relative\",\n                    display: \"inline-block\"\n                },\n                hint: {\n                    position: \"absolute\",\n                    top: \"0\",\n                    left: \"0\",\n                    borderColor: \"transparent\",\n                    boxShadow: \"none\",\n                    opacity: \"1\"\n                },\n                input: {\n                    position: \"relative\",\n                    verticalAlign: \"top\",\n                    backgroundColor: \"transparent\"\n                },\n                inputWithNoHint: {\n                    position: \"relative\",\n                    verticalAlign: \"top\"\n                },\n                menu: {\n                    position: \"absolute\",\n                    top: \"100%\",\n                    left: \"0\",\n                    zIndex: \"100\",\n                    display: \"none\"\n                },\n                ltr: {\n                    left: \"0\",\n                    right: \"auto\"\n                },\n                rtl: {\n                    left: \"auto\",\n                    right: \" 0\"\n                }\n            };\n            if (_.isMsie()) {\n                _.mixin(css.input, {\n                    backgroundImage: \"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)\"\n                });\n            }\n            return css;\n        }\n    }();\n    var EventBus = function() {\n        \"use strict\";\n        var namespace, deprecationMap;\n        namespace = \"typeahead:\";\n        deprecationMap = {\n            render: \"rendered\",\n            cursorchange: \"cursorchanged\",\n            select: \"selected\",\n            autocomplete: \"autocompleted\"\n        };\n        function EventBus(o) {\n            if (!o || !o.el) {\n                $.error(\"EventBus initialized without el\");\n            }\n            this.$el = $(o.el);\n        }\n        _.mixin(EventBus.prototype, {\n            _trigger: function(type, args) {\n                var $e;\n                $e = $.Event(namespace + type);\n                (args = args || []).unshift($e);\n                this.$el.trigger.apply(this.$el, args);\n                return $e;\n            },\n            before: function(type) {\n                var args, $e;\n                args = [].slice.call(arguments, 1);\n                $e = this._trigger(\"before\" + type, args);\n                return $e.isDefaultPrevented();\n            },\n            trigger: function(type) {\n                var deprecatedType;\n                this._trigger(type, [].slice.call(arguments, 1));\n                if (deprecatedType = deprecationMap[type]) {\n                    this._trigger(deprecatedType, [].slice.call(arguments, 1));\n                }\n            }\n        });\n        return EventBus;\n    }();\n    var EventEmitter = function() {\n        \"use strict\";\n        var splitter = /\\s+/, nextTick = getNextTick();\n        return {\n            onSync: onSync,\n            onAsync: onAsync,\n            off: off,\n            trigger: trigger\n        };\n        function on(method, types, cb, context) {\n            var type;\n            if (!cb) {\n                return this;\n            }\n            types = types.split(splitter);\n            cb = context ? bindContext(cb, context) : cb;\n            this._callbacks = this._callbacks || {};\n            while (type = types.shift()) {\n                this._callbacks[type] = this._callbacks[type] || {\n                    sync: [],\n                    async: []\n                };\n                this._callbacks[type][method].push(cb);\n            }\n            return this;\n        }\n        function onAsync(types, cb, context) {\n            return on.call(this, \"async\", types, cb, context);\n        }\n        function onSync(types, cb, context) {\n            return on.call(this, \"sync\", types, cb, context);\n        }\n        function off(types) {\n            var type;\n            if (!this._callbacks) {\n                return this;\n            }\n            types = types.split(splitter);\n            while (type = types.shift()) {\n                delete this._callbacks[type];\n            }\n            return this;\n        }\n        function trigger(types) {\n            var type, callbacks, args, syncFlush, asyncFlush;\n            if (!this._callbacks) {\n                return this;\n            }\n            types = types.split(splitter);\n            args = [].slice.call(arguments, 1);\n            while ((type = types.shift()) && (callbacks = this._callbacks[type])) {\n                syncFlush = getFlush(callbacks.sync, this, [ type ].concat(args));\n                asyncFlush = getFlush(callbacks.async, this, [ type ].concat(args));\n                syncFlush() && nextTick(asyncFlush);\n            }\n            return this;\n        }\n        function getFlush(callbacks, context, args) {\n            return flush;\n            function flush() {\n                var cancelled;\n                for (var i = 0, len = callbacks.length; !cancelled && i < len; i += 1) {\n                    cancelled = callbacks[i].apply(context, args) === false;\n                }\n                return !cancelled;\n            }\n        }\n        function getNextTick() {\n            var nextTickFn;\n            if (window.setImmediate) {\n                nextTickFn = function nextTickSetImmediate(fn) {\n                    setImmediate(function() {\n                        fn();\n                    });\n                };\n            } else {\n                nextTickFn = function nextTickSetTimeout(fn) {\n                    setTimeout(function() {\n                        fn();\n                    }, 0);\n                };\n            }\n            return nextTickFn;\n        }\n        function bindContext(fn, context) {\n            return fn.bind ? fn.bind(context) : function() {\n                fn.apply(context, [].slice.call(arguments, 0));\n            };\n        }\n    }();\n    var highlight = function(doc) {\n        \"use strict\";\n        var defaults = {\n            node: null,\n            pattern: null,\n            tagName: \"strong\",\n            className: null,\n            wordsOnly: false,\n            caseSensitive: false\n        };\n        return function hightlight(o) {\n            var regex;\n            o = _.mixin({}, defaults, o);\n            if (!o.node || !o.pattern) {\n                return;\n            }\n            o.pattern = _.isArray(o.pattern) ? o.pattern : [ o.pattern ];\n            regex = getRegex(o.pattern, o.caseSensitive, o.wordsOnly);\n            traverse(o.node, hightlightTextNode);\n            function hightlightTextNode(textNode) {\n                var match, patternNode, wrapperNode;\n                if (match = regex.exec(textNode.data)) {\n                    wrapperNode = doc.createElement(o.tagName);\n                    o.className && (wrapperNode.className = o.className);\n                    patternNode = textNode.splitText(match.index);\n                    patternNode.splitText(match[0].length);\n                    wrapperNode.appendChild(patternNode.cloneNode(true));\n                    textNode.parentNode.replaceChild(wrapperNode, patternNode);\n                }\n                return !!match;\n            }\n            function traverse(el, hightlightTextNode) {\n                var childNode, TEXT_NODE_TYPE = 3;\n                for (var i = 0; i < el.childNodes.length; i++) {\n                    childNode = el.childNodes[i];\n                    if (childNode.nodeType === TEXT_NODE_TYPE) {\n                        i += hightlightTextNode(childNode) ? 1 : 0;\n                    } else {\n                        traverse(childNode, hightlightTextNode);\n                    }\n                }\n            }\n        };\n        function getRegex(patterns, caseSensitive, wordsOnly) {\n            var escapedPatterns = [], regexStr;\n            for (var i = 0, len = patterns.length; i < len; i++) {\n                escapedPatterns.push(_.escapeRegExChars(patterns[i]));\n            }\n            regexStr = wordsOnly ? \"\\\\b(\" + escapedPatterns.join(\"|\") + \")\\\\b\" : \"(\" + escapedPatterns.join(\"|\") + \")\";\n            return caseSensitive ? new RegExp(regexStr) : new RegExp(regexStr, \"i\");\n        }\n    }(window.document);\n    var Input = function() {\n        \"use strict\";\n        var specialKeyCodeMap;\n        specialKeyCodeMap = {\n            9: \"tab\",\n            27: \"esc\",\n            37: \"left\",\n            39: \"right\",\n            13: \"enter\",\n            38: \"up\",\n            40: \"down\"\n        };\n        function Input(o, www) {\n            o = o || {};\n            if (!o.input) {\n                $.error(\"input is missing\");\n            }\n            www.mixin(this);\n            this.$hint = $(o.hint);\n            this.$input = $(o.input);\n            this.query = this.$input.val();\n            this.queryWhenFocused = this.hasFocus() ? this.query : null;\n            this.$overflowHelper = buildOverflowHelper(this.$input);\n            this._checkLanguageDirection();\n            if (this.$hint.length === 0) {\n                this.setHint = this.getHint = this.clearHint = this.clearHintIfInvalid = _.noop;\n            }\n        }\n        Input.normalizeQuery = function(str) {\n            return _.toStr(str).replace(/^\\s*/g, \"\").replace(/\\s{2,}/g, \" \");\n        };\n        _.mixin(Input.prototype, EventEmitter, {\n            _onBlur: function onBlur() {\n                this.resetInputValue();\n                this.trigger(\"blurred\");\n            },\n            _onFocus: function onFocus() {\n                this.queryWhenFocused = this.query;\n                this.trigger(\"focused\");\n            },\n            _onKeydown: function onKeydown($e) {\n                var keyName = specialKeyCodeMap[$e.which || $e.keyCode];\n                this._managePreventDefault(keyName, $e);\n                if (keyName && this._shouldTrigger(keyName, $e)) {\n                    this.trigger(keyName + \"Keyed\", $e);\n                }\n            },\n            _onInput: function onInput() {\n                this._setQuery(this.getInputValue());\n                this.clearHintIfInvalid();\n                this._checkLanguageDirection();\n            },\n            _managePreventDefault: function managePreventDefault(keyName, $e) {\n                var preventDefault;\n                switch (keyName) {\n                  case \"up\":\n                  case \"down\":\n                    preventDefault = !withModifier($e);\n                    break;\n\n                  default:\n                    preventDefault = false;\n                }\n                preventDefault && $e.preventDefault();\n            },\n            _shouldTrigger: function shouldTrigger(keyName, $e) {\n                var trigger;\n                switch (keyName) {\n                  case \"tab\":\n                    trigger = !withModifier($e);\n                    break;\n\n                  default:\n                    trigger = true;\n                }\n                return trigger;\n            },\n            _checkLanguageDirection: function checkLanguageDirection() {\n                var dir = (this.$input.css(\"direction\") || \"ltr\").toLowerCase();\n                if (this.dir !== dir) {\n                    this.dir = dir;\n                    this.$hint.attr(\"dir\", dir);\n                    this.trigger(\"langDirChanged\", dir);\n                }\n            },\n            _setQuery: function setQuery(val, silent) {\n                var areEquivalent, hasDifferentWhitespace;\n                areEquivalent = areQueriesEquivalent(val, this.query);\n                hasDifferentWhitespace = areEquivalent ? this.query.length !== val.length : false;\n                this.query = val;\n                if (!silent && !areEquivalent) {\n                    this.trigger(\"queryChanged\", this.query);\n                } else if (!silent && hasDifferentWhitespace) {\n                    this.trigger(\"whitespaceChanged\", this.query);\n                }\n            },\n            bind: function() {\n                var that = this, onBlur, onFocus, onKeydown, onInput;\n                onBlur = _.bind(this._onBlur, this);\n                onFocus = _.bind(this._onFocus, this);\n                onKeydown = _.bind(this._onKeydown, this);\n                onInput = _.bind(this._onInput, this);\n                this.$input.on(\"blur.tt\", onBlur).on(\"focus.tt\", onFocus).on(\"keydown.tt\", onKeydown);\n                if (!_.isMsie() || _.isMsie() > 9) {\n                    this.$input.on(\"input.tt\", onInput);\n                } else {\n                    this.$input.on(\"keydown.tt keypress.tt cut.tt paste.tt\", function($e) {\n                        if (specialKeyCodeMap[$e.which || $e.keyCode]) {\n                            return;\n                        }\n                        _.defer(_.bind(that._onInput, that, $e));\n                    });\n                }\n                return this;\n            },\n            focus: function focus() {\n                this.$input.focus();\n            },\n            blur: function blur() {\n                this.$input.blur();\n            },\n            getLangDir: function getLangDir() {\n                return this.dir;\n            },\n            getQuery: function getQuery() {\n                return this.query || \"\";\n            },\n            setQuery: function setQuery(val, silent) {\n                this.setInputValue(val);\n                this._setQuery(val, silent);\n            },\n            hasQueryChangedSinceLastFocus: function hasQueryChangedSinceLastFocus() {\n                return this.query !== this.queryWhenFocused;\n            },\n            getInputValue: function getInputValue() {\n                return this.$input.val();\n            },\n            setInputValue: function setInputValue(value) {\n                this.$input.val(value);\n                this.clearHintIfInvalid();\n                this._checkLanguageDirection();\n            },\n            resetInputValue: function resetInputValue() {\n                this.setInputValue(this.query);\n            },\n            getHint: function getHint() {\n                return this.$hint.val();\n            },\n            setHint: function setHint(value) {\n                this.$hint.val(value);\n            },\n            clearHint: function clearHint() {\n                this.setHint(\"\");\n            },\n            clearHintIfInvalid: function clearHintIfInvalid() {\n                var val, hint, valIsPrefixOfHint, isValid;\n                val = this.getInputValue();\n                hint = this.getHint();\n                valIsPrefixOfHint = val !== hint && hint.indexOf(val) === 0;\n                isValid = val !== \"\" && valIsPrefixOfHint && !this.hasOverflow();\n                !isValid && this.clearHint();\n            },\n            hasFocus: function hasFocus() {\n                return this.$input.is(\":focus\");\n            },\n            hasOverflow: function hasOverflow() {\n                var constraint = this.$input.width() - 2;\n                this.$overflowHelper.text(this.getInputValue());\n                return this.$overflowHelper.width() >= constraint;\n            },\n            isCursorAtEnd: function() {\n                var valueLength, selectionStart, range;\n                valueLength = this.$input.val().length;\n                selectionStart = this.$input[0].selectionStart;\n                if (_.isNumber(selectionStart)) {\n                    return selectionStart === valueLength;\n                } else if (document.selection) {\n                    range = document.selection.createRange();\n                    range.moveStart(\"character\", -valueLength);\n                    return valueLength === range.text.length;\n                }\n                return true;\n            },\n            destroy: function destroy() {\n                this.$hint.off(\".tt\");\n                this.$input.off(\".tt\");\n                this.$overflowHelper.remove();\n                this.$hint = this.$input = this.$overflowHelper = $(\"<div>\");\n            }\n        });\n        return Input;\n        function buildOverflowHelper($input) {\n            return $('<pre aria-hidden=\"true\"></pre>').css({\n                position: \"absolute\",\n                visibility: \"hidden\",\n                whiteSpace: \"pre\",\n                fontFamily: $input.css(\"font-family\"),\n                fontSize: $input.css(\"font-size\"),\n                fontStyle: $input.css(\"font-style\"),\n                fontVariant: $input.css(\"font-variant\"),\n                fontWeight: $input.css(\"font-weight\"),\n                wordSpacing: $input.css(\"word-spacing\"),\n                letterSpacing: $input.css(\"letter-spacing\"),\n                textIndent: $input.css(\"text-indent\"),\n                textRendering: $input.css(\"text-rendering\"),\n                textTransform: $input.css(\"text-transform\")\n            }).insertAfter($input);\n        }\n        function areQueriesEquivalent(a, b) {\n            return Input.normalizeQuery(a) === Input.normalizeQuery(b);\n        }\n        function withModifier($e) {\n            return $e.altKey || $e.ctrlKey || $e.metaKey || $e.shiftKey;\n        }\n    }();\n    var Dataset = function() {\n        \"use strict\";\n        var keys, nameGenerator;\n        keys = {\n            val: \"tt-selectable-display\",\n            obj: \"tt-selectable-object\"\n        };\n        nameGenerator = _.getIdGenerator();\n        function Dataset(o, www) {\n            o = o || {};\n            o.templates = o.templates || {};\n            o.templates.notFound = o.templates.notFound || o.templates.empty;\n            if (!o.source) {\n                $.error(\"missing source\");\n            }\n            if (!o.node) {\n                $.error(\"missing node\");\n            }\n            if (o.name && !isValidName(o.name)) {\n                $.error(\"invalid dataset name: \" + o.name);\n            }\n            www.mixin(this);\n            this.highlight = !!o.highlight;\n            this.name = o.name || nameGenerator();\n            this.limit = o.limit || 5;\n            this.displayFn = getDisplayFn(o.display || o.displayKey);\n            this.templates = getTemplates(o.templates, this.displayFn);\n            this.source = o.source.__ttAdapter ? o.source.__ttAdapter() : o.source;\n            this.async = _.isUndefined(o.async) ? this.source.length > 2 : !!o.async;\n            this._resetLastSuggestion();\n            this.$el = $(o.node).addClass(this.classes.dataset).addClass(this.classes.dataset + \"-\" + this.name);\n        }\n        Dataset.extractData = function extractData(el) {\n            var $el = $(el);\n            if ($el.data(keys.obj)) {\n                return {\n                    val: $el.data(keys.val) || \"\",\n                    obj: $el.data(keys.obj) || null\n                };\n            }\n            return null;\n        };\n        _.mixin(Dataset.prototype, EventEmitter, {\n            _overwrite: function overwrite(query, suggestions) {\n                suggestions = suggestions || [];\n                if (suggestions.length) {\n                    this._renderSuggestions(query, suggestions);\n                } else if (this.async && this.templates.pending) {\n                    this._renderPending(query);\n                } else if (!this.async && this.templates.notFound) {\n                    this._renderNotFound(query);\n                } else {\n                    this._empty();\n                }\n                this.trigger(\"rendered\", this.name, suggestions, false);\n            },\n            _append: function append(query, suggestions) {\n                suggestions = suggestions || [];\n                if (suggestions.length && this.$lastSuggestion.length) {\n                    this._appendSuggestions(query, suggestions);\n                } else if (suggestions.length) {\n                    this._renderSuggestions(query, suggestions);\n                } else if (!this.$lastSuggestion.length && this.templates.notFound) {\n                    this._renderNotFound(query);\n                }\n                this.trigger(\"rendered\", this.name, suggestions, true);\n            },\n            _renderSuggestions: function renderSuggestions(query, suggestions) {\n                var $fragment;\n                $fragment = this._getSuggestionsFragment(query, suggestions);\n                this.$lastSuggestion = $fragment.children().last();\n                this.$el.html($fragment).prepend(this._getHeader(query, suggestions)).append(this._getFooter(query, suggestions));\n            },\n            _appendSuggestions: function appendSuggestions(query, suggestions) {\n                var $fragment, $lastSuggestion;\n                $fragment = this._getSuggestionsFragment(query, suggestions);\n                $lastSuggestion = $fragment.children().last();\n                this.$lastSuggestion.after($fragment);\n                this.$lastSuggestion = $lastSuggestion;\n            },\n            _renderPending: function renderPending(query) {\n                var template = this.templates.pending;\n                this._resetLastSuggestion();\n                template && this.$el.html(template({\n                    query: query,\n                    dataset: this.name\n                }));\n            },\n            _renderNotFound: function renderNotFound(query) {\n                var template = this.templates.notFound;\n                this._resetLastSuggestion();\n                template && this.$el.html(template({\n                    query: query,\n                    dataset: this.name\n                }));\n            },\n            _empty: function empty() {\n                this.$el.empty();\n                this._resetLastSuggestion();\n            },\n            _getSuggestionsFragment: function getSuggestionsFragment(query, suggestions) {\n                var that = this, fragment;\n                fragment = document.createDocumentFragment();\n                _.each(suggestions, function getSuggestionNode(suggestion) {\n                    var $el, context;\n                    context = that._injectQuery(query, suggestion);\n                    $el = $(that.templates.suggestion(context)).data(keys.obj, suggestion).data(keys.val, that.displayFn(suggestion)).addClass(that.classes.suggestion + \" \" + that.classes.selectable);\n                    fragment.appendChild($el[0]);\n                });\n                this.highlight && highlight({\n                    className: this.classes.highlight,\n                    node: fragment,\n                    pattern: query\n                });\n                return $(fragment);\n            },\n            _getFooter: function getFooter(query, suggestions) {\n                return this.templates.footer ? this.templates.footer({\n                    query: query,\n                    suggestions: suggestions,\n                    dataset: this.name\n                }) : null;\n            },\n            _getHeader: function getHeader(query, suggestions) {\n                return this.templates.header ? this.templates.header({\n                    query: query,\n                    suggestions: suggestions,\n                    dataset: this.name\n                }) : null;\n            },\n            _resetLastSuggestion: function resetLastSuggestion() {\n                this.$lastSuggestion = $();\n            },\n            _injectQuery: function injectQuery(query, obj) {\n                return _.isObject(obj) ? _.mixin({\n                    _query: query\n                }, obj) : obj;\n            },\n            update: function update(query) {\n                var that = this, canceled = false, syncCalled = false, rendered = 0;\n                this.cancel();\n                this.cancel = function cancel() {\n                    canceled = true;\n                    that.cancel = $.noop;\n                    that.async && that.trigger(\"asyncCanceled\", query);\n                };\n                this.source(query, sync, async);\n                !syncCalled && sync([]);\n                function sync(suggestions) {\n                    if (syncCalled) {\n                        return;\n                    }\n                    syncCalled = true;\n                    suggestions = (suggestions || []).slice(0, that.limit);\n                    rendered = suggestions.length;\n                    that._overwrite(query, suggestions);\n                    if (rendered < that.limit && that.async) {\n                        that.trigger(\"asyncRequested\", query);\n                    }\n                }\n                function async(suggestions) {\n                    suggestions = suggestions || [];\n                    if (!canceled && rendered < that.limit) {\n                        that.cancel = $.noop;\n                        rendered += suggestions.length;\n                        that._append(query, suggestions.slice(0, that.limit - rendered));\n                        that.async && that.trigger(\"asyncReceived\", query);\n                    }\n                }\n            },\n            cancel: $.noop,\n            clear: function clear() {\n                this._empty();\n                this.cancel();\n                this.trigger(\"cleared\");\n            },\n            isEmpty: function isEmpty() {\n                return this.$el.is(\":empty\");\n            },\n            destroy: function destroy() {\n                this.$el = $(\"<div>\");\n            }\n        });\n        return Dataset;\n        function getDisplayFn(display) {\n            display = display || _.stringify;\n            return _.isFunction(display) ? display : displayFn;\n            function displayFn(obj) {\n                return obj[display];\n            }\n        }\n        function getTemplates(templates, displayFn) {\n            return {\n                notFound: templates.notFound && _.templatify(templates.notFound),\n                pending: templates.pending && _.templatify(templates.pending),\n                header: templates.header && _.templatify(templates.header),\n                footer: templates.footer && _.templatify(templates.footer),\n                suggestion: templates.suggestion || suggestionTemplate\n            };\n            function suggestionTemplate(context) {\n                return $(\"<div>\").text(displayFn(context));\n            }\n        }\n        function isValidName(str) {\n            return /^[_a-zA-Z0-9-]+$/.test(str);\n        }\n    }();\n    var Menu = function() {\n        \"use strict\";\n        function Menu(o, www) {\n            var that = this;\n            o = o || {};\n            if (!o.node) {\n                $.error(\"node is required\");\n            }\n            www.mixin(this);\n            this.$node = $(o.node);\n            this.query = null;\n            this.datasets = _.map(o.datasets, initializeDataset);\n            function initializeDataset(oDataset) {\n                var node = that.$node.find(oDataset.node).first();\n                oDataset.node = node.length ? node : $(\"<div>\").appendTo(that.$node);\n                return new Dataset(oDataset, www);\n            }\n        }\n        _.mixin(Menu.prototype, EventEmitter, {\n            _onSelectableClick: function onSelectableClick($e) {\n                this.trigger(\"selectableClicked\", $($e.currentTarget));\n            },\n            _onRendered: function onRendered(type, dataset, suggestions, async) {\n                this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());\n                this.trigger(\"datasetRendered\", dataset, suggestions, async);\n            },\n            _onCleared: function onCleared() {\n                this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());\n                this.trigger(\"datasetCleared\");\n            },\n            _propagate: function propagate() {\n                this.trigger.apply(this, arguments);\n            },\n            _allDatasetsEmpty: function allDatasetsEmpty() {\n                return _.every(this.datasets, isDatasetEmpty);\n                function isDatasetEmpty(dataset) {\n                    return dataset.isEmpty();\n                }\n            },\n            _getSelectables: function getSelectables() {\n                return this.$node.find(this.selectors.selectable);\n            },\n            _removeCursor: function _removeCursor() {\n                var $selectable = this.getActiveSelectable();\n                $selectable && $selectable.removeClass(this.classes.cursor);\n            },\n            _ensureVisible: function ensureVisible($el) {\n                var elTop, elBottom, nodeScrollTop, nodeHeight;\n                elTop = $el.position().top;\n                elBottom = elTop + $el.outerHeight(true);\n                nodeScrollTop = this.$node.scrollTop();\n                nodeHeight = this.$node.height() + parseInt(this.$node.css(\"paddingTop\"), 10) + parseInt(this.$node.css(\"paddingBottom\"), 10);\n                if (elTop < 0) {\n                    this.$node.scrollTop(nodeScrollTop + elTop);\n                } else if (nodeHeight < elBottom) {\n                    this.$node.scrollTop(nodeScrollTop + (elBottom - nodeHeight));\n                }\n            },\n            bind: function() {\n                var that = this, onSelectableClick;\n                onSelectableClick = _.bind(this._onSelectableClick, this);\n                this.$node.on(\"click.tt\", this.selectors.selectable, onSelectableClick);\n                _.each(this.datasets, function(dataset) {\n                    dataset.onSync(\"asyncRequested\", that._propagate, that).onSync(\"asyncCanceled\", that._propagate, that).onSync(\"asyncReceived\", that._propagate, that).onSync(\"rendered\", that._onRendered, that).onSync(\"cleared\", that._onCleared, that);\n                });\n                return this;\n            },\n            isOpen: function isOpen() {\n                return this.$node.hasClass(this.classes.open);\n            },\n            open: function open() {\n                this.$node.addClass(this.classes.open);\n            },\n            close: function close() {\n                this.$node.removeClass(this.classes.open);\n                this._removeCursor();\n            },\n            setLanguageDirection: function setLanguageDirection(dir) {\n                this.$node.attr(\"dir\", dir);\n            },\n            selectableRelativeToCursor: function selectableRelativeToCursor(delta) {\n                var $selectables, $oldCursor, oldIndex, newIndex;\n                $oldCursor = this.getActiveSelectable();\n                $selectables = this._getSelectables();\n                oldIndex = $oldCursor ? $selectables.index($oldCursor) : -1;\n                newIndex = oldIndex + delta;\n                newIndex = (newIndex + 1) % ($selectables.length + 1) - 1;\n                newIndex = newIndex < -1 ? $selectables.length - 1 : newIndex;\n                return newIndex === -1 ? null : $selectables.eq(newIndex);\n            },\n            setCursor: function setCursor($selectable) {\n                this._removeCursor();\n                if ($selectable = $selectable && $selectable.first()) {\n                    $selectable.addClass(this.classes.cursor);\n                    this._ensureVisible($selectable);\n                }\n            },\n            getSelectableData: function getSelectableData($el) {\n                return $el && $el.length ? Dataset.extractData($el) : null;\n            },\n            getActiveSelectable: function getActiveSelectable() {\n                var $selectable = this._getSelectables().filter(this.selectors.cursor).first();\n                return $selectable.length ? $selectable : null;\n            },\n            getTopSelectable: function getTopSelectable() {\n                var $selectable = this._getSelectables().first();\n                return $selectable.length ? $selectable : null;\n            },\n            update: function update(query) {\n                var isValidUpdate = query !== this.query;\n                if (isValidUpdate) {\n                    this.query = query;\n                    _.each(this.datasets, updateDataset);\n                }\n                return isValidUpdate;\n                function updateDataset(dataset) {\n                    dataset.update(query);\n                }\n            },\n            empty: function empty() {\n                _.each(this.datasets, clearDataset);\n                this.query = null;\n                this.$node.addClass(this.classes.empty);\n                function clearDataset(dataset) {\n                    dataset.clear();\n                }\n            },\n            destroy: function destroy() {\n                this.$node.off(\".tt\");\n                this.$node = $(\"<div>\");\n                _.each(this.datasets, destroyDataset);\n                function destroyDataset(dataset) {\n                    dataset.destroy();\n                }\n            }\n        });\n        return Menu;\n    }();\n    var DefaultMenu = function() {\n        \"use strict\";\n        var s = Menu.prototype;\n        function DefaultMenu() {\n            Menu.apply(this, [].slice.call(arguments, 0));\n        }\n        _.mixin(DefaultMenu.prototype, Menu.prototype, {\n            open: function open() {\n                !this._allDatasetsEmpty() && this._show();\n                return s.open.apply(this, [].slice.call(arguments, 0));\n            },\n            close: function close() {\n                this._hide();\n                return s.close.apply(this, [].slice.call(arguments, 0));\n            },\n            _onRendered: function onRendered() {\n                if (this._allDatasetsEmpty()) {\n                    this._hide();\n                } else {\n                    this.isOpen() && this._show();\n                }\n                return s._onRendered.apply(this, [].slice.call(arguments, 0));\n            },\n            _onCleared: function onCleared() {\n                if (this._allDatasetsEmpty()) {\n                    this._hide();\n                } else {\n                    this.isOpen() && this._show();\n                }\n                return s._onCleared.apply(this, [].slice.call(arguments, 0));\n            },\n            setLanguageDirection: function setLanguageDirection(dir) {\n                this.$node.css(dir === \"ltr\" ? this.css.ltr : this.css.rtl);\n                return s.setLanguageDirection.apply(this, [].slice.call(arguments, 0));\n            },\n            _hide: function hide() {\n                this.$node.hide();\n            },\n            _show: function show() {\n                this.$node.css(\"display\", \"block\");\n            }\n        });\n        return DefaultMenu;\n    }();\n    var Typeahead = function() {\n        \"use strict\";\n        function Typeahead(o, www) {\n            var onFocused, onBlurred, onEnterKeyed, onTabKeyed, onEscKeyed, onUpKeyed, onDownKeyed, onLeftKeyed, onRightKeyed, onQueryChanged, onWhitespaceChanged;\n            o = o || {};\n            if (!o.input) {\n                $.error(\"missing input\");\n            }\n            if (!o.menu) {\n                $.error(\"missing menu\");\n            }\n            if (!o.eventBus) {\n                $.error(\"missing event bus\");\n            }\n            www.mixin(this);\n            this.eventBus = o.eventBus;\n            this.minLength = _.isNumber(o.minLength) ? o.minLength : 1;\n            this.input = o.input;\n            this.menu = o.menu;\n            this.enabled = true;\n            this.active = false;\n            this.input.hasFocus() && this.activate();\n            this.dir = this.input.getLangDir();\n            this._hacks();\n            this.menu.bind().onSync(\"selectableClicked\", this._onSelectableClicked, this).onSync(\"asyncRequested\", this._onAsyncRequested, this).onSync(\"asyncCanceled\", this._onAsyncCanceled, this).onSync(\"asyncReceived\", this._onAsyncReceived, this).onSync(\"datasetRendered\", this._onDatasetRendered, this).onSync(\"datasetCleared\", this._onDatasetCleared, this);\n            onFocused = c(this, \"activate\", \"open\", \"_onFocused\");\n            onBlurred = c(this, \"deactivate\", \"_onBlurred\");\n            onEnterKeyed = c(this, \"isActive\", \"isOpen\", \"_onEnterKeyed\");\n            onTabKeyed = c(this, \"isActive\", \"isOpen\", \"_onTabKeyed\");\n            onEscKeyed = c(this, \"isActive\", \"_onEscKeyed\");\n            onUpKeyed = c(this, \"isActive\", \"open\", \"_onUpKeyed\");\n            onDownKeyed = c(this, \"isActive\", \"open\", \"_onDownKeyed\");\n            onLeftKeyed = c(this, \"isActive\", \"isOpen\", \"_onLeftKeyed\");\n            onRightKeyed = c(this, \"isActive\", \"isOpen\", \"_onRightKeyed\");\n            onQueryChanged = c(this, \"_openIfActive\", \"_onQueryChanged\");\n            onWhitespaceChanged = c(this, \"_openIfActive\", \"_onWhitespaceChanged\");\n            this.input.bind().onSync(\"focused\", onFocused, this).onSync(\"blurred\", onBlurred, this).onSync(\"enterKeyed\", onEnterKeyed, this).onSync(\"tabKeyed\", onTabKeyed, this).onSync(\"escKeyed\", onEscKeyed, this).onSync(\"upKeyed\", onUpKeyed, this).onSync(\"downKeyed\", onDownKeyed, this).onSync(\"leftKeyed\", onLeftKeyed, this).onSync(\"rightKeyed\", onRightKeyed, this).onSync(\"queryChanged\", onQueryChanged, this).onSync(\"whitespaceChanged\", onWhitespaceChanged, this).onSync(\"langDirChanged\", this._onLangDirChanged, this);\n        }\n        _.mixin(Typeahead.prototype, {\n            _hacks: function hacks() {\n                var $input, $menu;\n                $input = this.input.$input || $(\"<div>\");\n                $menu = this.menu.$node || $(\"<div>\");\n                $input.on(\"blur.tt\", function($e) {\n                    var active, isActive, hasActive;\n                    active = document.activeElement;\n                    isActive = $menu.is(active);\n                    hasActive = $menu.has(active).length > 0;\n                    if (_.isMsie() && (isActive || hasActive)) {\n                        $e.preventDefault();\n                        $e.stopImmediatePropagation();\n                        _.defer(function() {\n                            $input.focus();\n                        });\n                    }\n                });\n                $menu.on(\"mousedown.tt\", function($e) {\n                    $e.preventDefault();\n                });\n            },\n            _onSelectableClicked: function onSelectableClicked(type, $el) {\n                this.select($el);\n            },\n            _onDatasetCleared: function onDatasetCleared() {\n                this._updateHint();\n            },\n            _onDatasetRendered: function onDatasetRendered(type, dataset, suggestions, async) {\n                this._updateHint();\n                this.eventBus.trigger(\"render\", suggestions, async, dataset);\n            },\n            _onAsyncRequested: function onAsyncRequested(type, dataset, query) {\n                this.eventBus.trigger(\"asyncrequest\", query, dataset);\n            },\n            _onAsyncCanceled: function onAsyncCanceled(type, dataset, query) {\n                this.eventBus.trigger(\"asynccancel\", query, dataset);\n            },\n            _onAsyncReceived: function onAsyncReceived(type, dataset, query) {\n                this.eventBus.trigger(\"asyncreceive\", query, dataset);\n            },\n            _onFocused: function onFocused() {\n                this._minLengthMet() && this.menu.update(this.input.getQuery());\n            },\n            _onBlurred: function onBlurred() {\n                if (this.input.hasQueryChangedSinceLastFocus()) {\n                    this.eventBus.trigger(\"change\", this.input.getQuery());\n                }\n            },\n            _onEnterKeyed: function onEnterKeyed(type, $e) {\n                var $selectable;\n                if ($selectable = this.menu.getActiveSelectable()) {\n                    this.select($selectable) && $e.preventDefault();\n                }\n            },\n            _onTabKeyed: function onTabKeyed(type, $e) {\n                var $selectable;\n                if ($selectable = this.menu.getActiveSelectable()) {\n                    this.select($selectable) && $e.preventDefault();\n                } else if ($selectable = this.menu.getTopSelectable()) {\n                    this.autocomplete($selectable) && $e.preventDefault();\n                }\n            },\n            _onEscKeyed: function onEscKeyed() {\n                this.close();\n            },\n            _onUpKeyed: function onUpKeyed() {\n                this.moveCursor(-1);\n            },\n            _onDownKeyed: function onDownKeyed() {\n                this.moveCursor(+1);\n            },\n            _onLeftKeyed: function onLeftKeyed() {\n                if (this.dir === \"rtl\" && this.input.isCursorAtEnd()) {\n                    this.autocomplete(this.menu.getTopSelectable());\n                }\n            },\n            _onRightKeyed: function onRightKeyed() {\n                if (this.dir === \"ltr\" && this.input.isCursorAtEnd()) {\n                    this.autocomplete(this.menu.getTopSelectable());\n                }\n            },\n            _onQueryChanged: function onQueryChanged(e, query) {\n                this._minLengthMet(query) ? this.menu.update(query) : this.menu.empty();\n            },\n            _onWhitespaceChanged: function onWhitespaceChanged() {\n                this._updateHint();\n            },\n            _onLangDirChanged: function onLangDirChanged(e, dir) {\n                if (this.dir !== dir) {\n                    this.dir = dir;\n                    this.menu.setLanguageDirection(dir);\n                }\n            },\n            _openIfActive: function openIfActive() {\n                this.isActive() && this.open();\n            },\n            _minLengthMet: function minLengthMet(query) {\n                query = _.isString(query) ? query : this.input.getQuery() || \"\";\n                return query.length >= this.minLength;\n            },\n            _updateHint: function updateHint() {\n                var $selectable, data, val, query, escapedQuery, frontMatchRegEx, match;\n                $selectable = this.menu.getTopSelectable();\n                data = this.menu.getSelectableData($selectable);\n                val = this.input.getInputValue();\n                if (data && !_.isBlankString(val) && !this.input.hasOverflow()) {\n                    query = Input.normalizeQuery(val);\n                    escapedQuery = _.escapeRegExChars(query);\n                    frontMatchRegEx = new RegExp(\"^(?:\" + escapedQuery + \")(.+$)\", \"i\");\n                    match = frontMatchRegEx.exec(data.val);\n                    match && this.input.setHint(val + match[1]);\n                } else {\n                    this.input.clearHint();\n                }\n            },\n            isEnabled: function isEnabled() {\n                return this.enabled;\n            },\n            enable: function enable() {\n                this.enabled = true;\n            },\n            disable: function disable() {\n                this.enabled = false;\n            },\n            isActive: function isActive() {\n                return this.active;\n            },\n            activate: function activate() {\n                if (this.isActive()) {\n                    return true;\n                } else if (!this.isEnabled() || this.eventBus.before(\"active\")) {\n                    return false;\n                } else {\n                    this.active = true;\n                    this.eventBus.trigger(\"active\");\n                    return true;\n                }\n            },\n            deactivate: function deactivate() {\n                if (!this.isActive()) {\n                    return true;\n                } else if (this.eventBus.before(\"idle\")) {\n                    return false;\n                } else {\n                    this.active = false;\n                    this.close();\n                    this.eventBus.trigger(\"idle\");\n                    return true;\n                }\n            },\n            isOpen: function isOpen() {\n                return this.menu.isOpen();\n            },\n            open: function open() {\n                if (!this.isOpen() && !this.eventBus.before(\"open\")) {\n                    this.menu.open();\n                    this._updateHint();\n                    this.eventBus.trigger(\"open\");\n                }\n                return this.isOpen();\n            },\n            close: function close() {\n                if (this.isOpen() && !this.eventBus.before(\"close\")) {\n                    this.menu.close();\n                    this.input.clearHint();\n                    this.input.resetInputValue();\n                    this.eventBus.trigger(\"close\");\n                }\n                return !this.isOpen();\n            },\n            setVal: function setVal(val) {\n                this.input.setQuery(_.toStr(val));\n            },\n            getVal: function getVal() {\n                return this.input.getQuery();\n            },\n            select: function select($selectable) {\n                var data = this.menu.getSelectableData($selectable);\n                if (data && !this.eventBus.before(\"select\", data.obj)) {\n                    this.input.setQuery(data.val, true);\n                    this.eventBus.trigger(\"select\", data.obj);\n                    this.close();\n                    return true;\n                }\n                return false;\n            },\n            autocomplete: function autocomplete($selectable) {\n                var query, data, isValid;\n                query = this.input.getQuery();\n                data = this.menu.getSelectableData($selectable);\n                isValid = data && query !== data.val;\n                if (isValid && !this.eventBus.before(\"autocomplete\", data.obj)) {\n                    this.input.setQuery(data.val);\n                    this.eventBus.trigger(\"autocomplete\", data.obj);\n                    return true;\n                }\n                return false;\n            },\n            moveCursor: function moveCursor(delta) {\n                var query, $candidate, data, payload, cancelMove;\n                query = this.input.getQuery();\n                $candidate = this.menu.selectableRelativeToCursor(delta);\n                data = this.menu.getSelectableData($candidate);\n                payload = data ? data.obj : null;\n                cancelMove = this._minLengthMet() && this.menu.update(query);\n                if (!cancelMove && !this.eventBus.before(\"cursorchange\", payload)) {\n                    this.menu.setCursor($candidate);\n                    if (data) {\n                        this.input.setInputValue(data.val);\n                    } else {\n                        this.input.resetInputValue();\n                        this._updateHint();\n                    }\n                    this.eventBus.trigger(\"cursorchange\", payload);\n                    return true;\n                }\n                return false;\n            },\n            destroy: function destroy() {\n                this.input.destroy();\n                this.menu.destroy();\n            }\n        });\n        return Typeahead;\n        function c(ctx) {\n            var methods = [].slice.call(arguments, 1);\n            return function() {\n                var args = [].slice.call(arguments);\n                _.each(methods, function(method) {\n                    return ctx[method].apply(ctx, args);\n                });\n            };\n        }\n    }();\n    (function() {\n        \"use strict\";\n        var old, keys, methods;\n        old = $.fn.typeahead;\n        keys = {\n            www: \"tt-www\",\n            attrs: \"tt-attrs\",\n            typeahead: \"tt-typeahead\"\n        };\n        methods = {\n            initialize: function initialize(o, datasets) {\n                var www;\n                datasets = _.isArray(datasets) ? datasets : [].slice.call(arguments, 1);\n                o = o || {};\n                www = WWW(o.classNames);\n                return this.each(attach);\n                function attach() {\n                    var $input, $wrapper, $hint, $menu, defaultHint, defaultMenu, eventBus, input, menu, typeahead, MenuConstructor;\n                    _.each(datasets, function(d) {\n                        d.highlight = !!o.highlight;\n                    });\n                    $input = $(this);\n                    $wrapper = $(www.html.wrapper);\n                    $hint = $elOrNull(o.hint);\n                    $menu = $elOrNull(o.menu);\n                    defaultHint = o.hint !== false && !$hint;\n                    defaultMenu = o.menu !== false && !$menu;\n                    defaultHint && ($hint = buildHintFromInput($input, www));\n                    defaultMenu && ($menu = $(www.html.menu).css(www.css.menu));\n                    $hint && $hint.val(\"\");\n                    $input = prepInput($input, www);\n                    if (defaultHint || defaultMenu) {\n                        $wrapper.css(www.css.wrapper);\n                        $input.css(defaultHint ? www.css.input : www.css.inputWithNoHint);\n                        $input.wrap($wrapper).parent().prepend(defaultHint ? $hint : null).append(defaultMenu ? $menu : null);\n                    }\n                    MenuConstructor = defaultMenu ? DefaultMenu : Menu;\n                    eventBus = new EventBus({\n                        el: $input\n                    });\n                    input = new Input({\n                        hint: $hint,\n                        input: $input\n                    }, www);\n                    menu = new MenuConstructor({\n                        node: $menu,\n                        datasets: datasets\n                    }, www);\n                    typeahead = new Typeahead({\n                        input: input,\n                        menu: menu,\n                        eventBus: eventBus,\n                        minLength: o.minLength\n                    }, www);\n                    $input.data(keys.www, www);\n                    $input.data(keys.typeahead, typeahead);\n                }\n            },\n            isEnabled: function isEnabled() {\n                var enabled;\n                ttEach(this.first(), function(t) {\n                    enabled = t.isEnabled();\n                });\n                return enabled;\n            },\n            enable: function enable() {\n                ttEach(this, function(t) {\n                    t.enable();\n                });\n                return this;\n            },\n            disable: function disable() {\n                ttEach(this, function(t) {\n                    t.disable();\n                });\n                return this;\n            },\n            isActive: function isActive() {\n                var active;\n                ttEach(this.first(), function(t) {\n                    active = t.isActive();\n                });\n                return active;\n            },\n            activate: function activate() {\n                ttEach(this, function(t) {\n                    t.activate();\n                });\n                return this;\n            },\n            deactivate: function deactivate() {\n                ttEach(this, function(t) {\n                    t.deactivate();\n                });\n                return this;\n            },\n            isOpen: function isOpen() {\n                var open;\n                ttEach(this.first(), function(t) {\n                    open = t.isOpen();\n                });\n                return open;\n            },\n            open: function open() {\n                ttEach(this, function(t) {\n                    t.open();\n                });\n                return this;\n            },\n            close: function close() {\n                ttEach(this, function(t) {\n                    t.close();\n                });\n                return this;\n            },\n            select: function select(el) {\n                var success = false, $el = $(el);\n                ttEach(this.first(), function(t) {\n                    success = t.select($el);\n                });\n                return success;\n            },\n            autocomplete: function autocomplete(el) {\n                var success = false, $el = $(el);\n                ttEach(this.first(), function(t) {\n                    success = t.autocomplete($el);\n                });\n                return success;\n            },\n            moveCursor: function moveCursoe(delta) {\n                var success = false;\n                ttEach(this.first(), function(t) {\n                    success = t.moveCursor(delta);\n                });\n                return success;\n            },\n            val: function val(newVal) {\n                var query;\n                if (!arguments.length) {\n                    ttEach(this.first(), function(t) {\n                        query = t.getVal();\n                    });\n                    return query;\n                } else {\n                    ttEach(this, function(t) {\n                        t.setVal(newVal);\n                    });\n                    return this;\n                }\n            },\n            destroy: function destroy() {\n                ttEach(this, function(typeahead, $input) {\n                    revert($input);\n                    typeahead.destroy();\n                });\n                return this;\n            }\n        };\n        $.fn.typeahead = function(method) {\n            if (methods[method]) {\n                return methods[method].apply(this, [].slice.call(arguments, 1));\n            } else {\n                return methods.initialize.apply(this, arguments);\n            }\n        };\n        $.fn.typeahead.noConflict = function noConflict() {\n            $.fn.typeahead = old;\n            return this;\n        };\n        function ttEach($els, fn) {\n            $els.each(function() {\n                var $input = $(this), typeahead;\n                (typeahead = $input.data(keys.typeahead)) && fn(typeahead, $input);\n            });\n        }\n        function buildHintFromInput($input, www) {\n            return $input.clone().addClass(www.classes.hint).removeData().css(www.css.hint).css(getBackgroundStyles($input)).prop(\"readonly\", true).removeAttr(\"id name placeholder required\").attr({\n                autocomplete: \"off\",\n                spellcheck: \"false\",\n                tabindex: -1\n            });\n        }\n        function prepInput($input, www) {\n            $input.data(keys.attrs, {\n                dir: $input.attr(\"dir\"),\n                autocomplete: $input.attr(\"autocomplete\"),\n                spellcheck: $input.attr(\"spellcheck\"),\n                style: $input.attr(\"style\")\n            });\n            $input.addClass(www.classes.input).attr({\n                autocomplete: \"off\",\n                spellcheck: false\n            });\n            try {\n                !$input.attr(\"dir\") && $input.attr(\"dir\", \"auto\");\n            } catch (e) {}\n            return $input;\n        }\n        function getBackgroundStyles($el) {\n            return {\n                backgroundAttachment: $el.css(\"background-attachment\"),\n                backgroundClip: $el.css(\"background-clip\"),\n                backgroundColor: $el.css(\"background-color\"),\n                backgroundImage: $el.css(\"background-image\"),\n                backgroundOrigin: $el.css(\"background-origin\"),\n                backgroundPosition: $el.css(\"background-position\"),\n                backgroundRepeat: $el.css(\"background-repeat\"),\n                backgroundSize: $el.css(\"background-size\")\n            };\n        }\n        function revert($input) {\n            var www, $wrapper;\n            www = $input.data(keys.www);\n            $wrapper = $input.parent().filter(www.selectors.wrapper);\n            _.each($input.data(keys.attrs), function(val, key) {\n                _.isUndefined(val) ? $input.removeAttr(key) : $input.attr(key, val);\n            });\n            $input.removeData(keys.typeahead).removeData(keys.www).removeData(keys.attr).removeClass(www.classes.input);\n            if ($wrapper.length) {\n                $input.detach().insertAfter($wrapper);\n                $wrapper.remove();\n            }\n        }\n        function $elOrNull(obj) {\n            var isValid, $el;\n            isValid = _.isJQuery(obj) || _.isElement(obj);\n            $el = isValid ? $(obj).first() : [];\n            return $el.length ? $el : null;\n        }\n    })();\n});\n"],"sourceRoot":"/source/"}