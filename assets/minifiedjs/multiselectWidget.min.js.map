{"version":3,"file":"multiselectWidget.min.js","sources":["multiselectWidget.js"],"sourcesContent":["\n\nfunction loadGroup(targetGroup) {\n\ttargetId = $(targetGroup).find(\".multiselectGroup\").attr(\"id\");\n\tvar targetArray = sourceContent[targetId];\n\t$(\"#\"+targetId).find(\".multiSelect\").each(function(index, el) {\n\t\tvar selectIndex = $(el).data(\"cascadenumber\");\n\t\tvar category = $(el).data(\"category\");\n\n\t\tif(selectIndex === 0) {\n\t\t\tvar entryList = sourceContent[targetId][category];\n\t\t\tif(entryList) {\n\t\t\t\tvar keys = Object.keys(entryList);\n\t\t\t\tkeys.sort();\n\n\t\t\t\t$.each(keys,function(key, value) {\n\t\t\t\t\t$(el).append($(\"<option></option>\").attr(\"value\",value).text(value));\n\t\t\t\t});\n\n\t\t\t\tif(selectedItems && selectedItems[targetId]) {\n\t\t\t\t\tvar groupSelected = selectedItems[targetId];\n\t\t\t\t\t// console.log(category);\n\t\t\t\t\t// console.log(selectedItems[targetId]);\n\t\t\t\t\t// console.log(groupSelected);\n\t\t\t\t\t// this is a horrible hack.  We store categories with sanitized key names, but our multiselector stores them properly.\n\t\t\t\t\t//\n\t\t\t\t\tcategory = category.replace(/[^A-Za-z0-9]/g, '');\n\t\t\t\t\tif(groupSelected && groupSelected[category]) {\n\t\t\t\t\t\t$(el).val(groupSelected[category]);\n\t\t\t\t\t\t$(el).trigger(\"change\");\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t});\n}\n\n$(document).on(\"change\", \".multiSelect\", function(e) {\n\n\tvar selectIndex = $(this).data(\"cascadenumber\");\n\tvar category = $(this).data(\"category\");\n\tvar parentGroup = $(this).closest('.multiselectGroup');\n\tvar selectedElements = $(parentGroup).find(\"[data-cascadenumber]\").filter(function() {\n\t\treturn $(this).attr(\"data-cascadenumber\") > selectIndex;\n\t});\n\n\t$(selectedElements).each(function(index, el) {\n\t\t$(el).val(\"\");\n\t});\n\n\n\tloadCascadeNumber(parentGroup, selectIndex+1);\n\n});\n\n\nfunction loadCascadeNumber(parentGroup, selectIndex) {\n\tvar target = sourceContent[$(parentGroup).attr(\"id\")];\n\tvar groupSelected = selectedItems[$(parentGroup).attr(\"id\")];\n\tvar targetCategory;\n\tfor(i=0; i<selectIndex; i++) {\n\t\tvar targetElement = $(parentGroup).find(\"[data-cascadenumber=\" + i + \"]\");\n\t\ttargetCategory = $(targetElement).data(\"category\");\n\t\tvar selectedItem = $(targetElement).val();\n\t\ttarget = target[targetCategory][selectedItem];\n\n\t}\n\n\tvar selectElement = $(parentGroup).find(\"[data-cascadenumber=\" + selectIndex + \"]\");\n\t\n\ttargetCategory = $(selectElement).data(\"category\");\n\tif(!targetCategory || !target) {\n\t\treturn;\n\t}\n\ttarget = target[targetCategory];\n\t$(selectElement).empty();\n\t$(selectElement).append(\"<option></option>\");\n\n\tif(typeof target === 'undefined') {\n\t\treturn;\n\t}\n\n\t// sort alphabetically, handle both object and array cases\n\tvar keys = Object.keys(target);\n\tif(!$.isNumeric(keys[0])) {\n\n\t\tkeys.sort();\n\t}\n\telse {\n\t\ttarget.sort();\n\t\tkeys = Object.keys(target);\n\t}\n\n\tlength = keys.length;\n\tfor (i = 0; i < length; i++) {\n\t\tkey = keys[i];\n\t\tvalue = target[key];\n\t\tvar itemName;\n\t\tif($.isNumeric(key)) {\n\t\t\titemName = value;\n\t\t}\n\t\telse {\n\t\t\titemName = key;\n\t\t}\n\t\t$(selectElement).append($(\"<option></option>\").attr(\"value\",itemName).text(itemName));\n\t}\n\n\n\t// $.each(target, function(key, value) {\n\n\n\t// });\n\ttargetCategory = targetCategory.replace(/[^A-Za-z0-9]/g, '');\n\tif(groupSelected && groupSelected[targetCategory]) {\n\t\t$(selectElement).val(groupSelected[targetCategory]);\n\t\t$(selectElement).trigger(\"change\");\n\n\t}\n\n\n}"],"names":["loadGroup","targetGroup","targetId","$","find","attr","sourceContent","each","index","el","selectIndex","data","category","entryList","keys","Object","sort","key","value","append","text","selectedItems","groupSelected","replace","val","trigger","loadCascadeNumber","parentGroup","target","i","targetElement","targetCategory","selectedItem","selectElement","empty","itemName","isNumeric","length","document","on","e","this","closest","selectedElements","filter"],"mappings":"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"}