{"version":3,"sources":["multiselectWidget.js"],"names":["loadGroup","targetGroup","targetId","$","find","attr","sourceContent","each","index","el","selectIndex","data","category","entryList","keys","Object","sort","key","value","append","text","selectedItems","groupSelected","replace","val","trigger","loadCascadeNumber","parentGroup","targetCategory","target","i","targetElement","selectedItem","selectElement","empty","isNumeric","length","itemName","document","on","e","this","closest","selectedElements","filter"],"mappings":"AAEA,SAASA,UAAUC,GAClBC,SAAWC,EAAEF,GAAaG,KAAK,qBAAqBC,KAAK,MACvCC,cAAcJ,UAChCC,EAAE,IAAID,UAAUE,KAAK,gBAAgBG,MAAK,SAASC,EAAOC,GACzD,IAAIC,EAAcP,EAAEM,GAAIE,KAAK,iBACzBC,EAAWT,EAAEM,GAAIE,KAAK,YAE1B,GAAmB,IAAhBD,EAAmB,CACrB,IAAIG,EAAYP,cAAcJ,UAAUU,GACxC,GAAGC,EAAW,CACb,IAAIC,EAAOC,OAAOD,KAAKD,GAOvB,GANAC,EAAKE,OAELb,EAAEI,KAAKO,GAAK,SAASG,EAAKC,GACzBf,EAAEM,GAAIU,OAAOhB,EAAE,qBAAqBE,KAAK,QAAQa,GAAOE,KAAKF,OAG3DG,eAAiBA,cAAcnB,UAAW,CAC5C,IAAIoB,EAAgBD,cAAcnB,UAMlCU,EAAWA,EAASW,QAAQ,gBAAiB,IAC1CD,GAAiBA,EAAcV,KACjCT,EAAEM,GAAIe,IAAIF,EAAcV,IACxBT,EAAEM,GAAIgB,QAAQ,iBA4BpB,SAASC,kBAAkBC,EAAajB,GACvC,IAEIkB,EAFAC,EAASvB,cAAcH,EAAEwB,GAAatB,KAAK,OAC3CiB,EAAgBD,cAAclB,EAAEwB,GAAatB,KAAK,OAEtD,IAAIyB,EAAE,EAAGA,EAAEpB,EAAaoB,IAAK,CAC5B,IAAIC,EAAgB5B,EAAEwB,GAAavB,KAAK,uBAAyB0B,EAAI,KACrEF,EAAiBzB,EAAE4B,GAAepB,KAAK,YACvC,IAAIqB,EAAe7B,EAAE4B,GAAeP,MACpCK,EAASA,EAAOD,GAAgBI,GAIjC,IAAIC,EAAgB9B,EAAEwB,GAAavB,KAAK,uBAAyBM,EAAc,KAG/E,IADAkB,EAAiBzB,EAAE8B,GAAetB,KAAK,cAChBkB,IAGvBA,EAASA,EAAOD,GAChBzB,EAAE8B,GAAeC,QACjB/B,EAAE8B,GAAed,OAAO,0BAEH,IAAXU,GAAV,CAKA,IAAIf,EAAOC,OAAOD,KAAKe,GAWvB,IAVI1B,EAAEgC,UAAUrB,EAAK,KAKpBe,EAAOb,OACPF,EAAOC,OAAOD,KAAKe,IAJnBf,EAAKE,OAONoB,OAAStB,EAAKsB,OACTN,EAAI,EAAGA,EAAIM,OAAQN,IAAK,CAG5B,IAAIO,EAFJpB,IAAMH,EAAKgB,GACXZ,MAAQW,EAAOZ,KAGdoB,EADElC,EAAEgC,UAAUlB,KACHC,MAGAD,IAEZd,EAAE8B,GAAed,OAAOhB,EAAE,qBAAqBE,KAAK,QAAQgC,GAAUjB,KAAKiB,IASzEf,EADHM,EAAiBA,EAAeL,QAAQ,gBAAiB,OAExDpB,EAAE8B,GAAeT,IAAIF,EAAcM,IACnCzB,EAAE8B,GAAeR,QAAQ,YA9E3BtB,EAAEmC,UAAUC,GAAG,SAAU,gBAAgB,SAASC,GAEjD,IAAI9B,EAAcP,EAAEsC,MAAM9B,KAAK,iBAE3BgB,GADWxB,EAAEsC,MAAM9B,KAAK,YACVR,EAAEsC,MAAMC,QAAQ,sBAC9BC,EAAmBxC,EAAEwB,GAAavB,KAAK,wBAAwBwC,QAAO,WACzE,OAAOzC,EAAEsC,MAAMpC,KAAK,sBAAwBK,KAG7CP,EAAEwC,GAAkBpC,MAAK,SAASC,EAAOC,GACxCN,EAAEM,GAAIe,IAAI,OAIXE,kBAAkBC,EAAajB,EAAY","file":"multiselectWidget.min.js","sourcesContent":["\n\nfunction loadGroup(targetGroup) {\n\ttargetId = $(targetGroup).find(\".multiselectGroup\").attr(\"id\");\n\tvar targetArray = sourceContent[targetId];\n\t$(\"#\"+targetId).find(\".multiSelect\").each(function(index, el) {\n\t\tvar selectIndex = $(el).data(\"cascadenumber\");\n\t\tvar category = $(el).data(\"category\");\n\n\t\tif(selectIndex === 0) {\n\t\t\tvar entryList = sourceContent[targetId][category];\n\t\t\tif(entryList) {\n\t\t\t\tvar keys = Object.keys(entryList);\n\t\t\t\tkeys.sort();\n\n\t\t\t\t$.each(keys,function(key, value) {\n\t\t\t\t\t$(el).append($(\"<option></option>\").attr(\"value\",value).text(value));\n\t\t\t\t});\n\n\t\t\t\tif(selectedItems && selectedItems[targetId]) {\n\t\t\t\t\tvar groupSelected = selectedItems[targetId];\n\t\t\t\t\t// console.log(category);\n\t\t\t\t\t// console.log(selectedItems[targetId]);\n\t\t\t\t\t// console.log(groupSelected);\n\t\t\t\t\t// this is a horrible hack.  We store categories with sanitized key names, but our multiselector stores them properly.\n\t\t\t\t\t//\n\t\t\t\t\tcategory = category.replace(/[^A-Za-z0-9]/g, '');\n\t\t\t\t\tif(groupSelected && groupSelected[category]) {\n\t\t\t\t\t\t$(el).val(groupSelected[category]);\n\t\t\t\t\t\t$(el).trigger(\"change\");\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t});\n}\n\n$(document).on(\"change\", \".multiSelect\", function(e) {\n\n\tvar selectIndex = $(this).data(\"cascadenumber\");\n\tvar category = $(this).data(\"category\");\n\tvar parentGroup = $(this).closest('.multiselectGroup');\n\tvar selectedElements = $(parentGroup).find(\"[data-cascadenumber]\").filter(function() {\n\t\treturn $(this).attr(\"data-cascadenumber\") > selectIndex;\n\t});\n\n\t$(selectedElements).each(function(index, el) {\n\t\t$(el).val(\"\");\n\t});\n\n\n\tloadCascadeNumber(parentGroup, selectIndex+1);\n\n});\n\n\nfunction loadCascadeNumber(parentGroup, selectIndex) {\n\tvar target = sourceContent[$(parentGroup).attr(\"id\")];\n\tvar groupSelected = selectedItems[$(parentGroup).attr(\"id\")];\n\tvar targetCategory;\n\tfor(i=0; i<selectIndex; i++) {\n\t\tvar targetElement = $(parentGroup).find(\"[data-cascadenumber=\" + i + \"]\");\n\t\ttargetCategory = $(targetElement).data(\"category\");\n\t\tvar selectedItem = $(targetElement).val();\n\t\ttarget = target[targetCategory][selectedItem];\n\n\t}\n\n\tvar selectElement = $(parentGroup).find(\"[data-cascadenumber=\" + selectIndex + \"]\");\n\t\n\ttargetCategory = $(selectElement).data(\"category\");\n\tif(!targetCategory || !target) {\n\t\treturn;\n\t}\n\ttarget = target[targetCategory];\n\t$(selectElement).empty();\n\t$(selectElement).append(\"<option></option>\");\n\n\tif(typeof target === 'undefined') {\n\t\treturn;\n\t}\n\n\t// sort alphabetically, handle both object and array cases\n\tvar keys = Object.keys(target);\n\tif(!$.isNumeric(keys[0])) {\n\n\t\tkeys.sort();\n\t}\n\telse {\n\t\ttarget.sort();\n\t\tkeys = Object.keys(target);\n\t}\n\n\tlength = keys.length;\n\tfor (i = 0; i < length; i++) {\n\t\tkey = keys[i];\n\t\tvalue = target[key];\n\t\tvar itemName;\n\t\tif($.isNumeric(key)) {\n\t\t\titemName = value;\n\t\t}\n\t\telse {\n\t\t\titemName = key;\n\t\t}\n\t\t$(selectElement).append($(\"<option></option>\").attr(\"value\",itemName).text(itemName));\n\t}\n\n\n\t// $.each(target, function(key, value) {\n\n\n\t// });\n\ttargetCategory = targetCategory.replace(/[^A-Za-z0-9]/g, '');\n\tif(groupSelected[targetCategory]) {\n\t\t$(selectElement).val(groupSelected[targetCategory]);\n\t\t$(selectElement).trigger(\"change\");\n\n\t}\n\n\n}"]}