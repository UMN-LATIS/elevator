{"version":3,"sources":["polyfill.object-fit.js"],"names":["window","getMatchedCSSRules","ELEMENT_RE","ID_RE","CLASS_RE","ATTR_RE","PSEUDO_CLASSES_RE","PSEUDO_ELEMENTS_RE","toArray","list","items","i","push","getSheetRules","stylesheet","sheet_media","media","mediaText","disabled","length","matchMedia","matches","cssRules","_find","string","re","match","calculateScore","selector","part","score","parts","split","shift","replace","parseInt","join","getSpecificityScore","element","selector_text","selectors","result","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","sortBySpecificity","rules","compareSpecificity","a","b","selectorText","sort","style_sheets","sheet","rule","document","styleSheets","styleSheet","concat","lastTime","vendors","x","requestAnimationFrame","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","clearTimeout","global","objectFit","_debug","observer","getComputedStyle","context","currentStyle","getDefaultComputedStyle","newelement","cloneNode","styles","iframe","createElement","body","appendChild","contentWindow","open","write","close","defaultElement","querySelectorAll","nodeName","toLowerCase","defaultComputedStyle","this","property","value","getPropertyValue","removeChild","getMatchedStyle","val","inlineval","style","r","important","getPropertyPriority","orientation","replacedElement","parentNode","width","naturalWidth","clientWidth","height","naturalHeight","clientHeight","parentWidth","parentHeight","getAttribute","setAttribute","className","console","log","process","args","replacedElements","fittype","replacedElementsLength","processElement","replacedElementStyles","replacedElementDefaultStyles","wrapperElement","insertBefore","resizeTimer","resizeAction","addEventListener","attachEvent","listen","domInsertedAction","argsLength","domInsertedObserverFunction","disconnect","observe","documentElement","childList","subtree","domInsertedEventFunction","event","removeEventListener","target","domRemovedAction","domRemovedObserverFunction","domRemovedEventFunction","MutationObserver","mutations","forEach","mutation","addedNodes","nodes","nodesLength","removedNodes","init","polyfill","readyState"],"mappings":"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","file":"polyfill.object-fit.js","sourcesContent":["/*!\n * A polyfill for Webkit's window.getMatchedCSSRules, based on\n * https://gist.github.com/ydaniv/3033012\n *\n * @author: Yehonatan Daniv\n * @author: Christian \"Schepp\" Schaefer <schaepp@gmx.de>\n *\n */\n\n'use strict';\n\n(function() {\n\tif ( typeof window.getMatchedCSSRules !== 'function' ) {\n\t\tvar ELEMENT_RE = /[\\w-]+/g,\n\t\t\t\tID_RE = /#[\\w-]+/g,\n\t\t\t\tCLASS_RE = /\\.[\\w-]+/g,\n\t\t\t\tATTR_RE = /\\[[^\\]]+\\]/g,\n\t\t\t\t// :not() pseudo-class does not add to specificity, but its content does as if it was outside it\n\t\t\t\tPSEUDO_CLASSES_RE = /\\:(?!not)[\\w-]+(\\(.*\\))?/g,\n\t\t\t\tPSEUDO_ELEMENTS_RE = /\\:\\:?(after|before|first-letter|first-line|selection)/g;\n\t\t\t// convert an array-like object to array\n\t\t\tvar toArray = function(list) {\n\t\t\t\tvar items = [];\n\t\t\t\tfor (var i in list) {\n\t\t\t\t\titems.push(list[i]);\n\t\t\t\t}\n\t\t\t\treturn items;\n\t\t\t};\n\t \n\t\t\t// handles extraction of `cssRules` as an `Array` from a stylesheet or something that behaves the same\n\t\t\tvar getSheetRules = function(stylesheet) {\n\t\t\t\tvar sheet_media = stylesheet.media && stylesheet.media.mediaText;\n\t\t\t\t// if this sheet is disabled skip it\n\t\t\t\tif ( stylesheet.disabled ) return [];\n\t\t\t\t// if this sheet's media is specified and doesn't match the viewport then skip it\n\t\t\t\tif ( sheet_media && sheet_media.length && ! window.matchMedia(sheet_media).matches ) return [];\n\t\t\t\t// get the style rules of this sheet\n\t\t\t\treturn toArray(stylesheet.cssRules);\n\t\t\t};\n\t \n\t\t\tvar _find = function (string, re) {\n\t\t\t\tvar matches = string.match(re);\n\t\t\t\treturn re ? re.length : 0;\n\t\t\t};\n\n\t\t\t// calculates the specificity of a given `selector`\n\t\t\tvar calculateScore = function (selector) {\n\t\t\t\tvar score = [0,0,0],\n\t\t\t\t\tparts = selector.split(' '),\n\t\t\t\t\tpart, match;\n\t\t\t\t//TODO: clean the ':not' part since the last ELEMENT_RE will pick it up\n\t\t\t\twhile ( part = parts.shift(), typeof part == 'string' ) {\n\t\t\t\t\t// find all pseudo-elements\n\t\t\t\t\tmatch = _find(part, PSEUDO_ELEMENTS_RE);\n\t\t\t\t\tscore[2] = match;\n\t\t\t\t\t// and remove them\n\t\t\t\t\tmatch && (part = part.replace(PSEUDO_ELEMENTS_RE, ''));\n\t\t\t\t\t// find all pseudo-classes\n\t\t\t\t\tmatch = _find(part, PSEUDO_CLASSES_RE);\n\t\t\t\t\tscore[1] = match;\n\t\t\t\t\t// and remove them\n\t\t\t\t\tmatch && (part = part.replace(PSEUDO_CLASSES_RE, ''));\n\t\t\t\t\t// find all attributes\n\t\t\t\t\tmatch = _find(part, ATTR_RE);\n\t\t\t\t\tscore[1] += match;\n\t\t\t\t\t// and remove them\n\t\t\t\t\tmatch && (part = part.replace(ATTR_RE, ''));\n\t\t\t\t\t// find all IDs\n\t\t\t\t\tmatch = _find(part, ID_RE);\n\t\t\t\t\tscore[0] = match;\n\t\t\t\t\t// and remove them\n\t\t\t\t\tmatch && (part = part.replace(ID_RE, ''));\n\t\t\t\t\t// find all classes\n\t\t\t\t\tmatch = _find(part, CLASS_RE);\n\t\t\t\t\tscore[1] += match;\n\t\t\t\t\t// and remove them\n\t\t\t\t\tmatch && (part = part.replace(CLASS_RE, ''));\n\t\t\t\t\t// find all elements\n\t\t\t\t\tscore[2] += _find(part, ELEMENT_RE);\n\t\t\t\t}\n\t\t\t\treturn parseInt(score.join(''), 10);\n\t\t\t};\n\t \n\t\t\t// returns the heights possible specificity score an element can get from a give rule's selectorText\n\t\t\tvar getSpecificityScore = function(element, selector_text) {\n\t\t\t\tvar selectors = selector_text.split(','),\n\t\t\t\t\tselector, score, result = 0;\n\t\t\t\twhile ( selector = selectors.shift() ) {\n\t\t\t\t\tif ((element.mozMatchesSelector && element.mozMatchesSelector(selector)) || \n\t\t\t\t\t\t(element.msMatchesSelector && element.msMatchesSelector(selector)) || \n\t\t\t\t\t\t(element.oMatchesSelector && element.oMatchesSelector(selector)) || \n\t\t\t\t\t\t(element.webkitMatchesSelector && element.webkitMatchesSelector(selector))\n\t\t\t\t\t) {\n\t\t\t\t\t\tscore = calculateScore(selector);\n\t\t\t\t\t\tresult = score > result ? score : result;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t};\n\t \n\t\t\tvar sortBySpecificity = function(element, rules) {\n\t\t\t\t// comparing function that sorts CSSStyleRules according to specificity of their `selectorText`\n\t\t\t\tfunction compareSpecificity (a, b) {\n\t\t\t\t\treturn getSpecificityScore(element, b.selectorText) - getSpecificityScore(element, a.selectorText);\n\t\t\t\t}\n\t \n\t\t\t\treturn rules.sort(compareSpecificity);\n\t\t\t};\n\t \n\t\t\t//TODO: not supporting 2nd argument for selecting pseudo elements\n\t\t\t//TODO: not supporting 3rd argument for checking author style sheets only\n\t\t\twindow.getMatchedCSSRules = function (element /*, pseudo, author_only*/) {\n\t\t\t\tvar style_sheets, sheet, sheet_media,\n\t\t\t\t\trules, rule,\n\t\t\t\t\tresult = [];\n\t\t\t\t// get stylesheets and convert to a regular Array\n\t\t\t\tstyle_sheets = toArray(window.document.styleSheets);\n\t \n\t\t\t\t// assuming the browser hands us stylesheets in order of appearance\n\t\t\t\t// we iterate them from the beginning to follow proper cascade order\n\t\t\t\twhile ( sheet = style_sheets.shift() ) {\n\t\t\t\t\t// get the style rules of this sheet\n\t\t\t\t\trules = getSheetRules(sheet);\n\t\t\t\t\t// loop the rules in order of appearance\n\t\t\t\t\twhile ( rule = rules.shift() ) {\n\t\t\t\t\t\t// if this is an @import rule\n\t\t\t\t\t\tif ( rule.styleSheet ) {\n\t\t\t\t\t\t\t// insert the imported stylesheet's rules at the beginning of this stylesheet's rules\n\t\t\t\t\t\t\trules = getSheetRules(rule.styleSheet).concat(rules);\n\t\t\t\t\t\t\t// and skip this rule\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// if there's no stylesheet attribute BUT there IS a media attribute it's a media rule\n\t\t\t\t\t\telse if ( rule.media ) {\n\t\t\t\t\t\t\t// insert the contained rules of this media rule to the beginning of this stylesheet's rules\n\t\t\t\t\t\t\trules = getSheetRules(rule).concat(rules);\n\t\t\t\t\t\t\t// and skip it\n\t\t\t\t\t\t\tcontinue\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// check if this element matches this rule's selector\n\t\t\t\t\t\tif ((element.mozMatchesSelector && element.mozMatchesSelector(rule.selectorText)) || \n\t\t\t\t\t\t\t(element.msMatchesSelector && element.msMatchesSelector(rule.selectorText)) || \n\t\t\t\t\t\t\t(element.oMatchesSelector && element.oMatchesSelector(rule.selectorText)) || \n\t\t\t\t\t\t\t(element.webkitMatchesSelector && element.webkitMatchesSelector(rule.selectorText))\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t// push the rule to the results set\n\t\t\t\t\t\t\tresult.push(rule);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// sort according to specificity\n\t\t\t\treturn sortBySpecificity(element, result);\n\t\t\t};\n\t}\n}());\t\n/*!\n * A polyfill for requestAnimationFrame, based on\n * http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/\n *\n * @author: Erik Möller\n * @author: Paul Irish\n *\n */\n\n'use strict';\n\n(function() {\n    var lastTime = 0;\n    var vendors = ['webkit', 'moz'];\n    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n        window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];\n        window.cancelAnimationFrame =\n          window[vendors[x]+'CancelAnimationFrame'] || window[vendors[x]+'CancelRequestAnimationFrame'];\n    }\n\n    if (!window.requestAnimationFrame)\n        window.requestAnimationFrame = function(callback, element) {\n            var currTime = new Date().getTime();\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n            var id = window.setTimeout(function() { callback(currTime + timeToCall); },\n              timeToCall);\n            lastTime = currTime + timeToCall;\n            return id;\n        };\n\n    if (!window.cancelAnimationFrame)\n        window.cancelAnimationFrame = function(id) {\n            clearTimeout(id);\n        };\n}());\n/*!\n * Polyfill CSS object-fit\n * http://helloanselm.com/object-fit\n *\n * @author: Anselm Hannemann <hello@anselm-hannemann.com>\n * @author: Christian \"Schepp\" Schaefer <schaepp@gmx.de>\n * @version: 0.3.1\n *\n */\n\n(function (global) {\n\n\t'use strict';\n\n\t// Storage variable\n\tvar objectFit = {};\n\n\tobjectFit._debug = false;\n\t\n\tobjectFit.observer = null;\n\n\tobjectFit.getComputedStyle = function(element, context) {\n\t\tcontext = context || window;\n\n\t\tif (context.getComputedStyle) {\n\t\t\treturn context.getComputedStyle(element, null);\n\t\t}\n\t\telse {\n\t\t\treturn element.currentStyle;\n\t\t}\n\t};\n\n\tobjectFit.getDefaultComputedStyle = function(element){\n\t\tvar newelement = element.cloneNode(true);\n\t\tvar styles = {};\n\t\tvar iframe = document.createElement('iframe');\n\t\tdocument.body.appendChild(iframe);\n\t\tiframe.contentWindow.document.open();\n\t\tiframe.contentWindow.document.write('<body></body>');\n\t\tiframe.contentWindow.document.body.appendChild(newelement);\n\t\tiframe.contentWindow.document.close();\n\n\t\tvar defaultElement = iframe.contentWindow.document.querySelectorAll(element.nodeName.toLowerCase())[0];\n\t\tvar defaultComputedStyle = this.getComputedStyle(defaultElement, iframe.contentWindow);\n\n\t\tfor (var property in defaultComputedStyle) {\n\t\t\tvar value = defaultComputedStyle.getPropertyValue ? defaultComputedStyle.getPropertyValue(property) : defaultComputedStyle[property];\n\t\t\tif (value !== null) {\n\t\t\t\tswitch (property) {\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tstyles[property] = value;\n\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'width':\n\t\t\t\t\tcase 'height':\n\t\t\t\t\tcase 'minWidth':\n\t\t\t\t\tcase 'minHeight':\n\t\t\t\t\tcase 'maxWidth':\n\t\t\t\t\tcase 'maxHeight':\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdocument.body.removeChild(iframe);\n\n\t\treturn styles;\n\t};\n\t\n\tobjectFit.getMatchedStyle = function(element, property){\n\t\t// element property has highest priority\n\t\tvar val = null;\n\t\tvar inlineval = null;\n\t\t\n\t\tif (element.style.getPropertyValue) {\n\t\t\tinlineval = element.style.getPropertyValue(property);\n\t\t} else if (element.currentStyle) {\n\t\t\tinlineval = element.currentStyle[property];\n\t\t}\n\n\t\t// get matched rules\n\t\tvar rules = window.getMatchedCSSRules(element);\n\t\t\n\t\tif (rules.length) {\n\t\t\t// iterate the rules backwards\n\t\t\t// rules are ordered by priority, highest last\n\t\t\tfor (var i = rules.length; i --> 0;){\n\t\t\t\tvar r = rules[i];\n\t\n\t\t\t\tvar important = r.style.getPropertyPriority(property);\n\t\n\t\t\t\t// if set, only reset if important\n\t\t\t\tif (val === null || important) {\n\t\t\t\t\tval = r.style.getPropertyValue(property);\n\n\t\t\t\t\t// done if important\n\t\t\t\t\tif (important) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t//return val;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// if it's important, we are done\n\t\tif (!val && inlineval !== null) {\n\t\t\tval = inlineval;\n\t\t}\n\t\t\n\t\treturn val;\n\t};\n\n\t// Detects orientation\n\tobjectFit.orientation = function(replacedElement) {\n\t\tif (replacedElement.parentNode && replacedElement.parentNode.nodeName.toLowerCase() === 'x-object-fit') {\n\t\t\tvar width = replacedElement.naturalWidth || replacedElement.clientWidth;\n\t\t\tvar height = replacedElement.naturalHeight || replacedElement.clientHeight;\n\t\t\tvar parentWidth = replacedElement.parentNode.clientWidth;\n\t\t\tvar parentHeight = replacedElement.parentNode.clientHeight;\n\n\t\t\tif (!height || width / height > parentWidth / parentHeight) {\n\t\t\t\tif (replacedElement.getAttribute('data-x-object-relation') !== 'wider') {\n\t\t\t\t\treplacedElement.setAttribute('data-x-object-relation','wider');\n\t\t\t\t\treplacedElement.className = 'x-object-fit-wider';\n\t\t\t\t\tif (this._debug && window.console) {\n\t\t\t\t\t\tconsole.log('x-object-fit-wider');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (replacedElement.getAttribute('data-x-object-relation') !== 'taller') {\n\t\t\t\t\treplacedElement.setAttribute('data-x-object-relation','taller');\n\t\t\t\t\treplacedElement.className = 'x-object-fit-taller';\n\t\t\t\t\tif (this._debug && window.console) {\n\t\t\t\t\t\tconsole.log('x-object-fit-taller');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tobjectFit.process = function(args) {\n\t\tif (!args.selector || !args.replacedElements) {\n\t\t\treturn;\n\t\t}\n\t\targs.fittype = args.fittype || 'none';\n\t\tswitch (args.fittype) {\n\t\t\tdefault:\n\t\t\t\treturn;\n\n\t\t\tcase 'none':\n\t\t\tcase 'fill':\n\t\t\tcase 'contain':\n\t\t\tcase 'cover':\n\t\t\tbreak;\n\t\t}\n\n\t\tvar replacedElements = args.replacedElements;\n\t\tif(!replacedElements.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (var i = 0, replacedElementsLength = replacedElements.length; i < replacedElementsLength; i++) {\n\t\t\tthis.processElement(replacedElements[i], args);\n\t\t}\n\t};\n\t\n\tobjectFit.processElement = function(replacedElement, args) {\n\t\tvar property, value;\n\t\t\n\t\tvar replacedElementStyles = objectFit.getComputedStyle(replacedElement);\n\t\tvar replacedElementDefaultStyles = objectFit.getDefaultComputedStyle(replacedElement);\n\n\t\tvar wrapperElement = document.createElement('x-object-fit');\n\n\t\tif (objectFit._debug && window.console) {\n\t\t\tconsole.log('Applying to WRAPPER-------------------------------------------------------');\n\t\t}\n\t\tfor (property in replacedElementStyles) {\n\t\t\tswitch (property) {\n\t\t\t\tdefault:\n\t\t\t\t\tvalue = objectFit.getMatchedStyle(replacedElement,property);\n\t\t\t\t\tif (value !== null && value !== '') {\n\t\t\t\t\t\tif (objectFit._debug && window.console) {\n\t\t\t\t\t\t\tconsole.log(property + ': ' + value);\n\t\t\t\t\t\t}\n\t\t\t\t\t\twrapperElement.style[property] = value;\n\t\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase 'length':\n\t\t\t\tcase 'parentRule':\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (objectFit._debug && window.console) {\n\t\t\tconsole.log('Applying to REPLACED ELEMENT-------------------------------------------------------');\n\t\t}\n\t\tfor (property in replacedElementDefaultStyles) {\n\t\t\tswitch (property) {\n\t\t\t\tdefault:\n\t\t\t\t\tvalue = replacedElementDefaultStyles[property];\n\t\t\t\t\tif (objectFit._debug && window.console && value !== '') {\n\t\t\t\t\t\tconsole.log(property + ': ' + value);\n\t\t\t\t\t}\n\t\t\t\t\treplacedElement.style[property] = value;\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase 'length':\n\t\t\t\tcase 'parentRule':\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\twrapperElement.setAttribute('class','x-object-fit-' + args.fittype);\n\t\treplacedElement.parentNode.insertBefore(wrapperElement, replacedElement);\n\t\twrapperElement.appendChild(replacedElement);\n\n\t\tobjectFit.orientation(replacedElement);\n\n\t\tvar resizeTimer = null;\n\t\tvar resizeAction = function(){\n\t\t\tif (resizeTimer !== null) {\n\t\t\t\twindow.cancelAnimationFrame(resizeTimer);\n\t\t\t}\n\t\t\tresizeTimer = window.requestAnimationFrame(function(){\n\t\t\t\tobjectFit.orientation(replacedElement);\n\t\t\t});\n\t\t};\n\t\t\n\t\tswitch (args.fittype) {\n\t\t\tdefault:\n\t\t\tbreak;\n\n\t\t\tcase 'contain':\n\t\t\tcase 'cover':\n\t\t\t\tif (window.addEventListener) {\n\t\t\t\t\treplacedElement.addEventListener('load', resizeAction, false);\n\t\t\t\t\twindow.addEventListener('resize', resizeAction, false);\n\t\t\t\t\twindow.addEventListener('orientationchange', resizeAction, false);\n\t\t\t\t} else {\n\t\t\t\t\treplacedElement.attachEvent('onload', resizeAction);\n\t\t\t\t\twindow.attachEvent('onresize', resizeAction);\n\t\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t};\n\t\n\tobjectFit.listen = function(args) {\n\t\tvar domInsertedAction = function(element){\n\t\t\tfor (var i = 0, argsLength = args.length; i < argsLength; i++) {\n\t\t\t\tif ((element.mozMatchesSelector && element.mozMatchesSelector(args[i].selector)) ||\n\t\t\t\t\t(element.msMatchesSelector && element.msMatchesSelector(args[i].selector)) ||\n\t\t\t\t\t(element.oMatchesSelector && element.oMatchesSelector(args[i].selector)) ||\n\t\t\t\t\t(element.webkitMatchesSelector && element.webkitMatchesSelector(args[i].selector))\n\t\t\t\t) {\n\t\t\t\t\targs[i].replacedElements = [element];\n\t\t\t\t\tobjectFit.process(args[i]);\n\t\t\t\t\tif (objectFit._debug && window.console) {\n\t\t\t\t\t\tconsole.log('Matching node inserted: ' + element.nodeName);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t\n\t\tvar domInsertedObserverFunction = function(element){\n\t\t\tobjectFit.observer.disconnect();\n\t\t\tdomInsertedAction(element);\n\t\t\tobjectFit.observer.observe(document.documentElement, {\n\t\t\t\tchildList: true,\n\t\t\t\tsubtree: true\n\t\t\t});\n\t\t};\n\t\t\n\t\tvar domInsertedEventFunction = function(event){\n\t\t\twindow.removeEventListener('DOMNodeInserted', domInsertedEventFunction, false);\n\t\t\tdomInsertedAction(event.target);\n\t\t\twindow.addEventListener('DOMNodeInserted', domInsertedEventFunction, false);\n\t\t};\n\n\t\tvar domRemovedAction = function(element){\n\t\t\tif (element.nodeName.toLowerCase() === 'x-object-fit') {\n\t\t\t\telement.parentNode.removeChild(element);\n\t\t\t\tif (objectFit._debug && window.console) {\n\t\t\t\t\tconsole.log('Matching node removed: ' + element.nodeName);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t\n\t\tvar domRemovedObserverFunction = function(element){\n\t\t\tobjectFit.observer.disconnect();\n\t\t\tdomRemovedAction(element);\n\t\t\tobjectFit.observer.observe(document.documentElement, {\n\t\t\t\tchildList: true,\n\t\t\t\tsubtree: true\n\t\t\t});\n\t\t};\n\t\t\n\t\tvar domRemovedEventFunction = function(event){\n\t\t\twindow.removeEventListener('DOMNodeRemoved', domRemovedEventFunction, false);\n\t\t\tdomRemovedAction(event.target.parentNode);\n\t\t\twindow.addEventListener('DOMNodeRemoved', domRemovedEventFunction, false);\n\t\t};\n\n\t\tif (window.MutationObserver) {\n\t\t\tif (objectFit._debug && window.console) {\n\t\t\t\tconsole.log('DOM MutationObserver');\n\t\t\t}\n\t\t\tthis.observer = new MutationObserver(function(mutations) {\n\t\t\t\tmutations.forEach(function(mutation) {\n\t\t\t\t\tif (mutation.addedNodes && mutation.addedNodes.length) {\n\t\t\t\t\t\tvar nodes = mutation.addedNodes;\n\t\t\t\t\t\tfor (var i = 0, nodesLength = nodes.length; i < nodesLength; i++) {\n\t\t\t\t\t\t\tdomInsertedObserverFunction(nodes[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (mutation.removedNodes && mutation.removedNodes.length) {\n\t\t\t\t\t\tdomRemovedObserverFunction(mutation.target);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.observer.observe(document.documentElement, {\n\t\t\t\tchildList: true,\n\t\t\t\tsubtree: true\n\t\t\t});\n\t\t} else if (window.addEventListener) {\n\t\t\tif (objectFit._debug && window.console) {\n\t\t\t\tconsole.log('DOM Mutation Events');\n\t\t\t}\n\t\t\twindow.addEventListener('DOMNodeInserted', domInsertedEventFunction, false);\n\t\t\twindow.addEventListener('DOMNodeRemoved', domRemovedEventFunction, false);\n\t\t}\n\t};\n\n\tobjectFit.init = function(args) {\n\t\tif (!args) {\n\t\t\treturn;\n\t\t}\n\t\tif (typeof args !== 'Array') {\n\t\t\targs = [args];\n\t\t}\n\n\t\tfor (var i = 0, argsLength = args.length; i < argsLength; i++) {\n\t\t\targs[i].replacedElements = document.querySelectorAll(args[i].selector);\n\t\t\tthis.process(args[i]);\n\t\t}\n\n\t\tthis.listen(args);\n\t};\n\n\tobjectFit.polyfill = function(args) {\n\t\tif('objectFit' in document.documentElement.style === false) {\n\t\t\tif (objectFit._debug && window.console) {\n\t\t\t\tconsole.log('object-fit not natively supported');\n\t\t\t}\n\t\t\t// If the library is loaded after document onload event\n            if(document.readyState === 'complete') {\n                objectFit.init(args);\n            } else {\n                // Otherwise attach event listeners\n                if (window.addEventListener) {\n                    window.addEventListener('load', function(){\n                        objectFit.init(args);\n                    }, false);\n                } else {\n                    window.attachEvent('onload', function(){\n                        objectFit.init(args);\n                    });\n                }\n            }\n\t\t} else {\n\t\t\tif (objectFit._debug && window.console) {\n\t\t\t\tconsole.log('object-fit natively supported');\n\t\t\t}\n\t\t}\n\t};\n\n\t// Export into global space\n\tglobal.objectFit = objectFit;\n\n}(window));\n"],"sourceRoot":"/source/"}