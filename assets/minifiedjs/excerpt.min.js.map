{"version":3,"sources":["excerpt.js"],"names":["$","document","ready","startTimeValue","endTimeValue","hide","suppressSeek","suppressCounter","jwplayer","onTime","e","position","seek","on","startTime","getPosition","val","endTime","post","basePath","serialize","data","textStatus","xhr","collapse"],"mappings":"AACAA,EAAEC,UAAUC,MAAM,WACjB,GAA6B,oBAAnBC,gBAA0D,oBAAjBC,aAA8B,CAEhFJ,EAAE,kBAAkBK,OACpBL,EAAE,kBAAkBK,OACpB,IAAIC,GAAe,EACfC,EAAkB,EACtBC,SAAS,gBAAgBC,OAAO,SAASC,KAExCH,EACmB,KAClBA,EAAkB,EAClBD,GAAe,GAEbA,IAIAI,EAAEC,SAAYR,eAAe,IAC/BK,SAAS,gBAAgBI,KAAKT,gBAC9BG,GAAe,GAEbI,EAAEC,SAAWP,eACfI,SAAS,gBAAgBI,KAAKT,gBAC9BG,GAAe,SAQnBN,EAAEC,UAAUC,MAAM,WAChBF,EAAEC,UAAUY,GAAG,QAAS,YAAa,WACnC,IAAIC,EAAYN,SAAS,gBAAgBO,cAGzC,OAFAf,EAAE,cAAcgB,IAAIF,GACpBd,EAAE,qBAAqBgB,IAAIF,IACpB,IAGTd,EAAEC,UAAUY,GAAG,QAAS,UAAW,WACjC,IAAII,EAAUT,SAAS,gBAAgBO,cAGvC,OAFAf,EAAE,YAAYgB,IAAIC,GAClBjB,EAAE,mBAAmBgB,IAAIC,IAClB,IAGTjB,EAAEC,UAAUY,GAAG,SAAU,eAAgB,WAUvC,OATAb,EAAEkB,KAAKC,SAAU,sBAAuBnB,EAAE,gBAAgBoB,YAAa,SAASC,EAAMC,EAAYC,GAChGvB,EAAE,iBAAiBwB,SAAS,QAC5BxB,EAAE,YAAYgB,MACdhB,EAAE,mBAAmBgB,MACrBhB,EAAE,cAAcgB,MAChBhB,EAAE,qBAAqBgB,MACvBhB,EAAE,UAAUgB,SAGP","file":"excerpt.min.js","sourcesContent":["\n$(document).ready(function() {\n\tif(typeof startTimeValue !== \"undefined\" && typeof endTimeValue !== \"undefined\") {\n\t\t// we know we're playing an excerpt, so make sure the \"Create excerpt\" button his hidden\n\t\t$(\".createExcerpt\").hide();\n\t\t$(\".movieMetadata\").hide();\n\t\tvar suppressSeek = false;\n\t\tvar suppressCounter = 0;\n\t\tjwplayer(\"videoElement\").onTime(function(e) {\n\t\t\t// flash only seeks on keyframes, so we suppress seeking for a bit in case we end up seeking before our target time\n\t\t\tsuppressCounter++;\n\t\t\tif(suppressCounter>10) {\n\t\t\t\tsuppressCounter = 0;\n\t\t\t\tsuppressSeek = false;\n\t\t\t}\n\t\t\tif(suppressSeek) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(e.position < (startTimeValue-5)) {\n\t\t\t\tjwplayer(\"videoElement\").seek(startTimeValue);\n\t\t\t\tsuppressSeek = true;\n\t\t\t}\n\t\t\tif(e.position > endTimeValue) {\n\t\t\t\tjwplayer(\"videoElement\").seek(startTimeValue);\n\t\t\t\tsuppressSeek = true;\n\t\t\t}\n\t\t});\n\t}\n\n});\n\n\n$(document).ready(function() {\n  $(document).on(\"click\", \".setStart\", function() {\n    var startTime = jwplayer(\"videoElement\").getPosition();\n    $(\"#startTime\").val(startTime);\n    $(\"#startTimeVisible\").val(startTime);\n    return false;\n  });\n\n  $(document).on(\"click\", \".setEnd\", function() {\n    var endTime = jwplayer(\"videoElement\").getPosition();\n    $(\"#endTime\").val(endTime);\n    $(\"#endTimeVisible\").val(endTime);\n    return false;\n  });\n\n  $(document).on(\"submit\", \".excerptForm\", function () {\n    $.post(basePath+ \"drawers/addToDrawer\", $(\"#excerptForm\").serialize(), function(data, textStatus, xhr) {\n      $(\"#excerptGroup\").collapse('hide');\n      $(\"#endTime\").val();\n      $(\"#endTimeVisible\").val();\n      $(\"#startTime\").val();\n      $(\"#startTimeVisible\").val();\n      $(\"#label\").val();\n    });\n\n    return false;\n  });\n\n});"]}