function notifyParentOfSave(t){var e,s={objectId:t,status:"saved",targetFieldId:targetFieldId};e=null!==window.opener?window.opener:parent,e==window||e.postMessage(JSON.stringify(s),"*")}function listener(t){if("string"==typeof t.data||t.data instanceof String){var e=JSON.parse(t.data);t.data&&("open"==e.status&&(hasParent=!0,targetFieldId=e.targetField),"saved"==e.status&&($("#"+e.targetFieldId).val()!=e.objectId&&unsavedChildren--,$("#"+e.targetFieldId).val(e.objectId),relatedAssetPreview(e.objectId,$("#"+e.targetFieldId),$(".widgetContents")),submitFormWithDelay(!0,!0)),"closed"==e.status&&""===$("#"+e.targetFieldId).val()&&(unsavedChildren--,$("#"+e.targetFieldId).closest(".widgetContents").find(".newAssetButton").removeAttr("disabled")))}}var targetFieldId="",hasParent=!1,unsavedChildren=0;$(document).on("click",".newAssetButton",function(t){t.preventDefault();var e=$(this).closest(".widgetContents").find(".templateSelector").first().val(),s=$("#collectionId").val(),a=$(this).closest(".widgetContents").find(".targetAsset").first().attr("id");$(this).attr("disabled",!0),unsavedChildren++;var n=window.open(basePath+"assetManager/addAsset/"+e+"/"+s);n.onload=function(){var t={status:"open",targetField:a};n.postMessage(JSON.stringify(t),"*")}}),$(document).on("click",".autocompleteEdit",function(t){var e=$(this).closest(".widgetContents").find(".targetAsset").val(),s=$(this).closest(".widgetContents").find(".targetAsset").first().attr("id"),a=window.open(basePath+"assetManager/editAsset/"+e);return a.onload=function(){var t={status:"open",targetField:s};a.postMessage(JSON.stringify(t),"*")},!1}),$(window).unload(function(){if(hasParent){var t={objectId:null,status:"closed",targetFieldId:targetFieldId};window.opener.postMessage(JSON.stringify(t),"*")}}),window.addEventListener?(addEventListener("message",listener,!1),console.log("listener added")):attachEvent("onmessage",listener);
//# sourceMappingURL=interWindow.min.js.map
