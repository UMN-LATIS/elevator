function notifyParentOfSave(t){var e={objectId:t,status:"saved",targetFieldId:targetFieldId};window.opener.postMessage(JSON.stringify(e),"*")}function listener(t){if("string"==typeof t.data||t.data instanceof String){var e=JSON.parse(t.data);t.data&&("open"==e.status&&(hasParent=!0,targetFieldId=e.targetField),"saved"==e.status&&($("#"+e.targetFieldId).val()!=e.objectId&&unsavedChildren--,$("#"+e.targetFieldId).val(e.objectId),submitForm()),"closed"==e.status&&""===$("#"+e.targetFieldId).val()&&unsavedChildren--)}}var targetFieldId="",hasParent=!1,unsavedChildren=0;$(document).on("click",".newAssetButton",function(t){t.preventDefault();var e=$(this).closest(".widgetContents").find(".templateSelector").first().val(),a=$("#collectionId").val(),s=$(this).closest(".widgetContents").find(".targetAsset").first().attr("id");unsavedChildren++;var n=window.open(basePath+"assetManager/addAsset/"+e+"/"+a);n.onload=function(){var t={status:"open",targetField:s};n.postMessage(JSON.stringify(t),"*")}}),$(window).unload(function(){if(hasParent){var t={objectId:null,status:"closed",targetFieldId:targetFieldId};window.opener.postMessage(JSON.stringify(t),"*")}}),window.addEventListener?(addEventListener("message",listener,!1),console.log("listener added")):attachEvent("onmessage",listener);
//# sourceMappingURL=interWindow.min.js.map
