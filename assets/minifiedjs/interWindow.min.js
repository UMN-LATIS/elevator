function notifyParentOfSave(e){var t,a={objectId:e,status:"saved",targetFieldId:targetFieldId};t=null!==window.opener?window.opener:parent,t.postMessage(JSON.stringify(a),"*")}function listener(e){if("string"==typeof e.data||e.data instanceof String){var t=JSON.parse(e.data);e.data&&("open"==t.status&&(hasParent=!0,targetFieldId=t.targetField),"saved"==t.status&&($("#"+t.targetFieldId).val()!=t.objectId&&unsavedChildren--,$("#"+t.targetFieldId).val(t.objectId),relatedAssetPreview(t.objectId,$("#"+t.targetFieldId).closest(".widgetContents")),submitFormWithDelay(!0,!0)),"closed"==t.status&&""===$("#"+t.targetFieldId).val()&&(unsavedChildren--,$("#"+t.targetFieldId).closest(".widgetContents").find(".newAssetButton").removeAttr("disabled")))}}var targetFieldId="",hasParent=!1,unsavedChildren=0;$(document).on("click",".newAssetButton",function(e){e.preventDefault();var t=$(this).closest(".widgetContents").find(".templateSelector").first().val(),a=$("#collectionId").val(),s=$(this).closest(".widgetContents").find(".targetAsset").first().attr("id");$(this).attr("disabled",!0),unsavedChildren++;var n=window.open(basePath+"assetManager/addAsset/"+t+"/"+a);n.onload=function(){var e={status:"open",targetField:s};n.postMessage(JSON.stringify(e),"*")}}),$(window).unload(function(){if(hasParent){var e={objectId:null,status:"closed",targetFieldId:targetFieldId};window.opener.postMessage(JSON.stringify(e),"*")}}),window.addEventListener?(addEventListener("message",listener,!1),console.log("listener added")):attachEvent("onmessage",listener);
//# sourceMappingURL=interWindow.min.js.map
