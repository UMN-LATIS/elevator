function notifyParentOfSave(t){var e={objectId:t,status:"saved",targetFieldId:targetFieldId};window.opener.postMessage(JSON.stringify(e),"*")}function listener(t){if("string"==typeof t.data||t.data instanceof String){var e=JSON.parse(t.data);t.data&&("open"==e.status&&(hasParent=!0,targetFieldId=e.targetField),"saved"==e.status&&($("#"+e.targetFieldId).val()!=e.objectId&&unsavedChildren--,$("#"+e.targetFieldId).val(e.objectId),relatedAssetPreview(e.objectId,$("#"+e.targetFieldId).closest(".widgetContents")),submitForm()),"closed"==e.status&&""===$("#"+e.targetFieldId).val()&&(unsavedChildren--,$("#"+e.targetFieldId).closest(".widgetContents").find(".newAssetButton").removeAttr("disabled")))}}var targetFieldId="",hasParent=!1,unsavedChildren=0;$(document).on("click",".newAssetButton",function(t){t.preventDefault();var e=$(this).closest(".widgetContents").find(".templateSelector").first().val(),s=$("#collectionId").val(),a=$(this).closest(".widgetContents").find(".targetAsset").first().attr("id");$(this).attr("disabled",!0),unsavedChildren++;var d=window.open(basePath+"assetManager/addAsset/"+e+"/"+s);d.onload=function(){var t={status:"open",targetField:a};d.postMessage(JSON.stringify(t),"*")}}),$(window).unload(function(){if(hasParent){var t={objectId:null,status:"closed",targetFieldId:targetFieldId};window.opener.postMessage(JSON.stringify(t),"*")}}),window.addEventListener?(addEventListener("message",listener,!1),console.log("listener added")):attachEvent("onmessage",listener);
//# sourceMappingURL=interWindow.min.js.map
