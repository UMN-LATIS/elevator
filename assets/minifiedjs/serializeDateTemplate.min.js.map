{"version":3,"sources":["serializeForm.js","dateWidget.js","template.js","advancedSearchForm.js","multiselectWidget.js"],"names":["$","fn","serializeForm","data","lookup","selector","parse","this","length","named","name","replace","split","cap","$el","i","undefined","push","val","filter","each","find","jQuery","modifyRange","event","closest","text","window","mozInnerScreenX","show","hide","parseDateString","dateString","yearsAgo","Sugar","Date","isValid","create","dateNumeric","fromUTC","getTime","target","siblings","toLowerCase","indexOf","matches","match","bceDate","parseDate","document","ready","on","trigger","mapGetScript","url","callback","cache","ajax","type","success","dataType","async","e","cachedWidth","navbarToTopHeight","navbarHeight","scrollManage","_height","documentElement","clientWidth","offset","top","parseFloat","css","height","parseInt","addClass","scroll","y","scrollTop","z","removeClass","load","resize","Mousetrap","bind","toggle","preventDefault","targetItem","searchId","loadLastSearch","cookie","removeCookie","path","err","getRedirect","direction","objectId","get","basePath","parsed","status","nextResultLink","targetId","location","search","specificSearch","newSpecificSearch","clone","after","collectionCopy","newCollection","templateCopy","newTemplate","selectedOption","content","templateId","targetGroup","buildSearchForm","fieldTitle","post","template","textStatus","xhr","html","selectElement","values","index","append","value","console","log","renderContent","let","selectedValues","map","el","makeArray","join","eval","loadGroup","attr","sourceContent","selectIndex","category","entryList","keys","Object","sort","key","selectedItems","groupSelected","loadCascadeNumber","parentGroup","targetElement","targetCategory","selectedItem","empty","itemName","isNumeric","selectedElements"],"mappings":"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","file":"serializeDateTemplate.min.js","sourcesContent":["/*\n * serializeForm\n * https://github.com/danheberden/serializeForm\n *\n * Copyright (c) 2012 Dan Heberden\n * Licensed under the MIT, GPL licenses.\n */\n(function( $ ){\n  $.fn.serializeForm = function() {\n\n    // don't do anything if we didn't get any elements\n    if ( this.length < 1) {\n      return false;\n    }\n\n    var data = {};\n    var lookup = data; //current reference of data\n    var selector = ':input[type!=\"checkbox\"][type!=\"radio\"], input:checked';\n    var parse = function() {\n\n      // data[a][b] becomes [ data, a, b ]\n      var named = this.name.replace(/\\[([^\\]]+)?\\]/g, ',$1').split(',');\n      var cap = named.length - 1;\n      var $el = $( this );\n\n      // Ensure that only elements with valid `name` properties will be serialized\n      if ( named[ 0 ] ) {\n        for ( var i = 0; i < cap; i++ ) {\n          // move down the tree - create objects or array if necessary\n          lookup = lookup[ named[i] ] = lookup[ named[i] ] ||\n            ( named[ i + 1 ] === \"\" ? [] : {} );\n        }\n\n        // at the end, push or assign the value\n        if ( lookup.length !==  undefined ) {\n          lookup.push( $el.val() );\n        }else {\n          lookup[ named[ cap ] ]  = $el.val();\n        }\n\n        // assign the reference back to root\n        lookup = data;\n      }\n    };\n\n    // first, check for elements passed into this function\n    this.filter( selector ).each( parse );\n\n    // then parse possible child elements\n    this.find( selector ).each( parse );\n\n    // return data\n    return data;\n  };\n}( jQuery ));","\n\n\n\nfunction modifyRange(event) {\n\tif($(this).val() == 1) {\n\t\t$(this).closest(\".widgetContents\").find('.startLabel').text(\"Start\");\n\t\t// Firefox fails to handle animation when items are off-screen.  Disable animation.\n\t\t// TODO: refactor this in a smarter way.\n\t\tif(!(window.mozInnerScreenX == null)) {\n\t\t\t$(this).closest(\".widgetContents\").find('.dateRange').show();\n\t\t}\n\t\telse {\n\t\t\t$(this).closest(\".widgetContents\").find('.dateRange').show('fast', function() {\n\n\t\t\t});\t\n\t\t}\n\t\t\n\t}\n\telse {\n\t\t$(this).closest(\".widgetContents\").find('.startLabel').text(\"Date\");\n\t\tif(!(window.mozInnerScreenX == null)) {\n\t\t\t$(this).closest(\".widgetContents\").find('.dateRange').hide();\n\t\t}\n\t\telse {\n\t\t\t$(this).closest(\".widgetContents\").find('.dateRange').hide('fast', function() {\n\n\t\t\t});\n\t\t}\n\t\t\n\t}\n\n}\n\n\nfunction parseDateString(dateString, event) {\n\tif(dateString.length > 0) {\n\t\tif(Sugar.Date.isValid(Sugar.Date.create(dateString))) {\n\t\t\tvar dateNumeric = Sugar.Date.create(dateString, {fromUTC: true}).getTime()/1000;\n\t\t\tif(event) {\n\t\t\t\t$(event.target).siblings('.dateHidden').val(dateNumeric);\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse {\n\t\t\tif(dateString.toLowerCase().indexOf('bc') != -1) {\n\t\t\t\tdateString = dateString.replace(/,/g, '');\n\t\t\t\tvar pattern = /[0-9]+/g;\n\t\t\t\tvar matches = dateString.match(pattern);\n\t\t\t\tif(matches.length>0) {\n\t\t\t\t\tvar yearsAgo = matches[0];\n\t\t\t\t\tif(dateString.toLowerCase().indexOf('century') != -1) {\n\t\t\t\t\t\tyearsAgo = yearsAgo * 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar bceDate = (-1 * yearsAgo * 31556900) - (1970*31556900); // seconds in a year\n\t\t\t\t\tif(event) {\n\t\t\t\t\t\t$(event.target).siblings('.dateHidden').val(bceDate);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//TODO: make this trigger parse error instead!\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\t$(event.target).siblings('.dateHidden').val(\"\");\n\t}\n}\n\nfunction parseDate(event) {\n\tvar dateString = $(this).val();\n\tparseDateString(dateString, event);\n}\n\n$(document).ready(function() {\n\t$(document).on( \"change\", \".rangeModify\", modifyRange );\n\t$( \".rangeModify\" ).trigger( \"change\" );\n\t$(document).on(\"change\", \".dateText\", parseDate);\n});\n","$.mapGetScript = function(url, callback, cache){\n  return $.ajax({\n    type: \"GET\",\n    url: url,\n    success: callback,\n    dataType: \"script\",\n    cache: false,\n    async: false\n  });\n};\n\n\n$(document).ready(function() {\n  /**\n  * don't load the map js stuff until we need the advancedSearch modal\n  * @param  {[type]} e [description]\n  * @return {[type]}   [description]\n  */\n  $(\"#advancedSearchModal\").on(\"shown.bs.modal\", function(e) {\n    $(\".advancedSearchText\").val($(\".searchText\").val());\n  });\n});\n\n\nvar cachedWidth = 0;\nvar navbarToTopHeight = 0;\nvar navbarHeight = 0;\n\nfunction scrollManage() {\n  if(document.documentElement.clientWidth == cachedWidth) {\n    return;\n  }\n  cachedWidth = document.documentElement.clientWidth;\n  if(!$('.navbar').length) {\n    return;\n  }\n  navbarToTopHeight = $('.navbar').offset().top - parseFloat($('.navbar').css('margin-top').replace(/auto/, 0));\n  navbarHeight = $('.navbar').height();\n  var _height = $('.navbar').height();\n  if(navbarToTopHeight === 0) {\n    \n    if(document.documentElement.clientWidth > 768) {\n      $('.mainContent').css('padding-top', 20 + parseInt($('.navbar').css('height')));\n    }\n    else {\n      $('.mainContent').css('padding-top', 0);\n    }\n    $('.navbar').addClass('navbar-fixed-top');\n  }\n  else {\n    $(window).scroll(function(event) {\n      var y = $(this).scrollTop();\n      var z = $('.footer').offset().top;\n      \n      if(z > $( document ).height()) {\n        return;\n      }\n      if (y >= navbarToTopHeight && (y+_height) < z) {\n        \n        if(document.documentElement.clientWidth > 768) {\n          $('.mainContent').css('padding-top', parseInt($('.navbar').css('height')) + 20);\n        }\n        else {\n          $('.mainContent').css('padding-top', 0);\n        }\n        $('.navbar').addClass('navbar-fixed-top');\n      } else {\n        \n        if(document.documentElement.clientWidth > 768) {\n          $('.mainContent').css('padding-top', 0);\n        }\n        $('.navbar').removeClass('navbar-fixed-top');\n      }\n    });\n  }\n}\n\n// handle sticky header regardless of header size.\n$(window).load(function() {\n  scrollManage();\n});\n\n\n$(window).resize(function() {\n  scrollManage();\n});\n\n// command-control-h reveals hidden content (anything flagged advancedContent)\nMousetrap.bind('command+ctrl+h', function() {\n  $(\".advancedContent\").toggle();\n});\n\n$(\".collectionFilterSelect\").on(\"click\", function(e) {\n  \n  e.preventDefault();\n  \n  targetItem = $(this).data(\"collection-id\");\n  \n  $(\"#collection\").val(targetItem);\n  $(\"#search_concept\").text($(this).text());\n});\n\n\n/**\n* Management for \"searchsearch\" functionality on asset page and editing\n*/\n\nvar searchId = null;\nfunction loadLastSearch() {\n  try {\n    searchId = $.cookie(\"lastSearch\");\n    $.removeCookie(\"lastSearch\", {\n    path: '/'\n  });\n  }\n  catch(err) {\n  \n  }\n  \n  \n  \n  if (searchId) {\n    $(\".searchResultsNavBar\").removeClass(\"hide\");\n    \n    var getRedirect = function(direction, searchId, objectId) {\n      \n      $.cookie('lastSearch', searchId, {\n        path: \"/\"\n      });\n      \n      $.get(basePath + \"search/getResult/\" + direction + \"/\" + searchId + \"/\" + objectId, function (data) {\n        var parsed = data;\n        if (parsed.status == \"found\") {\n          nextResultLink(parsed.targetId);\n        } else {\n          window.location = basePath + \"search/s/\" + parsed.search;\n        }\n      });\n    }\n    \n    $(\".previousResult\").on(\"click\", function (e) {\n      \n      e.preventDefault();\n      getRedirect(\"previous\", searchId, objectId);\n    });\n    $(\".nextResult\").on(\"click\", function (e) {\n      e.preventDefault();\n      getRedirect(\"next\", searchId, objectId);\n    });\n  }\n  \n}\n","// Manages the advanced search\n$(document).on(\"click\", \".addAnotherSpecific\", function() {\n    $(\".searchCombine\").removeClass(\"hide\");\n    var specificSearch = $(this).closest('.specificSearch');\n    var newSpecificSearch = $(specificSearch).clone(false);\n    newSpecificSearch.find(\"input[type='text']\").val(\"\");\n    $(specificSearch).after(newSpecificSearch);\n\n});\n\n$(document).on(\"click\", \".addAnotherCollection\", function() {\n    var collectionCopy = $(this).closest('.form-group');\n    var newCollection = $(collectionCopy).clone(false);\n    newCollection.find(\"input[type='text']\").val(\"\");\n    $(collectionCopy).after(newCollection);\n});\n\n$(document).on(\"click\", \".addAnotherTemplate\", function() {\n    var templateCopy = $(this).closest('.form-group');\n    var newTemplate = $(templateCopy).clone(false);\n    $(templateCopy).after(newTemplate);\n});\n\n\n$(document).on(\"change\", \".searchDropdown\", function() {\n    var selectedOption = $(this).find(\":selected\");\n    var content = $(selectedOption).val();\n    var templateId = $(selectedOption).data('templateid');\n    var targetGroup = $(this).closest(\".form-group\").find(\".specificSearchTextContainer\");\n    buildSearchForm(content, templateId, targetGroup);\n    \n});\n\nconst buildSearchForm = function(fieldTitle, templateId, targetGroup) {\n    $.post(basePath + 'search/getFieldInfo', {fieldTitle: fieldTitle, template: templateId}, function(data, textStatus, xhr) {\n        if(data.type == \"text\") {\n            $(targetGroup).html(\"\");\n            $(targetGroup).html('<input type=\"text\" name=\"specificSearchText[]\"  autocomplete=\"off\" class=\"form-control advancedOption advancedSearchContent\" value=\"\">');\n        }\n        else if(data.type == \"select\" || data.type==\"checkbox\" || data.type == \"tag\") {\n            $(targetGroup).html(\"\");\n            $(targetGroup).html('<select name=\"specificSearchText[]\"  autocomplete=\"off\" class=\"form-control advancedOption advancedSearchContent\">');\n            selectElement = $(targetGroup).find(\"select\");\n            $.each(data.values, function(index, val) {\n                if(typeof index == \"string\") {\n                    $(selectElement).append($('<option>', {value: index}).text(val));\n                }\n                else {\n                    $(selectElement).append($('<option>', {value: val}).text(val));\n                }\n                \n            });\n\n        }\n        else if (data.type == \"multiselect\") {\n            console.log(\"Hey\");\n            $(targetGroup).html(data.renderContent);\n            $(targetGroup).append('<input type=\"text\" name=\"specificSearchText[]\"  autocomplete=\"off\" class=\"form-control advancedOption advancedSearchContent searchText\" value=\"\">');\n            $(targetGroup).find(\"select\").on(\"change\", function () {\n                console.log(targetGroup);\n                let selectedValues = $(targetGroup).find(\"select\").map(function (index, el) {\n                    return $(el).find(\":selected\").text();\n                });\n                \n                $(targetGroup).find(\".searchText\").val($.makeArray(selectedValues).join(\", \"))\n            });\n            eval($(targetGroup).find(\"script\").text());\n            loadGroup(targetGroup);\n\n            // $(targetGroup).html('<select name=\"specificSearchText[]\"  autocomplete=\"off\" class=\"form-control advancedOption advancedSearchContent\">');\n            // selectElement = $(targetGroup).find(\"select\");\n            // $.each(data.values, function(index, val) {\n            //     if(typeof index == \"string\") {\n            //         $(selectElement).append($('<option>', {value: index}).text(val));\n            //     }\n            //     else {\n            //         $(selectElement).append($('<option>', {value: val}).text(val));\n            //     }\n                \n            // });\n\n        }\n\n    });\n\n}","\n\nfunction loadGroup(targetGroup) {\n\ttargetId = $(targetGroup).find(\".multiselectGroup\").attr(\"id\");\n\tvar targetArray = sourceContent[targetId];\n\t$(\"#\"+targetId).find(\".multiSelect\").each(function(index, el) {\n\t\tvar selectIndex = $(el).data(\"cascadenumber\");\n\t\tvar category = $(el).data(\"category\");\n\n\t\tif(selectIndex === 0) {\n\t\t\tvar entryList = sourceContent[targetId][category];\n\t\t\tif(entryList) {\n\t\t\t\tvar keys = Object.keys(entryList);\n\t\t\t\tkeys.sort();\n\n\t\t\t\t$.each(keys,function(key, value) {\n\t\t\t\t\t$(el).append($(\"<option></option>\").attr(\"value\",value).text(value));\n\t\t\t\t});\n\n\t\t\t\tif(selectedItems && selectedItems[targetId]) {\n\t\t\t\t\tvar groupSelected = selectedItems[targetId];\n\t\t\t\t\t// console.log(category);\n\t\t\t\t\t// console.log(selectedItems[targetId]);\n\t\t\t\t\t// console.log(groupSelected);\n\t\t\t\t\t// this is a horrible hack.  We store categories with sanitized key names, but our multiselector stores them properly.\n\t\t\t\t\t//\n\t\t\t\t\tcategory = category.replace(/[^A-Za-z0-9]/g, '');\n\t\t\t\t\tif(groupSelected && groupSelected[category]) {\n\t\t\t\t\t\t$(el).val(groupSelected[category]);\n\t\t\t\t\t\t$(el).trigger(\"change\");\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t});\n}\n\n$(document).on(\"change\", \".multiSelect\", function(e) {\n\n\tvar selectIndex = $(this).data(\"cascadenumber\");\n\tvar category = $(this).data(\"category\");\n\tvar parentGroup = $(this).closest('.multiselectGroup');\n\tvar selectedElements = $(parentGroup).find(\"[data-cascadenumber]\").filter(function() {\n\t\treturn $(this).attr(\"data-cascadenumber\") > selectIndex;\n\t});\n\n\t$(selectedElements).each(function(index, el) {\n\t\t$(el).val(\"\");\n\t});\n\n\n\tloadCascadeNumber(parentGroup, selectIndex+1);\n\n});\n\n\nfunction loadCascadeNumber(parentGroup, selectIndex) {\n\tvar target = sourceContent[$(parentGroup).attr(\"id\")];\n\tvar groupSelected = selectedItems[$(parentGroup).attr(\"id\")];\n\tvar targetCategory;\n\tfor(i=0; i<selectIndex; i++) {\n\t\tvar targetElement = $(parentGroup).find(\"[data-cascadenumber=\" + i + \"]\");\n\t\ttargetCategory = $(targetElement).data(\"category\");\n\t\tvar selectedItem = $(targetElement).val();\n\t\ttarget = target[targetCategory][selectedItem];\n\n\t}\n\n\tvar selectElement = $(parentGroup).find(\"[data-cascadenumber=\" + selectIndex + \"]\");\n\t\n\ttargetCategory = $(selectElement).data(\"category\");\n\tif(!targetCategory || !target) {\n\t\treturn;\n\t}\n\ttarget = target[targetCategory];\n\t$(selectElement).empty();\n\t$(selectElement).append(\"<option></option>\");\n\n\tif(typeof target === 'undefined') {\n\t\treturn;\n\t}\n\n\t// sort alphabetically, handle both object and array cases\n\tvar keys = Object.keys(target);\n\tif(!$.isNumeric(keys[0])) {\n\n\t\tkeys.sort();\n\t}\n\telse {\n\t\ttarget.sort();\n\t\tkeys = Object.keys(target);\n\t}\n\n\tlength = keys.length;\n\tfor (i = 0; i < length; i++) {\n\t\tkey = keys[i];\n\t\tvalue = target[key];\n\t\tvar itemName;\n\t\tif($.isNumeric(key)) {\n\t\t\titemName = value;\n\t\t}\n\t\telse {\n\t\t\titemName = key;\n\t\t}\n\t\t$(selectElement).append($(\"<option></option>\").attr(\"value\",itemName).text(itemName));\n\t}\n\n\n\t// $.each(target, function(key, value) {\n\n\n\t// });\n\ttargetCategory = targetCategory.replace(/[^A-Za-z0-9]/g, '');\n\tif(groupSelected && groupSelected[targetCategory]) {\n\t\t$(selectElement).val(groupSelected[targetCategory]);\n\t\t$(selectElement).trigger(\"change\");\n\n\t}\n\n\n}"]}