var templateList="";$(document).ready((function(){jQuery.getJSON(basePath+"search/getTemplates",{},(function(e,t){templateList=e,prepopulate()})),$("#customSaveButton").on("click",(function(){var e=$("#customSearchForm").serializeForm(),t=$("#searchId").val(),a=$("#inputSearchTitle").val();$.post(basePath+"search/saveSearch",{searchTitle:a,searchData:e,customSearchId:t},(function(e,t,a){if(e){$("#searchId").val(e),pathAddition="","/"!=basePath&&(pathAddition=basePath);var o=window.location.protocol+"//"+window.location.host+pathAddition+"/search/searchBuilder/"+e;window.history.pushState({path:o},"",o),bootbox.alert("<h2>Saved</h2>"),window.setTimeout((function(){bootbox.hideAll()}),1500)}}))})),$(".addGroup").on("click",(function(e){e.preventDefault(),addNewGroup()})),$("#searchButton").on("click",(function(e){storeAndSearch("",$("#customSearchForm"))}))})),$(document).on("keypress","input",(function(e){if(13==e.keyCode)return storeAndSearch("",$("#customSearchForm")),!1}));var prepopulate=function(){if(presetInfo){var e=presetInfo.specificTemplateId,t=presetInfo.specificSearchField;$.each(e,(function(e,a){var o=addNewGroup(),r=$(o).find(".templateSelector");$(o).find(".searchField");$(r).val(a),loadSearchFields($(r).val(),o,t[e])}))}},addNewGroup=function(){var e={};e.templates=templateList;var t=$("#search-entry").html(),a=Handlebars.compile(t)(e),o=$(a);$(".addButtonGroup").before(o);return $(o)},loadSearchFields=function(e,t,a){$.getJSON(basePath+"search/getFields/"+e,{},(function(e,o){var r=$(t).find(".searchField");$(r).empty(),$.each(e,(function(e,t){$(r).append($("<option>",{value:e}).text(t))})),a&&($(r).val(a),$(r).trigger("change"))}))};$(document).on("change",".templateSelector",(function(e){var t=$(this).val(),a=$(this).closest(".searchGroup");loadSearchFields(t,a,null)})),$(document).on("change",".searchField",(function(e){var t=$(this).closest(".searchGroup"),a=$(this).val(),o=$(t).find(".templateSelector").val(),r=$(t).find(".specificSearchTextContainer");buildSearchForm(a,o,r)}));
//# sourceMappingURL=customSearch.min.js.map
