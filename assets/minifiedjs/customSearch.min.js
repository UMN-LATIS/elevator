var templateList="",prepopulate=($(document).ready(function(){jQuery.getJSON(basePath+"search/getTemplates",{},function(e,t){templateList=e,prepopulate()}),$("#customSaveButton").on("click",function(){var e=$("#customSearchForm").serializeForm(),t=$("#searchId").val(),a=$("#inputSearchTitle").val();$.post(basePath+"search/saveSearch",{searchTitle:a,searchData:e,customSearchId:t},function(e,t,a){e&&($("#searchId").val(e),pathAddition="","/"!=basePath&&(pathAddition=basePath),e=window.location.protocol+"//"+window.location.host+pathAddition+"/search/searchBuilder/"+e,window.history.pushState({path:e},"",e),bootbox.alert("<h2>Saved</h2>"),window.setTimeout(function(){bootbox.hideAll()},1500))})}),$(".addGroup").on("click",function(e){e.preventDefault(),addNewGroup()}),$("#searchButton").on("click",function(e){storeAndSearch("",$("#customSearchForm"))})}),$(document).on("keypress","input",function(e){if(13==e.keyCode)return storeAndSearch("",$("#customSearchForm")),!1}),function(){var e,c;presetInfo&&(e=presetInfo.specificTemplateId,c=presetInfo.specificSearchField,$.each(e,function(e,t){var a=addNewGroup(),o=$(a).find(".templateSelector");$(a).find(".searchField");$(o).val(t),loadSearchFields($(o).val(),a,c[e])}))}),addNewGroup=function(){var e={},t=(e.templates=templateList,$("#search-entry").html()),t=Handlebars.compile(t)(e),e=$(t);$(".addButtonGroup").before(e);return $(e)},loadSearchFields=function(e,o,c){$.getJSON(basePath+"search/getFields/"+e,{},function(e,t){var a=$(o).find(".searchField");$(a).empty(),$.each(e,function(e,t){$(a).append($("<option>",{value:e}).text(t))}),c&&($(a).val(c),$(a).trigger("change"))})};$(document).on("change",".templateSelector",function(e){var t=$(this).val(),a=$(this).closest(".searchGroup");loadSearchFields(t,a,null)}),$(document).on("change",".searchField",function(e){var t=$(this).closest(".searchGroup"),a=$(this).val(),o=$(t).find(".templateSelector").val(),t=$(t).find(".specificSearchTextContainer");buildSearchForm(a,o,t)});
//# sourceMappingURL=customSearch.min.js.map
