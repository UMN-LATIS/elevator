var templateList="";$(document).ready(function(){jQuery.getJSON(basePath+"search/getTemplates",{},function(e,t){templateList=e,prepopulate()}),$("#customSaveButton").on("click",function(){var e=$("#customSearchForm").serializeForm(),t=$("#searchId").val(),a=$("#inputSearchTitle").val();$.post(basePath+"search/saveSearch",{searchTitle:a,searchData:e,customSearchId:t},function(e,t,a){if(e){$("#searchId").val(e),pathAddition="","/"!=basePath&&(pathAddition=basePath);var o=window.location.protocol+"//"+window.location.host+pathAddition+"/search/searchBuilder/"+e;window.history.pushState({path:o},"",o),bootbox.alert("<h2>Saved</h2>"),window.setTimeout(function(){bootbox.hideAll()},1500)}})}),$(".addGroup").on("click",function(e){e.preventDefault(),addNewGroup()}),$("#searchButton").on("click",function(e){storeAndSearch("",$("#customSearchForm"))})}),$(document).on("keypress","input",function(e){return 13==e.keyCode?(storeAndSearch("",$("#customSearchForm")),!1):void 0});var prepopulate=function(){if(presetInfo){var e=presetInfo.specificTemplateId,t=presetInfo.specificSearchField;$.each(e,function(e,a){var o=addNewGroup(),c=$(o).find(".templateSelector");$(o).find(".searchField");$(c).val(a),loadSearchFields($(c).val(),o,t[e])})}},addNewGroup=function(){var e={};e.templates=templateList;var t=$("#search-entry").html(),a=Handlebars.compile(t),o=a(e),c=$(o);$(".addButtonGroup").before(c);return $(c)},loadSearchFields=function(e,t,a){$.getJSON(basePath+"search/getFields/"+e,{},function(e,o){var c=$(t).find(".searchField");$(c).empty(),$.each(e,function(e,t){$(c).append($("<option>",{value:e}).text(t))}),a&&($(c).val(a),$(c).trigger("change"))})};$(document).on("change",".templateSelector",function(e){var t=$(this).val(),a=$(this).closest(".searchGroup");loadSearchFields(t,a,null)}),$(document).on("change",".searchField",function(e){var t=$(this).closest(".searchGroup"),a=$(this).val(),o=$(t).find(".templateSelector").val(),c=$(t).find(".specificSearchTextContainer");buildFieldInfo(o,a,c)});
//# sourceMappingURL=customSearch.min.js.map
