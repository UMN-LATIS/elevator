{"version":3,"sources":["loadDrawer.js"],"names":["targetTemplate","listTemplate","getDrawer","url","window","location","href","replace","hash","substring","lastIndexOf","updateDrawerSortAndReload","drawerSort","$","val","drawerId","get","basePath","loadDrawer","serializeDrawerAndUpdate","orderArray","Array","each","index","el","push","data","post","JSON","stringify","empty","getJSON","cachedResults","cachedDates","success","populateSearchResults","sortable","update","e","ui","document","on","this","closest","remove","ready","off"],"mappings":"AAAA,IAAIA,eAAiB,mBACjBC,aAAe,wBAEnB,SAASC,YACR,IAAIC,EAAMC,OAAOC,SAASC,KAAKC,QAAQH,OAAOC,SAASG,KAAK,IAE5D,OADeL,EAAIM,UAAUN,EAAIO,YAAY,KAAO,GA4BrD,SAASC,4BACRC,WAAaC,EAAE,WAAWC,MAC1BC,SAAWb,YAEXW,EAAEG,IAAIC,SAAW,wBAA0BF,SAAW,IAAMH,WAAY,WACvEM,eAKF,SAASC,2BACRC,WAAa,IAAIC,MACjBR,EAAE,4BAA4BS,KAAK,SAASC,EAAOC,GAClDJ,WAAWK,KAAKZ,EAAEW,GAAIE,KAAK,qBAE5Bb,EAAEc,KAAKV,SAAW,0BAA4BF,UAAYK,WAAYQ,KAAKC,UAAUT,aACpF,cAKF,SAASF,aACRH,SAAUb,YACPW,EAAE,YAAYiB,QACdjB,EAAE,gBAAgBiB,QACrBjB,EAAEkB,QAAQd,SAAS,qBAAqBF,SAAU,SAASW,GAC1DM,cAAgBN,EAChBO,YAAc,MAEe,IAA1BD,cAAcE,UACPC,sBAAsBH,eACG,UAAtBnB,EAAE,WAAWC,OACfD,EAAE,YAAYuB,UACnBC,OAAQ,SAAUC,EAAGC,GACpBpB,8BAGFN,EAAE,gBAAgBuB,UACjBC,OAAQ,SAAUC,EAAGC,GACpBpB,+BAKON,EAAE,YAAYuB,SAAU,cAC1BvB,EAAE,YAAYuB,SAAU,WACxBvB,EAAE,gBAAgBuB,SAAU,eAtE1CvB,EAAE2B,UAAUC,GAAG,QAAS,gBAAgB,WACvC1B,SAAUb,YACsB,WAA7BW,EAAE6B,MAAMhB,KAAK,aACfb,EAAEG,IAAIC,SAAS,yBAAyBF,SAAW,IAAMF,EAAE6B,MAAMhB,KAAK,cAGtEb,EAAEG,IAAIC,SAAS,4BAA4BF,SAAW,IAAMF,EAAE6B,MAAMhB,KAAK,YAE1Eb,EAAE6B,MAAMC,QAAQ,oBAAoBC,WAKrC/B,EAAE2B,UAAUK,MAAM,WACjB3B,aAEAL,EAAE2B,UAAUM,IAAI,SAAU,WAC1BjC,EAAE2B,UAAUC,GAAG,SAAU,UAAW,WACnC9B","file":"loadDrawer.min.js","sourcesContent":["var targetTemplate = \"#drawer-template\";\nvar listTemplate = \"#drawer-list-template\";\n\nfunction getDrawer() {\n\tvar url = window.location.href.replace(window.location.hash,\"\");\n\tvar drawerId = url.substring(url.lastIndexOf('/') + 1);\n\treturn drawerId;\n}\n\n$(document).on(\"click\", \".removeButton\",function () {\n\tdrawerId= getDrawer();\n\tif($(this).data(\"assettype\") == \"excerpt\") {\n\t\t$.get(basePath+\"drawers/removeExcerpt/\"+drawerId + \"/\" + $(this).data(\"excerptid\"));\n\t}\n\telse {\n\t\t$.get(basePath+\"drawers/removeFromDrawer/\"+drawerId + \"/\" + $(this).data(\"assetid\"));\n\t}\n\t$(this).closest('.searchContainer').remove();\n\n\n});\n\n$(document).ready(function() {\n\tloadDrawer();\n\n\t$(document).off(\"change\", \".sortBy\");\n\t$(document).on(\"change\", \".sortBy\", function() {\n\t\tupdateDrawerSortAndReload();\n\t});\n\n\t\n});\n\nfunction updateDrawerSortAndReload() {\n\tdrawerSort = $(\".sortBy\").val();\n\tdrawerId = getDrawer();\n\n\t$.get(basePath + \"drawers/setSortOrder/\" + drawerId + \"/\" + drawerSort, function() {\n\t\tloadDrawer();\t\n\t});\n\t\n}\n\nfunction serializeDrawerAndUpdate() {\n\torderArray = new Array();\n\t$(\".active .searchContainer\").each(function(index, el) {\n\t\torderArray.push($(el).data(\"drawerobjectid\"));\n\t});\n\t$.post(basePath + \"drawers/setCustomOrder/\" + drawerId, { orderArray: JSON.stringify(orderArray) }, \n\t\tfunction() {\n\t\t}\n\t);\n}\n\nfunction loadDrawer() {\n\tdrawerId= getDrawer();\n    $(\"#results\").empty();\n    $(\"#listResults\").empty();\n\t$.getJSON(basePath+\"drawers/getDrawer/\"+drawerId, function(data){\n\t\tcachedResults = data;\n\t\tcachedDates = null;\n\n\t\tif(cachedResults.success === true) {\n            populateSearchResults(cachedResults);\n            if($(\".sortBy\").val() == \"custom\") {\n            \t$(\"#results\").sortable({\n\t    \t\t\tupdate: function (e, ui) {\n\t    \t\t\t\tserializeDrawerAndUpdate();\n\t\t\t\t\t}\n    \t\t\t});\n    \t\t\t$(\"#listResults\").sortable({\n\t    \t\t\tupdate: function (e, ui) {\n\t    \t\t\t\tserializeDrawerAndUpdate();\n\t\t\t\t\t}\n    \t\t\t});\n            }\n            else {\n            \tif($(\"#results\").sortable( \"instance\" )) {\n            \t\t$(\"#results\").sortable( \"destroy\" );\n            \t\t$(\"#listResults\").sortable( \"destroy\" );\t\n            \t}\n            }\n            \n        }\n    });\n}\n"]}