{"version":3,"sources":["loadDrawer.js"],"names":["targetTemplate","listTemplate","getDrawer","url","window","location","href","replace","hash","substring","lastIndexOf","updateDrawerSortAndReload","drawerSort","$","val","drawerId","get","basePath","loadDrawer","serializeDrawerAndUpdate","orderArray","Array","each","index","el","push","data","post","JSON","stringify","length","empty","getJSON","cachedResults","cachedDates","success","populateSearchResults","sortable","update","e","ui","document","on","this","closest","remove","ready","off"],"mappings":"AAAA,IAAIA,eAAiB,mBACjBC,aAAe,wBAEnB,SAASC,YACR,IAAIC,EAAMC,OAAOC,SAASC,KAAKC,QAAQH,OAAOC,SAASG,KAAK,IAE5D,OADeL,EAAIM,UAAUN,EAAIO,YAAY,KAAO,GA4BrD,SAASC,4BACRC,WAAaC,EAAE,WAAWC,MAC1BC,SAAWb,YAEXW,EAAEG,IAAIC,SAAW,wBAA0BF,SAAW,IAAMH,YAAY,WACvEM,gBAKF,SAASC,2BACRC,WAAa,IAAIC,MACjBR,EAAE,4BAA4BS,MAAK,SAASC,EAAOC,GAClDJ,WAAWK,KAAKZ,EAAEW,GAAIE,KAAK,sBAE5Bb,EAAEc,KAAKV,SAAW,0BAA4BF,SAAU,CAAEK,WAAYQ,KAAKC,UAAUT,cACpF,eAKF,SAASF,aACRH,SAAUb,YACJa,SAASe,OAAS,KAGxBjB,EAAE,YAAYkB,QACXlB,EAAE,gBAAgBkB,QAErBlB,EAAEmB,QAAQf,SAAS,qBAAqBF,UAAU,SAASW,GAC1DO,cAAgBP,EAChBQ,YAAc,MAEe,IAA1BD,cAAcE,UACPC,sBAAsBH,eACG,UAAtBpB,EAAE,WAAWC,OACfD,EAAE,YAAYwB,SAAS,CAC5BC,OAAQ,SAAUC,EAAGC,GACpBrB,8BAGFN,EAAE,gBAAgBwB,SAAS,CAC1BC,OAAQ,SAAUC,EAAGC,GACpBrB,+BAKON,EAAE,YAAYwB,SAAU,cAC1BxB,EAAE,YAAYwB,SAAU,WACxBxB,EAAE,gBAAgBwB,SAAU,iBA1E1CxB,EAAE4B,UAAUC,GAAG,QAAS,iBAAgB,WACvC3B,SAAUb,YACsB,WAA7BW,EAAE8B,MAAMjB,KAAK,aACfb,EAAEG,IAAIC,SAAS,yBAAyBF,SAAW,IAAMF,EAAE8B,MAAMjB,KAAK,cAGtEb,EAAEG,IAAIC,SAAS,4BAA4BF,SAAW,IAAMF,EAAE8B,MAAMjB,KAAK,YAE1Eb,EAAE8B,MAAMC,QAAQ,oBAAoBC,YAKrChC,EAAE4B,UAAUK,OAAM,WACjB5B,aAEAL,EAAE4B,UAAUM,IAAI,SAAU,WAC1BlC,EAAE4B,UAAUC,GAAG,SAAU,WAAW,WACnC/B","file":"loadDrawer.min.js","sourcesContent":["var targetTemplate = \"#drawer-template\";\nvar listTemplate = \"#drawer-list-template\";\n\nfunction getDrawer() {\n\tvar url = window.location.href.replace(window.location.hash,\"\");\n\tvar drawerId = url.substring(url.lastIndexOf('/') + 1);\n\treturn drawerId;\n}\n\n$(document).on(\"click\", \".removeButton\",function () {\n\tdrawerId= getDrawer();\n\tif($(this).data(\"assettype\") == \"excerpt\") {\n\t\t$.get(basePath+\"drawers/removeExcerpt/\"+drawerId + \"/\" + $(this).data(\"excerptid\"));\n\t}\n\telse {\n\t\t$.get(basePath+\"drawers/removeFromDrawer/\"+drawerId + \"/\" + $(this).data(\"assetid\"));\n\t}\n\t$(this).closest('.searchContainer').remove();\n\n\n});\n\n$(document).ready(function() {\n\tloadDrawer();\n\n\t$(document).off(\"change\", \".sortBy\");\n\t$(document).on(\"change\", \".sortBy\", function() {\n\t\tupdateDrawerSortAndReload();\n\t});\n\n\t\n});\n\nfunction updateDrawerSortAndReload() {\n\tdrawerSort = $(\".sortBy\").val();\n\tdrawerId = getDrawer();\n\n\t$.get(basePath + \"drawers/setSortOrder/\" + drawerId + \"/\" + drawerSort, function() {\n\t\tloadDrawer();\t\n\t});\n\t\n}\n\nfunction serializeDrawerAndUpdate() {\n\torderArray = new Array();\n\t$(\".active .searchContainer\").each(function(index, el) {\n\t\torderArray.push($(el).data(\"drawerobjectid\"));\n\t});\n\t$.post(basePath + \"drawers/setCustomOrder/\" + drawerId, { orderArray: JSON.stringify(orderArray) }, \n\t\tfunction() {\n\t\t}\n\t);\n}\n\nfunction loadDrawer() {\n\tdrawerId= getDrawer();\n    if(drawerId.length > 10) {\n\t\treturn;\n\t}\n\t$(\"#results\").empty();\n    $(\"#listResults\").empty();\n\t\n\t$.getJSON(basePath+\"drawers/getDrawer/\"+drawerId, function(data){\n\t\tcachedResults = data;\n\t\tcachedDates = null;\n\n\t\tif(cachedResults.success === true) {\n            populateSearchResults(cachedResults);\n            if($(\".sortBy\").val() == \"custom\") {\n            \t$(\"#results\").sortable({\n\t    \t\t\tupdate: function (e, ui) {\n\t    \t\t\t\tserializeDrawerAndUpdate();\n\t\t\t\t\t}\n    \t\t\t});\n    \t\t\t$(\"#listResults\").sortable({\n\t    \t\t\tupdate: function (e, ui) {\n\t    \t\t\t\tserializeDrawerAndUpdate();\n\t\t\t\t\t}\n    \t\t\t});\n            }\n            else {\n            \tif($(\"#results\").sortable( \"instance\" )) {\n            \t\t$(\"#results\").sortable( \"destroy\" );\n            \t\t$(\"#listResults\").sortable( \"destroy\" );\t\n            \t}\n            }\n            \n        }\n    });\n}\n"]}