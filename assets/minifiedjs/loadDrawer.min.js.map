{"version":3,"sources":["loadDrawer.js"],"names":["getDrawer","url","window","location","href","replace","hash","drawerId","substring","lastIndexOf","updateDrawerSortAndReload","drawerSort","$","val","get","basePath","loadDrawer","serializeDrawerAndUpdate","orderArray","Array","each","index","el","push","data","post","JSON","stringify","empty","getJSON","cachedResults","cachedDates","success","populateSearchResults","sortable","update","e","ui","targetTemplate","listTemplate","document","on","this","closest","remove","ready","off"],"mappings":"AAGA,QAASA,aACR,GAAIC,GAAMC,OAAOC,SAASC,KAAKC,QAAQH,OAAOC,SAASG,KAAK,IACxDC,EAAWN,EAAIO,UAAUP,EAAIQ,YAAY,KAAO,EACpD,OAAOF,GA2BR,QAASG,6BACRC,WAAaC,EAAE,WAAWC,MAC1BN,SAAWP,YAEXY,EAAEE,IAAIC,SAAW,wBAA0BR,SAAW,IAAMI,WAAY,WACvEK,eAKF,QAASC,4BACRC,WAAa,GAAIC,OACjBP,EAAE,4BAA4BQ,KAAK,SAASC,EAAOC,GAClDJ,WAAWK,KAAKX,EAAEU,GAAIE,KAAK,qBAE5BZ,EAAEa,KAAKV,SAAW,0BAA4BR,UAAYW,WAAYQ,KAAKC,UAAUT,aACpF,cAKF,QAASF,cACRT,SAAUP,YACPY,EAAE,YAAYgB,QACdhB,EAAE,gBAAgBgB,QACrBhB,EAAEiB,QAAQd,SAAS,qBAAqBR,SAAU,SAASiB,GAC1DM,cAAgBN,EAChBO,YAAc,KAEXD,cAAcE,WAAY,IACnBC,sBAAsBH,eACG,UAAtBlB,EAAE,WAAWC,OACfD,EAAE,YAAYsB,UACnBC,OAAQ,SAAUC,EAAGC,GACpBpB,8BAGFL,EAAE,gBAAgBsB,UACjBC,OAAQ,SAAUC,EAAGC,GACpBpB,gCAKIL,EAAE,YAAYsB,SAAU,WACxBtB,EAAE,gBAAgBsB,SAAU,eA9EzC,GAAII,gBAAiB,mBACjBC,aAAe,uBAQnB3B,GAAE4B,UAAUC,GAAG,QAAS,gBAAgB,WACvClC,SAAUP,YACsB,WAA7BY,EAAE8B,MAAMlB,KAAK,aACfZ,EAAEE,IAAIC,SAAS,yBAAyBR,SAAW,IAAMK,EAAE8B,MAAMlB,KAAK,cAGtEZ,EAAEE,IAAIC,SAAS,4BAA4BR,SAAW,IAAMK,EAAE8B,MAAMlB,KAAK,YAE1EZ,EAAE8B,MAAMC,QAAQ,oBAAoBC,WAKrChC,EAAE4B,UAAUK,MAAM,WACjB7B,aAEAJ,EAAE4B,UAAUM,IAAI,SAAU,WAC1BlC,EAAE4B,UAAUC,GAAG,SAAU,UAAW,WACnC/B","file":"loadDrawer.min.js","sourcesContent":["var targetTemplate = \"#drawer-template\";\nvar listTemplate = \"#drawer-list-template\";\n\nfunction getDrawer() {\n\tvar url = window.location.href.replace(window.location.hash,\"\");\n\tvar drawerId = url.substring(url.lastIndexOf('/') + 1);\n\treturn drawerId;\n}\n\n$(document).on(\"click\", \".removeButton\",function () {\n\tdrawerId= getDrawer();\n\tif($(this).data(\"assettype\") == \"excerpt\") {\n\t\t$.get(basePath+\"drawers/removeExcerpt/\"+drawerId + \"/\" + $(this).data(\"excerptid\"));\n\t}\n\telse {\n\t\t$.get(basePath+\"drawers/removeFromDrawer/\"+drawerId + \"/\" + $(this).data(\"assetid\"));\n\t}\n\t$(this).closest('.searchContainer').remove();\n\n\n});\n\n$(document).ready(function() {\n\tloadDrawer();\n\n\t$(document).off(\"change\", \".sortBy\");\n\t$(document).on(\"change\", \".sortBy\", function() {\n\t\tupdateDrawerSortAndReload();\n\t});\n\n\t\n});\n\nfunction updateDrawerSortAndReload() {\n\tdrawerSort = $(\".sortBy\").val();\n\tdrawerId = getDrawer();\n\n\t$.get(basePath + \"drawers/setSortOrder/\" + drawerId + \"/\" + drawerSort, function() {\n\t\tloadDrawer();\t\n\t});\n\t\n}\n\nfunction serializeDrawerAndUpdate() {\n\torderArray = new Array();\n\t$(\".active .searchContainer\").each(function(index, el) {\n\t\torderArray.push($(el).data(\"drawerobjectid\"));\n\t});\n\t$.post(basePath + \"drawers/setCustomOrder/\" + drawerId, { orderArray: JSON.stringify(orderArray) }, \n\t\tfunction() {\n\t\t}\n\t);\n}\n\nfunction loadDrawer() {\n\tdrawerId= getDrawer();\n    $(\"#results\").empty();\n    $(\"#listResults\").empty();\n\t$.getJSON(basePath+\"drawers/getDrawer/\"+drawerId, function(data){\n\t\tcachedResults = data;\n\t\tcachedDates = null;\n\n\t\tif(cachedResults.success === true) {\n            populateSearchResults(cachedResults);\n            if($(\".sortBy\").val() == \"custom\") {\n            \t$(\"#results\").sortable({\n\t    \t\t\tupdate: function (e, ui) {\n\t    \t\t\t\tserializeDrawerAndUpdate();\n\t\t\t\t\t}\n    \t\t\t});\n    \t\t\t$(\"#listResults\").sortable({\n\t    \t\t\tupdate: function (e, ui) {\n\t    \t\t\t\tserializeDrawerAndUpdate();\n\t\t\t\t\t}\n    \t\t\t});\n            }\n            else {\n            \t$(\"#results\").sortable( \"destroy\" );\n            \t$(\"#listResults\").sortable( \"destroy\" );\n            }\n            \n        }\n    });\n}\n"]}