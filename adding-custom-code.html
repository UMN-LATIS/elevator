<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Adding Custom Code | Elevator Documentation</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.cfdb4e72.css" as="style"><link rel="preload" href="/assets/js/app.d7803277.js" as="script"><link rel="preload" href="/assets/js/9.db6dd7e3.js" as="script"><link rel="prefetch" href="/assets/js/1.049fc0e1.js"><link rel="prefetch" href="/assets/js/10.51c607f0.js"><link rel="prefetch" href="/assets/js/11.587a9453.js"><link rel="prefetch" href="/assets/js/12.7b5b72e8.js"><link rel="prefetch" href="/assets/js/13.b8237ddd.js"><link rel="prefetch" href="/assets/js/14.7382557e.js"><link rel="prefetch" href="/assets/js/15.7d5b6c8e.js"><link rel="prefetch" href="/assets/js/16.bffdefc6.js"><link rel="prefetch" href="/assets/js/17.80244e20.js"><link rel="prefetch" href="/assets/js/18.14a0e6c8.js"><link rel="prefetch" href="/assets/js/19.3daa2f74.js"><link rel="prefetch" href="/assets/js/2.1d7b4030.js"><link rel="prefetch" href="/assets/js/20.37402854.js"><link rel="prefetch" href="/assets/js/21.70c63818.js"><link rel="prefetch" href="/assets/js/22.7bb1e80c.js"><link rel="prefetch" href="/assets/js/23.98d971c9.js"><link rel="prefetch" href="/assets/js/24.fe3bc52c.js"><link rel="prefetch" href="/assets/js/25.0c9a6325.js"><link rel="prefetch" href="/assets/js/26.8566bf6e.js"><link rel="prefetch" href="/assets/js/27.f9778513.js"><link rel="prefetch" href="/assets/js/28.d515cffe.js"><link rel="prefetch" href="/assets/js/29.644a3008.js"><link rel="prefetch" href="/assets/js/30.993968e4.js"><link rel="prefetch" href="/assets/js/31.724d7621.js"><link rel="prefetch" href="/assets/js/32.074bed82.js"><link rel="prefetch" href="/assets/js/33.b1750a2f.js"><link rel="prefetch" href="/assets/js/34.4a933207.js"><link rel="prefetch" href="/assets/js/35.0df6f9e4.js"><link rel="prefetch" href="/assets/js/36.7b39b9da.js"><link rel="prefetch" href="/assets/js/37.79026d66.js"><link rel="prefetch" href="/assets/js/38.aacb5b32.js"><link rel="prefetch" href="/assets/js/39.1ae0ce9f.js"><link rel="prefetch" href="/assets/js/40.b20dc560.js"><link rel="prefetch" href="/assets/js/41.d7186a9c.js"><link rel="prefetch" href="/assets/js/42.64bf9ce3.js"><link rel="prefetch" href="/assets/js/43.322bc2f7.js"><link rel="prefetch" href="/assets/js/44.f923d7b4.js"><link rel="prefetch" href="/assets/js/45.cb4378b5.js"><link rel="prefetch" href="/assets/js/46.609cbeca.js"><link rel="prefetch" href="/assets/js/47.c30cccae.js"><link rel="prefetch" href="/assets/js/48.9439176e.js"><link rel="prefetch" href="/assets/js/5.bb8da514.js"><link rel="prefetch" href="/assets/js/6.f4bbfbeb.js"><link rel="prefetch" href="/assets/js/7.d3fc5291.js"><link rel="prefetch" href="/assets/js/8.a621374c.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.ff88e561.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cfdb4e72.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><header id="umnhf-h" role="banner" class="umnhf"><link rel="stylesheet" href="https://chimein2.cla.umn.edu/umn/css/2015-tc.css"> <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet"> <link href="https://fonts.googleapis.com/css?family=Amatic+SC" rel="stylesheet"> <link href="https://fonts.googleapis.com/css?family=Itim" rel="stylesheet"> <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> <div id="skipLinks"><a href="#main-nav">Main navigation</a><a href="#main-content">Main content</a></div> <div class="printer"><div class="left"></div><div class="right"><strong>University of Minnesota</strong><br>http://twin-cities.umn.edu/<br>612-625-5000</div></div> <div id="umnhf-h-mast" class="umnhf"><a id="umnhf-h-logo" href="http://twin-cities.umn.edu/" class="umnhf"><span>Go to the U of M home page</span></a> <ul id="umnhf-h-ql" class="umnhf"><li><a href="http://onestop.umn.edu/">One Stop</a></li> <li class="umnhf"><a href="https://www.myu.umn.edu/">MyU <span></span>: For Students, Faculty, and Staff</a></li></ul> <button id="umnhf-m-search" class="umnhf">Search</button></div> <form id="umnhf-h-search" action="//search.umn.edu/tc/" method="get" title="Search Websites and People" role="search" class="umnhf umnhf-search"><label for="umnhf-h-st" class="umnhf">Search</label> <input id="umnhf-h-st" type="text" name="q" class="umnhf"> <label for="umnhf-h-sb" class="umnhf">Submit search query</label> <input id="umnhf-h-sb" type="submit" value class="umnhf"></form></header> <div class="vuepress-nav"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Elevator Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/help/" class="nav-link">Help</a></div><div class="nav-item"><a href="/updates/" class="nav-link">Updates</a></div><div class="nav-item"><a href="/features/" class="nav-link">Features</a></div> <a href="https://github.com/umn-latis/elevator" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/help/" class="nav-link">Help</a></div><div class="nav-item"><a href="/updates/" class="nav-link">Updates</a></div><div class="nav-item"><a href="/features/" class="nav-link">Features</a></div> <a href="https://github.com/umn-latis/elevator" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Using Elevator</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/searching-and-browsing.html" class="sidebar-link">Searching and Browsing</a></li><li><a href="/using-drawers.html" class="sidebar-link">Working with Drawers</a></li><li><a href="/embedding-assets.html" class="sidebar-link">Embedding Elevator Assets</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Curating an Elevator Instance</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/curating.html" class="sidebar-link">Adding and Editing Assets</a></li><li><a href="/3dmodels.html" class="sidebar-link">3D Models</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Managing an Elevator Instance</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/terms.html" class="sidebar-link">Terms and Topics</a></li><li><a href="/templates.html" class="sidebar-link">Working with Templates</a></li><li><a href="/field-types.html" class="sidebar-link">Types of Fields</a></li><li><a href="/permissions.html" class="sidebar-link">Permissions</a></li><li><a href="/collections.html" class="sidebar-link">Collections</a></li><li><a href="/file-groups.html" class="sidebar-link">File Handler Groups</a></li><li><a href="/importing-and-exporting.html" class="sidebar-link">Bulk Importing and Exporing</a></li><li><a href="/google-analytics.html" class="sidebar-link">Google Analytics</a></li><li><a href="/adding-custom-code.html" aria-current="page" class="active sidebar-link">Adding Custom Code</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/adding-custom-code.html#custom-header-and-footer" class="sidebar-link">Custom Header and Footer</a></li><li class="sidebar-sub-header"><a href="/adding-custom-code.html#using-custom-javascript-in-the-vue-interface" class="sidebar-link">Using Custom JavaScript in the Vue Interface</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/adding-custom-code.html#elevator-static-content-page-content-loaded-event" class="sidebar-link">elevator:static-content-page:content-loaded Event</a></li><li class="sidebar-sub-header"><a href="/adding-custom-code.html#elevator-static-content-page-images-loaded-event" class="sidebar-link">elevator:static-content-page:images-loaded Event</a></li></ul></li><li class="sidebar-sub-header"><a href="/adding-custom-code.html#best-practices" class="sidebar-link">Best Practices</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/adding-custom-code.html#use-a-light-touch" class="sidebar-link">Use a light touch</a></li><li class="sidebar-sub-header"><a href="/adding-custom-code.html#use-event-listeners-instead-of-inline-execution" class="sidebar-link">Use Event Listeners Instead of Inline Execution</a></li><li class="sidebar-sub-header"><a href="/adding-custom-code.html#check-for-element-existence" class="sidebar-link">Check for Element Existence</a></li><li class="sidebar-sub-header"><a href="/adding-custom-code.html#avoid-memory-leaks" class="sidebar-link">Avoid Memory Leaks</a></li></ul></li></ul></li></ul></section></li><li><a href="/faq.html" class="sidebar-link">Frequently Asked Questions</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="adding-custom-code"><a href="#adding-custom-code" class="header-anchor">#</a> Adding Custom Code</h1> <p>Elevator allows administrators to add custom HTML, CSS, and JavaScript to enhance or customize the user interface. These features are only available to <strong>instance administrators</strong>.</p> <p>To add a custom header, footer, or CSS to Elevator, go to: <code>Menu &gt; Admin &gt; Instance Settings</code>.</p> <p><img src="/assets/img/open-admin-instance-settings.ce55ac92.png" alt="Open instance settings by clicking the main menu (hamburger) icon, then choosing &quot;Admin&quot;, and &quot;Instance Settings&quot;"></p> <p><img src="/assets/img/custom-header-footer.1413432c.png" alt="The custom styling and display section includes: display options for when the custom header/footer should appear and areas for inputting custom code for header, footer, and custom CSS."></p> <h2 id="custom-header-and-footer"><a href="#custom-header-and-footer" class="header-anchor">#</a> Custom Header and Footer</h2> <p>A custom header/footer is useful for adding institutional branding, banners you want your users to see, or even <a href="#using-custom-javascript-in-the-vue-interface">custom JavaScript</a>.</p> <p>To include a custom header/footer to your Elevator instance, add the HTML, CSS, or JavaScript code in the textarea.</p> <p><img src="/assets/img/custom-header-umn.e196eee3.png" alt="A custom header for the University of Minnesota showing institutional branding"></p> <p><strong>Display Options:</strong></p> <ul><li><strong>Never (default)</strong>: Custom header and footer will not appear</li> <li><strong>Always</strong>: Custom header and footer will appear on every static page</li> <li><strong>Only on Home Page</strong>: Custom header and footer will only appear on the home page</li></ul> <h2 id="using-custom-javascript-in-the-vue-interface"><a href="#using-custom-javascript-in-the-vue-interface" class="header-anchor">#</a> Using Custom JavaScript in the Vue Interface</h2> <p>Elevator's Vue interface is built as a Single-Page Application (SPA), which means pages load dynamically without full page refreshes. This has important implications for custom JavaScript:</p> <ul><li>Standard browser events like <code>DOMContentLoaded</code> and <code>window.load</code> only fire once when the application first loads</li> <li>Navigating between pages doesn't trigger these events again</li></ul> <p>To solve this, Elevator provides <a href="https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent" target="_blank" rel="noopener noreferrer"><strong>custom JavaScript events</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> that fire whenever page content loads. These events allow your custom code to respond to navigation and content loading in the SPA environment.</p> <h3 id="elevator-static-content-page-content-loaded-event"><a href="#elevator-static-content-page-content-loaded-event" class="header-anchor">#</a> <code>elevator:static-content-page:content-loaded</code> Event</h3> <p>The <code>elevator:static-content-page:content-loaded</code> event fires when the page's HTML loads. Use this event when you need to interact with page content as soon as it's available.</p> <p><strong>Event Detail:</strong></p> <p>The event provides additional information in <code>event.detail</code>:</p> <ul><li><code>pageId</code> (number): The ID of the page that was loaded</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// ✅ Example</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'elevator:static-content-page:content-loaded'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// run your custom JavaScript here</span>
  <span class="token keyword">const</span> pageId <span class="token operator">=</span> event<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>pageId<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Page </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pageId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> content loaded</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="elevator-static-content-page-images-loaded-event"><a href="#elevator-static-content-page-images-loaded-event" class="header-anchor">#</a> <code>elevator:static-content-page:images-loaded</code> Event</h3> <p>The <code>elevator:static-content-page:images-loaded</code> event fires when all images on the page have finished loading (or after a 10-second timeout). Use this event when you need to work with image dimensions or initialize features that depend on fully-loaded images (e.g., an image carousel).</p> <p><strong>Event Detail:</strong></p> <p>The event provides additional information in <code>event.detail</code>:</p> <ul><li><code>pageId</code> (number): The ID of the page that was loaded</li> <li><code>images</code> (HTMLImageElement[]): Array of all image elements on the page</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// ✅ Example</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'elevator:static-content-page:images-loaded'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> pageId <span class="token operator">=</span> event<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>pageId<span class="token punctuation">;</span>
  <span class="token keyword">const</span> images <span class="token operator">=</span> event<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>images<span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Page </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pageId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> has </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>images<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> images loaded</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Initialize image-dependent features</span>
  <span class="token keyword">const</span> carousel <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.carousel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>carousel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">initCarousel</span><span class="token punctuation">(</span>carousel<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="best-practices"><a href="#best-practices" class="header-anchor">#</a> Best Practices</h2> <h3 id="use-a-light-touch"><a href="#use-a-light-touch" class="header-anchor">#</a> Use a light touch</h3> <p>Elevator is a dynamic platform with new features added regularly. Additionally, your users might be working on a desktop, laptop, mobile devices, or using assistive technologies like screenreaders.</p> <p>Keep your custom code simple. Use standards-compliant HTML and CSS. Be wary of too much JavaScript: it could break things for some users if it's too tightly coupled to a particular interface.</p> <h3 id="use-event-listeners-instead-of-inline-execution"><a href="#use-event-listeners-instead-of-inline-execution" class="header-anchor">#</a> Use Event Listeners Instead of Inline Execution</h3> <p>❌ <strong>Don't do this:</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// This only runs once when the app first loads</span>
<span class="token keyword">const</span> carousel <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.carousel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">initCarousel</span><span class="token punctuation">(</span>carousel<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>✅ <strong>Do this instead:</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// This runs every time a page with a carousel loads</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'elevator:static-content-page:images-loaded'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> carousel <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.carousel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>carousel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">initCarousel</span><span class="token punctuation">(</span>carousel<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="check-for-element-existence"><a href="#check-for-element-existence" class="header-anchor">#</a> Check for Element Existence</h3> <p>Not all pages will have the elements your code is looking for. Always check if elements exist before trying to use them, or use the <code>pageId</code> with the event details.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'elevator:static-content-page:content-loaded'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Only create a gallery on pageId 6</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>pageId <span class="token operator">!==</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Check that the element exists</span>
  <span class="token keyword">const</span> gallery <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.photo-group'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>gallery<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// Exit early if element doesn't exist</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Safe to work with gallery here</span>
  <span class="token function">initPhotoGallery</span><span class="token punctuation">(</span>gallery<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="avoid-memory-leaks"><a href="#avoid-memory-leaks" class="header-anchor">#</a> Avoid Memory Leaks</h3> <p>If your code adds event listeners to page elements, make sure to clean up old handlers before adding new ones to avoid memory leaks.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> cleanupFns <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'elevator:static-content-page:content-loaded'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Clean up old handlers</span>
  cleanupFns<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">cleanup</span> <span class="token operator">=&gt;</span> <span class="token function">cleanup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  cleanupFns <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> buttons <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.custom-button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  buttons<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">button</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Button clicked'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Create a cleanup function</span>
    <span class="token keyword">const</span> <span class="token function-variable function">cleanup</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> button<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Store cleanup function</span>
    cleanupFns<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cleanup<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/umn-latis/elevator/edit/develop/docs/adding-custom-code.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/google-analytics.html" class="prev">
          Google Analytics
        </a></span> <span class="next"><a href="/faq.html">
          Frequently Asked Questions
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d7803277.js" defer></script><script src="/assets/js/9.db6dd7e3.js" defer></script>
  </body>
</html>
